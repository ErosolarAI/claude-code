{"version":3,"names":["_theme","require","identity","value","LANGUAGE_ALIASES","js","javascript","mjs","cjs","jsx","ts","tsx","typescript","py","python","bash","sh","shell","zsh","powershell","go","rust","rs","rb","ruby","php","java","cs","csharp","dotnet","cpp","cxx","hpp","cc","c","swift","kt","kotlin","sql","postgres","mysql","sqlite","json","jsonc","LANGUAGE_LABELS","IDENTIFIER_START_C","IDENTIFIER_PART_C","IDENTIFIER_START_ALPHA","IDENTIFIER_PART_ALPHA","IDENTIFIER_PART_SHELL","COMMON_C_KEYWORDS","TYPESCRIPT_KEYWORDS","JAVA_KEYWORDS","CSHARP_KEYWORDS","CPP_KEYWORDS","GO_KEYWORDS","RUST_KEYWORDS","PYTHON_KEYWORDS","SHELL_KEYWORDS","RUBY_KEYWORDS","PHP_KEYWORDS","SQL_KEYWORDS","COMMON_C_TYPES","GO_TYPES","RUST_TYPES","PYTHON_TYPES","RUBY_TYPES","PHP_TYPES","SQL_TYPES","JS_BUILTINS","PY_BUILTINS","SHELL_BUILTINS","GO_BUILTINS","RUST_BUILTINS","RUBY_BUILTINS","PHP_BUILTINS","JS_CONSTANTS","PY_CONSTANTS","SHELL_CONSTANTS","GO_CONSTANTS","RUST_CONSTANTS","RUBY_CONSTANTS","PHP_CONSTANTS","SQL_CONSTANTS","LANGUAGE_PROFILES","createProfile","keywords","types","builtins","constants","commentIndicators","stringDelimiters","identifierStart","identifierPart","decoratorPrefix","highlightVariables","highlightAndWrapCode","code","language","width","normalized","normalizeLanguage","profile","id","tokenizer","selectTokenizer","available","Math","max","Number","isFinite","floor","sanitized","replace","lines","raw","split","tokens","wrapped","wrapTokens","length","push","languageLabel","label","trimmed","trim","key","toLowerCase","undefined","toUpperCase","tokenizeJsonLine","tokenizeGenericLine","line","text","config","toWordSet","values","Set","map","sort","a","b","index","formatter","rest","slice","comment","find","indicator","startsWith","theme","ui","muted","char","charAt","test","start","span","readVariable","accent","next","decorator","readIdentifier","includes","literal","readString","secondary","isNumberStart","numberToken","readNumber","identifier","pickIdentifierFormatter","isKey","isJsonKey","primary","remaining","warning","cursor","current","used","flush","token","lower","has","delimiter"],"sources":["codeHighlighter.ts"],"sourcesContent":["import { theme } from './theme.js';\n\ntype Formatter = (value: string) => string;\n\ninterface Token {\n  text: string;\n  formatter?: Formatter;\n}\n\ntype Tokenizer = (line: string) => Token[];\n\ntype HighlightLanguage =\n  | 'javascript'\n  | 'typescript'\n  | 'python'\n  | 'shell'\n  | 'go'\n  | 'rust'\n  | 'ruby'\n  | 'php'\n  | 'java'\n  | 'csharp'\n  | 'cpp'\n  | 'c'\n  | 'swift'\n  | 'kotlin'\n  | 'sql'\n  | 'json';\n\ninterface LanguageProfile {\n  keywords: ReadonlySet<string>;\n  types?: ReadonlySet<string>;\n  builtins?: ReadonlySet<string>;\n  constants?: ReadonlySet<string>;\n  commentIndicators: string[];\n  stringDelimiters: string[];\n  identifierStart: RegExp;\n  identifierPart: RegExp;\n  decoratorPrefix?: boolean;\n  highlightVariables?: boolean;\n}\n\ninterface NormalizedLanguage {\n  id: HighlightLanguage | null;\n  label: string | null;\n}\n\nexport interface HighlightedCodeBlock {\n  lines: string[];\n  languageLabel: string | null;\n}\n\nconst identity: Formatter = (value) => value;\n\nconst LANGUAGE_ALIASES: Record<string, HighlightLanguage> = {\n  js: 'javascript',\n  javascript: 'javascript',\n  mjs: 'javascript',\n  cjs: 'javascript',\n  jsx: 'typescript',\n  ts: 'typescript',\n  tsx: 'typescript',\n  typescript: 'typescript',\n  py: 'python',\n  python: 'python',\n  bash: 'shell',\n  sh: 'shell',\n  shell: 'shell',\n  zsh: 'shell',\n  powershell: 'shell',\n  go: 'go',\n  rust: 'rust',\n  rs: 'rust',\n  rb: 'ruby',\n  ruby: 'ruby',\n  php: 'php',\n  java: 'java',\n  cs: 'csharp',\n  csharp: 'csharp',\n  dotnet: 'csharp',\n  cpp: 'cpp',\n  cxx: 'cpp',\n  hpp: 'cpp',\n  cc: 'cpp',\n  c: 'c',\n  swift: 'swift',\n  kt: 'kotlin',\n  kotlin: 'kotlin',\n  sql: 'sql',\n  postgres: 'sql',\n  mysql: 'sql',\n  sqlite: 'sql',\n  json: 'json',\n  jsonc: 'json',\n};\n\nconst LANGUAGE_LABELS: Record<string, string> = {\n  js: 'JS',\n  javascript: 'JS',\n  mjs: 'JS',\n  cjs: 'JS',\n  jsx: 'JSX',\n  ts: 'TS',\n  tsx: 'TSX',\n  typescript: 'TS',\n  py: 'PY',\n  python: 'PY',\n  bash: 'BASH',\n  sh: 'SH',\n  shell: 'BASH',\n  zsh: 'ZSH',\n  powershell: 'PS',\n  go: 'GO',\n  rust: 'RUST',\n  rs: 'RUST',\n  ruby: 'RUBY',\n  rb: 'RB',\n  php: 'PHP',\n  java: 'JAVA',\n  cs: 'C#',\n  csharp: 'C#',\n  dotnet: '.NET',\n  cpp: 'C++',\n  cxx: 'C++',\n  hpp: 'C++',\n  cc: 'C++',\n  c: 'C',\n  swift: 'SWIFT',\n  kt: 'KOTLIN',\n  kotlin: 'KOTLIN',\n  sql: 'SQL',\n  postgres: 'SQL',\n  mysql: 'SQL',\n  sqlite: 'SQL',\n  json: 'JSON',\n  jsonc: 'JSON',\n};\n\nconst IDENTIFIER_START_C = /[A-Za-z_$]/;\nconst IDENTIFIER_PART_C = /[A-Za-z0-9_$]/;\nconst IDENTIFIER_START_ALPHA = /[A-Za-z_]/;\nconst IDENTIFIER_PART_ALPHA = /[A-Za-z0-9_]/;\nconst IDENTIFIER_PART_SHELL = /[A-Za-z0-9_-]/;\n\nconst COMMON_C_KEYWORDS = [\n  'const',\n  'let',\n  'var',\n  'function',\n  'return',\n  'if',\n  'else',\n  'switch',\n  'case',\n  'default',\n  'for',\n  'while',\n  'do',\n  'break',\n  'continue',\n  'class',\n  'extends',\n  'implements',\n  'new',\n  'this',\n  'super',\n  'try',\n  'catch',\n  'finally',\n  'throw',\n  'import',\n  'from',\n  'export',\n  'await',\n  'async',\n  'yield',\n  'static',\n  'public',\n  'private',\n  'protected',\n  'continue',\n  'break',\n  'typeof',\n  'instanceof',\n  'delete',\n  'in',\n  'of',\n];\n\nconst TYPESCRIPT_KEYWORDS = ['namespace', 'abstract', 'readonly', 'declare', 'keyof', 'infer', 'satisfies'];\nconst JAVA_KEYWORDS = ['package', 'synchronized', 'volatile', 'transient', 'implements', 'extends', 'throws'];\nconst CSHARP_KEYWORDS = [\n  'namespace',\n  'async',\n  'await',\n  'var',\n  'dynamic',\n  'lock',\n  'unsafe',\n  'checked',\n  'unchecked',\n  'partial',\n  'record',\n  'ref',\n  'when',\n  'where',\n];\nconst CPP_KEYWORDS = ['constexpr', 'typename', 'template', 'namespace', 'using', 'virtual', 'override', 'mutable', 'explicit', 'friend'];\nconst GO_KEYWORDS = [\n  'package',\n  'import',\n  'var',\n  'const',\n  'func',\n  'struct',\n  'interface',\n  'map',\n  'chan',\n  'go',\n  'defer',\n  'select',\n  'range',\n  'fallthrough',\n  'type',\n];\nconst RUST_KEYWORDS = [\n  'fn',\n  'let',\n  'mut',\n  'impl',\n  'trait',\n  'struct',\n  'enum',\n  'pub',\n  'crate',\n  'super',\n  'use',\n  'move',\n  'match',\n  'ref',\n  'self',\n  'where',\n  'dyn',\n  'async',\n  'await',\n  'unsafe',\n  'extern',\n  'type',\n  'const',\n  'static',\n];\nconst PYTHON_KEYWORDS = [\n  'def',\n  'class',\n  'return',\n  'if',\n  'elif',\n  'else',\n  'for',\n  'while',\n  'break',\n  'continue',\n  'pass',\n  'import',\n  'from',\n  'as',\n  'try',\n  'except',\n  'finally',\n  'raise',\n  'with',\n  'lambda',\n  'yield',\n  'global',\n  'nonlocal',\n  'assert',\n  'del',\n  'and',\n  'or',\n  'not',\n  'is',\n  'in',\n];\nconst SHELL_KEYWORDS = ['if', 'then', 'fi', 'elif', 'else', 'for', 'while', 'in', 'do', 'done', 'case', 'esac', 'function', 'select', 'until', 'time'];\nconst RUBY_KEYWORDS = [\n  'def',\n  'class',\n  'module',\n  'if',\n  'elsif',\n  'else',\n  'end',\n  'do',\n  'while',\n  'until',\n  'begin',\n  'rescue',\n  'ensure',\n  'case',\n  'when',\n  'yield',\n  'return',\n  'self',\n  'super',\n  'alias',\n  'undef',\n];\nconst PHP_KEYWORDS = [\n  'function',\n  'class',\n  'interface',\n  'trait',\n  'if',\n  'else',\n  'elseif',\n  'endif',\n  'foreach',\n  'endforeach',\n  'while',\n  'endwhile',\n  'do',\n  'switch',\n  'endswitch',\n  'case',\n  'break',\n  'continue',\n  'public',\n  'private',\n  'protected',\n  'static',\n  'abstract',\n  'final',\n  'namespace',\n  'use',\n  'as',\n  'return',\n  'throw',\n  'try',\n  'catch',\n  'finally',\n  'yield',\n];\nconst SQL_KEYWORDS = [\n  'select',\n  'from',\n  'where',\n  'insert',\n  'into',\n  'values',\n  'update',\n  'set',\n  'delete',\n  'create',\n  'table',\n  'drop',\n  'alter',\n  'join',\n  'left',\n  'right',\n  'inner',\n  'outer',\n  'group',\n  'by',\n  'order',\n  'limit',\n  'offset',\n  'having',\n  'union',\n  'on',\n  'as',\n  'and',\n  'or',\n  'not',\n  'null',\n  'is',\n  'like',\n  'in',\n  'case',\n  'when',\n  'then',\n  'end',\n  'distinct',\n  'exists',\n  'between',\n];\n\nconst COMMON_C_TYPES = ['string', 'number', 'boolean', 'any', 'never', 'void', 'null', 'undefined', 'Promise', 'Array', 'Record', 'Map', 'Set'];\nconst GO_TYPES = ['string', 'int', 'int64', 'int32', 'bool', 'error', 'byte', 'rune', 'float64', 'float32', 'map', 'chan', 'interface', 'struct'];\nconst RUST_TYPES = ['String', 'str', 'Vec', 'u8', 'u16', 'u32', 'u64', 'usize', 'i32', 'i64', 'Result', 'Option', 'Box'];\nconst PYTHON_TYPES = ['int', 'float', 'str', 'list', 'dict', 'set', 'tuple', 'bool', 'Any'];\nconst RUBY_TYPES = ['String', 'Array', 'Hash', 'Symbol', 'Integer', 'Float'];\nconst PHP_TYPES = ['string', 'int', 'float', 'bool', 'array', 'callable', 'iterable', 'object', 'mixed', 'void', 'never'];\nconst SQL_TYPES = ['int', 'integer', 'text', 'varchar', 'timestamp', 'date', 'json', 'boolean', 'serial', 'uuid'];\n\nconst JS_BUILTINS = ['console', 'process', 'Math', 'Date', 'Promise', 'JSON', 'setTimeout', 'setInterval'];\nconst PY_BUILTINS = ['print', 'len', 'range', 'list', 'dict', 'set', 'tuple', 'enumerate', 'zip', 'map', 'filter', 'sum'];\nconst SHELL_BUILTINS = ['echo', 'cd', 'alias', 'export', 'local', 'readonly', 'return', 'function', 'trap', 'printf', 'test'];\nconst GO_BUILTINS = ['make', 'len', 'cap', 'append', 'copy', 'panic', 'recover', 'new', 'print', 'println'];\nconst RUST_BUILTINS = ['println', 'format', 'vec', 'dbg'];\nconst RUBY_BUILTINS = ['puts', 'print', 'gets', 'attr_reader', 'attr_accessor', 'attr_writer'];\nconst PHP_BUILTINS = ['echo', 'print', 'isset', 'empty', 'array_merge', 'count'];\n\nconst JS_CONSTANTS = ['true', 'false', 'null', 'undefined', 'NaN', 'Infinity'];\nconst PY_CONSTANTS = ['true', 'false', 'none'];\nconst SHELL_CONSTANTS = ['true', 'false'];\nconst GO_CONSTANTS = ['true', 'false', 'nil', 'iota'];\nconst RUST_CONSTANTS = ['true', 'false', 'none', 'some', 'ok', 'err'];\nconst RUBY_CONSTANTS = ['true', 'false', 'nil'];\nconst PHP_CONSTANTS = ['true', 'false', 'null'];\nconst SQL_CONSTANTS = ['true', 'false', 'null'];\n\nconst LANGUAGE_PROFILES: Partial<Record<HighlightLanguage, LanguageProfile>> = {\n  javascript: createProfile({\n    keywords: [...COMMON_C_KEYWORDS],\n    types: COMMON_C_TYPES,\n    builtins: JS_BUILTINS,\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\", '`'],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  typescript: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, ...TYPESCRIPT_KEYWORDS],\n    types: [...COMMON_C_TYPES, 'readonly', 'Pick', 'Partial'],\n    builtins: JS_BUILTINS,\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\", '`'],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n    decoratorPrefix: true,\n  }),\n  python: createProfile({\n    keywords: PYTHON_KEYWORDS,\n    types: PYTHON_TYPES,\n    builtins: PY_BUILTINS,\n    constants: PY_CONSTANTS,\n    commentIndicators: ['#'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_ALPHA,\n    decoratorPrefix: true,\n  }),\n  shell: createProfile({\n    keywords: SHELL_KEYWORDS,\n    builtins: SHELL_BUILTINS,\n    constants: SHELL_CONSTANTS,\n    commentIndicators: ['#'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_SHELL,\n    highlightVariables: true,\n  }),\n  go: createProfile({\n    keywords: GO_KEYWORDS,\n    types: GO_TYPES,\n    builtins: GO_BUILTINS,\n    constants: GO_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\", '`'],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_ALPHA,\n  }),\n  rust: createProfile({\n    keywords: RUST_KEYWORDS,\n    types: RUST_TYPES,\n    builtins: RUST_BUILTINS,\n    constants: RUST_CONSTANTS,\n    commentIndicators: ['//'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  ruby: createProfile({\n    keywords: RUBY_KEYWORDS,\n    types: RUBY_TYPES,\n    builtins: RUBY_BUILTINS,\n    constants: RUBY_CONSTANTS,\n    commentIndicators: ['#'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_ALPHA,\n  }),\n  php: createProfile({\n    keywords: PHP_KEYWORDS,\n    types: PHP_TYPES,\n    builtins: PHP_BUILTINS,\n    constants: PHP_CONSTANTS,\n    commentIndicators: ['//', '#'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_ALPHA,\n    highlightVariables: true,\n  }),\n  java: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, ...JAVA_KEYWORDS],\n    types: [...COMMON_C_TYPES, 'int', 'long', 'float', 'double', 'boolean', 'char', 'String'],\n    builtins: ['System', 'String', 'List', 'Map', 'Set'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  csharp: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, ...CSHARP_KEYWORDS],\n    types: [...COMMON_C_TYPES, 'int', 'long', 'float', 'double', 'bool', 'string', 'Task'],\n    builtins: ['Console', 'IEnumerable', 'List', 'Dictionary'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n    decoratorPrefix: true,\n  }),\n  cpp: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, ...CPP_KEYWORDS],\n    types: [...COMMON_C_TYPES, 'int', 'long', 'float', 'double', 'bool', 'char', 'std'],\n    builtins: ['std', 'cout', 'cin'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  c: createProfile({\n    keywords: [...COMMON_C_KEYWORDS],\n    types: ['int', 'long', 'float', 'double', 'bool', 'char', 'size_t', 'uint32_t', 'uint64_t'],\n    builtins: ['printf', 'scanf'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  swift: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, 'struct', 'protocol', 'extension', 'guard', 'defer'],\n    types: [...COMMON_C_TYPES, 'Int', 'Float', 'Double', 'String', 'Bool'],\n    builtins: ['print'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"'],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  kotlin: createProfile({\n    keywords: [...COMMON_C_KEYWORDS, 'fun', 'val', 'var', 'object', 'sealed', 'data', 'companion'],\n    types: [...COMMON_C_TYPES, 'Int', 'Long', 'Float', 'Double', 'String', 'Boolean'],\n    builtins: ['println', 'print'],\n    constants: JS_CONSTANTS,\n    commentIndicators: ['//', '/*'],\n    stringDelimiters: ['\"'],\n    identifierStart: IDENTIFIER_START_C,\n    identifierPart: IDENTIFIER_PART_C,\n  }),\n  sql: createProfile({\n    keywords: SQL_KEYWORDS,\n    types: SQL_TYPES,\n    constants: SQL_CONSTANTS,\n    commentIndicators: ['--', '#'],\n    stringDelimiters: ['\"', \"'\"],\n    identifierStart: IDENTIFIER_START_ALPHA,\n    identifierPart: IDENTIFIER_PART_ALPHA,\n  }),\n};\n\nexport function highlightAndWrapCode(code: string, language: string | undefined, width: number): HighlightedCodeBlock {\n  const normalized = normalizeLanguage(language);\n  const profile = normalized?.id ? LANGUAGE_PROFILES[normalized.id] ?? null : null;\n  const tokenizer = selectTokenizer(normalized?.id ?? null, profile);\n  const available = Math.max(1, Number.isFinite(width) ? Math.floor(width) : 80);\n  const sanitized = code.replace(/\\t/g, '  ');\n  const lines: string[] = [];\n\n  for (const raw of sanitized.split('\\n')) {\n    const tokens = tokenizer(raw);\n    const wrapped = wrapTokens(tokens, available);\n    if (wrapped.length) {\n      lines.push(...wrapped);\n    } else {\n      lines.push('');\n    }\n  }\n\n  if (!lines.length) {\n    lines.push('');\n  }\n\n  return {\n    lines,\n    languageLabel: normalized?.label ?? null,\n  };\n}\n\nfunction normalizeLanguage(value?: string): NormalizedLanguage | null {\n  if (!value) {\n    return null;\n  }\n  const trimmed = value.trim();\n  if (!trimmed) {\n    return null;\n  }\n  const key = trimmed.toLowerCase();\n  const id = LANGUAGE_ALIASES[key] ?? null;\n  const label = LANGUAGE_LABELS[key] ?? (id ? LANGUAGE_LABELS[id] : undefined) ?? trimmed.toUpperCase();\n  return { id, label };\n}\n\nfunction selectTokenizer(language: HighlightLanguage | null, profile: LanguageProfile | null): Tokenizer {\n  if (language === 'json') {\n    return tokenizeJsonLine;\n  }\n  if (profile) {\n    return tokenizeGenericLine(profile);\n  }\n  return (line) => (line.length ? [{ text: line }] : [{ text: '' }]);\n}\n\nfunction createProfile(config: {\n  keywords: string[];\n  types?: string[];\n  builtins?: string[];\n  constants?: string[];\n  commentIndicators: string[];\n  stringDelimiters: string[];\n  identifierStart: RegExp;\n  identifierPart: RegExp;\n  decoratorPrefix?: boolean;\n  highlightVariables?: boolean;\n}): LanguageProfile {\n  const profile: LanguageProfile = {\n    keywords: toWordSet(config.keywords),\n    commentIndicators: config.commentIndicators,\n    stringDelimiters: config.stringDelimiters,\n    identifierStart: config.identifierStart,\n    identifierPart: config.identifierPart,\n  };\n  if (config.types) {\n    profile.types = toWordSet(config.types);\n  }\n  if (config.builtins) {\n    profile.builtins = toWordSet(config.builtins);\n  }\n  if (config.constants) {\n    profile.constants = toWordSet(config.constants);\n  }\n  if (typeof config.decoratorPrefix === 'boolean') {\n    profile.decoratorPrefix = config.decoratorPrefix;\n  }\n  if (typeof config.highlightVariables === 'boolean') {\n    profile.highlightVariables = config.highlightVariables;\n  }\n  return profile;\n}\n\nfunction toWordSet(values: string[]): ReadonlySet<string> {\n  return new Set(values.map((value) => value.toLowerCase()));\n}\n\nfunction tokenizeGenericLine(profile: LanguageProfile): Tokenizer {\n  const commentIndicators = [...profile.commentIndicators].sort((a, b) => b.length - a.length);\n  return (line: string): Token[] => {\n    if (!line.length) {\n      return [{ text: '' }];\n    }\n\n    const tokens: Token[] = [];\n    let index = 0;\n\n    const push = (text: string, formatter?: Formatter) => {\n      if (!text) {\n        return;\n      }\n      tokens.push(formatter ? { text, formatter } : { text });\n    };\n\n    while (index < line.length) {\n      const rest = line.slice(index);\n\n      const comment = commentIndicators.find((indicator) => rest.startsWith(indicator));\n      if (comment) {\n        push(line.slice(index), theme.ui.muted);\n        break;\n      }\n\n      const char = line.charAt(index);\n\n      if (/\\s/.test(char)) {\n        const start = index;\n        while (index < line.length && /\\s/.test(line.charAt(index))) {\n          index += 1;\n        }\n        push(line.slice(start, index));\n        continue;\n      }\n\n      if (profile.highlightVariables && char === '$') {\n        const span = readVariable(line, index, profile);\n        push(span.text, theme.accent);\n        index = span.next;\n        continue;\n      }\n\n      if (profile.decoratorPrefix && char === '@') {\n        const decorator = readIdentifier(line, index + 1, profile);\n        push(`@${decorator.text}`, theme.accent);\n        index = decorator.next;\n        continue;\n      }\n\n      if (profile.stringDelimiters.includes(char)) {\n        const literal = readString(line, index, char);\n        push(literal.text, theme.secondary);\n        index = literal.next;\n        continue;\n      }\n\n      if (isNumberStart(line, index)) {\n        const numberToken = readNumber(line, index);\n        push(numberToken.text, theme.accent);\n        index = numberToken.next;\n        continue;\n      }\n\n      if (profile.identifierStart.test(char)) {\n        const identifier = readIdentifier(line, index, profile);\n        const formatter = pickIdentifierFormatter(identifier.text, profile);\n        push(identifier.text, formatter);\n        index = identifier.next;\n        continue;\n      }\n\n      push(char);\n      index += 1;\n    }\n\n    return tokens.length ? tokens : [{ text: '' }];\n  };\n}\n\nfunction tokenizeJsonLine(line: string): Token[] {\n  if (!line.length) {\n    return [{ text: '' }];\n  }\n\n  const tokens: Token[] = [];\n  let index = 0;\n\n  const push = (text: string, formatter?: Formatter) => {\n    if (!text) {\n      return;\n    }\n    tokens.push(formatter ? { text, formatter } : { text });\n  };\n\n  while (index < line.length) {\n    const char = line.charAt(index);\n\n    if (/\\s/.test(char)) {\n      const start = index;\n      while (index < line.length && /\\s/.test(line.charAt(index))) {\n        index += 1;\n      }\n      push(line.slice(start, index));\n      continue;\n    }\n\n    if (char === '\"') {\n      const literal = readString(line, index, '\"');\n      const isKey = isJsonKey(line, literal.next);\n      push(literal.text, isKey ? theme.primary : theme.secondary);\n      index = literal.next;\n      continue;\n    }\n\n    if (char === '-' || /\\d/.test(char)) {\n      const numberToken = readNumber(line, index);\n      push(numberToken.text, theme.accent);\n      index = numberToken.next;\n      continue;\n    }\n\n    const remaining = line.slice(index).toLowerCase();\n    if (remaining.startsWith('true') || remaining.startsWith('false')) {\n      const literal = remaining.startsWith('true') ? 'true' : 'false';\n      push(line.slice(index, index + literal.length), theme.warning);\n      index += literal.length;\n      continue;\n    }\n    if (remaining.startsWith('null')) {\n      push('null', theme.warning);\n      index += 4;\n      continue;\n    }\n\n    push(char);\n    index += 1;\n  }\n\n  return tokens.length ? tokens : [{ text: '' }];\n}\n\nfunction isJsonKey(line: string, index: number): boolean {\n  for (let cursor = index; cursor < line.length; cursor += 1) {\n    const char = line.charAt(cursor);\n    if (char === ':') {\n      return true;\n    }\n    if (!/\\s/.test(char)) {\n      return false;\n    }\n  }\n  return false;\n}\n\nfunction wrapTokens(tokens: Token[], width: number): string[] {\n  const lines: string[] = [];\n  let current = '';\n  let used = 0;\n\n  const flush = () => {\n    lines.push(current);\n    current = '';\n    used = 0;\n  };\n\n  for (const token of tokens) {\n    const formatter = token.formatter ?? identity;\n    let remaining = token.text;\n\n    if (!remaining) {\n      continue;\n    }\n\n    while (remaining.length) {\n      const available = Math.max(1, width - used);\n      if (available <= 0) {\n        flush();\n        continue;\n      }\n\n      if (remaining.length <= available) {\n        current += formatter(remaining);\n        used += remaining.length;\n        remaining = '';\n      } else {\n        const slice = remaining.slice(0, available);\n        current += formatter(slice);\n        used += slice.length;\n        remaining = remaining.slice(available);\n        flush();\n      }\n    }\n  }\n\n  if (current) {\n    flush();\n  }\n\n  if (!lines.length) {\n    lines.push('');\n  }\n\n  return lines;\n}\n\nfunction pickIdentifierFormatter(value: string, profile: LanguageProfile): Formatter | undefined {\n  const lower = value.toLowerCase();\n  if (profile.keywords.has(lower)) {\n    return theme.primary;\n  }\n  if (profile.constants?.has(lower)) {\n    return theme.warning;\n  }\n  if (profile.types?.has(lower)) {\n    return theme.accent;\n  }\n  if (profile.builtins?.has(lower)) {\n    return theme.secondary;\n  }\n  return undefined;\n}\n\nfunction readString(line: string, start: number, delimiter: string): { text: string; next: number } {\n  let index = start + 1;\n  while (index < line.length) {\n    const char = line.charAt(index);\n    if (char === '\\\\') {\n      index += 2;\n      continue;\n    }\n    if (char === delimiter) {\n      index += 1;\n      break;\n    }\n    index += 1;\n  }\n  return { text: line.slice(start, index), next: index };\n}\n\nfunction readNumber(line: string, start: number): { text: string; next: number } {\n  let index = start;\n\n  if (line.charAt(index) === '-' || line.charAt(index) === '+') {\n    index += 1;\n  }\n\n  if (line.slice(index, index + 2).toLowerCase() === '0x') {\n    index += 2;\n    while (/[0-9a-fA-F_]/.test(line.charAt(index))) {\n      index += 1;\n    }\n    return { text: line.slice(start, index), next: index };\n  }\n\n  while (/[0-9_]/.test(line.charAt(index))) {\n    index += 1;\n  }\n\n  if (line.charAt(index) === '.' && /[0-9]/.test(line.charAt(index + 1))) {\n    index += 1;\n    while (/[0-9_]/.test(line.charAt(index))) {\n      index += 1;\n    }\n  }\n\n  if ((line.charAt(index) === 'e' || line.charAt(index) === 'E') && /[+\\-0-9]/.test(line.charAt(index + 1))) {\n    index += 1;\n    if (line.charAt(index) === '+' || line.charAt(index) === '-') {\n      index += 1;\n    }\n    while (/[0-9]/.test(line.charAt(index))) {\n      index += 1;\n    }\n  }\n\n  return { text: line.slice(start, index), next: index };\n}\n\nfunction isNumberStart(line: string, index: number): boolean {\n  const char = line.charAt(index);\n  if (char === '-' || char === '+') {\n    return /[0-9]/.test(line.charAt(index + 1));\n  }\n  return /[0-9]/.test(char);\n}\n\nfunction readIdentifier(line: string, start: number, profile: LanguageProfile): { text: string; next: number } {\n  let index = start;\n  if (!profile.identifierStart.test(line.charAt(index))) {\n    return { text: line.charAt(start), next: start + 1 };\n  }\n  index += 1;\n  while (index < line.length && profile.identifierPart.test(line.charAt(index))) {\n    index += 1;\n  }\n  return { text: line.slice(start, index), next: index };\n}\n\nfunction readVariable(line: string, start: number, profile: LanguageProfile): { text: string; next: number } {\n  if (line.charAt(start + 1) === '{') {\n    let index = start + 2;\n    while (index < line.length && line.charAt(index) !== '}') {\n      index += 1;\n    }\n    if (line.charAt(index) === '}') {\n      index += 1;\n    }\n    return { text: line.slice(start, index), next: index };\n  }\n\n  let index = start + 1;\n  while (index < line.length && profile.identifierPart.test(line.charAt(index))) {\n    index += 1;\n  }\n  return { text: line.slice(start, index), next: index };\n}\n"],"mappings":"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","ignoreList":[]}