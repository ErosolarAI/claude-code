{"version":3,"names":["cov_2gpa7n5hbd","actualCoverage","isMultilinePaste","text","f","lines","s","split","filter","line","trim","length","detectLanguage","patterns","javascript","typescript","python","json","html","css","sql","bash","yaml","lang","pattern","Object","entries","test","b","undefined","generatePasteSummary","nonEmptyLines","charCount","lineCount","language","preview","substring","summaryParts","push","toUpperCase","summary","join","isMultiline","formatPasteSummaryForDisplay","processPaste","displaySummary","fullContent","metadata"],"sources":["multilinePasteHandler.ts"],"sourcesContent":["/**\n * Handles multi-line paste detection and summarization\n * Provides graceful handling of large text blocks pasted into chat\n */\n\nexport interface PasteSummary {\n  isMultiline: boolean;\n  lineCount: number;\n  charCount: number;\n  preview: string;\n  language?: string;\n  summary: string;\n}\n\n/**\n * Detect if text is a multi-line paste (3+ lines)\n */\nexport function isMultilinePaste(text: string): boolean {\n  const lines = text.split('\\n').filter(line => line.trim().length > 0);\n  return lines.length >= 3;\n}\n\n/**\n * Detect likely programming language from content\n */\nfunction detectLanguage(text: string): string | undefined {\n  const patterns: Record<string, RegExp> = {\n    javascript: /\\b(const|let|var|function|async|await|import|export|=>)\\b/,\n    typescript: /\\b(interface|type|enum|namespace|declare|as const)\\b/,\n    python: /\\b(def|class|import|from|if __name__|async def)\\b/,\n    json: /^\\s*(?:\\{|\\[).*(?:\\}|\\])\\s*$/,\n    html: /^<[a-z]/i,\n    css: /^\\s*[.#[]?[\\w-]+\\s*{/,\n    sql: /\\b(SELECT|FROM|WHERE|INSERT|UPDATE|DELETE|CREATE|TABLE)\\b/i,\n    bash: /^#!/,\n    yaml: /^[\\w-]+:\\s*\\S/m,\n  };\n\n  for (const [lang, pattern] of Object.entries(patterns)) {\n    if (pattern.test(text)) {\n      return lang;\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Generate a concise summary of pasted content\n */\nexport function generatePasteSummary(text: string): PasteSummary {\n  const lines = text.split('\\n');\n  const nonEmptyLines = lines.filter(line => line.trim().length > 0);\n  const charCount = text.length;\n  const lineCount = nonEmptyLines.length;\n  const language = detectLanguage(text);\n\n  // Create preview: first 60 chars or first line\n  let preview = nonEmptyLines[0]?.substring(0, 60) || '';\n  if (preview.length === 60) {\n    preview += '...';\n  }\n\n  // Generate summary description\n  const summaryParts: string[] = [];\n\n  if (language) {\n    summaryParts.push(`${language.toUpperCase()}`);\n  }\n\n  summaryParts.push(`${lineCount} line${lineCount !== 1 ? 's' : ''}`);\n  summaryParts.push(`${charCount} char${charCount !== 1 ? 's' : ''}`);\n\n  const summary = `ðŸ“‹ Pasted: ${summaryParts.join(' â€¢ ')}`;\n\n  return {\n    isMultiline: true,\n    lineCount,\n    charCount,\n    preview,\n    language,\n    summary,\n  };\n}\n\n/**\n * Format a paste summary for display\n */\nexport function formatPasteSummaryForDisplay(summary: PasteSummary): string {\n  return `${summary.summary}\\n\"${summary.preview}\"`;\n}\n\n/**\n * Create a display-friendly version of multi-line content\n * Returns both the summary for display and the full content for sending\n */\nexport interface ProcessedPaste {\n  displaySummary: string;\n  fullContent: string;\n  metadata: PasteSummary;\n}\n\nexport function processPaste(text: string): ProcessedPaste {\n  const summary = generatePasteSummary(text);\n  const displaySummary = formatPasteSummaryForDisplay(summary);\n\n  return {\n    displaySummary,\n    fullContent: text,\n    metadata: summary,\n  };\n}\n"],"mappings":"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","ignoreList":[]}