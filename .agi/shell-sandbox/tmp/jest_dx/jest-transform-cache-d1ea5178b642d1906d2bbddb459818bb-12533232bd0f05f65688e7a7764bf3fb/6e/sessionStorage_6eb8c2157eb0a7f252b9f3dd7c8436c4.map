{"version":3,"names":["_nodeFs","require","_nodePath","cov_1pzuxd2gwk","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","undefined","s","f","b","_coverageSchema","coverage","actualCoverage","fsStorage","ensureDir","mkdirSync","recursive","writeFile","content","dirname","writeFileSync","readFile","readFileSync","exists","existsSync","activeStorage","setSessionStorage","storage","getSessionStorage","createInMemorySessionStorage","files","Map","_path","set","get","Error","has"],"sources":["sessionStorage.ts"],"sourcesContent":["import { mkdirSync, readFileSync, writeFileSync, existsSync } from 'node:fs';\nimport { dirname } from 'node:path';\n\nexport interface SessionStorage {\n  ensureDir(path: string): void;\n  writeFile(path: string, content: string): void;\n  readFile(path: string): string;\n  exists(path: string): boolean;\n}\n\nconst fsStorage: SessionStorage = {\n  ensureDir(path: string): void {\n    mkdirSync(path, { recursive: true });\n  },\n  writeFile(path: string, content: string): void {\n    mkdirSync(dirname(path), { recursive: true });\n    writeFileSync(path, content, 'utf8');\n  },\n  readFile(path: string): string {\n    return readFileSync(path, 'utf8');\n  },\n  exists(path: string): boolean {\n    return existsSync(path);\n  },\n};\n\nlet activeStorage: SessionStorage = fsStorage;\n\nexport function setSessionStorage(storage: SessionStorage): void {\n  activeStorage = storage;\n}\n\nexport function getSessionStorage(): SessionStorage {\n  return activeStorage;\n}\n\nexport function createInMemorySessionStorage(): SessionStorage {\n  const files = new Map<string, string>();\n  return {\n    ensureDir(_path: string): void {\n      // no-op for memory\n    },\n    writeFile(path: string, content: string): void {\n      files.set(path, content);\n    },\n    readFile(path: string): string {\n      const content = files.get(path);\n      if (content === undefined) {\n        throw new Error(`File not found: ${path}`);\n      }\n      return content;\n    },\n    exists(path: string): boolean {\n      return files.has(path);\n    },\n  };\n}\n"],"mappings":"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","ignoreList":[]}