c0068d6a44867b515b7261b87dd9e53a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TypeGuards = exports.ToolArgumentValidationError = void 0;
exports.coerceToolArguments = coerceToolArguments;
exports.validateToolArguments = validateToolArguments;
/* eslint-disable @typescript-eslint/no-namespace */

/**
 * Enhanced validation error with structured error information
 */
class ToolArgumentValidationError extends Error {
  issues;
  toolName;
  constructor(toolName, issues) {
    super(formatMessage(toolName, issues));
    this.name = 'ToolArgumentValidationError';
    this.issues = issues;
    this.toolName = toolName;
  }
}

/**
 * Runtime type guards for tool argument validation
 */
exports.ToolArgumentValidationError = ToolArgumentValidationError;
let TypeGuards = exports.TypeGuards = void 0;
(function (_TypeGuards) {
  function isString(value) {
    return typeof value === 'string';
  }
  _TypeGuards.isString = isString;
  function isNumber(value) {
    return typeof value === 'number' && !Number.isNaN(value);
  }
  _TypeGuards.isNumber = isNumber;
  function isBoolean(value) {
    return typeof value === 'boolean';
  }
  _TypeGuards.isBoolean = isBoolean;
  function isArray(value) {
    return Array.isArray(value);
  }
  _TypeGuards.isArray = isArray;
  function isObject(value) {
    return typeof value === 'object' && value !== null && !Array.isArray(value);
  }
  _TypeGuards.isObject = isObject;
  function isNotNull(value) {
    return value !== undefined && value !== null;
  }
  _TypeGuards.isNotNull = isNotNull;
  function isEnum(value, enumValues) {
    return TypeGuards.isString(value) && enumValues.includes(value);
  }
  _TypeGuards.isEnum = isEnum;
})(TypeGuards || (exports.TypeGuards = TypeGuards = {}));
/**
 * Coerce loosely-typed tool arguments into their declared schema types.
 * This makes tools resilient to providers that emit boolean/number values as strings.
 */
function coerceToolArguments(schema, args) {
  if (!schema || schema.type !== 'object' || !schema.properties) {
    return args;
  }
  const coerced = {
    ...args
  };
  for (const [key, definition] of Object.entries(schema.properties)) {
    if (!Object.hasOwn(args, key)) {
      continue;
    }
    const value = args[key];
    if (value === undefined || value === null) {
      continue;
    }
    switch (definition.type) {
      case 'boolean':
        {
          const normalized = coerceBoolean(value);
          coerced[key] = normalized;
          break;
        }
      case 'number':
        {
          const normalized = coerceNumber(value);
          coerced[key] = normalized;
          break;
        }
      default:
        break;
    }
  }
  return coerced;
}
function coerceBoolean(value) {
  if (typeof value === 'boolean') {
    return value;
  }
  if (typeof value === 'number') {
    if (value === 1) return true;
    if (value === 0) return false;
  }
  if (typeof value === 'string') {
    const trimmed = value.trim().toLowerCase();
    if (trimmed === 'true' || trimmed === '1') return true;
    if (trimmed === 'false' || trimmed === '0') return false;
  }
  return value;
}
function coerceNumber(value) {
  if (typeof value === 'number') {
    // Reject NaN, Infinity, and -Infinity
    if (!Number.isFinite(value)) {
      return value; // Return as-is to fail validation
    }
    return value;
  }
  if (typeof value === 'string' && value.trim().length > 0) {
    const parsed = Number(value);
    // Only accept finite numbers
    if (Number.isFinite(parsed)) {
      return parsed;
    }
  }
  return value;
}
function validateToolArguments(toolName, schema, args) {
  if (!schema || schema.type !== 'object') {
    return;
  }
  const errors = [];
  const properties = schema.properties ?? {};
  const required = Array.isArray(schema.required) ? schema.required : [];
  for (const property of required) {
    if (!hasArgument(args, property)) {
      errors.push(`Missing required property "${property}".`);
    }
  }
  for (const [key, value] of Object.entries(args)) {
    const definition = properties[key];
    if (!definition) {
      // Silently ignore unknown properties - models sometimes hallucinate extra params
      // This is more lenient than strict JSON schema validation but prevents errors
      // when models pass extra parameters that don't affect tool behavior
      continue;
    }
    validateSchemaProperty(definition, value, key, errors);
  }
  if (errors.length) {
    throw new ToolArgumentValidationError(toolName, errors);
  }
}
function validateSchemaProperty(definition, value, path, errors) {
  switch (definition.type) {
    case 'string':
      {
        if (typeof value !== 'string') {
          errors.push(`Argument "${path}" must be a string.`);
          return;
        }
        if (definition.enum && !definition.enum.includes(value)) {
          errors.push(`Argument "${path}" must be one of: ${definition.enum.map(entry => `"${entry}"`).join(', ')}.`);
        }
        if (typeof definition.minLength === 'number' && value.length < definition.minLength) {
          errors.push(`Argument "${path}" must be at least ${definition.minLength} character${definition.minLength === 1 ? '' : 's'} long.`);
        }
        return;
      }
    case 'number':
      {
        if (typeof value !== 'number' || !Number.isFinite(value)) {
          errors.push(`Argument "${path}" must be a finite number.`);
          return;
        }
        // Validate minimum constraint
        if (typeof definition.minimum === 'number' && value < definition.minimum) {
          errors.push(`Argument "${path}" must be at least ${definition.minimum}.`);
        }
        // Validate maximum constraint
        if (typeof definition.maximum === 'number' && value > definition.maximum) {
          errors.push(`Argument "${path}" must be at most ${definition.maximum}.`);
        }
        return;
      }
    case 'boolean':
      {
        if (typeof value !== 'boolean') {
          errors.push(`Argument "${path}" must be a boolean.`);
        }
        return;
      }
    case 'array':
      {
        if (!Array.isArray(value)) {
          errors.push(`Argument "${path}" must be an array.`);
          return;
        }
        validateArrayItems(definition, value, path, errors);
        return;
      }
    default:
      return;
  }
}
function validateArrayItems(definition, value, path, errors) {
  const itemSchema = definition.items;
  if (!itemSchema) {
    return;
  }
  for (let index = 0; index < value.length; index += 1) {
    const entry = value[index];
    validateSchemaProperty(itemSchema, entry, `${path}[${index}]`, errors);
  }
}
function hasArgument(args, key) {
  if (!Object.hasOwn(args, key)) {
    return false;
  }
  const value = args[key];
  return value !== undefined && value !== null;
}
function formatMessage(toolName, issues) {
  const detail = issues.join(' ');
  return `Invalid arguments for "${toolName}": ${detail}`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUb29sQXJndW1lbnRWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsImlzc3VlcyIsInRvb2xOYW1lIiwiY29uc3RydWN0b3IiLCJmb3JtYXRNZXNzYWdlIiwibmFtZSIsImV4cG9ydHMiLCJUeXBlR3VhcmRzIiwiX1R5cGVHdWFyZHMiLCJpc1N0cmluZyIsInZhbHVlIiwiaXNOdW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsImlzQm9vbGVhbiIsImlzQXJyYXkiLCJBcnJheSIsImlzT2JqZWN0IiwiaXNOb3ROdWxsIiwidW5kZWZpbmVkIiwiaXNFbnVtIiwiZW51bVZhbHVlcyIsImluY2x1ZGVzIiwiY29lcmNlVG9vbEFyZ3VtZW50cyIsInNjaGVtYSIsImFyZ3MiLCJ0eXBlIiwicHJvcGVydGllcyIsImNvZXJjZWQiLCJrZXkiLCJkZWZpbml0aW9uIiwiT2JqZWN0IiwiZW50cmllcyIsImhhc093biIsIm5vcm1hbGl6ZWQiLCJjb2VyY2VCb29sZWFuIiwiY29lcmNlTnVtYmVyIiwidHJpbW1lZCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImlzRmluaXRlIiwibGVuZ3RoIiwicGFyc2VkIiwidmFsaWRhdGVUb29sQXJndW1lbnRzIiwiZXJyb3JzIiwicmVxdWlyZWQiLCJwcm9wZXJ0eSIsImhhc0FyZ3VtZW50IiwicHVzaCIsInZhbGlkYXRlU2NoZW1hUHJvcGVydHkiLCJwYXRoIiwiZW51bSIsIm1hcCIsImVudHJ5Iiwiam9pbiIsIm1pbkxlbmd0aCIsIm1pbmltdW0iLCJtYXhpbXVtIiwidmFsaWRhdGVBcnJheUl0ZW1zIiwiaXRlbVNjaGVtYSIsIml0ZW1zIiwiaW5kZXgiLCJkZXRhaWwiXSwic291cmNlcyI6WyJzY2hlbWFWYWxpZGF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZSAqL1xuaW1wb3J0IHR5cGUgeyBKU09OU2NoZW1hQXJyYXksIEpTT05TY2hlbWFPYmplY3QsIEpTT05TY2hlbWFQcm9wZXJ0eSB9IGZyb20gJy4vdHlwZXMuanMnO1xuXG4vKipcbiAqIEVuaGFuY2VkIHZhbGlkYXRpb24gZXJyb3Igd2l0aCBzdHJ1Y3R1cmVkIGVycm9yIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQXJndW1lbnRWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IGlzc3VlczogcmVhZG9ubHkgc3RyaW5nW107XG4gIHJlYWRvbmx5IHRvb2xOYW1lOiBzdHJpbmc7XG4gIFxuICBjb25zdHJ1Y3Rvcih0b29sTmFtZTogc3RyaW5nLCBpc3N1ZXM6IHN0cmluZ1tdKSB7XG4gICAgc3VwZXIoZm9ybWF0TWVzc2FnZSh0b29sTmFtZSwgaXNzdWVzKSk7XG4gICAgdGhpcy5uYW1lID0gJ1Rvb2xBcmd1bWVudFZhbGlkYXRpb25FcnJvcic7XG4gICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lO1xuICB9XG59XG5cbi8qKlxuICogUnVudGltZSB0eXBlIGd1YXJkcyBmb3IgdG9vbCBhcmd1bWVudCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgVHlwZUd1YXJkcyB7XG4gIC8qKlxuICAgKiBUeXBlIGd1YXJkIGZvciBzdHJpbmcgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBzdHJpbmcge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIG51bWJlciB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG51bWJlciB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3IgYm9vbGVhbiB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3IgYXJyYXkgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIHVua25vd25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIG9iamVjdCB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3Igbm9uLW51bGwgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNOb3ROdWxsKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgTm9uTnVsbGFibGU8dW5rbm93bj4ge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIGVudW0gdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNFbnVtPFQgZXh0ZW5kcyBzdHJpbmc+KHZhbHVlOiB1bmtub3duLCBlbnVtVmFsdWVzOiByZWFkb25seSBUW10pOiB2YWx1ZSBpcyBUIHtcbiAgICByZXR1cm4gVHlwZUd1YXJkcy5pc1N0cmluZyh2YWx1ZSkgJiYgZW51bVZhbHVlcy5pbmNsdWRlcyh2YWx1ZSBhcyBUKTtcbiAgfVxufVxuXG4vKipcbiAqIENvZXJjZSBsb29zZWx5LXR5cGVkIHRvb2wgYXJndW1lbnRzIGludG8gdGhlaXIgZGVjbGFyZWQgc2NoZW1hIHR5cGVzLlxuICogVGhpcyBtYWtlcyB0b29scyByZXNpbGllbnQgdG8gcHJvdmlkZXJzIHRoYXQgZW1pdCBib29sZWFuL251bWJlciB2YWx1ZXMgYXMgc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvZXJjZVRvb2xBcmd1bWVudHMoXG4gIHNjaGVtYTogSlNPTlNjaGVtYU9iamVjdCB8IHVuZGVmaW5lZCxcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgaWYgKCFzY2hlbWEgfHwgc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnIHx8ICFzY2hlbWEucHJvcGVydGllcykge1xuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgY29uc3QgY29lcmNlZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7IC4uLmFyZ3MgfTtcblxuICBmb3IgKGNvbnN0IFtrZXksIGRlZmluaXRpb25dIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5wcm9wZXJ0aWVzKSkge1xuICAgIGlmICghT2JqZWN0Lmhhc093bihhcmdzLCBrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSBhcmdzW2tleV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZGVmaW5pdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdib29sZWFuJzoge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG4gICAgICAgIGNvZXJjZWRba2V5XSA9IG5vcm1hbGl6ZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbnVtYmVyJzoge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gY29lcmNlTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY29lcmNlZFtrZXldID0gbm9ybWFsaXplZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29lcmNlZDtcbn1cblxuZnVuY3Rpb24gY29lcmNlQm9vbGVhbih2YWx1ZTogdW5rbm93bik6IHVua25vd24ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodmFsdWUgPT09IDEpIHJldHVybiB0cnVlO1xuICAgIGlmICh2YWx1ZSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0cmltbWVkID09PSAndHJ1ZScgfHwgdHJpbW1lZCA9PT0gJzEnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodHJpbW1lZCA9PT0gJ2ZhbHNlJyB8fCB0cmltbWVkID09PSAnMCcpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNvZXJjZU51bWJlcih2YWx1ZTogdW5rbm93bik6IHVua25vd24ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIC8vIFJlamVjdCBOYU4sIEluZmluaXR5LCBhbmQgLUluZmluaXR5XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7IC8vIFJldHVybiBhcy1pcyB0byBmYWlsIHZhbGlkYXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICAvLyBPbmx5IGFjY2VwdCBmaW5pdGUgbnVtYmVyc1xuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocGFyc2VkKSkge1xuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUb29sQXJndW1lbnRzKFxuICB0b29sTmFtZTogc3RyaW5nLFxuICBzY2hlbWE6IEpTT05TY2hlbWFPYmplY3QgfCB1bmRlZmluZWQsXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4pOiB2b2lkIHtcbiAgaWYgKCFzY2hlbWEgfHwgc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwcm9wZXJ0aWVzID0gc2NoZW1hLnByb3BlcnRpZXMgPz8ge307XG4gIGNvbnN0IHJlcXVpcmVkID0gQXJyYXkuaXNBcnJheShzY2hlbWEucmVxdWlyZWQpID8gc2NoZW1hLnJlcXVpcmVkIDogW107XG5cbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiByZXF1aXJlZCkge1xuICAgIGlmICghaGFzQXJndW1lbnQoYXJncywgcHJvcGVydHkpKSB7XG4gICAgICBlcnJvcnMucHVzaChgTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcIiR7cHJvcGVydHl9XCIuYCk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXJncykpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gcHJvcGVydGllc1trZXldO1xuICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgLy8gU2lsZW50bHkgaWdub3JlIHVua25vd24gcHJvcGVydGllcyAtIG1vZGVscyBzb21ldGltZXMgaGFsbHVjaW5hdGUgZXh0cmEgcGFyYW1zXG4gICAgICAvLyBUaGlzIGlzIG1vcmUgbGVuaWVudCB0aGFuIHN0cmljdCBKU09OIHNjaGVtYSB2YWxpZGF0aW9uIGJ1dCBwcmV2ZW50cyBlcnJvcnNcbiAgICAgIC8vIHdoZW4gbW9kZWxzIHBhc3MgZXh0cmEgcGFyYW1ldGVycyB0aGF0IGRvbid0IGFmZmVjdCB0b29sIGJlaGF2aW9yXG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFsaWRhdGVTY2hlbWFQcm9wZXJ0eShkZWZpbml0aW9uLCB2YWx1ZSwga2V5LCBlcnJvcnMpO1xuICB9XG5cbiAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgVG9vbEFyZ3VtZW50VmFsaWRhdGlvbkVycm9yKHRvb2xOYW1lLCBlcnJvcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU2NoZW1hUHJvcGVydHkoXG4gIGRlZmluaXRpb246IEpTT05TY2hlbWFQcm9wZXJ0eSxcbiAgdmFsdWU6IHVua25vd24sXG4gIHBhdGg6IHN0cmluZyxcbiAgZXJyb3JzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIHN3aXRjaCAoZGVmaW5pdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzoge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgYSBzdHJpbmcuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbml0aW9uLmVudW0gJiYgIWRlZmluaXRpb24uZW51bS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgb25lIG9mOiAke2RlZmluaXRpb24uZW51bS5tYXAoKGVudHJ5KSA9PiBgXCIke2VudHJ5fVwiYCkuam9pbignLCAnKX0uYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgJiYgdmFsdWUubGVuZ3RoIDwgZGVmaW5pdGlvbi5taW5MZW5ndGgpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgYXQgbGVhc3QgJHtkZWZpbml0aW9uLm1pbkxlbmd0aH0gY2hhcmFjdGVyJHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubWluTGVuZ3RoID09PSAxID8gJycgOiAncydcbiAgICAgICAgICB9IGxvbmcuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYXNlICdudW1iZXInOiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICBlcnJvcnMucHVzaChgQXJndW1lbnQgXCIke3BhdGh9XCIgbXVzdCBiZSBhIGZpbml0ZSBudW1iZXIuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFZhbGlkYXRlIG1pbmltdW0gY29uc3RyYWludFxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1pbmltdW0gPT09ICdudW1iZXInICYmIHZhbHVlIDwgZGVmaW5pdGlvbi5taW5pbXVtKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGF0IGxlYXN0ICR7ZGVmaW5pdGlvbi5taW5pbXVtfS5gKTtcbiAgICAgIH1cbiAgICAgIC8vIFZhbGlkYXRlIG1heGltdW0gY29uc3RyYWludFxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1heGltdW0gPT09ICdudW1iZXInICYmIHZhbHVlID4gZGVmaW5pdGlvbi5tYXhpbXVtKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGF0IG1vc3QgJHtkZWZpbml0aW9uLm1heGltdW19LmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYXNlICdib29sZWFuJzoge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGEgYm9vbGVhbi5gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FzZSAnYXJyYXknOiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGFuIGFycmF5LmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YWxpZGF0ZUFycmF5SXRlbXMoZGVmaW5pdGlvbiwgdmFsdWUsIHBhdGgsIGVycm9ycyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm47XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUl0ZW1zKFxuICBkZWZpbml0aW9uOiBKU09OU2NoZW1hQXJyYXksXG4gIHZhbHVlOiB1bmtub3duW10sXG4gIHBhdGg6IHN0cmluZyxcbiAgZXJyb3JzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIGNvbnN0IGl0ZW1TY2hlbWEgPSBkZWZpbml0aW9uLml0ZW1zO1xuICBpZiAoIWl0ZW1TY2hlbWEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsdWUubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgY29uc3QgZW50cnkgPSB2YWx1ZVtpbmRleF07XG4gICAgdmFsaWRhdGVTY2hlbWFQcm9wZXJ0eShpdGVtU2NoZW1hLCBlbnRyeSwgYCR7cGF0aH1bJHtpbmRleH1dYCwgZXJyb3JzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNBcmd1bWVudChhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwga2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFPYmplY3QuaGFzT3duKGFyZ3MsIGtleSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBhcmdzW2tleV07XG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRNZXNzYWdlKHRvb2xOYW1lOiBzdHJpbmcsIGlzc3Vlczogc3RyaW5nW10pOiBzdHJpbmcge1xuICBjb25zdCBkZXRhaWwgPSBpc3N1ZXMuam9pbignICcpO1xuICByZXR1cm4gYEludmFsaWQgYXJndW1lbnRzIGZvciBcIiR7dG9vbE5hbWV9XCI6ICR7ZGV0YWlsfWA7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ08sTUFBTUEsMkJBQTJCLFNBQVNDLEtBQUssQ0FBQztFQUM1Q0MsTUFBTTtFQUNOQyxRQUFRO0VBRWpCQyxXQUFXQSxDQUFDRCxRQUFnQixFQUFFRCxNQUFnQixFQUFFO0lBQzlDLEtBQUssQ0FBQ0csYUFBYSxDQUFDRixRQUFRLEVBQUVELE1BQU0sQ0FBQyxDQUFDO0lBQ3RDLElBQUksQ0FBQ0ksSUFBSSxHQUFHLDZCQUE2QjtJQUN6QyxJQUFJLENBQUNKLE1BQU0sR0FBR0EsTUFBTTtJQUNwQixJQUFJLENBQUNDLFFBQVEsR0FBR0EsUUFBUTtFQUMxQjtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUZBSSxPQUFBLENBQUFQLDJCQUFBLEdBQUFBLDJCQUFBO0FBQUEsSUFHaUJRLFVBQVUsR0FBQUQsT0FBQSxDQUFBQyxVQUFBO0FBQUEsV0FBQUMsV0FBQTtFQUlsQixTQUFTQyxRQUFRQSxDQUFDQyxLQUFjLEVBQW1CO0lBQ3hELE9BQU8sT0FBT0EsS0FBSyxLQUFLLFFBQVE7RUFDbEM7RUFBQ0YsV0FBQSxDQUFBQyxRQUFBLEdBQUFBLFFBQUE7RUFLTSxTQUFTRSxRQUFRQSxDQUFDRCxLQUFjLEVBQW1CO0lBQ3hELE9BQU8sT0FBT0EsS0FBSyxLQUFLLFFBQVEsSUFBSSxDQUFDRSxNQUFNLENBQUNDLEtBQUssQ0FBQ0gsS0FBSyxDQUFDO0VBQzFEO0VBQUNGLFdBQUEsQ0FBQUcsUUFBQSxHQUFBQSxRQUFBO0VBS00sU0FBU0csU0FBU0EsQ0FBQ0osS0FBYyxFQUFvQjtJQUMxRCxPQUFPLE9BQU9BLEtBQUssS0FBSyxTQUFTO0VBQ25DO0VBQUNGLFdBQUEsQ0FBQU0sU0FBQSxHQUFBQSxTQUFBO0VBS00sU0FBU0MsT0FBT0EsQ0FBQ0wsS0FBYyxFQUFzQjtJQUMxRCxPQUFPTSxLQUFLLENBQUNELE9BQU8sQ0FBQ0wsS0FBSyxDQUFDO0VBQzdCO0VBQUNGLFdBQUEsQ0FBQU8sT0FBQSxHQUFBQSxPQUFBO0VBS00sU0FBU0UsUUFBUUEsQ0FBQ1AsS0FBYyxFQUFvQztJQUN6RSxPQUFPLE9BQU9BLEtBQUssS0FBSyxRQUFRLElBQUlBLEtBQUssS0FBSyxJQUFJLElBQUksQ0FBQ00sS0FBSyxDQUFDRCxPQUFPLENBQUNMLEtBQUssQ0FBQztFQUM3RTtFQUFDRixXQUFBLENBQUFTLFFBQUEsR0FBQUEsUUFBQTtFQUtNLFNBQVNDLFNBQVNBLENBQUNSLEtBQWMsRUFBaUM7SUFDdkUsT0FBT0EsS0FBSyxLQUFLUyxTQUFTLElBQUlULEtBQUssS0FBSyxJQUFJO0VBQzlDO0VBQUNGLFdBQUEsQ0FBQVUsU0FBQSxHQUFBQSxTQUFBO0VBS00sU0FBU0UsTUFBTUEsQ0FBbUJWLEtBQWMsRUFBRVcsVUFBd0IsRUFBYztJQUM3RixPQUFPZCxVQUFVLENBQUNFLFFBQVEsQ0FBQ0MsS0FBSyxDQUFDLElBQUlXLFVBQVUsQ0FBQ0MsUUFBUSxDQUFDWixLQUFVLENBQUM7RUFDdEU7RUFBQ0YsV0FBQSxDQUFBWSxNQUFBLEdBQUFBLE1BQUE7QUFBQSxHQWhEY2IsVUFBVSxLQUFBRCxPQUFBLENBQUFDLFVBQUEsR0FBVkEsVUFBVTtBQW1EM0I7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTZ0IsbUJBQW1CQSxDQUNqQ0MsTUFBb0MsRUFDcENDLElBQTZCLEVBQ0o7RUFDekIsSUFBSSxDQUFDRCxNQUFNLElBQUlBLE1BQU0sQ0FBQ0UsSUFBSSxLQUFLLFFBQVEsSUFBSSxDQUFDRixNQUFNLENBQUNHLFVBQVUsRUFBRTtJQUM3RCxPQUFPRixJQUFJO0VBQ2I7RUFFQSxNQUFNRyxPQUFnQyxHQUFHO0lBQUUsR0FBR0g7RUFBSyxDQUFDO0VBRXBELEtBQUssTUFBTSxDQUFDSSxHQUFHLEVBQUVDLFVBQVUsQ0FBQyxJQUFJQyxNQUFNLENBQUNDLE9BQU8sQ0FBQ1IsTUFBTSxDQUFDRyxVQUFVLENBQUMsRUFBRTtJQUNqRSxJQUFJLENBQUNJLE1BQU0sQ0FBQ0UsTUFBTSxDQUFDUixJQUFJLEVBQUVJLEdBQUcsQ0FBQyxFQUFFO01BQzdCO0lBQ0Y7SUFDQSxNQUFNbkIsS0FBSyxHQUFHZSxJQUFJLENBQUNJLEdBQUcsQ0FBQztJQUN2QixJQUFJbkIsS0FBSyxLQUFLUyxTQUFTLElBQUlULEtBQUssS0FBSyxJQUFJLEVBQUU7TUFDekM7SUFDRjtJQUVBLFFBQVFvQixVQUFVLENBQUNKLElBQUk7TUFDckIsS0FBSyxTQUFTO1FBQUU7VUFDZCxNQUFNUSxVQUFVLEdBQUdDLGFBQWEsQ0FBQ3pCLEtBQUssQ0FBQztVQUN2Q2tCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLEdBQUdLLFVBQVU7VUFDekI7UUFDRjtNQUNBLEtBQUssUUFBUTtRQUFFO1VBQ2IsTUFBTUEsVUFBVSxHQUFHRSxZQUFZLENBQUMxQixLQUFLLENBQUM7VUFDdENrQixPQUFPLENBQUNDLEdBQUcsQ0FBQyxHQUFHSyxVQUFVO1VBQ3pCO1FBQ0Y7TUFDQTtRQUNFO0lBQ0o7RUFDRjtFQUVBLE9BQU9OLE9BQU87QUFDaEI7QUFFQSxTQUFTTyxhQUFhQSxDQUFDekIsS0FBYyxFQUFXO0VBQzlDLElBQUksT0FBT0EsS0FBSyxLQUFLLFNBQVMsRUFBRTtJQUM5QixPQUFPQSxLQUFLO0VBQ2Q7RUFDQSxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLEVBQUU7SUFDN0IsSUFBSUEsS0FBSyxLQUFLLENBQUMsRUFBRSxPQUFPLElBQUk7SUFDNUIsSUFBSUEsS0FBSyxLQUFLLENBQUMsRUFBRSxPQUFPLEtBQUs7RUFDL0I7RUFDQSxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLEVBQUU7SUFDN0IsTUFBTTJCLE9BQU8sR0FBRzNCLEtBQUssQ0FBQzRCLElBQUksQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO0lBQzFDLElBQUlGLE9BQU8sS0FBSyxNQUFNLElBQUlBLE9BQU8sS0FBSyxHQUFHLEVBQUUsT0FBTyxJQUFJO0lBQ3RELElBQUlBLE9BQU8sS0FBSyxPQUFPLElBQUlBLE9BQU8sS0FBSyxHQUFHLEVBQUUsT0FBTyxLQUFLO0VBQzFEO0VBQ0EsT0FBTzNCLEtBQUs7QUFDZDtBQUVBLFNBQVMwQixZQUFZQSxDQUFDMUIsS0FBYyxFQUFXO0VBQzdDLElBQUksT0FBT0EsS0FBSyxLQUFLLFFBQVEsRUFBRTtJQUM3QjtJQUNBLElBQUksQ0FBQ0UsTUFBTSxDQUFDNEIsUUFBUSxDQUFDOUIsS0FBSyxDQUFDLEVBQUU7TUFDM0IsT0FBT0EsS0FBSyxDQUFDLENBQUM7SUFDaEI7SUFDQSxPQUFPQSxLQUFLO0VBQ2Q7RUFDQSxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLElBQUlBLEtBQUssQ0FBQzRCLElBQUksQ0FBQyxDQUFDLENBQUNHLE1BQU0sR0FBRyxDQUFDLEVBQUU7SUFDeEQsTUFBTUMsTUFBTSxHQUFHOUIsTUFBTSxDQUFDRixLQUFLLENBQUM7SUFDNUI7SUFDQSxJQUFJRSxNQUFNLENBQUM0QixRQUFRLENBQUNFLE1BQU0sQ0FBQyxFQUFFO01BQzNCLE9BQU9BLE1BQU07SUFDZjtFQUNGO0VBQ0EsT0FBT2hDLEtBQUs7QUFDZDtBQUVPLFNBQVNpQyxxQkFBcUJBLENBQ25DekMsUUFBZ0IsRUFDaEJzQixNQUFvQyxFQUNwQ0MsSUFBNkIsRUFDdkI7RUFDTixJQUFJLENBQUNELE1BQU0sSUFBSUEsTUFBTSxDQUFDRSxJQUFJLEtBQUssUUFBUSxFQUFFO0lBQ3ZDO0VBQ0Y7RUFFQSxNQUFNa0IsTUFBZ0IsR0FBRyxFQUFFO0VBQzNCLE1BQU1qQixVQUFVLEdBQUdILE1BQU0sQ0FBQ0csVUFBVSxJQUFJLENBQUMsQ0FBQztFQUMxQyxNQUFNa0IsUUFBUSxHQUFHN0IsS0FBSyxDQUFDRCxPQUFPLENBQUNTLE1BQU0sQ0FBQ3FCLFFBQVEsQ0FBQyxHQUFHckIsTUFBTSxDQUFDcUIsUUFBUSxHQUFHLEVBQUU7RUFFdEUsS0FBSyxNQUFNQyxRQUFRLElBQUlELFFBQVEsRUFBRTtJQUMvQixJQUFJLENBQUNFLFdBQVcsQ0FBQ3RCLElBQUksRUFBRXFCLFFBQVEsQ0FBQyxFQUFFO01BQ2hDRixNQUFNLENBQUNJLElBQUksQ0FBQyw4QkFBOEJGLFFBQVEsSUFBSSxDQUFDO0lBQ3pEO0VBQ0Y7RUFFQSxLQUFLLE1BQU0sQ0FBQ2pCLEdBQUcsRUFBRW5CLEtBQUssQ0FBQyxJQUFJcUIsTUFBTSxDQUFDQyxPQUFPLENBQUNQLElBQUksQ0FBQyxFQUFFO0lBQy9DLE1BQU1LLFVBQVUsR0FBR0gsVUFBVSxDQUFDRSxHQUFHLENBQUM7SUFDbEMsSUFBSSxDQUFDQyxVQUFVLEVBQUU7TUFDZjtNQUNBO01BQ0E7TUFDQTtJQUNGO0lBQ0FtQixzQkFBc0IsQ0FBQ25CLFVBQVUsRUFBRXBCLEtBQUssRUFBRW1CLEdBQUcsRUFBRWUsTUFBTSxDQUFDO0VBQ3hEO0VBRUEsSUFBSUEsTUFBTSxDQUFDSCxNQUFNLEVBQUU7SUFDakIsTUFBTSxJQUFJMUMsMkJBQTJCLENBQUNHLFFBQVEsRUFBRTBDLE1BQU0sQ0FBQztFQUN6RDtBQUNGO0FBRUEsU0FBU0ssc0JBQXNCQSxDQUM3Qm5CLFVBQThCLEVBQzlCcEIsS0FBYyxFQUNkd0MsSUFBWSxFQUNaTixNQUFnQixFQUNWO0VBQ04sUUFBUWQsVUFBVSxDQUFDSixJQUFJO0lBQ3JCLEtBQUssUUFBUTtNQUFFO1FBQ2IsSUFBSSxPQUFPaEIsS0FBSyxLQUFLLFFBQVEsRUFBRTtVQUM3QmtDLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLGFBQWFFLElBQUkscUJBQXFCLENBQUM7VUFDbkQ7UUFDRjtRQUNBLElBQUlwQixVQUFVLENBQUNxQixJQUFJLElBQUksQ0FBQ3JCLFVBQVUsQ0FBQ3FCLElBQUksQ0FBQzdCLFFBQVEsQ0FBQ1osS0FBSyxDQUFDLEVBQUU7VUFDdkRrQyxNQUFNLENBQUNJLElBQUksQ0FDVCxhQUFhRSxJQUFJLHFCQUFxQnBCLFVBQVUsQ0FBQ3FCLElBQUksQ0FBQ0MsR0FBRyxDQUFFQyxLQUFLLElBQUssSUFBSUEsS0FBSyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUMvRixDQUFDO1FBQ0g7UUFDQSxJQUFJLE9BQU94QixVQUFVLENBQUN5QixTQUFTLEtBQUssUUFBUSxJQUFJN0MsS0FBSyxDQUFDK0IsTUFBTSxHQUFHWCxVQUFVLENBQUN5QixTQUFTLEVBQUU7VUFDbkZYLE1BQU0sQ0FBQ0ksSUFBSSxDQUNULGFBQWFFLElBQUksc0JBQXNCcEIsVUFBVSxDQUFDeUIsU0FBUyxhQUN6RHpCLFVBQVUsQ0FBQ3lCLFNBQVMsS0FBSyxDQUFDLEdBQUcsRUFBRSxHQUFHLEdBQUcsUUFFekMsQ0FBQztRQUNIO1FBQ0E7TUFDRjtJQUNBLEtBQUssUUFBUTtNQUFFO1FBQ2IsSUFBSSxPQUFPN0MsS0FBSyxLQUFLLFFBQVEsSUFBSSxDQUFDRSxNQUFNLENBQUM0QixRQUFRLENBQUM5QixLQUFLLENBQUMsRUFBRTtVQUN4RGtDLE1BQU0sQ0FBQ0ksSUFBSSxDQUFDLGFBQWFFLElBQUksNEJBQTRCLENBQUM7VUFDMUQ7UUFDRjtRQUNBO1FBQ0EsSUFBSSxPQUFPcEIsVUFBVSxDQUFDMEIsT0FBTyxLQUFLLFFBQVEsSUFBSTlDLEtBQUssR0FBR29CLFVBQVUsQ0FBQzBCLE9BQU8sRUFBRTtVQUN4RVosTUFBTSxDQUFDSSxJQUFJLENBQUMsYUFBYUUsSUFBSSxzQkFBc0JwQixVQUFVLENBQUMwQixPQUFPLEdBQUcsQ0FBQztRQUMzRTtRQUNBO1FBQ0EsSUFBSSxPQUFPMUIsVUFBVSxDQUFDMkIsT0FBTyxLQUFLLFFBQVEsSUFBSS9DLEtBQUssR0FBR29CLFVBQVUsQ0FBQzJCLE9BQU8sRUFBRTtVQUN4RWIsTUFBTSxDQUFDSSxJQUFJLENBQUMsYUFBYUUsSUFBSSxxQkFBcUJwQixVQUFVLENBQUMyQixPQUFPLEdBQUcsQ0FBQztRQUMxRTtRQUNBO01BQ0Y7SUFDQSxLQUFLLFNBQVM7TUFBRTtRQUNkLElBQUksT0FBTy9DLEtBQUssS0FBSyxTQUFTLEVBQUU7VUFDOUJrQyxNQUFNLENBQUNJLElBQUksQ0FBQyxhQUFhRSxJQUFJLHNCQUFzQixDQUFDO1FBQ3REO1FBQ0E7TUFDRjtJQUNBLEtBQUssT0FBTztNQUFFO1FBQ1osSUFBSSxDQUFDbEMsS0FBSyxDQUFDRCxPQUFPLENBQUNMLEtBQUssQ0FBQyxFQUFFO1VBQ3pCa0MsTUFBTSxDQUFDSSxJQUFJLENBQUMsYUFBYUUsSUFBSSxxQkFBcUIsQ0FBQztVQUNuRDtRQUNGO1FBQ0FRLGtCQUFrQixDQUFDNUIsVUFBVSxFQUFFcEIsS0FBSyxFQUFFd0MsSUFBSSxFQUFFTixNQUFNLENBQUM7UUFDbkQ7TUFDRjtJQUNBO01BQ0U7RUFDSjtBQUNGO0FBRUEsU0FBU2Msa0JBQWtCQSxDQUN6QjVCLFVBQTJCLEVBQzNCcEIsS0FBZ0IsRUFDaEJ3QyxJQUFZLEVBQ1pOLE1BQWdCLEVBQ1Y7RUFDTixNQUFNZSxVQUFVLEdBQUc3QixVQUFVLENBQUM4QixLQUFLO0VBQ25DLElBQUksQ0FBQ0QsVUFBVSxFQUFFO0lBQ2Y7RUFDRjtFQUVBLEtBQUssSUFBSUUsS0FBSyxHQUFHLENBQUMsRUFBRUEsS0FBSyxHQUFHbkQsS0FBSyxDQUFDK0IsTUFBTSxFQUFFb0IsS0FBSyxJQUFJLENBQUMsRUFBRTtJQUNwRCxNQUFNUixLQUFLLEdBQUczQyxLQUFLLENBQUNtRCxLQUFLLENBQUM7SUFDMUJaLHNCQUFzQixDQUFDVSxVQUFVLEVBQUVOLEtBQUssRUFBRSxHQUFHSCxJQUFJLElBQUlXLEtBQUssR0FBRyxFQUFFakIsTUFBTSxDQUFDO0VBQ3hFO0FBQ0Y7QUFFQSxTQUFTRyxXQUFXQSxDQUFDdEIsSUFBNkIsRUFBRUksR0FBVyxFQUFXO0VBQ3hFLElBQUksQ0FBQ0UsTUFBTSxDQUFDRSxNQUFNLENBQUNSLElBQUksRUFBRUksR0FBRyxDQUFDLEVBQUU7SUFDN0IsT0FBTyxLQUFLO0VBQ2Q7RUFDQSxNQUFNbkIsS0FBSyxHQUFHZSxJQUFJLENBQUNJLEdBQUcsQ0FBQztFQUN2QixPQUFPbkIsS0FBSyxLQUFLUyxTQUFTLElBQUlULEtBQUssS0FBSyxJQUFJO0FBQzlDO0FBRUEsU0FBU04sYUFBYUEsQ0FBQ0YsUUFBZ0IsRUFBRUQsTUFBZ0IsRUFBVTtFQUNqRSxNQUFNNkQsTUFBTSxHQUFHN0QsTUFBTSxDQUFDcUQsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUMvQixPQUFPLDBCQUEwQnBELFFBQVEsTUFBTTRELE1BQU0sRUFBRTtBQUN6RCIsImlnbm9yZUxpc3QiOltdfQ==