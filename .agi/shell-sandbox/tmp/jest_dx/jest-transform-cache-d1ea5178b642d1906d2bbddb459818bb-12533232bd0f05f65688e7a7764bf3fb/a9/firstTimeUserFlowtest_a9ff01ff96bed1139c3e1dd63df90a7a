a20374585081c1c4260025d1691f48fb
"use strict";

var _testHelpers = require("../utils/testHelpers.js");
/**
 * First-Time User Flow Tests
 *
 * Tests the complete experience of a new user interacting with erosolar-cli
 * for the first time. Covers onboarding, initial setup, first interactions,
 * and common first-time use cases.
 */

describe('First-Time User Flow Tests', () => {
  let env;
  let tempDir;
  beforeEach(() => {
    env = new _testHelpers.TestEnvironment();
    tempDir = env.createTempDir('first-time-user-');
    env.setEnv({
      EROSOLAR_DATA_DIR: tempDir
    });
  });
  afterEach(() => {
    env.cleanup();
  });
  describe('Initial Launch Experience', () => {
    it('should detect first-time user and provide welcome experience', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'Hello! Welcome to erosolar-cli. I\'m here to help you with coding tasks. How can I assist you today?',
        usage: {
          inputTokens: 50,
          outputTokens: 30
        }
      });
      const {
        response
      } = await simulator.sendMessage('Hi');
      expect(_testHelpers.FlowValidators.expectsWelcomeMessage(response)).toBe(true);
      expect(simulator.getSession().isFirstTime).toBe(true);
      simulator.cleanup();
    });
    it('should initialize empty session state for new user', () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      const session = simulator.getSession();
      expect(session.messages.length).toBe(0);
      expect(session.isFirstTime).toBe(true);
      expect(session.id).toBeTruthy();
      simulator.cleanup();
    });
    it('should use default profile for new users', () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      const session = simulator.getSession();
      expect(session.profile).toBe('general');
      simulator.cleanup();
    });
  });
  describe('First Interaction Patterns', () => {
    it('should handle basic greeting from first-time user', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'Hello! I\'m your AI coding assistant. I can help you with writing code, debugging, testing, and more. What would you like to work on today?',
        usage: {
          inputTokens: 20,
          outputTokens: 40
        }
      });
      const {
        response
      } = await simulator.sendMessage('Hello!');
      expect(response.length).toBeGreaterThan(0);
      expect(response.toLowerCase().includes('help') || response.toLowerCase().includes('assist') || response.toLowerCase().includes('hello')).toBe(true);
      const history = simulator.getHistory();
      expect(history.length).toBe(2);
      expect(history[0]?.role).toBe('user');
      expect(history[1]?.role).toBe('assistant');
      simulator.cleanup();
    });
    it('should provide coding help when requested', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: `Here's a function to calculate Fibonacci numbers:

\`\`\`typescript
function fibonacci(n: number): number {
  if (n <= 1) return n;
  return fibonacci(n - 1) + fibonacci(n - 2);
}
\`\`\`

This recursive implementation calculates the nth Fibonacci number.`,
        usage: {
          inputTokens: 30,
          outputTokens: 80
        }
      });
      const {
        response
      } = await simulator.sendMessage('Can you help me write a function to calculate fibonacci numbers?');
      expect(response.includes('function')).toBe(true);
      expect(response.includes('fibonacci') || response.includes('Fibonacci')).toBe(true);
      expect(response.includes('```')).toBe(true);
      simulator.cleanup();
    });
    it('should handle unclear requests gracefully', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'I\'d be happy to help! Could you tell me more about what you\'re trying to accomplish?',
        usage: {
          inputTokens: 15,
          outputTokens: 45
        }
      });
      const {
        response
      } = await simulator.sendMessage('help');
      expect(response.toLowerCase().includes('help') || response.toLowerCase().includes('what') || response.toLowerCase().includes('tell me')).toBe(true);
      simulator.cleanup();
    });
  });
  describe('Project Exploration (First Time)', () => {
    it('should help user explore their project structure', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: `I found the following files in your project:

- package.json (project configuration)
- src/index.ts (entry point)
- build/index.html (built output)`,
        usage: {
          inputTokens: 40,
          outputTokens: /* TODO: Extract constant */60
        }
      });
      const {
        response
      } = await simulator.sendMessage('What files are in this project?');
      expect(response.includes('package.json') || response.includes('files') || response.includes('project')).toBe(true);
      simulator.cleanup();
    });
    it('should read and explain specific files', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: `Here's your package.json:

\`\`\`json
{
  "name": "test-project",
  "version": "1.0.0"
}
\`\`\``,
        usage: {
          inputTokens: 50,
          outputTokens: 70
        }
      });
      const {
        response
      } = await simulator.sendMessage('Show me the package.json');
      expect(response.includes('package.json') || response.includes('{')).toBe(true);
      simulator.cleanup();
    });
  });
  describe('First-Time Error Handling', () => {
    it('should handle missing files gracefully for new users', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'I couldn\'t find a file named "nonexistent.ts" in your project. Would you like me to list the available files?',
        usage: {
          inputTokens: 30,
          outputTokens: 50
        }
      });
      const {
        response
      } = await simulator.sendMessage('Read nonexistent.ts');
      expect(_testHelpers.FlowValidators.expectsGracefulError(response) || response.toLowerCase().includes('couldn\'t find') || response.toLowerCase().includes('not found')).toBe(true);
      simulator.cleanup();
    });
    it('should guide user when command is unclear', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'I\'m not sure I understand what you\'d like me to do. Could you provide more context?',
        usage: {
          inputTokens: 20,
          outputTokens: 45
        }
      });
      const {
        response
      } = await simulator.sendMessage('xyz123');
      expect(response.toLowerCase().includes('understand') || response.toLowerCase().includes('help') || response.toLowerCase().includes('what')).toBe(true);
      simulator.cleanup();
    });
  });
  describe('Session Persistence for New Users', () => {
    it('should save first session for future reference', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'I\'ve noted that you want to build a todo app.',
        usage: {
          inputTokens: 25,
          outputTokens: 30
        }
      });
      await simulator.sendMessage('I want to build a todo app');
      const saved = simulator.saveSession();
      expect(saved.id).toBeTruthy();
      expect(saved.messageCount).toBe(2);
      simulator.cleanup();
    });
    it('should track conversation history correctly', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: 'Sure! Let\'s build a React todo app.',
        usage: {
          inputTokens: 20,
          outputTokens: 25
        }
      });
      simulator.queueResponse({
        content: 'Here\'s a basic TodoItem component.',
        usage: {
          inputTokens: 30,
          outputTokens: 40
        }
      });
      await simulator.sendMessage('Help me build a todo app in React');
      await simulator.sendMessage('Start with the TodoItem component');
      const history = simulator.getHistory();
      expect(history.length).toBe(4);
      expect(history[0]?.role).toBe('user');
      expect(history[1]?.role).toBe('assistant');
      expect(history[2]?.role).toBe('user');
      expect(history[3]?.role).toBe('assistant');
      simulator.cleanup();
    });
  });
  describe('First-Time User Scenarios (Predefined)', () => {
    for (const scenario of _testHelpers.FirstTimeUserFlows) {
      it(`should handle scenario: ${scenario.name}`, async () => {
        const simulator = new _testHelpers.SessionSimulator({
          isFirstTime: true
        });
        for (const step of scenario.steps) {
          simulator.queueResponse({
            content: `[Mock response for: ${step.description}]`,
            usage: {
              inputTokens: 20,
              outputTokens: 30
            }
          });
          const {
            response
          } = await simulator.sendMessage(step.userInput);
          expect(typeof response).toBe('string');
        }
        const session = simulator.getSession();
        expect(session.messages.length).toBeGreaterThan(0);
        simulator.cleanup();
      });
    }
  });
  describe('First-Time Frontend Testing Flow', () => {
    it('should guide first-time user through build verification', async () => {
      const projectDir = env.createMockProject({
        framework: 'react',
        hasTests: true
      });
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true,
        workspaceRoot: projectDir
      });
      simulator.queueResponse({
        content: `I'll verify your build output...

Build Output Verification
Framework: React

Build directory exists
index.html found

Bundle within size limit`,
        usage: {
          inputTokens: 40,
          outputTokens: 80
        }
      });
      const {
        response
      } = await simulator.sendMessage('Can you verify my build output?');
      expect(response.includes('Build') || response.includes('build')).toBe(true);
      expect(response.includes('exists') || response.includes('found')).toBe(true);
      simulator.cleanup();
    });
    it('should explain E2E testing options to new users', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      simulator.queueResponse({
        content: `I don't see an E2E testing framework set up yet. Here are your options:

**Cypress** (Recommended for beginners)
- Easy to set up and use

**Playwright** (Recommended for cross-browser)
- Supports multiple browsers`,
        usage: {
          inputTokens: 35,
          outputTokens: 70
        }
      });
      const {
        response
      } = await simulator.sendMessage('How do I run E2E tests?');
      expect(response.toLowerCase().includes('cypress') || response.toLowerCase().includes('playwright') || response.toLowerCase().includes('e2e')).toBe(true);
      simulator.cleanup();
    });
    it('should run complete frontend test workflow for first-time user', async () => {
      const projectDir = env.createMockProject({
        framework: 'react',
        hasTests: true,
        hasE2E: false
      });
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true,
        workspaceRoot: projectDir
      });
      simulator.queueResponse({
        content: `Frontend Testing Workflow

Step 1: Build Verification
Build succeeded

Step 2: Unit Tests
Unit tests passed

WORKFLOW SUMMARY
Build: PASS
Unit Tests: PASS

WORKFLOW PASSED`,
        usage: {
          inputTokens: 50,
          outputTokens: 120
        }
      });
      const {
        response
      } = await simulator.sendMessage('Run the complete frontend testing workflow');
      expect(response.includes('WORKFLOW')).toBe(true);
      expect(response.includes('Build') || response.includes('build')).toBe(true);
      expect(response.includes('PASS') || response.includes('passed')).toBe(true);
      simulator.cleanup();
    });
  });
  describe('Onboarding Completeness', () => {
    it('should track that user has completed first interaction', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      expect(simulator.getSession().isFirstTime).toBe(true);
      expect(simulator.getHistory().length).toBe(0);
      simulator.queueResponse({
        content: 'Hello! How can I help you today?',
        usage: {
          inputTokens: 10,
          outputTokens: 15
        }
      });
      await simulator.sendMessage('Hi there');
      const history = simulator.getHistory();
      expect(history.length).toBe(2);
      const session = simulator.getSession();
      expect(session.messages.length).toBeGreaterThan(0);
      simulator.cleanup();
    });
    it('should handle multiple first interactions building context', async () => {
      const simulator = new _testHelpers.SessionSimulator({
        isFirstTime: true
      });
      const interactions = [{
        input: 'Hello!',
        response: 'Hello! Welcome to erosolar-cli.'
      }, {
        input: 'What can you do?',
        response: 'I can help you with coding, testing, debugging, and more.'
      }, {
        input: 'I\'m working on a React app',
        response: 'Great! I can help with React development.'
      }];
      for (const {
        input,
        response
      } of interactions) {
        simulator.queueResponse({
          content: response,
          usage: {
            inputTokens: 20,
            outputTokens: 25
          }
        });
        await simulator.sendMessage(input);
      }
      const history = simulator.getHistory();
      expect(history.length).toBe(6);
      const userMessages = history.filter(m => m.role === 'user');
      expect(userMessages.length).toBe(3);
      simulator.cleanup();
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdGVzdEhlbHBlcnMiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJlbnYiLCJ0ZW1wRGlyIiwiYmVmb3JlRWFjaCIsIlRlc3RFbnZpcm9ubWVudCIsImNyZWF0ZVRlbXBEaXIiLCJzZXRFbnYiLCJFUk9TT0xBUl9EQVRBX0RJUiIsImFmdGVyRWFjaCIsImNsZWFudXAiLCJpdCIsInNpbXVsYXRvciIsIlNlc3Npb25TaW11bGF0b3IiLCJpc0ZpcnN0VGltZSIsInF1ZXVlUmVzcG9uc2UiLCJjb250ZW50IiwidXNhZ2UiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInJlc3BvbnNlIiwic2VuZE1lc3NhZ2UiLCJleHBlY3QiLCJGbG93VmFsaWRhdG9ycyIsImV4cGVjdHNXZWxjb21lTWVzc2FnZSIsInRvQmUiLCJnZXRTZXNzaW9uIiwic2Vzc2lvbiIsIm1lc3NhZ2VzIiwibGVuZ3RoIiwiaWQiLCJ0b0JlVHJ1dGh5IiwicHJvZmlsZSIsInRvQmVHcmVhdGVyVGhhbiIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJoaXN0b3J5IiwiZ2V0SGlzdG9yeSIsInJvbGUiLCJleHBlY3RzR3JhY2VmdWxFcnJvciIsInNhdmVkIiwic2F2ZVNlc3Npb24iLCJtZXNzYWdlQ291bnQiLCJzY2VuYXJpbyIsIkZpcnN0VGltZVVzZXJGbG93cyIsIm5hbWUiLCJzdGVwIiwic3RlcHMiLCJkZXNjcmlwdGlvbiIsInVzZXJJbnB1dCIsInByb2plY3REaXIiLCJjcmVhdGVNb2NrUHJvamVjdCIsImZyYW1ld29yayIsImhhc1Rlc3RzIiwid29ya3NwYWNlUm9vdCIsImhhc0UyRSIsImludGVyYWN0aW9ucyIsImlucHV0IiwidXNlck1lc3NhZ2VzIiwiZmlsdGVyIiwibSJdLCJzb3VyY2VzIjpbImZpcnN0VGltZVVzZXJGbG93LnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBGaXJzdC1UaW1lIFVzZXIgRmxvdyBUZXN0c1xuICpcbiAqIFRlc3RzIHRoZSBjb21wbGV0ZSBleHBlcmllbmNlIG9mIGEgbmV3IHVzZXIgaW50ZXJhY3Rpbmcgd2l0aCBlcm9zb2xhci1jbGlcbiAqIGZvciB0aGUgZmlyc3QgdGltZS4gQ292ZXJzIG9uYm9hcmRpbmcsIGluaXRpYWwgc2V0dXAsIGZpcnN0IGludGVyYWN0aW9ucyxcbiAqIGFuZCBjb21tb24gZmlyc3QtdGltZSB1c2UgY2FzZXMuXG4gKi9cblxuaW1wb3J0IHtcbiAgVGVzdEVudmlyb25tZW50LFxuICBTZXNzaW9uU2ltdWxhdG9yLFxuICBGbG93VmFsaWRhdG9ycyxcbiAgRmlyc3RUaW1lVXNlckZsb3dzLFxufSBmcm9tICcuLi91dGlscy90ZXN0SGVscGVycy5qcyc7XG5cbmRlc2NyaWJlKCdGaXJzdC1UaW1lIFVzZXIgRmxvdyBUZXN0cycsICgpID0+IHtcbiAgbGV0IGVudjogVGVzdEVudmlyb25tZW50O1xuICBsZXQgdGVtcERpcjogc3RyaW5nO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGVudiA9IG5ldyBUZXN0RW52aXJvbm1lbnQoKTtcbiAgICB0ZW1wRGlyID0gZW52LmNyZWF0ZVRlbXBEaXIoJ2ZpcnN0LXRpbWUtdXNlci0nKTtcbiAgICBlbnYuc2V0RW52KHsgRVJPU09MQVJfREFUQV9ESVI6IHRlbXBEaXIgfSk7XG4gIH0pO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgZW52LmNsZWFudXAoKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0luaXRpYWwgTGF1bmNoIEV4cGVyaWVuY2UnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBkZXRlY3QgZmlyc3QtdGltZSB1c2VyIGFuZCBwcm92aWRlIHdlbGNvbWUgZXhwZXJpZW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIHNpbXVsYXRvci5xdWV1ZVJlc3BvbnNlKHtcbiAgICAgICAgY29udGVudDogJ0hlbGxvISBXZWxjb21lIHRvIGVyb3NvbGFyLWNsaS4gSVxcJ20gaGVyZSB0byBoZWxwIHlvdSB3aXRoIGNvZGluZyB0YXNrcy4gSG93IGNhbiBJIGFzc2lzdCB5b3UgdG9kYXk/JyxcbiAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDUwLCBvdXRwdXRUb2tlbnM6IDMwIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKCdIaScpO1xuXG4gICAgICBleHBlY3QoRmxvd1ZhbGlkYXRvcnMuZXhwZWN0c1dlbGNvbWVNZXNzYWdlKHJlc3BvbnNlKSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzaW11bGF0b3IuZ2V0U2Vzc2lvbigpLmlzRmlyc3RUaW1lKS50b0JlKHRydWUpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBpbml0aWFsaXplIGVtcHR5IHNlc3Npb24gc3RhdGUgZm9yIG5ldyB1c2VyJywgKCkgPT4ge1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgY29uc3Qgc2Vzc2lvbiA9IHNpbXVsYXRvci5nZXRTZXNzaW9uKCk7XG4gICAgICBleHBlY3Qoc2Vzc2lvbi5tZXNzYWdlcy5sZW5ndGgpLnRvQmUoMCk7XG4gICAgICBleHBlY3Qoc2Vzc2lvbi5pc0ZpcnN0VGltZSkudG9CZSh0cnVlKTtcbiAgICAgIGV4cGVjdChzZXNzaW9uLmlkKS50b0JlVHJ1dGh5KCk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHVzZSBkZWZhdWx0IHByb2ZpbGUgZm9yIG5ldyB1c2VycycsICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIGNvbnN0IHNlc3Npb24gPSBzaW11bGF0b3IuZ2V0U2Vzc2lvbigpO1xuICAgICAgZXhwZWN0KHNlc3Npb24ucHJvZmlsZSkudG9CZSgnZ2VuZXJhbCcpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlyc3QgSW50ZXJhY3Rpb24gUGF0dGVybnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgYmFzaWMgZ3JlZXRpbmcgZnJvbSBmaXJzdC10aW1lIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaW11bGF0b3IgPSBuZXcgU2Vzc2lvblNpbXVsYXRvcih7IGlzRmlyc3RUaW1lOiB0cnVlIH0pO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6ICdIZWxsbyEgSVxcJ20geW91ciBBSSBjb2RpbmcgYXNzaXN0YW50LiBJIGNhbiBoZWxwIHlvdSB3aXRoIHdyaXRpbmcgY29kZSwgZGVidWdnaW5nLCB0ZXN0aW5nLCBhbmQgbW9yZS4gV2hhdCB3b3VsZCB5b3UgbGlrZSB0byB3b3JrIG9uIHRvZGF5PycsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiAyMCwgb3V0cHV0VG9rZW5zOiA0MCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnSGVsbG8hJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZS5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChcbiAgICAgICAgcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnaGVscCcpIHx8XG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Fzc2lzdCcpIHx8XG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hlbGxvJylcbiAgICAgICkudG9CZSh0cnVlKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IHNpbXVsYXRvci5nZXRIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMik7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXT8ucm9sZSkudG9CZSgndXNlcicpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMV0/LnJvbGUpLnRvQmUoJ2Fzc2lzdGFudCcpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBwcm92aWRlIGNvZGluZyBoZWxwIHdoZW4gcmVxdWVzdGVkJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiBgSGVyZSdzIGEgZnVuY3Rpb24gdG8gY2FsY3VsYXRlIEZpYm9uYWNjaSBudW1iZXJzOlxuXG5cXGBcXGBcXGB0eXBlc2NyaXB0XG5mdW5jdGlvbiBmaWJvbmFjY2kobjogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKG4gPD0gMSkgcmV0dXJuIG47XG4gIHJldHVybiBmaWJvbmFjY2kobiAtIDEpICsgZmlib25hY2NpKG4gLSAyKTtcbn1cblxcYFxcYFxcYFxuXG5UaGlzIHJlY3Vyc2l2ZSBpbXBsZW1lbnRhdGlvbiBjYWxjdWxhdGVzIHRoZSBudGggRmlib25hY2NpIG51bWJlci5gLFxuICAgICAgICB1c2FnZTogeyBpbnB1dFRva2VuczogMzAsIG91dHB1dFRva2VuczogODAgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3BvbnNlIH0gPSBhd2FpdCBzaW11bGF0b3Iuc2VuZE1lc3NhZ2UoXG4gICAgICAgICdDYW4geW91IGhlbHAgbWUgd3JpdGUgYSBmdW5jdGlvbiB0byBjYWxjdWxhdGUgZmlib25hY2NpIG51bWJlcnM/J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdmdW5jdGlvbicpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdmaWJvbmFjY2knKSB8fCByZXNwb25zZS5pbmNsdWRlcygnRmlib25hY2NpJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaW5jbHVkZXMoJ2BgYCcpKS50b0JlKHRydWUpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgdW5jbGVhciByZXF1ZXN0cyBncmFjZWZ1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiAnSVxcJ2QgYmUgaGFwcHkgdG8gaGVscCEgQ291bGQgeW91IHRlbGwgbWUgbW9yZSBhYm91dCB3aGF0IHlvdVxcJ3JlIHRyeWluZyB0byBhY2NvbXBsaXNoPycsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiAxNSwgb3V0cHV0VG9rZW5zOiA0NSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnaGVscCcpO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2hlbHAnKSB8fFxuICAgICAgICByZXNwb25zZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd3aGF0JykgfHxcbiAgICAgICAgcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygndGVsbCBtZScpXG4gICAgICApLnRvQmUodHJ1ZSk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdQcm9qZWN0IEV4cGxvcmF0aW9uIChGaXJzdCBUaW1lKScsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhlbHAgdXNlciBleHBsb3JlIHRoZWlyIHByb2plY3Qgc3RydWN0dXJlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiBgSSBmb3VuZCB0aGUgZm9sbG93aW5nIGZpbGVzIGluIHlvdXIgcHJvamVjdDpcblxuLSBwYWNrYWdlLmpzb24gKHByb2plY3QgY29uZmlndXJhdGlvbilcbi0gc3JjL2luZGV4LnRzIChlbnRyeSBwb2ludClcbi0gYnVpbGQvaW5kZXguaHRtbCAoYnVpbHQgb3V0cHV0KWAsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiA0MCwgb3V0cHV0VG9rZW5zOiAvKiBUT0RPOiBFeHRyYWN0IGNvbnN0YW50ICovIDYwIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKCdXaGF0IGZpbGVzIGFyZSBpbiB0aGlzIHByb2plY3Q/Jyk7XG5cbiAgICAgIGV4cGVjdChcbiAgICAgICAgcmVzcG9uc2UuaW5jbHVkZXMoJ3BhY2thZ2UuanNvbicpIHx8XG4gICAgICAgIHJlc3BvbnNlLmluY2x1ZGVzKCdmaWxlcycpIHx8XG4gICAgICAgIHJlc3BvbnNlLmluY2x1ZGVzKCdwcm9qZWN0JylcbiAgICAgICkudG9CZSh0cnVlKTtcblxuICAgICAgc2ltdWxhdG9yLmNsZWFudXAoKTtcbiAgICB9KTtcblxuICAgIGl0KCdzaG91bGQgcmVhZCBhbmQgZXhwbGFpbiBzcGVjaWZpYyBmaWxlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIHNpbXVsYXRvci5xdWV1ZVJlc3BvbnNlKHtcbiAgICAgICAgY29udGVudDogYEhlcmUncyB5b3VyIHBhY2thZ2UuanNvbjpcblxuXFxgXFxgXFxganNvblxue1xuICBcIm5hbWVcIjogXCJ0ZXN0LXByb2plY3RcIixcbiAgXCJ2ZXJzaW9uXCI6IFwiMS4wLjBcIlxufVxuXFxgXFxgXFxgYCxcbiAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDUwLCBvdXRwdXRUb2tlbnM6IDcwIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKCdTaG93IG1lIHRoZSBwYWNrYWdlLmpzb24nKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdwYWNrYWdlLmpzb24nKSB8fCByZXNwb25zZS5pbmNsdWRlcygneycpKS50b0JlKHRydWUpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRmlyc3QtVGltZSBFcnJvciBIYW5kbGluZycsICgpID0+IHtcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtaXNzaW5nIGZpbGVzIGdyYWNlZnVsbHkgZm9yIG5ldyB1c2VycycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIHNpbXVsYXRvci5xdWV1ZVJlc3BvbnNlKHtcbiAgICAgICAgY29udGVudDogJ0kgY291bGRuXFwndCBmaW5kIGEgZmlsZSBuYW1lZCBcIm5vbmV4aXN0ZW50LnRzXCIgaW4geW91ciBwcm9qZWN0LiBXb3VsZCB5b3UgbGlrZSBtZSB0byBsaXN0IHRoZSBhdmFpbGFibGUgZmlsZXM/JyxcbiAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDMwLCBvdXRwdXRUb2tlbnM6IDUwIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKCdSZWFkIG5vbmV4aXN0ZW50LnRzJyk7XG5cbiAgICAgIGV4cGVjdChcbiAgICAgICAgRmxvd1ZhbGlkYXRvcnMuZXhwZWN0c0dyYWNlZnVsRXJyb3IocmVzcG9uc2UpIHx8XG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2NvdWxkblxcJ3QgZmluZCcpIHx8XG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ25vdCBmb3VuZCcpXG4gICAgICApLnRvQmUodHJ1ZSk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGd1aWRlIHVzZXIgd2hlbiBjb21tYW5kIGlzIHVuY2xlYXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaW11bGF0b3IgPSBuZXcgU2Vzc2lvblNpbXVsYXRvcih7IGlzRmlyc3RUaW1lOiB0cnVlIH0pO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6ICdJXFwnbSBub3Qgc3VyZSBJIHVuZGVyc3RhbmQgd2hhdCB5b3VcXCdkIGxpa2UgbWUgdG8gZG8uIENvdWxkIHlvdSBwcm92aWRlIG1vcmUgY29udGV4dD8nLFxuICAgICAgICB1c2FnZTogeyBpbnB1dFRva2VuczogMjAsIG91dHB1dFRva2VuczogNDUgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCB7IHJlc3BvbnNlIH0gPSBhd2FpdCBzaW11bGF0b3Iuc2VuZE1lc3NhZ2UoJ3h5ejEyMycpO1xuXG4gICAgICBleHBlY3QoXG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3VuZGVyc3RhbmQnKSB8fFxuICAgICAgICByZXNwb25zZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdoZWxwJykgfHxcbiAgICAgICAgcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnd2hhdCcpXG4gICAgICApLnRvQmUodHJ1ZSk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdTZXNzaW9uIFBlcnNpc3RlbmNlIGZvciBOZXcgVXNlcnMnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBzYXZlIGZpcnN0IHNlc3Npb24gZm9yIGZ1dHVyZSByZWZlcmVuY2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaW11bGF0b3IgPSBuZXcgU2Vzc2lvblNpbXVsYXRvcih7IGlzRmlyc3RUaW1lOiB0cnVlIH0pO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6ICdJXFwndmUgbm90ZWQgdGhhdCB5b3Ugd2FudCB0byBidWlsZCBhIHRvZG8gYXBwLicsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiAyNSwgb3V0cHV0VG9rZW5zOiAzMCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnSSB3YW50IHRvIGJ1aWxkIGEgdG9kbyBhcHAnKTtcblxuICAgICAgY29uc3Qgc2F2ZWQgPSBzaW11bGF0b3Iuc2F2ZVNlc3Npb24oKTtcblxuICAgICAgZXhwZWN0KHNhdmVkLmlkKS50b0JlVHJ1dGh5KCk7XG4gICAgICBleHBlY3Qoc2F2ZWQubWVzc2FnZUNvdW50KS50b0JlKDIpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBjb252ZXJzYXRpb24gaGlzdG9yeSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBzaW11bGF0b3IgPSBuZXcgU2Vzc2lvblNpbXVsYXRvcih7IGlzRmlyc3RUaW1lOiB0cnVlIH0pO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6ICdTdXJlISBMZXRcXCdzIGJ1aWxkIGEgUmVhY3QgdG9kbyBhcHAuJyxcbiAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDIwLCBvdXRwdXRUb2tlbnM6IDI1IH0sXG4gICAgICB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiAnSGVyZVxcJ3MgYSBiYXNpYyBUb2RvSXRlbSBjb21wb25lbnQuJyxcbiAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDMwLCBvdXRwdXRUb2tlbnM6IDQwIH0sXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKCdIZWxwIG1lIGJ1aWxkIGEgdG9kbyBhcHAgaW4gUmVhY3QnKTtcbiAgICAgIGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnU3RhcnQgd2l0aCB0aGUgVG9kb0l0ZW0gY29tcG9uZW50Jyk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBzaW11bGF0b3IuZ2V0SGlzdG9yeSgpO1xuXG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoNCk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXT8ucm9sZSkudG9CZSgndXNlcicpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMV0/LnJvbGUpLnRvQmUoJ2Fzc2lzdGFudCcpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMl0/LnJvbGUpLnRvQmUoJ3VzZXInKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzNdPy5yb2xlKS50b0JlKCdhc3Npc3RhbnQnKTtcblxuICAgICAgc2ltdWxhdG9yLmNsZWFudXAoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ0ZpcnN0LVRpbWUgVXNlciBTY2VuYXJpb3MgKFByZWRlZmluZWQpJywgKCkgPT4ge1xuICAgIGZvciAoY29uc3Qgc2NlbmFyaW8gb2YgRmlyc3RUaW1lVXNlckZsb3dzKSB7XG4gICAgICBpdChgc2hvdWxkIGhhbmRsZSBzY2VuYXJpbzogJHtzY2VuYXJpby5uYW1lfWAsIGFzeW5jICgpID0+IHtcbiAgICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgICBmb3IgKGNvbnN0IHN0ZXAgb2Ygc2NlbmFyaW8uc3RlcHMpIHtcbiAgICAgICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgICAgICBjb250ZW50OiBgW01vY2sgcmVzcG9uc2UgZm9yOiAke3N0ZXAuZGVzY3JpcHRpb259XWAsXG4gICAgICAgICAgICB1c2FnZTogeyBpbnB1dFRva2VuczogMjAsIG91dHB1dFRva2VuczogMzAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZShzdGVwLnVzZXJJbnB1dCk7XG5cbiAgICAgICAgICBleHBlY3QodHlwZW9mIHJlc3BvbnNlKS50b0JlKCdzdHJpbmcnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IHNlc3Npb24gPSBzaW11bGF0b3IuZ2V0U2Vzc2lvbigpO1xuICAgICAgICBleHBlY3Qoc2Vzc2lvbi5tZXNzYWdlcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcblxuICAgICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgICAgfSk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgnRmlyc3QtVGltZSBGcm9udGVuZCBUZXN0aW5nIEZsb3cnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCBndWlkZSBmaXJzdC10aW1lIHVzZXIgdGhyb3VnaCBidWlsZCB2ZXJpZmljYXRpb24nLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0RGlyID0gZW52LmNyZWF0ZU1vY2tQcm9qZWN0KHsgZnJhbWV3b3JrOiAncmVhY3QnLCBoYXNUZXN0czogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHtcbiAgICAgICAgaXNGaXJzdFRpbWU6IHRydWUsXG4gICAgICAgIHdvcmtzcGFjZVJvb3Q6IHByb2plY3REaXIsXG4gICAgICB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiBgSSdsbCB2ZXJpZnkgeW91ciBidWlsZCBvdXRwdXQuLi5cblxuQnVpbGQgT3V0cHV0IFZlcmlmaWNhdGlvblxuRnJhbWV3b3JrOiBSZWFjdFxuXG5CdWlsZCBkaXJlY3RvcnkgZXhpc3RzXG5pbmRleC5odG1sIGZvdW5kXG5cbkJ1bmRsZSB3aXRoaW4gc2l6ZSBsaW1pdGAsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiA0MCwgb3V0cHV0VG9rZW5zOiA4MCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnQ2FuIHlvdSB2ZXJpZnkgbXkgYnVpbGQgb3V0cHV0PycpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UuaW5jbHVkZXMoJ0J1aWxkJykgfHwgcmVzcG9uc2UuaW5jbHVkZXMoJ2J1aWxkJykpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3QocmVzcG9uc2UuaW5jbHVkZXMoJ2V4aXN0cycpIHx8IHJlc3BvbnNlLmluY2x1ZGVzKCdmb3VuZCcpKS50b0JlKHRydWUpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuXG4gICAgaXQoJ3Nob3VsZCBleHBsYWluIEUyRSB0ZXN0aW5nIG9wdGlvbnMgdG8gbmV3IHVzZXJzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3IoeyBpc0ZpcnN0VGltZTogdHJ1ZSB9KTtcblxuICAgICAgc2ltdWxhdG9yLnF1ZXVlUmVzcG9uc2Uoe1xuICAgICAgICBjb250ZW50OiBgSSBkb24ndCBzZWUgYW4gRTJFIHRlc3RpbmcgZnJhbWV3b3JrIHNldCB1cCB5ZXQuIEhlcmUgYXJlIHlvdXIgb3B0aW9uczpcblxuKipDeXByZXNzKiogKFJlY29tbWVuZGVkIGZvciBiZWdpbm5lcnMpXG4tIEVhc3kgdG8gc2V0IHVwIGFuZCB1c2VcblxuKipQbGF5d3JpZ2h0KiogKFJlY29tbWVuZGVkIGZvciBjcm9zcy1icm93c2VyKVxuLSBTdXBwb3J0cyBtdWx0aXBsZSBicm93c2Vyc2AsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiAzNSwgb3V0cHV0VG9rZW5zOiA3MCB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHsgcmVzcG9uc2UgfSA9IGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnSG93IGRvIEkgcnVuIEUyRSB0ZXN0cz8nKTtcblxuICAgICAgZXhwZWN0KFxuICAgICAgICByZXNwb25zZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjeXByZXNzJykgfHxcbiAgICAgICAgcmVzcG9uc2UudG9Mb3dlckNhc2UoKS5pbmNsdWRlcygncGxheXdyaWdodCcpIHx8XG4gICAgICAgIHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2UyZScpXG4gICAgICApLnRvQmUodHJ1ZSk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIHJ1biBjb21wbGV0ZSBmcm9udGVuZCB0ZXN0IHdvcmtmbG93IGZvciBmaXJzdC10aW1lIHVzZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwcm9qZWN0RGlyID0gZW52LmNyZWF0ZU1vY2tQcm9qZWN0KHtcbiAgICAgICAgZnJhbWV3b3JrOiAncmVhY3QnLFxuICAgICAgICBoYXNUZXN0czogdHJ1ZSxcbiAgICAgICAgaGFzRTJFOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgY29uc3Qgc2ltdWxhdG9yID0gbmV3IFNlc3Npb25TaW11bGF0b3Ioe1xuICAgICAgICBpc0ZpcnN0VGltZTogdHJ1ZSxcbiAgICAgICAgd29ya3NwYWNlUm9vdDogcHJvamVjdERpcixcbiAgICAgIH0pO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6IGBGcm9udGVuZCBUZXN0aW5nIFdvcmtmbG93XG5cblN0ZXAgMTogQnVpbGQgVmVyaWZpY2F0aW9uXG5CdWlsZCBzdWNjZWVkZWRcblxuU3RlcCAyOiBVbml0IFRlc3RzXG5Vbml0IHRlc3RzIHBhc3NlZFxuXG5XT1JLRkxPVyBTVU1NQVJZXG5CdWlsZDogUEFTU1xuVW5pdCBUZXN0czogUEFTU1xuXG5XT1JLRkxPVyBQQVNTRURgLFxuICAgICAgICB1c2FnZTogeyBpbnB1dFRva2VuczogNTAsIG91dHB1dFRva2VuczogMTIwIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgeyByZXNwb25zZSB9ID0gYXdhaXQgc2ltdWxhdG9yLnNlbmRNZXNzYWdlKFxuICAgICAgICAnUnVuIHRoZSBjb21wbGV0ZSBmcm9udGVuZCB0ZXN0aW5nIHdvcmtmbG93J1xuICAgICAgKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdXT1JLRkxPVycpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdCdWlsZCcpIHx8IHJlc3BvbnNlLmluY2x1ZGVzKCdidWlsZCcpKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLmluY2x1ZGVzKCdQQVNTJykgfHwgcmVzcG9uc2UuaW5jbHVkZXMoJ3Bhc3NlZCcpKS50b0JlKHRydWUpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnT25ib2FyZGluZyBDb21wbGV0ZW5lc3MnLCAoKSA9PiB7XG4gICAgaXQoJ3Nob3VsZCB0cmFjayB0aGF0IHVzZXIgaGFzIGNvbXBsZXRlZCBmaXJzdCBpbnRlcmFjdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIGV4cGVjdChzaW11bGF0b3IuZ2V0U2Vzc2lvbigpLmlzRmlyc3RUaW1lKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNpbXVsYXRvci5nZXRIaXN0b3J5KCkubGVuZ3RoKS50b0JlKDApO1xuXG4gICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgIGNvbnRlbnQ6ICdIZWxsbyEgSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5PycsXG4gICAgICAgIHVzYWdlOiB7IGlucHV0VG9rZW5zOiAxMCwgb3V0cHV0VG9rZW5zOiAxNSB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHNpbXVsYXRvci5zZW5kTWVzc2FnZSgnSGkgdGhlcmUnKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IHNpbXVsYXRvci5nZXRIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMik7XG5cbiAgICAgIGNvbnN0IHNlc3Npb24gPSBzaW11bGF0b3IuZ2V0U2Vzc2lvbigpO1xuICAgICAgZXhwZWN0KHNlc3Npb24ubWVzc2FnZXMubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIHNpbXVsYXRvci5jbGVhbnVwKCk7XG4gICAgfSk7XG5cbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBtdWx0aXBsZSBmaXJzdCBpbnRlcmFjdGlvbnMgYnVpbGRpbmcgY29udGV4dCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNpbXVsYXRvciA9IG5ldyBTZXNzaW9uU2ltdWxhdG9yKHsgaXNGaXJzdFRpbWU6IHRydWUgfSk7XG5cbiAgICAgIGNvbnN0IGludGVyYWN0aW9ucyA9IFtcbiAgICAgICAgeyBpbnB1dDogJ0hlbGxvIScsIHJlc3BvbnNlOiAnSGVsbG8hIFdlbGNvbWUgdG8gZXJvc29sYXItY2xpLicgfSxcbiAgICAgICAgeyBpbnB1dDogJ1doYXQgY2FuIHlvdSBkbz8nLCByZXNwb25zZTogJ0kgY2FuIGhlbHAgeW91IHdpdGggY29kaW5nLCB0ZXN0aW5nLCBkZWJ1Z2dpbmcsIGFuZCBtb3JlLicgfSxcbiAgICAgICAgeyBpbnB1dDogJ0lcXCdtIHdvcmtpbmcgb24gYSBSZWFjdCBhcHAnLCByZXNwb25zZTogJ0dyZWF0ISBJIGNhbiBoZWxwIHdpdGggUmVhY3QgZGV2ZWxvcG1lbnQuJyB9LFxuICAgICAgXTtcblxuICAgICAgZm9yIChjb25zdCB7IGlucHV0LCByZXNwb25zZSB9IG9mIGludGVyYWN0aW9ucykge1xuICAgICAgICBzaW11bGF0b3IucXVldWVSZXNwb25zZSh7XG4gICAgICAgICAgY29udGVudDogcmVzcG9uc2UsXG4gICAgICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDIwLCBvdXRwdXRUb2tlbnM6IDI1IH0sXG4gICAgICAgIH0pO1xuICAgICAgICBhd2FpdCBzaW11bGF0b3Iuc2VuZE1lc3NhZ2UoaW5wdXQpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gc2ltdWxhdG9yLmdldEhpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZSg2KTtcblxuICAgICAgY29uc3QgdXNlck1lc3NhZ2VzID0gaGlzdG9yeS5maWx0ZXIoKG0pID0+IG0ucm9sZSA9PT0gJ3VzZXInKTtcbiAgICAgIGV4cGVjdCh1c2VyTWVzc2FnZXMubGVuZ3RoKS50b0JlKDMpO1xuXG4gICAgICBzaW11bGF0b3IuY2xlYW51cCgpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQVFBLElBQUFBLFlBQUEsR0FBQUMsT0FBQTtBQVJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVNBQyxRQUFRLENBQUMsNEJBQTRCLEVBQUUsTUFBTTtFQUMzQyxJQUFJQyxHQUFvQjtFQUN4QixJQUFJQyxPQUFlO0VBRW5CQyxVQUFVLENBQUMsTUFBTTtJ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