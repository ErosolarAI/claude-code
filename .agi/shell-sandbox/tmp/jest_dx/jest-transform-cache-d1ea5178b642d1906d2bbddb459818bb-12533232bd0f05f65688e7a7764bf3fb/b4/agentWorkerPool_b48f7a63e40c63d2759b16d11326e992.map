{"version":3,"names":["cov_2kc0vkqzzb","actualCoverage","AgentWorker","id","maxConcurrency","priority","tags","controller","s","createController","activeTasks","_completedTasks","_failedTasks","_status","constructor","config","f","b","Set","status","completedTasks","failedTasks","currentLoad","isAvailable","hasTags","requiredTags","every","tag","has","initialize","error","execute","task","Error","result","streaming","onEvent","event","send","message","type","content","transform","getInfo","Array","from","AgentWorkerPool","workers","Map","taskQueue","balanceStrategy","defaultTimeout","maxQueueSize","roundRobinIndex","totalTaskDuration","completedTaskCount","processing","workerConfig","worker","set","initPromises","values","map","emit","workerId","timestamp","Date","now","data","String","Promise","allSettled","submit","length","resolve","reject","push","queuedAt","taskId","queueLength","processQueue","submitAll","tasks","promises","all","submitStream","pending","race","p","i","then","r","index","splice","selectWorker","sleep","item","shift","executeTask","startedAt","queueWaitMs","timeout","_","rej","setTimeout","completedAt","durationMs","success","err","available","getAvailableWorkers","preferredWorker","preferred","find","w","idx","Math","floor","random","sort","a","filter","getWorkerInfo","getStats","workerInfos","activeWorkers","reduce","sum","totalWorkers","idleWorkers","queuedTasks","averageTaskDurationMs","cancelAll","cancelled","ms","createAgentWorkerPool","createAgentTask","options"],"sources":["agentWorkerPool.ts"],"sourcesContent":["/**\n * Agent Worker Pool Module\n *\n * Provides multi-agent parallelism with automatic load balancing,\n * work distribution, and result aggregation for AGI workflows.\n *\n * Principal Investigator: Bo Shang\n * Framework: agi-cli\n */\n\nimport type { AgentController } from './agentController.js';\nimport type { AgentEventUnion } from '../contracts/v1/agent.js';\n\n// ============================================================================\n// Types\n// ============================================================================\n\nexport type WorkerStatus = 'idle' | 'busy' | 'error' | 'offline';\nexport type BalanceStrategy = 'round-robin' | 'least-busy' | 'random' | 'priority';\n\nexport interface AgentWorkerConfig {\n  /** Unique worker identifier */\n  id: string;\n  /** Agent controller factory or instance */\n  createController: () => Promise<AgentController> | AgentController;\n  /** Maximum concurrent tasks this worker can handle (default: 1) */\n  maxConcurrency?: number;\n  /** Priority for task assignment (higher = preferred) */\n  priority?: number;\n  /** Tags for routing specific task types */\n  tags?: string[];\n}\n\nexport interface AgentTask<T = string> {\n  /** Unique task identifier */\n  id: string;\n  /** The message/prompt to send to the agent */\n  message: string;\n  /** Optional transformer for the result */\n  transform?: (result: string) => T;\n  /** Required worker tags (task routed to workers with all these tags) */\n  requiredTags?: string[];\n  /** Preferred worker ID (soft preference) */\n  preferredWorker?: string;\n  /** Task priority (higher = processed first) */\n  priority?: number;\n  /** Timeout in milliseconds */\n  timeout?: number;\n  /** Whether to stream events */\n  streaming?: boolean;\n  /** Callback for streaming events */\n  onEvent?: (event: AgentEventUnion) => void;\n}\n\nexport interface TaskResult<T = string> {\n  taskId: string;\n  workerId: string;\n  success: boolean;\n  result?: T;\n  error?: Error;\n  durationMs: number;\n  startedAt: number;\n  completedAt: number;\n}\n\nexport interface AgentWorkerPoolConfig {\n  /** Worker configurations */\n  workers: AgentWorkerConfig[];\n  /** Load balancing strategy (default: 'least-busy') */\n  balanceStrategy?: BalanceStrategy;\n  /** Default task timeout in ms (default: 24 hours - 86400000ms) */\n  defaultTimeout?: number;\n  /** Maximum queue size before rejecting tasks (default: 100) */\n  maxQueueSize?: number;\n  /** Callback for pool events */\n  onEvent?: (event: PoolEvent) => void;\n}\n\nexport interface PoolEvent {\n  type: 'worker.ready' | 'worker.busy' | 'worker.idle' | 'worker.error' |\n        'task.queued' | 'task.started' | 'task.completed' | 'task.failed' |\n        'pool.saturated' | 'pool.drained';\n  timestamp: number;\n  workerId?: string;\n  taskId?: string;\n  data?: Record<string, unknown>;\n}\n\nexport interface WorkerInfo {\n  id: string;\n  status: WorkerStatus;\n  activeTasks: number;\n  completedTasks: number;\n  failedTasks: number;\n  tags: string[];\n  priority: number;\n}\n\nexport interface PoolStats {\n  totalWorkers: number;\n  activeWorkers: number;\n  idleWorkers: number;\n  queuedTasks: number;\n  activeTasks: number;\n  completedTasks: number;\n  failedTasks: number;\n  averageTaskDurationMs: number;\n}\n\n// ============================================================================\n// Agent Worker\n// ============================================================================\n\nclass AgentWorker {\n  readonly id: string;\n  readonly maxConcurrency: number;\n  readonly priority: number;\n  readonly tags: Set<string>;\n\n  private controller: AgentController | null = null;\n  private readonly createController: () => Promise<AgentController> | AgentController;\n  private activeTasks = 0;\n  private _completedTasks = 0;\n  private _failedTasks = 0;\n  private _status: WorkerStatus = 'idle';\n\n  constructor(config: AgentWorkerConfig) {\n    this.id = config.id;\n    this.createController = config.createController;\n    this.maxConcurrency = config.maxConcurrency ?? 1;\n    this.priority = config.priority ?? 0;\n    this.tags = new Set(config.tags ?? []);\n  }\n\n  get status(): WorkerStatus {\n    return this._status;\n  }\n\n  get completedTasks(): number {\n    return this._completedTasks;\n  }\n\n  get failedTasks(): number {\n    return this._failedTasks;\n  }\n\n  get currentLoad(): number {\n    return this.activeTasks;\n  }\n\n  get isAvailable(): boolean {\n    return this._status !== 'offline' && this._status !== 'error' && this.activeTasks < this.maxConcurrency;\n  }\n\n  hasTags(requiredTags: string[]): boolean {\n    return requiredTags.every(tag => this.tags.has(tag));\n  }\n\n  async initialize(): Promise<void> {\n    if (this.controller) return;\n    try {\n      this.controller = await this.createController();\n      this._status = 'idle';\n    } catch (error) {\n      this._status = 'error';\n      throw error;\n    }\n  }\n\n  async execute<T>(task: AgentTask<T>): Promise<T> {\n    if (!this.controller) {\n      await this.initialize();\n    }\n    if (!this.controller) {\n      throw new Error(`Worker ${this.id} failed to initialize`);\n    }\n\n    this.activeTasks++;\n    this._status = this.activeTasks >= this.maxConcurrency ? 'busy' : 'idle';\n\n    try {\n      let result = '';\n\n      if (task.streaming && task.onEvent) {\n        // Streaming mode: collect events and final result\n        for await (const event of this.controller.send(task.message)) {\n          task.onEvent(event);\n          if (event.type === 'message.complete') {\n            result = event.content;\n          } else if (event.type === 'message.delta') {\n            result += event.content;\n          }\n        }\n      } else {\n        // Non-streaming: collect complete response\n        for await (const event of this.controller.send(task.message)) {\n          if (event.type === 'message.complete') {\n            result = event.content;\n          } else if (event.type === 'message.delta') {\n            result += event.content;\n          }\n        }\n      }\n\n      this._completedTasks++;\n      return task.transform ? task.transform(result) : (result as unknown as T);\n    } catch (error) {\n      this._failedTasks++;\n      throw error;\n    } finally {\n      this.activeTasks--;\n      this._status = this.activeTasks > 0 ? 'busy' : 'idle';\n    }\n  }\n\n  getInfo(): WorkerInfo {\n    return {\n      id: this.id,\n      status: this._status,\n      activeTasks: this.activeTasks,\n      completedTasks: this._completedTasks,\n      failedTasks: this._failedTasks,\n      tags: Array.from(this.tags),\n      priority: this.priority,\n    };\n  }\n}\n\n// ============================================================================\n// Agent Worker Pool\n// ============================================================================\n\nexport class AgentWorkerPool {\n  private readonly workers = new Map<string, AgentWorker>();\n  private readonly taskQueue: Array<{\n    task: AgentTask;\n    resolve: (result: TaskResult) => void;\n    reject: (error: Error) => void;\n    queuedAt: number;\n  }> = [];\n  private readonly balanceStrategy: BalanceStrategy;\n  private readonly defaultTimeout: number;\n  private readonly maxQueueSize: number;\n  private readonly onEvent: (event: PoolEvent) => void;\n  private roundRobinIndex = 0;\n  private totalTaskDuration = 0;\n  private completedTaskCount = 0;\n  private processing = false;\n\n  constructor(config: AgentWorkerPoolConfig) {\n    this.balanceStrategy = config.balanceStrategy ?? 'least-busy';\n    this.defaultTimeout = config.defaultTimeout ?? 24 * 60 * 60 * 1000; // 24 hours default timeout\n    this.maxQueueSize = config.maxQueueSize ?? 100;\n    this.onEvent = config.onEvent ?? (() => {});\n\n    for (const workerConfig of config.workers) {\n      const worker = new AgentWorker(workerConfig);\n      this.workers.set(worker.id, worker);\n    }\n  }\n\n  /**\n   * Initialize all workers\n   */\n  async initialize(): Promise<void> {\n    const initPromises = Array.from(this.workers.values()).map(async (worker) => {\n      try {\n        await worker.initialize();\n        this.emit({ type: 'worker.ready', workerId: worker.id, timestamp: Date.now() });\n      } catch (error) {\n        this.emit({\n          type: 'worker.error',\n          workerId: worker.id,\n          timestamp: Date.now(),\n          data: { error: error instanceof Error ? error.message : String(error) },\n        });\n      }\n    });\n\n    await Promise.allSettled(initPromises);\n  }\n\n  /**\n   * Submit a task to the pool\n   */\n  async submit<T>(task: AgentTask<T>): Promise<TaskResult<T>> {\n    if (this.taskQueue.length >= this.maxQueueSize) {\n      throw new Error('Task queue is full');\n    }\n\n    return new Promise((resolve, reject) => {\n      this.taskQueue.push({\n        task: task as AgentTask,\n        resolve: resolve as (result: TaskResult) => void,\n        reject,\n        queuedAt: Date.now(),\n      });\n\n      this.emit({\n        type: 'task.queued',\n        taskId: task.id,\n        timestamp: Date.now(),\n        data: { queueLength: this.taskQueue.length },\n      });\n\n      if (this.taskQueue.length >= this.maxQueueSize) {\n        this.emit({ type: 'pool.saturated', timestamp: Date.now() });\n      }\n\n      // Trigger processing\n      this.processQueue();\n    });\n  }\n\n  /**\n   * Submit multiple tasks and wait for all results\n   */\n  async submitAll<T>(tasks: AgentTask<T>[]): Promise<TaskResult<T>[]> {\n    const promises = tasks.map(task => this.submit(task));\n    return Promise.all(promises);\n  }\n\n  /**\n   * Submit multiple tasks and process results as they complete\n   */\n  async *submitStream<T>(tasks: AgentTask<T>[]): AsyncGenerator<TaskResult<T>> {\n    const pending = tasks.map(task => this.submit(task));\n\n    while (pending.length > 0) {\n      const result = await Promise.race(\n        pending.map((p, i) => p.then(r => ({ result: r, index: i })))\n      );\n      pending.splice(result.index, 1);\n      yield result.result;\n    }\n  }\n\n  /**\n   * Process queued tasks\n   */\n  private async processQueue(): Promise<void> {\n    if (this.processing) return;\n    this.processing = true;\n\n    try {\n      while (this.taskQueue.length > 0) {\n        const worker = this.selectWorker(this.taskQueue[0]?.task);\n        if (!worker) {\n          // No available workers, wait and retry\n          await this.sleep(50);\n          continue;\n        }\n\n        const item = this.taskQueue.shift();\n        if (!item) break;\n\n        // Execute task asynchronously (don't await)\n        this.executeTask(worker, item.task, item.resolve, item.reject, item.queuedAt);\n      }\n\n      if (this.taskQueue.length === 0) {\n        this.emit({ type: 'pool.drained', timestamp: Date.now() });\n      }\n    } finally {\n      this.processing = false;\n    }\n  }\n\n  /**\n   * Execute a task on a worker\n   */\n  private async executeTask<T>(\n    worker: AgentWorker,\n    task: AgentTask<T>,\n    resolve: (result: TaskResult<T>) => void,\n    reject: (error: Error) => void,\n    queuedAt: number\n  ): Promise<void> {\n    const startedAt = Date.now();\n\n    this.emit({\n      type: 'task.started',\n      taskId: task.id,\n      workerId: worker.id,\n      timestamp: startedAt,\n      data: { queueWaitMs: startedAt - queuedAt },\n    });\n\n    this.emit({ type: 'worker.busy', workerId: worker.id, timestamp: startedAt });\n\n    try {\n      const timeout = task.timeout ?? this.defaultTimeout;\n      const result = await Promise.race([\n        worker.execute(task),\n        new Promise<never>((_, rej) =>\n          setTimeout(() => rej(new Error(`Task ${task.id} timed out after ${timeout}ms`)), timeout)\n        ),\n      ]);\n\n      const completedAt = Date.now();\n      const durationMs = completedAt - startedAt;\n      this.totalTaskDuration += durationMs;\n      this.completedTaskCount++;\n\n      this.emit({\n        type: 'task.completed',\n        taskId: task.id,\n        workerId: worker.id,\n        timestamp: completedAt,\n        data: { durationMs },\n      });\n\n      resolve({\n        taskId: task.id,\n        workerId: worker.id,\n        success: true,\n        result,\n        durationMs,\n        startedAt,\n        completedAt,\n      });\n    } catch (error) {\n      const completedAt = Date.now();\n      const err = error instanceof Error ? error : new Error(String(error));\n\n      this.emit({\n        type: 'task.failed',\n        taskId: task.id,\n        workerId: worker.id,\n        timestamp: completedAt,\n        data: { error: err.message },\n      });\n\n      resolve({\n        taskId: task.id,\n        workerId: worker.id,\n        success: false,\n        error: err,\n        durationMs: completedAt - startedAt,\n        startedAt,\n        completedAt,\n      });\n    } finally {\n      if (worker.isAvailable) {\n        this.emit({ type: 'worker.idle', workerId: worker.id, timestamp: Date.now() });\n      }\n\n      // Continue processing queue\n      this.processQueue();\n    }\n  }\n\n  /**\n   * Select a worker based on the balancing strategy\n   */\n  private selectWorker(task?: AgentTask): AgentWorker | null {\n    const available = this.getAvailableWorkers(task);\n    if (available.length === 0) return null;\n\n    // Check for preferred worker\n    if (task?.preferredWorker) {\n      const preferred = available.find(w => w.id === task.preferredWorker);\n      if (preferred) return preferred;\n    }\n\n    switch (this.balanceStrategy) {\n      case 'round-robin': {\n        const worker = available[this.roundRobinIndex % available.length]!;\n        this.roundRobinIndex++;\n        return worker;\n      }\n      case 'random': {\n        const idx = Math.floor(Math.random() * available.length);\n        return available[idx]!;\n      }\n      case 'priority': {\n        // Sort by priority (descending) then by load (ascending)\n        available.sort((a, b) => {\n          if (b.priority !== a.priority) return b.priority - a.priority;\n          return a.currentLoad - b.currentLoad;\n        });\n        return available[0]!;\n      }\n      case 'least-busy':\n      default: {\n        // Sort by current load (ascending)\n        available.sort((a, b) => a.currentLoad - b.currentLoad);\n        return available[0]!;\n      }\n    }\n  }\n\n  /**\n   * Get available workers filtered by task requirements\n   */\n  private getAvailableWorkers(task?: AgentTask): AgentWorker[] {\n    const workers = Array.from(this.workers.values()).filter(w => w.isAvailable);\n\n    if (task?.requiredTags && task.requiredTags.length > 0) {\n      return workers.filter(w => w.hasTags(task.requiredTags!));\n    }\n\n    return workers;\n  }\n\n  /**\n   * Get information about all workers\n   */\n  getWorkerInfo(): WorkerInfo[] {\n    return Array.from(this.workers.values()).map(w => w.getInfo());\n  }\n\n  /**\n   * Get pool statistics\n   */\n  getStats(): PoolStats {\n    const workerInfos = this.getWorkerInfo();\n    const activeWorkers = workerInfos.filter(w => w.status === 'busy').length;\n    const activeTasks = workerInfos.reduce((sum, w) => sum + w.activeTasks, 0);\n    const completedTasks = workerInfos.reduce((sum, w) => sum + w.completedTasks, 0);\n    const failedTasks = workerInfos.reduce((sum, w) => sum + w.failedTasks, 0);\n\n    return {\n      totalWorkers: workerInfos.length,\n      activeWorkers,\n      idleWorkers: workerInfos.length - activeWorkers,\n      queuedTasks: this.taskQueue.length,\n      activeTasks,\n      completedTasks,\n      failedTasks,\n      averageTaskDurationMs: this.completedTaskCount > 0\n        ? this.totalTaskDuration / this.completedTaskCount\n        : 0,\n    };\n  }\n\n  /**\n   * Cancel all queued tasks\n   */\n  cancelAll(): number {\n    const cancelled = this.taskQueue.length;\n    while (this.taskQueue.length > 0) {\n      const item = this.taskQueue.shift();\n      if (item) {\n        item.reject(new Error('Task cancelled'));\n      }\n    }\n    return cancelled;\n  }\n\n  private emit(event: PoolEvent): void {\n    try {\n      this.onEvent(event);\n    } catch {\n      // Ignore callback errors\n    }\n  }\n\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n}\n\n// ============================================================================\n// Convenience Functions\n// ============================================================================\n\n/**\n * Create an agent worker pool with the given configuration\n */\nexport function createAgentWorkerPool(config: AgentWorkerPoolConfig): AgentWorkerPool {\n  return new AgentWorkerPool(config);\n}\n\n/**\n * Create a simple agent task\n */\nexport function createAgentTask<T = string>(\n  id: string,\n  message: string,\n  options?: Partial<Omit<AgentTask<T>, 'id' | 'message'>>\n): AgentTask<T> {\n  return {\n    id,\n    message,\n    ...options,\n  };\n}\n\n// ============================================================================\n// Exports\n// ============================================================================\n\nexport default {\n  AgentWorkerPool,\n  createAgentWorkerPool,\n  createAgentTask,\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}