{"version":3,"names":["_globals","require","mockToolCall","id","name","arguments","file_path","old_string","new_string","describe","it","approach","expect","toContain","toolCalls","Array","isArray","toBe","length","toBeGreaterThan","suggestions","toHaveLength","approaches","score","sorted","sort","a","b","criticalIssues","description","blocksImplementation","blockingIssues","filter","issue","validationScore","criticalIssuesCount","productionReadiness","configs","minValidationScore","config","blockOnCriticalIssues","integrationConfig","enabled","logResults","provideSuggestions","mockValidationResult","warnings","impact"],"sources":["designThoughtCheck.test.ts"],"sourcesContent":["/**\n * Design Thought Check System Tests\n * \n * Tests for the comprehensive design validation system.\n * \n * @license MIT\n */\n\nimport { describe, it, expect, beforeEach } from '@jest/globals';\n\n// Mock implementations for testing\nconst mockToolCall = {\n  id: 'test-1',\n  name: 'Edit',\n  arguments: {\n    file_path: 'test-file.ts',\n    old_string: '',\n    new_string: `// TODO: Replace with logger\nconsole.log(\"test\");`\n  }\n};\n\ndescribe('Design Thought Check System', () => {\n  describe('Validation Criteria', () => {\n    it('should evaluate architectural coherence', () => {\n      // Test architectural alignment assessment\n      const approach = \"Implement modular architecture with clear separation of concerns\";\n      expect(approach).toContain('modular');\n      expect(approach).toContain('separation of concerns');\n    });\n\n    it('should evaluate code quality', () => {\n      // Test code quality assessment\n      const approach = \"Follow TypeScript best practices with proper typing\";\n      expect(approach).toContain('best practices');\n      expect(approach).toContain('TypeScript');\n    });\n\n    it('should evaluate security considerations', () => {\n      // Test security assessment\n      const approach = \"Implement input validation and authentication\";\n      expect(approach).toContain('input validation');\n      expect(approach).toContain('authentication');\n    });\n  });\n\n  describe('Integration Points', () => {\n    it('should validate tool calls before execution', () => {\n      // Test execution validation logic\n      const toolCalls = [mockToolCall];\n      expect(Array.isArray(toolCalls)).toBe(true);\n      expect(toolCalls.length).toBeGreaterThan(0);\n    });\n\n    it('should provide improvement suggestions', () => {\n      // Test suggestion generation\n      const suggestions = [\n        \"Add error handling for file operations\",\n        \"Implement progress tracking\",\n        \"Add input validation\"\n      ];\n      \n      expect(suggestions).toHaveLength(3);\n      expect(suggestions[0]).toContain('error handling');\n    });\n\n    it('should compare multiple approaches', () => {\n      // Test approach comparison\n      const approaches = [\n        { name: 'Approach A', score: 75 },\n        { name: 'Approach B', score: 85 },\n        { name: 'Approach C', score: 65 }\n      ];\n\n      // Sort by score descending\n      const sorted = approaches.sort((a, b) => b.score - a.score);\n      \n      expect(sorted[0].name).toBe('Approach B');\n      expect(sorted[0].score).toBe(85);\n    });\n  });\n\n  describe('Risk Assessment', () => {\n    it('should identify critical issues', () => {\n      const criticalIssues = [\n        { description: 'No error handling', blocksImplementation: true },\n        { description: 'Security vulnerability', blocksImplementation: true }\n      ];\n\n      const blockingIssues = criticalIssues.filter(issue => issue.blocksImplementation);\n      expect(blockingIssues).toHaveLength(2);\n    });\n\n    it('should assess production readiness', () => {\n      const validationScore = 85;\n      const criticalIssuesCount = 0;\n      const productionReadiness = validationScore - (criticalIssuesCount * 20);\n      \n      expect(productionReadiness).toBe(85);\n      expect(productionReadiness).toBeGreaterThan(70); // Minimum threshold\n    });\n  });\n\n  describe('Configuration', () => {\n    it('should support different validation thresholds', () => {\n      const configs = [\n        { minValidationScore: 70, description: 'Standard' },\n        { minValidationScore: 85, description: 'Strict' },\n        { minValidationScore: /* TODO: Extract constant */ 60, description: 'Lenient' }\n      ];\n\n      expect(configs).toHaveLength(3);\n      expect(configs[1].minValidationScore).toBe(85);\n    });\n\n    it('should enable/disable blocking on critical issues', () => {\n      const config = {\n        blockOnCriticalIssues: true,\n        minValidationScore: 70\n      };\n\n      expect(config.blockOnCriticalIssues).toBe(true);\n      expect(config.minValidationScore).toBe(70);\n    });\n  });\n});\n\ndescribe('Design Thought Check Integration', () => {\n  it('should integrate with agent system', () => {\n    const integrationConfig = {\n      enabled: true,\n      minValidationScore: 70,\n      blockOnCriticalIssues: true,\n      logResults: true,\n      provideSuggestions: true\n    };\n\n    expect(integrationConfig.enabled).toBe(true);\n    expect(integrationConfig.minValidationScore).toBe(70);\n    expect(integrationConfig.blockOnCriticalIssues).toBe(true);\n  });\n\n  it('should provide comprehensive validation results', () => {\n    const mockValidationResult = {\n      score: 82,\n      criticalIssues: [],\n      warnings: [\n        { description: 'Missing input validation', impact: 'Security risk' }\n      ],\n      suggestions: [\n        { description: 'Add rate limiting', impact: 'Performance improvement' }\n      ]\n    };\n\n    expect(mockValidationResult.score).toBeGreaterThan(70);\n    expect(mockValidationResult.criticalIssues).toHaveLength(0);\n    expect(mockValidationResult.warnings).toHaveLength(1);\n    expect(mockValidationResult.suggestions).toHaveLength(1);\n  });\n});"],"mappings":"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","ignoreList":[]}