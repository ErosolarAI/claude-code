{"version":3,"names":["cov_1iiyg3pc06","actualCoverage","registry","s","Map","registerAgentProfile","blueprint","f","name","b","Error","trimmedName","trim","payload","Object","freeze","label","frozen","set","hasAgentProfile","has","getAgentProfile","profile","get","known","listAgentProfiles","map","entry","sort","join","Array","from","values"],"sources":["agentProfiles.ts"],"sourcesContent":["import type { AgentPromptConfig, AgentRulebookReference } from '../contracts/v1/agentProfileManifest.js';\nimport type { ProviderId } from './types.js';\n\nexport type ProfileName = string;\n\nexport interface AgentProfileBlueprint {\n  name: ProfileName;\n  label: string;\n  description?: string;\n  defaultProvider: ProviderId;\n  defaultModel: string;\n  systemPromptConfig: AgentPromptConfig;\n  defaultSystemPrompt: string;\n  temperature?: number;\n  maxTokens?: number;\n  rulebook: AgentRulebookReference;\n  manifestVersion: string;\n  manifestContractVersion: string;\n}\n\ninterface RegisteredProfile extends AgentProfileBlueprint {\n  readonly frozen: true;\n}\n\nconst registry = new Map<ProfileName, RegisteredProfile>();\n\nexport function registerAgentProfile(blueprint: AgentProfileBlueprint): void {\n  if (!blueprint?.name) {\n    throw new Error('Agent profile name is required.');\n  }\n  const trimmedName = blueprint.name.trim();\n  if (!trimmedName) {\n    throw new Error('Agent profile name cannot be blank.');\n  }\n\n  const payload: RegisteredProfile = Object.freeze({\n    ...blueprint,\n    name: trimmedName,\n    label: blueprint.label.trim() || trimmedName,\n    frozen: true,\n  });\n\n  registry.set(trimmedName, payload);\n}\n\nexport function hasAgentProfile(name: ProfileName): boolean {\n  return registry.has(name.trim());\n}\n\nexport function getAgentProfile(name: ProfileName): AgentProfileBlueprint {\n  const profile = registry.get(name.trim());\n  if (!profile) {\n    const known = listAgentProfiles()\n      .map((entry) => entry.name)\n      .sort()\n      .join(', ');\n    throw new Error(`Unknown profile \"${name}\". Registered profiles: ${known || 'none'}.`);\n  }\n  return profile;\n}\n\nexport function listAgentProfiles(): AgentProfileBlueprint[] {\n  return Array.from(registry.values());\n}\n"],"mappings":"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","ignoreList":[]}