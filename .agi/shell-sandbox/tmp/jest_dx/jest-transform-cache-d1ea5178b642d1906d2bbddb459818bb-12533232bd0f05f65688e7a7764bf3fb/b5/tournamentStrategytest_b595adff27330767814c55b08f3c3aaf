07b9ebcd4625cdcf4cddce422945faeb
"use strict";

var _tournamentStrategy = require("../../src/core/tournamentStrategy.js");
const moduleBase = {
  id: 'm',
  label: 'Module',
  description: '',
  scope: [],
  steps: []
};
function moduleWithLabel(label, scope) {
  return {
    ...moduleBase,
    label,
    scope
  };
}
describe('buildEvaluatorConfig', () => {
  it('applies repo-type defaults for tests', () => {
    const cfg = (0, _tournamentStrategy.buildEvaluatorConfig)(moduleWithLabel('Tests', ['test/**/*']));
    expect(cfg.rewardWeights.alpha).toBeCloseTo(0.7);
    expect(cfg.evaluators.find(e => e.id === 'hard-metrics')?.weight).toBeGreaterThan(1.5);
  });
  it('applies telemetry bias towards primary (hard metric focus)', () => {
    const telemetry = new Map();
    telemetry.set('general', {
      winsPrimary: 10,
      winsRefiner: 0
    });
    const cfg = (0, _tournamentStrategy.buildEvaluatorConfig)(moduleWithLabel('General', ['src/**/*']), telemetry);
    expect(cfg.rewardWeights.alpha).toBeGreaterThan(0.6);
  });
  it('applies telemetry bias towards refiner (quality/reward focus)', () => {
    const telemetry = new Map();
    telemetry.set('general', {
      winsPrimary: 0,
      winsRefiner: 10
    });
    const cfg = (0, _tournamentStrategy.buildEvaluatorConfig)(moduleWithLabel('General', ['src/**/*']), telemetry);
    expect(cfg.rewardWeights.beta).toBeGreaterThanOrEqual(0.3);
    expect(cfg.evaluators.find(e => e.id === 'quality')?.weight).toBeGreaterThan(1.0);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfdG91cm5hbWVudFN0cmF0ZWd5IiwicmVxdWlyZSIsIm1vZHVsZUJhc2UiLCJpZCIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJzY29wZSIsInN0ZXBzIiwibW9kdWxlV2l0aExhYmVsIiwiZGVzY3JpYmUiLCJpdCIsImNmZyIsImJ1aWxkRXZhbHVhdG9yQ29uZmlnIiwiZXhwZWN0IiwicmV3YXJkV2VpZ2h0cyIsImFscGhhIiwidG9CZUNsb3NlVG8iLCJldmFsdWF0b3JzIiwiZmluZCIsImUiLCJ3ZWlnaHQiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0ZWxlbWV0cnkiLCJNYXAiLCJzZXQiLCJ3aW5zUHJpbWFyeSIsIndpbnNSZWZpbmVyIiwiYmV0YSIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiXSwic291cmNlcyI6WyJ0b3VybmFtZW50U3RyYXRlZ3kudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBidWlsZEV2YWx1YXRvckNvbmZpZywgdHlwZSBUZWxlbWV0cnlTbmFwc2hvdCB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL3RvdXJuYW1lbnRTdHJhdGVneS5qcyc7XG5pbXBvcnQgdHlwZSB7IFJlcG9VcGdyYWRlTW9kdWxlIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvcmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IuanMnO1xuXG5jb25zdCBtb2R1bGVCYXNlOiBSZXBvVXBncmFkZU1vZHVsZSA9IHtcbiAgaWQ6ICdtJyxcbiAgbGFiZWw6ICdNb2R1bGUnLFxuICBkZXNjcmlwdGlvbjogJycsXG4gIHNjb3BlOiBbXSxcbiAgc3RlcHM6IFtdLFxufTtcblxuZnVuY3Rpb24gbW9kdWxlV2l0aExhYmVsKGxhYmVsOiBzdHJpbmcsIHNjb3BlOiBzdHJpbmdbXSk6IFJlcG9VcGdyYWRlTW9kdWxlIHtcbiAgcmV0dXJuIHsgLi4ubW9kdWxlQmFzZSwgbGFiZWwsIHNjb3BlIH07XG59XG5cbmRlc2NyaWJlKCdidWlsZEV2YWx1YXRvckNvbmZpZycsICgpID0+IHtcbiAgaXQoJ2FwcGxpZXMgcmVwby10eXBlIGRlZmF1bHRzIGZvciB0ZXN0cycsICgpID0+IHtcbiAgICBjb25zdCBjZmcgPSBidWlsZEV2YWx1YXRvckNvbmZpZyhtb2R1bGVXaXRoTGFiZWwoJ1Rlc3RzJywgWyd0ZXN0LyoqLyonXSkpO1xuICAgIGV4cGVjdChjZmcucmV3YXJkV2VpZ2h0cy5hbHBoYSkudG9CZUNsb3NlVG8oMC43KTtcbiAgICBleHBlY3QoY2ZnLmV2YWx1YXRvcnMuZmluZCgoZSkgPT4gZS5pZCA9PT0gJ2hhcmQtbWV0cmljcycpPy53ZWlnaHQpLnRvQmVHcmVhdGVyVGhhbigxLjUpO1xuICB9KTtcblxuICBpdCgnYXBwbGllcyB0ZWxlbWV0cnkgYmlhcyB0b3dhcmRzIHByaW1hcnkgKGhhcmQgbWV0cmljIGZvY3VzKScsICgpID0+IHtcbiAgICBjb25zdCB0ZWxlbWV0cnkgPSBuZXcgTWFwPHN0cmluZywgVGVsZW1ldHJ5U25hcHNob3Q+KCk7XG4gICAgdGVsZW1ldHJ5LnNldCgnZ2VuZXJhbCcsIHsgd2luc1ByaW1hcnk6IDEwLCB3aW5zUmVmaW5lcjogMCB9KTtcblxuICAgIGNvbnN0IGNmZyA9IGJ1aWxkRXZhbHVhdG9yQ29uZmlnKG1vZHVsZVdpdGhMYWJlbCgnR2VuZXJhbCcsIFsnc3JjLyoqLyonXSksIHRlbGVtZXRyeSk7XG4gICAgZXhwZWN0KGNmZy5yZXdhcmRXZWlnaHRzLmFscGhhKS50b0JlR3JlYXRlclRoYW4oMC42KTtcbiAgfSk7XG5cbiAgaXQoJ2FwcGxpZXMgdGVsZW1ldHJ5IGJpYXMgdG93YXJkcyByZWZpbmVyIChxdWFsaXR5L3Jld2FyZCBmb2N1cyknLCAoKSA9PiB7XG4gICAgY29uc3QgdGVsZW1ldHJ5ID0gbmV3IE1hcDxzdHJpbmcsIFRlbGVtZXRyeVNuYXBzaG90PigpO1xuICAgIHRlbGVtZXRyeS5zZXQoJ2dlbmVyYWwnLCB7IHdpbnNQcmltYXJ5OiAwLCB3aW5zUmVmaW5lcjogMTAgfSk7XG5cbiAgICBjb25zdCBjZmcgPSBidWlsZEV2YWx1YXRvckNvbmZpZyhtb2R1bGVXaXRoTGFiZWwoJ0dlbmVyYWwnLCBbJ3NyYy8qKi8qJ10pLCB0ZWxlbWV0cnkpO1xuICAgIGV4cGVjdChjZmcucmV3YXJkV2VpZ2h0cy5iZXRhKS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDAuMyk7XG4gICAgZXhwZWN0KGNmZy5ldmFsdWF0b3JzLmZpbmQoKGUpID0+IGUuaWQgPT09ICdxdWFsaXR5Jyk/LndlaWdodCkudG9CZUdyZWF0ZXJUaGFuKDEuMCk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsbUJBQUEsR0FBQUMsT0FBQTtBQUdBLE1BQU1DLFVBQTZCLEdBQUc7RUFDcENDLEVBQUUsRUFBRSxHQUFHO0VBQ1BDLEtBQUssRUFBRSxRQUFRO0VBQ2ZDLFdBQVcsRUFBRSxFQUFFO0VBQ2ZDLEtBQUssRUFBRSxFQUFFO0VBQ1RDLEtBQUssRUFBRTtBQUNULENBQUM7QUFFRCxTQUFTQyxlQUFlQSxDQUFDSixLQUFhLEVBQUVFLEtBQWUsRUFBcUI7RUFDMUUsT0FBTztJQUFFLEdBQUdKLFVBQVU7SUFBRUUsS0FBSztJQUFFRTtFQUFNLENBQUM7QUFDeEM7QUFFQUcsUUFBUSxDQUFDLHNCQUFzQixFQUFFLE1BQU07RUFDckNDLEVBQUUsQ0FBQyxzQ0FBc0MsRUFBRSxNQUFNO0lBQy9DLE1BQU1DLEdBQUcsR0FBRyxJQUFBQyx3Q0FBb0IsRUFBQ0osZUFBZSxDQUFDLE9BQU8sRUFBRSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUM7SUFDekVLLE1BQU0sQ0FBQ0YsR0FBRyxDQUFDRyxhQUFhLENBQUNDLEtBQUssQ0FBQyxDQUFDQyxXQUFXLENBQUMsR0FBRyxDQUFDO0lBQ2hESCxNQUFNLENBQUNGLEdBQUcsQ0FBQ00sVUFBVSxDQUFDQyxJQUFJLENBQUVDLENBQUMsSUFBS0EsQ0FBQyxDQUFDaEIsRUFBRSxLQUFLLGNBQWMsQ0FBQyxFQUFFaUIsTUFBTSxDQUFDLENBQUNDLGVBQWUsQ0FBQyxHQUFHLENBQUM7RUFDMUYsQ0FBQyxDQUFDO0VBRUZYLEVBQUUsQ0FBQyw0REFBNEQsRUFBRSxNQUFNO0lBQ3JFLE1BQU1ZLFNBQVMsR0FBRyxJQUFJQyxHQUFHLENBQTRCLENBQUM7SUFDdERELFNBQVMsQ0FBQ0UsR0FBRyxDQUFDLFNBQVMsRUFBRTtNQUFFQyxXQUFXLEVBQUUsRUFBRTtNQUFFQyxXQUFXLEVBQUU7SUFBRSxDQUFDLENBQUM7SUFFN0QsTUFBTWYsR0FBRyxHQUFHLElBQUFDLHdDQUFvQixFQUFDSixlQUFlLENBQUMsU0FBUyxFQUFFLENBQUMsVUFBVSxDQUFDLENBQUMsRUFBRWMsU0FBUyxDQUFDO0lBQ3JGVCxNQUFNLENBQUNGLEdBQUcsQ0FBQ0csYUFBYSxDQUFDQyxLQUFLLENBQUMsQ0FBQ00sZUFBZSxDQUFDLEdBQUcsQ0FBQztFQUN0RCxDQUFDLENBQUM7RUFFRlgsRUFBRSxDQUFDLCtEQUErRCxFQUFFLE1BQU07SUFDeEUsTUFBTVksU0FBUyxHQUFHLElBQUlDLEdBQUcsQ0FBNEIsQ0FBQztJQUN0REQsU0FBUyxDQUFDRSxHQUFHLENBQUMsU0FBUyxFQUFFO01BQUVDLFdBQVcsRUFBRSxDQUFDO01BQUVDLFdBQVcsRUFBRTtJQUFHLENBQUMsQ0FBQztJQUU3RCxNQUFNZixHQUFHLEdBQUcsSUFBQUMsd0NBQW9CLEVBQUNKLGVBQWUsQ0FBQyxTQUFTLEVBQUUsQ0FBQyxVQUFVLENBQUMsQ0FBQyxFQUFFYyxTQUFTLENBQUM7SUFDckZULE1BQU0sQ0FBQ0YsR0FBRyxDQUFDRyxhQUFhLENBQUNhLElBQUksQ0FBQyxDQUFDQyxzQkFBc0IsQ0FBQyxHQUFHLENBQUM7SUFDMURmLE1BQU0sQ0FBQ0YsR0FBRyxDQUFDTSxVQUFVLENBQUNDLElBQUksQ0FBRUMsQ0FBQyxJQUFLQSxDQUFDLENBQUNoQixFQUFFLEtBQUssU0FBUyxDQUFDLEVBQUVpQixNQUFNLENBQUMsQ0FBQ0MsZUFBZSxDQUFDLEdBQUcsQ0FBQztFQUNyRixDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=