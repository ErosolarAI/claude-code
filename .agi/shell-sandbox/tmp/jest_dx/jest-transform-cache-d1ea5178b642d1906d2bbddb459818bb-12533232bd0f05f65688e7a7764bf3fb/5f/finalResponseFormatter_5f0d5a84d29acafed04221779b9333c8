039ee07bbe536e5dc834dc0881e15f78
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureNextSteps = ensureNextSteps;
/**
 * Ensures final assistant responses include a "Next steps" section.
 * Returns both the full output and any appended text so callers can stream just the delta.
 */

const NEXT_STEPS_HEADING = /(^|\n)\s*next steps?\s*:/i;
function ensureNextSteps(content, _context) {
  const normalized = content?.trimEnd() ?? '';
  if (!normalized) {
    return {
      output: '',
      appended: null
    };
  }

  // If content already has next steps, return as-is (no duplicates)
  if (NEXT_STEPS_HEADING.test(normalized)) {
    return {
      output: normalized,
      appended: null
    };
  }

  // Don't auto-append next steps - let the AI generate contextually appropriate ones
  return {
    output: normalized,
    appended: null
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJORVhUX1NURVBTX0hFQURJTkciLCJlbnN1cmVOZXh0U3RlcHMiLCJjb250ZW50IiwiX2NvbnRleHQiLCJub3JtYWxpemVkIiwidHJpbUVuZCIsIm91dHB1dCIsImFwcGVuZGVkIiwidGVzdCJdLCJzb3VyY2VzIjpbImZpbmFsUmVzcG9uc2VGb3JtYXR0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbnN1cmVzIGZpbmFsIGFzc2lzdGFudCByZXNwb25zZXMgaW5jbHVkZSBhIFwiTmV4dCBzdGVwc1wiIHNlY3Rpb24uXG4gKiBSZXR1cm5zIGJvdGggdGhlIGZ1bGwgb3V0cHV0IGFuZCBhbnkgYXBwZW5kZWQgdGV4dCBzbyBjYWxsZXJzIGNhbiBzdHJlYW0ganVzdCB0aGUgZGVsdGEuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmluYWxSZXNwb25zZUZvcm1hdCB7XG4gIG91dHB1dDogc3RyaW5nO1xuICBhcHBlbmRlZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgTkVYVF9TVEVQU19IRUFESU5HID0gLyhefFxcbilcXHMqbmV4dCBzdGVwcz9cXHMqOi9pO1xuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlTmV4dFN0ZXBzKGNvbnRlbnQ6IHN0cmluZywgX2NvbnRleHQ/OiBzdHJpbmcpOiBGaW5hbFJlc3BvbnNlRm9ybWF0IHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQ/LnRyaW1FbmQoKSA/PyAnJztcbiAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgcmV0dXJuIHsgb3V0cHV0OiAnJywgYXBwZW5kZWQ6IG51bGwgfTtcbiAgfVxuXG4gIC8vIElmIGNvbnRlbnQgYWxyZWFkeSBoYXMgbmV4dCBzdGVwcywgcmV0dXJuIGFzLWlzIChubyBkdXBsaWNhdGVzKVxuICBpZiAoTkVYVF9TVEVQU19IRUFESU5HLnRlc3Qobm9ybWFsaXplZCkpIHtcbiAgICByZXR1cm4geyBvdXRwdXQ6IG5vcm1hbGl6ZWQsIGFwcGVuZGVkOiBudWxsIH07XG4gIH1cblxuICAvLyBEb24ndCBhdXRvLWFwcGVuZCBuZXh0IHN0ZXBzIC0gbGV0IHRoZSBBSSBnZW5lcmF0ZSBjb250ZXh0dWFsbHkgYXBwcm9wcmlhdGUgb25lc1xuICByZXR1cm4geyBvdXRwdXQ6IG5vcm1hbGl6ZWQsIGFwcGVuZGVkOiBudWxsIH07XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBOztBQU1BLE1BQU1BLGtCQUFrQixHQUFHLDJCQUEyQjtBQUUvQyxTQUFTQyxlQUFlQSxDQUFDQyxPQUFlLEVBQUVDLFFBQWlCLEVBQXVCO0VBQ3ZGLE1BQU1DLFVBQVUsR0FBR0YsT0FBTyxFQUFFRyxPQUFPLENBQUMsQ0FBQyxJQUFJLEVBQUU7RUFDM0MsSUFBSSxDQUFDRCxVQUFVLEVBQUU7SUFDZixPQUFPO01BQUVFLE1BQU0sRUFBRSxFQUFFO01BQUVDLFFBQVEsRUFBRTtJQUFLLENBQUM7RUFDdkM7O0VBRUE7RUFDQSxJQUFJUCxrQkFBa0IsQ0FBQ1EsSUFBSSxDQUFDSixVQUFVLENBQUMsRUFBRTtJQUN2QyxPQUFPO01BQUVFLE1BQU0sRUFBRUYsVUFBVTtNQUFFRyxRQUFRLEVBQUU7SUFBSyxDQUFDO0VBQy9DOztFQUVBO0VBQ0EsT0FBTztJQUFFRCxNQUFNLEVBQUVGLFVBQVU7SUFBRUcsUUFBUSxFQUFFO0VBQUssQ0FBQztBQUMvQyIsImlnbm9yZUxpc3QiOltdfQ==