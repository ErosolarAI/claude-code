{"version":3,"names":["cov_6g0e07kx9","actualCoverage","theme","icons","spinnerFrames","progressChars","boxChars","formatBanner","formatUserPrompt","USER_PROMPT_PREFIX","formatToolCall","formatMessage","neon","palette","getToolColor","formatToolName","formatError","formatErrorList","PromptController","UnifiedUIRenderer","isStreamingMode","enterStreamingMode","exitStreamingMode","ifNotStreaming","whenStreamingEnds","withStreamLock","forceRelease","installGlobalWriteLock","resetGlobalWriteLock","getTerminalColumns","isUltraNarrowMode","getContentWidth","wrapParagraph","wrapPreformatted","normalizePanelWidth","renderPanel","measure","stripAnsi","padLine","truncate"],"sources":["index.ts"],"sourcesContent":["/**\n * UI Layer - AGI CLI User Interface System\n *\n * Layers (current stack):\n * - Core primitives: theme.ts, layout.ts, uiConstants.ts, richText.ts\n * - Render helpers: codeHighlighter.ts, textHighlighter.ts, errorFormatter.ts, toolDisplay.ts\n * - Animation: animatedStatus.ts (uses animation/AnimationScheduler)\n * - Controllers: PromptController.ts (input + key handling)\n * - Renderer: UnifiedUIRenderer.ts (single event pipeline for terminal UI)\n * - Integration: outputMode.ts + globalWriteLock.ts for shell safety\n *\n * Usage:\n * - Colors/primitives: import { theme } from './theme.js';\n * - Renderer: import { UnifiedUIRenderer } from './UnifiedUIRenderer.js';\n * - Input handling: import { PromptController } from './PromptController.js';\n * - Output selection helpers: import { isPlainOutputMode } from './outputMode.js';\n */\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 1 - Core Primitives\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport {\n  theme,\n  icons,\n  spinnerFrames,\n  progressChars,\n  boxChars,\n  formatBanner,\n  formatUserPrompt,\n  USER_PROMPT_PREFIX,\n  formatToolCall,\n  formatMessage,\n  neon,\n  palette,\n  getToolColor,\n  formatToolName,\n} from './theme.js';\n\n// Note: layout.js exports are at the bottom of this file to avoid conflicts\nexport * from './uiConstants.js';\nexport * from './designSystem.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 2 - Specialized Renderers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './codeHighlighter.js';\nexport * from './textHighlighter.js';\nexport {\n  formatError,\n  formatErrorList,\n  type ErrorInfo,\n  type ErrorFormatOptions,\n} from './errorFormatter.js';\nexport * from './toolDisplay.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 3 - Components\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './animatedStatus.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 4 - Controllers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport { PromptController } from './PromptController.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 5 - High-Level Renderers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport { UnifiedUIRenderer } from './UnifiedUIRenderer.js';\n// export * from './designSystem.js'; // File doesn't exist\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 6 - Integration\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './outputMode.js';\nexport {\n  isStreamingMode,\n  enterStreamingMode,\n  exitStreamingMode,\n  ifNotStreaming,\n  whenStreamingEnds,\n  withStreamLock,\n  forceRelease,\n  installGlobalWriteLock,\n  resetGlobalWriteLock,\n} from './globalWriteLock.js';\n\n// Re-export layout utilities explicitly to avoid conflicts\nexport {\n  getTerminalColumns,\n  isUltraNarrowMode,\n  getContentWidth,\n  wrapParagraph,\n  wrapPreformatted,\n  normalizePanelWidth,\n  renderPanel,\n  measure,\n  stripAnsi,\n  padLine,\n  truncate,\n  type Colorize,\n  type PanelOptions,\n} from './layout.js';\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,aAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,aAAA;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SACEE,KAAK,EACLC,KAAK,EACLC,aAAa,EACbC,aAAa,EACbC,QAAQ,EACRC,YAAY,EACZC,gBAAgB,EAChBC,kBAAkB,EAClBC,cAAc,EACdC,aAAa,EACbC,IAAI,EACJC,OAAO,EACPC,YAAY,EACZC,cAAc,QACT,YAAY;;AAEnB;AACA,cAAc,kBAAkB;AAChC,cAAc,mBAAmB;;AAEjC;AACA;AACA;;AAEA,cAAc,sBAAsB;AACpC,cAAc,sBAAsB;AACpC,SACEC,WAAW,EACXC,eAAe,QAGV,qBAAqB;AAC5B,cAAc,kBAAkB;;AAEhC;AACA;AACA;;AAEA,cAAc,qBAAqB;;AAEnC;AACA;AACA;;AAEA,SAASC,gBAAgB,QAAQ,uBAAuB;;AAExD;AACA;AACA;;AAEA,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D;;AAEA;AACA;AACA;;AAEA,cAAc,iBAAiB;AAC/B,SACEC,eAAe,EACfC,kBAAkB,EAClBC,iBAAiB,EACjBC,cAAc,EACdC,iBAAiB,EACjBC,cAAc,EACdC,YAAY,EACZC,sBAAsB,EACtBC,oBAAoB,QACf,sBAAsB;;AAE7B;AACA,SACEC,kBAAkB,EAClBC,iBAAiB,EACjBC,eAAe,EACfC,aAAa,EACbC,gBAAgB,EAChBC,mBAAmB,EACnBC,WAAW,EACXC,OAAO,EACPC,SAAS,EACTC,OAAO,EACPC,QAAQ,QAGH,aAAa","ignoreList":[]}