441a334e49f1d627ef629765ed376213
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.analyzeBashFlow = analyzeBashFlow;
/**
 * Centralized guidance for bash command flows.
 * Keeps publish/git heuristics in one place so bash tooling stays concise.
 */

/**
 * Analyze a bash command for common workflow gaps (publish, git efficiency).
 */
function analyzeBashFlow(command) {
  const warnings = [];
  const normalized = command.toLowerCase();
  if (!normalized.trim()) {
    return warnings;
  }

  // Git efficiency: avoid repeated status calls in a single command chain.
  const gitStatusMatches = normalized.match(/git status/g);
  if (gitStatusMatches && gitStatusMatches.length > 1) {
    warnings.push({
      code: 'GIT_REDUNDANT_STATUS',
      message: 'Multiple git status calls detected in one command',
      suggestion: 'Combine git operations: git add -A && git commit -m "msg" && git push',
      severity: 'info'
    });
  }

  // Publish flow completeness for npm-style commands.
  if (normalized.includes('npm publish')) {
    const hasVersionStep = /\b(?:npm|pnpm|yarn)\s+version\b/.test(normalized);
    const hasBuildOrTests = /\b(?:npm|pnpm|yarn)\s+(?:run\s+)?(build|test|lint|prepare)\b/.test(normalized);
    const hasGitPush = /\bgit\s+push\b/.test(normalized);
    if (!(hasVersionStep && hasBuildOrTests && hasGitPush)) {
      warnings.push({
        code: 'NPM_INCOMPLETE_WORKFLOW',
        message: 'npm publish detected without a complete release flow',
        suggestion: 'Include version bump, build/tests, and git push or use npm_publish to automate the full release',
        severity: 'warning'
      });
    }
  }
  return warnings;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJhbmFseXplQmFzaEZsb3ciLCJjb21tYW5kIiwid2FybmluZ3MiLCJub3JtYWxpemVkIiwidG9Mb3dlckNhc2UiLCJ0cmltIiwiZ2l0U3RhdHVzTWF0Y2hlcyIsIm1hdGNoIiwibGVuZ3RoIiwicHVzaCIsImNvZGUiLCJtZXNzYWdlIiwic3VnZ2VzdGlvbiIsInNldmVyaXR5IiwiaW5jbHVkZXMiLCJoYXNWZXJzaW9uU3RlcCIsInRlc3QiLCJoYXNCdWlsZE9yVGVzdHMiLCJoYXNHaXRQdXNoIl0sInNvdXJjZXMiOlsiYmFzaENvbW1hbmRHdWlkYW5jZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENlbnRyYWxpemVkIGd1aWRhbmNlIGZvciBiYXNoIGNvbW1hbmQgZmxvd3MuXG4gKiBLZWVwcyBwdWJsaXNoL2dpdCBoZXVyaXN0aWNzIGluIG9uZSBwbGFjZSBzbyBiYXNoIHRvb2xpbmcgc3RheXMgY29uY2lzZS5cbiAqL1xuXG5leHBvcnQgdHlwZSBCYXNoRmxvd1NldmVyaXR5ID0gJ2luZm8nIHwgJ3dhcm5pbmcnIHwgJ2NyaXRpY2FsJztcblxuZXhwb3J0IGludGVyZmFjZSBCYXNoRmxvd1dhcm5pbmcge1xuICByZWFkb25seSBjb2RlOiBzdHJpbmc7XG4gIHJlYWRvbmx5IG1lc3NhZ2U6IHN0cmluZztcbiAgcmVhZG9ubHkgc3VnZ2VzdGlvbj86IHN0cmluZztcbiAgcmVhZG9ubHkgc2V2ZXJpdHk/OiBCYXNoRmxvd1NldmVyaXR5O1xufVxuXG4vKipcbiAqIEFuYWx5emUgYSBiYXNoIGNvbW1hbmQgZm9yIGNvbW1vbiB3b3JrZmxvdyBnYXBzIChwdWJsaXNoLCBnaXQgZWZmaWNpZW5jeSkuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBhbmFseXplQmFzaEZsb3coY29tbWFuZDogc3RyaW5nKTogQmFzaEZsb3dXYXJuaW5nW10ge1xuICBjb25zdCB3YXJuaW5nczogQmFzaEZsb3dXYXJuaW5nW10gPSBbXTtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbW1hbmQudG9Mb3dlckNhc2UoKTtcblxuICBpZiAoIW5vcm1hbGl6ZWQudHJpbSgpKSB7XG4gICAgcmV0dXJuIHdhcm5pbmdzO1xuICB9XG5cbiAgLy8gR2l0IGVmZmljaWVuY3k6IGF2b2lkIHJlcGVhdGVkIHN0YXR1cyBjYWxscyBpbiBhIHNpbmdsZSBjb21tYW5kIGNoYWluLlxuICBjb25zdCBnaXRTdGF0dXNNYXRjaGVzID0gbm9ybWFsaXplZC5tYXRjaCgvZ2l0IHN0YXR1cy9nKTtcbiAgaWYgKGdpdFN0YXR1c01hdGNoZXMgJiYgZ2l0U3RhdHVzTWF0Y2hlcy5sZW5ndGggPiAxKSB7XG4gICAgd2FybmluZ3MucHVzaCh7XG4gICAgICBjb2RlOiAnR0lUX1JFRFVOREFOVF9TVEFUVVMnLFxuICAgICAgbWVzc2FnZTogJ011bHRpcGxlIGdpdCBzdGF0dXMgY2FsbHMgZGV0ZWN0ZWQgaW4gb25lIGNvbW1hbmQnLFxuICAgICAgc3VnZ2VzdGlvbjogJ0NvbWJpbmUgZ2l0IG9wZXJhdGlvbnM6IGdpdCBhZGQgLUEgJiYgZ2l0IGNvbW1pdCAtbSBcIm1zZ1wiICYmIGdpdCBwdXNoJyxcbiAgICAgIHNldmVyaXR5OiAnaW5mbycsXG4gICAgfSk7XG4gIH1cblxuICAvLyBQdWJsaXNoIGZsb3cgY29tcGxldGVuZXNzIGZvciBucG0tc3R5bGUgY29tbWFuZHMuXG4gIGlmIChub3JtYWxpemVkLmluY2x1ZGVzKCducG0gcHVibGlzaCcpKSB7XG4gICAgY29uc3QgaGFzVmVyc2lvblN0ZXAgPSAvXFxiKD86bnBtfHBucG18eWFybilcXHMrdmVyc2lvblxcYi8udGVzdChub3JtYWxpemVkKTtcbiAgICBjb25zdCBoYXNCdWlsZE9yVGVzdHMgPSAvXFxiKD86bnBtfHBucG18eWFybilcXHMrKD86cnVuXFxzKyk/KGJ1aWxkfHRlc3R8bGludHxwcmVwYXJlKVxcYi8udGVzdChub3JtYWxpemVkKTtcbiAgICBjb25zdCBoYXNHaXRQdXNoID0gL1xcYmdpdFxccytwdXNoXFxiLy50ZXN0KG5vcm1hbGl6ZWQpO1xuXG4gICAgaWYgKCEoaGFzVmVyc2lvblN0ZXAgJiYgaGFzQnVpbGRPclRlc3RzICYmIGhhc0dpdFB1c2gpKSB7XG4gICAgICB3YXJuaW5ncy5wdXNoKHtcbiAgICAgICAgY29kZTogJ05QTV9JTkNPTVBMRVRFX1dPUktGTE9XJyxcbiAgICAgICAgbWVzc2FnZTogJ25wbSBwdWJsaXNoIGRldGVjdGVkIHdpdGhvdXQgYSBjb21wbGV0ZSByZWxlYXNlIGZsb3cnLFxuICAgICAgICBzdWdnZXN0aW9uOiAnSW5jbHVkZSB2ZXJzaW9uIGJ1bXAsIGJ1aWxkL3Rlc3RzLCBhbmQgZ2l0IHB1c2ggb3IgdXNlIG5wbV9wdWJsaXNoIHRvIGF1dG9tYXRlIHRoZSBmdWxsIHJlbGVhc2UnLFxuICAgICAgICBzZXZlcml0eTogJ3dhcm5pbmcnLFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHdhcm5pbmdzO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFXQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQSxlQUFlQSxDQUFDQyxPQUFlLEVBQXFCO0VBQ2xFLE1BQU1DLFFBQTJCLEdBQUcsRUFBRTtFQUN0QyxNQUFNQyxVQUFVLEdBQUdGLE9BQU8sQ0FBQ0csV0FBVyxDQUFDLENBQUM7RUFFeEMsSUFBSSxDQUFDRCxVQUFVLENBQUNFLElBQUksQ0FBQyxDQUFDLEVBQUU7SUFDdEIsT0FBT0gsUUFBUTtFQUNqQjs7RUFFQTtFQUNBLE1BQU1JLGdCQUFnQixHQUFHSCxVQUFVLENBQUNJLEtBQUssQ0FBQyxhQUFhLENBQUM7RUFDeEQsSUFBSUQsZ0JBQWdCLElBQUlBLGdCQUFnQixDQUFDRSxNQUFNLEdBQUcsQ0FBQyxFQUFFO0lBQ25ETixRQUFRLENBQUNPLElBQUksQ0FBQztNQUNaQyxJQUFJLEVBQUUsc0JBQXNCO01BQzVCQyxPQUFPLEVBQUUsbURBQW1EO01BQzVEQyxVQUFVLEVBQUUsdUVBQXVFO01BQ25GQyxRQUFRLEVBQUU7SUFDWixDQUFDLENBQUM7RUFDSjs7RUFFQTtFQUNBLElBQUlWLFVBQVUsQ0FBQ1csUUFBUSxDQUFDLGFBQWEsQ0FBQyxFQUFFO0lBQ3RDLE1BQU1DLGNBQWMsR0FBRyxpQ0FBaUMsQ0FBQ0MsSUFBSSxDQUFDYixVQUFVLENBQUM7SUFDekUsTUFBTWMsZUFBZSxHQUFHLDhEQUE4RCxDQUFDRCxJQUFJLENBQUNiLFVBQVUsQ0FBQztJQUN2RyxNQUFNZSxVQUFVLEdBQUcsZ0JBQWdCLENBQUNGLElBQUksQ0FBQ2IsVUFBVSxDQUFDO0lBRXBELElBQUksRUFBRVksY0FBYyxJQUFJRSxlQUFlLElBQUlDLFVBQVUsQ0FBQyxFQUFFO01BQ3REaEIsUUFBUSxDQUFDTyxJQUFJLENBQUM7UUFDWkMsSUFBSSxFQUFFLHlCQUF5QjtRQUMvQkMsT0FBTyxFQUFFLHNEQUFzRDtRQUMvREMsVUFBVSxFQUFFLGlHQUFpRztRQUM3R0MsUUFBUSxFQUFFO01BQ1osQ0FBQyxDQUFDO0lBQ0o7RUFDRjtFQUVBLE9BQU9YLFFBQVE7QUFDakIiLCJpZ25vcmVMaXN0IjpbXX0=