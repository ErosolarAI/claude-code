47f1b2e8d8740e0ed26708e75e091e62
"use strict";

var _parallelExecutor = require("../src/core/parallelExecutor.js");
describe('ParallelExecutor cancellation on failure (core-first)', () => {
  it('cancels remaining tasks when continueOnFailure is false', async () => {
    const executor = new _parallelExecutor.ParallelExecutor({
      maxConcurrency: 2,
      continueOnFailure: false
    });
    const tasks = [{
      id: 't1',
      execute: async () => 'ok-1',
      parallelizable: true
    }, {
      id: 't2',
      execute: async () => {
        throw new Error('boom');
      },
      parallelizable: true
    }, {
      id: 't3',
      execute: async () => 'ok-3',
      parallelizable: true,
      dependencies: ['t2']
    }];
    const result = await executor.execute(tasks);
    const statuses = Object.fromEntries(result.results.map(r => [r.taskId, r.status]));
    expect(statuses['t1']).toBe('completed');
    expect(statuses['t2']).toBe('failed');
    expect(statuses['t3']).toBe('cancelled');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGFyYWxsZWxFeGVjdXRvciIsInJlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwiZXhlY3V0b3IiLCJQYXJhbGxlbEV4ZWN1dG9yIiwibWF4Q29uY3VycmVuY3kiLCJjb250aW51ZU9uRmFpbHVyZSIsInRhc2tzIiwiaWQiLCJleGVjdXRlIiwicGFyYWxsZWxpemFibGUiLCJFcnJvciIsImRlcGVuZGVuY2llcyIsInJlc3VsdCIsInN0YXR1c2VzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJyZXN1bHRzIiwibWFwIiwiciIsInRhc2tJZCIsInN0YXR1cyIsImV4cGVjdCIsInRvQmUiXSwic291cmNlcyI6WyJwYXJhbGxlbEV4ZWN1dG9yLmNhbmNlbC50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhcmFsbGVsRXhlY3V0b3IsIHR5cGUgUGFyYWxsZWxUYXNrIH0gZnJvbSAnLi4vc3JjL2NvcmUvcGFyYWxsZWxFeGVjdXRvci5qcyc7XG5cbmRlc2NyaWJlKCdQYXJhbGxlbEV4ZWN1dG9yIGNhbmNlbGxhdGlvbiBvbiBmYWlsdXJlIChjb3JlLWZpcnN0KScsICgpID0+IHtcbiAgaXQoJ2NhbmNlbHMgcmVtYWluaW5nIHRhc2tzIHdoZW4gY29udGludWVPbkZhaWx1cmUgaXMgZmFsc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZXhlY3V0b3IgPSBuZXcgUGFyYWxsZWxFeGVjdXRvcih7IG1heENvbmN1cnJlbmN5OiAyLCBjb250aW51ZU9uRmFpbHVyZTogZmFsc2UgfSk7XG5cbiAgICBjb25zdCB0YXNrczogUGFyYWxsZWxUYXNrPHN0cmluZz5bXSA9IFtcbiAgICAgIHtcbiAgICAgICAgaWQ6ICd0MScsXG4gICAgICAgIGV4ZWN1dGU6IGFzeW5jICgpID0+ICdvay0xJyxcbiAgICAgICAgcGFyYWxsZWxpemFibGU6IHRydWUsXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBpZDogJ3QyJyxcbiAgICAgICAgZXhlY3V0ZTogYXN5bmMgKCkgPT4ge1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignYm9vbScpO1xuICAgICAgICB9LFxuICAgICAgICBwYXJhbGxlbGl6YWJsZTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIGlkOiAndDMnLFxuICAgICAgICBleGVjdXRlOiBhc3luYyAoKSA9PiAnb2stMycsXG4gICAgICAgIHBhcmFsbGVsaXphYmxlOiB0cnVlLFxuICAgICAgICBkZXBlbmRlbmNpZXM6IFsndDInXSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGV4ZWN1dG9yLmV4ZWN1dGUodGFza3MpO1xuXG4gICAgY29uc3Qgc3RhdHVzZXMgPSBPYmplY3QuZnJvbUVudHJpZXMocmVzdWx0LnJlc3VsdHMubWFwKChyKSA9PiBbci50YXNrSWQsIHIuc3RhdHVzXSkpO1xuICAgIGV4cGVjdChzdGF0dXNlc1sndDEnXSkudG9CZSgnY29tcGxldGVkJyk7XG4gICAgZXhwZWN0KHN0YXR1c2VzWyd0MiddKS50b0JlKCdmYWlsZWQnKTtcbiAgICBleHBlY3Qoc3RhdHVzZXNbJ3QzJ10pLnRvQmUoJ2NhbmNlbGxlZCcpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLGlCQUFBLEdBQUFDLE9BQUE7QUFFQUMsUUFBUSxDQUFDLHVEQUF1RCxFQUFFLE1BQU07RUFDdEVDLEVBQUUsQ0FBQyx5REFBeUQsRUFBRSxZQUFZO0lBQ3hFLE1BQU1DLFFBQVEsR0FBRyxJQUFJQyxrQ0FBZ0IsQ0FBQztNQUFFQyxjQUFjLEVBQUUsQ0FBQztNQUFFQyxpQkFBaUIsRUFBRTtJQUFNLENBQUMsQ0FBQztJQUV0RixNQUFNQyxLQUE2QixHQUFHLENBQ3BDO01BQ0VDLEVBQUUsRUFBRSxJQUFJO01BQ1JDLE9BQU8sRUFBRSxNQUFBQSxDQUFBLEtBQVksTUFBTTtNQUMzQkMsY0FBYyxFQUFFO0lBQ2xCLENBQUMsRUFDRDtNQUNFRixFQUFFLEVBQUUsSUFBSTtNQUNSQyxPQUFPLEVBQUUsTUFBQUEsQ0FBQSxLQUFZO1FBQ25CLE1BQU0sSUFBSUUsS0FBSyxDQUFDLE1BQU0sQ0FBQztNQUN6QixDQUFDO01BQ0RELGNBQWMsRUFBRTtJQUNsQixDQUFDLEVBQ0Q7TUFDRUYsRUFBRSxFQUFFLElBQUk7TUFDUkMsT0FBTyxFQUFFLE1BQUFBLENBQUEsS0FBWSxNQUFNO01BQzNCQyxjQUFjLEVBQUUsSUFBSTtNQUNwQkUsWUFBWSxFQUFFLENBQUMsSUFBSTtJQUNyQixDQUFDLENBQ0Y7SUFFRCxNQUFNQyxNQUFNLEdBQUcsTUFBTVYsUUFBUSxDQUFDTSxPQUFPLENBQUNGLEtBQUssQ0FBQztJQUU1QyxNQUFNTyxRQUFRLEdBQUdDLE1BQU0sQ0FBQ0MsV0FBVyxDQUFDSCxNQUFNLENBQUNJLE9BQU8sQ0FBQ0MsR0FBRyxDQUFFQyxDQUFDLElBQUssQ0FBQ0EsQ0FBQyxDQUFDQyxNQUFNLEVBQUVELENBQUMsQ0FBQ0UsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUNwRkMsTUFBTSxDQUFDUixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUN4Q0QsTUFBTSxDQUFDUixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUNyQ0QsTUFBTSxDQUFDUixRQUFRLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLFdBQVcsQ0FBQztFQUMxQyxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=