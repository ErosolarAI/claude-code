{"version":3,"names":["cov_1g09cuydjg","actualCoverage","PROVIDER_CONTRACT_VERSION","s"],"sources":["provider.ts"],"sourcesContent":["/**\n * Provider Contract v1.0\n * \n * Stable interface for LLM provider integration.\n */\n\nexport const PROVIDER_CONTRACT_VERSION = '1.0.0';\n\n/**\n * Provider configuration\n */\nexport interface ProviderConfig {\n  provider: string;\n  model: string;\n  apiKey?: string;\n  baseURL?: string;\n  temperature?: number;\n  maxTokens?: number;\n  metadata?: Record<string, unknown>;\n}\n\n/**\n * Conversation message structure\n */\nexport type MessageRole = 'system' | 'user' | 'assistant' | 'tool';\n\nexport interface BaseMessage {\n  role: MessageRole;\n  content: string;\n}\n\nexport interface SystemMessage extends BaseMessage {\n  role: 'system';\n}\n\nexport interface UserMessage extends BaseMessage {\n  role: 'user';\n}\n\nexport interface ToolCall {\n  id: string;\n  name: string;\n  arguments: Record<string, unknown>;\n}\n\nexport interface AssistantMessage extends BaseMessage {\n  role: 'assistant';\n  toolCalls?: ToolCall[];\n}\n\nexport interface ToolMessage extends BaseMessage {\n  role: 'tool';\n  name: string;\n  toolCallId: string;\n}\n\nexport type Message = SystemMessage | UserMessage | AssistantMessage | ToolMessage;\n\n/**\n * Tool definition for providers\n */\nexport interface ProviderToolDefinition {\n  name: string;\n  description: string;\n  parameters?: {\n    type: 'object';\n    properties?: Record<string, unknown>;\n    required?: string[];\n    [key: string]: unknown;\n  };\n}\n\n/**\n * Provider response types\n */\nexport interface ProviderUsage {\n  inputTokens?: number;\n  outputTokens?: number;\n  totalTokens?: number;\n}\n\nexport interface ProviderMessageResponse {\n  type: 'message';\n  content: string;\n  usage?: ProviderUsage | null;\n}\n\nexport interface ProviderToolCallsResponse {\n  type: 'tool_calls';\n  toolCalls: ToolCall[];\n  content?: string;\n  usage?: ProviderUsage | null;\n}\n\nexport type ProviderResponse = ProviderMessageResponse | ProviderToolCallsResponse;\n\n/**\n * Streaming response\n */\nexport interface StreamChunk {\n  type: 'content' | 'reasoning' | 'tool_call' | 'usage' | 'done';\n  content?: string;\n  toolCall?: Partial<ToolCall>;\n  usage?: ProviderUsage;\n}\n\n/**\n * Provider interface\n */\nexport interface ILLMProvider {\n  readonly id: string;\n  readonly model: string;\n\n  /**\n   * Generate a completion (non-streaming)\n   */\n  generate(messages: Message[], tools: ProviderToolDefinition[]): Promise<ProviderResponse>;\n\n  /**\n   * Generate a streaming completion\n   */\n  generateStream?(\n    messages: Message[],\n    tools: ProviderToolDefinition[]\n  ): AsyncIterableIterator<StreamChunk>;\n\n  /**\n   * Get provider capabilities\n   */\n  getCapabilities(): ProviderCapabilities;\n}\n\n/**\n * Provider capabilities\n */\nexport interface ProviderCapabilities {\n  streaming: boolean;\n  toolCalling: boolean;\n  vision: boolean;\n  functionCalling: boolean;\n  maxTokens: number;\n  supportedModalities: ('text' | 'image' | 'audio')[];\n}\n\n/**\n * Provider factory\n */\nexport type ProviderFactory = (config: ProviderConfig) => ILLMProvider;\n\n/**\n * Provider registry interface\n */\nexport interface IProviderRegistry {\n  /**\n   * Register a provider factory\n   */\n  register(providerId: string, factory: ProviderFactory): void;\n\n  /**\n   * Unregister a provider\n   */\n  unregister(providerId: string): void;\n\n  /**\n   * Create a provider instance\n   */\n  create(config: ProviderConfig): ILLMProvider;\n\n  /**\n   * Check if provider is registered\n   */\n  has(providerId: string): boolean;\n\n  /**\n   * List all registered providers\n   */\n  list(): string[];\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;AACA;;AAEA,OAAO,MAAME,yBAAyB;AAAA;AAAA,CAAAF,cAAA,GAAAG,CAAA,OAAG,OAAO;;AAEhD;AACA;AACA;;AAWA;AACA;AACA;;AAmCA;AACA;AACA;;AAYA;AACA;AACA;;AAsBA;AACA;AACA;;AAQA;AACA;AACA;;AAwBA;AACA;AACA;;AAUA;AACA;AACA;;AAGA;AACA;AACA","ignoreList":[]}