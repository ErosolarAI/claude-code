{"version":3,"names":["_searchTools","require","cov_1odupey9ag","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","s","f","b","_coverageSchema","coverage","actualCoverage","SearchCapabilityModule","id","options","constructor","create","context","workingDir","description","toolSuite","tools","createSearchTools","metadata","exports"],"sources":["searchCapability.ts"],"sourcesContent":["import type { CapabilityContribution, CapabilityContext, CapabilityModule } from '../runtime/agentHost.js';\nimport { createSearchTools } from '../tools/searchTools.js';\n\nexport interface SearchCapabilityOptions {\n  workingDir?: string;\n}\n\n/**\n * Unified Search Capability Module\n *\n * Provides the Search tool which combines:\n * - File pattern matching (glob)\n * - Content search (regex/grep)\n * - Definition finding (functions, classes, interfaces)\n */\nexport class SearchCapabilityModule implements CapabilityModule {\n  readonly id = 'capability.search';\n  private readonly options: SearchCapabilityOptions;\n\n  constructor(options: SearchCapabilityOptions = {}) {\n    this.options = options;\n  }\n\n  async create(context: CapabilityContext): Promise<CapabilityContribution> {\n    const workingDir = this.options.workingDir ?? context.workingDir;\n    return {\n      id: 'search.unified',\n      description: 'Unified search for files and content',\n      toolSuite: {\n        id: 'search',\n        tools: createSearchTools(workingDir),\n      },\n      metadata: { workingDir },\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]}