0f2684d5694e124c8ec90d2a48743c0a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ValidationError = exports.StructuredError = exports.ResourceLimitError = exports.ErrorSeverity = exports.ErrorCategory = exports.DangerousOperationError = exports.ContextOverflowError = exports.BlockedOperationError = void 0;
exports.toStructuredError = toStructuredError;
/**
 * Comprehensive Error Classification System
 *
 * Provides structured error handling with:
 * - Error categorization (dangerous, blocked, invalid, etc.)
 * - Severity levels (critical, error, warning, info)
 * - Auto-fixing suggestions
 * - Recovery strategies
 */
let ErrorSeverity = exports.ErrorSeverity = /*#__PURE__*/function (ErrorSeverity) {
  ErrorSeverity["CRITICAL"] = "critical";
  // System-level failure, cannot continue
  ErrorSeverity["ERROR"] = "error";
  // Operation failed, but system stable
  ErrorSeverity["WARNING"] = "warning";
  // Risky but allowed
  ErrorSeverity["INFO"] = "info"; // Informational only
  return ErrorSeverity;
}({});
let ErrorCategory = exports.ErrorCategory = /*#__PURE__*/function (ErrorCategory) {
  ErrorCategory["DANGEROUS"] = "dangerous";
  // Operation could harm system
  ErrorCategory["BLOCKED"] = "blocked";
  // Explicitly forbidden by policy
  ErrorCategory["INVALID"] = "invalid";
  // Malformed input/arguments
  ErrorCategory["PERMISSION"] = "permission";
  // Authorization issue
  ErrorCategory["RESOURCE"] = "resource";
  // Resource limit exceeded
  ErrorCategory["NETWORK"] = "network";
  // Network/connectivity issue
  ErrorCategory["TIMEOUT"] = "timeout";
  // Operation timed out
  ErrorCategory["VALIDATION"] = "validation";
  // Schema/type validation failed
  ErrorCategory["CONTEXT_OVERFLOW"] = "context_overflow";
  // Token/context limit exceeded
  ErrorCategory["NOT_FOUND"] = "not_found";
  // Resource doesn't exist
  ErrorCategory["UNKNOWN"] = "unknown"; // Unclassified error
  return ErrorCategory;
}({}); // Enhanced discriminated union for error suggestions
// Enhanced discriminated union for structured error details
/**
 * Base class for all structured errors
 */
class StructuredError extends Error {
  severity;
  category;
  suggestions;
  originalInput;
  metadata;
  timestamp;
  recoverable;
  constructor(details) {
    super(details.message);
    this.name = this.constructor.name;
    this.severity = details.severity;
    this.category = details.category;
    this.suggestions = [...details.suggestions]; // Copy to mutable array
    this.originalInput = details.originalInput;
    this.metadata = details.metadata;
    this.timestamp = details.timestamp;
    this.recoverable = details.recoverable;

    // Maintain proper stack trace
    Error.captureStackTrace(this, this.constructor);
  }

  /**
  * Format error for display with suggestions
  */
  toDisplayString() {
    const parts = [`[${this.severity.toUpperCase()}] ${this.message}`];
    if (this.originalInput) {
      parts.push(`  Input: ${this.originalInput}`);
    }
    if (this.suggestions.length > 0) {
      parts.push('\nSuggestions:');
      for (const suggestion of this.suggestions) {
        parts.push(`  â€¢ ${suggestion.action}`);
        if (suggestion.example) {
          parts.push(`    Example: ${suggestion.example}`);
        }
        if (suggestion.autoFixable) {
          parts.push(`    [Auto-fixable]`);
        }
      }
    }
    return parts.join('\n');
  }

  /**
  * Convert to JSON for logging/telemetry
  */
  toJSON() {
    return {
      name: this.name,
      severity: this.severity,
      category: this.category,
      message: this.message,
      originalInput: this.originalInput,
      suggestions: this.suggestions.map(s => ({
        action: s.action,
        example: s.example,
        autoFixable: s.autoFixable
      })),
      metadata: this.metadata,
      timestamp: this.timestamp,
      recoverable: this.recoverable,
      stack: this.stack
    };
  }

  /**
  * Try to auto-fix the error if possible
  */
  tryAutoFix() {
    for (const suggestion of this.suggestions) {
      if (suggestion.autoFixable && suggestion.autoFix) {
        try {
          const result = suggestion.autoFix();
          return {
            fixed: true,
            result
          };
        } catch {
          // Continue to next suggestion
        }
      }
    }
    return {
      fixed: false
    };
  }
}

/**
 * Dangerous operation error - operation could harm the system
 */
exports.StructuredError = StructuredError;
class DangerousOperationError extends StructuredError {
  constructor(operation, reason, safeAlternative) {
    const suggestions = [];
    if (safeAlternative) {
      suggestions.push({
        action: `Use safer alternative: ${safeAlternative}`,
        example: safeAlternative,
        autoFixable: true,
        autoFix: () => safeAlternative
      });
    } else {
      suggestions.push({
        action: 'Review operation for safety before retrying',
        autoFixable: false
      });
    }
    super({
      severity: ErrorSeverity.CRITICAL,
      category: ErrorCategory.DANGEROUS,
      message: `Dangerous operation blocked: ${operation}. Reason: ${reason}`,
      originalInput: operation,
      suggestions,
      recoverable: safeAlternative !== undefined,
      timestamp: new Date().toISOString()
    });
  }
}

/**
 * Blocked operation error - explicitly forbidden by policy
 */
exports.DangerousOperationError = DangerousOperationError;
class BlockedOperationError extends StructuredError {
  constructor(operation, policy, allowedAlternatives) {
    const suggestions = [];
    if (allowedAlternatives && allowedAlternatives.length > 0) {
      for (const alt of allowedAlternatives) {
        suggestions.push({
          action: `Try allowed alternative: ${alt}`,
          example: alt,
          autoFixable: true,
          autoFix: () => alt
        });
      }
    } else {
      suggestions.push({
        action: 'This operation is not permitted by policy',
        autoFixable: false
      });
    }
    super({
      severity: ErrorSeverity.ERROR,
      category: ErrorCategory.BLOCKED,
      message: `Operation blocked by policy "${policy}": ${operation}`,
      originalInput: operation,
      suggestions,
      recoverable: allowedAlternatives !== undefined && allowedAlternatives.length > 0,
      timestamp: new Date().toISOString(),
      metadata: {
        policy,
        allowedAlternatives
      }
    });
  }
}

/**
 * Context overflow error - token/character limits exceeded
 */
exports.BlockedOperationError = BlockedOperationError;
class ContextOverflowError extends StructuredError {
  constructor(actual, limit, unit = 'tokens', truncatable = true) {
    const percentage = limit > 0 ? Math.round(actual / limit * 100) : 0;
    const suggestions = [];
    if (truncatable) {
      suggestions.push({
        action: `Auto-truncate to ${limit} ${unit}`,
        example: `Content will be reduced from ${actual} to ${limit} ${unit}`,
        autoFixable: true,
        autoFix: () => ({
          truncate: true,
          limit
        })
      });
    }
    suggestions.push({
      action: `Reduce scope to use less than ${limit} ${unit}`,
      autoFixable: false
    });
    super({
      severity: ErrorSeverity.CRITICAL,
      category: ErrorCategory.CONTEXT_OVERFLOW,
      message: `Context overflow: ${actual} ${unit} exceeds limit of ${limit} ${unit} (${percentage}%)`,
      suggestions,
      recoverable: truncatable,
      timestamp: new Date().toISOString(),
      metadata: {
        actual,
        limit,
        unit,
        percentage
      }
    });
  }
}

/**
 * Resource error - limits exceeded
 */
exports.ContextOverflowError = ContextOverflowError;
class ResourceLimitError extends StructuredError {
  constructor(resource, actual, limit, reducible = true) {
    const suggestions = [];
    if (reducible) {
      const safeValue = Math.floor(limit * 0.8); // 80% of limit
      suggestions.push({
        action: `Reduce ${resource} to ${safeValue} (80% of limit)`,
        example: `Set ${resource}=${safeValue}`,
        autoFixable: true,
        autoFix: () => safeValue
      });
    }
    super({
      severity: ErrorSeverity.ERROR,
      category: ErrorCategory.RESOURCE,
      message: `Resource limit exceeded: ${resource} is ${actual}, maximum is ${limit}`,
      suggestions,
      recoverable: reducible,
      timestamp: new Date().toISOString(),
      metadata: {
        resource,
        actual,
        limit
      }
    });
  }
}

/**
 * Validation error - input/schema validation failed
 */
exports.ResourceLimitError = ResourceLimitError;
class ValidationError extends StructuredError {
  constructor(field, code, message) {
    super({
      severity: ErrorSeverity.ERROR,
      category: ErrorCategory.VALIDATION,
      message: `Validation failed for ${field}: ${code}. ${message}`,
      originalInput: code,
      suggestions: [{
        action: `Fix the field "${field}" to satisfy validation`,
        example: `${field}: <provide valid value>`,
        autoFixable: false
      }],
      recoverable: false,
      timestamp: new Date().toISOString(),
      metadata: {
        field,
        code
      }
    });
  }
}

/**
 * Format any error as a structured error
 */
exports.ValidationError = ValidationError;
function toStructuredError(error) {
  // Already structured
  if (error instanceof StructuredError) {
    return error;
  }

  // Convert standard errors
  const message = error instanceof Error ? error.message : String(error);

  // Detect error category from message
  const category = detectErrorCategory(message);
  const severity = detectErrorSeverity(category);
  class GenericStructuredError extends StructuredError {}
  return new GenericStructuredError({
    severity,
    category,
    message,
    suggestions: [],
    recoverable: false,
    timestamp: new Date().toISOString()
  });
}

/**
 * Detect error category from error message
 */
function detectErrorCategory(message) {
  const lower = message.toLowerCase();
  if (lower.includes('dangerous') || lower.includes('unsafe') || lower.includes('harmful')) {
    return ErrorCategory.DANGEROUS;
  }
  if (lower.includes('blocked') || lower.includes('forbidden') || lower.includes('not allowed')) {
    return ErrorCategory.BLOCKED;
  }
  if (lower.includes('invalid') || lower.includes('malformed')) {
    return ErrorCategory.INVALID;
  }
  if (lower.includes('permission') || lower.includes('unauthorized') || lower.includes('access denied')) {
    return ErrorCategory.PERMISSION;
  }
  if (lower.includes('limit') || lower.includes('exceeded') || lower.includes('too large')) {
    return ErrorCategory.RESOURCE;
  }
  if (lower.includes('timeout') || lower.includes('timed out')) {
    return ErrorCategory.TIMEOUT;
  }
  if (lower.includes('network') || lower.includes('connection')) {
    return ErrorCategory.NETWORK;
  }
  if (lower.includes('validation') || lower.includes('schema')) {
    return ErrorCategory.VALIDATION;
  }
  if (lower.includes('context') || lower.includes('token') || lower.includes('overflow')) {
    return ErrorCategory.CONTEXT_OVERFLOW;
  }
  if (lower.includes('not found') || lower.includes('does not exist')) {
    return ErrorCategory.NOT_FOUND;
  }
  return ErrorCategory.UNKNOWN;
}

/**
 * Determine severity from category
 */
function detectErrorSeverity(category) {
  switch (category) {
    case ErrorCategory.DANGEROUS:
    case ErrorCategory.CONTEXT_OVERFLOW:
      return ErrorSeverity.CRITICAL;
    case ErrorCategory.BLOCKED:
    case ErrorCategory.PERMISSION:
    case ErrorCategory.VALIDATION:
    case ErrorCategory.INVALID:
    case ErrorCategory.RESOURCE:
      return ErrorSeverity.ERROR;
    case ErrorCategory.TIMEOUT:
    case ErrorCategory.NETWORK:
    case ErrorCategory.NOT_FOUND:
      return ErrorSeverity.WARNING;
    default:
      return ErrorSeverity.ERROR;
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFcnJvclNldmVyaXR5IiwiZXhwb3J0cyIsIkVycm9yQ2F0ZWdvcnkiLCJTdHJ1Y3R1cmVkRXJyb3IiLCJFcnJvciIsInNldmVyaXR5IiwiY2F0ZWdvcnkiLCJzdWdnZXN0aW9ucyIsIm9yaWdpbmFsSW5wdXQiLCJtZXRhZGF0YSIsInRpbWVzdGFtcCIsInJlY292ZXJhYmxlIiwiY29uc3RydWN0b3IiLCJkZXRhaWxzIiwibWVzc2FnZSIsIm5hbWUiLCJjYXB0dXJlU3RhY2tUcmFjZSIsInRvRGlzcGxheVN0cmluZyIsInBhcnRzIiwidG9VcHBlckNhc2UiLCJwdXNoIiwibGVuZ3RoIiwic3VnZ2VzdGlvbiIsImFjdGlvbiIsImV4YW1wbGUiLCJhdXRvRml4YWJsZSIsImpvaW4iLCJ0b0pTT04iLCJtYXAiLCJzIiwic3RhY2siLCJ0cnlBdXRvRml4IiwiYXV0b0ZpeCIsInJlc3VsdCIsImZpeGVkIiwiRGFuZ2Vyb3VzT3BlcmF0aW9uRXJyb3IiLCJvcGVyYXRpb24iLCJyZWFzb24iLCJzYWZlQWx0ZXJuYXRpdmUiLCJDUklUSUNBTCIsIkRBTkdFUk9VUyIsInVuZGVmaW5lZCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIkJsb2NrZWRPcGVyYXRpb25FcnJvciIsInBvbGljeSIsImFsbG93ZWRBbHRlcm5hdGl2ZXMiLCJhbHQiLCJFUlJPUiIsIkJMT0NLRUQiLCJDb250ZXh0T3ZlcmZsb3dFcnJvciIsImFjdHVhbCIsImxpbWl0IiwidW5pdCIsInRydW5jYXRhYmxlIiwicGVyY2VudGFnZSIsIk1hdGgiLCJyb3VuZCIsInRydW5jYXRlIiwiQ09OVEVYVF9PVkVSRkxPVyIsIlJlc291cmNlTGltaXRFcnJvciIsInJlc291cmNlIiwicmVkdWNpYmxlIiwic2FmZVZhbHVlIiwiZmxvb3IiLCJSRVNPVVJDRSIsIlZhbGlkYXRpb25FcnJvciIsImZpZWxkIiwiY29kZSIsIlZBTElEQVRJT04iLCJ0b1N0cnVjdHVyZWRFcnJvciIsImVycm9yIiwiU3RyaW5nIiwiZGV0ZWN0RXJyb3JDYXRlZ29yeSIsImRldGVjdEVycm9yU2V2ZXJpdHkiLCJHZW5lcmljU3RydWN0dXJlZEVycm9yIiwibG93ZXIiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwiSU5WQUxJRCIsIlBFUk1JU1NJT04iLCJUSU1FT1VUIiwiTkVUV09SSyIsIk5PVF9GT1VORCIsIlVOS05PV04iLCJXQVJOSU5HIl0sInNvdXJjZXMiOlsiZXJyb3JUeXBlcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbXByZWhlbnNpdmUgRXJyb3IgQ2xhc3NpZmljYXRpb24gU3lzdGVtXG4gKlxuICogUHJvdmlkZXMgc3RydWN0dXJlZCBlcnJvciBoYW5kbGluZyB3aXRoOlxuICogLSBFcnJvciBjYXRlZ29yaXphdGlvbiAoZGFuZ2Vyb3VzLCBibG9ja2VkLCBpbnZhbGlkLCBldGMuKVxuICogLSBTZXZlcml0eSBsZXZlbHMgKGNyaXRpY2FsLCBlcnJvciwgd2FybmluZywgaW5mbylcbiAqIC0gQXV0by1maXhpbmcgc3VnZ2VzdGlvbnNcbiAqIC0gUmVjb3Zlcnkgc3RyYXRlZ2llc1xuICovXG5cbmV4cG9ydCBlbnVtIEVycm9yU2V2ZXJpdHkge1xuICBDUklUSUNBTCA9ICdjcml0aWNhbCcsICAvLyBTeXN0ZW0tbGV2ZWwgZmFpbHVyZSwgY2Fubm90IGNvbnRpbnVlXG4gIEVSUk9SID0gJ2Vycm9yJywgICAgICAgIC8vIE9wZXJhdGlvbiBmYWlsZWQsIGJ1dCBzeXN0ZW0gc3RhYmxlXG4gIFdBUk5JTkcgPSAnd2FybmluZycsICAgIC8vIFJpc2t5IGJ1dCBhbGxvd2VkXG4gIElORk8gPSAnaW5mbycsICAgICAgICAgIC8vIEluZm9ybWF0aW9uYWwgb25seVxufVxuXG5leHBvcnQgZW51bSBFcnJvckNhdGVnb3J5IHtcbiAgREFOR0VST1VTID0gJ2Rhbmdlcm91cycsICAgICAgLy8gT3BlcmF0aW9uIGNvdWxkIGhhcm0gc3lzdGVtXG4gIEJMT0NLRUQgPSAnYmxvY2tlZCcsICAgICAgICAgIC8vIEV4cGxpY2l0bHkgZm9yYmlkZGVuIGJ5IHBvbGljeVxuICBJTlZBTElEID0gJ2ludmFsaWQnLCAgICAgICAgICAvLyBNYWxmb3JtZWQgaW5wdXQvYXJndW1lbnRzXG4gIFBFUk1JU1NJT04gPSAncGVybWlzc2lvbicsICAgIC8vIEF1dGhvcml6YXRpb24gaXNzdWVcbiAgUkVTT1VSQ0UgPSAncmVzb3VyY2UnLCAgICAgICAgLy8gUmVzb3VyY2UgbGltaXQgZXhjZWVkZWRcbiAgTkVUV09SSyA9ICduZXR3b3JrJywgICAgICAgICAgLy8gTmV0d29yay9jb25uZWN0aXZpdHkgaXNzdWVcbiAgVElNRU9VVCA9ICd0aW1lb3V0JywgICAgICAgICAgLy8gT3BlcmF0aW9uIHRpbWVkIG91dFxuICBWQUxJREFUSU9OID0gJ3ZhbGlkYXRpb24nLCAgICAvLyBTY2hlbWEvdHlwZSB2YWxpZGF0aW9uIGZhaWxlZFxuICBDT05URVhUX09WRVJGTE9XID0gJ2NvbnRleHRfb3ZlcmZsb3cnLCAvLyBUb2tlbi9jb250ZXh0IGxpbWl0IGV4Y2VlZGVkXG4gIE5PVF9GT1VORCA9ICdub3RfZm91bmQnLCAgICAgIC8vIFJlc291cmNlIGRvZXNuJ3QgZXhpc3RcbiAgVU5LTk9XTiA9ICd1bmtub3duJywgICAgICAgICAgLy8gVW5jbGFzc2lmaWVkIGVycm9yXG59XG5cbi8vIEVuaGFuY2VkIGRpc2NyaW1pbmF0ZWQgdW5pb24gZm9yIGVycm9yIHN1Z2dlc3Rpb25zXG5leHBvcnQgdHlwZSBFcnJvclN1Z2dlc3Rpb24gPVxuICB8IHtcbiAgICAgIHJlYWRvbmx5IGFjdGlvbjogc3RyaW5nO1xuICAgICAgcmVhZG9ubHkgZXhhbXBsZT86IHN0cmluZztcbiAgICAgIHJlYWRvbmx5IGF1dG9GaXhhYmxlOiB0cnVlO1xuICAgICAgcmVhZG9ubHkgYXV0b0ZpeDogKCkgPT4gdW5rbm93bjtcbiAgICB9XG4gIHwge1xuICAgICAgcmVhZG9ubHkgYWN0aW9uOiBzdHJpbmc7XG4gICAgICByZWFkb25seSBleGFtcGxlPzogc3RyaW5nO1xuICAgICAgcmVhZG9ubHkgYXV0b0ZpeGFibGU6IGZhbHNlO1xuICAgIH07XG5cbi8vIEVuaGFuY2VkIGRpc2NyaW1pbmF0ZWQgdW5pb24gZm9yIHN0cnVjdHVyZWQgZXJyb3IgZGV0YWlsc1xuZXhwb3J0IHR5cGUgU3RydWN0dXJlZEVycm9yRGV0YWlscyA9IHtcbiAgcmVhZG9ubHkgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHk7XG4gIHJlYWRvbmx5IGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5O1xuICByZWFkb25seSBtZXNzYWdlOiBzdHJpbmc7XG4gIHJlYWRvbmx5IG9yaWdpbmFsSW5wdXQ/OiBzdHJpbmc7XG4gIHJlYWRvbmx5IHN1Z2dlc3Rpb25zOiByZWFkb25seSBFcnJvclN1Z2dlc3Rpb25bXTtcbiAgcmVhZG9ubHkgbWV0YWRhdGE/OiBSZWFkb25seTxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj47XG4gIHJlYWRvbmx5IHRpbWVzdGFtcDogc3RyaW5nO1xuICByZWFkb25seSByZWNvdmVyYWJsZTogYm9vbGVhbjtcbn07XG5cbi8qKlxuICogQmFzZSBjbGFzcyBmb3IgYWxsIHN0cnVjdHVyZWQgZXJyb3JzXG4gKi9cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBTdHJ1Y3R1cmVkRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHB1YmxpYyByZWFkb25seSBzZXZlcml0eTogRXJyb3JTZXZlcml0eTtcbiAgcHVibGljIHJlYWRvbmx5IGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5O1xuICBwdWJsaWMgcmVhZG9ubHkgc3VnZ2VzdGlvbnM6IEVycm9yU3VnZ2VzdGlvbltdO1xuICBwdWJsaWMgcmVhZG9ubHkgb3JpZ2luYWxJbnB1dD86IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IG1ldGFkYXRhPzogUmVjb3JkPHN0cmluZywgdW5rbm93bj47XG4gIHB1YmxpYyByZWFkb25seSB0aW1lc3RhbXA6IHN0cmluZztcbiAgcHVibGljIHJlYWRvbmx5IHJlY292ZXJhYmxlOiBib29sZWFuO1xuXG4gIGNvbnN0cnVjdG9yKGRldGFpbHM6IFN0cnVjdHVyZWRFcnJvckRldGFpbHMpIHtcbiAgICBzdXBlcihkZXRhaWxzLm1lc3NhZ2UpO1xuICAgIHRoaXMubmFtZSA9IHRoaXMuY29uc3RydWN0b3IubmFtZTtcbiAgICB0aGlzLnNldmVyaXR5ID0gZGV0YWlscy5zZXZlcml0eTtcbiAgICB0aGlzLmNhdGVnb3J5ID0gZGV0YWlscy5jYXRlZ29yeTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gWy4uLmRldGFpbHMuc3VnZ2VzdGlvbnNdOyAvLyBDb3B5IHRvIG11dGFibGUgYXJyYXlcbiAgICB0aGlzLm9yaWdpbmFsSW5wdXQgPSBkZXRhaWxzLm9yaWdpbmFsSW5wdXQ7XG4gICAgdGhpcy5tZXRhZGF0YSA9IGRldGFpbHMubWV0YWRhdGE7XG4gICAgdGhpcy50aW1lc3RhbXAgPSBkZXRhaWxzLnRpbWVzdGFtcDtcbiAgICB0aGlzLnJlY292ZXJhYmxlID0gZGV0YWlscy5yZWNvdmVyYWJsZTtcblxuICAgIC8vIE1haW50YWluIHByb3BlciBzdGFjayB0cmFjZVxuICAgIEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsIHRoaXMuY29uc3RydWN0b3IpO1xuICB9XG5cbiAgLyoqXG4gKiBGb3JtYXQgZXJyb3IgZm9yIGRpc3BsYXkgd2l0aCBzdWdnZXN0aW9uc1xuICovXG4gIHRvRGlzcGxheVN0cmluZygpOiBzdHJpbmcge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtcbiAgICAgIGBbJHt0aGlzLnNldmVyaXR5LnRvVXBwZXJDYXNlKCl9XSAke3RoaXMubWVzc2FnZX1gLFxuICAgIF07XG5cbiAgICBpZiAodGhpcy5vcmlnaW5hbElucHV0KSB7XG4gICAgICBwYXJ0cy5wdXNoKGAgIElucHV0OiAke3RoaXMub3JpZ2luYWxJbnB1dH1gKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBwYXJ0cy5wdXNoKCdcXG5TdWdnZXN0aW9uczonKTtcbiAgICAgIGZvciAoY29uc3Qgc3VnZ2VzdGlvbiBvZiB0aGlzLnN1Z2dlc3Rpb25zKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYCAg4oCiICR7c3VnZ2VzdGlvbi5hY3Rpb259YCk7XG4gICAgICAgIGlmIChzdWdnZXN0aW9uLmV4YW1wbGUpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKGAgICAgRXhhbXBsZTogJHtzdWdnZXN0aW9uLmV4YW1wbGV9YCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHN1Z2dlc3Rpb24uYXV0b0ZpeGFibGUpIHtcbiAgICAgICAgICBwYXJ0cy5wdXNoKGAgICAgW0F1dG8tZml4YWJsZV1gKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIC8qKlxuICogQ29udmVydCB0byBKU09OIGZvciBsb2dnaW5nL3RlbGVtZXRyeVxuICovXG4gIHRvSlNPTigpOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMubmFtZSxcbiAgICAgIHNldmVyaXR5OiB0aGlzLnNldmVyaXR5LFxuICAgICAgY2F0ZWdvcnk6IHRoaXMuY2F0ZWdvcnksXG4gICAgICBtZXNzYWdlOiB0aGlzLm1lc3NhZ2UsXG4gICAgICBvcmlnaW5hbElucHV0OiB0aGlzLm9yaWdpbmFsSW5wdXQsXG4gICAgICBzdWdnZXN0aW9uczogdGhpcy5zdWdnZXN0aW9ucy5tYXAocyA9PiAoe1xuICAgICAgICBhY3Rpb246IHMuYWN0aW9uLFxuICAgICAgICBleGFtcGxlOiBzLmV4YW1wbGUsXG4gICAgICAgIGF1dG9GaXhhYmxlOiBzLmF1dG9GaXhhYmxlLFxuICAgICAgfSkpLFxuICAgICAgbWV0YWRhdGE6IHRoaXMubWV0YWRhdGEsXG4gICAgICB0aW1lc3RhbXA6IHRoaXMudGltZXN0YW1wLFxuICAgICAgcmVjb3ZlcmFibGU6IHRoaXMucmVjb3ZlcmFibGUsXG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gKiBUcnkgdG8gYXV0by1maXggdGhlIGVycm9yIGlmIHBvc3NpYmxlXG4gKi9cbiAgdHJ5QXV0b0ZpeCgpOiB7IGZpeGVkOiBib29sZWFuOyByZXN1bHQ/OiBhbnkgfSB7XG4gICAgZm9yIChjb25zdCBzdWdnZXN0aW9uIG9mIHRoaXMuc3VnZ2VzdGlvbnMpIHtcbiAgICAgIGlmIChzdWdnZXN0aW9uLmF1dG9GaXhhYmxlICYmIHN1Z2dlc3Rpb24uYXV0b0ZpeCkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IHN1Z2dlc3Rpb24uYXV0b0ZpeCgpO1xuICAgICAgICAgIHJldHVybiB7IGZpeGVkOiB0cnVlLCByZXN1bHQgfTtcbiAgICAgICAgfSBjYXRjaCB7XG4gICAgICAgICAgLy8gQ29udGludWUgdG8gbmV4dCBzdWdnZXN0aW9uXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHsgZml4ZWQ6IGZhbHNlIH07XG4gIH1cbn1cblxuLyoqXG4gKiBEYW5nZXJvdXMgb3BlcmF0aW9uIGVycm9yIC0gb3BlcmF0aW9uIGNvdWxkIGhhcm0gdGhlIHN5c3RlbVxuICovXG5leHBvcnQgY2xhc3MgRGFuZ2Vyb3VzT3BlcmF0aW9uRXJyb3IgZXh0ZW5kcyBTdHJ1Y3R1cmVkRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBvcGVyYXRpb246IHN0cmluZyxcbiAgICByZWFzb246IHN0cmluZyxcbiAgICBzYWZlQWx0ZXJuYXRpdmU/OiBzdHJpbmdcbiAgKSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IEVycm9yU3VnZ2VzdGlvbltdID0gW107XG5cbiAgICBpZiAoc2FmZUFsdGVybmF0aXZlKSB7XG4gICAgICBzdWdnZXN0aW9ucy5wdXNoKHtcbiAgICAgICAgYWN0aW9uOiBgVXNlIHNhZmVyIGFsdGVybmF0aXZlOiAke3NhZmVBbHRlcm5hdGl2ZX1gLFxuICAgICAgICBleGFtcGxlOiBzYWZlQWx0ZXJuYXRpdmUsXG4gICAgICAgIGF1dG9GaXhhYmxlOiB0cnVlLFxuICAgICAgICBhdXRvRml4OiAoKSA9PiBzYWZlQWx0ZXJuYXRpdmUsXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICAgIGFjdGlvbjogJ1JldmlldyBvcGVyYXRpb24gZm9yIHNhZmV0eSBiZWZvcmUgcmV0cnlpbmcnLFxuICAgICAgICBhdXRvRml4YWJsZTogZmFsc2UsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICBzdXBlcih7XG4gICAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5DUklUSUNBTCxcbiAgICAgIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5LkRBTkdFUk9VUyxcbiAgICAgIG1lc3NhZ2U6IGBEYW5nZXJvdXMgb3BlcmF0aW9uIGJsb2NrZWQ6ICR7b3BlcmF0aW9ufS4gUmVhc29uOiAke3JlYXNvbn1gLFxuICAgICAgb3JpZ2luYWxJbnB1dDogb3BlcmF0aW9uLFxuICAgICAgc3VnZ2VzdGlvbnMsXG4gICAgICByZWNvdmVyYWJsZTogc2FmZUFsdGVybmF0aXZlICE9PSB1bmRlZmluZWQsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIEJsb2NrZWQgb3BlcmF0aW9uIGVycm9yIC0gZXhwbGljaXRseSBmb3JiaWRkZW4gYnkgcG9saWN5XG4gKi9cbmV4cG9ydCBjbGFzcyBCbG9ja2VkT3BlcmF0aW9uRXJyb3IgZXh0ZW5kcyBTdHJ1Y3R1cmVkRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICBvcGVyYXRpb246IHN0cmluZyxcbiAgICBwb2xpY3k6IHN0cmluZyxcbiAgICBhbGxvd2VkQWx0ZXJuYXRpdmVzPzogc3RyaW5nW11cbiAgKSB7XG4gICAgY29uc3Qgc3VnZ2VzdGlvbnM6IEVycm9yU3VnZ2VzdGlvbltdID0gW107XG5cbiAgICBpZiAoYWxsb3dlZEFsdGVybmF0aXZlcyAmJiBhbGxvd2VkQWx0ZXJuYXRpdmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgYWx0IG9mIGFsbG93ZWRBbHRlcm5hdGl2ZXMpIHtcbiAgICAgICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICAgICAgYWN0aW9uOiBgVHJ5IGFsbG93ZWQgYWx0ZXJuYXRpdmU6ICR7YWx0fWAsXG4gICAgICAgICAgZXhhbXBsZTogYWx0LFxuICAgICAgICAgIGF1dG9GaXhhYmxlOiB0cnVlLFxuICAgICAgICAgIGF1dG9GaXg6ICgpID0+IGFsdCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICBhY3Rpb246ICdUaGlzIG9wZXJhdGlvbiBpcyBub3QgcGVybWl0dGVkIGJ5IHBvbGljeScsXG4gICAgICAgIGF1dG9GaXhhYmxlOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHN1cGVyKHtcbiAgICAgIHNldmVyaXR5OiBFcnJvclNldmVyaXR5LkVSUk9SLFxuICAgICAgY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkuQkxPQ0tFRCxcbiAgICAgIG1lc3NhZ2U6IGBPcGVyYXRpb24gYmxvY2tlZCBieSBwb2xpY3kgXCIke3BvbGljeX1cIjogJHtvcGVyYXRpb259YCxcbiAgICAgIG9yaWdpbmFsSW5wdXQ6IG9wZXJhdGlvbixcbiAgICAgIHN1Z2dlc3Rpb25zLFxuICAgICAgcmVjb3ZlcmFibGU6IGFsbG93ZWRBbHRlcm5hdGl2ZXMgIT09IHVuZGVmaW5lZCAmJiBhbGxvd2VkQWx0ZXJuYXRpdmVzLmxlbmd0aCA+IDAsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1ldGFkYXRhOiB7IHBvbGljeSwgYWxsb3dlZEFsdGVybmF0aXZlcyB9LFxuICAgIH0pO1xuICB9XG59XG5cbi8qKlxuICogQ29udGV4dCBvdmVyZmxvdyBlcnJvciAtIHRva2VuL2NoYXJhY3RlciBsaW1pdHMgZXhjZWVkZWRcbiAqL1xuZXhwb3J0IGNsYXNzIENvbnRleHRPdmVyZmxvd0Vycm9yIGV4dGVuZHMgU3RydWN0dXJlZEVycm9yIHtcbiAgY29uc3RydWN0b3IoXG4gICAgYWN0dWFsOiBudW1iZXIsXG4gICAgbGltaXQ6IG51bWJlcixcbiAgICB1bml0OiAndG9rZW5zJyB8ICdjaGFycycgfCAnbGluZXMnID0gJ3Rva2VucycsXG4gICAgdHJ1bmNhdGFibGU6IGJvb2xlYW4gPSB0cnVlXG4gICkge1xuICAgIGNvbnN0IHBlcmNlbnRhZ2UgPSBsaW1pdCA+IDAgPyBNYXRoLnJvdW5kKChhY3R1YWwgLyBsaW1pdCkgKiAxMDApIDogMDtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogRXJyb3JTdWdnZXN0aW9uW10gPSBbXTtcblxuICAgIGlmICh0cnVuY2F0YWJsZSkge1xuICAgICAgc3VnZ2VzdGlvbnMucHVzaCh7XG4gICAgICAgIGFjdGlvbjogYEF1dG8tdHJ1bmNhdGUgdG8gJHtsaW1pdH0gJHt1bml0fWAsXG4gICAgICAgIGV4YW1wbGU6IGBDb250ZW50IHdpbGwgYmUgcmVkdWNlZCBmcm9tICR7YWN0dWFsfSB0byAke2xpbWl0fSAke3VuaXR9YCxcbiAgICAgICAgYXV0b0ZpeGFibGU6IHRydWUsXG4gICAgICAgIGF1dG9GaXg6ICgpID0+ICh7IHRydW5jYXRlOiB0cnVlLCBsaW1pdCB9KSxcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgYWN0aW9uOiBgUmVkdWNlIHNjb3BlIHRvIHVzZSBsZXNzIHRoYW4gJHtsaW1pdH0gJHt1bml0fWAsXG4gICAgICBhdXRvRml4YWJsZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBzdXBlcih7XG4gICAgICBzZXZlcml0eTogRXJyb3JTZXZlcml0eS5DUklUSUNBTCxcbiAgICAgIGNhdGVnb3J5OiBFcnJvckNhdGVnb3J5LkNPTlRFWFRfT1ZFUkZMT1csXG4gICAgICBtZXNzYWdlOiBgQ29udGV4dCBvdmVyZmxvdzogJHthY3R1YWx9ICR7dW5pdH0gZXhjZWVkcyBsaW1pdCBvZiAke2xpbWl0fSAke3VuaXR9ICgke3BlcmNlbnRhZ2V9JSlgLFxuICAgICAgc3VnZ2VzdGlvbnMsXG4gICAgICByZWNvdmVyYWJsZTogdHJ1bmNhdGFibGUsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1ldGFkYXRhOiB7IGFjdHVhbCwgbGltaXQsIHVuaXQsIHBlcmNlbnRhZ2UgfSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFJlc291cmNlIGVycm9yIC0gbGltaXRzIGV4Y2VlZGVkXG4gKi9cbmV4cG9ydCBjbGFzcyBSZXNvdXJjZUxpbWl0RXJyb3IgZXh0ZW5kcyBTdHJ1Y3R1cmVkRXJyb3Ige1xuICBjb25zdHJ1Y3RvcihcbiAgICByZXNvdXJjZTogc3RyaW5nLFxuICAgIGFjdHVhbDogbnVtYmVyLFxuICAgIGxpbWl0OiBudW1iZXIsXG4gICAgcmVkdWNpYmxlOiBib29sZWFuID0gdHJ1ZVxuICApIHtcbiAgICBjb25zdCBzdWdnZXN0aW9uczogRXJyb3JTdWdnZXN0aW9uW10gPSBbXTtcblxuICAgIGlmIChyZWR1Y2libGUpIHtcbiAgICAgIGNvbnN0IHNhZmVWYWx1ZSA9IE1hdGguZmxvb3IobGltaXQgKiAwLjgpOyAvLyA4MCUgb2YgbGltaXRcbiAgICAgIHN1Z2dlc3Rpb25zLnB1c2goe1xuICAgICAgICBhY3Rpb246IGBSZWR1Y2UgJHtyZXNvdXJjZX0gdG8gJHtzYWZlVmFsdWV9ICg4MCUgb2YgbGltaXQpYCxcbiAgICAgICAgZXhhbXBsZTogYFNldCAke3Jlc291cmNlfT0ke3NhZmVWYWx1ZX1gLFxuICAgICAgICBhdXRvRml4YWJsZTogdHJ1ZSxcbiAgICAgICAgYXV0b0ZpeDogKCkgPT4gc2FmZVZhbHVlLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgc3VwZXIoe1xuICAgICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuRVJST1IsXG4gICAgICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeS5SRVNPVVJDRSxcbiAgICAgIG1lc3NhZ2U6IGBSZXNvdXJjZSBsaW1pdCBleGNlZWRlZDogJHtyZXNvdXJjZX0gaXMgJHthY3R1YWx9LCBtYXhpbXVtIGlzICR7bGltaXR9YCxcbiAgICAgIHN1Z2dlc3Rpb25zLFxuICAgICAgcmVjb3ZlcmFibGU6IHJlZHVjaWJsZSxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgbWV0YWRhdGE6IHsgcmVzb3VyY2UsIGFjdHVhbCwgbGltaXQgfSxcbiAgICB9KTtcbiAgfVxufVxuXG4vKipcbiAqIFZhbGlkYXRpb24gZXJyb3IgLSBpbnB1dC9zY2hlbWEgdmFsaWRhdGlvbiBmYWlsZWRcbiAqL1xuZXhwb3J0IGNsYXNzIFZhbGlkYXRpb25FcnJvciBleHRlbmRzIFN0cnVjdHVyZWRFcnJvciB7XG4gIGNvbnN0cnVjdG9yKGZpZWxkOiBzdHJpbmcsIGNvZGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nKSB7XG4gICAgc3VwZXIoe1xuICAgICAgc2V2ZXJpdHk6IEVycm9yU2V2ZXJpdHkuRVJST1IsXG4gICAgICBjYXRlZ29yeTogRXJyb3JDYXRlZ29yeS5WQUxJREFUSU9OLFxuICAgICAgbWVzc2FnZTogYFZhbGlkYXRpb24gZmFpbGVkIGZvciAke2ZpZWxkfTogJHtjb2RlfS4gJHttZXNzYWdlfWAsXG4gICAgICBvcmlnaW5hbElucHV0OiBjb2RlLFxuICAgICAgc3VnZ2VzdGlvbnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGFjdGlvbjogYEZpeCB0aGUgZmllbGQgXCIke2ZpZWxkfVwiIHRvIHNhdGlzZnkgdmFsaWRhdGlvbmAsXG4gICAgICAgICAgZXhhbXBsZTogYCR7ZmllbGR9OiA8cHJvdmlkZSB2YWxpZCB2YWx1ZT5gLFxuICAgICAgICAgIGF1dG9GaXhhYmxlOiBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICByZWNvdmVyYWJsZTogZmFsc2UsXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgIG1ldGFkYXRhOiB7IGZpZWxkLCBjb2RlIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuLyoqXG4gKiBGb3JtYXQgYW55IGVycm9yIGFzIGEgc3RydWN0dXJlZCBlcnJvclxuICovXG5leHBvcnQgZnVuY3Rpb24gdG9TdHJ1Y3R1cmVkRXJyb3IoZXJyb3I6IHVua25vd24pOiBTdHJ1Y3R1cmVkRXJyb3Ige1xuICAvLyBBbHJlYWR5IHN0cnVjdHVyZWRcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgU3RydWN0dXJlZEVycm9yKSB7XG4gICAgcmV0dXJuIGVycm9yO1xuICB9XG5cbiAgLy8gQ29udmVydCBzdGFuZGFyZCBlcnJvcnNcbiAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcblxuICAvLyBEZXRlY3QgZXJyb3IgY2F0ZWdvcnkgZnJvbSBtZXNzYWdlXG4gIGNvbnN0IGNhdGVnb3J5ID0gZGV0ZWN0RXJyb3JDYXRlZ29yeShtZXNzYWdlKTtcbiAgY29uc3Qgc2V2ZXJpdHkgPSBkZXRlY3RFcnJvclNldmVyaXR5KGNhdGVnb3J5KTtcblxuICBjbGFzcyBHZW5lcmljU3RydWN0dXJlZEVycm9yIGV4dGVuZHMgU3RydWN0dXJlZEVycm9yIHt9XG5cbiAgcmV0dXJuIG5ldyBHZW5lcmljU3RydWN0dXJlZEVycm9yKHtcbiAgICBzZXZlcml0eSxcbiAgICBjYXRlZ29yeSxcbiAgICBtZXNzYWdlLFxuICAgIHN1Z2dlc3Rpb25zOiBbXSxcbiAgICByZWNvdmVyYWJsZTogZmFsc2UsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gIH0pO1xufVxuXG4vKipcbiAqIERldGVjdCBlcnJvciBjYXRlZ29yeSBmcm9tIGVycm9yIG1lc3NhZ2VcbiAqL1xuZnVuY3Rpb24gZGV0ZWN0RXJyb3JDYXRlZ29yeShtZXNzYWdlOiBzdHJpbmcpOiBFcnJvckNhdGVnb3J5IHtcbiAgY29uc3QgbG93ZXIgPSBtZXNzYWdlLnRvTG93ZXJDYXNlKCk7XG5cbiAgaWYgKGxvd2VyLmluY2x1ZGVzKCdkYW5nZXJvdXMnKSB8fCBsb3dlci5pbmNsdWRlcygndW5zYWZlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2hhcm1mdWwnKSkge1xuICAgIHJldHVybiBFcnJvckNhdGVnb3J5LkRBTkdFUk9VUztcbiAgfVxuICBpZiAobG93ZXIuaW5jbHVkZXMoJ2Jsb2NrZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnZm9yYmlkZGVuJykgfHwgbG93ZXIuaW5jbHVkZXMoJ25vdCBhbGxvd2VkJykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5CTE9DS0VEO1xuICB9XG4gIGlmIChsb3dlci5pbmNsdWRlcygnaW52YWxpZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdtYWxmb3JtZWQnKSkge1xuICAgIHJldHVybiBFcnJvckNhdGVnb3J5LklOVkFMSUQ7XG4gIH1cbiAgaWYgKGxvd2VyLmluY2x1ZGVzKCdwZXJtaXNzaW9uJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3VuYXV0aG9yaXplZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdhY2Nlc3MgZGVuaWVkJykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5QRVJNSVNTSU9OO1xuICB9XG4gIGlmIChsb3dlci5pbmNsdWRlcygnbGltaXQnKSB8fCBsb3dlci5pbmNsdWRlcygnZXhjZWVkZWQnKSB8fCBsb3dlci5pbmNsdWRlcygndG9vIGxhcmdlJykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5SRVNPVVJDRTtcbiAgfVxuICBpZiAobG93ZXIuaW5jbHVkZXMoJ3RpbWVvdXQnKSB8fCBsb3dlci5pbmNsdWRlcygndGltZWQgb3V0JykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5USU1FT1VUO1xuICB9XG4gIGlmIChsb3dlci5pbmNsdWRlcygnbmV0d29yaycpIHx8IGxvd2VyLmluY2x1ZGVzKCdjb25uZWN0aW9uJykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5ORVRXT1JLO1xuICB9XG4gIGlmIChsb3dlci5pbmNsdWRlcygndmFsaWRhdGlvbicpIHx8IGxvd2VyLmluY2x1ZGVzKCdzY2hlbWEnKSkge1xuICAgIHJldHVybiBFcnJvckNhdGVnb3J5LlZBTElEQVRJT047XG4gIH1cbiAgaWYgKGxvd2VyLmluY2x1ZGVzKCdjb250ZXh0JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3Rva2VuJykgfHwgbG93ZXIuaW5jbHVkZXMoJ292ZXJmbG93JykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5DT05URVhUX09WRVJGTE9XO1xuICB9XG4gIGlmIChsb3dlci5pbmNsdWRlcygnbm90IGZvdW5kJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2RvZXMgbm90IGV4aXN0JykpIHtcbiAgICByZXR1cm4gRXJyb3JDYXRlZ29yeS5OT1RfRk9VTkQ7XG4gIH1cblxuICByZXR1cm4gRXJyb3JDYXRlZ29yeS5VTktOT1dOO1xufVxuXG4vKipcbiAqIERldGVybWluZSBzZXZlcml0eSBmcm9tIGNhdGVnb3J5XG4gKi9cbmZ1bmN0aW9uIGRldGVjdEVycm9yU2V2ZXJpdHkoY2F0ZWdvcnk6IEVycm9yQ2F0ZWdvcnkpOiBFcnJvclNldmVyaXR5IHtcbiAgc3dpdGNoIChjYXRlZ29yeSkge1xuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5EQU5HRVJPVVM6XG4gICAgY2FzZSBFcnJvckNhdGVnb3J5LkNPTlRFWFRfT1ZFUkZMT1c6XG4gICAgICByZXR1cm4gRXJyb3JTZXZlcml0eS5DUklUSUNBTDtcblxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5CTE9DS0VEOlxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5QRVJNSVNTSU9OOlxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5WQUxJREFUSU9OOlxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5JTlZBTElEOlxuICAgIGNhc2UgRXJyb3JDYXRlZ29yeS5SRVNPVVJDRTpcbiAgICAgIHJldHVybiBFcnJvclNldmVyaXR5LkVSUk9SO1xuXG4gICAgY2FzZSBFcnJvckNhdGVnb3J5LlRJTUVPVVQ6XG4gICAgY2FzZSBFcnJvckNhdGVnb3J5Lk5FVFdPUks6XG4gICAgY2FzZSBFcnJvckNhdGVnb3J5Lk5PVF9GT1VORDpcbiAgICAgIHJldHVybiBFcnJvclNldmVyaXR5LldBUk5JTkc7XG5cbiAgICBkZWZhdWx0OlxuICAgICAgcmV0dXJuIEVycm9yU2V2ZXJpdHkuRVJST1I7XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQVJBLElBVVlBLGFBQWEsR0FBQUMsT0FBQSxDQUFBRCxhQUFBLDBCQUFiQSxhQUFhO0VBQWJBLGFBQWE7RUFDQztFQURkQSxhQUFhO0VBRUM7RUFGZEEsYUFBYTtFQUdDO0VBSGRBLGFBQWEsbUJBSUM7RUFBQSxPQUpkQSxhQUFhO0FBQUE7QUFBQSxJQU9iRSxhQUFhLEdBQUFELE9BQUEsQ0FBQUMsYUFBQSwwQkFBYkEsYUFBYTtFQUFiQSxhQUFhO0VBQ087RUFEcEJBLGFBQWE7RUFFTztFQUZwQkEsYUFBYTtFQUdPO0VBSHBCQSxhQUFhO0VBSU87RUFKcEJBLGFBQWE7RUFLTztFQUxwQkEsYUFBYTtFQU1PO0VBTnBCQSxhQUFhO0VBT087RUFQcEJBLGFBQWE7RUFRTztFQVJwQkEsYUFBYTtFQVNnQjtFQVQ3QkEsYUFBYTtFQVVPO0VBVnBCQSxhQUFhLHlCQVdPO0VBQUEsT0FYcEJBLGFBQWE7QUFBQSxPQWN6QjtBQWNBO0FBWUE7QUFDQTtBQUNBO0FBQ08sTUFBZUMsZUFBZSxTQUFTQyxLQUFLLENBQUM7RUFDbENDLFFBQVE7RUFDUkMsUUFBUTtFQUNSQyxXQUFXO0VBQ1hDLGFBQWE7RUFDYkMsUUFBUTtFQUNSQyxTQUFTO0VBQ1RDLFdBQVc7RUFFM0JDLFdBQVdBLENBQUNDLE9BQStCLEVBQUU7SUFDM0MsS0FBSyxDQUFDQSxPQUFPLENBQUNDLE9BQU8sQ0FBQztJQUN0QixJQUFJLENB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