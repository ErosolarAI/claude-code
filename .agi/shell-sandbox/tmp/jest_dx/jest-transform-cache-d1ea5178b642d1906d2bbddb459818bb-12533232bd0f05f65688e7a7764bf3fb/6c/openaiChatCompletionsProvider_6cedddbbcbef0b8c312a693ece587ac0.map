{"version":3,"names":["cov_ot0lftybl","actualCoverage","OpenAI","sanitizeErrorMessage","safeErrorMessage","logDebug","securityLogger","globalRateLimiter","safeJSONParse","json","options","f","maxDepth","s","b","maxProperties","Error","includes","replace","parsed","JSON","parse","key","value","depth","__depth","propertyCount","__propertyCount","validateOpenAIBaseURL","url","trim","startsWith","parsedUrl","URL","error","allowedDomains","hostname","isAllowed","some","domain","endsWith","console","warn","protocol","REQUEST_CHAR_LIMIT","RECOVERABLE_ERROR_PATTERNS","ProviderStreamError","isRetryable","originalError","providerId","constructor","message","name","stack","validateGenericApiKey","apiKey","trimmed","length","redactedKey","substring","validateAndProtectApiKey","validation","validateOpenAIKeyFormat","isValid","reason","keyType","isPotentiallyCompromisedKey","validChars","test","compromisedPrefixes","prefix","sequentialPattern","match","exec","sequence","isSequentialDigits","str","ascending","i","parseInt","descending","isRecoverableError","toLowerCase","errorName","errorCode","code","allText","pattern","OpenAIChatCompletionsProvider","id","model","client","maxRetries","temperature","maxTokens","requestCount","lastRequestTime","Date","now","isCustomProvider","baseURL","validatedApiKey","logSecurityEvent","type","command","success","timestamp","details","hasBaseURL","clientConfig","timeout","String","undefined","Math","max","sleep","ms","Promise","resolve","setTimeout","getBackoffDelay","attempt","baseDelay","maxDelay","delay","min","pow","random","executeWithRetry","operation","operationName","lastError","round","generate","messages","tools","boundedMessages","enforceRequestSizeLimit","request","mapMessages","map","mapTool","tool_choice","parallel_tool_calls","stream","max_tokens","completion","result","chat","completions","create","assertHasChoices","apiError","status","choice","choices","usage","mapUsage","content","toolCalls","tool_calls","mapToolCall","parseError","extractMessageContent","generateStream","response","Symbol","asyncIterator","pendingToolCalls","Map","chunk","delta","reasoning","extractTextContent","toolCallDelta","idx","index","has","set","function","arguments","pending","get","finish_reason","toolCall","recovered","tryRecoverMalformedJson","inputTokens","prompt_tokens","outputTokens","completion_tokens","totalTokens","total_tokens","cachedModelInfo","getModelInfo","modelInfo","models","retrieve","rawInfo","contextWindow","maxOutputTokens","inputTokenLimit","outputTokenLimit","isDeepSeekModel","normalized","isGrokModel","isLocalReasoningModel","supportsReasoningContent","sanitizeMessageSequence","sanitized","pendingToolCallIds","Set","role","tc","add","push","toolCallId","delete","slice","clear","sanitizedMessages","params","includeReasoningContent","assistantMessage","call","stringify","reasoning_content","tool_call_id","definition","parameters","properties","description","strict","truncated","size","estimateMessageChars","removeIdx","findIndex","msg","splice","unshift","total","Array","isArray","part","text","refusal","isFunctionToolCall","isCustomToolCall","rawArgs","funcName","custom","input","sanitizedArgs","raw","attempts","pairs","matchAll","strVal","numVal","boolVal","parseFloat","Object","keys","nestedContent","join"],"sources":["openaiChatCompletionsProvider.ts"],"sourcesContent":["import OpenAI from 'openai';\nimport type {\n  ChatCompletion,\n  ChatCompletionMessageParam,\n  ChatCompletionMessageToolCall,\n  ChatCompletionMessageFunctionToolCall,\n  ChatCompletionMessageCustomToolCall,\n  ChatCompletionTool,\n} from 'openai/resources/chat/completions.js';\nimport type { FunctionDefinition } from 'openai/resources/shared.js';\nimport type {\n  ConversationMessage,\n  LLMProvider,\n  ProviderId,\n  ProviderModelInfo,\n  ProviderResponse,\n  ProviderToolDefinition,\n  ToolCallRequest,\n  ProviderUsage,\n  StreamChunk,\n} from '../core/types.js';\nimport { sanitizeErrorMessage, safeErrorMessage } from '../core/secretStore.js';\nimport { logDebug } from '../utils/debugLogger.js';\nimport { securityValidator, securityLogger, globalRateLimiter } from '../utils/securityUtils.js';\n\n/**\n * Security utility for safe JSON parsing with protection against prototype pollution\n */\nexport function safeJSONParse<T = unknown>(\n  json: string,\n  options?: { maxDepth?: number; maxProperties?: number }\n): T {\n  const maxDepth = options?.maxDepth ?? 20;\n  const maxProperties = options?.maxProperties ?? 1000;\n  \n  if (!json || typeof json !== 'string') {\n    throw new Error('JSON must be a non-empty string');\n  }\n  \n  // Check for prototype pollution patterns\n  if (json.includes('__proto__') || json.includes('constructor') || json.includes('prototype')) {\n    logDebug('[SECURITY] Prototype pollution attempt detected in JSON');\n    // Clean the JSON by removing dangerous patterns\n    json = json.replace(/[\"']?__proto__[\"']?\\s*:/g, '\"__safe_proto__\":')\n               .replace(/[\"']?constructor[\"']?\\s*:/g, '\"__safe_constructor__\":')\n               .replace(/[\"']?prototype[\"']?\\s*:/g, '\"__safe_prototype__\":');\n  }\n  \n  // Parse with depth and property limits\n  const parsed = JSON.parse(json, (key, value) => {\n    // Depth tracking - prevent circular references and deep nesting\n    const depth = (this as any)?.__depth ?? 0;\n    if (depth > maxDepth) {\n      throw new Error(`JSON depth ${depth} exceeds maximum allowed depth ${maxDepth}`);\n    }\n    \n    // Property count tracking\n    const propertyCount = (this as any)?.__propertyCount ?? 0;\n    if (propertyCount > maxProperties) {\n      throw new Error(`JSON property count ${propertyCount} exceeds maximum ${maxProperties}`);\n    }\n    \n    return value;\n  });\n  \n  return parsed;\n}\n\n/**\n * Validate and sanitize URL for OpenAI baseURL\n */\nfunction validateOpenAIBaseURL(url: string): string {\n  if (!url || typeof url !== 'string') {\n    throw new Error('Base URL must be a non-empty string');\n  }\n  \n  url = url.trim();\n  \n  // Must start with http:// or https://\n  if (!url.startsWith('http://') && !url.startsWith('https://')) {\n    throw new Error(`Invalid baseURL format: ${url}. Must start with http:// or https://`);\n  }\n  \n  // Parse URL to validate format\n  let parsedUrl: URL;\n  try {\n    parsedUrl = new URL(url);\n  } catch (error) {\n    throw new Error(`Invalid URL format: ${url}`);\n  }\n  \n  // Security: Restrict to OpenAI domains and known safe proxies\n  const allowedDomains = [\n    'api.openai.com',\n    'api.deepseek.com',\n    'openrouter.ai',\n    'api.groq.com',\n    // Add other allowed domains as needed\n  ];\n  \n  const hostname = parsedUrl.hostname;\n  const isAllowed = allowedDomains.some(domain => hostname === domain || hostname.endsWith(`.${domain}`));\n  \n  if (!isAllowed) {\n    console.warn(`SECURITY: Using non-standard OpenAI baseURL: ${hostname}. This could be a security risk.`);\n    // Allow but log warning for custom deployments, Azure, etc.\n  }\n  \n  // Enforce HTTPS for production-like domains\n  if (hostname.includes('openai.com') && parsedUrl.protocol !== 'https:') {\n    throw new Error(`OpenAI API requires HTTPS for domain ${hostname}`);\n  }\n  \n  return url;\n}\n\nconst REQUEST_CHAR_LIMIT = 800_000; // Hard cap to avoid provider 413 errors\n\n// ============================================================================\n// Stream/Fetch Error Types for Detection\n// ============================================================================\n\n/**\n * Error types that indicate stream or network failures that should be retried\n */\nconst RECOVERABLE_ERROR_PATTERNS = [\n  'premature close',\n  'premature end',\n  'unexpected end',\n  'aborted',\n  'fetcherror',\n  'invalid response body',\n  'gunzip',\n  'decompress',\n  'econnreset',\n  'econnrefused',\n  'epipe',\n  'socket hang up',\n  'network',\n  'timeout',\n] as const;\n\n/**\n * Custom error class for provider-specific failures\n */\nexport class ProviderStreamError extends Error {\n  readonly isRetryable: boolean;\n  readonly originalError?: Error;\n  readonly providerId: string;\n\n  constructor(message: string, providerId: string, originalError?: Error, isRetryable = true) {\n    // SECURITY: Sanitize the error message to prevent token leakage\n    super(sanitizeErrorMessage(message));\n    this.name = 'ProviderStreamError';\n    this.providerId = providerId;\n    this.originalError = originalError;\n    this.isRetryable = isRetryable;\n\n    // SECURITY: Sanitize stack trace to prevent token leakage\n    if (originalError?.stack) {\n      this.stack = `${this.stack}\\nCaused by: ${sanitizeErrorMessage(originalError.stack)}`;\n    }\n  }\n}\n\n/**\n * Basic API key validation for non-OpenAI providers (DeepSeek, xAI, etc.)\n * Only checks that a key exists and has reasonable format - no OpenAI-specific validation\n */\nfunction validateGenericApiKey(apiKey: string): string {\n  if (!apiKey || typeof apiKey !== 'string') {\n    throw new Error('API key is required and must be a string');\n  }\n\n  const trimmed = apiKey.trim();\n  if (trimmed.length < 10) {\n    throw new Error('API key is too short');\n  }\n\n  // Just log that we're using a custom provider key\n  const redactedKey = trimmed.length > 8 ? `${trimmed.substring(0, 4)}...${trimmed.substring(trimmed.length - 4)}` : '[REDACTED]';\n  logDebug(`[SECURITY] Using custom provider API key (redacted: ${redactedKey})`);\n\n  return trimmed;\n}\n\n/**\n * Security audit: OpenAI API key validation and protection\n * Enhanced with comprehensive validation and security controls\n */\nfunction validateAndProtectApiKey(apiKey: string): string {\n  if (!apiKey || typeof apiKey !== 'string') {\n    throw new Error('OpenAI API key is required and must be a string');\n  }\n  \n  // Remove whitespace\n  apiKey = apiKey.trim();\n  \n  // Comprehensive format validation\n  const validation = validateOpenAIKeyFormat(apiKey);\n  if (!validation.isValid) {\n    throw new Error(`Invalid OpenAI API key: ${validation.reason}`);\n  }\n  \n  // Security logging (redacted)\n  const redactedKey = apiKey.length > 8 ? `${apiKey.substring(0, 8)}...${apiKey.substring(apiKey.length - 4)}` : '[REDACTED]';\n  logDebug(`[SECURITY] Using OpenAI API key (type: ${validation.keyType}, redacted: ${redactedKey})`);\n  \n  // Check for known revoked/compromised key patterns\n  if (isPotentiallyCompromisedKey(apiKey)) {\n    console.warn('SECURITY WARNING: API key matches patterns associated with compromised keys. Rotate immediately.');\n  }\n  \n  return apiKey;\n}\n\n/**\n * Comprehensive OpenAI key format validation\n */\nfunction validateOpenAIKeyFormat(apiKey: string): {\n  isValid: boolean;\n  reason?: string;\n  keyType: 'standard' | 'project' | 'organization' | 'unknown';\n} {\n  // Length validation\n  if (apiKey.length < 40 || apiKey.length > 200) {\n    return { isValid: false, reason: `Invalid key length: ${apiKey.length} chars (expected 40-200)`, keyType: 'unknown' };\n  }\n  \n  // Character validation (alphanumeric, dashes, underscores only)\n  const validChars = /^[a-zA-Z0-9\\-_]+$/;\n  if (!validChars.test(apiKey)) {\n    return { isValid: false, reason: 'Key contains invalid characters', keyType: 'unknown' };\n  }\n  \n  // OpenAI key format patterns\n  if (apiKey.startsWith('sk-proj-')) {\n    // Project key format: sk-proj-xxxxxxxxxxxxxxxxxxxxxxxx\n    if (apiKey.length !== 51) {\n      return { isValid: false, reason: `Project key should be 51 chars, got ${apiKey.length}`, keyType: 'project' };\n    }\n    return { isValid: true, keyType: 'project' };\n  }\n  \n  if (apiKey.startsWith('sk-')) {\n    // Standard key format: sk-xxxxxxxxxxxxxxxxxxxxxxxx\n    if (apiKey.length !== 51) {\n      return { isValid: false, reason: `Standard key should be 51 chars, got ${apiKey.length}`, keyType: 'standard' };\n    }\n    return { isValid: true, keyType: 'standard' };\n  }\n  \n  if (apiKey.startsWith('org-')) {\n    // Organization key format: org-xxxxxxxxxxxxxxxxxxxxxxxx\n    if (apiKey.length < 40 || apiKey.length > 100) {\n      return { isValid: false, reason: `Organization key length ${apiKey.length} outside expected range`, keyType: 'organization' };\n    }\n    return { isValid: true, keyType: 'organization' };\n  }\n  \n  // Unknown format but might be valid (custom deployments, Azure, etc.)\n  console.warn(`Unrecognized OpenAI API key format: ${apiKey.substring(0, 12)}...`);\n  return { isValid: true, keyType: 'unknown' };\n}\n\n/**\n * Check for patterns associated with compromised keys\n * This checks for known patterns from public leaks and security advisories\n */\nfunction isPotentiallyCompromisedKey(apiKey: string): boolean {\n  // Check for patterns from known public leaks\n  // These are example patterns - in production, these should come from a threat intelligence feed\n  \n  // Example: Keys starting with certain compromised prefixes\n  const compromisedPrefixes = [\n    'sk-live-', // Example compromised pattern\n    'sk-test-', // Test keys that shouldn't be in production\n  ];\n  \n  for (const prefix of compromisedPrefixes) {\n    if (apiKey.startsWith(prefix)) {\n      return true;\n    }\n  }\n  \n  // Check for sequential or repeating patterns that might indicate generated/test keys\n  const sequentialPattern = /(\\d{3,})/;\n  const match = sequentialPattern.exec(apiKey);\n  if (match) {\n    const sequence = match[1];\n    // Check if digits are sequential (like 123, 456, etc.)\n    if (isSequentialDigits(sequence)) {\n      return true;\n    }\n  }\n  \n  return false;\n}\n\n/**\n * Check if a string of digits is sequential (ascending or descending)\n */\nfunction isSequentialDigits(str: string): boolean {\n  if (str.length < 3) return false;\n  \n  // Check ascending\n  let ascending = true;\n  for (let i = 1; i < str.length; i++) {\n    if (parseInt(str[i]) !== parseInt(str[i-1]) + 1) {\n      ascending = false;\n      break;\n    }\n  }\n  \n  if (ascending) return true;\n  \n  // Check descending\n  let descending = true;\n  for (let i = 1; i < str.length; i++) {\n    if (parseInt(str[i]) !== parseInt(str[i-1]) - 1) {\n      descending = false;\n      break;\n    }\n  }\n  \n  return descending;\n}\n\n/**\n * Check if an error is recoverable (should be retried)\n */\nfunction isRecoverableError(error: unknown): boolean {\n  if (!(error instanceof Error)) return false;\n\n  const message = error.message.toLowerCase();\n  const errorName = error.name?.toLowerCase() ?? '';\n  const errorCode = (error as { code?: string }).code?.toLowerCase() ?? '';\n\n  // Check all sources for recoverable patterns\n  const allText = `${message} ${errorName} ${errorCode}`;\n\n  return RECOVERABLE_ERROR_PATTERNS.some(pattern => allText.includes(pattern));\n}\n\n// ============================================================================\n// Provider Configuration\n// ============================================================================\n\ninterface OpenAIChatCompletionsOptions {\n  apiKey: string;\n  model: string;\n  providerId?: ProviderId;\n  baseURL?: string;\n  /** Request timeout in milliseconds (default: 120000) */\n  timeout?: number;\n  /** Maximum retries for transient errors (default: 3) */\n  maxRetries?: number;\n  /** Optional temperature override */\n  temperature?: number;\n  /** Maximum completion tokens to request (default: 4096 to avoid runaway outputs) */\n  maxTokens?: number;\n}\n\ntype ChatCompletionsResult = Awaited<ReturnType<OpenAI['chat']['completions']['create']>>;\n\nexport class OpenAIChatCompletionsProvider implements LLMProvider {\n  readonly id: ProviderId;\n  readonly model: string;\n  private readonly client: OpenAI;\n  private readonly maxRetries: number;\n  private readonly temperature?: number;\n  private readonly maxTokens: number;\n  private readonly requestCount: number = 0;\n  private readonly lastRequestTime: number = Date.now();\n  \n  constructor(options: OpenAIChatCompletionsOptions) {\n    // SECURITY: Validate API key - skip OpenAI-specific format checks for custom providers\n    const isCustomProvider = !!options.baseURL;\n    const validatedApiKey = isCustomProvider\n      ? validateGenericApiKey(options.apiKey)\n      : validateAndProtectApiKey(options.apiKey);\n    \n    // SECURITY: Rate limiting check\n    if (!globalRateLimiter.isAllowed('openai-provider')) {\n      throw new Error('Rate limit exceeded for OpenAI provider. Please wait before making more requests.');\n    }\n    \n    // SECURITY: Log security event\n    securityLogger.logSecurityEvent({\n      type: 'openai_provider_initialized',\n      command: 'constructor',\n      success: true,\n      timestamp: new Date(),\n      details: {\n        model: options.model,\n        providerId: options.providerId,\n        hasBaseURL: !!options.baseURL\n      }\n    });\n    \n    const clientConfig: ConstructorParameters<typeof OpenAI>[0] = {\n      apiKey: validatedApiKey,\n      timeout: options.timeout ?? 120000,\n      maxRetries: 0, // We handle retries ourselves for better control\n    };\n\n    if (options.baseURL) {\n      // SECURITY: Enhanced URL validation with domain restrictions\n      try {\n        clientConfig.baseURL = validateOpenAIBaseURL(options.baseURL);\n        logDebug(`[SECURITY] Using validated baseURL: ${clientConfig.baseURL}`);\n      } catch (error) {\n        securityLogger.logSecurityEvent({\n          type: 'invalid_baseurl',\n          command: 'constructor',\n          success: false,\n          timestamp: new Date(),\n          details: { error: error instanceof Error ? error.message : String(error) }\n        });\n        throw new Error(`Invalid baseURL: ${error instanceof Error ? error.message : String(error)}`);\n      }\n    }\n\n    this.client = new OpenAI(clientConfig);\n    this.id = options.providerId ?? 'openai';\n    this.model = options.model;\n    this.maxRetries = options.maxRetries ?? 3;\n    this.temperature = typeof options.temperature === 'number' ? options.temperature : undefined;\n    this.maxTokens = Math.max(1, options.maxTokens ?? 4096);\n  }\n\n  /**\n   * Sleep for a given number of milliseconds\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Calculate exponential backoff delay\n   */\n  private getBackoffDelay(attempt: number, baseDelay = 1000, maxDelay = 30000): number {\n    const delay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);\n    // Add jitter to prevent thundering herd\n    return delay + Math.random() * delay * 0.1;\n  }\n\n  /**\n   * Execute request with retry logic for transient errors\n   */\n  private async executeWithRetry<T>(\n    operation: () => Promise<T>,\n    operationName: string\n  ): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let attempt = 0; attempt <= this.maxRetries; attempt++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error instanceof Error ? error : new Error(String(error));\n\n        // Check if this is a recoverable error\n        if (isRecoverableError(error) && attempt < this.maxRetries) {\n          const delay = this.getBackoffDelay(attempt);\n          // SECURITY: Sanitize error message to prevent token leakage\n          logDebug(\n            `[${this.id}] ${operationName} failed (attempt ${attempt + 1}/${this.maxRetries + 1}): ` +\n            `${safeErrorMessage(lastError)}. Retrying in ${Math.round(delay)}ms...`\n          );\n          await this.sleep(delay);\n          continue;\n        }\n\n        // Non-recoverable error or out of retries\n        throw new ProviderStreamError(\n          `${operationName} failed after ${attempt + 1} attempts: ${lastError.message}`,\n          this.id,\n          lastError,\n          isRecoverableError(error)\n        );\n      }\n    }\n\n    // Should not reach here, but TypeScript needs this\n    throw lastError;\n  }\n\n  async generate(messages: ConversationMessage[], tools: ProviderToolDefinition[]): Promise<ProviderResponse> {\n    const { messages: boundedMessages } = enforceRequestSizeLimit(messages);\n\n    return this.executeWithRetry(async () => {\n      const request: Parameters<OpenAI['chat']['completions']['create']>[0] = {\n        model: this.model,\n        messages: mapMessages(boundedMessages, this.model),\n        tools: tools.length ? tools.map(mapTool) : undefined,\n        // Force tool usage when tools are available - prevents text-only rambling\n        tool_choice: tools.length ? 'auto' : undefined,\n        // Enable multiple tool calls in a single response\n        parallel_tool_calls: tools.length ? true : undefined,\n        stream: false,\n        // Guardrails: enforce temperature and output cap to prevent runaway responses\n        temperature: this.temperature,\n        max_tokens: this.maxTokens,\n      };\n\n      let completion: ChatCompletion;\n\n      try {\n        const result = await this.client.chat.completions.create(request);\n        assertHasChoices(result);\n        completion = result;\n      } catch (error) {\n        // Wrap and rethrow with more context\n        if (error instanceof Error) {\n          // Check for specific API error types\n          const apiError = error as { status?: number; code?: string };\n\n          if (apiError.status === 401) {\n            throw new ProviderStreamError(\n              `Authentication failed for ${this.id}. Check your API key.`,\n              this.id,\n              error,\n              false // Not retryable\n            );\n          }\n\n          if (apiError.status === 403) {\n            throw new ProviderStreamError(\n              `Access forbidden for ${this.id}. Check your permissions.`,\n              this.id,\n              error,\n              false // Not retryable\n            );\n          }\n\n          // Let recoverable errors propagate for retry\n          if (isRecoverableError(error)) {\n            throw error;\n          }\n\n          // Wrap other errors\n          throw new ProviderStreamError(\n            `API request failed: ${error.message}`,\n            this.id,\n            error,\n            false\n          );\n        }\n        throw error;\n      }\n\n      const choice = completion.choices[0];\n      const usage = mapUsage(completion.usage);\n\n      if (!choice) {\n        return {\n          type: 'message',\n          content: '',\n          usage,\n        };\n      }\n\n      // Safely extract tool calls with error recovery\n      let toolCalls: ToolCallRequest[] = [];\n      try {\n        toolCalls = (choice.message.tool_calls ?? []).map(mapToolCall);\n      } catch (parseError) {\n        // SECURITY: Sanitize error message to prevent token leakage\n        logDebug(\n          `[${this.id}] Failed to parse tool calls, recovering: ` +\n          `${safeErrorMessage(parseError)}`\n        );\n        // Continue with empty tool calls rather than failing\n      }\n\n      const content = extractMessageContent(choice);\n\n      if (toolCalls.length > 0) {\n        return {\n          type: 'tool_calls',\n          toolCalls,\n          content,\n          usage,\n        };\n      }\n\n      return {\n        type: 'message',\n        content,\n        usage,\n      };\n    }, 'generate');\n  }\n\n  async *generateStream(\n    messages: ConversationMessage[],\n    tools: ProviderToolDefinition[]\n  ): AsyncIterableIterator<StreamChunk> {\n    const { messages: boundedMessages } = enforceRequestSizeLimit(messages);\n\n    const request: Parameters<OpenAI['chat']['completions']['create']>[0] = {\n      model: this.model,\n      messages: mapMessages(boundedMessages, this.model),\n      tools: tools.length ? tools.map(mapTool) : undefined,\n      // Force tool usage when tools are available - prevents text-only rambling\n      tool_choice: tools.length ? 'auto' : undefined,\n      // Enable multiple tool calls in a single response\n      parallel_tool_calls: tools.length ? true : undefined,\n      stream: true,\n      // Guardrails: enforce temperature and output cap to prevent runaway responses\n      temperature: this.temperature,\n      max_tokens: this.maxTokens,\n    };\n\n    const response = await this.client.chat.completions.create(request);\n\n    // TypeScript needs help knowing this is a stream when stream: true\n    if (!Symbol.asyncIterator || !((response as AsyncIterable<unknown>)[Symbol.asyncIterator])) {\n      throw new Error('Expected streaming response but got non-streaming');\n    }\n\n    const stream = response as AsyncIterable<OpenAI.Chat.Completions.ChatCompletionChunk>;\n\n    // Track tool calls being built (by index)\n    const pendingToolCalls = new Map<number, { id: string; name: string; arguments: string }>();\n\n    for await (const chunk of stream) {\n      const choice = chunk.choices[0];\n      if (!choice) continue;\n\n      const delta = choice.delta as Record<string, unknown>;\n\n      // Stream reasoning_content for models like deepseek-reasoner so users see progress\n      const reasoning = extractTextContent(delta['reasoning_content']);\n      if (reasoning) {\n        yield { type: 'reasoning', content: reasoning };\n      }\n\n      // Handle content chunks (support both string and array formats)\n      const content = extractTextContent(delta['content']);\n      if (content) {\n        yield { type: 'content', content };\n      }\n\n      // Handle tool call deltas\n      const toolCalls = delta['tool_calls'] as Array<{\n        index: number;\n        id?: string;\n        function?: { name?: string; arguments?: string };\n      }> | undefined;\n      if (toolCalls) {\n        for (const toolCallDelta of toolCalls) {\n          const idx = toolCallDelta.index;\n\n          if (!pendingToolCalls.has(idx)) {\n            pendingToolCalls.set(idx, {\n              id: toolCallDelta.id ?? `call_${idx}`,\n              name: toolCallDelta.function?.name ?? '',\n              arguments: '',\n            });\n          }\n\n          const pending = pendingToolCalls.get(idx)!;\n\n          // Accumulate function name if provided\n          if (toolCallDelta.function?.name) {\n            pending.name = toolCallDelta.function.name;\n          }\n\n          // Accumulate arguments with size limit\n          if (toolCallDelta.function?.arguments) {\n            // SECURITY: Limit accumulated arguments size to prevent memory DoS\n            if (pending.arguments.length + toolCallDelta.function.arguments.length > 100000) {\n              throw new Error(`Tool call arguments too large (${pending.arguments.length + toolCallDelta.function.arguments.length} bytes), maximum is 100KB`);\n            }\n            pending.arguments += toolCallDelta.function.arguments;\n          }\n        }\n      }\n\n      // Check if stream is done\n      if (choice.finish_reason) {\n        // Emit all accumulated tool calls\n        for (const [, toolCall] of pendingToolCalls) {\n          let parsed: Record<string, unknown> = {};\n          try {\n            // SECURITY: Use safe JSON parsing with prototype pollution protection\n            parsed = safeJSONParse<Record<string, unknown>>(toolCall.arguments || '{}', {\n              maxDepth: 10,\n              maxProperties: 100\n            });\n          } catch (parseError) {\n            // Try recovery for malformed JSON\n            const recovered = tryRecoverMalformedJson(toolCall.arguments);\n            if (recovered) {\n              parsed = recovered;\n            } else {\n              logDebug(`[SECURITY] Failed to parse tool call arguments: ${safeErrorMessage(parseError)}`);\n            }\n          }\n\n          yield {\n            type: 'tool_call',\n            toolCall: {\n              id: toolCall.id,\n              name: toolCall.name,\n              arguments: parsed,\n            },\n          };\n        }\n\n        // Emit usage if available\n        if ('usage' in chunk && chunk.usage) {\n          const usage = chunk.usage as { prompt_tokens: number; completion_tokens: number; total_tokens: number };\n          yield {\n            type: 'usage',\n            usage: {\n              inputTokens: usage.prompt_tokens,\n              outputTokens: usage.completion_tokens,\n              totalTokens: usage.total_tokens,\n            },\n          };\n        }\n\n        yield { type: 'done' };\n      }\n    }\n  }\n\n  private cachedModelInfo: ProviderModelInfo | null = null;\n\n  /**\n   * Fetch model info from OpenAI API\n   * Returns context window and token limits from the real API\n   */\n  async getModelInfo(): Promise<ProviderModelInfo | null> {\n    if (this.cachedModelInfo) {\n      return this.cachedModelInfo;\n    }\n\n    try {\n      // Use the OpenAI models API to get real model info\n      const modelInfo = await this.client.models.retrieve(this.model);\n\n      if (modelInfo) {\n        // OpenAI models API returns context_length or similar field\n        // The exact field name may vary by model\n        const rawInfo = modelInfo as unknown as Record<string, unknown>;\n        const contextWindow =\n          rawInfo['context_length'] as number | undefined ??\n          rawInfo['context_window'] as number | undefined ??\n          rawInfo['max_context_length'] as number | undefined;\n\n        const maxOutputTokens =\n          rawInfo['max_output_tokens'] as number | undefined ??\n          rawInfo['output_token_limit'] as number | undefined;\n\n        if (contextWindow) {\n          this.cachedModelInfo = {\n            id: this.model,\n            contextWindow,\n            maxOutputTokens,\n            inputTokenLimit: contextWindow,\n            outputTokenLimit: maxOutputTokens,\n          };\n          return this.cachedModelInfo;\n        }\n      }\n    } catch (error) {\n      // Models API may not be available for all models\n      // Fall through to return null\n      const message = error instanceof Error ? error.message : String(error);\n      if (!message.includes('404') && !message.includes('not found')) {\n        // Log unexpected errors but don't fail\n        logDebug(`Failed to fetch model info for ${this.model}:`, message);\n      }\n    }\n\n    return null;\n  }\n}\n\nfunction isDeepSeekModel(model?: string): boolean {\n  if (!model) return false;\n  const normalized = model.toLowerCase();\n  return normalized.includes('deepseek');\n}\n\n/**\n * Check if a model is a Grok model that may output reasoning content\n * Grok 3+, Grok 4, and variants with \"think\" or \"reasoning\" support chain-of-thought\n */\nfunction isGrokModel(model?: string): boolean {\n  if (!model) return false;\n  const normalized = model.toLowerCase();\n  return (\n    normalized.includes('grok') &&\n    (normalized.includes('think') ||\n      normalized.includes('reason') ||\n      normalized.includes('grok-3') ||\n      normalized.includes('grok-4'))\n  );\n}\n\n/**\n * Check if a model is a local reasoning model (via Ollama)\n * QwQ, Qwen reasoning, Llama reasoning variants, etc.\n */\nfunction isLocalReasoningModel(model?: string): boolean {\n  if (!model) return false;\n  const normalized = model.toLowerCase();\n  return (\n    // QwQ is Alibaba's reasoning model\n    normalized.includes('qwq') ||\n    // Qwen with reasoning\n    (normalized.includes('qwen') && normalized.includes('reason')) ||\n    // Llama reasoning variants\n    (normalized.includes('llama') && normalized.includes('reason')) ||\n    // Mistral reasoning\n    (normalized.includes('mistral') && normalized.includes('reason')) ||\n    // Generic reasoning model indicators\n    normalized.includes('-r1') ||\n    normalized.includes('think') ||\n    normalized.includes('cot')\n  );\n}\n\n/**\n * Check if a model supports reasoning/thinking content in responses\n */\nfunction supportsReasoningContent(model?: string): boolean {\n  return isDeepSeekModel(model) || isGrokModel(model) || isLocalReasoningModel(model);\n}\n\n/**\n * Validate and sanitize message sequence to ensure tool messages have preceding tool_calls.\n * OpenAI/DeepSeek APIs require: \"Messages with role 'tool' must be a response to a preceding message with 'tool_calls'\"\n */\nfunction sanitizeMessageSequence(messages: ConversationMessage[]): ConversationMessage[] {\n  const sanitized: ConversationMessage[] = [];\n  const pendingToolCallIds = new Set<string>();\n\n  for (const message of messages) {\n    if (message.role === 'assistant' && message.toolCalls?.length) {\n      // Track tool call IDs that need responses\n      for (const tc of message.toolCalls) {\n        if (tc.id) pendingToolCallIds.add(tc.id);\n      }\n      sanitized.push(message);\n    } else if (message.role === 'tool') {\n      // Only include tool messages if we have a pending tool call for them\n      const toolCallId = message.toolCallId;\n      if (toolCallId && pendingToolCallIds.has(toolCallId)) {\n        pendingToolCallIds.delete(toolCallId);\n        sanitized.push(message);\n      } else {\n        // ORPHANED TOOL MESSAGE - skip it to prevent API error\n        // This can happen after context compaction or message pruning\n        logDebug(`[mapMessages] Skipping orphaned tool message (no preceding tool_call): ${toolCallId?.slice(0, 20) || 'no-id'}`);\n      }\n    } else {\n      // system, user, assistant without tool_calls - pass through\n      // Clear pending tool calls when we hit a user message (new turn)\n      if (message.role === 'user') {\n        pendingToolCallIds.clear();\n      }\n      sanitized.push(message);\n    }\n  }\n\n  return sanitized;\n}\n\nfunction mapMessages(messages: ConversationMessage[], model?: string): ChatCompletionMessageParam[] {\n  // CRITICAL: Sanitize message sequence to prevent \"tool must follow tool_calls\" errors\n  const sanitizedMessages = sanitizeMessageSequence(messages);\n\n  const params: ChatCompletionMessageParam[] = [];\n  const includeReasoningContent = supportsReasoningContent(model);\n\n  for (const message of sanitizedMessages) {\n    switch (message.role) {\n      case 'system':\n      case 'user': {\n        params.push({\n          role: message.role,\n          content: message.content,\n        });\n        break;\n      }\n      case 'assistant': {\n        const assistantMessage: ChatCompletionMessageParam & { reasoning_content?: string } = {\n          role: 'assistant',\n          content: message.content,\n          tool_calls: message.toolCalls?.map((call, index) => ({\n            id: call.id || `call_${index}`,\n            type: 'function',\n            function: {\n              name: call.name,\n              arguments: JSON.stringify(call.arguments ?? {}),\n            },\n          })),\n        };\n        if (includeReasoningContent) {\n          assistantMessage.reasoning_content = message.content ?? '';\n        }\n        params.push(assistantMessage);\n        break;\n      }\n      case 'tool': {\n        params.push({\n          role: 'tool',\n          content: message.content,\n          tool_call_id: message.toolCallId,\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n\n  return params;\n}\n\nfunction mapTool(definition: ProviderToolDefinition): ChatCompletionTool {\n  const parameters = (definition.parameters ?? {\n    type: 'object',\n    properties: {},\n  }) as FunctionDefinition['parameters'];\n\n  return {\n    type: 'function',\n    function: {\n      name: definition.name,\n      description: definition.description,\n      parameters,\n      // Enable strict schema validation for more reliable tool calls\n      strict: false, // Set to false to allow flexible schemas; true requires additionalProperties: false\n    },\n  };\n}\n\n/**\n * Enforce a hard request size limit to prevent provider 413 errors.\n * Drops the oldest non-system messages until the serialized size is under limit.\n */\nfunction enforceRequestSizeLimit(messages: ConversationMessage[]): { messages: ConversationMessage[]; truncated: boolean } {\n  let truncated = false;\n  const trimmed = [...messages];\n  let size = estimateMessageChars(trimmed);\n\n  while (size > REQUEST_CHAR_LIMIT && trimmed.length > 1) {\n    // Remove the oldest non-system message; if only systems remain, drop the second message\n    const removeIdx = trimmed.findIndex(msg => msg.role !== 'system');\n    const idx = removeIdx === -1 ? 1 : removeIdx;\n    trimmed.splice(idx, 1);\n    truncated = true;\n    size = estimateMessageChars(trimmed);\n  }\n\n  if (truncated) {\n    trimmed.unshift({\n      role: 'system',\n      content: '[Context trimmed to fit request size limit. Earlier turns were dropped to avoid provider rejection.]',\n    });\n  }\n\n  return { messages: trimmed, truncated };\n}\n\nfunction estimateMessageChars(messages: ConversationMessage[]): number {\n  let total = 0;\n  for (const msg of messages) {\n    if (typeof msg.content === 'string') {\n      total += msg.content.length;\n    } else if (Array.isArray(msg.content)) {\n      for (const part of msg.content as Array<unknown>) {\n        if (typeof part === 'string') {\n          total += part.length;\n        } else if (part && typeof part === 'object' && 'text' in (part as Record<string, unknown>)) {\n          const text = (part as { text?: string }).text ?? '';\n          total += typeof text === 'string' ? text.length : String(text).length;\n        } else {\n          total += JSON.stringify(part ?? '').length;\n        }\n      }\n    } else if (msg.content != null) {\n      total += JSON.stringify(msg.content).length;\n    }\n\n    const toolCalls = (msg as { toolCalls?: Array<{ name?: string; arguments?: unknown }> }).toolCalls;\n    if (Array.isArray(toolCalls)) {\n      for (const call of toolCalls) {\n        total += (call.name?.length ?? 0);\n        try {\n          total += JSON.stringify(call.arguments ?? {}).length;\n        } catch {\n          total += 100; // Fallback small cost\n        }\n      }\n    }\n  }\n  return total;\n}\n\nfunction extractMessageContent(choice: ChatCompletion.Choice): string {\n  const message = choice.message;\n  const content = extractTextContent(message?.content);\n\n  if (content.trim()) {\n    return content.trim();\n  }\n\n  const reasoning = extractTextContent((message as { reasoning_content?: unknown })?.reasoning_content);\n  if (reasoning.trim()) {\n    return reasoning.trim();\n  }\n\n  const refusal = message?.refusal;\n  if (typeof refusal === 'string' && refusal.trim()) {\n    return refusal.trim();\n  }\n\n  return '';\n}\n\nfunction isFunctionToolCall(call: ChatCompletionMessageToolCall): call is ChatCompletionMessageFunctionToolCall {\n  return call.type === 'function';\n}\n\nfunction isCustomToolCall(call: ChatCompletionMessageToolCall): call is ChatCompletionMessageCustomToolCall {\n  return call.type === 'custom';\n}\n\nfunction mapToolCall(call: ChatCompletionMessageToolCall): ToolCallRequest {\n  let parsed: Record<string, unknown> = {};\n  let rawArgs: string;\n  let funcName: string;\n\n  // Handle both standard function calls and custom tool calls\n  if (isFunctionToolCall(call)) {\n    rawArgs = call.function.arguments ?? '{}';\n    funcName = call.function.name ?? call.id ?? 'unknown';\n  } else if (isCustomToolCall(call)) {\n    rawArgs = call.custom.input ?? '{}';\n    funcName = call.custom.name ?? call.id ?? 'unknown';\n  } else {\n    // Fallback for any future tool call types\n    rawArgs = '{}';\n    funcName = (call as { id?: string }).id ?? 'unknown';\n  }\n\n  try {\n    // SECURITY: Validate JSON size before parsing to prevent DoS attacks\n    if (rawArgs.length > 100000) {\n      throw new Error(`JSON too large (${rawArgs.length} bytes), maximum is 100KB`);\n    }\n    \n    // SECURITY: Check for potential malicious patterns before parsing\n    if (rawArgs.includes('__proto__') || rawArgs.includes('constructor') || rawArgs.includes('prototype')) {\n      logDebug(`[security] Suspicious pattern detected in tool call arguments for ${funcName}`);\n    }\n    \n    // SECURITY: Use safe JSON parsing instead of plain JSON.parse\n    parsed = safeJSONParse<Record<string, unknown>>(rawArgs, {\n      maxDepth: 15,\n      maxProperties: 500\n    });\n  } catch (error) {\n    // Try to recover malformed JSON (common with some models)\n    const recovered = tryRecoverMalformedJson(rawArgs);\n    if (recovered) {\n      parsed = recovered;\n    } else {\n      // SECURITY: Sanitize raw args to prevent token leakage (they could contain API keys in malformed requests)\n      const sanitizedArgs = sanitizeErrorMessage(rawArgs.slice(0, 100));\n      logDebug(`[tool-call] Failed to parse arguments for ${funcName}: ${sanitizedArgs}...`);\n    }\n  }\n\n  return {\n    id: call.id ?? funcName,\n    name: funcName,\n    arguments: parsed,\n  };\n}\n\n/**\n * Try to recover malformed JSON from tool call arguments.\n * Some models return truncated or malformed JSON that can be fixed.\n */\nfunction tryRecoverMalformedJson(raw: string): Record<string, unknown> | null {\n  if (!raw || !raw.trim()) {\n    return null;\n  }\n\n  const attempts = [\n    // Try adding missing closing braces/quotes\n    `${raw  }\"}`,\n    `${raw  }}`,\n    `${raw  }\"` + `}`,\n    `${raw  }\"}}`,\n    `${raw  }}}`,\n  ];\n\n  for (const attempt of attempts) {\n    try {\n      const parsed = JSON.parse(attempt);\n      if (typeof parsed === 'object' && parsed !== null) {\n        return parsed;\n      }\n    } catch {\n      // Continue to next attempt\n    }\n  }\n\n  // Try regex extraction as last resort\n  try {\n    const pairs = raw.matchAll(/\"([^\"]+)\":\\s*(?:\"([^\"]*)\"?|(\\d+(?:\\.\\d+)?)|(\\btrue\\b|\\bfalse\\b|\\bnull\\b))/g);\n    const result: Record<string, unknown> = {};\n\n    for (const match of pairs) {\n      const [, key, strVal, numVal, boolVal] = match;\n      if (key) {\n        if (strVal !== undefined) {\n          result[key] = strVal;\n        } else if (numVal) {\n          result[key] = numVal.includes('.') ? parseFloat(numVal) : parseInt(numVal, 10);\n        } else if (boolVal) {\n          result[key] = boolVal === 'true' ? true : boolVal === 'false' ? false : null;\n        }\n      }\n    }\n\n    if (Object.keys(result).length > 0) {\n      return result;\n    }\n  } catch {\n    // Regex extraction failed\n  }\n\n  return null;\n}\n\n/**\n * Normalize OpenAI content parts into plain text.\n * Supports both legacy string content and the newer array-of-parts format.\n */\nfunction extractTextContent(content: unknown): string {\n  if (!content) {\n    return '';\n  }\n\n  if (typeof content === 'string') {\n    return content;\n  }\n\n  if (Array.isArray(content)) {\n    return content\n      .map((part) => {\n        if (typeof part === 'string') {\n          return part;\n        }\n        if (part && typeof part === 'object') {\n          const { text, content: nestedContent } = part as { text?: unknown; content?: unknown };\n          if (typeof text === 'string') return text;\n          if (typeof nestedContent === 'string') return nestedContent;\n        }\n        return '';\n      })\n      .join('');\n  }\n\n  if (content && typeof content === 'object') {\n    const { text, content: nestedContent } = content as { text?: unknown; content?: unknown };\n    if (typeof text === 'string') return text;\n    if (typeof nestedContent === 'string') return nestedContent;\n  }\n\n  return '';\n}\n\nfunction mapUsage(usage?: ChatCompletion['usage'] | null): ProviderUsage | null {\n  if (!usage) {\n    return null;\n  }\n\n  return {\n    inputTokens: usage.prompt_tokens,\n    outputTokens: usage.completion_tokens,\n    totalTokens: usage.total_tokens,\n  };\n}\n\nfunction assertHasChoices(result: ChatCompletionsResult): asserts result is ChatCompletion {\n  if (!('choices' in result)) {\n    throw new Error('Streaming responses are not supported in this runtime.');\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}