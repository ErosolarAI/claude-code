{"version":3,"names":["cov_1ff6zpuwfj","actualCoverage","AgentHost","createUniversalRuntime","options","f","env","s","b","process","host","profile","workspaceContext","workingDir","toolObserver","additionalModules","length","loadModules","session","getSession"],"sources":["universal.ts"],"sourcesContent":["import { AgentHost, type CapabilityModule } from './agentHost.js';\nimport { AgentSession } from './agentSession.js';\nimport type { ProfileName } from '../config.js';\nimport type { ToolRuntimeObserver } from '../core/toolRuntime.js';\n\nexport interface UniversalRuntimeOptions {\n  profile: ProfileName;\n  workspaceContext: string | null;\n  workingDir: string;\n  toolObserver?: ToolRuntimeObserver;\n  env?: NodeJS.ProcessEnv;\n  additionalModules?: CapabilityModule[];\n}\n\nexport interface UniversalRuntime {\n  host: AgentHost;\n  session: AgentSession;\n}\n\nexport async function createUniversalRuntime(\n  options: UniversalRuntimeOptions\n): Promise<UniversalRuntime> {\n  const env = options.env ? { ...options.env } : { ...process.env };\n  const host = new AgentHost({\n    profile: options.profile,\n    workspaceContext: options.workspaceContext,\n    workingDir: options.workingDir,\n    toolObserver: options.toolObserver,\n    env,\n  });\n\n  const additionalModules = options.additionalModules ?? [];\n\n  if (additionalModules.length) {\n    await host.loadModules(additionalModules);\n  }\n\n  const session = await host.getSession();\n\n  return {\n    host,\n    session,\n  };\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,SAAS,QAA+B,gBAAgB;AAmBjE,OAAO,eAAeC,sBAAsBA,CAC1CC,OAAgC,EACL;EAAA;EAAAJ,cAAA,GAAAK,CAAA;EAC3B,MAAMC,GAAG;EAAA;EAAA,CAAAN,cAAA,GAAAO,CAAA,OAAGH,OAAO,CAACE,GAAG;EAAA;EAAA,CAAAN,cAAA,GAAAQ,CAAA,UAAG;IAAE,GAAGJ,OAAO,CAACE;EAAI,CAAC;EAAA;EAAA,CAAAN,cAAA,GAAAQ,CAAA,UAAG;IAAE,GAAGC,OAAO,CAACH;EAAI,CAAC;EACjE,MAAMI,IAAI;EAAA;EAAA,CAAAV,cAAA,GAAAO,CAAA,OAAG,IAAIL,SAAS,CAAC;IACzBS,OAAO,EAAEP,OAAO,CAACO,OAAO;IACxBC,gBAAgB,EAAER,OAAO,CAACQ,gBAAgB;IAC1CC,UAAU,EAAET,OAAO,CAACS,UAAU;IAC9BC,YAAY,EAAEV,OAAO,CAACU,YAAY;IAClCR;EACF,CAAC,CAAC;EAEF,MAAMS,iBAAiB;EAAA;EAAA,CAAAf,cAAA,GAAAO,CAAA;EAAG;EAAA,CAAAP,cAAA,GAAAQ,CAAA,UAAAJ,OAAO,CAACW,iBAAiB;EAAA;EAAA,CAAAf,cAAA,GAAAQ,CAAA,UAAI,EAAE;EAAC;EAAAR,cAAA,GAAAO,CAAA;EAE1D,IAAIQ,iBAAiB,CAACC,MAAM,EAAE;IAAA;IAAAhB,cAAA,GAAAQ,CAAA;IAAAR,cAAA,GAAAO,CAAA;IAC5B,MAAMG,IAAI,CAACO,WAAW,CAACF,iBAAiB,CAAC;EAC3C,CAAC;EAAA;EAAA;IAAAf,cAAA,GAAAQ,CAAA;EAAA;EAED,MAAMU,OAAO;EAAA;EAAA,CAAAlB,cAAA,GAAAO,CAAA,OAAG,MAAMG,IAAI,CAACS,UAAU,CAAC,CAAC;EAAC;EAAAnB,cAAA,GAAAO,CAAA;EAExC,OAAO;IACLG,IAAI;IACJQ;EACF,CAAC;AACH","ignoreList":[]}