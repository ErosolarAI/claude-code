{"version":3,"names":["cov_2cbw3yobhd","actualCoverage","EventEmitter","flowProtectionInstance","s","FlowProtection","config","flowState","messageTimestamps","blockedInjections","recoveredFlows","uiErrorsBlocked","injectionPatterns","pattern","type","weight","unicodePatterns","char","replacement","constructor","b","f","detectInjection","injectionThreshold","protectFlow","protectUI","rateLimitPerSecond","maxMessageLength","verbose","onInjectionDetected","onFlowError","messageCount","lastMessageTime","errorCount","recoveryAttempts","contextHash","isProcessing","lastValidState","analyzePrompt","prompt","blockedPatterns","totalWeight","detectedType","sanitized","length","log","slice","normalizeUnicode","matches","match","push","find","p","replace","confidence","Math","min","detected","analysis","originalLength","sanitizedLength","emit","text","result","split","join","normalize","checkRateLimit","now","Date","windowMs","filter","t","processMessage","message","allowed","reason","sanitizeForUI","content","removeUnsafeEscapeSequences","maxLineLength","map","line","maxOutputLength","safePattern","cleaned","operation","context","startTime","error","errorObj","Error","String","isAttackError","isAttackInducedError","delay","retryError","attackPatterns","some","test","stack","ms","Promise","resolve","setTimeout","saveCheckpoint","state","hashString","restoreCheckpoint","verifyContextIntegrity","currentHash","str","hash","i","charCodeAt","toString","getStats","process","env","console","initializeFlowProtection","getFlowProtection","sanitizePrompt","protection","blocked","sanitizeForDisplay"],"sources":["flowProtection.ts"],"sourcesContent":["/**\n * AI Flow Protection System\n *\n * Comprehensive protection against attacks targeting the AI conversation flow:\n *\n * 1. Prompt Injection Defense - Detect and neutralize injection attempts\n * 2. Flow Continuity Protection - Prevent conversation interruption attacks\n * 3. UI Stability Armor - Protect rendering from error-inducing payloads\n * 4. Context Poisoning Prevention - Detect attempts to corrupt AI context\n * 5. Response Hijacking Defense - Prevent response manipulation\n * 6. State Corruption Protection - Guard conversation state integrity\n * 7. Rate Limiting - Prevent DoS through rapid message flooding\n * 8. Escape Sequence Sanitization - Neutralize terminal escape attacks\n *\n * @module flowProtection\n */\n\nimport { EventEmitter } from 'events';\n\n/** Injection detection result */\nexport interface InjectionAnalysis {\n  detected: boolean;\n  confidence: number; // 0-100\n  type: InjectionType | null;\n  sanitized: string;\n  originalLength: number;\n  sanitizedLength: number;\n  blockedPatterns: string[];\n}\n\n/** Types of injection attacks */\nexport type InjectionType =\n  | 'prompt_override'      // Attempting to override system prompt\n  | 'role_injection'       // Injecting fake assistant/system messages\n  | 'context_manipulation' // Manipulating conversation context\n  | 'escape_sequence'      // Terminal escape sequence injection\n  | 'unicode_attack'       // Unicode normalization attacks\n  | 'delimiter_injection'  // Injecting message delimiters\n  | 'instruction_leak'     // Attempting to leak system instructions\n  | 'jailbreak'           // Known jailbreak patterns\n  | 'flow_termination'    // Attempting to terminate AI flow\n  | 'ui_corruption';      // Attempting to corrupt UI rendering\n\n/** Flow state for continuity tracking */\ninterface FlowState {\n  messageCount: number;\n  lastMessageTime: number;\n  errorCount: number;\n  recoveryAttempts: number;\n  contextHash: string;\n  isProcessing: boolean;\n  lastValidState: string | null;\n}\n\n/** Configuration options */\nexport interface FlowProtectionConfig {\n  /** Enable prompt injection detection (default: true) */\n  detectInjection?: boolean;\n  /** Injection confidence threshold to block (default: 70) */\n  injectionThreshold?: number;\n  /** Enable flow continuity protection (default: true) */\n  protectFlow?: boolean;\n  /** Enable UI stability protection (default: true) */\n  protectUI?: boolean;\n  /** Rate limit messages per second (default: 10) */\n  rateLimitPerSecond?: number;\n  /** Maximum message length (default: 100000) */\n  maxMessageLength?: number;\n  /** Enable verbose logging (default: false) */\n  verbose?: boolean;\n  /** Callback on injection detection */\n  onInjectionDetected?: (analysis: InjectionAnalysis) => void;\n  /** Callback on flow error */\n  onFlowError?: (error: Error, recovered: boolean) => void;\n}\n\n/** Singleton instance */\nlet flowProtectionInstance: FlowProtection | null = null;\n\n/**\n * Flow Protection System\n */\nexport class FlowProtection extends EventEmitter {\n  private config: Required<FlowProtectionConfig>;\n  private flowState: FlowState;\n  private messageTimestamps: number[] = [];\n  private blockedInjections = 0;\n  private recoveredFlows = 0;\n  private uiErrorsBlocked = 0;\n\n  // Injection detection patterns\n  private readonly injectionPatterns: Array<{ pattern: RegExp; type: InjectionType; weight: number }> = [\n    // System prompt override attempts\n    { pattern: /\\[?\\/?system\\]?[\\s:]+/gi, type: 'prompt_override', weight: 40 },\n    { pattern: /ignore.*(?:previous|above|all).*instructions?/gi, type: 'prompt_override', weight: 60 },\n    { pattern: /disregard.*(?:previous|prior|all).*(?:instructions?|rules?)/gi, type: 'prompt_override', weight: 60 },\n    { pattern: /forget.*(?:everything|all|previous)/gi, type: 'prompt_override', weight: 50 },\n    { pattern: /new.*(?:system|base).*prompt/gi, type: 'prompt_override', weight: 55 },\n    { pattern: /override.*(?:system|instructions?)/gi, type: 'prompt_override', weight: 55 },\n\n    // Role injection\n    { pattern: /^[\\s]*(?:assistant|ai|claude|gpt|system)[\\s]*:/gim, type: 'role_injection', weight: 45 },\n    { pattern: /\\n[\\s]*(?:assistant|ai|claude)[\\s]*:/gi, type: 'role_injection', weight: 40 },\n    { pattern: /<\\/?(?:system|assistant|user)>/gi, type: 'role_injection', weight: 50 },\n    { pattern: /\\[\\[(?:SYSTEM|ASSISTANT|USER)\\]\\]/gi, type: 'role_injection', weight: 55 },\n\n    // Context manipulation\n    { pattern: /pretend.*(?:you.*are|to.*be|that)/gi, type: 'context_manipulation', weight: 35 },\n    { pattern: /act.*as.*(?:if|though)/gi, type: 'context_manipulation', weight: 30 },\n    { pattern: /roleplay.*as/gi, type: 'context_manipulation', weight: 30 },\n    { pattern: /you.*are.*now/gi, type: 'context_manipulation', weight: 25 },\n    { pattern: /from.*now.*on/gi, type: 'context_manipulation', weight: 20 },\n\n    // Delimiter injection\n    { pattern: /---+[\\s]*(?:END|START)[\\s]*---+/gi, type: 'delimiter_injection', weight: 45 },\n    { pattern: /===+[\\s]*(?:SYSTEM|USER|ASSISTANT)[\\s]*===+/gi, type: 'delimiter_injection', weight: 50 },\n    { pattern: /\\|{3,}[\\s]*(?:BREAK|END|NEW)[\\s]*\\|{3,}/gi, type: 'delimiter_injection', weight: 45 },\n\n    // Instruction leak attempts\n    { pattern: /repeat.*(?:system|initial).*(?:prompt|instructions?)/gi, type: 'instruction_leak', weight: 50 },\n    { pattern: /show.*(?:me|your).*(?:system|base).*(?:prompt|instructions?)/gi, type: 'instruction_leak', weight: 55 },\n    { pattern: /what.*(?:are|were).*(?:your|the).*(?:original|initial).*instructions?/gi, type: 'instruction_leak', weight: 45 },\n    { pattern: /reveal.*(?:system|hidden).*(?:prompt|instructions?)/gi, type: 'instruction_leak', weight: 55 },\n\n    // Jailbreak patterns\n    { pattern: /DAN[\\s]*(?:mode|prompt)?/gi, type: 'jailbreak', weight: 70 },\n    { pattern: /jailbreak/gi, type: 'jailbreak', weight: 60 },\n    { pattern: /developer[\\s]*mode/gi, type: 'jailbreak', weight: 50 },\n    { pattern: /\\[.*unlock.*\\]/gi, type: 'jailbreak', weight: 45 },\n    { pattern: /bypass.*(?:filters?|restrictions?|safety)/gi, type: 'jailbreak', weight: 55 },\n\n    // Flow termination attempts\n    { pattern: /(?:exit|quit|terminate|abort|kill|stop)[\\s]*(?:now|immediately|session|conversation)/gi, type: 'flow_termination', weight: 40 },\n    { pattern: /(?:end|close|shutdown)[\\s]*(?:this|the)?[\\s]*(?:session|conversation|chat)/gi, type: 'flow_termination', weight: 35 },\n    { pattern: /\\x03|\\x04|\\x1a/g, type: 'flow_termination', weight: 70 }, // Ctrl+C, Ctrl+D, Ctrl+Z\n\n    // UI corruption attempts\n    { pattern: /\\x1b\\[[0-9;]*[mGKHJ]/g, type: 'ui_corruption', weight: 60 }, // ANSI escape sequences\n    { pattern: /\\x1b\\][0-9]+;/g, type: 'ui_corruption', weight: 65 }, // OSC sequences\n    { pattern: /\\x07|\\x08|\\x7f/g, type: 'ui_corruption', weight: 40 }, // Bell, backspace, delete\n    { pattern: /\\x1b[PX^_]/g, type: 'ui_corruption', weight: 70 }, // DCS, SOS, PM, APC sequences\n  ];\n\n  // Unicode normalization attacks\n  private readonly unicodePatterns: Array<{ char: string; replacement: string }> = [\n    { char: '\\u200B', replacement: '' }, // Zero-width space\n    { char: '\\u200C', replacement: '' }, // Zero-width non-joiner\n    { char: '\\u200D', replacement: '' }, // Zero-width joiner\n    { char: '\\u2060', replacement: '' }, // Word joiner\n    { char: '\\uFEFF', replacement: '' }, // BOM\n    { char: '\\u00A0', replacement: ' ' }, // Non-breaking space\n    { char: '\\u2028', replacement: '\\n' }, // Line separator\n    { char: '\\u2029', replacement: '\\n' }, // Paragraph separator\n    { char: '\\u202A', replacement: '' }, // LRE\n    { char: '\\u202B', replacement: '' }, // RLE\n    { char: '\\u202C', replacement: '' }, // PDF\n    { char: '\\u202D', replacement: '' }, // LRO\n    { char: '\\u202E', replacement: '' }, // RLO (text direction override)\n  ];\n\n  constructor(config: FlowProtectionConfig = {}) {\n    super();\n    this.config = {\n      detectInjection: config.detectInjection ?? true,\n      injectionThreshold: config.injectionThreshold ?? 70,\n      protectFlow: config.protectFlow ?? true,\n      protectUI: config.protectUI ?? true,\n      rateLimitPerSecond: config.rateLimitPerSecond ?? 10,\n      maxMessageLength: config.maxMessageLength ?? 100000,\n      verbose: config.verbose ?? false,\n      onInjectionDetected: config.onInjectionDetected ?? (() => {}),\n      onFlowError: config.onFlowError ?? (() => {}),\n    };\n\n    this.flowState = {\n      messageCount: 0,\n      lastMessageTime: 0,\n      errorCount: 0,\n      recoveryAttempts: 0,\n      contextHash: '',\n      isProcessing: false,\n      lastValidState: null,\n    };\n  }\n\n  /**\n   * Analyze and sanitize a prompt for injection attempts\n   */\n  analyzePrompt(prompt: string): InjectionAnalysis {\n    const blockedPatterns: string[] = [];\n    let totalWeight = 0;\n    let detectedType: InjectionType | null = null;\n    let sanitized = prompt;\n\n    // Check message length\n    if (prompt.length > this.config.maxMessageLength) {\n      this.log(`Prompt truncated from ${prompt.length} to ${this.config.maxMessageLength}`);\n      sanitized = prompt.slice(0, this.config.maxMessageLength);\n      totalWeight += 20;\n    }\n\n    // Unicode normalization\n    sanitized = this.normalizeUnicode(sanitized);\n\n    // Check injection patterns\n    for (const { pattern, type, weight } of this.injectionPatterns) {\n      const matches = sanitized.match(pattern);\n      if (matches) {\n        totalWeight += weight;\n        blockedPatterns.push(...matches);\n        if (!detectedType || weight > (this.injectionPatterns.find(p => p.type === detectedType)?.weight ?? 0)) {\n          detectedType = type;\n        }\n\n        // Sanitize based on type\n        if (type === 'ui_corruption' || type === 'escape_sequence') {\n          sanitized = sanitized.replace(pattern, '');\n        }\n      }\n    }\n\n    // Normalize confidence to 0-100\n    const confidence = Math.min(100, totalWeight);\n    const detected = confidence >= this.config.injectionThreshold;\n\n    if (detected) {\n      this.blockedInjections++;\n      this.log(`Injection detected: ${detectedType} (confidence: ${confidence}%)`);\n    }\n\n    const analysis: InjectionAnalysis = {\n      detected,\n      confidence,\n      type: detected ? detectedType : null,\n      sanitized,\n      originalLength: prompt.length,\n      sanitizedLength: sanitized.length,\n      blockedPatterns,\n    };\n\n    if (detected) {\n      this.config.onInjectionDetected?.(analysis);\n      this.emit('injection_detected', analysis);\n    }\n\n    return analysis;\n  }\n\n  /**\n   * Normalize unicode to prevent attacks\n   */\n  private normalizeUnicode(text: string): string {\n    let result = text;\n\n    for (const { char, replacement } of this.unicodePatterns) {\n      result = result.split(char).join(replacement);\n    }\n\n    // Normalize to NFC form\n    try {\n      result = result.normalize('NFC');\n    } catch {\n      // Ignore normalization errors\n    }\n\n    return result;\n  }\n\n  /**\n   * Check rate limiting\n   */\n  checkRateLimit(): boolean {\n    const now = Date.now();\n    const windowMs = 1000;\n\n    // Remove timestamps outside window\n    this.messageTimestamps = this.messageTimestamps.filter(t => now - t < windowMs);\n\n    if (this.messageTimestamps.length >= this.config.rateLimitPerSecond) {\n      this.log(`Rate limit exceeded: ${this.messageTimestamps.length} msgs/sec`);\n      return false;\n    }\n\n    this.messageTimestamps.push(now);\n    return true;\n  }\n\n  /**\n   * Process a message through all protections\n   */\n  processMessage(message: string): { allowed: boolean; sanitized: string; reason?: string } {\n    // Rate limiting\n    if (!this.checkRateLimit()) {\n      return { allowed: false, sanitized: '', reason: 'Rate limit exceeded' };\n    }\n\n    // Injection analysis\n    const analysis = this.analyzePrompt(message);\n\n    if (analysis.detected && analysis.confidence >= this.config.injectionThreshold) {\n      // High confidence injection - block or heavily sanitize\n      if (analysis.type === 'jailbreak' || analysis.type === 'prompt_override') {\n        return {\n          allowed: false,\n          sanitized: '',\n          reason: `Blocked ${analysis.type} attempt (confidence: ${analysis.confidence}%)`,\n        };\n      }\n\n      // Other types - allow sanitized version\n      return {\n        allowed: true,\n        sanitized: analysis.sanitized,\n        reason: `Sanitized ${analysis.type} attempt`,\n      };\n    }\n\n    // Update flow state\n    this.flowState.messageCount++;\n    this.flowState.lastMessageTime = Date.now();\n\n    return { allowed: true, sanitized: analysis.sanitized };\n  }\n\n  /**\n   * Protect UI rendering from malicious content\n   */\n  sanitizeForUI(content: string): string {\n    if (!this.config.protectUI) return content;\n\n    let sanitized = content;\n\n    // Remove all ANSI escape sequences except safe ones\n    sanitized = this.removeUnsafeEscapeSequences(sanitized);\n\n    // Remove control characters except newline and tab\n    sanitized = sanitized.replace(/[\\x00-\\x08\\x0B\\x0C\\x0E-\\x1F\\x7F]/g, '');\n\n    // Limit line length to prevent terminal overflow\n    const maxLineLength = 10000;\n    sanitized = sanitized.split('\\n').map(line =>\n      line.length > maxLineLength ? line.slice(0, maxLineLength) + '...' : line\n    ).join('\\n');\n\n    // Limit total output length\n    const maxOutputLength = 500000;\n    if (sanitized.length > maxOutputLength) {\n      sanitized = sanitized.slice(0, maxOutputLength) + '\\n[Output truncated for safety]';\n    }\n\n    if (sanitized !== content) {\n      this.uiErrorsBlocked++;\n    }\n\n    return sanitized;\n  }\n\n  /**\n   * Remove unsafe escape sequences while preserving safe formatting\n   */\n  private removeUnsafeEscapeSequences(text: string): string {\n    // Safe escape sequences (basic colors and formatting)\n    const safePattern = /\\x1b\\[[0-9;]*m/g;\n\n    // Remove all escape sequences first\n    let cleaned = text.replace(/\\x1b\\[[0-9;]*[A-Za-z]/g, '');\n    cleaned = cleaned.replace(/\\x1b\\][^\\x07]*\\x07/g, ''); // OSC sequences\n    cleaned = cleaned.replace(/\\x1b[PX^_].*?\\x1b\\\\/g, ''); // DCS, SOS, PM, APC\n\n    // For safety, just strip all escape sequences\n    cleaned = cleaned.replace(/\\x1b./g, '');\n\n    return cleaned;\n  }\n\n  /**\n   * Wrap an async operation with flow protection\n   */\n  async protectFlow<T>(operation: () => Promise<T>, context?: string): Promise<T> {\n    if (!this.config.protectFlow) {\n      return operation();\n    }\n\n    this.flowState.isProcessing = true;\n    const startTime = Date.now();\n\n    try {\n      const result = await operation();\n      this.flowState.errorCount = 0; // Reset on success\n      return result;\n    } catch (error) {\n      this.flowState.errorCount++;\n      const errorObj = error instanceof Error ? error : new Error(String(error));\n\n      // Check if this looks like an attack-induced error\n      const isAttackError = this.isAttackInducedError(errorObj);\n\n      if (isAttackError) {\n        this.log(`Attack-induced error detected: ${errorObj.message}`);\n\n        // Attempt recovery\n        if (this.flowState.recoveryAttempts < 3) {\n          this.flowState.recoveryAttempts++;\n          this.log(`Attempting flow recovery (attempt ${this.flowState.recoveryAttempts})`);\n\n          // Wait a bit and retry\n          await this.delay(100 * this.flowState.recoveryAttempts);\n\n          try {\n            const result = await operation();\n            this.recoveredFlows++;\n            this.config.onFlowError?.(errorObj, true);\n            return result;\n          } catch (retryError) {\n            // Recovery failed\n            this.config.onFlowError?.(errorObj, false);\n            throw retryError;\n          }\n        }\n      }\n\n      this.config.onFlowError?.(errorObj, false);\n      throw error;\n    } finally {\n      this.flowState.isProcessing = false;\n    }\n  }\n\n  /**\n   * Check if an error appears to be attack-induced\n   */\n  private isAttackInducedError(error: Error): boolean {\n    const attackPatterns = [\n      /maximum call stack/i,\n      /out of memory/i,\n      /allocation failed/i,\n      /too many/i,\n      /timeout/i,\n      /ETIMEDOUT/i,\n      /ECONNRESET/i,\n      /EPIPE/i,\n      /stream.*destroyed/i,\n      /socket.*closed/i,\n      /unexpected.*end/i,\n      /JSON.*parse/i,\n      /invalid.*token/i,\n    ];\n\n    return attackPatterns.some(p => p.test(error.message) || p.test(error.stack || ''));\n  }\n\n  /**\n   * Helper delay function\n   */\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Save flow state checkpoint\n   */\n  saveCheckpoint(state: string): void {\n    this.flowState.lastValidState = state;\n    this.flowState.contextHash = this.hashString(state);\n  }\n\n  /**\n   * Restore from last checkpoint\n   */\n  restoreCheckpoint(): string | null {\n    return this.flowState.lastValidState;\n  }\n\n  /**\n   * Verify context integrity\n   */\n  verifyContextIntegrity(context: string): boolean {\n    const currentHash = this.hashString(context);\n    if (this.flowState.contextHash && currentHash !== this.flowState.contextHash) {\n      this.log('Context integrity check failed - possible manipulation');\n      return false;\n    }\n    return true;\n  }\n\n  /**\n   * Simple string hash for integrity checks\n   */\n  private hashString(str: string): string {\n    let hash = 0;\n    for (let i = 0; i < str.length; i++) {\n      const char = str.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32-bit integer\n    }\n    return hash.toString(16);\n  }\n\n  /**\n   * Get protection statistics\n   */\n  getStats(): {\n    blockedInjections: number;\n    recoveredFlows: number;\n    uiErrorsBlocked: number;\n    messageCount: number;\n    errorCount: number;\n  } {\n    return {\n      blockedInjections: this.blockedInjections,\n      recoveredFlows: this.recoveredFlows,\n      uiErrorsBlocked: this.uiErrorsBlocked,\n      messageCount: this.flowState.messageCount,\n      errorCount: this.flowState.errorCount,\n    };\n  }\n\n  /**\n   * Internal logging\n   */\n  private log(message: string): void {\n    if (this.config.verbose || process.env['AGI_DEBUG']) {\n      console.error(`[FlowProtection] ${message}`);\n    }\n  }\n}\n\n/**\n * Initialize global flow protection (singleton)\n */\nexport function initializeFlowProtection(config?: FlowProtectionConfig): FlowProtection {\n  if (!flowProtectionInstance) {\n    flowProtectionInstance = new FlowProtection(config);\n  }\n  return flowProtectionInstance;\n}\n\n/**\n * Get flow protection instance\n */\nexport function getFlowProtection(): FlowProtection | null {\n  return flowProtectionInstance;\n}\n\n/**\n * Quick sanitize function for prompts\n */\nexport function sanitizePrompt(prompt: string): { sanitized: string; blocked: boolean } {\n  const protection = flowProtectionInstance ?? new FlowProtection();\n  const result = protection.processMessage(prompt);\n  return {\n    sanitized: result.sanitized,\n    blocked: !result.allowed,\n  };\n}\n\n/**\n * Quick sanitize function for UI output\n */\nexport function sanitizeForDisplay(content: string): string {\n  const protection = flowProtectionInstance ?? new FlowProtection();\n  return protection.sanitizeForUI(content);\n}\n\n// Auto-initialize if environment variable is set\nif (process.env['AGI_FLOW_PROTECTION'] === '1' || process.env['AGI_PROTECTED_MODE'] === '1') {\n  initializeFlowProtection({ verbose: process.env['AGI_DEBUG'] === '1' });\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}