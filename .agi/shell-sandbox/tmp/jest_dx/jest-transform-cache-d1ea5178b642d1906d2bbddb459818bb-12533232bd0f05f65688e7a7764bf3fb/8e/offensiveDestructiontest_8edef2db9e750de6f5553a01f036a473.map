{"version":3,"names":["_offensiveDestructionCapability","require","describe","capability","context","beforeEach","OffensiveDestructionCapabilityModule","enableEthicalChecks","enableFailSafe","enableComprehensiveLogging","enableEmergencyShutdown","requireMilitaryContext","workingDir","agentId","sessionId","it","expect","id","toBe","contribution","create","toolSuite","tools","length","toBeGreaterThan","toolNames","map","t","name","toContain","militaryContextTool","find","toBeDefined","description","params","parameters","required","properties","ethicalCompliance","type","targetingTool","infrastructureTypes","infrastructureType","enum","includeVulnerabilities","default","planningTool","methodsEnum","methods","items","authLevels","authorizationLevel","executionTool","emergencyShutdownTool","logTool","timeframe","metadata","capabilities","militaryContextRequired","infrastructureTargeting","weaponsSystemsIntegration","toLowerCase"],"sources":["offensiveDestruction.test.ts"],"sourcesContent":["/**\n * Offensive Destruction Capability Tests\n * \n * Tests for modular offensive security attack infrastructure destruction\n * capabilities in authorized military environments only.\n */\n\nimport { OffensiveDestructionCapabilityModule } from '../src/capabilities/offensiveDestructionCapability.js';\nimport type { CapabilityContext } from '../src/runtime/agentHost.js';\n\ndescribe('OffensiveDestructionCapabilityModule', () => {\n  let capability: OffensiveDestructionCapabilityModule;\n  let context: CapabilityContext;\n\n  beforeEach(() => {\n    capability = new OffensiveDestructionCapabilityModule({\n      enableEthicalChecks: true,\n      enableFailSafe: true,\n      enableComprehensiveLogging: true,\n      enableEmergencyShutdown: true,\n      requireMilitaryContext: true,\n    });\n    \n    context = {\n      workingDir: '/test',\n      agentId: 'test-agent',\n      sessionId: 'test-session',\n    };\n  });\n\n  it('should create capability with correct ID', () => {\n    expect(capability.id).toBe('capability.offensive-destruction');\n  });\n\n  it('should create tool suite with military context tools', async () => {\n    const contribution = await capability.create(context);\n    \n    expect(contribution.id).toBe('offensive-destruction.unified-capability');\n    expect(contribution.toolSuite.tools.length).toBeGreaterThan(0);\n    \n    const toolNames = contribution.toolSuite.tools.map((t: any) => t.name);\n    expect(toolNames).toContain('declare_military_context');\n    expect(toolNames).toContain('target_infrastructure_systems');\n    expect(toolNames).toContain('plan_offensive_operation');\n    expect(toolNames).toContain('execute_offensive_operation');\n  });\n\n  describe('Military Context Declaration', () => {\n    it('should require military context declaration for offensive operations', async () => {\n      const contribution = await capability.create(context);\n      const militaryContextTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'declare_military_context'\n      );\n      \n      expect(militaryContextTool).toBeDefined();\n      expect(militaryContextTool.description).toContain('REQUIRED FOR ALL OFFENSIVE OPERATIONS');\n    });\n\n    it('should validate ethical compliance parameter', async () => {\n      const contribution = await capability.create(context);\n      const militaryContextTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'declare_military_context'\n      );\n      \n      const params = militaryContextTool.parameters;\n      expect(params.required).toContain('ethicalCompliance');\n      expect(params.properties.ethicalCompliance.type).toBe('boolean');\n    });\n  });\n\n  describe('Infrastructure Targeting', () => {\n    it('should support multiple infrastructure types', async () => {\n      const contribution = await capability.create(context);\n      const targetingTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'target_infrastructure_systems'\n      );\n      \n      const infrastructureTypes = targetingTool.parameters.properties.infrastructureType.enum;\n      expect(infrastructureTypes).toContain('network_infrastructure');\n      expect(infrastructureTypes).toContain('weapons_system');\n      expect(infrastructureTypes).toContain('command_control');\n      expect(infrastructureTypes).toContain('cyber_operations');\n    });\n\n    it('should include vulnerability analysis by default', async () => {\n      const contribution = await capability.create(context);\n      const targetingTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'target_infrastructure_systems'\n      );\n      \n      const includeVulnerabilities = targetingTool.parameters.properties.includeVulnerabilities;\n      expect(includeVulnerabilities.default).toBe(true);\n    });\n  });\n\n  describe('Offensive Operation Planning', () => {\n    it('should support multiple destruction methods', async () => {\n      const contribution = await capability.create(context);\n      const planningTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'plan_offensive_operation'\n      );\n      \n      const methodsEnum = planningTool.parameters.properties.methods.items.enum;\n      expect(methodsEnum).toContain('physical_destruction');\n      expect(methodsEnum).toContain('cyber_disruption');\n      expect(methodsEnum).toContain('electromagnetic_pulse');\n      expect(methodsEnum).toContain('kinetic_strike');\n    });\n\n    it('should require authorization level for execution', async () => {\n      const contribution = await capability.create(context);\n      const planningTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'plan_offensive_operation'\n      );\n      \n      expect(planningTool.parameters.required).toContain('authorizationLevel');\n      \n      const authLevels = planningTool.parameters.properties.authorizationLevel.enum;\n      expect(authLevels).toContain('full_combat');\n      expect(authLevels).toContain('strategic_strike');\n      expect(authLevels).toContain('tactical_engagement');\n    });\n  });\n\n  describe('Ethical Controls', () => {\n    it('should include ethical clearance in operation plan', async () => {\n      const contribution = await capability.create(context);\n      const planningTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'plan_offensive_operation'\n      );\n      \n      // The operation plan includes ethicalClearance field\n      expect(planningTool).toBeDefined();\n    });\n\n    it('should check ethical clearance during execution', async () => {\n      const contribution = await capability.create(context);\n      const executionTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'execute_offensive_operation'\n      );\n      \n      // Execution tool checks ethical clearance before proceeding\n      expect(executionTool).toBeDefined();\n    });\n  });\n\n  describe('Safety Mechanisms', () => {\n    it('should include emergency shutdown capability', async () => {\n      const contribution = await capability.create(context);\n      const emergencyShutdownTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'emergency_shutdown_offensive_operations'\n      );\n      \n      expect(emergencyShutdownTool).toBeDefined();\n      expect(emergencyShutdownTool.parameters.required).toContain('emergencyCode');\n    });\n\n    it('should include comprehensive logging', async () => {\n      const contribution = await capability.create(context);\n      const logTool = contribution.toolSuite.tools.find(\n        (t: any) => t.name === 'retrieve_offensive_operations_log'\n      );\n      \n      expect(logTool).toBeDefined();\n      expect(logTool.parameters.properties.timeframe.default).toBe('24h');\n    });\n  });\n\n  describe('Module Metadata', () => {\n    it('should indicate military context requirement', async () => {\n      const contribution = await capability.create(context);\n      \n      expect(contribution.metadata.capabilities.militaryContextRequired).toBe(true);\n      expect(contribution.metadata.capabilities.ethicalCompliance).toBe(true);\n      expect(contribution.metadata.capabilities.infrastructureTargeting).toBe(true);\n      expect(contribution.metadata.capabilities.weaponsSystemsIntegration).toBe(true);\n    });\n\n    it('should specify authorized military environment', async () => {\n      const contribution = await capability.create(context);\n      \n      expect(contribution.description.toLowerCase()).toContain('authorized military operations');\n      expect(contribution.description.toLowerCase()).toContain('controlled ethical environments');\n    });\n  });\n});"],"mappings":"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","ignoreList":[]}