617371afb6389cd982516dfd63f9bcba
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.OutputPatterns = void 0;
exports.analyzeOutput = analyzeOutput;
exports.createCommandCheck = createCommandCheck;
exports.safeTruncate = safeTruncate;
exports.verifiedFailure = verifiedFailure;
exports.verifiedSuccess = verifiedSuccess;
/**
 * Result Verification - Re-exported from orchestrationCapability
 * Provides verifiedSuccess, verifiedFailure, analyzeOutput, OutputPatterns, etc.
 */

// ANSI color codes for enhanced terminal output
const ANSI_RESET = '\x1b[0m';
const ANSI_RED = '\x1b[31m';
const ANSI_GREEN = '\x1b[32m';
const ANSI_YELLOW = '\x1b[33m';
const ANSI_BLUE = '\x1b[34m';
const ANSI_MAGENTA = '\x1b[35m';
const ANSI_CYAN = '\x1b[36m';
const ANSI_DIM = '\x1b[2m';
const ANSI_BOLD = '\x1b[1m';
const ANSI_RED_BOLD = '\x1b[1;31m';
const ANSI_GREEN_BOLD = '\x1b[1;32m';
const ANSI_YELLOW_BOLD = '\x1b[1;33m';
const OutputPatterns = exports.OutputPatterns = {
  git: {
    success: [/\[.+\s+\w+\]/, /pushed/i, /merged/i, /On branch/i, /nothing to commit/i, /Already up to date/i],
    failure: [/fatal:/i, /error:/i, /conflict/i, /rejected/i, /CONFLICT/, /Aborting/i]
  },
  npm: {
    success: [/npm notice/i, /\+ .+@\d+\.\d+\.\d+/, /published/i],
    failure: [/npm ERR!/i, /ERESOLVE/i, /E404/i, /EINTEGRITY/i]
  },
  command: {
    success: [/^(success|completed|done|finished)/im, /successfully/i],
    failure: [/^error/im, /^fatal/im, /failed/i, /command not found/i, /permission denied/i, /ENOENT/i, /EACCES/i]
  }
};
function formatVerifiedResult(result) {
  if (result.status === 'VERIFIED_SUCCESS') return result.details || result.summary;
  const lines = [];
  switch (result.status) {
    case 'VERIFIED_FAILURE':
      lines.push(`${ANSI_RED_BOLD}═══ FAILED ═══${ANSI_RESET}`);
      break;
    case 'UNVERIFIED':
      lines.push(`${ANSI_YELLOW_BOLD}═══ UNVERIFIED ═══${ANSI_RESET}`);
      break;
    case 'PARTIAL_SUCCESS':
      lines.push(`${ANSI_YELLOW_BOLD}═══ PARTIAL SUCCESS ═══${ANSI_RESET}`);
      break;
    case 'REQUIRES_USER_ACTION':
      lines.push(`${ANSI_CYAN}═══ ACTION REQUIRED ═══${ANSI_RESET}`);
      break;
  }
  lines.push('', result.summary, '');
  if (result.verificationChecks) {
    const failedChecks = result.verificationChecks.filter(c => !c.passed);
    if (failedChecks.length > 0) {
      lines.push('Failed checks:');
      for (const check of failedChecks) {
        lines.push(`  ${ANSI_RED}✗${ANSI_RESET} ${check.check}${check.details ? `: ${check.details}` : ''}`);
      }
      lines.push('');
    }
  }
  if (result.details) lines.push(result.details, '');
  if (result.suggestedActions?.length) {
    lines.push('Suggested actions:');
    for (const action of result.suggestedActions) lines.push(`  ${ANSI_GREEN}→${ANSI_RESET} ${action}`);
  }
  return lines.join('\n');
}
function verifiedSuccess(summary, details, checks, durationMs) {
  return formatVerifiedResult({
    status: 'VERIFIED_SUCCESS',
    summary,
    details,
    verificationChecks: checks,
    verifiedAt: new Date().toISOString(),
    durationMs
  });
}
function verifiedFailure(summary, details, suggestedActions, checks, durationMs) {
  return formatVerifiedResult({
    status: 'VERIFIED_FAILURE',
    summary,
    details,
    verificationChecks: checks,
    suggestedActions,
    verifiedAt: new Date().toISOString(),
    durationMs
  });
}
function analyzeOutput(output, patterns, exitCode) {
  const normalizedOutput = output.normalize('NFC');
  for (const pattern of patterns.failure) {
    if (pattern.test(normalizedOutput)) return {
      isSuccess: false,
      isFailure: true,
      matchedPattern: pattern.source,
      confidence: 'high'
    };
  }
  for (const pattern of patterns.success) {
    if (pattern.test(normalizedOutput)) return {
      isSuccess: true,
      isFailure: false,
      matchedPattern: pattern.source,
      confidence: 'high'
    };
  }
  if (exitCode !== undefined) {
    if (exitCode !== 0) return {
      isSuccess: false,
      isFailure: true,
      confidence: 'high'
    };
    return {
      isSuccess: false,
      isFailure: false,
      confidence: 'low'
    };
  }
  return {
    isSuccess: false,
    isFailure: false,
    confidence: 'low'
  };
}
function createCommandCheck(checkName, exitCode, output, expectedPatterns) {
  let passed = exitCode === 0;
  let details = exitCode === 0 ? 'Exit code 0' : `Exit code ${exitCode}`;
  if (expectedPatterns && passed) {
    const foundPattern = expectedPatterns.some(p => p.test(output));
    if (!foundPattern) {
      passed = false;
      details = 'Exit code 0 but expected output pattern not found';
    }
  }
  return {
    check: checkName,
    passed,
    details
  };
}
function safeTruncate(content, maxLength, _label = 'Content') {
  if (content.length <= maxLength) return content;
  const hiddenChars = content.length - maxLength;
  return `${content.slice(0, maxLength)}\n\n[... ${hiddenChars} characters truncated]`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJBTlNJX1JFU0VUIiwiQU5TSV9SRUQiLCJBTlNJX0dSRUVOIiwiQU5TSV9ZRUxMT1ciLCJBTlNJX0JMVUUiLCJBTlNJX01BR0VOVEEiLCJBTlNJX0NZQU4iLCJBTlNJX0RJTSIsIkFOU0lfQk9MRCIsIkFOU0lfUkVEX0JPTEQiLCJBTlNJX0dSRUVOX0JPTEQiLCJBTlNJX1lFTExPV19CT0xEIiwiT3V0cHV0UGF0dGVybnMiLCJleHBvcnRzIiwiZ2l0Iiwic3VjY2VzcyIsImZhaWx1cmUiLCJucG0iLCJjb21tYW5kIiwiZm9ybWF0VmVyaWZpZWRSZXN1bHQiLCJyZXN1bHQiLCJzdGF0dXMiLCJkZXRhaWxzIiwic3VtbWFyeSIsImxpbmVzIiwicHVzaCIsInZlcmlmaWNhdGlvbkNoZWNrcyIsImZhaWxlZENoZWNrcyIsImZpbHRlciIsImMiLCJwYXNzZWQiLCJsZW5ndGgiLCJjaGVjayIsInN1Z2dlc3RlZEFjdGlvbnMiLCJhY3Rpb24iLCJqb2luIiwidmVyaWZpZWRTdWNjZXNzIiwiY2hlY2tzIiwiZHVyYXRpb25NcyIsInZlcmlmaWVkQXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJ2ZXJpZmllZEZhaWx1cmUiLCJhbmFseXplT3V0cHV0Iiwib3V0cHV0IiwicGF0dGVybnMiLCJleGl0Q29kZSIsIm5vcm1hbGl6ZWRPdXRwdXQiLCJub3JtYWxpemUiLCJwYXR0ZXJuIiwidGVzdCIsImlzU3VjY2VzcyIsImlzRmFpbHVyZSIsIm1hdGNoZWRQYXR0ZXJuIiwic291cmNlIiwiY29uZmlkZW5jZSIsInVuZGVmaW5lZCIsImNyZWF0ZUNvbW1hbmRDaGVjayIsImNoZWNrTmFtZSIsImV4cGVjdGVkUGF0dGVybnMiLCJmb3VuZFBhdHRlcm4iLCJzb21lIiwicCIsInNhZmVUcnVuY2F0ZSIsImNvbnRlbnQiLCJtYXhMZW5ndGgiLCJfbGFiZWwiLCJoaWRkZW5DaGFycyIsInNsaWNlIl0sInNvdXJjZXMiOlsicmVzdWx0VmVyaWZpY2F0aW9uLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogUmVzdWx0IFZlcmlmaWNhdGlvbiAtIFJlLWV4cG9ydGVkIGZyb20gb3JjaGVzdHJhdGlvbkNhcGFiaWxpdHlcbiAqIFByb3ZpZGVzIHZlcmlmaWVkU3VjY2VzcywgdmVyaWZpZWRGYWlsdXJlLCBhbmFseXplT3V0cHV0LCBPdXRwdXRQYXR0ZXJucywgZXRjLlxuICovXG5cbi8vIEFOU0kgY29sb3IgY29kZXMgZm9yIGVuaGFuY2VkIHRlcm1pbmFsIG91dHB1dFxuY29uc3QgQU5TSV9SRVNFVCA9ICdcXHgxYlswbSc7XG5jb25zdCBBTlNJX1JFRCA9ICdcXHgxYlszMW0nO1xuY29uc3QgQU5TSV9HUkVFTiA9ICdcXHgxYlszMm0nO1xuY29uc3QgQU5TSV9ZRUxMT1cgPSAnXFx4MWJbMzNtJztcbmNvbnN0IEFOU0lfQkxVRSA9ICdcXHgxYlszNG0nO1xuY29uc3QgQU5TSV9NQUdFTlRBID0gJ1xceDFiWzM1bSc7XG5jb25zdCBBTlNJX0NZQU4gPSAnXFx4MWJbMzZtJztcbmNvbnN0IEFOU0lfRElNID0gJ1xceDFiWzJtJztcbmNvbnN0IEFOU0lfQk9MRCA9ICdcXHgxYlsxbSc7XG5jb25zdCBBTlNJX1JFRF9CT0xEID0gJ1xceDFiWzE7MzFtJztcbmNvbnN0IEFOU0lfR1JFRU5fQk9MRCA9ICdcXHgxYlsxOzMybSc7XG5jb25zdCBBTlNJX1lFTExPV19CT0xEID0gJ1xceDFiWzE7MzNtJztcblxuZXhwb3J0IHR5cGUgVmVyaWZpY2F0aW9uU3RhdHVzID1cbiAgfCAnVkVSSUZJRURfU1VDQ0VTUydcbiAgfCAnVkVSSUZJRURfRkFJTFVSRSdcbiAgfCAnVU5WRVJJRklFRCdcbiAgfCAnUEFSVElBTF9TVUNDRVNTJ1xuICB8ICdSRVFVSVJFU19VU0VSX0FDVElPTic7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVmVyaWZpZWRSZXN1bHQge1xuICBzdGF0dXM6IFZlcmlmaWNhdGlvblN0YXR1cztcbiAgc3VtbWFyeTogc3RyaW5nO1xuICBkZXRhaWxzOiBzdHJpbmc7XG4gIHZlcmlmaWNhdGlvbkNoZWNrcz86IFZlcmlmaWNhdGlvbkNoZWNrW107XG4gIHN1Z2dlc3RlZEFjdGlvbnM/OiBzdHJpbmdbXTtcbiAgdmVyaWZpZWRBdDogc3RyaW5nO1xuICBkdXJhdGlvbk1zPzogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFZlcmlmaWNhdGlvbkNoZWNrIHtcbiAgY2hlY2s6IHN0cmluZztcbiAgcGFzc2VkOiBib29sZWFuO1xuICBkZXRhaWxzPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY29uc3QgT3V0cHV0UGF0dGVybnMgPSB7XG4gIGdpdDoge1xuICAgIHN1Y2Nlc3M6IFsvXFxbLitcXHMrXFx3K1xcXS8sIC9wdXNoZWQvaSwgL21lcmdlZC9pLCAvT24gYnJhbmNoL2ksIC9ub3RoaW5nIHRvIGNvbW1pdC9pLCAvQWxyZWFkeSB1cCB0byBkYXRlL2ldLFxuICAgIGZhaWx1cmU6IFsvZmF0YWw6L2ksIC9lcnJvcjovaSwgL2NvbmZsaWN0L2ksIC9yZWplY3RlZC9pLCAvQ09ORkxJQ1QvLCAvQWJvcnRpbmcvaV0sXG4gIH0sXG4gIG5wbToge1xuICAgIHN1Y2Nlc3M6IFsvbnBtIG5vdGljZS9pLCAvXFwrIC4rQFxcZCtcXC5cXGQrXFwuXFxkKy8sIC9wdWJsaXNoZWQvaV0sXG4gICAgZmFpbHVyZTogWy9ucG0gRVJSIS9pLCAvRVJFU09MVkUvaSwgL0U0MDQvaSwgL0VJTlRFR1JJVFkvaV0sXG4gIH0sXG4gIGNvbW1hbmQ6IHtcbiAgICBzdWNjZXNzOiBbL14oc3VjY2Vzc3xjb21wbGV0ZWR8ZG9uZXxmaW5pc2hlZCkvaW0sIC9zdWNjZXNzZnVsbHkvaV0sXG4gICAgZmFpbHVyZTogWy9eZXJyb3IvaW0sIC9eZmF0YWwvaW0sIC9mYWlsZWQvaSwgL2NvbW1hbmQgbm90IGZvdW5kL2ksIC9wZXJtaXNzaW9uIGRlbmllZC9pLCAvRU5PRU5UL2ksIC9FQUNDRVMvaV0sXG4gIH0sXG59O1xuXG5mdW5jdGlvbiBmb3JtYXRWZXJpZmllZFJlc3VsdChyZXN1bHQ6IFZlcmlmaWVkUmVzdWx0KTogc3RyaW5nIHtcbiAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdWRVJJRklFRF9TVUNDRVNTJykgcmV0dXJuIHJlc3VsdC5kZXRhaWxzIHx8IHJlc3VsdC5zdW1tYXJ5O1xuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgc3dpdGNoIChyZXN1bHQuc3RhdHVzKSB7XG4gICAgY2FzZSAnVkVSSUZJRURfRkFJTFVSRSc6IGxpbmVzLnB1c2goYCR7QU5TSV9SRURfQk9MRH3ilZDilZDilZAgRkFJTEVEIOKVkOKVkOKVkCR7QU5TSV9SRVNFVH1gKTsgYnJlYWs7XG4gICAgY2FzZSAnVU5WRVJJRklFRCc6IGxpbmVzLnB1c2goYCR7QU5TSV9ZRUxMT1dfQk9MRH3ilZDilZDilZAgVU5WRVJJRklFRCDilZDilZDilZAke0FOU0lfUkVTRVR9YCk7IGJyZWFrO1xuICAgIGNhc2UgJ1BBUlRJQUxfU1VDQ0VTUyc6IGxpbmVzLnB1c2goYCR7QU5TSV9ZRUxMT1dfQk9MRH3ilZDilZDilZAgUEFSVElBTCBTVUNDRVNTIOKVkOKVkOKVkCR7QU5TSV9SRVNFVH1gKTsgYnJlYWs7XG4gICAgY2FzZSAnUkVRVUlSRVNfVVNFUl9BQ1RJT04nOiBsaW5lcy5wdXNoKGAke0FOU0lfQ1lBTn3ilZDilZDilZAgQUNUSU9OIFJFUVVJUkVEIOKVkOKVkOKVkCR7QU5TSV9SRVNFVH1gKTsgYnJlYWs7XG4gIH1cbiAgbGluZXMucHVzaCgnJywgcmVzdWx0LnN1bW1hcnksICcnKTtcbiAgaWYgKHJlc3VsdC52ZXJpZmljYXRpb25DaGVja3MpIHtcbiAgICBjb25zdCBmYWlsZWRDaGVja3MgPSByZXN1bHQudmVyaWZpY2F0aW9uQ2hlY2tzLmZpbHRlcihjID0+ICFjLnBhc3NlZCk7XG4gICAgaWYgKGZhaWxlZENoZWNrcy5sZW5ndGggPiAwKSB7XG4gICAgICBsaW5lcy5wdXNoKCdGYWlsZWQgY2hlY2tzOicpO1xuICAgICAgZm9yIChjb25zdCBjaGVjayBvZiBmYWlsZWRDaGVja3MpIHtcbiAgICAgICAgbGluZXMucHVzaChgICAke0FOU0lfUkVEfeKclyR7QU5TSV9SRVNFVH0gJHtjaGVjay5jaGVja30ke2NoZWNrLmRldGFpbHMgPyBgOiAke2NoZWNrLmRldGFpbHN9YCA6ICcnfWApO1xuICAgICAgfVxuICAgICAgbGluZXMucHVzaCgnJyk7XG4gICAgfVxuICB9XG4gIGlmIChyZXN1bHQuZGV0YWlscykgbGluZXMucHVzaChyZXN1bHQuZGV0YWlscywgJycpO1xuICBpZiAocmVzdWx0LnN1Z2dlc3RlZEFjdGlvbnM/Lmxlbmd0aCkge1xuICAgIGxpbmVzLnB1c2goJ1N1Z2dlc3RlZCBhY3Rpb25zOicpO1xuICAgIGZvciAoY29uc3QgYWN0aW9uIG9mIHJlc3VsdC5zdWdnZXN0ZWRBY3Rpb25zKSBsaW5lcy5wdXNoKGAgICR7QU5TSV9HUkVFTn3ihpIke0FOU0lfUkVTRVR9ICR7YWN0aW9ufWApO1xuICB9XG4gIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmaWVkU3VjY2VzcyhcbiAgc3VtbWFyeTogc3RyaW5nLFxuICBkZXRhaWxzOiBzdHJpbmcsXG4gIGNoZWNrcz86IFZlcmlmaWNhdGlvbkNoZWNrW10sXG4gIGR1cmF0aW9uTXM/OiBudW1iZXJcbik6IHN0cmluZyB7XG4gIHJldHVybiBmb3JtYXRWZXJpZmllZFJlc3VsdCh7XG4gICAgc3RhdHVzOiAnVkVSSUZJRURfU1VDQ0VTUycsXG4gICAgc3VtbWFyeSxcbiAgICBkZXRhaWxzLFxuICAgIHZlcmlmaWNhdGlvbkNoZWNrczogY2hlY2tzLFxuICAgIHZlcmlmaWVkQXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICBkdXJhdGlvbk1zLFxuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHZlcmlmaWVkRmFpbHVyZShcbiAgc3VtbWFyeTogc3RyaW5nLFxuICBkZXRhaWxzOiBzdHJpbmcsXG4gIHN1Z2dlc3RlZEFjdGlvbnM/OiBzdHJpbmdbXSxcbiAgY2hlY2tzPzogVmVyaWZpY2F0aW9uQ2hlY2tbXSxcbiAgZHVyYXRpb25Ncz86IG51bWJlclxuKTogc3RyaW5nIHtcbiAgcmV0dXJuIGZvcm1hdFZlcmlmaWVkUmVzdWx0KHtcbiAgICBzdGF0dXM6ICdWRVJJRklFRF9GQUlMVVJFJyxcbiAgICBzdW1tYXJ5LFxuICAgIGRldGFpbHMsXG4gICAgdmVyaWZpY2F0aW9uQ2hlY2tzOiBjaGVja3MsXG4gICAgc3VnZ2VzdGVkQWN0aW9ucyxcbiAgICB2ZXJpZmllZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgZHVyYXRpb25NcyxcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhbmFseXplT3V0cHV0KFxuICBvdXRwdXQ6IHN0cmluZyxcbiAgcGF0dGVybnM6IHsgc3VjY2VzczogUmVnRXhwW107IGZhaWx1cmU6IFJlZ0V4cFtdIH0sXG4gIGV4aXRDb2RlPzogbnVtYmVyXG4pOiB7IGlzU3VjY2VzczogYm9vbGVhbjsgaXNGYWlsdXJlOiBib29sZWFuOyBtYXRjaGVkUGF0dGVybj86IHN0cmluZzsgY29uZmlkZW5jZTogJ2hpZ2gnIHwgJ21lZGl1bScgfCAnbG93JyB9IHtcbiAgY29uc3Qgbm9ybWFsaXplZE91dHB1dCA9IG91dHB1dC5ub3JtYWxpemUoJ05GQycpO1xuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMuZmFpbHVyZSkge1xuICAgIGlmIChwYXR0ZXJuLnRlc3Qobm9ybWFsaXplZE91dHB1dCkpIHJldHVybiB7IGlzU3VjY2VzczogZmFsc2UsIGlzRmFpbHVyZTogdHJ1ZSwgbWF0Y2hlZFBhdHRlcm46IHBhdHRlcm4uc291cmNlLCBjb25maWRlbmNlOiAnaGlnaCcgfTtcbiAgfVxuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMuc3VjY2Vzcykge1xuICAgIGlmIChwYXR0ZXJuLnRlc3Qobm9ybWFsaXplZE91dHB1dCkpIHJldHVybiB7IGlzU3VjY2VzczogdHJ1ZSwgaXNGYWlsdXJlOiBmYWxzZSwgbWF0Y2hlZFBhdHRlcm46IHBhdHRlcm4uc291cmNlLCBjb25maWRlbmNlOiAnaGlnaCcgfTtcbiAgfVxuICBpZiAoZXhpdENvZGUgIT09IHVuZGVmaW5lZCkge1xuICAgIGlmIChleGl0Q29kZSAhPT0gMCkgcmV0dXJuIHsgaXNTdWNjZXNzOiBmYWxzZSwgaXNGYWlsdXJlOiB0cnVlLCBjb25maWRlbmNlOiAnaGlnaCcgfTtcbiAgICByZXR1cm4geyBpc1N1Y2Nlc3M6IGZhbHNlLCBpc0ZhaWx1cmU6IGZhbHNlLCBjb25maWRlbmNlOiAnbG93JyB9O1xuICB9XG4gIHJldHVybiB7IGlzU3VjY2VzczogZmFsc2UsIGlzRmFpbHVyZTogZmFsc2UsIGNvbmZpZGVuY2U6ICdsb3cnIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVDb21tYW5kQ2hlY2soXG4gIGNoZWNrTmFtZTogc3RyaW5nLFxuICBleGl0Q29kZTogbnVtYmVyLFxuICBvdXRwdXQ6IHN0cmluZyxcbiAgZXhwZWN0ZWRQYXR0ZXJucz86IFJlZ0V4cFtdXG4pOiBWZXJpZmljYXRpb25DaGVjayB7XG4gIGxldCBwYXNzZWQgPSBleGl0Q29kZSA9PT0gMDtcbiAgbGV0IGRldGFpbHMgPSBleGl0Q29kZSA9PT0gMCA/ICdFeGl0IGNvZGUgMCcgOiBgRXhpdCBjb2RlICR7ZXhpdENvZGV9YDtcbiAgaWYgKGV4cGVjdGVkUGF0dGVybnMgJiYgcGFzc2VkKSB7XG4gICAgY29uc3QgZm91bmRQYXR0ZXJuID0gZXhwZWN0ZWRQYXR0ZXJucy5zb21lKChwKSA9PiBwLnRlc3Qob3V0cHV0KSk7XG4gICAgaWYgKCFmb3VuZFBhdHRlcm4pIHtcbiAgICAgIHBhc3NlZCA9IGZhbHNlO1xuICAgICAgZGV0YWlscyA9ICdFeGl0IGNvZGUgMCBidXQgZXhwZWN0ZWQgb3V0cHV0IHBhdHRlcm4gbm90IGZvdW5kJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHsgY2hlY2s6IGNoZWNrTmFtZSwgcGFzc2VkLCBkZXRhaWxzIH07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYWZlVHJ1bmNhdGUoY29udGVudDogc3RyaW5nLCBtYXhMZW5ndGg6IG51bWJlciwgX2xhYmVsOiBzdHJpbmcgPSAnQ29udGVudCcpOiBzdHJpbmcge1xuICBpZiAoY29udGVudC5sZW5ndGggPD0gbWF4TGVuZ3RoKSByZXR1cm4gY29udGVudDtcbiAgY29uc3QgaGlkZGVuQ2hhcnMgPSBjb250ZW50Lmxlbmd0aCAtIG1heExlbmd0aDtcbiAgcmV0dXJuIGAke2NvbnRlbnQuc2xpY2UoMCwgbWF4TGVuZ3RoKX1cXG5cXG5bLi4uICR7aGlkZGVuQ2hhcnN9IGNoYXJhY3RlcnMgdHJ1bmNhdGVkXWA7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxNQUFNQSxVQUFVLEdBQUcsU0FBUztBQUM1QixNQUFNQyxRQUFRLEdBQUcsVUFBVTtBQUMzQixNQUFNQyxVQUFVLEdBQUcsVUFBVTtBQUM3QixNQUFNQyxXQUFXLEdBQUcsVUFBVTtBQUM5QixNQUFNQyxTQUFTLEdBQUcsVUFBVTtBQUM1QixNQUFNQyxZQUFZLEdBQUcsVUFBVTtBQUMvQixNQUFNQyxTQUFTLEdBQUcsVUFBVTtBQUM1QixNQUFNQyxRQUFRLEdBQUcsU0FBUztBQUMxQixNQUFNQyxTQUFTLEdBQUcsU0FBUztBQUMzQixNQUFNQyxhQUFhLEdBQUcsWUFBWTtBQUNsQyxNQUFNQyxlQUFlLEdBQUcsWUFBWTtBQUNwQyxNQUFNQyxnQkFBZ0IsR0FBRyxZQUFZO0FBeUI5QixNQUFNQyxjQUFjLEdBQUFDLE9BQUEsQ0FBQUQsY0FBQSxHQUFHO0VBQzVCRSxHQUFHLEVBQUU7SUFDSEMsT0FBTyxFQUFFLENBQUMsY0FBYyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLG9CQUFvQixFQUFFLHFCQUFxQixDQUFDO0lBQzFHQyxPQUFPLEVBQUUsQ0FBQyxTQUFTLEVBQUUsU0FBUyxFQUFFLFdBQVcsRUFBRSxXQUFXLEVBQUUsVUFBVSxFQUFFLFdBQVc7RUFDbkYsQ0FBQztFQUNEQyxHQUFHLEVBQUU7SUFDSEYsT0FB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T0FBTyxDQUFDSyxNQUFNO01BQUVDLFVBQVUsRUFBRTtJQUFPLENBQUM7RUFDdEk7RUFDQSxJQUFJVCxRQUFRLEtBQUtVLFNBQVMsRUFBRTtJQUMxQixJQUFJVixRQUFRLEtBQUssQ0FBQyxFQUFFLE9BQU87TUFBRUssU0FBUyxFQUFFLEtBQUs7TUFBRUMsU0FBUyxFQUFFLElBQUk7TUFBRUcsVUFBVSxFQUFFO0lBQU8sQ0FBQztJQUNwRixPQUFPO01BQUVKLFNBQVMsRUFBRSxLQUFLO01BQUVDLFNBQVMsRUFBRSxLQUFLO01BQUVHLFVBQVUsRUFBRTtJQUFNLENBQUM7RUFDbEU7RUFDQSxPQUFPO0lBQUVKLFNBQVMsRUFBRSxLQUFLO0lBQUVDLFNBQVMsRUFBRSxLQUFLO0lBQUVHLFVBQVUsRUFBRTtFQUFNLENBQUM7QUFDbEU7QUFFTyxTQUFTRSxrQkFBa0JBLENBQ2hDQyxTQUFpQixFQUNqQlosUUFBZ0IsRUFDaEJGLE1BQWMsRUFDZGUsZ0JBQTJCLEVBQ1I7RUFDbkIsSUFBSTdCLE1BQU0sR0FBR2dCLFFBQVEsS0FBSyxDQUFDO0VBQzNCLElBQUl4QixPQUFPLEdBQUd3QixRQUFRLEtBQUssQ0FBQyxHQUFHLGFBQWEsR0FBRyxhQUFhQSxRQUFRLEVBQUU7RUFDdEUsSUFBSWEsZ0JBQWdCLElBQUk3QixNQUFNLEVBQUU7SUFDOUIsTUFBTThCLFlBQVksR0FBR0QsZ0JBQWdCLENBQUNFLElBQUksQ0FBRUMsQ0FBQyxJQUFLQSxDQUFDLENBQUNaLElBQUksQ0FBQ04sTUFBTSxDQUFDLENBQUM7SUFDakUsSUFBSSxDQUFDZ0IsWUFBWSxFQUFFO01BQ2pCOUIsTUFBTSxHQUFHLEtBQUs7TUFDZFIsT0FBTyxHQUFHLG1EQUFtRDtJQUMvRDtFQUNGO0VBQ0EsT0FBTztJQUFFVSxLQUFLLEVBQUUwQixTQUFTO0lBQUU1QixNQUFNO0lBQUVSO0VBQVEsQ0FBQztBQUM5QztBQUVPLFNBQVN5QyxZQUFZQSxDQUFDQyxPQUFlLEVBQUVDLFNBQWlCLEVBQUVDLE1BQWMsR0FBRyxTQUFTLEVBQVU7RUFDbkcsSUFBSUYsT0FBTyxDQUFDakMsTUFBTSxJQUFJa0MsU0FBUyxFQUFFLE9BQU9ELE9BQU87RUFDL0MsTUFBTUcsV0FBVyxHQUFHSCxPQUFPLENBQUNqQyxNQUFNLEdBQUdrQyxTQUFTO0VBQzlDLE9BQU8sR0FBR0QsT0FBTyxDQUFDSSxLQUFLLENBQUMsQ0FBQyxFQUFFSCxTQUFTLENBQUMsWUFBWUUsV0FBVyx3QkFBd0I7QUFDdEYiLCJpZ25vcmVMaXN0IjpbXX0=