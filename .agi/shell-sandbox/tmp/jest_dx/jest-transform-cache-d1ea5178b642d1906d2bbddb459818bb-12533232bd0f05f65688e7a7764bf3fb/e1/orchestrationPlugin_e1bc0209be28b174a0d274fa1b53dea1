dd51293662a30f9e843960cdabc935fa
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createOrchestrationToolPlugin = createOrchestrationToolPlugin;
var _nodeChild_process = require("node:child_process");
var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeUtil = require("node:util");
const execAsync = (0, _nodeUtil.promisify)(_nodeChild_process.exec);
class OrchestrationToolkit {
  recentRuns = [];
  constructor(workingDir, env) {
    this.workingDir = workingDir;
    this.env = env;
  }
  record(run) {
    this.recentRuns.push(run);
    // Keep a short history to avoid unbounded growth
    if (this.recentRuns.length > 10) {
      this.recentRuns.splice(0, this.recentRuns.length - 10);
    }
  }
  formatRun(run, label, dryRun = false, failureReason) {
    const status = dryRun ? 'SKIPPED (dry-run)' : run.status === 'success' ? 'OK' : 'FAILED';
    const lines = [`[${status}] ${label ?? run.command}`, `cmd: ${run.command}`, `time: ${run.durationMs}ms`];
    if (run.stdout) {
      lines.push('stdout:', run.stdout);
    } else {
      lines.push('stdout: (empty)');
    }
    if (run.stderr) {
      lines.push('stderr:', run.stderr);
    } else {
      lines.push('stderr: (empty)');
    }
    if (failureReason && !run.stderr) {
      lines.push(`reason: ${failureReason}`);
    }
    return lines.join('\n');
  }
  truncate(text, max = 4000) {
    if (text.length <= max) return text;
    return `${text.slice(0, max)}\n...[truncated ${text.length - max} chars]`;
  }
  async runCommand(command, options = {}, label) {
    const cwd = options.cwd ?? this.workingDir;
    const dryRun = Boolean(options.dryRun);
    const startedAt = Date.now();
    if (dryRun) {
      const run = {
        command,
        status: 'skipped',
        durationMs: 0,
        stdout: '',
        stderr: 'dry-run',
        startedAt
      };
      this.record(run);
      return this.formatRun(run, label, true);
    }
    try {
      const {
        stdout,
        stderr
      } = await execAsync(command, {
        cwd,
        env: this.env,
        maxBuffer: 8 * 1024 * 1024
      });
      const run = {
        command,
        status: 'success',
        durationMs: Date.now() - startedAt,
        stdout: this.truncate(stdout?.toString().trim() ?? ''),
        stderr: this.truncate(stderr?.toString().trim() ?? ''),
        startedAt
      };
      this.record(run);
      return this.formatRun(run, label);
    } catch (error) {
      const run = {
        command,
        status: 'failure',
        durationMs: Date.now() - startedAt,
        stdout: this.truncate(error?.stdout?.toString().trim?.() ?? ''),
        stderr: this.truncate(error?.stderr?.toString().trim?.() ?? error?.message ?? ''),
        startedAt
      };
      this.record(run);
      return this.formatRun(run, label, false, error?.message);
    }
  }
  async runQualityGate(args = {}) {
    const steps = args.steps?.length ? args.steps : ['build', 'lint', 'type-check', 'test', 'health'];
    const outputs = [];
    for (const step of steps) {
      switch (step) {
        case 'build':
          outputs.push(await this.runCommand(args.buildCommand ?? 'npm run build', args, 'build'));
          break;
        case 'lint':
          outputs.push(await this.runCommand(args.lintCommand ?? 'npm run lint', args, 'lint'));
          break;
        case 'type-check':
          outputs.push(await this.runCommand(args.typecheckCommand ?? 'npm run type-check', args, 'type-check'));
          break;
        case 'test':
          outputs.push(await this.runCommand(args.testCommand ?? 'npm test -- --runInBand', args, 'test'));
          break;
        case 'health':
          {
            const command = args.healthCommand ?? ((0, _nodeFs.existsSync)((0, _nodePath.join)(this.workingDir, 'scripts', 'health-check.mjs')) ? 'node scripts/health-check.mjs' : null);
            outputs.push(command ? await this.runCommand(command, args, 'health-check') : '[SKIPPED] health-check\nreason: scripts/health-check.mjs not found');
            break;
          }
        default:
          outputs.push(`[SKIPPED] ${step}\nreason: unknown step`);
      }
    }
    return outputs.join('\n\n');
  }
  analyzeErrors({
    error,
    log
  } = {}) {
    const recentFailure = [...this.recentRuns].reverse().find(run => run.status === 'failure');
    const hints = [];
    const source = [error ?? '', log ?? '', recentFailure?.stderr ?? '', recentFailure?.stdout ?? ''].join(' ').toLowerCase();
    if (source.includes('tsc') || source.includes('type')) {
      hints.push('Re-run type checks locally: npm run type-check');
    }
    if (source.includes('eslint') || source.includes('lint')) {
      hints.push('Fix lint failures or run npm run lint -- --fix');
    }
    if (source.includes('test')) {
      hints.push('Inspect failing test output and rerun with npm test -- --runInBand');
    }
    if (!hints.length) {
      hints.push('Review recent command output; retry with --verbose or enable debug logging.');
    }
    const failureContext = recentFailure ? `Last failure: ${recentFailure.command} (${recentFailure.durationMs}ms)` : 'No previous failures recorded.';
    return ['Orchestration Error Analysis', failureContext, `Error: ${error ?? 'n/a'}`, `Hints: ${hints.join(' | ')}`].join('\n');
  }
  verifyResult({
    expected,
    actual,
    tolerance = 0
  } = {}) {
    if (expected == null && actual == null) {
      return 'verification: no inputs provided';
    }
    const expectedNum = typeof expected === 'number' ? expected : Number.isFinite(Number(expected)) ? Number(expected) : null;
    const actualNum = typeof actual === 'number' ? actual : Number.isFinite(Number(actual)) ? Number(actual) : null;
    if (expectedNum !== null && actualNum !== null) {
      const delta = Math.abs(expectedNum - actualNum);
      const pass = delta <= tolerance;
      return `verification: ${pass ? 'pass' : 'fail'} (${actualNum} vs ${expectedNum}, tolerance ${tolerance})`;
    }
    if (expected && actual) {
      const pass = String(actual).toLowerCase().includes(String(expected).toLowerCase());
      return `verification: ${pass ? 'pass' : 'fail'} (expected to find "${expected}" in "${actual}")`;
    }
    return `verification: incomplete (expected=${expected ?? 'n/a'}, actual=${actual ?? 'n/a'})`;
  }
  generateHypothesis({
    objective,
    context,
    nextStepHint
  } = {}) {
    const lines = ['Hypothesis', `Objective: ${objective ?? 'unspecified'}`, context ? `Context: ${context}` : 'Context: n/a', `Next step: ${nextStepHint ?? 'Run quality gate then iterate on failures.'}`];
    return lines.join('\n');
  }
  summarizeRecentRuns() {
    if (!this.recentRuns.length) {
      return 'No orchestration runs recorded yet. Execute run_build/run_tests/quality_gate to capture telemetry.';
    }
    const lines = this.recentRuns.slice(-5).map(run => {
      const status = run.status === 'success' ? 'ok' : run.status === 'failure' ? 'fail' : 'skip';
      return `[${status}] ${run.command} (${run.durationMs}ms)`;
    });
    return ['Recent orchestration runs:', ...lines].join('\n');
  }
}
class OrchestrationCapabilityModule {
  id = 'orchestration.tools.unified';
  description = 'Unified orchestration toolkit';
  constructor(workingDir, env) {
    this.workingDir = workingDir;
    this.env = env;
  }
  async create(context) {
    const toolkit = new OrchestrationToolkit(context.workingDir ?? this.workingDir, {
      ...this.env,
      ...context.env
    });
    const orchestrationTools = [{
      name: 'run_build',
      description: 'Run project build (default: npm run build).',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Override build command'
          },
          cwd: {
            type: 'string',
            description: 'Working directory to use'
          },
          dryRun: {
            type: 'boolean',
            description: 'Skip execution and report intent only'
          }
        }
      },
      handler: async (args = {}) => toolkit.runCommand(args.command ?? 'npm run build', args, 'build')
    }, {
      name: 'run_lint',
      description: 'Run linting (default: npm run lint).',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Override lint command'
          },
          cwd: {
            type: 'string'
          },
          dryRun: {
            type: 'boolean'
          }
        }
      },
      handler: async (args = {}) => toolkit.runCommand(args.command ?? 'npm run lint', args, 'lint')
    }, {
      name: 'run_type_check',
      description: 'Run type checks (default: npm run type-check).',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Override type-check command'
          },
          cwd: {
            type: 'string'
          },
          dryRun: {
            type: 'boolean'
          }
        }
      },
      handler: async (args = {}) => toolkit.runCommand(args.command ?? 'npm run type-check', args, 'type-check')
    }, {
      name: 'run_tests',
      description: 'Run tests (default: npm test -- --runInBand).',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Override test command'
          },
          cwd: {
            type: 'string'
          },
          dryRun: {
            type: 'boolean'
          }
        }
      },
      handler: async (args = {}) => toolkit.runCommand(args.command ?? 'npm test -- --runInBand', args, 'tests')
    }, {
      name: 'quality_gate',
      description: 'Run build + lint + type-check + tests (+ optional health check).',
      parameters: {
        type: 'object',
        properties: {
          steps: {
            type: 'array',
            description: 'Ordered steps to run',
            items: {
              type: 'string'
            }
          },
          buildCommand: {
            type: 'string'
          },
          lintCommand: {
            type: 'string'
          },
          typecheckCommand: {
            type: 'string'
          },
          testCommand: {
            type: 'string'
          },
          healthCommand: {
            type: 'string'
          },
          cwd: {
            type: 'string'
          },
          dryRun: {
            type: 'boolean'
          }
        }
      },
      handler: async (args = {}) => toolkit.runQualityGate(args)
    }, {
      name: 'analyze_errors',
      description: 'Analyze execution errors and suggest remediations.',
      parameters: {
        type: 'object',
        properties: {
          error: {
            type: 'string'
          },
          log: {
            type: 'string'
          }
        }
      },
      handler: async (args = {}) => toolkit.analyzeErrors(args)
    }, {
      name: 'verify_result',
      description: 'Verify a result for correctness or tolerance.',
      parameters: {
        type: 'object',
        properties: {
          expected: {
            type: 'string',
            description: 'Expected value (text or number as text)'
          },
          actual: {
            type: 'string',
            description: 'Actual value (text or number as text)'
          },
          tolerance: {
            type: 'number',
            description: 'Numeric delta tolerance'
          }
        }
      },
      handler: async (args = {}) => toolkit.verifyResult(args)
    }, {
      name: 'hypothesis',
      description: 'Generate and test a hypothesis.',
      parameters: {
        type: 'object',
        properties: {
          objective: {
            type: 'string'
          },
          context: {
            type: 'string'
          },
          nextStepHint: {
            type: 'string'
          }
        }
      },
      handler: async (args = {}) => toolkit.generateHypothesis(args)
    }, {
      name: 'summarize_orchestration',
      description: 'Summarize the most recent orchestration runs.',
      handler: async () => toolkit.summarizeRecentRuns()
    }];
    const toolSuite = {
      id: 'orchestration.tools.unified',
      description: 'Core orchestration helpers for build/test/quality flows.',
      tools: orchestrationTools
    };
    return {
      id: this.id,
      description: this.description,
      toolSuite
    };
  }
}
function createOrchestrationToolPlugin() {
  return {
    id: 'tool.orchestration.unified',
    description: 'Unified orchestration toolkit (build, test, quality, telemetry).',
    targets: ['universal'],
    create: context => new OrchestrationCapabilityModule(context.workingDir, {
      ...process.env,
      ...context.env
    })
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUNoaWxkX3Byb2Nlc3MiLCJyZXF1aXJlIiwiX25vZGVGcyIsIl9ub2RlUGF0aCIsIl9ub2RlVXRpbCIsImV4ZWNBc3luYyIsInByb21pc2lmeSIsImV4ZWMiLCJPcmNoZXN0cmF0aW9uVG9vbGtpdCIsInJlY2VudFJ1bnMiLCJjb25zdHJ1Y3RvciIsIndvcmtpbmdEaXIiLCJlbnYiLCJyZWNvcmQiLCJydW4iLCJwdXNoIiwibGVuZ3RoIiwic3BsaWNlIiwiZm9ybWF0UnVuIiwibGFiZWwiLCJkcnlSdW4iLCJmYWlsdXJlUmVhc29uIiwic3RhdHVzIiwibGluZXMiLCJjb21tYW5kIiwiZHVyYXRpb25NcyIsInN0ZG91dCIsInN0ZGVyciIsImpvaW4iLCJ0cnVuY2F0ZSIsInRleHQiLCJtYXgiLCJzbGljZSIsInJ1bkNvbW1hbmQiLCJvcHRpb25zIiwiY3dkIiwiQm9vbGVhbiIsInN0YXJ0ZWRBdCIsIkRhdGUiLCJub3ciLCJtYXhCdWZmZXIiLCJ0b1N0cmluZyIsInRyaW0iLCJlcnJvciIsIm1lc3NhZ2UiLCJydW5RdWFsaXR5R2F0ZSIsImFyZ3MiLCJzdGVwcyIsIm91dHB1dHMiLCJzdGVwIiwiYnVpbGRDb21tYW5kIiwibGludENvbW1hbmQiLCJ0eXBlY2hlY2tDb21tYW5kIiwidGVzdENvbW1hbmQiLCJoZWFsdGhDb21tYW5kIiwiZXhpc3RzU3luYyIsImFuYWx5emVFcnJvcnMiLCJsb2ciLCJyZWNlbnRGYWlsdXJlIiwicmV2ZXJzZSIsImZpbmQiLCJoaW50cyIsInNvdXJjZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJmYWlsdXJlQ29udGV4dCIsInZlcmlmeVJlc3VsdCIsImV4cGVjdGVkIiwiYWN0dWFsIiwidG9sZXJhbmNlIiwiZXhwZWN0ZWROdW0iLCJOdW1iZXIiLCJpc0Zpbml0ZSIsImFjdHVhbE51bSIsImRlbHRhIiwiTWF0aCIsImFicyIsInBhc3MiLCJTdHJpbmciLCJnZW5lcmF0ZUh5cG90aGVzaXMiLCJvYmplY3RpdmUiLCJjb250ZXh0IiwibmV4dFN0ZXBIaW50Iiwic3VtbWFyaXplUmVjZW50UnVucyIsIm1hcCIsIk9yY2hlc3RyYXRpb25DYXBhYmlsaXR5TW9kdWxlIiwiaWQiLCJkZXNjcmlwdGlvbiIsImNyZWF0ZSIsInRvb2xraXQiLCJvcmNoZXN0cmF0aW9uVG9vbHMiLCJuYW1lIiwicGFyYW1ldGVycyIsInR5cGUiLCJwcm9wZXJ0aWVzIiwiaGFuZGxlciIsIml0ZW1zIiwidG9vbFN1aXRlIiwidG9vbHMiLCJjcmVhdGVPcmNoZXN0cmF0aW9uVG9vbFBsdWdpbiIsInRhcmdldHMiLCJwcm9jZXNzIl0sInNvdXJjZXMiOlsib3JjaGVzdHJhdGlvblBsdWdpbi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBleGVjIH0gZnJvbSAnbm9kZTpjaGlsZF9wcm9jZXNzJztcbmltcG9ydCB7IGV4aXN0c1N5bmMgfSBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHsgcHJvbWlzaWZ5IH0gZnJvbSAnbm9kZTp1dGlsJztcbmltcG9ydCB0eXBlIHsgVG9vbERlZmluaXRpb24sIFRvb2xTdWl0ZSB9IGZyb20gJy4uLy4uLy4uL2NvcmUvdG9vbFJ1bnRpbWUuanMnO1xuaW1wb3J0IHR5cGUgeyBDYXBhYmlsaXR5Q29udHJpYnV0aW9uLCBDYXBhYmlsaXR5TW9kdWxlLCBDYXBhYmlsaXR5Q29udGV4dCB9IGZyb20gJy4uLy4uLy4uL3J1bnRpbWUvYWdlbnRIb3N0LmpzJztcbmltcG9ydCB0eXBlIHsgVG9vbFBsdWdpbiB9IGZyb20gJy4uL3JlZ2lzdHJ5LmpzJztcblxuY29uc3QgZXhlY0FzeW5jID0gcHJvbWlzaWZ5KGV4ZWMpO1xuXG50eXBlIENvbW1hbmRTdGF0dXMgPSAnc3VjY2VzcycgfCAnZmFpbHVyZScgfCAnc2tpcHBlZCc7XG5cbmludGVyZmFjZSBDb21tYW5kUnVuUmVjb3JkIHtcbiAgY29tbWFuZDogc3RyaW5nO1xuICBzdGF0dXM6IENvbW1hbmRTdGF0dXM7XG4gIGR1cmF0aW9uTXM6IG51bWJlcjtcbiAgc3Rkb3V0OiBzdHJpbmc7XG4gIHN0ZGVycjogc3RyaW5nO1xuICBzdGFydGVkQXQ6IG51bWJlcjtcbn1cblxuaW50ZXJmYWNlIENvbW1hbmRUb29sQXJncyB7XG4gIGNvbW1hbmQ/OiBzdHJpbmc7XG4gIGN3ZD86IHN0cmluZztcbiAgZHJ5UnVuPzogYm9vbGVhbjtcbn1cblxuaW50ZXJmYWNlIFF1YWxpdHlHYXRlQXJncyBleHRlbmRzIENvbW1hbmRUb29sQXJncyB7XG4gIGJ1aWxkQ29tbWFuZD86IHN0cmluZztcbiAgbGludENvbW1hbmQ/OiBzdHJpbmc7XG4gIHR5cGVjaGVja0NvbW1hbmQ/OiBzdHJpbmc7XG4gIHRlc3RDb21tYW5kPzogc3RyaW5nO1xuICBoZWFsdGhDb21tYW5kPzogc3RyaW5nO1xuICBzdGVwcz86IEFycmF5PCdidWlsZCcgfCAnbGludCcgfCAndHlwZS1jaGVjaycgfCAndGVzdCcgfCAnaGVhbHRoJz47XG59XG5cbmludGVyZmFjZSBBbmFseXplRXJyb3JzQXJncyB7XG4gIGVycm9yPzogc3RyaW5nO1xuICBsb2c/OiBzdHJpbmc7XG59XG5cbmludGVyZmFjZSBWZXJpZnlSZXN1bHRBcmdzIHtcbiAgZXhwZWN0ZWQ/OiBzdHJpbmc7XG4gIGFjdHVhbD86IHN0cmluZztcbiAgdG9sZXJhbmNlPzogbnVtYmVyO1xufVxuXG5pbnRlcmZhY2UgSHlwb3RoZXNpc0FyZ3Mge1xuICBvYmplY3RpdmU/OiBzdHJpbmc7XG4gIGNvbnRleHQ/OiBzdHJpbmc7XG4gIG5leHRTdGVwSGludD86IHN0cmluZztcbn1cblxuY2xhc3MgT3JjaGVzdHJhdGlvblRvb2xraXQge1xuICBwcml2YXRlIHJlY2VudFJ1bnM6IENvbW1hbmRSdW5SZWNvcmRbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgd29ya2luZ0Rpcjogc3RyaW5nLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZW52OiBOb2RlSlMuUHJvY2Vzc0VudlxuICApIHt9XG5cbiAgcHJpdmF0ZSByZWNvcmQocnVuOiBDb21tYW5kUnVuUmVjb3JkKTogdm9pZCB7XG4gICAgdGhpcy5yZWNlbnRSdW5zLnB1c2gocnVuKTtcbiAgICAvLyBLZWVwIGEgc2hvcnQgaGlzdG9yeSB0byBhdm9pZCB1bmJvdW5kZWQgZ3Jvd3RoXG4gICAgaWYgKHRoaXMucmVjZW50UnVucy5sZW5ndGggPiAxMCkge1xuICAgICAgdGhpcy5yZWNlbnRSdW5zLnNwbGljZSgwLCB0aGlzLnJlY2VudFJ1bnMubGVuZ3RoIC0gMTApO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0UnVuKHJ1bjogQ29tbWFuZFJ1blJlY29yZCwgbGFiZWw/OiBzdHJpbmcsIGRyeVJ1biA9IGZhbHNlLCBmYWlsdXJlUmVhc29uPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBzdGF0dXMgPSBkcnlSdW4gPyAnU0tJUFBFRCAoZHJ5LXJ1biknIDogcnVuLnN0YXR1cyA9PT0gJ3N1Y2Nlc3MnID8gJ09LJyA6ICdGQUlMRUQnO1xuICAgIGNvbnN0IGxpbmVzID0gW1xuICAgICAgYFske3N0YXR1c31dICR7bGFiZWwgPz8gcnVuLmNvbW1hbmR9YCxcbiAgICAgIGBjbWQ6ICR7cnVuLmNvbW1hbmR9YCxcbiAgICAgIGB0aW1lOiAke3J1bi5kdXJhdGlvbk1zfW1zYCxcbiAgICBdO1xuXG4gICAgaWYgKHJ1bi5zdGRvdXQpIHtcbiAgICAgIGxpbmVzLnB1c2goJ3N0ZG91dDonLCBydW4uc3Rkb3V0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZXMucHVzaCgnc3Rkb3V0OiAoZW1wdHkpJyk7XG4gICAgfVxuXG4gICAgaWYgKHJ1bi5zdGRlcnIpIHtcbiAgICAgIGxpbmVzLnB1c2goJ3N0ZGVycjonLCBydW4uc3RkZXJyKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZXMucHVzaCgnc3RkZXJyOiAoZW1wdHkpJyk7XG4gICAgfVxuXG4gICAgaWYgKGZhaWx1cmVSZWFzb24gJiYgIXJ1bi5zdGRlcnIpIHtcbiAgICAgIGxpbmVzLnB1c2goYHJlYXNvbjogJHtmYWlsdXJlUmVhc29ufWApO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJ1bmNhdGUodGV4dDogc3RyaW5nLCBtYXggPSA0MDAwKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4KSByZXR1cm4gdGV4dDtcbiAgICByZXR1cm4gYCR7dGV4dC5zbGljZSgwLCBtYXgpfVxcbi4uLlt0cnVuY2F0ZWQgJHt0ZXh0Lmxlbmd0aCAtIG1heH0gY2hhcnNdYDtcbiAgfVxuXG4gIGFzeW5jIHJ1bkNvbW1hbmQoY29tbWFuZDogc3RyaW5nLCBvcHRpb25zOiBDb21tYW5kVG9vbEFyZ3MgPSB7fSwgbGFiZWw/OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IGN3ZCA9IG9wdGlvbnMuY3dkID8/IHRoaXMud29ya2luZ0RpcjtcbiAgICBjb25zdCBkcnlSdW4gPSBCb29sZWFuKG9wdGlvbnMuZHJ5UnVuKTtcbiAgICBjb25zdCBzdGFydGVkQXQgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKGRyeVJ1bikge1xuICAgICAgY29uc3QgcnVuOiBDb21tYW5kUnVuUmVjb3JkID0ge1xuICAgICAgICBjb21tYW5kLFxuICAgICAgICBzdGF0dXM6ICdza2lwcGVkJyxcbiAgICAgICAgZHVyYXRpb25NczogMCxcbiAgICAgICAgc3Rkb3V0OiAnJyxcbiAgICAgICAgc3RkZXJyOiAnZHJ5LXJ1bicsXG4gICAgICAgIHN0YXJ0ZWRBdCxcbiAgICAgIH07XG4gICAgICB0aGlzLnJlY29yZChydW4pO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0UnVuKHJ1biwgbGFiZWwsIHRydWUpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBjb25zdCB7IHN0ZG91dCwgc3RkZXJyIH0gPSBhd2FpdCBleGVjQXN5bmMoY29tbWFuZCwge1xuICAgICAgICBjd2QsXG4gICAgICAgIGVudjogdGhpcy5lbnYsXG4gICAgICAgIG1heEJ1ZmZlcjogOCAqIDEwMjQgKiAxMDI0LFxuICAgICAgfSk7XG4gICAgICBjb25zdCBydW46IENvbW1hbmRSdW5SZWNvcmQgPSB7XG4gICAgICAgIGNvbW1hbmQsXG4gICAgICAgIHN0YXR1czogJ3N1Y2Nlc3MnLFxuICAgICAgICBkdXJhdGlvbk1zOiBEYXRlLm5vdygpIC0gc3RhcnRlZEF0LFxuICAgICAgICBzdGRvdXQ6IHRoaXMudHJ1bmNhdGUoc3Rkb3V0Py50b1N0cmluZygpLnRyaW0oKSA/PyAnJyksXG4gICAgICAgIHN0ZGVycjogdGhpcy50cnVuY2F0ZShzdGRlcnI/LnRvU3RyaW5nKCkudHJpbSgpID8/ICcnKSxcbiAgICAgICAgc3RhcnRlZEF0LFxuICAgICAgfTtcbiAgICAgIHRoaXMucmVjb3JkKHJ1bik7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRSdW4ocnVuLCBsYWJlbCk7XG4gICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgICAgY29uc3QgcnVuOiBDb21tYW5kUnVuUmVjb3JkID0ge1xuICAgICAgICBjb21tYW5kLFxuICAgICAgICBzdGF0dXM6ICdmYWlsdXJlJyxcbiAgICAgICAgZHVyYXRpb25NczogRGF0ZS5ub3coKSAtIHN0YXJ0ZWRBdCxcbiAgICAgICAgc3Rkb3V0OiB0aGlzLnRydW5jYXRlKGVycm9yPy5zdGRvdXQ/LnRvU3RyaW5nKCkudHJpbT8uKCkgPz8gJycpLFxuICAgICAgICBzdGRlcnI6IHRoaXMudHJ1bmNhdGUoZXJyb3I/LnN0ZGVycj8udG9TdHJpbmcoKS50cmltPy4oKSA/PyBlcnJvcj8ubWVzc2FnZSA/PyAnJyksXG4gICAgICAgIHN0YXJ0ZWRBdCxcbiAgICAgIH07XG4gICAgICB0aGlzLnJlY29yZChydW4pO1xuICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0UnVuKHJ1biwgbGFiZWwsIGZhbHNlLCBlcnJvcj8ubWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgYXN5bmMgcnVuUXVhbGl0eUdhdGUoYXJnczogUXVhbGl0eUdhdGVBcmdzID0ge30pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHN0ZXBzID0gYXJncy5zdGVwcz8ubGVuZ3RoID8gYXJncy5zdGVwcyA6IFsnYnVpbGQnLCAnbGludCcsICd0eXBlLWNoZWNrJywgJ3Rlc3QnLCAnaGVhbHRoJ107XG4gICAgY29uc3Qgb3V0cHV0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3Qgc3RlcCBvZiBzdGVwcykge1xuICAgICAgc3dpdGNoIChzdGVwKSB7XG4gICAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgICBvdXRwdXRzLnB1c2goYXdhaXQgdGhpcy5ydW5Db21tYW5kKGFyZ3MuYnVpbGRDb21tYW5kID8/ICducG0gcnVuIGJ1aWxkJywgYXJncywgJ2J1aWxkJykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICdsaW50JzpcbiAgICAgICAgICBvdXRwdXRzLnB1c2goYXdhaXQgdGhpcy5ydW5Db21tYW5kKGFyZ3MubGludENvbW1hbmQgPz8gJ25wbSBydW4gbGludCcsIGFyZ3MsICdsaW50JykpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBjYXNlICd0eXBlLWNoZWNrJzpcbiAgICAgICAgICBvdXRwdXRzLnB1c2goYXdhaXQgdGhpcy5ydW5Db21tYW5kKGFyZ3MudHlwZWNoZWNrQ29tbWFuZCA/PyAnbnBtIHJ1biB0eXBlLWNoZWNrJywgYXJncywgJ3R5cGUtY2hlY2snKSk7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGNhc2UgJ3Rlc3QnOlxuICAgICAgICAgIG91dHB1dHMucHVzaChhd2FpdCB0aGlzLnJ1bkNvbW1hbmQoYXJncy50ZXN0Q29tbWFuZCA/PyAnbnBtIHRlc3QgLS0gLS1ydW5JbkJhbmQnLCBhcmdzLCAndGVzdCcpKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgY2FzZSAnaGVhbHRoJzoge1xuICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSBhcmdzLmhlYWx0aENvbW1hbmRcbiAgICAgICAgICAgID8/IChleGlzdHNTeW5jKGpvaW4odGhpcy53b3JraW5nRGlyLCAnc2NyaXB0cycsICdoZWFsdGgtY2hlY2subWpzJykpID8gJ25vZGUgc2NyaXB0cy9oZWFsdGgtY2hlY2subWpzJyA6IG51bGwpO1xuICAgICAgICAgIG91dHB1dHMucHVzaChcbiAgICAgICAgICAgIGNvbW1hbmRcbiAgICAgICAgICAgICAgPyBhd2FpdCB0aGlzLnJ1bkNvbW1hbmQoY29tbWFuZCwgYXJncywgJ2hlYWx0aC1jaGVjaycpXG4gICAgICAgICAgICAgIDogJ1tTS0lQUEVEXSBoZWFsdGgtY2hlY2tcXG5yZWFzb246IHNjcmlwdHMvaGVhbHRoLWNoZWNrLm1qcyBub3QgZm91bmQnXG4gICAgICAgICAgKTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIG91dHB1dHMucHVzaChgW1NLSVBQRURdICR7c3RlcH1cXG5yZWFzb246IHVua25vd24gc3RlcGApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXRzLmpvaW4oJ1xcblxcbicpO1xuICB9XG5cbiAgYW5hbHl6ZUVycm9ycyh7IGVycm9yLCBsb2cgfTogQW5hbHl6ZUVycm9yc0FyZ3MgPSB7fSk6IHN0cmluZyB7XG4gICAgY29uc3QgcmVjZW50RmFpbHVyZSA9IFsuLi50aGlzLnJlY2VudFJ1bnNdLnJldmVyc2UoKS5maW5kKChydW4pID0+IHJ1bi5zdGF0dXMgPT09ICdmYWlsdXJlJyk7XG4gICAgY29uc3QgaGludHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc291cmNlID0gW2Vycm9yID8/ICcnLCBsb2cgPz8gJycsIHJlY2VudEZhaWx1cmU/LnN0ZGVyciA/PyAnJywgcmVjZW50RmFpbHVyZT8uc3Rkb3V0ID8/ICcnXS5qb2luKCcgJykudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmIChzb3VyY2UuaW5jbHVkZXMoJ3RzYycpIHx8IHNvdXJjZS5pbmNsdWRlcygndHlwZScpKSB7XG4gICAgICBoaW50cy5wdXNoKCdSZS1ydW4gdHlwZSBjaGVja3MgbG9jYWxseTogbnBtIHJ1biB0eXBlLWNoZWNrJyk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UuaW5jbHVkZXMoJ2VzbGludCcpIHx8IHNvdXJjZS5pbmNsdWRlcygnbGludCcpKSB7XG4gICAgICBoaW50cy5wdXNoKCdGaXggbGludCBmYWlsdXJlcyBvciBydW4gbnBtIHJ1biBsaW50IC0tIC0tZml4Jyk7XG4gICAgfVxuICAgIGlmIChzb3VyY2UuaW5jbHVkZXMoJ3Rlc3QnKSkge1xuICAgICAgaGludHMucHVzaCgnSW5zcGVjdCBmYWlsaW5nIHRlc3Qgb3V0cHV0IGFuZCByZXJ1biB3aXRoIG5wbSB0ZXN0IC0tIC0tcnVuSW5CYW5kJyk7XG4gICAgfVxuICAgIGlmICghaGludHMubGVuZ3RoKSB7XG4gICAgICBoaW50cy5wdXNoKCdSZXZpZXcgcmVjZW50IGNvbW1hbmQgb3V0cHV0OyByZXRyeSB3aXRoIC0tdmVyYm9zZSBvciBlbmFibGUgZGVidWcgbG9nZ2luZy4nKTtcbiAgICB9XG5cbiAgICBjb25zdCBmYWlsdXJlQ29udGV4dCA9IHJlY2VudEZhaWx1cmVcbiAgICAgID8gYExhc3QgZmFpbHVyZTogJHtyZWNlbnRGYWlsdXJlLmNvbW1hbmR9ICgke3JlY2VudEZhaWx1cmUuZHVyYXRpb25Nc31tcylgXG4gICAgICA6ICdObyBwcmV2aW91cyBmYWlsdXJlcyByZWNvcmRlZC4nO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICdPcmNoZXN0cmF0aW9uIEVycm9yIEFuYWx5c2lzJyxcbiAgICAgIGZhaWx1cmVDb250ZXh0LFxuICAgICAgYEVycm9yOiAke2Vycm9yID8/ICduL2EnfWAsXG4gICAgICBgSGludHM6ICR7aGludHMuam9pbignIHwgJyl9YCxcbiAgICBdLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgdmVyaWZ5UmVzdWx0KHsgZXhwZWN0ZWQsIGFjdHVhbCwgdG9sZXJhbmNlID0gMCB9OiBWZXJpZnlSZXN1bHRBcmdzID0ge30pOiBzdHJpbmcge1xuICAgIGlmIChleHBlY3RlZCA9PSBudWxsICYmIGFjdHVhbCA9PSBudWxsKSB7XG4gICAgICByZXR1cm4gJ3ZlcmlmaWNhdGlvbjogbm8gaW5wdXRzIHByb3ZpZGVkJztcbiAgICB9XG5cbiAgICBjb25zdCBleHBlY3RlZE51bSA9IHR5cGVvZiBleHBlY3RlZCA9PT0gJ251bWJlcicgPyBleHBlY3RlZCA6IE51bWJlci5pc0Zpbml0ZShOdW1iZXIoZXhwZWN0ZWQpKSA/IE51bWJlcihleHBlY3RlZCkgOiBudWxsO1xuICAgIGNvbnN0IGFjdHVhbE51bSA9IHR5cGVvZiBhY3R1YWwgPT09ICdudW1iZXInID8gYWN0dWFsIDogTnVtYmVyLmlzRmluaXRlKE51bWJlcihhY3R1YWwpKSA/IE51bWJlcihhY3R1YWwpIDogbnVsbDtcblxuICAgIGlmIChleHBlY3RlZE51bSAhPT0gbnVsbCAmJiBhY3R1YWxOdW0gIT09IG51bGwpIHtcbiAgICAgIGNvbnN0IGRlbHRhID0gTWF0aC5hYnMoZXhwZWN0ZWROdW0gLSBhY3R1YWxOdW0pO1xuICAgICAgY29uc3QgcGFzcyA9IGRlbHRhIDw9IHRvbGVyYW5jZTtcbiAgICAgIHJldHVybiBgdmVyaWZpY2F0aW9uOiAke3Bhc3MgPyAncGFzcycgOiAnZmFpbCd9ICgke2FjdHVhbE51bX0gdnMgJHtleHBlY3RlZE51bX0sIHRvbGVyYW5jZSAke3RvbGVyYW5jZX0pYDtcbiAgICB9XG5cbiAgICBpZiAoZXhwZWN0ZWQgJiYgYWN0dWFsKSB7XG4gICAgICBjb25zdCBwYXNzID0gU3RyaW5nKGFjdHVhbCkudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhTdHJpbmcoZXhwZWN0ZWQpLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgcmV0dXJuIGB2ZXJpZmljYXRpb246ICR7cGFzcyA/ICdwYXNzJyA6ICdmYWlsJ30gKGV4cGVjdGVkIHRvIGZpbmQgXCIke2V4cGVjdGVkfVwiIGluIFwiJHthY3R1YWx9XCIpYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYHZlcmlmaWNhdGlvbjogaW5jb21wbGV0ZSAoZXhwZWN0ZWQ9JHtleHBlY3RlZCA/PyAnbi9hJ30sIGFjdHVhbD0ke2FjdHVhbCA/PyAnbi9hJ30pYDtcbiAgfVxuXG4gIGdlbmVyYXRlSHlwb3RoZXNpcyh7IG9iamVjdGl2ZSwgY29udGV4dCwgbmV4dFN0ZXBIaW50IH06IEh5cG90aGVzaXNBcmdzID0ge30pOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzID0gW1xuICAgICAgJ0h5cG90aGVzaXMnLFxuICAgICAgYE9iamVjdGl2ZTogJHtvYmplY3RpdmUgPz8gJ3Vuc3BlY2lmaWVkJ31gLFxuICAgICAgY29udGV4dCA/IGBDb250ZXh0OiAke2NvbnRleHR9YCA6ICdDb250ZXh0OiBuL2EnLFxuICAgICAgYE5leHQgc3RlcDogJHtuZXh0U3RlcEhpbnQgPz8gJ1J1biBxdWFsaXR5IGdhdGUgdGhlbiBpdGVyYXRlIG9uIGZhaWx1cmVzLid9YCxcbiAgICBdO1xuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHN1bW1hcml6ZVJlY2VudFJ1bnMoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMucmVjZW50UnVucy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiAnTm8gb3JjaGVzdHJhdGlvbiBydW5zIHJlY29yZGVkIHlldC4gRXhlY3V0ZSBydW5fYnVpbGQvcnVuX3Rlc3RzL3F1YWxpdHlfZ2F0ZSB0byBjYXB0dXJlIHRlbGVtZXRyeS4nO1xuICAgIH1cbiAgICBjb25zdCBsaW5lcyA9IHRoaXMucmVjZW50UnVucy5zbGljZSgtNSkubWFwKChydW4pID0+IHtcbiAgICAgIGNvbnN0IHN0YXR1cyA9IHJ1bi5zdGF0dXMgPT09ICdzdWNjZXNzJyA/ICdvaycgOiBydW4uc3RhdHVzID09PSAnZmFpbHVyZScgPyAnZmFpbCcgOiAnc2tpcCc7XG4gICAgICByZXR1cm4gYFske3N0YXR1c31dICR7cnVuLmNvbW1hbmR9ICgke3J1bi5kdXJhdGlvbk1zfW1zKWA7XG4gICAgfSk7XG4gICAgcmV0dXJuIFsnUmVjZW50IG9yY2hlc3RyYXRpb24gcnVuczonLCAuLi5saW5lc10uam9pbignXFxuJyk7XG4gIH1cbn1cblxuY2xhc3MgT3JjaGVzdHJhdGlvbkNhcGFiaWxpdHlNb2R1bGUgaW1wbGVtZW50cyBDYXBhYmlsaXR5TW9kdWxlIHtcbiAgaWQgPSAnb3JjaGVzdHJhdGlvbi50b29scy51bmlmaWVkJztcbiAgZGVzY3JpcHRpb24gPSAnVW5pZmllZCBvcmNoZXN0cmF0aW9uIHRvb2xraXQnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVhZG9ubHkgd29ya2luZ0Rpcjogc3RyaW5nLFxuICAgIHByaXZhdGUgcmVhZG9ubHkgZW52OiBOb2RlSlMuUHJvY2Vzc0VudlxuICApIHt9XG5cbiAgYXN5bmMgY3JlYXRlKGNvbnRleHQ6IENhcGFiaWxpdHlDb250ZXh0KTogUHJvbWlzZTxDYXBhYmlsaXR5Q29udHJpYnV0aW9uPiB7XG4gICAgY29uc3QgdG9vbGtpdCA9IG5ldyBPcmNoZXN0cmF0aW9uVG9vbGtpdChcbiAgICAgIGNvbnRleHQud29ya2luZ0RpciA/PyB0aGlzLndvcmtpbmdEaXIsXG4gICAgICB7IC4uLnRoaXMuZW52LCAuLi5jb250ZXh0LmVudiB9LFxuICAgICk7XG5cbiAgICBjb25zdCBvcmNoZXN0cmF0aW9uVG9vbHM6IFRvb2xEZWZpbml0aW9uW10gPSBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdydW5fYnVpbGQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1J1biBwcm9qZWN0IGJ1aWxkIChkZWZhdWx0OiBucG0gcnVuIGJ1aWxkKS4nLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgY29tbWFuZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdPdmVycmlkZSBidWlsZCBjb21tYW5kJyB9LFxuICAgICAgICAgICAgY3dkOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ1dvcmtpbmcgZGlyZWN0b3J5IHRvIHVzZScgfSxcbiAgICAgICAgICAgIGRyeVJ1bjogeyB0eXBlOiAnYm9vbGVhbicsIGRlc2NyaXB0aW9uOiAnU2tpcCBleGVjdXRpb24gYW5kIHJlcG9ydCBpbnRlbnQgb25seScgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoYXJnczogQ29tbWFuZFRvb2xBcmdzID0ge30pID0+XG4gICAgICAgICAgdG9vbGtpdC5ydW5Db21tYW5kKGFyZ3MuY29tbWFuZCA/PyAnbnBtIHJ1biBidWlsZCcsIGFyZ3MsICdidWlsZCcpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3J1bl9saW50JyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gbGludGluZyAoZGVmYXVsdDogbnBtIHJ1biBsaW50KS4nLFxuICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgICAgY29tbWFuZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdPdmVycmlkZSBsaW50IGNvbW1hbmQnIH0sXG4gICAgICAgICAgICBjd2Q6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGRyeVJ1bjogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoYXJnczogQ29tbWFuZFRvb2xBcmdzID0ge30pID0+XG4gICAgICAgICAgdG9vbGtpdC5ydW5Db21tYW5kKGFyZ3MuY29tbWFuZCA/PyAnbnBtIHJ1biBsaW50JywgYXJncywgJ2xpbnQnKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdydW5fdHlwZV9jaGVjaycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHR5cGUgY2hlY2tzIChkZWZhdWx0OiBucG0gcnVuIHR5cGUtY2hlY2spLicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBjb21tYW5kOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ092ZXJyaWRlIHR5cGUtY2hlY2sgY29tbWFuZCcgfSxcbiAgICAgICAgICAgIGN3ZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgZHJ5UnVuOiB7IHR5cGU6ICdib29sZWFuJyB9LFxuICAgICAgICAgIH0sXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZXI6IGFzeW5jIChhcmdzOiBDb21tYW5kVG9vbEFyZ3MgPSB7fSkgPT5cbiAgICAgICAgICB0b29sa2l0LnJ1bkNvbW1hbmQoYXJncy5jb21tYW5kID8/ICducG0gcnVuIHR5cGUtY2hlY2snLCBhcmdzLCAndHlwZS1jaGVjaycpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3J1bl90ZXN0cycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUnVuIHRlc3RzIChkZWZhdWx0OiBucG0gdGVzdCAtLSAtLXJ1bkluQmFuZCkuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnT3ZlcnJpZGUgdGVzdCBjb21tYW5kJyB9LFxuICAgICAgICAgICAgY3dkOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBkcnlSdW46IHsgdHlwZTogJ2Jvb2xlYW4nIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlcjogYXN5bmMgKGFyZ3M6IENvbW1hbmRUb29sQXJncyA9IHt9KSA9PlxuICAgICAgICAgIHRvb2xraXQucnVuQ29tbWFuZChhcmdzLmNvbW1hbmQgPz8gJ25wbSB0ZXN0IC0tIC0tcnVuSW5CYW5kJywgYXJncywgJ3Rlc3RzJyksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAncXVhbGl0eV9nYXRlJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdSdW4gYnVpbGQgKyBsaW50ICsgdHlwZS1jaGVjayArIHRlc3RzICgrIG9wdGlvbmFsIGhlYWx0aCBjaGVjaykuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIHN0ZXBzOiB7XG4gICAgICAgICAgICAgIHR5cGU6ICdhcnJheScsXG4gICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnT3JkZXJlZCBzdGVwcyB0byBydW4nLFxuICAgICAgICAgICAgICBpdGVtczogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGJ1aWxkQ29tbWFuZDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgbGludENvbW1hbmQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHR5cGVjaGVja0NvbW1hbmQ6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIHRlc3RDb21tYW5kOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBoZWFsdGhDb21tYW5kOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBjd2Q6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICAgIGRyeVJ1bjogeyB0eXBlOiAnYm9vbGVhbicgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoYXJnczogUXVhbGl0eUdhdGVBcmdzID0ge30pID0+IHRvb2xraXQucnVuUXVhbGl0eUdhdGUoYXJncyksXG4gICAgICB9LFxuICAgICAge1xuICAgICAgICBuYW1lOiAnYW5hbHl6ZV9lcnJvcnMnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ0FuYWx5emUgZXhlY3V0aW9uIGVycm9ycyBhbmQgc3VnZ2VzdCByZW1lZGlhdGlvbnMuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGVycm9yOiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgICBsb2c6IHsgdHlwZTogJ3N0cmluZycgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoYXJnczogQW5hbHl6ZUVycm9yc0FyZ3MgPSB7fSkgPT4gdG9vbGtpdC5hbmFseXplRXJyb3JzKGFyZ3MpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3ZlcmlmeV9yZXN1bHQnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ1ZlcmlmeSBhIHJlc3VsdCBmb3IgY29ycmVjdG5lc3Mgb3IgdG9sZXJhbmNlLicsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBleHBlY3RlZDogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdFeHBlY3RlZCB2YWx1ZSAodGV4dCBvciBudW1iZXIgYXMgdGV4dCknIH0sXG4gICAgICAgICAgICBhY3R1YWw6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnQWN0dWFsIHZhbHVlICh0ZXh0IG9yIG51bWJlciBhcyB0ZXh0KScgfSxcbiAgICAgICAgICAgIHRvbGVyYW5jZTogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdOdW1lcmljIGRlbHRhIHRvbGVyYW5jZScgfSxcbiAgICAgICAgICB9LFxuICAgICAgICB9LFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoYXJnczogVmVyaWZ5UmVzdWx0QXJncyA9IHt9KSA9PiB0b29sa2l0LnZlcmlmeVJlc3VsdChhcmdzKSxcbiAgICAgIH0sXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdoeXBvdGhlc2lzJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdHZW5lcmF0ZSBhbmQgdGVzdCBhIGh5cG90aGVzaXMuJyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIG9iamVjdGl2ZTogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgY29udGV4dDogeyB0eXBlOiAnc3RyaW5nJyB9LFxuICAgICAgICAgICAgbmV4dFN0ZXBIaW50OiB7IHR5cGU6ICdzdHJpbmcnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlcjogYXN5bmMgKGFyZ3M6IEh5cG90aGVzaXNBcmdzID0ge30pID0+IHRvb2xraXQuZ2VuZXJhdGVIeXBvdGhlc2lzKGFyZ3MpLFxuICAgICAgfSxcbiAgICAgIHtcbiAgICAgICAgbmFtZTogJ3N1bW1hcml6ZV9vcmNoZXN0cmF0aW9uJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdTdW1tYXJpemUgdGhlIG1vc3QgcmVjZW50IG9yY2hlc3RyYXRpb24gcnVucy4nLFxuICAgICAgICBoYW5kbGVyOiBhc3luYyAoKSA9PiB0b29sa2l0LnN1bW1hcml6ZVJlY2VudFJ1bnMoKSxcbiAgICAgIH0sXG4gICAgXTtcblxuICAgIGNvbnN0IHRvb2xTdWl0ZTogVG9vbFN1aXRlID0ge1xuICAgICAgaWQ6ICdvcmNoZXN0cmF0aW9uLnRvb2xzLnVuaWZpZWQnLFxuICAgICAgZGVzY3JpcHRpb246ICdDb3JlIG9yY2hlc3RyYXRpb24gaGVscGVycyBmb3IgYnVpbGQvdGVzdC9xdWFsaXR5IGZsb3dzLicsXG4gICAgICB0b29sczogb3JjaGVzdHJhdGlvblRvb2xzLFxuICAgIH07XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIHRvb2xTdWl0ZSxcbiAgICB9O1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPcmNoZXN0cmF0aW9uVG9vbFBsdWdpbigpOiBUb29sUGx1Z2luIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogJ3Rvb2wub3JjaGVzdHJhdGlvbi51bmlmaWVkJyxcbiAgICBkZXNjcmlwdGlvbjogJ1VuaWZpZWQgb3JjaGVzdHJhdGlvbiB0b29sa2l0IChidWlsZCwgdGVzdCwgcXVhbGl0eSwgdGVsZW1ldHJ5KS4nLFxuICAgIHRhcmdldHM6IFsndW5pdmVyc2FsJ10sXG4gICAgY3JlYXRlOiAoY29udGV4dCkgPT5cbiAgICAgIG5ldyBPcmNoZXN0cmF0aW9uQ2FwYWJpbGl0eU1vZHVsZShcbiAgICAgICAgY29udGV4dC53b3JraW5nRGlyLFxuICAgICAgICB7IC4uLnByb2Nlc3MuZW52LCAuLi5jb250ZXh0LmVudiB9LFxuICAgICAgKSxcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBQUEsa0JBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUtBLE1BQU1JLFNBQVMsR0FBRyxJQUFBQyxtQkFBUyxFQUFDQyx1QkFBSSxDQUFDO0FBNkNqQyxNQUFNQyxvQkFBb0IsQ0FBQztFQUNqQkMsVUFBVSxHQUF1QixFQUFFO0VBRTNDQyxXQUFXQSxDQUNRQyxVQUFrQixFQUNsQkMsR0FBc0IsRUFDdkM7SUFBQSxLQUZpQkQsVUFBa0IsR0FBbEJBLFVBQWtCO0lBQUEsS0FDbEJDLEdBQXNCLEdBQXRCQSxHQUFzQjtFQUN0QztFQUVLQyxNQUFNQSxDQUFDQyxHQUFxQixFQUFRO0lBQzFD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