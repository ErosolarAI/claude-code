{"version":3,"names":["cov_1dr6je8km0","actualCoverage","stripAnsi","OverlayManager","currentLayout","s","renderedRows","allocatedRows","isVisible","isEnabled","outputGuardCount","writeStream","options","SAVE_CURSOR","RESTORE_CURSOR","CLEAR_LINE","MOVE_TO_COLUMN","col","f","MOVE_UP","rows","constructor","b","adaptToTerminalSize","smoothTransitions","preserveCursor","setLayout","layout","wasVisible","hide","show","render","clearRenderedOverlay","beginOutput","endOutput","Math","max","setEnabled","enabled","updateRegion","regionName","region","regions","maxHeight","getMaxOverlayHeight","composeOverlay","lines","sortedRegions","Object","entries","filter","_","undefined","sort","a","__","priority","content","regionLines","split","slice","height","push","length","terminalWidth","columns","i","write","forEach","line","index","truncatedLine","truncateLine","terminalHeight","min","floor","maxWidth","visibleLength","ellipsis","targetLength","currentLength","result","inAnsi","char","refresh","getState","hasLayout","dispose"],"sources":["OverlayManager.ts"],"sourcesContent":["/**\n * OverlayManager - Manages terminal overlay rendering with ANSI escape sequences\n * Provides sophisticated overlay composition and rendering capabilities\n */\n\n\nimport { stripAnsi } from '../layout.js';\n\nexport interface OverlayRegion {\n  content: string;\n  height: number;\n  priority: number;\n}\n\nexport interface OverlayLayout {\n  regions: {\n    status?: OverlayRegion;\n    progress?: OverlayRegion;\n    hints?: OverlayRegion;\n    alerts?: OverlayRegion;\n  };\n  maxHeight: number;\n}\n\nexport interface OverlayOptions {\n  adaptToTerminalSize: boolean;\n  smoothTransitions: boolean;\n  preserveCursor: boolean;\n}\n\nexport class OverlayManager {\n  private currentLayout: OverlayLayout | null = null;\n  private renderedRows: number = 0;\n  private allocatedRows: number = 0;\n  private isVisible: boolean = false;\n  private isEnabled: boolean = true;\n  private outputGuardCount: number = 0;\n  private writeStream: NodeJS.WriteStream;\n  private options: OverlayOptions;\n\n  // ANSI escape codes for cursor control\n  private readonly SAVE_CURSOR = '\\u001b7';\n  private readonly RESTORE_CURSOR = '\\u001b8';\n  private readonly CLEAR_LINE = '\\u001b[2K';\n  private readonly MOVE_TO_COLUMN = (col: number) => `\\u001b[${col}G`;\n  private readonly MOVE_UP = (rows: number) => `\\u001b[${rows}A`;\n\n  constructor(\n    writeStream: NodeJS.WriteStream,\n    options: Partial<OverlayOptions> = {}\n  ) {\n    this.writeStream = writeStream;\n    this.options = {\n      adaptToTerminalSize: true,\n      smoothTransitions: true,\n      preserveCursor: true,\n      ...options,\n    };\n  }\n\n  /**\n   * Set the overlay layout to render\n   */\n  setLayout(layout: OverlayLayout | null): void {\n    const wasVisible = this.isVisible;\n    if (wasVisible) {\n      this.hide();\n    }\n\n    this.currentLayout = layout;\n\n    if (wasVisible && layout) {\n      this.show();\n    }\n  }\n\n  /**\n   * Show the overlay if enabled and not in output guard\n   */\n  show(): void {\n    if (!this.isEnabled || this.outputGuardCount > 0 || !this.currentLayout) {\n      return;\n    }\n\n    this.isVisible = true;\n    this.render();\n  }\n\n  /**\n   * Hide the overlay\n   */\n  hide(): void {\n    if (!this.isVisible) {\n      return;\n    }\n\n    this.clearRenderedOverlay();\n    this.isVisible = false;\n  }\n\n  /**\n   * Begin output operation (increments guard counter)\n   */\n  beginOutput(): void {\n    this.outputGuardCount++;\n    if (this.isVisible) {\n      this.hide();\n    }\n  }\n\n  /**\n   * End output operation (decrements guard counter)\n   */\n  endOutput(): void {\n    this.outputGuardCount = Math.max(0, this.outputGuardCount - 1);\n    if (this.outputGuardCount === 0 && this.currentLayout) {\n      this.show();\n    }\n  }\n\n  /**\n   * Enable or disable overlay rendering\n   */\n  setEnabled(enabled: boolean): void {\n    if (enabled === this.isEnabled) {\n      return;\n    }\n\n    this.isEnabled = enabled;\n    if (!enabled) {\n      this.hide();\n    } else if (this.currentLayout) {\n      this.show();\n    }\n  }\n\n  /**\n   * Update a specific region in the layout\n   */\n  updateRegion(\n    regionName: keyof OverlayLayout['regions'],\n    region: OverlayRegion | undefined\n  ): void {\n    if (!this.currentLayout) {\n      this.currentLayout = {\n        regions: {},\n        maxHeight: this.getMaxOverlayHeight(),\n      };\n    }\n\n    this.currentLayout.regions[regionName] = region;\n\n    if (this.isVisible) {\n      this.render();\n    }\n  }\n\n  /**\n   * Compose the overlay content from all regions\n   */\n  private composeOverlay(): string[] {\n    if (!this.currentLayout) {\n      return [];\n    }\n\n    const lines: string[] = [];\n    const { regions } = this.currentLayout;\n\n    // Sort regions by priority\n    const sortedRegions = Object.entries(regions)\n      .filter(([_, region]) => region !== undefined)\n      .sort(([_, a], [__, b]) => (b?.priority ?? 0) - (a?.priority ?? 0));\n\n    // Compose lines from regions\n    for (const [, region] of sortedRegions) {\n      if (region && region.content) {\n        const regionLines = region.content.split('\\n').slice(0, region.height);\n        lines.push(...regionLines);\n\n        // Respect max height\n        if (lines.length >= this.currentLayout.maxHeight) {\n          return lines.slice(0, this.currentLayout.maxHeight);\n        }\n      }\n    }\n\n    return lines;\n  }\n\n  /**\n   * Render the overlay to the terminal\n   */\n  private render(): void {\n    if (!this.isVisible || !this.currentLayout) {\n      return;\n    }\n\n    const lines = this.composeOverlay();\n    if (lines.length === 0) {\n      return;\n    }\n\n    const terminalWidth = this.writeStream.columns || 80;\n\n    // Clear any previously rendered overlay\n    this.clearRenderedOverlay();\n\n    // Allocate space for the overlay\n    this.allocatedRows = lines.length;\n    for (let i = 0; i < this.allocatedRows; i++) {\n      this.writeStream.write('\\n');\n    }\n\n    // Save cursor and move up to start of overlay area\n    if (this.options.preserveCursor) {\n      this.writeStream.write(this.SAVE_CURSOR);\n    }\n    this.writeStream.write(this.MOVE_UP(this.allocatedRows));\n\n    // Render each line\n    lines.forEach((line, index) => {\n      // Clear the line\n      this.writeStream.write(this.CLEAR_LINE);\n      this.writeStream.write(this.MOVE_TO_COLUMN(1));\n\n      // Truncate line if needed\n      const truncatedLine = this.truncateLine(line, terminalWidth);\n      this.writeStream.write(truncatedLine);\n\n      // Move to next line (except for last line)\n      if (index < lines.length - 1) {\n        this.writeStream.write('\\n');\n      }\n    });\n\n    // Restore cursor position\n    if (this.options.preserveCursor) {\n      this.writeStream.write(this.RESTORE_CURSOR);\n    }\n\n    this.renderedRows = lines.length;\n  }\n\n  /**\n   * Clear the rendered overlay from the terminal\n   */\n  private clearRenderedOverlay(): void {\n    if (this.renderedRows === 0) {\n      return;\n    }\n\n    // Save cursor position\n    if (this.options.preserveCursor) {\n      this.writeStream.write(this.SAVE_CURSOR);\n    }\n\n    // Move up to the start of the overlay\n    this.writeStream.write(this.MOVE_UP(this.renderedRows));\n\n    // Clear each overlay row\n    for (let i = 0; i < this.renderedRows; i++) {\n      this.writeStream.write(this.CLEAR_LINE);\n      if (i < this.renderedRows - 1) {\n        this.writeStream.write('\\n');\n      }\n    }\n\n    // Move back up and restore cursor\n    if (this.renderedRows > 1) {\n      this.writeStream.write(this.MOVE_UP(this.renderedRows - 1));\n    }\n\n    if (this.options.preserveCursor) {\n      this.writeStream.write(this.RESTORE_CURSOR);\n    }\n\n    // Adjust cursor position if needed\n    if (this.allocatedRows > 0) {\n      this.writeStream.write(this.MOVE_UP(this.allocatedRows));\n      this.allocatedRows = 0;\n    }\n\n    this.renderedRows = 0;\n  }\n\n  /**\n   * Get maximum overlay height based on terminal size\n   */\n  private getMaxOverlayHeight(): number {\n    if (!this.options.adaptToTerminalSize) {\n      return 5; // Default max height\n    }\n\n    const terminalHeight = this.writeStream.rows || 24;\n    // Use at most 20% of terminal height for overlay\n    return Math.max(2, Math.min(5, Math.floor(terminalHeight * 0.2)));\n  }\n\n  /**\n   * Truncate a line to fit terminal width\n   */\n  private truncateLine(line: string, maxWidth: number): string {\n    // Account for ANSI escape codes\n    const visibleLength = stripAnsi(line).length;\n\n    if (visibleLength <= maxWidth) {\n      return line;\n    }\n\n    // Smart truncation with ellipsis\n    const ellipsis = '...';\n    const targetLength = maxWidth - ellipsis.length;\n\n    // Try to preserve ANSI codes while truncating\n    let currentLength = 0;\n    let result = '';\n    let inAnsi = false;\n\n    for (let i = 0; i < line.length; i++) {\n      const char = line[i];\n\n      if (char === '\\u001b') {\n        inAnsi = true;\n      }\n\n      if (inAnsi) {\n        result += char;\n        if (char === 'm') {\n          inAnsi = false;\n        }\n      } else {\n        if (currentLength < targetLength) {\n          result += char;\n          currentLength++;\n        } else {\n          break;\n        }\n      }\n    }\n\n    return result + ellipsis;\n  }\n\n  /**\n   * Force a refresh of the overlay\n   */\n  refresh(): void {\n    if (this.isVisible) {\n      this.render();\n    }\n  }\n\n  /**\n   * Get current overlay state\n   */\n  getState(): {\n    isVisible: boolean;\n    isEnabled: boolean;\n    renderedRows: number;\n    hasLayout: boolean;\n  } {\n    return {\n      isVisible: this.isVisible,\n      isEnabled: this.isEnabled,\n      renderedRows: this.renderedRows,\n      hasLayout: this.currentLayout !== null,\n    };\n  }\n\n  /**\n   * Clean up resources\n   */\n  dispose(): void {\n    this.hide();\n    this.currentLayout = null;\n  }\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}