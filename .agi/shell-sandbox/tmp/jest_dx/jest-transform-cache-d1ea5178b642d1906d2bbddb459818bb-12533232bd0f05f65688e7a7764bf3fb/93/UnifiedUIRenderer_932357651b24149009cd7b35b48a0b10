3dfd8057930ec0b3a939b1ccc4c72b19
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
exports.createBanner = createBanner;
exports.createSecurityBanner = createSecurityBanner;
exports.createSecuritySpinner = createSecuritySpinner;
exports.formatAuditProgress = formatAuditProgress;
exports.formatProgress = formatProgress;
exports.formatSecureToolsSummary = formatSecureToolsSummary;
exports.formatSecurityFinding = formatSecurityFinding;
exports.formatSecurityStatus = formatSecurityStatus;
exports.formatSecuritySummary = formatSecuritySummary;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _uiConstants = require("./uiConstants.js");
var _richText = require("./richText.js");
var _inputProtection = require("../core/inputProtection.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt â†’ thought â†’ tool/build/test â†’ response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

// UI helper methods for security components
function createBanner(title, subtitle) {
  const lines = [];
  lines.push(_chalk.default.cyan('â•”' + 'â•'.repeat(68) + 'â•—'));
  lines.push(_chalk.default.cyan('â•‘ ') + _chalk.default.cyan.bold(title.padEnd(66)) + _chalk.default.cyan(' â•‘'));
  if (subtitle) {
    lines.push(_chalk.default.cyan('â•‘ ') + _chalk.default.white(subtitle.padEnd(66)) + _chalk.default.cyan(' â•‘'));
  }
  lines.push(_chalk.default.cyan('â•š' + 'â•'.repeat(68) + 'â•'));
  return lines.join('\n');
}
function formatProgress(phase, step, totalSteps) {
  const percentage = Math.round(step / totalSteps * 100);
  const progressBar = 'â–ˆ'.repeat(Math.floor(percentage / 5)) + 'â–‘'.repeat(20 - Math.floor(percentage / 5));
  return `${_chalk.default.cyan('â ‹')} ${_chalk.default.white(phase)}: [${_chalk.default.green(progressBar)}] ${percentage}% (${step}/${totalSteps})`;
}

// Apple Security UI compatibility methods (replaces AppleSecurityUI.ts)
function createSecurityBanner(title, subtitle) {
  const width = 70;
  const lines = [];
  lines.push(_chalk.default.cyan('â•'.repeat(width)));
  lines.push(`${_chalk.default.cyan('ðŸ›¡ï¸')} ${_chalk.default.cyan.bold(title.toUpperCase())}`);
  if (subtitle) {
    lines.push(_chalk.default.gray(`  ${subtitle}`));
  }
  lines.push(_chalk.default.cyan('â•'.repeat(width)));
  return lines.join('\n');
}
function createSecuritySpinner(message) {
  return `${_chalk.default.cyan('â ‹')} ${_chalk.default.white(message)}`;
}
function formatSecurityFinding(finding) {
  const severityColors = {
    critical: _chalk.default.redBright,
    high: _chalk.default.red,
    medium: _chalk.default.yellow,
    low: _chalk.default.blue,
    info: _chalk.default.gray
  };
  const severityIcons = {
    critical: _chalk.default.redBright('âš '),
    high: _chalk.default.red('â–²'),
    medium: _chalk.default.yellow('â–²'),
    low: _chalk.default.blue('â–¼'),
    info: _chalk.default.gray('â„¹')
  };
  const color = severityColors[finding.severity] || _chalk.default.white;
  const icon = severityIcons[finding.severity] || _chalk.default.gray('â„¹');
  const lines = [];
  lines.push(`${icon} ${color.bold(finding.name || finding.type || 'Finding')}`);
  lines.push(`  ${_chalk.default.gray('Description:')} ${_chalk.default.white(finding.description || 'No description')}`);
  if (finding.evidence) {
    lines.push(`  ${_chalk.default.gray('Evidence:')} ${_chalk.default.white(finding.evidence)}`);
  }
  if (finding.remediation) {
    lines.push(`  ${_chalk.default.gray('Remediation:')} ${_chalk.default.green(finding.remediation)}`);
  }
  return lines.join('\n');
}
function formatSecuritySummary(results) {
  const lines = [];
  lines.push(_chalk.default.cyan('â•'.repeat(70)));
  lines.push(`${_chalk.default.cyan('ðŸ›¡ï¸')} ${_chalk.default.cyan.bold('SECURITY AUDIT SUMMARY')}`);
  lines.push(_chalk.default.cyan('â•'.repeat(70)));
  lines.push(`  ${_chalk.default.gray('Campaign:')} ${_chalk.default.white(results.campaign || 'Unknown')}`);
  lines.push(`  ${_chalk.default.gray('Start Time:')} ${_chalk.default.white(results.startTime || 'Unknown')}`);
  if (results.endTime) {
    lines.push(`  ${_chalk.default.gray('End Time:')} ${_chalk.default.white(results.endTime)}`);
  }
  if (results.duration) {
    lines.push(`  ${_chalk.default.gray('Duration:')} ${_chalk.default.white(`${results.duration}ms`)}`);
  }
  if (results.findings && Array.isArray(results.findings)) {
    const counts = {
      critical: 0,
      high: 0,
      medium: 0,
      low: 0,
      info: 0
    };
    results.findings.forEach(f => {
      counts[f.severity] = (counts[f.severity] || 0) + 1;
    });
    lines.push(`  ${_chalk.default.gray('Findings:')}`);
    Object.entries(counts).forEach(([severity, count]) => {
      if (count > 0) {
        const color = severityColors[severity] || _chalk.default.white;
        lines.push(`    ${color(`${severity.toUpperCase()}:`)} ${_chalk.default.white(count)}`);
      }
    });
    lines.push(`    ${_chalk.default.gray('Total:')} ${_chalk.default.white(results.findings.length)}`);
  }
  return lines.join('\n');
}
function formatSecurityStatus(status, details) {
  const statusIcons = {
    healthy: `${_chalk.default.green('â—')}`,
    degraded: `${_chalk.default.yellow('â—')}`,
    unavailable: `${_chalk.default.red('â—')}`
  };
  const icon = statusIcons[status] || _chalk.default.gray('â—');
  return `${icon} ${_chalk.default.white(details)}`;
}
function formatAuditProgress(phase, progress, total) {
  const percentage = Math.round(progress / total * 100);
  const filled = Math.round(percentage / 10);
  const empty = 10 - filled;
  const progressBar = `${_chalk.default.green('â–ˆ'.repeat(filled))}${_chalk.default.gray('â–‘'.repeat(empty))}`;
  return `${_chalk.default.gray('â±')} ${_chalk.default.cyan('Security Audit')} - ${_chalk.default.white(phase)}\n` + `  ${progressBar} ${_chalk.default.white(`${progress}/${total}`)} ${_chalk.default.gray(`(${percentage}%)`)}`;
}

/**
 * Format a security tools summary message for display.
 * Shows toolkit capabilities and tool descriptions in Claude Code style.
 */
function formatSecureToolsSummary(options) {
  const lines = [];
  const showTitle = options?.showTitle ?? true;
  if (showTitle) {
    lines.push(`${_chalk.default.white('âº')} ${_chalk.default.white('Added new security tools and improved')}`);
    lines.push(`  ${_chalk.default.white('existing ones for more versatile')}`);
    lines.push(`  ${_chalk.default.white('operations.')}`);
  }
  const defaultTools = [{
    name: 'Execute',
    description: 'secure shell commands',
    status: 'active'
  }, {
    name: 'Probe',
    description: 'target analysis',
    status: 'active'
  }, {
    name: 'State',
    description: 'session management',
    status: 'active'
  }];
  const tools = options?.tools || defaultTools;
  const toolParts = tools.map(tool => {
    const statusIcon = tool.status === 'active' ? _chalk.default.green('â—') : tool.status === 'ready' ? _chalk.default.yellow('â—‹') : _chalk.default.gray('â—‹');
    return `${statusIcon} ${_chalk.default.cyan(`'${tool.name}'`)} for ${_chalk.default.white(tool.description)}`;
  });
  if (toolParts.length > 0) {
    lines.push(`  ${_chalk.default.white("You now have")} ${toolParts[0]},`);
    for (let i = 1; i < toolParts.length - 1; i++) {
      lines.push(`  ${toolParts[i]},`);
    }
    if (toolParts.length > 1) {
      lines.push(`  ${_chalk.default.white('and')} ${toolParts[toolParts.length - 1]}â€”`);
    }
    lines.push(`  ${_chalk.default.white('each with enhanced output formatting.')}`);
  }
  lines.push(`  ${_chalk.default.gray('This expands your toolkit\'s capabilities')}`);
  lines.push(`  ${_chalk.default.gray('while maintaining strict input sanitization')}`);
  lines.push(`  ${_chalk.default.gray('and security.')}`);
  lines.push(`  ${_chalk.default.gray('(src/capabilities/maxOffensiveUkraineCapability.ts)')}`);
  return lines.join('\n');
}
const severityColors = {
  critical: text => _chalk.default.hex('#FF6B6B')(text),
  // redBright
  high: text => _chalk.default.hex('#FF5252')(text),
  // red
  medium: text => _chalk.default.hex('#FFD93D')(text),
  // yellow
  low: text => _chalk.default.hex('#4D96FF')(text),
  // blue
  info: text => _chalk.default.hex('#AAAAAA')(text) // gray
};

/**
 * Interactive menu item for Claude Code style menus.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

/**
 * Attack operation status for real-time display during offensive security operations.
 */

/**
 * Security tools status for real-time display of secure TAO tools.
 * Tracks Execute, Probe, State tools with enhanced output formatting.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = 'â†µ';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  output;
  input;
  rl;
  plainMode;
  interactive;
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  /** Queue for input received during streaming - processed after streaming ends */
  streamingInputQueue = [];
  /** Buffer to accumulate streaming content for post-processing */
  streamingContentBuffer = '';
  /** Track lines written during streaming for potential reformat */
  streamingLinesWritten = 0;
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  contextMeter;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['âœ»', 'âœ¼', 'âœ»', 'âœº'];

  // Animated activity line (e.g., "âœ³ Ruminatingâ€¦ (esc to interrupt Â· 34s Â· â†‘1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['âœ³', 'âœ´', 'âœµ', 'âœ¶', 'âœ·', 'âœ¸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    alphaZeroEnabled: false,
    // Normal mode by default, toggle for AlphaZero dual tournament RL
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  /** Secure TAO tools status for real-time display */
  secureToolsStatus = {
    toolkitReady: true,
    sanitizationActive: true,
    totalInvocations: 0
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences and special formatting from text to get clean plaintext */
  sanitizePasteContent(text) {
    if (!text) return '';

    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    let sanitized = text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
    // Also remove partial bracketed paste markers that may have leaked (e.g., "[200~" without ESC)
    sanitized = sanitized.replace(/\[20[01]~/g, '');
    // Remove any stray escape character at start/end
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/^\x1b+|\x1b+$/g, '');

    // Strip toggle symbols that might have leaked through
    // This is a safety net - primary removal happens in stripToggleSymbols
    const isToggleCharacter = ch => {
      if (!ch || ch.length !== 1) return false;
      const code = ch.charCodeAt(0);
      if (code === 169 || code === 8482) return true; // Â© â„¢ (Option+G)
      if (code === 229 || code === 197) return true; // Ã¥ Ã… (Option+A)
      if (code === 8706 || code === 8710 || code === 206) return true; // âˆ‚ âˆ† ÃŽ (Option+D)
      if (code === 8224 || code === 8225) return true; // â€  â€¡ (Option+T)
      if (code === 8730) return true; // âˆš (Option+V)
      return false;
    };
    const chars = [...sanitized];
    let result = '';
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      if (isToggleCharacter(ch)) {
        continue;
      }
      result += ch;
    }
    sanitized = result;

    // Strip special formatting characters for clean plaintext:
    // - Zero-width characters (ZWSP, ZWNJ, ZWJ, BOM/ZWNBSP)
    // - Word joiner, invisible separator, invisible times/plus
    // - Directional formatting (LRM, RLM, LRE, RLE, LRO, RLO, PDF, LRI, RLI, FSI, PDI)
    // - Object replacement character
    // - Soft hyphen
    // - Non-breaking space variants (NBSP, narrow NBSP, figure space, etc.)
    sanitized = sanitized.replace(/[\u200B-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\u00AD\uFFFC]/g, '');

    // Normalize various space characters to regular space
    // Includes: NBSP, en/em space, thin space, hair space, figure space, etc.
    sanitized = sanitized.replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g, ' ');

    // Remove control characters except tab, newline, carriage return
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g, '');
    return sanitized;
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 80; // Increased for more robust multi-line paste detection
  plainPasteWindowMs = 120; // Increased window for paste burst detection
  plainPasteTriggerChars = 16; // Lower threshold to catch multi-line pastes sooner
  plainPasteEarlyNewlineChars = 1; // Immediate detection of multi-line content
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 16; // Reduced from 80ms for faster typing response
  // Emit-level paste detection - accumulate all rapid input then commit
  emitPasteBuffer = '';
  emitPasteTimer = null;
  emitPasteCommitMs = 30; // Commit after 30ms of no input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Performance: Cache last rendered state to skip unnecessary renders
  lastRenderedBuffer = '';
  forceNextRender = false;
  lastRenderedCursor = 0;
  lastRenderedMode = 'idle';
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Initialization state - skip prompt renders until first banner is shown
  initializing = true;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  boundDataHandler = null;
  boundCtrlHandler = null;
  // Original emit method for restoration on cleanup
  originalEmit = null;
  inputProtection = null;
  inputCapture = null;

  // Interactive menu state (Claude Code style)
  menuItems = [];
  menuIndex = 0;
  menuTitle = null;
  menuCallback = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();

    // Set up error handling for EventEmitter
    this.on('error', err => {
      // Log errors but don't crash
      console.error('[UnifiedUIRenderer] Error:', err);
    });
    this.output = output;
    this.input = input;

    // Robust TTY detection with multiple fallbacks
    const outputIsTTY = Boolean(this.output?.isTTY);
    const inputIsTTY = Boolean(this.input?.isTTY);
    this.interactive = outputIsTTY && inputIsTTY;
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components with error handling
    try {
      this.contextMeter = new _animatedStatus.ContextMeter();
    } catch {
      // Create a no-op context meter if initialization fails
      this.contextMeter = new _animatedStatus.ContextMeter();
    }

    // Create readline interface with error handling
    try {
      this.rl = readline.createInterface({
        input: this.input,
        output: this.output,
        terminal: true,
        prompt: '',
        tabSize: 2
      });
      this.rl.setPrompt('');
    } catch (err) {
      // If readline creation fails, create a minimal fallback
      console.error('[UnifiedUIRenderer] Failed to create readline interface:', err);
      this.rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
        terminal: false
      });
      this.interactive = false;
      this.plainMode = true;
    }
    this.updateTerminalSize();

    // Initialize input protection against remote attacks
    this.inputProtection = (0, _inputProtection.initializeInputProtection)({
      verbose: process.env['AGI_DEBUG'] === '1',
      onAttackDetected: (type, details) => {
        // Log attack but don't disrupt user experience
        if (process.env['AGI_DEBUG']) {
          console.error(`[InputProtection] Attack detected: ${type} - ${details}`);
        }
      }
    });

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        try {
          this.updateTerminalSize();
          this.renderPrompt();
        } catch {
          // Silently ignore resize errors
        }
      }
    };

    // Safely add resize handler
    try {
      this.output.on('resize', this.boundResizeHandler);
    } catch {
      // Ignore if event listener can't be added
    }
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }

    // Reset input and paste state to prevent stale state from previous session
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.collapsedPaste = null;
    this.pendingInsertBuffer = '';
    this.cancelPlainPasteCapture();
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;

    // Wrap all cleanup in try-catch to ensure graceful shutdown
    try {
      this.cancelInputCapture(new Error('Renderer disposed'));
    } catch {/* ignore */}
    try {
      this.cancelPlainPasteCapture();
    } catch {/* ignore */}

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      try {
        clearTimeout(this.renderThrottleTimer);
      } catch {/* ignore */}
      this.renderThrottleTimer = null;
    }

    // Stop any running animations with error handling
    if (this.spinnerInterval) {
      try {
        clearInterval(this.spinnerInterval);
      } catch {/* ignore */}
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      try {
        this.streamingSpinner.stop();
      } catch {/* ignore */}
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      try {
        this.thinkingIndicator.stop();
      } catch {/* ignore */}
      this.thinkingIndicator = null;
    }
    try {
      this.contextMeter.dispose();
    } catch {/* ignore */}
    try {
      (0, _animatedStatus.disposeAnimations)();
    } catch {/* ignore */}

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      try {
        this.output.removeListener('resize', this.boundResizeHandler);
      } catch {/* ignore */}
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      try {
        this.input.removeListener('keypress', this.boundKeypressHandler);
      } catch {/* ignore */}
      this.boundKeypressHandler = null;
    }
    if (this.boundDataHandler) {
      try {
        this.input.removeListener('data', this.boundDataHandler);
      } catch {/* ignore */}
      this.boundDataHandler = null;
    }
    if (this.boundCtrlHandler) {
      try {
        this.input.removeListener('data', this.boundCtrlHandler);
      } catch {/* ignore */}
      this.boundCtrlHandler = null;
    }

    // Restore original emit method on stdin
    if (this.originalEmit) {
      try {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        this.input.emit = this.originalEmit;
      } catch {/* ignore */}
      this.originalEmit = null;
    }

    // Remove all EventEmitter listeners from this instance
    try {
      this.removeAllListeners();
    } catch {/* ignore */}
    if (!this.interactive) {
      try {
        this.rl.close();
      } catch {/* ignore */}
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      try {
        this.clearPromptArea();
        this.write(ESC.DISABLE_BRACKETED_PASTE);
        this.write(ESC.SHOW_CURSOR);
        this.write('\n');
      } catch {/* ignore */}
    }
    try {
      if (this.input.isTTY) {
        this.input.setRawMode(false);
      }
    } catch {/* ignore */}
    try {
      this.rl.close();
    } catch {/* ignore */}
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  // Track special keys intercepted at the raw data level
  interceptedToggle = null;
  interceptedCtrlC = false;
  interceptedCtrlD = false;
  pendingToggleSkips = 0;
  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');

    // CRITICAL: Override the emit method on stdin to intercept data events
    // BEFORE any listener (including readline) sees them. This is the ONLY
    // way to truly prevent control characters from being echoed.
    const self = this;
    this.originalEmit = this.input.emit.bind(this.input);

    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    this.input.emit = function (event, ...args) {
      if (event === 'data' && !self.disposed) {
        const data = args[0];
        const str = Buffer.isBuffer(data) ? data.toString('utf8') : String(data || '');
        const code = str ? str.charCodeAt(0) : 0;
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] EMIT INTERCEPT: event="${event}" str="${str}" code=${code} len=${str.length}`);
        }

        // BLOCK: Ctrl+C (code 3) - handle and suppress
        if (code === 3) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] CTRL+C BLOCKED AT EMIT LEVEL`);
          }
          // Use setImmediate to handle after this event loop tick
          setImmediate(() => self.handleCtrlC());
          return true; // Suppress the event
        }

        // BLOCK: Ctrl+D (code 4) - handle and suppress
        if (code === 4) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] CTRL+D BLOCKED AT EMIT LEVEL`);
          }
          setImmediate(() => self.handleCtrlD());
          return true; // Suppress the event
        }

        // BLOCK: Direct single-char toggle detection (most common case)
        // Check the first char code directly for speed and reliability
        let directToggle = null;
        if (str.length === 1) {
          if (code === 169 || code === 8482) directToggle = 'g'; // Â© â„¢
          else if (code === 229 || code === 197) directToggle = 'a'; // Ã¥ Ã…
          else if (code === 8706 || code === 8710 || code === 206) directToggle = 'd'; // âˆ‚ âˆ† ÃŽ
          else if (code === 8224 || code === 8225) directToggle = 't'; // â€  â€¡
          else if (code === 8730) directToggle = 'v'; // âˆš
        }
        // Also check ESC+letter (2-char sequence)
        if (!directToggle && code === 27 && str.length === 2) {
          const letter = str.charAt(1).toLowerCase();
          if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
            directToggle = letter;
          }
        }
        if (directToggle) {
          // Handle immediately (not in setImmediate to ensure it runs)
          self.handleToggle(directToggle);
          return true; // Suppress the event
        }

        // BLOCK: Multi-char toggle detection (for paste scenarios)
        const toggles = self.extractToggleLetters(str);
        if (toggles.length > 0) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] TOGGLE MULTI DETECT: ${toggles.join(',')}`);
          }
          for (const letter of toggles) {
            self.handleToggle(letter);
          }
          return true; // Suppress the event
        }

        // PASTE DETECTION at emit level: Multi-char data = paste
        // When user types, each character arrives separately
        // When user pastes, all characters arrive as one chunk OR rapidly
        // Check for bracketed paste markers first
        const pasteStartMarker = '\x1b[200~';
        const pasteEndMarker = '\x1b[201~';
        const hasBracketedStart = str.includes(pasteStartMarker);
        const hasBracketedEnd = str.includes(pasteEndMarker);

        // Handle bracketed paste (terminal sends markers)
        if (hasBracketedStart || hasBracketedEnd || self.inBracketedPaste) {
          // Let the regular bracketed paste handler deal with it
          // Fall through to readline
        }
        // Detect plain paste: multi-char, has printable content, not escape sequence
        // This is handled by the buffer logic below, so we can remove this special case
        // The buffer logic at the bottom handles both single-char and multi-char
        // Buffer ALL input (including multi-char chunks) and commit after idle
        // This catches paste whether terminal sends it as one chunk or char-by-char
        const isPrintable = c => c >= 32 && c < 127 || c > 127; // ASCII printable or Unicode
        const isNewline = c => c === 10 || c === 13;
        const inPasteBurst = self.emitPasteBuffer.length > 0;

        // PASTE DETECTION: Only buffer when we detect paste-like input
        // - Multi-char string (definitely paste - terminal sent chunk)
        // - Continuation of existing paste burst
        // For single chars, let them through immediately for responsive typing
        let shouldBuffer = false;

        // Multi-char non-escape = definitely paste
        if (str.length > 1 && !str.startsWith('\x1b')) {
          shouldBuffer = true;
        }
        // Continue buffering if we're already in a paste burst
        else if (inPasteBurst && str.length === 1 && (isPrintable(code) || isNewline(code))) {
          shouldBuffer = true;
        }
        if (shouldBuffer) {
          // Add to buffer (strip any toggle symbols that might have slipped through)
          const cleaned = self.stripToggleSymbols(str);
          if (!cleaned) return true; // Was only toggle chars
          self.emitPasteBuffer += cleaned;

          // Clear existing timer
          if (self.emitPasteTimer) {
            clearTimeout(self.emitPasteTimer);
          }

          // Set timer to commit after idle
          self.emitPasteTimer = setTimeout(() => {
            self.commitEmitPasteBuffer();
          }, self.emitPasteCommitMs);
          return true; // Suppress - we're buffering
        }
        // Single char when NOT in paste burst = normal typing, let through
        // Newline when not in burst = Enter key, let through

        // NOTE: Do NOT block other control characters here!
        // Backspace (8/127), Tab (9), Enter (13), arrows (27+seq) must pass through
        // for normal editing to work. Only Ctrl+C/D and toggles are intercepted above.
      }

      // Allow all other events to pass through
      return self.originalEmit(event, ...args);
    };

    // Now set up readline's keypress emission
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }

    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }

  /**
   * Detect toggle characters from raw input data before readline processing.
   * Returns the toggle letter (g, a, d, t, v) or null if not a toggle.
   */
  detectToggleFromRawData(input) {
    if (!input) return null;
    const code = input.charCodeAt(0);

    // Unicode characters from "Option sends Unicode" mode
    if (code === 169 || code === 8482) return 'g'; // Â© â„¢
    if (code === 229 || code === 197) return 'a'; // Ã¥ Ã…
    if (code === 8706 || code === 8710 || code === 206) return 'd'; // âˆ‚ âˆ† ÃŽ
    if (code === 8224 || code === 8225) return 't'; // â€  â€¡
    if (code === 8730) return 'v'; // âˆš

    // ESC + letter from "Option sends Meta" mode
    if (code === 27 && input.length === 2) {
      const letter = input.charAt(1).toLowerCase();
      if (['g', 'a', 'd', 't', 'v'].includes(letter)) return letter;
    }
    return null;
  }

  /**
   * Extract all toggle letters from an arbitrary chunk of input data.
   * Handles both Unicode toggles and ESC-prefixed Meta sequences, and
   * supports multiple toggles in a single data event.
   */
  extractToggleLetters(input) {
    if (!input) return [];
    const toggles = [];
    const chars = [...input];
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      const code = ch.charCodeAt(0);

      // Detect ESC + letter (Option sends Meta)
      if (code === 27 && i + 1 < chars.length) {
        const letter = chars[i + 1].toLowerCase();
        if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
          toggles.push(letter);
          i++; // Skip the meta letter so it isn't double-counted
          continue;
        }
      }
      const detected = this.detectToggleFromRawData(ch);
      if (detected) {
        toggles.push(detected);
      }
    }
    return toggles;
  }

  /**
   * Remove toggle symbols (and their ESC prefixes) from a string so they
   * can never leak into the prompt buffer.
   */
  stripToggleSymbols(input) {
    if (!input) return '';
    const chars = [...input];
    let result = '';
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      const code = ch.charCodeAt(0);

      // Drop Unicode toggle characters outright
      if (this.isToggleCharacter(ch)) {
        continue;
      }

      // Drop ESC + toggle letter (Option sends Meta)
      // Also handle case where ESC might be followed by [ (CSI sequence start)
      if (code === 27) {
        if (i + 1 < chars.length) {
          const letter = chars[i + 1].toLowerCase();
          if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
            i++; // Skip the meta letter as well
            continue;
          }
          // Also drop ESC + '[' (CSI sequence start) to prevent partial escape sequences
          if (chars[i + 1] === '[') {
            i++; // Skip the '[' as well
            // Skip any digits, semicolons, and the final character
            while (i + 1 < chars.length && /[0-9;]/.test(chars[i + 1])) {
              i++;
            }
            if (i + 1 < chars.length) {
              i++; // Skip the final character (A-Z, a-z, ~, etc.)
            }
            continue;
          }
        }
      }
      result += ch;
    }
    return result;
  }

  /**
   * Check if a character is a toggle character that should never be inserted.
   * Used as a safety guard to prevent toggle symbols from appearing in input.
   */
  isToggleCharacter(input) {
    if (!input || input.length !== 1) return false;
    const code = input.charCodeAt(0);
    // Unicode toggle characters
    if (code === 169 || code === 8482) return true; // Â© â„¢ (Option+G)
    if (code === 229 || code === 197) return true; // Ã¥ Ã… (Option+A)
    if (code === 8706 || code === 8710 || code === 206) return true; // âˆ‚ âˆ† ÃŽ (Option+D)
    if (code === 8224 || code === 8225) return true; // â€  â€¡ (Option+T)
    if (code === 8730) return true; // âˆš (Option+V)
    return false;
  }

  /**
   * Handle a detected toggle action. Called from both raw data interception
   * and keypress processing for reliability.
   */
  handleToggle(letter) {
    // Clear any pending insert buffer so the symbol never lands in the prompt
    this.pendingInsertBuffer = '';
    // Cancel any plain paste detection in progress
    this.cancelPlainPasteCapture();

    // Force immediate render for toggles - works during streaming
    const forceRender = () => {
      if (this.mode === 'streaming') {
        this.renderPromptImmediate();
      } else {
        this.renderPrompt();
      }
    };
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] TOGGLE HANDLING: ${letter}`);
    }
    switch (letter) {
      case 'a':
        this.emit('toggle-critical-approval');
        forceRender();
        break;
      case 'g':
        this.emit('toggle-auto-continue');
        forceRender();
        break;
      case 'd':
        this.emit('toggle-alphazero');
        forceRender();
        break;
      case 't':
        this.emit('toggle-thinking');
        forceRender();
        break;
      case 'v':
        // Option+V: Available for future toggle
        break;
    }
  }

  /**
   * Handle Ctrl+C detected at raw data level.
   * Bypasses readline's keypress parsing for reliability.
   */
  handleCtrlC() {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] HANDLING CTRL+C`);
    }

    // If we're in input capture mode, cancel it first
    if (this.inputCapture) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Ctrl+C behavior:
    // 1. If buffer has text: clear it first, then notify shell
    // 2. If buffer is empty: let shell decide to pause AI or quit
    const hadBuffer = this.buffer.length > 0;
    if (hadBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    // Emit ctrlc event with buffer state so shell can handle appropriately
    this.emit('ctrlc', {
      hadBuffer
    });
  }

  /**
   * Handle Ctrl+D detected at raw data level.
   * Bypasses readline's keypress parsing for reliability.
   */
  handleCtrlD() {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] HANDLING CTRL+D`);
    }

    // If we're in input capture mode, cancel it first
    if (this.inputCapture) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Ctrl+D: interrupt if buffer is empty
    if (this.buffer.length === 0) {
      this.emit('interrupt');
    }
  }

  /**
   * Commit buffered emit-level input after idle period.
   * Decides whether to treat as paste (collapse) or normal typing (insert).
   */
  commitEmitPasteBuffer() {
    const content = this.emitPasteBuffer;
    this.emitPasteBuffer = '';
    this.emitPasteTimer = null;
    if (!content) return;
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] COMMIT EMIT BUFFER: ${content.length} chars`);
    }

    // Sanitize content
    let sanitized = this.sanitizePasteContent(content);
    sanitized = sanitized.replace(/\r\n?/g, '\n');

    // Input protection validation
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        return;
      }
      sanitized = validation.sanitized;
    }
    if (!sanitized) return;
    const lines = sanitized.split('\n');
    const isMultiLine = lines.length > 1;
    const isLongContent = sanitized.length > 100; // Lower threshold for better UX

    // Multi-line or long content: show collapsed indicator
    if (isMultiLine || isLongContent) {
      // Combine with existing collapsed paste if any
      if (this.collapsedPaste) {
        sanitized = this.collapsedPaste.text + sanitized;
        const newLines = sanitized.split('\n');
        this.collapsedPaste = {
          text: sanitized,
          lines: newLines.length,
          chars: sanitized.length
        };
      } else {
        this.collapsedPaste = {
          text: sanitized,
          lines: lines.length,
          chars: sanitized.length
        };
        this.buffer = '';
        this.cursor = 0;
      }
      this.updateSuggestions();
      this.forceNextRender = true;
      this.renderPrompt();
      this.emitInputChange();
    } else {
      // Short single-line content: insert directly as if typed
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.insertSingleLineText(sanitized);
    }
  }

  /**
   * Handle paste detected at emit level (multi-char data arriving at once).
   * This bypasses readline processing for reliable paste detection.
   */
  handleEmitLevelPaste(content) {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] EMIT PASTE HANDLING: ${content.length} chars`);
    }

    // Sanitize content (remove control chars, normalize line endings)
    let sanitized = this.sanitizePasteContent(content);
    sanitized = sanitized.replace(/\r\n?/g, '\n');

    // Input protection validation
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        return;
      }
      sanitized = validation.sanitized;
    }
    if (!sanitized) return;
    const lines = sanitized.split('\n');
    const isMultiLine = lines.length > 1;
    const isLongContent = sanitized.length > 200;

    // Multi-line or long content: show collapsed indicator
    if (isMultiLine || isLongContent) {
      // Clear any existing collapsed paste first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.collapsedPaste = {
        text: sanitized,
        lines: lines.length,
        chars: sanitized.length
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.forceNextRender = true;
      this.renderPrompt();
      this.emitInputChange();
    } else {
      // Short single-line content: insert directly as if typed
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.insertSingleLineText(sanitized);
    }
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Skip processing if a raw-level toggle was already handled for this keypress
    if (this.pendingToggleSkips > 0) {
      this.pendingToggleSkips--;
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] SKIP KEYPRESS (pending toggle)`);
      }
      return;
    }

    // BLOCK: If Ctrl+C/D was intercepted at raw level, it's already handled
    if (this.interceptedCtrlC || this.interceptedCtrlD) {
      return; // Already handled in raw data handler
    }

    // BLOCK: If toggle was intercepted at raw level, it's already handled
    if (this.interceptedToggle) {
      this.interceptedToggle = null;
      return; // Already handled in raw data handler
    }

    // BLOCK: Check character code directly for special keys
    const code = str ? str.charCodeAt(0) : 0;
    if (code === 3) {
      // Ctrl+C
      this.handleCtrlC();
      return;
    }
    if (code === 4) {
      // Ctrl+D
      this.handleCtrlD();
      return;
    }

    // BLOCK: Check for toggle characters directly
    if (str && this.isToggleCharacter(str)) {
      this.handleToggle(this.detectToggleFromRawData(str));
      return;
    }

    // Debug: log entry parameters to understand what readline is sending
    if (process.env['AGI_DEBUG_KEYS']) {
      const keyInfo = key ? `name=${key.name} ctrl=${key.ctrl} meta=${key.meta} shift=${key.shift} seq=${key.sequence ? JSON.stringify(key.sequence) : 'null'}` : 'null';
      console.error(`[KEY] ENTRY: str=${str ? JSON.stringify(str) : 'null'} code=${code} key={${keyInfo}}`);
    }
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);

    // CRITICAL: Handle Ctrl+C and Ctrl+D FIRST - must ALWAYS work to quit/interrupt
    // This is checked before ANY other processing to ensure it can never be blocked
    if (normalizedKey?.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      // If we're in input capture mode, cancel it first
      if (this.inputCapture) {
        this.cancelInputCapture(new Error('Input capture cancelled'));
        this.clearBuffer();
        return;
      }
      if (normalizedKey.name === 'c') {
        // Ctrl+C behavior:
        // 1. If buffer has text: clear it first, then notify shell
        // 2. If buffer is empty: let shell decide to pause AI or quit
        const hadBuffer = this.buffer.length > 0;
        if (hadBuffer) {
          this.buffer = '';
          this.cursor = 0;
          this.inputRenderOffset = 0;
          this.resetSuggestions();
          this.renderPrompt();
          this.emitInputChange();
        }
        // Emit ctrlc event with buffer state so shell can handle appropriately
        this.emit('ctrlc', {
          hadBuffer
        });
        return;
      }
      if (normalizedKey.name === 'd') {
        // Ctrl+D: interrupt if buffer is empty
        if (this.buffer.length === 0) {
          this.emit('interrupt');
        }
        return;
      }
    }

    // Handle macOS Option+key toggles BEFORE any paste detection
    // Check multiple sources: str, key.sequence, and key.meta+key.name
    // This is a fallback - primary detection happens in the raw 'data' event handler

    // Check str first
    let toggleLetter = this.detectToggleFromRawData(str);

    // Also check key.sequence if str didn't match (readline may transform the input)
    if (!toggleLetter && key?.sequence) {
      toggleLetter = this.detectToggleFromRawData(key.sequence);
      if (toggleLetter && process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] TOGGLE DETECTED via key.sequence: ${toggleLetter}`);
      }
    }
    if (toggleLetter) {
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] TOGGLE DETECTED (keypress fallback): ${toggleLetter}`);
      }
      this.handleToggle(toggleLetter);
      return;
    }

    // Also check meta+key pattern if str/sequence didn't match
    if (normalizedKey?.meta && normalizedKey.name) {
      const metaLetter = normalizedKey.name.toLowerCase();
      if (['g', 'a', 'd', 't', 'v'].includes(metaLetter)) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] TOGGLE DETECTED (meta key): ${metaLetter}`);
        }
        this.handleToggle(metaLetter);
        return;
      }
    }
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }
    if (!normalizedKey) {
      return;
    }

    // inputCapture Ctrl+C/D is handled at the top of handleKeypress

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-alphazero');
      } else if (letter === 't') {
        this.emit('toggle-thinking');
      }
      // Force immediate render during streaming to ensure toggle state is visible
      if (this.mode === 'streaming') {
        this.renderPromptImmediate();
      } else {
        this.renderPrompt();
      }
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('t')) {
      handleCtrlShiftToggle('t');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }

    // Ctrl+C and Ctrl+D are handled at the top of handleKeypress for guaranteed execution

    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // Check for slash command completion first (works in both streaming and non-streaming modes)
      if (this.applySuggestion(true)) return;

      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }

      // During streaming, queue the input for processing after AI completes
      if (this.mode === 'streaming') {
        const queuedInput = this.streamingInputQueue.join('').trim();
        if (queuedInput) {
          this.emit('queue', queuedInput);
          this.streamingInputQueue = [];
        }
        // Also submit current buffer if it has content
        if (this.buffer.trim()) {
          this.submitText(this.buffer);
        }
        return;
      }

      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      // Reset any paste detection state to ensure clean render
      this.resetPlainPasteBurst();
      this.cancelPlainPasteCapture();
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      // Reset any paste detection state to ensure clean render
      this.resetPlainPasteBurst();
      this.cancelPlainPasteCapture();
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely (similar to backspace)
        this.collapsedPaste = null;
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Menu navigation (Claude Code style) - intercepts keys when menu is active
    if (this.isMenuActive()) {
      if (normalizedKey.name === 'up') {
        this.navigateMenu(-1);
        return;
      }
      if (normalizedKey.name === 'down') {
        this.navigateMenu(1);
        return;
      }
      if (normalizedKey.name === 'return') {
        this.selectMenuItem();
        return;
      }
      if (normalizedKey.name === 'escape') {
        this.closeMenu();
        return;
      }
      // Other keys close menu without selection
      if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
        this.closeMenu();
        // Don't return - let the key be processed normally
      }
    }
    if (normalizedKey.name === 'left') {
      // Reset paste state to ensure clean render
      this.resetPlainPasteBurst();
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      // Reset paste state to ensure clean render
      this.resetPlainPasteBurst();
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // SAFETY: Final guard to prevent toggle characters from ever being inserted
      // This should never trigger if earlier detection works, but acts as a safety net
      if (this.isToggleCharacter(str)) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] BLOCKED toggle character from insertion: "${str}" code=${str.charCodeAt(0)}`);
        }
        return;
      }

      // Queue text input during streaming - process after AI completes
      if (this.mode === 'streaming') {
        this.streamingInputQueue.push(str);
        return;
      }
      // Debug: trace why toggle didn't catch this character
      if (process.env['AGI_DEBUG_KEYS']) {
        const code = str.charCodeAt(0);
        console.error(`[KEY] QUEUE INSERT: str="${str}" code=${code}`);
      }
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    // If toggle characters slipped through, handle them here and strip them before insertion
    const toggles = this.extractToggleLetters(text);
    if (toggles.length > 0) {
      for (const letter of toggles) {
        this.handleToggle(letter);
      }
      text = this.stripToggleSymbols(text);
      if (!text) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error('[KEY] QUEUE INSERT DROPPED: toggle-only input');
        }
        return;
      }
    }

    // Fast-path: single printable ASCII character with no pending buffer = immediate insert
    // This makes normal typing feel instant while still detecting multi-char pastes
    // BUT: skip fast path if burst activity suggests incoming paste
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    if (text.length === 1 && this.pendingInsertBuffer === '' && !this.inPlainPaste && !this.inBracketedPaste && !burstActive && text.charCodeAt(0) >= 32 && text.charCodeAt(0) < 127) {
      this.insertText(text);
      return;
    }
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   * If we reach here, paste detection didn't trigger, so this is normal typing.
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      // Reset burst state BEFORE inserting so render isn't suppressed
      // If paste detection didn't trigger, this is just fast typing, not a paste
      this.resetPlainPasteBurst();
      this.plainRecentChunks = [];
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      // Consume and sanitize pending buffer to prevent partial escape sequences leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      // Extract content after the start marker (discard any content before it - likely partial escapes)
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume and sanitize any pending insert buffer to prevent partial escapes leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      this.pasteBuffer = pending;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    let sanitized = this.sanitizePasteContent(this.pasteBuffer);

    // Input protection validation against remote paste attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        // Paste blocked - reset state and abort
        this.inBracketedPaste = false;
        this.pasteBuffer = '';
        this.pasteBufferOverflow = false;
        return;
      }
      sanitized = validation.sanitized;
    }
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }

    // Don't treat escape sequences (arrow keys, etc.) as paste
    // Escape sequences start with \x1b (ESC) and are used for cursor movement, etc.
    if (typeof str === 'string' && str.startsWith('\x1b')) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    let sanitized = this.sanitizePasteContent(this.plainPasteBuffer);

    // Input protection validation against remote paste attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        // Paste blocked - reset state and abort
        this.inPlainPaste = false;
        this.plainPasteBuffer = '';
        this.plainRecentChunks = [];
        this.resetPlainPasteBurst();
        this.pasteBufferOverflow = false;
        return;
      }
      sanitized = validation.sanitized;
    }
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;

    // SAFETY NET: Filter out any toggle or control characters that slipped through
    // This should never happen if earlier detection works, but acts as final guard
    const filtered = [...text].filter(c => {
      const code = c.charCodeAt(0);
      // Block ALL control characters (0-31) and DEL (127)
      // This includes Ctrl+C (3), Ctrl+D (4), ESC (27), etc.
      if (code < 32 || code === 127) return false;
      // Block toggle characters (Option+G/A/D/T/V Unicode)
      if (this.isToggleCharacter(c)) return false;
      return true;
    }).join('');
    if (!filtered) {
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] INSERT TEXT BLOCKED: all chars filtered from "${text}"`);
      }
      return;
    }
    text = filtered;

    // Debug: trace what's being inserted
    if (process.env['AGI_DEBUG_KEYS']) {
      const code = text.charCodeAt(0);
      console.error(`[KEY] INSERT TEXT: "${text}" code=${code}`);
    }

    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }

    // Input protection validation against remote attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(text, false);
      if (validation.blocked) {
        // Input blocked - silently drop to prevent attack
        return;
      }
      if (validation.sanitized !== text) {
        // Use sanitized version
        text = validation.sanitized;
        if (!text) return;
      }
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Sanitize input to remove special formatting characters
    const sanitized = this.sanitizePasteContent(text);
    if (!sanitized) return;

    // Handle multi-line text by collapsing to single line for normal input
    const hasNewlines = sanitized.includes('\n');
    if (hasNewlines) {
      // For multi-line text in normal insertion, collapse to single line with spaces
      const collapsed = sanitized.replace(/\r\n|\r|\n/g, ' ');
      this.insertSingleLineText(collapsed);
    } else {
      this.insertSingleLineText(sanitized);
    }
  }
  insertSingleLineText(text) {
    if (!text) return;
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    // Suppress render during paste detection to prevent visual leak
    const inEmitPaste = this.emitPasteBuffer.length > 0 || this.emitPasteTimer !== null;
    if (!this.inPlainPaste && !this.inBracketedPaste && !inEmitPaste) {
      this.renderPrompt();
    }
    this.emitInputChange();
  }
  submitText(text) {
    const isBufferSource = text === this.buffer;

    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }

    // Ensure any deferred input has been committed before submission
    this.commitPendingInsert();
    if (isBufferSource) {
      text = this.buffer;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    let normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Final prompt validation before submission to AI
    if (this.inputProtection) {
      const validation = this.inputProtection.validatePromptSubmission(normalized);
      if (validation.blocked) {
        // Prompt blocked - don't submit
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        return;
      }
      normalized = validation.sanitized;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  /** Track last added event to prevent duplicates */
  lastAddedEventSignature = '';
  addEvent(type, content) {
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;

    // Deduplicate events at the source to prevent duplicate display
    // Skip deduplication for prompts (user input should always show)
    if (normalized !== 'prompt') {
      const signature = `${normalized}:${content}`;
      if (signature === this.lastAddedEventSignature) {
        return; // Skip duplicate event
      }
      this.lastAddedEventSignature = signature;
    }
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // Note: For prompt events, the overlay is already rendered in renderEvent()
        // via renderPromptOverlay(true). No need to render again here.
        if (event.type === 'prompt') {
          // Ensure prompt rendering is allowed for subsequent events
          if (this.output.isTTY) {
            this.allowPromptRender = true;
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    // Clear initialization flag when first banner is displayed
    // This allows prompt rendering to begin after the welcome banner
    if (event.rawType === 'banner' && this.initializing) {
      this.initializing = false;
    }
    if (this.plainMode) {
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    if (!formatted) return;

    // Deduplicate streaming and response content to prevent duplicates
    const signature = `${event.rawType}:${event.content}`;
    if ((event.type === 'stream' || event.type === 'response') && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: âš¡ToolName â†’ result
          const content = event.content.replace(/^[âºâš™â—‹]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: â””â”€ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        {
          // Streaming content is the model's response - pass through directly
          // IMPORTANT: Don't filter streaming chunks with isGarbageOutput because:
          // 1. Chunks arrive character-by-character or in small pieces
          // 2. Small chunks like "." or ":" are valid parts of sentences
          // 3. Filtering would break the streaming display
          // Only filter completely empty content
          if (!event.content) {
            return '';
          }
          // Accumulate streaming content for potential post-processing
          this.streamingContentBuffer += event.content;
          // Track newlines for line counting
          const newlines = (event.content.match(/\n/g) || []).length;
          this.streamingLinesWritten += newlines;
          return event.content;
        }
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Premium response formatting with assistant styling
          const isError = event.rawType === 'error';
          if (isError) {
            return this.wrapBulletText(event.content, {
              label: 'error',
              labelColor: _theme.theme.error,
              thoughtType: 'danger'
            });
          } else {
            // Assistant response with premium styling
            return this.formatAssistantResponse(event.content);
          }
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;
    const trimmed = content.trim();

    // Very short content checks - catch leaked punctuation fragments like "." or ":"
    if (trimmed.length <= 3) {
      // Single punctuation marks or very short punctuation sequences are garbage
      if (/^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$]+$/.test(trimmed)) {
        return true;
      }
    }

    // Check if content is just punctuation on multiple lines (leaked reasoning)
    const lines = content.split('\n');
    const punctOnlyLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      return lineTrimmed.length > 0 && /^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$\s]+$/.test(lineTrimmed);
    });
    // If ALL non-empty lines are just punctuation, it's garbage
    const nonEmptyLines = lines.filter(l => l.trim().length > 0);
    if (nonEmptyLines.length > 0 && punctOnlyLines.length === nonEmptyLines.length) {
      return true;
    }

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: mostly punctuation/symbols - leaked reasoning fragments
    const meaningfulLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      if (!lineTrimmed) return false;
      // Line must have at least 30% alphanumeric content
      const alphaNum = (lineTrimmed.match(/[a-zA-Z0-9]/g) || []).length;
      return lineTrimmed.length > 0 && alphaNum / lineTrimmed.length >= 0.3;
    });
    // If less than 30% of lines are meaningful, it's garbage
    if (lines.length > 3 && meaningfulLines.length / lines.length < 0.3) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.4) {
      return true; // Less than 40% letters = likely garbage
    }
    return false;
  }

  /**
   * Sanitize tool result content to remove leaked reasoning/thinking output.
   * This filters out fragments that look like internal model output.
   */
  sanitizeToolResultContent(content) {
    if (!content) return '';

    // Split into lines and filter out garbage lines
    const lines = content.split('\n');
    const cleanLines = [];
    for (const line of lines) {
      const trimmed = line.trim();

      // Skip empty lines at start
      if (cleanLines.length === 0 && !trimmed) continue;

      // Skip lines that look like leaked reasoning fragments
      // Common patterns: single punctuation, markdown artifacts, emoji fragments
      if (/^[)\]}>*`'"]+$/.test(trimmed)) continue;
      if (/^[*_]{2,}$/.test(trimmed)) continue; // Just ** or __
      if (/^[|â”‚â”ƒ]+$/.test(trimmed)) continue; // Just vertical bars
      if (/^[â”€â”â•]+$/.test(trimmed)) continue; // Just horizontal lines
      if (/^\.{2,}$/.test(trimmed)) continue; // Just dots
      if (/^[\sï¸]+$/.test(trimmed)) continue; // Just whitespace/emoji modifiers
      if (/^[:\s]+$/.test(trimmed)) continue; // Just colons/whitespace
      if (/^[,\s]+$/.test(trimmed)) continue; // Just commas/whitespace

      // Skip markdown bold/italic fragments that leaked
      if (/^\*{1,2}[^*]*\*{0,2}$/.test(trimmed) && trimmed.length < 10 && !/\w{3,}/.test(trimmed)) continue;

      // Skip lines that are just short fragments with high punctuation ratio
      const alphaInLine = (trimmed.match(/[a-zA-Z0-9]/g) || []).length;
      if (trimmed.length > 0 && trimmed.length < 20 && alphaInLine / trimmed.length < 0.3) continue;

      // Skip very short lines that are just punctuation or single chars (except numbers)
      if (trimmed.length <= 2 && !/^\d+$/.test(trimmed) && !/^[a-zA-Z]{2}$/.test(trimmed)) {
        // Allow specific short patterns like "OK", "0", "1" etc.
        if (!/^(?:ok|no|yes|\d+)$/i.test(trimmed)) continue;
      }

      // Skip lines that look like stray parentheses or brackets from reasoning
      if (/^[()[\]{}]+$/.test(trimmed)) continue;

      // Skip lines that look like markdown code fence artifacts
      if (/^```\s*$/.test(trimmed)) continue;
      cleanLines.push(line);
    }

    // Trim trailing empty lines
    while (cleanLines.length > 0 && !cleanLines[cleanLines.length - 1]?.trim()) {
      cleanLines.pop();
    }
    return cleanLines.join('\n').trim();
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[â€¢*âºâ—‹\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([â€¢*âºâ—‹-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `â€¢ ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*â€¢]\s/.test(line) || line.includes('->') || line.includes('â†’') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:â†’]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    const normalizedLower = normalized.toLowerCase();

    // Exact duplicate detection
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalizedLower) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }

    // Semantic duplicate detection - check if new thought is a subset of previous thought
    if (this.lastCuratedThought) {
      const previous = this.lastCuratedThought.text;
      const current = normalizedLower;

      // If current thought contains most of previous thought (or vice versa), it's likely a duplicate
      const wordsPrevious = previous.split(/\s+/).filter(w => w.length > 3);
      const wordsCurrent = current.split(/\s+/).filter(w => w.length > 3);
      if (wordsPrevious.length > 0 && wordsCurrent.length > 0) {
        const sharedWords = wordsCurrent.filter(word => wordsPrevious.includes(word));
        const similarity = sharedWords.length / Math.max(wordsPrevious.length, wordsCurrent.length);

        // If similarity > 70% and within time window, filter it out
        if (similarity > 0.7 && now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
          return false;
        }
      }
    }

    // Filter out very short or trivial thoughts
    const wordCount = normalizedLower.split(/\s+/).filter(w => w.length > 2).length;
    if (wordCount < 3 && normalizedLower.length < 30) {
      // Too short to be meaningful
      return false;
    }

    // Filter out common meaningless patterns
    const meaninglessPatterns = [/^i(?:'?ll?)?\s+(?:will\s+)?(?:now\s+)?(?:proceed|continue|go|move|start)/i, /^(?:let me|i will|i'll|i am|i'm)\s+(?:check|look|see|examine|review|analyze)/i, /^proceeding\s+(?:with|to)/i, /^continuing\s+(?:with|to)/i, /^moving\s+(?:on|forward|to)/i, /^starting\s+(?:with|to)/i, /^now\s+(?:i|let me|we|let's)/i, /^(?:ok|alright|well)\s*,?\s*(?:now|then|so|let)/i];
    for (const pattern of meaninglessPatterns) {
      if (pattern.test(normalized)) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: âº prefix with wrapped continuation lines
   * Example:
   *   âº The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = 'âº';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets âº, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   âº [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = 'âº';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.toolColors.default(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: âº [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.toolColors.default(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "âº [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   âŽ¿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('âŽ¿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('âŽ¿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('âŽ¿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: âº [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = 'âº';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // Get tool-specific color (bash=orange, read=cyan, write=green, etc.)
    const toolColor = (0, _theme.getToolColor)(toolName);
    const coloredToolName = toolColor(`[${toolName}]`);

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${coloredToolName}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${coloredToolName} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParamsColored(toolName, params, maxWidth, toolColor);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping (default green color)
   */
  formatToolParams(toolName, params, maxWidth) {
    return this.formatToolParamsColored(toolName, params, maxWidth, _theme.theme.toolColors.default);
  }

  /**
   * Format tool params with custom tool color
   */
  formatToolParamsColored(toolName, params, maxWidth, toolColor) {
    const bullet = 'âº';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${toolColor(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.toolColors.default(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: âŽ¿  Found X lines (ctrl+o to expand)
   * For edits, show a small inline diff preview
   */
  formatCompactToolResult(content) {
    // Sanitize content first - filter out garbage/reasoning output that leaked through
    const sanitized = this.sanitizeToolResultContent(content);
    if (!sanitized || this.isGarbageOutput(sanitized)) {
      return ''; // Don't render garbage tool results
    }

    // Special handling for edit results - show inline diff
    if (this.lastToolName?.toLowerCase() === 'edit') {
      return this.formatEditResultWithDiff(sanitized);
    }

    // Parse common result patterns for summary
    const lineMatch = sanitized.match(/(\d+)\s*lines?/i);
    const fileMatch = sanitized.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = sanitized.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(sanitized);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(sanitized);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(sanitized);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (sanitized.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = 'âœ“';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = sanitized.split('\n')[0] || sanitized;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Extract meaningful summary from content
      let summaryText = sanitized;

      // Handle "Summary:" prefix from web search/extract results
      const summaryMatch = sanitized.match(/^Summary:\s*(.+)/i);
      if (summaryMatch) {
        summaryText = summaryMatch[1];
      }

      // For multi-line content, use first meaningful line
      const firstLine = summaryText.split('\n')[0]?.trim() || summaryText;

      // Try to end at a sentence boundary for readability (up to 120 chars)
      const maxLen = 120;
      if (firstLine.length > maxLen) {
        // Look for sentence end within limit
        const sentenceEnd = firstLine.slice(0, maxLen).search(/[.!?;]\s|[.!?;]$/);
        if (sentenceEnd > 30) {
          summary = firstLine.slice(0, sentenceEnd + 1);
        } else {
          // No good sentence break, truncate at word boundary
          const truncated = firstLine.slice(0, maxLen);
          const lastSpace = truncated.lastIndexOf(' ');
          summary = lastSpace > 60 ? truncated.slice(0, lastSpace) + 'â€¦' : truncated + 'â€¦';
        }
      } else {
        summary = firstLine;
      }
    }

    // Store collapsed result for Ctrl+O expansion (use sanitized content)
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content: sanitized,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = sanitized.includes('\n') || summary.endsWith('â€¦') || !preserveFull && sanitized.length > summary.length;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('âŽ¿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('âœ“') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format edit result with enhanced inline diff preview
   * Shows: âŽ¿ âœ“ Updated (filename) - removed X, added Y chars
   *        â”œâ”€â”
   *        â”‚ - old content...
   *        â”‚ + new content...
   *        â””â”€
   */
  formatEditResultWithDiff(content) {
    const lines = [];
    const indent = '  ';

    // Extract file path from content with better regex
    const filePathMatch = content.match(/(?:file[_\s]*path|path):\s*"([^"]+)"/i) || content.match(/updated.*?([\/\w.\-]+\.\w+)/i) || content.match(/edited.*?([\/\w.\-]+\.\w+)/i);
    const fileName = filePathMatch ? filePathMatch[1].split('/').pop() : 'file';
    const fullPath = filePathMatch ? filePathMatch[1] : fileName;

    // Try to extract old/new content from edit result with better parsing
    const oldMatch = content.match(/old[_\s]*string[:\s]*(["'`])([^\x01]+?)\1/i) || content.match(/old[_\s]*string[:\s]*["']?([^"'\n]+)["']?/i);
    const newMatch = content.match(/new[_\s]*string[:\s]*(["'`])([^\x01]+?)\1/i) || content.match(/new[_\s]*string[:\s]*["']?([^"'\n]+)["']?/i);
    const oldContent = oldMatch?.[2] || oldMatch?.[1] || '';
    const newContent = newMatch?.[2] || newMatch?.[1] || '';

    // Calculate diff stats
    const oldLen = oldContent.length;
    const newLen = newContent.length;
    const diffStat = oldLen || newLen ? _theme.theme.ui.muted(` (${_theme.theme.error(`-${oldLen}`)} ${_theme.theme.success(`+${newLen}`)} chars)`) : '';

    // Main summary line with enhanced styling
    lines.push(`${indent}${_theme.theme.ui.muted('âŽ¿')}  ${_theme.theme.success('âœ“')} ${_theme.theme.success(`Updated`)} ${_theme.theme.file?.path ? _theme.theme.file.path(`${fullPath}`) : _theme.theme.warning(`${fullPath}`)}${diffStat}`);

    // Show enhanced diff visualization
    if (oldContent || newContent) {
      const maxDiffLen = Math.min(this.safeWidth() - 20, 80);

      // Start diff box
      lines.push(`${indent}${_theme.theme.ui.muted('â”œâ”€â”')}`);
      if (oldContent) {
        const oldPreview = oldContent.length > maxDiffLen ? oldContent.slice(0, maxDiffLen) + 'â€¦' : oldContent;
        // Clean up the preview (remove escaped quotes, etc.)
        const cleanOld = oldPreview.replace(/\\"/g, '"').replace(/\\n/g, 'â†²');
        lines.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.error('â”€ ' + cleanOld)}`);
      }
      if (newContent) {
        const newPreview = newContent.length > maxDiffLen ? newContent.slice(0, maxDiffLen) + 'â€¦' : newContent;
        const cleanNew = newPreview.replace(/\\"/g, '"').replace(/\\n/g, 'â†²');
        lines.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.success('+ ' + cleanNew)}`);
      }

      // End diff box
      lines.push(`${indent}${_theme.theme.ui.muted('â””â”€')}`);
    }

    // Store for expansion with enhanced metadata
    this.collapsedToolResults.push({
      toolName: 'edit',
      content,
      summary: `Updated ${fileName} (-${oldLen}, +${newLen})`,
      timestamp: Date.now(),
      metadata: {
        filePath: fullPath,
        oldLength: oldLen,
        newLength: newLen,
        diff: {
          old: oldContent,
          new: newContent
        }
      }
    });
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const expandHint = content.length > 100 || oldLen > 50 || newLen > 50 ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return lines.join('\n') + expandHint + '\n';
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   * Supports full markdown formatting: headers, lists, code blocks, inline styles.
   */
  wrapBulletText(content, options = {}) {
    const bullet = 'âº';
    let cleaned = content.replace(/^[âºâ€¢â—‹]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Normalize content: add spaces after headers, fix common formatting issues
    // Fix headers without space: ##HEADING -> ## HEADING (including emoji)
    cleaned = cleaned.replace(/^(#{1,6})([A-ZðŸš€âš”ï¸ðŸŽ¯ðŸ”ðŸ“¦âœ…âŒâš¡ðŸ’€ðŸ”¥ðŸ›¡ï¸ðŸ’£ðŸŽ–ï¸â­])/gm, '$1 $2');
    // Fix numbered headers: ###1 Elite -> ### 1. Elite
    cleaned = cleaned.replace(/^(#{1,6})(\d+)\s+/gm, '$1 $2. ');
    // Fix dash lists without space: -RSA2048 -> - RSA2048
    cleaned = cleaned.replace(/^-([A-Z])/gm, '- $1');
    // Fix numbered lists without space: 1.Item -> 1. Item
    cleaned = cleaned.replace(/^(\d+\.)([A-Z])/gm, '$1 $2');
    // Add line breaks before headers that are joined to previous text
    cleaned = cleaned.replace(/([.!?)])(\s*)(#{1,6}\s)/g, '$1\n\n$3');
    // Add line breaks between sections (text followed immediately by ##)
    cleaned = cleaned.replace(/([a-z])(\s*)(#{2,6}\s)/gi, '$1\n\n$3');
    // Add line breaks between emoji bullets and next section
    cleaned = cleaned.replace(/([\u2705\u274C\u2714\u2718\u26A0\uD83C-\uDBFF\uDC00-\uDFFF]+)\s*(#{1,6})/g, '$1\n\n$2');
    // Fix code blocks that run together: bash# -> bash\n#
    cleaned = cleaned.replace(/(bash|sh|python|javascript|typescript)#/gi, '$1\n```\n#');
    // Add newlines before code block markers
    cleaned = cleaned.replace(/([^\n])```(\w+)?/g, '$1\n```$2');
    // Fix tables that run together
    cleaned = cleaned.replace(/(\w+)\s+([-â”€]{3,})\s+(\w+)/g, '$1\n$2\n$3');

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' Â· ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    let inCodeBlock = false;
    let codeBlockLang = '';
    const codeBlockBuffer = [];
    for (const rawLine of lines) {
      const trimmedLine = rawLine.trim();

      // Handle code block fences
      if (trimmedLine.startsWith('```')) {
        if (!inCodeBlock) {
          // Start code block
          inCodeBlock = true;
          codeBlockLang = trimmedLine.slice(3).trim().toUpperCase() || 'CODE';
          continue;
        } else {
          // End code block - render it
          inCodeBlock = false;
          const codeIndent = firstNonEmpty ? bulletPrefix : indent;
          if (firstNonEmpty) {
            result.push(`${bulletPrefix}${_theme.theme.ui.muted(`â”€â”€â”€ ${codeBlockLang} â”€â”€â”€`)}`);
            firstNonEmpty = false;
          } else {
            result.push(`${indent}${_theme.theme.ui.muted(`â”€â”€â”€ ${codeBlockLang} â”€â”€â”€`)}`);
          }
          for (const codeLine of codeBlockBuffer) {
            result.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.ui.code(codeLine)}`);
          }
          codeBlockBuffer.length = 0;
          codeBlockLang = '';
          continue;
        }
      }
      if (inCodeBlock) {
        codeBlockBuffer.push(rawLine);
        continue;
      }

      // Handle empty lines
      if (!trimmedLine) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }

      // Handle markdown headers (# ## ### etc.) - also handle ##HEADING without space
      const headerMatch = trimmedLine.match(/^(#{1,6})\s*(.+)$/);
      if (headerMatch && headerMatch[2] && !headerMatch[2].startsWith('#')) {
        const level = headerMatch[1]?.length ?? 1;
        const headerText = headerMatch[2]?.trim() ?? '';
        // Skip if it's just hashes or if content is too short
        if (headerText.length > 0) {
          // Add blank line before headers for better visual separation
          if (result.length > 0 && result[result.length - 1] !== '') {
            result.push('');
          }
          const formattedHeader = this.formatMarkdownHeader(headerText, level, maxWidth, firstNonEmpty ? bulletPrefix : indent);
          result.push(formattedHeader);
          firstNonEmpty = false;
          continue;
        }
      }

      // Handle dividers (--- or ***)
      if (/^[-*_]{3,}$/.test(trimmedLine)) {
        const dividerWidth = Math.min(maxWidth - indent.length, 50);
        result.push(`${indent}${_theme.theme.ui.muted('â”€'.repeat(dividerWidth))}`);
        continue;
      }

      // Handle markdown tables (lines starting with |)
      if (trimmedLine.startsWith('|') || /^[-|:]+$/.test(trimmedLine)) {
        // Table line - render with fixed width font styling
        const tablePrefix = firstNonEmpty ? bulletPrefix : indent;
        result.push(`${tablePrefix}${_theme.theme.ui.muted(trimmedLine)}`);
        firstNonEmpty = false;
        continue;
      }

      // Handle list items (- or * or numbered) - also handle -Item without space
      const listMatch = trimmedLine.match(/^(\*|-|â€¢|\d+\.)\s*(.+)$/);
      if (listMatch && listMatch[2]) {
        const listContent = listMatch[2].trim();
        const formattedList = (0, _richText.formatInlineText)(listContent);
        const listBullet = _theme.theme.secondary('  â€¢ ');
        const listIndent = '    ';
        if (firstNonEmpty) {
          result.push(bulletPrefix.trimEnd());
          firstNonEmpty = false;
        }

        // Wrap list item content
        const words = formattedList.split(/\s+/);
        let current = '';
        let isFirstListLine = true;
        for (const word of words) {
          const candidate = current ? `${current} ${word}` : word;
          const prefixLen = this.visibleLength(isFirstListLine ? listBullet : listIndent);
          if (prefixLen + this.visibleLength(candidate) > maxWidth - 2 && current) {
            result.push(`${isFirstListLine ? listBullet : listIndent}${current}`);
            current = word;
            isFirstListLine = false;
          } else {
            current = candidate;
          }
        }
        if (current) {
          result.push(`${isFirstListLine ? listBullet : listIndent}${current}`);
        }
        continue;
      }

      // Regular paragraph - apply markdown formatting
      const formattedLine = (0, _richText.formatInlineText)(trimmedLine);
      const words = formattedLine.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a markdown header with Claude Code style visual hierarchy.
   */
  formatMarkdownHeader(text, level, maxWidth, prefix) {
    const formattedText = (0, _richText.formatInlineText)(text);
    switch (level) {
      case 1:
        {
          // H1: Bold cyan with decorative borders
          const headerWidth = Math.min(maxWidth - 4, this.visibleLength(formattedText) + 4);
          const topBorder = _theme.theme.primary('â•'.repeat(headerWidth));
          const headerLine = _theme.theme.primary.bold(`â—† ${formattedText}`);
          return `${prefix}${topBorder}\n  ${headerLine}\n  ${topBorder}`;
        }
      case 2:
        {
          // H2: Bold with underline accent
          const headerLine = _theme.theme.info.bold(`â–¸ ${formattedText}`);
          const underline = _theme.theme.info('â”€'.repeat(Math.min(maxWidth - 4, this.visibleLength(formattedText) + 2)));
          return `${prefix}${headerLine}\n  ${underline}`;
        }
      case 3:
        {
          // H3: Bold with bullet prefix
          return `${prefix}${_theme.theme.secondary.bold(`â—‡ ${formattedText}`)}`;
        }
      case 4:
        {
          // H4: Dimmer bold
          return `${prefix}${_theme.theme.ui.muted('â–¹')} ${_theme.theme.bold(formattedText)}`;
        }
      default:
        {
          // H5+: Simple bold
          return `${prefix}${_theme.theme.bold(formattedText)}`;
        }
    }
  }

  /**
   * Format thinking block with premium visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   * Enhanced with gradient labels, better typography, and visual hierarchy.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';

    // Detect thought type for better labeling and visual styling
    const lower = content.toLowerCase();
    let label = 'thinking';
    let labelColor = _theme.theme.neon.cyan;
    let labelIcon = 'ðŸ’­';
    let thoughtType = 'default';

    // Detect initial acknowledgement
    if (lower.includes('acknowledge') || lower.includes('understand') || lower.includes("user wants") || lower.includes("user is asking") || lower.includes("the request") || lower.includes("i'll help")) {
      label = 'understood';
      labelColor = _theme.theme.success ?? _theme.theme.neon.green;
      labelIcon = 'âœ…';
      thoughtType = 'acknowledgement';
    }
    // Detect planning thoughts
    else if (lower.includes('plan') || lower.includes('steps') || lower.includes('first') || lower.includes('then') || lower.includes('approach') || lower.includes('strategy')) {
      label = 'planning';
      labelColor = _theme.theme.info ?? _theme.theme.neon.blue;
      labelIcon = 'ðŸ—ºï¸';
      thoughtType = 'planning';
    }
    // Detect analysis/reasoning
    else if (lower.includes('analyzing') || lower.includes('examining') || lower.includes('looking at') || lower.includes('reviewing')) {
      label = 'analyzing';
      labelColor = _theme.theme.warning ?? _theme.theme.neon.orange;
      labelIcon = 'ðŸ”';
      thoughtType = 'analysis';
    }
    // Detect tool selection/execution thoughts
    else if (lower.includes('tool') || lower.includes('read') || lower.includes('edit') || lower.includes('search') || lower.includes('bash') || lower.includes('execute')) {
      label = 'executing';
      labelColor = _theme.theme.toolColors.default ?? _theme.theme.neon.purple;
      labelIcon = 'âš™ï¸';
      thoughtType = 'execution';
    }
    // Detect completion/result thoughts
    else if (lower.includes('complete') || lower.includes('done') || lower.includes('finished') || lower.includes('result')) {
      label = 'completed';
      labelColor = _theme.theme.success ?? _theme.theme.neon.green;
      labelIcon = 'âœ“';
      thoughtType = 'completion';
    }
    const normalized = content.replace(/\s+/g, ' ').trim();

    // Enhanced bullet design with icon and gradient styling
    const bullet = 'âº';
    const coloredLabel = labelColor(`${labelIcon} ${label}`);

    // Format with premium styling
    return this.wrapBulletText(normalized, {
      label: coloredLabel,
      labelColor: text => text,
      // Already colored
      thoughtType
    });
  }

  /**
   * Format assistant response with premium styling
   * Uses distinct visual style to clearly separate from thoughts
   */
  formatAssistantResponse(content) {
    if (!content.trim()) return '';

    // Clean content - remove any existing bullet prefixes
    const cleaned = content.replace(/^[âºâ€¢â—‹]\s*/, '').trim();
    if (!cleaned.trim()) return '';

    // Assistant styling with gradient and icon
    const bullet = 'â—†'; // Distinct from thought bullet (âº)
    const label = 'assistant';
    const labelColor = _theme.theme.gradient.neon;
    const labelIcon = 'âœ¨';
    const coloredLabel = labelColor(`${labelIcon} ${label}`);

    // Format with premium styling
    return this.wrapBulletText(cleaned, {
      label: coloredLabel,
      labelColor: text => text,
      // Already colored
      thoughtType: 'assistant'
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: â•â• history â•â•â•â•â•â•â•â•â•â•â•â•â•
    const separator = _theme.theme.ui.muted('â•'.repeat(leftPad) + labelText + 'â•'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Determine if this is structured output that shouldn't be word-wrapped
    const isStructured = this.isStructuredToolOutput(toolName, content);
    let rendered;
    if (isStructured) {
      // Preserve structured output (grep, bash, code output) - just indent, don't wrap
      rendered = this.formatStructuredToolOutput(toolName, content);
    } else {
      // Format prose/text with tool name label and word wrapping
      const label = `${toolName}`;
      rendered = this.wrapBulletText(content, {
        label,
        labelColor: _theme.theme.info
      });
    }
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Check if tool output is structured (code, grep, file listings) that shouldn't be word-wrapped.
   */
  isStructuredToolOutput(toolName, content) {
    const tool = toolName.toLowerCase();
    // Tools that produce structured output
    if (['bash', 'grep', 'read', 'glob', 'execute_bash', 'search', 'find'].includes(tool)) {
      return true;
    }
    // Content patterns that indicate structured output
    // - File paths with colons (grep output): src/file.ts:123:
    // - Line numbers: "   1â†’" or "  42:"
    // - Code-like patterns
    if (/^\s*[\w./]+:\d+[:\s]/.test(content)) return true; // grep-style output
    if (/^\s*\d+[â†’:â”‚|]\s/.test(content)) return true; // line-numbered output
    if (/^[â”‚â”œâ””â”€â”Œâ”â”˜â”¬â”´â”¼â•­â•®â•¯â•°]+/.test(content)) return true; // box drawing
    if (/^\s*[$>]\s+\w+/.test(content)) return true; // command prompt output
    return false;
  }

  /**
   * Format structured tool output preserving line structure.
   */
  formatStructuredToolOutput(toolName, content) {
    const lines = content.split('\n');
    const header = `âº ${_theme.theme.info(toolName)}${_theme.theme.ui.muted(' Â· expanded')}\n`;
    const indent = '  ';
    const maxWidth = this.safeWidth() - 4;
    const formattedLines = lines.map(line => {
      // Truncate overly long lines instead of wrapping (preserves structure)
      if (line.length > maxWidth) {
        return indent + line.slice(0, maxWidth - 1) + 'â€¦';
      }
      return indent + line;
    });
    return header + formattedLines.join('\n') + '\n';
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      this.streamingContentBuffer = ''; // Reset streaming buffer
      this.streamingLinesWritten = 0;
      this.streamingInputQueue = []; // Clear any stale queued input
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle') {
      // IMPORTANT: Clear the overlay BEFORE writing newline to prevent duplicate boxes
      // The old overlay would otherwise scroll into scrollback history
      if (!this.plainMode && this.lastOverlay) {
        this.clearPromptArea();
      }
      if (!this.lastOutputEndedWithNewline) {
        // Finish streaming on a fresh line so the next prompt/event doesn't collide
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }

      // Clear the buffer after processing
      this.streamingContentBuffer = '';
      this.streamingLinesWritten = 0;
      // Clear any remaining queued input (user didn't press Enter to queue it)
      this.streamingInputQueue = [];
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 120); // ~8 FPS - reduced from 80ms to minimize flickering while keeping animation smooth
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminatingâ€¦" shows as "âœ³ Ruminatingâ€¦ (esc to interrupt Â· 34s Â· â†‘1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.alphaZeroHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    // Force next render to show updated toggle state
    this.forceNextRender = true;
    this.renderPromptImmediate();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }

  /**
   * Update secure TAO tools status for display in the UI.
   * Tracks Execute, Probe, State tools with enhanced output formatting.
   */
  updateSecureToolsStatus(status) {
    const next = {
      ...this.secureToolsStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.secureToolsStatus);
    this.secureToolsStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Record a secure tool invocation for tracking.
   */
  recordSecureToolInvocation(tool, details) {
    const invocations = (this.secureToolsStatus.totalInvocations || 0) + 1;
    const updates = {
      lastToolUsed: tool,
      totalInvocations: invocations
    };
    if (tool === 'Execute' && details) {
      updates.execute = {
        active: true,
        lastCommand: details.command,
        lastExitCode: details.exitCode,
        execCount: (this.secureToolsStatus.execute?.execCount || 0) + 1
      };
    } else if (tool === 'Probe' && details) {
      updates.probe = {
        active: true,
        lastTarget: details.target,
        servicesFound: details.services,
        probeCount: (this.secureToolsStatus.probe?.probeCount || 0) + 1
      };
    } else if (tool === 'State' && details) {
      updates.state = {
        active: true,
        lastAction: details.action,
        keysStored: details.keysCount,
        persistent: true
      };
    }
    this.updateSecureToolsStatus(updates);
  }

  /**
   * Get current secure tools status for external access.
   */
  getSecureToolsStatus() {
    return this.secureToolsStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }

  /**
   * Show an interactive menu with arrow key navigation (Claude Code style).
   * Menu is displayed in the inline panel area and intercepts arrow/enter keys.
   * @param items - Menu items to display
   * @param options - Menu options (title, initialIndex)
   * @param callback - Called when user selects an item (or null if cancelled)
   */
  setMenu(items, options = {}, callback) {
    if (!this.supportsInlinePanel()) {
      // Non-interactive mode - just call callback with first item or null
      callback(items[0] ?? null);
      return;
    }
    this.menuItems = items;
    this.menuIndex = options.initialIndex ?? items.findIndex(i => i.isActive) ?? 0;
    if (this.menuIndex < 0) this.menuIndex = 0;
    this.menuTitle = options.title ?? null;
    this.menuCallback = callback;
    this.renderMenuPanel();
  }

  /**
   * Close the active menu without selecting anything.
   */
  closeMenu() {
    if (!this.isMenuActive()) return;
    const callback = this.menuCallback;
    this.menuItems = [];
    this.menuIndex = 0;
    this.menuTitle = null;
    this.menuCallback = null;
    this.clearInlinePanel();
    callback?.(null);
  }

  /**
   * Check if an interactive menu is currently active.
   */
  isMenuActive() {
    return this.menuItems.length > 0 && this.menuCallback !== null;
  }

  /**
   * Render the menu to the inline panel.
   */
  renderMenuPanel() {
    if (!this.isMenuActive()) return;
    const lines = [];

    // Title
    if (this.menuTitle) {
      lines.push(_chalk.default.bold.hex('#8B5CF6')(this.menuTitle));
      lines.push('');
    }

    // Menu items with selection indicator
    for (let i = 0; i < this.menuItems.length; i++) {
      const item = this.menuItems[i];
      const isSelected = i === this.menuIndex;
      const isDisabled = item.disabled;
      const isActive = item.isActive;
      let line = '';

      // Selection indicator
      if (isSelected) {
        line += _chalk.default.hex('#22D3EE')('â¯ ');
      } else {
        line += '  ';
      }

      // Label with styling
      if (isDisabled) {
        line += _chalk.default.dim(item.label);
      } else if (isSelected) {
        line += _chalk.default.bold.hex('#22D3EE')(item.label);
      } else if (isActive) {
        line += _chalk.default.hex('#34D399')(item.label);
      } else {
        line += _chalk.default.white(item.label);
      }

      // Active indicator
      if (isActive) {
        line += _chalk.default.dim(' (current)');
      }

      // Description
      if (item.description) {
        const desc = isDisabled ? _chalk.default.dim(item.description) : _chalk.default.dim(` - ${item.description}`);
        line += desc;
      }
      lines.push(line);
    }

    // Hint
    lines.push('');
    lines.push(_chalk.default.dim('â†‘â†“ navigate â€¢ enter select â€¢ esc cancel'));
    this.setInlinePanel(lines);
  }

  /**
   * Navigate menu selection.
   * @returns true if menu consumed the navigation
   */
  navigateMenu(direction) {
    if (!this.isMenuActive()) return false;

    // Find next non-disabled item
    let newIndex = this.menuIndex;
    let attempts = 0;
    const maxAttempts = this.menuItems.length;
    do {
      newIndex = (newIndex + direction + this.menuItems.length) % this.menuItems.length;
      attempts++;
    } while (this.menuItems[newIndex]?.disabled && attempts < maxAttempts);
    if (newIndex !== this.menuIndex) {
      this.menuIndex = newIndex;
      this.renderMenuPanel();
    }
    return true;
  }

  /**
   * Select the currently highlighted menu item.
   * @returns true if menu consumed the selection
   */
  selectMenuItem() {
    if (!this.isMenuActive()) return false;
    const item = this.menuItems[this.menuIndex];
    if (!item || item.disabled) return true; // Consume but don't select

    const callback = this.menuCallback;
    this.menuItems = [];
    this.menuIndex = 0;
    this.menuTitle = null;
    this.menuCallback = null;
    this.clearInlinePanel();
    callback?.(item);
    return true;
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`â€¦ ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed or still initializing (before banner shown)
    if (this.disposed || this.initializing) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed or still initializing (before banner shown)
    if (this.disposed || this.initializing) return;

    // Performance optimization: Skip render if nothing changed (during idle mode only)
    // During streaming mode, we need to update animations and status
    if (!this.forceNextRender && this.mode === 'idle' && this.buffer === this.lastRenderedBuffer && this.cursor === this.lastRenderedCursor && this.mode === this.lastRenderedMode && this.lastOverlay !== null) {
      // Content unchanged, skip expensive re-render
      return;
    }
    this.forceNextRender = false;

    // Suppress render during paste burst to prevent visual leak
    // Only allow render if we have a collapsed paste to show
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const inEmitPaste = this.emitPasteBuffer.length > 0 || this.emitPasteTimer !== null;
    if ((burstActive || this.inPlainPaste || this.inBracketedPaste || inEmitPaste) && !this.collapsedPaste) {
      return;
    }
    this.lastRenderTime = Date.now();
    this.lastRenderedBuffer = this.buffer;
    this.lastRenderedCursor = this.cursor;
    this.lastRenderedMode = this.mode;
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Batch all ANSI operations into a single write to prevent flickering
    // This eliminates the visual jitter caused by multiple sequential terminal writes
    const buffer = [];

    // Hide cursor during render to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Clear previous prompt and handle height changes
    // IMPORTANT: Only clear if we have valid overlay state to avoid cursor position bugs
    // that cause separator lines to accumulate in scrollback
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0 && this.lastOverlay !== null) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }

      // Clear exactly the old overlay lines using atomic escape sequence batch
      const clearHeight = this.lastOverlayHeight;
      for (let i = 0; i < clearHeight; i++) {
        buffer.push('\r');
        buffer.push(ESC.CLEAR_LINE);
        if (i < clearHeight - 1) {
          buffer.push('\x1b[B');
        }
      }

      // Clear anything below the old overlay (handles edge cases)
      buffer.push('\x1b[J');

      // After clearing, cursor is at last cleared line
      // Move back up to the top where new overlay should start
      const moveBackUp = clearHeight - 1;
      if (moveBackUp > 0) {
        buffer.push(`\x1b[${moveBackUp}A`);
      }
    } else if (this.hasEverRenderedOverlay) {
      // Overlay was cleared but we're re-rendering - ensure clean slate
      // Use erase-to-end-of-screen from current position
      buffer.push('\r');
      buffer.push('\x1b[J');
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      buffer.push(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        buffer.push('\n');
      }
    }

    // If old overlay was taller, clear any remaining stale lines below
    // and use CSI J (erase from cursor to end of screen) to clean up
    if (this.lastOverlayHeight > height) {
      buffer.push('\n'); // Move to line below last content
      buffer.push('\x1b[J'); // Clear from cursor to end of screen
      buffer.push('\x1b[A'); // Move back up to last content line
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      buffer.push(`\x1b[${linesToMoveUp}A`);
    }
    buffer.push(`\x1b[${promptCol}G`);

    // Show cursor again after positioning
    buffer.push('\x1b[?25h');

    // Single atomic write to prevent flickering
    this.write(buffer.join(''));
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('â”€'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[âºâ€¢]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: â— Workingâ€¦ (esc to interrupt Â· 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? 'â ‹';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? 'âœ¶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('â€¦') && !displayActivity.trimEnd().endsWith('...');
      // Format: â ‹ Workingâ€¦ (esc to interrupt Â· 1m 19s Â· â†‘1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`â†‘${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? 'â€¦' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' Â· '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    // Filter out empty lines to prevent duplicate divider appearance from leading/trailing newlines
    const inputLines = inputLine.split('\n').filter((line, idx, arr) => {
      // Keep non-empty lines, but preserve single empty line if it's intentional (e.g., between content)
      // Only filter leading/trailing empty lines
      if (line.trim() === '') {
        // Filter if it's the first line (leading empty) or last line (trailing empty)
        if (idx === 0 || idx === arr.length - 1) return false;
      }
      return true;
    });
    // Ensure at least one line for the prompt
    if (inputLines.length === 0) {
      inputLines.push(_theme.theme.primary('> '));
    }
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('â–¸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} â€” ${descText}`, maxWidth));
      }
    }

    // Compact status line: model Â· context% Â· profile Â· dir
    const compactStatus = this.buildCompactStatusLine();
    if (compactStatus) {
      lines.push(this.truncateLine(`  ${compactStatus}`, maxWidth));
    }

    // Mode toggles (compact single line when possible)
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
    }
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build a single compact status line with all essential info
   * Format: deepseek-reasoner Â· â–‘â–‘â–‘â–‘â–‘â–‘ 5% Â· agi-code Â· ~/GitHub
   */
  buildCompactStatusLine() {
    const parts = [];

    // Model (compact: just model name, not provider/model)
    const model = this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter (compact mini bar)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 5;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('â–ˆ'.repeat(filled)) + _theme.theme.ui.muted('â–‘'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)}`);
    }

    // Profile (if set)
    if (this.statusMeta.profile) {
      parts.push(_theme.theme.secondary(this.statusMeta.profile));
    }

    // Directory (abbreviated)
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      parts.push(_theme.theme.ui.muted(this.abbreviatePath(workspace)));
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted(' Â· ')) : null;
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const segments = [];

    // Skip status label when streaming - the activity line already shows the animated status
    // This prevents duplicate "Thinking..." displays
    if (this.mode !== 'streaming') {
      const statusLabel = this.composeStatusLabel();
      if (statusLabel) {
        segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
      }
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return segments.length > 0 ? this.wrapSegments(segments, maxWidth) : [];
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }

    // Add secure TAO tools status
    const secureToolsSegments = this.buildSecureToolsSegments();
    if (secureToolsSegments.length > 0) {
      segments.push(...secureToolsSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('ðŸ†') : leader === 'refiner' ? _theme.theme.warning('ðŸ†') : 'âš–ï¸';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` ðŸ”¥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('â–ˆ'.repeat(pBars)) + _theme.theme.ui.muted('â–‘'.repeat(tBars)) + _theme.theme.warning('â–ˆ'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('âš¡P')} ${_theme.theme.ui.muted('âˆ¥')} ${_theme.theme.warning('âš¡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? 'â–¶' : 'â–·';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('âœ“P') : _theme.theme.warning('âœ“R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('â‰ˆ'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }

    // Human accuracy indicator (relative ranking quality)
    if (rl.accuracy && (typeof rl.accuracy.primary === 'number' || typeof rl.accuracy.refiner === 'number')) {
      const pAcc = rl.accuracy.primary !== undefined ? Math.round(rl.accuracy.primary * 100) : null;
      const rAcc = rl.accuracy.refiner !== undefined ? Math.round(rl.accuracy.refiner * 100) : null;
      const pDisplay = pAcc !== null ? _theme.theme.info(`P${pAcc}%`) : null;
      const rDisplay = rAcc !== null ? _theme.theme.warning(`R${rAcc}%`) : null;
      const parts = [pDisplay, rDisplay].filter(Boolean).join(_theme.theme.ui.muted('|'));
      if (parts) {
        segments.push(parts);
      }
    }
    return segments;
  }

  /**
   * Build secure TAO tools status segments for display.
   * Shows: toolkit status, tool invocation counts, and last tool used.
   */
  buildSecureToolsSegments() {
    const segments = [];
    const st = this.secureToolsStatus;

    // Only show status when tools have been used
    if (!st.totalInvocations && !st.lastToolUsed) {
      // Show toolkit ready indicator even when no invocations
      if (st.toolkitReady) {
        segments.push(_theme.theme.success('ðŸ”’') + _theme.theme.ui.muted(' TAO'));
      }
      return segments;
    }

    // Security indicator with sanitization status
    const secIcon = st.sanitizationActive ? _theme.theme.success('ðŸ”’') : _theme.theme.warning('âš ');
    segments.push(secIcon);

    // Tool status indicators (compact format)
    const toolIndicators = [];
    if (st.execute?.active) {
      const execIcon = st.execute.lastExitCode === 0 ? _theme.theme.success('âœ“') : _theme.theme.error('âœ—');
      const execCount = st.execute.execCount || 0;
      toolIndicators.push(`${_theme.theme.info('Ex')}${execIcon}${execCount > 1 ? _theme.theme.ui.muted(`Ã—${execCount}`) : ''}`);
    }
    if (st.probe?.active) {
      const svcCount = st.probe.servicesFound || 0;
      toolIndicators.push(`${_chalk.default.cyan('Pr')}${_theme.theme.success('âœ“')}${svcCount > 0 ? _theme.theme.ui.muted(`[${svcCount}]`) : ''}`);
    }
    if (st.state?.active) {
      const stateIcon = st.state.persistent ? _theme.theme.success('ðŸ’¾') : _theme.theme.info('ðŸ“');
      const keysCount = st.state.keysStored || 0;
      toolIndicators.push(`${stateIcon}${keysCount > 0 ? _theme.theme.ui.muted(`${keysCount}k`) : ''}`);
    }
    if (toolIndicators.length > 0) {
      segments.push(toolIndicators.join(_theme.theme.ui.muted('Â·')));
    }

    // Total invocations counter
    if (st.totalInvocations && st.totalInvocations > 0) {
      segments.push(_theme.theme.ui.muted(`Î£${st.totalInvocations}`));
    }

    // Last tool used indicator
    if (st.lastToolUsed) {
      const toolColors = {
        Execute: _theme.theme.info,
        Probe: s => _chalk.default.cyan(s),
        State: _theme.theme.success,
        Transform: _theme.theme.warning,
        TaoOps: s => _chalk.default.magenta(s)
      };
      const color = toolColors[st.lastToolUsed] || _theme.theme.ui.muted;
      segments.push(color(`â†’${st.lastToolUsed.slice(0, 2)}`));
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('â€º')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };

    // AlphaZero mode: toggle between Normal and AlphaZero dual tournament RL
    const alphaZeroActive = this.toggleState.alphaZeroEnabled ?? false;
    addToggle('Mode', true, this.toggleState.alphaZeroHotkey, alphaZeroActive ? 'AlphaZero' : 'Normal');
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    addToggle('Auto', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'on' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('auto', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.alphaZeroHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      // Clean paste indicator - just show the summary, no action hints
      const linesText = this.collapsedPaste.lines === 1 ? '1 line' : `${this.collapsedPaste.lines} lines`;
      const charsText = typeof this.collapsedPaste.chars === 'number' ? `${this.collapsedPaste.chars} chars` : `${this.collapsedPaste.chars}`;
      const summary = _theme.theme.success(`[ðŸ“‹ ${linesText}, ${charsText}]`);
      return this.truncateLine(`${_theme.theme.primary('> ')}${summary}`, this.safeWidth());
    }

    // While detecting paste (or in burst detection phase), suppress buffer display
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    if (this.inPlainPaste || this.inBracketedPaste || burstActive) {
      const chars = this.plainPasteBuffer.length || this.pasteBuffer.length || this.pendingInsertBuffer.length || 0;
      if (chars > 0) {
        const indicator = _theme.theme.ui.muted(`[ðŸ“‹ pasting... ${chars} chars]`);
        return this.truncateLine(`${_theme.theme.primary('> ')}${indicator}`, this.safeWidth());
      }
      // Even if no chars yet, show empty prompt during burst to prevent flicker
      if (burstActive) {
        return this.truncateLine(`${_theme.theme.primary('> ')}`, this.safeWidth());
      }
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? 'â€¢'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately.
   * Useful for programmatic submissions when a paste chip is active.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += 'â€¦';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses âœ» character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;

    // Prevent duplicate prompt display within 1.5 seconds
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Use batched atomic write to prevent visual glitches from non-atomic escape sequences
    const buffer = [];

    // Hide cursor during clearing to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      if (i < height - 1) {
        buffer.push('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      buffer.push(`\x1b[${height - 1}A`);
    }
    buffer.push('\r');

    // Show cursor again
    buffer.push('\x1b[?25h');

    // Single atomic write
    this.write(buffer.join(''));
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl91aUNvbnN0YW50cyIsIl9yaWNoVGV4dCIsIl9pbnB1dFByb3RlY3Rpb24iLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiaGFzIiwiZ2V0Iiwic2V0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJjcmVhdGVCYW5uZXIiLCJ0aXRsZSIsInN1YnRpdGxlIiwibGluZXMiLCJwdXNoIiwiY2hhbGsiLCJjeWFuIiwicmVwZWF0IiwiYm9sZCIsInBhZEVuZCIsIndoaXRlIiwiam9pbiIsImZvcm1hdFByb2dyZXNzIiwicGhhc2UiLCJzdGVwIiwidG90YWxTdGVwcyIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJwcm9ncmVzc0JhciIsImZsb29yIiwiZ3JlZW4iLCJjcmVhdGVTZWN1cml0eUJhbm5lciIsIndpZHRoIiwidG9VcHBlckNhc2UiLCJncmF5IiwiY3JlYXRlU2VjdXJpdHlTcGlubmVyIiwibWVzc2FnZSIsImZvcm1hdFNlY3VyaXR5RmluZGluZyIsImZpbmRpbmciLCJzZXZlcml0eUNvbG9ycyIsImNyaXRpY2FsIiwicmVkQnJpZ2h0IiwiaGlnaCIsInJlZCIsIm1lZGl1bSIsInllbGxvdyIsImxvdyIsImJsdWUiLCJpbmZvIiwic2V2ZXJpdHlJY29ucyIsImNvbG9yIiwic2V2ZXJpdHkiLCJpY29uIiwibmFtZSIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImV2aWRlbmNlIiwicmVtZWRpYXRpb24iLCJmb3JtYXRTZWN1cml0eVN1bW1hcnkiLCJyZXN1bHRzIiwiY2FtcGFpZ24iLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZHVyYXRpb24iLCJmaW5kaW5ncyIsIkFycmF5IiwiaXNBcnJheSIsImNvdW50cyIsImZvckVhY2giLCJlbnRyaWVzIiwiY291bnQiLCJsZW5ndGgiLCJmb3JtYXRTZWN1cml0eVN0YXR1cyIsInN0YXR1cyIsImRldGFpbHMiLCJzdGF0dXNJY29ucyIsImhlYWx0aHkiLCJkZWdyYWRlZCIsInVuYXZhaWxhYmxlIiwiZm9ybWF0QXVkaXRQcm9ncmVzcyIsInByb2dyZXNzIiwidG90YWwiLCJmaWxsZWQiLCJlbXB0eSIsImZvcm1hdFNlY3VyZVRvb2xzU3VtbWFyeSIsIm9wdGlvbnMiLCJzaG93VGl0bGUiLCJkZWZhdWx0VG9vbHMiLCJ0b29scyIsInRvb2xQYXJ0cyIsIm1hcCIsInRvb2wiLCJzdGF0dXNJY29uIiwidGV4dCIsImhleCIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJvdXRwdXQiLCJpbnB1dCIsInJsIiwicGxhaW5Nb2RlIiwiaW50ZXJhY3RpdmUiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsInN0cmVhbWluZ0lucHV0UXVldWUiLCJzdHJlYW1pbmdDb250ZW50QnVmZmVyIiwic3RyZWFtaW5nTGluZXNXcml0dGVuIiwibGFzdFRvb2xSZXN1bHQiLCJjb2xsYXBzZWRUb29sUmVzdWx0cyIsIm1heENvbGxhcHNlZFJlc3VsdHMiLCJsYXN0VG9vbE5hbWUiLCJzdHJlYW1pbmdTdGFydFRpbWUiLCJzdGF0dXNNZXNzYWdlIiwic3RhdHVzT3ZlcnJpZGUiLCJzdGF0dXNTdHJlYW1pbmciLCJzdHJlYW1pbmdTcGlubmVyIiwidGhpbmtpbmdJbmRpY2F0b3IiLCJjb250ZXh0TWV0ZXIiLCJzcGlubmVyRnJhbWUiLCJzcGlubmVySW50ZXJ2YWwiLCJtYXhJbmxpbmVQYW5lbExpbmVzIiwiY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UiLCJjb21wYWN0aW5nU3RhdHVzRnJhbWUiLCJjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWwiLCJjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyIsImFjdGl2aXR5TWVzc2FnZSIsImFjdGl2aXR5UGhyYXNlSW5kZXgiLCJhY3Rpdml0eVN0YXJGcmFtZSIsImFjdGl2aXR5U3RhckZyYW1lcyIsInN0cmVhbWluZ1Rva2VucyIsImVsYXBzZWRDb2xvckZyYW1lIiwiZWxhcHNlZENvbG9yRnJhbWVzIiwiZnVuQWN0aXZpdHlQaHJhc2VzIiwibWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzIiwibWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzIiwidGhvdWdodERlZHVwV2luZG93TXMiLCJsYXN0Q3VyYXRlZFRob3VnaHQiLCJzdGF0dXNNZXRhIiwidG9nZ2xlU3RhdGUiLCJhdXRvQ29udGludWVFbmFibGVkIiwiY3JpdGljYWxBcHByb3ZhbE1vZGUiLCJhbHBoYVplcm9FbmFibGVkIiwiZGVidWdFbmFibGVkIiwicmxTdGF0dXMiLCJzZWN1cmVUb29sc1N0YXR1cyIsInRvb2xraXRSZWFkeSIsInNhbml0aXphdGlvbkFjdGl2ZSIsInRvdGFsSW52b2NhdGlvbnMiLCJjbGFtcEN1cnNvciIsIm1heCIsIm1pbiIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJwYXN0ZUJ1ZmZlck92ZXJmbG93IiwiY3VycmVudCIsInBhc3RlQnVmZmVyIiwicGxhaW5QYXN0ZUJ1ZmZlciIsInJlbWFpbmluZyIsIm1heFBhc3RlQnVmZmVyU2l6ZSIsInRvQWRkIiwic2xpY2UiLCJzYW5pdGl6ZVBhc3RlQ29udGVudCIsInNhbml0aXplZCIsInJlcGxhY2UiLCJpc1RvZ2dsZUNoYXJhY3RlciIsImNoIiwiY29kZSIsImNoYXJDb2RlQXQiLCJjaGFycyIsInJlc3VsdCIsImZvcm1hdEhvdGtleSIsImNvbWJvIiwidHJpbSIsImxhc3RQcm9tcHRFdmVudCIsInByb21wdEhlaWdodCIsImxhc3RPdmVybGF5SGVpZ2h0IiwiaW5saW5lUGFuZWwiLCJoYXNDb252ZXJzYXRpb25Db250ZW50IiwiaXNQcm9tcHRBY3RpdmUiLCJpbnB1dFJlbmRlck9mZnNldCIsInBsYWluUGFzdGVJZGxlTXMiLCJwbGFpblBhc3RlV2luZG93TXMiLCJwbGFpblBhc3RlVHJpZ2dlckNoYXJzIiwicGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzIiwiY3Vyc29yVmlzaWJsZUNvbHVtbiIsImluQnJhY2tldGVkUGFzdGUiLCJpblBsYWluUGFzdGUiLCJwbGFpblBhc3RlVGltZXIiLCJwYXN0ZUJ1cnN0V2luZG93U3RhcnQiLCJwYXN0ZUJ1cnN0Q2hhckNvdW50IiwicGxhaW5SZWNlbnRDaHVua3MiLCJwZW5kaW5nSW5zZXJ0QnVmZmVyIiwicGVuZGluZ0luc2VydFRpbWVyIiwicGVuZGluZ0luc2VydERlbGF5TXMiLCJlbWl0UGFzdGVCdWZmZXIiLCJlbWl0UGFzdGVUaW1lciIsImVtaXRQYXN0ZUNvbW1pdE1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwiYWxsb3dQcm9tcHRSZW5kZXIiLCJwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQiLCJzZWNyZXRNb2RlIiwicGVuZGluZ1JlbmRlciIsImxhc3RSZW5kZXJUaW1lIiwicmVuZGVyVGhyb3R0bGVNcyIsInJlbmRlclRocm90dGxlVGltZXIiLCJsYXN0UmVuZGVyZWRCdWZmZXIiLCJmb3JjZU5leHRSZW5kZXIiLCJsYXN0UmVuZGVyZWRDdXJzb3IiLCJsYXN0UmVuZGVyZWRNb2RlIiwiZGlzcG9zZWQiLCJpbml0aWFsaXppbmciLCJib3VuZFJlc2l6ZUhhbmRsZXIiLCJib3VuZEtleXByZXNzSGFuZGxlciIsImJvdW5kRGF0YUhhbmRsZXIiLCJib3VuZEN0cmxIYW5kbGVyIiwib3JpZ2luYWxFbWl0IiwiaW5wdXRQcm90ZWN0aW9uIiwiaW5wdXRDYXB0dXJlIiwibWVudUl0ZW1zIiwibWVudUluZGV4IiwibWVudVRpdGxlIiwibWVudUNhbGxiYWNrIiwiY29uc3RydWN0b3IiLCJwcm9jZXNzIiwic3Rkb3V0Iiwic3RkaW4iLCJfb3B0aW9ucyIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwib3V0cHV0SXNUVFkiLCJCb29sZWFuIiwiaXNUVFkiLCJpbnB1dElzVFRZIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJDb250ZXh0TWV0ZXIiLCJjcmVhdGVJbnRlcmZhY2UiLCJ0ZXJtaW5hbCIsInByb21wdCIsInRhYlNpemUiLCJzZXRQcm9tcHQiLCJ1cGRhdGVUZXJtaW5hbFNpemUiLCJpbml0aWFsaXplSW5wdXRQcm90ZWN0aW9uIiwidmVyYm9zZSIsImVudiIsIm9uQXR0YWNrRGV0ZWN0ZWQiLCJyZW5kZXJQcm9tcHQiLCJzZXR1cElucHV0SGFuZGxlcnMiLCJpbml0aWFsaXplIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiZGlzcG9zZSIsImRpc3Bvc2VBbmltYXRpb25zIiwicmVtb3ZlTGlzdGVuZXIiLCJlbWl0IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2xvc2UiLCJzZXRSYXdNb2RlIiwic3VzcGVuZFByb21wdFJlbmRlcmluZyIsInJlc3VtZVByb21wdFJlbmRlcmluZyIsInJlbmRlciIsImludGVyY2VwdGVkVG9nZ2xlIiwiaW50ZXJjZXB0ZWRDdHJsQyIsImludGVyY2VwdGVkQ3RybEQiLCJwZW5kaW5nVG9nZ2xlU2tpcHMiLCJzZWxmIiwiYmluZCIsImV2ZW50IiwiYXJncyIsImRhdGEiLCJzdHIiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiU3RyaW5nIiwic2V0SW1tZWRpYXRlIiwiaGFuZGxlQ3RybEMiLCJoYW5kbGVDdHJsRCIsImRpcmVjdFRvZ2dsZSIsImxldHRlciIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJoYW5kbGVUb2dnbGUiLCJ0b2dnbGVzIiwiZXh0cmFjdFRvZ2dsZUxldHRlcnMiLCJwYXN0ZVN0YXJ0TWFya2VyIiwicGFzdGVFbmRNYXJrZXIiLCJoYXNCcmFja2V0ZWRTdGFydCIsImhhc0JyYWNrZXRlZEVuZCIsImlzUHJpbnRhYmxlIiwiYyIsImlzTmV3bGluZSIsImluUGFzdGVCdXJzdCIsInNob3VsZEJ1ZmZlciIsInN0YXJ0c1dpdGgiLCJjbGVhbmVkIiwic3RyaXBUb2dnbGVTeW1ib2xzIiwic2V0VGltZW91dCIsImNvbW1pdEVtaXRQYXN0ZUJ1ZmZlciIsImVtaXRLZXlwcmVzc0V2ZW50cyIsImtleSIsImhhbmRsZUtleXByZXNzIiwiZGV0ZWN0VG9nZ2xlRnJvbVJhd0RhdGEiLCJkZXRlY3RlZCIsInRlc3QiLCJmb3JjZVJlbmRlciIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNsZWFyQnVmZmVyIiwiaGFkQnVmZmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsImVtaXRJbnB1dENoYW5nZSIsImNvbnRlbnQiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVJbnB1dCIsImJsb2NrZWQiLCJzcGxpdCIsImlzTXVsdGlMaW5lIiwiaXNMb25nQ29udGVudCIsIm5ld0xpbmVzIiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyIiwiaW5zZXJ0U2luZ2xlTGluZVRleHQiLCJoYW5kbGVFbWl0TGV2ZWxQYXN0ZSIsInBheWxvYWQiLCJrZXlJbmZvIiwiY3RybCIsIm1ldGEiLCJzaGlmdCIsInNlcXVlbmNlIiwiSlNPTiIsInN0cmluZ2lmeSIsIm5vcm1hbGl6ZWRLZXkiLCJwYXJzZUVzY2FwZVNlcXVlbmNlIiwia2V5Rm9yUGFzdGUiLCJ0b2dnbGVMZXR0ZXIiLCJtZXRhTGV0dGVyIiwiaGFuZGxlQnJhY2tldGVkUGFzdGUiLCJoYW5kbGVQbGFpblBhc3RlIiwiaXNDdHJsU2hpZnQiLCJsb3dlckxldHRlciIsInVwcGVyTGV0dGVyIiwic2VxIiwiaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlIiwiY2xlYXJDb2xsYXBzZWRSZXN1bHRzIiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsInBvcyIsImFwcGx5U3VnZ2VzdGlvbiIsInNhZmVJbmRleCIsImNvbW1hbmQiLCJxdWV1ZWRJbnB1dCIsInN1Ym1pdFRleHQiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsImlzTWVudUFjdGl2ZSIsIm5hdmlnYXRlTWVudSIsInNlbGVjdE1lbnVJdGVtIiwiY2xvc2VNZW51IiwibmF2aWdhdGVTdWdnZXN0aW9ucyIsInF1ZXVlUGVuZGluZ0luc2VydCIsIm1heFdpZHRoIiwic2FmZVdpZHRoIiwibm93IiwiRGF0ZSIsImJ1cnN0QWN0aXZlIiwiaW5zZXJ0VGV4dCIsImNvbW1pdFBlbmRpbmdJbnNlcnQiLCJjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlIiwiY29uc3VtZWQiLCJwZW5kaW5nIiwic3RhcnRJZHgiLCJpbmRleE9mIiwiZW5kSWR4IiwiY29tbWl0UGFzdGVCdWZmZXIiLCJjb250ZW50QmVmb3JlIiwid2FzVHJ1bmNhdGVkIiwicHJ1bmVSZWNlbnRQbGFpbkNodW5rcyIsImNodW5rIiwidHJhY2tQbGFpblBhc3RlQnVyc3QiLCJyZWNvcmRSZWNlbnRQbGFpbkNodW5rIiwiY2h1bmtNdWx0aXBsZSIsImhhc05ld2xpbmUiLCJidXJzdFRyaWdnZXIiLCJoYXNSZWNlbnROb25OZXdsaW5lIiwic29tZSIsImVudHJ5IiwiZWFybHlOZXdsaW5lVHJpZ2dlciIsIm5ld2xpbmVUcmlnZ2VyIiwibG9va3NMaWtlUGFzdGUiLCJjaHVua0FscmVhZHlDYXB0dXJlZCIsInJlY2xhaW1lZCIsInJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcyIsImNvbWJpbmVkIiwicmVtb3ZlQ291bnQiLCJzdWZmaXgiLCJlbmRzV2l0aCIsInNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCIsImF0Iiwid2luZG93U3RhcnQiLCJmaWx0ZXIiLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJmaWx0ZXJlZCIsImhhc05ld2xpbmVzIiwiY29sbGFwc2VkIiwiaW5FbWl0UGFzdGUiLCJpc0J1ZmZlclNvdXJjZSIsImV4cGFuZENvbGxhcHNlZFBhc3RlIiwic2hvdWxkVHJpbSIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZWQiLCJ2YWxpZGF0ZVByb21wdFN1Ym1pc3Npb24iLCJkaXNwbGF5VXNlclByb21wdCIsImZpcnN0U3BhY2UiLCJoYXNBcmdUZXh0IiwiY3Vyc29yU2xpY2UiLCJjb21tYW5kU2xpY2UiLCJmYWxsYmFja1NsaWNlIiwicGFydGlhbCIsInRyaW1FbmQiLCJwcmV2aW91cyIsImNtZCIsImlkeCIsImZpbmRJbmRleCIsInMiLCJzZXRBdmFpbGFibGVDb21tYW5kcyIsImNvbW1hbmRzIiwic3VibWl0Iiwic2VsZWN0ZWQiLCJkaXJlY3Rpb24iLCJjdXJyZW50SW5kZXgiLCJuZXh0IiwiY2xhbXBlZCIsImxhc3RBZGRlZEV2ZW50U2lnbmF0dXJlIiwiYWRkRXZlbnQiLCJub3JtYWxpemVFdmVudFR5cGUiLCJzaWduYXR1cmUiLCJmb3JtYXR0ZWQiLCJmb3JtYXRDb250ZW50IiwicmF3VHlwZSIsInRpbWVzdGFtcCIsImluc2VydEluZGV4Iiwic3BsaWNlIiwicXVldWVNaWNyb3Rhc2siLCJwcm9jZXNzUXVldWUiLCJyZW5kZXJQcm9tcHRPdmVybGF5IiwiaW1tZWRpYXRlIiwiY29hbGVzY2VkIiwiY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMiLCJyZW5kZXJFdmVudCIsImRlbGF5IiwiaXNNZXJnZWFibGUiLCJ0YXJnZXQiLCJpc0NvbXBhY3RlZCIsIm5lZWRzU2VwYXJhdG9yIiwiZmx1c2hFdmVudHMiLCJ0aW1lb3V0TXMiLCJzdGFydCIsImZvcm1hdHRlZFBsYWluIiwibGluZSIsInRoZW1lIiwicHJpbWFyeSIsImlzR2FyYmFnZU91dHB1dCIsImN1cmF0ZWQiLCJjdXJhdGVSZWFzb25pbmdDb250ZW50Iiwic2hvdWxkUmVuZGVyVGhvdWdodCIsImZvcm1hdFRoaW5raW5nQmxvY2siLCJmb3JtYXRDb21wYWN0VG9vbENhbGwiLCJmb3JtYXRDb21wYWN0VG9vbFJlc3VsdCIsIndyYXBCdWxsZXRUZXh0IiwibGFiZWwiLCJsYWJlbENvbG9yIiwid2FybmluZyIsIm5ld2xpbmVzIiwibWF0Y2giLCJpc0Vycm9yIiwidGhvdWdodFR5cGUiLCJmb3JtYXRBc3Npc3RhbnRSZXNwb25zZSIsInRyaW1tZWQiLCJwdW5jdE9ubHlMaW5lcyIsImxpbmVUcmltbWVkIiwibm9uRW1wdHlMaW5lcyIsImwiLCJtZWFuaW5nZnVsTGluZXMiLCJhbHBoYU51bSIsImFscGhhQ291bnQiLCJ0b3RhbENvdW50Iiwic2FuaXRpemVUb29sUmVzdWx0Q29udGVudCIsImNsZWFuTGluZXMiLCJhbHBoYUluTGluZSIsInBvcCIsImxpbWl0ZWQiLCJtYXhTZWdtZW50cyIsInNlZ21lbnRzIiwiZmxhdE1hcCIsInNlZW4iLCJkZWR1cGVkIiwic2VnbWVudCIsIm5vcm1hbGl6ZWRTZWdtZW50IiwiYWRkIiwicHJpb3JpdGl6ZWQiLCJwcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMiLCJsaW1pdGVkU2VsZWN0aW9uIiwiYnVsbGV0ZWQiLCJlbnN1cmVSZWFzb25pbmdCdWxsZXQiLCJsb29rc1N0cnVjdHVyZWRUaG91Z2h0Iiwic2NvcmVkIiwiaW5kZXgiLCJzY29yZSIsInJlYXNvbmluZ1NpZ25hbFNjb3JlIiwiaGFzU2lnbmFsIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImxvd2VyIiwiYWN0aW9uS2V5d29yZHMiLCJrZXl3b3JkIiwibm9ybWFsaXplZExvd2VyIiwid29yZHNQcmV2aW91cyIsInciLCJ3b3Jkc0N1cnJlbnQiLCJzaGFyZWRXb3JkcyIsIndvcmQiLCJzaW1pbGFyaXR5Iiwid29yZENvdW50IiwibWVhbmluZ2xlc3NQYXR0ZXJucyIsInBhdHRlcm4iLCJmb3JtYXRDbGF1ZGVDb2RlQmxvY2siLCJidWxsZXQiLCJsaW5lSWR4Iiwid29yZHMiLCJjdXJyZW50TGluZSIsInByZWZpeCIsInRyaW1TdGFydCIsImZvcm1hdFRvb2xDYWxsIiwibmFtZU1hdGNoIiwidG9vbENvbG9ycyIsInRvb2xOYW1lIiwiYXJnc1N0ciIsInByZWZpeExlbiIsImluZGVudCIsInBhcnNlVG9vbEFyZ3MiLCJhcmciLCJhcmdUZXh0IiwidWkiLCJtdXRlZCIsImZvcm1hdEFyZ1ZhbHVlIiwidmFsdWUiLCJzZXBhcmF0b3IiLCJ0ZXN0TGluZSIsInN0cmlwQW5zaSIsInJlZ2V4IiwiZXhlYyIsImlzUXVvdGVkIiwiaW5uZXIiLCJsb3dlcktleSIsInNob3VsZFByZXNlcnZlIiwibWF4TGVuIiwidHJ1bmNhdGVkIiwiZm9ybWF0VG9vbFJlc3VsdCIsInN1bW1hcnlNYXRjaCIsInByZXZpZXciLCJ0b29sQ29sb3IiLCJnZXRUb29sQ29sb3IiLCJjb2xvcmVkVG9vbE5hbWUiLCJwYXJhbXMiLCJwYXJzZVRvb2xQYXJhbXMiLCJmb3JtYXRUb29sUGFyYW1zQ29sb3JlZCIsImZvcm1hdFRvb2xQYXJhbXMiLCJmaXJzdFBhcmFtIiwicGFyYW0iLCJjb2xvcmVkVmFsdWUiLCJjb2xvclBhcmFtVmFsdWUiLCJwYXJhbVRleHQiLCJwYXJhbVN0ciIsInBsYWluTGVuZ3RoIiwidmlzaWJsZUxlbmd0aCIsImV4dHJhY3RUb29sU3VtbWFyeSIsInBhdGhNYXRjaCIsInBhdGgiLCJmaWxlIiwiY21kTWF0Y2giLCJmb3JtYXRFZGl0UmVzdWx0V2l0aERpZmYiLCJsaW5lTWF0Y2giLCJmaWxlTWF0Y2giLCJyZWFkTWF0Y2giLCJoYXNQYXRoIiwiaGFzQ29tbWFuZCIsImlzUGF0aE9yRGlyIiwic3VtbWFyeSIsInByZXNlcnZlRnVsbCIsImZpcnN0TGluZSIsInN1bW1hcnlUZXh0Iiwic2VudGVuY2VFbmQiLCJzZWFyY2giLCJsYXN0U3BhY2UiLCJsYXN0SW5kZXhPZiIsImNvbG9yZWRTdW1tYXJ5IiwiY29sb3JSZXN1bHRTdW1tYXJ5IiwiaGFzTW9yZUNvbnRlbnQiLCJleHBhbmRIaW50Iiwic3VjY2VzcyIsImZpbGVQYXRoTWF0Y2giLCJmaWxlTmFtZSIsImZ1bGxQYXRoIiwib2xkTWF0Y2giLCJuZXdNYXRjaCIsIm9sZENvbnRlbnQiLCJuZXdDb250ZW50Iiwib2xkTGVuIiwibmV3TGVuIiwiZGlmZlN0YXQiLCJtYXhEaWZmTGVuIiwib2xkUHJldmlldyIsImNsZWFuT2xkIiwibmV3UHJldmlldyIsImNsZWFuTmV3IiwibWV0YWRhdGEiLCJmaWxlUGF0aCIsIm9sZExlbmd0aCIsIm5ld0xlbmd0aCIsImRpZmYiLCJvbGQiLCJuZXciLCJmb3JtYXRDb21wYWN0UmVzcG9uc2UiLCJhdmFpbGFibGVXaWR0aCIsImxhYmVsVGV4dCIsImJ1bGxldFByZWZpeCIsImZpcnN0Tm9uRW1wdHkiLCJpbkNvZGVCbG9jayIsImNvZGVCbG9ja0xhbmciLCJjb2RlQmxvY2tCdWZmZXIiLCJyYXdMaW5lIiwidHJpbW1lZExpbmUiLCJjb2RlSW5kZW50IiwiY29kZUxpbmUiLCJoZWFkZXJNYXRjaCIsImxldmVsIiwiaGVhZGVyVGV4dCIsImZvcm1hdHRlZEhlYWRlciIsImZvcm1hdE1hcmtkb3duSGVhZGVyIiwiZGl2aWRlcldpZHRoIiwidGFibGVQcmVmaXgiLCJsaXN0TWF0Y2giLCJsaXN0Q29udGVudCIsImZvcm1hdHRlZExpc3QiLCJmb3JtYXRJbmxpbmVUZXh0IiwibGlzdEJ1bGxldCIsInNlY29uZGFyeSIsImxpc3RJbmRlbnQiLCJpc0ZpcnN0TGlzdExpbmUiLCJjYW5kaWRhdGUiLCJmb3JtYXR0ZWRMaW5lIiwicHJlZml4TGVuZ3RoIiwiZm9ybWF0dGVkVGV4dCIsImhlYWRlcldpZHRoIiwidG9wQm9yZGVyIiwiaGVhZGVyTGluZSIsInVuZGVybGluZSIsIm5lb24iLCJsYWJlbEljb24iLCJvcmFuZ2UiLCJwdXJwbGUiLCJjb2xvcmVkTGFiZWwiLCJncmFkaWVudCIsIndyYXBUZXh0VG9XaWR0aCIsImZvcm1hdFN0cmVhbWluZ0VsYXBzZWQiLCJlbGFwc2VkIiwibWlucyIsInNlY3MiLCJmb3JtYXRDb21wYWN0QmxvY2siLCJwYWRkaW5nIiwibGVmdFBhZCIsInJpZ2h0UGFkIiwiY2VpbCIsImFkZENvbXBhY3RCbG9jayIsImZvcm1hdHRlZENvbnRlbnQiLCJleHBhbmRMYXN0VG9vbFJlc3VsdCIsImlzU3RydWN0dXJlZCIsImlzU3RydWN0dXJlZFRvb2xPdXRwdXQiLCJyZW5kZXJlZCIsImZvcm1hdFN0cnVjdHVyZWRUb29sT3V0cHV0IiwiaGVhZGVyIiwiZm9ybWF0dGVkTGluZXMiLCJnZXRDb2xsYXBzZWRSZXN1bHRDb3VudCIsInNldE1vZGUiLCJ3YXNTdHJlYW1pbmciLCJzdGFydFNwaW5uZXJBbmltYXRpb24iLCJzdG9wU3Bpbm5lckFuaW1hdGlvbiIsInNldEludGVydmFsIiwic3Bpbm5lckZyYW1lcyIsImJyYWlsbGUiLCJzZXRBY3Rpdml0eSIsInVwZGF0ZVN0cmVhbWluZ1Rva2VucyIsInRva2VucyIsImZvcm1hdFRva2VuQ291bnQiLCJ0b0ZpeGVkIiwiZ2V0TW9kZSIsInVwZGF0ZVN0YXR1cyIsInVwZGF0ZVN0YXR1c0J1bmRsZSIsIm1haW4iLCJvdmVycmlkZSIsInN0cmVhbWluZyIsInByZXZTdHJlYW1pbmciLCJjaGFuZ2VkIiwibWFpbkNoYW5nZWQiLCJvdmVycmlkZUNoYW5nZWQiLCJ1bmRlZmluZWQiLCJzdHJlYW1pbmdDaGFuZ2VkIiwic3RyZWFtaW5nSW50cm9kdWNlIiwic3RyZWFtaW5nQ2xlYXJlZCIsIm9ubHlTdHJlYW1pbmdDaGFuZ2VkIiwic2tpcFN0cmVhbWluZ1JlbmRlciIsInNob3VsZFJlbmRlciIsInVwZGF0ZVN0YXR1c01ldGEiLCJ1cGRhdGVNb2RlVG9nZ2xlcyIsInN0YXRlIiwidGhpbmtpbmdIb3RrZXkiLCJjcml0aWNhbEFwcHJvdmFsSG90a2V5IiwiYXV0b0NvbnRpbnVlSG90a2V5IiwiYWxwaGFaZXJvSG90a2V5IiwiZGVidWdIb3RrZXkiLCJjbGVhciIsInVwZGF0ZVJMU3RhdHVzIiwiY2xlYXJSTFN0YXR1cyIsImdldFJMU3RhdHVzIiwidXBkYXRlU2VjdXJlVG9vbHNTdGF0dXMiLCJyZWNvcmRTZWN1cmVUb29sSW52b2NhdGlvbiIsImludm9jYXRpb25zIiwidXBkYXRlcyIsImxhc3RUb29sVXNlZCIsImV4ZWN1dGUiLCJhY3RpdmUiLCJsYXN0Q29tbWFuZCIsImxhc3RFeGl0Q29kZSIsImV4aXRDb2RlIiwiZXhlY0NvdW50IiwicHJvYmUiLCJsYXN0VGFyZ2V0Iiwic2VydmljZXNGb3VuZCIsInNlcnZpY2VzIiwicHJvYmVDb3VudCIsImxhc3RBY3Rpb24iLCJhY3Rpb24iLCJrZXlzU3RvcmVkIiwia2V5c0NvdW50IiwicGVyc2lzdGVudCIsImdldFNlY3VyZVRvb2xzU3RhdHVzIiwic2V0SW5saW5lUGFuZWwiLCJoYXNDb250ZW50IiwibGltaXRJbmxpbmVQYW5lbCIsInN1cHBvcnRzSW5saW5lUGFuZWwiLCJjbGVhcklubGluZVBhbmVsIiwic2V0TWVudSIsIml0ZW1zIiwiY2FsbGJhY2siLCJpbml0aWFsSW5kZXgiLCJpc0FjdGl2ZSIsInJlbmRlck1lbnVQYW5lbCIsImlzU2VsZWN0ZWQiLCJpc0Rpc2FibGVkIiwiZGlzYWJsZWQiLCJkaW0iLCJkZXNjIiwibmV3SW5kZXgiLCJhdHRlbXB0cyIsIm1heEF0dGVtcHRzIiwibWF4TGluZXMiLCJvdmVyZmxvdyIsImluZGljYXRvciIsInRhaWxDb3VudCIsInRhaWwiLCJvdmVybGF5IiwiYnVpbGRPdmVybGF5TGluZXMiLCJyZW5kZXJlZExpbmVzIiwidHJ1bmNhdGVMaW5lIiwicHJvbXB0SW5kZXgiLCJoZWlnaHQiLCJsaW5lc1RvVG9wIiwiY2xlYXJIZWlnaHQiLCJtb3ZlQmFja1VwIiwicHJvbXB0Q29sIiwibGluZXNUb01vdmVVcCIsImRpdmlkZXIiLCJmYWxsYmFja0FjdGl2aXR5IiwicmF3Iiwic3Bpbm5lckNoYXJzIiwic3Bpbm5lckNoYXIiLCJzdGFyQ2hhciIsInNwaW5uZXJEZWNvcmF0ZWQiLCJhY2NlbnQiLCJnZW5lcmljQWN0aXZpdGllcyIsImRpc3BsYXlBY3Rpdml0eSIsIm5lZWRzRWxsaXBzaXMiLCJlbGFwc2VkQ29sb3IiLCJwYXJ0cyIsImFjdGl2aXR5VGV4dCIsImFjdGl2aXR5TGluZSIsIndyYXBwZWQiLCJ3cmFwT3ZlcmxheUxpbmUiLCJpbnB1dExpbmUiLCJidWlsZElucHV0TGluZSIsImlucHV0TGluZXMiLCJhcnIiLCJwYW5lbExpbmUiLCJzdWdnZXN0aW9uIiwibWFya2VyIiwiY21kVGV4dCIsImRlc2NUZXh0IiwiY29tcGFjdFN0YXR1cyIsImJ1aWxkQ29tcGFjdFN0YXR1c0xpbmUiLCJ0b2dnbGVMaW5lIiwiYnVpbGRUb2dnbGVMaW5lIiwibW9kZWwiLCJwcm92aWRlciIsImNvbnRleHRQZXJjZW50IiwidXNlZCIsImNsYW1wUGVyY2VudGFnZSIsImJhcldpZHRoIiwiYmFyQ29sb3IiLCJnZXRDb250ZXh0Q29sb3IiLCJiYXIiLCJwcm9maWxlIiwid29ya3NwYWNlIiwiZGlyZWN0b3J5IiwiYWJicmV2aWF0ZVBhdGgiLCJidWlsZENocm9tZUxpbmVzIiwic3RhdHVzTGluZXMiLCJidWlsZFN0YXR1c0Jsb2NrIiwibWV0YUxpbmVzIiwiYnVpbGRNZXRhQmxvY2siLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwid3JhcFNlZ21lbnRzIiwiZm9ybWF0TWV0YVNlZ21lbnQiLCJ3cml0ZXMiLCJ0b29sU3VtbWFyeSIsInNlc3Npb25MYWJlbCIsInZlcnNpb24iLCJybFNlZ21lbnRzIiwiYnVpbGRSTFN0YXR1c1NlZ21lbnRzIiwic2VjdXJlVG9vbHNTZWdtZW50cyIsImJ1aWxkU2VjdXJlVG9vbHNTZWdtZW50cyIsImFjdGl2ZVZhcmlhbnQiLCJ3aW5zIiwiY3VycmVudE1vZHVsZSIsInJlZmluZXIiLCJ0aWVzIiwidG90YWxHYW1lcyIsImxlYWRlciIsInBDb2xvciIsInJDb2xvciIsInBTY29yZSIsInJTY29yZSIsInRyb3BoeSIsInN0cmVha1RleHQiLCJzdHJlYWsiLCJwQmFycyIsInJCYXJzIiwidEJhcnMiLCJpc1BhcmFsbGVsIiwicGFyYWxsZWxFeGVjdXRpb24iLCJ2YXJpYW50SWNvbiIsInZhcmlhbnRMYWJlbCIsInZhcmlhbnRDb2xvciIsImxhc3RXaW5uZXIiLCJ3aW5uZXJJY29uIiwiY3VycmVudFN0ZXAiLCJzdGVwVGV4dCIsInRydW5jYXRlTWlkZGxlIiwic3RlcHNDb21wbGV0ZWQiLCJwY3QiLCJzY29yZXMiLCJwVmFsIiwiclZhbCIsInBEaXNwbGF5IiwickRpc3BsYXkiLCJhY2N1cmFjeSIsInBBY2MiLCJyQWNjIiwic3QiLCJzZWNJY29uIiwidG9vbEluZGljYXRvcnMiLCJleGVjSWNvbiIsInN2Y0NvdW50Iiwic3RhdGVJY29uIiwiRXhlY3V0ZSIsIlByb2JlIiwiU3RhdGUiLCJUcmFuc2Zvcm0iLCJUYW9PcHMiLCJtYWdlbnRhIiwia2VlcExlbiIsInN0YXR1c2VzIiwiY29sb3JpemVyIiwiYnVpbGRDb250cm9sTGluZXMiLCJzaG9ydGN1dExpbmUiLCJidWlsZFNob3J0Y3V0TGluZSIsImFkZFRvZ2dsZSIsImhvdGtleSIsImFscGhhWmVyb0FjdGl2ZSIsImFwcHJvdmFsTW9kZSIsImFwcHJvdmFsQWN0aXZlIiwiYXV0b0NvbnRpbnVlQWN0aXZlIiwidGhpbmtpbmdMYWJlbFJhdyIsInRoaW5raW5nTW9kZUxhYmVsIiwidGhpbmtpbmdMYWJlbCIsInRoaW5raW5nQWN0aXZlIiwiYnVpbGRMaW5lIiwiaW5jbHVkZUhvdGtleXMiLCJ0b2dnbGUiLCJzdGF0ZVRleHQiLCJob3RrZXlUZXh0IiwiYWRkSG90a2V5IiwibGluZXNUZXh0IiwiY2hhcnNUZXh0IiwicHJvbXB0V2lkdGgiLCJjb250aW51YXRpb25JbmRlbnQiLCJjb250aW51YXRpb25XaWR0aCIsInJhd0J1ZmZlciIsImJ1ZmZlckxpbmVzIiwidG90YWxDaGFycyIsImN1cnNvckxpbmUiLCJjdXJzb3JDb2wiLCJmb3VuZEN1cnNvciIsImxpbmVJbmRleCIsImlzRmlyc3RMb2dpY2FsTGluZSIsImxpbmVTdGFydENoYXIiLCJmaXJzdExpbmVXaWR0aCIsImNvbnRMaW5lV2lkdGgiLCJpc0ZpcnN0RGlzcGxheUxpbmUiLCJkaXNwbGF5TGluZSIsImNodW5rU3RhcnQiLCJjaHVua0VuZCIsIm9mZnNldEluQ2h1bmsiLCJsYXN0TGluZSIsInRhcmdldExpbmUiLCJ2aXNpYmxlUGFydCIsImN1cnNvclBvcyIsImJlZm9yZSIsImFmdGVyIiwidGV4dFBhcnQiLCJidWlsZElucHV0V2luZG93IiwiYXZhaWxhYmxlIiwiY3Vyc29ySW5kZXgiLCJvZmZzZXQiLCJtYXhPZmZzZXQiLCJ3aW5kb3ciLCJkaXNwbGF5IiwiY2hhciIsImN1cnNvckluV2luZG93IiwiY2FwdHVyZUlucHV0IiwiUHJvbWlzZSIsInJlamVjdCIsInJlc2V0QnVmZmVyIiwicmVhc29uIiwiY2FwdHVyZSIsImxpbWl0IiwidmlzaWJsZSIsInRva2VuIiwic2xpY2VMZW5ndGgiLCJnZXRCdWZmZXIiLCJnZXRDdXJzb3IiLCJzZXRCdWZmZXIiLCJyZXF1ZXN0ZWRDdXJzb3IiLCJzZXRTZWNyZXRNb2RlIiwiZW5hYmxlZCIsInNldE1vZGVTdGF0dXMiLCJzaG93Q29tcGFjdGluZ1N0YXR1cyIsImhpZGVDb21wYWN0aW5nU3RhdHVzIiwiZW1pdFByb21wdCIsInB1c2hQcm9tcHRFdmVudCIsIm1zIiwiY29sdW1ucyIsImV4cG9ydHMiXSwic291cmNlcyI6WyJVbmlmaWVkVUlSZW5kZXJlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaWZpZWRVSVJlbmRlcmVyIC0gQ2xhdWRlIENvZGUgc3R5bGUgbWluaW1hbGlzdCB0ZXJtaW5hbCBVSS5cbiAqXG4gKiBHb2FsczpcbiAqIC0gU2luZ2xlIGV2ZW50IHBpcGVsaW5lIGZvciBldmVyeXRoaW5nIChwcm9tcHQg4oaSIHRob3VnaHQg4oaSIHRvb2wvYnVpbGQvdGVzdCDihpIgcmVzcG9uc2UpLlxuICogLSBQaW5uZWQgc3RhdHVzL21ldGEgb25seSAobmV2ZXIgaW4gc2Nyb2xsYmFjaykuXG4gKiAtIFNjcm9sbGJhY2sgb25seSBzaG93cyBldmVudHM7IG5vIGR1cGxpY2F0ZSBzdGF0dXMgbGlrZSBcIldvcmtpbmcgb24geW91ciByZXF1ZXN0XCIgb3IgXCJSZWFkeSBmb3IgcHJvbXB0c1wiLlxuICogLSBTdHJlYW1pbmc6IGZpcnN0IGNodW5rIHNldHMgYSBvbmUtbGluZSBiYW5uZXI7IHJlbWFpbmRlciBzdHJlYW1zIG5hdHVyYWxseSAob3B0aW9uYWwpLlxuICogLSBDb2xsYXBzaWJsZS1saWtlIHN1bW1hcmllczogd2UgZm9ybWF0IGEgY29tcGFjdCBoZWFkaW5nIHdpdGggYW4gZWxsaXBzaXMgaW5kaWNhdG9yLCBidXQgYXZvaWQgY3RybCtvIGhpbnRzLlxuICovXG5cbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gJ25vZGU6cmVhZGxpbmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnbm9kZTpldmVudHMnO1xuaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcbmltcG9ydCB7IHRoZW1lLCBzcGlubmVyRnJhbWVzLCBnZXRUb29sQ29sb3IgfSBmcm9tICcuL3RoZW1lLmpzJztcbmltcG9ydCB7IGlzUGxhaW5PdXRwdXRNb2RlIH0gZnJvbSAnLi9vdXRwdXRNb2RlLmpzJztcbmltcG9ydCB7IEFuaW1hdGVkU3Bpbm5lciwgVGhpbmtpbmdJbmRpY2F0b3IsIENvbnRleHRNZXRlciwgZGlzcG9zZUFuaW1hdGlvbnMgfSBmcm9tICcuL2FuaW1hdGVkU3RhdHVzLmpzJztcbmltcG9ydCB7XG4gIGNsYW1wUGVyY2VudGFnZSxcbiAgZ2V0Q29udGV4dENvbG9yLFxufSBmcm9tICcuL3VpQ29uc3RhbnRzLmpzJztcbmltcG9ydCB7IGZvcm1hdElubGluZVRleHQgfSBmcm9tICcuL3JpY2hUZXh0LmpzJztcbmltcG9ydCB7IGluaXRpYWxpemVJbnB1dFByb3RlY3Rpb24sIGdldElucHV0UHJvdGVjdGlvbiwgdHlwZSBJbnB1dFByb3RlY3Rpb24gfSBmcm9tICcuLi9jb3JlL2lucHV0UHJvdGVjdGlvbi5qcyc7XG5cbi8vIFVJIGhlbHBlciBtZXRob2RzIGZvciBzZWN1cml0eSBjb21wb25lbnRzXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlQmFubmVyKHRpdGxlOiBzdHJpbmcsIHN1YnRpdGxlPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWUJyArICfilZAnLnJlcGVhdCg2OCkgKyAn4pWXJykpO1xuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkSAnKSArIGNoYWxrLmN5YW4uYm9sZCh0aXRsZS5wYWRFbmQoNjYpKSArIGNoYWxrLmN5YW4oJyDilZEnKSk7XG4gIGlmIChzdWJ0aXRsZSkge1xuICAgIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWRICcpICsgY2hhbGsud2hpdGUoc3VidGl0bGUucGFkRW5kKDY2KSkgKyBjaGFsay5jeWFuKCcg4pWRJykpO1xuICB9XG4gIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWaJyArICfilZAnLnJlcGVhdCg2OCkgKyAn4pWdJykpO1xuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRQcm9ncmVzcyhwaGFzZTogc3RyaW5nLCBzdGVwOiBudW1iZXIsIHRvdGFsU3RlcHM6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKChzdGVwIC8gdG90YWxTdGVwcykgKiAxMDApO1xuICBjb25zdCBwcm9ncmVzc0JhciA9ICfilognLnJlcGVhdChNYXRoLmZsb29yKHBlcmNlbnRhZ2UgLyA1KSkgKyAn4paRJy5yZXBlYXQoMjAgLSBNYXRoLmZsb29yKHBlcmNlbnRhZ2UgLyA1KSk7XG4gIHJldHVybiBgJHtjaGFsay5jeWFuKCfioIsnKX0gJHtjaGFsay53aGl0ZShwaGFzZSl9OiBbJHtjaGFsay5ncmVlbihwcm9ncmVzc0Jhcil9XSAke3BlcmNlbnRhZ2V9JSAoJHtzdGVwfS8ke3RvdGFsU3RlcHN9KWA7XG59XG5cbi8vIEFwcGxlIFNlY3VyaXR5IFVJIGNvbXBhdGliaWxpdHkgbWV0aG9kcyAocmVwbGFjZXMgQXBwbGVTZWN1cml0eVVJLnRzKVxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlY3VyaXR5QmFubmVyKHRpdGxlOiBzdHJpbmcsIHN1YnRpdGxlPzogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgd2lkdGggPSA3MDtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWQJy5yZXBlYXQod2lkdGgpKSk7XG4gIGxpbmVzLnB1c2goYCR7Y2hhbGsuY3lhbign8J+boe+4jycpfSAke2NoYWxrLmN5YW4uYm9sZCh0aXRsZS50b1VwcGVyQ2FzZSgpKX1gKTtcbiAgaWYgKHN1YnRpdGxlKSB7XG4gICAgbGluZXMucHVzaChjaGFsay5ncmF5KGAgICR7c3VidGl0bGV9YCkpO1xuICB9XG4gIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWQJy5yZXBlYXQod2lkdGgpKSk7XG4gIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVNlY3VyaXR5U3Bpbm5lcihtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7Y2hhbGsuY3lhbign4qCLJyl9ICR7Y2hhbGsud2hpdGUobWVzc2FnZSl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNlY3VyaXR5RmluZGluZyhmaW5kaW5nOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBzZXZlcml0eUNvbG9ycyA9IHtcbiAgICBjcml0aWNhbDogY2hhbGsucmVkQnJpZ2h0LFxuICAgIGhpZ2g6IGNoYWxrLnJlZCxcbiAgICBtZWRpdW06IGNoYWxrLnllbGxvdyxcbiAgICBsb3c6IGNoYWxrLmJsdWUsXG4gICAgaW5mbzogY2hhbGsuZ3JheVxuICB9O1xuICBcbiAgY29uc3Qgc2V2ZXJpdHlJY29ucyA9IHtcbiAgICBjcml0aWNhbDogY2hhbGsucmVkQnJpZ2h0KCfimqAnKSxcbiAgICBoaWdoOiBjaGFsay5yZWQoJ+KWsicpLFxuICAgIG1lZGl1bTogY2hhbGsueWVsbG93KCfilrInKSxcbiAgICBsb3c6IGNoYWxrLmJsdWUoJ+KWvCcpLFxuICAgIGluZm86IGNoYWxrLmdyYXkoJ+KEuScpXG4gIH07XG4gIFxuICBjb25zdCBjb2xvciA9IHNldmVyaXR5Q29sb3JzW2ZpbmRpbmcuc2V2ZXJpdHldIHx8IGNoYWxrLndoaXRlO1xuICBjb25zdCBpY29uID0gc2V2ZXJpdHlJY29uc1tmaW5kaW5nLnNldmVyaXR5XSB8fCBjaGFsay5ncmF5KCfihLknKTtcbiAgXG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBsaW5lcy5wdXNoKGAke2ljb259ICR7Y29sb3IuYm9sZChmaW5kaW5nLm5hbWUgfHwgZmluZGluZy50eXBlIHx8ICdGaW5kaW5nJyl9YCk7XG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdEZXNjcmlwdGlvbjonKX0gJHtjaGFsay53aGl0ZShmaW5kaW5nLmRlc2NyaXB0aW9uIHx8ICdObyBkZXNjcmlwdGlvbicpfWApO1xuICBpZiAoZmluZGluZy5ldmlkZW5jZSkge1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdFdmlkZW5jZTonKX0gJHtjaGFsay53aGl0ZShmaW5kaW5nLmV2aWRlbmNlKX1gKTtcbiAgfVxuICBpZiAoZmluZGluZy5yZW1lZGlhdGlvbikge1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdSZW1lZGlhdGlvbjonKX0gJHtjaGFsay5ncmVlbihmaW5kaW5nLnJlbWVkaWF0aW9uKX1gKTtcbiAgfVxuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTZWN1cml0eVN1bW1hcnkocmVzdWx0czogYW55KTogc3RyaW5nIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGxpbmVzLnB1c2goY2hhbGsuY3lhbign4pWQJy5yZXBlYXQoNzApKSk7XG4gIGxpbmVzLnB1c2goYCR7Y2hhbGsuY3lhbign8J+boe+4jycpfSAke2NoYWxrLmN5YW4uYm9sZCgnU0VDVVJJVFkgQVVESVQgU1VNTUFSWScpfWApO1xuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkCcucmVwZWF0KDcwKSkpO1xuICBcbiAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJ0NhbXBhaWduOicpfSAke2NoYWxrLndoaXRlKHJlc3VsdHMuY2FtcGFpZ24gfHwgJ1Vua25vd24nKX1gKTtcbiAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJ1N0YXJ0IFRpbWU6Jyl9ICR7Y2hhbGsud2hpdGUocmVzdWx0cy5zdGFydFRpbWUgfHwgJ1Vua25vd24nKX1gKTtcbiAgaWYgKHJlc3VsdHMuZW5kVGltZSkge1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdFbmQgVGltZTonKX0gJHtjaGFsay53aGl0ZShyZXN1bHRzLmVuZFRpbWUpfWApO1xuICB9XG4gIGlmIChyZXN1bHRzLmR1cmF0aW9uKSB7XG4gICAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJ0R1cmF0aW9uOicpfSAke2NoYWxrLndoaXRlKGAke3Jlc3VsdHMuZHVyYXRpb259bXNgKX1gKTtcbiAgfVxuICBcbiAgaWYgKHJlc3VsdHMuZmluZGluZ3MgJiYgQXJyYXkuaXNBcnJheShyZXN1bHRzLmZpbmRpbmdzKSkge1xuICAgIGNvbnN0IGNvdW50czogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHsgY3JpdGljYWw6IDAsIGhpZ2g6IDAsIG1lZGl1bTogMCwgbG93OiAwLCBpbmZvOiAwIH07XG4gICAgcmVzdWx0cy5maW5kaW5ncy5mb3JFYWNoKChmOiBhbnkpID0+IHtcbiAgICAgIGNvdW50c1tmLnNldmVyaXR5XSA9IChjb3VudHNbZi5zZXZlcml0eV0gfHwgMCkgKyAxO1xuICAgIH0pO1xuICAgIFxuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdGaW5kaW5nczonKX1gKTtcbiAgICBPYmplY3QuZW50cmllcyhjb3VudHMpLmZvckVhY2goKFtzZXZlcml0eSwgY291bnRdKSA9PiB7XG4gICAgICBpZiAoY291bnQgPiAwKSB7XG4gICAgICAgIGNvbnN0IGNvbG9yID0gc2V2ZXJpdHlDb2xvcnNbc2V2ZXJpdHldIHx8IGNoYWxrLndoaXRlO1xuICAgICAgICBsaW5lcy5wdXNoKGAgICAgJHtjb2xvcihgJHtzZXZlcml0eS50b1VwcGVyQ2FzZSgpfTpgKX0gJHtjaGFsay53aGl0ZShjb3VudCl9YCk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgbGluZXMucHVzaChgICAgICR7Y2hhbGsuZ3JheSgnVG90YWw6Jyl9ICR7Y2hhbGsud2hpdGUocmVzdWx0cy5maW5kaW5ncy5sZW5ndGgpfWApO1xuICB9XG4gIFxuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTZWN1cml0eVN0YXR1cyhzdGF0dXM6IHN0cmluZywgZGV0YWlsczogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc3RhdHVzSWNvbnMgPSB7XG4gICAgaGVhbHRoeTogYCR7Y2hhbGsuZ3JlZW4oJ+KXjycpfWAsXG4gICAgZGVncmFkZWQ6IGAke2NoYWxrLnllbGxvdygn4pePJyl9YCxcbiAgICB1bmF2YWlsYWJsZTogYCR7Y2hhbGsucmVkKCfil48nKX1gXG4gIH07XG4gIFxuICBjb25zdCBpY29uID0gc3RhdHVzSWNvbnNbc3RhdHVzXSB8fCBjaGFsay5ncmF5KCfil48nKTtcbiAgcmV0dXJuIGAke2ljb259ICR7Y2hhbGsud2hpdGUoZGV0YWlscyl9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEF1ZGl0UHJvZ3Jlc3MocGhhc2U6IHN0cmluZywgcHJvZ3Jlc3M6IG51bWJlciwgdG90YWw6IG51bWJlcik6IHN0cmluZyB7XG4gIGNvbnN0IHBlcmNlbnRhZ2UgPSBNYXRoLnJvdW5kKChwcm9ncmVzcyAvIHRvdGFsKSAqIDEwMCk7XG4gIGNvbnN0IGZpbGxlZCA9IE1hdGgucm91bmQocGVyY2VudGFnZSAvIDEwKTtcbiAgY29uc3QgZW1wdHkgPSAxMCAtIGZpbGxlZDtcblxuICBjb25zdCBwcm9ncmVzc0JhciA9IGAke2NoYWxrLmdyZWVuKCfilognLnJlcGVhdChmaWxsZWQpKX0ke2NoYWxrLmdyYXkoJ+KWkScucmVwZWF0KGVtcHR5KSl9YDtcblxuICByZXR1cm4gYCR7Y2hhbGsuZ3JheSgn4o+xJyl9ICR7Y2hhbGsuY3lhbignU2VjdXJpdHkgQXVkaXQnKX0gLSAke2NoYWxrLndoaXRlKHBoYXNlKX1cXG5gICtcbiAgICAgICAgIGAgICR7cHJvZ3Jlc3NCYXJ9ICR7Y2hhbGsud2hpdGUoYCR7cHJvZ3Jlc3N9LyR7dG90YWx9YCl9ICR7Y2hhbGsuZ3JheShgKCR7cGVyY2VudGFnZX0lKWApfWA7XG59XG5cbi8qKlxuICogRm9ybWF0IGEgc2VjdXJpdHkgdG9vbHMgc3VtbWFyeSBtZXNzYWdlIGZvciBkaXNwbGF5LlxuICogU2hvd3MgdG9vbGtpdCBjYXBhYmlsaXRpZXMgYW5kIHRvb2wgZGVzY3JpcHRpb25zIGluIENsYXVkZSBDb2RlIHN0eWxlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2VjdXJlVG9vbHNTdW1tYXJ5KG9wdGlvbnM/OiB7XG4gIHNob3dUaXRsZT86IGJvb2xlYW47XG4gIHRvb2xzPzogQXJyYXk8eyBuYW1lOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IHN0YXR1cz86ICdhY3RpdmUnIHwgJ3JlYWR5JyB8ICdkaXNhYmxlZCcgfT47XG59KTogc3RyaW5nIHtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGNvbnN0IHNob3dUaXRsZSA9IG9wdGlvbnM/LnNob3dUaXRsZSA/PyB0cnVlO1xuXG4gIGlmIChzaG93VGl0bGUpIHtcbiAgICBsaW5lcy5wdXNoKGAke2NoYWxrLndoaXRlKCfij7onKX0gJHtjaGFsay53aGl0ZSgnQWRkZWQgbmV3IHNlY3VyaXR5IHRvb2xzIGFuZCBpbXByb3ZlZCcpfWApO1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay53aGl0ZSgnZXhpc3Rpbmcgb25lcyBmb3IgbW9yZSB2ZXJzYXRpbGUnKX1gKTtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsud2hpdGUoJ29wZXJhdGlvbnMuJyl9YCk7XG4gIH1cblxuICBjb25zdCBkZWZhdWx0VG9vbHMgPSBbXG4gICAgeyBuYW1lOiAnRXhlY3V0ZScsIGRlc2NyaXB0aW9uOiAnc2VjdXJlIHNoZWxsIGNvbW1hbmRzJywgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdCB9LFxuICAgIHsgbmFtZTogJ1Byb2JlJywgZGVzY3JpcHRpb246ICd0YXJnZXQgYW5hbHlzaXMnLCBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0IH0sXG4gICAgeyBuYW1lOiAnU3RhdGUnLCBkZXNjcmlwdGlvbjogJ3Nlc3Npb24gbWFuYWdlbWVudCcsIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3QgfSxcbiAgXTtcblxuICBjb25zdCB0b29scyA9IG9wdGlvbnM/LnRvb2xzIHx8IGRlZmF1bHRUb29scztcblxuICBjb25zdCB0b29sUGFydHMgPSB0b29scy5tYXAodG9vbCA9PiB7XG4gICAgY29uc3Qgc3RhdHVzSWNvbiA9IHRvb2wuc3RhdHVzID09PSAnYWN0aXZlJyA/IGNoYWxrLmdyZWVuKCfil48nKSA6XG4gICAgICAgICAgICAgICAgICAgICAgIHRvb2wuc3RhdHVzID09PSAncmVhZHknID8gY2hhbGsueWVsbG93KCfil4snKSA6XG4gICAgICAgICAgICAgICAgICAgICAgIGNoYWxrLmdyYXkoJ+KXiycpO1xuICAgIHJldHVybiBgJHtzdGF0dXNJY29ufSAke2NoYWxrLmN5YW4oYCcke3Rvb2wubmFtZX0nYCl9IGZvciAke2NoYWxrLndoaXRlKHRvb2wuZGVzY3JpcHRpb24pfWA7XG4gIH0pO1xuXG4gIGlmICh0b29sUGFydHMubGVuZ3RoID4gMCkge1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay53aGl0ZShcIllvdSBub3cgaGF2ZVwiKX0gJHt0b29sUGFydHNbMF19LGApO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDwgdG9vbFBhcnRzLmxlbmd0aCAtIDE7IGkrKykge1xuICAgICAgbGluZXMucHVzaChgICAke3Rvb2xQYXJ0c1tpXX0sYCk7XG4gICAgfVxuICAgIGlmICh0b29sUGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgbGluZXMucHVzaChgICAke2NoYWxrLndoaXRlKCdhbmQnKX0gJHt0b29sUGFydHNbdG9vbFBhcnRzLmxlbmd0aCAtIDFdfeKAlGApO1xuICAgIH1cbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsud2hpdGUoJ2VhY2ggd2l0aCBlbmhhbmNlZCBvdXRwdXQgZm9ybWF0dGluZy4nKX1gKTtcbiAgfVxuXG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdUaGlzIGV4cGFuZHMgeW91ciB0b29sa2l0XFwncyBjYXBhYmlsaXRpZXMnKX1gKTtcbiAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJ3doaWxlIG1haW50YWluaW5nIHN0cmljdCBpbnB1dCBzYW5pdGl6YXRpb24nKX1gKTtcbiAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJ2FuZCBzZWN1cml0eS4nKX1gKTtcbiAgbGluZXMucHVzaChgICAke2NoYWxrLmdyYXkoJyhzcmMvY2FwYWJpbGl0aWVzL21heE9mZmVuc2l2ZVVrcmFpbmVDYXBhYmlsaXR5LnRzKScpfWApO1xuXG4gIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKTtcbn1cblxuY29uc3Qgc2V2ZXJpdHlDb2xvcnM6IFJlY29yZDxzdHJpbmcsIGFueT4gPSB7XG4gIGNyaXRpY2FsOiAodGV4dDogc3RyaW5nKSA9PiBjaGFsay5oZXgoJyNGRjZCNkInKSh0ZXh0KSwgLy8gcmVkQnJpZ2h0XG4gIGhpZ2g6ICh0ZXh0OiBzdHJpbmcpID0+IGNoYWxrLmhleCgnI0ZGNTI1MicpKHRleHQpLCAvLyByZWRcbiAgbWVkaXVtOiAodGV4dDogc3RyaW5nKSA9PiBjaGFsay5oZXgoJyNGRkQ5M0QnKSh0ZXh0KSwgLy8geWVsbG93XG4gIGxvdzogKHRleHQ6IHN0cmluZykgPT4gY2hhbGsuaGV4KCcjNEQ5NkZGJykodGV4dCksIC8vIGJsdWVcbiAgaW5mbzogKHRleHQ6IHN0cmluZykgPT4gY2hhbGsuaGV4KCcjQUFBQUFBJykodGV4dCkgLy8gZ3JheVxufTtcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kU3VnZ2VzdGlvbiB7XG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogSW50ZXJhY3RpdmUgbWVudSBpdGVtIGZvciBDbGF1ZGUgQ29kZSBzdHlsZSBtZW51cy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZW51SXRlbSB7XG4gIC8qKiBVbmlxdWUgaWRlbnRpZmllciBmb3IgdGhlIGl0ZW0gKi9cbiAgaWQ6IHN0cmluZztcbiAgLyoqIERpc3BsYXkgbGFiZWwgKi9cbiAgbGFiZWw6IHN0cmluZztcbiAgLyoqIE9wdGlvbmFsIGRlc2NyaXB0aW9uIHNob3duIHRvIHRoZSByaWdodCAqL1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbiAgLyoqIE9wdGlvbmFsIGNhdGVnb3J5IGZvciBncm91cGluZyAqL1xuICBjYXRlZ29yeT86IHN0cmluZztcbiAgLyoqIFdoZXRoZXIgaXRlbSBpcyBkaXNhYmxlZCAqL1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIC8qKiBXaGV0aGVyIHRoaXMgaXMgdGhlIGN1cnJlbnQvYWN0aXZlIGl0ZW0gKi9cbiAgaXNBY3RpdmU/OiBib29sZWFuO1xufVxuXG50eXBlIENhbm9uaWNhbEV2ZW50VHlwZSA9ICdwcm9tcHQnIHwgJ3Rob3VnaHQnIHwgJ3N0cmVhbScgfCAndG9vbCcgfCAndG9vbC1yZXN1bHQnIHwgJ2J1aWxkJyB8ICd0ZXN0JyB8ICdyZXNwb25zZSc7XG5cbmV4cG9ydCB0eXBlIFJlbmRlcmVyRXZlbnRUeXBlID1cbiAgfCBDYW5vbmljYWxFdmVudFR5cGVcbiAgfCAncmF3J1xuICB8ICdiYW5uZXInXG4gIHwgJ2Vycm9yJ1xuICB8ICdzdHJlYW1pbmcnXG4gIHwgJ3Rvb2wtY2FsbCdcbiAgfCAndG9vbC1yZXN1bHQnXG4gIHwgJ3N5c3RlbSc7XG5cbnR5cGUgVUlFdmVudCA9IHtcbiAgdHlwZTogQ2Fub25pY2FsRXZlbnRUeXBlO1xuICByYXdUeXBlOiBSZW5kZXJlckV2ZW50VHlwZTtcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgaXNDb21wYWN0ZWQ/OiBib29sZWFuOyAvLyBDbGF1ZGUgQ29kZSBzdHlsZSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9ja1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnMge1xuICBkZWJ1Zz86IGJvb2xlYW47XG59XG5cbnR5cGUgSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBjdXJzb3I6IG51bWJlcjtcbn07XG5cbmludGVyZmFjZSBNb2RlVG9nZ2xlU3RhdGUge1xuICBhdXRvQ29udGludWVFbmFibGVkPzogYm9vbGVhbjtcbiAgYXV0b0NvbnRpbnVlSG90a2V5Pzogc3RyaW5nO1xuICB0aGlua2luZ01vZGVMYWJlbD86IHN0cmluZyB8IG51bGw7XG4gIHRoaW5raW5nSG90a2V5Pzogc3RyaW5nO1xuICBjcml0aWNhbEFwcHJvdmFsTW9kZT86ICdhdXRvJyB8ICdhcHByb3ZhbCc7XG4gIGNyaXRpY2FsQXBwcm92YWxIb3RrZXk/OiBzdHJpbmc7XG4gIGFscGhhWmVyb0VuYWJsZWQ/OiBib29sZWFuOyAgLy8gdHJ1ZSA9IGR1YWwgdG91cm5hbWVudCBSTCwgZmFsc2UgPSBub3JtYWwgc2luZ2xlIG1vZGVcbiAgYWxwaGFaZXJvSG90a2V5Pzogc3RyaW5nO1xuICBkZWJ1Z0VuYWJsZWQ/OiBib29sZWFuO1xuICBkZWJ1Z0hvdGtleT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBSTCBhZ2VudCBleGVjdXRpb24gc3RhdHVzIGZvciByZWFsLXRpbWUgZGlzcGxheSBkdXJpbmcgZHVhbC1STCBtb2RlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJMQWdlbnRTdGF0dXMge1xuICAvKiogQ3VycmVudCBhY3RpdmUgdmFyaWFudCBiZWluZyBleGVjdXRlZCAqL1xuICBhY3RpdmVWYXJpYW50PzogJ3ByaW1hcnknIHwgJ3JlZmluZXInIHwgbnVsbDtcbiAgLyoqIEN1cnJlbnQgbW9kdWxlIGJlaW5nIHByb2Nlc3NlZCAqL1xuICBjdXJyZW50TW9kdWxlPzogc3RyaW5nO1xuICAvKiogQ3VycmVudCBzdGVwIHdpdGhpbiB0aGUgbW9kdWxlICovXG4gIGN1cnJlbnRTdGVwPzogc3RyaW5nO1xuICAvKiogV2luIHN0YXRpc3RpY3MgZm9yIHByaW1hcnkgdnMgcmVmaW5lciAqL1xuICB3aW5zPzogeyBwcmltYXJ5OiBudW1iZXI7IHJlZmluZXI6IG51bWJlcjsgdGllczogbnVtYmVyIH07XG4gIC8qKiBDdXJyZW50IHJld2FyZCBzY29yZXMgaWYgYXZhaWxhYmxlICovXG4gIHNjb3Jlcz86IHsgcHJpbWFyeT86IG51bWJlcjsgcmVmaW5lcj86IG51bWJlciB9O1xuICAvKiogSHVtYW4tYWNjdXJhY3kgc3R5bGUgc2NvcmVzICgwLTEpICovXG4gIGFjY3VyYWN5PzogeyBwcmltYXJ5PzogbnVtYmVyOyByZWZpbmVyPzogbnVtYmVyIH07XG4gIC8qKiBXaGV0aGVyIHZhcmlhbnRzIGFyZSBydW5uaW5nIGluIHBhcmFsbGVsICovXG4gIHBhcmFsbGVsRXhlY3V0aW9uPzogYm9vbGVhbjtcbiAgLyoqIFRvdGFsIHN0ZXBzIGNvbXBsZXRlZCAqL1xuICBzdGVwc0NvbXBsZXRlZD86IG51bWJlcjtcbiAgLyoqIFRvdGFsIHN0ZXBzIHRvIHByb2Nlc3MgKi9cbiAgdG90YWxTdGVwcz86IG51bWJlcjtcbiAgLyoqIExhc3Qgc3RlcCB3aW5uZXIgZm9yIGNlbGVicmF0aW9uICovXG4gIGxhc3RXaW5uZXI/OiAncHJpbWFyeScgfCAncmVmaW5lcicgfCAndGllJyB8IG51bGw7XG4gIC8qKiBTdHJlYWsgY291bnQgZm9yIGN1cnJlbnQgbGVhZGVyICovXG4gIHN0cmVhaz86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBdHRhY2sgb3BlcmF0aW9uIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgZHVyaW5nIG9mZmVuc2l2ZSBzZWN1cml0eSBvcGVyYXRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF0dGFja1N0YXR1cyB7XG4gIC8qKiBDdXJyZW50IGF0dGFjayBwaGFzZSAqL1xuICBwaGFzZT86ICdyZWNvbicgfCAnc2Nhbm5pbmcnIHwgJ2V4cGxvaXRhdGlvbicgfCAncGVyc2lzdGVuY2UnIHwgJ2V4ZmlsdHJhdGlvbicgfCAnZGVzdHJ1Y3Rpb24nO1xuICAvKiogQ3VycmVudCB0YXJnZXQgYmVpbmcgYXR0YWNrZWQgKi9cbiAgY3VycmVudFRhcmdldD86IHN0cmluZztcbiAgLyoqIE51bWJlciBvZiB0YXJnZXRzIGFjcXVpcmVkICovXG4gIHRhcmdldHNBY3F1aXJlZD86IG51bWJlcjtcbiAgLyoqIE51bWJlciBvZiB2dWxuZXJhYmlsaXRpZXMgZm91bmQgKi9cbiAgdnVsbmVyYWJpbGl0aWVzRm91bmQ/OiBudW1iZXI7XG4gIC8qKiBOdW1iZXIgb2Ygc3VjY2Vzc2Z1bCBleHBsb2l0cyAqL1xuICBleHBsb2l0c1N1Y2Nlc3NmdWw/OiBudW1iZXI7XG4gIC8qKiBQZXJzaXN0ZW5jZSBtZWNoYW5pc21zIGVzdGFibGlzaGVkICovXG4gIHBlcnNpc3RlbmNlRXN0YWJsaXNoZWQ/OiBudW1iZXI7XG4gIC8qKiBEYXRhIGV4ZmlsdHJhdGVkIChNQikgKi9cbiAgZGF0YUV4ZmlsdHJhdGVkPzogbnVtYmVyO1xuICAvKiogSW5mcmFzdHJ1Y3R1cmUgY29tcHJvbWlzZWQgY291bnQgKi9cbiAgaW5mcmFzdHJ1Y3R1cmVDb21wcm9taXNlZD86IG51bWJlcjtcbiAgLyoqIFJlYWwtdGltZSBtb25pdG9yaW5nIGFjdGl2ZSAqL1xuICBtb25pdG9yaW5nQWN0aXZlPzogYm9vbGVhbjtcbiAgLyoqIEN1cnJlbnQgYXR0YWNrIG1vZGUgKi9cbiAgYXR0YWNrTW9kZT86ICdyZWNvbicgfCAnYXR0YWNrJyB8ICdleHBsb2l0JyB8ICdwZXJzaXN0ZW5jZScgfCAnYzInIHwgJ2Rlc3RydWN0aW9uJztcbiAgLyoqIEF0dGFjayBzdWNjZXNzIHJhdGUgcGVyY2VudGFnZSAqL1xuICBzdWNjZXNzUmF0ZT86IG51bWJlcjtcbiAgLyoqIExhc3QgYXR0YWNrIHJlc3VsdCAqL1xuICBsYXN0UmVzdWx0PzogJ3N1Y2Nlc3MnIHwgJ2ZhaWx1cmUnIHwgJ3BhcnRpYWwnO1xuICAvKiogQWN0aXZlIGF0dGFjayBtb2R1bGVzICovXG4gIGFjdGl2ZU1vZHVsZXM/OiBzdHJpbmdbXTtcbiAgLyoqIFRpbWUgc2luY2UgYXR0YWNrIHN0YXJ0ZWQgKi9cbiAgYXR0YWNrRHVyYXRpb24/OiBudW1iZXI7XG59XG5cbi8qKlxuICogU2VjdXJpdHkgdG9vbHMgc3RhdHVzIGZvciByZWFsLXRpbWUgZGlzcGxheSBvZiBzZWN1cmUgVEFPIHRvb2xzLlxuICogVHJhY2tzIEV4ZWN1dGUsIFByb2JlLCBTdGF0ZSB0b29scyB3aXRoIGVuaGFuY2VkIG91dHB1dCBmb3JtYXR0aW5nLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyZVRvb2xzU3RhdHVzIHtcbiAgLyoqIEV4ZWN1dGUgdG9vbCAtIHNlY3VyZSBzaGVsbCBjb21tYW5kIHN0YXR1cyAqL1xuICBleGVjdXRlPzoge1xuICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICBsYXN0Q29tbWFuZD86IHN0cmluZztcbiAgICBsYXN0RXhpdENvZGU/OiBudW1iZXI7XG4gICAgZXhlY0NvdW50PzogbnVtYmVyO1xuICB9O1xuICAvKiogUHJvYmUgdG9vbCAtIHRhcmdldCBhbmFseXNpcyBzdGF0dXMgKi9cbiAgcHJvYmU/OiB7XG4gICAgYWN0aXZlOiBib29sZWFuO1xuICAgIGxhc3RUYXJnZXQ/OiBzdHJpbmc7XG4gICAgc2VydmljZXNGb3VuZD86IG51bWJlcjtcbiAgICBwcm9iZUNvdW50PzogbnVtYmVyO1xuICB9O1xuICAvKiogU3RhdGUgdG9vbCAtIHNlc3Npb24gbWFuYWdlbWVudCBzdGF0dXMgKi9cbiAgc3RhdGU/OiB7XG4gICAgYWN0aXZlOiBib29sZWFuO1xuICAgIGtleXNTdG9yZWQ/OiBudW1iZXI7XG4gICAgbGFzdEFjdGlvbj86ICdnZXQnIHwgJ3NldCc7XG4gICAgcGVyc2lzdGVudD86IGJvb2xlYW47XG4gIH07XG4gIC8qKiBPdmVyYWxsIHRvb2xraXQgc3RhdHVzICovXG4gIHRvb2xraXRSZWFkeT86IGJvb2xlYW47XG4gIC8qKiBJbnB1dCBzYW5pdGl6YXRpb24gYWN0aXZlICovXG4gIHNhbml0aXphdGlvbkFjdGl2ZT86IGJvb2xlYW47XG4gIC8qKiBMYXN0IHRvb2wgdXNlZCAqL1xuICBsYXN0VG9vbFVzZWQ/OiAnRXhlY3V0ZScgfCAnUHJvYmUnIHwgJ1N0YXRlJyB8ICdUcmFuc2Zvcm0nIHwgJ1Rhb09wcycgfCBudWxsO1xuICAvKiogVG90YWwgdG9vbCBpbnZvY2F0aW9ucyB0aGlzIHNlc3Npb24gKi9cbiAgdG90YWxJbnZvY2F0aW9ucz86IG51bWJlcjtcbn1cblxuY29uc3QgRVNDID0ge1xuICBISURFX0NVUlNPUjogJ1xceDFiWz8yNWwnLFxuICBTSE9XX0NVUlNPUjogJ1xceDFiWz8yNWgnLFxuICBDTEVBUl9TQ1JFRU46ICdcXHgxYlsySicsXG4gIENMRUFSX0xJTkU6ICdcXHgxYlsySycsXG4gIEhPTUU6ICdcXHgxYltIJyxcbiAgRU5BQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0aCcsXG4gIERJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRsJyxcbiAgVE86IChyb3c6IG51bWJlciwgY29sOiBudW1iZXIpID0+IGBcXHgxYlske3Jvd307JHtjb2x9SGAsXG4gIFRPX0NPTDogKGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtjb2x9R2AsXG4gIEVSQVNFX0RPV046ICdcXHgxYltKJyxcbiAgUkVWRVJTRTogJ1xceDFiWzdtJyxcbiAgUkVTRVQ6ICdcXHgxYlswbScsXG4gIC8vIFNjcm9sbCByZWdpb24gY29udHJvbCAtIENSSVRJQ0FMIGZvciBmaXhlZCBib3R0b20gb3ZlcmxheVxuICBTRVRfU0NST0xMX1JFR0lPTjogKHRvcDogbnVtYmVyLCBib3R0b206IG51bWJlcikgPT4gYFxceDFiWyR7dG9wfTske2JvdHRvbX1yYCxcbiAgUkVTRVRfU0NST0xMX1JFR0lPTjogJ1xceDFiW3InLFxuICBTQVZFX0NVUlNPUjogJ1xceDFiW3MnLFxuICBSRVNUT1JFX0NVUlNPUjogJ1xceDFiW3UnLFxufSBhcyBjb25zdDtcblxuY29uc3QgTkVXTElORV9QTEFDRUhPTERFUiA9ICfihrUnO1xuXG5leHBvcnQgY2xhc3MgVW5pZmllZFVJUmVuZGVyZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBybDogcmVhZGxpbmUuSW50ZXJmYWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluTW9kZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnRlcmFjdGl2ZTogYm9vbGVhbjtcblxuICBwcml2YXRlIHJvd3MgPSAyNDtcbiAgcHJpdmF0ZSBjb2xzID0gODA7XG4gIHByaXZhdGUgbGFzdFJlbmRlcldpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGV2ZW50UXVldWU6IFVJRXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIGlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBidWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBjdXJzb3IgPSAwO1xuICBwcml2YXRlIGhpc3Rvcnk6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaGlzdG9yeUluZGV4ID0gLTE7XG4gIHByaXZhdGUgc3VnZ2VzdGlvbnM6IHsgY29tbWFuZDogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBjYXRlZ29yeT86IHN0cmluZyB9W10gPSBbXTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBhdmFpbGFibGVDb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgcHJpdmF0ZSBob3RrZXlzSW5Ub2dnbGVMaW5lOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBjb2xsYXBzZWRQYXN0ZTogeyB0ZXh0OiBzdHJpbmc7IGxpbmVzOiBudW1iZXI7IGNoYXJzOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgbW9kZTogJ2lkbGUnIHwgJ3N0cmVhbWluZycgPSAnaWRsZSc7XG4gIC8qKiBRdWV1ZSBmb3IgaW5wdXQgcmVjZWl2ZWQgZHVyaW5nIHN0cmVhbWluZyAtIHByb2Nlc3NlZCBhZnRlciBzdHJlYW1pbmcgZW5kcyAqL1xuICBwcml2YXRlIHN0cmVhbWluZ0lucHV0UXVldWU6IHN0cmluZ1tdID0gW107XG4gIC8qKiBCdWZmZXIgdG8gYWNjdW11bGF0ZSBzdHJlYW1pbmcgY29udGVudCBmb3IgcG9zdC1wcm9jZXNzaW5nICovXG4gIHByaXZhdGUgc3RyZWFtaW5nQ29udGVudEJ1ZmZlcjogc3RyaW5nID0gJyc7XG4gIC8qKiBUcmFjayBsaW5lcyB3cml0dGVuIGR1cmluZyBzdHJlYW1pbmcgZm9yIHBvdGVudGlhbCByZWZvcm1hdCAqL1xuICBwcml2YXRlIHN0cmVhbWluZ0xpbmVzV3JpdHRlbjogbnVtYmVyID0gMDtcbiAgcHJpdmF0ZSBsYXN0VG9vbFJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIC8qKiBTdGFjayBvZiBjb2xsYXBzZWQgdG9vbCByZXN1bHRzIGZvciBDdHJsK08gZXhwYW5zaW9uICovXG4gIHByaXZhdGUgY29sbGFwc2VkVG9vbFJlc3VsdHM6IEFycmF5PHtcbiAgICB0b29sTmFtZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gICAgbWV0YWRhdGE/OiB7XG4gICAgICBmaWxlUGF0aD86IHN0cmluZztcbiAgICAgIG9sZExlbmd0aD86IG51bWJlcjtcbiAgICAgIG5ld0xlbmd0aD86IG51bWJlcjtcbiAgICAgIGRpZmY/OiB7IG9sZDogc3RyaW5nOyBuZXc6IHN0cmluZyB9O1xuICAgIH07XG4gIH0+ID0gW107XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q29sbGFwc2VkUmVzdWx0cyA9IDUwO1xuICAvKiogVHJhY2sgdGhlIGxhc3QgdG9vbCBuYW1lIGZvciBwYWlyaW5nIHdpdGggcmVzdWx0cyAqL1xuICBwcml2YXRlIGxhc3RUb29sTmFtZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgc3RyZWFtaW5nU3RhcnRUaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNPdmVycmlkZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzU3RyZWFtaW5nOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvLyBBbmltYXRlZCBVSSBjb21wb25lbnRzXG4gIHByaXZhdGUgc3RyZWFtaW5nU3Bpbm5lcjogQW5pbWF0ZWRTcGlubmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGhpbmtpbmdJbmRpY2F0b3I6IFRoaW5raW5nSW5kaWNhdG9yIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY29udGV4dE1ldGVyOiBDb250ZXh0TWV0ZXI7XG4gIHByaXZhdGUgc3Bpbm5lckZyYW1lID0gMDtcbiAgcHJpdmF0ZSBzcGlubmVySW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4SW5saW5lUGFuZWxMaW5lcyA9IDEyO1xuXG4gIC8vIENvbXBhY3Rpbmcgc3RhdHVzIGFuaW1hdGlvblxuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlID0gJyc7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ZyYW1lID0gMDtcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMgPSBbJ+KcuycsICfinLwnLCAn4py7JywgJ+KcuiddO1xuXG4gIC8vIEFuaW1hdGVkIGFjdGl2aXR5IGxpbmUgKGUuZy4sIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCIpXG4gIHByaXZhdGUgYWN0aXZpdHlNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVBocmFzZUluZGV4ID0gMDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgYWN0aXZpdHlTdGFyRnJhbWVzID0gWyfinLMnLCAn4py0JywgJ+KctScsICfinLYnLCAn4py3JywgJ+KcuCddO1xuICAvLyBUb2tlbiBjb3VudCBkdXJpbmcgc3RyZWFtaW5nXG4gIHByaXZhdGUgc3RyZWFtaW5nVG9rZW5zID0gMDtcbiAgLy8gRWxhcHNlZCB0aW1lIGNvbG9yIGFuaW1hdGlvblxuICBwcml2YXRlIGVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGFwc2VkQ29sb3JGcmFtZXMgPSBbJyNGNTlFMEInLCAnI0ZCQkYyNCcsICcjRkNEMzREJywgJyNGREU2OEEnLCAnI0ZDRDM0RCcsICcjRkJCRjI0J107XG4gIC8vIFVzZXItZnJpZW5kbHkgYWN0aXZpdHkgcGhyYXNlcyAoY2xlYW4sIHByb2Zlc3Npb25hbClcbiAgcHJpdmF0ZSByZWFkb25seSBmdW5BY3Rpdml0eVBocmFzZXMgPSBbXG4gICAgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnLCAnQW5hbHl6aW5nJywgJ1dvcmtpbmcnLCAnUHJlcGFyaW5nJyxcbiAgXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgPSA4O1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyA9IDE4MDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGhvdWdodERlZHVwV2luZG93TXMgPSAxNTAwMDtcbiAgcHJpdmF0ZSBsYXN0Q3VyYXRlZFRob3VnaHQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHN0YXR1c01ldGE6IHtcbiAgICBtb2RlbD86IHN0cmluZztcbiAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgd3JpdGVzPzogc3RyaW5nO1xuICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICB9ID0ge307XG4gIHByaXZhdGUgdG9nZ2xlU3RhdGU6IE1vZGVUb2dnbGVTdGF0ZSA9IHtcbiAgICBhdXRvQ29udGludWVFbmFibGVkOiBmYWxzZSxcbiAgICBjcml0aWNhbEFwcHJvdmFsTW9kZTogJ2F1dG8nLFxuICAgIGFscGhhWmVyb0VuYWJsZWQ6IGZhbHNlLCAgLy8gTm9ybWFsIG1vZGUgYnkgZGVmYXVsdCwgdG9nZ2xlIGZvciBBbHBoYVplcm8gZHVhbCB0b3VybmFtZW50IFJMXG4gICAgZGVidWdFbmFibGVkOiBmYWxzZSxcbiAgfTtcblxuICAvKiogUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgZHVhbC1STCBtb2RlIGRpc3BsYXkgKi9cbiAgcHJpdmF0ZSBybFN0YXR1czogUkxBZ2VudFN0YXR1cyA9IHt9O1xuXG4gIC8qKiBTZWN1cmUgVEFPIHRvb2xzIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgKi9cbiAgcHJpdmF0ZSBzZWN1cmVUb29sc1N0YXR1czogU2VjdXJlVG9vbHNTdGF0dXMgPSB7XG4gICAgdG9vbGtpdFJlYWR5OiB0cnVlLFxuICAgIHNhbml0aXphdGlvbkFjdGl2ZTogdHJ1ZSxcbiAgICB0b3RhbEludm9jYXRpb25zOiAwLFxuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIC8qKiBFbnN1cmUgY3Vyc29yIGlzIGFsd2F5cyB3aXRoaW4gdmFsaWQgYm91bmRzIGZvciB0aGUgY3VycmVudCBidWZmZXIgKi9cbiAgcHJpdmF0ZSBjbGFtcEN1cnNvcigpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuY3Vyc29yLCB0aGlzLmJ1ZmZlci5sZW5ndGgpKTtcbiAgfVxuXG4gIC8qKiBTYWZlbHkgYXBwZW5kIHRvIHBhc3RlIGJ1ZmZlciB3aXRoIHNpemUgbGltaXQgZW5mb3JjZW1lbnQgKi9cbiAgcHJpdmF0ZSBhcHBlbmRUb1Bhc3RlQnVmZmVyKGJ1ZmZlcjogJ3Bhc3RlJyB8ICdwbGFpblBhc3RlJywgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdykgcmV0dXJuOyAvLyBBbHJlYWR5IGF0IGxpbWl0XG4gICAgY29uc3QgY3VycmVudCA9IGJ1ZmZlciA9PT0gJ3Bhc3RlJyA/IHRoaXMucGFzdGVCdWZmZXIgOiB0aGlzLnBsYWluUGFzdGVCdWZmZXI7XG4gICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUgLSBjdXJyZW50Lmxlbmd0aDtcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvQWRkID0gdGV4dC5sZW5ndGggPD0gcmVtYWluaW5nID8gdGV4dCA6IHRleHQuc2xpY2UoMCwgcmVtYWluaW5nKTtcbiAgICBpZiAoYnVmZmVyID09PSAncGFzdGUnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfVxuICAgIGlmICh0b0FkZC5sZW5ndGggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogU3RyaXAgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIGFuZCBzcGVjaWFsIGZvcm1hdHRpbmcgZnJvbSB0ZXh0IHRvIGdldCBjbGVhbiBwbGFpbnRleHQgKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVBhc3RlQ29udGVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdGV4dCkgcmV0dXJuICcnO1xuICAgIFxuICAgIC8vIFJlbW92ZSBhbGwgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIChDU0ksIE9TQywgZXRjLilcbiAgICAvLyBJbmNsdWRpbmcgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgKFxceDFiWzIwMH4gYW5kIFxceDFiWzIwMX4pIHdoaWNoIGVuZCB3aXRoIH5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGxldCBzYW5pdGl6ZWQgPSB0ZXh0LnJlcGxhY2UoL1xceDFiXFxbWzAtOTtdKltBLVphLXp+XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gICAgLy8gQWxzbyByZW1vdmUgcGFydGlhbCBicmFja2V0ZWQgcGFzdGUgbWFya2VycyB0aGF0IG1heSBoYXZlIGxlYWtlZCAoZS5nLiwgXCJbMjAwflwiIHdpdGhvdXQgRVNDKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXFsyMFswMV1+L2csICcnKTtcbiAgICAvLyBSZW1vdmUgYW55IHN0cmF5IGVzY2FwZSBjaGFyYWN0ZXIgYXQgc3RhcnQvZW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXlxceDFiK3xcXHgxYiskL2csICcnKTtcblxuICAgIC8vIFN0cmlwIHRvZ2dsZSBzeW1ib2xzIHRoYXQgbWlnaHQgaGF2ZSBsZWFrZWQgdGhyb3VnaFxuICAgIC8vIFRoaXMgaXMgYSBzYWZldHkgbmV0IC0gcHJpbWFyeSByZW1vdmFsIGhhcHBlbnMgaW4gc3RyaXBUb2dnbGVTeW1ib2xzXG4gICAgY29uc3QgaXNUb2dnbGVDaGFyYWN0ZXIgPSAoY2g6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgaWYgKCFjaCB8fCBjaC5sZW5ndGggIT09IDEpIHJldHVybiBmYWxzZTtcbiAgICAgIGNvbnN0IGNvZGUgPSBjaC5jaGFyQ29kZUF0KDApO1xuICAgICAgaWYgKGNvZGUgPT09IDE2OSB8fCBjb2RlID09PSA4NDgyKSByZXR1cm4gdHJ1ZTsgLy8gwqkg4oSiIChPcHRpb24rRylcbiAgICAgIGlmIChjb2RlID09PSAyMjkgfHwgY29kZSA9PT0gMTk3KSByZXR1cm4gdHJ1ZTsgIC8vIMOlIMOFIChPcHRpb24rQSlcbiAgICAgIGlmIChjb2RlID09PSA4NzA2IHx8IGNvZGUgPT09IDg3MTAgfHwgY29kZSA9PT0gMjA2KSByZXR1cm4gdHJ1ZTsgLy8g4oiCIOKIhiDDjiAoT3B0aW9uK0QpXG4gICAgICBpZiAoY29kZSA9PT0gODIyNCB8fCBjb2RlID09PSA4MjI1KSByZXR1cm4gdHJ1ZTsgLy8g4oCgIOKAoSAoT3B0aW9uK1QpXG4gICAgICBpZiAoY29kZSA9PT0gODczMCkgcmV0dXJuIHRydWU7IC8vIOKImiAoT3B0aW9uK1YpXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcbiAgICBcbiAgICBjb25zdCBjaGFycyA9IFsuLi5zYW5pdGl6ZWRdO1xuICAgIGxldCByZXN1bHQgPSAnJztcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaCA9IGNoYXJzW2ldO1xuICAgICAgaWYgKGlzVG9nZ2xlQ2hhcmFjdGVyKGNoKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHJlc3VsdCArPSBjaDtcbiAgICB9XG4gICAgc2FuaXRpemVkID0gcmVzdWx0O1xuXG4gICAgLy8gU3RyaXAgc3BlY2lhbCBmb3JtYXR0aW5nIGNoYXJhY3RlcnMgZm9yIGNsZWFuIHBsYWludGV4dDpcbiAgICAvLyAtIFplcm8td2lkdGggY2hhcmFjdGVycyAoWldTUCwgWldOSiwgWldKLCBCT00vWldOQlNQKVxuICAgIC8vIC0gV29yZCBqb2luZXIsIGludmlzaWJsZSBzZXBhcmF0b3IsIGludmlzaWJsZSB0aW1lcy9wbHVzXG4gICAgLy8gLSBEaXJlY3Rpb25hbCBmb3JtYXR0aW5nIChMUk0sIFJMTSwgTFJFLCBSTEUsIExSTywgUkxPLCBQREYsIExSSSwgUkxJLCBGU0ksIFBESSlcbiAgICAvLyAtIE9iamVjdCByZXBsYWNlbWVudCBjaGFyYWN0ZXJcbiAgICAvLyAtIFNvZnQgaHlwaGVuXG4gICAgLy8gLSBOb24tYnJlYWtpbmcgc3BhY2UgdmFyaWFudHMgKE5CU1AsIG5hcnJvdyBOQlNQLCBmaWd1cmUgc3BhY2UsIGV0Yy4pXG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL1tcXHUyMDBCLVxcdTIwMEZcXHUyMDI4LVxcdTIwMkZcXHUyMDYwLVxcdTIwNkZcXHVGRUZGXFx1MDBBRFxcdUZGRkNdL2csICcnKTtcblxuICAgIC8vIE5vcm1hbGl6ZSB2YXJpb3VzIHNwYWNlIGNoYXJhY3RlcnMgdG8gcmVndWxhciBzcGFjZVxuICAgIC8vIEluY2x1ZGVzOiBOQlNQLCBlbi9lbSBzcGFjZSwgdGhpbiBzcGFjZSwgaGFpciBzcGFjZSwgZmlndXJlIHNwYWNlLCBldGMuXG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL1tcXHUwMEEwXFx1MjAwMC1cXHUyMDBBXFx1MjAyRlxcdTIwNUZcXHUzMDAwXS9nLCAnICcpO1xuXG4gICAgLy8gUmVtb3ZlIGNvbnRyb2wgY2hhcmFjdGVycyBleGNlcHQgdGFiLCBuZXdsaW5lLCBjYXJyaWFnZSByZXR1cm5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3Rl0vZywgJycpO1xuXG4gICAgcmV0dXJuIHNhbml0aXplZDtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0SG90a2V5KGNvbWJvPzogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCFjb21ibz8udHJpbSgpKSByZXR1cm4gbnVsbDtcbiAgICByZXR1cm4gY29tYm8udHJpbSgpLnRvVXBwZXJDYXNlKCk7XG4gIH1cblxuICBwcml2YXRlIGxhc3RQcm9tcHRFdmVudDogeyB0ZXh0OiBzdHJpbmc7IGF0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgcHJvbXB0SGVpZ2h0ID0gMDtcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gIHByaXZhdGUgaW5saW5lUGFuZWw6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IGZhbHNlO1xuICBwcml2YXRlIGlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gIHByaXZhdGUgaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVJZGxlTXMgPSA4MDsgLy8gSW5jcmVhc2VkIGZvciBtb3JlIHJvYnVzdCBtdWx0aS1saW5lIHBhc3RlIGRldGVjdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVXaW5kb3dNcyA9IDEyMDsgLy8gSW5jcmVhc2VkIHdpbmRvdyBmb3IgcGFzdGUgYnVyc3QgZGV0ZWN0aW9uXG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDE2OyAvLyBMb3dlciB0aHJlc2hvbGQgdG8gY2F0Y2ggbXVsdGktbGluZSBwYXN0ZXMgc29vbmVyXG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzID0gMTsgLy8gSW1tZWRpYXRlIGRldGVjdGlvbiBvZiBtdWx0aS1saW5lIGNvbnRlbnRcbiAgLy8gUGFzdGUgYnVmZmVyIGxpbWl0cyB0byBwcmV2ZW50IG1lbW9yeSBleGhhdXN0aW9uXG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4UGFzdGVCdWZmZXJTaXplID0gMTAgKiAxMDI0ICogMTAyNDsgLy8gMTBNQiBtYXggcGFzdGUgc2l6ZVxuICBwcml2YXRlIHBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gVHJhY2sgaWYgcGFzdGUgd2FzIHRydW5jYXRlZFxuICBwcml2YXRlIGN1cnNvclZpc2libGVDb2x1bW4gPSAxO1xuICBwcml2YXRlIGluQnJhY2tldGVkUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIGluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICBwcml2YXRlIHBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBwbGFpblBhc3RlVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gMDtcbiAgcHJpdmF0ZSBwYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgcHJpdmF0ZSBwbGFpblJlY2VudENodW5rczogQXJyYXk8eyB0ZXh0OiBzdHJpbmc7IGF0OiBudW1iZXIgfT4gPSBbXTtcbiAgLy8gUGVuZGluZyBpbnNlcnQgYnVmZmVyOiBob2xkcyBjaGFyYWN0ZXJzIGR1cmluZyBwYXN0ZSBkZXRlY3Rpb24gd2luZG93IHRvIHByZXZlbnQgdmlzdWFsIGxlYWtcbiAgcHJpdmF0ZSBwZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGVuZGluZ0luc2VydFRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IHBlbmRpbmdJbnNlcnREZWxheU1zID0gMTY7IC8vIFJlZHVjZWQgZnJvbSA4MG1zIGZvciBmYXN0ZXIgdHlwaW5nIHJlc3BvbnNlXG4gIC8vIEVtaXQtbGV2ZWwgcGFzdGUgZGV0ZWN0aW9uIC0gYWNjdW11bGF0ZSBhbGwgcmFwaWQgaW5wdXQgdGhlbiBjb21taXRcbiAgcHJpdmF0ZSBlbWl0UGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBlbWl0UGFzdGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBlbWl0UGFzdGVDb21taXRNcyA9IDMwOyAvLyBDb21taXQgYWZ0ZXIgMzBtcyBvZiBubyBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgcHJpdmF0ZSBwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWNyZXRNb2RlID0gZmFsc2U7XG4gIC8vIFJlbmRlciB0aHJvdHRsaW5nIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gIHByaXZhdGUgcGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJUaHJvdHRsZU1zID0gMTY7IC8vIH42MGZwcyBtYXhcbiAgcHJpdmF0ZSByZW5kZXJUaHJvdHRsZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyBQZXJmb3JtYW5jZTogQ2FjaGUgbGFzdCByZW5kZXJlZCBzdGF0ZSB0byBza2lwIHVubmVjZXNzYXJ5IHJlbmRlcnNcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBmb3JjZU5leHRSZW5kZXIgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRDdXJzb3IgPSAwO1xuICBwcml2YXRlIGxhc3RSZW5kZXJlZE1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnID0gJ2lkbGUnO1xuICAvLyBEaXNwb3NhbCBzdGF0ZSB0byBwcmV2ZW50IG9wZXJhdGlvbnMgYWZ0ZXIgY2xlYW51cFxuICBwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG4gIC8vIEluaXRpYWxpemF0aW9uIHN0YXRlIC0gc2tpcCBwcm9tcHQgcmVuZGVycyB1bnRpbCBmaXJzdCBiYW5uZXIgaXMgc2hvd25cbiAgcHJpdmF0ZSBpbml0aWFsaXppbmcgPSB0cnVlO1xuICAvLyBCb3VuZCBldmVudCBoYW5kbGVycyBmb3IgcHJvcGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBib3VuZFJlc2l6ZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kS2V5cHJlc3NIYW5kbGVyOiAoKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBib3VuZERhdGFIYW5kbGVyOiAoKGRhdGE6IEJ1ZmZlcikgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBib3VuZEN0cmxIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgLy8gT3JpZ2luYWwgZW1pdCBtZXRob2QgZm9yIHJlc3RvcmF0aW9uIG9uIGNsZWFudXBcbiAgcHJpdmF0ZSBvcmlnaW5hbEVtaXQ6ICgoLi4uYXJnczogdW5rbm93bltdKSA9PiBib29sZWFuKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0UHJvdGVjdGlvbjogSW5wdXRQcm90ZWN0aW9uIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW5wdXRDYXB0dXJlOlxuICAgIHwge1xuICAgICAgICByZXNvbHZlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgICAgICAgcmVqZWN0PzogKHJlYXNvbj86IHVua25vd24pID0+IHZvaWQ7XG4gICAgICAgIG9wdGlvbnM6IHsgdHJpbTogYm9vbGVhbjsgYWxsb3dFbXB0eTogYm9vbGVhbiB9O1xuICAgICAgfVxuICAgIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gSW50ZXJhY3RpdmUgbWVudSBzdGF0ZSAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gIHByaXZhdGUgbWVudUl0ZW1zOiBNZW51SXRlbVtdID0gW107XG4gIHByaXZhdGUgbWVudUluZGV4ID0gMDtcbiAgcHJpdmF0ZSBtZW51VGl0bGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIG1lbnVDYWxsYmFjazogKChpdGVtOiBNZW51SXRlbSB8IG51bGwpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW0gPSBwcm9jZXNzLnN0ZG91dCxcbiAgICBpbnB1dDogTm9kZUpTLlJlYWRTdHJlYW0gPSBwcm9jZXNzLnN0ZGluLFxuICAgIF9vcHRpb25zPzogVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICAvLyBTZXQgdXAgZXJyb3IgaGFuZGxpbmcgZm9yIEV2ZW50RW1pdHRlclxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgLy8gTG9nIGVycm9ycyBidXQgZG9uJ3QgY3Jhc2hcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tVbmlmaWVkVUlSZW5kZXJlcl0gRXJyb3I6JywgZXJyKTtcbiAgICB9KTtcblxuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICAgIC8vIFJvYnVzdCBUVFkgZGV0ZWN0aW9uIHdpdGggbXVsdGlwbGUgZmFsbGJhY2tzXG4gICAgY29uc3Qgb3V0cHV0SXNUVFkgPSBCb29sZWFuKHRoaXMub3V0cHV0Py5pc1RUWSk7XG4gICAgY29uc3QgaW5wdXRJc1RUWSA9IEJvb2xlYW4odGhpcy5pbnB1dD8uaXNUVFkpO1xuICAgIHRoaXMuaW50ZXJhY3RpdmUgPSBvdXRwdXRJc1RUWSAmJiBpbnB1dElzVFRZO1xuICAgIHRoaXMucGxhaW5Nb2RlID0gaXNQbGFpbk91dHB1dE1vZGUoKSB8fCAhdGhpcy5pbnRlcmFjdGl2ZTtcblxuICAgIC8vIEluaXRpYWxpemUgYW5pbWF0ZWQgY29tcG9uZW50cyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY29udGV4dE1ldGVyID0gbmV3IENvbnRleHRNZXRlcigpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gQ3JlYXRlIGEgbm8tb3AgY29udGV4dCBtZXRlciBpZiBpbml0aWFsaXphdGlvbiBmYWlsc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIgPSBuZXcgQ29udGV4dE1ldGVyKCk7XG4gICAgfVxuXG4gICAgLy8gQ3JlYXRlIHJlYWRsaW5lIGludGVyZmFjZSB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmwgPSByZWFkbGluZS5jcmVhdGVJbnRlcmZhY2Uoe1xuICAgICAgICBpbnB1dDogdGhpcy5pbnB1dCxcbiAgICAgICAgb3V0cHV0OiB0aGlzLm91dHB1dCxcbiAgICAgICAgdGVybWluYWw6IHRydWUsXG4gICAgICAgIHByb21wdDogJycsXG4gICAgICAgIHRhYlNpemU6IDIsXG4gICAgICB9KTtcbiAgICAgIHRoaXMucmwuc2V0UHJvbXB0KCcnKTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIC8vIElmIHJlYWRsaW5lIGNyZWF0aW9uIGZhaWxzLCBjcmVhdGUgYSBtaW5pbWFsIGZhbGxiYWNrXG4gICAgICBjb25zb2xlLmVycm9yKCdbVW5pZmllZFVJUmVuZGVyZXJdIEZhaWxlZCB0byBjcmVhdGUgcmVhZGxpbmUgaW50ZXJmYWNlOicsIGVycik7XG4gICAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgICAgaW5wdXQ6IHByb2Nlc3Muc3RkaW4sXG4gICAgICAgIG91dHB1dDogcHJvY2Vzcy5zdGRvdXQsXG4gICAgICAgIHRlcm1pbmFsOiBmYWxzZSxcbiAgICAgIH0pO1xuICAgICAgdGhpcy5pbnRlcmFjdGl2ZSA9IGZhbHNlO1xuICAgICAgdGhpcy5wbGFpbk1vZGUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICAvLyBJbml0aWFsaXplIGlucHV0IHByb3RlY3Rpb24gYWdhaW5zdCByZW1vdGUgYXR0YWNrc1xuICAgIHRoaXMuaW5wdXRQcm90ZWN0aW9uID0gaW5pdGlhbGl6ZUlucHV0UHJvdGVjdGlvbih7XG4gICAgICB2ZXJib3NlOiBwcm9jZXNzLmVudlsnQUdJX0RFQlVHJ10gPT09ICcxJyxcbiAgICAgIG9uQXR0YWNrRGV0ZWN0ZWQ6ICh0eXBlLCBkZXRhaWxzKSA9PiB7XG4gICAgICAgIC8vIExvZyBhdHRhY2sgYnV0IGRvbid0IGRpc3J1cHQgdXNlciBleHBlcmllbmNlXG4gICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHJ10pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbSW5wdXRQcm90ZWN0aW9uXSBBdHRhY2sgZGV0ZWN0ZWQ6ICR7dHlwZX0gLSAke2RldGFpbHN9YCk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlcnMgc28gd2UgY2FuIHJlbW92ZSB0aGVtIG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgIC8vIFNpbGVudGx5IGlnbm9yZSByZXNpemUgZXJyb3JzXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgLy8gU2FmZWx5IGFkZCByZXNpemUgaGFuZGxlclxuICAgIHRyeSB7XG4gICAgICB0aGlzLm91dHB1dC5vbigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuICAgIH0gY2F0Y2gge1xuICAgICAgLy8gSWdub3JlIGlmIGV2ZW50IGxpc3RlbmVyIGNhbid0IGJlIGFkZGVkXG4gICAgfVxuXG4gICAgdGhpcy5zZXR1cElucHV0SGFuZGxlcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgaW5wdXQgYW5kIHBhc3RlIHN0YXRlIHRvIHByZXZlbnQgc3RhbGUgc3RhdGUgZnJvbSBwcmV2aW91cyBzZXNzaW9uXG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gSWYgYW4gb3ZlcmxheSB3YXMgYWxyZWFkeSByZW5kZXJlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gKGUuZy4sIGJhbm5lciBlbWl0dGVkIGVhcmx5KSxcbiAgICAgIC8vIGNsZWFyIGl0IHNvIGluaXRpYWxpemUoKSBkb2Vzbid0IHN0YWNrIGEgc2Vjb25kIGNvbnRyb2wgYmFyIGluIHNjcm9sbGJhY2suXG4gICAgICBpZiAodGhpcy5oYXNSZW5kZXJlZFByb21wdCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQbGFpbiBtb2RlOiBtaW5pbWFsIHNldHVwLCBzdGlsbCByZW5kZXIgYSBzaW1wbGUgcHJvbXB0IGxpbmVcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkIGZpcnN0IHRvIHByZXZlbnQgYW55IHBlbmRpbmcgb3BlcmF0aW9uc1xuICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuXG4gICAgLy8gV3JhcCBhbGwgY2xlYW51cCBpbiB0cnktY2F0Y2ggdG8gZW5zdXJlIGdyYWNlZnVsIHNodXRkb3duXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignUmVuZGVyZXIgZGlzcG9zZWQnKSk7XG4gICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgLy8gQ2xlYXIgcmVuZGVyIHRocm90dGxlIHRpbWVyXG4gICAgaWYgKHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lcik7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU3RvcCBhbnkgcnVubmluZyBhbmltYXRpb25zIHdpdGggZXJyb3IgaGFuZGxpbmdcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RyZWFtaW5nU3Bpbm5lcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyLnN0b3AoKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy50aGlua2luZ0luZGljYXRvcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvci5zdG9wKCk7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3IgPSBudWxsO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICB0aGlzLmNvbnRleHRNZXRlci5kaXNwb3NlKCk7XG4gICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICB0cnkge1xuICAgICAgZGlzcG9zZUFuaW1hdGlvbnMoKTtcbiAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cblxuICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICBpZiAodGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMub3V0cHV0LnJlbW92ZUxpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5pbnB1dC5yZW1vdmVMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm91bmREYXRhSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5pbnB1dC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHRoaXMuYm91bmREYXRhSGFuZGxlcik7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMuYm91bmREYXRhSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm91bmRDdHJsSGFuZGxlcikge1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5pbnB1dC5yZW1vdmVMaXN0ZW5lcignZGF0YScsIHRoaXMuYm91bmRDdHJsSGFuZGxlcik7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMuYm91bmRDdHJsSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVzdG9yZSBvcmlnaW5hbCBlbWl0IG1ldGhvZCBvbiBzdGRpblxuICAgIGlmICh0aGlzLm9yaWdpbmFsRW1pdCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgKHRoaXMuaW5wdXQgYXMgYW55KS5lbWl0ID0gdGhpcy5vcmlnaW5hbEVtaXQ7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMub3JpZ2luYWxFbWl0ID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIEV2ZW50RW1pdHRlciBsaXN0ZW5lcnMgZnJvbSB0aGlzIGluc3RhbmNlXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG4gICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBzbyBpdCBkb2Vzbid0IHJlbWFpbiBpbiBzY3JvbGxiYWNrIGhpc3RvcnlcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICAgIHRoaXMud3JpdGUoRVNDLkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBpZiAodGhpcy5pbnB1dC5pc1RUWSkge1xuICAgICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUoZmFsc2UpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cblxuICAgIHRoaXMubGFzdE92ZXJsYXkgPSBudWxsO1xuXG4gICAgLy8gQ2xlYXIgZXZlbnQgcXVldWVcbiAgICB0aGlzLmV2ZW50UXVldWUgPSBbXTtcbiAgfVxuXG4gIHN1c3BlbmRQcm9tcHRSZW5kZXJpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSB0cnVlO1xuICB9XG5cbiAgcmVzdW1lUHJvbXB0UmVuZGVyaW5nKHJlbmRlcjogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgICBpZiAocmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBJbnB1dCBoYW5kbGluZyAtLS0tLS0tLS0tLS1cblxuICAvLyBUcmFjayBzcGVjaWFsIGtleXMgaW50ZXJjZXB0ZWQgYXQgdGhlIHJhdyBkYXRhIGxldmVsXG4gIHByaXZhdGUgaW50ZXJjZXB0ZWRUb2dnbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGludGVyY2VwdGVkQ3RybEMgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpbnRlcmNlcHRlZEN0cmxEID0gZmFsc2U7XG4gIHByaXZhdGUgcGVuZGluZ1RvZ2dsZVNraXBzID0gMDtcblxuICBwcml2YXRlIHNldHVwSW5wdXRIYW5kbGVycygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ybC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2xpbmUnKTtcblxuICAgIC8vIENSSVRJQ0FMOiBPdmVycmlkZSB0aGUgZW1pdCBtZXRob2Qgb24gc3RkaW4gdG8gaW50ZXJjZXB0IGRhdGEgZXZlbnRzXG4gICAgLy8gQkVGT1JFIGFueSBsaXN0ZW5lciAoaW5jbHVkaW5nIHJlYWRsaW5lKSBzZWVzIHRoZW0uIFRoaXMgaXMgdGhlIE9OTFlcbiAgICAvLyB3YXkgdG8gdHJ1bHkgcHJldmVudCBjb250cm9sIGNoYXJhY3RlcnMgZnJvbSBiZWluZyBlY2hvZWQuXG4gICAgY29uc3Qgc2VsZiA9IHRoaXM7XG4gICAgdGhpcy5vcmlnaW5hbEVtaXQgPSB0aGlzLmlucHV0LmVtaXQuYmluZCh0aGlzLmlucHV0KTtcblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgKHRoaXMuaW5wdXQgYXMgYW55KS5lbWl0ID0gZnVuY3Rpb24oZXZlbnQ6IHN0cmluZywgLi4uYXJnczogdW5rbm93bltdKTogYm9vbGVhbiB7XG4gICAgICBpZiAoZXZlbnQgPT09ICdkYXRhJyAmJiAhc2VsZi5kaXNwb3NlZCkge1xuICAgICAgICBjb25zdCBkYXRhID0gYXJnc1swXTtcbiAgICAgICAgY29uc3Qgc3RyID0gQnVmZmVyLmlzQnVmZmVyKGRhdGEpID8gZGF0YS50b1N0cmluZygndXRmOCcpIDogU3RyaW5nKGRhdGEgfHwgJycpO1xuICAgICAgICBjb25zdCBjb2RlID0gc3RyID8gc3RyLmNoYXJDb2RlQXQoMCkgOiAwO1xuXG4gICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIEVNSVQgSU5URVJDRVBUOiBldmVudD1cIiR7ZXZlbnR9XCIgc3RyPVwiJHtzdHJ9XCIgY29kZT0ke2NvZGV9IGxlbj0ke3N0ci5sZW5ndGh9YCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCTE9DSzogQ3RybCtDIChjb2RlIDMpIC0gaGFuZGxlIGFuZCBzdXBwcmVzc1xuICAgICAgICBpZiAoY29kZSA9PT0gMykge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gQ1RSTCtDIEJMT0NLRUQgQVQgRU1JVCBMRVZFTGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBVc2Ugc2V0SW1tZWRpYXRlIHRvIGhhbmRsZSBhZnRlciB0aGlzIGV2ZW50IGxvb3AgdGlja1xuICAgICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiBzZWxmLmhhbmRsZUN0cmxDKCkpO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBTdXBwcmVzcyB0aGUgZXZlbnRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJMT0NLOiBDdHJsK0QgKGNvZGUgNCkgLSBoYW5kbGUgYW5kIHN1cHByZXNzXG4gICAgICAgIGlmIChjb2RlID09PSA0KSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBDVFJMK0QgQkxPQ0tFRCBBVCBFTUlUIExFVkVMYCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHNldEltbWVkaWF0ZSgoKSA9PiBzZWxmLmhhbmRsZUN0cmxEKCkpO1xuICAgICAgICAgIHJldHVybiB0cnVlOyAvLyBTdXBwcmVzcyB0aGUgZXZlbnRcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEJMT0NLOiBEaXJlY3Qgc2luZ2xlLWNoYXIgdG9nZ2xlIGRldGVjdGlvbiAobW9zdCBjb21tb24gY2FzZSlcbiAgICAgICAgLy8gQ2hlY2sgdGhlIGZpcnN0IGNoYXIgY29kZSBkaXJlY3RseSBmb3Igc3BlZWQgYW5kIHJlbGlhYmlsaXR5XG4gICAgICAgIGxldCBkaXJlY3RUb2dnbGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gICAgICAgIGlmIChzdHIubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgaWYgKGNvZGUgPT09IDE2OSB8fCBjb2RlID09PSA4NDgyKSBkaXJlY3RUb2dnbGUgPSAnZyc7IC8vIMKpIOKEolxuICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPT09IDIyOSB8fCBjb2RlID09PSAxOTcpIGRpcmVjdFRvZ2dsZSA9ICdhJzsgLy8gw6Ugw4VcbiAgICAgICAgICBlbHNlIGlmIChjb2RlID09PSA4NzA2IHx8IGNvZGUgPT09IDg3MTAgfHwgY29kZSA9PT0gMjA2KSBkaXJlY3RUb2dnbGUgPSAnZCc7IC8vIOKIgiDiiIYgw45cbiAgICAgICAgICBlbHNlIGlmIChjb2RlID09PSA4MjI0IHx8IGNvZGUgPT09IDgyMjUpIGRpcmVjdFRvZ2dsZSA9ICd0JzsgLy8g4oCgIOKAoVxuICAgICAgICAgIGVsc2UgaWYgKGNvZGUgPT09IDg3MzApIGRpcmVjdFRvZ2dsZSA9ICd2JzsgLy8g4oiaXG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxzbyBjaGVjayBFU0MrbGV0dGVyICgyLWNoYXIgc2VxdWVuY2UpXG4gICAgICAgIGlmICghZGlyZWN0VG9nZ2xlICYmIGNvZGUgPT09IDI3ICYmIHN0ci5sZW5ndGggPT09IDIpIHtcbiAgICAgICAgICBjb25zdCBsZXR0ZXIgPSBzdHIuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKFsnZycsICdhJywgJ2QnLCAndCcsICd2J10uaW5jbHVkZXMobGV0dGVyKSkge1xuICAgICAgICAgICAgZGlyZWN0VG9nZ2xlID0gbGV0dGVyO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChkaXJlY3RUb2dnbGUpIHtcbiAgICAgICAgICAvLyBIYW5kbGUgaW1tZWRpYXRlbHkgKG5vdCBpbiBzZXRJbW1lZGlhdGUgdG8gZW5zdXJlIGl0IHJ1bnMpXG4gICAgICAgICAgc2VsZi5oYW5kbGVUb2dnbGUoZGlyZWN0VG9nZ2xlKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU3VwcHJlc3MgdGhlIGV2ZW50XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCTE9DSzogTXVsdGktY2hhciB0b2dnbGUgZGV0ZWN0aW9uIChmb3IgcGFzdGUgc2NlbmFyaW9zKVxuICAgICAgICBjb25zdCB0b2dnbGVzID0gc2VsZi5leHRyYWN0VG9nZ2xlTGV0dGVycyhzdHIpO1xuICAgICAgICBpZiAodG9nZ2xlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBUT0dHTEUgTVVMVEkgREVURUNUOiAke3RvZ2dsZXMuam9pbignLCcpfWApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGNvbnN0IGxldHRlciBvZiB0b2dnbGVzKSB7XG4gICAgICAgICAgICBzZWxmLmhhbmRsZVRvZ2dsZShsZXR0ZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU3VwcHJlc3MgdGhlIGV2ZW50XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQQVNURSBERVRFQ1RJT04gYXQgZW1pdCBsZXZlbDogTXVsdGktY2hhciBkYXRhID0gcGFzdGVcbiAgICAgICAgLy8gV2hlbiB1c2VyIHR5cGVzLCBlYWNoIGNoYXJhY3RlciBhcnJpdmVzIHNlcGFyYXRlbHlcbiAgICAgICAgLy8gV2hlbiB1c2VyIHBhc3RlcywgYWxsIGNoYXJhY3RlcnMgYXJyaXZlIGFzIG9uZSBjaHVuayBPUiByYXBpZGx5XG4gICAgICAgIC8vIENoZWNrIGZvciBicmFja2V0ZWQgcGFzdGUgbWFya2VycyBmaXJzdFxuICAgICAgICBjb25zdCBwYXN0ZVN0YXJ0TWFya2VyID0gJ1xceDFiWzIwMH4nO1xuICAgICAgICBjb25zdCBwYXN0ZUVuZE1hcmtlciA9ICdcXHgxYlsyMDF+JztcbiAgICAgICAgY29uc3QgaGFzQnJhY2tldGVkU3RhcnQgPSBzdHIuaW5jbHVkZXMocGFzdGVTdGFydE1hcmtlcik7XG4gICAgICAgIGNvbnN0IGhhc0JyYWNrZXRlZEVuZCA9IHN0ci5pbmNsdWRlcyhwYXN0ZUVuZE1hcmtlcik7XG5cbiAgICAgICAgLy8gSGFuZGxlIGJyYWNrZXRlZCBwYXN0ZSAodGVybWluYWwgc2VuZHMgbWFya2VycylcbiAgICAgICAgaWYgKGhhc0JyYWNrZXRlZFN0YXJ0IHx8IGhhc0JyYWNrZXRlZEVuZCB8fCBzZWxmLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgICAgICAvLyBMZXQgdGhlIHJlZ3VsYXIgYnJhY2tldGVkIHBhc3RlIGhhbmRsZXIgZGVhbCB3aXRoIGl0XG4gICAgICAgICAgLy8gRmFsbCB0aHJvdWdoIHRvIHJlYWRsaW5lXG4gICAgICAgIH1cbiAgICAgICAgLy8gRGV0ZWN0IHBsYWluIHBhc3RlOiBtdWx0aS1jaGFyLCBoYXMgcHJpbnRhYmxlIGNvbnRlbnQsIG5vdCBlc2NhcGUgc2VxdWVuY2VcbiAgICAgICAgLy8gVGhpcyBpcyBoYW5kbGVkIGJ5IHRoZSBidWZmZXIgbG9naWMgYmVsb3csIHNvIHdlIGNhbiByZW1vdmUgdGhpcyBzcGVjaWFsIGNhc2VcbiAgICAgICAgLy8gVGhlIGJ1ZmZlciBsb2dpYyBhdCB0aGUgYm90dG9tIGhhbmRsZXMgYm90aCBzaW5nbGUtY2hhciBhbmQgbXVsdGktY2hhclxuICAgICAgICAvLyBCdWZmZXIgQUxMIGlucHV0IChpbmNsdWRpbmcgbXVsdGktY2hhciBjaHVua3MpIGFuZCBjb21taXQgYWZ0ZXIgaWRsZVxuICAgICAgICAvLyBUaGlzIGNhdGNoZXMgcGFzdGUgd2hldGhlciB0ZXJtaW5hbCBzZW5kcyBpdCBhcyBvbmUgY2h1bmsgb3IgY2hhci1ieS1jaGFyXG4gICAgICAgIGNvbnN0IGlzUHJpbnRhYmxlID0gKGM6IG51bWJlcikgPT4gKGMgPj0gMzIgJiYgYyA8IDEyNykgfHwgYyA+IDEyNzsgLy8gQVNDSUkgcHJpbnRhYmxlIG9yIFVuaWNvZGVcbiAgICAgICAgY29uc3QgaXNOZXdsaW5lID0gKGM6IG51bWJlcikgPT4gYyA9PT0gMTAgfHwgYyA9PT0gMTM7XG4gICAgICAgIGNvbnN0IGluUGFzdGVCdXJzdCA9IHNlbGYuZW1pdFBhc3RlQnVmZmVyLmxlbmd0aCA+IDA7XG5cbiAgICAgICAgLy8gUEFTVEUgREVURUNUSU9OOiBPbmx5IGJ1ZmZlciB3aGVuIHdlIGRldGVjdCBwYXN0ZS1saWtlIGlucHV0XG4gICAgICAgIC8vIC0gTXVsdGktY2hhciBzdHJpbmcgKGRlZmluaXRlbHkgcGFzdGUgLSB0ZXJtaW5hbCBzZW50IGNodW5rKVxuICAgICAgICAvLyAtIENvbnRpbnVhdGlvbiBvZiBleGlzdGluZyBwYXN0ZSBidXJzdFxuICAgICAgICAvLyBGb3Igc2luZ2xlIGNoYXJzLCBsZXQgdGhlbSB0aHJvdWdoIGltbWVkaWF0ZWx5IGZvciByZXNwb25zaXZlIHR5cGluZ1xuICAgICAgICBsZXQgc2hvdWxkQnVmZmVyID0gZmFsc2U7XG5cbiAgICAgICAgLy8gTXVsdGktY2hhciBub24tZXNjYXBlID0gZGVmaW5pdGVseSBwYXN0ZVxuICAgICAgICBpZiAoc3RyLmxlbmd0aCA+IDEgJiYgIXN0ci5zdGFydHNXaXRoKCdcXHgxYicpKSB7XG4gICAgICAgICAgc2hvdWxkQnVmZmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBDb250aW51ZSBidWZmZXJpbmcgaWYgd2UncmUgYWxyZWFkeSBpbiBhIHBhc3RlIGJ1cnN0XG4gICAgICAgIGVsc2UgaWYgKGluUGFzdGVCdXJzdCAmJiBzdHIubGVuZ3RoID09PSAxICYmIChpc1ByaW50YWJsZShjb2RlKSB8fCBpc05ld2xpbmUoY29kZSkpKSB7XG4gICAgICAgICAgc2hvdWxkQnVmZmVyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzaG91bGRCdWZmZXIpIHtcbiAgICAgICAgICAvLyBBZGQgdG8gYnVmZmVyIChzdHJpcCBhbnkgdG9nZ2xlIHN5bWJvbHMgdGhhdCBtaWdodCBoYXZlIHNsaXBwZWQgdGhyb3VnaClcbiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gc2VsZi5zdHJpcFRvZ2dsZVN5bWJvbHMoc3RyKTtcbiAgICAgICAgICBpZiAoIWNsZWFuZWQpIHJldHVybiB0cnVlOyAvLyBXYXMgb25seSB0b2dnbGUgY2hhcnNcbiAgICAgICAgICBzZWxmLmVtaXRQYXN0ZUJ1ZmZlciArPSBjbGVhbmVkO1xuXG4gICAgICAgICAgLy8gQ2xlYXIgZXhpc3RpbmcgdGltZXJcbiAgICAgICAgICBpZiAoc2VsZi5lbWl0UGFzdGVUaW1lcikge1xuICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHNlbGYuZW1pdFBhc3RlVGltZXIpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNldCB0aW1lciB0byBjb21taXQgYWZ0ZXIgaWRsZVxuICAgICAgICAgIHNlbGYuZW1pdFBhc3RlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICAgIHNlbGYuY29tbWl0RW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICAgICAgfSwgc2VsZi5lbWl0UGFzdGVDb21taXRNcyk7XG5cbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU3VwcHJlc3MgLSB3ZSdyZSBidWZmZXJpbmdcbiAgICAgICAgfVxuICAgICAgICAvLyBTaW5nbGUgY2hhciB3aGVuIE5PVCBpbiBwYXN0ZSBidXJzdCA9IG5vcm1hbCB0eXBpbmcsIGxldCB0aHJvdWdoXG4gICAgICAgIC8vIE5ld2xpbmUgd2hlbiBub3QgaW4gYnVyc3QgPSBFbnRlciBrZXksIGxldCB0aHJvdWdoXG5cbiAgICAgICAgLy8gTk9URTogRG8gTk9UIGJsb2NrIG90aGVyIGNvbnRyb2wgY2hhcmFjdGVycyBoZXJlIVxuICAgICAgICAvLyBCYWNrc3BhY2UgKDgvMTI3KSwgVGFiICg5KSwgRW50ZXIgKDEzKSwgYXJyb3dzICgyNytzZXEpIG11c3QgcGFzcyB0aHJvdWdoXG4gICAgICAgIC8vIGZvciBub3JtYWwgZWRpdGluZyB0byB3b3JrLiBPbmx5IEN0cmwrQy9EIGFuZCB0b2dnbGVzIGFyZSBpbnRlcmNlcHRlZCBhYm92ZS5cbiAgICAgIH1cblxuICAgICAgLy8gQWxsb3cgYWxsIG90aGVyIGV2ZW50cyB0byBwYXNzIHRocm91Z2hcbiAgICAgIHJldHVybiBzZWxmLm9yaWdpbmFsRW1pdCEoZXZlbnQsIC4uLmFyZ3MpO1xuICAgIH07XG5cbiAgICAvLyBOb3cgc2V0IHVwIHJlYWRsaW5lJ3Mga2V5cHJlc3MgZW1pc3Npb25cbiAgICByZWFkbGluZS5lbWl0S2V5cHJlc3NFdmVudHModGhpcy5pbnB1dCwgdGhpcy5ybCk7XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZSh0cnVlKTtcbiAgICB9XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5cHJlc3Moc3RyLCBrZXkpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5pbnB1dC5vbigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZXRlY3QgdG9nZ2xlIGNoYXJhY3RlcnMgZnJvbSByYXcgaW5wdXQgZGF0YSBiZWZvcmUgcmVhZGxpbmUgcHJvY2Vzc2luZy5cbiAgICogUmV0dXJucyB0aGUgdG9nZ2xlIGxldHRlciAoZywgYSwgZCwgdCwgdikgb3IgbnVsbCBpZiBub3QgYSB0b2dnbGUuXG4gICAqL1xuICBwcml2YXRlIGRldGVjdFRvZ2dsZUZyb21SYXdEYXRhKGlucHV0OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWlucHV0KSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdCgwKTtcblxuICAgIC8vIFVuaWNvZGUgY2hhcmFjdGVycyBmcm9tIFwiT3B0aW9uIHNlbmRzIFVuaWNvZGVcIiBtb2RlXG4gICAgaWYgKGNvZGUgPT09IDE2OSB8fCBjb2RlID09PSA4NDgyKSByZXR1cm4gJ2cnOyAvLyDCqSDihKJcbiAgICBpZiAoY29kZSA9PT0gMjI5IHx8IGNvZGUgPT09IDE5NykgcmV0dXJuICdhJzsgIC8vIMOlIMOFXG4gICAgaWYgKGNvZGUgPT09IDg3MDYgfHwgY29kZSA9PT0gODcxMCB8fCBjb2RlID09PSAyMDYpIHJldHVybiAnZCc7IC8vIOKIgiDiiIYgw45cbiAgICBpZiAoY29kZSA9PT0gODIyNCB8fCBjb2RlID09PSA4MjI1KSByZXR1cm4gJ3QnOyAvLyDigKAg4oChXG4gICAgaWYgKGNvZGUgPT09IDg3MzApIHJldHVybiAndic7IC8vIOKImlxuXG4gICAgLy8gRVNDICsgbGV0dGVyIGZyb20gXCJPcHRpb24gc2VuZHMgTWV0YVwiIG1vZGVcbiAgICBpZiAoY29kZSA9PT0gMjcgJiYgaW5wdXQubGVuZ3RoID09PSAyKSB7XG4gICAgICBjb25zdCBsZXR0ZXIgPSBpbnB1dC5jaGFyQXQoMSkudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChbJ2cnLCAnYScsICdkJywgJ3QnLCAndiddLmluY2x1ZGVzKGxldHRlcikpIHJldHVybiBsZXR0ZXI7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBhbGwgdG9nZ2xlIGxldHRlcnMgZnJvbSBhbiBhcmJpdHJhcnkgY2h1bmsgb2YgaW5wdXQgZGF0YS5cbiAgICogSGFuZGxlcyBib3RoIFVuaWNvZGUgdG9nZ2xlcyBhbmQgRVNDLXByZWZpeGVkIE1ldGEgc2VxdWVuY2VzLCBhbmRcbiAgICogc3VwcG9ydHMgbXVsdGlwbGUgdG9nZ2xlcyBpbiBhIHNpbmdsZSBkYXRhIGV2ZW50LlxuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9nZ2xlTGV0dGVycyhpbnB1dDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGlmICghaW5wdXQpIHJldHVybiBbXTtcbiAgICBjb25zdCB0b2dnbGVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGNoYXJzID0gWy4uLmlucHV0XTtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoID0gY2hhcnNbaV07XG4gICAgICBjb25zdCBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICAgICAgLy8gRGV0ZWN0IEVTQyArIGxldHRlciAoT3B0aW9uIHNlbmRzIE1ldGEpXG4gICAgICBpZiAoY29kZSA9PT0gMjcgJiYgaSArIDEgPCBjaGFycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgbGV0dGVyID0gY2hhcnNbaSArIDFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChbJ2cnLCAnYScsICdkJywgJ3QnLCAndiddLmluY2x1ZGVzKGxldHRlcikpIHtcbiAgICAgICAgICB0b2dnbGVzLnB1c2gobGV0dGVyKTtcbiAgICAgICAgICBpKys7IC8vIFNraXAgdGhlIG1ldGEgbGV0dGVyIHNvIGl0IGlzbid0IGRvdWJsZS1jb3VudGVkXG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgY29uc3QgZGV0ZWN0ZWQgPSB0aGlzLmRldGVjdFRvZ2dsZUZyb21SYXdEYXRhKGNoKTtcbiAgICAgIGlmIChkZXRlY3RlZCkge1xuICAgICAgICB0b2dnbGVzLnB1c2goZGV0ZWN0ZWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0b2dnbGVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZSB0b2dnbGUgc3ltYm9scyAoYW5kIHRoZWlyIEVTQyBwcmVmaXhlcykgZnJvbSBhIHN0cmluZyBzbyB0aGV5XG4gICAqIGNhbiBuZXZlciBsZWFrIGludG8gdGhlIHByb21wdCBidWZmZXIuXG4gICAqL1xuICBwcml2YXRlIHN0cmlwVG9nZ2xlU3ltYm9scyhpbnB1dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWlucHV0KSByZXR1cm4gJyc7XG4gICAgY29uc3QgY2hhcnMgPSBbLi4uaW5wdXRdO1xuICAgIGxldCByZXN1bHQgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2hhcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNoID0gY2hhcnNbaV07XG4gICAgICBjb25zdCBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcblxuICAgICAgLy8gRHJvcCBVbmljb2RlIHRvZ2dsZSBjaGFyYWN0ZXJzIG91dHJpZ2h0XG4gICAgICBpZiAodGhpcy5pc1RvZ2dsZUNoYXJhY3RlcihjaCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIERyb3AgRVNDICsgdG9nZ2xlIGxldHRlciAoT3B0aW9uIHNlbmRzIE1ldGEpXG4gICAgICAvLyBBbHNvIGhhbmRsZSBjYXNlIHdoZXJlIEVTQyBtaWdodCBiZSBmb2xsb3dlZCBieSBbIChDU0kgc2VxdWVuY2Ugc3RhcnQpXG4gICAgICBpZiAoY29kZSA9PT0gMjcpIHtcbiAgICAgICAgaWYgKGkgKyAxIDwgY2hhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgY29uc3QgbGV0dGVyID0gY2hhcnNbaSArIDFdLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgICAgaWYgKFsnZycsICdhJywgJ2QnLCAndCcsICd2J10uaW5jbHVkZXMobGV0dGVyKSkge1xuICAgICAgICAgICAgaSsrOyAvLyBTa2lwIHRoZSBtZXRhIGxldHRlciBhcyB3ZWxsXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gQWxzbyBkcm9wIEVTQyArICdbJyAoQ1NJIHNlcXVlbmNlIHN0YXJ0KSB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlIHNlcXVlbmNlc1xuICAgICAgICAgIGlmIChjaGFyc1tpICsgMV0gPT09ICdbJykge1xuICAgICAgICAgICAgaSsrOyAvLyBTa2lwIHRoZSAnWycgYXMgd2VsbFxuICAgICAgICAgICAgLy8gU2tpcCBhbnkgZGlnaXRzLCBzZW1pY29sb25zLCBhbmQgdGhlIGZpbmFsIGNoYXJhY3RlclxuICAgICAgICAgICAgd2hpbGUgKGkgKyAxIDwgY2hhcnMubGVuZ3RoICYmIC9bMC05O10vLnRlc3QoY2hhcnNbaSArIDFdKSkge1xuICAgICAgICAgICAgICBpKys7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoaSArIDEgPCBjaGFycy5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgaSsrOyAvLyBTa2lwIHRoZSBmaW5hbCBjaGFyYWN0ZXIgKEEtWiwgYS16LCB+LCBldGMuKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIHJlc3VsdCArPSBjaDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgY2hhcmFjdGVyIGlzIGEgdG9nZ2xlIGNoYXJhY3RlciB0aGF0IHNob3VsZCBuZXZlciBiZSBpbnNlcnRlZC5cbiAgICogVXNlZCBhcyBhIHNhZmV0eSBndWFyZCB0byBwcmV2ZW50IHRvZ2dsZSBzeW1ib2xzIGZyb20gYXBwZWFyaW5nIGluIGlucHV0LlxuICAgKi9cbiAgcHJpdmF0ZSBpc1RvZ2dsZUNoYXJhY3RlcihpbnB1dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFpbnB1dCB8fCBpbnB1dC5sZW5ndGggIT09IDEpIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBjb2RlID0gaW5wdXQuY2hhckNvZGVBdCgwKTtcbiAgICAvLyBVbmljb2RlIHRvZ2dsZSBjaGFyYWN0ZXJzXG4gICAgaWYgKGNvZGUgPT09IDE2OSB8fCBjb2RlID09PSA4NDgyKSByZXR1cm4gdHJ1ZTsgLy8gwqkg4oSiIChPcHRpb24rRylcbiAgICBpZiAoY29kZSA9PT0gMjI5IHx8IGNvZGUgPT09IDE5NykgcmV0dXJuIHRydWU7ICAvLyDDpSDDhSAoT3B0aW9uK0EpXG4gICAgaWYgKGNvZGUgPT09IDg3MDYgfHwgY29kZSA9PT0gODcxMCB8fCBjb2RlID09PSAyMDYpIHJldHVybiB0cnVlOyAvLyDiiIIg4oiGIMOOIChPcHRpb24rRClcbiAgICBpZiAoY29kZSA9PT0gODIyNCB8fCBjb2RlID09PSA4MjI1KSByZXR1cm4gdHJ1ZTsgLy8g4oCgIOKAoSAoT3B0aW9uK1QpXG4gICAgaWYgKGNvZGUgPT09IDg3MzApIHJldHVybiB0cnVlOyAvLyDiiJogKE9wdGlvbitWKVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgYSBkZXRlY3RlZCB0b2dnbGUgYWN0aW9uLiBDYWxsZWQgZnJvbSBib3RoIHJhdyBkYXRhIGludGVyY2VwdGlvblxuICAgKiBhbmQga2V5cHJlc3MgcHJvY2Vzc2luZyBmb3IgcmVsaWFiaWxpdHkuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZVRvZ2dsZShsZXR0ZXI6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIGluc2VydCBidWZmZXIgc28gdGhlIHN5bWJvbCBuZXZlciBsYW5kcyBpbiB0aGUgcHJvbXB0XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgLy8gQ2FuY2VsIGFueSBwbGFpbiBwYXN0ZSBkZXRlY3Rpb24gaW4gcHJvZ3Jlc3NcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG5cbiAgICAvLyBGb3JjZSBpbW1lZGlhdGUgcmVuZGVyIGZvciB0b2dnbGVzIC0gd29ya3MgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGNvbnN0IGZvcmNlUmVuZGVyID0gKCkgPT4ge1xuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gVE9HR0xFIEhBTkRMSU5HOiAke2xldHRlcn1gKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGxldHRlcikge1xuICAgICAgY2FzZSAnYSc6XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICAgIGZvcmNlUmVuZGVyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZyc6XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgICAgZm9yY2VSZW5kZXIoKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkJzpcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYWxwaGF6ZXJvJyk7XG4gICAgICAgIGZvcmNlUmVuZGVyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndCc6XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLXRoaW5raW5nJyk7XG4gICAgICAgIGZvcmNlUmVuZGVyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndic6XG4gICAgICAgIC8vIE9wdGlvbitWOiBBdmFpbGFibGUgZm9yIGZ1dHVyZSB0b2dnbGVcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBDdHJsK0MgZGV0ZWN0ZWQgYXQgcmF3IGRhdGEgbGV2ZWwuXG4gICAqIEJ5cGFzc2VzIHJlYWRsaW5lJ3Mga2V5cHJlc3MgcGFyc2luZyBmb3IgcmVsaWFiaWxpdHkuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUN0cmxDKCk6IHZvaWQge1xuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gSEFORExJTkcgQ1RSTCtDYCk7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gaW5wdXQgY2FwdHVyZSBtb2RlLCBjYW5jZWwgaXQgZmlyc3RcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtDIGJlaGF2aW9yOlxuICAgIC8vIDEuIElmIGJ1ZmZlciBoYXMgdGV4dDogY2xlYXIgaXQgZmlyc3QsIHRoZW4gbm90aWZ5IHNoZWxsXG4gICAgLy8gMi4gSWYgYnVmZmVyIGlzIGVtcHR5OiBsZXQgc2hlbGwgZGVjaWRlIHRvIHBhdXNlIEFJIG9yIHF1aXRcbiAgICBjb25zdCBoYWRCdWZmZXIgPSB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgIGlmIChoYWRCdWZmZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIC8vIEVtaXQgY3RybGMgZXZlbnQgd2l0aCBidWZmZXIgc3RhdGUgc28gc2hlbGwgY2FuIGhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgdGhpcy5lbWl0KCdjdHJsYycsIHsgaGFkQnVmZmVyIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEhhbmRsZSBDdHJsK0QgZGV0ZWN0ZWQgYXQgcmF3IGRhdGEgbGV2ZWwuXG4gICAqIEJ5cGFzc2VzIHJlYWRsaW5lJ3Mga2V5cHJlc3MgcGFyc2luZyBmb3IgcmVsaWFiaWxpdHkuXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUN0cmxEKCk6IHZvaWQge1xuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gSEFORExJTkcgQ1RSTCtEYCk7XG4gICAgfVxuXG4gICAgLy8gSWYgd2UncmUgaW4gaW5wdXQgY2FwdHVyZSBtb2RlLCBjYW5jZWwgaXQgZmlyc3RcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtEOiBpbnRlcnJ1cHQgaWYgYnVmZmVyIGlzIGVtcHR5XG4gICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5lbWl0KCdpbnRlcnJ1cHQnKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IGJ1ZmZlcmVkIGVtaXQtbGV2ZWwgaW5wdXQgYWZ0ZXIgaWRsZSBwZXJpb2QuXG4gICAqIERlY2lkZXMgd2hldGhlciB0byB0cmVhdCBhcyBwYXN0ZSAoY29sbGFwc2UpIG9yIG5vcm1hbCB0eXBpbmcgKGluc2VydCkuXG4gICAqL1xuICBwcml2YXRlIGNvbW1pdEVtaXRQYXN0ZUJ1ZmZlcigpOiB2b2lkIHtcbiAgICBjb25zdCBjb250ZW50ID0gdGhpcy5lbWl0UGFzdGVCdWZmZXI7XG4gICAgdGhpcy5lbWl0UGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLmVtaXRQYXN0ZVRpbWVyID0gbnVsbDtcblxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuXG4gICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBDT01NSVQgRU1JVCBCVUZGRVI6ICR7Y29udGVudC5sZW5ndGh9IGNoYXJzYCk7XG4gICAgfVxuXG4gICAgLy8gU2FuaXRpemUgY29udGVudFxuICAgIGxldCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KGNvbnRlbnQpO1xuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcblxuICAgIC8vIElucHV0IHByb3RlY3Rpb24gdmFsaWRhdGlvblxuICAgIGlmICh0aGlzLmlucHV0UHJvdGVjdGlvbikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW5wdXRQcm90ZWN0aW9uLnZhbGlkYXRlSW5wdXQoc2FuaXRpemVkLCB0cnVlKTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmJsb2NrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2FuaXRpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgaWYgKCFzYW5pdGl6ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGxpbmVzID0gc2FuaXRpemVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBpc011bHRpTGluZSA9IGxpbmVzLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaXNMb25nQ29udGVudCA9IHNhbml0aXplZC5sZW5ndGggPiAxMDA7IC8vIExvd2VyIHRocmVzaG9sZCBmb3IgYmV0dGVyIFVYXG5cbiAgICAvLyBNdWx0aS1saW5lIG9yIGxvbmcgY29udGVudDogc2hvdyBjb2xsYXBzZWQgaW5kaWNhdG9yXG4gICAgaWYgKGlzTXVsdGlMaW5lIHx8IGlzTG9uZ0NvbnRlbnQpIHtcbiAgICAgIC8vIENvbWJpbmUgd2l0aCBleGlzdGluZyBjb2xsYXBzZWQgcGFzdGUgaWYgYW55XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICBzYW5pdGl6ZWQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQgKyBzYW5pdGl6ZWQ7XG4gICAgICAgIGNvbnN0IG5ld0xpbmVzID0gc2FuaXRpemVkLnNwbGl0KCdcXG4nKTtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgICB0ZXh0OiBzYW5pdGl6ZWQsXG4gICAgICAgICAgbGluZXM6IG5ld0xpbmVzLmxlbmd0aCxcbiAgICAgICAgICBjaGFyczogc2FuaXRpemVkLmxlbmd0aCxcbiAgICAgICAgfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgICAgdGV4dDogc2FuaXRpemVkLFxuICAgICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgICAgY2hhcnM6IHNhbml0aXplZC5sZW5ndGgsXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIH1cbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG9ydCBzaW5nbGUtbGluZSBjb250ZW50OiBpbnNlcnQgZGlyZWN0bHkgYXMgaWYgdHlwZWRcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5pbnNlcnRTaW5nbGVMaW5lVGV4dChzYW5pdGl6ZWQpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgcGFzdGUgZGV0ZWN0ZWQgYXQgZW1pdCBsZXZlbCAobXVsdGktY2hhciBkYXRhIGFycml2aW5nIGF0IG9uY2UpLlxuICAgKiBUaGlzIGJ5cGFzc2VzIHJlYWRsaW5lIHByb2Nlc3NpbmcgZm9yIHJlbGlhYmxlIHBhc3RlIGRldGVjdGlvbi5cbiAgICovXG4gIHByaXZhdGUgaGFuZGxlRW1pdExldmVsUGFzdGUoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBFTUlUIFBBU1RFIEhBTkRMSU5HOiAke2NvbnRlbnQubGVuZ3RofSBjaGFyc2ApO1xuICAgIH1cblxuICAgIC8vIFNhbml0aXplIGNvbnRlbnQgKHJlbW92ZSBjb250cm9sIGNoYXJzLCBub3JtYWxpemUgbGluZSBlbmRpbmdzKVxuICAgIGxldCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KGNvbnRlbnQpO1xuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcblxuICAgIC8vIElucHV0IHByb3RlY3Rpb24gdmFsaWRhdGlvblxuICAgIGlmICh0aGlzLmlucHV0UHJvdGVjdGlvbikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW5wdXRQcm90ZWN0aW9uLnZhbGlkYXRlSW5wdXQoc2FuaXRpemVkLCB0cnVlKTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmJsb2NrZWQpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2FuaXRpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgaWYgKCFzYW5pdGl6ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IGxpbmVzID0gc2FuaXRpemVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBpc011bHRpTGluZSA9IGxpbmVzLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaXNMb25nQ29udGVudCA9IHNhbml0aXplZC5sZW5ndGggPiAyMDA7XG5cbiAgICAvLyBNdWx0aS1saW5lIG9yIGxvbmcgY29udGVudDogc2hvdyBjb2xsYXBzZWQgaW5kaWNhdG9yXG4gICAgaWYgKGlzTXVsdGlMaW5lIHx8IGlzTG9uZ0NvbnRlbnQpIHtcbiAgICAgIC8vIENsZWFyIGFueSBleGlzdGluZyBjb2xsYXBzZWQgcGFzdGUgZmlyc3RcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgdGV4dDogc2FuaXRpemVkLFxuICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICBjaGFyczogc2FuaXRpemVkLmxlbmd0aCxcbiAgICAgIH07XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFNob3J0IHNpbmdsZS1saW5lIGNvbnRlbnQ6IGluc2VydCBkaXJlY3RseSBhcyBpZiB0eXBlZFxuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgZXhwYW5kIGl0IGZpcnN0XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zZXJ0U2luZ2xlTGluZVRleHQoc2FuaXRpemVkKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGVtaXRJbnB1dENoYW5nZSgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXlsb2FkOiBJbnB1dENoYW5nZUV2ZW50ID0ge1xuICAgICAgdGV4dDogdGhpcy5idWZmZXIsXG4gICAgICBjdXJzb3I6IHRoaXMuY3Vyc29yLFxuICAgIH07XG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwYXlsb2FkKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5cHJlc3Moc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogdm9pZCB7XG4gICAgLy8gU2tpcCBwcm9jZXNzaW5nIGlmIGEgcmF3LWxldmVsIHRvZ2dsZSB3YXMgYWxyZWFkeSBoYW5kbGVkIGZvciB0aGlzIGtleXByZXNzXG4gICAgaWYgKHRoaXMucGVuZGluZ1RvZ2dsZVNraXBzID4gMCkge1xuICAgICAgdGhpcy5wZW5kaW5nVG9nZ2xlU2tpcHMtLTtcbiAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBTS0lQIEtFWVBSRVNTIChwZW5kaW5nIHRvZ2dsZSlgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBCTE9DSzogSWYgQ3RybCtDL0Qgd2FzIGludGVyY2VwdGVkIGF0IHJhdyBsZXZlbCwgaXQncyBhbHJlYWR5IGhhbmRsZWRcbiAgICBpZiAodGhpcy5pbnRlcmNlcHRlZEN0cmxDIHx8IHRoaXMuaW50ZXJjZXB0ZWRDdHJsRCkge1xuICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IGhhbmRsZWQgaW4gcmF3IGRhdGEgaGFuZGxlclxuICAgIH1cblxuICAgIC8vIEJMT0NLOiBJZiB0b2dnbGUgd2FzIGludGVyY2VwdGVkIGF0IHJhdyBsZXZlbCwgaXQncyBhbHJlYWR5IGhhbmRsZWRcbiAgICBpZiAodGhpcy5pbnRlcmNlcHRlZFRvZ2dsZSkge1xuICAgICAgdGhpcy5pbnRlcmNlcHRlZFRvZ2dsZSA9IG51bGw7XG4gICAgICByZXR1cm47IC8vIEFscmVhZHkgaGFuZGxlZCBpbiByYXcgZGF0YSBoYW5kbGVyXG4gICAgfVxuXG4gICAgLy8gQkxPQ0s6IENoZWNrIGNoYXJhY3RlciBjb2RlIGRpcmVjdGx5IGZvciBzcGVjaWFsIGtleXNcbiAgICBjb25zdCBjb2RlID0gc3RyID8gc3RyLmNoYXJDb2RlQXQoMCkgOiAwO1xuICAgIGlmIChjb2RlID09PSAzKSB7IC8vIEN0cmwrQ1xuICAgICAgdGhpcy5oYW5kbGVDdHJsQygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY29kZSA9PT0gNCkgeyAvLyBDdHJsK0RcbiAgICAgIHRoaXMuaGFuZGxlQ3RybEQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBCTE9DSzogQ2hlY2sgZm9yIHRvZ2dsZSBjaGFyYWN0ZXJzIGRpcmVjdGx5XG4gICAgaWYgKHN0ciAmJiB0aGlzLmlzVG9nZ2xlQ2hhcmFjdGVyKHN0cikpIHtcbiAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlKHRoaXMuZGV0ZWN0VG9nZ2xlRnJvbVJhd0RhdGEoc3RyKSEpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERlYnVnOiBsb2cgZW50cnkgcGFyYW1ldGVycyB0byB1bmRlcnN0YW5kIHdoYXQgcmVhZGxpbmUgaXMgc2VuZGluZ1xuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc3Qga2V5SW5mbyA9IGtleSA/IGBuYW1lPSR7a2V5Lm5hbWV9IGN0cmw9JHtrZXkuY3RybH0gbWV0YT0ke2tleS5tZXRhfSBzaGlmdD0ke2tleS5zaGlmdH0gc2VxPSR7a2V5LnNlcXVlbmNlID8gSlNPTi5zdHJpbmdpZnkoa2V5LnNlcXVlbmNlKSA6ICdudWxsJ31gIDogJ251bGwnO1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gRU5UUlk6IHN0cj0ke3N0ciA/IEpTT04uc3RyaW5naWZ5KHN0cikgOiAnbnVsbCd9IGNvZGU9JHtjb2RlfSBrZXk9eyR7a2V5SW5mb319YCk7XG4gICAgfVxuICAgIC8vIE5vcm1hbGl6ZSBtaXNzaW5nIGtleSBtZXRhZGF0YSAoY29tbW9uIGZvciBzb21lIHRlcm1pbmFscyBlbWl0dGluZyByYXcgZXNjYXBlIGNvZGVzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkgPz8gdGhpcy5wYXJzZUVzY2FwZVNlcXVlbmNlKHN0cik7XG4gICAgY29uc3Qga2V5Rm9yUGFzdGUgPSBub3JtYWxpemVkS2V5ID8/IChzdHIgPyB7IHNlcXVlbmNlOiBzdHIgfSBhcyByZWFkbGluZS5LZXkgOiBrZXkpO1xuXG4gICAgLy8gQ1JJVElDQUw6IEhhbmRsZSBDdHJsK0MgYW5kIEN0cmwrRCBGSVJTVCAtIG11c3QgQUxXQVlTIHdvcmsgdG8gcXVpdC9pbnRlcnJ1cHRcbiAgICAvLyBUaGlzIGlzIGNoZWNrZWQgYmVmb3JlIEFOWSBvdGhlciBwcm9jZXNzaW5nIHRvIGVuc3VyZSBpdCBjYW4gbmV2ZXIgYmUgYmxvY2tlZFxuICAgIGlmIChub3JtYWxpemVkS2V5Py5jdHJsICYmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJyB8fCBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkJykpIHtcbiAgICAgIC8vIElmIHdlJ3JlIGluIGlucHV0IGNhcHR1cmUgbW9kZSwgY2FuY2VsIGl0IGZpcnN0XG4gICAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGNhbmNlbGxlZCcpKTtcbiAgICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJykge1xuICAgICAgICAvLyBDdHJsK0MgYmVoYXZpb3I6XG4gICAgICAgIC8vIDEuIElmIGJ1ZmZlciBoYXMgdGV4dDogY2xlYXIgaXQgZmlyc3QsIHRoZW4gbm90aWZ5IHNoZWxsXG4gICAgICAgIC8vIDIuIElmIGJ1ZmZlciBpcyBlbXB0eTogbGV0IHNoZWxsIGRlY2lkZSB0byBwYXVzZSBBSSBvciBxdWl0XG4gICAgICAgIGNvbnN0IGhhZEJ1ZmZlciA9IHRoaXMuYnVmZmVyLmxlbmd0aCA+IDA7XG4gICAgICAgIGlmIChoYWRCdWZmZXIpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRW1pdCBjdHJsYyBldmVudCB3aXRoIGJ1ZmZlciBzdGF0ZSBzbyBzaGVsbCBjYW4gaGFuZGxlIGFwcHJvcHJpYXRlbHlcbiAgICAgICAgdGhpcy5lbWl0KCdjdHJsYycsIHsgaGFkQnVmZmVyIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkJykge1xuICAgICAgICAvLyBDdHJsK0Q6IGludGVycnVwdCBpZiBidWZmZXIgaXMgZW1wdHlcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgnaW50ZXJydXB0Jyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBtYWNPUyBPcHRpb24ra2V5IHRvZ2dsZXMgQkVGT1JFIGFueSBwYXN0ZSBkZXRlY3Rpb25cbiAgICAvLyBDaGVjayBtdWx0aXBsZSBzb3VyY2VzOiBzdHIsIGtleS5zZXF1ZW5jZSwgYW5kIGtleS5tZXRhK2tleS5uYW1lXG4gICAgLy8gVGhpcyBpcyBhIGZhbGxiYWNrIC0gcHJpbWFyeSBkZXRlY3Rpb24gaGFwcGVucyBpbiB0aGUgcmF3ICdkYXRhJyBldmVudCBoYW5kbGVyXG5cbiAgICAvLyBDaGVjayBzdHIgZmlyc3RcbiAgICBsZXQgdG9nZ2xlTGV0dGVyID0gdGhpcy5kZXRlY3RUb2dnbGVGcm9tUmF3RGF0YShzdHIpO1xuXG4gICAgLy8gQWxzbyBjaGVjayBrZXkuc2VxdWVuY2UgaWYgc3RyIGRpZG4ndCBtYXRjaCAocmVhZGxpbmUgbWF5IHRyYW5zZm9ybSB0aGUgaW5wdXQpXG4gICAgaWYgKCF0b2dnbGVMZXR0ZXIgJiYga2V5Py5zZXF1ZW5jZSkge1xuICAgICAgdG9nZ2xlTGV0dGVyID0gdGhpcy5kZXRlY3RUb2dnbGVGcm9tUmF3RGF0YShrZXkuc2VxdWVuY2UpO1xuICAgICAgaWYgKHRvZ2dsZUxldHRlciAmJiBwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBUT0dHTEUgREVURUNURUQgdmlhIGtleS5zZXF1ZW5jZTogJHt0b2dnbGVMZXR0ZXJ9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRvZ2dsZUxldHRlcikge1xuICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIFRPR0dMRSBERVRFQ1RFRCAoa2V5cHJlc3MgZmFsbGJhY2spOiAke3RvZ2dsZUxldHRlcn1gKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlKHRvZ2dsZUxldHRlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWxzbyBjaGVjayBtZXRhK2tleSBwYXR0ZXJuIGlmIHN0ci9zZXF1ZW5jZSBkaWRuJ3QgbWF0Y2hcbiAgICBpZiAobm9ybWFsaXplZEtleT8ubWV0YSAmJiBub3JtYWxpemVkS2V5Lm5hbWUpIHtcbiAgICAgIGNvbnN0IG1ldGFMZXR0ZXIgPSBub3JtYWxpemVkS2V5Lm5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChbJ2cnLCAnYScsICdkJywgJ3QnLCAndiddLmluY2x1ZGVzKG1ldGFMZXR0ZXIpKSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIFRPR0dMRSBERVRFQ1RFRCAobWV0YSBrZXkpOiAke21ldGFMZXR0ZXJ9YCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGUobWV0YUxldHRlcik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHIsIGtleUZvclBhc3RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhbmRsZVBsYWluUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIW5vcm1hbGl6ZWRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBpbnB1dENhcHR1cmUgQ3RybCtDL0QgaXMgaGFuZGxlZCBhdCB0aGUgdG9wIG9mIGhhbmRsZUtleXByZXNzXG5cbiAgICAvLyBEZXRlY3QgQ3RybCtTaGlmdCBjb21iaW5hdGlvbnMgKGZhbGxiYWNrIGZvciBub24tbWFjT1Mgb3IgY29uZmlndXJlZCB0ZXJtaW5hbHMpXG4gICAgY29uc3QgaXNDdHJsU2hpZnQgPSAobGV0dGVyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IGxvd2VyTGV0dGVyID0gbGV0dGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB1cHBlckxldHRlciA9IGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAvLyBQYXR0ZXJuIDE6IFN0YW5kYXJkIHJlYWRsaW5lIHNoaWZ0IGZsYWcgKyBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkuc2hpZnQgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAyOiBTb21lIHRlcm1pbmFscyBzZW5kIHVwcGVyY2FzZSBuYW1lIHdpdGggY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09IHVwcGVyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDM6IE1ldGEvQWx0ICsgbGV0dGVyIChpVGVybTIgd2l0aCBcIk9wdGlvbiBzZW5kcyBNZXRhXCIpXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5tZXRhICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNDogUmF3IGVzY2FwZSBzZXF1ZW5jZSBjaGVjayBmb3IgeHRlcm0tc3R5bGUgbW9kaWZpZXJzXG4gICAgICBjb25zdCBzZXEgPSBzdHIgfHwgbm9ybWFsaXplZEtleS5zZXF1ZW5jZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoc2VxICYmIC9eXFx4MWJcXFtbMC05XSs7Nlt+QS1aXT8kLy50ZXN0KHNlcSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNTogRVNDICsgbGV0dGVyIChPcHRpb24gc2VuZHMgRVNDIHByZWZpeCBpbiBzb21lIGNvbmZpZ3MpXG4gICAgICBpZiAoc2VxICYmIHNlcSA9PT0gYFxceDFiJHtsb3dlckxldHRlcn1gKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSA9IChsZXR0ZXI6ICdhJyB8ICdnJyB8ICdkJyB8ICd0Jyk6IHZvaWQgPT4ge1xuICAgICAgLy8gRW5zdXJlIG5vIGJ1ZmZlcmVkIGNoYXJzIGxlYWsgaW50byB0aGUgcHJvbXB0XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICAgIGlmIChsZXR0ZXIgPT09ICdhJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdnJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ2QnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWFscGhhemVybycpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICd0Jykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS10aGlua2luZycpO1xuICAgICAgfVxuICAgICAgLy8gRm9yY2UgaW1tZWRpYXRlIHJlbmRlciBkdXJpbmcgc3RyZWFtaW5nIHRvIGVuc3VyZSB0b2dnbGUgc3RhdGUgaXMgdmlzaWJsZVxuICAgICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGlmIChpc0N0cmxTaGlmdCgnYScpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2EnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2cnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdkJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgndCcpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ3QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmVtaXQoJ3Jlc3VtZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrQyBhbmQgQ3RybCtEIGFyZSBoYW5kbGVkIGF0IHRoZSB0b3Agb2YgaGFuZGxlS2V5cHJlc3MgZm9yIGd1YXJhbnRlZWQgZXhlY3V0aW9uXG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICd1Jykge1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrTDogQ2xlYXIgc2NyZWVuIHdoaWxlIHByZXNlcnZpbmcgaW5wdXRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdsJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIENsZWFyIHNjcmVlbiBhbmQgcmVkcmF3XG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFx4MWJbMkpcXHgxYltIJyk7IC8vIENsZWFyIHNjcmVlbiwgbW92ZSB0byB0b3BcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5jbGVhckNvbGxhcHNlZFJlc3VsdHMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtPOiBFeHBhbmQgbGFzdCB0b29sIHJlc3VsdFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ28nKSB7XG4gICAgICB0aGlzLmVtaXQoJ2V4cGFuZC10b29sLXJlc3VsdCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrQTogTW92ZSBjdXJzb3IgdG8gc3RhcnQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2EnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0U6IE1vdmUgY3Vyc29yIHRvIGVuZCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK1c6IERlbGV0ZSB3b3JkIGJhY2t3YXJkXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndycpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgLy8gRmluZCBzdGFydCBvZiBwcmV2aW91cyB3b3JkXG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCB0cmFpbGluZyBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIC8vIFNraXAgd29yZCBjaGFyYWN0ZXJzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtLOiBEZWxldGUgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdrJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSG9tZTogTW92ZSBjdXJzb3IgdG8gc3RhcnRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdob21lJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5kOiBNb3ZlIGN1cnNvciB0byBlbmRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdlbmQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K0xlZnQ6IE1vdmUgY3Vyc29yIGJhY2sgb25lIHdvcmRcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdsZWZ0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICAvLyBTa2lwIHdvcmQgY2hhcmFjdGVyc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtSaWdodDogTW92ZSBjdXJzb3IgZm9yd2FyZCBvbmUgd29yZFxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCBjdXJyZW50IHdvcmRcbiAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuYnVmZmVyLmxlbmd0aCAmJiB0aGlzLmJ1ZmZlcltwb3NdICE9PSAnICcpIHBvcysrO1xuICAgICAgICAvLyBTa2lwIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmIHRoaXMuYnVmZmVyW3Bvc10gPT09ICcgJykgcG9zKys7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrQmFja3NwYWNlOiBEZWxldGUgd29yZCBiYWNrd2FyZCAoYWx0ZXJuYXRpdmUgdG8gQ3RybCtXKVxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGRlbGV0ZSBpdCBjb21wbGV0ZWx5XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5uYW1lID09PSAncmV0dXJuJyB8fCBrZXkubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgLy8gQ2hlY2sgZm9yIHNsYXNoIGNvbW1hbmQgY29tcGxldGlvbiBmaXJzdCAod29ya3MgaW4gYm90aCBzdHJlYW1pbmcgYW5kIG5vbi1zdHJlYW1pbmcgbW9kZXMpXG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24odHJ1ZSkpIHJldHVybjtcbiAgICAgIFxuICAgICAgLy8gRmFsbGJhY2s6IGlmIGJ1ZmZlciBzdGFydHMgd2l0aCAnLycgYW5kIHN1Z2dlc3Rpb25zIGV4aXN0LCB1c2UgdGhlIHNlbGVjdGVkL2ZpcnN0IG9uZVxuICAgICAgaWYgKHRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc2FmZUluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgICAgIDogMDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLnN1Z2dlc3Rpb25zW3NhZmVJbmRleF0/LmNvbW1hbmQgPz8gdGhpcy5idWZmZXI7XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIER1cmluZyBzdHJlYW1pbmcsIHF1ZXVlIHRoZSBpbnB1dCBmb3IgcHJvY2Vzc2luZyBhZnRlciBBSSBjb21wbGV0ZXNcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIGNvbnN0IHF1ZXVlZElucHV0ID0gdGhpcy5zdHJlYW1pbmdJbnB1dFF1ZXVlLmpvaW4oJycpLnRyaW0oKTtcbiAgICAgICAgaWYgKHF1ZXVlZElucHV0KSB7XG4gICAgICAgICAgdGhpcy5lbWl0KCdxdWV1ZScsIHF1ZXVlZElucHV0KTtcbiAgICAgICAgICB0aGlzLnN0cmVhbWluZ0lucHV0UXVldWUgPSBbXTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBbHNvIHN1Ym1pdCBjdXJyZW50IGJ1ZmZlciBpZiBpdCBoYXMgY29udGVudFxuICAgICAgICBpZiAodGhpcy5idWZmZXIudHJpbSgpKSB7XG4gICAgICAgICAgdGhpcy5zdWJtaXRUZXh0KHRoaXMuYnVmZmVyKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGV4cGFuZCBhbmQgc3VibWl0IGluIG9uZSBhY3Rpb25cbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBcbiAgICAgIHRoaXMuc3VibWl0VGV4dCh0aGlzLmJ1ZmZlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIC8vIFJlc2V0IGFueSBwYXN0ZSBkZXRlY3Rpb24gc3RhdGUgdG8gZW5zdXJlIGNsZWFuIHJlbmRlclxuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yIC0gMSkgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkZWxldGUnKSB7XG4gICAgICAvLyBSZXNldCBhbnkgcGFzdGUgZGV0ZWN0aW9uIHN0YXRlIHRvIGVuc3VyZSBjbGVhbiByZW5kZXJcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGRlbGV0ZSBpdCBjb21wbGV0ZWx5IChzaW1pbGFyIHRvIGJhY2tzcGFjZSlcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IgKyAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLmZvcmNlTmV4dFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gTWVudSBuYXZpZ2F0aW9uIChDbGF1ZGUgQ29kZSBzdHlsZSkgLSBpbnRlcmNlcHRzIGtleXMgd2hlbiBtZW51IGlzIGFjdGl2ZVxuICAgIGlmICh0aGlzLmlzTWVudUFjdGl2ZSgpKSB7XG4gICAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndXAnKSB7XG4gICAgICAgIHRoaXMubmF2aWdhdGVNZW51KC0xKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2Rvd24nKSB7XG4gICAgICAgIHRoaXMubmF2aWdhdGVNZW51KDEpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAncmV0dXJuJykge1xuICAgICAgICB0aGlzLnNlbGVjdE1lbnVJdGVtKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdlc2NhcGUnKSB7XG4gICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIE90aGVyIGtleXMgY2xvc2UgbWVudSB3aXRob3V0IHNlbGVjdGlvblxuICAgICAgaWYgKHN0ciAmJiAhbm9ybWFsaXplZEtleS5jdHJsICYmICFub3JtYWxpemVkS2V5Lm1ldGEpIHtcbiAgICAgICAgdGhpcy5jbG9zZU1lbnUoKTtcbiAgICAgICAgLy8gRG9uJ3QgcmV0dXJuIC0gbGV0IHRoZSBrZXkgYmUgcHJvY2Vzc2VkIG5vcm1hbGx5XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICAvLyBSZXNldCBwYXN0ZSBzdGF0ZSB0byBlbnN1cmUgY2xlYW4gcmVuZGVyXG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgaXQgZmlyc3RcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIC8vIFJlc2V0IHBhc3RlIHN0YXRlIHRvIGVuc3VyZSBjbGVhbiByZW5kZXJcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGV4cGFuZCBpdCBmaXJzdFxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IrKztcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndXAnKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKC0xKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSBpbmRleCBpcyB3aXRoaW4gYm91bmRzIGJlZm9yZSBhY2Nlc3NpbmdcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDAgJiYgdGhpcy5oaXN0b3J5SW5kZXggPCB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkb3duJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygxKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeUluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDApIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2FmZXR5OiBpbnZhbGlkIHN0YXRlLCByZXNldFxuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd0YWInKSB7XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24oZmFsc2UpKSByZXR1cm47XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN0ciAmJiAhbm9ybWFsaXplZEtleS5jdHJsICYmICFub3JtYWxpemVkS2V5Lm1ldGEpIHtcbiAgICAgIC8vIFNBRkVUWTogRmluYWwgZ3VhcmQgdG8gcHJldmVudCB0b2dnbGUgY2hhcmFjdGVycyBmcm9tIGV2ZXIgYmVpbmcgaW5zZXJ0ZWRcbiAgICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIHRyaWdnZXIgaWYgZWFybGllciBkZXRlY3Rpb24gd29ya3MsIGJ1dCBhY3RzIGFzIGEgc2FmZXR5IG5ldFxuICAgICAgaWYgKHRoaXMuaXNUb2dnbGVDaGFyYWN0ZXIoc3RyKSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBCTE9DS0VEIHRvZ2dsZSBjaGFyYWN0ZXIgZnJvbSBpbnNlcnRpb246IFwiJHtzdHJ9XCIgY29kZT0ke3N0ci5jaGFyQ29kZUF0KDApfWApO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgLy8gUXVldWUgdGV4dCBpbnB1dCBkdXJpbmcgc3RyZWFtaW5nIC0gcHJvY2VzcyBhZnRlciBBSSBjb21wbGV0ZXNcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nSW5wdXRRdWV1ZS5wdXNoKHN0cik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIERlYnVnOiB0cmFjZSB3aHkgdG9nZ2xlIGRpZG4ndCBjYXRjaCB0aGlzIGNoYXJhY3RlclxuICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgIGNvbnN0IGNvZGUgPSBzdHIuY2hhckNvZGVBdCgwKTtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gUVVFVUUgSU5TRVJUOiBzdHI9XCIke3N0cn1cIiBjb2RlPSR7Y29kZX1gKTtcbiAgICAgIH1cbiAgICAgIC8vIERlZmVyIGluc2VydGlvbiB0byBhbGxvdyBwYXN0ZSBkZXRlY3Rpb24gd2luZG93IHRvIGNhdGNoIHJhcGlkIGlucHV0XG4gICAgICB0aGlzLnF1ZXVlUGVuZGluZ0luc2VydChzdHIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgaG9yaXpvbnRhbCBjdXJzb3IgcG9zaXRpb24gc3RheXMgd2l0aGluIHRoZSB2aXNpYmxlIGlucHV0IHdpbmRvdy5cbiAgICogUHJldmVudHMganVtcHMgd2hlbiB1c2luZyBsZWZ0L3JpZ2h0IGFycm93cyBvbiBsb25nIGxpbmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBlbnN1cmVDdXJzb3JWaXNpYmxlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAxMik7IC8vIG1hcmdpbiBmb3IgcHJvbXB0L3RvZ2dsZXMgYW5kIHBhZGRpbmdcbiAgICAvLyBJZiBjdXJzb3IgaXMgbGVmdCBvZiBjdXJyZW50IHdpbmRvdywgc2hpZnQgd2luZG93IGxlZnRcbiAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0KSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3I7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGN1cnNvciBpcyBiZXlvbmQgdmlzaWJsZSB3aW5kb3csIHNoaWZ0IHdpbmRvdyByaWdodFxuICAgIGlmICh0aGlzLmN1cnNvciAtIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPj0gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvciAtIG1heFdpZHRoICsgMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcmF3IGVzY2FwZSBzZXF1ZW5jZXMgd2hlbiByZWFkbGluZSBkb2Vzbid0IHBvcHVsYXRlIGtleSBtZXRhZGF0YS5cbiAgICogUHJldmVudHMgY29udHJvbCBjb2RlcyAoZS5nLiwgXltbMjAwfikgZnJvbSBsZWFraW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIHByaXZhdGUgcGFyc2VFc2NhcGVTZXF1ZW5jZShzZXF1ZW5jZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHJlYWRsaW5lLktleSB8IG51bGwge1xuICAgIGlmICghc2VxdWVuY2UpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgcmVhZGxpbmUuS2V5PiA9IHtcbiAgICAgICdcXHgxYltBJzogeyBuYW1lOiAndXAnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltCJzogeyBuYW1lOiAnZG93bicsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0MnOiB7IG5hbWU6ICdyaWdodCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0QnOiB7IG5hbWU6ICdsZWZ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbSCc6IHsgbmFtZTogJ2hvbWUnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltGJzogeyBuYW1lOiAnZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAwfic6IHsgbmFtZTogJ3Bhc3RlLXN0YXJ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAxfic6IHsgbmFtZTogJ3Bhc3RlLWVuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgIH07XG4gICAgcmV0dXJuIG1hcFtzZXF1ZW5jZV0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZSBjaGFyYWN0ZXJzIGZvciBkZWZlcnJlZCBpbnNlcnRpb24uIFRoaXMgcHJldmVudHMgdmlzdWFsIFwibGVha1wiIG9mXG4gICAqIHBhc3RlZCBjb250ZW50IGJ5IGhvbGRpbmcgY2hhcmFjdGVycyB1bnRpbCB3ZSdyZSBjb25maWRlbnQgaXQncyBub3QgYSBwYXN0ZS5cbiAgICovXG4gIHByaXZhdGUgcXVldWVQZW5kaW5nSW5zZXJ0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIElmIHRvZ2dsZSBjaGFyYWN0ZXJzIHNsaXBwZWQgdGhyb3VnaCwgaGFuZGxlIHRoZW0gaGVyZSBhbmQgc3RyaXAgdGhlbSBiZWZvcmUgaW5zZXJ0aW9uXG4gICAgY29uc3QgdG9nZ2xlcyA9IHRoaXMuZXh0cmFjdFRvZ2dsZUxldHRlcnModGV4dCk7XG4gICAgaWYgKHRvZ2dsZXMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBsZXR0ZXIgb2YgdG9nZ2xlcykge1xuICAgICAgICB0aGlzLmhhbmRsZVRvZ2dsZShsZXR0ZXIpO1xuICAgICAgfVxuICAgICAgdGV4dCA9IHRoaXMuc3RyaXBUb2dnbGVTeW1ib2xzKHRleHQpO1xuICAgICAgaWYgKCF0ZXh0KSB7XG4gICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1tLRVldIFFVRVVFIElOU0VSVCBEUk9QUEVEOiB0b2dnbGUtb25seSBpbnB1dCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGYXN0LXBhdGg6IHNpbmdsZSBwcmludGFibGUgQVNDSUkgY2hhcmFjdGVyIHdpdGggbm8gcGVuZGluZyBidWZmZXIgPSBpbW1lZGlhdGUgaW5zZXJ0XG4gICAgLy8gVGhpcyBtYWtlcyBub3JtYWwgdHlwaW5nIGZlZWwgaW5zdGFudCB3aGlsZSBzdGlsbCBkZXRlY3RpbmcgbXVsdGktY2hhciBwYXN0ZXNcbiAgICAvLyBCVVQ6IHNraXAgZmFzdCBwYXRoIGlmIGJ1cnN0IGFjdGl2aXR5IHN1Z2dlc3RzIGluY29taW5nIHBhc3RlXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBidXJzdEFjdGl2ZSA9IHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gMCAmJiBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA8PSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICBpZiAodGV4dC5sZW5ndGggPT09IDEgJiZcbiAgICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID09PSAnJyAmJlxuICAgICAgICAhdGhpcy5pblBsYWluUGFzdGUgJiZcbiAgICAgICAgIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSAmJlxuICAgICAgICAhYnVyc3RBY3RpdmUgJiZcbiAgICAgICAgdGV4dC5jaGFyQ29kZUF0KDApID49IDMyICYmXG4gICAgICAgIHRleHQuY2hhckNvZGVBdCgwKSA8IDEyNykge1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRleHQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciArPSB0ZXh0O1xuXG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIGNvbW1pdCBhZnRlciBkZWxheSAtIGlmIHBhc3RlIGRldGVjdGlvbiB0cmlnZ2VycyBmaXJzdCwgaXQgd2lsbCBjb25zdW1lIHRoZSBidWZmZXJcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb21taXRQZW5kaW5nSW5zZXJ0KCk7XG4gICAgfSwgdGhpcy5wZW5kaW5nSW5zZXJ0RGVsYXlNcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IHBlbmRpbmcgY2hhcmFjdGVycyBhcyBub3JtYWwgaW5wdXQgKG5vdCBhIHBhc3RlKS5cbiAgICogSWYgd2UgcmVhY2ggaGVyZSwgcGFzdGUgZGV0ZWN0aW9uIGRpZG4ndCB0cmlnZ2VyLCBzbyB0aGlzIGlzIG5vcm1hbCB0eXBpbmcuXG4gICAqL1xuICBwcml2YXRlIGNvbW1pdFBlbmRpbmdJbnNlcnQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgJiYgIXRoaXMuaW5QbGFpblBhc3RlICYmICF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgIC8vIFJlc2V0IGJ1cnN0IHN0YXRlIEJFRk9SRSBpbnNlcnRpbmcgc28gcmVuZGVyIGlzbid0IHN1cHByZXNzZWRcbiAgICAgIC8vIElmIHBhc3RlIGRldGVjdGlvbiBkaWRuJ3QgdHJpZ2dlciwgdGhpcyBpcyBqdXN0IGZhc3QgdHlwaW5nLCBub3QgYSBwYXN0ZVxuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcik7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGludG8gcGFzdGUgZGV0ZWN0aW9uIChwcmV2ZW50cyB2aXN1YWwgbGVhaykuXG4gICAqL1xuICBwcml2YXRlIGNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGNvbnN1bWVkID0gdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHJldHVybiBjb25zdW1lZDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlIHx8IHN0cjtcbiAgICBpZiAoc2VxdWVuY2UgPT09IEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFIHx8IHNlcXVlbmNlID09PSBFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHBhc3RlIG1hcmtlcnMgbWlnaHQgYmUgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ1xuICAgIGNvbnN0IHBhc3RlU3RhcnRNYXJrZXIgPSAnXFx4MWJbMjAwfic7XG4gICAgY29uc3QgcGFzdGVFbmRNYXJrZXIgPSAnXFx4MWJbMjAxfic7XG5cbiAgICAvLyBDaGVjayBpZiBzdHIgY29udGFpbnMgcGFzdGUgc3RhcnQgbWFya2VyIChoYW5kbGVzIGNodW5rZWQgYXJyaXZhbClcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlU3RhcnRNYXJrZXIpKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBwZW5kaW5nIGJ1ZmZlciB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlIHNlcXVlbmNlcyBsZWFraW5nXG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKSk7XG4gICAgICAvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgdGhlIHN0YXJ0IG1hcmtlciAoZGlzY2FyZCBhbnkgY29udGVudCBiZWZvcmUgaXQgLSBsaWtlbHkgcGFydGlhbCBlc2NhcGVzKVxuICAgICAgY29uc3Qgc3RhcnRJZHggPSBzdHIuaW5kZXhPZihwYXN0ZVN0YXJ0TWFya2VyKTtcbiAgICAgIGxldCBjb250ZW50ID0gc3RyLnNsaWNlKHN0YXJ0SWR4ICsgcGFzdGVTdGFydE1hcmtlci5sZW5ndGgpO1xuICAgICAgLy8gQ2hlY2sgaWYgZW5kIG1hcmtlciBpcyBhbHNvIGluIHRoaXMgY2h1bmtcbiAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgICBjb25zdCBlbmRJZHggPSBjb250ZW50LmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxdWVuY2UgPT09IHBhc3RlU3RhcnRNYXJrZXIpIHtcbiAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHRvIHByZXZlbnQgcGFydGlhbCBlc2NhcGVzIGxlYWtpbmdcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nO1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgc3RyIGNvbnRhaW5zIHBhc3RlIGVuZCBtYXJrZXJcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgY29uc3QgZW5kSWR4ID0gc3RyLmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgY29uc3QgY29udGVudEJlZm9yZSA9IHN0ci5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgaWYgKGNvbnRlbnRCZWZvcmUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIGNvbnRlbnRCZWZvcmUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNlcXVlbmNlID09PSBwYXN0ZUVuZE1hcmtlcikge1xuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleT8ubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsICdcXG4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHRoaXMucGFzdGVCdWZmZXIuc2xpY2UoMCwgLTEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHN0cik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXF1ZW5jZSA9PT0gJ3N0cmluZycgJiYgc2VxdWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHNlcXVlbmNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY29tbWl0UGFzdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHJldHVybjtcbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGxldCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGFzdGVCdWZmZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvdGVjdGlvbiB2YWxpZGF0aW9uIGFnYWluc3QgcmVtb3RlIHBhc3RlIGF0dGFja3NcbiAgICBpZiAodGhpcy5pbnB1dFByb3RlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmlucHV0UHJvdGVjdGlvbi52YWxpZGF0ZUlucHV0KHNhbml0aXplZCwgdHJ1ZSk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIC8vIFBhc3RlIGJsb2NrZWQgLSByZXNldCBzdGF0ZSBhbmQgYWJvcnRcbiAgICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNhbml0aXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgICBpZiAobGluZXMubGVuZ3RoID4gMSB8fCBjb250ZW50Lmxlbmd0aCA+IDIwMCkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksIC8vIEluZGljYXRlIHRydW5jYXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmluc2VydFRleHQoY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBsYWluUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgLy8gRmFsbGJhY2sgcGFzdGUgY2FwdHVyZSB3aGVuIGJyYWNrZXRlZCBwYXN0ZSBpc24ndCBzdXBwb3J0ZWRcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IGtleT8uY3RybCB8fCBrZXk/Lm1ldGEpIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIERvbid0IHRyZWF0IGVzY2FwZSBzZXF1ZW5jZXMgKGFycm93IGtleXMsIGV0Yy4pIGFzIHBhc3RlXG4gICAgLy8gRXNjYXBlIHNlcXVlbmNlcyBzdGFydCB3aXRoIFxceDFiIChFU0MpIGFuZCBhcmUgdXNlZCBmb3IgY3Vyc29yIG1vdmVtZW50LCBldGMuXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5zdGFydHNXaXRoKCdcXHgxYicpKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgPz8gJyc7XG4gICAgY29uc3QgY2h1bmsgPSB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCA/IHN0ciA6IHNlcXVlbmNlO1xuICAgIGlmICghY2h1bmspIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy50cmFja1BsYWluUGFzdGVCdXJzdChjaHVuay5sZW5ndGgsIG5vdyk7XG5cbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLnJlY29yZFJlY2VudFBsYWluQ2h1bmsoY2h1bmssIG5vdyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmtNdWx0aXBsZSA9IGNodW5rLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaGFzTmV3bGluZSA9IC9bXFxyXFxuXS8udGVzdChjaHVuayk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgY29uc3QgYnVyc3RUcmlnZ2VyID0gYnVyc3RBY3RpdmUgJiYgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZVRyaWdnZXJDaGFycztcbiAgICBjb25zdCBoYXNSZWNlbnROb25OZXdsaW5lID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5zb21lKGVudHJ5ID0+ICEvXltcXHJcXG5dKyQvLnRlc3QoZW50cnkudGV4dCkpO1xuICAgIGNvbnN0IGVhcmx5TmV3bGluZVRyaWdnZXIgPVxuICAgICAgaGFzTmV3bGluZSAmJlxuICAgICAgYnVyc3RBY3RpdmUgJiZcbiAgICAgIGhhc1JlY2VudE5vbk5ld2xpbmUgJiZcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycztcbiAgICBjb25zdCBuZXdsaW5lVHJpZ2dlciA9IGhhc05ld2xpbmUgJiYgKHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IGVhcmx5TmV3bGluZVRyaWdnZXIpO1xuICAgIGNvbnN0IGxvb2tzTGlrZVBhc3RlID0gdGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgbmV3bGluZVRyaWdnZXI7XG5cbiAgICBpZiAoIWxvb2tzTGlrZVBhc3RlKSB7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBmaXJzdCAtIHRoaXMgaXMgdGhlIHByaW1hcnkgc291cmNlIG5vd1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgY29uc3QgcmVjbGFpbWVkID0gdGhpcy5yZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIC8vIENvbWJpbmUgcGVuZGluZyBidWZmZXIgd2l0aCBhbnkgcmVjbGFpbWVkIGNodW5rc1xuICAgICAgY29uc3QgY29tYmluZWQgPSBwZW5kaW5nICsgcmVjbGFpbWVkO1xuICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjaGFycyB0aGF0IGxlYWtlZCBpbnRvIGJ1ZmZlciAobGVnYWN5IHJlY2xhaW0gcGF0aClcbiAgICAgICAgaWYgKHJlY2xhaW1lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlQ291bnQgPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGgsIHJlY2xhaW1lZC5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IHN1ZmZpeCA9IHRoaXMuYnVmZmVyLnNsaWNlKC1yZW1vdmVDb3VudCk7XG4gICAgICAgICAgaWYgKHJlbW92ZUNvdW50ID4gMCAmJiBzdWZmaXggPT09IHJlY2xhaW1lZC5zbGljZSgtcmVtb3ZlQ291bnQpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuYnVmZmVyLmxlbmd0aCAtIHJlbW92ZUNvdW50KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgdGhpcy5idWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSBjb21iaW5lZC5zbGljZSgwLCB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSk7XG4gICAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBjb21iaW5lZC5lbmRzV2l0aChjaHVuayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNodW5rQWxyZWFkeUNhcHR1cmVkKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3BsYWluUGFzdGUnLCBjaHVuayk7XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGxlbmd0aDogbnVtYmVyLCBub3c6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgfHwgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcykge1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSBub3c7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgKz0gbGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFBsYWluUGFzdGVCdXJzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICAvLyBBbHNvIGNhbmNlbCBwZW5kaW5nIGluc2VydCBidWZmZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkUmVjZW50UGxhaW5DaHVuayh0ZXh0OiBzdHJpbmcsIGF0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IGF0IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcy5wdXNoKHsgdGV4dCwgYXQgfSk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybiAnJztcbiAgICBjb25zdCBjb21iaW5lZCA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MubWFwKGVudHJ5ID0+IGVudHJ5LnRleHQpLmpvaW4oJycpO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cblxuICBwcml2YXRlIHNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgfVxuICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmZpbmFsaXplUGxhaW5QYXN0ZSgpO1xuICAgIH0sIHRoaXMucGxhaW5QYXN0ZUlkbGVNcyk7XG4gIH1cblxuICBwcml2YXRlIGZpbmFsaXplUGxhaW5QYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSByZXR1cm47XG5cbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGxldCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcik7XG5cbiAgICAvLyBJbnB1dCBwcm90ZWN0aW9uIHZhbGlkYXRpb24gYWdhaW5zdCByZW1vdGUgcGFzdGUgYXR0YWNrc1xuICAgIGlmICh0aGlzLmlucHV0UHJvdGVjdGlvbikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW5wdXRQcm90ZWN0aW9uLnZhbGlkYXRlSW5wdXQoc2FuaXRpemVkLCB0cnVlKTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmJsb2NrZWQpIHtcbiAgICAgICAgLy8gUGFzdGUgYmxvY2tlZCAtIHJlc2V0IHN0YXRlIGFuZCBhYm9ydFxuICAgICAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzYW5pdGl6ZWQgPSB2YWxpZGF0aW9uLnNhbml0aXplZDtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuXG4gICAgLy8gU0FGRVRZIE5FVDogRmlsdGVyIG91dCBhbnkgdG9nZ2xlIG9yIGNvbnRyb2wgY2hhcmFjdGVycyB0aGF0IHNsaXBwZWQgdGhyb3VnaFxuICAgIC8vIFRoaXMgc2hvdWxkIG5ldmVyIGhhcHBlbiBpZiBlYXJsaWVyIGRldGVjdGlvbiB3b3JrcywgYnV0IGFjdHMgYXMgZmluYWwgZ3VhcmRcbiAgICBjb25zdCBmaWx0ZXJlZCA9IFsuLi50ZXh0XS5maWx0ZXIoYyA9PiB7XG4gICAgICBjb25zdCBjb2RlID0gYy5jaGFyQ29kZUF0KDApO1xuICAgICAgLy8gQmxvY2sgQUxMIGNvbnRyb2wgY2hhcmFjdGVycyAoMC0zMSkgYW5kIERFTCAoMTI3KVxuICAgICAgLy8gVGhpcyBpbmNsdWRlcyBDdHJsK0MgKDMpLCBDdHJsK0QgKDQpLCBFU0MgKDI3KSwgZXRjLlxuICAgICAgaWYgKGNvZGUgPCAzMiB8fCBjb2RlID09PSAxMjcpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIEJsb2NrIHRvZ2dsZSBjaGFyYWN0ZXJzIChPcHRpb24rRy9BL0QvVC9WIFVuaWNvZGUpXG4gICAgICBpZiAodGhpcy5pc1RvZ2dsZUNoYXJhY3RlcihjKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSkuam9pbignJyk7XG5cbiAgICBpZiAoIWZpbHRlcmVkKSB7XG4gICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gSU5TRVJUIFRFWFQgQkxPQ0tFRDogYWxsIGNoYXJzIGZpbHRlcmVkIGZyb20gXCIke3RleHR9XCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGV4dCA9IGZpbHRlcmVkO1xuXG4gICAgLy8gRGVidWc6IHRyYWNlIHdoYXQncyBiZWluZyBpbnNlcnRlZFxuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc3QgY29kZSA9IHRleHQuY2hhckNvZGVBdCgwKTtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIElOU0VSVCBURVhUOiBcIiR7dGV4dH1cIiBjb2RlPSR7Y29kZX1gKTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBpbnNlcnQgZHVyaW5nIHBhc3RlIG9wZXJhdGlvbnMgLSBjb250ZW50IGdvZXMgdG8gcGFzdGUgYnVmZmVyXG4gICAgaWYgKHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSB8fCB0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIElucHV0IHByb3RlY3Rpb24gdmFsaWRhdGlvbiBhZ2FpbnN0IHJlbW90ZSBhdHRhY2tzXG4gICAgaWYgKHRoaXMuaW5wdXRQcm90ZWN0aW9uKSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5pbnB1dFByb3RlY3Rpb24udmFsaWRhdGVJbnB1dCh0ZXh0LCBmYWxzZSk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIC8vIElucHV0IGJsb2NrZWQgLSBzaWxlbnRseSBkcm9wIHRvIHByZXZlbnQgYXR0YWNrXG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh2YWxpZGF0aW9uLnNhbml0aXplZCAhPT0gdGV4dCkge1xuICAgICAgICAvLyBVc2Ugc2FuaXRpemVkIHZlcnNpb25cbiAgICAgICAgdGV4dCA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgICAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSBhbmQgdXNlciB0eXBlcywgZXhwYW5kIHRvIGJ1ZmZlciBmaXJzdCB0aGVuIGluc2VydCBhdCBjdXJzb3JcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgfVxuICAgIC8vIFNhbml0aXplIGlucHV0IHRvIHJlbW92ZSBzcGVjaWFsIGZvcm1hdHRpbmcgY2hhcmFjdGVyc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dCk7XG4gICAgaWYgKCFzYW5pdGl6ZWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSB0ZXh0IGJ5IGNvbGxhcHNpbmcgdG8gc2luZ2xlIGxpbmUgZm9yIG5vcm1hbCBpbnB1dFxuICAgIGNvbnN0IGhhc05ld2xpbmVzID0gc2FuaXRpemVkLmluY2x1ZGVzKCdcXG4nKTtcbiAgICBpZiAoaGFzTmV3bGluZXMpIHtcbiAgICAgIC8vIEZvciBtdWx0aS1saW5lIHRleHQgaW4gbm9ybWFsIGluc2VydGlvbiwgY29sbGFwc2UgdG8gc2luZ2xlIGxpbmUgd2l0aCBzcGFjZXNcbiAgICAgIGNvbnN0IGNvbGxhcHNlZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG58XFxyfFxcbi9nLCAnICcpO1xuICAgICAgdGhpcy5pbnNlcnRTaW5nbGVMaW5lVGV4dChjb2xsYXBzZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluc2VydFNpbmdsZUxpbmVUZXh0KHNhbml0aXplZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRTaW5nbGVMaW5lVGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkIGJlZm9yZSBzbGljaW5nXG4gICAgdGhpcy5jbGFtcEN1cnNvcigpO1xuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpICsgdGV4dCArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICB0aGlzLmN1cnNvciArPSB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgcmVtYWlucyB2YWxpZCBhZnRlciBtb2RpZmljYXRpb25cbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgLy8gU3VwcHJlc3MgcmVuZGVyIGR1cmluZyBwYXN0ZSBkZXRlY3Rpb24gdG8gcHJldmVudCB2aXN1YWwgbGVha1xuICAgIGNvbnN0IGluRW1pdFBhc3RlID0gdGhpcy5lbWl0UGFzdGVCdWZmZXIubGVuZ3RoID4gMCB8fCB0aGlzLmVtaXRQYXN0ZVRpbWVyICE9PSBudWxsO1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUgJiYgIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSAmJiAhaW5FbWl0UGFzdGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3QgaXNCdWZmZXJTb3VyY2UgPSB0ZXh0ID09PSB0aGlzLmJ1ZmZlcjtcblxuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIHN1Ym1pdCB0aGF0IGluc3RlYWQgb2YgdGhlIGJ1ZmZlciB0ZXh0XG4gICAgLy8gVGhpcyBoYW5kbGVzIGVkZ2UgY2FzZXMgd2hlcmUgc3VibWl0VGV4dCBpcyBjYWxsZWQgcHJvZ3JhbW1hdGljYWxseVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5zdXJlIGFueSBkZWZlcnJlZCBpbnB1dCBoYXMgYmVlbiBjb21taXR0ZWQgYmVmb3JlIHN1Ym1pc3Npb25cbiAgICB0aGlzLmNvbW1pdFBlbmRpbmdJbnNlcnQoKTtcbiAgICBpZiAoaXNCdWZmZXJTb3VyY2UpIHtcbiAgICAgIHRleHQgPSB0aGlzLmJ1ZmZlcjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIGNvbnN0IHNob3VsZFRyaW0gPSB0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLnRyaW07XG4gICAgICBjb25zdCBub3JtYWxpemVkQ2FwdHVyZSA9IHNob3VsZFRyaW0gPyB0ZXh0LnRyaW0oKSA6IHRleHQ7XG4gICAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMuYWxsb3dFbXB0eSAmJiAhbm9ybWFsaXplZENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKG5vcm1hbGl6ZWRDYXB0dXJlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBsZXQgbm9ybWFsaXplZCA9IHRleHQudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBGaW5hbCBwcm9tcHQgdmFsaWRhdGlvbiBiZWZvcmUgc3VibWlzc2lvbiB0byBBSVxuICAgIGlmICh0aGlzLmlucHV0UHJvdGVjdGlvbikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW5wdXRQcm90ZWN0aW9uLnZhbGlkYXRlUHJvbXB0U3VibWlzc2lvbihub3JtYWxpemVkKTtcbiAgICAgIGlmICh2YWxpZGF0aW9uLmJsb2NrZWQpIHtcbiAgICAgICAgLy8gUHJvbXB0IGJsb2NrZWQgLSBkb24ndCBzdWJtaXRcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBub3JtYWxpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYWRkIHNlY3JldHMgb3Igc2xhc2ggY29tbWFuZHMgdG8gaGlzdG9yeS9zY3JvbGxiYWNrXG4gICAgaWYgKCF0aGlzLnNlY3JldE1vZGUgJiYgIW5vcm1hbGl6ZWQuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICB0aGlzLmRpc3BsYXlVc2VyUHJvbXB0KG5vcm1hbGl6ZWQpO1xuICAgIH0gZWxzZSBpZiAoIXRoaXMuc2VjcmV0TW9kZSkge1xuICAgICAgLy8gU3RpbGwgdHJhY2sgc2xhc2ggY29tbWFuZHMgaW4gaGlzdG9yeSBmb3IgY29udmVuaWVuY2VcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5vcm1hbGl6ZWQpO1xuICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgIHRoaXMuZW1pdCgncXVldWUnLCBub3JtYWxpemVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KCdzdWJtaXQnLCBub3JtYWxpemVkKTtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RTcGFjZSA9IHRoaXMuYnVmZmVyLmluZGV4T2YoJyAnKTtcbiAgICBjb25zdCBoYXNBcmdUZXh0ID0gZmlyc3RTcGFjZSA+PSAwICYmIC9cXFMvLnRlc3QodGhpcy5idWZmZXIuc2xpY2UoZmlyc3RTcGFjZSArIDEpKTtcbiAgICAvLyBIaWRlIHNsYXNoIHN1Z2dlc3Rpb25zIHdoZW4gdGhlIHVzZXIgaXMgZWRpdGluZyBhcmd1bWVudHNcbiAgICBpZiAoZmlyc3RTcGFjZSA+PSAwICYmIHRoaXMuY3Vyc29yID4gZmlyc3RTcGFjZSAmJiBoYXNBcmdUZXh0KSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3JTbGljZSA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKTtcbiAgICBjb25zdCBjb21tYW5kU2xpY2UgPSBmaXJzdFNwYWNlID49IDAgPyBjdXJzb3JTbGljZS5zbGljZSgwLCBmaXJzdFNwYWNlKSA6IGN1cnNvclNsaWNlO1xuICAgIGNvbnN0IGZhbGxiYWNrU2xpY2UgPSBmaXJzdFNwYWNlID49IDAgPyB0aGlzLmJ1ZmZlci5zbGljZSgwLCBmaXJzdFNwYWNlKSA6IHRoaXMuYnVmZmVyO1xuICAgIGNvbnN0IHBhcnRpYWwgPSAoY29tbWFuZFNsaWNlLnRyaW1FbmQoKSB8fCBmYWxsYmFja1NsaWNlLnRyaW1FbmQoKSB8fCAnLycpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuc3VnZ2VzdGlvbkluZGV4XT8uY29tbWFuZDtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gdGhpcy5hdmFpbGFibGVDb21tYW5kc1xuICAgICAgLmZpbHRlcihjbWQgPT4gY21kLmNvbW1hbmQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHBhcnRpYWwpKVxuICAgICAgLnNsaWNlKDAsIDUpO1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwcmV2aW91cykge1xuICAgICAgY29uc3QgaWR4ID0gdGhpcy5zdWdnZXN0aW9ucy5maW5kSW5kZXgocyA9PiBzLmNvbW1hbmQgPT09IHByZXZpb3VzKTtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gaWR4ID49IDAgPyBpZHggOiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IDA7XG4gICAgfVxuICB9XG5cbiAgc2V0QXZhaWxhYmxlQ29tbWFuZHMoY29tbWFuZHM6IHR5cGVvZiB0aGlzLnN1Z2dlc3Rpb25zKTogdm9pZCB7XG4gICAgdGhpcy5hdmFpbGFibGVDb21tYW5kcyA9IGNvbW1hbmRzO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlTdWdnZXN0aW9uKHN1Ym1pdDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBzdWdnZXN0aW9uSW5kZXggaXMgdmFsaWQsIGRlZmF1bHQgdG8gZmlyc3QgaXRlbVxuICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgOiAwO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdO1xuICAgIGlmICghc2VsZWN0ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHN1Ym1pdCkge1xuICAgICAgdGhpcy5zdWJtaXRUZXh0KHNlbGVjdGVkLmNvbW1hbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9IGAke3NlbGVjdGVkLmNvbW1hbmR9IGA7XG4gICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICB9XG5cbiAgcHJpdmF0ZSBuYXZpZ2F0ZVN1Z2dlc3Rpb25zKGRpcmVjdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgfHwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJlc2V0IGluZGV4IGlmIHN1Z2dlc3Rpb25zIHdlcmUgY2xlYXJlZCBidXQgaW5kZXggd2Fzbid0XG4gICAgICBpZiAodGhpcy5zdWdnZXN0aW9uSW5kZXggIT09IC0xICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBjdXJyZW50IGluZGV4IGlzIHZhbGlkIGJlZm9yZSBjb21wdXRpbmcgbmV4dFxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgOiAtMTtcbiAgICBjb25zdCBuZXh0ID0gY3VycmVudEluZGV4ICsgZGlyZWN0aW9uO1xuICAgIGNvbnN0IGNsYW1wZWQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDEsIG5leHQpKTtcbiAgICBpZiAoY2xhbXBlZCA9PT0gdGhpcy5zdWdnZXN0aW9uSW5kZXggJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gY2xhbXBlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIEV2ZW50IHF1ZXVlIC0tLS0tLS0tLS0tLVxuXG4gIC8qKiBUcmFjayBsYXN0IGFkZGVkIGV2ZW50IHRvIHByZXZlbnQgZHVwbGljYXRlcyAqL1xuICBwcml2YXRlIGxhc3RBZGRlZEV2ZW50U2lnbmF0dXJlOiBzdHJpbmcgPSAnJztcblxuICBhZGRFdmVudCh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplRXZlbnRUeXBlKHR5cGUpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuXG4gICAgLy8gRGVkdXBsaWNhdGUgZXZlbnRzIGF0IHRoZSBzb3VyY2UgdG8gcHJldmVudCBkdXBsaWNhdGUgZGlzcGxheVxuICAgIC8vIFNraXAgZGVkdXBsaWNhdGlvbiBmb3IgcHJvbXB0cyAodXNlciBpbnB1dCBzaG91bGQgYWx3YXlzIHNob3cpXG4gICAgaWYgKG5vcm1hbGl6ZWQgIT09ICdwcm9tcHQnKSB7XG4gICAgICBjb25zdCBzaWduYXR1cmUgPSBgJHtub3JtYWxpemVkfToke2NvbnRlbnR9YDtcbiAgICAgIGlmIChzaWduYXR1cmUgPT09IHRoaXMubGFzdEFkZGVkRXZlbnRTaWduYXR1cmUpIHtcbiAgICAgICAgcmV0dXJuOyAvLyBTa2lwIGR1cGxpY2F0ZSBldmVudFxuICAgICAgfVxuICAgICAgdGhpcy5sYXN0QWRkZWRFdmVudFNpZ25hdHVyZSA9IHNpZ25hdHVyZTtcbiAgICB9XG5cbiAgICBpZiAoXG4gICAgICBub3JtYWxpemVkID09PSAncHJvbXB0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Jlc3BvbnNlJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rob3VnaHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnc3RyZWFtJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnYnVpbGQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGVzdCdcbiAgICApIHtcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnKSB7XG4gICAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudCh7XG4gICAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgaWYgKGZvcm1hdHRlZCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZCA6IGAke2Zvcm1hdHRlZH1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICAvLyBQcmlvcml0eSBxdWV1ZTogcHJvbXB0IGV2ZW50cyBhcmUgaW5zZXJ0ZWQgYXQgdGhlIGZyb250IHRvIGVuc3VyZSBpbW1lZGlhdGUgZGlzcGxheVxuICAgIC8vIFRoaXMgZ3VhcmFudGVlcyB1c2VyIGlucHV0IGlzIGVjaG9lZCBiZWZvcmUgYW55IGFzeW5jIHByb2Nlc3NpbmcgcmVzcG9uc2VzXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnKSB7XG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBub24tcHJvbXB0IGV2ZW50IGFuZCBpbnNlcnQgYmVmb3JlIGl0XG4gICAgICAvLyBUaGlzIG1haW50YWlucyBwcm9tcHQgb3JkZXIgd2hpbGUgZ2l2aW5nIHRoZW0gcHJpb3JpdHkgb3ZlciBvdGhlciBldmVudHNcbiAgICAgIGNvbnN0IGluc2VydEluZGV4ID0gdGhpcy5ldmVudFF1ZXVlLmZpbmRJbmRleChlID0+IGUudHlwZSAhPT0gJ3Byb21wdCcpO1xuICAgICAgaWYgKGluc2VydEluZGV4ID09PSAtMSkge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUuc3BsaWNlKGluc2VydEluZGV4LCAwLCBldmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtcmVuZGVyIHRoZSBwcm9tcHQvY29udHJvbCBiYXIgaW1tZWRpYXRlbHkuXG4gICAqIFRoaXMga2VlcHMgdGhlIGNoYXQgYm94IHBpbm5lZCBkdXJpbmcgbG9uZyBzdHJlYW1pbmcgcnVucyBpbnN0ZWFkIG9mIHdhaXRpbmdcbiAgICogZm9yIHRoZSBldmVudCBxdWV1ZSB0byBkcmFpbiBiZWZvcmUgdGhlIHByb21wdCByZWFwcGVhcnMuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclByb21wdE92ZXJsYXkoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUgfHwgdGhpcy5kaXNwb3NlZCB8fCAhdGhpcy5vdXRwdXQuaXNUVFkgfHwgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1F1ZXVlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZGlzcG9zZWQpIHJldHVybjtcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghZXZlbnQpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBjb2FsZXNjZWQgPSB0aGlzLmNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckV2ZW50KGNvYWxlc2NlZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYSByZW5kZXJpbmcgZmFpbHVyZSB0byBzdGFsbCB0aGUgZXZlbnQgcXVldWVcbiAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7IC8vIERvbid0IHRyeSB0byB3cml0ZSBhZnRlciBkaXNwb3NhbFxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnID8gZXJyb3IgOiAnVW5rbm93biByZW5kZXJlciBlcnJvcic7XG4gICAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUoYFxcbltyZW5kZXJlcl0gJHttZXNzYWdlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZGlzcG9zZWQgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrO1xuXG4gICAgICAgIC8vIE5vdGU6IEZvciBwcm9tcHQgZXZlbnRzLCB0aGUgb3ZlcmxheSBpcyBhbHJlYWR5IHJlbmRlcmVkIGluIHJlbmRlckV2ZW50KClcbiAgICAgICAgLy8gdmlhIHJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSkuIE5vIG5lZWQgdG8gcmVuZGVyIGFnYWluIGhlcmUuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgIC8vIEVuc3VyZSBwcm9tcHQgcmVuZGVyaW5nIGlzIGFsbG93ZWQgZm9yIHN1YnNlcXVlbnQgZXZlbnRzXG4gICAgICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTm8gZGVsYXkgZm9yIHByb21wdCBldmVudHMgLSByZW5kZXIgaW1tZWRpYXRlbHlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBTFdBWVMgcmVuZGVyIHByb21wdCBhZnRlciBxdWV1ZSBjb21wbGV0ZXMgdG8ga2VlcCBib3R0b20gVUkgcGVyc2lzdGVudFxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHN0YXR1cy90b2dnbGVzIHN0YXkgcGlubmVkIGFuZCByZXNwb25zZXMgYXJlIGZ1bGx5IHJlbmRlcmVkXG4gICAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2UgYWRqYWNlbnQgcmVzcG9uc2UvdGhvdWdodCBldmVudHMgaW50byBhIHNpbmdsZSBibG9jayBzbyBjb250aW51b3VzXG4gICAqIGNoYXQgdGV4dCByZW5kZXJzIHdpdGggb25lIGJ1bGxldCBpbnN0ZWFkIG9mIG9uZSBwZXIgY2h1bmsuXG4gICAqL1xuICBwcml2YXRlIGNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50OiBVSUV2ZW50KTogVUlFdmVudCB7XG4gICAgY29uc3QgaXNNZXJnZWFibGUgPSAodGFyZ2V0OiBVSUV2ZW50IHwgdW5kZWZpbmVkKTogdGFyZ2V0IGlzIFVJRXZlbnQgPT5cbiAgICAgIEJvb2xlYW4oXG4gICAgICAgIHRhcmdldCAmJlxuICAgICAgICAgICF0YXJnZXQuaXNDb21wYWN0ZWQgJiZcbiAgICAgICAgICAoKHRhcmdldC50eXBlID09PSAncmVzcG9uc2UnICYmIHRhcmdldC5yYXdUeXBlID09PSAncmVzcG9uc2UnKSB8fFxuICAgICAgICAgICAgKHRhcmdldC50eXBlID09PSAndGhvdWdodCcgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICd0aG91Z2h0JykpXG4gICAgICApO1xuXG4gICAgaWYgKCFpc01lcmdlYWJsZShldmVudCkpIHtcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgaXNNZXJnZWFibGUodGhpcy5ldmVudFF1ZXVlWzBdKSkge1xuICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpITtcbiAgICAgIGNvbnN0IG5lZWRzU2VwYXJhdG9yID1cbiAgICAgICAgZXZlbnQuY29udGVudC5sZW5ndGggPiAwICYmICFldmVudC5jb250ZW50LmVuZHNXaXRoKCdcXG4nKSAmJiAhbmV4dC5jb250ZW50LnN0YXJ0c1dpdGgoJ1xcbicpO1xuICAgICAgZXZlbnQuY29udGVudCA9IG5lZWRzU2VwYXJhdG9yID8gYCR7ZXZlbnQuY29udGVudH1cXG4ke25leHQuY29udGVudH1gIDogYCR7ZXZlbnQuY29udGVudH0ke25leHQuY29udGVudH1gO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCBwZW5kaW5nIHJlbmRlcmVyIGV2ZW50cy5cbiAgICogVXNlZnVsIGZvciBzdGFydHVwIGZsb3dzIChlLmcuLCB3ZWxjb21lIGJhbm5lcikgdG8gZ3VhcmFudGVlIHRoZSBzY3JvbGxiYWNrIGlzIGh5ZHJhdGVkXG4gICAqIGJlZm9yZSBjb250aW51aW5nIHdpdGggYWRkaXRpb25hbCBVSSB1cGRhdGVzLlxuICAgKi9cbiAgYXN5bmMgZmx1c2hFdmVudHModGltZW91dE1zOiBudW1iZXIgPSAyNTApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBLaWNrIG9mZiBwcm9jZXNzaW5nIGlmIGlkbGVcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlICYmIHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHdoaWxlICgodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkgJiYgRGF0ZS5ub3coKSAtIHN0YXJ0IDwgdGltZW91dE1zKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlbGF5KDUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckV2ZW50KGV2ZW50OiBVSUV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gQ2xlYXIgaW5pdGlhbGl6YXRpb24gZmxhZyB3aGVuIGZpcnN0IGJhbm5lciBpcyBkaXNwbGF5ZWRcbiAgICAvLyBUaGlzIGFsbG93cyBwcm9tcHQgcmVuZGVyaW5nIHRvIGJlZ2luIGFmdGVyIHRoZSB3ZWxjb21lIGJhbm5lclxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJyAmJiB0aGlzLmluaXRpYWxpemluZykge1xuICAgICAgdGhpcy5pbml0aWFsaXppbmcgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFBsYWluID0gdGhpcy5mb3JtYXRDb250ZW50KGV2ZW50KTtcbiAgICAgIGlmIChmb3JtYXR0ZWRQbGFpbikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkUGxhaW4uZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkUGxhaW4gOiBgJHtmb3JtYXR0ZWRQbGFpbn1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgaWYgKCFmb3JtYXR0ZWQpIHJldHVybjtcblxuICAgIC8vIERlZHVwbGljYXRlIHN0cmVhbWluZyBhbmQgcmVzcG9uc2UgY29udGVudCB0byBwcmV2ZW50IGR1cGxpY2F0ZXNcbiAgICBjb25zdCBzaWduYXR1cmUgPSBgJHtldmVudC5yYXdUeXBlfToke2V2ZW50LmNvbnRlbnR9YDtcbiAgICBpZiAoKGV2ZW50LnR5cGUgPT09ICdzdHJlYW0nIHx8IGV2ZW50LnR5cGUgPT09ICdyZXNwb25zZScpICYmIHNpZ25hdHVyZSA9PT0gdGhpcy5sYXN0UmVuZGVyZWRFdmVudEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3Byb21wdCcpIHtcbiAgICAgIHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkgPSBzaWduYXR1cmU7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIHByb21wdCBhcmVhIGJlZm9yZSB3cml0aW5nIG5ldyBjb250ZW50XG4gICAgaWYgKHRoaXMucHJvbXB0SGVpZ2h0ID4gMCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG5cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3N0cmVhbScgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgJiYgZm9ybWF0dGVkLnRyaW0oKSkge1xuICAgICAgLy8gS2VlcCBzY3JvbGxiYWNrIG9yZGVyaW5nIHByZWRpY3RhYmxlIHdoZW4gcHJldmlvdXMgb3V0cHV0IGVuZGVkIG1pZC1saW5lXG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFxuJyk7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLm91dHB1dC53cml0ZShmb3JtYXR0ZWQpO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpO1xuXG4gICAgLy8gSW1tZWRpYXRlbHkgcmVzdG9yZSB0aGUgcHJvbXB0IG92ZXJsYXkgc28gdGhlIGNoYXQgYm94IHN0YXlzIHBpbm5lZCBkdXJpbmcgc3RyZWFtaW5nXG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0T3ZlcmxheSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSk6IENhbm9uaWNhbEV2ZW50VHlwZSB8IG51bGwge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgcmV0dXJuICdwcm9tcHQnO1xuICAgICAgY2FzZSAndGhvdWdodCc6XG4gICAgICAgIHJldHVybiAndGhvdWdodCc7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgY2FzZSAnc3RyZWFtaW5nJzpcbiAgICAgICAgcmV0dXJuICdzdHJlYW0nO1xuICAgICAgY2FzZSAndG9vbCc6XG4gICAgICBjYXNlICd0b29sLWNhbGwnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wnO1xuICAgICAgY2FzZSAndG9vbC1yZXN1bHQnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wtcmVzdWx0JztcbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuICdidWlsZCc7XG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuICd0ZXN0JztcbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGNhc2UgJ2Jhbm5lcic6XG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgICByZXR1cm4gJ3Jlc3BvbnNlJztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoZXZlbnQ6IFVJRXZlbnQpOiBzdHJpbmcge1xuICAgIC8vIENvbXBhY3RlZCBibG9ja3MgYWxyZWFkeSBoYXZlIHNlcGFyYXRvciBhbmQgZm9ybWF0dGluZ1xuICAgIGlmIChldmVudC5pc0NvbXBhY3RlZCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnJhd1R5cGUgPT09ICdiYW5uZXInKSB7XG4gICAgICAvLyBCYW5uZXJzIGRpc3BsYXkgd2l0aG91dCBidWxsZXQgcHJlZml4XG4gICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbUVuZCgpKTtcbiAgICAgIHJldHVybiBgJHtsaW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIENvbXBhY3QsIHVzZXItZnJpZW5kbHkgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgLy8gVXNlciBwcm9tcHQgLSBqdXN0IHRoZSB0ZXh0IChwcm9tcHQgYm94IGhhbmRsZXMgc3R5bGluZylcbiAgICAgICAgcmV0dXJuIGAke3RoZW1lLnByaW1hcnkoJz4nKX0gJHtldmVudC5jb250ZW50fVxcbmA7XG5cbiAgICAgIGNhc2UgJ3Rob3VnaHQnOiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VyYXRlZCA9IHRoaXMuY3VyYXRlUmVhc29uaW5nQ29udGVudChldmVudC5jb250ZW50KTtcbiAgICAgICAgaWYgKCFjdXJhdGVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXJUaG91Z2h0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ID0ge1xuICAgICAgICAgIHRleHQ6IGN1cmF0ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaGlua2luZ0Jsb2NrKGN1cmF0ZWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sJzoge1xuICAgICAgICAvLyBDb21wYWN0IHRvb2wgZGlzcGxheTog4pqhVG9vbE5hbWUg4oaSIHJlc3VsdFxuICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnQuY29udGVudC5yZXBsYWNlKC9eW+KPuuKameKXi11cXHMqLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbENhbGwoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0Jzoge1xuICAgICAgICAvLyBJbmxpbmUgcmVzdWx0OiDilJTilIAgc3VtbWFyeVxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbFJlc3VsdChldmVudC5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYnVpbGQnOlxuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCB7IGxhYmVsOiAnYnVpbGQnLCBsYWJlbENvbG9yOiB0aGVtZS53YXJuaW5nIH0pO1xuXG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ3Rlc3QnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgICBjYXNlICdzdHJlYW0nOiB7XG4gICAgICAgIC8vIFN0cmVhbWluZyBjb250ZW50IGlzIHRoZSBtb2RlbCdzIHJlc3BvbnNlIC0gcGFzcyB0aHJvdWdoIGRpcmVjdGx5XG4gICAgICAgIC8vIElNUE9SVEFOVDogRG9uJ3QgZmlsdGVyIHN0cmVhbWluZyBjaHVua3Mgd2l0aCBpc0dhcmJhZ2VPdXRwdXQgYmVjYXVzZTpcbiAgICAgICAgLy8gMS4gQ2h1bmtzIGFycml2ZSBjaGFyYWN0ZXItYnktY2hhcmFjdGVyIG9yIGluIHNtYWxsIHBpZWNlc1xuICAgICAgICAvLyAyLiBTbWFsbCBjaHVua3MgbGlrZSBcIi5cIiBvciBcIjpcIiBhcmUgdmFsaWQgcGFydHMgb2Ygc2VudGVuY2VzXG4gICAgICAgIC8vIDMuIEZpbHRlcmluZyB3b3VsZCBicmVhayB0aGUgc3RyZWFtaW5nIGRpc3BsYXlcbiAgICAgICAgLy8gT25seSBmaWx0ZXIgY29tcGxldGVseSBlbXB0eSBjb250ZW50XG4gICAgICAgIGlmICghZXZlbnQuY29udGVudCkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBBY2N1bXVsYXRlIHN0cmVhbWluZyBjb250ZW50IGZvciBwb3RlbnRpYWwgcG9zdC1wcm9jZXNzaW5nXG4gICAgICAgIHRoaXMuc3RyZWFtaW5nQ29udGVudEJ1ZmZlciArPSBldmVudC5jb250ZW50O1xuICAgICAgICAvLyBUcmFjayBuZXdsaW5lcyBmb3IgbGluZSBjb3VudGluZ1xuICAgICAgICBjb25zdCBuZXdsaW5lcyA9IChldmVudC5jb250ZW50Lm1hdGNoKC9cXG4vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgICAgdGhpcy5zdHJlYW1pbmdMaW5lc1dyaXR0ZW4gKz0gbmV3bGluZXM7XG4gICAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgICAgfVxuXG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gUHJlbWl1bSByZXNwb25zZSBmb3JtYXR0aW5nIHdpdGggYXNzaXN0YW50IHN0eWxpbmdcbiAgICAgICAgY29uc3QgaXNFcnJvciA9IGV2ZW50LnJhd1R5cGUgPT09ICdlcnJvcic7XG4gICAgICAgIGlmIChpc0Vycm9yKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBcbiAgICAgICAgICAgIGxhYmVsOiAnZXJyb3InLCBcbiAgICAgICAgICAgIGxhYmVsQ29sb3I6IHRoZW1lLmVycm9yLFxuICAgICAgICAgICAgdGhvdWdodFR5cGU6ICdkYW5nZXInXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gQXNzaXN0YW50IHJlc3BvbnNlIHdpdGggcHJlbWl1bSBzdHlsaW5nXG4gICAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0QXNzaXN0YW50UmVzcG9uc2UoZXZlbnQuY29udGVudCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUHJvZ3JhbW1hdGljIGdhcmJhZ2UgZGV0ZWN0aW9uIC0gY2hlY2tzIGlmIGNvbnRlbnQgbG9va3MgbGlrZSBpbnRlcm5hbC9zeXN0ZW0gb3V0cHV0XG4gICAqIHRoYXQgc2hvdWxkbid0IGJlIHNob3duIHRvIHVzZXJzLiBVc2VzIHN0cnVjdHVyYWwgY2hlY2tzLCBub3QgcGF0dGVybiBtYXRjaGluZy5cbiAgICovXG4gIHByaXZhdGUgaXNHYXJiYWdlT3V0cHV0KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghY29udGVudCB8fCBjb250ZW50LnRyaW0oKS5sZW5ndGggPT09IDApIHJldHVybiB0cnVlO1xuXG4gICAgY29uc3QgdHJpbW1lZCA9IGNvbnRlbnQudHJpbSgpO1xuXG4gICAgLy8gVmVyeSBzaG9ydCBjb250ZW50IGNoZWNrcyAtIGNhdGNoIGxlYWtlZCBwdW5jdHVhdGlvbiBmcmFnbWVudHMgbGlrZSBcIi5cIiBvciBcIjpcIlxuICAgIGlmICh0cmltbWVkLmxlbmd0aCA8PSAzKSB7XG4gICAgICAvLyBTaW5nbGUgcHVuY3R1YXRpb24gbWFya3Mgb3IgdmVyeSBzaG9ydCBwdW5jdHVhdGlvbiBzZXF1ZW5jZXMgYXJlIGdhcmJhZ2VcbiAgICAgIGlmICgvXlsuLDo7IT8qI1xcLV89K3xcXFxcLzw+KCl7fVtcXF1gJ1wifl5AJiUkXSskLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIGNvbnRlbnQgaXMganVzdCBwdW5jdHVhdGlvbiBvbiBtdWx0aXBsZSBsaW5lcyAobGVha2VkIHJlYXNvbmluZylcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHB1bmN0T25seUxpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4ge1xuICAgICAgY29uc3QgbGluZVRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgIHJldHVybiBsaW5lVHJpbW1lZC5sZW5ndGggPiAwICYmIC9eWy4sOjshPyojXFwtXz0rfFxcXFwvPD4oKXt9W1xcXWAnXCJ+XkAmJSRcXHNdKyQvLnRlc3QobGluZVRyaW1tZWQpO1xuICAgIH0pO1xuICAgIC8vIElmIEFMTCBub24tZW1wdHkgbGluZXMgYXJlIGp1c3QgcHVuY3R1YXRpb24sIGl0J3MgZ2FyYmFnZVxuICAgIGNvbnN0IG5vbkVtcHR5TGluZXMgPSBsaW5lcy5maWx0ZXIobCA9PiBsLnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgICBpZiAobm9uRW1wdHlMaW5lcy5sZW5ndGggPiAwICYmIHB1bmN0T25seUxpbmVzLmxlbmd0aCA9PT0gbm9uRW1wdHlMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRlbnQgc3RhcnRpbmcgd2l0aCA8IHRoYXQgaXNuJ3QgdmFsaWQgbWFya2Rvd24vY29kZVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJzwnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8aHR0cCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzwhJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRhaW5zIFwidG89ZnVuY3Rpb25zLlwiIG9yIFwidG89dG9vbHMuXCIgKGludGVybmFsIHJvdXRpbmcpXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ3RvPWZ1bmN0aW9ucy4nKSB8fCBjb250ZW50LmluY2x1ZGVzKCd0bz10b29scy4nKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogbG9va3MgbGlrZSBpbnRlcm5hbCBpbnN0cnVjdGlvbiAocXVvdGVkIHN5c3RlbSB0ZXh0KVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJ1wiJykgJiYgY29udGVudC5pbmNsdWRlcygnYmxvY2snKSAmJiBjb250ZW50LmluY2x1ZGVzKCd0b29sJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IHZlcnkgc2hvcnQgY29udGVudCB0aGF0J3MganVzdCB0aW1pbmcgaW5mb1xuICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IDMwICYmIC9lbGFwc2VkfHNlY29uZHM/fG1zXFxiL2kudGVzdChjb250ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogbW9zdGx5IHB1bmN0dWF0aW9uL3N5bWJvbHMgLSBsZWFrZWQgcmVhc29uaW5nIGZyYWdtZW50c1xuICAgIGNvbnN0IG1lYW5pbmdmdWxMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IHtcbiAgICAgIGNvbnN0IGxpbmVUcmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICBpZiAoIWxpbmVUcmltbWVkKSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBMaW5lIG11c3QgaGF2ZSBhdCBsZWFzdCAzMCUgYWxwaGFudW1lcmljIGNvbnRlbnRcbiAgICAgIGNvbnN0IGFscGhhTnVtID0gKGxpbmVUcmltbWVkLm1hdGNoKC9bYS16QS1aMC05XS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgcmV0dXJuIGxpbmVUcmltbWVkLmxlbmd0aCA+IDAgJiYgYWxwaGFOdW0gLyBsaW5lVHJpbW1lZC5sZW5ndGggPj0gMC4zO1xuICAgIH0pO1xuICAgIC8vIElmIGxlc3MgdGhhbiAzMCUgb2YgbGluZXMgYXJlIG1lYW5pbmdmdWwsIGl0J3MgZ2FyYmFnZVxuICAgIGlmIChsaW5lcy5sZW5ndGggPiAzICYmIG1lYW5pbmdmdWxMaW5lcy5sZW5ndGggLyBsaW5lcy5sZW5ndGggPCAwLjMpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGdpYmJlcmlzaCAtIGhpZ2ggcmF0aW8gb2Ygbm9uLXdvcmQgY2hhcmFjdGVyc1xuICAgIGNvbnN0IGFscGhhQ291bnQgPSAoY29udGVudC5tYXRjaCgvW2EtekEtWl0vZykgfHwgW10pLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbENvdW50ID0gY29udGVudC5yZXBsYWNlKC9cXHMvZywgJycpLmxlbmd0aDtcbiAgICBpZiAodG90YWxDb3VudCA+IDIwICYmIGFscGhhQ291bnQgLyB0b3RhbENvdW50IDwgMC40KSB7XG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gTGVzcyB0aGFuIDQwJSBsZXR0ZXJzID0gbGlrZWx5IGdhcmJhZ2VcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogU2FuaXRpemUgdG9vbCByZXN1bHQgY29udGVudCB0byByZW1vdmUgbGVha2VkIHJlYXNvbmluZy90aGlua2luZyBvdXRwdXQuXG4gICAqIFRoaXMgZmlsdGVycyBvdXQgZnJhZ21lbnRzIHRoYXQgbG9vayBsaWtlIGludGVybmFsIG1vZGVsIG91dHB1dC5cbiAgICovXG4gIHByaXZhdGUgc2FuaXRpemVUb29sUmVzdWx0Q29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuICcnO1xuXG4gICAgLy8gU3BsaXQgaW50byBsaW5lcyBhbmQgZmlsdGVyIG91dCBnYXJiYWdlIGxpbmVzXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBjbGVhbkxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCB0cmltbWVkID0gbGluZS50cmltKCk7XG5cbiAgICAgIC8vIFNraXAgZW1wdHkgbGluZXMgYXQgc3RhcnRcbiAgICAgIGlmIChjbGVhbkxpbmVzLmxlbmd0aCA9PT0gMCAmJiAhdHJpbW1lZCkgY29udGludWU7XG5cbiAgICAgIC8vIFNraXAgbGluZXMgdGhhdCBsb29rIGxpa2UgbGVha2VkIHJlYXNvbmluZyBmcmFnbWVudHNcbiAgICAgIC8vIENvbW1vbiBwYXR0ZXJuczogc2luZ2xlIHB1bmN0dWF0aW9uLCBtYXJrZG93biBhcnRpZmFjdHMsIGVtb2ppIGZyYWdtZW50c1xuICAgICAgaWYgKC9eWylcXF19PipgJ1wiXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcbiAgICAgIGlmICgvXlsqX117Mix9JC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgKiogb3IgX19cbiAgICAgIGlmICgvXlt84pSC4pSDXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCB2ZXJ0aWNhbCBiYXJzXG4gICAgICBpZiAoL15b4pSA4pSB4pWQXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBob3Jpem9udGFsIGxpbmVzXG4gICAgICBpZiAoL15cXC57Mix9JC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgZG90c1xuICAgICAgaWYgKC9eW1xcc++4j10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3Qgd2hpdGVzcGFjZS9lbW9qaSBtb2RpZmllcnNcbiAgICAgIGlmICgvXls6XFxzXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBjb2xvbnMvd2hpdGVzcGFjZVxuICAgICAgaWYgKC9eWyxcXHNdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGNvbW1hcy93aGl0ZXNwYWNlXG5cbiAgICAgIC8vIFNraXAgbWFya2Rvd24gYm9sZC9pdGFsaWMgZnJhZ21lbnRzIHRoYXQgbGVha2VkXG4gICAgICBpZiAoL15cXCp7MSwyfVteKl0qXFwqezAsMn0kLy50ZXN0KHRyaW1tZWQpICYmIHRyaW1tZWQubGVuZ3RoIDwgMTAgJiYgIS9cXHd7Myx9Ly50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGFyZSBqdXN0IHNob3J0IGZyYWdtZW50cyB3aXRoIGhpZ2ggcHVuY3R1YXRpb24gcmF0aW9cbiAgICAgIGNvbnN0IGFscGhhSW5MaW5lID0gKHRyaW1tZWQubWF0Y2goL1thLXpBLVowLTldL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICBpZiAodHJpbW1lZC5sZW5ndGggPiAwICYmIHRyaW1tZWQubGVuZ3RoIDwgMjAgJiYgYWxwaGFJbkxpbmUgLyB0cmltbWVkLmxlbmd0aCA8IDAuMykgY29udGludWU7XG5cbiAgICAgIC8vIFNraXAgdmVyeSBzaG9ydCBsaW5lcyB0aGF0IGFyZSBqdXN0IHB1bmN0dWF0aW9uIG9yIHNpbmdsZSBjaGFycyAoZXhjZXB0IG51bWJlcnMpXG4gICAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gMiAmJiAhL15cXGQrJC8udGVzdCh0cmltbWVkKSAmJiAhL15bYS16QS1aXXsyfSQvLnRlc3QodHJpbW1lZCkpIHtcbiAgICAgICAgLy8gQWxsb3cgc3BlY2lmaWMgc2hvcnQgcGF0dGVybnMgbGlrZSBcIk9LXCIsIFwiMFwiLCBcIjFcIiBldGMuXG4gICAgICAgIGlmICghL14oPzpva3xub3x5ZXN8XFxkKykkL2kudGVzdCh0cmltbWVkKSkgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFNraXAgbGluZXMgdGhhdCBsb29rIGxpa2Ugc3RyYXkgcGFyZW50aGVzZXMgb3IgYnJhY2tldHMgZnJvbSByZWFzb25pbmdcbiAgICAgIGlmICgvXlsoKVtcXF17fV0rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG5cbiAgICAgIC8vIFNraXAgbGluZXMgdGhhdCBsb29rIGxpa2UgbWFya2Rvd24gY29kZSBmZW5jZSBhcnRpZmFjdHNcbiAgICAgIGlmICgvXmBgYFxccyokLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcblxuICAgICAgY2xlYW5MaW5lcy5wdXNoKGxpbmUpO1xuICAgIH1cblxuICAgIC8vIFRyaW0gdHJhaWxpbmcgZW1wdHkgbGluZXNcbiAgICB3aGlsZSAoY2xlYW5MaW5lcy5sZW5ndGggPiAwICYmICFjbGVhbkxpbmVzW2NsZWFuTGluZXMubGVuZ3RoIC0gMV0/LnRyaW0oKSkge1xuICAgICAgY2xlYW5MaW5lcy5wb3AoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gY2xlYW5MaW5lcy5qb2luKCdcXG4nKS50cmltKCk7XG4gIH1cblxuICBwcml2YXRlIGN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKS5yZXBsYWNlKC9cXHIvZywgJ1xcbicpLnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgbGltaXRlZCA9XG4gICAgICBub3JtYWxpemVkLmxlbmd0aCA+IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzXG4gICAgICAgID8gbm9ybWFsaXplZC5zbGljZSgwLCB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycylcbiAgICAgICAgOiBub3JtYWxpemVkO1xuXG4gICAgY29uc3QgbWF4U2VnbWVudHMgPSB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyAqIDM7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBsaW1pdGVkXG4gICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAuZmxhdE1hcChsaW5lID0+IGxpbmUuc3BsaXQoLyg/PD1bLj8hXSlcXHMrLykpXG4gICAgICAubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC9eW+KAoirij7ril4tcXC1cXHUyMDIyXStcXHMqLywgJycpLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZGVkdXBlZDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTZWdtZW50ID0gc2VnbWVudC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBjb25zdCBrZXkgPSBub3JtYWxpemVkU2VnbWVudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHNlZW4uaGFzKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVuLmFkZChrZXkpO1xuICAgICAgZGVkdXBlZC5wdXNoKG5vcm1hbGl6ZWRTZWdtZW50KTtcbiAgICAgIGlmIChkZWR1cGVkLmxlbmd0aCA+PSBtYXhTZWdtZW50cykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVkdXBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHByaW9yaXRpemVkID0gdGhpcy5wcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMoZGVkdXBlZCk7XG4gICAgaWYgKHByaW9yaXRpemVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGltaXRlZFNlbGVjdGlvbiA9IHByaW9yaXRpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzKTtcbiAgICBjb25zdCBidWxsZXRlZCA9IGxpbWl0ZWRTZWxlY3Rpb24ubWFwKGxpbmUgPT4gdGhpcy5lbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZSkpO1xuXG4gICAgcmV0dXJuIGJ1bGxldGVkLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoL14oW+KAoirij7ril4stXXxcXGQrWy4pXSlcXHMvLnRlc3QobGluZSkpIHtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICByZXR1cm4gYOKAoiAke2xpbmV9YDtcbiAgfVxuXG4gIHByaXZhdGUgbG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgL14oXFxkK1suKV1cXHN8c3RlcFxccypcXGQrfHBsYW5cXGJ8bmV4dFxcYnx0aGVuXFxifGdvYWxcXGIpL2kudGVzdChsaW5lKSB8fFxuICAgICAgL15bLSrigKJdXFxzLy50ZXN0KGxpbmUpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCctPicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCfihpInKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygnOiAnKSB8fFxuICAgICAgL1xcYih0ZXN0fHZlcmlmeXx2YWxpZGF0ZXxjaGVja3xidWlsZHxydW58ZGVwbG95fGRpZmZ8bGludHx0eXBlID9jaGVja3xmaXh8YnVnfGlzc3VlfHJpc2t8bWl0aWdhdGV8aW52ZXN0aWdhdGUpXFxiL2kudGVzdChsaW5lKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFzZWdtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzY29yZWQgPSBzZWdtZW50cy5tYXAoKHRleHQsIGluZGV4KSA9PiAoe1xuICAgICAgdGV4dCxcbiAgICAgIGluZGV4LFxuICAgICAgc2NvcmU6IHRoaXMucmVhc29uaW5nU2lnbmFsU2NvcmUodGV4dCksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgaGFzU2lnbmFsID0gc2NvcmVkLnNvbWUoaXRlbSA9PiBpdGVtLnNjb3JlID4gMCk7XG4gICAgaWYgKCFoYXNTaWduYWwpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICBzY29yZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGIuc2NvcmUgIT09IGEuc2NvcmUpIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29yZWQubWFwKGl0ZW0gPT4gaXRlbS50ZXh0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhc29uaW5nU2lnbmFsU2NvcmUobGluZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGNvbnN0IGxvd2VyID0gbGluZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRoaXMubG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMztcbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb25LZXl3b3JkcyA9IFtcbiAgICAgICd0b29sJywgJ2NvbW1hbmQnLCAnc2NyaXB0JywgJ2NvbnRleHQnLCAnc3VtbWFyJywgJ3Jpc2snLCAnaXNzdWUnLFxuICAgICAgJ2ludmVzdGlnYXRlJywgJ3Jvb3QgY2F1c2UnLCAncmVtZWRpYXQnLCAnbWl0aWdhdCcsICdmaXgnLCAncGF0Y2gnLFxuICAgICAgJ3Rlc3QnLCAndmVyaWZ5JywgJ3ZhbGlkYXRlJywgJ2NoZWNrJywgJ2J1aWxkJywgJ2RlcGxveScsICdydW4nLFxuICAgICAgJ2RpZmYnLCAnbGludCcsICd0eXBlY2hlY2snLCAnYmVuY2htYXJrJyxcbiAgICBdO1xuICAgIGlmIChhY3Rpb25LZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAyO1xuICAgIH1cblxuICAgIGlmICgvWyM64oaSXXwtPi8udGVzdChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoL14oaSgnfCBhKW18aSB3aWxsfGxldCBtZXxzdGFydGluZ3xub3d8b2t8c3VyZSlcXGIvaS50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIGlmIChsaW5lLmxlbmd0aCA+IDEyMCkge1xuICAgICAgc2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJlbmRlclRob3VnaHQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRMb3dlciA9IG5vcm1hbGl6ZWQudG9Mb3dlckNhc2UoKTtcbiAgICBcbiAgICAvLyBFeGFjdCBkdXBsaWNhdGUgZGV0ZWN0aW9uXG4gICAgaWYgKHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ICYmIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LnRleHQgPT09IG5vcm1hbGl6ZWRMb3dlcikge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU2VtYW50aWMgZHVwbGljYXRlIGRldGVjdGlvbiAtIGNoZWNrIGlmIG5ldyB0aG91Z2h0IGlzIGEgc3Vic2V0IG9mIHByZXZpb3VzIHRob3VnaHRcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQpIHtcbiAgICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dDtcbiAgICAgIGNvbnN0IGN1cnJlbnQgPSBub3JtYWxpemVkTG93ZXI7XG4gICAgICBcbiAgICAgIC8vIElmIGN1cnJlbnQgdGhvdWdodCBjb250YWlucyBtb3N0IG9mIHByZXZpb3VzIHRob3VnaHQgKG9yIHZpY2UgdmVyc2EpLCBpdCdzIGxpa2VseSBhIGR1cGxpY2F0ZVxuICAgICAgY29uc3Qgd29yZHNQcmV2aW91cyA9IHByZXZpb3VzLnNwbGl0KC9cXHMrLykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAzKTtcbiAgICAgIGNvbnN0IHdvcmRzQ3VycmVudCA9IGN1cnJlbnQuc3BsaXQoL1xccysvKS5maWx0ZXIodyA9PiB3Lmxlbmd0aCA+IDMpO1xuICAgICAgXG4gICAgICBpZiAod29yZHNQcmV2aW91cy5sZW5ndGggPiAwICYmIHdvcmRzQ3VycmVudC5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNoYXJlZFdvcmRzID0gd29yZHNDdXJyZW50LmZpbHRlcih3b3JkID0+IHdvcmRzUHJldmlvdXMuaW5jbHVkZXMod29yZCkpO1xuICAgICAgICBjb25zdCBzaW1pbGFyaXR5ID0gc2hhcmVkV29yZHMubGVuZ3RoIC8gTWF0aC5tYXgod29yZHNQcmV2aW91cy5sZW5ndGgsIHdvcmRzQ3VycmVudC5sZW5ndGgpO1xuICAgICAgICBcbiAgICAgICAgLy8gSWYgc2ltaWxhcml0eSA+IDcwJSBhbmQgd2l0aGluIHRpbWUgd2luZG93LCBmaWx0ZXIgaXQgb3V0XG4gICAgICAgIGlmIChzaW1pbGFyaXR5ID4gMC43ICYmIG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEZpbHRlciBvdXQgdmVyeSBzaG9ydCBvciB0cml2aWFsIHRob3VnaHRzXG4gICAgY29uc3Qgd29yZENvdW50ID0gbm9ybWFsaXplZExvd2VyLnNwbGl0KC9cXHMrLykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAyKS5sZW5ndGg7XG4gICAgaWYgKHdvcmRDb3VudCA8IDMgJiYgbm9ybWFsaXplZExvd2VyLmxlbmd0aCA8IDMwKSB7XG4gICAgICAvLyBUb28gc2hvcnQgdG8gYmUgbWVhbmluZ2Z1bFxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIEZpbHRlciBvdXQgY29tbW9uIG1lYW5pbmdsZXNzIHBhdHRlcm5zXG4gICAgY29uc3QgbWVhbmluZ2xlc3NQYXR0ZXJucyA9IFtcbiAgICAgIC9eaSg/Oic/bGw/KT9cXHMrKD86d2lsbFxccyspPyg/Om5vd1xccyspPyg/OnByb2NlZWR8Y29udGludWV8Z298bW92ZXxzdGFydCkvaSxcbiAgICAgIC9eKD86bGV0IG1lfGkgd2lsbHxpJ2xsfGkgYW18aSdtKVxccysoPzpjaGVja3xsb29rfHNlZXxleGFtaW5lfHJldmlld3xhbmFseXplKS9pLFxuICAgICAgL15wcm9jZWVkaW5nXFxzKyg/OndpdGh8dG8pL2ksXG4gICAgICAvXmNvbnRpbnVpbmdcXHMrKD86d2l0aHx0bykvaSxcbiAgICAgIC9ebW92aW5nXFxzKyg/Om9ufGZvcndhcmR8dG8pL2ksXG4gICAgICAvXnN0YXJ0aW5nXFxzKyg/OndpdGh8dG8pL2ksXG4gICAgICAvXm5vd1xccysoPzppfGxldCBtZXx3ZXxsZXQncykvaSxcbiAgICAgIC9eKD86b2t8YWxyaWdodHx3ZWxsKVxccyosP1xccyooPzpub3d8dGhlbnxzb3xsZXQpL2ksXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBtZWFuaW5nbGVzc1BhdHRlcm5zKSB7XG4gICAgICBpZiAocGF0dGVybi50ZXN0KG5vcm1hbGl6ZWQpKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdGV4dCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTog4o+6IHByZWZpeCB3aXRoIHdyYXBwZWQgY29udGludWF0aW9uIGxpbmVzXG4gICAqIEV4YW1wbGU6XG4gICAqICAg4o+6IFRoZSBBSSByYW4gdG9vbHMgYnV0IGdhdmUgbm8gcmVzcG9uc2UuIE5lZWQgdG8gZml4XG4gICAqICAgICB0aGUgcmVzcG9uc2UgaGFuZGxpbmcuIExldCBtZSBjaGVjayB3aGVyZSB0aGUgQUknc1xuICAgKiAgICAgdGV4dCByZXNwb25zZSBzaG91bGQgYmUgZGlzcGxheWVkOlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDbGF1ZGVDb2RlQmxvY2soY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDI0LCBNYXRoLm1pbih0aGlzLnNhZmVXaWR0aCgpIC0gNCwgMTEwKSk7IC8vIFJlc3BvbnNpdmUgdG8gdGVybWluYWwgd2lkdGhcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAobGV0IGxpbmVJZHggPSAwOyBsaW5lSWR4IDwgbGluZXMubGVuZ3RoOyBsaW5lSWR4KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tsaW5lSWR4XSE7XG4gICAgICBpZiAoIWxpbmUudHJpbSgpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKCcnKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFdvcmQtd3JhcCBlYWNoIGxpbmVcbiAgICAgIGNvbnN0IHdvcmRzID0gbGluZS5zcGxpdCgvKFxccyspLyk7XG4gICAgICBsZXQgY3VycmVudExpbmUgPSAnJztcblxuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGlmICgoY3VycmVudExpbmUgKyB3b3JkKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgICAgICAvLyBGaXJzdCBsaW5lIG9mIHRoaXMgcGFyYWdyYXBoIGdldHMg4o+6LCByZXN0IGdldCBpbmRlbnRcbiAgICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke3ByZWZpeH0ke2N1cnJlbnRMaW5lLnRyaW1FbmQoKX1gKTtcbiAgICAgICAgICBjdXJyZW50TGluZSA9IHdvcmQudHJpbVN0YXJ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudExpbmUgKz0gd29yZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdC5sZW5ndGggPT09IDAgJiYgbGluZUlkeCA9PT0gMCA/IGAke2J1bGxldH0gYCA6ICcgICc7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke3ByZWZpeH0ke2N1cnJlbnRMaW5lLnRyaW1FbmQoKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCBjYWxsIGluIENsYXVkZSBDb2RlIHN0eWxlOlxuICAgKiAgIOKPuiBbU2VhcmNoXSBwYXR0ZXJuOiBcImZvb1wiLCBwYXRoOiBcInNyY1wiLFxuICAgKiAgICAgICAgICAgICAgb3V0cHV0X21vZGU6IFwiY29udGVudFwiLCBoZWFkX2xpbWl0OiAzMFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJndW1lbnRzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFwoKC4qKVxcKSQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgLy8gU2ltcGxlIGZvcm1hdCB3aXRob3V0IGFyZ3NcbiAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oXFx3KykvKTtcbiAgICAgIGlmIChuYW1lTWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQoYFske25hbWVNYXRjaFsxXX1dYCl9XFxuYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV07XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdITtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scyAtIDQsIDU2KTtcblxuICAgIC8vIEZvcm1hdDog4o+6IFtUb29sTmFtZV0gYXJncy4uLlxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQoYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgNTsgLy8gXCLij7ogW1Rvb2xOYW1lXSBcIiB2aXNpYmxlIGxlbmd0aFxuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQocHJlZml4TGVuICsgNCk7IC8vIEV4dHJhIGluZGVudCBmb3Igd3JhcHBlZCBhcmdzXG5cbiAgICAvLyBQYXJzZSBhbmQgZm9ybWF0IGFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlVG9vbEFyZ3MoYXJnc1N0cik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4LnRyaW1FbmQoKX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IHByZWZpeDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXJnID0gYXJnc1tpXSE7XG4gICAgICBjb25zdCBhcmdUZXh0ID0gYCR7dGhlbWUudWkubXV0ZWQoYXJnLmtleSArICc6Jyl9ICR7dGhpcy5mb3JtYXRBcmdWYWx1ZShhcmcua2V5LCBhcmcudmFsdWUpfWA7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBpIDwgYXJncy5sZW5ndGggLSAxID8gJywgJyA6ICcnO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGFyZyBmaXRzIG9uIGN1cnJlbnQgbGluZVxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICBpZiAodGhpcy5zdHJpcEFuc2kodGVzdExpbmUpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lICE9PSBwcmVmaXgpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIGFyZ3VtZW50cyBmcm9tIHN0cmluZyBsaWtlOiBrZXk6IFwidmFsdWVcIiwga2V5MjogdmFsdWUyXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbEFyZ3MoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgYXJnczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIFNpbXBsZSByZWdleCB0byBleHRyYWN0IGtleTogdmFsdWUgcGFpcnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sKV0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIGFyZ3MucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGFuIGFyZ3VtZW50IHZhbHVlICh0cnVuY2F0ZSBsb25nIHN0cmluZ3MpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdEFyZ1ZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcbiAgICBjb25zdCBpc1F1b3RlZCA9IHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJyk7XG4gICAgY29uc3QgaW5uZXIgPSBpc1F1b3RlZCA/IHZhbHVlLnNsaWNlKDEsIC0xKSA6IHZhbHVlO1xuXG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzaG91bGRQcmVzZXJ2ZSA9XG4gICAgICBsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3F1ZXJ5JyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjbWQnO1xuXG4gICAgLy8gVHJ1bmNhdGUgbG9uZyB2YWx1ZXMgd2hlbiBub3QgZXhwbGljaXRseSBwcmVzZXJ2aW5nXG4gICAgY29uc3QgbWF4TGVuID0gNDA7XG4gICAgY29uc3QgdHJ1bmNhdGVkID0gc2hvdWxkUHJlc2VydmUgfHwgaW5uZXIubGVuZ3RoIDw9IG1heExlbiA/IGlubmVyIDogaW5uZXIuc2xpY2UoMCwgbWF4TGVuIC0gMykgKyAnLi4uJztcblxuICAgIHJldHVybiBpc1F1b3RlZCA/IGBcIiR7dHJ1bmNhdGVkfVwiYCA6IHRydW5jYXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIHJlc3VsdCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDijr8gIEZvdW5kIDEyIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN1bW1hcnkgbGluZSAoZS5nLiwgXCJGb3VuZCBYIGxpbmVzXCIpXG4gICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gY29udGVudC5tYXRjaCgvXihGb3VuZCBcXGQrICg/OmxpbmVzP3xmaWxlcz98bWF0Y2hlcz8pfFJlYWQgXFxkKyBsaW5lcz98V3JvdGUgXFxkKyBsaW5lcz98RWRpdGVkfENyZWF0ZWR8RGVsZXRlZCkvaSk7XG4gICAgaWYgKHN1bW1hcnlNYXRjaCkge1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvciBvdGhlciByZXN1bHRzLCBzaG93IHRydW5jYXRlZCBwcmV2aWV3XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMykge1xuICAgICAgY29uc3QgcHJldmlldyA9IGxpbmVzLnNsaWNlKDAsIDIpLmpvaW4oJ1xcbicpO1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtwcmV2aWV3fVxcbiAgJHt0aGVtZS51aS5tdXRlZChgLi4uICR7bGluZXMubGVuZ3RoIC0gMn0gbW9yZSBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClgKX1cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCBjYWxsOiDij7ogW1JlYWRdIGZpbGUudHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmdzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFxzKig/OlxcKCguKilcXCkpPyQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXSE7XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdPy50cmltKCkgfHwgJyc7XG5cbiAgICAvLyBUcmFjayB0b29sIG5hbWUgZm9yIHBhaXJpbmcgd2l0aCByZXN1bHRcbiAgICB0aGlzLmxhc3RUb29sTmFtZSA9IHRvb2xOYW1lO1xuXG4gICAgLy8gR2V0IHRvb2wtc3BlY2lmaWMgY29sb3IgKGJhc2g9b3JhbmdlLCByZWFkPWN5YW4sIHdyaXRlPWdyZWVuLCBldGMuKVxuICAgIGNvbnN0IHRvb2xDb2xvciA9IGdldFRvb2xDb2xvcih0b29sTmFtZSk7XG4gICAgY29uc3QgY29sb3JlZFRvb2xOYW1lID0gdG9vbENvbG9yKGBbJHt0b29sTmFtZX1dYCk7XG5cbiAgICAvLyBJZiBubyBhcmdzLCBqdXN0IHNob3cgdG9vbCBuYW1lXG4gICAgaWYgKCFhcmdzU3RyKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbG9yZWRUb29sTmFtZX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5jb2xzIC0gODsgLy8gTGVhdmUgcm9vbSBmb3IgbWFyZ2luc1xuXG4gICAgLy8gUGFyc2UgaW5kaXZpZHVhbCBwYXJhbXNcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyKTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb2xvcmVkVG9vbE5hbWV9ICR7YXJnc1N0cn1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdG9vbENvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nIChkZWZhdWx0IGdyZWVuIGNvbG9yKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUGFyYW1zKFxuICAgIHRvb2xOYW1lOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+LFxuICAgIG1heFdpZHRoOiBudW1iZXJcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9vbCBwYXJhbXMgd2l0aCBjdXN0b20gdG9vbCBjb2xvclxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUGFyYW1zQ29sb3JlZChcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxuICAgIHRvb2xDb2xvcjogKHRleHQ6IHN0cmluZykgPT4gc3RyaW5nXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgaW5kZW50ID0gJyAgICAgICAgJzsgLy8gOCBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvblxuXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gYCR7YnVsbGV0fSAke3Rvb2xDb2xvcihgWyR7dG9vbE5hbWV9XWApfSBgO1xuICAgIGxldCBmaXJzdFBhcmFtID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1zKSB7XG4gICAgICBjb25zdCBjb2xvcmVkVmFsdWUgPSB0aGlzLmNvbG9yUGFyYW1WYWx1ZShwYXJhbS5rZXksIHBhcmFtLnZhbHVlKTtcbiAgICAgIGNvbnN0IHBhcmFtVGV4dCA9IGAke3BhcmFtLmtleX06ICR7Y29sb3JlZFZhbHVlfWA7XG4gICAgICBjb25zdCBwYXJhbVN0ciA9IGZpcnN0UGFyYW0gPyBwYXJhbVRleHQgOiBgLCAke3BhcmFtVGV4dH1gO1xuXG4gICAgICAvLyBDaGVjayBpZiBhZGRpbmcgdGhpcyBwYXJhbSB3b3VsZCBleGNlZWQgd2lkdGhcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBwYXJhbVN0cjtcbiAgICAgIGNvbnN0IHBsYWluTGVuZ3RoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHRlc3RMaW5lKTtcblxuICAgICAgaWYgKHBsYWluTGVuZ3RoID4gbWF4V2lkdGggJiYgIWZpcnN0UGFyYW0pIHtcbiAgICAgICAgLy8gU3RhcnQgbmV3IGxpbmVcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG4gICAgICAgIGN1cnJlbnRMaW5lID0gaW5kZW50ICsgcGFyYW1UZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gcGFyYW1TdHI7XG4gICAgICB9XG4gICAgICBmaXJzdFBhcmFtID0gZmFsc2U7XG4gICAgfVxuXG4gICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xvciBjcml0aWNhbCBwYXJhbWV0ZXIgdmFsdWVzIChwYXRocywgY29tbWFuZHMpIGZvciByZWFkYWJpbGl0eS5cbiAgKi9cbiAgcHJpdmF0ZSBjb2xvclBhcmFtVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyS2V5LmluY2x1ZGVzKCdwYXRoJykgfHwgbG93ZXJLZXkgPT09ICdmaWxlJyB8fCBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8IGxvd2VyS2V5ID09PSAncXVlcnknKSB7XG4gICAgICByZXR1cm4gdGhlbWUud2FybmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChsb3dlcktleSA9PT0gJ2NvbW1hbmQnIHx8IGxvd2VyS2V5ID09PSAnY21kJykge1xuICAgICAgcmV0dXJuIHRoZW1lLnRvb2xDb2xvcnMuZGVmYXVsdCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgc2hvcnQgc3VtbWFyeSBmcm9tIHRvb2wgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFN1bW1hcnkodG9vbE5hbWU6IHN0cmluZywgYXJnc1N0cjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHBhdGgvZmlsZSBmb3IgZmlsZSBvcGVyYXRpb25zXG4gICAgaWYgKFsncmVhZCcsICd3cml0ZScsICdlZGl0JywgJ2dsb2InLCAnZ3JlcCcsICdzZWFyY2gnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgY29uc3QgcGF0aE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvKD86cGF0aHxmaWxlX3BhdGh8cGF0dGVybik6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKHBhdGhNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXRoID0gcGF0aE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLmZpbGU/LnBhdGggPyB0aGVtZS5maWxlLnBhdGgocGF0aCkgOiB0aGVtZS51aS5tdXRlZChwYXRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvbW1hbmQgZm9yIGJhc2hcbiAgICBpZiAodG9vbCA9PT0gJ2Jhc2gnKSB7XG4gICAgICBjb25zdCBjbWRNYXRjaCA9IGFyZ3NTdHIubWF0Y2goL2NvbW1hbmQ6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKGNtZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNtZE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKGNtZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIHJlc3VsdDog4o6/ICBGb3VuZCBYIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKiBGb3IgZWRpdHMsIHNob3cgYSBzbWFsbCBpbmxpbmUgZGlmZiBwcmV2aWV3XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gU2FuaXRpemUgY29udGVudCBmaXJzdCAtIGZpbHRlciBvdXQgZ2FyYmFnZS9yZWFzb25pbmcgb3V0cHV0IHRoYXQgbGVha2VkIHRocm91Z2hcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplVG9vbFJlc3VsdENvbnRlbnQoY29udGVudCk7XG4gICAgaWYgKCFzYW5pdGl6ZWQgfHwgdGhpcy5pc0dhcmJhZ2VPdXRwdXQoc2FuaXRpemVkKSkge1xuICAgICAgcmV0dXJuICcnOyAvLyBEb24ndCByZW5kZXIgZ2FyYmFnZSB0b29sIHJlc3VsdHNcbiAgICB9XG5cbiAgICAvLyBTcGVjaWFsIGhhbmRsaW5nIGZvciBlZGl0IHJlc3VsdHMgLSBzaG93IGlubGluZSBkaWZmXG4gICAgaWYgKHRoaXMubGFzdFRvb2xOYW1lPy50b0xvd2VyQ2FzZSgpID09PSAnZWRpdCcpIHtcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdEVkaXRSZXN1bHRXaXRoRGlmZihzYW5pdGl6ZWQpO1xuICAgIH1cblxuICAgIC8vIFBhcnNlIGNvbW1vbiByZXN1bHQgcGF0dGVybnMgZm9yIHN1bW1hcnlcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goLyhcXGQrKVxccypsaW5lcz8vaSk7XG4gICAgY29uc3QgZmlsZU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC8oXFxkKylcXHMqKD86ZmlsZXM/fG1hdGNoZXM/KS9pKTtcbiAgICBjb25zdCByZWFkTWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goL3JlYWQuKj8oXFxkKylcXHMqbGluZXM/L2kpO1xuXG4gICAgLy8gQ2hlY2sgaWYgY29udGVudCBjb250YWlucyBhIGZpbGUgcGF0aCBvciBjb21tYW5kIHRoYXQgc2hvdWxkIGJlIHByZXNlcnZlZFxuICAgIGNvbnN0IGhhc1BhdGggPSAvKD86XnxcXHMpKD86XFwvW1xcdy4vLV0rfFtcXHcuLy1dK1xcL1tcXHcuLy1dKykvLnRlc3Qoc2FuaXRpemVkKTtcbiAgICBjb25zdCBoYXNDb21tYW5kID0gL15cXHMqXFwkXFxzKy4rfGNvbW1hbmQ6L2kudGVzdChzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IGlzUGF0aE9yRGlyID0gL14oPzpGaWxlfERpcmVjdG9yeXxQYXRoKTpcXHMqL2kudGVzdChzYW5pdGl6ZWQpO1xuXG4gICAgbGV0IHN1bW1hcnk6IHN0cmluZztcbiAgICBsZXQgcHJlc2VydmVGdWxsID0gZmFsc2U7XG5cbiAgICBpZiAocmVhZE1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYFJlYWQgJHtyZWFkTWF0Y2hbMV19IGxpbmVzYDtcbiAgICB9IGVsc2UgaWYgKGxpbmVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2xpbmVNYXRjaFsxXX0gbGluZSR7bGluZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoZmlsZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7ZmlsZU1hdGNoWzFdfSBmaWxlJHtmaWxlTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChzYW5pdGl6ZWQubWF0Y2goL14oc3VjY2Vzc3xva3xkb25lfGNvbXBsZXRlZHx3cml0dGVufGVkaXRlZHxjcmVhdGVkKS9pKSkge1xuICAgICAgc3VtbWFyeSA9ICfinJMnO1xuICAgIH0gZWxzZSBpZiAoaXNQYXRoT3JEaXIgfHwgaGFzUGF0aCB8fCBoYXNDb21tYW5kKSB7XG4gICAgICAvLyBQcmVzZXJ2ZSBmdWxsIGNvbnRlbnQgZm9yIHBhdGhzLCBkaXJlY3RvcmllcywgYW5kIGNvbW1hbmRzXG4gICAgICAvLyBPbmx5IHNob3cgZmlyc3QgbGluZSBpZiBtdWx0aS1saW5lXG4gICAgICBjb25zdCBmaXJzdExpbmUgPSBzYW5pdGl6ZWQuc3BsaXQoJ1xcbicpWzBdIHx8IHNhbml0aXplZDtcbiAgICAgIHN1bW1hcnkgPSBmaXJzdExpbmU7XG4gICAgICBwcmVzZXJ2ZUZ1bGwgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFeHRyYWN0IG1lYW5pbmdmdWwgc3VtbWFyeSBmcm9tIGNvbnRlbnRcbiAgICAgIGxldCBzdW1tYXJ5VGV4dCA9IHNhbml0aXplZDtcblxuICAgICAgLy8gSGFuZGxlIFwiU3VtbWFyeTpcIiBwcmVmaXggZnJvbSB3ZWIgc2VhcmNoL2V4dHJhY3QgcmVzdWx0c1xuICAgICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC9eU3VtbWFyeTpcXHMqKC4rKS9pKTtcbiAgICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgICAgc3VtbWFyeVRleHQgPSBzdW1tYXJ5TWF0Y2hbMV0hO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgbXVsdGktbGluZSBjb250ZW50LCB1c2UgZmlyc3QgbWVhbmluZ2Z1bCBsaW5lXG4gICAgICBjb25zdCBmaXJzdExpbmUgPSBzdW1tYXJ5VGV4dC5zcGxpdCgnXFxuJylbMF0/LnRyaW0oKSB8fCBzdW1tYXJ5VGV4dDtcblxuICAgICAgLy8gVHJ5IHRvIGVuZCBhdCBhIHNlbnRlbmNlIGJvdW5kYXJ5IGZvciByZWFkYWJpbGl0eSAodXAgdG8gMTIwIGNoYXJzKVxuICAgICAgY29uc3QgbWF4TGVuID0gMTIwO1xuICAgICAgaWYgKGZpcnN0TGluZS5sZW5ndGggPiBtYXhMZW4pIHtcbiAgICAgICAgLy8gTG9vayBmb3Igc2VudGVuY2UgZW5kIHdpdGhpbiBsaW1pdFxuICAgICAgICBjb25zdCBzZW50ZW5jZUVuZCA9IGZpcnN0TGluZS5zbGljZSgwLCBtYXhMZW4pLnNlYXJjaCgvWy4hPztdXFxzfFsuIT87XSQvKTtcbiAgICAgICAgaWYgKHNlbnRlbmNlRW5kID4gMzApIHtcbiAgICAgICAgICBzdW1tYXJ5ID0gZmlyc3RMaW5lLnNsaWNlKDAsIHNlbnRlbmNlRW5kICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gZ29vZCBzZW50ZW5jZSBicmVhaywgdHJ1bmNhdGUgYXQgd29yZCBib3VuZGFyeVxuICAgICAgICAgIGNvbnN0IHRydW5jYXRlZCA9IGZpcnN0TGluZS5zbGljZSgwLCBtYXhMZW4pO1xuICAgICAgICAgIGNvbnN0IGxhc3RTcGFjZSA9IHRydW5jYXRlZC5sYXN0SW5kZXhPZignICcpO1xuICAgICAgICAgIHN1bW1hcnkgPSBsYXN0U3BhY2UgPiA2MCA/IHRydW5jYXRlZC5zbGljZSgwLCBsYXN0U3BhY2UpICsgJ+KApicgOiB0cnVuY2F0ZWQgKyAn4oCmJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjb2xsYXBzZWQgcmVzdWx0IGZvciBDdHJsK08gZXhwYW5zaW9uICh1c2Ugc2FuaXRpemVkIGNvbnRlbnQpXG4gICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5wdXNoKHtcbiAgICAgIHRvb2xOYW1lOiB0aGlzLmxhc3RUb29sTmFtZSB8fCAndG9vbCcsXG4gICAgICBjb250ZW50OiBzYW5pdGl6ZWQsXG4gICAgICBzdW1tYXJ5LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuXG4gICAgLy8gVHJpbSB0byBtYXggc2l6ZVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aCA+IHRoaXMubWF4Q29sbGFwc2VkUmVzdWx0cykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yZWRTdW1tYXJ5ID0gdGhpcy5jb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeSk7XG4gICAgLy8gT25seSBzaG93IGV4cGFuZCBoaW50IGlmIGNvbnRlbnQgaXMgYWN0dWFsbHkgY29sbGFwc2VkIChtdWx0aS1saW5lIG9yIHdhcyB0cnVuY2F0ZWQpXG4gICAgY29uc3QgaGFzTW9yZUNvbnRlbnQgPSBzYW5pdGl6ZWQuaW5jbHVkZXMoJ1xcbicpIHx8IHN1bW1hcnkuZW5kc1dpdGgoJ+KApicpIHx8ICghcHJlc2VydmVGdWxsICYmIHNhbml0aXplZC5sZW5ndGggPiBzdW1tYXJ5Lmxlbmd0aCk7XG4gICAgY29uc3QgZXhwYW5kSGludCA9IGhhc01vcmVDb250ZW50ID8gYCAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1gIDogJyc7XG4gICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb2xvcmVkU3VtbWFyeX0ke2V4cGFuZEhpbnR9XFxuYDtcbiAgfVxuXG4gIHByaXZhdGUgY29sb3JSZXN1bHRTdW1tYXJ5KHN1bW1hcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFzdW1tYXJ5KSByZXR1cm4gc3VtbWFyeTtcbiAgICBjb25zdCBsb3dlciA9IHN1bW1hcnkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2ZhaWwnKSB8fCBsb3dlci5pbmNsdWRlcygnZXJyb3InKSkge1xuICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHN1bW1hcnkpO1xuICAgIH1cbiAgICBpZiAoc3VtbWFyeS5zdGFydHNXaXRoKCfinJMnKSB8fCBsb3dlci5pbmNsdWRlcygndXBkYXRlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdjcmVhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3dyaXR0ZW4nKSkge1xuICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3Moc3VtbWFyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGVtZS5pbmZvKHN1bW1hcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBlZGl0IHJlc3VsdCB3aXRoIGVuaGFuY2VkIGlubGluZSBkaWZmIHByZXZpZXdcbiAgICogU2hvd3M6IOKOvyDinJMgVXBkYXRlZCAoZmlsZW5hbWUpIC0gcmVtb3ZlZCBYLCBhZGRlZCBZIGNoYXJzXG4gICAqICAgICAgICDilJzilIDilJBcbiAgICogICAgICAgIOKUgiAtIG9sZCBjb250ZW50Li4uXG4gICAqICAgICAgICDilIIgKyBuZXcgY29udGVudC4uLlxuICAgKiAgICAgICAg4pSU4pSAXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdEVkaXRSZXN1bHRXaXRoRGlmZihjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICc7XG5cbiAgICAvLyBFeHRyYWN0IGZpbGUgcGF0aCBmcm9tIGNvbnRlbnQgd2l0aCBiZXR0ZXIgcmVnZXhcbiAgICBjb25zdCBmaWxlUGF0aE1hdGNoID0gY29udGVudC5tYXRjaCgvKD86ZmlsZVtfXFxzXSpwYXRofHBhdGgpOlxccypcIihbXlwiXSspXCIvaSkgfHwgXG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5tYXRjaCgvdXBkYXRlZC4qPyhbXFwvXFx3LlxcLV0rXFwuXFx3KykvaSkgfHxcbiAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50Lm1hdGNoKC9lZGl0ZWQuKj8oW1xcL1xcdy5cXC1dK1xcLlxcdyspL2kpO1xuICAgIGNvbnN0IGZpbGVOYW1lID0gZmlsZVBhdGhNYXRjaCA/IGZpbGVQYXRoTWF0Y2hbMV0hLnNwbGl0KCcvJykucG9wKCkgOiAnZmlsZSc7XG4gICAgY29uc3QgZnVsbFBhdGggPSBmaWxlUGF0aE1hdGNoID8gZmlsZVBhdGhNYXRjaFsxXSA6IGZpbGVOYW1lO1xuXG4gICAgLy8gVHJ5IHRvIGV4dHJhY3Qgb2xkL25ldyBjb250ZW50IGZyb20gZWRpdCByZXN1bHQgd2l0aCBiZXR0ZXIgcGFyc2luZ1xuICAgIGNvbnN0IG9sZE1hdGNoID0gY29udGVudC5tYXRjaCgvb2xkW19cXHNdKnN0cmluZ1s6XFxzXSooW1wiJ2BdKShbXlxceDAxXSs/KVxcMS9pKSB8fCBcbiAgICAgICAgICAgICAgICAgICAgY29udGVudC5tYXRjaCgvb2xkW19cXHNdKnN0cmluZ1s6XFxzXSpbXCInXT8oW15cIidcXG5dKylbXCInXT8vaSk7XG4gICAgY29uc3QgbmV3TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9uZXdbX1xcc10qc3RyaW5nWzpcXHNdKihbXCInYF0pKFteXFx4MDFdKz8pXFwxL2kpIHx8XG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQubWF0Y2goL25ld1tfXFxzXSpzdHJpbmdbOlxcc10qW1wiJ10/KFteXCInXFxuXSspW1wiJ10/L2kpO1xuXG4gICAgY29uc3Qgb2xkQ29udGVudCA9IG9sZE1hdGNoPy5bMl0gfHwgb2xkTWF0Y2g/LlsxXSB8fCAnJztcbiAgICBjb25zdCBuZXdDb250ZW50ID0gbmV3TWF0Y2g/LlsyXSB8fCBuZXdNYXRjaD8uWzFdIHx8ICcnO1xuXG4gICAgLy8gQ2FsY3VsYXRlIGRpZmYgc3RhdHNcbiAgICBjb25zdCBvbGRMZW4gPSBvbGRDb250ZW50Lmxlbmd0aDtcbiAgICBjb25zdCBuZXdMZW4gPSBuZXdDb250ZW50Lmxlbmd0aDtcbiAgICBjb25zdCBkaWZmU3RhdCA9IG9sZExlbiB8fCBuZXdMZW5cbiAgICAgID8gdGhlbWUudWkubXV0ZWQoYCAoJHt0aGVtZS5lcnJvcihgLSR7b2xkTGVufWApfSAke3RoZW1lLnN1Y2Nlc3MoYCske25ld0xlbn1gKX0gY2hhcnMpYClcbiAgICAgIDogJyc7XG5cbiAgICAvLyBNYWluIHN1bW1hcnkgbGluZSB3aXRoIGVuaGFuY2VkIHN0eWxpbmdcbiAgICBsaW5lcy5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7dGhlbWUuc3VjY2Vzcygn4pyTJyl9ICR7dGhlbWUuc3VjY2VzcyhgVXBkYXRlZGApfSAke3RoZW1lLmZpbGU/LnBhdGggPyB0aGVtZS5maWxlLnBhdGgoYCR7ZnVsbFBhdGh9YCkgOiB0aGVtZS53YXJuaW5nKGAke2Z1bGxQYXRofWApfSR7ZGlmZlN0YXR9YCk7XG5cbiAgICAvLyBTaG93IGVuaGFuY2VkIGRpZmYgdmlzdWFsaXphdGlvblxuICAgIGlmIChvbGRDb250ZW50IHx8IG5ld0NvbnRlbnQpIHtcbiAgICAgIGNvbnN0IG1heERpZmZMZW4gPSBNYXRoLm1pbih0aGlzLnNhZmVXaWR0aCgpIC0gMjAsIDgwKTtcbiAgICAgIFxuICAgICAgLy8gU3RhcnQgZGlmZiBib3hcbiAgICAgIGxpbmVzLnB1c2goYCR7aW5kZW50fSR7dGhlbWUudWkubXV0ZWQoJ+KUnOKUgOKUkCcpfWApO1xuXG4gICAgICBpZiAob2xkQ29udGVudCkge1xuICAgICAgICBjb25zdCBvbGRQcmV2aWV3ID0gb2xkQ29udGVudC5sZW5ndGggPiBtYXhEaWZmTGVuXG4gICAgICAgICAgPyBvbGRDb250ZW50LnNsaWNlKDAsIG1heERpZmZMZW4pICsgJ+KApidcbiAgICAgICAgICA6IG9sZENvbnRlbnQ7XG4gICAgICAgIC8vIENsZWFuIHVwIHRoZSBwcmV2aWV3IChyZW1vdmUgZXNjYXBlZCBxdW90ZXMsIGV0Yy4pXG4gICAgICAgIGNvbnN0IGNsZWFuT2xkID0gb2xkUHJldmlldy5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykucmVwbGFjZSgvXFxcXG4vZywgJ+KGsicpO1xuICAgICAgICBsaW5lcy5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilIInKX0gJHt0aGVtZS5lcnJvcign4pSAICcgKyBjbGVhbk9sZCl9YCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChuZXdDb250ZW50KSB7XG4gICAgICAgIGNvbnN0IG5ld1ByZXZpZXcgPSBuZXdDb250ZW50Lmxlbmd0aCA+IG1heERpZmZMZW5cbiAgICAgICAgICA/IG5ld0NvbnRlbnQuc2xpY2UoMCwgbWF4RGlmZkxlbikgKyAn4oCmJ1xuICAgICAgICAgIDogbmV3Q29udGVudDtcbiAgICAgICAgY29uc3QgY2xlYW5OZXcgPSBuZXdQcmV2aWV3LnJlcGxhY2UoL1xcXFxcIi9nLCAnXCInKS5yZXBsYWNlKC9cXFxcbi9nLCAn4oayJyk7XG4gICAgICAgIGxpbmVzLnB1c2goYCR7aW5kZW50fSR7dGhlbWUudWkubXV0ZWQoJ+KUgicpfSAke3RoZW1lLnN1Y2Nlc3MoJysgJyArIGNsZWFuTmV3KX1gKTtcbiAgICAgIH1cblxuICAgICAgLy8gRW5kIGRpZmYgYm94XG4gICAgICBsaW5lcy5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilJTilIAnKX1gKTtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBmb3IgZXhwYW5zaW9uIHdpdGggZW5oYW5jZWQgbWV0YWRhdGFcbiAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnB1c2goe1xuICAgICAgdG9vbE5hbWU6ICdlZGl0JyxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBzdW1tYXJ5OiBgVXBkYXRlZCAke2ZpbGVOYW1lfSAoLSR7b2xkTGVufSwgKyR7bmV3TGVufSlgLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgbWV0YWRhdGE6IHtcbiAgICAgICAgZmlsZVBhdGg6IGZ1bGxQYXRoLFxuICAgICAgICBvbGRMZW5ndGg6IG9sZExlbixcbiAgICAgICAgbmV3TGVuZ3RoOiBuZXdMZW4sXG4gICAgICAgIGRpZmY6IHsgb2xkOiBvbGRDb250ZW50LCBuZXc6IG5ld0NvbnRlbnQgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMubGVuZ3RoID4gdGhpcy5tYXhDb2xsYXBzZWRSZXN1bHRzKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgZXhwYW5kSGludCA9IGNvbnRlbnQubGVuZ3RoID4gMTAwIHx8IG9sZExlbiA+IDUwIHx8IG5ld0xlbiA+IDUwID8gXG4gICAgICBgICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfWAgOiAnJztcbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyBleHBhbmRIaW50ICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCByZXNwb25zZSB3aXRoIGJ1bGxldCBvbiBmaXJzdCBsaW5lXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXAgdGV4dCB3aXRoIGEgc2luZ2xlIGJ1bGxldCBvbiB0aGUgZmlyc3QgbGluZSBhbmQgdGlkeSBpbmRlbnRhdGlvbiBmb3IgcmVhZGFiaWxpdHkuXG4gICAqIFByZXZlbnRzIGF3a3dhcmQgbWlkLXdvcmQgdGVybWluYWwgd3JhcHBpbmcgYnkgaGFuZGxpbmcgdGhlIGxheW91dCBvdXJzZWx2ZXMuXG4gICAqIFN1cHBvcnRzIGZ1bGwgbWFya2Rvd24gZm9ybWF0dGluZzogaGVhZGVycywgbGlzdHMsIGNvZGUgYmxvY2tzLCBpbmxpbmUgc3R5bGVzLlxuICAgKi9cbiAgcHJpdmF0ZSB3cmFwQnVsbGV0VGV4dChcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgb3B0aW9uczogeyBtYXhXaWR0aD86IG51bWJlcjsgbGFiZWw/OiBzdHJpbmc7IGxhYmVsQ29sb3I/OiAodmFsdWU6IHN0cmluZykgPT4gc3RyaW5nOyB0aG91Z2h0VHlwZT86IHN0cmluZyB9ID0ge31cbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBsZXQgY2xlYW5lZCA9IGNvbnRlbnQucmVwbGFjZSgvXlvij7rigKLil4tdXFxzKi8sICcnKS50cmltRW5kKCk7XG4gICAgaWYgKCFjbGVhbmVkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIE5vcm1hbGl6ZSBjb250ZW50OiBhZGQgc3BhY2VzIGFmdGVyIGhlYWRlcnMsIGZpeCBjb21tb24gZm9ybWF0dGluZyBpc3N1ZXNcbiAgICAvLyBGaXggaGVhZGVycyB3aXRob3V0IHNwYWNlOiAjI0hFQURJTkcgLT4gIyMgSEVBRElORyAoaW5jbHVkaW5nIGVtb2ppKVxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL14oI3sxLDZ9KShbQS1a8J+agOKalO+4j/Cfjq/wn5SQ8J+TpuKcheKdjOKaofCfkoDwn5Sl8J+boe+4j/CfkqPwn46W77iP4q2QXSkvZ20sICckMSAkMicpO1xuICAgIC8vIEZpeCBudW1iZXJlZCBoZWFkZXJzOiAjIyMxIEVsaXRlIC0+ICMjIyAxLiBFbGl0ZVxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL14oI3sxLDZ9KShcXGQrKVxccysvZ20sICckMSAkMi4gJyk7XG4gICAgLy8gRml4IGRhc2ggbGlzdHMgd2l0aG91dCBzcGFjZTogLVJTQTIwNDggLT4gLSBSU0EyMDQ4XG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvXi0oW0EtWl0pL2dtLCAnLSAkMScpO1xuICAgIC8vIEZpeCBudW1iZXJlZCBsaXN0cyB3aXRob3V0IHNwYWNlOiAxLkl0ZW0gLT4gMS4gSXRlbVxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL14oXFxkK1xcLikoW0EtWl0pL2dtLCAnJDEgJDInKTtcbiAgICAvLyBBZGQgbGluZSBicmVha3MgYmVmb3JlIGhlYWRlcnMgdGhhdCBhcmUgam9pbmVkIHRvIHByZXZpb3VzIHRleHRcbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC8oWy4hPyldKShcXHMqKSgjezEsNn1cXHMpL2csICckMVxcblxcbiQzJyk7XG4gICAgLy8gQWRkIGxpbmUgYnJlYWtzIGJldHdlZW4gc2VjdGlvbnMgKHRleHQgZm9sbG93ZWQgaW1tZWRpYXRlbHkgYnkgIyMpXG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvKFthLXpdKShcXHMqKSgjezIsNn1cXHMpL2dpLCAnJDFcXG5cXG4kMycpO1xuICAgIC8vIEFkZCBsaW5lIGJyZWFrcyBiZXR3ZWVuIGVtb2ppIGJ1bGxldHMgYW5kIG5leHQgc2VjdGlvblxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoLyhbXFx1MjcwNVxcdTI3NENcXHUyNzE0XFx1MjcxOFxcdTI2QTBcXHVEODNDLVxcdURCRkZcXHVEQzAwLVxcdURGRkZdKylcXHMqKCN7MSw2fSkvZywgJyQxXFxuXFxuJDInKTtcbiAgICAvLyBGaXggY29kZSBibG9ja3MgdGhhdCBydW4gdG9nZXRoZXI6IGJhc2gjIC0+IGJhc2hcXG4jXG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvKGJhc2h8c2h8cHl0aG9ufGphdmFzY3JpcHR8dHlwZXNjcmlwdCkjL2dpLCAnJDFcXG5gYGBcXG4jJyk7XG4gICAgLy8gQWRkIG5ld2xpbmVzIGJlZm9yZSBjb2RlIGJsb2NrIG1hcmtlcnNcbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC8oW15cXG5dKWBgYChcXHcrKT8vZywgJyQxXFxuYGBgJDInKTtcbiAgICAvLyBGaXggdGFibGVzIHRoYXQgcnVuIHRvZ2V0aGVyXG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvKFxcdyspXFxzKyhbLeKUgF17Myx9KVxccysoXFx3KykvZywgJyQxXFxuJDJcXG4kMycpO1xuXG4gICAgLy8gUmVzZXJ2ZSBhIGxpdHRsZSBtYXJnaW4gdG8gcmVkdWNlIHRlcm1pbmFsIHdyYXAgaml0dGVyXG4gICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMjAsIE1hdGgubWluKG9wdGlvbnMubWF4V2lkdGggPz8gYXZhaWxhYmxlV2lkdGggLSAyLCBhdmFpbGFibGVXaWR0aCkpO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IG9wdGlvbnMubGFiZWxcbiAgICAgID8gYCR7b3B0aW9ucy5sYWJlbENvbG9yID8gb3B0aW9ucy5sYWJlbENvbG9yKG9wdGlvbnMubGFiZWwpIDogb3B0aW9ucy5sYWJlbH0ke3RoZW1lLnVpLm11dGVkKCcgwrcgJyl9YFxuICAgICAgOiAnJztcbiAgICBjb25zdCBidWxsZXRQcmVmaXggPSBgJHtidWxsZXR9ICR7bGFiZWxUZXh0fWA7XG4gICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgoYCR7YnVsbGV0fSBgKSk7XG5cbiAgICBjb25zdCBsaW5lcyA9IGNsZWFuZWQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgZmlyc3ROb25FbXB0eSA9IHRydWU7XG4gICAgbGV0IGluQ29kZUJsb2NrID0gZmFsc2U7XG4gICAgbGV0IGNvZGVCbG9ja0xhbmcgPSAnJztcbiAgICBjb25zdCBjb2RlQmxvY2tCdWZmZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IHJhd0xpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IHRyaW1tZWRMaW5lID0gcmF3TGluZS50cmltKCk7XG5cbiAgICAgIC8vIEhhbmRsZSBjb2RlIGJsb2NrIGZlbmNlc1xuICAgICAgaWYgKHRyaW1tZWRMaW5lLnN0YXJ0c1dpdGgoJ2BgYCcpKSB7XG4gICAgICAgIGlmICghaW5Db2RlQmxvY2spIHtcbiAgICAgICAgICAvLyBTdGFydCBjb2RlIGJsb2NrXG4gICAgICAgICAgaW5Db2RlQmxvY2sgPSB0cnVlO1xuICAgICAgICAgIGNvZGVCbG9ja0xhbmcgPSB0cmltbWVkTGluZS5zbGljZSgzKS50cmltKCkudG9VcHBlckNhc2UoKSB8fCAnQ09ERSc7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gRW5kIGNvZGUgYmxvY2sgLSByZW5kZXIgaXRcbiAgICAgICAgICBpbkNvZGVCbG9jayA9IGZhbHNlO1xuICAgICAgICAgIGNvbnN0IGNvZGVJbmRlbnQgPSBmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50O1xuICAgICAgICAgIGlmIChmaXJzdE5vbkVtcHR5KSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHtidWxsZXRQcmVmaXh9JHt0aGVtZS51aS5tdXRlZChg4pSA4pSA4pSAICR7Y29kZUJsb2NrTGFuZ30g4pSA4pSA4pSAYCl9YCk7XG4gICAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKGDilIDilIDilIAgJHtjb2RlQmxvY2tMYW5nfSDilIDilIDilIBgKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBjb2RlTGluZSBvZiBjb2RlQmxvY2tCdWZmZXIpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilIInKX0gJHt0aGVtZS51aS5jb2RlKGNvZGVMaW5lKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29kZUJsb2NrQnVmZmVyLmxlbmd0aCA9IDA7XG4gICAgICAgICAgY29kZUJsb2NrTGFuZyA9ICcnO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChpbkNvZGVCbG9jaykge1xuICAgICAgICBjb2RlQmxvY2tCdWZmZXIucHVzaChyYXdMaW5lKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBlbXB0eSBsaW5lc1xuICAgICAgaWYgKCF0cmltbWVkTGluZSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7IC8vIFByZXNlcnZlIGludGVudGlvbmFsIHNwYWNpbmcgYmV0d2VlbiBwYXJhZ3JhcGhzXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgbWFya2Rvd24gaGVhZGVycyAoIyAjIyAjIyMgZXRjLikgLSBhbHNvIGhhbmRsZSAjI0hFQURJTkcgd2l0aG91dCBzcGFjZVxuICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSB0cmltbWVkTGluZS5tYXRjaCgvXigjezEsNn0pXFxzKiguKykkLyk7XG4gICAgICBpZiAoaGVhZGVyTWF0Y2ggJiYgaGVhZGVyTWF0Y2hbMl0gJiYgIWhlYWRlck1hdGNoWzJdLnN0YXJ0c1dpdGgoJyMnKSkge1xuICAgICAgICBjb25zdCBsZXZlbCA9IGhlYWRlck1hdGNoWzFdPy5sZW5ndGggPz8gMTtcbiAgICAgICAgY29uc3QgaGVhZGVyVGV4dCA9IGhlYWRlck1hdGNoWzJdPy50cmltKCkgPz8gJyc7XG4gICAgICAgIC8vIFNraXAgaWYgaXQncyBqdXN0IGhhc2hlcyBvciBpZiBjb250ZW50IGlzIHRvbyBzaG9ydFxuICAgICAgICBpZiAoaGVhZGVyVGV4dC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgLy8gQWRkIGJsYW5rIGxpbmUgYmVmb3JlIGhlYWRlcnMgZm9yIGJldHRlciB2aXN1YWwgc2VwYXJhdGlvblxuICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCAmJiByZXN1bHRbcmVzdWx0Lmxlbmd0aCAtIDFdICE9PSAnJykge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goJycpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRIZWFkZXIgPSB0aGlzLmZvcm1hdE1hcmtkb3duSGVhZGVyKGhlYWRlclRleHQsIGxldmVsLCBtYXhXaWR0aCwgZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudCk7XG4gICAgICAgICAgcmVzdWx0LnB1c2goZm9ybWF0dGVkSGVhZGVyKTtcbiAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIGRpdmlkZXJzICgtLS0gb3IgKioqKVxuICAgICAgaWYgKC9eWy0qX117Myx9JC8udGVzdCh0cmltbWVkTGluZSkpIHtcbiAgICAgICAgY29uc3QgZGl2aWRlcldpZHRoID0gTWF0aC5taW4obWF4V2lkdGggLSBpbmRlbnQubGVuZ3RoLCA1MCk7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilIAnLnJlcGVhdChkaXZpZGVyV2lkdGgpKX1gKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBtYXJrZG93biB0YWJsZXMgKGxpbmVzIHN0YXJ0aW5nIHdpdGggfClcbiAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCd8JykgfHwgL15bLXw6XSskLy50ZXN0KHRyaW1tZWRMaW5lKSkge1xuICAgICAgICAvLyBUYWJsZSBsaW5lIC0gcmVuZGVyIHdpdGggZml4ZWQgd2lkdGggZm9udCBzdHlsaW5nXG4gICAgICAgIGNvbnN0IHRhYmxlUHJlZml4ID0gZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudDtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7dGFibGVQcmVmaXh9JHt0aGVtZS51aS5tdXRlZCh0cmltbWVkTGluZSl9YCk7XG4gICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBsaXN0IGl0ZW1zICgtIG9yICogb3IgbnVtYmVyZWQpIC0gYWxzbyBoYW5kbGUgLUl0ZW0gd2l0aG91dCBzcGFjZVxuICAgICAgY29uc3QgbGlzdE1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oXFwqfC184oCifFxcZCtcXC4pXFxzKiguKykkLyk7XG4gICAgICBpZiAobGlzdE1hdGNoICYmIGxpc3RNYXRjaFsyXSkge1xuICAgICAgICBjb25zdCBsaXN0Q29udGVudCA9IGxpc3RNYXRjaFsyXS50cmltKCk7XG4gICAgICAgIGNvbnN0IGZvcm1hdHRlZExpc3QgPSBmb3JtYXRJbmxpbmVUZXh0KGxpc3RDb250ZW50KTtcbiAgICAgICAgY29uc3QgbGlzdEJ1bGxldCA9IHRoZW1lLnNlY29uZGFyeSgnICDigKIgJyk7XG4gICAgICAgIGNvbnN0IGxpc3RJbmRlbnQgPSAnICAgICc7XG5cbiAgICAgICAgaWYgKGZpcnN0Tm9uRW1wdHkpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChidWxsZXRQcmVmaXgudHJpbUVuZCgpKTtcbiAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBXcmFwIGxpc3QgaXRlbSBjb250ZW50XG4gICAgICAgIGNvbnN0IHdvcmRzID0gZm9ybWF0dGVkTGlzdC5zcGxpdCgvXFxzKy8pO1xuICAgICAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgICAgICBsZXQgaXNGaXJzdExpc3RMaW5lID0gdHJ1ZTtcbiAgICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgICAgICBjb25zdCBwcmVmaXhMZW4gPSB0aGlzLnZpc2libGVMZW5ndGgoaXNGaXJzdExpc3RMaW5lID8gbGlzdEJ1bGxldCA6IGxpc3RJbmRlbnQpO1xuICAgICAgICAgIGlmIChwcmVmaXhMZW4gKyB0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IG1heFdpZHRoIC0gMiAmJiBjdXJyZW50KSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHtpc0ZpcnN0TGlzdExpbmUgPyBsaXN0QnVsbGV0IDogbGlzdEluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgICAgICAgIGlzRmlyc3RMaXN0TGluZSA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2lzRmlyc3RMaXN0TGluZSA/IGxpc3RCdWxsZXQgOiBsaXN0SW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVndWxhciBwYXJhZ3JhcGggLSBhcHBseSBtYXJrZG93biBmb3JtYXR0aW5nXG4gICAgICBjb25zdCBmb3JtYXR0ZWRMaW5lID0gZm9ybWF0SW5saW5lVGV4dCh0cmltbWVkTGluZSk7XG5cbiAgICAgIGNvbnN0IHdvcmRzID0gZm9ybWF0dGVkTGluZS5zcGxpdCgvXFxzKy8pO1xuICAgICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgICBjb25zdCBwcmVmaXhMZW5ndGggPSB0aGlzLnZpc2libGVMZW5ndGgoZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudCk7XG4gICAgICAgIGlmIChwcmVmaXhMZW5ndGggKyB0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IG1heFdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBtYXJrZG93biBoZWFkZXIgd2l0aCBDbGF1ZGUgQ29kZSBzdHlsZSB2aXN1YWwgaGllcmFyY2h5LlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRNYXJrZG93bkhlYWRlcih0ZXh0OiBzdHJpbmcsIGxldmVsOiBudW1iZXIsIG1heFdpZHRoOiBudW1iZXIsIHByZWZpeDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRUZXh0ID0gZm9ybWF0SW5saW5lVGV4dCh0ZXh0KTtcblxuICAgIHN3aXRjaCAobGV2ZWwpIHtcbiAgICAgIGNhc2UgMToge1xuICAgICAgICAvLyBIMTogQm9sZCBjeWFuIHdpdGggZGVjb3JhdGl2ZSBib3JkZXJzXG4gICAgICAgIGNvbnN0IGhlYWRlcldpZHRoID0gTWF0aC5taW4obWF4V2lkdGggLSA0LCB0aGlzLnZpc2libGVMZW5ndGgoZm9ybWF0dGVkVGV4dCkgKyA0KTtcbiAgICAgICAgY29uc3QgdG9wQm9yZGVyID0gdGhlbWUucHJpbWFyeSgn4pWQJy5yZXBlYXQoaGVhZGVyV2lkdGgpKTtcbiAgICAgICAgY29uc3QgaGVhZGVyTGluZSA9IHRoZW1lLnByaW1hcnkuYm9sZChg4peGICR7Zm9ybWF0dGVkVGV4dH1gKTtcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0ke3RvcEJvcmRlcn1cXG4gICR7aGVhZGVyTGluZX1cXG4gICR7dG9wQm9yZGVyfWA7XG4gICAgICB9XG4gICAgICBjYXNlIDI6IHtcbiAgICAgICAgLy8gSDI6IEJvbGQgd2l0aCB1bmRlcmxpbmUgYWNjZW50XG4gICAgICAgIGNvbnN0IGhlYWRlckxpbmUgPSB0aGVtZS5pbmZvLmJvbGQoYOKWuCAke2Zvcm1hdHRlZFRleHR9YCk7XG4gICAgICAgIGNvbnN0IHVuZGVybGluZSA9IHRoZW1lLmluZm8oJ+KUgCcucmVwZWF0KE1hdGgubWluKG1heFdpZHRoIC0gNCwgdGhpcy52aXNpYmxlTGVuZ3RoKGZvcm1hdHRlZFRleHQpICsgMikpKTtcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0ke2hlYWRlckxpbmV9XFxuICAke3VuZGVybGluZX1gO1xuICAgICAgfVxuICAgICAgY2FzZSAzOiB7XG4gICAgICAgIC8vIEgzOiBCb2xkIHdpdGggYnVsbGV0IHByZWZpeFxuICAgICAgICByZXR1cm4gYCR7cHJlZml4fSR7dGhlbWUuc2Vjb25kYXJ5LmJvbGQoYOKXhyAke2Zvcm1hdHRlZFRleHR9YCl9YDtcbiAgICAgIH1cbiAgICAgIGNhc2UgNDoge1xuICAgICAgICAvLyBINDogRGltbWVyIGJvbGRcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0ke3RoZW1lLnVpLm11dGVkKCfilrknKX0gJHt0aGVtZS5ib2xkKGZvcm1hdHRlZFRleHQpfWA7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OiB7XG4gICAgICAgIC8vIEg1KzogU2ltcGxlIGJvbGRcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0ke3RoZW1lLmJvbGQoZm9ybWF0dGVkVGV4dCl9YDtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRoaW5raW5nIGJsb2NrIHdpdGggcHJlbWl1bSB2aXN1YWwgZGVzaWduLlxuICAgKiBVc2VzIGEgZGlzdGluY3QgdmlzdWFsIHN0eWxlIHRvIGNsZWFybHkgc2VwYXJhdGUgdGhpbmtpbmcgZnJvbSByZXNwb25zZXMuXG4gICAqIEVuaGFuY2VkIHdpdGggZ3JhZGllbnQgbGFiZWxzLCBiZXR0ZXIgdHlwb2dyYXBoeSwgYW5kIHZpc3VhbCBoaWVyYXJjaHkuXG4gICAqXG4gICAqIEluIHBsYWluIG91dHB1dCBtb2RlIHdlIGtlZXAgaXQgc2ltcGxlIGFuZCBpbmxpbmUgd2l0aCB0aGUgcmVzdCBvZiB0aGVcbiAgICogc3RyZWFtIHNvIHRyYW5zY3JpcHRzIHJlbWFpbiBlYXN5IHRvIHNjYW4uXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRoaW5raW5nQmxvY2soY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm4gJyc7XG5cbiAgICAvLyBEZXRlY3QgdGhvdWdodCB0eXBlIGZvciBiZXR0ZXIgbGFiZWxpbmcgYW5kIHZpc3VhbCBzdHlsaW5nXG4gICAgY29uc3QgbG93ZXIgPSBjb250ZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgbGV0IGxhYmVsID0gJ3RoaW5raW5nJztcbiAgICBsZXQgbGFiZWxDb2xvciA9IHRoZW1lLm5lb24uY3lhbjtcbiAgICBsZXQgbGFiZWxJY29uID0gJ/Cfkq0nO1xuICAgIGxldCB0aG91Z2h0VHlwZSA9ICdkZWZhdWx0JztcblxuICAgIC8vIERldGVjdCBpbml0aWFsIGFja25vd2xlZGdlbWVudFxuICAgIGlmIChsb3dlci5pbmNsdWRlcygnYWNrbm93bGVkZ2UnKSB8fCBsb3dlci5pbmNsdWRlcygndW5kZXJzdGFuZCcpIHx8XG4gICAgICAgIGxvd2VyLmluY2x1ZGVzKFwidXNlciB3YW50c1wiKSB8fCBsb3dlci5pbmNsdWRlcyhcInVzZXIgaXMgYXNraW5nXCIpIHx8XG4gICAgICAgIGxvd2VyLmluY2x1ZGVzKFwidGhlIHJlcXVlc3RcIikgfHwgbG93ZXIuaW5jbHVkZXMoXCJpJ2xsIGhlbHBcIikpIHtcbiAgICAgIGxhYmVsID0gJ3VuZGVyc3Rvb2QnO1xuICAgICAgbGFiZWxDb2xvciA9IHRoZW1lLnN1Y2Nlc3MgPz8gdGhlbWUubmVvbi5ncmVlbjtcbiAgICAgIGxhYmVsSWNvbiA9ICfinIUnO1xuICAgICAgdGhvdWdodFR5cGUgPSAnYWNrbm93bGVkZ2VtZW50JztcbiAgICB9XG4gICAgLy8gRGV0ZWN0IHBsYW5uaW5nIHRob3VnaHRzXG4gICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ3BsYW4nKSB8fCBsb3dlci5pbmNsdWRlcygnc3RlcHMnKSB8fFxuICAgICAgICAgICAgIGxvd2VyLmluY2x1ZGVzKCdmaXJzdCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd0aGVuJykgfHxcbiAgICAgICAgICAgICBsb3dlci5pbmNsdWRlcygnYXBwcm9hY2gnKSB8fCBsb3dlci5pbmNsdWRlcygnc3RyYXRlZ3knKSkge1xuICAgICAgbGFiZWwgPSAncGxhbm5pbmcnO1xuICAgICAgbGFiZWxDb2xvciA9IHRoZW1lLmluZm8gPz8gdGhlbWUubmVvbi5ibHVlO1xuICAgICAgbGFiZWxJY29uID0gJ/Cfl7rvuI8nO1xuICAgICAgdGhvdWdodFR5cGUgPSAncGxhbm5pbmcnO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgYW5hbHlzaXMvcmVhc29uaW5nXG4gICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2FuYWx5emluZycpIHx8IGxvd2VyLmluY2x1ZGVzKCdleGFtaW5pbmcnKSB8fFxuICAgICAgICAgICAgIGxvd2VyLmluY2x1ZGVzKCdsb29raW5nIGF0JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3Jldmlld2luZycpKSB7XG4gICAgICBsYWJlbCA9ICdhbmFseXppbmcnO1xuICAgICAgbGFiZWxDb2xvciA9IHRoZW1lLndhcm5pbmcgPz8gdGhlbWUubmVvbi5vcmFuZ2U7XG4gICAgICBsYWJlbEljb24gPSAn8J+UjSc7XG4gICAgICB0aG91Z2h0VHlwZSA9ICdhbmFseXNpcyc7XG4gICAgfVxuICAgIC8vIERldGVjdCB0b29sIHNlbGVjdGlvbi9leGVjdXRpb24gdGhvdWdodHNcbiAgICBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygndG9vbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdyZWFkJykgfHwgXG4gICAgICAgICAgICAgbG93ZXIuaW5jbHVkZXMoJ2VkaXQnKSB8fCBsb3dlci5pbmNsdWRlcygnc2VhcmNoJykgfHxcbiAgICAgICAgICAgICBsb3dlci5pbmNsdWRlcygnYmFzaCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdleGVjdXRlJykpIHtcbiAgICAgIGxhYmVsID0gJ2V4ZWN1dGluZyc7XG4gICAgICBsYWJlbENvbG9yID0gdGhlbWUudG9vbENvbG9ycy5kZWZhdWx0ID8/IHRoZW1lLm5lb24ucHVycGxlO1xuICAgICAgbGFiZWxJY29uID0gJ+Kame+4jyc7XG4gICAgICB0aG91Z2h0VHlwZSA9ICdleGVjdXRpb24nO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgY29tcGxldGlvbi9yZXN1bHQgdGhvdWdodHNcbiAgICBlbHNlIGlmIChsb3dlci5pbmNsdWRlcygnY29tcGxldGUnKSB8fCBsb3dlci5pbmNsdWRlcygnZG9uZScpIHx8XG4gICAgICAgICAgICAgbG93ZXIuaW5jbHVkZXMoJ2ZpbmlzaGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3Jlc3VsdCcpKSB7XG4gICAgICBsYWJlbCA9ICdjb21wbGV0ZWQnO1xuICAgICAgbGFiZWxDb2xvciA9IHRoZW1lLnN1Y2Nlc3MgPz8gdGhlbWUubmVvbi5ncmVlbjtcbiAgICAgIGxhYmVsSWNvbiA9ICfinJMnO1xuICAgICAgdGhvdWdodFR5cGUgPSAnY29tcGxldGlvbic7XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKTtcbiAgICBcbiAgICAvLyBFbmhhbmNlZCBidWxsZXQgZGVzaWduIHdpdGggaWNvbiBhbmQgZ3JhZGllbnQgc3R5bGluZ1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGNvbG9yZWRMYWJlbCA9IGxhYmVsQ29sb3IoYCR7bGFiZWxJY29ufSAke2xhYmVsfWApO1xuICAgIFxuICAgIC8vIEZvcm1hdCB3aXRoIHByZW1pdW0gc3R5bGluZ1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KG5vcm1hbGl6ZWQsIHtcbiAgICAgIGxhYmVsOiBjb2xvcmVkTGFiZWwsXG4gICAgICBsYWJlbENvbG9yOiAodGV4dCkgPT4gdGV4dCwgLy8gQWxyZWFkeSBjb2xvcmVkXG4gICAgICB0aG91Z2h0VHlwZSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYXNzaXN0YW50IHJlc3BvbnNlIHdpdGggcHJlbWl1bSBzdHlsaW5nXG4gICAqIFVzZXMgZGlzdGluY3QgdmlzdWFsIHN0eWxlIHRvIGNsZWFybHkgc2VwYXJhdGUgZnJvbSB0aG91Z2h0c1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRBc3Npc3RhbnRSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJztcblxuICAgIC8vIENsZWFuIGNvbnRlbnQgLSByZW1vdmUgYW55IGV4aXN0aW5nIGJ1bGxldCBwcmVmaXhlc1xuICAgIGNvbnN0IGNsZWFuZWQgPSBjb250ZW50LnJlcGxhY2UoL15b4o+64oCi4peLXVxccyovLCAnJykudHJpbSgpO1xuICAgIGlmICghY2xlYW5lZC50cmltKCkpIHJldHVybiAnJztcblxuICAgIC8vIEFzc2lzdGFudCBzdHlsaW5nIHdpdGggZ3JhZGllbnQgYW5kIGljb25cbiAgICBjb25zdCBidWxsZXQgPSAn4peGJzsgLy8gRGlzdGluY3QgZnJvbSB0aG91Z2h0IGJ1bGxldCAo4o+6KVxuICAgIGNvbnN0IGxhYmVsID0gJ2Fzc2lzdGFudCc7XG4gICAgY29uc3QgbGFiZWxDb2xvciA9IHRoZW1lLmdyYWRpZW50Lm5lb247XG4gICAgY29uc3QgbGFiZWxJY29uID0gJ+KcqCc7XG4gICAgXG4gICAgY29uc3QgY29sb3JlZExhYmVsID0gbGFiZWxDb2xvcihgJHtsYWJlbEljb259ICR7bGFiZWx9YCk7XG4gICAgXG4gICAgLy8gRm9ybWF0IHdpdGggcHJlbWl1bSBzdHlsaW5nXG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoY2xlYW5lZCwge1xuICAgICAgbGFiZWw6IGNvbG9yZWRMYWJlbCxcbiAgICAgIGxhYmVsQ29sb3I6ICh0ZXh0KSA9PiB0ZXh0LCAvLyBBbHJlYWR5IGNvbG9yZWRcbiAgICAgIHRob3VnaHRUeXBlOiAnYXNzaXN0YW50JyxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgd3JhcFRleHRUb1dpZHRoKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm4gWycnXTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IHdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3RyZWFtaW5nIGVsYXBzZWQgdGltZSBpbiBDbGF1ZGUgQ29kZSBzdHlsZTogM20gMzBzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgLyAxMDAwKTtcbiAgICBpZiAoZWxhcHNlZCA8IDUpIHJldHVybiBudWxsOyAvLyBEb24ndCBzaG93IGZvciB2ZXJ5IHNob3J0IGR1cmF0aW9uc1xuICAgIGNvbnN0IG1pbnMgPSBNYXRoLmZsb29yKGVsYXBzZWQgLyA2MCk7XG4gICAgY29uc3Qgc2VjcyA9IGVsYXBzZWQgJSA2MDtcbiAgICBpZiAobWlucyA+IDApIHtcbiAgICAgIHJldHVybiBgJHttaW5zfW0gJHtzZWNzfXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7c2Vjc31zYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFNob3dzIGEgdmlzdWFsIHNlcGFyYXRvciB3aXRoIFwiaGlzdG9yeVwiIGxhYmVsIGFuZCBjdHJsK28gaGludFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scywgODApO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IGAgJHtsYWJlbH0gYDtcbiAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5tYXgoMCwgbWF4V2lkdGggLSBsYWJlbFRleHQubGVuZ3RoKTtcbiAgICBjb25zdCBsZWZ0UGFkID0gTWF0aC5mbG9vcihwYWRkaW5nIC8gMik7XG4gICAgY29uc3QgcmlnaHRQYWQgPSBNYXRoLmNlaWwocGFkZGluZyAvIDIpO1xuXG4gICAgLy8gQ2xhdWRlIENvZGUgc3R5bGU6IOKVkOKVkCBoaXN0b3J5IOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCfilZAnLnJlcGVhdChsZWZ0UGFkKSArIGxhYmVsVGV4dCArICfilZAnLnJlcGVhdChyaWdodFBhZCkpO1xuXG4gICAgcmV0dXJuIGBcXG4ke3NlcGFyYXRvcn1cXG4ke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayB0byB0aGUgZXZlbnQgcXVldWVcbiAgICogVGhpcyBkaXNwbGF5cyBhIGNvbGxhcHNlZCB2aWV3IHdpdGggZXhwYW5zaW9uIGhpbnQgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKi9cbiAgYWRkQ29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSB0aGlzLmZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50LCBsYWJlbCk7XG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiBmb3JtYXR0ZWRDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgaXNDb21wYWN0ZWQ6IHRydWUsXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCB0aGUgbW9zdCByZWNlbnQgdG9vbCByZXN1bHQgaW5saW5lIChDdHJsK08gc3VwcG9ydCkuXG4gICAqIFBvcHMgZnJvbSB0aGUgY29sbGFwc2VkIHJlc3VsdHMgc3RhY2sgYW5kIGRpc3BsYXlzIGZ1bGwgY29udGVudC5cbiAgICovXG4gIGV4cGFuZExhc3RUb29sUmVzdWx0KCk6IGJvb2xlYW4ge1xuICAgIC8vIEZpcnN0IHRyeSB0aGUgbmV3IHN0YWNrLCBmYWxsYmFjayB0byBvbGQgbGFzdFRvb2xSZXN1bHRcbiAgICBjb25zdCBjb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnBvcCgpO1xuICAgIGlmICghY29sbGFwc2VkICYmICF0aGlzLmxhc3RUb29sUmVzdWx0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IGNvbGxhcHNlZD8uY29udGVudCB8fCB0aGlzLmxhc3RUb29sUmVzdWx0IHx8ICcnO1xuICAgIGNvbnN0IHRvb2xOYW1lID0gY29sbGFwc2VkPy50b29sTmFtZSB8fCAncmVzdWx0JztcblxuICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIHN0cnVjdHVyZWQgb3V0cHV0IHRoYXQgc2hvdWxkbid0IGJlIHdvcmQtd3JhcHBlZFxuICAgIGNvbnN0IGlzU3RydWN0dXJlZCA9IHRoaXMuaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZSwgY29udGVudCk7XG5cbiAgICBsZXQgcmVuZGVyZWQ6IHN0cmluZztcbiAgICBpZiAoaXNTdHJ1Y3R1cmVkKSB7XG4gICAgICAvLyBQcmVzZXJ2ZSBzdHJ1Y3R1cmVkIG91dHB1dCAoZ3JlcCwgYmFzaCwgY29kZSBvdXRwdXQpIC0ganVzdCBpbmRlbnQsIGRvbid0IHdyYXBcbiAgICAgIHJlbmRlcmVkID0gdGhpcy5mb3JtYXRTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZSwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvcm1hdCBwcm9zZS90ZXh0IHdpdGggdG9vbCBuYW1lIGxhYmVsIGFuZCB3b3JkIHdyYXBwaW5nXG4gICAgICBjb25zdCBsYWJlbCA9IGAke3Rvb2xOYW1lfWA7XG4gICAgICByZW5kZXJlZCA9IHRoaXMud3JhcEJ1bGxldFRleHQoY29udGVudCwgeyBsYWJlbCwgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IHJlbmRlcmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgaXNDb21wYWN0ZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgbGFzdFRvb2xSZXN1bHQgaWYgd2UgdXNlZCB0aGUgc3RhY2tcbiAgICBpZiAoY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdG9vbCBvdXRwdXQgaXMgc3RydWN0dXJlZCAoY29kZSwgZ3JlcCwgZmlsZSBsaXN0aW5ncykgdGhhdCBzaG91bGRuJ3QgYmUgd29yZC13cmFwcGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBpc1N0cnVjdHVyZWRUb29sT3V0cHV0KHRvb2xOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvb2wgPSB0b29sTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIFRvb2xzIHRoYXQgcHJvZHVjZSBzdHJ1Y3R1cmVkIG91dHB1dFxuICAgIGlmIChbJ2Jhc2gnLCAnZ3JlcCcsICdyZWFkJywgJ2dsb2InLCAnZXhlY3V0ZV9iYXNoJywgJ3NlYXJjaCcsICdmaW5kJ10uaW5jbHVkZXModG9vbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDb250ZW50IHBhdHRlcm5zIHRoYXQgaW5kaWNhdGUgc3RydWN0dXJlZCBvdXRwdXRcbiAgICAvLyAtIEZpbGUgcGF0aHMgd2l0aCBjb2xvbnMgKGdyZXAgb3V0cHV0KTogc3JjL2ZpbGUudHM6MTIzOlxuICAgIC8vIC0gTGluZSBudW1iZXJzOiBcIiAgIDHihpJcIiBvciBcIiAgNDI6XCJcbiAgICAvLyAtIENvZGUtbGlrZSBwYXR0ZXJuc1xuICAgIGlmICgvXlxccypbXFx3Li9dKzpcXGQrWzpcXHNdLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gZ3JlcC1zdHlsZSBvdXRwdXRcbiAgICBpZiAoL15cXHMqXFxkK1vihpI64pSCfF1cXHMvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBsaW5lLW51bWJlcmVkIG91dHB1dFxuICAgIGlmICgvXlvilILilJzilJTilIDilIzilJDilJjilKzilLTilLzila3ila7ila/ilbBdKy8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGJveCBkcmF3aW5nXG4gICAgaWYgKC9eXFxzKlskPl1cXHMrXFx3Ky8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGNvbW1hbmQgcHJvbXB0IG91dHB1dFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3RydWN0dXJlZCB0b29sIG91dHB1dCBwcmVzZXJ2aW5nIGxpbmUgc3RydWN0dXJlLlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgaGVhZGVyID0gYOKPuiAke3RoZW1lLmluZm8odG9vbE5hbWUpfSR7dGhlbWUudWkubXV0ZWQoJyDCtyBleHBhbmRlZCcpfVxcbmA7XG4gICAgY29uc3QgaW5kZW50ID0gJyAgJztcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCkgLSA0O1xuXG4gICAgY29uc3QgZm9ybWF0dGVkTGluZXMgPSBsaW5lcy5tYXAobGluZSA9PiB7XG4gICAgICAvLyBUcnVuY2F0ZSBvdmVybHkgbG9uZyBsaW5lcyBpbnN0ZWFkIG9mIHdyYXBwaW5nIChwcmVzZXJ2ZXMgc3RydWN0dXJlKVxuICAgICAgaWYgKGxpbmUubGVuZ3RoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIGluZGVudCArIGxpbmUuc2xpY2UoMCwgbWF4V2lkdGggLSAxKSArICfigKYnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluZGVudCArIGxpbmU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaGVhZGVyICsgZm9ybWF0dGVkTGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY291bnQgb2YgZXhwYW5kYWJsZSBjb2xsYXBzZWQgcmVzdWx0c1xuICAgKi9cbiAgZ2V0Q29sbGFwc2VkUmVzdWx0Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGNvbGxhcHNlZCByZXN1bHRzIChlLmcuLCBvbiBuZXcgY29udmVyc2F0aW9uKVxuICAgKi9cbiAgY2xlYXJDb2xsYXBzZWRSZXN1bHRzKCk6IHZvaWQge1xuICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMgPSBbXTtcbiAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gbnVsbDtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBTdGF0dXMgLyBtb2RlIC0tLS0tLS0tLS0tLVxuXG4gIHNldE1vZGUobW9kZTogJ2lkbGUnIHwgJ3N0cmVhbWluZycpOiB2b2lkIHtcbiAgICBjb25zdCB3YXNTdHJlYW1pbmcgPSB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG5cbiAgICAvLyBUcmFjayBzdHJlYW1pbmcgc3RhcnQgdGltZSBmb3IgZWxhcHNlZCBkaXNwbGF5XG4gICAgaWYgKG1vZGUgPT09ICdzdHJlYW1pbmcnICYmICF3YXNTdHJlYW1pbmcpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gMDsgLy8gUmVzZXQgdG9rZW4gY291bnRcbiAgICAgIHRoaXMuc3RyZWFtaW5nQ29udGVudEJ1ZmZlciA9ICcnOyAvLyBSZXNldCBzdHJlYW1pbmcgYnVmZmVyXG4gICAgICB0aGlzLnN0cmVhbWluZ0xpbmVzV3JpdHRlbiA9IDA7XG4gICAgICB0aGlzLnN0cmVhbWluZ0lucHV0UXVldWUgPSBbXTsgLy8gQ2xlYXIgYW55IHN0YWxlIHF1ZXVlZCBpbnB1dFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnKSB7XG4gICAgICAvLyBJTVBPUlRBTlQ6IENsZWFyIHRoZSBvdmVybGF5IEJFRk9SRSB3cml0aW5nIG5ld2xpbmUgdG8gcHJldmVudCBkdXBsaWNhdGUgYm94ZXNcbiAgICAgIC8vIFRoZSBvbGQgb3ZlcmxheSB3b3VsZCBvdGhlcndpc2Ugc2Nyb2xsIGludG8gc2Nyb2xsYmFjayBoaXN0b3J5XG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKCF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAgIC8vIEZpbmlzaCBzdHJlYW1pbmcgb24gYSBmcmVzaCBsaW5lIHNvIHRoZSBuZXh0IHByb21wdC9ldmVudCBkb2Vzbid0IGNvbGxpZGVcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciB0aGUgYnVmZmVyIGFmdGVyIHByb2Nlc3NpbmdcbiAgICAgIHRoaXMuc3RyZWFtaW5nQ29udGVudEJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5zdHJlYW1pbmdMaW5lc1dyaXR0ZW4gPSAwO1xuICAgICAgLy8gQ2xlYXIgYW55IHJlbWFpbmluZyBxdWV1ZWQgaW5wdXQgKHVzZXIgZGlkbid0IHByZXNzIEVudGVyIHRvIHF1ZXVlIGl0KVxuICAgICAgdGhpcy5zdHJlYW1pbmdJbnB1dFF1ZXVlID0gW107XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gQWx3YXlzIHJlbmRlciBwcm9tcHQgdG8ga2VlcCBib3R0b20gVUkgcGVyc2lzdGVudCAocmljaCBtb2RlIG9ubHkpXG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgYW5pbWF0ZWQgc3Bpbm5lciBmb3Igc3RyZWFtaW5nIHN0YXR1c1xuICAgKi9cbiAgcHJpdmF0ZSBzdGFydFNwaW5uZXJBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSByZXR1cm47IC8vIEFscmVhZHkgcnVubmluZ1xuICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gKHRoaXMuc3Bpbm5lckZyYW1lICsgMSkgJSBzcGlubmVyRnJhbWVzLmJyYWlsbGUubGVuZ3RoO1xuICAgICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9ICh0aGlzLmFjdGl2aXR5U3RhckZyYW1lICsgMSkgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGg7XG4gICAgICAvLyBVcGRhdGUgZWxhcHNlZCB0aW1lIGNvbG9yIGFuaW1hdGlvbiAoc2xvd2VyIGN5Y2xlKVxuICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgMyA9PT0gMCkge1xuICAgICAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gKHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgKyAxKSAlIHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIC8vIFJlLXJlbmRlciB0byBzaG93IHVwZGF0ZWQgc3Bpbm5lci9zdGFyIGZyYW1lXG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9LCAxMjApOyAvLyB+OCBGUFMgLSByZWR1Y2VkIGZyb20gODBtcyB0byBtaW5pbWl6ZSBmbGlja2VyaW5nIHdoaWxlIGtlZXBpbmcgYW5pbWF0aW9uIHNtb290aFxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGFuaW1hdGVkIHNwaW5uZXJcbiAgICovXG4gIHByaXZhdGUgc3RvcFNwaW5uZXJBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFjdGl2aXR5IG1lc3NhZ2UgZGlzcGxheWVkIHdpdGggYW5pbWF0ZWQgc3RhclxuICAgKiBFeGFtcGxlOiBcIlJ1bWluYXRpbmfigKZcIiBzaG93cyBhcyBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiXG4gICAqL1xuICBzZXRBY3Rpdml0eShtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdG9rZW4gY291bnQgZGlzcGxheWVkIGluIHRoZSBhY3Rpdml0eSBsaW5lXG4gICAqL1xuICB1cGRhdGVTdHJlYW1pbmdUb2tlbnModG9rZW5zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IHRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9rZW4gY291bnQgYXMgY29tcGFjdCBzdHJpbmcgKGUuZy4sIDEuMmssIDI0aywgMTI4aylcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9rZW5Db3VudCh0b2tlbnM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHRva2VucyA8IDEwMDApIHJldHVybiBTdHJpbmcodG9rZW5zKTtcbiAgICBpZiAodG9rZW5zIDwgMTAwMDApIHJldHVybiBgJHsodG9rZW5zIC8gMTAwMCkudG9GaXhlZCgxKX1rYDtcbiAgICByZXR1cm4gYCR7TWF0aC5yb3VuZCh0b2tlbnMgLyAxMDAwKX1rYDtcbiAgfVxuXG4gIGdldE1vZGUoKTogJ2lkbGUnIHwgJ3N0cmVhbWluZycge1xuICAgIHJldHVybiB0aGlzLm1vZGU7XG4gIH1cblxuICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzQnVuZGxlKHsgbWFpbjogbWVzc2FnZSwgb3ZlcnJpZGU6IG51bGwsIHN0cmVhbWluZzogbnVsbCB9KTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c0J1bmRsZShcbiAgICBzdGF0dXM6IHsgbWFpbj86IHN0cmluZyB8IG51bGw7IG92ZXJyaWRlPzogc3RyaW5nIHwgbnVsbDsgc3RyZWFtaW5nPzogc3RyaW5nIHwgbnVsbCB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcHJldlN0cmVhbWluZyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nO1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG1haW5DaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG92ZXJyaWRlQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKHN0YXR1cy5tYWluICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm1haW4gIT09IHRoaXMuc3RhdHVzTWVzc2FnZSkge1xuICAgICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gc3RhdHVzLm1haW47XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG1haW5DaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cy5vdmVycmlkZSAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5vdmVycmlkZSAhPT0gdGhpcy5zdGF0dXNPdmVycmlkZSkge1xuICAgICAgdGhpcy5zdGF0dXNPdmVycmlkZSA9IHN0YXR1cy5vdmVycmlkZTtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgb3ZlcnJpZGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdDaGFuZ2VkID0gc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IHByZXZTdHJlYW1pbmc7XG4gICAgaWYgKHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHN0cmVhbWluZ0NoYW5nZWQpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXR1c1N0cmVhbWluZyA9IHN0YXR1cy5zdHJlYW1pbmc7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nSW50cm9kdWNlID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgcHJldlN0cmVhbWluZyA9PT0gbnVsbCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgc3RyZWFtaW5nQ2xlYXJlZCA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHN0YXR1cy5zdHJlYW1pbmcgPT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBvbmx5U3RyZWFtaW5nQ2hhbmdlZCA9IHN0cmVhbWluZ0NoYW5nZWQgJiYgIW1haW5DaGFuZ2VkICYmICFvdmVycmlkZUNoYW5nZWQ7XG4gICAgY29uc3Qgc2tpcFN0cmVhbWluZ1JlbmRlciA9XG4gICAgICBvbmx5U3RyZWFtaW5nQ2hhbmdlZCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICFzdHJlYW1pbmdJbnRyb2R1Y2UgJiYgIXN0cmVhbWluZ0NsZWFyZWQ7XG5cbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZCAmJiAhc2tpcFN0cmVhbWluZ1JlbmRlcjtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c01ldGEoXG4gICAgbWV0YToge1xuICAgICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgICAgd3JpdGVzPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgICB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbmV4dCA9IHsgLi4udGhpcy5zdGF0dXNNZXRhLCAuLi5tZXRhIH07XG4gICAgY29uc3QgY2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KG5leHQpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXR1c01ldGEpO1xuICAgIHRoaXMuc3RhdHVzTWV0YSA9IG5leHQ7XG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQ7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVNb2RlVG9nZ2xlcyhzdGF0ZTogUGFydGlhbDxNb2RlVG9nZ2xlU3RhdGU+KTogdm9pZCB7XG4gICAgdGhpcy50b2dnbGVTdGF0ZSA9IHsgLi4udGhpcy50b2dnbGVTdGF0ZSwgLi4uc3RhdGUgfTtcbiAgICBpZiAoXG4gICAgICAhc3RhdGUudGhpbmtpbmdIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5jcml0aWNhbEFwcHJvdmFsSG90a2V5ICYmXG4gICAgICAhc3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5ICYmXG4gICAgICAhc3RhdGUuYWxwaGFaZXJvSG90a2V5ICYmXG4gICAgICAhc3RhdGUuZGVidWdIb3RrZXlcbiAgICApIHtcbiAgICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5jbGVhcigpO1xuICAgIH1cbiAgICAvLyBGb3JjZSBuZXh0IHJlbmRlciB0byBzaG93IHVwZGF0ZWQgdG9nZ2xlIHN0YXRlXG4gICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIGRpc3BsYXkgaW4gdGhlIFVJLlxuICAgKiBDYWxsZWQgZHVyaW5nIGR1YWwtUkwgbW9kZSB0byBzaG93IGFjdGl2ZSBhZ2VudCwgbW9kdWxlL3N0ZXAgcHJvZ3Jlc3MsIGFuZCB3aW4gc3RhdGlzdGljcy5cbiAgICovXG4gIHVwZGF0ZVJMU3RhdHVzKHN0YXR1czogUGFydGlhbDxSTEFnZW50U3RhdHVzPik6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMucmxTdGF0dXMsIC4uLnN0YXR1cyB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5ybFN0YXR1cyk7XG4gICAgdGhpcy5ybFN0YXR1cyA9IG5leHQ7XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIFJMIGFnZW50IHN0YXR1cyAoZS5nLiwgd2hlbiBSTCBydW4gY29tcGxldGVzKS5cbiAgICovXG4gIGNsZWFyUkxTdGF0dXMoKTogdm9pZCB7XG4gICAgdGhpcy5ybFN0YXR1cyA9IHt9O1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgUkwgc3RhdHVzIGZvciBleHRlcm5hbCBhY2Nlc3MuXG4gICAqL1xuICBnZXRSTFN0YXR1cygpOiBSZWFkb25seTxSTEFnZW50U3RhdHVzPiB7XG4gICAgcmV0dXJuIHRoaXMucmxTdGF0dXM7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHNlY3VyZSBUQU8gdG9vbHMgc3RhdHVzIGZvciBkaXNwbGF5IGluIHRoZSBVSS5cbiAgICogVHJhY2tzIEV4ZWN1dGUsIFByb2JlLCBTdGF0ZSB0b29scyB3aXRoIGVuaGFuY2VkIG91dHB1dCBmb3JtYXR0aW5nLlxuICAgKi9cbiAgdXBkYXRlU2VjdXJlVG9vbHNTdGF0dXMoc3RhdHVzOiBQYXJ0aWFsPFNlY3VyZVRvb2xzU3RhdHVzPik6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMuc2VjdXJlVG9vbHNTdGF0dXMsIC4uLnN0YXR1cyB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zZWN1cmVUb29sc1N0YXR1cyk7XG4gICAgdGhpcy5zZWN1cmVUb29sc1N0YXR1cyA9IG5leHQ7XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlY29yZCBhIHNlY3VyZSB0b29sIGludm9jYXRpb24gZm9yIHRyYWNraW5nLlxuICAgKi9cbiAgcmVjb3JkU2VjdXJlVG9vbEludm9jYXRpb24oXG4gICAgdG9vbDogJ0V4ZWN1dGUnIHwgJ1Byb2JlJyB8ICdTdGF0ZScgfCAnVHJhbnNmb3JtJyB8ICdUYW9PcHMnLFxuICAgIGRldGFpbHM/OiB7IGNvbW1hbmQ/OiBzdHJpbmc7IGV4aXRDb2RlPzogbnVtYmVyOyB0YXJnZXQ/OiBzdHJpbmc7IHNlcnZpY2VzPzogbnVtYmVyOyBhY3Rpb24/OiAnZ2V0JyB8ICdzZXQnOyBrZXlzQ291bnQ/OiBudW1iZXIgfVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBpbnZvY2F0aW9ucyA9ICh0aGlzLnNlY3VyZVRvb2xzU3RhdHVzLnRvdGFsSW52b2NhdGlvbnMgfHwgMCkgKyAxO1xuICAgIGNvbnN0IHVwZGF0ZXM6IFBhcnRpYWw8U2VjdXJlVG9vbHNTdGF0dXM+ID0ge1xuICAgICAgbGFzdFRvb2xVc2VkOiB0b29sLFxuICAgICAgdG90YWxJbnZvY2F0aW9uczogaW52b2NhdGlvbnMsXG4gICAgfTtcblxuICAgIGlmICh0b29sID09PSAnRXhlY3V0ZScgJiYgZGV0YWlscykge1xuICAgICAgdXBkYXRlcy5leGVjdXRlID0ge1xuICAgICAgICBhY3RpdmU6IHRydWUsXG4gICAgICAgIGxhc3RDb21tYW5kOiBkZXRhaWxzLmNvbW1hbmQsXG4gICAgICAgIGxhc3RFeGl0Q29kZTogZGV0YWlscy5leGl0Q29kZSxcbiAgICAgICAgZXhlY0NvdW50OiAodGhpcy5zZWN1cmVUb29sc1N0YXR1cy5leGVjdXRlPy5leGVjQ291bnQgfHwgMCkgKyAxLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRvb2wgPT09ICdQcm9iZScgJiYgZGV0YWlscykge1xuICAgICAgdXBkYXRlcy5wcm9iZSA9IHtcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICBsYXN0VGFyZ2V0OiBkZXRhaWxzLnRhcmdldCxcbiAgICAgICAgc2VydmljZXNGb3VuZDogZGV0YWlscy5zZXJ2aWNlcyxcbiAgICAgICAgcHJvYmVDb3VudDogKHRoaXMuc2VjdXJlVG9vbHNTdGF0dXMucHJvYmU/LnByb2JlQ291bnQgfHwgMCkgKyAxLFxuICAgICAgfTtcbiAgICB9IGVsc2UgaWYgKHRvb2wgPT09ICdTdGF0ZScgJiYgZGV0YWlscykge1xuICAgICAgdXBkYXRlcy5zdGF0ZSA9IHtcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICBsYXN0QWN0aW9uOiBkZXRhaWxzLmFjdGlvbixcbiAgICAgICAga2V5c1N0b3JlZDogZGV0YWlscy5rZXlzQ291bnQsXG4gICAgICAgIHBlcnNpc3RlbnQ6IHRydWUsXG4gICAgICB9O1xuICAgIH1cblxuICAgIHRoaXMudXBkYXRlU2VjdXJlVG9vbHNTdGF0dXModXBkYXRlcyk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgc2VjdXJlIHRvb2xzIHN0YXR1cyBmb3IgZXh0ZXJuYWwgYWNjZXNzLlxuICAgKi9cbiAgZ2V0U2VjdXJlVG9vbHNTdGF0dXMoKTogUmVhZG9ubHk8U2VjdXJlVG9vbHNTdGF0dXM+IHtcbiAgICByZXR1cm4gdGhpcy5zZWN1cmVUb29sc1N0YXR1cztcbiAgfVxuXG4gIHNldElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSAobGluZXMgPz8gW10pLm1hcChsaW5lID0+IGxpbmUucmVwbGFjZSgvXFxzKyQvZywgJycpKTtcbiAgICBjb25zdCBoYXNDb250ZW50ID0gbm9ybWFsaXplZC5zb21lKChsaW5lKSA9PiBsaW5lLnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgICBpZiAoIWhhc0NvbnRlbnQpIHtcbiAgICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxpbWl0ZWQgPSB0aGlzLmxpbWl0SW5saW5lUGFuZWwobm9ybWFsaXplZCk7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGxpbWl0ZWQpID09PSBKU09OLnN0cmluZ2lmeSh0aGlzLmlubGluZVBhbmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlubGluZVBhbmVsID0gbGltaXRlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgc3VwcG9ydHNJbmxpbmVQYW5lbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGl2ZSAmJiAhdGhpcy5wbGFpbk1vZGU7XG4gIH1cblxuICBjbGVhcklubGluZVBhbmVsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHJldHVybjtcbiAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGFuIGludGVyYWN0aXZlIG1lbnUgd2l0aCBhcnJvdyBrZXkgbmF2aWdhdGlvbiAoQ2xhdWRlIENvZGUgc3R5bGUpLlxuICAgKiBNZW51IGlzIGRpc3BsYXllZCBpbiB0aGUgaW5saW5lIHBhbmVsIGFyZWEgYW5kIGludGVyY2VwdHMgYXJyb3cvZW50ZXIga2V5cy5cbiAgICogQHBhcmFtIGl0ZW1zIC0gTWVudSBpdGVtcyB0byBkaXNwbGF5XG4gICAqIEBwYXJhbSBvcHRpb25zIC0gTWVudSBvcHRpb25zICh0aXRsZSwgaW5pdGlhbEluZGV4KVxuICAgKiBAcGFyYW0gY2FsbGJhY2sgLSBDYWxsZWQgd2hlbiB1c2VyIHNlbGVjdHMgYW4gaXRlbSAob3IgbnVsbCBpZiBjYW5jZWxsZWQpXG4gICAqL1xuICBzZXRNZW51KFxuICAgIGl0ZW1zOiBNZW51SXRlbVtdLFxuICAgIG9wdGlvbnM6IHsgdGl0bGU/OiBzdHJpbmc7IGluaXRpYWxJbmRleD86IG51bWJlciB9ID0ge30sXG4gICAgY2FsbGJhY2s6IChpdGVtOiBNZW51SXRlbSB8IG51bGwpID0+IHZvaWRcbiAgKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnN1cHBvcnRzSW5saW5lUGFuZWwoKSkge1xuICAgICAgLy8gTm9uLWludGVyYWN0aXZlIG1vZGUgLSBqdXN0IGNhbGwgY2FsbGJhY2sgd2l0aCBmaXJzdCBpdGVtIG9yIG51bGxcbiAgICAgIGNhbGxiYWNrKGl0ZW1zWzBdID8/IG51bGwpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubWVudUl0ZW1zID0gaXRlbXM7XG4gICAgdGhpcy5tZW51SW5kZXggPSBvcHRpb25zLmluaXRpYWxJbmRleCA/PyBpdGVtcy5maW5kSW5kZXgoaSA9PiBpLmlzQWN0aXZlKSA/PyAwO1xuICAgIGlmICh0aGlzLm1lbnVJbmRleCA8IDApIHRoaXMubWVudUluZGV4ID0gMDtcbiAgICB0aGlzLm1lbnVUaXRsZSA9IG9wdGlvbnMudGl0bGUgPz8gbnVsbDtcbiAgICB0aGlzLm1lbnVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgIHRoaXMucmVuZGVyTWVudVBhbmVsKCk7XG4gIH1cblxuICAvKipcbiAgICogQ2xvc2UgdGhlIGFjdGl2ZSBtZW51IHdpdGhvdXQgc2VsZWN0aW5nIGFueXRoaW5nLlxuICAgKi9cbiAgY2xvc2VNZW51KCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc01lbnVBY3RpdmUoKSkgcmV0dXJuO1xuICAgIGNvbnN0IGNhbGxiYWNrID0gdGhpcy5tZW51Q2FsbGJhY2s7XG4gICAgdGhpcy5tZW51SXRlbXMgPSBbXTtcbiAgICB0aGlzLm1lbnVJbmRleCA9IDA7XG4gICAgdGhpcy5tZW51VGl0bGUgPSBudWxsO1xuICAgIHRoaXMubWVudUNhbGxiYWNrID0gbnVsbDtcbiAgICB0aGlzLmNsZWFySW5saW5lUGFuZWwoKTtcbiAgICBjYWxsYmFjaz8uKG51bGwpO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGFuIGludGVyYWN0aXZlIG1lbnUgaXMgY3VycmVudGx5IGFjdGl2ZS5cbiAgICovXG4gIGlzTWVudUFjdGl2ZSgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5tZW51SXRlbXMubGVuZ3RoID4gMCAmJiB0aGlzLm1lbnVDYWxsYmFjayAhPT0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW5kZXIgdGhlIG1lbnUgdG8gdGhlIGlubGluZSBwYW5lbC5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyTWVudVBhbmVsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pc01lbnVBY3RpdmUoKSkgcmV0dXJuO1xuXG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBUaXRsZVxuICAgIGlmICh0aGlzLm1lbnVUaXRsZSkge1xuICAgICAgbGluZXMucHVzaChjaGFsay5ib2xkLmhleCgnIzhCNUNGNicpKHRoaXMubWVudVRpdGxlKSk7XG4gICAgICBsaW5lcy5wdXNoKCcnKTtcbiAgICB9XG5cbiAgICAvLyBNZW51IGl0ZW1zIHdpdGggc2VsZWN0aW9uIGluZGljYXRvclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5tZW51SXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGl0ZW0gPSB0aGlzLm1lbnVJdGVtc1tpXSE7XG4gICAgICBjb25zdCBpc1NlbGVjdGVkID0gaSA9PT0gdGhpcy5tZW51SW5kZXg7XG4gICAgICBjb25zdCBpc0Rpc2FibGVkID0gaXRlbS5kaXNhYmxlZDtcbiAgICAgIGNvbnN0IGlzQWN0aXZlID0gaXRlbS5pc0FjdGl2ZTtcblxuICAgICAgbGV0IGxpbmUgPSAnJztcblxuICAgICAgLy8gU2VsZWN0aW9uIGluZGljYXRvclxuICAgICAgaWYgKGlzU2VsZWN0ZWQpIHtcbiAgICAgICAgbGluZSArPSBjaGFsay5oZXgoJyMyMkQzRUUnKSgn4p2vICcpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbGluZSArPSAnICAnO1xuICAgICAgfVxuXG4gICAgICAvLyBMYWJlbCB3aXRoIHN0eWxpbmdcbiAgICAgIGlmIChpc0Rpc2FibGVkKSB7XG4gICAgICAgIGxpbmUgKz0gY2hhbGsuZGltKGl0ZW0ubGFiZWwpO1xuICAgICAgfSBlbHNlIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgIGxpbmUgKz0gY2hhbGsuYm9sZC5oZXgoJyMyMkQzRUUnKShpdGVtLmxhYmVsKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgbGluZSArPSBjaGFsay5oZXgoJyMzNEQzOTknKShpdGVtLmxhYmVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmUgKz0gY2hhbGsud2hpdGUoaXRlbS5sYWJlbCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEFjdGl2ZSBpbmRpY2F0b3JcbiAgICAgIGlmIChpc0FjdGl2ZSkge1xuICAgICAgICBsaW5lICs9IGNoYWxrLmRpbSgnIChjdXJyZW50KScpO1xuICAgICAgfVxuXG4gICAgICAvLyBEZXNjcmlwdGlvblxuICAgICAgaWYgKGl0ZW0uZGVzY3JpcHRpb24pIHtcbiAgICAgICAgY29uc3QgZGVzYyA9IGlzRGlzYWJsZWQgPyBjaGFsay5kaW0oaXRlbS5kZXNjcmlwdGlvbikgOiBjaGFsay5kaW0oYCAtICR7aXRlbS5kZXNjcmlwdGlvbn1gKTtcbiAgICAgICAgbGluZSArPSBkZXNjO1xuICAgICAgfVxuXG4gICAgICBsaW5lcy5wdXNoKGxpbmUpO1xuICAgIH1cblxuICAgIC8vIEhpbnRcbiAgICBsaW5lcy5wdXNoKCcnKTtcbiAgICBsaW5lcy5wdXNoKGNoYWxrLmRpbSgn4oaR4oaTIG5hdmlnYXRlIOKAoiBlbnRlciBzZWxlY3Qg4oCiIGVzYyBjYW5jZWwnKSk7XG5cbiAgICB0aGlzLnNldElubGluZVBhbmVsKGxpbmVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBOYXZpZ2F0ZSBtZW51IHNlbGVjdGlvbi5cbiAgICogQHJldHVybnMgdHJ1ZSBpZiBtZW51IGNvbnN1bWVkIHRoZSBuYXZpZ2F0aW9uXG4gICAqL1xuICBwcml2YXRlIG5hdmlnYXRlTWVudShkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5pc01lbnVBY3RpdmUoKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gRmluZCBuZXh0IG5vbi1kaXNhYmxlZCBpdGVtXG4gICAgbGV0IG5ld0luZGV4ID0gdGhpcy5tZW51SW5kZXg7XG4gICAgbGV0IGF0dGVtcHRzID0gMDtcbiAgICBjb25zdCBtYXhBdHRlbXB0cyA9IHRoaXMubWVudUl0ZW1zLmxlbmd0aDtcblxuICAgIGRvIHtcbiAgICAgIG5ld0luZGV4ID0gKG5ld0luZGV4ICsgZGlyZWN0aW9uICsgdGhpcy5tZW51SXRlbXMubGVuZ3RoKSAlIHRoaXMubWVudUl0ZW1zLmxlbmd0aDtcbiAgICAgIGF0dGVtcHRzKys7XG4gICAgfSB3aGlsZSAodGhpcy5tZW51SXRlbXNbbmV3SW5kZXhdPy5kaXNhYmxlZCAmJiBhdHRlbXB0cyA8IG1heEF0dGVtcHRzKTtcblxuICAgIGlmIChuZXdJbmRleCAhPT0gdGhpcy5tZW51SW5kZXgpIHtcbiAgICAgIHRoaXMubWVudUluZGV4ID0gbmV3SW5kZXg7XG4gICAgICB0aGlzLnJlbmRlck1lbnVQYW5lbCgpO1xuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNlbGVjdCB0aGUgY3VycmVudGx5IGhpZ2hsaWdodGVkIG1lbnUgaXRlbS5cbiAgICogQHJldHVybnMgdHJ1ZSBpZiBtZW51IGNvbnN1bWVkIHRoZSBzZWxlY3Rpb25cbiAgICovXG4gIHByaXZhdGUgc2VsZWN0TWVudUl0ZW0oKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmlzTWVudUFjdGl2ZSgpKSByZXR1cm4gZmFsc2U7XG5cbiAgICBjb25zdCBpdGVtID0gdGhpcy5tZW51SXRlbXNbdGhpcy5tZW51SW5kZXhdO1xuICAgIGlmICghaXRlbSB8fCBpdGVtLmRpc2FibGVkKSByZXR1cm4gdHJ1ZTsgLy8gQ29uc3VtZSBidXQgZG9uJ3Qgc2VsZWN0XG5cbiAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMubWVudUNhbGxiYWNrO1xuICAgIHRoaXMubWVudUl0ZW1zID0gW107XG4gICAgdGhpcy5tZW51SW5kZXggPSAwO1xuICAgIHRoaXMubWVudVRpdGxlID0gbnVsbDtcbiAgICB0aGlzLm1lbnVDYWxsYmFjayA9IG51bGw7XG4gICAgdGhpcy5jbGVhcklubGluZVBhbmVsKCk7XG4gICAgY2FsbGJhY2s/LihpdGVtKTtcblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBsaW1pdElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhMaW5lcyA9IE1hdGgubWF4KDQsIE1hdGgubWluKHRoaXMubWF4SW5saW5lUGFuZWxMaW5lcywgTWF0aC5tYXgoMiwgdGhpcy5yb3dzIC0gOCkpKTtcbiAgICBpZiAobGluZXMubGVuZ3RoIDw9IG1heExpbmVzKSB7XG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJmbG93ID0gbGluZXMubGVuZ3RoIC0gbWF4TGluZXM7XG4gICAgY29uc3QgaW5kaWNhdG9yID0gdGhlbWUudWkubXV0ZWQoYOKApiAke292ZXJmbG93fSBtb3JlIGxpbmVzYCk7XG4gICAgY29uc3QgdGFpbENvdW50ID0gTWF0aC5tYXgoMSwgbWF4TGluZXMgLSAxKTtcbiAgICBjb25zdCB0YWlsID0gbGluZXMuc2xpY2UoLXRhaWxDb3VudCk7XG4gICAgcmV0dXJuIFtpbmRpY2F0b3IsIC4uLnRhaWxdO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFByb21wdCByZW5kZXJpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHQoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkIG9yIHN0aWxsIGluaXRpYWxpemluZyAoYmVmb3JlIGJhbm5lciBzaG93bilcbiAgICBpZiAodGhpcy5kaXNwb3NlZCB8fCB0aGlzLmluaXRpYWxpemluZykgcmV0dXJuO1xuXG4gICAgLy8gVGhyb3R0bGUgcmVuZGVycyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdFJlbmRlclRpbWUgPCB0aGlzLnJlbmRlclRocm90dGxlTXMpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVuZGVyKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IHRydWU7XG4gICAgICAgIC8vIFRyYWNrIHRoZSB0aW1lciBmb3IgY2xlYW51cFxuICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMucmVuZGVyVGhyb3R0bGVNcyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb21wdEltbWVkaWF0ZSgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWQgb3Igc3RpbGwgaW5pdGlhbGl6aW5nIChiZWZvcmUgYmFubmVyIHNob3duKVxuICAgIGlmICh0aGlzLmRpc3Bvc2VkIHx8IHRoaXMuaW5pdGlhbGl6aW5nKSByZXR1cm47XG5cbiAgICAvLyBQZXJmb3JtYW5jZSBvcHRpbWl6YXRpb246IFNraXAgcmVuZGVyIGlmIG5vdGhpbmcgY2hhbmdlZCAoZHVyaW5nIGlkbGUgbW9kZSBvbmx5KVxuICAgIC8vIER1cmluZyBzdHJlYW1pbmcgbW9kZSwgd2UgbmVlZCB0byB1cGRhdGUgYW5pbWF0aW9ucyBhbmQgc3RhdHVzXG4gICAgaWYgKCF0aGlzLmZvcmNlTmV4dFJlbmRlciAmJlxuICAgICAgICB0aGlzLm1vZGUgPT09ICdpZGxlJyAmJlxuICAgICAgICB0aGlzLmJ1ZmZlciA9PT0gdGhpcy5sYXN0UmVuZGVyZWRCdWZmZXIgJiZcbiAgICAgICAgdGhpcy5jdXJzb3IgPT09IHRoaXMubGFzdFJlbmRlcmVkQ3Vyc29yICYmXG4gICAgICAgIHRoaXMubW9kZSA9PT0gdGhpcy5sYXN0UmVuZGVyZWRNb2RlICYmXG4gICAgICAgIHRoaXMubGFzdE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICAgIC8vIENvbnRlbnQgdW5jaGFuZ2VkLCBza2lwIGV4cGVuc2l2ZSByZS1yZW5kZXJcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSBmYWxzZTtcblxuICAgIC8vIFN1cHByZXNzIHJlbmRlciBkdXJpbmcgcGFzdGUgYnVyc3QgdG8gcHJldmVudCB2aXN1YWwgbGVha1xuICAgIC8vIE9ubHkgYWxsb3cgcmVuZGVyIGlmIHdlIGhhdmUgYSBjb2xsYXBzZWQgcGFzdGUgdG8gc2hvd1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgY29uc3QgaW5FbWl0UGFzdGUgPSB0aGlzLmVtaXRQYXN0ZUJ1ZmZlci5sZW5ndGggPiAwIHx8IHRoaXMuZW1pdFBhc3RlVGltZXIgIT09IG51bGw7XG4gICAgaWYgKChidXJzdEFjdGl2ZSB8fCB0aGlzLmluUGxhaW5QYXN0ZSB8fCB0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwgaW5FbWl0UGFzdGUpICYmICF0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XG4gICAgdGhpcy5sYXN0UmVuZGVyZWRCdWZmZXIgPSB0aGlzLmJ1ZmZlcjtcbiAgICB0aGlzLmxhc3RSZW5kZXJlZEN1cnNvciA9IHRoaXMuY3Vyc29yO1xuICAgIHRoaXMubGFzdFJlbmRlcmVkTW9kZSA9IHRoaXMubW9kZTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgbGluZSA9IGA+ICR7dGhpcy5idWZmZXJ9YDtcbiAgICAgIGlmICghdGhpcy5pc1Byb21wdEFjdGl2ZSAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKGBcXHIke0VTQy5DTEVBUl9MSU5FfSR7bGluZX1gKTtcbiAgICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7IC8vIHByb21wdCBlbmRzIG1pZC1saW5lIGJ5IGRlc2lnblxuICAgICAgdGhpcy5wcm9tcHRIZWlnaHQgPSAxO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGxvd1Byb21wdFJlbmRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJpY2ggaW5saW5lIG1vZGU6IHByb21wdCBmbG93cyBuYXR1cmFsbHkgd2l0aCBjb250ZW50XG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgdGhpcy5sYXN0UmVuZGVyV2lkdGggPSBtYXhXaWR0aDtcblxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmJ1aWxkT3ZlcmxheUxpbmVzKCk7XG4gICAgaWYgKCFvdmVybGF5LmxpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlcmVkTGluZXMgPSBvdmVybGF5LmxpbmVzLm1hcChsaW5lID0+IHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgaWYgKCFyZW5kZXJlZExpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb21wdEluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ob3ZlcmxheS5wcm9tcHRJbmRleCwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gcmVuZGVyZWRMaW5lcy5sZW5ndGg7XG5cbiAgICAvLyBCYXRjaCBhbGwgQU5TSSBvcGVyYXRpb25zIGludG8gYSBzaW5nbGUgd3JpdGUgdG8gcHJldmVudCBmbGlja2VyaW5nXG4gICAgLy8gVGhpcyBlbGltaW5hdGVzIHRoZSB2aXN1YWwgaml0dGVyIGNhdXNlZCBieSBtdWx0aXBsZSBzZXF1ZW50aWFsIHRlcm1pbmFsIHdyaXRlc1xuICAgIGNvbnN0IGJ1ZmZlcjogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEhpZGUgY3Vyc29yIGR1cmluZyByZW5kZXIgdG8gcHJldmVudCB2aXN1YWwgYXJ0aWZhY3RzXG4gICAgYnVmZmVyLnB1c2goJ1xceDFiWz8yNWwnKTtcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHByb21wdCBhbmQgaGFuZGxlIGhlaWdodCBjaGFuZ2VzXG4gICAgLy8gSU1QT1JUQU5UOiBPbmx5IGNsZWFyIGlmIHdlIGhhdmUgdmFsaWQgb3ZlcmxheSBzdGF0ZSB0byBhdm9pZCBjdXJzb3IgcG9zaXRpb24gYnVnc1xuICAgIC8vIHRoYXQgY2F1c2Ugc2VwYXJhdG9yIGxpbmVzIHRvIGFjY3VtdWxhdGUgaW4gc2Nyb2xsYmFja1xuICAgIGlmICh0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgJiYgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA+IDAgJiYgdGhpcy5sYXN0T3ZlcmxheSAhPT0gbnVsbCkge1xuICAgICAgLy8gTW92ZSB1cCBmcm9tIHByb21wdCByb3cgdG8gdG9wIG9mIG92ZXJsYXlcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5LnByb21wdEluZGV4O1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske2xpbmVzVG9Ub3B9QWApO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBleGFjdGx5IHRoZSBvbGQgb3ZlcmxheSBsaW5lcyB1c2luZyBhdG9taWMgZXNjYXBlIHNlcXVlbmNlIGJhdGNoXG4gICAgICBjb25zdCBjbGVhckhlaWdodCA9IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNsZWFySGVpZ2h0OyBpKyspIHtcbiAgICAgICAgYnVmZmVyLnB1c2goJ1xccicpO1xuICAgICAgICBidWZmZXIucHVzaChFU0MuQ0xFQVJfTElORSk7XG4gICAgICAgIGlmIChpIDwgY2xlYXJIZWlnaHQgLSAxKSB7XG4gICAgICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0InKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBhbnl0aGluZyBiZWxvdyB0aGUgb2xkIG92ZXJsYXkgKGhhbmRsZXMgZWRnZSBjYXNlcylcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltKJyk7XG5cbiAgICAgIC8vIEFmdGVyIGNsZWFyaW5nLCBjdXJzb3IgaXMgYXQgbGFzdCBjbGVhcmVkIGxpbmVcbiAgICAgIC8vIE1vdmUgYmFjayB1cCB0byB0aGUgdG9wIHdoZXJlIG5ldyBvdmVybGF5IHNob3VsZCBzdGFydFxuICAgICAgY29uc3QgbW92ZUJhY2tVcCA9IGNsZWFySGVpZ2h0IC0gMTtcbiAgICAgIGlmIChtb3ZlQmFja1VwID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHttb3ZlQmFja1VwfUFgKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSkge1xuICAgICAgLy8gT3ZlcmxheSB3YXMgY2xlYXJlZCBidXQgd2UncmUgcmUtcmVuZGVyaW5nIC0gZW5zdXJlIGNsZWFuIHNsYXRlXG4gICAgICAvLyBVc2UgZXJhc2UtdG8tZW5kLW9mLXNjcmVlbiBmcm9tIGN1cnJlbnQgcG9zaXRpb25cbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltKJyk7XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgcHJvbXB0IGxpbmVzIChubyB0cmFpbGluZyBuZXdsaW5lIG9uIGxhc3QgbGluZSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcbiAgICAgIGJ1ZmZlci5wdXNoKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGJ1ZmZlci5wdXNoKHJlbmRlcmVkTGluZXNbaV0gfHwgJycpO1xuICAgICAgaWYgKGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgYnVmZmVyLnB1c2goJ1xcbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG9sZCBvdmVybGF5IHdhcyB0YWxsZXIsIGNsZWFyIGFueSByZW1haW5pbmcgc3RhbGUgbGluZXMgYmVsb3dcbiAgICAvLyBhbmQgdXNlIENTSSBKIChlcmFzZSBmcm9tIGN1cnNvciB0byBlbmQgb2Ygc2NyZWVuKSB0byBjbGVhbiB1cFxuICAgIGlmICh0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID4gaGVpZ2h0KSB7XG4gICAgICBidWZmZXIucHVzaCgnXFxuJyk7IC8vIE1vdmUgdG8gbGluZSBiZWxvdyBsYXN0IGNvbnRlbnRcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltKJyk7IC8vIENsZWFyIGZyb20gY3Vyc29yIHRvIGVuZCBvZiBzY3JlZW5cbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltBJyk7IC8vIE1vdmUgYmFjayB1cCB0byBsYXN0IGNvbnRlbnQgbGluZVxuICAgIH1cblxuICAgIC8vIFBvc2l0aW9uIGN1cnNvciBhdCBwcm9tcHQgaW5wdXQgbGluZVxuICAgIGNvbnN0IHByb21wdENvbCA9IE1hdGgubWluKE1hdGgubWF4KDEsIDMgKyB0aGlzLmN1cnNvciksIHRoaXMuY29scyB8fCA4MCk7XG4gICAgLy8gQ3Vyc29yIGlzIG5vdyBhdCB0aGUgbGFzdCBsaW5lLiBNb3ZlIHVwIHRvIHRoZSBwcm9tcHQgcm93LlxuICAgIGNvbnN0IGxpbmVzVG9Nb3ZlVXAgPSBoZWlnaHQgLSAxIC0gcHJvbXB0SW5kZXg7XG4gICAgaWYgKGxpbmVzVG9Nb3ZlVXAgPiAwKSB7XG4gICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtsaW5lc1RvTW92ZVVwfUFgKTtcbiAgICB9XG4gICAgYnVmZmVyLnB1c2goYFxceDFiWyR7cHJvbXB0Q29sfUdgKTtcblxuICAgIC8vIFNob3cgY3Vyc29yIGFnYWluIGFmdGVyIHBvc2l0aW9uaW5nXG4gICAgYnVmZmVyLnB1c2goJ1xceDFiWz8yNWgnKTtcblxuICAgIC8vIFNpbmdsZSBhdG9taWMgd3JpdGUgdG8gcHJldmVudCBmbGlja2VyaW5nXG4gICAgdGhpcy53cml0ZShidWZmZXIuam9pbignJykpO1xuXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gcHJvbXB0Q29sO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgIHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IHRydWU7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0geyBsaW5lczogcmVuZGVyZWRMaW5lcywgcHJvbXB0SW5kZXggfTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkT3ZlcmxheUxpbmVzKCk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICAvLyBTaW1wbGUgaG9yaXpvbnRhbCBkaXZpZGVyIC0gY2xlYW4gYW5kIHJlbGlhYmxlXG4gICAgY29uc3QgZGl2aWRlciA9IHRoZW1lLnVpLm11dGVkKCfilIAnLnJlcGVhdChtYXhXaWR0aCkpO1xuXG4gICAgY29uc3QgZmFsbGJhY2tBY3Rpdml0eSA9ICgoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZyB8fCB0aGlzLnN0YXR1c092ZXJyaWRlIHx8IHRoaXMuc3RhdHVzTWVzc2FnZTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSB0aGlzLnN0cmlwQW5zaShyYXcpLnJlcGxhY2UoL15b4o+64oCiXVxccyovLCAnJykudHJpbSgpO1xuICAgICAgcmV0dXJuIGNsZWFuZWQgfHwgbnVsbDtcbiAgICB9KSgpO1xuXG4gICAgLy8gQWN0aXZpdHkgbGluZSAob25seSB3aGVuIHN0cmVhbWluZykgLSBzaG93czog4peQIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzKVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICh0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5KSkge1xuICAgICAgLy8gQ2xlYW4gc3Bpbm5lciBhbmltYXRpb24gdXNpbmcgYnJhaWxsZSBkb3RzICsgc2hpbW1lciBhY2NlbnQgZm9yIGEgcmljaGVyIGZlZWxcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFycyA9IHNwaW5uZXJGcmFtZXMuYnJhaWxsZTtcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFyID0gc3Bpbm5lckNoYXJzW3RoaXMuc3Bpbm5lckZyYW1lICUgc3Bpbm5lckNoYXJzLmxlbmd0aF0gPz8gJ+Kgiyc7XG4gICAgICBjb25zdCBzdGFyQ2hhciA9IHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzW3RoaXMuYWN0aXZpdHlTdGFyRnJhbWUgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGhdID8/ICfinLYnO1xuICAgICAgY29uc3Qgc3Bpbm5lckRlY29yYXRlZCA9IGAke3RoZW1lLmluZm8oc3Bpbm5lckNoYXIpfSR7dGhlbWUuYWNjZW50ID8gdGhlbWUuYWNjZW50KHN0YXJDaGFyKSA6IHN0YXJDaGFyfWA7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy5mb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk7XG4gICAgICBjb25zdCBnZW5lcmljQWN0aXZpdGllcyA9IFsnU3RyZWFtaW5nJywgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnXTtcbiAgICAgIGxldCBkaXNwbGF5QWN0aXZpdHkgPSB0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5IHx8ICcnO1xuICAgICAgaWYgKGdlbmVyaWNBY3Rpdml0aWVzLmluY2x1ZGVzKGRpc3BsYXlBY3Rpdml0eSkgJiYgZmFsbGJhY2tBY3Rpdml0eSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5O1xuICAgICAgfVxuICAgICAgaWYgKCFkaXNwbGF5QWN0aXZpdHkudHJpbSgpKSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHkgfHwgJ1dvcmtpbmcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVlZHNFbGxpcHNpcyA9ICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCfigKYnKSAmJiAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgnLi4uJyk7XG4gICAgICAvLyBGb3JtYXQ6IOKgiyBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDFtIDE5cyDCtyDihpExLjJrIHRva2VucylcbiAgICAgIC8vIEJ1aWxkIHBhcnRzIHdpdGggYW5pbWF0ZWQgZWxhcHNlZCB0aW1lIGNvbG9yXG4gICAgICBjb25zdCBlbGFwc2VkQ29sb3IgPSBjaGFsay5oZXgodGhpcy5lbGFwc2VkQ29sb3JGcmFtZXNbdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSAlIHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzLmxlbmd0aF0gPz8gJyNGNTlFMEInKTtcbiAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFsnZXNjIHRvIGludGVycnVwdCddO1xuICAgICAgaWYgKGVsYXBzZWQpIHBhcnRzLnB1c2goZWxhcHNlZENvbG9yKGVsYXBzZWQpKTtcbiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1Rva2VucyA+IDApIHtcbiAgICAgICAgcGFydHMucHVzaChg4oaRJHt0aGlzLmZvcm1hdFRva2VuQ291bnQodGhpcy5zdHJlYW1pbmdUb2tlbnMpfSB0b2tlbnNgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZWZpeCA9IGAke3NwaW5uZXJEZWNvcmF0ZWR9IGA7XG4gICAgICBjb25zdCBhY3Rpdml0eVRleHQgPSBgJHtkaXNwbGF5QWN0aXZpdHkudHJpbSgpfSR7bmVlZHNFbGxpcHNpcyA/ICfigKYnIDogJyd9YDtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IGAgJHt0aGVtZS51aS5tdXRlZCgnKCcpfSR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0ke3RoZW1lLnVpLm11dGVkKCcpJyl9YDtcblxuICAgICAgLy8gQnVpbGQgdGhlIGZ1bGwgYWN0aXZpdHkgbGluZSB3aXRoIGFuaW1hdGVkIGNvbG9yIGZvciBlbGFwc2VkIHRpbWVcbiAgICAgIGNvbnN0IGFjdGl2aXR5TGluZSA9IGAke3ByZWZpeH0ke2FjdGl2aXR5VGV4dH0ke3N1ZmZpeH1gO1xuXG4gICAgICAvLyBBbHdheXMgc2hvdyBmdWxsIHRleHQgLSB3cmFwIHRvIG11bHRpcGxlIGxpbmVzIGlmIG5lZWRlZFxuICAgICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgocHJlZml4KSk7XG4gICAgICBjb25zdCB3cmFwcGVkID0gdGhpcy53cmFwT3ZlcmxheUxpbmUoYWN0aXZpdHlMaW5lLCBtYXhXaWR0aCwgaW5kZW50KTtcbiAgICAgIGxpbmVzLnB1c2goLi4ud3JhcHBlZCk7XG4gICAgfVxuXG4gICAgLy8gVG9wIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvbXB0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IGxpbmVzLmxlbmd0aDtcbiAgICBjb25zdCBpbnB1dExpbmUgPSB0aGlzLmJ1aWxkSW5wdXRMaW5lKCk7XG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgYnkgc3BsaXR0aW5nIG9uIG5ld2xpbmVzXG4gICAgLy8gRmlsdGVyIG91dCBlbXB0eSBsaW5lcyB0byBwcmV2ZW50IGR1cGxpY2F0ZSBkaXZpZGVyIGFwcGVhcmFuY2UgZnJvbSBsZWFkaW5nL3RyYWlsaW5nIG5ld2xpbmVzXG4gICAgY29uc3QgaW5wdXRMaW5lcyA9IGlucHV0TGluZS5zcGxpdCgnXFxuJykuZmlsdGVyKChsaW5lLCBpZHgsIGFycikgPT4ge1xuICAgICAgLy8gS2VlcCBub24tZW1wdHkgbGluZXMsIGJ1dCBwcmVzZXJ2ZSBzaW5nbGUgZW1wdHkgbGluZSBpZiBpdCdzIGludGVudGlvbmFsIChlLmcuLCBiZXR3ZWVuIGNvbnRlbnQpXG4gICAgICAvLyBPbmx5IGZpbHRlciBsZWFkaW5nL3RyYWlsaW5nIGVtcHR5IGxpbmVzXG4gICAgICBpZiAobGluZS50cmltKCkgPT09ICcnKSB7XG4gICAgICAgIC8vIEZpbHRlciBpZiBpdCdzIHRoZSBmaXJzdCBsaW5lIChsZWFkaW5nIGVtcHR5KSBvciBsYXN0IGxpbmUgKHRyYWlsaW5nIGVtcHR5KVxuICAgICAgICBpZiAoaWR4ID09PSAwIHx8IGlkeCA9PT0gYXJyLmxlbmd0aCAtIDEpIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIC8vIEVuc3VyZSBhdCBsZWFzdCBvbmUgbGluZSBmb3IgdGhlIHByb21wdFxuICAgIGlmIChpbnB1dExpbmVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgaW5wdXRMaW5lcy5wdXNoKHRoZW1lLnByaW1hcnkoJz4gJykpO1xuICAgIH1cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgaW5wdXRMaW5lcykge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIC8vIEJvdHRvbSBkaXZpZGVyXG4gICAgbGluZXMucHVzaChkaXZpZGVyKTtcblxuICAgIC8vIElubGluZSBwYW5lbCAocGlubmVkIHNjcm9sbCBib3ggZm9yIGxpdmUgb3V0cHV0L21lbnVzKVxuICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgcGFuZWxMaW5lIG9mIHRoaXMuaW5saW5lUGFuZWwpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3BhbmVsTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgICAgLy8gU2VwYXJhdGUgaW5saW5lIGNvbnRlbnQgZnJvbSBzdWdnZXN0aW9ucy90b2dnbGVzXG4gICAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuICAgIH1cblxuICAgIC8vIFNsYXNoIGNvbW1hbmQgc3VnZ2VzdGlvbnNcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGg7IGluZGV4KyspIHtcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbiA9IHRoaXMuc3VnZ2VzdGlvbnNbaW5kZXhdITtcbiAgICAgICAgY29uc3QgaXNBY3RpdmUgPSBpbmRleCA9PT0gdGhpcy5zdWdnZXN0aW9uSW5kZXg7XG4gICAgICAgIGNvbnN0IG1hcmtlciA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeSgn4pa4JykgOiB0aGVtZS51aS5tdXRlZCgnICcpO1xuICAgICAgICBjb25zdCBjbWRUZXh0ID0gaXNBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KHN1Z2dlc3Rpb24uY29tbWFuZCkgOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmNvbW1hbmQpO1xuICAgICAgICBjb25zdCBkZXNjVGV4dCA9IGlzQWN0aXZlID8gc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbiA6IHRoZW1lLnVpLm11dGVkKHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24pO1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7bWFya2VyfSAke2NtZFRleHR9IOKAlCAke2Rlc2NUZXh0fWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ29tcGFjdCBzdGF0dXMgbGluZTogbW9kZWwgwrcgY29udGV4dCUgwrcgcHJvZmlsZSDCtyBkaXJcbiAgICBjb25zdCBjb21wYWN0U3RhdHVzID0gdGhpcy5idWlsZENvbXBhY3RTdGF0dXNMaW5lKCk7XG4gICAgaWYgKGNvbXBhY3RTdGF0dXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtjb21wYWN0U3RhdHVzfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gTW9kZSB0b2dnbGVzIChjb21wYWN0IHNpbmdsZSBsaW5lIHdoZW4gcG9zc2libGUpXG4gICAgY29uc3QgdG9nZ2xlTGluZSA9IHRoaXMuYnVpbGRUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHt0b2dnbGVMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgbGluZXMsIHByb21wdEluZGV4IH07XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgYSBzaW5nbGUgY29tcGFjdCBzdGF0dXMgbGluZSB3aXRoIGFsbCBlc3NlbnRpYWwgaW5mb1xuICAgKiBGb3JtYXQ6IGRlZXBzZWVrLXJlYXNvbmVyIMK3IOKWkeKWkeKWkeKWkeKWkeKWkSA1JSDCtyBhZ2ktY29kZSDCtyB+L0dpdEh1YlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENvbXBhY3RTdGF0dXNMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gTW9kZWwgKGNvbXBhY3Q6IGp1c3QgbW9kZWwgbmFtZSwgbm90IHByb3ZpZGVyL21vZGVsKVxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLm1vZGVsIHx8IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlcjtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuaW5mbyhtb2RlbCkpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWV0ZXIgKGNvbXBhY3QgbWluaSBiYXIpXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBjb25zdCB1c2VkID0gY2xhbXBQZXJjZW50YWdlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBjb25zdCBiYXJXaWR0aCA9IDU7XG4gICAgICBjb25zdCBmaWxsZWQgPSBNYXRoLnJvdW5kKCh1c2VkIC8gMTAwKSAqIGJhcldpZHRoKTtcbiAgICAgIGNvbnN0IGVtcHR5ID0gTWF0aC5tYXgoMCwgYmFyV2lkdGggLSBmaWxsZWQpO1xuICAgICAgY29uc3QgYmFyQ29sb3IgPSBnZXRDb250ZXh0Q29sb3IodXNlZCwge1xuICAgICAgICBlcnJvcjogdGhlbWUuZXJyb3IsXG4gICAgICAgIHdhcm5pbmc6IHRoZW1lLndhcm5pbmcsXG4gICAgICAgIGluZm86IHRoZW1lLmluZm8sXG4gICAgICAgIHN1Y2Nlc3M6IHRoZW1lLnN1Y2Nlc3MsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJhciA9IGJhckNvbG9yKCfilognLnJlcGVhdChmaWxsZWQpKSArIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdChlbXB0eSkpO1xuICAgICAgcGFydHMucHVzaChgJHtiYXJ9ICR7YmFyQ29sb3IoYCR7dXNlZH0lYCl9YCk7XG4gICAgfVxuXG4gICAgLy8gUHJvZmlsZSAoaWYgc2V0KVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgcGFydHMucHVzaCh0aGVtZS5zZWNvbmRhcnkodGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUpKTtcbiAgICB9XG5cbiAgICAvLyBEaXJlY3RvcnkgKGFiYnJldmlhdGVkKVxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLnVpLm11dGVkKHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSkpO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKSA6IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ2hyb21lTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBzdGF0dXNMaW5lcyA9IHRoaXMuYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aCk7XG4gICAgY29uc3QgbWV0YUxpbmVzID0gdGhpcy5idWlsZE1ldGFCbG9jayhtYXhXaWR0aCk7XG4gICAgcmV0dXJuIFsuLi5zdGF0dXNMaW5lcywgLi4ubWV0YUxpbmVzXTtcbiAgfVxuXG4gIHByaXZhdGUgYWJicmV2aWF0ZVBhdGgocGF0aFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvbWUgPSBob21lZGlyKCk7XG4gICAgaWYgKGhvbWUgJiYgcGF0aFZhbHVlLnN0YXJ0c1dpdGgoaG9tZSkpIHtcbiAgICAgIHJldHVybiBwYXRoVmFsdWUucmVwbGFjZShob21lLCAnficpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFN0YXR1c0Jsb2NrKG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBTa2lwIHN0YXR1cyBsYWJlbCB3aGVuIHN0cmVhbWluZyAtIHRoZSBhY3Rpdml0eSBsaW5lIGFscmVhZHkgc2hvd3MgdGhlIGFuaW1hdGVkIHN0YXR1c1xuICAgIC8vIFRoaXMgcHJldmVudHMgZHVwbGljYXRlIFwiVGhpbmtpbmcuLi5cIiBkaXNwbGF5c1xuICAgIGlmICh0aGlzLm1vZGUgIT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICBjb25zdCBzdGF0dXNMYWJlbCA9IHRoaXMuY29tcG9zZVN0YXR1c0xhYmVsKCk7XG4gICAgICBpZiAoc3RhdHVzTGFiZWwpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnc3RhdHVzJyl9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSkge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgncnVudGltZScpfSAke3RoZW1lLnVpLm11dGVkKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW5pbWF0ZWQgY29udGV4dCBtZXRlciBmb3Igc21vb3RoIGNvbG9yIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLmNvbnRleHRNZXRlci51cGRhdGUodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5jb250ZXh0TWV0ZXIucmVuZGVyKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBzZWdtZW50cy5sZW5ndGggPiAwID8gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKSA6IFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1ldGFCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Byb2ZpbGUnLCB0aGlzLnN0YXR1c01ldGEucHJvZmlsZSwgJ2luZm8nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXIgJiYgdGhpcy5zdGF0dXNNZXRhLm1vZGVsXG4gICAgICA/IGAke3RoaXMuc3RhdHVzTWV0YS5wcm92aWRlcn0gLyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ21vZGVsJywgbW9kZWwsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2RpcicsIHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEud3JpdGVzKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3dyaXRlcycsIHRoaXMuc3RhdHVzTWV0YS53cml0ZXMsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5KSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Rvb2xzJywgdGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5LCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnc2Vzc2lvbicsIHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnZlcnNpb24pIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnYnVpbGQnLCBgdiR7dGhpcy5zdGF0dXNNZXRhLnZlcnNpb259YCwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBSTCBhZ2VudCBzdGF0dXMgd2hlbiBkdWFsLVJMIG1vZGUgaXMgYWN0aXZlXG4gICAgY29uc3QgcmxTZWdtZW50cyA9IHRoaXMuYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk7XG4gICAgaWYgKHJsU2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCguLi5ybFNlZ21lbnRzKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgc2VjdXJlIFRBTyB0b29scyBzdGF0dXNcbiAgICBjb25zdCBzZWN1cmVUb29sc1NlZ21lbnRzID0gdGhpcy5idWlsZFNlY3VyZVRvb2xzU2VnbWVudHMoKTtcbiAgICBpZiAoc2VjdXJlVG9vbHNTZWdtZW50cy5sZW5ndGggPiAwKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKC4uLnNlY3VyZVRvb2xzU2VnbWVudHMpO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBSTCBhZ2VudCBzdGF0dXMgc2VnbWVudHMgZm9yIGRpc3BsYXkgZHVyaW5nIGR1YWwtUkwgZXhlY3V0aW9uLlxuICAgKiBTaG93czogdG91cm5hbWVudCBzY29yZWJvYXJkLCBhY3RpdmUgYWdlbnQsIG1vZHVsZS9zdGVwIHByb2dyZXNzLCBhbmQgc2NvcmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFJMU3RhdHVzU2VnbWVudHMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHJsID0gdGhpcy5ybFN0YXR1cztcblxuICAgIC8vIE9ubHkgc2hvdyBSTCBzdGF0dXMgd2hlbiB0aGVyZSdzIG1lYW5pbmdmdWwgZGF0YVxuICAgIGlmICghcmwuYWN0aXZlVmFyaWFudCAmJiAhcmwud2lucyAmJiAhcmwuY3VycmVudE1vZHVsZSkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIC8vIFRvdXJuYW1lbnQgc2NvcmVib2FyZCAoYWx3YXlzIHNob3cgd2hlbiB3aW5zIGV4aXN0KVxuICAgIGlmIChybC53aW5zICYmIChybC53aW5zLnByaW1hcnkgPiAwIHx8IHJsLndpbnMucmVmaW5lciA+IDAgfHwgcmwud2lucy50aWVzID4gMCkpIHtcbiAgICAgIGNvbnN0IHRvdGFsR2FtZXMgPSBybC53aW5zLnByaW1hcnkgKyBybC53aW5zLnJlZmluZXIgKyBybC53aW5zLnRpZXM7XG4gICAgICBjb25zdCBsZWFkZXIgPSBybC53aW5zLnByaW1hcnkgPiBybC53aW5zLnJlZmluZXIgPyAncHJpbWFyeScgOlxuICAgICAgICAgICAgICAgICAgICAgcmwud2lucy5yZWZpbmVyID4gcmwud2lucy5wcmltYXJ5ID8gJ3JlZmluZXInIDogJ3RpZSc7XG5cbiAgICAgIC8vIFNjb3JlYm9hcmQgd2l0aCBjb2xvcnMgYmFzZWQgb24gbGVhZGVyXG4gICAgICBjb25zdCBwQ29sb3IgPSBsZWFkZXIgPT09ICdwcmltYXJ5JyA/IHRoZW1lLnN1Y2Nlc3MgOiB0aGVtZS5pbmZvO1xuICAgICAgY29uc3QgckNvbG9yID0gbGVhZGVyID09PSAncmVmaW5lcicgPyB0aGVtZS5zdWNjZXNzIDogdGhlbWUud2FybmluZztcbiAgICAgIGNvbnN0IHBTY29yZSA9IHBDb2xvcihgJHtybC53aW5zLnByaW1hcnl9YCk7XG4gICAgICBjb25zdCByU2NvcmUgPSByQ29sb3IoYCR7cmwud2lucy5yZWZpbmVyfWApO1xuXG4gICAgICAvLyBUcm9waHkgZm9yIGxlYWRlclxuICAgICAgY29uc3QgdHJvcGh5ID0gbGVhZGVyID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvKCfwn4+GJykgOlxuICAgICAgICAgICAgICAgICAgICAgbGVhZGVyID09PSAncmVmaW5lcicgPyB0aGVtZS53YXJuaW5nKCfwn4+GJykgOiAn4pqW77iPJztcblxuICAgICAgLy8gV2luIHN0cmVhayBpbmRpY2F0b3JcbiAgICAgIGNvbnN0IHN0cmVha1RleHQgPSBybC5zdHJlYWsgJiYgcmwuc3RyZWFrID4gMSA/IHRoZW1lLnVpLm11dGVkKGAg8J+UpSR7cmwuc3RyZWFrfWApIDogJyc7XG5cbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dHJvcGh5fSR7cFNjb3JlfSR7dGhlbWUudWkubXV0ZWQoJzonKX0ke3JTY29yZX0ke3N0cmVha1RleHR9YCk7XG5cbiAgICAgIC8vIFByb2dyZXNzIGJhciBzaG93aW5nIHJlbGF0aXZlIHdpbnNcbiAgICAgIGlmICh0b3RhbEdhbWVzID4gMCkge1xuICAgICAgICBjb25zdCBiYXJXaWR0aCA9IDg7XG4gICAgICAgIGNvbnN0IHBCYXJzID0gTWF0aC5yb3VuZCgocmwud2lucy5wcmltYXJ5IC8gdG90YWxHYW1lcykgKiBiYXJXaWR0aCk7XG4gICAgICAgIGNvbnN0IHJCYXJzID0gTWF0aC5yb3VuZCgocmwud2lucy5yZWZpbmVyIC8gdG90YWxHYW1lcykgKiBiYXJXaWR0aCk7XG4gICAgICAgIGNvbnN0IHRCYXJzID0gTWF0aC5tYXgoMCwgYmFyV2lkdGggLSBwQmFycyAtIHJCYXJzKTtcbiAgICAgICAgY29uc3QgYmFyID0gdGhlbWUuaW5mbygn4paIJy5yZXBlYXQocEJhcnMpKSArXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdCh0QmFycykpICtcbiAgICAgICAgICAgICAgICAgICAgdGhlbWUud2FybmluZygn4paIJy5yZXBlYXQockJhcnMpKTtcbiAgICAgICAgc2VnbWVudHMucHVzaChgWyR7YmFyfV1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBY3RpdmUgdmFyaWFudCBpbmRpY2F0b3JcbiAgICBpZiAocmwuYWN0aXZlVmFyaWFudCkge1xuICAgICAgY29uc3QgaXNQYXJhbGxlbCA9IHJsLnBhcmFsbGVsRXhlY3V0aW9uO1xuICAgICAgaWYgKGlzUGFyYWxsZWwpIHtcbiAgICAgICAgLy8gQm90aCBydW5uaW5nIGluIHBhcmFsbGVsXG4gICAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUuaW5mbygn4pqhUCcpfSAke3RoZW1lLnVpLm11dGVkKCfiiKUnKX0gJHt0aGVtZS53YXJuaW5nKCfimqFSJyl9YCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCB2YXJpYW50SWNvbiA9IHJsLmFjdGl2ZVZhcmlhbnQgPT09ICdwcmltYXJ5JyA/ICfilrYnIDogJ+KWtyc7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRMYWJlbCA9IHJsLmFjdGl2ZVZhcmlhbnQgPT09ICdwcmltYXJ5JyA/ICdQJyA6ICdSJztcbiAgICAgICAgY29uc3QgdmFyaWFudENvbG9yID0gcmwuYWN0aXZlVmFyaWFudCA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbyA6IHRoZW1lLndhcm5pbmc7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goYCR7dmFyaWFudEljb259JHt2YXJpYW50Q29sb3IodmFyaWFudExhYmVsKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMYXN0IHdpbm5lciBpbmRpY2F0b3JcbiAgICBpZiAocmwubGFzdFdpbm5lciAmJiBybC5sYXN0V2lubmVyICE9PSAndGllJykge1xuICAgICAgY29uc3Qgd2lubmVySWNvbiA9IHJsLmxhc3RXaW5uZXIgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8oJ+Kck1AnKSA6IHRoZW1lLndhcm5pbmcoJ+Kck1InKTtcbiAgICAgIHNlZ21lbnRzLnB1c2god2lubmVySWNvbik7XG4gICAgfSBlbHNlIGlmIChybC5sYXN0V2lubmVyID09PSAndGllJykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZCgn4omIJykpO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgbW9kdWxlL3N0ZXAgKGNvbXBhY3QpXG4gICAgaWYgKHJsLmN1cnJlbnRNb2R1bGUgfHwgcmwuY3VycmVudFN0ZXApIHtcbiAgICAgIGNvbnN0IHN0ZXBUZXh0ID0gcmwuY3VycmVudFN0ZXAgfHwgcmwuY3VycmVudE1vZHVsZSB8fCAnJztcbiAgICAgIGlmIChzdGVwVGV4dCkge1xuICAgICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKHRoaXMudHJ1bmNhdGVNaWRkbGUoc3RlcFRleHQsIDE1KSkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFByb2dyZXNzIGluZGljYXRvciAoc3RlcHMgY29tcGxldGVkIC8gdG90YWwpXG4gICAgaWYgKHR5cGVvZiBybC5zdGVwc0NvbXBsZXRlZCA9PT0gJ251bWJlcicgJiYgdHlwZW9mIHJsLnRvdGFsU3RlcHMgPT09ICdudW1iZXInICYmIHJsLnRvdGFsU3RlcHMgPiAwKSB7XG4gICAgICBjb25zdCBwY3QgPSBNYXRoLnJvdW5kKChybC5zdGVwc0NvbXBsZXRlZCAvIHJsLnRvdGFsU3RlcHMpICogMTAwKTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQoYCR7cGN0fSVgKSk7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudCByZXdhcmQgc2NvcmVzIChjb21wYWN0LCBvbmx5IGR1cmluZyBhY3RpdmUgY29tcGFyaXNvbilcbiAgICBpZiAocmwuc2NvcmVzICYmICh0eXBlb2Ygcmwuc2NvcmVzLnByaW1hcnkgPT09ICdudW1iZXInIHx8IHR5cGVvZiBybC5zY29yZXMucmVmaW5lciA9PT0gJ251bWJlcicpKSB7XG4gICAgICBjb25zdCBwU2NvcmUgPSB0eXBlb2Ygcmwuc2NvcmVzLnByaW1hcnkgPT09ICdudW1iZXInID8gcmwuc2NvcmVzLnByaW1hcnkudG9GaXhlZCgyKSA6ICctJztcbiAgICAgIGNvbnN0IHJTY29yZSA9IHR5cGVvZiBybC5zY29yZXMucmVmaW5lciA9PT0gJ251bWJlcicgPyBybC5zY29yZXMucmVmaW5lci50b0ZpeGVkKDIpIDogJy0nO1xuICAgICAgY29uc3QgcFZhbCA9IHJsLnNjb3Jlcy5wcmltYXJ5ID8/IDA7XG4gICAgICBjb25zdCByVmFsID0gcmwuc2NvcmVzLnJlZmluZXIgPz8gMDtcbiAgICAgIGNvbnN0IHBEaXNwbGF5ID0gcFZhbCA+IHJWYWwgPyB0aGVtZS5zdWNjZXNzKHBTY29yZSkgOiB0aGVtZS5pbmZvKHBTY29yZSk7XG4gICAgICBjb25zdCByRGlzcGxheSA9IHJWYWwgPiBwVmFsID8gdGhlbWUuc3VjY2VzcyhyU2NvcmUpIDogdGhlbWUud2FybmluZyhyU2NvcmUpO1xuICAgICAgc2VnbWVudHMucHVzaChgJHtwRGlzcGxheX0ke3RoZW1lLnVpLm11dGVkKCcvJyl9JHtyRGlzcGxheX1gKTtcbiAgICB9XG5cbiAgICAvLyBIdW1hbiBhY2N1cmFjeSBpbmRpY2F0b3IgKHJlbGF0aXZlIHJhbmtpbmcgcXVhbGl0eSlcbiAgICBpZiAocmwuYWNjdXJhY3kgJiYgKHR5cGVvZiBybC5hY2N1cmFjeS5wcmltYXJ5ID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgcmwuYWNjdXJhY3kucmVmaW5lciA9PT0gJ251bWJlcicpKSB7XG4gICAgICBjb25zdCBwQWNjID0gcmwuYWNjdXJhY3kucHJpbWFyeSAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZChybC5hY2N1cmFjeS5wcmltYXJ5ICogMTAwKSA6IG51bGw7XG4gICAgICBjb25zdCByQWNjID0gcmwuYWNjdXJhY3kucmVmaW5lciAhPT0gdW5kZWZpbmVkID8gTWF0aC5yb3VuZChybC5hY2N1cmFjeS5yZWZpbmVyICogMTAwKSA6IG51bGw7XG4gICAgICBjb25zdCBwRGlzcGxheSA9IHBBY2MgIT09IG51bGwgPyB0aGVtZS5pbmZvKGBQJHtwQWNjfSVgKSA6IG51bGw7XG4gICAgICBjb25zdCByRGlzcGxheSA9IHJBY2MgIT09IG51bGwgPyB0aGVtZS53YXJuaW5nKGBSJHtyQWNjfSVgKSA6IG51bGw7XG4gICAgICBjb25zdCBwYXJ0cyA9IFtwRGlzcGxheSwgckRpc3BsYXldLmZpbHRlcihCb29sZWFuKS5qb2luKHRoZW1lLnVpLm11dGVkKCd8JykpO1xuICAgICAgaWYgKHBhcnRzKSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2gocGFydHMpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBzZWdtZW50cztcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBzZWN1cmUgVEFPIHRvb2xzIHN0YXR1cyBzZWdtZW50cyBmb3IgZGlzcGxheS5cbiAgICogU2hvd3M6IHRvb2xraXQgc3RhdHVzLCB0b29sIGludm9jYXRpb24gY291bnRzLCBhbmQgbGFzdCB0b29sIHVzZWQuXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkU2VjdXJlVG9vbHNTZWdtZW50cygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc3QgPSB0aGlzLnNlY3VyZVRvb2xzU3RhdHVzO1xuXG4gICAgLy8gT25seSBzaG93IHN0YXR1cyB3aGVuIHRvb2xzIGhhdmUgYmVlbiB1c2VkXG4gICAgaWYgKCFzdC50b3RhbEludm9jYXRpb25zICYmICFzdC5sYXN0VG9vbFVzZWQpIHtcbiAgICAgIC8vIFNob3cgdG9vbGtpdCByZWFkeSBpbmRpY2F0b3IgZXZlbiB3aGVuIG5vIGludm9jYXRpb25zXG4gICAgICBpZiAoc3QudG9vbGtpdFJlYWR5KSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUuc3VjY2Vzcygn8J+UkicpICsgdGhlbWUudWkubXV0ZWQoJyBUQU8nKSk7XG4gICAgICB9XG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgLy8gU2VjdXJpdHkgaW5kaWNhdG9yIHdpdGggc2FuaXRpemF0aW9uIHN0YXR1c1xuICAgIGNvbnN0IHNlY0ljb24gPSBzdC5zYW5pdGl6YXRpb25BY3RpdmUgPyB0aGVtZS5zdWNjZXNzKCfwn5SSJykgOiB0aGVtZS53YXJuaW5nKCfimqAnKTtcbiAgICBzZWdtZW50cy5wdXNoKHNlY0ljb24pO1xuXG4gICAgLy8gVG9vbCBzdGF0dXMgaW5kaWNhdG9ycyAoY29tcGFjdCBmb3JtYXQpXG4gICAgY29uc3QgdG9vbEluZGljYXRvcnM6IHN0cmluZ1tdID0gW107XG5cbiAgICBpZiAoc3QuZXhlY3V0ZT8uYWN0aXZlKSB7XG4gICAgICBjb25zdCBleGVjSWNvbiA9IHN0LmV4ZWN1dGUubGFzdEV4aXRDb2RlID09PSAwID8gdGhlbWUuc3VjY2Vzcygn4pyTJykgOiB0aGVtZS5lcnJvcign4pyXJyk7XG4gICAgICBjb25zdCBleGVjQ291bnQgPSBzdC5leGVjdXRlLmV4ZWNDb3VudCB8fCAwO1xuICAgICAgdG9vbEluZGljYXRvcnMucHVzaChgJHt0aGVtZS5pbmZvKCdFeCcpfSR7ZXhlY0ljb259JHtleGVjQ291bnQgPiAxID8gdGhlbWUudWkubXV0ZWQoYMOXJHtleGVjQ291bnR9YCkgOiAnJ31gKTtcbiAgICB9XG5cbiAgICBpZiAoc3QucHJvYmU/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3ZjQ291bnQgPSBzdC5wcm9iZS5zZXJ2aWNlc0ZvdW5kIHx8IDA7XG4gICAgICB0b29sSW5kaWNhdG9ycy5wdXNoKGAke2NoYWxrLmN5YW4oJ1ByJyl9JHt0aGVtZS5zdWNjZXNzKCfinJMnKX0ke3N2Y0NvdW50ID4gMCA/IHRoZW1lLnVpLm11dGVkKGBbJHtzdmNDb3VudH1dYCkgOiAnJ31gKTtcbiAgICB9XG5cbiAgICBpZiAoc3Quc3RhdGU/LmFjdGl2ZSkge1xuICAgICAgY29uc3Qgc3RhdGVJY29uID0gc3Quc3RhdGUucGVyc2lzdGVudCA/IHRoZW1lLnN1Y2Nlc3MoJ/Cfkr4nKSA6IHRoZW1lLmluZm8oJ/Cfk50nKTtcbiAgICAgIGNvbnN0IGtleXNDb3VudCA9IHN0LnN0YXRlLmtleXNTdG9yZWQgfHwgMDtcbiAgICAgIHRvb2xJbmRpY2F0b3JzLnB1c2goYCR7c3RhdGVJY29ufSR7a2V5c0NvdW50ID4gMCA/IHRoZW1lLnVpLm11dGVkKGAke2tleXNDb3VudH1rYCkgOiAnJ31gKTtcbiAgICB9XG5cbiAgICBpZiAodG9vbEluZGljYXRvcnMubGVuZ3RoID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0b29sSW5kaWNhdG9ycy5qb2luKHRoZW1lLnVpLm11dGVkKCfCtycpKSk7XG4gICAgfVxuXG4gICAgLy8gVG90YWwgaW52b2NhdGlvbnMgY291bnRlclxuICAgIGlmIChzdC50b3RhbEludm9jYXRpb25zICYmIHN0LnRvdGFsSW52b2NhdGlvbnMgPiAwKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKGDOoyR7c3QudG90YWxJbnZvY2F0aW9uc31gKSk7XG4gICAgfVxuXG4gICAgLy8gTGFzdCB0b29sIHVzZWQgaW5kaWNhdG9yXG4gICAgaWYgKHN0Lmxhc3RUb29sVXNlZCkge1xuICAgICAgY29uc3QgdG9vbENvbG9yczogUmVjb3JkPHN0cmluZywgKHM6IHN0cmluZykgPT4gc3RyaW5nPiA9IHtcbiAgICAgICAgRXhlY3V0ZTogdGhlbWUuaW5mbyxcbiAgICAgICAgUHJvYmU6IChzOiBzdHJpbmcpID0+IGNoYWxrLmN5YW4ocyksXG4gICAgICAgIFN0YXRlOiB0aGVtZS5zdWNjZXNzLFxuICAgICAgICBUcmFuc2Zvcm06IHRoZW1lLndhcm5pbmcsXG4gICAgICAgIFRhb09wczogKHM6IHN0cmluZykgPT4gY2hhbGsubWFnZW50YShzKSxcbiAgICAgIH07XG4gICAgICBjb25zdCBjb2xvciA9IHRvb2xDb2xvcnNbc3QubGFzdFRvb2xVc2VkXSB8fCB0aGVtZS51aS5tdXRlZDtcbiAgICAgIHNlZ21lbnRzLnB1c2goY29sb3IoYOKGkiR7c3QubGFzdFRvb2xVc2VkLnNsaWNlKDAsIDIpfWApKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VnbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogVHJ1bmNhdGUgYSBzdHJpbmcgaW4gdGhlIG1pZGRsZSwgc2hvd2luZyBzdGFydCBhbmQgZW5kIHdpdGggZWxsaXBzaXMuXG4gICAqL1xuICBwcml2YXRlIHRydW5jYXRlTWlkZGxlKHRleHQ6IHN0cmluZywgbWF4TGVuOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0ZXh0Lmxlbmd0aCA8PSBtYXhMZW4pIHJldHVybiB0ZXh0O1xuICAgIGNvbnN0IGtlZXBMZW4gPSBNYXRoLmZsb29yKChtYXhMZW4gLSAzKSAvIDIpO1xuICAgIHJldHVybiBgJHt0ZXh0LnNsaWNlKDAsIGtlZXBMZW4pfS4uLiR7dGV4dC5zbGljZSgta2VlcExlbil9YDtcbiAgfVxuXG4gIHByaXZhdGUgY29tcG9zZVN0YXR1c0xhYmVsKCk6IHsgdGV4dDogc3RyaW5nOyB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIH0gfCBudWxsIHtcbiAgICBjb25zdCBzdGF0dXNlcyA9IFt0aGlzLnN0YXR1c1N0cmVhbWluZywgdGhpcy5zdGF0dXNPdmVycmlkZSwgdGhpcy5zdGF0dXNNZXNzYWdlXS5maWx0ZXIoXG4gICAgICAodmFsdWUsIGluZGV4LCBhcnIpOiB2YWx1ZSBpcyBzdHJpbmcgPT4gQm9vbGVhbih2YWx1ZSkgJiYgYXJyLmluZGV4T2YodmFsdWUpID09PSBpbmRleFxuICAgICk7XG4gICAgY29uc3QgdGV4dCA9IHN0YXR1c2VzLmxlbmd0aCA+IDAgPyBzdGF0dXNlcy5qb2luKCcgLyAnKSA6ICdSZWFkeSBmb3IgcHJvbXB0cyc7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9IG5vcm1hbGl6ZWQuaW5jbHVkZXMoJ3JlYWR5JykgPyAnc3VjY2VzcycgOiAnaW5mbyc7XG4gICAgcmV0dXJuIHsgdGV4dCwgdG9uZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRNZXRhU2VnbWVudChcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgdG9uZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdtdXRlZCdcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xvcml6ZXIgPVxuICAgICAgdG9uZSA9PT0gJ3N1Y2Nlc3MnXG4gICAgICAgID8gdGhlbWUuc3VjY2Vzc1xuICAgICAgICA6IHRvbmUgPT09ICd3YXJuJ1xuICAgICAgICAgID8gdGhlbWUud2FybmluZ1xuICAgICAgICAgIDogdG9uZSA9PT0gJ2Vycm9yJ1xuICAgICAgICAgICAgPyB0aGVtZS5lcnJvclxuICAgICAgICAgICAgOiB0b25lID09PSAnbXV0ZWQnXG4gICAgICAgICAgICAgID8gdGhlbWUudWkubXV0ZWRcbiAgICAgICAgICAgICAgOiB0aGVtZS5pbmZvO1xuICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9ICR7Y29sb3JpemVyKHZhbHVlKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVRvbmUodGV4dDogc3RyaW5nLCB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRvbmUpIHtcbiAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgICByZXR1cm4gdGhlbWUuc3VjY2Vzcyh0ZXh0KTtcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICByZXR1cm4gdGhlbWUud2FybmluZyh0ZXh0KTtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHRleHQpO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhlbWUuaW5mbyh0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10sIG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJyAgfCAgJyk7XG5cbiAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHNlZ21lbnQudHJpbSgpO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSBjb250aW51ZTtcbiAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy50cnVuY2F0ZUxpbmUobm9ybWFsaXplZCwgbWF4V2lkdGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGAke2N1cnJlbnR9JHtzZXBhcmF0b3J9JHtub3JtYWxpemVkfWA7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShjdXJyZW50LCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRDb250cm9sTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHRvZ2dsZUxpbmUgPSB0aGlzLmJ1aWxkVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdtb2RlcycpfSAke3RoZW1lLnVpLm11dGVkKCfigLonKX0gJHt0b2dnbGVMaW5lfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3J0Y3V0TGluZSA9IHRoaXMuYnVpbGRTaG9ydGN1dExpbmUoKTtcbiAgICBpZiAoc2hvcnRjdXRMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdrZXlzJyl9ICAke3Nob3J0Y3V0TGluZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB0b2dnbGVzOiBBcnJheTx7XG4gICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgb246IGJvb2xlYW47XG4gICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgIGhvdGtleT86IHN0cmluZyB8IG51bGw7XG4gICAgfT4gPSBbXTtcblxuICAgIGNvbnN0IGFkZFRvZ2dsZSA9IChsYWJlbDogc3RyaW5nLCBvbjogYm9vbGVhbiwgaG90a2V5Pzogc3RyaW5nLCB2YWx1ZT86IHN0cmluZykgPT4ge1xuICAgICAgdG9nZ2xlcy5wdXNoKHsgbGFiZWwsIG9uLCBob3RrZXk6IHRoaXMuZm9ybWF0SG90a2V5KGhvdGtleSksIHZhbHVlIH0pO1xuICAgIH07XG5cbiAgICAvLyBBbHBoYVplcm8gbW9kZTogdG9nZ2xlIGJldHdlZW4gTm9ybWFsIGFuZCBBbHBoYVplcm8gZHVhbCB0b3VybmFtZW50IFJMXG4gICAgY29uc3QgYWxwaGFaZXJvQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hbHBoYVplcm9FbmFibGVkID8/IGZhbHNlO1xuICAgIGFkZFRvZ2dsZSgnTW9kZScsIHRydWUsIHRoaXMudG9nZ2xlU3RhdGUuYWxwaGFaZXJvSG90a2V5LCBhbHBoYVplcm9BY3RpdmUgPyAnQWxwaGFaZXJvJyA6ICdOb3JtYWwnKTtcblxuICAgIGNvbnN0IGFwcHJvdmFsTW9kZSA9IHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbE1vZGUgfHwgJ2F1dG8nO1xuICAgIGNvbnN0IGFwcHJvdmFsQWN0aXZlID0gYXBwcm92YWxNb2RlICE9PSAnYXV0byc7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0FwcHJvdmFscycsXG4gICAgICBhcHByb3ZhbEFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSxcbiAgICAgIGFwcHJvdmFsTW9kZSA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ2FzaydcbiAgICApO1xuXG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBdXRvJyxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5LFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlID8gJ29uJyA6ICdvZmYnXG4gICAgKTtcblxuICAgIGNvbnN0IHRoaW5raW5nTGFiZWxSYXcgPSAodGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ01vZGVMYWJlbCB8fCAnYmFsYW5jZWQnKS50cmltKCk7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9XG4gICAgICB0aGlua2luZ0xhYmVsUmF3LnRvTG93ZXJDYXNlKCkgPT09ICdleHRlbmRlZCcgPyAnZGVlcCcgOiB0aGlua2luZ0xhYmVsUmF3IHx8ICdiYWxhbmNlZCc7XG4gICAgY29uc3QgdGhpbmtpbmdBY3RpdmUgPSB0aGlua2luZ0xhYmVsLmxlbmd0aCA+IDA7XG4gICAgYWRkVG9nZ2xlKCdUaGlua2luZycsIHRoaW5raW5nQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5LCB0aGlua2luZ0xhYmVsKTtcblxuICAgIGNvbnN0IGJ1aWxkTGluZSA9IChpbmNsdWRlSG90a2V5czogYm9vbGVhbik6IHN0cmluZyA9PiB7XG4gICAgICByZXR1cm4gdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGVUZXh0ID0gdG9nZ2xlLm9uID8gdGhlbWUuc3VjY2Vzcyh0b2dnbGUudmFsdWUgfHwgJ29uJykgOiB0aGVtZS51aS5tdXRlZCh0b2dnbGUudmFsdWUgfHwgJ29mZicpO1xuICAgICAgICAgIGNvbnN0IGhvdGtleVRleHQgPVxuICAgICAgICAgICAgaW5jbHVkZUhvdGtleXMgJiYgdG9nZ2xlLmhvdGtleSA/IHRoZW1lLnVpLm11dGVkKGAgWyR7dG9nZ2xlLmhvdGtleX1dYCkgOiAnJztcbiAgICAgICAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQoYCR7dG9nZ2xlLmxhYmVsfTpgKX0gJHtzdGF0ZVRleHR9JHtob3RrZXlUZXh0fWA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKHRoZW1lLnVpLm11dGVkKCcgICcpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGxldCBsaW5lID0gYnVpbGRMaW5lKHRydWUpO1xuXG4gICAgLy8gUmVjb3JkIHdoaWNoIGhvdGtleXMgYXJlIGFjdHVhbGx5IHNob3duIHNvIHRoZSBzaG9ydGN1dCBsaW5lIGNhbiBhdm9pZCBkdXBsaWNhdGVzXG4gICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lID0gbmV3IFNldChcbiAgICAgIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4gKHRvZ2dsZS5ob3RrZXkgPyB0b2dnbGUuaG90a2V5IDogbnVsbCkpXG4gICAgICAgIC5maWx0ZXIoKGtleSk6IGtleSBpcyBzdHJpbmcgPT4gQm9vbGVhbihrZXkpKVxuICAgICk7XG5cbiAgICAvLyBJZiB0aGUgbGluZSBpcyB0b28gd2lkZSwgZHJvcCBob3RrZXkgaGludHMgdG8gcHJlc2VydmUgYWxsIHRvZ2dsZSBsYWJlbHNcbiAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGxpbmUpID4gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5jbGVhcigpO1xuICAgICAgbGluZSA9IGJ1aWxkTGluZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmUudHJpbSgpID8gbGluZSA6IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkU2hvcnRjdXRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgYWRkSG90a2V5ID0gKGxhYmVsOiBzdHJpbmcsIGNvbWJvPzogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5mb3JtYXRIb3RrZXkoY29tYm8pO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmhhcyhub3JtYWxpemVkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLmluZm8obm9ybWFsaXplZCl9ICR7dGhlbWUudWkubXV0ZWQobGFiZWwpfWApO1xuICAgIH07XG5cbiAgICAvLyBDb3JlIGNvbnRyb2xzXG4gICAgYWRkSG90a2V5KCdpbnRlcnJ1cHQnLCAnQ3RybCtDJyk7XG4gICAgYWRkSG90a2V5KCdjbGVhciBpbnB1dCcsICdDdHJsK1UnKTtcblxuICAgIC8vIEZlYXR1cmUgdG9nZ2xlcyAob25seSBpZiBob3RrZXlzIGFyZSBkZWZpbmVkKVxuICAgIGFkZEhvdGtleSgnYXV0bycsIHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ3RoaW5raW5nJywgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSk7XG4gICAgYWRkSG90a2V5KCdtb2RlJywgdGhpcy50b2dnbGVTdGF0ZS5hbHBoYVplcm9Ib3RrZXkpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgICAnKSk7XG4gIH1cblxuXG4gIHByaXZhdGUgYnVpbGRJbnB1dExpbmUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgLy8gQ2xlYW4gcGFzdGUgaW5kaWNhdG9yIC0ganVzdCBzaG93IHRoZSBzdW1tYXJ5LCBubyBhY3Rpb24gaGludHNcbiAgICAgIGNvbnN0IGxpbmVzVGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUubGluZXMgPT09IDEgPyAnMSBsaW5lJyA6IGAke3RoaXMuY29sbGFwc2VkUGFzdGUubGluZXN9IGxpbmVzYDtcbiAgICAgIGNvbnN0IGNoYXJzVGV4dCA9IHR5cGVvZiB0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzID09PSAnbnVtYmVyJyA/XG4gICAgICAgIGAke3RoaXMuY29sbGFwc2VkUGFzdGUuY2hhcnN9IGNoYXJzYCA6XG4gICAgICAgIGAke3RoaXMuY29sbGFwc2VkUGFzdGUuY2hhcnN9YDtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSB0aGVtZS5zdWNjZXNzKGBb8J+TiyAke2xpbmVzVGV4dH0sICR7Y2hhcnNUZXh0fV1gKTtcbiAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfSR7c3VtbWFyeX1gLCB0aGlzLnNhZmVXaWR0aCgpKTtcbiAgICB9XG5cbiAgICAvLyBXaGlsZSBkZXRlY3RpbmcgcGFzdGUgKG9yIGluIGJ1cnN0IGRldGVjdGlvbiBwaGFzZSksIHN1cHByZXNzIGJ1ZmZlciBkaXNwbGF5XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBidXJzdEFjdGl2ZSA9IHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gMCAmJiBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA8PSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICBpZiAodGhpcy5pblBsYWluUGFzdGUgfHwgdGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IGJ1cnN0QWN0aXZlKSB7XG4gICAgICBjb25zdCBjaGFycyA9IHRoaXMucGxhaW5QYXN0ZUJ1ZmZlci5sZW5ndGggfHwgdGhpcy5wYXN0ZUJ1ZmZlci5sZW5ndGggfHwgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyLmxlbmd0aCB8fCAwO1xuICAgICAgaWYgKGNoYXJzID4gMCkge1xuICAgICAgICBjb25zdCBpbmRpY2F0b3IgPSB0aGVtZS51aS5tdXRlZChgW/Cfk4sgcGFzdGluZy4uLiAke2NoYXJzfSBjaGFyc11gKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudHJ1bmNhdGVMaW5lKGAke3RoZW1lLnByaW1hcnkoJz4gJyl9JHtpbmRpY2F0b3J9YCwgdGhpcy5zYWZlV2lkdGgoKSk7XG4gICAgICB9XG4gICAgICAvLyBFdmVuIGlmIG5vIGNoYXJzIHlldCwgc2hvdyBlbXB0eSBwcm9tcHQgZHVyaW5nIGJ1cnN0IHRvIHByZXZlbnQgZmxpY2tlclxuICAgICAgaWYgKGJ1cnN0QWN0aXZlKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIHVzZXMgc2ltcGxlICc+JyBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSB0aGVtZS5wcmltYXJ5KCc+ICcpO1xuICAgIGNvbnN0IHByb21wdFdpZHRoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHByb21wdCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbkluZGVudCA9ICcgICc7IC8vIDIgc3BhY2VzIGZvciBjb250aW51YXRpb24gbGluZXNcbiAgICBjb25zdCBjb250aW51YXRpb25XaWR0aCA9IGNvbnRpbnVhdGlvbkluZGVudC5sZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCAtIHNwbGl0IGJ1ZmZlciBvbiBuZXdsaW5lcyBmaXJzdFxuICAgIC8vIEluIHNlY3JldCBtb2RlLCBtYXNrIGFsbCBjaGFyYWN0ZXJzIHdpdGggYnVsbGV0c1xuICAgIGNvbnN0IHJhd0J1ZmZlciA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuc2VjcmV0TW9kZSA/ICfigKInLnJlcGVhdChyYXdCdWZmZXIubGVuZ3RoKSA6IHJhd0J1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lcyA9IG5vcm1hbGl6ZWQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gV3JhcCBlYWNoIGxvZ2ljYWwgbGluZSB0byBmaXQgdGVybWluYWwgd2lkdGgsIGV4cGFuZGluZyB2ZXJ0aWNhbGx5XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0b3RhbENoYXJzID0gMDtcbiAgICBsZXQgY3Vyc29yTGluZSA9IDA7XG4gICAgbGV0IGN1cnNvckNvbCA9IDA7XG4gICAgbGV0IGZvdW5kQ3Vyc29yID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBidWZmZXJMaW5lcy5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyTGluZXNbbGluZUluZGV4XSA/PyAnJztcbiAgICAgIGNvbnN0IGlzRmlyc3RMb2dpY2FsTGluZSA9IGxpbmVJbmRleCA9PT0gMDtcbiAgICAgIGNvbnN0IGxpbmVTdGFydENoYXIgPSB0b3RhbENoYXJzO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgYXZhaWxhYmxlIHdpZHRoIGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZVdpZHRoID0gbWF4V2lkdGggLSBwcm9tcHRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRMaW5lV2lkdGggPSBtYXhXaWR0aCAtIGNvbnRpbnVhdGlvbldpZHRoO1xuXG4gICAgICAvLyBXcmFwIHRoaXMgbG9naWNhbCBsaW5lIGludG8gZGlzcGxheSBsaW5lc1xuICAgICAgbGV0IHJlbWFpbmluZyA9IGxpbmU7XG4gICAgICBsZXQgaXNGaXJzdERpc3BsYXlMaW5lID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwIHx8IGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IGZpcnN0TGluZVdpZHRoIDogY29udExpbmVXaWR0aDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSByZW1haW5pbmcuc2xpY2UoMCwgYXZhaWxhYmxlV2lkdGgpO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc2xpY2UoYXZhaWxhYmxlV2lkdGgpO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBkaXNwbGF5IGxpbmVcbiAgICAgICAgbGV0IGRpc3BsYXlMaW5lOiBzdHJpbmc7XG4gICAgICAgIGlmIChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtwcm9tcHR9JHtjaHVua31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7Y29udGludWF0aW9uSW5kZW50fSR7Y2h1bmt9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtTdGFydCA9IGxpbmVTdGFydENoYXIgKyAobGluZS5sZW5ndGggLSByZW1haW5pbmcubGVuZ3RoIC0gY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBjaHVua0VuZCA9IGNodW5rU3RhcnQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IGNodW5rU3RhcnQgJiYgdGhpcy5jdXJzb3IgPD0gY2h1bmtFbmQpIHtcbiAgICAgICAgICAgIGN1cnNvckxpbmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5DaHVuayA9IHRoaXMuY3Vyc29yIC0gY2h1bmtTdGFydDtcbiAgICAgICAgICAgIGN1cnNvckNvbCA9ICgoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBwcm9tcHRXaWR0aCA6IGNvbnRpbnVhdGlvbldpZHRoKSArIG9mZnNldEluQ2h1bms7XG4gICAgICAgICAgICBmb3VuZEN1cnNvciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnB1c2goZGlzcGxheUxpbmUpO1xuICAgICAgICBpc0ZpcnN0RGlzcGxheUxpbmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiBub3RoaW5nIGxlZnQgYW5kIHRoaXMgd2FzIGFuIGVtcHR5IGxpbmUsIHdlIGFscmVhZHkgYWRkZWQgaXRcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPT09IDAgJiYgY2h1bmsubGVuZ3RoID09PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxDaGFycyArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgbmV3bGluZSBzZXBhcmF0b3JcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY3Vyc29yIGF0IHZlcnkgZW5kXG4gICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgY3Vyc29yTGluZSA9IE1hdGgubWF4KDAsIHJlc3VsdC5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY3Vyc29yQ29sID0gdGhpcy52aXNpYmxlTGVuZ3RoKGxhc3RMaW5lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY3Vyc29yIGhpZ2hsaWdodCB0byB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRhcmdldExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjb25zdCB2aXNpYmxlUGFydCA9IHRoaXMuc3RyaXBBbnNpKHRhcmdldExpbmUpO1xuICAgICAgY29uc3QgY3Vyc29yUG9zID0gTWF0aC5taW4oY3Vyc29yQ29sLCB2aXNpYmxlUGFydC5sZW5ndGgpO1xuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaW5lIHdpdGggY3Vyc29yIGhpZ2hsaWdodFxuICAgICAgY29uc3QgYmVmb3JlID0gdmlzaWJsZVBhcnQuc2xpY2UoMCwgY3Vyc29yUG9zKTtcbiAgICAgIGNvbnN0IGF0ID0gdmlzaWJsZVBhcnQuY2hhckF0KGN1cnNvclBvcykgfHwgJyAnO1xuICAgICAgY29uc3QgYWZ0ZXIgPSB2aXNpYmxlUGFydC5zbGljZShjdXJzb3JQb3MgKyAxKTtcblxuICAgICAgLy8gUHJlc2VydmUgdGhlIHByb21wdC9pbmRlbnQgc3R5bGluZ1xuICAgICAgY29uc3QgcHJlZml4ID0gY3Vyc29yTGluZSA9PT0gMCA/IHByb21wdCA6IGNvbnRpbnVhdGlvbkluZGVudDtcbiAgICAgIGNvbnN0IHRleHRQYXJ0ID0gY3Vyc29yTGluZSA9PT0gMCA/IGJlZm9yZS5zbGljZShwcm9tcHRXaWR0aCkgOiBiZWZvcmUuc2xpY2UoY29udGludWF0aW9uV2lkdGgpO1xuICAgICAgcmVzdWx0W2N1cnNvckxpbmVdID0gYCR7cHJlZml4fSR7dGV4dFBhcnR9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YDtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJzb3IgY29sdW1uIGZvciB0ZXJtaW5hbCBwb3NpdGlvbmluZ1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGN1cnNvckNvbCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZElucHV0V2luZG93KGF2YWlsYWJsZTogbnVtYmVyKTogeyB0ZXh0OiBzdHJpbmc7IGN1cnNvcjogbnVtYmVyIH0ge1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3QgY3Vyc29ySW5kZXggPSBNYXRoLm1pbih0aGlzLmN1cnNvciwgbm9ybWFsaXplZC5sZW5ndGgpO1xuXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQ7XG4gICAgaWYgKGN1cnNvckluZGV4IDwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBjdXJzb3JJbmRleDtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBjdXJzb3JJbmRleCAtIG9mZnNldCAtIGF2YWlsYWJsZSArIDE7XG4gICAgaWYgKG92ZXJmbG93ID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IG92ZXJmbG93O1xuICAgIH1cbiAgICBjb25zdCBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBub3JtYWxpemVkLmxlbmd0aCAtIGF2YWlsYWJsZSk7XG4gICAgaWYgKG9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgIH1cbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgY29uc3Qgd2luZG93ID0gbm9ybWFsaXplZC5zbGljZShvZmZzZXQsIG9mZnNldCArIGF2YWlsYWJsZSk7XG4gICAgY29uc3QgZGlzcGxheSA9IHdpbmRvdy5zcGxpdCgnJykubWFwKGNoYXIgPT4gKGNoYXIgPT09ICdcXG4nID8gTkVXTElORV9QTEFDRUhPTERFUiA6IGNoYXIpKS5qb2luKCcnKTtcbiAgICBjb25zdCBjdXJzb3JJbldpbmRvdyA9IE1hdGgubWluKGRpc3BsYXkubGVuZ3RoLCBNYXRoLm1heCgwLCBjdXJzb3JJbmRleCAtIG9mZnNldCkpO1xuXG4gICAgY29uc3QgYmVmb3JlID0gZGlzcGxheS5zbGljZSgwLCBjdXJzb3JJbldpbmRvdyk7XG4gICAgY29uc3QgYXQgPSBkaXNwbGF5LmNoYXJBdChjdXJzb3JJbldpbmRvdykgfHwgJyAnO1xuICAgIGNvbnN0IGFmdGVyID0gZGlzcGxheS5zbGljZShjdXJzb3JJbldpbmRvdyArIDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGAke2JlZm9yZX0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gLFxuICAgICAgY3Vyc29yOiBjdXJzb3JJbldpbmRvdyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgaW50byB0aGUgYnVmZmVyIHdpdGhvdXQgc3VibWl0dGluZyAoQ3RybCtMKS5cbiAgICogQWxsb3dzIHVzZXIgdG8gZWRpdCB0aGUgcGFzdGVkIGNvbnRlbnQgYmVmb3JlIHN1Ym1pc3Npb24uXG4gICAqL1xuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbGxhcHNlZFBhc3RlKSByZXR1cm47XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAvLyBQdXQgdGhlIHBhc3RlZCBjb250ZW50IGludG8gdGhlIGJ1ZmZlciBmb3IgZWRpdGluZ1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICB0aGlzLmN1cnNvciA9IHRleHQubGVuZ3RoO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGNvbGxhcHNlZCBwYXN0ZSBhbmQgc3VibWl0IGltbWVkaWF0ZWx5LlxuICAgKiBVc2VmdWwgZm9yIHByb2dyYW1tYXRpYyBzdWJtaXNzaW9ucyB3aGVuIGEgcGFzdGUgY2hpcCBpcyBhY3RpdmUuXG4gICAqL1xuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQ7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgLy8gQ2xlYXIgdGhlIGJ1ZmZlciBmaXJzdCB0byBhdm9pZCBhbnkgdmlzdWFsIGR1cGxpY2F0aW9uXG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAvLyBTdWJtaXQgdGhlIHBhc3RlIGNvbnRlbnQgKGRpc3BsYXlVc2VyUHJvbXB0IGlzIGNhbGxlZCB3aXRoaW4gc3VibWl0VGV4dCBmb3Igbm9uLXNsYXNoIGNvbW1hbmRzKVxuICAgIHRoaXMuc3VibWl0VGV4dCh0ZXh0KTtcbiAgfVxuXG4gIGNhcHR1cmVJbnB1dChvcHRpb25zOiB7IGFsbG93RW1wdHk/OiBib29sZWFuOyB0cmltPzogYm9vbGVhbjsgcmVzZXRCdWZmZXI/OiBib29sZWFuIH0gPSB7fSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucmVzZXRCdWZmZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5pbnB1dENhcHR1cmUgPSB7XG4gICAgICAgIHJlc29sdmUsXG4gICAgICAgIHJlamVjdCxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHRyaW06IG9wdGlvbnMudHJpbSAhPT0gZmFsc2UsXG4gICAgICAgICAgYWxsb3dFbXB0eTogb3B0aW9ucy5hbGxvd0VtcHR5ID8/IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsSW5wdXRDYXB0dXJlKHJlYXNvbj86IHVua25vd24pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNhcHR1cmUgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgY2FwdHVyZS5yZWplY3Q/LihyZWFzb24gPz8gbmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGNhbmNlbGxlZCcpKTtcbiAgfVxuXG5cbiAgLy8gLS0tLS0tLS0tLS0tIEhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSB3cmFwT3ZlcmxheUxpbmUodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBpbmRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQuc3BsaXQoLyhcXHMrKS8pO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgIGNvbnN0IG5leHQgPSBjdXJyZW50ICsgd29yZDtcbiAgICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobmV4dCkgPiB3aWR0aCAmJiBjdXJyZW50LnRyaW0oKSkge1xuICAgICAgICAvLyBEb24ndCB0cnVuY2F0ZSAtIGp1c3QgcHVzaCB0aGUgbGluZSBhcy1pcyAoaXQgZml0cyB3aXRoaW4gd2lkdGgpXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudC50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50ID0gaW5kZW50ICsgd29yZC50cmltU3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50LnRyaW0oKSkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50LnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gbGluZXMgd2VyZSBwcm9kdWNlZCwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0ZXh0IHdpdGhvdXQgdHJ1bmNhdGlvblxuICAgIHJldHVybiBsaW5lcy5sZW5ndGggPyBsaW5lcyA6IFt0ZXh0XTtcbiAgfVxuXG4gIHByaXZhdGUgc2FmZVdpZHRoKCk6IG51bWJlciB7XG4gICAgY29uc3QgY29scyA9IHRoaXMub3V0cHV0LmlzVFRZID8gdGhpcy5jb2xzIHx8IDgwIDogODA7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEsIGNvbHMgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgdmlzaWJsZUxlbmd0aCh2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gMDtcbiAgICByZXR1cm4gdGhpcy5zdHJpcEFuc2kodmFsdWUpLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgc3RyaXBBbnNpKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXHUwMDFCXFxbWzAtP10qWyAtL10qW0Atfl0vZywgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cnVuY2F0ZUxpbmUodmFsdWU6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5tYXgoMSwgd2lkdGgpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgY29uc3QgdG9rZW5zID0gdmFsdWUuc3BsaXQoLyhcXHgxYlxcW1swLTk7XSptKS91KTtcbiAgICBsZXQgdmlzaWJsZSA9IDA7XG4gICAgbGV0IHRydW5jYXRlZCA9IGZhbHNlO1xuICAgIGxldCByZXN1bHQgPSAnJztcblxuICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICBpZiAoIXRva2VuKSBjb250aW51ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoL15cXHgxYlxcW1swLTk7XSptJC91LnRlc3QodG9rZW4pKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodmlzaWJsZSA+PSBsaW1pdCkge1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGxpbWl0IC0gdmlzaWJsZTtcbiAgICAgIGlmICh0b2tlbi5sZW5ndGggPD0gcmVtYWluaW5nKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgdmlzaWJsZSArPSB0b2tlbi5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzbGljZUxlbmd0aCA9IE1hdGgubWF4KDAsIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICBpZiAoc2xpY2VMZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHRva2VuLnNsaWNlKDAsIHNsaWNlTGVuZ3RoKTtcbiAgICAgICAgICB2aXNpYmxlICs9IHNsaWNlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCArPSAn4oCmJztcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRydW5jYXRlZCAmJiAhcmVzdWx0LmVuZHNXaXRoKEVTQy5SRVNFVCkpIHtcbiAgICAgIHJlc3VsdCArPSBFU0MuUkVTRVQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGdldEJ1ZmZlcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcjtcbiAgfVxuXG4gIGdldEN1cnNvcigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnNvcjtcbiAgfVxuXG4gIHNldEJ1ZmZlcih0ZXh0OiBzdHJpbmcsIGN1cnNvclBvcz86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICAvLyBWYWxpZGF0ZSBjdXJzb3IgcG9zaXRpb24gdG8gcHJldmVudCBvdXQtb2YtYm91bmRzIGlzc3Vlc1xuICAgIGNvbnN0IHJlcXVlc3RlZEN1cnNvciA9IGN1cnNvclBvcyA/PyB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJlcXVlc3RlZEN1cnNvciwgdGV4dC5sZW5ndGgpKTtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0U2VjcmV0TW9kZShlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5zZWNyZXRNb2RlID0gZW5hYmxlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYXJCdWZmZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldE1vZGVTdGF0dXMoc3RhdHVzOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgY29tcGFjdGluZyBzdGF0dXMgd2l0aCBhbmltYXRlZCBzcGlubmVyIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogVXNlcyDinLsgY2hhcmFjdGVyIHdpdGggYW5pbWF0aW9uIHRvIGluZGljYXRlIGNvbnRleHQgY29tcGFjdGlvbiBpbiBwcm9ncmVzc1xuICAgKi9cbiAgc2hvd0NvbXBhY3RpbmdTdGF0dXMobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdGhpcy5zcGlubmVyRnJhbWUrKztcbiAgICAgICAgLy8gQ3ljbGUgYWN0aXZpdHkgcGhyYXNlIGV2ZXJ5IH40IHNlY29uZHMgKDUwIGZyYW1lcyBhdCA4MG1zKVxuICAgICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSA1MCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuYWN0aXZpdHlQaHJhc2VJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9LCA4MCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgY29tcGFjdGluZyBzdGF0dXMgYW5kIHN0b3Agc3Bpbm5lciBhbmltYXRpb25cbiAgICovXG4gIGhpZGVDb21wYWN0aW5nU3RhdHVzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGVtaXRQcm9tcHQoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wdXNoUHJvbXB0RXZlbnQoY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSB1c2VyIHByb21wdCBpbW1lZGlhdGVseSBpbiBzY3JvbGxiYWNrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogV3JpdGVzIHN5bmNocm9ub3VzbHkgdG8gZW5zdXJlIGl0IGFwcGVhcnMgT05DRSBpbiBzY3JvbGxiYWNrIGJlZm9yZSBzdGF0dXMgdXBkYXRlcy5cbiAgICogVGhlIHByb21wdCBpbnB1dCBhcmVhIHdpbGwgdGhlbiBmbG9hdCBiZWxvdyB0aGlzIGFuZCBhbGwgc3Vic2VxdWVudCBldmVudHMuXG4gICAqL1xuICBwcml2YXRlIGRpc3BsYXlVc2VyUHJvbXB0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG5cbiAgICAvLyBQcmV2ZW50IGR1cGxpY2F0ZSBwcm9tcHQgZGlzcGxheSB3aXRoaW4gMS41IHNlY29uZHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuXG4gICAgLy8gQWRkIHRvIGV2ZW50IHF1ZXVlIGluc3RlYWQgb2Ygd3JpdGluZyBkaXJlY3RseSB0byBlbnN1cmUgcHJvcGVyIHJlbmRlcmluZ1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gTG93LWxldmVsIGhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm91dHB1dC53cml0ZShkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgcHVzaFByb21wdEV2ZW50KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdFByb21wdEV2ZW50ICYmIHRoaXMubGFzdFByb21wdEV2ZW50LnRleHQgPT09IG5vcm1hbGl6ZWQgJiYgbm93IC0gdGhpcy5sYXN0UHJvbXB0RXZlbnQuYXQgPCAxNTAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubGFzdFByb21wdEV2ZW50ID0geyB0ZXh0OiBub3JtYWxpemVkLCBhdDogbm93IH07XG4gICAgdGhpcy5hZGRFdmVudCgncHJvbXB0Jywgbm9ybWFsaXplZCk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyUHJvbXB0QXJlYSgpOiB2b2lkIHtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmxhc3RPdmVybGF5Py5saW5lcy5sZW5ndGggPz8gdGhpcy5wcm9tcHRIZWlnaHQgPz8gMDtcbiAgICBpZiAoaGVpZ2h0ID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBVc2UgYmF0Y2hlZCBhdG9taWMgd3JpdGUgdG8gcHJldmVudCB2aXN1YWwgZ2xpdGNoZXMgZnJvbSBub24tYXRvbWljIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICBjb25zdCBidWZmZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBIaWRlIGN1cnNvciBkdXJpbmcgY2xlYXJpbmcgdG8gcHJldmVudCB2aXN1YWwgYXJ0aWZhY3RzXG4gICAgYnVmZmVyLnB1c2goJ1xceDFiWz8yNWwnKTtcblxuICAgIC8vIEN1cnNvciBpcyBhdCBwcm9tcHQgcm93LiBNb3ZlIHVwIHRvIHRvcCBvZiBvdmVybGF5IGZpcnN0LlxuICAgIGlmICh0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheS5wcm9tcHRJbmRleDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3cgYXQgdG9wLCBjbGVhciBlYWNoIGxpbmUgZG93bndhcmRcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICBidWZmZXIucHVzaCgnXFxyJyk7XG4gICAgICBidWZmZXIucHVzaChFU0MuQ0xFQVJfTElORSk7XG4gICAgICBpZiAoaSA8IGhlaWdodCAtIDEpIHtcbiAgICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0InKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wICh3aGVyZSBjb250ZW50IHNob3VsZCBjb250aW51ZSBmcm9tKVxuICAgIGlmIChoZWlnaHQgPiAxKSB7XG4gICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtoZWlnaHQgLSAxfUFgKTtcbiAgICB9XG4gICAgYnVmZmVyLnB1c2goJ1xccicpO1xuXG4gICAgLy8gU2hvdyBjdXJzb3IgYWdhaW5cbiAgICBidWZmZXIucHVzaCgnXFx4MWJbPzI1aCcpO1xuXG4gICAgLy8gU2luZ2xlIGF0b21pYyB3cml0ZVxuICAgIHRoaXMud3JpdGUoYnVmZmVyLmpvaW4oJycpKTtcblxuICAgIHRoaXMubGFzdE92ZXJsYXkgPSBudWxsO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMucm93cyA9IHRoaXMub3V0cHV0LnJvd3MgfHwgMjQ7XG4gICAgICB0aGlzLmNvbHMgPSB0aGlzLm91dHB1dC5jb2x1bW5zIHx8IDgwO1xuICAgIH1cbiAgfVxufVxuIl0s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