{"version":3,"names":["cov_5a9z4mrwj","actualCoverage","UnifiedOrchestrator","results","s","findings","listeners","Set","onEvent","callback","f","add","delete","emit","event","cb","execute","config","start","Date","now","report","generateReport","b","objective","end","id","startTime","endTime","duration","dedupedFindings","recSet","seen","Map","finding","key","title","recommendation","existing","get","evidence","Array","isArray","from","clone","set","push","size","lower","toLowerCase","includes","failedCommands","filter","r","success","hasCritical","some","severity","exitReason","length","statusSummary","join","slice","recommendations","summary","exports"],"sources":["unifiedOrchestrator.ts"],"sourcesContent":["export interface ExecutionResult {\n  success: boolean;\n  output: string;\n  duration: number;\n  command?: string;\n  error?: string;\n}\n\nexport interface Finding {\n  severity: 'critical' | 'high' | 'medium' | 'low';\n  category?: string;\n  title: string;\n  description?: string;\n  evidence?: string | string[];\n  recommendation?: string;\n}\n\nexport interface OperationConfig {\n  objective: string;\n}\n\nexport interface OrchestratorEvent {\n  type: string;\n  timestamp: number;\n  data?: Record<string, unknown>;\n}\n\nexport interface OperationReport {\n  id: string;\n  objective: string;\n  startTime: number;\n  endTime: number;\n  duration: number;\n  results: ExecutionResult[];\n  findings: Finding[];\n  recommendations: string[];\n  summary: string;\n  success: boolean;\n  exitReason?: string;\n  statusSummary?: string;\n}\n\nexport class UnifiedOrchestrator {\n  results: ExecutionResult[] = [];\n  findings: Finding[] = [];\n\n  private listeners = new Set<(event: OrchestratorEvent) => void>();\n\n  onEvent(callback: (event: OrchestratorEvent) => void): () => void {\n    this.listeners.add(callback);\n    return () => this.listeners.delete(callback);\n  }\n\n  protected emit(event: OrchestratorEvent): void {\n    for (const cb of this.listeners) {\n      try {\n        cb(event);\n      } catch {\n        // Ignore listener failures to avoid breaking orchestration\n      }\n    }\n  }\n\n  async execute(config: Partial<OperationConfig>): Promise<OperationReport> {\n    const start = Date.now();\n    const report = this.generateReport(config.objective ?? '');\n    const end = Date.now();\n    return {\n      ...report,\n      id: report.id ?? `report-${start}`,\n      objective: config.objective ?? '',\n      startTime: start,\n      endTime: end,\n      duration: end - start,\n    };\n  }\n\n  generateReport(objective: string): OperationReport {\n    const dedupedFindings: Finding[] = [];\n    const recSet = new Set<string>();\n    const seen = new Map<string, Finding>();\n\n    for (const finding of this.findings) {\n      const key = `${finding.title}|${finding.recommendation ?? ''}`;\n      const existing = seen.get(key);\n      if (existing) {\n        const evidence = [\n          ...(Array.isArray(existing.evidence) ? existing.evidence : existing.evidence ? [existing.evidence] : []),\n          ...(Array.isArray(finding.evidence) ? finding.evidence : finding.evidence ? [finding.evidence] : []),\n        ];\n        existing.evidence = Array.from(new Set(evidence));\n        continue;\n      }\n      const clone: Finding = { ...finding };\n      seen.set(key, clone);\n      dedupedFindings.push(clone);\n      if (clone.recommendation) {\n        recSet.add(clone.recommendation);\n      }\n    }\n\n    // Derive recommendations if none are present\n    if (recSet.size === 0) {\n      const lower = objective.toLowerCase();\n      if (lower.includes('ml') || lower.includes('model') || lower.includes('train')) {\n        recSet.add('Validate model outputs against a held-out set');\n        recSet.add('Document evaluation metrics and risks');\n      } else if (lower.includes('research') || lower.includes('cure')) {\n        recSet.add('Peer review findings with a subject-matter expert');\n        recSet.add('Validate data provenance and ethics approvals');\n      } else {\n        recSet.add('Review results with a teammate');\n        recSet.add('Verify outputs and rerun if needed');\n      }\n    }\n\n    const failedCommands = this.results.filter((r) => r && !r.success);\n    const hasCritical = dedupedFindings.some((f) => f.severity === 'critical');\n\n    let exitReason: OperationReport['exitReason'] = 'success';\n    let success = true;\n    if (failedCommands.length) {\n      exitReason = 'failed-commands';\n      success = false;\n    } else if (hasCritical) {\n      exitReason = 'critical-findings';\n      success = false;\n    }\n\n    const statusSummary = [\n      `${this.results.length} command(s)`,\n      failedCommands.length ? `${failedCommands.length} failed` : 'all passed',\n      dedupedFindings.length ? `${dedupedFindings.length} finding(s)` : 'no findings',\n    ].join(' | ');\n\n    return {\n      id: `report-${Date.now()}`,\n      objective,\n      startTime: Date.now(),\n      endTime: Date.now(),\n      duration: 0,\n      results: this.results.slice(),\n      findings: dedupedFindings,\n      recommendations: Array.from(recSet),\n      summary: statusSummary,\n      success,\n      exitReason,\n      statusSummary,\n    };\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}