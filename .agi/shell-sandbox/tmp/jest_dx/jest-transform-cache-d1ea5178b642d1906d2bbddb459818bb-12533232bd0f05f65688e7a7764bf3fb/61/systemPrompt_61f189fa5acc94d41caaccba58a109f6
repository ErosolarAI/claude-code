168170ae9f6caff1a61d8b0d14955409
/* istanbul ignore next */
function cov_21488brl2a() {
  var path = "/Volumes/4TB/GitHub/src/shell/systemPrompt.ts";
  var hash = "24c5c833705eccc54a4142dfd79bbceae70e730c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Volumes/4TB/GitHub/src/shell/systemPrompt.ts",
    statementMap: {
      "0": {
        start: {
          line: 18,
          column: 15
        },
        end: {
          line: 18,
          column: 38
        }
      },
      "1": {
        start: {
          line: 19,
          column: 20
        },
        end: {
          line: 19,
          column: 49
        }
      },
      "2": {
        start: {
          line: 21,
          column: 17
        },
        end: {
          line: 21,
          column: 67
        }
      },
      "3": {
        start: {
          line: 22,
          column: 2
        },
        end: {
          line: 22,
          column: 73
        }
      }
    },
    fnMap: {
      "0": {
        name: "buildInteractiveSystemPrompt",
        decl: {
          start: {
            line: 12,
            column: 16
          },
          end: {
            line: 12,
            column: 44
          }
        },
        loc: {
          start: {
            line: 17,
            column: 10
          },
          end: {
            line: 23,
            column: 1
          }
        },
        line: 17
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 38
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 27
          }
        }, {
          start: {
            line: 18,
            column: 31
          },
          end: {
            line: 18,
            column: 38
          }
        }],
        line: 18
      },
      "1": {
        loc: {
          start: {
            line: 19,
            column: 20
          },
          end: {
            line: 19,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 19,
            column: 20
          },
          end: {
            line: 19,
            column: 32
          }
        }, {
          start: {
            line: 19,
            column: 36
          },
          end: {
            line: 19,
            column: 49
          }
        }],
        line: 19
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    f: {
      "0": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "24c5c833705eccc54a4142dfd79bbceae70e730c"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_21488brl2a = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_21488brl2a();
/**
 * Builds a lean, effective system prompt for the interactive shell.
 *
 * Design principles:
 * - Use native API system prompt (not user message) for better model compliance
 * - Keep instructions minimal - trust tool descriptions for specifics
 * - Focus on critical behavioral constraints only
 * - Avoid redundancy with tool-level guidance
 */
export function buildInteractiveSystemPrompt(basePrompt, profileLabel, _tools, workspaceDir) {
  /* istanbul ignore next */
  cov_21488brl2a().f[0]++;
  const name =
  /* istanbul ignore next */
  (cov_21488brl2a().s[0]++,
  /* istanbul ignore next */
  (cov_21488brl2a().b[0][0]++, profileLabel) ||
  /* istanbul ignore next */
  (cov_21488brl2a().b[0][1]++, 'Agent'));
  const workspace =
  /* istanbul ignore next */
  (cov_21488brl2a().s[1]++,
  /* istanbul ignore next */
  (cov_21488brl2a().b[1][0]++, workspaceDir) ||
  /* istanbul ignore next */
  (cov_21488brl2a().b[1][1]++, process.cwd()));
  const header =
  /* istanbul ignore next */
  (cov_21488brl2a().s[2]++, `You are ${name}, a coding agent in ${workspace}.`);
  /* istanbul ignore next */
  cov_21488brl2a().s[3]++;
  return [basePrompt.trim(), header].filter(Boolean).join('\n\n').trim();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMjE0ODhicmwyYSIsImFjdHVhbENvdmVyYWdlIiwiYnVpbGRJbnRlcmFjdGl2ZVN5c3RlbVByb21wdCIsImJhc2VQcm9tcHQiLCJwcm9maWxlTGFiZWwiLCJfdG9vbHMiLCJ3b3Jrc3BhY2VEaXIiLCJmIiwibmFtZSIsInMiLCJiIiwid29ya3NwYWNlIiwicHJvY2VzcyIsImN3ZCIsImhlYWRlciIsInRyaW0iLCJmaWx0ZXIiLCJCb29sZWFuIiwiam9pbiJdLCJzb3VyY2VzIjpbInN5c3RlbVByb21wdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFByb3ZpZGVyVG9vbERlZmluaXRpb24gfSBmcm9tICcuLi9jb3JlL3R5cGVzLmpzJztcblxuLyoqXG4gKiBCdWlsZHMgYSBsZWFuLCBlZmZlY3RpdmUgc3lzdGVtIHByb21wdCBmb3IgdGhlIGludGVyYWN0aXZlIHNoZWxsLlxuICpcbiAqIERlc2lnbiBwcmluY2lwbGVzOlxuICogLSBVc2UgbmF0aXZlIEFQSSBzeXN0ZW0gcHJvbXB0IChub3QgdXNlciBtZXNzYWdlKSBmb3IgYmV0dGVyIG1vZGVsIGNvbXBsaWFuY2VcbiAqIC0gS2VlcCBpbnN0cnVjdGlvbnMgbWluaW1hbCAtIHRydXN0IHRvb2wgZGVzY3JpcHRpb25zIGZvciBzcGVjaWZpY3NcbiAqIC0gRm9jdXMgb24gY3JpdGljYWwgYmVoYXZpb3JhbCBjb25zdHJhaW50cyBvbmx5XG4gKiAtIEF2b2lkIHJlZHVuZGFuY3kgd2l0aCB0b29sLWxldmVsIGd1aWRhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBidWlsZEludGVyYWN0aXZlU3lzdGVtUHJvbXB0KFxuICBiYXNlUHJvbXB0OiBzdHJpbmcsXG4gIHByb2ZpbGVMYWJlbDogc3RyaW5nLFxuICBfdG9vbHM6IFByb3ZpZGVyVG9vbERlZmluaXRpb25bXSxcbiAgd29ya3NwYWNlRGlyPzogc3RyaW5nXG4pOiBzdHJpbmcge1xuICBjb25zdCBuYW1lID0gcHJvZmlsZUxhYmVsIHx8ICdBZ2VudCc7XG4gIGNvbnN0IHdvcmtzcGFjZSA9IHdvcmtzcGFjZURpciB8fCBwcm9jZXNzLmN3ZCgpO1xuXG4gIGNvbnN0IGhlYWRlciA9IGBZb3UgYXJlICR7bmFtZX0sIGEgY29kaW5nIGFnZW50IGluICR7d29ya3NwYWNlfS5gO1xuICByZXR1cm4gW2Jhc2VQcm9tcHQudHJpbSgpLCBoZWFkZXJdLmZpbHRlcihCb29sZWFuKS5qb2luKCdcXG5cXG4nKS50cmltKCk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFlWTtJQUFBQSxjQUFBLFlBQUFBLENBQUE7TUFBQSxPQUFBQyxjQUFBO0lBQUE7RUFBQTtFQUFBLE9BQUFBLGNBQUE7QUFBQTtBQUFBRCxjQUFBO0FBYlo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTyxTQUFTRSw0QkFBNEJBLENBQzFDQyxVQUFrQixFQUNsQkMsWUFBb0IsRUFDcEJDLE1BQWdDLEVBQ2hDQyxZQUFxQixFQUNiO0VBQUE7RUFBQU4sY0FBQSxHQUFBTyxDQUFBO0VBQ1IsTUFBTUMsSUFBSTtFQUFBO0VBQUEsQ0FBQVIsY0FBQSxHQUFBUyxDQUFBO0VBQUc7RUFBQSxDQUFBVCxjQUFBLEdBQUFVLENBQUEsVUFBQU4sWUFBWTtFQUFBO0VBQUEsQ0FBQUosY0FBQSxHQUFBVSxDQUFBLFVBQUksT0FBTztFQUNwQyxNQUFNQyxTQUFTO0VBQUE7RUFBQSxDQUFBWCxjQUFBLEdBQUFTLENBQUE7RUFBRztFQUFBLENBQUFULGNBQUEsR0FBQVUsQ0FBQSxVQUFBSixZQUFZO0VBQUE7RUFBQSxDQUFBTixjQUFBLEdBQUFVLENBQUEsVUFBSUUsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQztFQUUvQyxNQUFNQyxNQUFNO0VBQUE7RUFBQSxDQUFBZCxjQUFBLEdBQUFTLENBQUEsT0FBRyxXQUFXRCxJQUFJLHVCQUF1QkcsU0FBUyxHQUFHO0VBQUM7RUFBQVgsY0FBQSxHQUFBUyxDQUFBO0VBQ2xFLE9BQU8sQ0FBQ04sVUFBVSxDQUFDWSxJQUFJLENBQUMsQ0FBQyxFQUFFRCxNQUFNLENBQUMsQ0FBQ0UsTUFBTSxDQUFDQyxPQUFPLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDSCxJQUFJLENBQUMsQ0FBQztBQUN4RSIsImlnbm9yZUxpc3QiOltdfQ==