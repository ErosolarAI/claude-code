7475787b5a605447ee0ec907d2593ca6
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.InputProtection = void 0;
exports.getInputProtection = getInputProtection;
exports.initializeInputProtection = initializeInputProtection;
exports.validateChatInput = validateChatInput;
exports.validatePromptSubmit = validatePromptSubmit;
var _events = require("events");
/**
 * Input Protection System - Guards against remote attacks on chat input
 *
 * Protects against:
 * 1. Remote stdin injection attacks
 * 2. Automated paste attacks (superhuman typing speed)
 * 3. Escape sequence injection via clipboard
 * 4. Buffer overflow attempts (massive pastes)
 * 5. Control character injection
 * 6. Unicode-based attacks (homoglyphs, RTL override)
 * 7. Timing-based attacks (burst injection)
 *
 * @module inputProtection
 */

/** Input validation result */

/** Types of input attacks */

// Stdin manipulation

/** Input protection configuration */

/** Input timing tracking */

/** Singleton instance */
let inputProtectionInstance = null;

/**
 * Input Protection System
 */
class InputProtection extends _events.EventEmitter {
  inputTimings = [];
  lastKeystroke = 0;
  burstCounter = 0;
  suspicionScore = 0;
  blockedAttacks = 0;
  sanitizedInputs = 0;
  isInPasteMode = false;
  pasteStartTime = 0;

  // Dangerous escape sequences to block
  dangerousEscapes = [/\x1b\][0-9]+;/,
  // OSC sequences (can change terminal title, etc.)
  /\x1b[PX^_]/,
  // DCS, SOS, PM, APC sequences
  /\x1b\[[\d;]*[pls]/i,
  // Soft reset, various terminal modes
  /\x1b\[\?[\d;]*[hl]/,
  // Private mode sets (can enable dangerous modes)
  /\x1b\[[\d;]*n/,
  // Device status queries (info leak)
  /\x1b\[[\d;]*q/,
  // Keyboard LED control
  /\x1bP[^\\]*\x1b\\/,
  // Complete DCS sequence
  /\x1b\]0;[^\x07]*\x07/,
  // Title set sequence
  /\x1b\]52;/ // Clipboard manipulation sequence
  ];

  // Dangerous control characters
  dangerousControls = [0x00,
  // NUL - can cause issues
  0x01,
  // SOH
  0x02,
  // STX
  0x03,
  // ETX (Ctrl+C) - allow but track
  0x04,
  // EOT (Ctrl+D) - allow but track
  0x05,
  // ENQ
  0x06,
  // ACK
  0x07,
  // BEL - annoying beep
  0x0E,
  // SO - shift out
  0x0F,
  // SI - shift in
  0x10,
  // DLE
  0x11,
  // DC1 (XON)
  0x12,
  // DC2
  0x13,
  // DC3 (XOFF)
  0x14,
  // DC4
  0x15,
  // NAK
  0x16,
  // SYN
  0x17,
  // ETB
  0x18,
  // CAN
  0x19,
  // EM
  0x1A,
  // SUB (Ctrl+Z)
  0x1C,
  // FS
  0x1D,
  // GS
  0x1E,
  // RS
  0x1F,
  // US
  0x7F // DEL
  ];

  // Unicode attack patterns
  unicodeAttacks = [{
    pattern: /\u202E/,
    name: 'RTL override'
  },
  // Right-to-left override
  {
    pattern: /\u202D/,
    name: 'LTR override'
  },
  // Left-to-right override
  {
    pattern: /\u202A/,
    name: 'LTR embedding'
  },
  // Left-to-right embedding
  {
    pattern: /\u202B/,
    name: 'RTL embedding'
  },
  // Right-to-left embedding
  {
    pattern: /\u202C/,
    name: 'Pop direction'
  },
  // Pop directional formatting
  {
    pattern: /\u2066/,
    name: 'LTR isolate'
  },
  // Left-to-right isolate
  {
    pattern: /\u2067/,
    name: 'RTL isolate'
  },
  // Right-to-left isolate
  {
    pattern: /\u2068/,
    name: 'First strong isolate'
  }, {
    pattern: /\u2069/,
    name: 'Pop isolate'
  },
  // Pop directional isolate
  {
    pattern: /\u200E/,
    name: 'LTR mark'
  },
  // Left-to-right mark
  {
    pattern: /\u200F/,
    name: 'RTL mark'
  },
  // Right-to-left mark
  {
    pattern: /\uFEFF/,
    name: 'BOM'
  },
  // Byte order mark
  {
    pattern: /[\u200B-\u200D]/,
    name: 'Zero-width chars'
  } // Zero-width spaces/joiners
  ];
  constructor(config = {}) {
    super();
    this.config = {
      maxCharactersPerSecond: config.maxCharactersPerSecond ?? 500,
      // Allow fast paste
      maxPasteSize: config.maxPasteSize ?? 100000,
      // 100KB max paste
      maxBufferSize: config.maxBufferSize ?? 500000,
      // 500KB max buffer
      detectTimingAttacks: config.detectTimingAttacks ?? true,
      minKeystrokeInterval: config.minKeystrokeInterval ?? 5,
      // 5ms minimum (200 CPS)
      maxBurstSize: config.maxBurstSize ?? 1000,
      // Chars before suspicion
      strictMode: config.strictMode ?? false,
      verbose: config.verbose ?? false,
      onAttackDetected: config.onAttackDetected ?? (() => {})
    };
  }

  /**
   * Validate and sanitize input before it enters the chat buffer
   */
  validateInput(input, isPaste = false) {
    const now = Date.now();
    let sanitized = input;
    let blocked = false;
    let reason;
    let attackType;
    let riskScore = 0;

    // Track timing
    this.inputTimings.push({
      timestamp: now,
      charCount: input.length
    });
    this.cleanOldTimings();

    // === Size validation ===
    if (isPaste && input.length > this.config.maxPasteSize) {
      riskScore += 30;
      if (this.config.strictMode) {
        blocked = true;
        reason = `Paste size ${input.length} exceeds limit ${this.config.maxPasteSize}`;
        attackType = 'overflow_attempt';
      } else {
        sanitized = input.slice(0, this.config.maxPasteSize);
        reason = `Truncated paste from ${input.length} to ${this.config.maxPasteSize}`;
      }
      this.sanitizedInputs++;
    }

    // === Timing analysis ===
    if (this.config.detectTimingAttacks && !isPaste) {
      const interval = now - this.lastKeystroke;
      if (interval > 0 && interval < this.config.minKeystrokeInterval) {
        // Suspiciously fast keystrokes
        this.suspicionScore += 5;
        riskScore += 10;
        if (this.suspicionScore > 50) {
          attackType = 'automated_injection';
          reason = `Automated input detected (${Math.round(1000 / interval)} CPS)`;
          this.log(`Suspicion score: ${this.suspicionScore}, interval: ${interval}ms`);
        }
      } else {
        // Normal typing - decrease suspicion
        this.suspicionScore = Math.max(0, this.suspicionScore - 1);
      }
    }
    this.lastKeystroke = now;

    // === Burst detection ===
    const recentChars = this.getRecentCharCount(100); // Last 100ms
    if (recentChars > this.config.maxBurstSize) {
      this.burstCounter++;
      riskScore += 20;
      if (this.burstCounter > 3) {
        attackType = 'timing_burst';
        reason = `Burst injection detected (${recentChars} chars in 100ms)`;
        if (this.config.strictMode) {
          blocked = true;
        }
      }
    } else {
      this.burstCounter = Math.max(0, this.burstCounter - 1);
    }

    // === Escape sequence validation ===
    const escapeResult = this.checkEscapeSequences(sanitized);
    if (escapeResult.found) {
      riskScore += 40;
      attackType = 'escape_injection';
      reason = `Dangerous escape sequence: ${escapeResult.type}`;
      sanitized = escapeResult.sanitized;
      this.sanitizedInputs++;
      if (this.config.strictMode) {
        blocked = true;
      }
    }

    // === Control character validation ===
    const controlResult = this.checkControlCharacters(sanitized);
    if (controlResult.found) {
      riskScore += 15;
      if (!attackType) {
        attackType = 'control_injection';
        reason = `Control characters detected: ${controlResult.chars.join(', ')}`;
      }
      sanitized = controlResult.sanitized;
      this.sanitizedInputs++;
    }

    // === Unicode attack detection ===
    const unicodeResult = this.checkUnicodeAttacks(sanitized);
    if (unicodeResult.found) {
      riskScore += 30;
      if (!attackType) {
        attackType = 'unicode_attack';
        reason = `Unicode attack: ${unicodeResult.type}`;
      }
      sanitized = unicodeResult.sanitized;
      this.sanitizedInputs++;
    }

    // === Rate limiting check ===
    const cps = this.calculateCPS();
    if (cps > this.config.maxCharactersPerSecond && !isPaste) {
      riskScore += 25;
      if (!attackType) {
        attackType = 'automated_injection';
        reason = `Rate limit exceeded: ${Math.round(cps)} CPS`;
      }
      if (this.config.strictMode && cps > this.config.maxCharactersPerSecond * 2) {
        blocked = true;
      }
    }

    // Log attack detection
    if (attackType && riskScore > 30) {
      this.blockedAttacks++;
      this.config.onAttackDetected?.(attackType, reason || 'Unknown');
      this.emit('attack_detected', {
        type: attackType,
        reason,
        riskScore
      });
      this.log(`Attack detected: ${attackType} - ${reason} (risk: ${riskScore})`);
    }
    return {
      allowed: !blocked,
      sanitized: blocked ? '' : sanitized,
      blocked,
      reason,
      attackType,
      riskScore
    };
  }

  /**
   * Enter paste mode (more lenient validation)
   */
  enterPasteMode() {
    this.isInPasteMode = true;
    this.pasteStartTime = Date.now();
    this.log('Entered paste mode');
  }

  /**
   * Exit paste mode
   */
  exitPasteMode() {
    const duration = Date.now() - this.pasteStartTime;
    this.isInPasteMode = false;
    this.log(`Exited paste mode (duration: ${duration}ms)`);
  }

  /**
   * Check if currently in paste mode
   */
  isPasting() {
    return this.isInPasteMode;
  }

  /**
   * Validate a complete prompt before submission
   */
  validatePromptSubmission(prompt) {
    // Final validation before sending to AI
    let sanitized = prompt;
    let riskScore = 0;
    let attackType;
    let reason;

    // Check total size
    if (prompt.length > this.config.maxBufferSize) {
      riskScore += 50;
      attackType = 'overflow_attempt';
      reason = `Prompt exceeds buffer limit`;
      sanitized = prompt.slice(0, this.config.maxBufferSize);
    }

    // Final escape sequence check
    const escapeResult = this.checkEscapeSequences(sanitized);
    if (escapeResult.found) {
      riskScore += 30;
      sanitized = escapeResult.sanitized;
    }

    // Final unicode check
    const unicodeResult = this.checkUnicodeAttacks(sanitized);
    if (unicodeResult.found) {
      riskScore += 20;
      sanitized = unicodeResult.sanitized;
    }
    return {
      allowed: true,
      sanitized,
      blocked: false,
      reason,
      attackType,
      riskScore
    };
  }

  /**
   * Reset protection state (e.g., after idle period)
   */
  reset() {
    this.inputTimings = [];
    this.lastKeystroke = 0;
    this.burstCounter = 0;
    this.suspicionScore = 0;
    this.isInPasteMode = false;
  }

  /**
   * Get protection statistics
   */
  getStats() {
    return {
      blockedAttacks: this.blockedAttacks,
      sanitizedInputs: this.sanitizedInputs,
      currentSuspicion: this.suspicionScore,
      currentCPS: this.calculateCPS()
    };
  }

  // === Private helper methods ===

  checkEscapeSequences(input) {
    let sanitized = input;
    let found = false;
    let type;
    for (const pattern of this.dangerousEscapes) {
      if (pattern.test(sanitized)) {
        found = true;
        type = pattern.source;
        sanitized = sanitized.replace(new RegExp(pattern.source, 'g'), '');
      }
    }
    return {
      found,
      type,
      sanitized
    };
  }
  checkControlCharacters(input) {
    const foundChars = [];
    let sanitized = '';
    for (let i = 0; i < input.length; i++) {
      const code = input.charCodeAt(i);

      // Allow normal control characters: Tab (9), Newline (10), Carriage Return (13), Escape (27 - for legit sequences)
      if (code === 9 || code === 10 || code === 13) {
        sanitized += input[i];
        continue;
      }

      // Block dangerous control characters
      if (this.dangerousControls.includes(code)) {
        foundChars.push(`0x${code.toString(16).padStart(2, '0')}`);
        continue;
      }
      sanitized += input[i];
    }
    return {
      found: foundChars.length > 0,
      chars: foundChars,
      sanitized
    };
  }
  checkUnicodeAttacks(input) {
    let sanitized = input;
    let found = false;
    let type;
    for (const attack of this.unicodeAttacks) {
      const pattern = typeof attack.pattern === 'string' ? new RegExp(attack.pattern.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'), 'g') : attack.pattern;
      if (pattern.test(sanitized)) {
        found = true;
        type = attack.name;
        sanitized = sanitized.replace(pattern, '');
      }
    }
    return {
      found,
      type,
      sanitized
    };
  }
  cleanOldTimings() {
    const cutoff = Date.now() - 1000; // Keep last 1 second
    this.inputTimings = this.inputTimings.filter(t => t.timestamp > cutoff);
  }
  getRecentCharCount(windowMs) {
    const cutoff = Date.now() - windowMs;
    return this.inputTimings.filter(t => t.timestamp > cutoff).reduce((sum, t) => sum + t.charCount, 0);
  }
  calculateCPS() {
    if (this.inputTimings.length < 2) return 0;
    const now = Date.now();
    const windowMs = 1000;
    const cutoff = now - windowMs;
    const recentTimings = this.inputTimings.filter(t => t.timestamp > cutoff);
    if (recentTimings.length === 0) return 0;
    const totalChars = recentTimings.reduce((sum, t) => sum + t.charCount, 0);
    const timeSpan = now - recentTimings[0].timestamp;
    return timeSpan > 0 ? totalChars / timeSpan * 1000 : 0;
  }
  log(message) {
    if (this.config.verbose || process.env['AGI_DEBUG']) {
      console.error(`[InputProtection] ${message}`);
    }
  }
}

/**
 * Initialize global input protection (singleton)
 */
exports.InputProtection = InputProtection;
function initializeInputProtection(config) {
  if (!inputProtectionInstance) {
    inputProtectionInstance = new InputProtection(config);
  }
  return inputProtectionInstance;
}

/**
 * Get input protection instance
 */
function getInputProtection() {
  return inputProtectionInstance;
}

/**
 * Quick validate function for input
 */
function validateChatInput(input, isPaste = false) {
  const protection = inputProtectionInstance ?? new InputProtection();
  return protection.validateInput(input, isPaste);
}

/**
 * Validate final prompt before submission
 */
function validatePromptSubmit(prompt) {
  const protection = inputProtectionInstance ?? new InputProtection();
  return protection.validatePromptSubmission(prompt);
}

// Auto-initialize if environment variable is set
if (process.env['AGI_INPUT_PROTECTION'] === '1' || process.env['AGI_PROTECTED_MODE'] === '1') {
  initializeInputProtection({
    verbose: process.env['AGI_DEBUG'] === '1'
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXZlbnRzIiwicmVxdWlyZSIsImlucHV0UHJvdGVjdGlvbkluc3RhbmNlIiwiSW5wdXRQcm90ZWN0aW9uIiwiRXZlbnRFbWl0dGVyIiwiaW5wdXRUaW1pbmdzIiwibGFzdEtleXN0cm9rZSIsImJ1cnN0Q291bnRlciIsInN1c3BpY2lvblNjb3JlIiwiYmxvY2tlZEF0dGFja3MiLCJzYW5pdGl6ZWRJbnB1dHMiLCJpc0luUGFzdGVNb2RlIiwicGFzdGVTdGFydFRpbWUiLCJkYW5nZXJvdXNFc2NhcGVzIiwiZGFuZ2Vyb3VzQ29udHJvbHMiLCJ1bmljb2RlQXR0YWNrcyIsInBhdHRlcm4iLCJuYW1lIiwiY29uc3RydWN0b3IiLCJjb25maWciLCJtYXhDaGFyYWN0ZXJzUGVyU2Vjb25kIiwibWF4UGFzdGVTaXplIiwibWF4QnVmZmVyU2l6ZSIsImRldGVjdFRpbWluZ0F0dGFja3MiLCJtaW5LZXlzdHJva2VJbnRlcnZhbCIsIm1heEJ1cnN0U2l6ZSIsInN0cmljdE1vZGUiLCJ2ZXJib3NlIiwib25BdHRhY2tEZXRlY3RlZCIsInZhbGlkYXRlSW5wdXQiLCJpbnB1dCIsImlzUGFzdGUiLCJub3ciLCJEYXRlIiwic2FuaXRpemVkIiwiYmxvY2tlZCIsInJlYXNvbiIsImF0dGFja1R5cGUiLCJyaXNrU2NvcmUiLCJwdXNoIiwidGltZXN0YW1wIiwiY2hhckNvdW50IiwibGVuZ3RoIiwiY2xlYW5PbGRUaW1pbmdzIiwic2xpY2UiLCJpbnRlcnZhbCIsIk1hdGgiLCJyb3VuZCIsImxvZyIsIm1heCIsInJlY2VudENoYXJzIiwiZ2V0UmVjZW50Q2hhckNvdW50IiwiZXNjYXBlUmVzdWx0IiwiY2hlY2tFc2NhcGVTZXF1ZW5jZXMiLCJmb3VuZCIsInR5cGUiLCJjb250cm9sUmVzdWx0IiwiY2hlY2tDb250cm9sQ2hhcmFjdGVycyIsImNoYXJzIiwiam9pbiIsInVuaWNvZGVSZXN1bHQiLCJjaGVja1VuaWNvZGVBdHRhY2tzIiwiY3BzIiwiY2FsY3VsYXRlQ1BTIiwiZW1pdCIsImFsbG93ZWQiLCJlbnRlclBhc3RlTW9kZSIsImV4aXRQYXN0ZU1vZGUiLCJkdXJhdGlvbiIsImlzUGFzdGluZyIsInZhbGlkYXRlUHJvbXB0U3VibWlzc2lvbiIsInByb21wdCIsInJlc2V0IiwiZ2V0U3RhdHMiLCJjdXJyZW50U3VzcGljaW9uIiwiY3VycmVudENQUyIsInRlc3QiLCJzb3VyY2UiLCJyZXBsYWNlIiwiUmVnRXhwIiwiZm91bmRDaGFycyIsImkiLCJjb2RlIiwiY2hhckNvZGVBdCIsImluY2x1ZGVzIiwidG9TdHJpbmciLCJwYWRTdGFydCIsImF0dGFjayIsImN1dG9mZiIsImZpbHRlciIsInQiLCJ3aW5kb3dNcyIsInJlZHVjZSIsInN1bSIsInJlY2VudFRpbWluZ3MiLCJ0b3RhbENoYXJzIiwidGltZVNwYW4iLCJtZXNzYWdlIiwicHJvY2VzcyIsImVudiIsImNvbnNvbGUiLCJlcnJvciIsImV4cG9ydHMiLCJpbml0aWFsaXplSW5wdXRQcm90ZWN0aW9uIiwiZ2V0SW5wdXRQcm90ZWN0aW9uIiwidmFsaWRhdGVDaGF0SW5wdXQiLCJwcm90ZWN0aW9uIiwidmFsaWRhdGVQcm9tcHRTdWJtaXQiXSwic291cmNlcyI6WyJpbnB1dFByb3RlY3Rpb24udHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBJbnB1dCBQcm90ZWN0aW9uIFN5c3RlbSAtIEd1YXJkcyBhZ2FpbnN0IHJlbW90ZSBhdHRhY2tzIG9uIGNoYXQgaW5wdXRcbiAqXG4gKiBQcm90ZWN0cyBhZ2FpbnN0OlxuICogMS4gUmVtb3RlIHN0ZGluIGluamVjdGlvbiBhdHRhY2tzXG4gKiAyLiBBdXRvbWF0ZWQgcGFzdGUgYXR0YWNrcyAoc3VwZXJodW1hbiB0eXBpbmcgc3BlZWQpXG4gKiAzLiBFc2NhcGUgc2VxdWVuY2UgaW5qZWN0aW9uIHZpYSBjbGlwYm9hcmRcbiAqIDQuIEJ1ZmZlciBvdmVyZmxvdyBhdHRlbXB0cyAobWFzc2l2ZSBwYXN0ZXMpXG4gKiA1LiBDb250cm9sIGNoYXJhY3RlciBpbmplY3Rpb25cbiAqIDYuIFVuaWNvZGUtYmFzZWQgYXR0YWNrcyAoaG9tb2dseXBocywgUlRMIG92ZXJyaWRlKVxuICogNy4gVGltaW5nLWJhc2VkIGF0dGFja3MgKGJ1cnN0IGluamVjdGlvbilcbiAqXG4gKiBAbW9kdWxlIGlucHV0UHJvdGVjdGlvblxuICovXG5cbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ2V2ZW50cyc7XG5cbi8qKiBJbnB1dCB2YWxpZGF0aW9uIHJlc3VsdCAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnB1dFZhbGlkYXRpb24ge1xuICBhbGxvd2VkOiBib29sZWFuO1xuICBzYW5pdGl6ZWQ6IHN0cmluZztcbiAgYmxvY2tlZDogYm9vbGVhbjtcbiAgcmVhc29uPzogc3RyaW5nO1xuICBhdHRhY2tUeXBlPzogSW5wdXRBdHRhY2tUeXBlO1xuICByaXNrU2NvcmU6IG51bWJlcjsgLy8gMC0xMDBcbn1cblxuLyoqIFR5cGVzIG9mIGlucHV0IGF0dGFja3MgKi9cbmV4cG9ydCB0eXBlIElucHV0QXR0YWNrVHlwZSA9XG4gIHwgJ2F1dG9tYXRlZF9pbmplY3Rpb24nICAgLy8gSW5wdXQgZmFzdGVyIHRoYW4gaHVtYW4gdHlwaW5nXG4gIHwgJ2VzY2FwZV9pbmplY3Rpb24nICAgICAgLy8gVGVybWluYWwgZXNjYXBlIHNlcXVlbmNlc1xuICB8ICdjb250cm9sX2luamVjdGlvbicgICAgIC8vIENvbnRyb2wgY2hhcmFjdGVycyAoQ3RybCtDLCBldGMuKVxuICB8ICdvdmVyZmxvd19hdHRlbXB0JyAgICAgIC8vIEV4dHJlbWVseSBsYXJnZSBpbnB1dFxuICB8ICd1bmljb2RlX2F0dGFjaycgICAgICAgIC8vIFJUTCBvdmVycmlkZSwgaG9tb2dseXBoc1xuICB8ICd0aW1pbmdfYnVyc3QnICAgICAgICAgIC8vIFJhcGlkIGJ1cnN0IG9mIGlucHV0c1xuICB8ICdyZW1vdGVfcGFzdGUnICAgICAgICAgIC8vIERldGVjdGVkIHJlbW90ZSBwYXN0ZSBhdHRhY2tcbiAgfCAnc3RkaW5faGlqYWNrJzsgICAgICAgICAvLyBTdGRpbiBtYW5pcHVsYXRpb25cblxuLyoqIElucHV0IHByb3RlY3Rpb24gY29uZmlndXJhdGlvbiAqL1xuZXhwb3J0IGludGVyZmFjZSBJbnB1dFByb3RlY3Rpb25Db25maWcge1xuICAvKiogTWF4aW11bSBjaGFyYWN0ZXJzIHBlciBzZWNvbmQgKGh1bWFuIH4xMiBDUFMsIHBhc3RlIHVubGltaXRlZCkgKi9cbiAgbWF4Q2hhcmFjdGVyc1BlclNlY29uZD86IG51bWJlcjtcbiAgLyoqIE1heGltdW0gcGFzdGUgc2l6ZSBpbiBjaGFyYWN0ZXJzICovXG4gIG1heFBhc3RlU2l6ZT86IG51bWJlcjtcbiAgLyoqIE1heGltdW0gdG90YWwgYnVmZmVyIHNpemUgKi9cbiAgbWF4QnVmZmVyU2l6ZT86IG51bWJlcjtcbiAgLyoqIEVuYWJsZSB0aW1pbmctYmFzZWQgYXR0YWNrIGRldGVjdGlvbiAqL1xuICBkZXRlY3RUaW1pbmdBdHRhY2tzPzogYm9vbGVhbjtcbiAgLyoqIE1pbmltdW0gaW50ZXJ2YWwgYmV0d2VlbiBrZXlzdHJva2VzIGluIG1zIChodW1hbiB+NTBtcyspICovXG4gIG1pbktleXN0cm9rZUludGVydmFsPzogbnVtYmVyO1xuICAvKiogTWF4aW11bSBidXJzdCBzaXplIGJlZm9yZSBzdXNwaWNpb24gKi9cbiAgbWF4QnVyc3RTaXplPzogbnVtYmVyO1xuICAvKiogRW5hYmxlIHN0cmljdCBtb2RlIChibG9ja3Mgc3VzcGljaW91cyBpbnB1dCBpbnN0ZWFkIG9mIHNhbml0aXppbmcpICovXG4gIHN0cmljdE1vZGU/OiBib29sZWFuO1xuICAvKiogVmVyYm9zZSBsb2dnaW5nICovXG4gIHZlcmJvc2U/OiBib29sZWFuO1xuICAvKiogQ2FsbGJhY2sgb24gYXR0YWNrIGRldGVjdGlvbiAqL1xuICBvbkF0dGFja0RldGVjdGVkPzogKHR5cGU6IElucHV0QXR0YWNrVHlwZSwgZGV0YWlsczogc3RyaW5nKSA9PiB2b2lkO1xufVxuXG4vKiogSW5wdXQgdGltaW5nIHRyYWNraW5nICovXG5pbnRlcmZhY2UgSW5wdXRUaW1pbmcge1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgY2hhckNvdW50OiBudW1iZXI7XG59XG5cbi8qKiBTaW5nbGV0b24gaW5zdGFuY2UgKi9cbmxldCBpbnB1dFByb3RlY3Rpb25JbnN0YW5jZTogSW5wdXRQcm90ZWN0aW9uIHwgbnVsbCA9IG51bGw7XG5cbi8qKlxuICogSW5wdXQgUHJvdGVjdGlvbiBTeXN0ZW1cbiAqL1xuZXhwb3J0IGNsYXNzIElucHV0UHJvdGVjdGlvbiBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgY29uZmlnOiBSZXF1aXJlZDxJbnB1dFByb3RlY3Rpb25Db25maWc+O1xuICBwcml2YXRlIGlucHV0VGltaW5nczogSW5wdXRUaW1pbmdbXSA9IFtdO1xuICBwcml2YXRlIGxhc3RLZXlzdHJva2UgPSAwO1xuICBwcml2YXRlIGJ1cnN0Q291bnRlciA9IDA7XG4gIHByaXZhdGUgc3VzcGljaW9uU2NvcmUgPSAwO1xuICBwcml2YXRlIGJsb2NrZWRBdHRhY2tzID0gMDtcbiAgcHJpdmF0ZSBzYW5pdGl6ZWRJbnB1dHMgPSAwO1xuICBwcml2YXRlIGlzSW5QYXN0ZU1vZGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwYXN0ZVN0YXJ0VGltZSA9IDA7XG5cbiAgLy8gRGFuZ2Vyb3VzIGVzY2FwZSBzZXF1ZW5jZXMgdG8gYmxvY2tcbiAgcHJpdmF0ZSByZWFkb25seSBkYW5nZXJvdXNFc2NhcGVzOiBSZWdFeHBbXSA9IFtcbiAgICAvXFx4MWJcXF1bMC05XSs7LywgICAgICAgICAgIC8vIE9TQyBzZXF1ZW5jZXMgKGNhbiBjaGFuZ2UgdGVybWluYWwgdGl0bGUsIGV0Yy4pXG4gICAgL1xceDFiW1BYXl9dLywgICAgICAgICAgICAgIC8vIERDUywgU09TLCBQTSwgQVBDIHNlcXVlbmNlc1xuICAgIC9cXHgxYlxcW1tcXGQ7XSpbcGxzXS9pLCAgICAgIC8vIFNvZnQgcmVzZXQsIHZhcmlvdXMgdGVybWluYWwgbW9kZXNcbiAgICAvXFx4MWJcXFtcXD9bXFxkO10qW2hsXS8sICAgICAgLy8gUHJpdmF0ZSBtb2RlIHNldHMgKGNhbiBlbmFibGUgZGFuZ2Vyb3VzIG1vZGVzKVxuICAgIC9cXHgxYlxcW1tcXGQ7XSpuLywgICAgICAgICAgIC8vIERldmljZSBzdGF0dXMgcXVlcmllcyAoaW5mbyBsZWFrKVxuICAgIC9cXHgxYlxcW1tcXGQ7XSpxLywgICAgICAgICAgIC8vIEtleWJvYXJkIExFRCBjb250cm9sXG4gICAgL1xceDFiUFteXFxcXF0qXFx4MWJcXFxcLywgICAgICAgLy8gQ29tcGxldGUgRENTIHNlcXVlbmNlXG4gICAgL1xceDFiXFxdMDtbXlxceDA3XSpcXHgwNy8sICAgIC8vIFRpdGxlIHNldCBzZXF1ZW5jZVxuICAgIC9cXHgxYlxcXTUyOy8sICAgICAgICAgICAgICAgLy8gQ2xpcGJvYXJkIG1hbmlwdWxhdGlvbiBzZXF1ZW5jZVxuICBdO1xuXG4gIC8vIERhbmdlcm91cyBjb250cm9sIGNoYXJhY3RlcnNcbiAgcHJpdmF0ZSByZWFkb25seSBkYW5nZXJvdXNDb250cm9sczogbnVtYmVyW10gPSBbXG4gICAgMHgwMCwgLy8gTlVMIC0gY2FuIGNhdXNlIGlzc3Vlc1xuICAgIDB4MDEsIC8vIFNPSFxuICAgIDB4MDIsIC8vIFNUWFxuICAgIDB4MDMsIC8vIEVUWCAoQ3RybCtDKSAtIGFsbG93IGJ1dCB0cmFja1xuICAgIDB4MDQsIC8vIEVPVCAoQ3RybCtEKSAtIGFsbG93IGJ1dCB0cmFja1xuICAgIDB4MDUsIC8vIEVOUVxuICAgIDB4MDYsIC8vIEFDS1xuICAgIDB4MDcsIC8vIEJFTCAtIGFubm95aW5nIGJlZXBcbiAgICAweDBFLCAvLyBTTyAtIHNoaWZ0IG91dFxuICAgIDB4MEYsIC8vIFNJIC0gc2hpZnQgaW5cbiAgICAweDEwLCAvLyBETEVcbiAgICAweDExLCAvLyBEQzEgKFhPTilcbiAgICAweDEyLCAvLyBEQzJcbiAgICAweDEzLCAvLyBEQzMgKFhPRkYpXG4gICAgMHgxNCwgLy8gREM0XG4gICAgMHgxNSwgLy8gTkFLXG4gICAgMHgxNiwgLy8gU1lOXG4gICAgMHgxNywgLy8gRVRCXG4gICAgMHgxOCwgLy8gQ0FOXG4gICAgMHgxOSwgLy8gRU1cbiAgICAweDFBLCAvLyBTVUIgKEN0cmwrWilcbiAgICAweDFDLCAvLyBGU1xuICAgIDB4MUQsIC8vIEdTXG4gICAgMHgxRSwgLy8gUlNcbiAgICAweDFGLCAvLyBVU1xuICAgIDB4N0YsIC8vIERFTFxuICBdO1xuXG4gIC8vIFVuaWNvZGUgYXR0YWNrIHBhdHRlcm5zXG4gIHByaXZhdGUgcmVhZG9ubHkgdW5pY29kZUF0dGFja3M6IEFycmF5PHsgcGF0dGVybjogUmVnRXhwIHwgc3RyaW5nOyBuYW1lOiBzdHJpbmcgfT4gPSBbXG4gICAgeyBwYXR0ZXJuOiAvXFx1MjAyRS8sIG5hbWU6ICdSVEwgb3ZlcnJpZGUnIH0sICAgICAgLy8gUmlnaHQtdG8tbGVmdCBvdmVycmlkZVxuICAgIHsgcGF0dGVybjogL1xcdTIwMkQvLCBuYW1lOiAnTFRSIG92ZXJyaWRlJyB9LCAgICAgIC8vIExlZnQtdG8tcmlnaHQgb3ZlcnJpZGVcbiAgICB7IHBhdHRlcm46IC9cXHUyMDJBLywgbmFtZTogJ0xUUiBlbWJlZGRpbmcnIH0sICAgICAvLyBMZWZ0LXRvLXJpZ2h0IGVtYmVkZGluZ1xuICAgIHsgcGF0dGVybjogL1xcdTIwMkIvLCBuYW1lOiAnUlRMIGVtYmVkZGluZycgfSwgICAgIC8vIFJpZ2h0LXRvLWxlZnQgZW1iZWRkaW5nXG4gICAgeyBwYXR0ZXJuOiAvXFx1MjAyQy8sIG5hbWU6ICdQb3AgZGlyZWN0aW9uJyB9LCAgICAgLy8gUG9wIGRpcmVjdGlvbmFsIGZvcm1hdHRpbmdcbiAgICB7IHBhdHRlcm46IC9cXHUyMDY2LywgbmFtZTogJ0xUUiBpc29sYXRlJyB9LCAgICAgICAvLyBMZWZ0LXRvLXJpZ2h0IGlzb2xhdGVcbiAgICB7IHBhdHRlcm46IC9cXHUyMDY3LywgbmFtZTogJ1JUTCBpc29sYXRlJyB9LCAgICAgICAvLyBSaWdodC10by1sZWZ0IGlzb2xhdGVcbiAgICB7IHBhdHRlcm46IC9cXHUyMDY4LywgbmFtZTogJ0ZpcnN0IHN0cm9uZyBpc29sYXRlJyB9LFxuICAgIHsgcGF0dGVybjogL1xcdTIwNjkvLCBuYW1lOiAnUG9wIGlzb2xhdGUnIH0sICAgICAgIC8vIFBvcCBkaXJlY3Rpb25hbCBpc29sYXRlXG4gICAgeyBwYXR0ZXJuOiAvXFx1MjAwRS8sIG5hbWU6ICdMVFIgbWFyaycgfSwgICAgICAgICAgLy8gTGVmdC10by1yaWdodCBtYXJrXG4gICAgeyBwYXR0ZXJuOiAvXFx1MjAwRi8sIG5hbWU6ICdSVEwgbWFyaycgfSwgICAgICAgICAgLy8gUmlnaHQtdG8tbGVmdCBtYXJrXG4gICAgeyBwYXR0ZXJuOiAvXFx1RkVGRi8sIG5hbWU6ICdCT00nIH0sICAgICAgICAgICAgICAgLy8gQnl0ZSBvcmRlciBtYXJrXG4gICAgeyBwYXR0ZXJuOiAvW1xcdTIwMEItXFx1MjAwRF0vLCBuYW1lOiAnWmVyby13aWR0aCBjaGFycycgfSwgLy8gWmVyby13aWR0aCBzcGFjZXMvam9pbmVyc1xuICBdO1xuXG4gIGNvbnN0cnVjdG9yKGNvbmZpZzogSW5wdXRQcm90ZWN0aW9uQ29uZmlnID0ge30pIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMuY29uZmlnID0ge1xuICAgICAgbWF4Q2hhcmFjdGVyc1BlclNlY29uZDogY29uZmlnLm1heENoYXJhY3RlcnNQZXJTZWNvbmQgPz8gNTAwLCAgLy8gQWxsb3cgZmFzdCBwYXN0ZVxuICAgICAgbWF4UGFzdGVTaXplOiBjb25maWcubWF4UGFzdGVTaXplID8/IDEwMDAwMCwgICAgICAgICAgICAgICAgICAgLy8gMTAwS0IgbWF4IHBhc3RlXG4gICAgICBtYXhCdWZmZXJTaXplOiBjb25maWcubWF4QnVmZmVyU2l6ZSA/PyA1MDAwMDAsICAgICAgICAgICAgICAgICAvLyA1MDBLQiBtYXggYnVmZmVyXG4gICAgICBkZXRlY3RUaW1pbmdBdHRhY2tzOiBjb25maWcuZGV0ZWN0VGltaW5nQXR0YWNrcyA/PyB0cnVlLFxuICAgICAgbWluS2V5c3Ryb2tlSW50ZXJ2YWw6IGNvbmZpZy5taW5LZXlzdHJva2VJbnRlcnZhbCA/PyA1LCAgICAgICAgLy8gNW1zIG1pbmltdW0gKDIwMCBDUFMpXG4gICAgICBtYXhCdXJzdFNpemU6IGNvbmZpZy5tYXhCdXJzdFNpemUgPz8gMTAwMCwgICAgICAgICAgICAgICAgICAgICAvLyBDaGFycyBiZWZvcmUgc3VzcGljaW9uXG4gICAgICBzdHJpY3RNb2RlOiBjb25maWcuc3RyaWN0TW9kZSA/PyBmYWxzZSxcbiAgICAgIHZlcmJvc2U6IGNvbmZpZy52ZXJib3NlID8/IGZhbHNlLFxuICAgICAgb25BdHRhY2tEZXRlY3RlZDogY29uZmlnLm9uQXR0YWNrRGV0ZWN0ZWQgPz8gKCgpID0+IHt9KSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIFZhbGlkYXRlIGFuZCBzYW5pdGl6ZSBpbnB1dCBiZWZvcmUgaXQgZW50ZXJzIHRoZSBjaGF0IGJ1ZmZlclxuICAgKi9cbiAgdmFsaWRhdGVJbnB1dChpbnB1dDogc3RyaW5nLCBpc1Bhc3RlID0gZmFsc2UpOiBJbnB1dFZhbGlkYXRpb24ge1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgbGV0IHNhbml0aXplZCA9IGlucHV0O1xuICAgIGxldCBibG9ja2VkID0gZmFsc2U7XG4gICAgbGV0IHJlYXNvbjogc3RyaW5nIHwgdW5kZWZpbmVkO1xuICAgIGxldCBhdHRhY2tUeXBlOiBJbnB1dEF0dGFja1R5cGUgfCB1bmRlZmluZWQ7XG4gICAgbGV0IHJpc2tTY29yZSA9IDA7XG5cbiAgICAvLyBUcmFjayB0aW1pbmdcbiAgICB0aGlzLmlucHV0VGltaW5ncy5wdXNoKHsgdGltZXN0YW1wOiBub3csIGNoYXJDb3VudDogaW5wdXQubGVuZ3RoIH0pO1xuICAgIHRoaXMuY2xlYW5PbGRUaW1pbmdzKCk7XG5cbiAgICAvLyA9PT0gU2l6ZSB2YWxpZGF0aW9uID09PVxuICAgIGlmIChpc1Bhc3RlICYmIGlucHV0Lmxlbmd0aCA+IHRoaXMuY29uZmlnLm1heFBhc3RlU2l6ZSkge1xuICAgICAgcmlza1Njb3JlICs9IDMwO1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnN0cmljdE1vZGUpIHtcbiAgICAgICAgYmxvY2tlZCA9IHRydWU7XG4gICAgICAgIHJlYXNvbiA9IGBQYXN0ZSBzaXplICR7aW5wdXQubGVuZ3RofSBleGNlZWRzIGxpbWl0ICR7dGhpcy5jb25maWcubWF4UGFzdGVTaXplfWA7XG4gICAgICAgIGF0dGFja1R5cGUgPSAnb3ZlcmZsb3dfYXR0ZW1wdCc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzYW5pdGl6ZWQgPSBpbnB1dC5zbGljZSgwLCB0aGlzLmNvbmZpZy5tYXhQYXN0ZVNpemUpO1xuICAgICAgICByZWFzb24gPSBgVHJ1bmNhdGVkIHBhc3RlIGZyb20gJHtpbnB1dC5sZW5ndGh9IHRvICR7dGhpcy5jb25maWcubWF4UGFzdGVTaXplfWA7XG4gICAgICB9XG4gICAgICB0aGlzLnNhbml0aXplZElucHV0cysrO1xuICAgIH1cblxuICAgIC8vID09PSBUaW1pbmcgYW5hbHlzaXMgPT09XG4gICAgaWYgKHRoaXMuY29uZmlnLmRldGVjdFRpbWluZ0F0dGFja3MgJiYgIWlzUGFzdGUpIHtcbiAgICAgIGNvbnN0IGludGVydmFsID0gbm93IC0gdGhpcy5sYXN0S2V5c3Ryb2tlO1xuICAgICAgaWYgKGludGVydmFsID4gMCAmJiBpbnRlcnZhbCA8IHRoaXMuY29uZmlnLm1pbktleXN0cm9rZUludGVydmFsKSB7XG4gICAgICAgIC8vIFN1c3BpY2lvdXNseSBmYXN0IGtleXN0cm9rZXNcbiAgICAgICAgdGhpcy5zdXNwaWNpb25TY29yZSArPSA1O1xuICAgICAgICByaXNrU2NvcmUgKz0gMTA7XG5cbiAgICAgICAgaWYgKHRoaXMuc3VzcGljaW9uU2NvcmUgPiA1MCkge1xuICAgICAgICAgIGF0dGFja1R5cGUgPSAnYXV0b21hdGVkX2luamVjdGlvbic7XG4gICAgICAgICAgcmVhc29uID0gYEF1dG9tYXRlZCBpbnB1dCBkZXRlY3RlZCAoJHtNYXRoLnJvdW5kKDEwMDAgLyBpbnRlcnZhbCl9IENQUylgO1xuICAgICAgICAgIHRoaXMubG9nKGBTdXNwaWNpb24gc2NvcmU6ICR7dGhpcy5zdXNwaWNpb25TY29yZX0sIGludGVydmFsOiAke2ludGVydmFsfW1zYCk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIE5vcm1hbCB0eXBpbmcgLSBkZWNyZWFzZSBzdXNwaWNpb25cbiAgICAgICAgdGhpcy5zdXNwaWNpb25TY29yZSA9IE1hdGgubWF4KDAsIHRoaXMuc3VzcGljaW9uU2NvcmUgLSAxKTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5sYXN0S2V5c3Ryb2tlID0gbm93O1xuXG4gICAgLy8gPT09IEJ1cnN0IGRldGVjdGlvbiA9PT1cbiAgICBjb25zdCByZWNlbnRDaGFycyA9IHRoaXMuZ2V0UmVjZW50Q2hhckNvdW50KDEwMCk7IC8vIExhc3QgMTAwbXNcbiAgICBpZiAocmVjZW50Q2hhcnMgPiB0aGlzLmNvbmZpZy5tYXhCdXJzdFNpemUpIHtcbiAgICAgIHRoaXMuYnVyc3RDb3VudGVyKys7XG4gICAgICByaXNrU2NvcmUgKz0gMjA7XG5cbiAgICAgIGlmICh0aGlzLmJ1cnN0Q291bnRlciA+IDMpIHtcbiAgICAgICAgYXR0YWNrVHlwZSA9ICd0aW1pbmdfYnVyc3QnO1xuICAgICAgICByZWFzb24gPSBgQnVyc3QgaW5qZWN0aW9uIGRldGVjdGVkICgke3JlY2VudENoYXJzfSBjaGFycyBpbiAxMDBtcylgO1xuICAgICAgICBpZiAodGhpcy5jb25maWcuc3RyaWN0TW9kZSkge1xuICAgICAgICAgIGJsb2NrZWQgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnVyc3RDb3VudGVyID0gTWF0aC5tYXgoMCwgdGhpcy5idXJzdENvdW50ZXIgLSAxKTtcbiAgICB9XG5cbiAgICAvLyA9PT0gRXNjYXBlIHNlcXVlbmNlIHZhbGlkYXRpb24gPT09XG4gICAgY29uc3QgZXNjYXBlUmVzdWx0ID0gdGhpcy5jaGVja0VzY2FwZVNlcXVlbmNlcyhzYW5pdGl6ZWQpO1xuICAgIGlmIChlc2NhcGVSZXN1bHQuZm91bmQpIHtcbiAgICAgIHJpc2tTY29yZSArPSA0MDtcbiAgICAgIGF0dGFja1R5cGUgPSAnZXNjYXBlX2luamVjdGlvbic7XG4gICAgICByZWFzb24gPSBgRGFuZ2Vyb3VzIGVzY2FwZSBzZXF1ZW5jZTogJHtlc2NhcGVSZXN1bHQudHlwZX1gO1xuICAgICAgc2FuaXRpemVkID0gZXNjYXBlUmVzdWx0LnNhbml0aXplZDtcbiAgICAgIHRoaXMuc2FuaXRpemVkSW5wdXRzKys7XG5cbiAgICAgIGlmICh0aGlzLmNvbmZpZy5zdHJpY3RNb2RlKSB7XG4gICAgICAgIGJsb2NrZWQgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vID09PSBDb250cm9sIGNoYXJhY3RlciB2YWxpZGF0aW9uID09PVxuICAgIGNvbnN0IGNvbnRyb2xSZXN1bHQgPSB0aGlzLmNoZWNrQ29udHJvbENoYXJhY3RlcnMoc2FuaXRpemVkKTtcbiAgICBpZiAoY29udHJvbFJlc3VsdC5mb3VuZCkge1xuICAgICAgcmlza1Njb3JlICs9IDE1O1xuICAgICAgaWYgKCFhdHRhY2tUeXBlKSB7XG4gICAgICAgIGF0dGFja1R5cGUgPSAnY29udHJvbF9pbmplY3Rpb24nO1xuICAgICAgICByZWFzb24gPSBgQ29udHJvbCBjaGFyYWN0ZXJzIGRldGVjdGVkOiAke2NvbnRyb2xSZXN1bHQuY2hhcnMuam9pbignLCAnKX1gO1xuICAgICAgfVxuICAgICAgc2FuaXRpemVkID0gY29udHJvbFJlc3VsdC5zYW5pdGl6ZWQ7XG4gICAgICB0aGlzLnNhbml0aXplZElucHV0cysrO1xuICAgIH1cblxuICAgIC8vID09PSBVbmljb2RlIGF0dGFjayBkZXRlY3Rpb24gPT09XG4gICAgY29uc3QgdW5pY29kZVJlc3VsdCA9IHRoaXMuY2hlY2tVbmljb2RlQXR0YWNrcyhzYW5pdGl6ZWQpO1xuICAgIGlmICh1bmljb2RlUmVzdWx0LmZvdW5kKSB7XG4gICAgICByaXNrU2NvcmUgKz0gMzA7XG4gICAgICBpZiAoIWF0dGFja1R5cGUpIHtcbiAgICAgICAgYXR0YWNrVHlwZSA9ICd1bmljb2RlX2F0dGFjayc7XG4gICAgICAgIHJlYXNvbiA9IGBVbmljb2RlIGF0dGFjazogJHt1bmljb2RlUmVzdWx0LnR5cGV9YDtcbiAgICAgIH1cbiAgICAgIHNhbml0aXplZCA9IHVuaWNvZGVSZXN1bHQuc2FuaXRpemVkO1xuICAgICAgdGhpcy5zYW5pdGl6ZWRJbnB1dHMrKztcbiAgICB9XG5cbiAgICAvLyA9PT0gUmF0ZSBsaW1pdGluZyBjaGVjayA9PT1cbiAgICBjb25zdCBjcHMgPSB0aGlzLmNhbGN1bGF0ZUNQUygpO1xuICAgIGlmIChjcHMgPiB0aGlzLmNvbmZpZy5tYXhDaGFyYWN0ZXJzUGVyU2Vjb25kICYmICFpc1Bhc3RlKSB7XG4gICAgICByaXNrU2NvcmUgKz0gMjU7XG4gICAgICBpZiAoIWF0dGFja1R5cGUpIHtcbiAgICAgICAgYXR0YWNrVHlwZSA9ICdhdXRvbWF0ZWRfaW5qZWN0aW9uJztcbiAgICAgICAgcmVhc29uID0gYFJhdGUgbGltaXQgZXhjZWVkZWQ6ICR7TWF0aC5yb3VuZChjcHMpfSBDUFNgO1xuICAgICAgfVxuXG4gICAgICBpZiAodGhpcy5jb25maWcuc3RyaWN0TW9kZSAmJiBjcHMgPiB0aGlzLmNvbmZpZy5tYXhDaGFyYWN0ZXJzUGVyU2Vjb25kICogMikge1xuICAgICAgICBibG9ja2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBMb2cgYXR0YWNrIGRldGVjdGlvblxuICAgIGlmIChhdHRhY2tUeXBlICYmIHJpc2tTY29yZSA+IDMwKSB7XG4gICAgICB0aGlzLmJsb2NrZWRBdHRhY2tzKys7XG4gICAgICB0aGlzLmNvbmZpZy5vbkF0dGFja0RldGVjdGVkPy4oYXR0YWNrVHlwZSwgcmVhc29uIHx8ICdVbmtub3duJyk7XG4gICAgICB0aGlzLmVtaXQoJ2F0dGFja19kZXRlY3RlZCcsIHsgdHlwZTogYXR0YWNrVHlwZSwgcmVhc29uLCByaXNrU2NvcmUgfSk7XG4gICAgICB0aGlzLmxvZyhgQXR0YWNrIGRldGVjdGVkOiAke2F0dGFja1R5cGV9IC0gJHtyZWFzb259IChyaXNrOiAke3Jpc2tTY29yZX0pYCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQ6ICFibG9ja2VkLFxuICAgICAgc2FuaXRpemVkOiBibG9ja2VkID8gJycgOiBzYW5pdGl6ZWQsXG4gICAgICBibG9ja2VkLFxuICAgICAgcmVhc29uLFxuICAgICAgYXR0YWNrVHlwZSxcbiAgICAgIHJpc2tTY29yZSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEVudGVyIHBhc3RlIG1vZGUgKG1vcmUgbGVuaWVudCB2YWxpZGF0aW9uKVxuICAgKi9cbiAgZW50ZXJQYXN0ZU1vZGUoKTogdm9pZCB7XG4gICAgdGhpcy5pc0luUGFzdGVNb2RlID0gdHJ1ZTtcbiAgICB0aGlzLnBhc3RlU3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmxvZygnRW50ZXJlZCBwYXN0ZSBtb2RlJyk7XG4gIH1cblxuICAvKipcbiAgICogRXhpdCBwYXN0ZSBtb2RlXG4gICAqL1xuICBleGl0UGFzdGVNb2RlKCk6IHZvaWQge1xuICAgIGNvbnN0IGR1cmF0aW9uID0gRGF0ZS5ub3coKSAtIHRoaXMucGFzdGVTdGFydFRpbWU7XG4gICAgdGhpcy5pc0luUGFzdGVNb2RlID0gZmFsc2U7XG4gICAgdGhpcy5sb2coYEV4aXRlZCBwYXN0ZSBtb2RlIChkdXJhdGlvbjogJHtkdXJhdGlvbn1tcylgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBjdXJyZW50bHkgaW4gcGFzdGUgbW9kZVxuICAgKi9cbiAgaXNQYXN0aW5nKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmlzSW5QYXN0ZU1vZGU7XG4gIH1cblxuICAvKipcbiAgICogVmFsaWRhdGUgYSBjb21wbGV0ZSBwcm9tcHQgYmVmb3JlIHN1Ym1pc3Npb25cbiAgICovXG4gIHZhbGlkYXRlUHJvbXB0U3VibWlzc2lvbihwcm9tcHQ6IHN0cmluZyk6IElucHV0VmFsaWRhdGlvbiB7XG4gICAgLy8gRmluYWwgdmFsaWRhdGlvbiBiZWZvcmUgc2VuZGluZyB0byBBSVxuICAgIGxldCBzYW5pdGl6ZWQgPSBwcm9tcHQ7XG4gICAgbGV0IHJpc2tTY29yZSA9IDA7XG4gICAgbGV0IGF0dGFja1R5cGU6IElucHV0QXR0YWNrVHlwZSB8IHVuZGVmaW5lZDtcbiAgICBsZXQgcmVhc29uOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG5cbiAgICAvLyBDaGVjayB0b3RhbCBzaXplXG4gICAgaWYgKHByb21wdC5sZW5ndGggPiB0aGlzLmNvbmZpZy5tYXhCdWZmZXJTaXplKSB7XG4gICAgICByaXNrU2NvcmUgKz0gNTA7XG4gICAgICBhdHRhY2tUeXBlID0gJ292ZXJmbG93X2F0dGVtcHQnO1xuICAgICAgcmVhc29uID0gYFByb21wdCBleGNlZWRzIGJ1ZmZlciBsaW1pdGA7XG4gICAgICBzYW5pdGl6ZWQgPSBwcm9tcHQuc2xpY2UoMCwgdGhpcy5jb25maWcubWF4QnVmZmVyU2l6ZSk7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgZXNjYXBlIHNlcXVlbmNlIGNoZWNrXG4gICAgY29uc3QgZXNjYXBlUmVzdWx0ID0gdGhpcy5jaGVja0VzY2FwZVNlcXVlbmNlcyhzYW5pdGl6ZWQpO1xuICAgIGlmIChlc2NhcGVSZXN1bHQuZm91bmQpIHtcbiAgICAgIHJpc2tTY29yZSArPSAzMDtcbiAgICAgIHNhbml0aXplZCA9IGVzY2FwZVJlc3VsdC5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgLy8gRmluYWwgdW5pY29kZSBjaGVja1xuICAgIGNvbnN0IHVuaWNvZGVSZXN1bHQgPSB0aGlzLmNoZWNrVW5pY29kZUF0dGFja3Moc2FuaXRpemVkKTtcbiAgICBpZiAodW5pY29kZVJlc3VsdC5mb3VuZCkge1xuICAgICAgcmlza1Njb3JlICs9IDIwO1xuICAgICAgc2FuaXRpemVkID0gdW5pY29kZVJlc3VsdC5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGFsbG93ZWQ6IHRydWUsXG4gICAgICBzYW5pdGl6ZWQsXG4gICAgICBibG9ja2VkOiBmYWxzZSxcbiAgICAgIHJlYXNvbixcbiAgICAgIGF0dGFja1R5cGUsXG4gICAgICByaXNrU2NvcmUsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCBwcm90ZWN0aW9uIHN0YXRlIChlLmcuLCBhZnRlciBpZGxlIHBlcmlvZClcbiAgICovXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMuaW5wdXRUaW1pbmdzID0gW107XG4gICAgdGhpcy5sYXN0S2V5c3Ryb2tlID0gMDtcbiAgICB0aGlzLmJ1cnN0Q291bnRlciA9IDA7XG4gICAgdGhpcy5zdXNwaWNpb25TY29yZSA9IDA7XG4gICAgdGhpcy5pc0luUGFzdGVNb2RlID0gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHByb3RlY3Rpb24gc3RhdGlzdGljc1xuICAgKi9cbiAgZ2V0U3RhdHMoKToge1xuICAgIGJsb2NrZWRBdHRhY2tzOiBudW1iZXI7XG4gICAgc2FuaXRpemVkSW5wdXRzOiBudW1iZXI7XG4gICAgY3VycmVudFN1c3BpY2lvbjogbnVtYmVyO1xuICAgIGN1cnJlbnRDUFM6IG51bWJlcjtcbiAgfSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGJsb2NrZWRBdHRhY2tzOiB0aGlzLmJsb2NrZWRBdHRhY2tzLFxuICAgICAgc2FuaXRpemVkSW5wdXRzOiB0aGlzLnNhbml0aXplZElucHV0cyxcbiAgICAgIGN1cnJlbnRTdXNwaWNpb246IHRoaXMuc3VzcGljaW9uU2NvcmUsXG4gICAgICBjdXJyZW50Q1BTOiB0aGlzLmNhbGN1bGF0ZUNQUygpLFxuICAgIH07XG4gIH1cblxuICAvLyA9PT0gUHJpdmF0ZSBoZWxwZXIgbWV0aG9kcyA9PT1cblxuICBwcml2YXRlIGNoZWNrRXNjYXBlU2VxdWVuY2VzKGlucHV0OiBzdHJpbmcpOiB7IGZvdW5kOiBib29sZWFuOyB0eXBlPzogc3RyaW5nOyBzYW5pdGl6ZWQ6IHN0cmluZyB9IHtcbiAgICBsZXQgc2FuaXRpemVkID0gaW5wdXQ7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgbGV0IHR5cGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiB0aGlzLmRhbmdlcm91c0VzY2FwZXMpIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3Qoc2FuaXRpemVkKSkge1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIHR5cGUgPSBwYXR0ZXJuLnNvdXJjZTtcbiAgICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UobmV3IFJlZ0V4cChwYXR0ZXJuLnNvdXJjZSwgJ2cnKSwgJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGZvdW5kLCB0eXBlLCBzYW5pdGl6ZWQgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2hlY2tDb250cm9sQ2hhcmFjdGVycyhpbnB1dDogc3RyaW5nKTogeyBmb3VuZDogYm9vbGVhbjsgY2hhcnM6IHN0cmluZ1tdOyBzYW5pdGl6ZWQ6IHN0cmluZyB9IHtcbiAgICBjb25zdCBmb3VuZENoYXJzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBzYW5pdGl6ZWQgPSAnJztcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5wdXQubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGNvZGUgPSBpbnB1dC5jaGFyQ29kZUF0KGkpO1xuXG4gICAgICAvLyBBbGxvdyBub3JtYWwgY29udHJvbCBjaGFyYWN0ZXJzOiBUYWIgKDkpLCBOZXdsaW5lICgxMCksIENhcnJpYWdlIFJldHVybiAoMTMpLCBFc2NhcGUgKDI3IC0gZm9yIGxlZ2l0IHNlcXVlbmNlcylcbiAgICAgIGlmIChjb2RlID09PSA5IHx8IGNvZGUgPT09IDEwIHx8IGNvZGUgPT09IDEzKSB7XG4gICAgICAgIHNhbml0aXplZCArPSBpbnB1dFtpXTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIEJsb2NrIGRhbmdlcm91cyBjb250cm9sIGNoYXJhY3RlcnNcbiAgICAgIGlmICh0aGlzLmRhbmdlcm91c0NvbnRyb2xzLmluY2x1ZGVzKGNvZGUpKSB7XG4gICAgICAgIGZvdW5kQ2hhcnMucHVzaChgMHgke2NvZGUudG9TdHJpbmcoMTYpLnBhZFN0YXJ0KDIsICcwJyl9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBzYW5pdGl6ZWQgKz0gaW5wdXRbaV07XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZvdW5kOiBmb3VuZENoYXJzLmxlbmd0aCA+IDAsXG4gICAgICBjaGFyczogZm91bmRDaGFycyxcbiAgICAgIHNhbml0aXplZCxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBjaGVja1VuaWNvZGVBdHRhY2tzKGlucHV0OiBzdHJpbmcpOiB7IGZvdW5kOiBib29sZWFuOyB0eXBlPzogc3RyaW5nOyBzYW5pdGl6ZWQ6IHN0cmluZyB9IHtcbiAgICBsZXQgc2FuaXRpemVkID0gaW5wdXQ7XG4gICAgbGV0IGZvdW5kID0gZmFsc2U7XG4gICAgbGV0IHR5cGU6IHN0cmluZyB8IHVuZGVmaW5lZDtcblxuICAgIGZvciAoY29uc3QgYXR0YWNrIG9mIHRoaXMudW5pY29kZUF0dGFja3MpIHtcbiAgICAgIGNvbnN0IHBhdHRlcm4gPSB0eXBlb2YgYXR0YWNrLnBhdHRlcm4gPT09ICdzdHJpbmcnXG4gICAgICAgID8gbmV3IFJlZ0V4cChhdHRhY2sucGF0dGVybi5yZXBsYWNlKC9bLiorP14ke30oKXxbXFxdXFxcXF0vZywgJ1xcXFwkJicpLCAnZycpXG4gICAgICAgIDogYXR0YWNrLnBhdHRlcm47XG5cbiAgICAgIGlmIChwYXR0ZXJuLnRlc3Qoc2FuaXRpemVkKSkge1xuICAgICAgICBmb3VuZCA9IHRydWU7XG4gICAgICAgIHR5cGUgPSBhdHRhY2submFtZTtcbiAgICAgICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UocGF0dGVybiwgJycpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB7IGZvdW5kLCB0eXBlLCBzYW5pdGl6ZWQgfTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYW5PbGRUaW1pbmdzKCk6IHZvaWQge1xuICAgIGNvbnN0IGN1dG9mZiA9IERhdGUubm93KCkgLSAxMDAwOyAvLyBLZWVwIGxhc3QgMSBzZWNvbmRcbiAgICB0aGlzLmlucHV0VGltaW5ncyA9IHRoaXMuaW5wdXRUaW1pbmdzLmZpbHRlcih0ID0+IHQudGltZXN0YW1wID4gY3V0b2ZmKTtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0UmVjZW50Q2hhckNvdW50KHdpbmRvd01zOiBudW1iZXIpOiBudW1iZXIge1xuICAgIGNvbnN0IGN1dG9mZiA9IERhdGUubm93KCkgLSB3aW5kb3dNcztcbiAgICByZXR1cm4gdGhpcy5pbnB1dFRpbWluZ3NcbiAgICAgIC5maWx0ZXIodCA9PiB0LnRpbWVzdGFtcCA+IGN1dG9mZilcbiAgICAgIC5yZWR1Y2UoKHN1bSwgdCkgPT4gc3VtICsgdC5jaGFyQ291bnQsIDApO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDUFMoKTogbnVtYmVyIHtcbiAgICBpZiAodGhpcy5pbnB1dFRpbWluZ3MubGVuZ3RoIDwgMikgcmV0dXJuIDA7XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd01zID0gMTAwMDtcbiAgICBjb25zdCBjdXRvZmYgPSBub3cgLSB3aW5kb3dNcztcbiAgICBjb25zdCByZWNlbnRUaW1pbmdzID0gdGhpcy5pbnB1dFRpbWluZ3MuZmlsdGVyKHQgPT4gdC50aW1lc3RhbXAgPiBjdXRvZmYpO1xuXG4gICAgaWYgKHJlY2VudFRpbWluZ3MubGVuZ3RoID09PSAwKSByZXR1cm4gMDtcblxuICAgIGNvbnN0IHRvdGFsQ2hhcnMgPSByZWNlbnRUaW1pbmdzLnJlZHVjZSgoc3VtLCB0KSA9PiBzdW0gKyB0LmNoYXJDb3VudCwgMCk7XG4gICAgY29uc3QgdGltZVNwYW4gPSBub3cgLSByZWNlbnRUaW1pbmdzWzBdLnRpbWVzdGFtcDtcblxuICAgIHJldHVybiB0aW1lU3BhbiA+IDAgPyAodG90YWxDaGFycyAvIHRpbWVTcGFuKSAqIDEwMDAgOiAwO1xuICB9XG5cbiAgcHJpdmF0ZSBsb2cobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuY29uZmlnLnZlcmJvc2UgfHwgcHJvY2Vzcy5lbnZbJ0FHSV9ERUJVRyddKSB7XG4gICAgICBjb25zb2xlLmVycm9yKGBbSW5wdXRQcm90ZWN0aW9uXSAke21lc3NhZ2V9YCk7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBnbG9iYWwgaW5wdXQgcHJvdGVjdGlvbiAoc2luZ2xldG9uKVxuICovXG5leHBvcnQgZnVuY3Rpb24gaW5pdGlhbGl6ZUlucHV0UHJvdGVjdGlvbihjb25maWc/OiBJbnB1dFByb3RlY3Rpb25Db25maWcpOiBJbnB1dFByb3RlY3Rpb24ge1xuICBpZiAoIWlucHV0UHJvdGVjdGlvbkluc3RhbmNlKSB7XG4gICAgaW5wdXRQcm90ZWN0aW9uSW5zdGFuY2UgPSBuZXcgSW5wdXRQcm90ZWN0aW9uKGNvbmZpZyk7XG4gIH1cbiAgcmV0dXJuIGlucHV0UHJvdGVjdGlvbkluc3RhbmNlO1xufVxuXG4vKipcbiAqIEdldCBpbnB1dCBwcm90ZWN0aW9uIGluc3RhbmNlXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRJbnB1dFByb3RlY3Rpb24oKTogSW5wdXRQcm90ZWN0aW9uIHwgbnVsbCB7XG4gIHJldHVybiBpbnB1dFByb3RlY3Rpb25JbnN0YW5jZTtcbn1cblxuLyoqXG4gKiBRdWljayB2YWxpZGF0ZSBmdW5jdGlvbiBmb3IgaW5wdXRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHZhbGlkYXRlQ2hhdElucHV0KGlucHV0OiBzdHJpbmcsIGlzUGFzdGUgPSBmYWxzZSk6IElucHV0VmFsaWRhdGlvbiB7XG4gIGNvbnN0IHByb3RlY3Rpb24gPSBpbnB1dFByb3RlY3Rpb25JbnN0YW5jZSA/PyBuZXcgSW5wdXRQcm90ZWN0aW9uKCk7XG4gIHJldHVybiBwcm90ZWN0aW9uLnZhbGlkYXRlSW5wdXQoaW5wdXQsIGlzUGFzdGUpO1xufVxuXG4vKipcbiAqIFZhbGlkYXRlIGZpbmFsIHByb21wdCBiZWZvcmUgc3VibWlzc2lvblxuICovXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVQcm9tcHRTdWJtaXQocHJvbXB0OiBzdHJpbmcpOiBJbnB1dFZhbGlkYXRpb24ge1xuICBjb25zdCBwcm90ZWN0aW9uID0gaW5wdXRQcm90ZWN0aW9uSW5zdGFuY2UgPz8gbmV3IElucHV0UHJvdGVjdGlvbigpO1xuICByZXR1cm4gcHJvdGVjdGlvbi52YWxpZGF0ZVByb21wdFN1Ym1pc3Npb24ocHJvbXB0KTtcbn1cblxuLy8gQXV0by1pbml0aWFsaXplIGlmIGVudmlyb25tZW50IHZhcmlhYmxlIGlzIHNldFxuaWYgKHByb2Nlc3MuZW52WydBR0lfSU5QVVRfUFJPVEVDVElPTiddID09PSAnMScgfHwgcHJvY2Vzcy5lbnZbJ0FHSV9QUk9URUNURURfTU9ERSddID09PSAnMScpIHtcbiAgaW5pdGlhbGl6ZUlucHV0UHJvdGVjdGlvbih7IHZlcmJvc2U6IHByb2Nlc3MuZW52WydBR0lfREVCVUcnXSA9PT0gJzEnIH0pO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBZUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFJQTs7QUFVQTs7QUFTNEI7O0FBRTVCOztBQXNCQTs7QUFNQTtBQUNBLElBQUlDLHVCQUErQyxHQUFHLElBQUk7O0FBRTFEO0FBQ0E7QUFDQTtBQUNPLE1BQU1DLGVBQWUsU0FBU0Msb0JBQVksQ0FBQztFQUV4Q0MsWUFBWSxHQUFrQixFQUFFO0VBQ2hDQyxhQUFhLEdBQUcsQ0FBQztFQUNqQkMsWUFB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