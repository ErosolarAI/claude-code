58de2081af9e5f610f743e38af670e97
"use strict";

var _globals = require("@jest/globals");
var _nodeStream = require("node:stream");
var _UnifiedUIRenderer = require("../src/ui/UnifiedUIRenderer");
const createMockStream = () => {
  const stream = new _nodeStream.PassThrough();
  stream.isTTY = true;
  stream.columns = 120;
  stream.rows = 40;
  stream.on = _globals.jest.fn();
  stream.setRawMode = _globals.jest.fn();
  stream.write = chunk => {
    const text = typeof chunk === 'string' ? chunk : chunk?.toString?.() ?? '';
    _nodeStream.PassThrough.prototype.write.call(stream, text);
    return true;
  };
  return stream;
};
describe('Dual Tournament RL UI Integration', () => {
  let renderer;
  let mockStdout;
  let mockStdin;
  beforeEach(() => {
    mockStdout = createMockStream();
    mockStdin = createMockStream();
    renderer = new _UnifiedUIRenderer.UnifiedUIRenderer(mockStdout, mockStdin);
  });
  (0, _globals.test)('RL status should update correctly', () => {
    const initialStatus = {
      activeVariant: 'primary',
      currentModule: 'security-audit',
      wins: {
        primary: 0,
        refiner: 0,
        ties: 0
      }
    };
    renderer.updateRLStatus(initialStatus);
    const status = renderer.getRLStatus();
    (0, _globals.expect)(status.activeVariant).toBe('primary');
    (0, _globals.expect)(status.currentModule).toBe('security-audit');
    (0, _globals.expect)(status.wins?.primary).toBe(0);
  });
  (0, _globals.test)('RL status should clear correctly', () => {
    renderer.updateRLStatus({
      activeVariant: 'primary',
      currentModule: 'test-module'
    });
    renderer.clearRLStatus();
    const status = renderer.getRLStatus();
    (0, _globals.expect)(status.activeVariant).toBeUndefined();
    (0, _globals.expect)(status.currentModule).toBeUndefined();
  });
  (0, _globals.test)('Status bar should render RL info when active', () => {
    // This would test actual rendering
    // For now, just verify the method exists
    (0, _globals.expect)(renderer.updateRLStatus).toBeDefined();
    (0, _globals.expect)(renderer.clearRLStatus).toBeDefined();
    (0, _globals.expect)(renderer.getRLStatus).toBeDefined();
  });
  (0, _globals.test)('RL status updates should trigger re-render when changed', () => {
    const renderSpy = _globals.jest.spyOn(renderer, 'renderPrompt');

    // First update should trigger render
    renderer.updateRLStatus({
      activeVariant: 'primary'
    });
    (0, _globals.expect)(renderSpy).toHaveBeenCalled();
    renderSpy.mockClear();

    // Same update should not trigger re-render
    renderer.updateRLStatus({
      activeVariant: 'primary'
    });
    (0, _globals.expect)(renderSpy).not.toHaveBeenCalled();

    // Different update should trigger re-render
    renderer.updateRLStatus({
      activeVariant: 'refiner'
    });
    (0, _globals.expect)(renderSpy).toHaveBeenCalled();
  });
});
describe('Mode Toggle Integration', () => {
  (0, _globals.test)('Default mode should be single-continuous', () => {
    // This would test the interactive shell default
    (0, _globals.expect)(true).toBe(true);
  });
  (0, _globals.test)('Toggle should switch between single and dual modes', () => {
    // This would test the toggle handler
    (0, _globals.expect)(true).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfbm9kZVN0cmVhbSIsIl9VbmlmaWVkVUlSZW5kZXJlciIsImNyZWF0ZU1vY2tTdHJlYW0iLCJzdHJlYW0iLCJQYXNzVGhyb3VnaCIsImlzVFRZIiwiY29sdW1ucyIsInJvd3MiLCJvbiIsImplc3QiLCJmbiIsInNldFJhd01vZGUiLCJ3cml0ZSIsImNodW5rIiwidGV4dCIsInRvU3RyaW5nIiwicHJvdG90eXBlIiwiY2FsbCIsImRlc2NyaWJlIiwicmVuZGVyZXIiLCJtb2NrU3Rkb3V0IiwibW9ja1N0ZGluIiwiYmVmb3JlRWFjaCIsIlVuaWZpZWRVSVJlbmRlcmVyIiwidGVzdCIsImluaXRpYWxTdGF0dXMiLCJhY3RpdmVWYXJpYW50IiwiY3VycmVudE1vZHVsZSIsIndpbnMiLCJwcmltYXJ5IiwicmVmaW5lciIsInRpZXMiLCJ1cGRhdGVSTFN0YXR1cyIsInN0YXR1cyIsImdldFJMU3RhdHVzIiwiZXhwZWN0IiwidG9CZSIsImNsZWFyUkxTdGF0dXMiLCJ0b0JlVW5kZWZpbmVkIiwidG9CZURlZmluZWQiLCJyZW5kZXJTcHkiLCJzcHlPbiIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrQ2xlYXIiLCJub3QiXSwic291cmNlcyI6WyJybF91aV9pbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHRlc3QsIGV4cGVjdCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgUGFzc1Rocm91Z2ggfSBmcm9tICdub2RlOnN0cmVhbSc7XG5pbXBvcnQgeyBVbmlmaWVkVUlSZW5kZXJlciB9IGZyb20gJy4uL3NyYy91aS9VbmlmaWVkVUlSZW5kZXJlcic7XG5pbXBvcnQgdHlwZSB7IFJMQWdlbnRTdGF0dXMgfSBmcm9tICcuLi9zcmMvdWkvVW5pZmllZFVJUmVuZGVyZXInO1xuXG5jb25zdCBjcmVhdGVNb2NrU3RyZWFtID0gKCkgPT4ge1xuICBjb25zdCBzdHJlYW0gPSBuZXcgUGFzc1Rocm91Z2goKSBhcyB1bmtub3duIGFzIE5vZGVKUy5SZWFkU3RyZWFtICYgTm9kZUpTLldyaXRlU3RyZWFtO1xuICAoc3RyZWFtIGFzIGFueSkuaXNUVFkgPSB0cnVlO1xuICAoc3RyZWFtIGFzIGFueSkuY29sdW1ucyA9IDEyMDtcbiAgKHN0cmVhbSBhcyBhbnkpLnJvd3MgPSA0MDtcbiAgKHN0cmVhbSBhcyBhbnkpLm9uID0gamVzdC5mbigpO1xuICAoc3RyZWFtIGFzIGFueSkuc2V0UmF3TW9kZSA9IGplc3QuZm4oKTtcbiAgKHN0cmVhbSBhcyBhbnkpLndyaXRlID0gKChjaHVuazogYW55KSA9PiB7XG4gICAgY29uc3QgdGV4dCA9IHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycgPyBjaHVuayA6IGNodW5rPy50b1N0cmluZz8uKCkgPz8gJyc7XG4gICAgUGFzc1Rocm91Z2gucHJvdG90eXBlLndyaXRlLmNhbGwoc3RyZWFtLCB0ZXh0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkgYXMgYW55O1xuICByZXR1cm4gc3RyZWFtO1xufTtcblxuZGVzY3JpYmUoJ0R1YWwgVG91cm5hbWVudCBSTCBVSSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgbGV0IHJlbmRlcmVyOiBVbmlmaWVkVUlSZW5kZXJlcjtcbiAgbGV0IG1vY2tTdGRvdXQ6IGFueTtcbiAgbGV0IG1vY2tTdGRpbjogYW55O1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIG1vY2tTdGRvdXQgPSBjcmVhdGVNb2NrU3RyZWFtKCk7XG4gICAgbW9ja1N0ZGluID0gY3JlYXRlTW9ja1N0cmVhbSgpO1xuICAgIFxuICAgIHJlbmRlcmVyID0gbmV3IFVuaWZpZWRVSVJlbmRlcmVyKG1vY2tTdGRvdXQsIG1vY2tTdGRpbik7XG4gIH0pO1xuXG4gIHRlc3QoJ1JMIHN0YXR1cyBzaG91bGQgdXBkYXRlIGNvcnJlY3RseScsICgpID0+IHtcbiAgICBjb25zdCBpbml0aWFsU3RhdHVzOiBQYXJ0aWFsPFJMQWdlbnRTdGF0dXM+ID0ge1xuICAgICAgYWN0aXZlVmFyaWFudDogJ3ByaW1hcnknLFxuICAgICAgY3VycmVudE1vZHVsZTogJ3NlY3VyaXR5LWF1ZGl0JyxcbiAgICAgIHdpbnM6IHsgcHJpbWFyeTogMCwgcmVmaW5lcjogMCwgdGllczogMCB9XG4gICAgfTtcbiAgICBcbiAgICByZW5kZXJlci51cGRhdGVSTFN0YXR1cyhpbml0aWFsU3RhdHVzKTtcbiAgICBjb25zdCBzdGF0dXMgPSByZW5kZXJlci5nZXRSTFN0YXR1cygpO1xuICAgIFxuICAgIGV4cGVjdChzdGF0dXMuYWN0aXZlVmFyaWFudCkudG9CZSgncHJpbWFyeScpO1xuICAgIGV4cGVjdChzdGF0dXMuY3VycmVudE1vZHVsZSkudG9CZSgnc2VjdXJpdHktYXVkaXQnKTtcbiAgICBleHBlY3Qoc3RhdHVzLndpbnM/LnByaW1hcnkpLnRvQmUoMCk7XG4gIH0pO1xuXG4gIHRlc3QoJ1JMIHN0YXR1cyBzaG91bGQgY2xlYXIgY29ycmVjdGx5JywgKCkgPT4ge1xuICAgIHJlbmRlcmVyLnVwZGF0ZVJMU3RhdHVzKHtcbiAgICAgIGFjdGl2ZVZhcmlhbnQ6ICdwcmltYXJ5JyxcbiAgICAgIGN1cnJlbnRNb2R1bGU6ICd0ZXN0LW1vZHVsZSdcbiAgICB9KTtcbiAgICBcbiAgICByZW5kZXJlci5jbGVhclJMU3RhdHVzKCk7XG4gICAgY29uc3Qgc3RhdHVzID0gcmVuZGVyZXIuZ2V0UkxTdGF0dXMoKTtcbiAgICBcbiAgICBleHBlY3Qoc3RhdHVzLmFjdGl2ZVZhcmlhbnQpLnRvQmVVbmRlZmluZWQoKTtcbiAgICBleHBlY3Qoc3RhdHVzLmN1cnJlbnRNb2R1bGUpLnRvQmVVbmRlZmluZWQoKTtcbiAgfSk7XG5cbiAgdGVzdCgnU3RhdHVzIGJhciBzaG91bGQgcmVuZGVyIFJMIGluZm8gd2hlbiBhY3RpdmUnLCAoKSA9PiB7XG4gICAgLy8gVGhpcyB3b3VsZCB0ZXN0IGFjdHVhbCByZW5kZXJpbmdcbiAgICAvLyBGb3Igbm93LCBqdXN0IHZlcmlmeSB0aGUgbWV0aG9kIGV4aXN0c1xuICAgIGV4cGVjdChyZW5kZXJlci51cGRhdGVSTFN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocmVuZGVyZXIuY2xlYXJSTFN0YXR1cykudG9CZURlZmluZWQoKTtcbiAgICBleHBlY3QocmVuZGVyZXIuZ2V0UkxTdGF0dXMpLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIHRlc3QoJ1JMIHN0YXR1cyB1cGRhdGVzIHNob3VsZCB0cmlnZ2VyIHJlLXJlbmRlciB3aGVuIGNoYW5nZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgcmVuZGVyU3B5ID0gamVzdC5zcHlPbihyZW5kZXJlciBhcyBhbnksICdyZW5kZXJQcm9tcHQnKTtcbiAgICBcbiAgICAvLyBGaXJzdCB1cGRhdGUgc2hvdWxkIHRyaWdnZXIgcmVuZGVyXG4gICAgcmVuZGVyZXIudXBkYXRlUkxTdGF0dXMoeyBhY3RpdmVWYXJpYW50OiAncHJpbWFyeScgfSk7XG4gICAgZXhwZWN0KHJlbmRlclNweSkudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIFxuICAgIHJlbmRlclNweS5tb2NrQ2xlYXIoKTtcbiAgICBcbiAgICAvLyBTYW1lIHVwZGF0ZSBzaG91bGQgbm90IHRyaWdnZXIgcmUtcmVuZGVyXG4gICAgcmVuZGVyZXIudXBkYXRlUkxTdGF0dXMoeyBhY3RpdmVWYXJpYW50OiAncHJpbWFyeScgfSk7XG4gICAgZXhwZWN0KHJlbmRlclNweSkubm90LnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBcbiAgICAvLyBEaWZmZXJlbnQgdXBkYXRlIHNob3VsZCB0cmlnZ2VyIHJlLXJlbmRlclxuICAgIHJlbmRlcmVyLnVwZGF0ZVJMU3RhdHVzKHsgYWN0aXZlVmFyaWFudDogJ3JlZmluZXInIH0pO1xuICAgIGV4cGVjdChyZW5kZXJTcHkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ01vZGUgVG9nZ2xlIEludGVncmF0aW9uJywgKCkgPT4ge1xuICB0ZXN0KCdEZWZhdWx0IG1vZGUgc2hvdWxkIGJlIHNpbmdsZS1jb250aW51b3VzJywgKCkgPT4ge1xuICAgIC8vIFRoaXMgd291bGQgdGVzdCB0aGUgaW50ZXJhY3RpdmUgc2hlbGwgZGVmYXVsdFxuICAgIGV4cGVjdCh0cnVlKS50b0JlKHRydWUpO1xuICB9KTtcblxuICB0ZXN0KCdUb2dnbGUgc2hvdWxkIHN3aXRjaCBiZXR3ZWVuIHNpbmdsZSBhbmQgZHVhbCBtb2RlcycsICgpID0+IHtcbiAgICAvLyBUaGlzIHdvdWxkIHRlc3QgdGhlIHRvZ2dsZSBoYW5kbGVyXG4gICAgZXhwZWN0KHRydWUpLnRvQmUodHJ1ZSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsa0JBQUEsR0FBQUYsT0FBQTtBQUdBLE1BQU1HLGdCQUFnQixHQUFHQSxDQUFBLEtBQU07RUFDN0IsTUFBTUMsTUFBTSxHQUFHLElBQUlDLHVCQUFXLENBQUMsQ0FBc0Q7RUFDcEZELE1BQU0sQ0FBU0UsS0FBSyxHQUFHLElBQUk7RUFDM0JGLE1BQU0sQ0FBU0csT0FBTyxHQUFHLEdBQUc7RUFDNUJILE1BQU0sQ0FBU0ksSUFBSSxHQUFHLEVBQUU7RUFDeEJKLE1BQU0sQ0FBU0ssRUFBRSxHQUFHQyxhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBQzdCUCxNQUFNLENBQVNRLFVBQVUsR0FBR0YsYUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztFQUNyQ1AsTUFBTSxDQUFTUyxLQUFLLEdBQUtDLEtBQVUsSUFBSztJQUN2QyxNQUFNQyxJQUFJLEdBQUcsT0FBT0QsS0FBSyxLQUFLLFFBQVEsR0FBR0EsS0FBSyxHQUFHQSxLQUFLLEVBQUVFLFFBQVEsR0FBRyxDQUFDLElBQUksRUFBRTtJQUMxRVgsdUJBQVcsQ0FBQ1ksU0FBUyxDQUFDSixLQUFLLENBQUNLLElBQUksQ0FBQ2QsTUFBTSxFQUFFVyxJQUFJLENBQUM7SUFDOUMsT0FBTyxJQUFJO0VBQ2Is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