{"version":3,"names":["_globals","require","_nodeStream","_UnifiedUIRenderer","createMockStream","stream","PassThrough","isTTY","columns","rows","on","jest","fn","setRawMode","write","chunk","text","toString","prototype","call","describe","renderer","mockStdout","mockStdin","beforeEach","UnifiedUIRenderer","test","initialStatus","activeVariant","currentModule","wins","primary","refiner","ties","updateRLStatus","status","getRLStatus","expect","toBe","clearRLStatus","toBeUndefined","toBeDefined","renderSpy","spyOn","toHaveBeenCalled","mockClear","not"],"sources":["rl_ui_integration.test.ts"],"sourcesContent":["import { test, expect, jest } from '@jest/globals';\nimport { PassThrough } from 'node:stream';\nimport { UnifiedUIRenderer } from '../src/ui/UnifiedUIRenderer';\nimport type { RLAgentStatus } from '../src/ui/UnifiedUIRenderer';\n\nconst createMockStream = () => {\n  const stream = new PassThrough() as unknown as NodeJS.ReadStream & NodeJS.WriteStream;\n  (stream as any).isTTY = true;\n  (stream as any).columns = 120;\n  (stream as any).rows = 40;\n  (stream as any).on = jest.fn();\n  (stream as any).setRawMode = jest.fn();\n  (stream as any).write = ((chunk: any) => {\n    const text = typeof chunk === 'string' ? chunk : chunk?.toString?.() ?? '';\n    PassThrough.prototype.write.call(stream, text);\n    return true;\n  }) as any;\n  return stream;\n};\n\ndescribe('Dual Tournament RL UI Integration', () => {\n  let renderer: UnifiedUIRenderer;\n  let mockStdout: any;\n  let mockStdin: any;\n\n  beforeEach(() => {\n    mockStdout = createMockStream();\n    mockStdin = createMockStream();\n    \n    renderer = new UnifiedUIRenderer(mockStdout, mockStdin);\n  });\n\n  test('RL status should update correctly', () => {\n    const initialStatus: Partial<RLAgentStatus> = {\n      activeVariant: 'primary',\n      currentModule: 'security-audit',\n      wins: { primary: 0, refiner: 0, ties: 0 }\n    };\n    \n    renderer.updateRLStatus(initialStatus);\n    const status = renderer.getRLStatus();\n    \n    expect(status.activeVariant).toBe('primary');\n    expect(status.currentModule).toBe('security-audit');\n    expect(status.wins?.primary).toBe(0);\n  });\n\n  test('RL status should clear correctly', () => {\n    renderer.updateRLStatus({\n      activeVariant: 'primary',\n      currentModule: 'test-module'\n    });\n    \n    renderer.clearRLStatus();\n    const status = renderer.getRLStatus();\n    \n    expect(status.activeVariant).toBeUndefined();\n    expect(status.currentModule).toBeUndefined();\n  });\n\n  test('Status bar should render RL info when active', () => {\n    // This would test actual rendering\n    // For now, just verify the method exists\n    expect(renderer.updateRLStatus).toBeDefined();\n    expect(renderer.clearRLStatus).toBeDefined();\n    expect(renderer.getRLStatus).toBeDefined();\n  });\n\n  test('RL status updates should trigger re-render when changed', () => {\n    const renderSpy = jest.spyOn(renderer as any, 'renderPrompt');\n    \n    // First update should trigger render\n    renderer.updateRLStatus({ activeVariant: 'primary' });\n    expect(renderSpy).toHaveBeenCalled();\n    \n    renderSpy.mockClear();\n    \n    // Same update should not trigger re-render\n    renderer.updateRLStatus({ activeVariant: 'primary' });\n    expect(renderSpy).not.toHaveBeenCalled();\n    \n    // Different update should trigger re-render\n    renderer.updateRLStatus({ activeVariant: 'refiner' });\n    expect(renderSpy).toHaveBeenCalled();\n  });\n});\n\ndescribe('Mode Toggle Integration', () => {\n  test('Default mode should be single-continuous', () => {\n    // This would test the interactive shell default\n    expect(true).toBe(true);\n  });\n\n  test('Toggle should switch between single and dual modes', () => {\n    // This would test the toggle handler\n    expect(true).toBe(true);\n  });\n});\n"],"mappings":"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","ignoreList":[]}