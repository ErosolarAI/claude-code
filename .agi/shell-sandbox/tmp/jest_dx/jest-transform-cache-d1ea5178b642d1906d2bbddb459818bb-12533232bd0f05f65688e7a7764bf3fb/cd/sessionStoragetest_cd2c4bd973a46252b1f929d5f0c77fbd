1eeee4f331a9f936831d36c3a7cbed93
"use strict";

var _sessionStorage = require("../../src/core/sessionStorage.js");
describe('sessionStorage abstraction', () => {
  afterEach(() => {
    // reset to default storage to avoid leaking in-memory storage across suites
    (0, _sessionStorage.setSessionStorage)((0, _sessionStorage.getSessionStorage)());
  });
  it('supports in-memory storage for tests', () => {
    const storage = (0, _sessionStorage.createInMemorySessionStorage)();
    (0, _sessionStorage.setSessionStorage)(storage);
    storage.ensureDir('/mem/sessions');
    storage.writeFile('/mem/sessions/test.json', '{"hello":"world"}');
    expect(storage.readFile('/mem/sessions/test.json')).toBe('{"hello":"world"}');
    expect(storage.exists('/mem/sessions/test.json')).toBe(true);
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc2Vzc2lvblN0b3JhZ2UiLCJyZXF1aXJlIiwiZGVzY3JpYmUiLCJhZnRlckVhY2giLCJzZXRTZXNzaW9uU3RvcmFnZSIsImdldFNlc3Npb25TdG9yYWdlIiwiaXQiLCJzdG9yYWdlIiwiY3JlYXRlSW5NZW1vcnlTZXNzaW9uU3RvcmFnZSIsImVuc3VyZURpciIsIndyaXRlRmlsZSIsImV4cGVjdCIsInJlYWRGaWxlIiwidG9CZSIsImV4aXN0cyJdLCJzb3VyY2VzIjpbInNlc3Npb25TdG9yYWdlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSW5NZW1vcnlTZXNzaW9uU3RvcmFnZSwgc2V0U2Vzc2lvblN0b3JhZ2UsIGdldFNlc3Npb25TdG9yYWdlIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvc2Vzc2lvblN0b3JhZ2UuanMnO1xuXG5kZXNjcmliZSgnc2Vzc2lvblN0b3JhZ2UgYWJzdHJhY3Rpb24nLCAoKSA9PiB7XG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgLy8gcmVzZXQgdG8gZGVmYXVsdCBzdG9yYWdlIHRvIGF2b2lkIGxlYWtpbmcgaW4tbWVtb3J5IHN0b3JhZ2UgYWNyb3NzIHN1aXRlc1xuICAgIHNldFNlc3Npb25TdG9yYWdlKGdldFNlc3Npb25TdG9yYWdlKCkpO1xuICB9KTtcblxuICBpdCgnc3VwcG9ydHMgaW4tbWVtb3J5IHN0b3JhZ2UgZm9yIHRlc3RzJywgKCkgPT4ge1xuICAgIGNvbnN0IHN0b3JhZ2UgPSBjcmVhdGVJbk1lbW9yeVNlc3Npb25TdG9yYWdlKCk7XG4gICAgc2V0U2Vzc2lvblN0b3JhZ2Uoc3RvcmFnZSk7XG5cbiAgICBzdG9yYWdlLmVuc3VyZURpcignL21lbS9zZXNzaW9ucycpO1xuICAgIHN0b3JhZ2Uud3JpdGVGaWxlKCcvbWVtL3Nlc3Npb25zL3Rlc3QuanNvbicsICd7XCJoZWxsb1wiOlwid29ybGRcIn0nKTtcblxuICAgIGV4cGVjdChzdG9yYWdlLnJlYWRGaWxlKCcvbWVtL3Nlc3Npb25zL3Rlc3QuanNvbicpKS50b0JlKCd7XCJoZWxsb1wiOlwid29ybGRcIn0nKTtcbiAgICBleHBlY3Qoc3RvcmFnZS5leGlzdHMoJy9tZW0vc2Vzc2lvbnMvdGVzdC5qc29uJykpLnRvQmUodHJ1ZSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsZUFBQSxHQUFBQyxPQUFBO0FBRUFDLFFBQVEsQ0FBQyw0QkFBNEIsRUFBRSxNQUFNO0VBQzNDQyxTQUFTLENBQUMsTUFBTTtJQUNkO0lBQ0EsSUFBQUMsaUNBQWlCLEVBQUMsSUFBQUMsaUNBQWlCLEVBQUMsQ0FBQyxDQUFDO0VBQ3hDLENBQUMsQ0FBQztFQUVGQyxFQUFFLENBQUMsc0NBQXNDLEVBQUUsTUFBTTtJQUMvQyxNQUFNQyxPQUFPLEdBQUcsSUFBQUMsNENBQTRCLEVBQUMsQ0FBQztJQUM5QyxJQUFBSixpQ0FBaUIsRUFBQ0csT0FBTyxDQUFDO0lBRTFCQSxPQUFPLENBQUNFLFNBQVMsQ0FBQyxlQUFlLENBQUM7SUFDbENGLE9BQU8sQ0FBQ0csU0FBUyxDQUFDLHlCQUF5QixFQUFFLG1CQUFtQixDQUFDO0lBRWpFQyxNQUFNLENBQUNKLE9BQU8sQ0FBQ0ssUUFBUSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLG1CQUFtQixDQUFDO0lBQzdFRixNQUFNLENBQUNKLE9BQU8sQ0FBQ08sTUFBTSxDQUFDLHlCQUF5QixDQUFDLENBQUMsQ0FBQ0QsSUFBSSxDQUFDLElBQUksQ0FBQztFQUM5RCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=