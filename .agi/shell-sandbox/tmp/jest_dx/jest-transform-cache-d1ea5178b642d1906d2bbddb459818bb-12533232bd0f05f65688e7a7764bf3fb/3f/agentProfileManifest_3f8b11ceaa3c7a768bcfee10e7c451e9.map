{"version":3,"names":["cov_j35icdrla","actualCoverage","getAgentSchemas","manifest","s","f","schemas","rawManifest","contractVersion","version","label","description","profiles","metadata","normalizeManifest","getAgentProfileManifest","raw","isRecord","b","Error","Array","isArray","map","normalizeProfileEntry","length","seen","Set","entry","has","name","add","requireString","optionalString","normalizeRecord","profile","defaultProvider","requireProvider","defaultModel","systemPrompt","normalizePrompt","rulebook","normalizeRulebook","temperature","optionalNumber","maxTokens","optionalInteger","type","normalizeLiteralPrompt","normalizeRulebookPrompt","prompt","content","_profile","template","reference","file","value","resolved","field","trimmed","trim","undefined","Number","isFinite","isInteger","record"],"sources":["agentProfileManifest.ts"],"sourcesContent":["import type {\n  AgentProfileEntry,\n  AgentProfileManifest,\n  AgentPromptConfig,\n  AgentRulebookReference,\n  LiteralPromptConfig,\n  RulebookPromptConfig,\n} from '../contracts/v1/agentProfileManifest.js';\nimport type { ProviderId } from './types.js';\nimport { getAgentSchemas } from './agentSchemaLoader.js';\n\ntype RawProfileManifest = AgentProfileManifest & { $schema?: string };\n\n// Load from centralized schema\nconst manifest = (() => {\n  const schemas = getAgentSchemas();\n  const rawManifest: Partial<RawProfileManifest> = {\n    contractVersion: schemas.contractVersion,\n    version: schemas.version,\n    label: schemas.label,\n    description: schemas.description,\n    profiles: schemas.profiles,\n    metadata: schemas.metadata,\n  };\n  return normalizeManifest(rawManifest);\n})();\n\nexport function getAgentProfileManifest(): AgentProfileManifest {\n  return manifest;\n}\n\nfunction normalizeManifest(raw: Partial<RawProfileManifest>): AgentProfileManifest {\n  if (!isRecord(raw)) {\n    throw new Error('Agent profile manifest is malformed: expected an object.');\n  }\n\n  const profiles = Array.isArray(raw.profiles) ? raw.profiles.map(normalizeProfileEntry) : null;\n  if (!profiles?.length) {\n    throw new Error('Agent profile manifest must include at least one profile entry.');\n  }\n\n  const seen = new Set<string>();\n  for (const entry of profiles) {\n    if (seen.has(entry.name)) {\n      throw new Error(`Agent profile manifest contains duplicate profile id \"${entry.name}\".`);\n    }\n    seen.add(entry.name);\n  }\n\n  const manifest: AgentProfileManifest = {\n    contractVersion: requireString(raw.contractVersion, 'contractVersion'),\n    version: requireString(raw.version, 'version'),\n    profiles,\n  };\n\n  const label = optionalString(raw.label);\n  if (label) {\n    manifest.label = label;\n  }\n  const description = optionalString(raw.description);\n  if (description) {\n    manifest.description = description;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    manifest.metadata = metadata;\n  }\n\n  return manifest;\n}\n\nfunction normalizeProfileEntry(raw: AgentProfileEntry): AgentProfileEntry {\n  const name = requireString(raw.name, 'profile.name');\n  const profile: AgentProfileEntry = {\n    name,\n    label: requireString(raw.label, `profiles[\"${name}\"].label`),\n    defaultProvider: requireProvider(raw.defaultProvider, name),\n    defaultModel: requireString(raw.defaultModel, `profiles[\"${name}\"].defaultModel`),\n    systemPrompt: normalizePrompt(raw.systemPrompt, name),\n    rulebook: normalizeRulebook(raw.rulebook, name),\n  };\n\n  const description = optionalString(raw.description);\n  if (description) {\n    profile.description = description;\n  }\n  const temperature = optionalNumber(raw.temperature, `profiles[\"${name}\"].temperature`);\n  if (typeof temperature === 'number') {\n    profile.temperature = temperature;\n  }\n  const maxTokens = optionalInteger(raw.maxTokens, `profiles[\"${name}\"].maxTokens`);\n  if (typeof maxTokens === 'number') {\n    profile.maxTokens = maxTokens;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    profile.metadata = metadata;\n  }\n\n  return profile;\n}\n\nfunction normalizePrompt(raw: AgentPromptConfig | undefined, profile: string): AgentPromptConfig {\n  if (!isRecord(raw)) {\n    throw new Error(`Profile \"${profile}\" is missing a valid systemPrompt definition.`);\n  }\n\n  if (raw.type === 'literal') {\n    return normalizeLiteralPrompt(raw, profile);\n  }\n\n  if (raw.type === 'rulebook') {\n    return normalizeRulebookPrompt(raw, profile);\n  }\n\n  throw new Error(`Profile \"${profile}\" has an unsupported systemPrompt type.`);\n}\n\nfunction normalizeLiteralPrompt(raw: LiteralPromptConfig, profile: string): LiteralPromptConfig {\n  const prompt: LiteralPromptConfig = {\n    type: 'literal',\n    content: requireString(raw.content, `profiles[\"${profile}\"].systemPrompt.content`),\n  };\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    prompt.metadata = metadata;\n  }\n  return prompt;\n}\n\nfunction normalizeRulebookPrompt(raw: RulebookPromptConfig, _profile: string): RulebookPromptConfig {\n  const prompt: RulebookPromptConfig = { type: 'rulebook' };\n  const template = optionalString(raw.template);\n  if (template) {\n    prompt.template = template;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    prompt.metadata = metadata;\n  }\n  return prompt;\n}\n\nfunction normalizeRulebook(raw: AgentRulebookReference | undefined, profile: string): AgentRulebookReference {\n  if (!isRecord(raw)) {\n    throw new Error(`Profile \"${profile}\" is missing a valid rulebook reference.`);\n  }\n  const reference: AgentRulebookReference = {\n    file: requireString(raw.file, `profiles[\"${profile}\"].rulebook.file`),\n  };\n  const version = optionalString(raw.version);\n  if (version) {\n    reference.version = version;\n  }\n  const contractVersion = optionalString(raw.contractVersion);\n  if (contractVersion) {\n    reference.contractVersion = contractVersion;\n  }\n  const description = optionalString(raw.description);\n  if (description) {\n    reference.description = description;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    reference.metadata = metadata;\n  }\n  return reference;\n}\n\nfunction requireProvider(value: unknown, profile: string): ProviderId {\n  const resolved = requireString(value, `profiles[\"${profile}\"].defaultProvider`);\n  return resolved as ProviderId;\n}\n\nfunction requireString(value: unknown, field: string): string {\n  if (typeof value !== 'string') {\n    throw new Error(`Agent profile manifest is missing required field \"${field}\".`);\n  }\n  const trimmed = value.trim();\n  if (!trimmed) {\n    throw new Error(`Agent profile manifest field \"${field}\" cannot be blank.`);\n  }\n  return trimmed;\n}\n\nfunction optionalString(value: unknown): string | undefined {\n  if (typeof value !== 'string') {\n    return undefined;\n  }\n  const trimmed = value.trim();\n  return trimmed.length ? trimmed : undefined;\n}\n\nfunction optionalNumber(value: unknown, field: string): number | undefined {\n  if (value === undefined) {\n    return undefined;\n  }\n  if (typeof value !== 'number' || !Number.isFinite(value)) {\n    throw new Error(`Agent profile manifest field \"${field}\" must be a finite number when provided.`);\n  }\n  return value;\n}\n\nfunction optionalInteger(value: unknown, field: string): number | undefined {\n  if (value === undefined) {\n    return undefined;\n  }\n  if (typeof value !== 'number' || !Number.isInteger(value) || value <= 0) {\n    throw new Error(`Agent profile manifest field \"${field}\" must be a positive integer when provided.`);\n  }\n  return value;\n}\n\nfunction normalizeRecord(record: unknown): Record<string, unknown> | undefined {\n  if (!isRecord(record)) {\n    return undefined;\n  }\n  return { ...record };\n}\n\nfunction isRecord(value: unknown): value is Record<string, unknown> {\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}