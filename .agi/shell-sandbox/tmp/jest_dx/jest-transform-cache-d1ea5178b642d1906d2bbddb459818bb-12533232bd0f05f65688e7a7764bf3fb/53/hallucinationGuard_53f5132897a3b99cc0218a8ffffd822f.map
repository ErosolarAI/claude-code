{"version":3,"names":["cov_v4snxhzg6","actualCoverage","existsSync","HallucinationGuard","workingDir","knownFacts","s","Map","constructor","options","b","f","process","cwd","validateFileOperation","toolName","args","existingContent","checks","toolLower","toLowerCase","oldString","filePath","similarity","calculateContentSimilarity","push","type","confidence","riskLevel","message","Math","round","suggestion","includes","pattern","isOverlyBroadPattern","query","containsFactClaim","generateReport","validateGeneratedCode","code","_context","placeholderPatterns","matches","match","slice","join","importPatterns","imports","imp","registerFact","fact","source","key","set","checkFactContradiction","claim","claimLower","entries","split","factLower","areContradictory","a","wordsA","Set","wordsB","intersection","filter","x","has","union","size","broadPatterns","some","p","test","text","factIndicators","words","word","contradictions","length","overallRisk","confidenceScore","riskScores","confidenceScores","totalRisk","maxRisk","check","riskScore","max","averageRisk","min","enhanceWithHallucinationGuard","guard"],"sources":["hallucinationGuard.ts"],"sourcesContent":["/**\n * Hallucination Guard - Advanced validation to minimize AI hallucinations\n * \n * Features:\n * 1. Content validation before edits\n * 2. Fact verification for web search results\n * 3. Confidence scoring for AI outputs\n * 4. Cross-referencing with existing knowledge\n */\n\nimport { existsSync } from 'node:fs';\n\nexport interface HallucinationCheck {\n  type: 'content_guess' | 'fact_claim' | 'code_pattern' | 'file_existence';\n  confidence: 'high' | 'medium' | 'low';\n  riskLevel: 'critical' | 'warning' | 'info';\n  message: string;\n  suggestion: string;\n}\n\nexport interface HallucinationReport {\n  checks: HallucinationCheck[];\n  overallRisk: 'critical' | 'warning' | 'safe';\n  confidenceScore: number; // 0-100\n}\n\n/**\n * Validate AI content for hallucinations before execution\n */\nexport class HallucinationGuard {\n  private readonly workingDir: string;\n  private readonly knownFacts: Map<string, number> = new Map();\n\n  constructor(options: { workingDir?: string } = {}) {\n    this.workingDir = options.workingDir ?? process.cwd();\n  }\n\n  /**\n   * Validate file operations for hallucinations\n   */\n  validateFileOperation(\n    toolName: string,\n    args: Record<string, unknown>,\n    existingContent?: string\n  ): HallucinationReport {\n    const checks: HallucinationCheck[] = [];\n    const toolLower = toolName.toLowerCase();\n\n    // === Edit Tool Validation ===\n    if (toolLower === 'edit') {\n      const oldString = args['old_string'] as string | undefined;\n      const filePath = args['file_path'] as string | undefined;\n\n      // Check 1: Edit without existing content reference\n      if (oldString && existingContent) {\n        const similarity = this.calculateContentSimilarity(oldString, existingContent);\n        if (similarity < 0.5) {\n          checks.push({\n            type: 'content_guess',\n            confidence: 'high',\n            riskLevel: 'critical',\n            message: `Low content similarity (${Math.round(similarity * 100)}%) - AI may be guessing file content`,\n            suggestion: 'Verify exact file content matches old_string. Use Read tool to confirm.',\n          });\n        }\n      }\n\n      // Check 2: File existence validation\n      if (filePath && !existsSync(filePath) && oldString) {\n        checks.push({\n          type: 'file_existence',\n          confidence: 'high',\n          riskLevel: 'warning',\n          message: `Editing non-existent file: ${filePath}`,\n          suggestion: 'Check if file exists before editing. Use empty old_string for new file creation.',\n        });\n      }\n    }\n\n    // === Search Operations ===\n    if (toolLower.includes('search') || toolLower.includes('grep')) {\n      const pattern = args['pattern'] as string | undefined;\n      if (pattern && this.isOverlyBroadPattern(pattern)) {\n        checks.push({\n          type: 'code_pattern',\n          confidence: 'medium',\n          riskLevel: 'warning',\n          message: `Search pattern '${pattern}' is very broad and may produce overwhelming results`,\n          suggestion: 'Use more specific patterns or add file type filters.',\n        });\n      }\n    }\n\n    // === Web Operations ===\n    if (toolLower.includes('web') || toolLower.includes('search')) {\n      const query = args['query'] as string | undefined;\n      if (query && this.containsFactClaim(query)) {\n        checks.push({\n          type: 'fact_claim',\n          confidence: 'low',\n          riskLevel: 'info',\n          message: 'Query contains factual claims that should be verified',\n          suggestion: 'Cross-reference results with authoritative sources.',\n        });\n      }\n    }\n\n    return this.generateReport(checks);\n  }\n\n  /**\n   * Validate AI-generated code for common hallucination patterns\n   */\n  validateGeneratedCode(code: string, _context?: string): HallucinationReport {\n    const checks: HallucinationCheck[] = [];\n\n    // Check for placeholder patterns\n    const placeholderPatterns = [\n      /\\{\\{.*?\\}\\}/g,      // {{variable}}\n      /\\[\\[.*?\\]\\]/g,      // [[placeholder]]\n      /<TODO>/gi,          // <TODO>\n      /FIXME/gi,           // FIXME (in generated code)\n    ];\n\n    for (const pattern of placeholderPatterns) {\n      const matches = code.match(pattern);\n      if (matches) {\n        checks.push({\n          type: 'content_guess',\n          confidence: 'high',\n          riskLevel: 'critical',\n          message: `Placeholder patterns found in generated code: ${matches.slice(0, 3).join(', ')}`,\n          suggestion: 'Replace placeholders with actual implementation based on context.',\n        });\n      }\n    }\n\n    // Check for unrealistic imports\n    const importPatterns = [\n      /import\\s+.*\\s+from\\s+['\"][@\\w\\-/]+['\"]/g,\n    ];\n    \n    const imports = code.match(importPatterns[0]) || [];\n    for (const imp of imports) {\n      if (imp.includes('undefined-package') || imp.includes('example-library')) {\n        checks.push({\n          type: 'code_pattern',\n          confidence: 'medium',\n          riskLevel: 'warning',\n          message: `Suspicious import pattern: ${imp}`,\n          suggestion: 'Verify package names and availability in the project.',\n        });\n      }\n    }\n\n    return this.generateReport(checks);\n  }\n\n  /**\n   * Register known facts from previous operations to cross-reference\n   */\n  registerFact(fact: string, source: string, confidence: number): void {\n    const key = `${source}:${fact}`;\n    this.knownFacts.set(key, confidence);\n  }\n\n  /**\n   * Check if a claim contradicts known facts\n   */\n  checkFactContradiction(claim: string): HallucinationCheck | null {\n    const claimLower = claim.toLowerCase();\n    \n    for (const [key, confidence] of this.knownFacts.entries()) {\n      const [, fact] = key.split(':');\n      const factLower = fact.toLowerCase();\n      \n      // Simple contradiction detection\n      if (this.areContradictory(claimLower, factLower)) {\n        return {\n          type: 'fact_claim',\n          confidence: confidence > 0.7 ? 'high' : 'medium',\n          riskLevel: 'warning',\n          message: `Claim contradicts previously established fact: ${fact}`,\n          suggestion: 'Verify information consistency across operations.',\n        };\n      }\n    }\n    \n    return null;\n  }\n\n  private calculateContentSimilarity(a: string, b: string): number {\n    // Simple similarity calculation for validation\n    const wordsA = new Set(a.toLowerCase().split(/\\s+/));\n    const wordsB = new Set(b.toLowerCase().split(/\\s+/));\n    \n    const intersection = new Set([...wordsA].filter(x => wordsB.has(x)));\n    const union = new Set([...wordsA, ...wordsB]);\n    \n    return union.size > 0 ? intersection.size / union.size : 0;\n  }\n\n  private isOverlyBroadPattern(pattern: string): boolean {\n    // Patterns that match everything\n    const broadPatterns = [\n      /^.*$/,\n      /^\\.*$/,\n      /^\\w*$/,\n      /^[a-zA-Z]*$/,\n    ];\n    \n    return broadPatterns.some(p => p.test(pattern));\n  }\n\n  private containsFactClaim(text: string): boolean {\n    const factIndicators = [\n      'is', 'are', 'was', 'were', 'will be',\n      'has', 'have', 'had',\n      'can', 'cannot', 'could', 'would',\n      'always', 'never', 'every', 'all',\n      'true', 'false', 'correct', 'incorrect',\n    ];\n    \n    const words = text.toLowerCase().split(/\\s+/);\n    return words.some(word => factIndicators.includes(word));\n  }\n\n  private areContradictory(claim: string, fact: string): boolean {\n    // Simple contradiction detection\n    const contradictions = [\n      ['is', 'is not'],\n      ['has', 'has no'],\n      ['can', 'cannot'],\n      ['true', 'false'],\n      ['always', 'never'],\n    ];\n    \n    return contradictions.some(([a, b]) => \n      (claim.includes(a) && fact.includes(b)) || \n      (claim.includes(b) && fact.includes(a))\n    );\n  }\n\n  private generateReport(checks: HallucinationCheck[]): HallucinationReport {\n    if (checks.length === 0) {\n      return {\n        checks: [],\n        overallRisk: 'safe',\n        confidenceScore: 100,\n      };\n    }\n\n    const riskScores = {\n      'critical': 3,\n      'warning': 2,\n      'info': 1,\n    };\n\n    const confidenceScores = {\n      'high': 1.0,\n      'medium': 0.7,\n      'low': 0.3,\n    };\n\n    let totalRisk = 0;\n    let maxRisk = 0;\n    \n    for (const check of checks) {\n      const riskScore = riskScores[check.riskLevel];\n      const confidence = confidenceScores[check.confidence];\n      \n      totalRisk += riskScore * confidence;\n      maxRisk = Math.max(maxRisk, riskScore * confidence);\n    }\n\n    const averageRisk = totalRisk / checks.length;\n    const overallRisk = averageRisk >= 2.5 ? 'critical' : averageRisk >= 1.5 ? 'warning' : 'safe';\n    \n    // Confidence score: 100 - (risk * 20)\n    const confidenceScore = Math.max(0, Math.min(100, 100 - (averageRisk * 20)));\n\n    return {\n      checks,\n      overallRisk,\n      confidenceScore,\n    };\n  }\n}\n\n/**\n * Enhanced validation that integrates with existing tool runtime\n */\nexport function enhanceWithHallucinationGuard(\n  toolName: string,\n  args: Record<string, unknown>,\n  existingContent?: string\n): HallucinationReport {\n  const guard = new HallucinationGuard();\n  return guard.validateFileOperation(toolName, args, existingContent);\n}"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}