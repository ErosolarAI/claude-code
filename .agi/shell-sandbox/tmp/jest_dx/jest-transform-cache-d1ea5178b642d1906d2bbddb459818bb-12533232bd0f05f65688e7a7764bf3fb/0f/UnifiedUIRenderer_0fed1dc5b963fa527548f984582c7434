a87aff411ad4bbe2dc130c9e70e1ca20
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
exports.createBanner = createBanner;
exports.createSecurityBanner = createSecurityBanner;
exports.createSecuritySpinner = createSecuritySpinner;
exports.formatAuditProgress = formatAuditProgress;
exports.formatProgress = formatProgress;
exports.formatSecureToolsSummary = formatSecureToolsSummary;
exports.formatSecurityFinding = formatSecurityFinding;
exports.formatSecurityStatus = formatSecurityStatus;
exports.formatSecuritySummary = formatSecuritySummary;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _uiConstants = require("./uiConstants.js");
var _richText = require("./richText.js");
var _inputProtection = require("../core/inputProtection.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt â†’ thought â†’ tool/build/test â†’ response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

// UI helper methods for security components
function createBanner(title, subtitle) {
  const lines = [];
  lines.push(_chalk.default.cyan('â•”' + 'â•'.repeat(68) + 'â•—'));
  lines.push(_chalk.default.cyan('â•‘ ') + _chalk.default.cyan.bold(title.padEnd(66)) + _chalk.default.cyan(' â•‘'));
  if (subtitle) {
    lines.push(_chalk.default.cyan('â•‘ ') + _chalk.default.white(subtitle.padEnd(66)) + _chalk.default.cyan(' â•‘'));
  }
  lines.push(_chalk.default.cyan('â•š' + 'â•'.repeat(68) + 'â•'));
  return lines.join('\n');
}
function formatProgress(phase, step, totalSteps) {
  const percentage = Math.round(step / totalSteps * 100);
  const progressBar = 'â–ˆ'.repeat(Math.floor(percentage / 5)) + 'â–‘'.repeat(20 - Math.floor(percentage / 5));
  return `${_chalk.default.cyan('â ‹')} ${_chalk.default.white(phase)}: [${_chalk.default.green(progressBar)}] ${percentage}% (${step}/${totalSteps})`;
}

// Apple Security UI compatibility methods (replaces AppleSecurityUI.ts)
function createSecurityBanner(title, subtitle) {
  const width = 70;
  const lines = [];
  lines.push(_chalk.default.cyan('â•'.repeat(width)));
  lines.push(`${_chalk.default.cyan('ðŸ›¡ï¸')} ${_chalk.default.cyan.bold(title.toUpperCase())}`);
  if (subtitle) {
    lines.push(_chalk.default.gray(`  ${subtitle}`));
  }
  lines.push(_chalk.default.cyan('â•'.repeat(width)));
  return lines.join('\n');
}
function createSecuritySpinner(message) {
  return `${_chalk.default.cyan('â ‹')} ${_chalk.default.white(message)}`;
}
function formatSecurityFinding(finding) {
  const severityColors = {
    critical: _chalk.default.redBright,
    high: _chalk.default.red,
    medium: _chalk.default.yellow,
    low: _chalk.default.blue,
    info: _chalk.default.gray
  };
  const severityIcons = {
    critical: _chalk.default.redBright('âš '),
    high: _chalk.default.red('â–²'),
    medium: _chalk.default.yellow('â–²'),
    low: _chalk.default.blue('â–¼'),
    info: _chalk.default.gray('â„¹')
  };
  const color = severityColors[finding.severity] || _chalk.default.white;
  const icon = severityIcons[finding.severity] || _chalk.default.gray('â„¹');
  const lines = [];
  lines.push(`${icon} ${color.bold(finding.name || finding.type || 'Finding')}`);
  lines.push(`  ${_chalk.default.gray('Description:')} ${_chalk.default.white(finding.description || 'No description')}`);
  if (finding.evidence) {
    lines.push(`  ${_chalk.default.gray('Evidence:')} ${_chalk.default.white(finding.evidence)}`);
  }
  if (finding.remediation) {
    lines.push(`  ${_chalk.default.gray('Remediation:')} ${_chalk.default.green(finding.remediation)}`);
  }
  return lines.join('\n');
}
function formatSecuritySummary(results) {
  const lines = [];
  lines.push(_chalk.default.cyan('â•'.repeat(70)));
  lines.push(`${_chalk.default.cyan('ðŸ›¡ï¸')} ${_chalk.default.cyan.bold('SECURITY AUDIT SUMMARY')}`);
  lines.push(_chalk.default.cyan('â•'.repeat(70)));
  lines.push(`  ${_chalk.default.gray('Campaign:')} ${_chalk.default.white(results.campaign || 'Unknown')}`);
  lines.push(`  ${_chalk.default.gray('Start Time:')} ${_chalk.default.white(results.startTime || 'Unknown')}`);
  if (results.endTime) {
    lines.push(`  ${_chalk.default.gray('End Time:')} ${_chalk.default.white(results.endTime)}`);
  }
  if (results.duration) {
    lines.push(`  ${_chalk.default.gray('Duration:')} ${_chalk.default.white(`${results.duration}ms`)}`);
  }
  if (results.findings && Array.isArray(results.findings)) {
    const counts = {
      critical: 0,
      high: 0,
      medium: 0,
      low: 0,
      info: 0
    };
    results.findings.forEach(f => {
      counts[f.severity] = (counts[f.severity] || 0) + 1;
    });
    lines.push(`  ${_chalk.default.gray('Findings:')}`);
    Object.entries(counts).forEach(([severity, count]) => {
      if (count > 0) {
        const color = severityColors[severity] || _chalk.default.white;
        lines.push(`    ${color(`${severity.toUpperCase()}:`)} ${_chalk.default.white(count)}`);
      }
    });
    lines.push(`    ${_chalk.default.gray('Total:')} ${_chalk.default.white(results.findings.length)}`);
  }
  return lines.join('\n');
}
function formatSecurityStatus(status, details) {
  const statusIcons = {
    healthy: `${_chalk.default.green('â—')}`,
    degraded: `${_chalk.default.yellow('â—')}`,
    unavailable: `${_chalk.default.red('â—')}`
  };
  const icon = statusIcons[status] || _chalk.default.gray('â—');
  return `${icon} ${_chalk.default.white(details)}`;
}
function formatAuditProgress(phase, progress, total) {
  const percentage = Math.round(progress / total * 100);
  const filled = Math.round(percentage / 10);
  const empty = 10 - filled;
  const progressBar = `${_chalk.default.green('â–ˆ'.repeat(filled))}${_chalk.default.gray('â–‘'.repeat(empty))}`;
  return `${_chalk.default.gray('â±')} ${_chalk.default.cyan('Security Audit')} - ${_chalk.default.white(phase)}\n` + `  ${progressBar} ${_chalk.default.white(`${progress}/${total}`)} ${_chalk.default.gray(`(${percentage}%)`)}`;
}

/**
 * Format a security tools summary message for display.
 * Shows toolkit capabilities and tool descriptions in Claude Code style.
 */
function formatSecureToolsSummary(options) {
  const lines = [];
  const showTitle = options?.showTitle ?? true;
  if (showTitle) {
    lines.push(`${_chalk.default.white('âº')} ${_chalk.default.white('Added new security tools and improved')}`);
    lines.push(`  ${_chalk.default.white('existing ones for more versatile')}`);
    lines.push(`  ${_chalk.default.white('operations.')}`);
  }
  const defaultTools = [{
    name: 'Execute',
    description: 'secure shell commands',
    status: 'active'
  }, {
    name: 'Probe',
    description: 'target analysis',
    status: 'active'
  }, {
    name: 'State',
    description: 'session management',
    status: 'active'
  }];
  const tools = options?.tools || defaultTools;
  const toolParts = tools.map(tool => {
    const statusIcon = tool.status === 'active' ? _chalk.default.green('â—') : tool.status === 'ready' ? _chalk.default.yellow('â—‹') : _chalk.default.gray('â—‹');
    return `${statusIcon} ${_chalk.default.cyan(`'${tool.name}'`)} for ${_chalk.default.white(tool.description)}`;
  });
  if (toolParts.length > 0) {
    lines.push(`  ${_chalk.default.white("You now have")} ${toolParts[0]},`);
    for (let i = 1; i < toolParts.length - 1; i++) {
      lines.push(`  ${toolParts[i]},`);
    }
    if (toolParts.length > 1) {
      lines.push(`  ${_chalk.default.white('and')} ${toolParts[toolParts.length - 1]}â€”`);
    }
    lines.push(`  ${_chalk.default.white('each with enhanced output formatting.')}`);
  }
  lines.push(`  ${_chalk.default.gray('This expands your toolkit\'s capabilities')}`);
  lines.push(`  ${_chalk.default.gray('while maintaining strict input sanitization')}`);
  lines.push(`  ${_chalk.default.gray('and security.')}`);
  lines.push(`  ${_chalk.default.gray('(src/capabilities/maxOffensiveUkraineCapability.ts)')}`);
  return lines.join('\n');
}
const severityColors = {
  critical: text => _chalk.default.hex('#FF6B6B')(text),
  // redBright
  high: text => _chalk.default.hex('#FF5252')(text),
  // red
  medium: text => _chalk.default.hex('#FFD93D')(text),
  // yellow
  low: text => _chalk.default.hex('#4D96FF')(text),
  // blue
  info: text => _chalk.default.hex('#AAAAAA')(text) // gray
};

/**
 * Interactive menu item for Claude Code style menus.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

/**
 * Attack operation status for real-time display during offensive security operations.
 */

/**
 * Security tools status for real-time display of secure TAO tools.
 * Tracks Execute, Probe, State tools with enhanced output formatting.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = 'â†µ';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  output;
  input;
  rl;
  plainMode;
  interactive;
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  /** Queue for input received during streaming - processed after streaming ends */
  streamingInputQueue = [];
  /** Buffer to accumulate streaming content for post-processing */
  streamingContentBuffer = '';
  /** Track lines written during streaming for potential reformat */
  streamingLinesWritten = 0;
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  contextMeter;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['âœ»', 'âœ¼', 'âœ»', 'âœº'];

  // Animated activity line (e.g., "âœ³ Ruminatingâ€¦ (esc to interrupt Â· 34s Â· â†‘1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['âœ³', 'âœ´', 'âœµ', 'âœ¶', 'âœ·', 'âœ¸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    alphaZeroEnabled: false,
    // Normal mode by default, toggle for AlphaZero dual tournament RL
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  /** Secure TAO tools status for real-time display */
  secureToolsStatus = {
    toolkitReady: true,
    sanitizationActive: true,
    totalInvocations: 0
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences and special formatting from text to get clean plaintext */
  sanitizePasteContent(text) {
    if (!text) return '';

    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    let sanitized = text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
    // Also remove partial bracketed paste markers that may have leaked (e.g., "[200~" without ESC)
    sanitized = sanitized.replace(/\[20[01]~/g, '');
    // Remove any stray escape character at start/end
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/^\x1b+|\x1b+$/g, '');

    // Strip toggle symbols that might have leaked through
    // This is a safety net - primary removal happens in stripToggleSymbols
    const isToggleCharacter = ch => {
      if (!ch || ch.length !== 1) return false;
      const code = ch.charCodeAt(0);
      if (code === 169 || code === 8482) return true; // Â© â„¢ (Option+G)
      if (code === 229 || code === 197) return true; // Ã¥ Ã… (Option+A)
      if (code === 8706 || code === 8710 || code === 206) return true; // âˆ‚ âˆ† ÃŽ (Option+D)
      if (code === 8224 || code === 8225) return true; // â€  â€¡ (Option+T)
      if (code === 8730) return true; // âˆš (Option+V)
      return false;
    };
    const chars = [...sanitized];
    let result = '';
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      if (isToggleCharacter(ch)) {
        continue;
      }
      result += ch;
    }
    sanitized = result;

    // Strip special formatting characters for clean plaintext:
    // - Zero-width characters (ZWSP, ZWNJ, ZWJ, BOM/ZWNBSP)
    // - Word joiner, invisible separator, invisible times/plus
    // - Directional formatting (LRM, RLM, LRE, RLE, LRO, RLO, PDF, LRI, RLI, FSI, PDI)
    // - Object replacement character
    // - Soft hyphen
    // - Non-breaking space variants (NBSP, narrow NBSP, figure space, etc.)
    sanitized = sanitized.replace(/[\u200B-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\u00AD\uFFFC]/g, '');

    // Normalize various space characters to regular space
    // Includes: NBSP, en/em space, thin space, hair space, figure space, etc.
    sanitized = sanitized.replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g, ' ');

    // Remove control characters except tab, newline, carriage return
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g, '');
    return sanitized;
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 80; // Increased for more robust multi-line paste detection
  plainPasteWindowMs = 120; // Increased window for paste burst detection
  plainPasteTriggerChars = 16; // Lower threshold to catch multi-line pastes sooner
  plainPasteEarlyNewlineChars = 1; // Immediate detection of multi-line content
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 16; // Reduced from 80ms for faster typing response
  // Emit-level paste detection - accumulate all rapid input then commit
  emitPasteBuffer = '';
  emitPasteTimer = null;
  emitPasteCommitMs = 30; // Commit after 30ms of no input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Performance: Cache last rendered state to skip unnecessary renders
  lastRenderedBuffer = '';
  forceNextRender = false;
  lastRenderedCursor = 0;
  lastRenderedMode = 'idle';
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Initialization state - skip prompt renders until first banner is shown
  initializing = true;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  boundDataHandler = null;
  boundCtrlHandler = null;
  // Original emit method for restoration on cleanup
  originalEmit = null;
  inputProtection = null;
  inputCapture = null;

  // Interactive menu state (Claude Code style)
  menuItems = [];
  menuIndex = 0;
  menuTitle = null;
  menuCallback = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();

    // Set up error handling for EventEmitter
    this.on('error', err => {
      // Log errors but don't crash
      console.error('[UnifiedUIRenderer] Error:', err);
    });
    this.output = output;
    this.input = input;

    // Robust TTY detection with multiple fallbacks
    const outputIsTTY = Boolean(this.output?.isTTY);
    const inputIsTTY = Boolean(this.input?.isTTY);
    this.interactive = outputIsTTY && inputIsTTY;
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components with error handling
    try {
      this.contextMeter = new _animatedStatus.ContextMeter();
    } catch {
      // Create a no-op context meter if initialization fails
      this.contextMeter = new _animatedStatus.ContextMeter();
    }

    // Create readline interface with error handling
    try {
      this.rl = readline.createInterface({
        input: this.input,
        output: this.output,
        terminal: true,
        prompt: '',
        tabSize: 2
      });
      this.rl.setPrompt('');
    } catch (err) {
      // If readline creation fails, create a minimal fallback
      console.error('[UnifiedUIRenderer] Failed to create readline interface:', err);
      this.rl = readline.createInterface({
        input: process.stdin,
        output: process.stdout,
        terminal: false
      });
      this.interactive = false;
      this.plainMode = true;
    }
    this.updateTerminalSize();

    // Initialize input protection against remote attacks
    this.inputProtection = (0, _inputProtection.initializeInputProtection)({
      verbose: process.env['AGI_DEBUG'] === '1',
      onAttackDetected: (type, details) => {
        // Log attack but don't disrupt user experience
        if (process.env['AGI_DEBUG']) {
          console.error(`[InputProtection] Attack detected: ${type} - ${details}`);
        }
      }
    });

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        try {
          this.updateTerminalSize();
          this.renderPrompt();
        } catch {
          // Silently ignore resize errors
        }
      }
    };

    // Safely add resize handler
    try {
      this.output.on('resize', this.boundResizeHandler);
    } catch {
      // Ignore if event listener can't be added
    }
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }

    // Reset input and paste state to prevent stale state from previous session
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.collapsedPaste = null;
    this.pendingInsertBuffer = '';
    this.cancelPlainPasteCapture();
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;

    // Wrap all cleanup in try-catch to ensure graceful shutdown
    try {
      this.cancelInputCapture(new Error('Renderer disposed'));
    } catch {/* ignore */}
    try {
      this.cancelPlainPasteCapture();
    } catch {/* ignore */}

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      try {
        clearTimeout(this.renderThrottleTimer);
      } catch {/* ignore */}
      this.renderThrottleTimer = null;
    }

    // Stop any running animations with error handling
    if (this.spinnerInterval) {
      try {
        clearInterval(this.spinnerInterval);
      } catch {/* ignore */}
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      try {
        this.streamingSpinner.stop();
      } catch {/* ignore */}
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      try {
        this.thinkingIndicator.stop();
      } catch {/* ignore */}
      this.thinkingIndicator = null;
    }
    try {
      this.contextMeter.dispose();
    } catch {/* ignore */}
    try {
      (0, _animatedStatus.disposeAnimations)();
    } catch {/* ignore */}

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      try {
        this.output.removeListener('resize', this.boundResizeHandler);
      } catch {/* ignore */}
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      try {
        this.input.removeListener('keypress', this.boundKeypressHandler);
      } catch {/* ignore */}
      this.boundKeypressHandler = null;
    }
    if (this.boundDataHandler) {
      try {
        this.input.removeListener('data', this.boundDataHandler);
      } catch {/* ignore */}
      this.boundDataHandler = null;
    }
    if (this.boundCtrlHandler) {
      try {
        this.input.removeListener('data', this.boundCtrlHandler);
      } catch {/* ignore */}
      this.boundCtrlHandler = null;
    }

    // Restore original emit method on stdin
    if (this.originalEmit) {
      try {
        // eslint-disable-next-line @typescript-eslint/no-explicit-any
        this.input.emit = this.originalEmit;
      } catch {/* ignore */}
      this.originalEmit = null;
    }

    // Remove all EventEmitter listeners from this instance
    try {
      this.removeAllListeners();
    } catch {/* ignore */}
    if (!this.interactive) {
      try {
        this.rl.close();
      } catch {/* ignore */}
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      try {
        this.clearPromptArea();
        this.write(ESC.DISABLE_BRACKETED_PASTE);
        this.write(ESC.SHOW_CURSOR);
        this.write('\n');
      } catch {/* ignore */}
    }
    try {
      if (this.input.isTTY) {
        this.input.setRawMode(false);
      }
    } catch {/* ignore */}
    try {
      this.rl.close();
    } catch {/* ignore */}
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  // Track special keys intercepted at the raw data level
  interceptedToggle = null;
  interceptedCtrlC = false;
  interceptedCtrlD = false;
  pendingToggleSkips = 0;
  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');

    // CRITICAL: Override the emit method on stdin to intercept data events
    // BEFORE any listener (including readline) sees them. This is the ONLY
    // way to truly prevent control characters from being echoed.
    const self = this;
    this.originalEmit = this.input.emit.bind(this.input);

    // eslint-disable-next-line @typescript-eslint/no-explicit-any
    this.input.emit = function (event, ...args) {
      if (event === 'data' && !self.disposed) {
        const data = args[0];
        const str = Buffer.isBuffer(data) ? data.toString('utf8') : String(data || '');
        const code = str ? str.charCodeAt(0) : 0;
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] EMIT INTERCEPT: event="${event}" str="${str}" code=${code} len=${str.length}`);
        }

        // BLOCK: Ctrl+C (code 3) - handle and suppress
        if (code === 3) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] CTRL+C BLOCKED AT EMIT LEVEL`);
          }
          // Use setImmediate to handle after this event loop tick
          setImmediate(() => self.handleCtrlC());
          return true; // Suppress the event
        }

        // BLOCK: Ctrl+D (code 4) - handle and suppress
        if (code === 4) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] CTRL+D BLOCKED AT EMIT LEVEL`);
          }
          setImmediate(() => self.handleCtrlD());
          return true; // Suppress the event
        }

        // BLOCK: Direct single-char toggle detection (most common case)
        // Check the first char code directly for speed and reliability
        let directToggle = null;
        if (str.length === 1) {
          if (code === 169 || code === 8482) directToggle = 'g'; // Â© â„¢
          else if (code === 229 || code === 197) directToggle = 'a'; // Ã¥ Ã…
          else if (code === 8706 || code === 8710 || code === 206) directToggle = 'd'; // âˆ‚ âˆ† ÃŽ
          else if (code === 8224 || code === 8225) directToggle = 't'; // â€  â€¡
          else if (code === 8730) directToggle = 'v'; // âˆš
        }
        // Also check ESC+letter (2-char sequence)
        if (!directToggle && code === 27 && str.length === 2) {
          const letter = str.charAt(1).toLowerCase();
          if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
            directToggle = letter;
          }
        }
        if (directToggle) {
          // Handle immediately (not in setImmediate to ensure it runs)
          self.handleToggle(directToggle);
          return true; // Suppress the event
        }

        // BLOCK: Multi-char toggle detection (for paste scenarios)
        const toggles = self.extractToggleLetters(str);
        if (toggles.length > 0) {
          if (process.env['AGI_DEBUG_KEYS']) {
            console.error(`[KEY] TOGGLE MULTI DETECT: ${toggles.join(',')}`);
          }
          for (const letter of toggles) {
            self.handleToggle(letter);
          }
          return true; // Suppress the event
        }

        // PASTE DETECTION at emit level: Multi-char data = paste
        // When user types, each character arrives separately
        // When user pastes, all characters arrive as one chunk OR rapidly
        // Check for bracketed paste markers first
        const pasteStartMarker = '\x1b[200~';
        const pasteEndMarker = '\x1b[201~';
        const hasBracketedStart = str.includes(pasteStartMarker);
        const hasBracketedEnd = str.includes(pasteEndMarker);

        // Handle bracketed paste (terminal sends markers)
        if (hasBracketedStart || hasBracketedEnd || self.inBracketedPaste) {
          // Let the regular bracketed paste handler deal with it
          // Fall through to readline
        }
        // Detect plain paste: multi-char, has printable content, not escape sequence
        // This is handled by the buffer logic below, so we can remove this special case
        // The buffer logic at the bottom handles both single-char and multi-char
        // Buffer ALL input (including multi-char chunks) and commit after idle
        // This catches paste whether terminal sends it as one chunk or char-by-char
        const isPrintable = c => c >= 32 && c < 127 || c > 127; // ASCII printable or Unicode
        const isNewline = c => c === 10 || c === 13;
        const inPasteBurst = self.emitPasteBuffer.length > 0;

        // PASTE DETECTION: Only buffer when we detect paste-like input
        // - Multi-char string (definitely paste - terminal sent chunk)
        // - Continuation of existing paste burst
        // For single chars, let them through immediately for responsive typing
        let shouldBuffer = false;

        // Multi-char non-escape = definitely paste
        if (str.length > 1 && !str.startsWith('\x1b')) {
          shouldBuffer = true;
        }
        // Continue buffering if we're already in a paste burst
        else if (inPasteBurst && str.length === 1 && (isPrintable(code) || isNewline(code))) {
          shouldBuffer = true;
        }
        if (shouldBuffer) {
          // Add to buffer (strip any toggle symbols that might have slipped through)
          const cleaned = self.stripToggleSymbols(str);
          if (!cleaned) return true; // Was only toggle chars
          self.emitPasteBuffer += cleaned;

          // Clear existing timer
          if (self.emitPasteTimer) {
            clearTimeout(self.emitPasteTimer);
          }

          // Set timer to commit after idle
          self.emitPasteTimer = setTimeout(() => {
            self.commitEmitPasteBuffer();
          }, self.emitPasteCommitMs);
          return true; // Suppress - we're buffering
        }
        // Single char when NOT in paste burst = normal typing, let through
        // Newline when not in burst = Enter key, let through

        // NOTE: Do NOT block other control characters here!
        // Backspace (8/127), Tab (9), Enter (13), arrows (27+seq) must pass through
        // for normal editing to work. Only Ctrl+C/D and toggles are intercepted above.
      }

      // Allow all other events to pass through
      return self.originalEmit(event, ...args);
    };

    // Now set up readline's keypress emission
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }

    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }

  /**
   * Detect toggle characters from raw input data before readline processing.
   * Returns the toggle letter (g, a, d, t, v) or null if not a toggle.
   */
  detectToggleFromRawData(input) {
    if (!input) return null;
    const code = input.charCodeAt(0);

    // Unicode characters from "Option sends Unicode" mode
    if (code === 169 || code === 8482) return 'g'; // Â© â„¢
    if (code === 229 || code === 197) return 'a'; // Ã¥ Ã…
    if (code === 8706 || code === 8710 || code === 206) return 'd'; // âˆ‚ âˆ† ÃŽ
    if (code === 8224 || code === 8225) return 't'; // â€  â€¡
    if (code === 8730) return 'v'; // âˆš

    // ESC + letter from "Option sends Meta" mode
    if (code === 27 && input.length === 2) {
      const letter = input.charAt(1).toLowerCase();
      if (['g', 'a', 'd', 't', 'v'].includes(letter)) return letter;
    }
    return null;
  }

  /**
   * Extract all toggle letters from an arbitrary chunk of input data.
   * Handles both Unicode toggles and ESC-prefixed Meta sequences, and
   * supports multiple toggles in a single data event.
   */
  extractToggleLetters(input) {
    if (!input) return [];
    const toggles = [];
    const chars = [...input];
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      const code = ch.charCodeAt(0);

      // Detect ESC + letter (Option sends Meta)
      if (code === 27 && i + 1 < chars.length) {
        const letter = chars[i + 1].toLowerCase();
        if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
          toggles.push(letter);
          i++; // Skip the meta letter so it isn't double-counted
          continue;
        }
      }
      const detected = this.detectToggleFromRawData(ch);
      if (detected) {
        toggles.push(detected);
      }
    }
    return toggles;
  }

  /**
   * Remove toggle symbols (and their ESC prefixes) from a string so they
   * can never leak into the prompt buffer.
   */
  stripToggleSymbols(input) {
    if (!input) return '';
    const chars = [...input];
    let result = '';
    for (let i = 0; i < chars.length; i++) {
      const ch = chars[i];
      const code = ch.charCodeAt(0);

      // Drop Unicode toggle characters outright
      if (this.isToggleCharacter(ch)) {
        continue;
      }

      // Drop ESC + toggle letter (Option sends Meta)
      // Also handle case where ESC might be followed by [ (CSI sequence start)
      if (code === 27) {
        if (i + 1 < chars.length) {
          const letter = chars[i + 1].toLowerCase();
          if (['g', 'a', 'd', 't', 'v'].includes(letter)) {
            i++; // Skip the meta letter as well
            continue;
          }
          // Also drop ESC + '[' (CSI sequence start) to prevent partial escape sequences
          if (chars[i + 1] === '[') {
            i++; // Skip the '[' as well
            // Skip any digits, semicolons, and the final character
            while (i + 1 < chars.length && /[0-9;]/.test(chars[i + 1])) {
              i++;
            }
            if (i + 1 < chars.length) {
              i++; // Skip the final character (A-Z, a-z, ~, etc.)
            }
            continue;
          }
        }
      }
      result += ch;
    }
    return result;
  }

  /**
   * Check if a character is a toggle character that should never be inserted.
   * Used as a safety guard to prevent toggle symbols from appearing in input.
   */
  isToggleCharacter(input) {
    if (!input || input.length !== 1) return false;
    const code = input.charCodeAt(0);
    // Unicode toggle characters
    if (code === 169 || code === 8482) return true; // Â© â„¢ (Option+G)
    if (code === 229 || code === 197) return true; // Ã¥ Ã… (Option+A)
    if (code === 8706 || code === 8710 || code === 206) return true; // âˆ‚ âˆ† ÃŽ (Option+D)
    if (code === 8224 || code === 8225) return true; // â€  â€¡ (Option+T)
    if (code === 8730) return true; // âˆš (Option+V)
    return false;
  }

  /**
   * Handle a detected toggle action. Called from both raw data interception
   * and keypress processing for reliability.
   */
  handleToggle(letter) {
    // Clear any pending insert buffer so the symbol never lands in the prompt
    this.pendingInsertBuffer = '';
    // Cancel any plain paste detection in progress
    this.cancelPlainPasteCapture();

    // Force immediate render for toggles - works during streaming
    const forceRender = () => {
      if (this.mode === 'streaming') {
        this.renderPromptImmediate();
      } else {
        this.renderPrompt();
      }
    };
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] TOGGLE HANDLING: ${letter}`);
    }
    switch (letter) {
      case 'a':
        this.emit('toggle-critical-approval');
        forceRender();
        break;
      case 'g':
        this.emit('toggle-auto-continue');
        forceRender();
        break;
      case 'd':
        this.emit('toggle-alphazero');
        forceRender();
        break;
      case 't':
        this.emit('toggle-thinking');
        forceRender();
        break;
      case 'v':
        // Option+V: Available for future toggle
        break;
    }
  }

  /**
   * Handle Ctrl+C detected at raw data level.
   * Bypasses readline's keypress parsing for reliability.
   */
  handleCtrlC() {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] HANDLING CTRL+C`);
    }

    // If we're in input capture mode, cancel it first
    if (this.inputCapture) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Ctrl+C behavior:
    // 1. If buffer has text: clear it first, then notify shell
    // 2. If buffer is empty: let shell decide to pause AI or quit
    const hadBuffer = this.buffer.length > 0;
    if (hadBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    // Emit ctrlc event with buffer state so shell can handle appropriately
    this.emit('ctrlc', {
      hadBuffer
    });
  }

  /**
   * Handle Ctrl+D detected at raw data level.
   * Bypasses readline's keypress parsing for reliability.
   */
  handleCtrlD() {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] HANDLING CTRL+D`);
    }

    // If we're in input capture mode, cancel it first
    if (this.inputCapture) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Ctrl+D: interrupt if buffer is empty
    if (this.buffer.length === 0) {
      this.emit('interrupt');
    }
  }

  /**
   * Commit buffered emit-level input after idle period.
   * Decides whether to treat as paste (collapse) or normal typing (insert).
   */
  commitEmitPasteBuffer() {
    const content = this.emitPasteBuffer;
    this.emitPasteBuffer = '';
    this.emitPasteTimer = null;
    if (!content) return;
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] COMMIT EMIT BUFFER: ${content.length} chars`);
    }

    // Sanitize content
    let sanitized = this.sanitizePasteContent(content);
    sanitized = sanitized.replace(/\r\n?/g, '\n');

    // Input protection validation
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        return;
      }
      sanitized = validation.sanitized;
    }
    if (!sanitized) return;
    const lines = sanitized.split('\n');
    const isMultiLine = lines.length > 1;
    const isLongContent = sanitized.length > 100; // Lower threshold for better UX

    // Multi-line or long content: show collapsed indicator
    if (isMultiLine || isLongContent) {
      // Combine with existing collapsed paste if any
      if (this.collapsedPaste) {
        sanitized = this.collapsedPaste.text + sanitized;
        const newLines = sanitized.split('\n');
        this.collapsedPaste = {
          text: sanitized,
          lines: newLines.length,
          chars: sanitized.length
        };
      } else {
        this.collapsedPaste = {
          text: sanitized,
          lines: lines.length,
          chars: sanitized.length
        };
        this.buffer = '';
        this.cursor = 0;
      }
      this.updateSuggestions();
      this.forceNextRender = true;
      this.renderPrompt();
      this.emitInputChange();
    } else {
      // Short single-line content: insert directly as if typed
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.insertSingleLineText(sanitized);
    }
  }

  /**
   * Handle paste detected at emit level (multi-char data arriving at once).
   * This bypasses readline processing for reliable paste detection.
   */
  handleEmitLevelPaste(content) {
    if (process.env['AGI_DEBUG_KEYS']) {
      console.error(`[KEY] EMIT PASTE HANDLING: ${content.length} chars`);
    }

    // Sanitize content (remove control chars, normalize line endings)
    let sanitized = this.sanitizePasteContent(content);
    sanitized = sanitized.replace(/\r\n?/g, '\n');

    // Input protection validation
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        return;
      }
      sanitized = validation.sanitized;
    }
    if (!sanitized) return;
    const lines = sanitized.split('\n');
    const isMultiLine = lines.length > 1;
    const isLongContent = sanitized.length > 200;

    // Multi-line or long content: show collapsed indicator
    if (isMultiLine || isLongContent) {
      // Clear any existing collapsed paste first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.collapsedPaste = {
        text: sanitized,
        lines: lines.length,
        chars: sanitized.length
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.forceNextRender = true;
      this.renderPrompt();
      this.emitInputChange();
    } else {
      // Short single-line content: insert directly as if typed
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      this.insertSingleLineText(sanitized);
    }
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Skip processing if a raw-level toggle was already handled for this keypress
    if (this.pendingToggleSkips > 0) {
      this.pendingToggleSkips--;
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] SKIP KEYPRESS (pending toggle)`);
      }
      return;
    }

    // BLOCK: If Ctrl+C/D was intercepted at raw level, it's already handled
    if (this.interceptedCtrlC || this.interceptedCtrlD) {
      return; // Already handled in raw data handler
    }

    // BLOCK: If toggle was intercepted at raw level, it's already handled
    if (this.interceptedToggle) {
      this.interceptedToggle = null;
      return; // Already handled in raw data handler
    }

    // BLOCK: Check character code directly for special keys
    const code = str ? str.charCodeAt(0) : 0;
    if (code === 3) {
      // Ctrl+C
      this.handleCtrlC();
      return;
    }
    if (code === 4) {
      // Ctrl+D
      this.handleCtrlD();
      return;
    }

    // BLOCK: Check for toggle characters directly
    if (str && this.isToggleCharacter(str)) {
      this.handleToggle(this.detectToggleFromRawData(str));
      return;
    }

    // Debug: log entry parameters to understand what readline is sending
    if (process.env['AGI_DEBUG_KEYS']) {
      const keyInfo = key ? `name=${key.name} ctrl=${key.ctrl} meta=${key.meta} shift=${key.shift} seq=${key.sequence ? JSON.stringify(key.sequence) : 'null'}` : 'null';
      console.error(`[KEY] ENTRY: str=${str ? JSON.stringify(str) : 'null'} code=${code} key={${keyInfo}}`);
    }
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);

    // CRITICAL: Handle Ctrl+C and Ctrl+D FIRST - must ALWAYS work to quit/interrupt
    // This is checked before ANY other processing to ensure it can never be blocked
    if (normalizedKey?.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      // If we're in input capture mode, cancel it first
      if (this.inputCapture) {
        this.cancelInputCapture(new Error('Input capture cancelled'));
        this.clearBuffer();
        return;
      }
      if (normalizedKey.name === 'c') {
        // Ctrl+C behavior:
        // 1. If buffer has text: clear it first, then notify shell
        // 2. If buffer is empty: let shell decide to pause AI or quit
        const hadBuffer = this.buffer.length > 0;
        if (hadBuffer) {
          this.buffer = '';
          this.cursor = 0;
          this.inputRenderOffset = 0;
          this.resetSuggestions();
          this.renderPrompt();
          this.emitInputChange();
        }
        // Emit ctrlc event with buffer state so shell can handle appropriately
        this.emit('ctrlc', {
          hadBuffer
        });
        return;
      }
      if (normalizedKey.name === 'd') {
        // Ctrl+D: interrupt if buffer is empty
        if (this.buffer.length === 0) {
          this.emit('interrupt');
        }
        return;
      }
    }

    // Handle macOS Option+key toggles BEFORE any paste detection
    // Check multiple sources: str, key.sequence, and key.meta+key.name
    // This is a fallback - primary detection happens in the raw 'data' event handler

    // Check str first
    let toggleLetter = this.detectToggleFromRawData(str);

    // Also check key.sequence if str didn't match (readline may transform the input)
    if (!toggleLetter && key?.sequence) {
      toggleLetter = this.detectToggleFromRawData(key.sequence);
      if (toggleLetter && process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] TOGGLE DETECTED via key.sequence: ${toggleLetter}`);
      }
    }
    if (toggleLetter) {
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] TOGGLE DETECTED (keypress fallback): ${toggleLetter}`);
      }
      this.handleToggle(toggleLetter);
      return;
    }

    // Also check meta+key pattern if str/sequence didn't match
    if (normalizedKey?.meta && normalizedKey.name) {
      const metaLetter = normalizedKey.name.toLowerCase();
      if (['g', 'a', 'd', 't', 'v'].includes(metaLetter)) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] TOGGLE DETECTED (meta key): ${metaLetter}`);
        }
        this.handleToggle(metaLetter);
        return;
      }
    }
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }
    if (!normalizedKey) {
      return;
    }

    // inputCapture Ctrl+C/D is handled at the top of handleKeypress

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-alphazero');
      } else if (letter === 't') {
        this.emit('toggle-thinking');
      }
      // Force immediate render during streaming to ensure toggle state is visible
      if (this.mode === 'streaming') {
        this.renderPromptImmediate();
      } else {
        this.renderPrompt();
      }
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('t')) {
      handleCtrlShiftToggle('t');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }

    // Ctrl+C and Ctrl+D are handled at the top of handleKeypress for guaranteed execution

    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // Check for slash command completion first (works in both streaming and non-streaming modes)
      if (this.applySuggestion(true)) return;

      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }

      // During streaming, queue the input for processing after AI completes
      if (this.mode === 'streaming') {
        const queuedInput = this.streamingInputQueue.join('').trim();
        if (queuedInput) {
          this.emit('queue', queuedInput);
          this.streamingInputQueue = [];
        }
        // Also submit current buffer if it has content
        if (this.buffer.trim()) {
          this.submitText(this.buffer);
        }
        return;
      }

      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      // Reset any paste detection state to ensure clean render
      this.resetPlainPasteBurst();
      this.cancelPlainPasteCapture();
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      // Reset any paste detection state to ensure clean render
      this.resetPlainPasteBurst();
      this.cancelPlainPasteCapture();
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely (similar to backspace)
        this.collapsedPaste = null;
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Menu navigation (Claude Code style) - intercepts keys when menu is active
    if (this.isMenuActive()) {
      if (normalizedKey.name === 'up') {
        this.navigateMenu(-1);
        return;
      }
      if (normalizedKey.name === 'down') {
        this.navigateMenu(1);
        return;
      }
      if (normalizedKey.name === 'return') {
        this.selectMenuItem();
        return;
      }
      if (normalizedKey.name === 'escape') {
        this.closeMenu();
        return;
      }
      // Other keys close menu without selection
      if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
        this.closeMenu();
        // Don't return - let the key be processed normally
      }
    }
    if (normalizedKey.name === 'left') {
      // Reset paste state to ensure clean render
      this.resetPlainPasteBurst();
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      // Reset paste state to ensure clean render
      this.resetPlainPasteBurst();
      // If there's a collapsed paste, expand it first
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
      }
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.forceNextRender = true;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // SAFETY: Final guard to prevent toggle characters from ever being inserted
      // This should never trigger if earlier detection works, but acts as a safety net
      if (this.isToggleCharacter(str)) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error(`[KEY] BLOCKED toggle character from insertion: "${str}" code=${str.charCodeAt(0)}`);
        }
        return;
      }

      // Queue text input during streaming - process after AI completes
      if (this.mode === 'streaming') {
        this.streamingInputQueue.push(str);
        return;
      }
      // Debug: trace why toggle didn't catch this character
      if (process.env['AGI_DEBUG_KEYS']) {
        const code = str.charCodeAt(0);
        console.error(`[KEY] QUEUE INSERT: str="${str}" code=${code}`);
      }
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    // If toggle characters slipped through, handle them here and strip them before insertion
    const toggles = this.extractToggleLetters(text);
    if (toggles.length > 0) {
      for (const letter of toggles) {
        this.handleToggle(letter);
      }
      text = this.stripToggleSymbols(text);
      if (!text) {
        if (process.env['AGI_DEBUG_KEYS']) {
          console.error('[KEY] QUEUE INSERT DROPPED: toggle-only input');
        }
        return;
      }
    }

    // Fast-path: single printable ASCII character with no pending buffer = immediate insert
    // This makes normal typing feel instant while still detecting multi-char pastes
    // BUT: skip fast path if burst activity suggests incoming paste
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    if (text.length === 1 && this.pendingInsertBuffer === '' && !this.inPlainPaste && !this.inBracketedPaste && !burstActive && text.charCodeAt(0) >= 32 && text.charCodeAt(0) < 127) {
      this.insertText(text);
      return;
    }
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   * If we reach here, paste detection didn't trigger, so this is normal typing.
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      // Reset burst state BEFORE inserting so render isn't suppressed
      // If paste detection didn't trigger, this is just fast typing, not a paste
      this.resetPlainPasteBurst();
      this.plainRecentChunks = [];
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      // Consume and sanitize pending buffer to prevent partial escape sequences leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      // Extract content after the start marker (discard any content before it - likely partial escapes)
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume and sanitize any pending insert buffer to prevent partial escapes leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      this.pasteBuffer = pending;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    let sanitized = this.sanitizePasteContent(this.pasteBuffer);

    // Input protection validation against remote paste attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        // Paste blocked - reset state and abort
        this.inBracketedPaste = false;
        this.pasteBuffer = '';
        this.pasteBufferOverflow = false;
        return;
      }
      sanitized = validation.sanitized;
    }
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }

    // Don't treat escape sequences (arrow keys, etc.) as paste
    // Escape sequences start with \x1b (ESC) and are used for cursor movement, etc.
    if (typeof str === 'string' && str.startsWith('\x1b')) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    let sanitized = this.sanitizePasteContent(this.plainPasteBuffer);

    // Input protection validation against remote paste attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(sanitized, true);
      if (validation.blocked) {
        // Paste blocked - reset state and abort
        this.inPlainPaste = false;
        this.plainPasteBuffer = '';
        this.plainRecentChunks = [];
        this.resetPlainPasteBurst();
        this.pasteBufferOverflow = false;
        return;
      }
      sanitized = validation.sanitized;
    }
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;

    // SAFETY NET: Filter out any toggle or control characters that slipped through
    // This should never happen if earlier detection works, but acts as final guard
    const filtered = [...text].filter(c => {
      const code = c.charCodeAt(0);
      // Block ALL control characters (0-31) and DEL (127)
      // This includes Ctrl+C (3), Ctrl+D (4), ESC (27), etc.
      if (code < 32 || code === 127) return false;
      // Block toggle characters (Option+G/A/D/T/V Unicode)
      if (this.isToggleCharacter(c)) return false;
      return true;
    }).join('');
    if (!filtered) {
      if (process.env['AGI_DEBUG_KEYS']) {
        console.error(`[KEY] INSERT TEXT BLOCKED: all chars filtered from "${text}"`);
      }
      return;
    }
    text = filtered;

    // Debug: trace what's being inserted
    if (process.env['AGI_DEBUG_KEYS']) {
      const code = text.charCodeAt(0);
      console.error(`[KEY] INSERT TEXT: "${text}" code=${code}`);
    }

    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }

    // Input protection validation against remote attacks
    if (this.inputProtection) {
      const validation = this.inputProtection.validateInput(text, false);
      if (validation.blocked) {
        // Input blocked - silently drop to prevent attack
        return;
      }
      if (validation.sanitized !== text) {
        // Use sanitized version
        text = validation.sanitized;
        if (!text) return;
      }
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Sanitize input to remove special formatting characters
    const sanitized = this.sanitizePasteContent(text);
    if (!sanitized) return;

    // Handle multi-line text by collapsing to single line for normal input
    const hasNewlines = sanitized.includes('\n');
    if (hasNewlines) {
      // For multi-line text in normal insertion, collapse to single line with spaces
      const collapsed = sanitized.replace(/\r\n|\r|\n/g, ' ');
      this.insertSingleLineText(collapsed);
    } else {
      this.insertSingleLineText(sanitized);
    }
  }
  insertSingleLineText(text) {
    if (!text) return;
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    // Suppress render during paste detection to prevent visual leak
    const inEmitPaste = this.emitPasteBuffer.length > 0 || this.emitPasteTimer !== null;
    if (!this.inPlainPaste && !this.inBracketedPaste && !inEmitPaste) {
      this.renderPrompt();
    }
    this.emitInputChange();
  }
  submitText(text) {
    const isBufferSource = text === this.buffer;

    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }

    // Ensure any deferred input has been committed before submission
    this.commitPendingInsert();
    if (isBufferSource) {
      text = this.buffer;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    let normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Final prompt validation before submission to AI
    if (this.inputProtection) {
      const validation = this.inputProtection.validatePromptSubmission(normalized);
      if (validation.blocked) {
        // Prompt blocked - don't submit
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        return;
      }
      normalized = validation.sanitized;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  /** Track last added event to prevent duplicates */
  lastAddedEventSignature = '';
  addEvent(type, content) {
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;

    // Deduplicate events at the source to prevent duplicate display
    // Skip deduplication for prompts (user input should always show)
    if (normalized !== 'prompt') {
      const signature = `${normalized}:${content}`;
      if (signature === this.lastAddedEventSignature) {
        return; // Skip duplicate event
      }
      this.lastAddedEventSignature = signature;
    }
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // Note: For prompt events, the overlay is already rendered in renderEvent()
        // via renderPromptOverlay(true). No need to render again here.
        if (event.type === 'prompt') {
          // Ensure prompt rendering is allowed for subsequent events
          if (this.output.isTTY) {
            this.allowPromptRender = true;
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    // Clear initialization flag when first banner is displayed
    // This allows prompt rendering to begin after the welcome banner
    if (event.rawType === 'banner' && this.initializing) {
      this.initializing = false;
    }
    if (this.plainMode) {
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    if (!formatted) return;

    // Deduplicate streaming and response content to prevent duplicates
    const signature = `${event.rawType}:${event.content}`;
    if ((event.type === 'stream' || event.type === 'response') && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: âš¡ToolName â†’ result
          const content = event.content.replace(/^[âºâš™â—‹]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: â””â”€ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        {
          // Streaming content is the model's response - pass through directly
          // IMPORTANT: Don't filter streaming chunks with isGarbageOutput because:
          // 1. Chunks arrive character-by-character or in small pieces
          // 2. Small chunks like "." or ":" are valid parts of sentences
          // 3. Filtering would break the streaming display
          // Only filter completely empty content
          if (!event.content) {
            return '';
          }
          // Accumulate streaming content for potential post-processing
          this.streamingContentBuffer += event.content;
          // Track newlines for line counting
          const newlines = (event.content.match(/\n/g) || []).length;
          this.streamingLinesWritten += newlines;
          return event.content;
        }
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;
    const trimmed = content.trim();

    // Very short content checks - catch leaked punctuation fragments like "." or ":"
    if (trimmed.length <= 3) {
      // Single punctuation marks or very short punctuation sequences are garbage
      if (/^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$]+$/.test(trimmed)) {
        return true;
      }
    }

    // Check if content is just punctuation on multiple lines (leaked reasoning)
    const lines = content.split('\n');
    const punctOnlyLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      return lineTrimmed.length > 0 && /^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$\s]+$/.test(lineTrimmed);
    });
    // If ALL non-empty lines are just punctuation, it's garbage
    const nonEmptyLines = lines.filter(l => l.trim().length > 0);
    if (nonEmptyLines.length > 0 && punctOnlyLines.length === nonEmptyLines.length) {
      return true;
    }

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: mostly punctuation/symbols - leaked reasoning fragments
    const meaningfulLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      if (!lineTrimmed) return false;
      // Line must have at least 30% alphanumeric content
      const alphaNum = (lineTrimmed.match(/[a-zA-Z0-9]/g) || []).length;
      return lineTrimmed.length > 0 && alphaNum / lineTrimmed.length >= 0.3;
    });
    // If less than 30% of lines are meaningful, it's garbage
    if (lines.length > 3 && meaningfulLines.length / lines.length < 0.3) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.4) {
      return true; // Less than 40% letters = likely garbage
    }
    return false;
  }

  /**
   * Sanitize tool result content to remove leaked reasoning/thinking output.
   * This filters out fragments that look like internal model output.
   */
  sanitizeToolResultContent(content) {
    if (!content) return '';

    // Split into lines and filter out garbage lines
    const lines = content.split('\n');
    const cleanLines = [];
    for (const line of lines) {
      const trimmed = line.trim();

      // Skip empty lines at start
      if (cleanLines.length === 0 && !trimmed) continue;

      // Skip lines that look like leaked reasoning fragments
      // Common patterns: single punctuation, markdown artifacts, emoji fragments
      if (/^[)\]}>*`'"]+$/.test(trimmed)) continue;
      if (/^[*_]{2,}$/.test(trimmed)) continue; // Just ** or __
      if (/^[|â”‚â”ƒ]+$/.test(trimmed)) continue; // Just vertical bars
      if (/^[â”€â”â•]+$/.test(trimmed)) continue; // Just horizontal lines
      if (/^\.{2,}$/.test(trimmed)) continue; // Just dots
      if (/^[\sï¸]+$/.test(trimmed)) continue; // Just whitespace/emoji modifiers
      if (/^[:\s]+$/.test(trimmed)) continue; // Just colons/whitespace
      if (/^[,\s]+$/.test(trimmed)) continue; // Just commas/whitespace

      // Skip markdown bold/italic fragments that leaked
      if (/^\*{1,2}[^*]*\*{0,2}$/.test(trimmed) && trimmed.length < 10 && !/\w{3,}/.test(trimmed)) continue;

      // Skip lines that are just short fragments with high punctuation ratio
      const alphaInLine = (trimmed.match(/[a-zA-Z0-9]/g) || []).length;
      if (trimmed.length > 0 && trimmed.length < 20 && alphaInLine / trimmed.length < 0.3) continue;

      // Skip very short lines that are just punctuation or single chars (except numbers)
      if (trimmed.length <= 2 && !/^\d+$/.test(trimmed) && !/^[a-zA-Z]{2}$/.test(trimmed)) {
        // Allow specific short patterns like "OK", "0", "1" etc.
        if (!/^(?:ok|no|yes|\d+)$/i.test(trimmed)) continue;
      }

      // Skip lines that look like stray parentheses or brackets from reasoning
      if (/^[()[\]{}]+$/.test(trimmed)) continue;

      // Skip lines that look like markdown code fence artifacts
      if (/^```\s*$/.test(trimmed)) continue;
      cleanLines.push(line);
    }

    // Trim trailing empty lines
    while (cleanLines.length > 0 && !cleanLines[cleanLines.length - 1]?.trim()) {
      cleanLines.pop();
    }
    return cleanLines.join('\n').trim();
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[â€¢*âºâ—‹\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([â€¢*âºâ—‹-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `â€¢ ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*â€¢]\s/.test(line) || line.includes('->') || line.includes('â†’') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:â†’]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    const normalizedLower = normalized.toLowerCase();

    // Exact duplicate detection
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalizedLower) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }

    // Semantic duplicate detection - check if new thought is a subset of previous thought
    if (this.lastCuratedThought) {
      const previous = this.lastCuratedThought.text;
      const current = normalizedLower;

      // If current thought contains most of previous thought (or vice versa), it's likely a duplicate
      const wordsPrevious = previous.split(/\s+/).filter(w => w.length > 3);
      const wordsCurrent = current.split(/\s+/).filter(w => w.length > 3);
      if (wordsPrevious.length > 0 && wordsCurrent.length > 0) {
        const sharedWords = wordsCurrent.filter(word => wordsPrevious.includes(word));
        const similarity = sharedWords.length / Math.max(wordsPrevious.length, wordsCurrent.length);

        // If similarity > 70% and within time window, filter it out
        if (similarity > 0.7 && now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
          return false;
        }
      }
    }

    // Filter out very short or trivial thoughts
    const wordCount = normalizedLower.split(/\s+/).filter(w => w.length > 2).length;
    if (wordCount < 3 && normalizedLower.length < 30) {
      // Too short to be meaningful
      return false;
    }

    // Filter out common meaningless patterns
    const meaninglessPatterns = [/^i(?:'?ll?)?\s+(?:will\s+)?(?:now\s+)?(?:proceed|continue|go|move|start)/i, /^(?:let me|i will|i'll|i am|i'm)\s+(?:check|look|see|examine|review|analyze)/i, /^proceeding\s+(?:with|to)/i, /^continuing\s+(?:with|to)/i, /^moving\s+(?:on|forward|to)/i, /^starting\s+(?:with|to)/i, /^now\s+(?:i|let me|we|let's)/i, /^(?:ok|alright|well)\s*,?\s*(?:now|then|so|let)/i];
    for (const pattern of meaninglessPatterns) {
      if (pattern.test(normalized)) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: âº prefix with wrapped continuation lines
   * Example:
   *   âº The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = 'âº';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets âº, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   âº [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = 'âº';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.toolColors.default(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: âº [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.toolColors.default(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "âº [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   âŽ¿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('âŽ¿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('âŽ¿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('âŽ¿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: âº [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = 'âº';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // Get tool-specific color (bash=orange, read=cyan, write=green, etc.)
    const toolColor = (0, _theme.getToolColor)(toolName);
    const coloredToolName = toolColor(`[${toolName}]`);

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${coloredToolName}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${coloredToolName} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParamsColored(toolName, params, maxWidth, toolColor);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping (default green color)
   */
  formatToolParams(toolName, params, maxWidth) {
    return this.formatToolParamsColored(toolName, params, maxWidth, _theme.theme.toolColors.default);
  }

  /**
   * Format tool params with custom tool color
   */
  formatToolParamsColored(toolName, params, maxWidth, toolColor) {
    const bullet = 'âº';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${toolColor(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.toolColors.default(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: âŽ¿  Found X lines (ctrl+o to expand)
   * For edits, show a small inline diff preview
   */
  formatCompactToolResult(content) {
    // Sanitize content first - filter out garbage/reasoning output that leaked through
    const sanitized = this.sanitizeToolResultContent(content);
    if (!sanitized || this.isGarbageOutput(sanitized)) {
      return ''; // Don't render garbage tool results
    }

    // Special handling for edit results - show inline diff
    if (this.lastToolName?.toLowerCase() === 'edit') {
      return this.formatEditResultWithDiff(sanitized);
    }

    // Parse common result patterns for summary
    const lineMatch = sanitized.match(/(\d+)\s*lines?/i);
    const fileMatch = sanitized.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = sanitized.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(sanitized);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(sanitized);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(sanitized);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (sanitized.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = 'âœ“';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = sanitized.split('\n')[0] || sanitized;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Extract meaningful summary from content
      let summaryText = sanitized;

      // Handle "Summary:" prefix from web search/extract results
      const summaryMatch = sanitized.match(/^Summary:\s*(.+)/i);
      if (summaryMatch) {
        summaryText = summaryMatch[1];
      }

      // For multi-line content, use first meaningful line
      const firstLine = summaryText.split('\n')[0]?.trim() || summaryText;

      // Try to end at a sentence boundary for readability (up to 120 chars)
      const maxLen = 120;
      if (firstLine.length > maxLen) {
        // Look for sentence end within limit
        const sentenceEnd = firstLine.slice(0, maxLen).search(/[.!?;]\s|[.!?;]$/);
        if (sentenceEnd > 30) {
          summary = firstLine.slice(0, sentenceEnd + 1);
        } else {
          // No good sentence break, truncate at word boundary
          const truncated = firstLine.slice(0, maxLen);
          const lastSpace = truncated.lastIndexOf(' ');
          summary = lastSpace > 60 ? truncated.slice(0, lastSpace) + 'â€¦' : truncated + 'â€¦';
        }
      } else {
        summary = firstLine;
      }
    }

    // Store collapsed result for Ctrl+O expansion (use sanitized content)
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content: sanitized,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = sanitized.includes('\n') || summary.endsWith('â€¦') || !preserveFull && sanitized.length > summary.length;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('âŽ¿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('âœ“') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format edit result with enhanced inline diff preview
   * Shows: âŽ¿ âœ“ Updated (filename) - removed X, added Y chars
   *        â”œâ”€â”
   *        â”‚ - old content...
   *        â”‚ + new content...
   *        â””â”€
   */
  formatEditResultWithDiff(content) {
    const lines = [];
    const indent = '  ';

    // Extract file path from content with better regex
    const filePathMatch = content.match(/(?:file[_\s]*path|path):\s*"([^"]+)"/i) || content.match(/updated.*?([\/\w.\-]+\.\w+)/i) || content.match(/edited.*?([\/\w.\-]+\.\w+)/i);
    const fileName = filePathMatch ? filePathMatch[1].split('/').pop() : 'file';
    const fullPath = filePathMatch ? filePathMatch[1] : fileName;

    // Try to extract old/new content from edit result with better parsing
    const oldMatch = content.match(/old[_\s]*string[:\s]*(["'`])([^\x01]+?)\1/i) || content.match(/old[_\s]*string[:\s]*["']?([^"'\n]+)["']?/i);
    const newMatch = content.match(/new[_\s]*string[:\s]*(["'`])([^\x01]+?)\1/i) || content.match(/new[_\s]*string[:\s]*["']?([^"'\n]+)["']?/i);
    const oldContent = oldMatch?.[2] || oldMatch?.[1] || '';
    const newContent = newMatch?.[2] || newMatch?.[1] || '';

    // Calculate diff stats
    const oldLen = oldContent.length;
    const newLen = newContent.length;
    const diffStat = oldLen || newLen ? _theme.theme.ui.muted(` (${_theme.theme.error(`-${oldLen}`)} ${_theme.theme.success(`+${newLen}`)} chars)`) : '';

    // Main summary line with enhanced styling
    lines.push(`${indent}${_theme.theme.ui.muted('âŽ¿')}  ${_theme.theme.success('âœ“')} ${_theme.theme.success(`Updated`)} ${_theme.theme.file?.path ? _theme.theme.file.path(`${fullPath}`) : _theme.theme.warning(`${fullPath}`)}${diffStat}`);

    // Show enhanced diff visualization
    if (oldContent || newContent) {
      const maxDiffLen = Math.min(this.safeWidth() - 20, 80);

      // Start diff box
      lines.push(`${indent}${_theme.theme.ui.muted('â”œâ”€â”')}`);
      if (oldContent) {
        const oldPreview = oldContent.length > maxDiffLen ? oldContent.slice(0, maxDiffLen) + 'â€¦' : oldContent;
        // Clean up the preview (remove escaped quotes, etc.)
        const cleanOld = oldPreview.replace(/\\"/g, '"').replace(/\\n/g, 'â†²');
        lines.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.error('â”€ ' + cleanOld)}`);
      }
      if (newContent) {
        const newPreview = newContent.length > maxDiffLen ? newContent.slice(0, maxDiffLen) + 'â€¦' : newContent;
        const cleanNew = newPreview.replace(/\\"/g, '"').replace(/\\n/g, 'â†²');
        lines.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.success('+ ' + cleanNew)}`);
      }

      // End diff box
      lines.push(`${indent}${_theme.theme.ui.muted('â””â”€')}`);
    }

    // Store for expansion with enhanced metadata
    this.collapsedToolResults.push({
      toolName: 'edit',
      content,
      summary: `Updated ${fileName} (-${oldLen}, +${newLen})`,
      timestamp: Date.now(),
      metadata: {
        filePath: fullPath,
        oldLength: oldLen,
        newLength: newLen,
        diff: {
          old: oldContent,
          new: newContent
        }
      }
    });
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const expandHint = content.length > 100 || oldLen > 50 || newLen > 50 ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return lines.join('\n') + expandHint + '\n';
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   * Supports full markdown formatting: headers, lists, code blocks, inline styles.
   */
  wrapBulletText(content, options = {}) {
    const bullet = 'âº';
    let cleaned = content.replace(/^[âºâ€¢â—‹]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Normalize content: add spaces after headers, fix common formatting issues
    // Fix headers without space: ##HEADING -> ## HEADING (including emoji)
    cleaned = cleaned.replace(/^(#{1,6})([A-ZðŸš€âš”ï¸ðŸŽ¯ðŸ”ðŸ“¦âœ…âŒâš¡ðŸ’€ðŸ”¥ðŸ›¡ï¸ðŸ’£ðŸŽ–ï¸â­])/gm, '$1 $2');
    // Fix numbered headers: ###1 Elite -> ### 1. Elite
    cleaned = cleaned.replace(/^(#{1,6})(\d+)\s+/gm, '$1 $2. ');
    // Fix dash lists without space: -RSA2048 -> - RSA2048
    cleaned = cleaned.replace(/^-([A-Z])/gm, '- $1');
    // Fix numbered lists without space: 1.Item -> 1. Item
    cleaned = cleaned.replace(/^(\d+\.)([A-Z])/gm, '$1 $2');
    // Add line breaks before headers that are joined to previous text
    cleaned = cleaned.replace(/([.!?)])(\s*)(#{1,6}\s)/g, '$1\n\n$3');
    // Add line breaks between sections (text followed immediately by ##)
    cleaned = cleaned.replace(/([a-z])(\s*)(#{2,6}\s)/gi, '$1\n\n$3');
    // Add line breaks between emoji bullets and next section
    cleaned = cleaned.replace(/([\u2705\u274C\u2714\u2718\u26A0\uD83C-\uDBFF\uDC00-\uDFFF]+)\s*(#{1,6})/g, '$1\n\n$2');
    // Fix code blocks that run together: bash# -> bash\n#
    cleaned = cleaned.replace(/(bash|sh|python|javascript|typescript)#/gi, '$1\n```\n#');
    // Add newlines before code block markers
    cleaned = cleaned.replace(/([^\n])```(\w+)?/g, '$1\n```$2');
    // Fix tables that run together
    cleaned = cleaned.replace(/(\w+)\s+([-â”€]{3,})\s+(\w+)/g, '$1\n$2\n$3');

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' Â· ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    let inCodeBlock = false;
    let codeBlockLang = '';
    const codeBlockBuffer = [];
    for (const rawLine of lines) {
      const trimmedLine = rawLine.trim();

      // Handle code block fences
      if (trimmedLine.startsWith('```')) {
        if (!inCodeBlock) {
          // Start code block
          inCodeBlock = true;
          codeBlockLang = trimmedLine.slice(3).trim().toUpperCase() || 'CODE';
          continue;
        } else {
          // End code block - render it
          inCodeBlock = false;
          const codeIndent = firstNonEmpty ? bulletPrefix : indent;
          if (firstNonEmpty) {
            result.push(`${bulletPrefix}${_theme.theme.ui.muted(`â”€â”€â”€ ${codeBlockLang} â”€â”€â”€`)}`);
            firstNonEmpty = false;
          } else {
            result.push(`${indent}${_theme.theme.ui.muted(`â”€â”€â”€ ${codeBlockLang} â”€â”€â”€`)}`);
          }
          for (const codeLine of codeBlockBuffer) {
            result.push(`${indent}${_theme.theme.ui.muted('â”‚')} ${_theme.theme.ui.code(codeLine)}`);
          }
          codeBlockBuffer.length = 0;
          codeBlockLang = '';
          continue;
        }
      }
      if (inCodeBlock) {
        codeBlockBuffer.push(rawLine);
        continue;
      }

      // Handle empty lines
      if (!trimmedLine) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }

      // Handle markdown headers (# ## ### etc.) - also handle ##HEADING without space
      const headerMatch = trimmedLine.match(/^(#{1,6})\s*(.+)$/);
      if (headerMatch && headerMatch[2] && !headerMatch[2].startsWith('#')) {
        const level = headerMatch[1]?.length ?? 1;
        const headerText = headerMatch[2]?.trim() ?? '';
        // Skip if it's just hashes or if content is too short
        if (headerText.length > 0) {
          // Add blank line before headers for better visual separation
          if (result.length > 0 && result[result.length - 1] !== '') {
            result.push('');
          }
          const formattedHeader = this.formatMarkdownHeader(headerText, level, maxWidth, firstNonEmpty ? bulletPrefix : indent);
          result.push(formattedHeader);
          firstNonEmpty = false;
          continue;
        }
      }

      // Handle dividers (--- or ***)
      if (/^[-*_]{3,}$/.test(trimmedLine)) {
        const dividerWidth = Math.min(maxWidth - indent.length, 50);
        result.push(`${indent}${_theme.theme.ui.muted('â”€'.repeat(dividerWidth))}`);
        continue;
      }

      // Handle markdown tables (lines starting with |)
      if (trimmedLine.startsWith('|') || /^[-|:]+$/.test(trimmedLine)) {
        // Table line - render with fixed width font styling
        const tablePrefix = firstNonEmpty ? bulletPrefix : indent;
        result.push(`${tablePrefix}${_theme.theme.ui.muted(trimmedLine)}`);
        firstNonEmpty = false;
        continue;
      }

      // Handle list items (- or * or numbered) - also handle -Item without space
      const listMatch = trimmedLine.match(/^(\*|-|â€¢|\d+\.)\s*(.+)$/);
      if (listMatch && listMatch[2]) {
        const listContent = listMatch[2].trim();
        const formattedList = (0, _richText.formatInlineText)(listContent);
        const listBullet = _theme.theme.secondary('  â€¢ ');
        const listIndent = '    ';
        if (firstNonEmpty) {
          result.push(bulletPrefix.trimEnd());
          firstNonEmpty = false;
        }

        // Wrap list item content
        const words = formattedList.split(/\s+/);
        let current = '';
        let isFirstListLine = true;
        for (const word of words) {
          const candidate = current ? `${current} ${word}` : word;
          const prefixLen = this.visibleLength(isFirstListLine ? listBullet : listIndent);
          if (prefixLen + this.visibleLength(candidate) > maxWidth - 2 && current) {
            result.push(`${isFirstListLine ? listBullet : listIndent}${current}`);
            current = word;
            isFirstListLine = false;
          } else {
            current = candidate;
          }
        }
        if (current) {
          result.push(`${isFirstListLine ? listBullet : listIndent}${current}`);
        }
        continue;
      }

      // Regular paragraph - apply markdown formatting
      const formattedLine = (0, _richText.formatInlineText)(trimmedLine);
      const words = formattedLine.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a markdown header with Claude Code style visual hierarchy.
   */
  formatMarkdownHeader(text, level, maxWidth, prefix) {
    const formattedText = (0, _richText.formatInlineText)(text);
    switch (level) {
      case 1:
        {
          // H1: Bold cyan with decorative borders
          const headerWidth = Math.min(maxWidth - 4, this.visibleLength(formattedText) + 4);
          const topBorder = _theme.theme.primary('â•'.repeat(headerWidth));
          const headerLine = _theme.theme.primary.bold(`â—† ${formattedText}`);
          return `${prefix}${topBorder}\n  ${headerLine}\n  ${topBorder}`;
        }
      case 2:
        {
          // H2: Bold with underline accent
          const headerLine = _theme.theme.info.bold(`â–¸ ${formattedText}`);
          const underline = _theme.theme.info('â”€'.repeat(Math.min(maxWidth - 4, this.visibleLength(formattedText) + 2)));
          return `${prefix}${headerLine}\n  ${underline}`;
        }
      case 3:
        {
          // H3: Bold with bullet prefix
          return `${prefix}${_theme.theme.secondary.bold(`â—‡ ${formattedText}`)}`;
        }
      case 4:
        {
          // H4: Dimmer bold
          return `${prefix}${_theme.theme.ui.muted('â–¹')} ${_theme.theme.bold(formattedText)}`;
        }
      default:
        {
          // H5+: Simple bold
          return `${prefix}${_theme.theme.bold(formattedText)}`;
        }
    }
  }

  /**
   * Format thinking block with premium visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   * Enhanced with gradient labels, better typography, and visual hierarchy.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';

    // Detect thought type for better labeling and visual styling
    const lower = content.toLowerCase();
    let label = 'thinking';
    let labelColor = _theme.theme.neon.cyan;
    let labelIcon = 'ðŸ’­';
    let thoughtType = 'default';

    // Detect initial acknowledgement
    if (lower.includes('acknowledge') || lower.includes('understand') || lower.includes("user wants") || lower.includes("user is asking") || lower.includes("the request") || lower.includes("i'll help")) {
      label = 'understood';
      labelColor = _theme.theme.success ?? _theme.theme.neon.green;
      labelIcon = 'âœ…';
      thoughtType = 'acknowledgement';
    }
    // Detect planning thoughts
    else if (lower.includes('plan') || lower.includes('steps') || lower.includes('first') || lower.includes('then') || lower.includes('approach') || lower.includes('strategy')) {
      label = 'planning';
      labelColor = _theme.theme.info ?? _theme.theme.neon.blue;
      labelIcon = 'ðŸ—ºï¸';
      thoughtType = 'planning';
    }
    // Detect analysis/reasoning
    else if (lower.includes('analyzing') || lower.includes('examining') || lower.includes('looking at') || lower.includes('reviewing')) {
      label = 'analyzing';
      labelColor = _theme.theme.warning ?? _theme.theme.neon.orange;
      labelIcon = 'ðŸ”';
      thoughtType = 'analysis';
    }
    // Detect tool selection/execution thoughts
    else if (lower.includes('tool') || lower.includes('read') || lower.includes('edit') || lower.includes('search') || lower.includes('bash') || lower.includes('execute')) {
      label = 'executing';
      labelColor = _theme.theme.toolColors.default ?? _theme.theme.neon.purple;
      labelIcon = 'âš™ï¸';
      thoughtType = 'execution';
    }
    // Detect completion/result thoughts
    else if (lower.includes('complete') || lower.includes('done') || lower.includes('finished') || lower.includes('result')) {
      label = 'completed';
      labelColor = _theme.theme.success ?? _theme.theme.neon.green;
      labelIcon = 'âœ“';
      thoughtType = 'completion';
    }
    const normalized = content.replace(/\s+/g, ' ').trim();

    // Enhanced bullet design with icon and gradient styling
    const bullet = 'âº';
    const coloredLabel = labelColor(`${labelIcon} ${label}`);

    // Format with premium styling
    return this.wrapBulletText(normalized, {
      label: coloredLabel,
      labelColor: text => text,
      // Already colored
      thoughtType
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: â•â• history â•â•â•â•â•â•â•â•â•â•â•â•â•
    const separator = _theme.theme.ui.muted('â•'.repeat(leftPad) + labelText + 'â•'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Determine if this is structured output that shouldn't be word-wrapped
    const isStructured = this.isStructuredToolOutput(toolName, content);
    let rendered;
    if (isStructured) {
      // Preserve structured output (grep, bash, code output) - just indent, don't wrap
      rendered = this.formatStructuredToolOutput(toolName, content);
    } else {
      // Format prose/text with tool name label and word wrapping
      const label = `${toolName}`;
      rendered = this.wrapBulletText(content, {
        label,
        labelColor: _theme.theme.info
      });
    }
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Check if tool output is structured (code, grep, file listings) that shouldn't be word-wrapped.
   */
  isStructuredToolOutput(toolName, content) {
    const tool = toolName.toLowerCase();
    // Tools that produce structured output
    if (['bash', 'grep', 'read', 'glob', 'execute_bash', 'search', 'find'].includes(tool)) {
      return true;
    }
    // Content patterns that indicate structured output
    // - File paths with colons (grep output): src/file.ts:123:
    // - Line numbers: "   1â†’" or "  42:"
    // - Code-like patterns
    if (/^\s*[\w./]+:\d+[:\s]/.test(content)) return true; // grep-style output
    if (/^\s*\d+[â†’:â”‚|]\s/.test(content)) return true; // line-numbered output
    if (/^[â”‚â”œâ””â”€â”Œâ”â”˜â”¬â”´â”¼â•­â•®â•¯â•°]+/.test(content)) return true; // box drawing
    if (/^\s*[$>]\s+\w+/.test(content)) return true; // command prompt output
    return false;
  }

  /**
   * Format structured tool output preserving line structure.
   */
  formatStructuredToolOutput(toolName, content) {
    const lines = content.split('\n');
    const header = `âº ${_theme.theme.info(toolName)}${_theme.theme.ui.muted(' Â· expanded')}\n`;
    const indent = '  ';
    const maxWidth = this.safeWidth() - 4;
    const formattedLines = lines.map(line => {
      // Truncate overly long lines instead of wrapping (preserves structure)
      if (line.length > maxWidth) {
        return indent + line.slice(0, maxWidth - 1) + 'â€¦';
      }
      return indent + line;
    });
    return header + formattedLines.join('\n') + '\n';
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      this.streamingContentBuffer = ''; // Reset streaming buffer
      this.streamingLinesWritten = 0;
      this.streamingInputQueue = []; // Clear any stale queued input
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle') {
      // IMPORTANT: Clear the overlay BEFORE writing newline to prevent duplicate boxes
      // The old overlay would otherwise scroll into scrollback history
      if (!this.plainMode && this.lastOverlay) {
        this.clearPromptArea();
      }
      if (!this.lastOutputEndedWithNewline) {
        // Finish streaming on a fresh line so the next prompt/event doesn't collide
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }

      // Clear the buffer after processing
      this.streamingContentBuffer = '';
      this.streamingLinesWritten = 0;
      // Clear any remaining queued input (user didn't press Enter to queue it)
      this.streamingInputQueue = [];
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 120); // ~8 FPS - reduced from 80ms to minimize flickering while keeping animation smooth
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminatingâ€¦" shows as "âœ³ Ruminatingâ€¦ (esc to interrupt Â· 34s Â· â†‘1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.alphaZeroHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    // Force next render to show updated toggle state
    this.forceNextRender = true;
    this.renderPromptImmediate();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }

  /**
   * Update secure TAO tools status for display in the UI.
   * Tracks Execute, Probe, State tools with enhanced output formatting.
   */
  updateSecureToolsStatus(status) {
    const next = {
      ...this.secureToolsStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.secureToolsStatus);
    this.secureToolsStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Record a secure tool invocation for tracking.
   */
  recordSecureToolInvocation(tool, details) {
    const invocations = (this.secureToolsStatus.totalInvocations || 0) + 1;
    const updates = {
      lastToolUsed: tool,
      totalInvocations: invocations
    };
    if (tool === 'Execute' && details) {
      updates.execute = {
        active: true,
        lastCommand: details.command,
        lastExitCode: details.exitCode,
        execCount: (this.secureToolsStatus.execute?.execCount || 0) + 1
      };
    } else if (tool === 'Probe' && details) {
      updates.probe = {
        active: true,
        lastTarget: details.target,
        servicesFound: details.services,
        probeCount: (this.secureToolsStatus.probe?.probeCount || 0) + 1
      };
    } else if (tool === 'State' && details) {
      updates.state = {
        active: true,
        lastAction: details.action,
        keysStored: details.keysCount,
        persistent: true
      };
    }
    this.updateSecureToolsStatus(updates);
  }

  /**
   * Get current secure tools status for external access.
   */
  getSecureToolsStatus() {
    return this.secureToolsStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }

  /**
   * Show an interactive menu with arrow key navigation (Claude Code style).
   * Menu is displayed in the inline panel area and intercepts arrow/enter keys.
   * @param items - Menu items to display
   * @param options - Menu options (title, initialIndex)
   * @param callback - Called when user selects an item (or null if cancelled)
   */
  setMenu(items, options = {}, callback) {
    if (!this.supportsInlinePanel()) {
      // Non-interactive mode - just call callback with first item or null
      callback(items[0] ?? null);
      return;
    }
    this.menuItems = items;
    this.menuIndex = options.initialIndex ?? items.findIndex(i => i.isActive) ?? 0;
    if (this.menuIndex < 0) this.menuIndex = 0;
    this.menuTitle = options.title ?? null;
    this.menuCallback = callback;
    this.renderMenuPanel();
  }

  /**
   * Close the active menu without selecting anything.
   */
  closeMenu() {
    if (!this.isMenuActive()) return;
    const callback = this.menuCallback;
    this.menuItems = [];
    this.menuIndex = 0;
    this.menuTitle = null;
    this.menuCallback = null;
    this.clearInlinePanel();
    callback?.(null);
  }

  /**
   * Check if an interactive menu is currently active.
   */
  isMenuActive() {
    return this.menuItems.length > 0 && this.menuCallback !== null;
  }

  /**
   * Render the menu to the inline panel.
   */
  renderMenuPanel() {
    if (!this.isMenuActive()) return;
    const lines = [];

    // Title
    if (this.menuTitle) {
      lines.push(_chalk.default.bold.hex('#8B5CF6')(this.menuTitle));
      lines.push('');
    }

    // Menu items with selection indicator
    for (let i = 0; i < this.menuItems.length; i++) {
      const item = this.menuItems[i];
      const isSelected = i === this.menuIndex;
      const isDisabled = item.disabled;
      const isActive = item.isActive;
      let line = '';

      // Selection indicator
      if (isSelected) {
        line += _chalk.default.hex('#22D3EE')('â¯ ');
      } else {
        line += '  ';
      }

      // Label with styling
      if (isDisabled) {
        line += _chalk.default.dim(item.label);
      } else if (isSelected) {
        line += _chalk.default.bold.hex('#22D3EE')(item.label);
      } else if (isActive) {
        line += _chalk.default.hex('#34D399')(item.label);
      } else {
        line += _chalk.default.white(item.label);
      }

      // Active indicator
      if (isActive) {
        line += _chalk.default.dim(' (current)');
      }

      // Description
      if (item.description) {
        const desc = isDisabled ? _chalk.default.dim(item.description) : _chalk.default.dim(` - ${item.description}`);
        line += desc;
      }
      lines.push(line);
    }

    // Hint
    lines.push('');
    lines.push(_chalk.default.dim('â†‘â†“ navigate â€¢ enter select â€¢ esc cancel'));
    this.setInlinePanel(lines);
  }

  /**
   * Navigate menu selection.
   * @returns true if menu consumed the navigation
   */
  navigateMenu(direction) {
    if (!this.isMenuActive()) return false;

    // Find next non-disabled item
    let newIndex = this.menuIndex;
    let attempts = 0;
    const maxAttempts = this.menuItems.length;
    do {
      newIndex = (newIndex + direction + this.menuItems.length) % this.menuItems.length;
      attempts++;
    } while (this.menuItems[newIndex]?.disabled && attempts < maxAttempts);
    if (newIndex !== this.menuIndex) {
      this.menuIndex = newIndex;
      this.renderMenuPanel();
    }
    return true;
  }

  /**
   * Select the currently highlighted menu item.
   * @returns true if menu consumed the selection
   */
  selectMenuItem() {
    if (!this.isMenuActive()) return false;
    const item = this.menuItems[this.menuIndex];
    if (!item || item.disabled) return true; // Consume but don't select

    const callback = this.menuCallback;
    this.menuItems = [];
    this.menuIndex = 0;
    this.menuTitle = null;
    this.menuCallback = null;
    this.clearInlinePanel();
    callback?.(item);
    return true;
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`â€¦ ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed or still initializing (before banner shown)
    if (this.disposed || this.initializing) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed or still initializing (before banner shown)
    if (this.disposed || this.initializing) return;

    // Performance optimization: Skip render if nothing changed (during idle mode only)
    // During streaming mode, we need to update animations and status
    if (!this.forceNextRender && this.mode === 'idle' && this.buffer === this.lastRenderedBuffer && this.cursor === this.lastRenderedCursor && this.mode === this.lastRenderedMode && this.lastOverlay !== null) {
      // Content unchanged, skip expensive re-render
      return;
    }
    this.forceNextRender = false;

    // Suppress render during paste burst to prevent visual leak
    // Only allow render if we have a collapsed paste to show
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const inEmitPaste = this.emitPasteBuffer.length > 0 || this.emitPasteTimer !== null;
    if ((burstActive || this.inPlainPaste || this.inBracketedPaste || inEmitPaste) && !this.collapsedPaste) {
      return;
    }
    this.lastRenderTime = Date.now();
    this.lastRenderedBuffer = this.buffer;
    this.lastRenderedCursor = this.cursor;
    this.lastRenderedMode = this.mode;
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Batch all ANSI operations into a single write to prevent flickering
    // This eliminates the visual jitter caused by multiple sequential terminal writes
    const buffer = [];

    // Hide cursor during render to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Clear previous prompt and handle height changes
    // IMPORTANT: Only clear if we have valid overlay state to avoid cursor position bugs
    // that cause separator lines to accumulate in scrollback
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0 && this.lastOverlay !== null) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }

      // Clear exactly the old overlay lines using atomic escape sequence batch
      const clearHeight = this.lastOverlayHeight;
      for (let i = 0; i < clearHeight; i++) {
        buffer.push('\r');
        buffer.push(ESC.CLEAR_LINE);
        if (i < clearHeight - 1) {
          buffer.push('\x1b[B');
        }
      }

      // Clear anything below the old overlay (handles edge cases)
      buffer.push('\x1b[J');

      // After clearing, cursor is at last cleared line
      // Move back up to the top where new overlay should start
      const moveBackUp = clearHeight - 1;
      if (moveBackUp > 0) {
        buffer.push(`\x1b[${moveBackUp}A`);
      }
    } else if (this.hasEverRenderedOverlay) {
      // Overlay was cleared but we're re-rendering - ensure clean slate
      // Use erase-to-end-of-screen from current position
      buffer.push('\r');
      buffer.push('\x1b[J');
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      buffer.push(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        buffer.push('\n');
      }
    }

    // If old overlay was taller, clear any remaining stale lines below
    // and use CSI J (erase from cursor to end of screen) to clean up
    if (this.lastOverlayHeight > height) {
      buffer.push('\n'); // Move to line below last content
      buffer.push('\x1b[J'); // Clear from cursor to end of screen
      buffer.push('\x1b[A'); // Move back up to last content line
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      buffer.push(`\x1b[${linesToMoveUp}A`);
    }
    buffer.push(`\x1b[${promptCol}G`);

    // Show cursor again after positioning
    buffer.push('\x1b[?25h');

    // Single atomic write to prevent flickering
    this.write(buffer.join(''));
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('â”€'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[âºâ€¢]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: â— Workingâ€¦ (esc to interrupt Â· 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? 'â ‹';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? 'âœ¶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('â€¦') && !displayActivity.trimEnd().endsWith('...');
      // Format: â ‹ Workingâ€¦ (esc to interrupt Â· 1m 19s Â· â†‘1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`â†‘${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? 'â€¦' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' Â· '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    // Filter out empty lines to prevent duplicate divider appearance from leading/trailing newlines
    const inputLines = inputLine.split('\n').filter((line, idx, arr) => {
      // Keep non-empty lines, but preserve single empty line if it's intentional (e.g., between content)
      // Only filter leading/trailing empty lines
      if (line.trim() === '') {
        // Filter if it's the first line (leading empty) or last line (trailing empty)
        if (idx === 0 || idx === arr.length - 1) return false;
      }
      return true;
    });
    // Ensure at least one line for the prompt
    if (inputLines.length === 0) {
      inputLines.push(_theme.theme.primary('> '));
    }
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('â–¸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} â€” ${descText}`, maxWidth));
      }
    }

    // Compact status line: model Â· context% Â· profile Â· dir
    const compactStatus = this.buildCompactStatusLine();
    if (compactStatus) {
      lines.push(this.truncateLine(`  ${compactStatus}`, maxWidth));
    }

    // Mode toggles (compact single line when possible)
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
    }
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build a single compact status line with all essential info
   * Format: deepseek-reasoner Â· â–‘â–‘â–‘â–‘â–‘â–‘ 5% Â· agi-code Â· ~/GitHub
   */
  buildCompactStatusLine() {
    const parts = [];

    // Model (compact: just model name, not provider/model)
    const model = this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter (compact mini bar)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 5;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('â–ˆ'.repeat(filled)) + _theme.theme.ui.muted('â–‘'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)}`);
    }

    // Profile (if set)
    if (this.statusMeta.profile) {
      parts.push(_theme.theme.secondary(this.statusMeta.profile));
    }

    // Directory (abbreviated)
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      parts.push(_theme.theme.ui.muted(this.abbreviatePath(workspace)));
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted(' Â· ')) : null;
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const segments = [];

    // Skip status label when streaming - the activity line already shows the animated status
    // This prevents duplicate "Thinking..." displays
    if (this.mode !== 'streaming') {
      const statusLabel = this.composeStatusLabel();
      if (statusLabel) {
        segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
      }
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return segments.length > 0 ? this.wrapSegments(segments, maxWidth) : [];
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }

    // Add secure TAO tools status
    const secureToolsSegments = this.buildSecureToolsSegments();
    if (secureToolsSegments.length > 0) {
      segments.push(...secureToolsSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('ðŸ†') : leader === 'refiner' ? _theme.theme.warning('ðŸ†') : 'âš–ï¸';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` ðŸ”¥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('â–ˆ'.repeat(pBars)) + _theme.theme.ui.muted('â–‘'.repeat(tBars)) + _theme.theme.warning('â–ˆ'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('âš¡P')} ${_theme.theme.ui.muted('âˆ¥')} ${_theme.theme.warning('âš¡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? 'â–¶' : 'â–·';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('âœ“P') : _theme.theme.warning('âœ“R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('â‰ˆ'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }

    // Human accuracy indicator (relative ranking quality)
    if (rl.accuracy && (typeof rl.accuracy.primary === 'number' || typeof rl.accuracy.refiner === 'number')) {
      const pAcc = rl.accuracy.primary !== undefined ? Math.round(rl.accuracy.primary * 100) : null;
      const rAcc = rl.accuracy.refiner !== undefined ? Math.round(rl.accuracy.refiner * 100) : null;
      const pDisplay = pAcc !== null ? _theme.theme.info(`P${pAcc}%`) : null;
      const rDisplay = rAcc !== null ? _theme.theme.warning(`R${rAcc}%`) : null;
      const parts = [pDisplay, rDisplay].filter(Boolean).join(_theme.theme.ui.muted('|'));
      if (parts) {
        segments.push(parts);
      }
    }
    return segments;
  }

  /**
   * Build secure TAO tools status segments for display.
   * Shows: toolkit status, tool invocation counts, and last tool used.
   */
  buildSecureToolsSegments() {
    const segments = [];
    const st = this.secureToolsStatus;

    // Only show status when tools have been used
    if (!st.totalInvocations && !st.lastToolUsed) {
      // Show toolkit ready indicator even when no invocations
      if (st.toolkitReady) {
        segments.push(_theme.theme.success('ðŸ”’') + _theme.theme.ui.muted(' TAO'));
      }
      return segments;
    }

    // Security indicator with sanitization status
    const secIcon = st.sanitizationActive ? _theme.theme.success('ðŸ”’') : _theme.theme.warning('âš ');
    segments.push(secIcon);

    // Tool status indicators (compact format)
    const toolIndicators = [];
    if (st.execute?.active) {
      const execIcon = st.execute.lastExitCode === 0 ? _theme.theme.success('âœ“') : _theme.theme.error('âœ—');
      const execCount = st.execute.execCount || 0;
      toolIndicators.push(`${_theme.theme.info('Ex')}${execIcon}${execCount > 1 ? _theme.theme.ui.muted(`Ã—${execCount}`) : ''}`);
    }
    if (st.probe?.active) {
      const svcCount = st.probe.servicesFound || 0;
      toolIndicators.push(`${_chalk.default.cyan('Pr')}${_theme.theme.success('âœ“')}${svcCount > 0 ? _theme.theme.ui.muted(`[${svcCount}]`) : ''}`);
    }
    if (st.state?.active) {
      const stateIcon = st.state.persistent ? _theme.theme.success('ðŸ’¾') : _theme.theme.info('ðŸ“');
      const keysCount = st.state.keysStored || 0;
      toolIndicators.push(`${stateIcon}${keysCount > 0 ? _theme.theme.ui.muted(`${keysCount}k`) : ''}`);
    }
    if (toolIndicators.length > 0) {
      segments.push(toolIndicators.join(_theme.theme.ui.muted('Â·')));
    }

    // Total invocations counter
    if (st.totalInvocations && st.totalInvocations > 0) {
      segments.push(_theme.theme.ui.muted(`Î£${st.totalInvocations}`));
    }

    // Last tool used indicator
    if (st.lastToolUsed) {
      const toolColors = {
        Execute: _theme.theme.info,
        Probe: s => _chalk.default.cyan(s),
        State: _theme.theme.success,
        Transform: _theme.theme.warning,
        TaoOps: s => _chalk.default.magenta(s)
      };
      const color = toolColors[st.lastToolUsed] || _theme.theme.ui.muted;
      segments.push(color(`â†’${st.lastToolUsed.slice(0, 2)}`));
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('â€º')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };

    // AlphaZero mode: toggle between Normal and AlphaZero dual tournament RL
    const alphaZeroActive = this.toggleState.alphaZeroEnabled ?? false;
    addToggle('Mode', true, this.toggleState.alphaZeroHotkey, alphaZeroActive ? 'AlphaZero' : 'Normal');
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    addToggle('Auto', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'on' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('auto', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.alphaZeroHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      // Clean paste indicator - just show the summary, no action hints
      const linesText = this.collapsedPaste.lines === 1 ? '1 line' : `${this.collapsedPaste.lines} lines`;
      const charsText = typeof this.collapsedPaste.chars === 'number' ? `${this.collapsedPaste.chars} chars` : `${this.collapsedPaste.chars}`;
      const summary = _theme.theme.success(`[ðŸ“‹ ${linesText}, ${charsText}]`);
      return this.truncateLine(`${_theme.theme.primary('> ')}${summary}`, this.safeWidth());
    }

    // While detecting paste (or in burst detection phase), suppress buffer display
    const now = Date.now();
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    if (this.inPlainPaste || this.inBracketedPaste || burstActive) {
      const chars = this.plainPasteBuffer.length || this.pasteBuffer.length || this.pendingInsertBuffer.length || 0;
      if (chars > 0) {
        const indicator = _theme.theme.ui.muted(`[ðŸ“‹ pasting... ${chars} chars]`);
        return this.truncateLine(`${_theme.theme.primary('> ')}${indicator}`, this.safeWidth());
      }
      // Even if no chars yet, show empty prompt during burst to prevent flicker
      if (burstActive) {
        return this.truncateLine(`${_theme.theme.primary('> ')}`, this.safeWidth());
      }
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? 'â€¢'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately.
   * Useful for programmatic submissions when a paste chip is active.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += 'â€¦';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses âœ» character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;

    // Prevent duplicate prompt display within 1.5 seconds
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Use batched atomic write to prevent visual glitches from non-atomic escape sequences
    const buffer = [];

    // Hide cursor during clearing to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      if (i < height - 1) {
        buffer.push('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      buffer.push(`\x1b[${height - 1}A`);
    }
    buffer.push('\r');

    // Show cursor again
    buffer.push('\x1b[?25h');

    // Single atomic write
    this.write(buffer.join(''));
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl91aUNvbnN0YW50cyIsIl9yaWNoVGV4dCIsIl9pbnB1dFByb3RlY3Rpb24iLCJlIiwiX19lc01vZHVsZSIsImRlZmF1bHQiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiaGFzIiwiZ2V0Iiwic2V0IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJjcmVhdGVCYW5uZXIiLCJ0aXRsZSIsInN1YnRpdGxlIiwibGluZXMiLCJwdXNoIiwiY2hhbGsiLCJjeWFuIiwicmVwZWF0IiwiYm9sZCIsInBhZEVuZCIsIndoaXRlIiwiam9pbiIsImZvcm1hdFByb2dyZXNzIiwicGhhc2UiLCJzdGVwIiwidG90YWxTdGVwcyIsInBlcmNlbnRhZ2UiLCJNYXRoIiwicm91bmQiLCJwcm9ncmVzc0JhciIsImZsb29yIiwiZ3JlZW4iLCJjcmVhdGVTZWN1cml0eUJhbm5lciIsIndpZHRoIiwidG9VcHBlckNhc2UiLCJncmF5IiwiY3JlYXRlU2VjdXJpdHlTcGlubmVyIiwibWVzc2FnZSIsImZvcm1hdFNlY3VyaXR5RmluZGluZyIsImZpbmRpbmciLCJzZXZlcml0eUNvbG9ycyIsImNyaXRpY2FsIiwicmVkQnJpZ2h0IiwiaGlnaCIsInJlZCIsIm1lZGl1bSIsInllbGxvdyIsImxvdyIsImJsdWUiLCJpbmZvIiwic2V2ZXJpdHlJY29ucyIsImNvbG9yIiwic2V2ZXJpdHkiLCJpY29uIiwibmFtZSIsInR5cGUiLCJkZXNjcmlwdGlvbiIsImV2aWRlbmNlIiwicmVtZWRpYXRpb24iLCJmb3JtYXRTZWN1cml0eVN1bW1hcnkiLCJyZXN1bHRzIiwiY2FtcGFpZ24iLCJzdGFydFRpbWUiLCJlbmRUaW1lIiwiZHVyYXRpb24iLCJmaW5kaW5ncyIsIkFycmF5IiwiaXNBcnJheSIsImNvdW50cyIsImZvckVhY2giLCJlbnRyaWVzIiwiY291bnQiLCJsZW5ndGgiLCJmb3JtYXRTZWN1cml0eVN0YXR1cyIsInN0YXR1cyIsImRldGFpbHMiLCJzdGF0dXNJY29ucyIsImhlYWx0aHkiLCJkZWdyYWRlZCIsInVuYXZhaWxhYmxlIiwiZm9ybWF0QXVkaXRQcm9ncmVzcyIsInByb2dyZXNzIiwidG90YWwiLCJmaWxsZWQiLCJlbXB0eSIsImZvcm1hdFNlY3VyZVRvb2xzU3VtbWFyeSIsIm9wdGlvbnMiLCJzaG93VGl0bGUiLCJkZWZhdWx0VG9vbHMiLCJ0b29scyIsInRvb2xQYXJ0cyIsIm1hcCIsInRvb2wiLCJzdGF0dXNJY29uIiwidGV4dCIsImhleCIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJvdXRwdXQiLCJpbnB1dCIsInJsIiwicGxhaW5Nb2RlIiwiaW50ZXJhY3RpdmUiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsInN0cmVhbWluZ0lucHV0UXVldWUiLCJzdHJlYW1pbmdDb250ZW50QnVmZmVyIiwic3RyZWFtaW5nTGluZXNXcml0dGVuIiwibGFzdFRvb2xSZXN1bHQiLCJjb2xsYXBzZWRUb29sUmVzdWx0cyIsIm1heENvbGxhcHNlZFJlc3VsdHMiLCJsYXN0VG9vbE5hbWUiLCJzdHJlYW1pbmdTdGFydFRpbWUiLCJzdGF0dXNNZXNzYWdlIiwic3RhdHVzT3ZlcnJpZGUiLCJzdGF0dXNTdHJlYW1pbmciLCJzdHJlYW1pbmdTcGlubmVyIiwidGhpbmtpbmdJbmRpY2F0b3IiLCJjb250ZXh0TWV0ZXIiLCJzcGlubmVyRnJhbWUiLCJzcGlubmVySW50ZXJ2YWwiLCJtYXhJbmxpbmVQYW5lbExpbmVzIiwiY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UiLCJjb21wYWN0aW5nU3RhdHVzRnJhbWUiLCJjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWwiLCJjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyIsImFjdGl2aXR5TWVzc2FnZSIsImFjdGl2aXR5UGhyYXNlSW5kZXgiLCJhY3Rpdml0eVN0YXJGcmFtZSIsImFjdGl2aXR5U3RhckZyYW1lcyIsInN0cmVhbWluZ1Rva2VucyIsImVsYXBzZWRDb2xvckZyYW1lIiwiZWxhcHNlZENvbG9yRnJhbWVzIiwiZnVuQWN0aXZpdHlQaHJhc2VzIiwibWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzIiwibWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzIiwidGhvdWdodERlZHVwV2luZG93TXMiLCJsYXN0Q3VyYXRlZFRob3VnaHQiLCJzdGF0dXNNZXRhIiwidG9nZ2xlU3RhdGUiLCJhdXRvQ29udGludWVFbmFibGVkIiwiY3JpdGljYWxBcHByb3ZhbE1vZGUiLCJhbHBoYVplcm9FbmFibGVkIiwiZGVidWdFbmFibGVkIiwicmxTdGF0dXMiLCJzZWN1cmVUb29sc1N0YXR1cyIsInRvb2xraXRSZWFkeSIsInNhbml0aXphdGlvbkFjdGl2ZSIsInRvdGFsSW52b2NhdGlvbnMiLCJjbGFtcEN1cnNvciIsIm1heCIsIm1pbiIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJwYXN0ZUJ1ZmZlck92ZXJmbG93IiwiY3VycmVudCIsInBhc3RlQnVmZmVyIiwicGxhaW5QYXN0ZUJ1ZmZlciIsInJlbWFpbmluZyIsIm1heFBhc3RlQnVmZmVyU2l6ZSIsInRvQWRkIiwic2xpY2UiLCJzYW5pdGl6ZVBhc3RlQ29udGVudCIsInNhbml0aXplZCIsInJlcGxhY2UiLCJpc1RvZ2dsZUNoYXJhY3RlciIsImNoIiwiY29kZSIsImNoYXJDb2RlQXQiLCJjaGFycyIsInJlc3VsdCIsImZvcm1hdEhvdGtleSIsImNvbWJvIiwidHJpbSIsImxhc3RQcm9tcHRFdmVudCIsInByb21wdEhlaWdodCIsImxhc3RPdmVybGF5SGVpZ2h0IiwiaW5saW5lUGFuZWwiLCJoYXNDb252ZXJzYXRpb25Db250ZW50IiwiaXNQcm9tcHRBY3RpdmUiLCJpbnB1dFJlbmRlck9mZnNldCIsInBsYWluUGFzdGVJZGxlTXMiLCJwbGFpblBhc3RlV2luZG93TXMiLCJwbGFpblBhc3RlVHJpZ2dlckNoYXJzIiwicGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzIiwiY3Vyc29yVmlzaWJsZUNvbHVtbiIsImluQnJhY2tldGVkUGFzdGUiLCJpblBsYWluUGFzdGUiLCJwbGFpblBhc3RlVGltZXIiLCJwYXN0ZUJ1cnN0V2luZG93U3RhcnQiLCJwYXN0ZUJ1cnN0Q2hhckNvdW50IiwicGxhaW5SZWNlbnRDaHVua3MiLCJwZW5kaW5nSW5zZXJ0QnVmZmVyIiwicGVuZGluZ0luc2VydFRpbWVyIiwicGVuZGluZ0luc2VydERlbGF5TXMiLCJlbWl0UGFzdGVCdWZmZXIiLCJlbWl0UGFzdGVUaW1lciIsImVtaXRQYXN0ZUNvbW1pdE1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwiYWxsb3dQcm9tcHRSZW5kZXIiLCJwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQiLCJzZWNyZXRNb2RlIiwicGVuZGluZ1JlbmRlciIsImxhc3RSZW5kZXJUaW1lIiwicmVuZGVyVGhyb3R0bGVNcyIsInJlbmRlclRocm90dGxlVGltZXIiLCJsYXN0UmVuZGVyZWRCdWZmZXIiLCJmb3JjZU5leHRSZW5kZXIiLCJsYXN0UmVuZGVyZWRDdXJzb3IiLCJsYXN0UmVuZGVyZWRNb2RlIiwiZGlzcG9zZWQiLCJpbml0aWFsaXppbmciLCJib3VuZFJlc2l6ZUhhbmRsZXIiLCJib3VuZEtleXByZXNzSGFuZGxlciIsImJvdW5kRGF0YUhhbmRsZXIiLCJib3VuZEN0cmxIYW5kbGVyIiwib3JpZ2luYWxFbWl0IiwiaW5wdXRQcm90ZWN0aW9uIiwiaW5wdXRDYXB0dXJlIiwibWVudUl0ZW1zIiwibWVudUluZGV4IiwibWVudVRpdGxlIiwibWVudUNhbGxiYWNrIiwiY29uc3RydWN0b3IiLCJwcm9jZXNzIiwic3Rkb3V0Iiwic3RkaW4iLCJfb3B0aW9ucyIsIm9uIiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwib3V0cHV0SXNUVFkiLCJCb29sZWFuIiwiaXNUVFkiLCJpbnB1dElzVFRZIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJDb250ZXh0TWV0ZXIiLCJjcmVhdGVJbnRlcmZhY2UiLCJ0ZXJtaW5hbCIsInByb21wdCIsInRhYlNpemUiLCJzZXRQcm9tcHQiLCJ1cGRhdGVUZXJtaW5hbFNpemUiLCJpbml0aWFsaXplSW5wdXRQcm90ZWN0aW9uIiwidmVyYm9zZSIsImVudiIsIm9uQXR0YWNrRGV0ZWN0ZWQiLCJyZW5kZXJQcm9tcHQiLCJzZXR1cElucHV0SGFuZGxlcnMiLCJpbml0aWFsaXplIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiZGlzcG9zZSIsImRpc3Bvc2VBbmltYXRpb25zIiwicmVtb3ZlTGlzdGVuZXIiLCJlbWl0IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2xvc2UiLCJzZXRSYXdNb2RlIiwic3VzcGVuZFByb21wdFJlbmRlcmluZyIsInJlc3VtZVByb21wdFJlbmRlcmluZyIsInJlbmRlciIsImludGVyY2VwdGVkVG9nZ2xlIiwiaW50ZXJjZXB0ZWRDdHJsQyIsImludGVyY2VwdGVkQ3RybEQiLCJwZW5kaW5nVG9nZ2xlU2tpcHMiLCJzZWxmIiwiYmluZCIsImV2ZW50IiwiYXJncyIsImRhdGEiLCJzdHIiLCJCdWZmZXIiLCJpc0J1ZmZlciIsInRvU3RyaW5nIiwiU3RyaW5nIiwic2V0SW1tZWRpYXRlIiwiaGFuZGxlQ3RybEMiLCJoYW5kbGVDdHJsRCIsImRpcmVjdFRvZ2dsZSIsImxldHRlciIsImNoYXJBdCIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJoYW5kbGVUb2dnbGUiLCJ0b2dnbGVzIiwiZXh0cmFjdFRvZ2dsZUxldHRlcnMiLCJwYXN0ZVN0YXJ0TWFya2VyIiwicGFzdGVFbmRNYXJrZXIiLCJoYXNCcmFja2V0ZWRTdGFydCIsImhhc0JyYWNrZXRlZEVuZCIsImlzUHJpbnRhYmxlIiwiYyIsImlzTmV3bGluZSIsImluUGFzdGVCdXJzdCIsInNob3VsZEJ1ZmZlciIsInN0YXJ0c1dpdGgiLCJjbGVhbmVkIiwic3RyaXBUb2dnbGVTeW1ib2xzIiwic2V0VGltZW91dCIsImNvbW1pdEVtaXRQYXN0ZUJ1ZmZlciIsImVtaXRLZXlwcmVzc0V2ZW50cyIsImtleSIsImhhbmRsZUtleXByZXNzIiwiZGV0ZWN0VG9nZ2xlRnJvbVJhd0RhdGEiLCJkZXRlY3RlZCIsInRlc3QiLCJmb3JjZVJlbmRlciIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNsZWFyQnVmZmVyIiwiaGFkQnVmZmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsImVtaXRJbnB1dENoYW5nZSIsImNvbnRlbnQiLCJ2YWxpZGF0aW9uIiwidmFsaWRhdGVJbnB1dCIsImJsb2NrZWQiLCJzcGxpdCIsImlzTXVsdGlMaW5lIiwiaXNMb25nQ29udGVudCIsIm5ld0xpbmVzIiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyIiwiaW5zZXJ0U2luZ2xlTGluZVRleHQiLCJoYW5kbGVFbWl0TGV2ZWxQYXN0ZSIsInBheWxvYWQiLCJrZXlJbmZvIiwiY3RybCIsIm1ldGEiLCJzaGlmdCIsInNlcXVlbmNlIiwiSlNPTiIsInN0cmluZ2lmeSIsIm5vcm1hbGl6ZWRLZXkiLCJwYXJzZUVzY2FwZVNlcXVlbmNlIiwia2V5Rm9yUGFzdGUiLCJ0b2dnbGVMZXR0ZXIiLCJtZXRhTGV0dGVyIiwiaGFuZGxlQnJhY2tldGVkUGFzdGUiLCJoYW5kbGVQbGFpblBhc3RlIiwiaXNDdHJsU2hpZnQiLCJsb3dlckxldHRlciIsInVwcGVyTGV0dGVyIiwic2VxIiwiaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlIiwiY2xlYXJDb2xsYXBzZWRSZXN1bHRzIiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsInBvcyIsImFwcGx5U3VnZ2VzdGlvbiIsInNhZmVJbmRleCIsImNvbW1hbmQiLCJxdWV1ZWRJbnB1dCIsInN1Ym1pdFRleHQiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsImlzTWVudUFjdGl2ZSIsIm5hdmlnYXRlTWVudSIsInNlbGVjdE1lbnVJdGVtIiwiY2xvc2VNZW51IiwibmF2aWdhdGVTdWdnZXN0aW9ucyIsInF1ZXVlUGVuZGluZ0luc2VydCIsIm1heFdpZHRoIiwic2FmZVdpZHRoIiwibm93IiwiRGF0ZSIsImJ1cnN0QWN0aXZlIiwiaW5zZXJ0VGV4dCIsImNvbW1pdFBlbmRpbmdJbnNlcnQiLCJjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlIiwiY29uc3VtZWQiLCJwZW5kaW5nIiwic3RhcnRJZHgiLCJpbmRleE9mIiwiZW5kSWR4IiwiY29tbWl0UGFzdGVCdWZmZXIiLCJjb250ZW50QmVmb3JlIiwid2FzVHJ1bmNhdGVkIiwicHJ1bmVSZWNlbnRQbGFpbkNodW5rcyIsImNodW5rIiwidHJhY2tQbGFpblBhc3RlQnVyc3QiLCJyZWNvcmRSZWNlbnRQbGFpbkNodW5rIiwiY2h1bmtNdWx0aXBsZSIsImhhc05ld2xpbmUiLCJidXJzdFRyaWdnZXIiLCJoYXNSZWNlbnROb25OZXdsaW5lIiwic29tZSIsImVudHJ5IiwiZWFybHlOZXdsaW5lVHJpZ2dlciIsIm5ld2xpbmVUcmlnZ2VyIiwibG9va3NMaWtlUGFzdGUiLCJjaHVua0FscmVhZHlDYXB0dXJlZCIsInJlY2xhaW1lZCIsInJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcyIsImNvbWJpbmVkIiwicmVtb3ZlQ291bnQiLCJzdWZmaXgiLCJlbmRzV2l0aCIsInNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCIsImF0Iiwid2luZG93U3RhcnQiLCJmaWx0ZXIiLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJmaWx0ZXJlZCIsImhhc05ld2xpbmVzIiwiY29sbGFwc2VkIiwiaW5FbWl0UGFzdGUiLCJpc0J1ZmZlclNvdXJjZSIsImV4cGFuZENvbGxhcHNlZFBhc3RlIiwic2hvdWxkVHJpbSIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZWQiLCJ2YWxpZGF0ZVByb21wdFN1Ym1pc3Npb24iLCJkaXNwbGF5VXNlclByb21wdCIsImZpcnN0U3BhY2UiLCJoYXNBcmdUZXh0IiwiY3Vyc29yU2xpY2UiLCJjb21tYW5kU2xpY2UiLCJmYWxsYmFja1NsaWNlIiwicGFydGlhbCIsInRyaW1FbmQiLCJwcmV2aW91cyIsImNtZCIsImlkeCIsImZpbmRJbmRleCIsInMiLCJzZXRBdmFpbGFibGVDb21tYW5kcyIsImNvbW1hbmRzIiwic3VibWl0Iiwic2VsZWN0ZWQiLCJkaXJlY3Rpb24iLCJjdXJyZW50SW5kZXgiLCJuZXh0IiwiY2xhbXBlZCIsImxhc3RBZGRlZEV2ZW50U2lnbmF0dXJlIiwiYWRkRXZlbnQiLCJub3JtYWxpemVFdmVudFR5cGUiLCJzaWduYXR1cmUiLCJmb3JtYXR0ZWQiLCJmb3JtYXRDb250ZW50IiwicmF3VHlwZSIsInRpbWVzdGFtcCIsImluc2VydEluZGV4Iiwic3BsaWNlIiwicXVldWVNaWNyb3Rhc2siLCJwcm9jZXNzUXVldWUiLCJyZW5kZXJQcm9tcHRPdmVybGF5IiwiaW1tZWRpYXRlIiwiY29hbGVzY2VkIiwiY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMiLCJyZW5kZXJFdmVudCIsImRlbGF5IiwiaXNNZXJnZWFibGUiLCJ0YXJnZXQiLCJpc0NvbXBhY3RlZCIsIm5lZWRzU2VwYXJhdG9yIiwiZmx1c2hFdmVudHMiLCJ0aW1lb3V0TXMiLCJzdGFydCIsImZvcm1hdHRlZFBsYWluIiwibGluZSIsInRoZW1lIiwicHJpbWFyeSIsImlzR2FyYmFnZU91dHB1dCIsImN1cmF0ZWQiLCJjdXJhdGVSZWFzb25pbmdDb250ZW50Iiwic2hvdWxkUmVuZGVyVGhvdWdodCIsImZvcm1hdFRoaW5raW5nQmxvY2siLCJmb3JtYXRDb21wYWN0VG9vbENhbGwiLCJmb3JtYXRDb21wYWN0VG9vbFJlc3VsdCIsIndyYXBCdWxsZXRUZXh0IiwibGFiZWwiLCJsYWJlbENvbG9yIiwid2FybmluZyIsIm5ld2xpbmVzIiwibWF0Y2giLCJpc0Vycm9yIiwidW5kZWZpbmVkIiwidHJpbW1lZCIsInB1bmN0T25seUxpbmVzIiwibGluZVRyaW1tZWQiLCJub25FbXB0eUxpbmVzIiwibCIsIm1lYW5pbmdmdWxMaW5lcyIsImFscGhhTnVtIiwiYWxwaGFDb3VudCIsInRvdGFsQ291bnQiLCJzYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50IiwiY2xlYW5MaW5lcyIsImFscGhhSW5MaW5lIiwicG9wIiwibGltaXRlZCIsIm1heFNlZ21lbnRzIiwic2VnbWVudHMiLCJmbGF0TWFwIiwic2VlbiIsImRlZHVwZWQiLCJzZWdtZW50Iiwibm9ybWFsaXplZFNlZ21lbnQiLCJhZGQiLCJwcmlvcml0aXplZCIsInByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyIsImxpbWl0ZWRTZWxlY3Rpb24iLCJidWxsZXRlZCIsImVuc3VyZVJlYXNvbmluZ0J1bGxldCIsImxvb2tzU3RydWN0dXJlZFRob3VnaHQiLCJzY29yZWQiLCJpbmRleCIsInNjb3JlIiwicmVhc29uaW5nU2lnbmFsU2NvcmUiLCJoYXNTaWduYWwiLCJpdGVtIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJhY3Rpb25LZXl3b3JkcyIsImtleXdvcmQiLCJub3JtYWxpemVkTG93ZXIiLCJ3b3Jkc1ByZXZpb3VzIiwidyIsIndvcmRzQ3VycmVudCIsInNoYXJlZFdvcmRzIiwid29yZCIsInNpbWlsYXJpdHkiLCJ3b3JkQ291bnQiLCJtZWFuaW5nbGVzc1BhdHRlcm5zIiwicGF0dGVybiIsImZvcm1hdENsYXVkZUNvZGVCbG9jayIsImJ1bGxldCIsImxpbmVJZHgiLCJ3b3JkcyIsImN1cnJlbnRMaW5lIiwicHJlZml4IiwidHJpbVN0YXJ0IiwiZm9ybWF0VG9vbENhbGwiLCJuYW1lTWF0Y2giLCJ0b29sQ29sb3JzIiwidG9vbE5hbWUiLCJhcmdzU3RyIiwicHJlZml4TGVuIiwiaW5kZW50IiwicGFyc2VUb29sQXJncyIsImFyZyIsImFyZ1RleHQiLCJ1aSIsIm11dGVkIiwiZm9ybWF0QXJnVmFsdWUiLCJ2YWx1ZSIsInNlcGFyYXRvciIsInRlc3RMaW5lIiwic3RyaXBBbnNpIiwicmVnZXgiLCJleGVjIiwiaXNRdW90ZWQiLCJpbm5lciIsImxvd2VyS2V5Iiwic2hvdWxkUHJlc2VydmUiLCJtYXhMZW4iLCJ0cnVuY2F0ZWQiLCJmb3JtYXRUb29sUmVzdWx0Iiwic3VtbWFyeU1hdGNoIiwicHJldmlldyIsInRvb2xDb2xvciIsImdldFRvb2xDb2xvciIsImNvbG9yZWRUb29sTmFtZSIsInBhcmFtcyIsInBhcnNlVG9vbFBhcmFtcyIsImZvcm1hdFRvb2xQYXJhbXNDb2xvcmVkIiwiZm9ybWF0VG9vbFBhcmFtcyIsImZpcnN0UGFyYW0iLCJwYXJhbSIsImNvbG9yZWRWYWx1ZSIsImNvbG9yUGFyYW1WYWx1ZSIsInBhcmFtVGV4dCIsInBhcmFtU3RyIiwicGxhaW5MZW5ndGgiLCJ2aXNpYmxlTGVuZ3RoIiwiZXh0cmFjdFRvb2xTdW1tYXJ5IiwicGF0aE1hdGNoIiwicGF0aCIsImZpbGUiLCJjbWRNYXRjaCIsImZvcm1hdEVkaXRSZXN1bHRXaXRoRGlmZiIsImxpbmVNYXRjaCIsImZpbGVNYXRjaCIsInJlYWRNYXRjaCIsImhhc1BhdGgiLCJoYXNDb21tYW5kIiwiaXNQYXRoT3JEaXIiLCJzdW1tYXJ5IiwicHJlc2VydmVGdWxsIiwiZmlyc3RMaW5lIiwic3VtbWFyeVRleHQiLCJzZW50ZW5jZUVuZCIsInNlYXJjaCIsImxhc3RTcGFjZSIsImxhc3RJbmRleE9mIiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJoYXNNb3JlQ29udGVudCIsImV4cGFuZEhpbnQiLCJzdWNjZXNzIiwiZmlsZVBhdGhNYXRjaCIsImZpbGVOYW1lIiwiZnVsbFBhdGgiLCJvbGRNYXRjaCIsIm5ld01hdGNoIiwib2xkQ29udGVudCIsIm5ld0NvbnRlbnQiLCJvbGRMZW4iLCJuZXdMZW4iLCJkaWZmU3RhdCIsIm1heERpZmZMZW4iLCJvbGRQcmV2aWV3IiwiY2xlYW5PbGQiLCJuZXdQcmV2aWV3IiwiY2xlYW5OZXciLCJtZXRhZGF0YSIsImZpbGVQYXRoIiwib2xkTGVuZ3RoIiwibmV3TGVuZ3RoIiwiZGlmZiIsIm9sZCIsIm5ldyIsImZvcm1hdENvbXBhY3RSZXNwb25zZSIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwiZmlyc3ROb25FbXB0eSIsImluQ29kZUJsb2NrIiwiY29kZUJsb2NrTGFuZyIsImNvZGVCbG9ja0J1ZmZlciIsInJhd0xpbmUiLCJ0cmltbWVkTGluZSIsImNvZGVJbmRlbnQiLCJjb2RlTGluZSIsImhlYWRlck1hdGNoIiwibGV2ZWwiLCJoZWFkZXJUZXh0IiwiZm9ybWF0dGVkSGVhZGVyIiwiZm9ybWF0TWFya2Rvd25IZWFkZXIiLCJkaXZpZGVyV2lkdGgiLCJ0YWJsZVByZWZpeCIsImxpc3RNYXRjaCIsImxpc3RDb250ZW50IiwiZm9ybWF0dGVkTGlzdCIsImZvcm1hdElubGluZVRleHQiLCJsaXN0QnVsbGV0Iiwic2Vjb25kYXJ5IiwibGlzdEluZGVudCIsImlzRmlyc3RMaXN0TGluZSIsImNhbmRpZGF0ZSIsImZvcm1hdHRlZExpbmUiLCJwcmVmaXhMZW5ndGgiLCJmb3JtYXR0ZWRUZXh0IiwiaGVhZGVyV2lkdGgiLCJ0b3BCb3JkZXIiLCJoZWFkZXJMaW5lIiwidW5kZXJsaW5lIiwibmVvbiIsImxhYmVsSWNvbiIsInRob3VnaHRUeXBlIiwib3JhbmdlIiwicHVycGxlIiwiY29sb3JlZExhYmVsIiwid3JhcFRleHRUb1dpZHRoIiwiZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCIsImVsYXBzZWQiLCJtaW5zIiwic2VjcyIsImZvcm1hdENvbXBhY3RCbG9jayIsInBhZGRpbmciLCJsZWZ0UGFkIiwicmlnaHRQYWQiLCJjZWlsIiwiYWRkQ29tcGFjdEJsb2NrIiwiZm9ybWF0dGVkQ29udGVudCIsImV4cGFuZExhc3RUb29sUmVzdWx0IiwiaXNTdHJ1Y3R1cmVkIiwiaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsInJlbmRlcmVkIiwiZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQiLCJoZWFkZXIiLCJmb3JtYXR0ZWRMaW5lcyIsImdldENvbGxhcHNlZFJlc3VsdENvdW50Iiwic2V0TW9kZSIsIndhc1N0cmVhbWluZyIsInN0YXJ0U3Bpbm5lckFuaW1hdGlvbiIsInN0b3BTcGlubmVyQW5pbWF0aW9uIiwic2V0SW50ZXJ2YWwiLCJzcGlubmVyRnJhbWVzIiwiYnJhaWxsZSIsInNldEFjdGl2aXR5IiwidXBkYXRlU3RyZWFtaW5nVG9rZW5zIiwidG9rZW5zIiwiZm9ybWF0VG9rZW5Db3VudCIsInRvRml4ZWQiLCJnZXRNb2RlIiwidXBkYXRlU3RhdHVzIiwidXBkYXRlU3RhdHVzQnVuZGxlIiwibWFpbiIsIm92ZXJyaWRlIiwic3RyZWFtaW5nIiwicHJldlN0cmVhbWluZyIsImNoYW5nZWQiLCJtYWluQ2hhbmdlZCIsIm92ZXJyaWRlQ2hhbmdlZCIsInN0cmVhbWluZ0NoYW5nZWQiLCJzdHJlYW1pbmdJbnRyb2R1Y2UiLCJzdHJlYW1pbmdDbGVhcmVkIiwib25seVN0cmVhbWluZ0NoYW5nZWQiLCJza2lwU3RyZWFtaW5nUmVuZGVyIiwic2hvdWxkUmVuZGVyIiwidXBkYXRlU3RhdHVzTWV0YSIsInVwZGF0ZU1vZGVUb2dnbGVzIiwic3RhdGUiLCJ0aGlua2luZ0hvdGtleSIsImNyaXRpY2FsQXBwcm92YWxIb3RrZXkiLCJhdXRvQ29udGludWVIb3RrZXkiLCJhbHBoYVplcm9Ib3RrZXkiLCJkZWJ1Z0hvdGtleSIsImNsZWFyIiwidXBkYXRlUkxTdGF0dXMiLCJjbGVhclJMU3RhdHVzIiwiZ2V0UkxTdGF0dXMiLCJ1cGRhdGVTZWN1cmVUb29sc1N0YXR1cyIsInJlY29yZFNlY3VyZVRvb2xJbnZvY2F0aW9uIiwiaW52b2NhdGlvbnMiLCJ1cGRhdGVzIiwibGFzdFRvb2xVc2VkIiwiZXhlY3V0ZSIsImFjdGl2ZSIsImxhc3RDb21tYW5kIiwibGFzdEV4aXRDb2RlIiwiZXhpdENvZGUiLCJleGVjQ291bnQiLCJwcm9iZSIsImxhc3RUYXJnZXQiLCJzZXJ2aWNlc0ZvdW5kIiwic2VydmljZXMiLCJwcm9iZUNvdW50IiwibGFzdEFjdGlvbiIsImFjdGlvbiIsImtleXNTdG9yZWQiLCJrZXlzQ291bnQiLCJwZXJzaXN0ZW50IiwiZ2V0U2VjdXJlVG9vbHNTdGF0dXMiLCJzZXRJbmxpbmVQYW5lbCIsImhhc0NvbnRlbnQiLCJsaW1pdElubGluZVBhbmVsIiwic3VwcG9ydHNJbmxpbmVQYW5lbCIsImNsZWFySW5saW5lUGFuZWwiLCJzZXRNZW51IiwiaXRlbXMiLCJjYWxsYmFjayIsImluaXRpYWxJbmRleCIsImlzQWN0aXZlIiwicmVuZGVyTWVudVBhbmVsIiwiaXNTZWxlY3RlZCIsImlzRGlzYWJsZWQiLCJkaXNhYmxlZCIsImRpbSIsImRlc2MiLCJuZXdJbmRleCIsImF0dGVtcHRzIiwibWF4QXR0ZW1wdHMiLCJtYXhMaW5lcyIsIm92ZXJmbG93IiwiaW5kaWNhdG9yIiwidGFpbENvdW50IiwidGFpbCIsIm92ZXJsYXkiLCJidWlsZE92ZXJsYXlMaW5lcyIsInJlbmRlcmVkTGluZXMiLCJ0cnVuY2F0ZUxpbmUiLCJwcm9tcHRJbmRleCIsImhlaWdodCIsImxpbmVzVG9Ub3AiLCJjbGVhckhlaWdodCIsIm1vdmVCYWNrVXAiLCJwcm9tcHRDb2wiLCJsaW5lc1RvTW92ZVVwIiwiZGl2aWRlciIsImZhbGxiYWNrQWN0aXZpdHkiLCJyYXciLCJzcGlubmVyQ2hhcnMiLCJzcGlubmVyQ2hhciIsInN0YXJDaGFyIiwic3Bpbm5lckRlY29yYXRlZCIsImFjY2VudCIsImdlbmVyaWNBY3Rpdml0aWVzIiwiZGlzcGxheUFjdGl2aXR5IiwibmVlZHNFbGxpcHNpcyIsImVsYXBzZWRDb2xvciIsInBhcnRzIiwiYWN0aXZpdHlUZXh0IiwiYWN0aXZpdHlMaW5lIiwid3JhcHBlZCIsIndyYXBPdmVybGF5TGluZSIsImlucHV0TGluZSIsImJ1aWxkSW5wdXRMaW5lIiwiaW5wdXRMaW5lcyIsImFyciIsInBhbmVsTGluZSIsInN1Z2dlc3Rpb24iLCJtYXJrZXIiLCJjbWRUZXh0IiwiZGVzY1RleHQiLCJjb21wYWN0U3RhdHVzIiwiYnVpbGRDb21wYWN0U3RhdHVzTGluZSIsInRvZ2dsZUxpbmUiLCJidWlsZFRvZ2dsZUxpbmUiLCJtb2RlbCIsInByb3ZpZGVyIiwiY29udGV4dFBlcmNlbnQiLCJ1c2VkIiwiY2xhbXBQZXJjZW50YWdlIiwiYmFyV2lkdGgiLCJiYXJDb2xvciIsImdldENvbnRleHRDb2xvciIsImJhciIsInByb2ZpbGUiLCJ3b3Jrc3BhY2UiLCJkaXJlY3RvcnkiLCJhYmJyZXZpYXRlUGF0aCIsImJ1aWxkQ2hyb21lTGluZXMiLCJzdGF0dXNMaW5lcyIsImJ1aWxkU3RhdHVzQmxvY2siLCJtZXRhTGluZXMiLCJidWlsZE1ldGFCbG9jayIsInBhdGhWYWx1ZSIsImhvbWUiLCJob21lZGlyIiwic3RhdHVzTGFiZWwiLCJjb21wb3NlU3RhdHVzTGFiZWwiLCJhcHBseVRvbmUiLCJ0b25lIiwic2Vzc2lvblRpbWUiLCJ1cGRhdGUiLCJ3cmFwU2VnbWVudHMiLCJmb3JtYXRNZXRhU2VnbWVudCIsIndyaXRlcyIsInRvb2xTdW1tYXJ5Iiwic2Vzc2lvbkxhYmVsIiwidmVyc2lvbiIsInJsU2VnbWVudHMiLCJidWlsZFJMU3RhdHVzU2VnbWVudHMiLCJzZWN1cmVUb29sc1NlZ21lbnRzIiwiYnVpbGRTZWN1cmVUb29sc1NlZ21lbnRzIiwiYWN0aXZlVmFyaWFudCIsIndpbnMiLCJjdXJyZW50TW9kdWxlIiwicmVmaW5lciIsInRpZXMiLCJ0b3RhbEdhbWVzIiwibGVhZGVyIiwicENvbG9yIiwickNvbG9yIiwicFNjb3JlIiwiclNjb3JlIiwidHJvcGh5Iiwic3RyZWFrVGV4dCIsInN0cmVhayIsInBCYXJzIiwickJhcnMiLCJ0QmFycyIsImlzUGFyYWxsZWwiLCJwYXJhbGxlbEV4ZWN1dGlvbiIsInZhcmlhbnRJY29uIiwidmFyaWFudExhYmVsIiwidmFyaWFudENvbG9yIiwibGFzdFdpbm5lciIsIndpbm5lckljb24iLCJjdXJyZW50U3RlcCIsInN0ZXBUZXh0IiwidHJ1bmNhdGVNaWRkbGUiLCJzdGVwc0NvbXBsZXRlZCIsInBjdCIsInNjb3JlcyIsInBWYWwiLCJyVmFsIiwicERpc3BsYXkiLCJyRGlzcGxheSIsImFjY3VyYWN5IiwicEFjYyIsInJBY2MiLCJzdCIsInNlY0ljb24iLCJ0b29sSW5kaWNhdG9ycyIsImV4ZWNJY29uIiwic3ZjQ291bnQiLCJzdGF0ZUljb24iLCJFeGVjdXRlIiwiUHJvYmUiLCJTdGF0ZSIsIlRyYW5zZm9ybSIsIlRhb09wcyIsIm1hZ2VudGEiLCJrZWVwTGVuIiwic3RhdHVzZXMiLCJjb2xvcml6ZXIiLCJidWlsZENvbnRyb2xMaW5lcyIsInNob3J0Y3V0TGluZSIsImJ1aWxkU2hvcnRjdXRMaW5lIiwiYWRkVG9nZ2xlIiwiaG90a2V5IiwiYWxwaGFaZXJvQWN0aXZlIiwiYXBwcm92YWxNb2RlIiwiYXBwcm92YWxBY3RpdmUiLCJhdXRvQ29udGludWVBY3RpdmUiLCJ0aGlua2luZ0xhYmVsUmF3IiwidGhpbmtpbmdNb2RlTGFiZWwiLCJ0aGlua2luZ0xhYmVsIiwidGhpbmtpbmdBY3RpdmUiLCJidWlsZExpbmUiLCJpbmNsdWRlSG90a2V5cyIsInRvZ2dsZSIsInN0YXRlVGV4dCIsImhvdGtleVRleHQiLCJhZGRIb3RrZXkiLCJsaW5lc1RleHQiLCJjaGFyc1RleHQiLCJwcm9tcHRXaWR0aCIsImNvbnRpbnVhdGlvbkluZGVudCIsImNvbnRpbnVhdGlvbldpZHRoIiwicmF3QnVmZmVyIiwiYnVmZmVyTGluZXMiLCJ0b3RhbENoYXJzIiwiY3Vyc29yTGluZSIsImN1cnNvckNvbCIsImZvdW5kQ3Vyc29yIiwibGluZUluZGV4IiwiaXNGaXJzdExvZ2ljYWxMaW5lIiwibGluZVN0YXJ0Q2hhciIsImZpcnN0TGluZVdpZHRoIiwiY29udExpbmVXaWR0aCIsImlzRmlyc3REaXNwbGF5TGluZSIsImRpc3BsYXlMaW5lIiwiY2h1bmtTdGFydCIsImNodW5rRW5kIiwib2Zmc2V0SW5DaHVuayIsImxhc3RMaW5lIiwidGFyZ2V0TGluZSIsInZpc2libGVQYXJ0IiwiY3Vyc29yUG9zIiwiYmVmb3JlIiwiYWZ0ZXIiLCJ0ZXh0UGFydCIsImJ1aWxkSW5wdXRXaW5kb3ciLCJhdmFpbGFibGUiLCJjdXJzb3JJbmRleCIsIm9mZnNldCIsIm1heE9mZnNldCIsIndpbmRvdyIsImRpc3BsYXkiLCJjaGFyIiwiY3Vyc29ySW5XaW5kb3ciLCJjYXB0dXJlSW5wdXQiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzZXRCdWZmZXIiLCJyZWFzb24iLCJjYXB0dXJlIiwibGltaXQiLCJ2aXNpYmxlIiwidG9rZW4iLCJzbGljZUxlbmd0aCIsImdldEJ1ZmZlciIsImdldEN1cnNvciIsInNldEJ1ZmZlciIsInJlcXVlc3RlZEN1cnNvciIsInNldFNlY3JldE1vZGUiLCJlbmFibGVkIiwic2V0TW9kZVN0YXR1cyIsInNob3dDb21wYWN0aW5nU3RhdHVzIiwiaGlkZUNvbXBhY3RpbmdTdGF0dXMiLCJlbWl0UHJvbXB0IiwicHVzaFByb21wdEV2ZW50IiwibXMiLCJjb2x1bW5zIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlVuaWZpZWRVSVJlbmRlcmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pZmllZFVJUmVuZGVyZXIgLSBDbGF1ZGUgQ29kZSBzdHlsZSBtaW5pbWFsaXN0IHRlcm1pbmFsIFVJLlxuICpcbiAqIEdvYWxzOlxuICogLSBTaW5nbGUgZXZlbnQgcGlwZWxpbmUgZm9yIGV2ZXJ5dGhpbmcgKHByb21wdCDihpIgdGhvdWdodCDihpIgdG9vbC9idWlsZC90ZXN0IOKGkiByZXNwb25zZSkuXG4gKiAtIFBpbm5lZCBzdGF0dXMvbWV0YSBvbmx5IChuZXZlciBpbiBzY3JvbGxiYWNrKS5cbiAqIC0gU2Nyb2xsYmFjayBvbmx5IHNob3dzIGV2ZW50czsgbm8gZHVwbGljYXRlIHN0YXR1cyBsaWtlIFwiV29ya2luZyBvbiB5b3VyIHJlcXVlc3RcIiBvciBcIlJlYWR5IGZvciBwcm9tcHRzXCIuXG4gKiAtIFN0cmVhbWluZzogZmlyc3QgY2h1bmsgc2V0cyBhIG9uZS1saW5lIGJhbm5lcjsgcmVtYWluZGVyIHN0cmVhbXMgbmF0dXJhbGx5IChvcHRpb25hbCkuXG4gKiAtIENvbGxhcHNpYmxlLWxpa2Ugc3VtbWFyaWVzOiB3ZSBmb3JtYXQgYSBjb21wYWN0IGhlYWRpbmcgd2l0aCBhbiBlbGxpcHNpcyBpbmRpY2F0b3IsIGJ1dCBhdm9pZCBjdHJsK28gaGludHMuXG4gKi9cblxuaW1wb3J0ICogYXMgcmVhZGxpbmUgZnJvbSAnbm9kZTpyZWFkbGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgeyBob21lZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IHsgdGhlbWUsIHNwaW5uZXJGcmFtZXMsIGdldFRvb2xDb2xvciB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHtcbiAgY2xhbXBQZXJjZW50YWdlLFxuICBnZXRDb250ZXh0Q29sb3IsXG59IGZyb20gJy4vdWlDb25zdGFudHMuanMnO1xuaW1wb3J0IHsgZm9ybWF0SW5saW5lVGV4dCB9IGZyb20gJy4vcmljaFRleHQuanMnO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZUlucHV0UHJvdGVjdGlvbiwgZ2V0SW5wdXRQcm90ZWN0aW9uLCB0eXBlIElucHV0UHJvdGVjdGlvbiB9IGZyb20gJy4uL2NvcmUvaW5wdXRQcm90ZWN0aW9uLmpzJztcbmltcG9ydCB7IFxuICBmb3JtYXRUaG91Z2h0LCBcbiAgZm9ybWF0VG9vbFJlc3VsdCwgXG4gIGZvcm1hdFByb2dyZXNzSW5kaWNhdG9yLCBcbiAgZm9ybWF0U2VjdGlvbkhlYWRlcixcbiAgdHlwZSBUaG91Z2h0RGlzcGxheU9wdGlvbnMsXG4gIHR5cGUgVG9vbFJlc3VsdERpc3BsYXlPcHRpb25zLFxuICB0eXBlIFZpc3VhbFRvbmUgXG59IGZyb20gJy4vcHJlbWl1bUNvbXBvbmVudHMuanMnO1xuXG4vLyBVSSBoZWxwZXIgbWV0aG9kcyBmb3Igc2VjdXJpdHkgY29tcG9uZW50c1xuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUJhbm5lcih0aXRsZTogc3RyaW5nLCBzdWJ0aXRsZT86IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVlCcgKyAn4pWQJy5yZXBlYXQoNjgpICsgJ+KVlycpKTtcbiAgbGluZXMucHVzaChjaGFsay5jeWFuKCfilZEgJykgKyBjaGFsay5jeWFuLmJvbGQodGl0bGUucGFkRW5kKDY2KSkgKyBjaGFsay5jeWFuKCcg4pWRJykpO1xuICBpZiAoc3VidGl0bGUpIHtcbiAgICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkSAnKSArIGNoYWxrLndoaXRlKHN1YnRpdGxlLnBhZEVuZCg2NikpICsgY2hhbGsuY3lhbignIOKVkScpKTtcbiAgfVxuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVmicgKyAn4pWQJy5yZXBlYXQoNjgpICsgJ+KVnScpKTtcbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UHJvZ3Jlc3MocGhhc2U6IHN0cmluZywgc3RlcDogbnVtYmVyLCB0b3RhbFN0ZXBzOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgoc3RlcCAvIHRvdGFsU3RlcHMpICogMTAwKTtcbiAgY29uc3QgcHJvZ3Jlc3NCYXIgPSAn4paIJy5yZXBlYXQoTWF0aC5mbG9vcihwZXJjZW50YWdlIC8gNSkpICsgJ+KWkScucmVwZWF0KDIwIC0gTWF0aC5mbG9vcihwZXJjZW50YWdlIC8gNSkpO1xuICByZXR1cm4gYCR7Y2hhbGsuY3lhbign4qCLJyl9ICR7Y2hhbGsud2hpdGUocGhhc2UpfTogWyR7Y2hhbGsuZ3JlZW4ocHJvZ3Jlc3NCYXIpfV0gJHtwZXJjZW50YWdlfSUgKCR7c3RlcH0vJHt0b3RhbFN0ZXBzfSlgO1xufVxuXG4vLyBBcHBsZSBTZWN1cml0eSBVSSBjb21wYXRpYmlsaXR5IG1ldGhvZHMgKHJlcGxhY2VzIEFwcGxlU2VjdXJpdHlVSS50cylcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZWN1cml0eUJhbm5lcih0aXRsZTogc3RyaW5nLCBzdWJ0aXRsZT86IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHdpZHRoID0gNzA7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkCcucmVwZWF0KHdpZHRoKSkpO1xuICBsaW5lcy5wdXNoKGAke2NoYWxrLmN5YW4oJ/Cfm6HvuI8nKX0gJHtjaGFsay5jeWFuLmJvbGQodGl0bGUudG9VcHBlckNhc2UoKSl9YCk7XG4gIGlmIChzdWJ0aXRsZSkge1xuICAgIGxpbmVzLnB1c2goY2hhbGsuZ3JheShgICAke3N1YnRpdGxlfWApKTtcbiAgfVxuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkCcucmVwZWF0KHdpZHRoKSkpO1xuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZWN1cml0eVNwaW5uZXIobWVzc2FnZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGAke2NoYWxrLmN5YW4oJ+KgiycpfSAke2NoYWxrLndoaXRlKG1lc3NhZ2UpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTZWN1cml0eUZpbmRpbmcoZmluZGluZzogYW55KTogc3RyaW5nIHtcbiAgY29uc3Qgc2V2ZXJpdHlDb2xvcnMgPSB7XG4gICAgY3JpdGljYWw6IGNoYWxrLnJlZEJyaWdodCxcbiAgICBoaWdoOiBjaGFsay5yZWQsXG4gICAgbWVkaXVtOiBjaGFsay55ZWxsb3csXG4gICAgbG93OiBjaGFsay5ibHVlLFxuICAgIGluZm86IGNoYWxrLmdyYXlcbiAgfTtcbiAgXG4gIGNvbnN0IHNldmVyaXR5SWNvbnMgPSB7XG4gICAgY3JpdGljYWw6IGNoYWxrLnJlZEJyaWdodCgn4pqgJyksXG4gICAgaGlnaDogY2hhbGsucmVkKCfilrInKSxcbiAgICBtZWRpdW06IGNoYWxrLnllbGxvdygn4payJyksXG4gICAgbG93OiBjaGFsay5ibHVlKCfilrwnKSxcbiAgICBpbmZvOiBjaGFsay5ncmF5KCfihLknKVxuICB9O1xuICBcbiAgY29uc3QgY29sb3IgPSBzZXZlcml0eUNvbG9yc1tmaW5kaW5nLnNldmVyaXR5XSB8fCBjaGFsay53aGl0ZTtcbiAgY29uc3QgaWNvbiA9IHNldmVyaXR5SWNvbnNbZmluZGluZy5zZXZlcml0eV0gfHwgY2hhbGsuZ3JheSgn4oS5Jyk7XG4gIFxuICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgbGluZXMucHVzaChgJHtpY29ufSAke2NvbG9yLmJvbGQoZmluZGluZy5uYW1lIHx8IGZpbmRpbmcudHlwZSB8fCAnRmluZGluZycpfWApO1xuICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnRGVzY3JpcHRpb246Jyl9ICR7Y2hhbGsud2hpdGUoZmluZGluZy5kZXNjcmlwdGlvbiB8fCAnTm8gZGVzY3JpcHRpb24nKX1gKTtcbiAgaWYgKGZpbmRpbmcuZXZpZGVuY2UpIHtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnRXZpZGVuY2U6Jyl9ICR7Y2hhbGsud2hpdGUoZmluZGluZy5ldmlkZW5jZSl9YCk7XG4gIH1cbiAgaWYgKGZpbmRpbmcucmVtZWRpYXRpb24pIHtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnUmVtZWRpYXRpb246Jyl9ICR7Y2hhbGsuZ3JlZW4oZmluZGluZy5yZW1lZGlhdGlvbil9YCk7XG4gIH1cbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2VjdXJpdHlTdW1tYXJ5KHJlc3VsdHM6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBsaW5lcy5wdXNoKGNoYWxrLmN5YW4oJ+KVkCcucmVwZWF0KDcwKSkpO1xuICBsaW5lcy5wdXNoKGAke2NoYWxrLmN5YW4oJ/Cfm6HvuI8nKX0gJHtjaGFsay5jeWFuLmJvbGQoJ1NFQ1VSSVRZIEFVRElUIFNVTU1BUlknKX1gKTtcbiAgbGluZXMucHVzaChjaGFsay5jeWFuKCfilZAnLnJlcGVhdCg3MCkpKTtcbiAgXG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdDYW1wYWlnbjonKX0gJHtjaGFsay53aGl0ZShyZXN1bHRzLmNhbXBhaWduIHx8ICdVbmtub3duJyl9YCk7XG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdTdGFydCBUaW1lOicpfSAke2NoYWxrLndoaXRlKHJlc3VsdHMuc3RhcnRUaW1lIHx8ICdVbmtub3duJyl9YCk7XG4gIGlmIChyZXN1bHRzLmVuZFRpbWUpIHtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnRW5kIFRpbWU6Jyl9ICR7Y2hhbGsud2hpdGUocmVzdWx0cy5lbmRUaW1lKX1gKTtcbiAgfVxuICBpZiAocmVzdWx0cy5kdXJhdGlvbikge1xuICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdEdXJhdGlvbjonKX0gJHtjaGFsay53aGl0ZShgJHtyZXN1bHRzLmR1cmF0aW9ufW1zYCl9YCk7XG4gIH1cbiAgXG4gIGlmIChyZXN1bHRzLmZpbmRpbmdzICYmIEFycmF5LmlzQXJyYXkocmVzdWx0cy5maW5kaW5ncykpIHtcbiAgICBjb25zdCBjb3VudHM6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7IGNyaXRpY2FsOiAwLCBoaWdoOiAwLCBtZWRpdW06IDAsIGxvdzogMCwgaW5mbzogMCB9O1xuICAgIHJlc3VsdHMuZmluZGluZ3MuZm9yRWFjaCgoZjogYW55KSA9PiB7XG4gICAgICBjb3VudHNbZi5zZXZlcml0eV0gPSAoY291bnRzW2Yuc2V2ZXJpdHldIHx8IDApICsgMTtcbiAgICB9KTtcbiAgICBcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnRmluZGluZ3M6Jyl9YCk7XG4gICAgT2JqZWN0LmVudHJpZXMoY291bnRzKS5mb3JFYWNoKChbc2V2ZXJpdHksIGNvdW50XSkgPT4ge1xuICAgICAgaWYgKGNvdW50ID4gMCkge1xuICAgICAgICBjb25zdCBjb2xvciA9IHNldmVyaXR5Q29sb3JzW3NldmVyaXR5XSB8fCBjaGFsay53aGl0ZTtcbiAgICAgICAgbGluZXMucHVzaChgICAgICR7Y29sb3IoYCR7c2V2ZXJpdHkudG9VcHBlckNhc2UoKX06YCl9ICR7Y2hhbGsud2hpdGUoY291bnQpfWApO1xuICAgICAgfVxuICAgIH0pO1xuICAgIGxpbmVzLnB1c2goYCAgICAke2NoYWxrLmdyYXkoJ1RvdGFsOicpfSAke2NoYWxrLndoaXRlKHJlc3VsdHMuZmluZGluZ3MubGVuZ3RoKX1gKTtcbiAgfVxuICBcbiAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0U2VjdXJpdHlTdGF0dXMoc3RhdHVzOiBzdHJpbmcsIGRldGFpbHM6IHN0cmluZyk6IHN0cmluZyB7XG4gIGNvbnN0IHN0YXR1c0ljb25zID0ge1xuICAgIGhlYWx0aHk6IGAke2NoYWxrLmdyZWVuKCfil48nKX1gLFxuICAgIGRlZ3JhZGVkOiBgJHtjaGFsay55ZWxsb3coJ+KXjycpfWAsXG4gICAgdW5hdmFpbGFibGU6IGAke2NoYWxrLnJlZCgn4pePJyl9YFxuICB9O1xuICBcbiAgY29uc3QgaWNvbiA9IHN0YXR1c0ljb25zW3N0YXR1c10gfHwgY2hhbGsuZ3JheSgn4pePJyk7XG4gIHJldHVybiBgJHtpY29ufSAke2NoYWxrLndoaXRlKGRldGFpbHMpfWA7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRBdWRpdFByb2dyZXNzKHBoYXNlOiBzdHJpbmcsIHByb2dyZXNzOiBudW1iZXIsIHRvdGFsOiBudW1iZXIpOiBzdHJpbmcge1xuICBjb25zdCBwZXJjZW50YWdlID0gTWF0aC5yb3VuZCgocHJvZ3Jlc3MgLyB0b3RhbCkgKiAxMDApO1xuICBjb25zdCBmaWxsZWQgPSBNYXRoLnJvdW5kKHBlcmNlbnRhZ2UgLyAxMCk7XG4gIGNvbnN0IGVtcHR5ID0gMTAgLSBmaWxsZWQ7XG5cbiAgY29uc3QgcHJvZ3Jlc3NCYXIgPSBgJHtjaGFsay5ncmVlbign4paIJy5yZXBlYXQoZmlsbGVkKSl9JHtjaGFsay5ncmF5KCfilpEnLnJlcGVhdChlbXB0eSkpfWA7XG5cbiAgcmV0dXJuIGAke2NoYWxrLmdyYXkoJ+KPsScpfSAke2NoYWxrLmN5YW4oJ1NlY3VyaXR5IEF1ZGl0Jyl9IC0gJHtjaGFsay53aGl0ZShwaGFzZSl9XFxuYCArXG4gICAgICAgICBgICAke3Byb2dyZXNzQmFyfSAke2NoYWxrLndoaXRlKGAke3Byb2dyZXNzfS8ke3RvdGFsfWApfSAke2NoYWxrLmdyYXkoYCgke3BlcmNlbnRhZ2V9JSlgKX1gO1xufVxuXG4vKipcbiAqIEZvcm1hdCBhIHNlY3VyaXR5IHRvb2xzIHN1bW1hcnkgbWVzc2FnZSBmb3IgZGlzcGxheS5cbiAqIFNob3dzIHRvb2xraXQgY2FwYWJpbGl0aWVzIGFuZCB0b29sIGRlc2NyaXB0aW9ucyBpbiBDbGF1ZGUgQ29kZSBzdHlsZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdFNlY3VyZVRvb2xzU3VtbWFyeShvcHRpb25zPzoge1xuICBzaG93VGl0bGU/OiBib29sZWFuO1xuICB0b29scz86IEFycmF5PHsgbmFtZTogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBzdGF0dXM/OiAnYWN0aXZlJyB8ICdyZWFkeScgfCAnZGlzYWJsZWQnIH0+O1xufSk6IHN0cmluZyB7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBzaG93VGl0bGUgPSBvcHRpb25zPy5zaG93VGl0bGUgPz8gdHJ1ZTtcblxuICBpZiAoc2hvd1RpdGxlKSB7XG4gICAgbGluZXMucHVzaChgJHtjaGFsay53aGl0ZSgn4o+6Jyl9ICR7Y2hhbGsud2hpdGUoJ0FkZGVkIG5ldyBzZWN1cml0eSB0b29scyBhbmQgaW1wcm92ZWQnKX1gKTtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsud2hpdGUoJ2V4aXN0aW5nIG9uZXMgZm9yIG1vcmUgdmVyc2F0aWxlJyl9YCk7XG4gICAgbGluZXMucHVzaChgICAke2NoYWxrLndoaXRlKCdvcGVyYXRpb25zLicpfWApO1xuICB9XG5cbiAgY29uc3QgZGVmYXVsdFRvb2xzID0gW1xuICAgIHsgbmFtZTogJ0V4ZWN1dGUnLCBkZXNjcmlwdGlvbjogJ3NlY3VyZSBzaGVsbCBjb21tYW5kcycsIHN0YXR1czogJ2FjdGl2ZScgYXMgY29uc3QgfSxcbiAgICB7IG5hbWU6ICdQcm9iZScsIGRlc2NyaXB0aW9uOiAndGFyZ2V0IGFuYWx5c2lzJywgc3RhdHVzOiAnYWN0aXZlJyBhcyBjb25zdCB9LFxuICAgIHsgbmFtZTogJ1N0YXRlJywgZGVzY3JpcHRpb246ICdzZXNzaW9uIG1hbmFnZW1lbnQnLCBzdGF0dXM6ICdhY3RpdmUnIGFzIGNvbnN0IH0sXG4gIF07XG5cbiAgY29uc3QgdG9vbHMgPSBvcHRpb25zPy50b29scyB8fCBkZWZhdWx0VG9vbHM7XG5cbiAgY29uc3QgdG9vbFBhcnRzID0gdG9vbHMubWFwKHRvb2wgPT4ge1xuICAgIGNvbnN0IHN0YXR1c0ljb24gPSB0b29sLnN0YXR1cyA9PT0gJ2FjdGl2ZScgPyBjaGFsay5ncmVlbign4pePJykgOlxuICAgICAgICAgICAgICAgICAgICAgICB0b29sLnN0YXR1cyA9PT0gJ3JlYWR5JyA/IGNoYWxrLnllbGxvdygn4peLJykgOlxuICAgICAgICAgICAgICAgICAgICAgICBjaGFsay5ncmF5KCfil4snKTtcbiAgICByZXR1cm4gYCR7c3RhdHVzSWNvbn0gJHtjaGFsay5jeWFuKGAnJHt0b29sLm5hbWV9J2ApfSBmb3IgJHtjaGFsay53aGl0ZSh0b29sLmRlc2NyaXB0aW9uKX1gO1xuICB9KTtcblxuICBpZiAodG9vbFBhcnRzLmxlbmd0aCA+IDApIHtcbiAgICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsud2hpdGUoXCJZb3Ugbm93IGhhdmVcIil9ICR7dG9vbFBhcnRzWzBdfSxgKTtcbiAgICBmb3IgKGxldCBpID0gMTsgaSA8IHRvb2xQYXJ0cy5sZW5ndGggLSAxOyBpKyspIHtcbiAgICAgIGxpbmVzLnB1c2goYCAgJHt0b29sUGFydHNbaV19LGApO1xuICAgIH1cbiAgICBpZiAodG9vbFBhcnRzLmxlbmd0aCA+IDEpIHtcbiAgICAgIGxpbmVzLnB1c2goYCAgJHtjaGFsay53aGl0ZSgnYW5kJyl9ICR7dG9vbFBhcnRzW3Rvb2xQYXJ0cy5sZW5ndGggLSAxXX3igJRgKTtcbiAgICB9XG4gICAgbGluZXMucHVzaChgICAke2NoYWxrLndoaXRlKCdlYWNoIHdpdGggZW5oYW5jZWQgb3V0cHV0IGZvcm1hdHRpbmcuJyl9YCk7XG4gIH1cblxuICBsaW5lcy5wdXNoKGAgICR7Y2hhbGsuZ3JheSgnVGhpcyBleHBhbmRzIHlvdXIgdG9vbGtpdFxcJ3MgY2FwYWJpbGl0aWVzJyl9YCk7XG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCd3aGlsZSBtYWludGFpbmluZyBzdHJpY3QgaW5wdXQgc2FuaXRpemF0aW9uJyl9YCk7XG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCdhbmQgc2VjdXJpdHkuJyl9YCk7XG4gIGxpbmVzLnB1c2goYCAgJHtjaGFsay5ncmF5KCcoc3JjL2NhcGFiaWxpdGllcy9tYXhPZmZlbnNpdmVVa3JhaW5lQ2FwYWJpbGl0eS50cyknKX1gKTtcblxuICByZXR1cm4gbGluZXMuam9pbignXFxuJyk7XG59XG5cbmNvbnN0IHNldmVyaXR5Q29sb3JzOiBSZWNvcmQ8c3RyaW5nLCBhbnk+ID0ge1xuICBjcml0aWNhbDogKHRleHQ6IHN0cmluZykgPT4gY2hhbGsuaGV4KCcjRkY2QjZCJykodGV4dCksIC8vIHJlZEJyaWdodFxuICBoaWdoOiAodGV4dDogc3RyaW5nKSA9PiBjaGFsay5oZXgoJyNGRjUyNTInKSh0ZXh0KSwgLy8gcmVkXG4gIG1lZGl1bTogKHRleHQ6IHN0cmluZykgPT4gY2hhbGsuaGV4KCcjRkZEOTNEJykodGV4dCksIC8vIHllbGxvd1xuICBsb3c6ICh0ZXh0OiBzdHJpbmcpID0+IGNoYWxrLmhleCgnIzREOTZGRicpKHRleHQpLCAvLyBibHVlXG4gIGluZm86ICh0ZXh0OiBzdHJpbmcpID0+IGNoYWxrLmhleCgnI0FBQUFBQScpKHRleHQpIC8vIGdyYXlcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZFN1Z2dlc3Rpb24ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIEludGVyYWN0aXZlIG1lbnUgaXRlbSBmb3IgQ2xhdWRlIENvZGUgc3R5bGUgbWVudXMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVudUl0ZW0ge1xuICAvKiogVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBpdGVtICovXG4gIGlkOiBzdHJpbmc7XG4gIC8qKiBEaXNwbGF5IGxhYmVsICovXG4gIGxhYmVsOiBzdHJpbmc7XG4gIC8qKiBPcHRpb25hbCBkZXNjcmlwdGlvbiBzaG93biB0byB0aGUgcmlnaHQgKi9cbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG4gIC8qKiBPcHRpb25hbCBjYXRlZ29yeSBmb3IgZ3JvdXBpbmcgKi9cbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG4gIC8qKiBXaGV0aGVyIGl0ZW0gaXMgZGlzYWJsZWQgKi9cbiAgZGlzYWJsZWQ/OiBib29sZWFuO1xuICAvKiogV2hldGhlciB0aGlzIGlzIHRoZSBjdXJyZW50L2FjdGl2ZSBpdGVtICovXG4gIGlzQWN0aXZlPzogYm9vbGVhbjtcbn1cblxudHlwZSBDYW5vbmljYWxFdmVudFR5cGUgPSAncHJvbXB0JyB8ICd0aG91Z2h0JyB8ICdzdHJlYW0nIHwgJ3Rvb2wnIHwgJ3Rvb2wtcmVzdWx0JyB8ICdidWlsZCcgfCAndGVzdCcgfCAncmVzcG9uc2UnO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJlckV2ZW50VHlwZSA9XG4gIHwgQ2Fub25pY2FsRXZlbnRUeXBlXG4gIHwgJ3JhdydcbiAgfCAnYmFubmVyJ1xuICB8ICdlcnJvcidcbiAgfCAnc3RyZWFtaW5nJ1xuICB8ICd0b29sLWNhbGwnXG4gIHwgJ3Rvb2wtcmVzdWx0J1xuICB8ICdzeXN0ZW0nO1xuXG50eXBlIFVJRXZlbnQgPSB7XG4gIHR5cGU6IENhbm9uaWNhbEV2ZW50VHlwZTtcbiAgcmF3VHlwZTogUmVuZGVyZXJFdmVudFR5cGU7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ29tcGFjdGVkPzogYm9vbGVhbjsgLy8gQ2xhdWRlIENvZGUgc3R5bGUgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2tcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zIHtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG50eXBlIElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgY3Vyc29yOiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgTW9kZVRvZ2dsZVN0YXRlIHtcbiAgYXV0b0NvbnRpbnVlRW5hYmxlZD86IGJvb2xlYW47XG4gIGF1dG9Db250aW51ZUhvdGtleT86IHN0cmluZztcbiAgdGhpbmtpbmdNb2RlTGFiZWw/OiBzdHJpbmcgfCBudWxsO1xuICB0aGlua2luZ0hvdGtleT86IHN0cmluZztcbiAgY3JpdGljYWxBcHByb3ZhbE1vZGU/OiAnYXV0bycgfCAnYXBwcm92YWwnO1xuICBjcml0aWNhbEFwcHJvdmFsSG90a2V5Pzogc3RyaW5nO1xuICBhbHBoYVplcm9FbmFibGVkPzogYm9vbGVhbjsgIC8vIHRydWUgPSBkdWFsIHRvdXJuYW1lbnQgUkwsIGZhbHNlID0gbm9ybWFsIHNpbmdsZSBtb2RlXG4gIGFscGhhWmVyb0hvdGtleT86IHN0cmluZztcbiAgZGVidWdFbmFibGVkPzogYm9vbGVhbjtcbiAgZGVidWdIb3RrZXk/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgZHVyaW5nIGR1YWwtUkwgbW9kZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSTEFnZW50U3RhdHVzIHtcbiAgLyoqIEN1cnJlbnQgYWN0aXZlIHZhcmlhbnQgYmVpbmcgZXhlY3V0ZWQgKi9cbiAgYWN0aXZlVmFyaWFudD86ICdwcmltYXJ5JyB8ICdyZWZpbmVyJyB8IG51bGw7XG4gIC8qKiBDdXJyZW50IG1vZHVsZSBiZWluZyBwcm9jZXNzZWQgKi9cbiAgY3VycmVudE1vZHVsZT86IHN0cmluZztcbiAgLyoqIEN1cnJlbnQgc3RlcCB3aXRoaW4gdGhlIG1vZHVsZSAqL1xuICBjdXJyZW50U3RlcD86IHN0cmluZztcbiAgLyoqIFdpbiBzdGF0aXN0aWNzIGZvciBwcmltYXJ5IHZzIHJlZmluZXIgKi9cbiAgd2lucz86IHsgcHJpbWFyeTogbnVtYmVyOyByZWZpbmVyOiBudW1iZXI7IHRpZXM6IG51bWJlciB9O1xuICAvKiogQ3VycmVudCByZXdhcmQgc2NvcmVzIGlmIGF2YWlsYWJsZSAqL1xuICBzY29yZXM/OiB7IHByaW1hcnk/OiBudW1iZXI7IHJlZmluZXI/OiBudW1iZXIgfTtcbiAgLyoqIEh1bWFuLWFjY3VyYWN5IHN0eWxlIHNjb3JlcyAoMC0xKSAqL1xuICBhY2N1cmFjeT86IHsgcHJpbWFyeT86IG51bWJlcjsgcmVmaW5lcj86IG51bWJlciB9O1xuICAvKiogV2hldGhlciB2YXJpYW50cyBhcmUgcnVubmluZyBpbiBwYXJhbGxlbCAqL1xuICBwYXJhbGxlbEV4ZWN1dGlvbj86IGJvb2xlYW47XG4gIC8qKiBUb3RhbCBzdGVwcyBjb21wbGV0ZWQgKi9cbiAgc3RlcHNDb21wbGV0ZWQ/OiBudW1iZXI7XG4gIC8qKiBUb3RhbCBzdGVwcyB0byBwcm9jZXNzICovXG4gIHRvdGFsU3RlcHM/OiBudW1iZXI7XG4gIC8qKiBMYXN0IHN0ZXAgd2lubmVyIGZvciBjZWxlYnJhdGlvbiAqL1xuICBsYXN0V2lubmVyPzogJ3ByaW1hcnknIHwgJ3JlZmluZXInIHwgJ3RpZScgfCBudWxsO1xuICAvKiogU3RyZWFrIGNvdW50IGZvciBjdXJyZW50IGxlYWRlciAqL1xuICBzdHJlYWs/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQXR0YWNrIG9wZXJhdGlvbiBzdGF0dXMgZm9yIHJlYWwtdGltZSBkaXNwbGF5IGR1cmluZyBvZmZlbnNpdmUgc2VjdXJpdHkgb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdHRhY2tTdGF0dXMge1xuICAvKiogQ3VycmVudCBhdHRhY2sgcGhhc2UgKi9cbiAgcGhhc2U/OiAncmVjb24nIHwgJ3NjYW5uaW5nJyB8ICdleHBsb2l0YXRpb24nIHwgJ3BlcnNpc3RlbmNlJyB8ICdleGZpbHRyYXRpb24nIHwgJ2Rlc3RydWN0aW9uJztcbiAgLyoqIEN1cnJlbnQgdGFyZ2V0IGJlaW5nIGF0dGFja2VkICovXG4gIGN1cnJlbnRUYXJnZXQ/OiBzdHJpbmc7XG4gIC8qKiBOdW1iZXIgb2YgdGFyZ2V0cyBhY3F1aXJlZCAqL1xuICB0YXJnZXRzQWNxdWlyZWQ/OiBudW1iZXI7XG4gIC8qKiBOdW1iZXIgb2YgdnVsbmVyYWJpbGl0aWVzIGZvdW5kICovXG4gIHZ1bG5lcmFiaWxpdGllc0ZvdW5kPzogbnVtYmVyO1xuICAvKiogTnVtYmVyIG9mIHN1Y2Nlc3NmdWwgZXhwbG9pdHMgKi9cbiAgZXhwbG9pdHNTdWNjZXNzZnVsPzogbnVtYmVyO1xuICAvKiogUGVyc2lzdGVuY2UgbWVjaGFuaXNtcyBlc3RhYmxpc2hlZCAqL1xuICBwZXJzaXN0ZW5jZUVzdGFibGlzaGVkPzogbnVtYmVyO1xuICAvKiogRGF0YSBleGZpbHRyYXRlZCAoTUIpICovXG4gIGRhdGFFeGZpbHRyYXRlZD86IG51bWJlcjtcbiAgLyoqIEluZnJhc3RydWN0dXJlIGNvbXByb21pc2VkIGNvdW50ICovXG4gIGluZnJhc3RydWN0dXJlQ29tcHJvbWlzZWQ/OiBudW1iZXI7XG4gIC8qKiBSZWFsLXRpbWUgbW9uaXRvcmluZyBhY3RpdmUgKi9cbiAgbW9uaXRvcmluZ0FjdGl2ZT86IGJvb2xlYW47XG4gIC8qKiBDdXJyZW50IGF0dGFjayBtb2RlICovXG4gIGF0dGFja01vZGU/OiAncmVjb24nIHwgJ2F0dGFjaycgfCAnZXhwbG9pdCcgfCAncGVyc2lzdGVuY2UnIHwgJ2MyJyB8ICdkZXN0cnVjdGlvbic7XG4gIC8qKiBBdHRhY2sgc3VjY2VzcyByYXRlIHBlcmNlbnRhZ2UgKi9cbiAgc3VjY2Vzc1JhdGU/OiBudW1iZXI7XG4gIC8qKiBMYXN0IGF0dGFjayByZXN1bHQgKi9cbiAgbGFzdFJlc3VsdD86ICdzdWNjZXNzJyB8ICdmYWlsdXJlJyB8ICdwYXJ0aWFsJztcbiAgLyoqIEFjdGl2ZSBhdHRhY2sgbW9kdWxlcyAqL1xuICBhY3RpdmVNb2R1bGVzPzogc3RyaW5nW107XG4gIC8qKiBUaW1lIHNpbmNlIGF0dGFjayBzdGFydGVkICovXG4gIGF0dGFja0R1cmF0aW9uPzogbnVtYmVyO1xufVxuXG4vKipcbiAqIFNlY3VyaXR5IHRvb2xzIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgb2Ygc2VjdXJlIFRBTyB0b29scy5cbiAqIFRyYWNrcyBFeGVjdXRlLCBQcm9iZSwgU3RhdGUgdG9vbHMgd2l0aCBlbmhhbmNlZCBvdXRwdXQgZm9ybWF0dGluZy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBTZWN1cmVUb29sc1N0YXR1cyB7XG4gIC8qKiBFeGVjdXRlIHRvb2wgLSBzZWN1cmUgc2hlbGwgY29tbWFuZCBzdGF0dXMgKi9cbiAgZXhlY3V0ZT86IHtcbiAgICBhY3RpdmU6IGJvb2xlYW47XG4gICAgbGFzdENvbW1hbmQ/OiBzdHJpbmc7XG4gICAgbGFzdEV4aXRDb2RlPzogbnVtYmVyO1xuICAgIGV4ZWNDb3VudD86IG51bWJlcjtcbiAgfTtcbiAgLyoqIFByb2JlIHRvb2wgLSB0YXJnZXQgYW5hbHlzaXMgc3RhdHVzICovXG4gIHByb2JlPzoge1xuICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICBsYXN0VGFyZ2V0Pzogc3RyaW5nO1xuICAgIHNlcnZpY2VzRm91bmQ/OiBudW1iZXI7XG4gICAgcHJvYmVDb3VudD86IG51bWJlcjtcbiAgfTtcbiAgLyoqIFN0YXRlIHRvb2wgLSBzZXNzaW9uIG1hbmFnZW1lbnQgc3RhdHVzICovXG4gIHN0YXRlPzoge1xuICAgIGFjdGl2ZTogYm9vbGVhbjtcbiAgICBrZXlzU3RvcmVkPzogbnVtYmVyO1xuICAgIGxhc3RBY3Rpb24/OiAnZ2V0JyB8ICdzZXQnO1xuICAgIHBlcnNpc3RlbnQ/OiBib29sZWFuO1xuICB9O1xuICAvKiogT3ZlcmFsbCB0b29sa2l0IHN0YXR1cyAqL1xuICB0b29sa2l0UmVhZHk/OiBib29sZWFuO1xuICAvKiogSW5wdXQgc2FuaXRpemF0aW9uIGFjdGl2ZSAqL1xuICBzYW5pdGl6YXRpb25BY3RpdmU/OiBib29sZWFuO1xuICAvKiogTGFzdCB0b29sIHVzZWQgKi9cbiAgbGFzdFRvb2xVc2VkPzogJ0V4ZWN1dGUnIHwgJ1Byb2JlJyB8ICdTdGF0ZScgfCAnVHJhbnNmb3JtJyB8ICdUYW9PcHMnIHwgbnVsbDtcbiAgLyoqIFRvdGFsIHRvb2wgaW52b2NhdGlvbnMgdGhpcyBzZXNzaW9uICovXG4gIHRvdGFsSW52b2NhdGlvbnM/OiBudW1iZXI7XG59XG5cbmNvbnN0IEVTQyA9IHtcbiAgSElERV9DVVJTT1I6ICdcXHgxYls/MjVsJyxcbiAgU0hPV19DVVJTT1I6ICdcXHgxYls/MjVoJyxcbiAgQ0xFQVJfU0NSRUVOOiAnXFx4MWJbMkonLFxuICBDTEVBUl9MSU5FOiAnXFx4MWJbMksnLFxuICBIT01FOiAnXFx4MWJbSCcsXG4gIEVOQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGgnLFxuICBESVNBQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0bCcsXG4gIFRPOiAocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtyb3d9OyR7Y29sfUhgLFxuICBUT19DT0w6IChjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7Y29sfUdgLFxuICBFUkFTRV9ET1dOOiAnXFx4MWJbSicsXG4gIFJFVkVSU0U6ICdcXHgxYls3bScsXG4gIFJFU0VUOiAnXFx4MWJbMG0nLFxuICAvLyBTY3JvbGwgcmVnaW9uIGNvbnRyb2wgLSBDUklUSUNBTCBmb3IgZml4ZWQgYm90dG9tIG92ZXJsYXlcbiAgU0VUX1NDUk9MTF9SRUdJT046ICh0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIpID0+IGBcXHgxYlske3RvcH07JHtib3R0b219cmAsXG4gIFJFU0VUX1NDUk9MTF9SRUdJT046ICdcXHgxYltyJyxcbiAgU0FWRV9DVVJTT1I6ICdcXHgxYltzJyxcbiAgUkVTVE9SRV9DVVJTT1I6ICdcXHgxYlt1Jyxcbn0gYXMgY29uc3Q7XG5cbmNvbnN0IE5FV0xJTkVfUExBQ0VIT0xERVIgPSAn4oa1JztcblxuZXhwb3J0IGNsYXNzIFVuaWZpZWRVSVJlbmRlcmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnB1dDogTm9kZUpTLlJlYWRTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgcmw6IHJlYWRsaW5lLkludGVyZmFjZTtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpbk1vZGU6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgaW50ZXJhY3RpdmU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSByb3dzID0gMjQ7XG4gIHByaXZhdGUgY29scyA9IDgwO1xuICBwcml2YXRlIGxhc3RSZW5kZXJXaWR0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBldmVudFF1ZXVlOiBVSUV2ZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBpc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgYnVmZmVyID0gJyc7XG4gIHByaXZhdGUgY3Vyc29yID0gMDtcbiAgcHJpdmF0ZSBoaXN0b3J5OiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhpc3RvcnlJbmRleCA9IC0xO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25zOiB7IGNvbW1hbmQ6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZzsgY2F0ZWdvcnk/OiBzdHJpbmcgfVtdID0gW107XG4gIHByaXZhdGUgc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIHByaXZhdGUgYXZhaWxhYmxlQ29tbWFuZHM6IHR5cGVvZiB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gIHByaXZhdGUgaG90a2V5c0luVG9nZ2xlTGluZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgY29sbGFwc2VkUGFzdGU6IHsgdGV4dDogc3RyaW5nOyBsaW5lczogbnVtYmVyOyBjaGFyczogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnID0gJ2lkbGUnO1xuICAvKiogUXVldWUgZm9yIGlucHV0IHJlY2VpdmVkIGR1cmluZyBzdHJlYW1pbmcgLSBwcm9jZXNzZWQgYWZ0ZXIgc3RyZWFtaW5nIGVuZHMgKi9cbiAgcHJpdmF0ZSBzdHJlYW1pbmdJbnB1dFF1ZXVlOiBzdHJpbmdbXSA9IFtdO1xuICAvKiogQnVmZmVyIHRvIGFjY3VtdWxhdGUgc3RyZWFtaW5nIGNvbnRlbnQgZm9yIHBvc3QtcHJvY2Vzc2luZyAqL1xuICBwcml2YXRlIHN0cmVhbWluZ0NvbnRlbnRCdWZmZXI6IHN0cmluZyA9ICcnO1xuICAvKiogVHJhY2sgbGluZXMgd3JpdHRlbiBkdXJpbmcgc3RyZWFtaW5nIGZvciBwb3RlbnRpYWwgcmVmb3JtYXQgKi9cbiAgcHJpdmF0ZSBzdHJlYW1pbmdMaW5lc1dyaXR0ZW46IG51bWJlciA9IDA7XG4gIHByaXZhdGUgbGFzdFRvb2xSZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAvKiogU3RhY2sgb2YgY29sbGFwc2VkIHRvb2wgcmVzdWx0cyBmb3IgQ3RybCtPIGV4cGFuc2lvbiAqL1xuICBwcml2YXRlIGNvbGxhcHNlZFRvb2xSZXN1bHRzOiBBcnJheTx7XG4gICAgdG9vbE5hbWU6IHN0cmluZztcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgc3VtbWFyeTogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICAgIG1ldGFkYXRhPzoge1xuICAgICAgZmlsZVBhdGg/OiBzdHJpbmc7XG4gICAgICBvbGRMZW5ndGg/OiBudW1iZXI7XG4gICAgICBuZXdMZW5ndGg/OiBudW1iZXI7XG4gICAgICBkaWZmPzogeyBvbGQ6IHN0cmluZzsgbmV3OiBzdHJpbmcgfTtcbiAgICB9O1xuICB9PiA9IFtdO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heENvbGxhcHNlZFJlc3VsdHMgPSA1MDtcbiAgLyoqIFRyYWNrIHRoZSBsYXN0IHRvb2wgbmFtZSBmb3IgcGFpcmluZyB3aXRoIHJlc3VsdHMgKi9cbiAgcHJpdmF0ZSBsYXN0VG9vbE5hbWU6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHN0cmVhbWluZ1N0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzT3ZlcnJpZGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c1N0cmVhbWluZzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gQW5pbWF0ZWQgVUkgY29tcG9uZW50c1xuICBwcml2YXRlIHN0cmVhbWluZ1NwaW5uZXI6IEFuaW1hdGVkU3Bpbm5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHRoaW5raW5nSW5kaWNhdG9yOiBUaGlua2luZ0luZGljYXRvciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbnRleHRNZXRlcjogQ29udGV4dE1ldGVyO1xuICBwcml2YXRlIHNwaW5uZXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgc3Bpbm5lckludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heElubGluZVBhbmVsTGluZXMgPSAxMjtcblxuICAvLyBDb21wYWN0aW5nIHN0YXR1cyBhbmltYXRpb25cbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzTWVzc2FnZSA9ICcnO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNGcmFtZSA9IDA7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbXBhY3RpbmdTcGlubmVyRnJhbWVzID0gWyfinLsnLCAn4py8JywgJ+KcuycsICfinLonXTtcblxuICAvLyBBbmltYXRlZCBhY3Rpdml0eSBsaW5lIChlLmcuLCBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiKVxuICBwcml2YXRlIGFjdGl2aXR5TWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWN0aXZpdHlQaHJhc2VJbmRleCA9IDA7XG4gIHByaXZhdGUgYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGFjdGl2aXR5U3RhckZyYW1lcyA9IFsn4pyzJywgJ+KctCcsICfinLUnLCAn4py2JywgJ+KctycsICfinLgnXTtcbiAgLy8gVG9rZW4gY291bnQgZHVyaW5nIHN0cmVhbWluZ1xuICBwcml2YXRlIHN0cmVhbWluZ1Rva2VucyA9IDA7XG4gIC8vIEVsYXBzZWQgdGltZSBjb2xvciBhbmltYXRpb25cbiAgcHJpdmF0ZSBlbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgZWxhcHNlZENvbG9yRnJhbWVzID0gWycjRjU5RTBCJywgJyNGQkJGMjQnLCAnI0ZDRDM0RCcsICcjRkRFNjhBJywgJyNGQ0QzNEQnLCAnI0ZCQkYyNCddO1xuICAvLyBVc2VyLWZyaWVuZGx5IGFjdGl2aXR5IHBocmFzZXMgKGNsZWFuLCBwcm9mZXNzaW9uYWwpXG4gIHByaXZhdGUgcmVhZG9ubHkgZnVuQWN0aXZpdHlQaHJhc2VzID0gW1xuICAgICdUaGlua2luZycsICdQcm9jZXNzaW5nJywgJ0FuYWx5emluZycsICdXb3JraW5nJywgJ1ByZXBhcmluZycsXG4gIF07XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzID0gODtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMgPSAxODAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHRob3VnaHREZWR1cFdpbmRvd01zID0gMTUwMDA7XG4gIHByaXZhdGUgbGFzdEN1cmF0ZWRUaG91Z2h0OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBzdGF0dXNNZXRhOiB7XG4gICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgcHJvZmlsZT86IHN0cmluZztcbiAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgIHdyaXRlcz86IHN0cmluZztcbiAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgdmVyc2lvbj86IHN0cmluZztcbiAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgfSA9IHt9O1xuICBwcml2YXRlIHRvZ2dsZVN0YXRlOiBNb2RlVG9nZ2xlU3RhdGUgPSB7XG4gICAgYXV0b0NvbnRpbnVlRW5hYmxlZDogZmFsc2UsXG4gICAgY3JpdGljYWxBcHByb3ZhbE1vZGU6ICdhdXRvJyxcbiAgICBhbHBoYVplcm9FbmFibGVkOiBmYWxzZSwgIC8vIE5vcm1hbCBtb2RlIGJ5IGRlZmF1bHQsIHRvZ2dsZSBmb3IgQWxwaGFaZXJvIGR1YWwgdG91cm5hbWVudCBSTFxuICAgIGRlYnVnRW5hYmxlZDogZmFsc2UsXG4gIH07XG5cbiAgLyoqIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIGR1YWwtUkwgbW9kZSBkaXNwbGF5ICovXG4gIHByaXZhdGUgcmxTdGF0dXM6IFJMQWdlbnRTdGF0dXMgPSB7fTtcblxuICAvKiogU2VjdXJlIFRBTyB0b29scyBzdGF0dXMgZm9yIHJlYWwtdGltZSBkaXNwbGF5ICovXG4gIHByaXZhdGUgc2VjdXJlVG9vbHNTdGF0dXM6IFNlY3VyZVRvb2xzU3RhdHVzID0ge1xuICAgIHRvb2xraXRSZWFkeTogdHJ1ZSxcbiAgICBzYW5pdGl6YXRpb25BY3RpdmU6IHRydWUsXG4gICAgdG90YWxJbnZvY2F0aW9uczogMCxcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICAvKiogRW5zdXJlIGN1cnNvciBpcyBhbHdheXMgd2l0aGluIHZhbGlkIGJvdW5kcyBmb3IgdGhlIGN1cnJlbnQgYnVmZmVyICovXG4gIHByaXZhdGUgY2xhbXBDdXJzb3IoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLmN1cnNvciwgdGhpcy5idWZmZXIubGVuZ3RoKSk7XG4gIH1cblxuICAvKiogU2FmZWx5IGFwcGVuZCB0byBwYXN0ZSBidWZmZXIgd2l0aCBzaXplIGxpbWl0IGVuZm9yY2VtZW50ICovXG4gIHByaXZhdGUgYXBwZW5kVG9QYXN0ZUJ1ZmZlcihidWZmZXI6ICdwYXN0ZScgfCAncGxhaW5QYXN0ZScsIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cpIHJldHVybjsgLy8gQWxyZWFkeSBhdCBsaW1pdFxuICAgIGNvbnN0IGN1cnJlbnQgPSBidWZmZXIgPT09ICdwYXN0ZScgPyB0aGlzLnBhc3RlQnVmZmVyIDogdGhpcy5wbGFpblBhc3RlQnVmZmVyO1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplIC0gY3VycmVudC5sZW5ndGg7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0b0FkZCA9IHRleHQubGVuZ3RoIDw9IHJlbWFpbmluZyA/IHRleHQgOiB0ZXh0LnNsaWNlKDAsIHJlbWFpbmluZyk7XG4gICAgaWYgKGJ1ZmZlciA9PT0gJ3Bhc3RlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH1cbiAgICBpZiAodG9BZGQubGVuZ3RoIDwgdGV4dC5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIFN0cmlwIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyBhbmQgc3BlY2lhbCBmb3JtYXR0aW5nIGZyb20gdGV4dCB0byBnZXQgY2xlYW4gcGxhaW50ZXh0ICovXG4gIHByaXZhdGUgc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXRleHQpIHJldHVybiAnJztcbiAgICBcbiAgICAvLyBSZW1vdmUgYWxsIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyAoQ1NJLCBPU0MsIGV0Yy4pXG4gICAgLy8gSW5jbHVkaW5nIGJyYWNrZXRlZCBwYXN0ZSBtYXJrZXJzIChcXHgxYlsyMDB+IGFuZCBcXHgxYlsyMDF+KSB3aGljaCBlbmQgd2l0aCB+XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBsZXQgc2FuaXRpemVkID0gdGV4dC5yZXBsYWNlKC9cXHgxYlxcW1swLTk7XSpbQS1aYS16fl18XFx4MWJcXF1bXlxceDA3XSpcXHgwN3xcXHgxYltQWF5fXVteXFx4MWJdKlxceDFiXFxcXHxcXHgxYi4vZywgJycpO1xuICAgIC8vIEFsc28gcmVtb3ZlIHBhcnRpYWwgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgdGhhdCBtYXkgaGF2ZSBsZWFrZWQgKGUuZy4sIFwiWzIwMH5cIiB3aXRob3V0IEVTQylcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxbMjBbMDFdfi9nLCAnJyk7XG4gICAgLy8gUmVtb3ZlIGFueSBzdHJheSBlc2NhcGUgY2hhcmFjdGVyIGF0IHN0YXJ0L2VuZFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL15cXHgxYit8XFx4MWIrJC9nLCAnJyk7XG5cbiAgICAvLyBTdHJpcCB0b2dnbGUgc3ltYm9scyB0aGF0IG1pZ2h0IGhhdmUgbGVha2VkIHRocm91Z2hcbiAgICAvLyBUaGlzIGlzIGEgc2FmZXR5IG5ldCAtIHByaW1hcnkgcmVtb3ZhbCBoYXBwZW5zIGluIHN0cmlwVG9nZ2xlU3ltYm9sc1xuICAgIGNvbnN0IGlzVG9nZ2xlQ2hhcmFjdGVyID0gKGNoOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGlmICghY2ggfHwgY2gubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICBjb25zdCBjb2RlID0gY2guY2hhckNvZGVBdCgwKTtcbiAgICAgIGlmIChjb2RlID09PSAxNjkgfHwgY29kZSA9PT0gODQ4MikgcmV0dXJuIHRydWU7IC8vIMKpIOKEoiAoT3B0aW9uK0cpXG4gICAgICBpZiAoY29kZSA9PT0gMjI5IHx8IGNvZGUgPT09IDE5NykgcmV0dXJuIHRydWU7ICAvLyDDpSDDhSAoT3B0aW9uK0EpXG4gICAgICBpZiAoY29kZSA9PT0gODcwNiB8fCBjb2RlID09PSA4NzEwIHx8IGNvZGUgPT09IDIwNikgcmV0dXJuIHRydWU7IC8vIOKIgiDiiIYgw44gKE9wdGlvbitEKVxuICAgICAgaWYgKGNvZGUgPT09IDgyMjQgfHwgY29kZSA9PT0gODIyNSkgcmV0dXJuIHRydWU7IC8vIOKAoCDigKEgKE9wdGlvbitUKVxuICAgICAgaWYgKGNvZGUgPT09IDg3MzApIHJldHVybiB0cnVlOyAvLyDiiJogKE9wdGlvbitWKVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG4gICAgXG4gICAgY29uc3QgY2hhcnMgPSBbLi4uc2FuaXRpemVkXTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjaGFycy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgY2ggPSBjaGFyc1tpXTtcbiAgICAgIGlmIChpc1RvZ2dsZUNoYXJhY3RlcihjaCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICByZXN1bHQgKz0gY2g7XG4gICAgfVxuICAgIHNhbml0aXplZCA9IHJlc3VsdDtcblxuICAgIC8vIFN0cmlwIHNwZWNpYWwgZm9ybWF0dGluZyBjaGFyYWN0ZXJzIGZvciBjbGVhbiBwbGFpbnRleHQ6XG4gICAgLy8gLSBaZXJvLXdpZHRoIGNoYXJhY3RlcnMgKFpXU1AsIFpXTkosIFpXSiwgQk9NL1pXTkJTUClcbiAgICAvLyAtIFdvcmQgam9pbmVyLCBpbnZpc2libGUgc2VwYXJhdG9yLCBpbnZpc2libGUgdGltZXMvcGx1c1xuICAgIC8vIC0gRGlyZWN0aW9uYWwgZm9ybWF0dGluZyAoTFJNLCBSTE0sIExSRSwgUkxFLCBMUk8sIFJMTywgUERGLCBMUkksIFJMSSwgRlNJLCBQREkpXG4gICAgLy8gLSBPYmplY3QgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgLy8gLSBTb2Z0IGh5cGhlblxuICAgIC8vIC0gTm9uLWJyZWFraW5nIHNwYWNlIHZhcmlhbnRzIChOQlNQLCBuYXJyb3cgTkJTUCwgZmlndXJlIHNwYWNlLCBldGMuKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MjAwQi1cXHUyMDBGXFx1MjAyOC1cXHUyMDJGXFx1MjA2MC1cXHUyMDZGXFx1RkVGRlxcdTAwQURcXHVGRkZDXS9nLCAnJyk7XG5cbiAgICAvLyBOb3JtYWxpemUgdmFyaW91cyBzcGFjZSBjaGFyYWN0ZXJzIHRvIHJlZ3VsYXIgc3BhY2VcbiAgICAvLyBJbmNsdWRlczogTkJTUCwgZW4vZW0gc3BhY2UsIHRoaW4gc3BhY2UsIGhhaXIgc3BhY2UsIGZpZ3VyZSBzcGFjZSwgZXRjLlxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MDBBMFxcdTIwMDAtXFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMF0vZywgJyAnKTtcblxuICAgIC8vIFJlbW92ZSBjb250cm9sIGNoYXJhY3RlcnMgZXhjZXB0IHRhYiwgbmV3bGluZSwgY2FycmlhZ2UgcmV0dXJuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvW1xceDAwLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4N0ZdL2csICcnKTtcblxuICAgIHJldHVybiBzYW5pdGl6ZWQ7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gODA7IC8vIEluY3JlYXNlZCBmb3IgbW9yZSByb2J1c3QgbXVsdGktbGluZSBwYXN0ZSBkZXRlY3Rpb25cbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlV2luZG93TXMgPSAxMjA7IC8vIEluY3JlYXNlZCB3aW5kb3cgZm9yIHBhc3RlIGJ1cnN0IGRldGVjdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVUcmlnZ2VyQ2hhcnMgPSAxNjsgLy8gTG93ZXIgdGhyZXNob2xkIHRvIGNhdGNoIG11bHRpLWxpbmUgcGFzdGVzIHNvb25lclxuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDE7IC8vIEltbWVkaWF0ZSBkZXRlY3Rpb24gb2YgbXVsdGktbGluZSBjb250ZW50XG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDE2OyAvLyBSZWR1Y2VkIGZyb20gODBtcyBmb3IgZmFzdGVyIHR5cGluZyByZXNwb25zZVxuICAvLyBFbWl0LWxldmVsIHBhc3RlIGRldGVjdGlvbiAtIGFjY3VtdWxhdGUgYWxsIHJhcGlkIGlucHV0IHRoZW4gY29tbWl0XG4gIHByaXZhdGUgZW1pdFBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgZW1pdFBhc3RlVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgZW1pdFBhc3RlQ29tbWl0TXMgPSAzMDsgLy8gQ29tbWl0IGFmdGVyIDMwbXMgb2Ygbm8gaW5wdXRcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRFdmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICBwcml2YXRlIGhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gIHByaXZhdGUgaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IGZhbHNlOyAgLy8gVHJhY2sgaWYgd2UndmUgZXZlciByZW5kZXJlZCBmb3IgaW5saW5lIGNsZWFyaW5nXG4gIHByaXZhdGUgbGFzdE92ZXJsYXk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gIHByaXZhdGUgcHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gIHByaXZhdGUgc2VjcmV0TW9kZSA9IGZhbHNlO1xuICAvLyBSZW5kZXIgdGhyb3R0bGluZyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICBwcml2YXRlIHBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyVGltZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyVGhyb3R0bGVNcyA9IDE2OyAvLyB+NjBmcHMgbWF4XG4gIHByaXZhdGUgcmVuZGVyVGhyb3R0bGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgLy8gUGVyZm9ybWFuY2U6IENhY2hlIGxhc3QgcmVuZGVyZWQgc3RhdGUgdG8gc2tpcCB1bm5lY2Vzc2FyeSByZW5kZXJzXG4gIHByaXZhdGUgbGFzdFJlbmRlcmVkQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgZm9yY2VOZXh0UmVuZGVyID0gZmFsc2U7XG4gIHByaXZhdGUgbGFzdFJlbmRlcmVkQ3Vyc29yID0gMDtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRNb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyA9ICdpZGxlJztcbiAgLy8gRGlzcG9zYWwgc3RhdGUgdG8gcHJldmVudCBvcGVyYXRpb25zIGFmdGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBkaXNwb3NlZCA9IGZhbHNlO1xuICAvLyBJbml0aWFsaXphdGlvbiBzdGF0ZSAtIHNraXAgcHJvbXB0IHJlbmRlcnMgdW50aWwgZmlyc3QgYmFubmVyIGlzIHNob3duXG4gIHByaXZhdGUgaW5pdGlhbGl6aW5nID0gdHJ1ZTtcbiAgLy8gQm91bmQgZXZlbnQgaGFuZGxlcnMgZm9yIHByb3BlciBjbGVhbnVwXG4gIHByaXZhdGUgYm91bmRSZXNpemVIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBib3VuZEtleXByZXNzSGFuZGxlcjogKChzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmREYXRhSGFuZGxlcjogKChkYXRhOiBCdWZmZXIpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRDdHJsSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIC8vIE9yaWdpbmFsIGVtaXQgbWV0aG9kIGZvciByZXN0b3JhdGlvbiBvbiBjbGVhbnVwXG4gIHByaXZhdGUgb3JpZ2luYWxFbWl0OiAoKC4uLmFyZ3M6IHVua25vd25bXSkgPT4gYm9vbGVhbikgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dFByb3RlY3Rpb246IElucHV0UHJvdGVjdGlvbiB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0Q2FwdHVyZTpcbiAgICB8IHtcbiAgICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIHJlamVjdD86IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgICAgICBvcHRpb25zOiB7IHRyaW06IGJvb2xlYW47IGFsbG93RW1wdHk6IGJvb2xlYW4gfTtcbiAgICAgIH1cbiAgICB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEludGVyYWN0aXZlIG1lbnUgc3RhdGUgKENsYXVkZSBDb2RlIHN0eWxlKVxuICBwcml2YXRlIG1lbnVJdGVtczogTWVudUl0ZW1bXSA9IFtdO1xuICBwcml2YXRlIG1lbnVJbmRleCA9IDA7XG4gIHByaXZhdGUgbWVudVRpdGxlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBtZW51Q2FsbGJhY2s6ICgoaXRlbTogTWVudUl0ZW0gfCBudWxsKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtID0gcHJvY2Vzcy5zdGRvdXQsXG4gICAgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtID0gcHJvY2Vzcy5zdGRpbixcbiAgICBfb3B0aW9ucz86IFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgLy8gU2V0IHVwIGVycm9yIGhhbmRsaW5nIGZvciBFdmVudEVtaXR0ZXJcbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIC8vIExvZyBlcnJvcnMgYnV0IGRvbid0IGNyYXNoXG4gICAgICBjb25zb2xlLmVycm9yKCdbVW5pZmllZFVJUmVuZGVyZXJdIEVycm9yOicsIGVycik7XG4gICAgfSk7XG5cbiAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG5cbiAgICAvLyBSb2J1c3QgVFRZIGRldGVjdGlvbiB3aXRoIG11bHRpcGxlIGZhbGxiYWNrc1xuICAgIGNvbnN0IG91dHB1dElzVFRZID0gQm9vbGVhbih0aGlzLm91dHB1dD8uaXNUVFkpO1xuICAgIGNvbnN0IGlucHV0SXNUVFkgPSBCb29sZWFuKHRoaXMuaW5wdXQ/LmlzVFRZKTtcbiAgICB0aGlzLmludGVyYWN0aXZlID0gb3V0cHV0SXNUVFkgJiYgaW5wdXRJc1RUWTtcbiAgICB0aGlzLnBsYWluTW9kZSA9IGlzUGxhaW5PdXRwdXRNb2RlKCkgfHwgIXRoaXMuaW50ZXJhY3RpdmU7XG5cbiAgICAvLyBJbml0aWFsaXplIGFuaW1hdGVkIGNvbXBvbmVudHMgd2l0aCBlcnJvciBoYW5kbGluZ1xuICAgIHRyeSB7XG4gICAgICB0aGlzLmNvbnRleHRNZXRlciA9IG5ldyBDb250ZXh0TWV0ZXIoKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIENyZWF0ZSBhIG5vLW9wIGNvbnRleHQgbWV0ZXIgaWYgaW5pdGlhbGl6YXRpb24gZmFpbHNcbiAgICAgIHRoaXMuY29udGV4dE1ldGVyID0gbmV3IENvbnRleHRNZXRlcigpO1xuICAgIH1cblxuICAgIC8vIENyZWF0ZSByZWFkbGluZSBpbnRlcmZhY2Ugd2l0aCBlcnJvciBoYW5kbGluZ1xuICAgIHRyeSB7XG4gICAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgICAgaW5wdXQ6IHRoaXMuaW5wdXQsXG4gICAgICAgIG91dHB1dDogdGhpcy5vdXRwdXQsXG4gICAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgICBwcm9tcHQ6ICcnLFxuICAgICAgICB0YWJTaXplOiAyLFxuICAgICAgfSk7XG4gICAgICB0aGlzLnJsLnNldFByb21wdCgnJyk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAvLyBJZiByZWFkbGluZSBjcmVhdGlvbiBmYWlscywgY3JlYXRlIGEgbWluaW1hbCBmYWxsYmFja1xuICAgICAgY29uc29sZS5lcnJvcignW1VuaWZpZWRVSVJlbmRlcmVyXSBGYWlsZWQgdG8gY3JlYXRlIHJlYWRsaW5lIGludGVyZmFjZTonLCBlcnIpO1xuICAgICAgdGhpcy5ybCA9IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gICAgICAgIGlucHV0OiBwcm9jZXNzLnN0ZGluLFxuICAgICAgICBvdXRwdXQ6IHByb2Nlc3Muc3Rkb3V0LFxuICAgICAgICB0ZXJtaW5hbDogZmFsc2UsXG4gICAgICB9KTtcbiAgICAgIHRoaXMuaW50ZXJhY3RpdmUgPSBmYWxzZTtcbiAgICAgIHRoaXMucGxhaW5Nb2RlID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBpbnB1dCBwcm90ZWN0aW9uIGFnYWluc3QgcmVtb3RlIGF0dGFja3NcbiAgICB0aGlzLmlucHV0UHJvdGVjdGlvbiA9IGluaXRpYWxpemVJbnB1dFByb3RlY3Rpb24oe1xuICAgICAgdmVyYm9zZTogcHJvY2Vzcy5lbnZbJ0FHSV9ERUJVRyddID09PSAnMScsXG4gICAgICBvbkF0dGFja0RldGVjdGVkOiAodHlwZSwgZGV0YWlscykgPT4ge1xuICAgICAgICAvLyBMb2cgYXR0YWNrIGJ1dCBkb24ndCBkaXNydXB0IHVzZXIgZXhwZXJpZW5jZVxuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVRyddKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0lucHV0UHJvdGVjdGlvbl0gQXR0YWNrIGRldGVjdGVkOiAke3R5cGV9IC0gJHtkZXRhaWxzfWApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgIH0pO1xuXG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXJzIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB9IGNhdGNoIHtcbiAgICAgICAgICAvLyBTaWxlbnRseSBpZ25vcmUgcmVzaXplIGVycm9yc1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfTtcblxuICAgIC8vIFNhZmVseSBhZGQgcmVzaXplIGhhbmRsZXJcbiAgICB0cnkge1xuICAgICAgdGhpcy5vdXRwdXQub24oJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcbiAgICB9IGNhdGNoIHtcbiAgICAgIC8vIElnbm9yZSBpZiBldmVudCBsaXN0ZW5lciBjYW4ndCBiZSBhZGRlZFxuICAgIH1cblxuICAgIHRoaXMuc2V0dXBJbnB1dEhhbmRsZXJzKCk7XG4gIH1cblxuICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlc2V0IGlucHV0IGFuZCBwYXN0ZSBzdGF0ZSB0byBwcmV2ZW50IHN0YWxlIHN0YXRlIGZyb20gcHJldmlvdXMgc2Vzc2lvblxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIElmIGFuIG92ZXJsYXkgd2FzIGFscmVhZHkgcmVuZGVyZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uIChlLmcuLCBiYW5uZXIgZW1pdHRlZCBlYXJseSksXG4gICAgICAvLyBjbGVhciBpdCBzbyBpbml0aWFsaXplKCkgZG9lc24ndCBzdGFjayBhIHNlY29uZCBjb250cm9sIGJhciBpbiBzY3JvbGxiYWNrLlxuICAgICAgaWYgKHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShFU0MuRU5BQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUGxhaW4gbW9kZTogbWluaW1hbCBzZXR1cCwgc3RpbGwgcmVuZGVyIGEgc2ltcGxlIHByb21wdCBsaW5lXG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gTWFyayBhcyBkaXNwb3NlZCBmaXJzdCB0byBwcmV2ZW50IGFueSBwZW5kaW5nIG9wZXJhdGlvbnNcbiAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcblxuICAgIC8vIFdyYXAgYWxsIGNsZWFudXAgaW4gdHJ5LWNhdGNoIHRvIGVuc3VyZSBncmFjZWZ1bCBzaHV0ZG93blxuICAgIHRyeSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ1JlbmRlcmVyIGRpc3Bvc2VkJykpO1xuICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgdHJ5IHtcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cblxuICAgIC8vIENsZWFyIHJlbmRlciB0aHJvdHRsZSB0aW1lclxuICAgIGlmICh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFN0b3AgYW55IHJ1bm5pbmcgYW5pbWF0aW9ucyB3aXRoIGVycm9yIGhhbmRsaW5nXG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0cmVhbWluZ1NwaW5uZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lci5zdG9wKCk7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMudGhpbmtpbmdJbmRpY2F0b3IpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3Iuc3RvcCgpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLnRoaW5raW5nSW5kaWNhdG9yID0gbnVsbDtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIuZGlzcG9zZSgpO1xuICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgdHJ5IHtcbiAgICAgIGRpc3Bvc2VBbmltYXRpb25zKCk7XG4gICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gICAgaWYgKHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLm91dHB1dC5yZW1vdmVMaXN0ZW5lcigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJvdW5kRGF0YUhhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCB0aGlzLmJvdW5kRGF0YUhhbmRsZXIpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLmJvdW5kRGF0YUhhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJvdW5kQ3RybEhhbmRsZXIpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2RhdGEnLCB0aGlzLmJvdW5kQ3RybEhhbmRsZXIpO1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLmJvdW5kQ3RybEhhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFJlc3RvcmUgb3JpZ2luYWwgZW1pdCBtZXRob2Qgb24gc3RkaW5cbiAgICBpZiAodGhpcy5vcmlnaW5hbEVtaXQpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgICh0aGlzLmlucHV0IGFzIGFueSkuZW1pdCA9IHRoaXMub3JpZ2luYWxFbWl0O1xuICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICB0aGlzLm9yaWdpbmFsRW1pdCA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBFdmVudEVtaXR0ZXIgbGlzdGVuZXJzIGZyb20gdGhpcyBpbnN0YW5jZVxuICAgIHRyeSB7XG4gICAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuICAgIH0gY2F0Y2ggeyAvKiBpZ25vcmUgKi8gfVxuXG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgc28gaXQgZG9lc24ndCByZW1haW4gaW4gc2Nyb2xsYmFjayBoaXN0b3J5XG4gICAgICB0cnkge1xuICAgICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgICB0aGlzLndyaXRlKEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRSYXdNb2RlKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9IGNhdGNoIHsgLyogaWdub3JlICovIH1cblxuICAgIHRyeSB7XG4gICAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcblxuICAgIC8vIENsZWFyIGV2ZW50IHF1ZXVlXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XG4gIH1cblxuICBzdXNwZW5kUHJvbXB0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZVByb21wdFJlbmRlcmluZyhyZW5kZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gSW5wdXQgaGFuZGxpbmcgLS0tLS0tLS0tLS0tXG5cbiAgLy8gVHJhY2sgc3BlY2lhbCBrZXlzIGludGVyY2VwdGVkIGF0IHRoZSByYXcgZGF0YSBsZXZlbFxuICBwcml2YXRlIGludGVyY2VwdGVkVG9nZ2xlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnRlcmNlcHRlZEN0cmxDID0gZmFsc2U7XG4gIHByaXZhdGUgaW50ZXJjZXB0ZWRDdHJsRCA9IGZhbHNlO1xuICBwcml2YXRlIHBlbmRpbmdUb2dnbGVTa2lwcyA9IDA7XG5cbiAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmwucmVtb3ZlQWxsTGlzdGVuZXJzKCdsaW5lJyk7XG5cbiAgICAvLyBDUklUSUNBTDogT3ZlcnJpZGUgdGhlIGVtaXQgbWV0aG9kIG9uIHN0ZGluIHRvIGludGVyY2VwdCBkYXRhIGV2ZW50c1xuICAgIC8vIEJFRk9SRSBhbnkgbGlzdGVuZXIgKGluY2x1ZGluZyByZWFkbGluZSkgc2VlcyB0aGVtLiBUaGlzIGlzIHRoZSBPTkxZXG4gICAgLy8gd2F5IHRvIHRydWx5IHByZXZlbnQgY29udHJvbCBjaGFyYWN0ZXJzIGZyb20gYmVpbmcgZWNob2VkLlxuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIHRoaXMub3JpZ2luYWxFbWl0ID0gdGhpcy5pbnB1dC5lbWl0LmJpbmQodGhpcy5pbnB1dCk7XG5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICh0aGlzLmlucHV0IGFzIGFueSkuZW1pdCA9IGZ1bmN0aW9uKGV2ZW50OiBzdHJpbmcsIC4uLmFyZ3M6IHVua25vd25bXSk6IGJvb2xlYW4ge1xuICAgICAgaWYgKGV2ZW50ID09PSAnZGF0YScgJiYgIXNlbGYuZGlzcG9zZWQpIHtcbiAgICAgICAgY29uc3QgZGF0YSA9IGFyZ3NbMF07XG4gICAgICAgIGNvbnN0IHN0ciA9IEJ1ZmZlci5pc0J1ZmZlcihkYXRhKSA/IGRhdGEudG9TdHJpbmcoJ3V0ZjgnKSA6IFN0cmluZyhkYXRhIHx8ICcnKTtcbiAgICAgICAgY29uc3QgY29kZSA9IHN0ciA/IHN0ci5jaGFyQ29kZUF0KDApIDogMDtcblxuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBFTUlUIElOVEVSQ0VQVDogZXZlbnQ9XCIke2V2ZW50fVwiIHN0cj1cIiR7c3RyfVwiIGNvZGU9JHtjb2RlfSBsZW49JHtzdHIubGVuZ3RofWApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQkxPQ0s6IEN0cmwrQyAoY29kZSAzKSAtIGhhbmRsZSBhbmQgc3VwcHJlc3NcbiAgICAgICAgaWYgKGNvZGUgPT09IDMpIHtcbiAgICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIENUUkwrQyBCTE9DS0VEIEFUIEVNSVQgTEVWRUxgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVXNlIHNldEltbWVkaWF0ZSB0byBoYW5kbGUgYWZ0ZXIgdGhpcyBldmVudCBsb29wIHRpY2tcbiAgICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gc2VsZi5oYW5kbGVDdHJsQygpKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU3VwcHJlc3MgdGhlIGV2ZW50XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCTE9DSzogQ3RybCtEIChjb2RlIDQpIC0gaGFuZGxlIGFuZCBzdXBwcmVzc1xuICAgICAgICBpZiAoY29kZSA9PT0gNCkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gQ1RSTCtEIEJMT0NLRUQgQVQgRU1JVCBMRVZFTGApO1xuICAgICAgICAgIH1cbiAgICAgICAgICBzZXRJbW1lZGlhdGUoKCkgPT4gc2VsZi5oYW5kbGVDdHJsRCgpKTtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gU3VwcHJlc3MgdGhlIGV2ZW50XG4gICAgICAgIH1cblxuICAgICAgICAvLyBCTE9DSzogRGlyZWN0IHNpbmdsZS1jaGFyIHRvZ2dsZSBkZXRlY3Rpb24gKG1vc3QgY29tbW9uIGNhc2UpXG4gICAgICAgIC8vIENoZWNrIHRoZSBmaXJzdCBjaGFyIGNvZGUgZGlyZWN0bHkgZm9yIHNwZWVkIGFuZCByZWxpYWJpbGl0eVxuICAgICAgICBsZXQgZGlyZWN0VG9nZ2xlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAgICAgICBpZiAoc3RyLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGlmIChjb2RlID09PSAxNjkgfHwgY29kZSA9PT0gODQ4MikgZGlyZWN0VG9nZ2xlID0gJ2cnOyAvLyDCqSDihKJcbiAgICAgICAgICBlbHNlIGlmIChjb2RlID09PSAyMjkgfHwgY29kZSA9PT0gMTk3KSBkaXJlY3RUb2dnbGUgPSAnYSc7IC8vIMOlIMOFXG4gICAgICAgICAgZWxzZSBpZiAoY29kZSA9PT0gODcwNiB8fCBjb2RlID09PSA4NzEwIHx8IGNvZGUgPT09IDIwNikgZGlyZWN0VG9nZ2xlID0gJ2QnOyAvLyDiiIIg4oiGIMOOXG4gICAgICAgICAgZWxzZSBpZiAoY29kZSA9PT0gODIyNCB8fCBjb2RlID09PSA4MjI1KSBkaXJlY3RUb2dnbGUgPSAndCc7IC8vIOKAoCDigKFcbiAgICAgICAgICBlbHNlIGlmIChjb2RlID09PSA4NzMwKSBkaXJlY3RUb2dnbGUgPSAndic7IC8vIOKImlxuICAgICAgICB9XG4gICAgICAgIC8vIEFsc28gY2hlY2sgRVNDK2xldHRlciAoMi1jaGFyIHNlcXVlbmNlKVxuICAgICAgICBpZiAoIWRpcmVjdFRvZ2dsZSAmJiBjb2RlID09PSAyNyAmJiBzdHIubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgY29uc3QgbGV0dGVyID0gc3RyLmNoYXJBdCgxKS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmIChbJ2cnLCAnYScsICdkJywgJ3QnLCAndiddLmluY2x1ZGVzKGxldHRlcikpIHtcbiAgICAgICAgICAgIGRpcmVjdFRvZ2dsZSA9IGxldHRlcjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGlyZWN0VG9nZ2xlKSB7XG4gICAgICAgICAgLy8gSGFuZGxlIGltbWVkaWF0ZWx5IChub3QgaW4gc2V0SW1tZWRpYXRlIHRvIGVuc3VyZSBpdCBydW5zKVxuICAgICAgICAgIHNlbGYuaGFuZGxlVG9nZ2xlKGRpcmVjdFRvZ2dsZSk7XG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIFN1cHByZXNzIHRoZSBldmVudFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gQkxPQ0s6IE11bHRpLWNoYXIgdG9nZ2xlIGRldGVjdGlvbiAoZm9yIHBhc3RlIHNjZW5hcmlvcylcbiAgICAgICAgY29uc3QgdG9nZ2xlcyA9IHNlbGYuZXh0cmFjdFRvZ2dsZUxldHRlcnMoc3RyKTtcbiAgICAgICAgaWYgKHRvZ2dsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gVE9HR0xFIE1VTFRJIERFVEVDVDogJHt0b2dnbGVzLmpvaW4oJywnKX1gKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZm9yIChjb25zdCBsZXR0ZXIgb2YgdG9nZ2xlcykge1xuICAgICAgICAgICAgc2VsZi5oYW5kbGVUb2dnbGUobGV0dGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIFN1cHByZXNzIHRoZSBldmVudFxuICAgICAgICB9XG5cbiAgICAgICAgLy8gUEFTVEUgREVURUNUSU9OIGF0IGVtaXQgbGV2ZWw6IE11bHRpLWNoYXIgZGF0YSA9IHBhc3RlXG4gICAgICAgIC8vIFdoZW4gdXNlciB0eXBlcywgZWFjaCBjaGFyYWN0ZXIgYXJyaXZlcyBzZXBhcmF0ZWx5XG4gICAgICAgIC8vIFdoZW4gdXNlciBwYXN0ZXMsIGFsbCBjaGFyYWN0ZXJzIGFycml2ZSBhcyBvbmUgY2h1bmsgT1IgcmFwaWRseVxuICAgICAgICAvLyBDaGVjayBmb3IgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgZmlyc3RcbiAgICAgICAgY29uc3QgcGFzdGVTdGFydE1hcmtlciA9ICdcXHgxYlsyMDB+JztcbiAgICAgICAgY29uc3QgcGFzdGVFbmRNYXJrZXIgPSAnXFx4MWJbMjAxfic7XG4gICAgICAgIGNvbnN0IGhhc0JyYWNrZXRlZFN0YXJ0ID0gc3RyLmluY2x1ZGVzKHBhc3RlU3RhcnRNYXJrZXIpO1xuICAgICAgICBjb25zdCBoYXNCcmFja2V0ZWRFbmQgPSBzdHIuaW5jbHVkZXMocGFzdGVFbmRNYXJrZXIpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBicmFja2V0ZWQgcGFzdGUgKHRlcm1pbmFsIHNlbmRzIG1hcmtlcnMpXG4gICAgICAgIGlmIChoYXNCcmFja2V0ZWRTdGFydCB8fCBoYXNCcmFja2V0ZWRFbmQgfHwgc2VsZi5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICAgICAgLy8gTGV0IHRoZSByZWd1bGFyIGJyYWNrZXRlZCBwYXN0ZSBoYW5kbGVyIGRlYWwgd2l0aCBpdFxuICAgICAgICAgIC8vIEZhbGwgdGhyb3VnaCB0byByZWFkbGluZVxuICAgICAgICB9XG4gICAgICAgIC8vIERldGVjdCBwbGFpbiBwYXN0ZTogbXVsdGktY2hhciwgaGFzIHByaW50YWJsZSBjb250ZW50LCBub3QgZXNjYXBlIHNlcXVlbmNlXG4gICAgICAgIC8vIFRoaXMgaXMgaGFuZGxlZCBieSB0aGUgYnVmZmVyIGxvZ2ljIGJlbG93LCBzbyB3ZSBjYW4gcmVtb3ZlIHRoaXMgc3BlY2lhbCBjYXNlXG4gICAgICAgIC8vIFRoZSBidWZmZXIgbG9naWMgYXQgdGhlIGJvdHRvbSBoYW5kbGVzIGJvdGggc2luZ2xlLWNoYXIgYW5kIG11bHRpLWNoYXJcbiAgICAgICAgLy8gQnVmZmVyIEFMTCBpbnB1dCAoaW5jbHVkaW5nIG11bHRpLWNoYXIgY2h1bmtzKSBhbmQgY29tbWl0IGFmdGVyIGlkbGVcbiAgICAgICAgLy8gVGhpcyBjYXRjaGVzIHBhc3RlIHdoZXRoZXIgdGVybWluYWwgc2VuZHMgaXQgYXMgb25lIGNodW5rIG9yIGNoYXItYnktY2hhclxuICAgICAgICBjb25zdCBpc1ByaW50YWJsZSA9IChjOiBudW1iZXIpID0+IChjID49IDMyICYmIGMgPCAxMjcpIHx8IGMgPiAxMjc7IC8vIEFTQ0lJIHByaW50YWJsZSBvciBVbmljb2RlXG4gICAgICAgIGNvbnN0IGlzTmV3bGluZSA9IChjOiBudW1iZXIpID0+IGMgPT09IDEwIHx8IGMgPT09IDEzO1xuICAgICAgICBjb25zdCBpblBhc3RlQnVyc3QgPSBzZWxmLmVtaXRQYXN0ZUJ1ZmZlci5sZW5ndGggPiAwO1xuXG4gICAgICAgIC8vIFBBU1RFIERFVEVDVElPTjogT25seSBidWZmZXIgd2hlbiB3ZSBkZXRlY3QgcGFzdGUtbGlrZSBpbnB1dFxuICAgICAgICAvLyAtIE11bHRpLWNoYXIgc3RyaW5nIChkZWZpbml0ZWx5IHBhc3RlIC0gdGVybWluYWwgc2VudCBjaHVuaylcbiAgICAgICAgLy8gLSBDb250aW51YXRpb24gb2YgZXhpc3RpbmcgcGFzdGUgYnVyc3RcbiAgICAgICAgLy8gRm9yIHNpbmdsZSBjaGFycywgbGV0IHRoZW0gdGhyb3VnaCBpbW1lZGlhdGVseSBmb3IgcmVzcG9uc2l2ZSB0eXBpbmdcbiAgICAgICAgbGV0IHNob3VsZEJ1ZmZlciA9IGZhbHNlO1xuXG4gICAgICAgIC8vIE11bHRpLWNoYXIgbm9uLWVzY2FwZSA9IGRlZmluaXRlbHkgcGFzdGVcbiAgICAgICAgaWYgKHN0ci5sZW5ndGggPiAxICYmICFzdHIuc3RhcnRzV2l0aCgnXFx4MWInKSkge1xuICAgICAgICAgIHNob3VsZEJ1ZmZlciA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQ29udGludWUgYnVmZmVyaW5nIGlmIHdlJ3JlIGFscmVhZHkgaW4gYSBwYXN0ZSBidXJzdFxuICAgICAgICBlbHNlIGlmIChpblBhc3RlQnVyc3QgJiYgc3RyLmxlbmd0aCA9PT0gMSAmJiAoaXNQcmludGFibGUoY29kZSkgfHwgaXNOZXdsaW5lKGNvZGUpKSkge1xuICAgICAgICAgIHNob3VsZEJ1ZmZlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoc2hvdWxkQnVmZmVyKSB7XG4gICAgICAgICAgLy8gQWRkIHRvIGJ1ZmZlciAoc3RyaXAgYW55IHRvZ2dsZSBzeW1ib2xzIHRoYXQgbWlnaHQgaGF2ZSBzbGlwcGVkIHRocm91Z2gpXG4gICAgICAgICAgY29uc3QgY2xlYW5lZCA9IHNlbGYuc3RyaXBUb2dnbGVTeW1ib2xzKHN0cik7XG4gICAgICAgICAgaWYgKCFjbGVhbmVkKSByZXR1cm4gdHJ1ZTsgLy8gV2FzIG9ubHkgdG9nZ2xlIGNoYXJzXG4gICAgICAgICAgc2VsZi5lbWl0UGFzdGVCdWZmZXIgKz0gY2xlYW5lZDtcblxuICAgICAgICAgIC8vIENsZWFyIGV4aXN0aW5nIHRpbWVyXG4gICAgICAgICAgaWYgKHNlbGYuZW1pdFBhc3RlVGltZXIpIHtcbiAgICAgICAgICAgIGNsZWFyVGltZW91dChzZWxmLmVtaXRQYXN0ZVRpbWVyKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZXQgdGltZXIgdG8gY29tbWl0IGFmdGVyIGlkbGVcbiAgICAgICAgICBzZWxmLmVtaXRQYXN0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgICBzZWxmLmNvbW1pdEVtaXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgICAgIH0sIHNlbGYuZW1pdFBhc3RlQ29tbWl0TXMpO1xuXG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIFN1cHByZXNzIC0gd2UncmUgYnVmZmVyaW5nXG4gICAgICAgIH1cbiAgICAgICAgLy8gU2luZ2xlIGNoYXIgd2hlbiBOT1QgaW4gcGFzdGUgYnVyc3QgPSBub3JtYWwgdHlwaW5nLCBsZXQgdGhyb3VnaFxuICAgICAgICAvLyBOZXdsaW5lIHdoZW4gbm90IGluIGJ1cnN0ID0gRW50ZXIga2V5LCBsZXQgdGhyb3VnaFxuXG4gICAgICAgIC8vIE5PVEU6IERvIE5PVCBibG9jayBvdGhlciBjb250cm9sIGNoYXJhY3RlcnMgaGVyZSFcbiAgICAgICAgLy8gQmFja3NwYWNlICg4LzEyNyksIFRhYiAoOSksIEVudGVyICgxMyksIGFycm93cyAoMjcrc2VxKSBtdXN0IHBhc3MgdGhyb3VnaFxuICAgICAgICAvLyBmb3Igbm9ybWFsIGVkaXRpbmcgdG8gd29yay4gT25seSBDdHJsK0MvRCBhbmQgdG9nZ2xlcyBhcmUgaW50ZXJjZXB0ZWQgYWJvdmUuXG4gICAgICB9XG5cbiAgICAgIC8vIEFsbG93IGFsbCBvdGhlciBldmVudHMgdG8gcGFzcyB0aHJvdWdoXG4gICAgICByZXR1cm4gc2VsZi5vcmlnaW5hbEVtaXQhKGV2ZW50LCAuLi5hcmdzKTtcbiAgICB9O1xuXG4gICAgLy8gTm93IHNldCB1cCByZWFkbGluZSdzIGtleXByZXNzIGVtaXNzaW9uXG4gICAgcmVhZGxpbmUuZW1pdEtleXByZXNzRXZlbnRzKHRoaXMuaW5wdXQsIHRoaXMucmwpO1xuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuXG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IChzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpID0+IHtcbiAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmhhbmRsZUtleXByZXNzKHN0ciwga2V5KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuaW5wdXQub24oJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gIH1cblxuICAvKipcbiAgICogRGV0ZWN0IHRvZ2dsZSBjaGFyYWN0ZXJzIGZyb20gcmF3IGlucHV0IGRhdGEgYmVmb3JlIHJlYWRsaW5lIHByb2Nlc3NpbmcuXG4gICAqIFJldHVybnMgdGhlIHRvZ2dsZSBsZXR0ZXIgKGcsIGEsIGQsIHQsIHYpIG9yIG51bGwgaWYgbm90IGEgdG9nZ2xlLlxuICAgKi9cbiAgcHJpdmF0ZSBkZXRlY3RUb2dnbGVGcm9tUmF3RGF0YShpbnB1dDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCFpbnB1dCkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoMCk7XG5cbiAgICAvLyBVbmljb2RlIGNoYXJhY3RlcnMgZnJvbSBcIk9wdGlvbiBzZW5kcyBVbmljb2RlXCIgbW9kZVxuICAgIGlmIChjb2RlID09PSAxNjkgfHwgY29kZSA9PT0gODQ4MikgcmV0dXJuICdnJzsgLy8gwqkg4oSiXG4gICAgaWYgKGNvZGUgPT09IDIyOSB8fCBjb2RlID09PSAxOTcpIHJldHVybiAnYSc7ICAvLyDDpSDDhVxuICAgIGlmIChjb2RlID09PSA4NzA2IHx8IGNvZGUgPT09IDg3MTAgfHwgY29kZSA9PT0gMjA2KSByZXR1cm4gJ2QnOyAvLyDiiIIg4oiGIMOOXG4gICAgaWYgKGNvZGUgPT09IDgyMjQgfHwgY29kZSA9PT0gODIyNSkgcmV0dXJuICd0JzsgLy8g4oCgIOKAoVxuICAgIGlmIChjb2RlID09PSA4NzMwKSByZXR1cm4gJ3YnOyAvLyDiiJpcblxuICAgIC8vIEVTQyArIGxldHRlciBmcm9tIFwiT3B0aW9uIHNlbmRzIE1ldGFcIiBtb2RlXG4gICAgaWYgKGNvZGUgPT09IDI3ICYmIGlucHV0Lmxlbmd0aCA9PT0gMikge1xuICAgICAgY29uc3QgbGV0dGVyID0gaW5wdXQuY2hhckF0KDEpLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoWydnJywgJ2EnLCAnZCcsICd0JywgJ3YnXS5pbmNsdWRlcyhsZXR0ZXIpKSByZXR1cm4gbGV0dGVyO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgYWxsIHRvZ2dsZSBsZXR0ZXJzIGZyb20gYW4gYXJiaXRyYXJ5IGNodW5rIG9mIGlucHV0IGRhdGEuXG4gICAqIEhhbmRsZXMgYm90aCBVbmljb2RlIHRvZ2dsZXMgYW5kIEVTQy1wcmVmaXhlZCBNZXRhIHNlcXVlbmNlcywgYW5kXG4gICAqIHN1cHBvcnRzIG11bHRpcGxlIHRvZ2dsZXMgaW4gYSBzaW5nbGUgZGF0YSBldmVudC5cbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRvZ2dsZUxldHRlcnMoaW5wdXQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIWlucHV0KSByZXR1cm4gW107XG4gICAgY29uc3QgdG9nZ2xlczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBjaGFycyA9IFsuLi5pbnB1dF07XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaCA9IGNoYXJzW2ldO1xuICAgICAgY29uc3QgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgIC8vIERldGVjdCBFU0MgKyBsZXR0ZXIgKE9wdGlvbiBzZW5kcyBNZXRhKVxuICAgICAgaWYgKGNvZGUgPT09IDI3ICYmIGkgKyAxIDwgY2hhcnMubGVuZ3RoKSB7XG4gICAgICAgIGNvbnN0IGxldHRlciA9IGNoYXJzW2kgKyAxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoWydnJywgJ2EnLCAnZCcsICd0JywgJ3YnXS5pbmNsdWRlcyhsZXR0ZXIpKSB7XG4gICAgICAgICAgdG9nZ2xlcy5wdXNoKGxldHRlcik7XG4gICAgICAgICAgaSsrOyAvLyBTa2lwIHRoZSBtZXRhIGxldHRlciBzbyBpdCBpc24ndCBkb3VibGUtY291bnRlZFxuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IGRldGVjdGVkID0gdGhpcy5kZXRlY3RUb2dnbGVGcm9tUmF3RGF0YShjaCk7XG4gICAgICBpZiAoZGV0ZWN0ZWQpIHtcbiAgICAgICAgdG9nZ2xlcy5wdXNoKGRldGVjdGVkKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdG9nZ2xlcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmUgdG9nZ2xlIHN5bWJvbHMgKGFuZCB0aGVpciBFU0MgcHJlZml4ZXMpIGZyb20gYSBzdHJpbmcgc28gdGhleVxuICAgKiBjYW4gbmV2ZXIgbGVhayBpbnRvIHRoZSBwcm9tcHQgYnVmZmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBzdHJpcFRvZ2dsZVN5bWJvbHMoaW5wdXQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFpbnB1dCkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGNoYXJzID0gWy4uLmlucHV0XTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBjaCA9IGNoYXJzW2ldO1xuICAgICAgY29uc3QgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG5cbiAgICAgIC8vIERyb3AgVW5pY29kZSB0b2dnbGUgY2hhcmFjdGVycyBvdXRyaWdodFxuICAgICAgaWYgKHRoaXMuaXNUb2dnbGVDaGFyYWN0ZXIoY2gpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBEcm9wIEVTQyArIHRvZ2dsZSBsZXR0ZXIgKE9wdGlvbiBzZW5kcyBNZXRhKVxuICAgICAgLy8gQWxzbyBoYW5kbGUgY2FzZSB3aGVyZSBFU0MgbWlnaHQgYmUgZm9sbG93ZWQgYnkgWyAoQ1NJIHNlcXVlbmNlIHN0YXJ0KVxuICAgICAgaWYgKGNvZGUgPT09IDI3KSB7XG4gICAgICAgIGlmIChpICsgMSA8IGNoYXJzLmxlbmd0aCkge1xuICAgICAgICAgIGNvbnN0IGxldHRlciA9IGNoYXJzW2kgKyAxXS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICAgIGlmIChbJ2cnLCAnYScsICdkJywgJ3QnLCAndiddLmluY2x1ZGVzKGxldHRlcikpIHtcbiAgICAgICAgICAgIGkrKzsgLy8gU2tpcCB0aGUgbWV0YSBsZXR0ZXIgYXMgd2VsbFxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIEFsc28gZHJvcCBFU0MgKyAnWycgKENTSSBzZXF1ZW5jZSBzdGFydCkgdG8gcHJldmVudCBwYXJ0aWFsIGVzY2FwZSBzZXF1ZW5jZXNcbiAgICAgICAgICBpZiAoY2hhcnNbaSArIDFdID09PSAnWycpIHtcbiAgICAgICAgICAgIGkrKzsgLy8gU2tpcCB0aGUgJ1snIGFzIHdlbGxcbiAgICAgICAgICAgIC8vIFNraXAgYW55IGRpZ2l0cywgc2VtaWNvbG9ucywgYW5kIHRoZSBmaW5hbCBjaGFyYWN0ZXJcbiAgICAgICAgICAgIHdoaWxlIChpICsgMSA8IGNoYXJzLmxlbmd0aCAmJiAvWzAtOTtdLy50ZXN0KGNoYXJzW2kgKyAxXSkpIHtcbiAgICAgICAgICAgICAgaSsrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGkgKyAxIDwgY2hhcnMubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGkrKzsgLy8gU2tpcCB0aGUgZmluYWwgY2hhcmFjdGVyIChBLVosIGEteiwgfiwgZXRjLilcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXN1bHQgKz0gY2g7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIGNoYXJhY3RlciBpcyBhIHRvZ2dsZSBjaGFyYWN0ZXIgdGhhdCBzaG91bGQgbmV2ZXIgYmUgaW5zZXJ0ZWQuXG4gICAqIFVzZWQgYXMgYSBzYWZldHkgZ3VhcmQgdG8gcHJldmVudCB0b2dnbGUgc3ltYm9scyBmcm9tIGFwcGVhcmluZyBpbiBpbnB1dC5cbiAgICovXG4gIHByaXZhdGUgaXNUb2dnbGVDaGFyYWN0ZXIoaW5wdXQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGlmICghaW5wdXQgfHwgaW5wdXQubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG4gICAgY29uc3QgY29kZSA9IGlucHV0LmNoYXJDb2RlQXQoMCk7XG4gICAgLy8gVW5pY29kZSB0b2dnbGUgY2hhcmFjdGVyc1xuICAgIGlmIChjb2RlID09PSAxNjkgfHwgY29kZSA9PT0gODQ4MikgcmV0dXJuIHRydWU7IC8vIMKpIOKEoiAoT3B0aW9uK0cpXG4gICAgaWYgKGNvZGUgPT09IDIyOSB8fCBjb2RlID09PSAxOTcpIHJldHVybiB0cnVlOyAgLy8gw6Ugw4UgKE9wdGlvbitBKVxuICAgIGlmIChjb2RlID09PSA4NzA2IHx8IGNvZGUgPT09IDg3MTAgfHwgY29kZSA9PT0gMjA2KSByZXR1cm4gdHJ1ZTsgLy8g4oiCIOKIhiDDjiAoT3B0aW9uK0QpXG4gICAgaWYgKGNvZGUgPT09IDgyMjQgfHwgY29kZSA9PT0gODIyNSkgcmV0dXJuIHRydWU7IC8vIOKAoCDigKEgKE9wdGlvbitUKVxuICAgIGlmIChjb2RlID09PSA4NzMwKSByZXR1cm4gdHJ1ZTsgLy8g4oiaIChPcHRpb24rVilcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIGEgZGV0ZWN0ZWQgdG9nZ2xlIGFjdGlvbi4gQ2FsbGVkIGZyb20gYm90aCByYXcgZGF0YSBpbnRlcmNlcHRpb25cbiAgICogYW5kIGtleXByZXNzIHByb2Nlc3NpbmcgZm9yIHJlbGlhYmlsaXR5LlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVUb2dnbGUobGV0dGVyOiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBDbGVhciBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHNvIHRoZSBzeW1ib2wgbmV2ZXIgbGFuZHMgaW4gdGhlIHByb21wdFxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIC8vIENhbmNlbCBhbnkgcGxhaW4gcGFzdGUgZGV0ZWN0aW9uIGluIHByb2dyZXNzXG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuXG4gICAgLy8gRm9yY2UgaW1tZWRpYXRlIHJlbmRlciBmb3IgdG9nZ2xlcyAtIHdvcmtzIGR1cmluZyBzdHJlYW1pbmdcbiAgICBjb25zdCBmb3JjZVJlbmRlciA9ICgpID0+IHtcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIFRPR0dMRSBIQU5ETElORzogJHtsZXR0ZXJ9YCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChsZXR0ZXIpIHtcbiAgICAgIGNhc2UgJ2EnOlxuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2cnOlxuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICAgIGZvcmNlUmVuZGVyKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZCc6XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWFscGhhemVybycpO1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3QnOlxuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS10aGlua2luZycpO1xuICAgICAgICBmb3JjZVJlbmRlcigpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3YnOlxuICAgICAgICAvLyBPcHRpb24rVjogQXZhaWxhYmxlIGZvciBmdXR1cmUgdG9nZ2xlXG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgQ3RybCtDIGRldGVjdGVkIGF0IHJhdyBkYXRhIGxldmVsLlxuICAgKiBCeXBhc3NlcyByZWFkbGluZSdzIGtleXByZXNzIHBhcnNpbmcgZm9yIHJlbGlhYmlsaXR5LlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVDdHJsQygpOiB2b2lkIHtcbiAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIEhBTkRMSU5HIENUUkwrQ2ApO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIGlucHV0IGNhcHR1cmUgbW9kZSwgY2FuY2VsIGl0IGZpcnN0XG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrQyBiZWhhdmlvcjpcbiAgICAvLyAxLiBJZiBidWZmZXIgaGFzIHRleHQ6IGNsZWFyIGl0IGZpcnN0LCB0aGVuIG5vdGlmeSBzaGVsbFxuICAgIC8vIDIuIElmIGJ1ZmZlciBpcyBlbXB0eTogbGV0IHNoZWxsIGRlY2lkZSB0byBwYXVzZSBBSSBvciBxdWl0XG4gICAgY29uc3QgaGFkQnVmZmVyID0gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICBpZiAoaGFkQnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICAvLyBFbWl0IGN0cmxjIGV2ZW50IHdpdGggYnVmZmVyIHN0YXRlIHNvIHNoZWxsIGNhbiBoYW5kbGUgYXBwcm9wcmlhdGVseVxuICAgIHRoaXMuZW1pdCgnY3RybGMnLCB7IGhhZEJ1ZmZlciB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIYW5kbGUgQ3RybCtEIGRldGVjdGVkIGF0IHJhdyBkYXRhIGxldmVsLlxuICAgKiBCeXBhc3NlcyByZWFkbGluZSdzIGtleXByZXNzIHBhcnNpbmcgZm9yIHJlbGlhYmlsaXR5LlxuICAgKi9cbiAgcHJpdmF0ZSBoYW5kbGVDdHJsRCgpOiB2b2lkIHtcbiAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIEhBTkRMSU5HIENUUkwrRGApO1xuICAgIH1cblxuICAgIC8vIElmIHdlJ3JlIGluIGlucHV0IGNhcHR1cmUgbW9kZSwgY2FuY2VsIGl0IGZpcnN0XG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrRDogaW50ZXJydXB0IGlmIGJ1ZmZlciBpcyBlbXB0eVxuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuZW1pdCgnaW50ZXJydXB0Jyk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENvbW1pdCBidWZmZXJlZCBlbWl0LWxldmVsIGlucHV0IGFmdGVyIGlkbGUgcGVyaW9kLlxuICAgKiBEZWNpZGVzIHdoZXRoZXIgdG8gdHJlYXQgYXMgcGFzdGUgKGNvbGxhcHNlKSBvciBub3JtYWwgdHlwaW5nIChpbnNlcnQpLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRFbWl0UGFzdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgY29uc3QgY29udGVudCA9IHRoaXMuZW1pdFBhc3RlQnVmZmVyO1xuICAgIHRoaXMuZW1pdFBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5lbWl0UGFzdGVUaW1lciA9IG51bGw7XG5cbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcblxuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gQ09NTUlUIEVNSVQgQlVGRkVSOiAke2NvbnRlbnQubGVuZ3RofSBjaGFyc2ApO1xuICAgIH1cblxuICAgIC8vIFNhbml0aXplIGNvbnRlbnRcbiAgICBsZXQgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudChjb250ZW50KTtcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG5cbiAgICAvLyBJbnB1dCBwcm90ZWN0aW9uIHZhbGlkYXRpb25cbiAgICBpZiAodGhpcy5pbnB1dFByb3RlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmlucHV0UHJvdGVjdGlvbi52YWxpZGF0ZUlucHV0KHNhbml0aXplZCwgdHJ1ZSk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNhbml0aXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgIH1cblxuICAgIGlmICghc2FuaXRpemVkKSByZXR1cm47XG5cbiAgICBjb25zdCBsaW5lcyA9IHNhbml0aXplZC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgaXNNdWx0aUxpbmUgPSBsaW5lcy5sZW5ndGggPiAxO1xuICAgIGNvbnN0IGlzTG9uZ0NvbnRlbnQgPSBzYW5pdGl6ZWQubGVuZ3RoID4gMTAwOyAvLyBMb3dlciB0aHJlc2hvbGQgZm9yIGJldHRlciBVWFxuXG4gICAgLy8gTXVsdGktbGluZSBvciBsb25nIGNvbnRlbnQ6IHNob3cgY29sbGFwc2VkIGluZGljYXRvclxuICAgIGlmIChpc011bHRpTGluZSB8fCBpc0xvbmdDb250ZW50KSB7XG4gICAgICAvLyBDb21iaW5lIHdpdGggZXhpc3RpbmcgY29sbGFwc2VkIHBhc3RlIGlmIGFueVxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgc2FuaXRpemVkID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0ICsgc2FuaXRpemVkO1xuICAgICAgICBjb25zdCBuZXdMaW5lcyA9IHNhbml0aXplZC5zcGxpdCgnXFxuJyk7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgICAgdGV4dDogc2FuaXRpemVkLFxuICAgICAgICAgIGxpbmVzOiBuZXdMaW5lcy5sZW5ndGgsXG4gICAgICAgICAgY2hhcnM6IHNhbml0aXplZC5sZW5ndGgsXG4gICAgICAgIH07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICAgIHRleHQ6IHNhbml0aXplZCxcbiAgICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICAgIGNoYXJzOiBzYW5pdGl6ZWQubGVuZ3RoLFxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB9XG4gICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLmZvcmNlTmV4dFJlbmRlciA9IHRydWU7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gU2hvcnQgc2luZ2xlLWxpbmUgY29udGVudDogaW5zZXJ0IGRpcmVjdGx5IGFzIGlmIHR5cGVkXG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuaW5zZXJ0U2luZ2xlTGluZVRleHQoc2FuaXRpemVkKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogSGFuZGxlIHBhc3RlIGRldGVjdGVkIGF0IGVtaXQgbGV2ZWwgKG11bHRpLWNoYXIgZGF0YSBhcnJpdmluZyBhdCBvbmNlKS5cbiAgICogVGhpcyBieXBhc3NlcyByZWFkbGluZSBwcm9jZXNzaW5nIGZvciByZWxpYWJsZSBwYXN0ZSBkZXRlY3Rpb24uXG4gICAqL1xuICBwcml2YXRlIGhhbmRsZUVtaXRMZXZlbFBhc3RlKGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gRU1JVCBQQVNURSBIQU5ETElORzogJHtjb250ZW50Lmxlbmd0aH0gY2hhcnNgKTtcbiAgICB9XG5cbiAgICAvLyBTYW5pdGl6ZSBjb250ZW50IChyZW1vdmUgY29udHJvbCBjaGFycywgbm9ybWFsaXplIGxpbmUgZW5kaW5ncylcbiAgICBsZXQgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudChjb250ZW50KTtcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG5cbiAgICAvLyBJbnB1dCBwcm90ZWN0aW9uIHZhbGlkYXRpb25cbiAgICBpZiAodGhpcy5pbnB1dFByb3RlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmlucHV0UHJvdGVjdGlvbi52YWxpZGF0ZUlucHV0KHNhbml0aXplZCwgdHJ1ZSk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHNhbml0aXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgIH1cblxuICAgIGlmICghc2FuaXRpemVkKSByZXR1cm47XG5cbiAgICBjb25zdCBsaW5lcyA9IHNhbml0aXplZC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgaXNNdWx0aUxpbmUgPSBsaW5lcy5sZW5ndGggPiAxO1xuICAgIGNvbnN0IGlzTG9uZ0NvbnRlbnQgPSBzYW5pdGl6ZWQubGVuZ3RoID4gMjAwO1xuXG4gICAgLy8gTXVsdGktbGluZSBvciBsb25nIGNvbnRlbnQ6IHNob3cgY29sbGFwc2VkIGluZGljYXRvclxuICAgIGlmIChpc011bHRpTGluZSB8fCBpc0xvbmdDb250ZW50KSB7XG4gICAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgY29sbGFwc2VkIHBhc3RlIGZpcnN0XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgIHRleHQ6IHNhbml0aXplZCxcbiAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgY2hhcnM6IHNhbml0aXplZC5sZW5ndGgsXG4gICAgICB9O1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBTaG9ydCBzaW5nbGUtbGluZSBjb250ZW50OiBpbnNlcnQgZGlyZWN0bHkgYXMgaWYgdHlwZWRcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGV4cGFuZCBpdCBmaXJzdFxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmluc2VydFNpbmdsZUxpbmVUZXh0KHNhbml0aXplZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBlbWl0SW5wdXRDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcGF5bG9hZDogSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgICAgIHRleHQ6IHRoaXMuYnVmZmVyLFxuICAgICAgY3Vyc29yOiB0aGlzLmN1cnNvcixcbiAgICB9O1xuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleXByZXNzKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IHZvaWQge1xuICAgIC8vIFNraXAgcHJvY2Vzc2luZyBpZiBhIHJhdy1sZXZlbCB0b2dnbGUgd2FzIGFscmVhZHkgaGFuZGxlZCBmb3IgdGhpcyBrZXlwcmVzc1xuICAgIGlmICh0aGlzLnBlbmRpbmdUb2dnbGVTa2lwcyA+IDApIHtcbiAgICAgIHRoaXMucGVuZGluZ1RvZ2dsZVNraXBzLS07XG4gICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gU0tJUCBLRVlQUkVTUyAocGVuZGluZyB0b2dnbGUpYCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQkxPQ0s6IElmIEN0cmwrQy9EIHdhcyBpbnRlcmNlcHRlZCBhdCByYXcgbGV2ZWwsIGl0J3MgYWxyZWFkeSBoYW5kbGVkXG4gICAgaWYgKHRoaXMuaW50ZXJjZXB0ZWRDdHJsQyB8fCB0aGlzLmludGVyY2VwdGVkQ3RybEQpIHtcbiAgICAgIHJldHVybjsgLy8gQWxyZWFkeSBoYW5kbGVkIGluIHJhdyBkYXRhIGhhbmRsZXJcbiAgICB9XG5cbiAgICAvLyBCTE9DSzogSWYgdG9nZ2xlIHdhcyBpbnRlcmNlcHRlZCBhdCByYXcgbGV2ZWwsIGl0J3MgYWxyZWFkeSBoYW5kbGVkXG4gICAgaWYgKHRoaXMuaW50ZXJjZXB0ZWRUb2dnbGUpIHtcbiAgICAgIHRoaXMuaW50ZXJjZXB0ZWRUb2dnbGUgPSBudWxsO1xuICAgICAgcmV0dXJuOyAvLyBBbHJlYWR5IGhhbmRsZWQgaW4gcmF3IGRhdGEgaGFuZGxlclxuICAgIH1cblxuICAgIC8vIEJMT0NLOiBDaGVjayBjaGFyYWN0ZXIgY29kZSBkaXJlY3RseSBmb3Igc3BlY2lhbCBrZXlzXG4gICAgY29uc3QgY29kZSA9IHN0ciA/IHN0ci5jaGFyQ29kZUF0KDApIDogMDtcbiAgICBpZiAoY29kZSA9PT0gMykgeyAvLyBDdHJsK0NcbiAgICAgIHRoaXMuaGFuZGxlQ3RybEMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGNvZGUgPT09IDQpIHsgLy8gQ3RybCtEXG4gICAgICB0aGlzLmhhbmRsZUN0cmxEKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQkxPQ0s6IENoZWNrIGZvciB0b2dnbGUgY2hhcmFjdGVycyBkaXJlY3RseVxuICAgIGlmIChzdHIgJiYgdGhpcy5pc1RvZ2dsZUNoYXJhY3RlcihzdHIpKSB7XG4gICAgICB0aGlzLmhhbmRsZVRvZ2dsZSh0aGlzLmRldGVjdFRvZ2dsZUZyb21SYXdEYXRhKHN0cikhKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZWJ1ZzogbG9nIGVudHJ5IHBhcmFtZXRlcnMgdG8gdW5kZXJzdGFuZCB3aGF0IHJlYWRsaW5lIGlzIHNlbmRpbmdcbiAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgIGNvbnN0IGtleUluZm8gPSBrZXkgPyBgbmFtZT0ke2tleS5uYW1lfSBjdHJsPSR7a2V5LmN0cmx9IG1ldGE9JHtrZXkubWV0YX0gc2hpZnQ9JHtrZXkuc2hpZnR9IHNlcT0ke2tleS5zZXF1ZW5jZSA/IEpTT04uc3RyaW5naWZ5KGtleS5zZXF1ZW5jZSkgOiAnbnVsbCd9YCA6ICdudWxsJztcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIEVOVFJZOiBzdHI9JHtzdHIgPyBKU09OLnN0cmluZ2lmeShzdHIpIDogJ251bGwnfSBjb2RlPSR7Y29kZX0ga2V5PXske2tleUluZm99fWApO1xuICAgIH1cbiAgICAvLyBOb3JtYWxpemUgbWlzc2luZyBrZXkgbWV0YWRhdGEgKGNvbW1vbiBmb3Igc29tZSB0ZXJtaW5hbHMgZW1pdHRpbmcgcmF3IGVzY2FwZSBjb2RlcylcbiAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5ID8/IHRoaXMucGFyc2VFc2NhcGVTZXF1ZW5jZShzdHIpO1xuICAgIGNvbnN0IGtleUZvclBhc3RlID0gbm9ybWFsaXplZEtleSA/PyAoc3RyID8geyBzZXF1ZW5jZTogc3RyIH0gYXMgcmVhZGxpbmUuS2V5IDoga2V5KTtcblxuICAgIC8vIENSSVRJQ0FMOiBIYW5kbGUgQ3RybCtDIGFuZCBDdHJsK0QgRklSU1QgLSBtdXN0IEFMV0FZUyB3b3JrIHRvIHF1aXQvaW50ZXJydXB0XG4gICAgLy8gVGhpcyBpcyBjaGVja2VkIGJlZm9yZSBBTlkgb3RoZXIgcHJvY2Vzc2luZyB0byBlbnN1cmUgaXQgY2FuIG5ldmVyIGJlIGJsb2NrZWRcbiAgICBpZiAobm9ybWFsaXplZEtleT8uY3RybCAmJiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYycgfHwgbm9ybWFsaXplZEtleS5uYW1lID09PSAnZCcpKSB7XG4gICAgICAvLyBJZiB3ZSdyZSBpbiBpbnB1dCBjYXB0dXJlIG1vZGUsIGNhbmNlbCBpdCBmaXJzdFxuICAgICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYycpIHtcbiAgICAgICAgLy8gQ3RybCtDIGJlaGF2aW9yOlxuICAgICAgICAvLyAxLiBJZiBidWZmZXIgaGFzIHRleHQ6IGNsZWFyIGl0IGZpcnN0LCB0aGVuIG5vdGlmeSBzaGVsbFxuICAgICAgICAvLyAyLiBJZiBidWZmZXIgaXMgZW1wdHk6IGxldCBzaGVsbCBkZWNpZGUgdG8gcGF1c2UgQUkgb3IgcXVpdFxuICAgICAgICBjb25zdCBoYWRCdWZmZXIgPSB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgICAgICBpZiAoaGFkQnVmZmVyKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICB9XG4gICAgICAgIC8vIEVtaXQgY3RybGMgZXZlbnQgd2l0aCBidWZmZXIgc3RhdGUgc28gc2hlbGwgY2FuIGhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICAgIHRoaXMuZW1pdCgnY3RybGMnLCB7IGhhZEJ1ZmZlciB9KTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZCcpIHtcbiAgICAgICAgLy8gQ3RybCtEOiBpbnRlcnJ1cHQgaWYgYnVmZmVyIGlzIGVtcHR5XG4gICAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLmVtaXQoJ2ludGVycnVwdCcpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgbWFjT1MgT3B0aW9uK2tleSB0b2dnbGVzIEJFRk9SRSBhbnkgcGFzdGUgZGV0ZWN0aW9uXG4gICAgLy8gQ2hlY2sgbXVsdGlwbGUgc291cmNlczogc3RyLCBrZXkuc2VxdWVuY2UsIGFuZCBrZXkubWV0YStrZXkubmFtZVxuICAgIC8vIFRoaXMgaXMgYSBmYWxsYmFjayAtIHByaW1hcnkgZGV0ZWN0aW9uIGhhcHBlbnMgaW4gdGhlIHJhdyAnZGF0YScgZXZlbnQgaGFuZGxlclxuXG4gICAgLy8gQ2hlY2sgc3RyIGZpcnN0XG4gICAgbGV0IHRvZ2dsZUxldHRlciA9IHRoaXMuZGV0ZWN0VG9nZ2xlRnJvbVJhd0RhdGEoc3RyKTtcblxuICAgIC8vIEFsc28gY2hlY2sga2V5LnNlcXVlbmNlIGlmIHN0ciBkaWRuJ3QgbWF0Y2ggKHJlYWRsaW5lIG1heSB0cmFuc2Zvcm0gdGhlIGlucHV0KVxuICAgIGlmICghdG9nZ2xlTGV0dGVyICYmIGtleT8uc2VxdWVuY2UpIHtcbiAgICAgIHRvZ2dsZUxldHRlciA9IHRoaXMuZGV0ZWN0VG9nZ2xlRnJvbVJhd0RhdGEoa2V5LnNlcXVlbmNlKTtcbiAgICAgIGlmICh0b2dnbGVMZXR0ZXIgJiYgcHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gVE9HR0xFIERFVEVDVEVEIHZpYSBrZXkuc2VxdWVuY2U6ICR7dG9nZ2xlTGV0dGVyfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0b2dnbGVMZXR0ZXIpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBUT0dHTEUgREVURUNURUQgKGtleXByZXNzIGZhbGxiYWNrKTogJHt0b2dnbGVMZXR0ZXJ9YCk7XG4gICAgICB9XG4gICAgICB0aGlzLmhhbmRsZVRvZ2dsZSh0b2dnbGVMZXR0ZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsc28gY2hlY2sgbWV0YStrZXkgcGF0dGVybiBpZiBzdHIvc2VxdWVuY2UgZGlkbid0IG1hdGNoXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXk/Lm1ldGEgJiYgbm9ybWFsaXplZEtleS5uYW1lKSB7XG4gICAgICBjb25zdCBtZXRhTGV0dGVyID0gbm9ybWFsaXplZEtleS5uYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoWydnJywgJ2EnLCAnZCcsICd0JywgJ3YnXS5pbmNsdWRlcyhtZXRhTGV0dGVyKSkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBUT0dHTEUgREVURUNURUQgKG1ldGEga2V5KTogJHttZXRhTGV0dGVyfWApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaGFuZGxlVG9nZ2xlKG1ldGFMZXR0ZXIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVQbGFpblBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFub3JtYWxpemVkS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gaW5wdXRDYXB0dXJlIEN0cmwrQy9EIGlzIGhhbmRsZWQgYXQgdGhlIHRvcCBvZiBoYW5kbGVLZXlwcmVzc1xuXG4gICAgLy8gRGV0ZWN0IEN0cmwrU2hpZnQgY29tYmluYXRpb25zIChmYWxsYmFjayBmb3Igbm9uLW1hY09TIG9yIGNvbmZpZ3VyZWQgdGVybWluYWxzKVxuICAgIGNvbnN0IGlzQ3RybFNoaWZ0ID0gKGxldHRlcjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBsb3dlckxldHRlciA9IGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdXBwZXJMZXR0ZXIgPSBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblxuICAgICAgLy8gUGF0dGVybiAxOiBTdGFuZGFyZCByZWFkbGluZSBzaGlmdCBmbGFnICsgY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5LnNoaWZ0ICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMjogU29tZSB0ZXJtaW5hbHMgc2VuZCB1cHBlcmNhc2UgbmFtZSB3aXRoIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSB1cHBlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAzOiBNZXRhL0FsdCArIGxldHRlciAoaVRlcm0yIHdpdGggXCJPcHRpb24gc2VuZHMgTWV0YVwiKVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubWV0YSAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDQ6IFJhdyBlc2NhcGUgc2VxdWVuY2UgY2hlY2sgZm9yIHh0ZXJtLXN0eWxlIG1vZGlmaWVyc1xuICAgICAgY29uc3Qgc2VxID0gc3RyIHx8IG5vcm1hbGl6ZWRLZXkuc2VxdWVuY2U7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKHNlcSAmJiAvXlxceDFiXFxbWzAtOV0rOzZbfkEtWl0/JC8udGVzdChzZXEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDU6IEVTQyArIGxldHRlciAoT3B0aW9uIHNlbmRzIEVTQyBwcmVmaXggaW4gc29tZSBjb25maWdzKVxuICAgICAgaWYgKHNlcSAmJiBzZXEgPT09IGBcXHgxYiR7bG93ZXJMZXR0ZXJ9YCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDdHJsU2hpZnRUb2dnbGUgPSAobGV0dGVyOiAnYScgfCAnZycgfCAnZCcgfCAndCcpOiB2b2lkID0+IHtcbiAgICAgIC8vIEVuc3VyZSBubyBidWZmZXJlZCBjaGFycyBsZWFrIGludG8gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBpZiAobGV0dGVyID09PSAnYScpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtY3JpdGljYWwtYXBwcm92YWwnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZycpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdkJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hbHBoYXplcm8nKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAndCcpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdGhpbmtpbmcnKTtcbiAgICAgIH1cbiAgICAgIC8vIEZvcmNlIGltbWVkaWF0ZSByZW5kZXIgZHVyaW5nIHN0cmVhbWluZyB0byBlbnN1cmUgdG9nZ2xlIHN0YXRlIGlzIHZpc2libGVcbiAgICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2EnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdnJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZCcpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ3QnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCd0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdyJykge1xuICAgICAgdGhpcy5lbWl0KCdyZXN1bWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0MgYW5kIEN0cmwrRCBhcmUgaGFuZGxlZCBhdCB0aGUgdG9wIG9mIGhhbmRsZUtleXByZXNzIGZvciBndWFyYW50ZWVkIGV4ZWN1dGlvblxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndScpIHtcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0w6IENsZWFyIHNjcmVlbiB3aGlsZSBwcmVzZXJ2aW5nIGlucHV0XG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbCcpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBDbGVhciBzY3JlZW4gYW5kIHJlZHJhd1xuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xceDFiWzJKXFx4MWJbSCcpOyAvLyBDbGVhciBzY3JlZW4sIG1vdmUgdG8gdG9wXG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYXJDb2xsYXBzZWRSZXN1bHRzKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrTzogRXhwYW5kIGxhc3QgdG9vbCByZXN1bHRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdvJykge1xuICAgICAgdGhpcy5lbWl0KCdleHBhbmQtdG9vbC1yZXN1bHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0E6IE1vdmUgY3Vyc29yIHRvIHN0YXJ0IG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdhJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtFOiBNb3ZlIGN1cnNvciB0byBlbmQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2UnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtXOiBEZWxldGUgd29yZCBiYWNrd2FyZFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ3cnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIC8vIEZpbmQgc3RhcnQgb2YgcHJldmlvdXMgd29yZFxuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgdHJhaWxpbmcgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICAvLyBTa2lwIHdvcmQgY2hhcmFjdGVyc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCBwb3MpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrSzogRGVsZXRlIGZyb20gY3Vyc29yIHRvIGVuZCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnaycpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhvbWU6IE1vdmUgY3Vyc29yIHRvIHN0YXJ0XG4gICAgaWYgKGtleS5uYW1lID09PSAnaG9tZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gMCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEVuZDogTW92ZSBjdXJzb3IgdG8gZW5kXG4gICAgaWYgKGtleS5uYW1lID09PSAnZW5kJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtMZWZ0OiBNb3ZlIGN1cnNvciBiYWNrIG9uZSB3b3JkXG4gICAgaWYgKGtleS5tZXRhICYmIGtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICAvLyBTa2lwIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSA9PT0gJyAnKSBwb3MtLTtcbiAgICAgICAgLy8gU2tpcCB3b3JkIGNoYXJhY3RlcnNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gIT09ICcgJykgcG9zLS07XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrUmlnaHQ6IE1vdmUgY3Vyc29yIGZvcndhcmQgb25lIHdvcmRcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgY3VycmVudCB3b3JkXG4gICAgICAgIHdoaWxlIChwb3MgPCB0aGlzLmJ1ZmZlci5sZW5ndGggJiYgdGhpcy5idWZmZXJbcG9zXSAhPT0gJyAnKSBwb3MrKztcbiAgICAgICAgLy8gU2tpcCBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuYnVmZmVyLmxlbmd0aCAmJiB0aGlzLmJ1ZmZlcltwb3NdID09PSAnICcpIHBvcysrO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K0JhY2tzcGFjZTogRGVsZXRlIHdvcmQgYmFja3dhcmQgKGFsdGVybmF0aXZlIHRvIEN0cmwrVylcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBkZWxldGUgaXQgY29tcGxldGVseVxuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCBwb3MpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkubmFtZSA9PT0gJ3JldHVybicgfHwga2V5Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIC8vIENoZWNrIGZvciBzbGFzaCBjb21tYW5kIGNvbXBsZXRpb24gZmlyc3QgKHdvcmtzIGluIGJvdGggc3RyZWFtaW5nIGFuZCBub24tc3RyZWFtaW5nIG1vZGVzKVxuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKHRydWUpKSByZXR1cm47XG4gICAgICBcbiAgICAgIC8vIEZhbGxiYWNrOiBpZiBidWZmZXIgc3RhcnRzIHdpdGggJy8nIGFuZCBzdWdnZXN0aW9ucyBleGlzdCwgdXNlIHRoZSBzZWxlY3RlZC9maXJzdCBvbmVcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdPy5jb21tYW5kID8/IHRoaXMuYnVmZmVyO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBEdXJpbmcgc3RyZWFtaW5nLCBxdWV1ZSB0aGUgaW5wdXQgZm9yIHByb2Nlc3NpbmcgYWZ0ZXIgQUkgY29tcGxldGVzXG4gICAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICBjb25zdCBxdWV1ZWRJbnB1dCA9IHRoaXMuc3RyZWFtaW5nSW5wdXRRdWV1ZS5qb2luKCcnKS50cmltKCk7XG4gICAgICAgIGlmIChxdWV1ZWRJbnB1dCkge1xuICAgICAgICAgIHRoaXMuZW1pdCgncXVldWUnLCBxdWV1ZWRJbnB1dCk7XG4gICAgICAgICAgdGhpcy5zdHJlYW1pbmdJbnB1dFF1ZXVlID0gW107XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWxzbyBzdWJtaXQgY3VycmVudCBidWZmZXIgaWYgaXQgaGFzIGNvbnRlbnRcbiAgICAgICAgaWYgKHRoaXMuYnVmZmVyLnRyaW0oKSkge1xuICAgICAgICAgIHRoaXMuc3VibWl0VGV4dCh0aGlzLmJ1ZmZlcik7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgYW5kIHN1Ym1pdCBpbiBvbmUgYWN0aW9uXG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgXG4gICAgICB0aGlzLnN1Ym1pdFRleHQodGhpcy5idWZmZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICAvLyBSZXNldCBhbnkgcGFzdGUgZGV0ZWN0aW9uIHN0YXRlIHRvIGVuc3VyZSBjbGVhbiByZW5kZXJcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLmZvcmNlTmV4dFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvciAtIDEpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZGVsZXRlJykge1xuICAgICAgLy8gUmVzZXQgYW55IHBhc3RlIGRldGVjdGlvbiBzdGF0ZSB0byBlbnN1cmUgY2xlYW4gcmVuZGVyXG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBkZWxldGUgaXQgY29tcGxldGVseSAoc2ltaWxhciB0byBiYWNrc3BhY2UpXG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLmZvcmNlTmV4dFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5mb3JjZU5leHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIE1lbnUgbmF2aWdhdGlvbiAoQ2xhdWRlIENvZGUgc3R5bGUpIC0gaW50ZXJjZXB0cyBrZXlzIHdoZW4gbWVudSBpcyBhY3RpdmVcbiAgICBpZiAodGhpcy5pc01lbnVBY3RpdmUoKSkge1xuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3VwJykge1xuICAgICAgICB0aGlzLm5hdmlnYXRlTWVudSgtMSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkb3duJykge1xuICAgICAgICB0aGlzLm5hdmlnYXRlTWVudSgxKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3JldHVybicpIHtcbiAgICAgICAgdGhpcy5zZWxlY3RNZW51SXRlbSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZXNjYXBlJykge1xuICAgICAgICB0aGlzLmNsb3NlTWVudSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBPdGhlciBrZXlzIGNsb3NlIG1lbnUgd2l0aG91dCBzZWxlY3Rpb25cbiAgICAgIGlmIChzdHIgJiYgIW5vcm1hbGl6ZWRLZXkuY3RybCAmJiAhbm9ybWFsaXplZEtleS5tZXRhKSB7XG4gICAgICAgIHRoaXMuY2xvc2VNZW51KCk7XG4gICAgICAgIC8vIERvbid0IHJldHVybiAtIGxldCB0aGUga2V5IGJlIHByb2Nlc3NlZCBub3JtYWxseVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdsZWZ0Jykge1xuICAgICAgLy8gUmVzZXQgcGFzdGUgc3RhdGUgdG8gZW5zdXJlIGNsZWFuIHJlbmRlclxuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgZXhwYW5kIGl0IGZpcnN0XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAncmlnaHQnKSB7XG4gICAgICAvLyBSZXNldCBwYXN0ZSBzdGF0ZSB0byBlbnN1cmUgY2xlYW4gcmVuZGVyXG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgaXQgZmlyc3RcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLmZvcmNlTmV4dFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3VwJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygtMSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IHRoaXMuaGlzdG9yeS5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID4gMCkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgaW5kZXggaXMgd2l0aGluIGJvdW5kcyBiZWZvcmUgYWNjZXNzaW5nXG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSAwICYmIHRoaXMuaGlzdG9yeUluZGV4IDwgdGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwOyAvLyBSZXNldCByZW5kZXIgb2Zmc2V0IGZvciBuZXcgYnVmZmVyXG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZG93bicpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoMSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCsrO1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gdGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNhZmV0eTogaW52YWxpZCBzdGF0ZSwgcmVzZXRcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwOyAvLyBSZXNldCByZW5kZXIgb2Zmc2V0IGZvciBuZXcgYnVmZmVyXG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndGFiJykge1xuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKGZhbHNlKSkgcmV0dXJuO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzdHIgJiYgIW5vcm1hbGl6ZWRLZXkuY3RybCAmJiAhbm9ybWFsaXplZEtleS5tZXRhKSB7XG4gICAgICAvLyBTQUZFVFk6IEZpbmFsIGd1YXJkIHRvIHByZXZlbnQgdG9nZ2xlIGNoYXJhY3RlcnMgZnJvbSBldmVyIGJlaW5nIGluc2VydGVkXG4gICAgICAvLyBUaGlzIHNob3VsZCBuZXZlciB0cmlnZ2VyIGlmIGVhcmxpZXIgZGV0ZWN0aW9uIHdvcmtzLCBidXQgYWN0cyBhcyBhIHNhZmV0eSBuZXRcbiAgICAgIGlmICh0aGlzLmlzVG9nZ2xlQ2hhcmFjdGVyKHN0cikpIHtcbiAgICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihgW0tFWV0gQkxPQ0tFRCB0b2dnbGUgY2hhcmFjdGVyIGZyb20gaW5zZXJ0aW9uOiBcIiR7c3RyfVwiIGNvZGU9JHtzdHIuY2hhckNvZGVBdCgwKX1gKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIC8vIFF1ZXVlIHRleHQgaW5wdXQgZHVyaW5nIHN0cmVhbWluZyAtIHByb2Nlc3MgYWZ0ZXIgQUkgY29tcGxldGVzXG4gICAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICB0aGlzLnN0cmVhbWluZ0lucHV0UXVldWUucHVzaChzdHIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBEZWJ1ZzogdHJhY2Ugd2h5IHRvZ2dsZSBkaWRuJ3QgY2F0Y2ggdGhpcyBjaGFyYWN0ZXJcbiAgICAgIGlmIChwcm9jZXNzLmVudlsnQUdJX0RFQlVHX0tFWVMnXSkge1xuICAgICAgICBjb25zdCBjb2RlID0gc3RyLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIFFVRVVFIElOU0VSVDogc3RyPVwiJHtzdHJ9XCIgY29kZT0ke2NvZGV9YCk7XG4gICAgICB9XG4gICAgICAvLyBEZWZlciBpbnNlcnRpb24gdG8gYWxsb3cgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBjYXRjaCByYXBpZCBpbnB1dFxuICAgICAgdGhpcy5xdWV1ZVBlbmRpbmdJbnNlcnQoc3RyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIGhvcml6b250YWwgY3Vyc29yIHBvc2l0aW9uIHN0YXlzIHdpdGhpbiB0aGUgdmlzaWJsZSBpbnB1dCB3aW5kb3cuXG4gICAqIFByZXZlbnRzIGp1bXBzIHdoZW4gdXNpbmcgbGVmdC9yaWdodCBhcnJvd3Mgb24gbG9uZyBsaW5lcy5cbiAgICovXG4gIHByaXZhdGUgZW5zdXJlQ3Vyc29yVmlzaWJsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMTIpOyAvLyBtYXJnaW4gZm9yIHByb21wdC90b2dnbGVzIGFuZCBwYWRkaW5nXG4gICAgLy8gSWYgY3Vyc29yIGlzIGxlZnQgb2YgY3VycmVudCB3aW5kb3csIHNoaWZ0IHdpbmRvdyBsZWZ0XG4gICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5pbnB1dFJlbmRlck9mZnNldCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJZiBjdXJzb3IgaXMgYmV5b25kIHZpc2libGUgd2luZG93LCBzaGlmdCB3aW5kb3cgcmlnaHRcbiAgICBpZiAodGhpcy5jdXJzb3IgLSB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID49IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3IgLSBtYXhXaWR0aCArIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHJhdyBlc2NhcGUgc2VxdWVuY2VzIHdoZW4gcmVhZGxpbmUgZG9lc24ndCBwb3B1bGF0ZSBrZXkgbWV0YWRhdGEuXG4gICAqIFByZXZlbnRzIGNvbnRyb2wgY29kZXMgKGUuZy4sIF5bWzIwMH4pIGZyb20gbGVha2luZyBpbnRvIHRoZSBidWZmZXIuXG4gICAqL1xuICBwcml2YXRlIHBhcnNlRXNjYXBlU2VxdWVuY2Uoc2VxdWVuY2U6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiByZWFkbGluZS5LZXkgfCBudWxsIHtcbiAgICBpZiAoIXNlcXVlbmNlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHJlYWRsaW5lLktleT4gPSB7XG4gICAgICAnXFx4MWJbQSc6IHsgbmFtZTogJ3VwJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQic6IHsgbmFtZTogJ2Rvd24nLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltDJzogeyBuYW1lOiAncmlnaHQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltEJzogeyBuYW1lOiAnbGVmdCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0gnOiB7IG5hbWU6ICdob21lJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRic6IHsgbmFtZTogJ2VuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiWzIwMH4nOiB7IG5hbWU6ICdwYXN0ZS1zdGFydCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiWzIwMX4nOiB7IG5hbWU6ICdwYXN0ZS1lbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICB9O1xuICAgIHJldHVybiBtYXBbc2VxdWVuY2VdID8/IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgY2hhcmFjdGVycyBmb3IgZGVmZXJyZWQgaW5zZXJ0aW9uLiBUaGlzIHByZXZlbnRzIHZpc3VhbCBcImxlYWtcIiBvZlxuICAgKiBwYXN0ZWQgY29udGVudCBieSBob2xkaW5nIGNoYXJhY3RlcnMgdW50aWwgd2UncmUgY29uZmlkZW50IGl0J3Mgbm90IGEgcGFzdGUuXG4gICAqL1xuICBwcml2YXRlIHF1ZXVlUGVuZGluZ0luc2VydCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBJZiB0b2dnbGUgY2hhcmFjdGVycyBzbGlwcGVkIHRocm91Z2gsIGhhbmRsZSB0aGVtIGhlcmUgYW5kIHN0cmlwIHRoZW0gYmVmb3JlIGluc2VydGlvblxuICAgIGNvbnN0IHRvZ2dsZXMgPSB0aGlzLmV4dHJhY3RUb2dnbGVMZXR0ZXJzKHRleHQpO1xuICAgIGlmICh0b2dnbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgbGV0dGVyIG9mIHRvZ2dsZXMpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVUb2dnbGUobGV0dGVyKTtcbiAgICAgIH1cbiAgICAgIHRleHQgPSB0aGlzLnN0cmlwVG9nZ2xlU3ltYm9scyh0ZXh0KTtcbiAgICAgIGlmICghdGV4dCkge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdbS0VZXSBRVUVVRSBJTlNFUlQgRFJPUFBFRDogdG9nZ2xlLW9ubHkgaW5wdXQnKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRmFzdC1wYXRoOiBzaW5nbGUgcHJpbnRhYmxlIEFTQ0lJIGNoYXJhY3RlciB3aXRoIG5vIHBlbmRpbmcgYnVmZmVyID0gaW1tZWRpYXRlIGluc2VydFxuICAgIC8vIFRoaXMgbWFrZXMgbm9ybWFsIHR5cGluZyBmZWVsIGluc3RhbnQgd2hpbGUgc3RpbGwgZGV0ZWN0aW5nIG11bHRpLWNoYXIgcGFzdGVzXG4gICAgLy8gQlVUOiBza2lwIGZhc3QgcGF0aCBpZiBidXJzdCBhY3Rpdml0eSBzdWdnZXN0cyBpbmNvbWluZyBwYXN0ZVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgaWYgKHRleHQubGVuZ3RoID09PSAxICYmXG4gICAgICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9PT0gJycgJiZcbiAgICAgICAgIXRoaXMuaW5QbGFpblBhc3RlICYmXG4gICAgICAgICF0aGlzLmluQnJhY2tldGVkUGFzdGUgJiZcbiAgICAgICAgIWJ1cnN0QWN0aXZlICYmXG4gICAgICAgIHRleHQuY2hhckNvZGVBdCgwKSA+PSAzMiAmJlxuICAgICAgICB0ZXh0LmNoYXJDb2RlQXQoMCkgPCAxMjcpIHtcbiAgICAgIHRoaXMuaW5zZXJ0VGV4dCh0ZXh0KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgKz0gdGV4dDtcblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lclxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTY2hlZHVsZSBjb21taXQgYWZ0ZXIgZGVsYXkgLSBpZiBwYXN0ZSBkZXRlY3Rpb24gdHJpZ2dlcnMgZmlyc3QsIGl0IHdpbGwgY29uc3VtZSB0aGUgYnVmZmVyXG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY29tbWl0UGVuZGluZ0luc2VydCgpO1xuICAgIH0sIHRoaXMucGVuZGluZ0luc2VydERlbGF5TXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbW1pdCBwZW5kaW5nIGNoYXJhY3RlcnMgYXMgbm9ybWFsIGlucHV0IChub3QgYSBwYXN0ZSkuXG4gICAqIElmIHdlIHJlYWNoIGhlcmUsIHBhc3RlIGRldGVjdGlvbiBkaWRuJ3QgdHJpZ2dlciwgc28gdGhpcyBpcyBub3JtYWwgdHlwaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRQZW5kaW5nSW5zZXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICYmICF0aGlzLmluUGxhaW5QYXN0ZSAmJiAhdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICAvLyBSZXNldCBidXJzdCBzdGF0ZSBCRUZPUkUgaW5zZXJ0aW5nIHNvIHJlbmRlciBpc24ndCBzdXBwcmVzc2VkXG4gICAgICAvLyBJZiBwYXN0ZSBkZXRlY3Rpb24gZGlkbid0IHRyaWdnZXIsIHRoaXMgaXMganVzdCBmYXN0IHR5cGluZywgbm90IGEgcGFzdGVcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICAgIHRoaXMuaW5zZXJ0VGV4dCh0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIpO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBpbnRvIHBhc3RlIGRldGVjdGlvbiAocHJldmVudHMgdmlzdWFsIGxlYWspLlxuICAgKi9cbiAgcHJpdmF0ZSBjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjb25zdW1lZCA9IHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcjtcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICByZXR1cm4gY29uc3VtZWQ7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUJyYWNrZXRlZFBhc3RlKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNlcXVlbmNlID0ga2V5Py5zZXF1ZW5jZSB8fCBzdHI7XG4gICAgaWYgKHNlcXVlbmNlID09PSBFU0MuRU5BQkxFX0JSQUNLRVRFRF9QQVNURSB8fCBzZXF1ZW5jZSA9PT0gRVNDLkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBwYXN0ZSBtYXJrZXJzIG1pZ2h0IGJlIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdcbiAgICBjb25zdCBwYXN0ZVN0YXJ0TWFya2VyID0gJ1xceDFiWzIwMH4nO1xuICAgIGNvbnN0IHBhc3RlRW5kTWFya2VyID0gJ1xceDFiWzIwMX4nO1xuXG4gICAgLy8gQ2hlY2sgaWYgc3RyIGNvbnRhaW5zIHBhc3RlIHN0YXJ0IG1hcmtlciAoaGFuZGxlcyBjaHVua2VkIGFycml2YWwpXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5pbmNsdWRlcyhwYXN0ZVN0YXJ0TWFya2VyKSkge1xuICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgICAgLy8gQ29uc3VtZSBhbmQgc2FuaXRpemUgcGVuZGluZyBidWZmZXIgdG8gcHJldmVudCBwYXJ0aWFsIGVzY2FwZSBzZXF1ZW5jZXMgbGVha2luZ1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5jb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCkpO1xuICAgICAgLy8gRXh0cmFjdCBjb250ZW50IGFmdGVyIHRoZSBzdGFydCBtYXJrZXIgKGRpc2NhcmQgYW55IGNvbnRlbnQgYmVmb3JlIGl0IC0gbGlrZWx5IHBhcnRpYWwgZXNjYXBlcylcbiAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gc3RyLmluZGV4T2YocGFzdGVTdGFydE1hcmtlcik7XG4gICAgICBsZXQgY29udGVudCA9IHN0ci5zbGljZShzdGFydElkeCArIHBhc3RlU3RhcnRNYXJrZXIubGVuZ3RoKTtcbiAgICAgIC8vIENoZWNrIGlmIGVuZCBtYXJrZXIgaXMgYWxzbyBpbiB0aGlzIGNodW5rXG4gICAgICBpZiAoY29udGVudC5pbmNsdWRlcyhwYXN0ZUVuZE1hcmtlcikpIHtcbiAgICAgICAgY29uc3QgZW5kSWR4ID0gY29udGVudC5pbmRleE9mKHBhc3RlRW5kTWFya2VyKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMCwgZW5kSWR4KTtcbiAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmcgKyBjb250ZW50O1xuICAgICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmcgKyBjb250ZW50O1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNlcXVlbmNlID09PSBwYXN0ZVN0YXJ0TWFya2VyKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBhbmQgc2FuaXRpemUgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlcyBsZWFraW5nXG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKSk7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZztcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHN0ciBjb250YWlucyBwYXN0ZSBlbmQgbWFya2VyXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5pbmNsdWRlcyhwYXN0ZUVuZE1hcmtlcikpIHtcbiAgICAgIGNvbnN0IGVuZElkeCA9IHN0ci5pbmRleE9mKHBhc3RlRW5kTWFya2VyKTtcbiAgICAgIGNvbnN0IGNvbnRlbnRCZWZvcmUgPSBzdHIuc2xpY2UoMCwgZW5kSWR4KTtcbiAgICAgIGlmIChjb250ZW50QmVmb3JlKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBjb250ZW50QmVmb3JlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChzZXF1ZW5jZSA9PT0gcGFzdGVFbmRNYXJrZXIpIHtcbiAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAncmV0dXJuJyB8fCBrZXk/Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCAnXFxuJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleT8ubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSB0aGlzLnBhc3RlQnVmZmVyLnNsaWNlKDAsIC0xKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzdHIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VxdWVuY2UgPT09ICdzdHJpbmcnICYmIHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzZXF1ZW5jZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNvbW1pdFBhc3RlQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSByZXR1cm47XG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBsZXQgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBhc3RlQnVmZmVyKTtcblxuICAgIC8vIElucHV0IHByb3RlY3Rpb24gdmFsaWRhdGlvbiBhZ2FpbnN0IHJlbW90ZSBwYXN0ZSBhdHRhY2tzXG4gICAgaWYgKHRoaXMuaW5wdXRQcm90ZWN0aW9uKSB7XG4gICAgICBjb25zdCB2YWxpZGF0aW9uID0gdGhpcy5pbnB1dFByb3RlY3Rpb24udmFsaWRhdGVJbnB1dChzYW5pdGl6ZWQsIHRydWUpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uYmxvY2tlZCkge1xuICAgICAgICAvLyBQYXN0ZSBibG9ja2VkIC0gcmVzZXQgc3RhdGUgYW5kIGFib3J0XG4gICAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhc3RlQnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBzYW5pdGl6ZWQgPSB2YWxpZGF0aW9uLnNhbml0aXplZDtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgICAgY2hhcnM6IGNvbnRlbnQubGVuZ3RoICsgKHdhc1RydW5jYXRlZCA/ICcrJyBhcyB1bmtub3duIGFzIG51bWJlciA6IDApLCAvLyBJbmRpY2F0ZSB0cnVuY2F0aW9uXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQbGFpblBhc3RlKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IGJvb2xlYW4ge1xuICAgIC8vIEZhbGxiYWNrIHBhc3RlIGNhcHR1cmUgd2hlbiBicmFja2V0ZWQgcGFzdGUgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgaWYgKHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSB8fCBrZXk/LmN0cmwgfHwga2V5Py5tZXRhKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCB0cmVhdCBlc2NhcGUgc2VxdWVuY2VzIChhcnJvdyBrZXlzLCBldGMuKSBhcyBwYXN0ZVxuICAgIC8vIEVzY2FwZSBzZXF1ZW5jZXMgc3RhcnQgd2l0aCBcXHgxYiAoRVNDKSBhbmQgYXJlIHVzZWQgZm9yIGN1cnNvciBtb3ZlbWVudCwgZXRjLlxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuc3RhcnRzV2l0aCgnXFx4MWInKSkge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlID8/ICcnO1xuICAgIGNvbnN0IGNodW5rID0gdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDAgPyBzdHIgOiBzZXF1ZW5jZTtcbiAgICBpZiAoIWNodW5rKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMudHJhY2tQbGFpblBhc3RlQnVyc3QoY2h1bmsubGVuZ3RoLCBub3cpO1xuXG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5yZWNvcmRSZWNlbnRQbGFpbkNodW5rKGNodW5rLCBub3cpO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rTXVsdGlwbGUgPSBjaHVuay5sZW5ndGggPiAxO1xuICAgIGNvbnN0IGhhc05ld2xpbmUgPSAvW1xcclxcbl0vLnRlc3QoY2h1bmspO1xuICAgIGNvbnN0IGJ1cnN0QWN0aXZlID0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiAwICYmIG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IDw9IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIGNvbnN0IGJ1cnN0VHJpZ2dlciA9IGJ1cnN0QWN0aXZlICYmIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVUcmlnZ2VyQ2hhcnM7XG4gICAgY29uc3QgaGFzUmVjZW50Tm9uTmV3bGluZSA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3Muc29tZShlbnRyeSA9PiAhL15bXFxyXFxuXSskLy50ZXN0KGVudHJ5LnRleHQpKTtcbiAgICBjb25zdCBlYXJseU5ld2xpbmVUcmlnZ2VyID1cbiAgICAgIGhhc05ld2xpbmUgJiZcbiAgICAgIGJ1cnN0QWN0aXZlICYmXG4gICAgICBoYXNSZWNlbnROb25OZXdsaW5lICYmXG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnM7XG4gICAgY29uc3QgbmV3bGluZVRyaWdnZXIgPSBoYXNOZXdsaW5lICYmICh0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBlYXJseU5ld2xpbmVUcmlnZ2VyKTtcbiAgICBjb25zdCBsb29rc0xpa2VQYXN0ZSA9IHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IG5ld2xpbmVUcmlnZ2VyO1xuXG4gICAgaWYgKCFsb29rc0xpa2VQYXN0ZSkge1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNodW5rQWxyZWFkeUNhcHR1cmVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5pblBsYWluUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgZmlyc3QgLSB0aGlzIGlzIHRoZSBwcmltYXJ5IHNvdXJjZSBub3dcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIGNvbnN0IHJlY2xhaW1lZCA9IHRoaXMucmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICAvLyBDb21iaW5lIHBlbmRpbmcgYnVmZmVyIHdpdGggYW55IHJlY2xhaW1lZCBjaHVua3NcbiAgICAgIGNvbnN0IGNvbWJpbmVkID0gcGVuZGluZyArIHJlY2xhaW1lZDtcbiAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgY2hhcnMgdGhhdCBsZWFrZWQgaW50byBidWZmZXIgKGxlZ2FjeSByZWNsYWltIHBhdGgpXG4gICAgICAgIGlmIChyZWNsYWltZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlbW92ZUNvdW50ID0gTWF0aC5taW4odGhpcy5idWZmZXIubGVuZ3RoLCByZWNsYWltZWQubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBzdWZmaXggPSB0aGlzLmJ1ZmZlci5zbGljZSgtcmVtb3ZlQ291bnQpO1xuICAgICAgICAgIGlmIChyZW1vdmVDb3VudCA+IDAgJiYgc3VmZml4ID09PSByZWNsYWltZWQuc2xpY2UoLXJlbW92ZUNvdW50KSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmJ1ZmZlci5sZW5ndGggLSByZW1vdmVDb3VudCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIHRoaXMuYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgaXMgdmFsaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gY29tYmluZWQuc2xpY2UoMCwgdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpO1xuICAgICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpIHtcbiAgICAgICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNodW5rQWxyZWFkeUNhcHR1cmVkID0gY29tYmluZWQuZW5kc1dpdGgoY2h1bmspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaHVua0FscmVhZHlDYXB0dXJlZCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwbGFpblBhc3RlJywgY2h1bmspO1xuICAgIH1cbiAgICB0aGlzLnNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFja1BsYWluUGFzdGVCdXJzdChsZW5ndGg6IG51bWJlciwgbm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IHx8IG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gdGhpcy5wbGFpblBhc3RlV2luZG93TXMpIHtcbiAgICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gbm93O1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgICB9XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ICs9IGxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRQbGFpblBhc3RlQnVyc3QoKTogdm9pZCB7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgLy8gQWxzbyBjYW5jZWwgcGVuZGluZyBpbnNlcnQgYnVmZmVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gIH1cblxuICBwcml2YXRlIHJlY29yZFJlY2VudFBsYWluQ2h1bmsodGV4dDogc3RyaW5nLCBhdDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBhdCAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MucHVzaCh7IHRleHQsIGF0IH0pO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHBydW5lUmVjZW50UGxhaW5DaHVua3MoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm4gJyc7XG4gICAgY29uc3QgY29tYmluZWQgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLm1hcChlbnRyeSA9PiBlbnRyeS50ZXh0KS5qb2luKCcnKTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgcmV0dXJuIGNvbWJpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgIH1cbiAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5maW5hbGl6ZVBsYWluUGFzdGUoKTtcbiAgICB9LCB0aGlzLnBsYWluUGFzdGVJZGxlTXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5hbGl6ZVBsYWluUGFzdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkgcmV0dXJuO1xuXG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBsZXQgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBsYWluUGFzdGVCdWZmZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvdGVjdGlvbiB2YWxpZGF0aW9uIGFnYWluc3QgcmVtb3RlIHBhc3RlIGF0dGFja3NcbiAgICBpZiAodGhpcy5pbnB1dFByb3RlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmlucHV0UHJvdGVjdGlvbi52YWxpZGF0ZUlucHV0KHNhbml0aXplZCwgdHJ1ZSk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIC8vIFBhc3RlIGJsb2NrZWQgLSByZXNldCBzdGF0ZSBhbmQgYWJvcnRcbiAgICAgICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgc2FuaXRpemVkID0gdmFsaWRhdGlvbi5zYW5pdGl6ZWQ7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksXG4gICAgICB9O1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcblxuICAgIC8vIFNBRkVUWSBORVQ6IEZpbHRlciBvdXQgYW55IHRvZ2dsZSBvciBjb250cm9sIGNoYXJhY3RlcnMgdGhhdCBzbGlwcGVkIHRocm91Z2hcbiAgICAvLyBUaGlzIHNob3VsZCBuZXZlciBoYXBwZW4gaWYgZWFybGllciBkZXRlY3Rpb24gd29ya3MsIGJ1dCBhY3RzIGFzIGZpbmFsIGd1YXJkXG4gICAgY29uc3QgZmlsdGVyZWQgPSBbLi4udGV4dF0uZmlsdGVyKGMgPT4ge1xuICAgICAgY29uc3QgY29kZSA9IGMuY2hhckNvZGVBdCgwKTtcbiAgICAgIC8vIEJsb2NrIEFMTCBjb250cm9sIGNoYXJhY3RlcnMgKDAtMzEpIGFuZCBERUwgKDEyNylcbiAgICAgIC8vIFRoaXMgaW5jbHVkZXMgQ3RybCtDICgzKSwgQ3RybCtEICg0KSwgRVNDICgyNyksIGV0Yy5cbiAgICAgIGlmIChjb2RlIDwgMzIgfHwgY29kZSA9PT0gMTI3KSByZXR1cm4gZmFsc2U7XG4gICAgICAvLyBCbG9jayB0b2dnbGUgY2hhcmFjdGVycyAoT3B0aW9uK0cvQS9EL1QvViBVbmljb2RlKVxuICAgICAgaWYgKHRoaXMuaXNUb2dnbGVDaGFyYWN0ZXIoYykpIHJldHVybiBmYWxzZTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pLmpvaW4oJycpO1xuXG4gICAgaWYgKCFmaWx0ZXJlZCkge1xuICAgICAgaWYgKHByb2Nlc3MuZW52WydBR0lfREVCVUdfS0VZUyddKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYFtLRVldIElOU0VSVCBURVhUIEJMT0NLRUQ6IGFsbCBjaGFycyBmaWx0ZXJlZCBmcm9tIFwiJHt0ZXh0fVwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRleHQgPSBmaWx0ZXJlZDtcblxuICAgIC8vIERlYnVnOiB0cmFjZSB3aGF0J3MgYmVpbmcgaW5zZXJ0ZWRcbiAgICBpZiAocHJvY2Vzcy5lbnZbJ0FHSV9ERUJVR19LRVlTJ10pIHtcbiAgICAgIGNvbnN0IGNvZGUgPSB0ZXh0LmNoYXJDb2RlQXQoMCk7XG4gICAgICBjb25zb2xlLmVycm9yKGBbS0VZXSBJTlNFUlQgVEVYVDogXCIke3RleHR9XCIgY29kZT0ke2NvZGV9YCk7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgaW5zZXJ0IGR1cmluZyBwYXN0ZSBvcGVyYXRpb25zIC0gY29udGVudCBnb2VzIHRvIHBhc3RlIGJ1ZmZlclxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwgdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBJbnB1dCBwcm90ZWN0aW9uIHZhbGlkYXRpb24gYWdhaW5zdCByZW1vdGUgYXR0YWNrc1xuICAgIGlmICh0aGlzLmlucHV0UHJvdGVjdGlvbikge1xuICAgICAgY29uc3QgdmFsaWRhdGlvbiA9IHRoaXMuaW5wdXRQcm90ZWN0aW9uLnZhbGlkYXRlSW5wdXQodGV4dCwgZmFsc2UpO1xuICAgICAgaWYgKHZhbGlkYXRpb24uYmxvY2tlZCkge1xuICAgICAgICAvLyBJbnB1dCBibG9ja2VkIC0gc2lsZW50bHkgZHJvcCB0byBwcmV2ZW50IGF0dGFja1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodmFsaWRhdGlvbi5zYW5pdGl6ZWQgIT09IHRleHQpIHtcbiAgICAgICAgLy8gVXNlIHNhbml0aXplZCB2ZXJzaW9uXG4gICAgICAgIHRleHQgPSB2YWxpZGF0aW9uLnNhbml0aXplZDtcbiAgICAgICAgaWYgKCF0ZXh0KSByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUgYW5kIHVzZXIgdHlwZXMsIGV4cGFuZCB0byBidWZmZXIgZmlyc3QgdGhlbiBpbnNlcnQgYXQgY3Vyc29yXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgIH1cbiAgICAvLyBTYW5pdGl6ZSBpbnB1dCB0byByZW1vdmUgc3BlY2lhbCBmb3JtYXR0aW5nIGNoYXJhY3RlcnNcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRleHQpO1xuICAgIGlmICghc2FuaXRpemVkKSByZXR1cm47XG4gICAgXG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgdGV4dCBieSBjb2xsYXBzaW5nIHRvIHNpbmdsZSBsaW5lIGZvciBub3JtYWwgaW5wdXRcbiAgICBjb25zdCBoYXNOZXdsaW5lcyA9IHNhbml0aXplZC5pbmNsdWRlcygnXFxuJyk7XG4gICAgaWYgKGhhc05ld2xpbmVzKSB7XG4gICAgICAvLyBGb3IgbXVsdGktbGluZSB0ZXh0IGluIG5vcm1hbCBpbnNlcnRpb24sIGNvbGxhcHNlIHRvIHNpbmdsZSBsaW5lIHdpdGggc3BhY2VzXG4gICAgICBjb25zdCBjb2xsYXBzZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxufFxccnxcXG4vZywgJyAnKTtcbiAgICAgIHRoaXMuaW5zZXJ0U2luZ2xlTGluZVRleHQoY29sbGFwc2VkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5pbnNlcnRTaW5nbGVMaW5lVGV4dChzYW5pdGl6ZWQpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0U2luZ2xlTGluZVRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm47XG4gICAgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZCBiZWZvcmUgc2xpY2luZ1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRleHQgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgdGhpcy5jdXJzb3IgKz0gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIHJlbWFpbnMgdmFsaWQgYWZ0ZXIgbW9kaWZpY2F0aW9uXG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIC8vIFN1cHByZXNzIHJlbmRlciBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHRvIHByZXZlbnQgdmlzdWFsIGxlYWtcbiAgICBjb25zdCBpbkVtaXRQYXN0ZSA9IHRoaXMuZW1pdFBhc3RlQnVmZmVyLmxlbmd0aCA+IDAgfHwgdGhpcy5lbWl0UGFzdGVUaW1lciAhPT0gbnVsbDtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlICYmICF0aGlzLmluQnJhY2tldGVkUGFzdGUgJiYgIWluRW1pdFBhc3RlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJtaXRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IGlzQnVmZmVyU291cmNlID0gdGV4dCA9PT0gdGhpcy5idWZmZXI7XG5cbiAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBzdWJtaXQgdGhhdCBpbnN0ZWFkIG9mIHRoZSBidWZmZXIgdGV4dFxuICAgIC8vIFRoaXMgaGFuZGxlcyBlZGdlIGNhc2VzIHdoZXJlIHN1Ym1pdFRleHQgaXMgY2FsbGVkIHByb2dyYW1tYXRpY2FsbHlcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEVuc3VyZSBhbnkgZGVmZXJyZWQgaW5wdXQgaGFzIGJlZW4gY29tbWl0dGVkIGJlZm9yZSBzdWJtaXNzaW9uXG4gICAgdGhpcy5jb21taXRQZW5kaW5nSW5zZXJ0KCk7XG4gICAgaWYgKGlzQnVmZmVyU291cmNlKSB7XG4gICAgICB0ZXh0ID0gdGhpcy5idWZmZXI7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICBjb25zdCBzaG91bGRUcmltID0gdGhpcy5pbnB1dENhcHR1cmUub3B0aW9ucy50cmltO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZENhcHR1cmUgPSBzaG91bGRUcmltID8gdGV4dC50cmltKCkgOiB0ZXh0O1xuICAgICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLmFsbG93RW1wdHkgJiYgIW5vcm1hbGl6ZWRDYXB0dXJlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmVzb2x2ZXIucmVzb2x2ZShub3JtYWxpemVkQ2FwdHVyZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgbGV0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRmluYWwgcHJvbXB0IHZhbGlkYXRpb24gYmVmb3JlIHN1Ym1pc3Npb24gdG8gQUlcbiAgICBpZiAodGhpcy5pbnB1dFByb3RlY3Rpb24pIHtcbiAgICAgIGNvbnN0IHZhbGlkYXRpb24gPSB0aGlzLmlucHV0UHJvdGVjdGlvbi52YWxpZGF0ZVByb21wdFN1Ym1pc3Npb24obm9ybWFsaXplZCk7XG4gICAgICBpZiAodmFsaWRhdGlvbi5ibG9ja2VkKSB7XG4gICAgICAgIC8vIFByb21wdCBibG9ja2VkIC0gZG9uJ3Qgc3VibWl0XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgbm9ybWFsaXplZCA9IHZhbGlkYXRpb24uc2FuaXRpemVkO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFkZCBzZWNyZXRzIG9yIHNsYXNoIGNvbW1hbmRzIHRvIGhpc3Rvcnkvc2Nyb2xsYmFja1xuICAgIGlmICghdGhpcy5zZWNyZXRNb2RlICYmICFub3JtYWxpemVkLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgdGhpcy5kaXNwbGF5VXNlclByb21wdChub3JtYWxpemVkKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNlY3JldE1vZGUpIHtcbiAgICAgIC8vIFN0aWxsIHRyYWNrIHNsYXNoIGNvbW1hbmRzIGluIGhpc3RvcnkgZm9yIGNvbnZlbmllbmNlXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICB0aGlzLmVtaXQoJ3F1ZXVlJywgbm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdCgnc3VibWl0Jywgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0U3BhY2UgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCcgJyk7XG4gICAgY29uc3QgaGFzQXJnVGV4dCA9IGZpcnN0U3BhY2UgPj0gMCAmJiAvXFxTLy50ZXN0KHRoaXMuYnVmZmVyLnNsaWNlKGZpcnN0U3BhY2UgKyAxKSk7XG4gICAgLy8gSGlkZSBzbGFzaCBzdWdnZXN0aW9ucyB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYXJndW1lbnRzXG4gICAgaWYgKGZpcnN0U3BhY2UgPj0gMCAmJiB0aGlzLmN1cnNvciA+IGZpcnN0U3BhY2UgJiYgaGFzQXJnVGV4dCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yU2xpY2UgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgY29uc3QgY29tbWFuZFNsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gY3Vyc29yU2xpY2Uuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiBjdXJzb3JTbGljZTtcbiAgICBjb25zdCBmYWxsYmFja1NsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gdGhpcy5idWZmZXIuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiB0aGlzLmJ1ZmZlcjtcbiAgICBjb25zdCBwYXJ0aWFsID0gKGNvbW1hbmRTbGljZS50cmltRW5kKCkgfHwgZmFsbGJhY2tTbGljZS50cmltRW5kKCkgfHwgJy8nKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnN1Z2dlc3Rpb25JbmRleF0/LmNvbW1hbmQ7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuYXZhaWxhYmxlQ29tbWFuZHNcbiAgICAgIC5maWx0ZXIoY21kID0+IGNtZC5jb21tYW5kLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYXJ0aWFsKSlcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc3VnZ2VzdGlvbnMuZmluZEluZGV4KHMgPT4gcy5jb21tYW5kID09PSBwcmV2aW91cyk7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGlkeCA+PSAwID8gaWR4IDogMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHNldEF2YWlsYWJsZUNvbW1hbmRzKGNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuYXZhaWxhYmxlQ29tbWFuZHMgPSBjb21tYW5kcztcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5U3VnZ2VzdGlvbihzdWJtaXQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgc3VnZ2VzdGlvbkluZGV4IGlzIHZhbGlkLCBkZWZhdWx0IHRvIGZpcnN0IGl0ZW1cbiAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogMDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XTtcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdWJtaXQpIHtcbiAgICAgIHRoaXMuc3VibWl0VGV4dChzZWxlY3RlZC5jb21tYW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWZmZXIgPSBgJHtzZWxlY3RlZC5jb21tYW5kfSBgO1xuICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVTdWdnZXN0aW9ucyhkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXNldCBpbmRleCBpZiBzdWdnZXN0aW9ucyB3ZXJlIGNsZWFyZWQgYnV0IGluZGV4IHdhc24ndFxuICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkluZGV4ICE9PSAtMSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3VycmVudCBpbmRleCBpcyB2YWxpZCBiZWZvcmUgY29tcHV0aW5nIG5leHRcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogLTE7XG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBjb25zdCBjbGFtcGVkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxLCBuZXh0KSk7XG4gICAgaWYgKGNsYW1wZWQgPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4ICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGNsYW1wZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBFdmVudCBxdWV1ZSAtLS0tLS0tLS0tLS1cblxuICAvKiogVHJhY2sgbGFzdCBhZGRlZCBldmVudCB0byBwcmV2ZW50IGR1cGxpY2F0ZXMgKi9cbiAgcHJpdmF0ZSBsYXN0QWRkZWRFdmVudFNpZ25hdHVyZTogc3RyaW5nID0gJyc7XG5cbiAgYWRkRXZlbnQodHlwZTogUmVuZGVyZXJFdmVudFR5cGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIERlZHVwbGljYXRlIGV2ZW50cyBhdCB0aGUgc291cmNlIHRvIHByZXZlbnQgZHVwbGljYXRlIGRpc3BsYXlcbiAgICAvLyBTa2lwIGRlZHVwbGljYXRpb24gZm9yIHByb21wdHMgKHVzZXIgaW5wdXQgc2hvdWxkIGFsd2F5cyBzaG93KVxuICAgIGlmIChub3JtYWxpemVkICE9PSAncHJvbXB0Jykge1xuICAgICAgY29uc3Qgc2lnbmF0dXJlID0gYCR7bm9ybWFsaXplZH06JHtjb250ZW50fWA7XG4gICAgICBpZiAoc2lnbmF0dXJlID09PSB0aGlzLmxhc3RBZGRlZEV2ZW50U2lnbmF0dXJlKSB7XG4gICAgICAgIHJldHVybjsgLy8gU2tpcCBkdXBsaWNhdGUgZXZlbnRcbiAgICAgIH1cbiAgICAgIHRoaXMubGFzdEFkZGVkRXZlbnRTaWduYXR1cmUgPSBzaWduYXR1cmU7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Byb21wdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdyZXNwb25zZScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0aG91Z2h0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3N0cmVhbScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ2J1aWxkJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rlc3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0Jykge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoe1xuICAgICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIGlmIChmb3JtYXR0ZWQpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZC5lbmRzV2l0aCgnXFxuJykgPyBmb3JtYXR0ZWQgOiBgJHtmb3JtYXR0ZWR9XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgY29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuXG4gICAgLy8gUHJpb3JpdHkgcXVldWU6IHByb21wdCBldmVudHMgYXJlIGluc2VydGVkIGF0IHRoZSBmcm9udCB0byBlbnN1cmUgaW1tZWRpYXRlIGRpc3BsYXlcbiAgICAvLyBUaGlzIGd1YXJhbnRlZXMgdXNlciBpbnB1dCBpcyBlY2hvZWQgYmVmb3JlIGFueSBhc3luYyBwcm9jZXNzaW5nIHJlc3BvbnNlc1xuICAgIGlmIChub3JtYWxpemVkID09PSAncHJvbXB0Jykge1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3Qgbm9uLXByb21wdCBldmVudCBhbmQgaW5zZXJ0IGJlZm9yZSBpdFxuICAgICAgLy8gVGhpcyBtYWludGFpbnMgcHJvbXB0IG9yZGVyIHdoaWxlIGdpdmluZyB0aGVtIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzXG4gICAgICBjb25zdCBpbnNlcnRJbmRleCA9IHRoaXMuZXZlbnRRdWV1ZS5maW5kSW5kZXgoZSA9PiBlLnR5cGUgIT09ICdwcm9tcHQnKTtcbiAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnNwbGljZShpbnNlcnRJbmRleCwgMCwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlLXJlbmRlciB0aGUgcHJvbXB0L2NvbnRyb2wgYmFyIGltbWVkaWF0ZWx5LlxuICAgKiBUaGlzIGtlZXBzIHRoZSBjaGF0IGJveCBwaW5uZWQgZHVyaW5nIGxvbmcgc3RyZWFtaW5nIHJ1bnMgaW5zdGVhZCBvZiB3YWl0aW5nXG4gICAqIGZvciB0aGUgZXZlbnQgcXVldWUgdG8gZHJhaW4gYmVmb3JlIHRoZSBwcm9tcHQgcmVhcHBlYXJzLlxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRPdmVybGF5KGltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlIHx8IHRoaXMuZGlzcG9zZWQgfHwgIXRoaXMub3V0cHV0LmlzVFRZIHx8IHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWV2ZW50KSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgY29hbGVzY2VkID0gdGhpcy5jb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJFdmVudChjb2FsZXNjZWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIE5ldmVyIGFsbG93IGEgcmVuZGVyaW5nIGZhaWx1cmUgdG8gc3RhbGwgdGhlIGV2ZW50IHF1ZXVlXG4gICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrOyAvLyBEb24ndCB0cnkgdG8gd3JpdGUgYWZ0ZXIgZGlzcG9zYWxcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJyA/IGVycm9yIDogJ1Vua25vd24gcmVuZGVyZXIgZXJyb3InO1xuICAgICAgICAgIHRoaXMub3V0cHV0LndyaXRlKGBcXG5bcmVuZGVyZXJdICR7bWVzc2FnZX1cXG5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGRpc3Bvc2VkIGJlZm9yZSBjb250aW51aW5nXG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhaztcblxuICAgICAgICAvLyBOb3RlOiBGb3IgcHJvbXB0IGV2ZW50cywgdGhlIG92ZXJsYXkgaXMgYWxyZWFkeSByZW5kZXJlZCBpbiByZW5kZXJFdmVudCgpXG4gICAgICAgIC8vIHZpYSByZW5kZXJQcm9tcHRPdmVybGF5KHRydWUpLiBObyBuZWVkIHRvIHJlbmRlciBhZ2FpbiBoZXJlLlxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgcHJvbXB0IHJlbmRlcmluZyBpcyBhbGxvd2VkIGZvciBzdWJzZXF1ZW50IGV2ZW50c1xuICAgICAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vIGRlbGF5IGZvciBwcm9tcHQgZXZlbnRzIC0gcmVuZGVyIGltbWVkaWF0ZWx5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQUxXQVlTIHJlbmRlciBwcm9tcHQgYWZ0ZXIgcXVldWUgY29tcGxldGVzIHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBzdGF0dXMvdG9nZ2xlcyBzdGF5IHBpbm5lZCBhbmQgcmVzcG9uc2VzIGFyZSBmdWxseSByZW5kZXJlZFxuICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIGFkamFjZW50IHJlc3BvbnNlL3Rob3VnaHQgZXZlbnRzIGludG8gYSBzaW5nbGUgYmxvY2sgc28gY29udGludW91c1xuICAgKiBjaGF0IHRleHQgcmVuZGVycyB3aXRoIG9uZSBidWxsZXQgaW5zdGVhZCBvZiBvbmUgcGVyIGNodW5rLlxuICAgKi9cbiAgcHJpdmF0ZSBjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudDogVUlFdmVudCk6IFVJRXZlbnQge1xuICAgIGNvbnN0IGlzTWVyZ2VhYmxlID0gKHRhcmdldDogVUlFdmVudCB8IHVuZGVmaW5lZCk6IHRhcmdldCBpcyBVSUV2ZW50ID0+XG4gICAgICBCb29sZWFuKFxuICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAhdGFyZ2V0LmlzQ29tcGFjdGVkICYmXG4gICAgICAgICAgKCh0YXJnZXQudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Jlc3BvbnNlJykgfHxcbiAgICAgICAgICAgICh0YXJnZXQudHlwZSA9PT0gJ3Rob3VnaHQnICYmIHRhcmdldC5yYXdUeXBlID09PSAndGhvdWdodCcpKVxuICAgICAgKTtcblxuICAgIGlmICghaXNNZXJnZWFibGUoZXZlbnQpKSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmIGlzTWVyZ2VhYmxlKHRoaXMuZXZlbnRRdWV1ZVswXSkpIHtcbiAgICAgIGNvbnN0IG5leHQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKSE7XG4gICAgICBjb25zdCBuZWVkc1NlcGFyYXRvciA9XG4gICAgICAgIGV2ZW50LmNvbnRlbnQubGVuZ3RoID4gMCAmJiAhZXZlbnQuY29udGVudC5lbmRzV2l0aCgnXFxuJykgJiYgIW5leHQuY29udGVudC5zdGFydHNXaXRoKCdcXG4nKTtcbiAgICAgIGV2ZW50LmNvbnRlbnQgPSBuZWVkc1NlcGFyYXRvciA/IGAke2V2ZW50LmNvbnRlbnR9XFxuJHtuZXh0LmNvbnRlbnR9YCA6IGAke2V2ZW50LmNvbnRlbnR9JHtuZXh0LmNvbnRlbnR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggcGVuZGluZyByZW5kZXJlciBldmVudHMuXG4gICAqIFVzZWZ1bCBmb3Igc3RhcnR1cCBmbG93cyAoZS5nLiwgd2VsY29tZSBiYW5uZXIpIHRvIGd1YXJhbnRlZSB0aGUgc2Nyb2xsYmFjayBpcyBoeWRyYXRlZFxuICAgKiBiZWZvcmUgY29udGludWluZyB3aXRoIGFkZGl0aW9uYWwgVUkgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIGZsdXNoRXZlbnRzKHRpbWVvdXRNczogbnVtYmVyID0gMjUwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gS2ljayBvZmYgcHJvY2Vzc2luZyBpZiBpZGxlXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiAhdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSAmJiB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB3aGlsZSAoKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApICYmIERhdGUubm93KCkgLSBzdGFydCA8IHRpbWVvdXRNcykge1xuICAgICAgYXdhaXQgdGhpcy5kZWxheSg1KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJFdmVudChldmVudDogVUlFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIENsZWFyIGluaXRpYWxpemF0aW9uIGZsYWcgd2hlbiBmaXJzdCBiYW5uZXIgaXMgZGlzcGxheWVkXG4gICAgLy8gVGhpcyBhbGxvd3MgcHJvbXB0IHJlbmRlcmluZyB0byBiZWdpbiBhZnRlciB0aGUgd2VsY29tZSBiYW5uZXJcbiAgICBpZiAoZXZlbnQucmF3VHlwZSA9PT0gJ2Jhbm5lcicgJiYgdGhpcy5pbml0aWFsaXppbmcpIHtcbiAgICAgIHRoaXMuaW5pdGlhbGl6aW5nID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQbGFpbiA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgICBpZiAoZm9ybWF0dGVkUGxhaW4pIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZFBsYWluLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZFBsYWluIDogYCR7Zm9ybWF0dGVkUGxhaW59XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgIGlmICghZm9ybWF0dGVkKSByZXR1cm47XG5cbiAgICAvLyBEZWR1cGxpY2F0ZSBzdHJlYW1pbmcgYW5kIHJlc3BvbnNlIGNvbnRlbnQgdG8gcHJldmVudCBkdXBsaWNhdGVzXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYCR7ZXZlbnQucmF3VHlwZX06JHtldmVudC5jb250ZW50fWA7XG4gICAgaWYgKChldmVudC50eXBlID09PSAnc3RyZWFtJyB8fCBldmVudC50eXBlID09PSAncmVzcG9uc2UnKSAmJiBzaWduYXR1cmUgPT09IHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdwcm9tcHQnKSB7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5ID0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBiZWZvcmUgd3JpdGluZyBuZXcgY29udGVudFxuICAgIGlmICh0aGlzLnByb21wdEhlaWdodCA+IDAgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdzdHJlYW0nICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lICYmIGZvcm1hdHRlZC50cmltKCkpIHtcbiAgICAgIC8vIEtlZXAgc2Nyb2xsYmFjayBvcmRlcmluZyBwcmVkaWN0YWJsZSB3aGVuIHByZXZpb3VzIG91dHB1dCBlbmRlZCBtaWQtbGluZVxuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZm9ybWF0dGVkKTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IHJlc3RvcmUgdGhlIHByb21wdCBvdmVybGF5IHNvIHRoZSBjaGF0IGJveCBzdGF5cyBwaW5uZWQgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVFdmVudFR5cGUodHlwZTogUmVuZGVyZXJFdmVudFR5cGUpOiBDYW5vbmljYWxFdmVudFR5cGUgfCBudWxsIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIHJldHVybiAncHJvbXB0JztcbiAgICAgIGNhc2UgJ3Rob3VnaHQnOlxuICAgICAgICByZXR1cm4gJ3Rob3VnaHQnO1xuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgIGNhc2UgJ3N0cmVhbWluZyc6XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIGNhc2UgJ3Rvb2wnOlxuICAgICAgY2FzZSAndG9vbC1jYWxsJzpcbiAgICAgICAgcmV0dXJuICd0b29sJztcbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0JzpcbiAgICAgICAgcmV0dXJuICd0b29sLXJlc3VsdCc7XG4gICAgICBjYXNlICdidWlsZCc6XG4gICAgICAgIHJldHVybiAnYnVpbGQnO1xuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiAndGVzdCc7XG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiAncmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KGV2ZW50OiBVSUV2ZW50KTogc3RyaW5nIHtcbiAgICAvLyBDb21wYWN0ZWQgYmxvY2tzIGFscmVhZHkgaGF2ZSBzZXBhcmF0b3IgYW5kIGZvcm1hdHRpbmdcbiAgICBpZiAoZXZlbnQuaXNDb21wYWN0ZWQpIHtcbiAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgIH1cblxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJykge1xuICAgICAgLy8gQmFubmVycyBkaXNwbGF5IHdpdGhvdXQgYnVsbGV0IHByZWZpeFxuICAgICAgY29uc3QgbGluZXMgPSBldmVudC5jb250ZW50LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSk7XG4gICAgICByZXR1cm4gYCR7bGluZXMuam9pbignXFxuJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBDb21wYWN0LCB1c2VyLWZyaWVuZGx5IGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIC8vIFVzZXIgcHJvbXB0IC0ganVzdCB0aGUgdGV4dCAocHJvbXB0IGJveCBoYW5kbGVzIHN0eWxpbmcpXG4gICAgICAgIHJldHVybiBgJHt0aGVtZS5wcmltYXJ5KCc+Jyl9ICR7ZXZlbnQuY29udGVudH1cXG5gO1xuXG4gICAgICBjYXNlICd0aG91Z2h0Jzoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cmF0ZWQgPSB0aGlzLmN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoZXZlbnQuY29udGVudCk7XG4gICAgICAgIGlmICghY3VyYXRlZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUmVuZGVyVGhvdWdodChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCA9IHtcbiAgICAgICAgICB0ZXh0OiBjdXJhdGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGhpbmtpbmdCbG9jayhjdXJhdGVkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndG9vbCc6IHtcbiAgICAgICAgLy8gQ29tcGFjdCB0b29sIGRpc3BsYXk6IOKaoVRvb2xOYW1lIOKGkiByZXN1bHRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LmNvbnRlbnQucmVwbGFjZSgvXlvij7rimpnil4tdXFxzKi8sICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sLXJlc3VsdCc6IHtcbiAgICAgICAgLy8gSW5saW5lIHJlc3VsdDog4pSU4pSAIHN1bW1hcnlcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoZXZlbnQuY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ2J1aWxkJywgbGFiZWxDb2xvcjogdGhlbWUud2FybmluZyB9KTtcblxuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGV2ZW50LmNvbnRlbnQsIHsgbGFiZWw6ICd0ZXN0JywgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcblxuICAgICAgY2FzZSAnc3RyZWFtJzoge1xuICAgICAgICAvLyBTdHJlYW1pbmcgY29udGVudCBpcyB0aGUgbW9kZWwncyByZXNwb25zZSAtIHBhc3MgdGhyb3VnaCBkaXJlY3RseVxuICAgICAgICAvLyBJTVBPUlRBTlQ6IERvbid0IGZpbHRlciBzdHJlYW1pbmcgY2h1bmtzIHdpdGggaXNHYXJiYWdlT3V0cHV0IGJlY2F1c2U6XG4gICAgICAgIC8vIDEuIENodW5rcyBhcnJpdmUgY2hhcmFjdGVyLWJ5LWNoYXJhY3RlciBvciBpbiBzbWFsbCBwaWVjZXNcbiAgICAgICAgLy8gMi4gU21hbGwgY2h1bmtzIGxpa2UgXCIuXCIgb3IgXCI6XCIgYXJlIHZhbGlkIHBhcnRzIG9mIHNlbnRlbmNlc1xuICAgICAgICAvLyAzLiBGaWx0ZXJpbmcgd291bGQgYnJlYWsgdGhlIHN0cmVhbWluZyBkaXNwbGF5XG4gICAgICAgIC8vIE9ubHkgZmlsdGVyIGNvbXBsZXRlbHkgZW1wdHkgY29udGVudFxuICAgICAgICBpZiAoIWV2ZW50LmNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWNjdW11bGF0ZSBzdHJlYW1pbmcgY29udGVudCBmb3IgcG90ZW50aWFsIHBvc3QtcHJvY2Vzc2luZ1xuICAgICAgICB0aGlzLnN0cmVhbWluZ0NvbnRlbnRCdWZmZXIgKz0gZXZlbnQuY29udGVudDtcbiAgICAgICAgLy8gVHJhY2sgbmV3bGluZXMgZm9yIGxpbmUgY291bnRpbmdcbiAgICAgICAgY29uc3QgbmV3bGluZXMgPSAoZXZlbnQuY29udGVudC5tYXRjaCgvXFxuL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICAgIHRoaXMuc3RyZWFtaW5nTGluZXNXcml0dGVuICs9IG5ld2xpbmVzO1xuICAgICAgICByZXR1cm4gZXZlbnQuY29udGVudDtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVzcG9uc2UnOlxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHJlc3BvbnNlIHdpdGhvdXQgZXhjZXNzaXZlIGJ1bGxldHMsIHdyYXBwZWQgZm9yIHJlYWRhYmlsaXR5XG4gICAgICAgIGNvbnN0IGlzRXJyb3IgPSBldmVudC5yYXdUeXBlID09PSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCBpc0Vycm9yID8geyBsYWJlbDogJ2Vycm9yJywgbGFiZWxDb2xvcjogdGhlbWUuZXJyb3IgfSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpYyBnYXJiYWdlIGRldGVjdGlvbiAtIGNoZWNrcyBpZiBjb250ZW50IGxvb2tzIGxpa2UgaW50ZXJuYWwvc3lzdGVtIG91dHB1dFxuICAgKiB0aGF0IHNob3VsZG4ndCBiZSBzaG93biB0byB1c2Vycy4gVXNlcyBzdHJ1Y3R1cmFsIGNoZWNrcywgbm90IHBhdHRlcm4gbWF0Y2hpbmcuXG4gICAqL1xuICBwcml2YXRlIGlzR2FyYmFnZU91dHB1dChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHRyaW1tZWQgPSBjb250ZW50LnRyaW0oKTtcblxuICAgIC8vIFZlcnkgc2hvcnQgY29udGVudCBjaGVja3MgLSBjYXRjaCBsZWFrZWQgcHVuY3R1YXRpb24gZnJhZ21lbnRzIGxpa2UgXCIuXCIgb3IgXCI6XCJcbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gMykge1xuICAgICAgLy8gU2luZ2xlIHB1bmN0dWF0aW9uIG1hcmtzIG9yIHZlcnkgc2hvcnQgcHVuY3R1YXRpb24gc2VxdWVuY2VzIGFyZSBnYXJiYWdlXG4gICAgICBpZiAoL15bLiw6OyE/KiNcXC1fPSt8XFxcXC88Pigpe31bXFxdYCdcIn5eQCYlJF0rJC8udGVzdCh0cmltbWVkKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjb250ZW50IGlzIGp1c3QgcHVuY3R1YXRpb24gb24gbXVsdGlwbGUgbGluZXMgKGxlYWtlZCByZWFzb25pbmcpXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBwdW5jdE9ubHlMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IHtcbiAgICAgIGNvbnN0IGxpbmVUcmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICByZXR1cm4gbGluZVRyaW1tZWQubGVuZ3RoID4gMCAmJiAvXlsuLDo7IT8qI1xcLV89K3xcXFxcLzw+KCl7fVtcXF1gJ1wifl5AJiUkXFxzXSskLy50ZXN0KGxpbmVUcmltbWVkKTtcbiAgICB9KTtcbiAgICAvLyBJZiBBTEwgbm9uLWVtcHR5IGxpbmVzIGFyZSBqdXN0IHB1bmN0dWF0aW9uLCBpdCdzIGdhcmJhZ2VcbiAgICBjb25zdCBub25FbXB0eUxpbmVzID0gbGluZXMuZmlsdGVyKGwgPT4gbC50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKG5vbkVtcHR5TGluZXMubGVuZ3RoID4gMCAmJiBwdW5jdE9ubHlMaW5lcy5sZW5ndGggPT09IG5vbkVtcHR5TGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250ZW50IHN0YXJ0aW5nIHdpdGggPCB0aGF0IGlzbid0IHZhbGlkIG1hcmtkb3duL2NvZGVcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCc8JykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPGh0dHAnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8IScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250YWlucyBcInRvPWZ1bmN0aW9ucy5cIiBvciBcInRvPXRvb2xzLlwiIChpbnRlcm5hbCByb3V0aW5nKVxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCd0bz1mdW5jdGlvbnMuJykgfHwgY29udGVudC5pbmNsdWRlcygndG89dG9vbHMuJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGxvb2tzIGxpa2UgaW50ZXJuYWwgaW5zdHJ1Y3Rpb24gKHF1b3RlZCBzeXN0ZW0gdGV4dClcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCdcIicpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ2Jsb2NrJykgJiYgY29udGVudC5pbmNsdWRlcygndG9vbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiB2ZXJ5IHNob3J0IGNvbnRlbnQgdGhhdCdzIGp1c3QgdGltaW5nIGluZm9cbiAgICBpZiAoY29udGVudC5sZW5ndGggPCAzMCAmJiAvZWxhcHNlZHxzZWNvbmRzP3xtc1xcYi9pLnRlc3QoY29udGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IG1vc3RseSBwdW5jdHVhdGlvbi9zeW1ib2xzIC0gbGVha2VkIHJlYXNvbmluZyBmcmFnbWVudHNcbiAgICBjb25zdCBtZWFuaW5nZnVsTGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiB7XG4gICAgICBjb25zdCBsaW5lVHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgaWYgKCFsaW5lVHJpbW1lZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gTGluZSBtdXN0IGhhdmUgYXQgbGVhc3QgMzAlIGFscGhhbnVtZXJpYyBjb250ZW50XG4gICAgICBjb25zdCBhbHBoYU51bSA9IChsaW5lVHJpbW1lZC5tYXRjaCgvW2EtekEtWjAtOV0vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIHJldHVybiBsaW5lVHJpbW1lZC5sZW5ndGggPiAwICYmIGFscGhhTnVtIC8gbGluZVRyaW1tZWQubGVuZ3RoID49IDAuMztcbiAgICB9KTtcbiAgICAvLyBJZiBsZXNzIHRoYW4gMzAlIG9mIGxpbmVzIGFyZSBtZWFuaW5nZnVsLCBpdCdzIGdhcmJhZ2VcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMyAmJiBtZWFuaW5nZnVsTGluZXMubGVuZ3RoIC8gbGluZXMubGVuZ3RoIDwgMC4zKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBnaWJiZXJpc2ggLSBoaWdoIHJhdGlvIG9mIG5vbi13b3JkIGNoYXJhY3RlcnNcbiAgICBjb25zdCBhbHBoYUNvdW50ID0gKGNvbnRlbnQubWF0Y2goL1thLXpBLVpdL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxDb3VudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzL2csICcnKS5sZW5ndGg7XG4gICAgaWYgKHRvdGFsQ291bnQgPiAyMCAmJiBhbHBoYUNvdW50IC8gdG90YWxDb3VudCA8IDAuNCkge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIExlc3MgdGhhbiA0MCUgbGV0dGVycyA9IGxpa2VseSBnYXJiYWdlXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXplIHRvb2wgcmVzdWx0IGNvbnRlbnQgdG8gcmVtb3ZlIGxlYWtlZCByZWFzb25pbmcvdGhpbmtpbmcgb3V0cHV0LlxuICAgKiBUaGlzIGZpbHRlcnMgb3V0IGZyYWdtZW50cyB0aGF0IGxvb2sgbGlrZSBpbnRlcm5hbCBtb2RlbCBvdXRwdXQuXG4gICAqL1xuICBwcml2YXRlIHNhbml0aXplVG9vbFJlc3VsdENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybiAnJztcblxuICAgIC8vIFNwbGl0IGludG8gbGluZXMgYW5kIGZpbHRlciBvdXQgZ2FyYmFnZSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgY2xlYW5MaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuXG4gICAgICAvLyBTa2lwIGVtcHR5IGxpbmVzIGF0IHN0YXJ0XG4gICAgICBpZiAoY2xlYW5MaW5lcy5sZW5ndGggPT09IDAgJiYgIXRyaW1tZWQpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIGxlYWtlZCByZWFzb25pbmcgZnJhZ21lbnRzXG4gICAgICAvLyBDb21tb24gcGF0dGVybnM6IHNpbmdsZSBwdW5jdHVhdGlvbiwgbWFya2Rvd24gYXJ0aWZhY3RzLCBlbW9qaSBmcmFnbWVudHNcbiAgICAgIGlmICgvXlspXFxdfT4qYCdcIl0rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG4gICAgICBpZiAoL15bKl9dezIsfSQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0ICoqIG9yIF9fXG4gICAgICBpZiAoL15bfOKUguKUg10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgdmVydGljYWwgYmFyc1xuICAgICAgaWYgKC9eW+KUgOKUgeKVkF0rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgaG9yaXpvbnRhbCBsaW5lc1xuICAgICAgaWYgKC9eXFwuezIsfSQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGRvdHNcbiAgICAgIGlmICgvXltcXHPvuI9dKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IHdoaXRlc3BhY2UvZW1vamkgbW9kaWZpZXJzXG4gICAgICBpZiAoL15bOlxcc10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgY29sb25zL3doaXRlc3BhY2VcbiAgICAgIGlmICgvXlssXFxzXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBjb21tYXMvd2hpdGVzcGFjZVxuXG4gICAgICAvLyBTa2lwIG1hcmtkb3duIGJvbGQvaXRhbGljIGZyYWdtZW50cyB0aGF0IGxlYWtlZFxuICAgICAgaWYgKC9eXFwqezEsMn1bXipdKlxcKnswLDJ9JC8udGVzdCh0cmltbWVkKSAmJiB0cmltbWVkLmxlbmd0aCA8IDEwICYmICEvXFx3ezMsfS8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG5cbiAgICAgIC8vIFNraXAgbGluZXMgdGhhdCBhcmUganVzdCBzaG9ydCBmcmFnbWVudHMgd2l0aCBoaWdoIHB1bmN0dWF0aW9uIHJhdGlvXG4gICAgICBjb25zdCBhbHBoYUluTGluZSA9ICh0cmltbWVkLm1hdGNoKC9bYS16QS1aMC05XS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgaWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkLmxlbmd0aCA8IDIwICYmIGFscGhhSW5MaW5lIC8gdHJpbW1lZC5sZW5ndGggPCAwLjMpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIHZlcnkgc2hvcnQgbGluZXMgdGhhdCBhcmUganVzdCBwdW5jdHVhdGlvbiBvciBzaW5nbGUgY2hhcnMgKGV4Y2VwdCBudW1iZXJzKVxuICAgICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IDIgJiYgIS9eXFxkKyQvLnRlc3QodHJpbW1lZCkgJiYgIS9eW2EtekEtWl17Mn0kLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICAgIC8vIEFsbG93IHNwZWNpZmljIHNob3J0IHBhdHRlcm5zIGxpa2UgXCJPS1wiLCBcIjBcIiwgXCIxXCIgZXRjLlxuICAgICAgICBpZiAoIS9eKD86b2t8bm98eWVzfFxcZCspJC9pLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIHN0cmF5IHBhcmVudGhlc2VzIG9yIGJyYWNrZXRzIGZyb20gcmVhc29uaW5nXG4gICAgICBpZiAoL15bKClbXFxde31dKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIG1hcmtkb3duIGNvZGUgZmVuY2UgYXJ0aWZhY3RzXG4gICAgICBpZiAoL15gYGBcXHMqJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG5cbiAgICAgIGNsZWFuTGluZXMucHVzaChsaW5lKTtcbiAgICB9XG5cbiAgICAvLyBUcmltIHRyYWlsaW5nIGVtcHR5IGxpbmVzXG4gICAgd2hpbGUgKGNsZWFuTGluZXMubGVuZ3RoID4gMCAmJiAhY2xlYW5MaW5lc1tjbGVhbkxpbmVzLmxlbmd0aCAtIDFdPy50cmltKCkpIHtcbiAgICAgIGNsZWFuTGluZXMucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuTGluZXMuam9pbignXFxuJykudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjdXJhdGVSZWFzb25pbmdDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xcclxcbi9nLCAnXFxuJykucmVwbGFjZSgvXFxyL2csICdcXG4nKS50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGxpbWl0ZWQgPVxuICAgICAgbm9ybWFsaXplZC5sZW5ndGggPiB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdDaGFyc1xuICAgICAgICA/IG5vcm1hbGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMpXG4gICAgICAgIDogbm9ybWFsaXplZDtcblxuICAgIGNvbnN0IG1heFNlZ21lbnRzID0gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgKiAzO1xuICAgIGNvbnN0IHNlZ21lbnRzID0gbGltaXRlZFxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLmZsYXRNYXAobGluZSA9PiBsaW5lLnNwbGl0KC8oPzw9Wy4/IV0pXFxzKy8pKVxuICAgICAgLm1hcChsaW5lID0+IGxpbmUucmVwbGFjZSgvXlvigKIq4o+64peLXFwtXFx1MjAyMl0rXFxzKi8sICcnKS50cmltKCkpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IGRlZHVwZWQ6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkU2VnbWVudCA9IHNlZ21lbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgY29uc3Qga2V5ID0gbm9ybWFsaXplZFNlZ21lbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChzZWVuLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc2Vlbi5hZGQoa2V5KTtcbiAgICAgIGRlZHVwZWQucHVzaChub3JtYWxpemVkU2VnbWVudCk7XG4gICAgICBpZiAoZGVkdXBlZC5sZW5ndGggPj0gbWF4U2VnbWVudHMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlZHVwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBwcmlvcml0aXplZCA9IHRoaXMucHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKGRlZHVwZWQpO1xuICAgIGlmIChwcmlvcml0aXplZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbWl0ZWRTZWxlY3Rpb24gPSBwcmlvcml0aXplZC5zbGljZSgwLCB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyk7XG4gICAgY29uc3QgYnVsbGV0ZWQgPSBsaW1pdGVkU2VsZWN0aW9uLm1hcChsaW5lID0+IHRoaXMuZW5zdXJlUmVhc29uaW5nQnVsbGV0KGxpbmUpKTtcblxuICAgIHJldHVybiBidWxsZXRlZC5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgZW5zdXJlUmVhc29uaW5nQnVsbGV0KGxpbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKC9eKFvigKIq4o+64peLLV18XFxkK1suKV0pXFxzLy50ZXN0KGxpbmUpKSB7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gICAgcmV0dXJuIGDigKIgJHtsaW5lfWA7XG4gIH1cblxuICBwcml2YXRlIGxvb2tzU3RydWN0dXJlZFRob3VnaHQobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIC9eKFxcZCtbLildXFxzfHN0ZXBcXHMqXFxkK3xwbGFuXFxifG5leHRcXGJ8dGhlblxcYnxnb2FsXFxiKS9pLnRlc3QobGluZSkgfHxcbiAgICAgIC9eWy0q4oCiXVxccy8udGVzdChsaW5lKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygnLT4nKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygn4oaSJykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJzogJykgfHxcbiAgICAgIC9cXGIodGVzdHx2ZXJpZnl8dmFsaWRhdGV8Y2hlY2t8YnVpbGR8cnVufGRlcGxveXxkaWZmfGxpbnR8dHlwZSA/Y2hlY2t8Zml4fGJ1Z3xpc3N1ZXxyaXNrfG1pdGlnYXRlfGludmVzdGlnYXRlKVxcYi9pLnRlc3QobGluZSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBwcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGlmICghc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2NvcmVkID0gc2VnbWVudHMubWFwKCh0ZXh0LCBpbmRleCkgPT4gKHtcbiAgICAgIHRleHQsXG4gICAgICBpbmRleCxcbiAgICAgIHNjb3JlOiB0aGlzLnJlYXNvbmluZ1NpZ25hbFNjb3JlKHRleHQpLFxuICAgIH0pKTtcblxuICAgIGNvbnN0IGhhc1NpZ25hbCA9IHNjb3JlZC5zb21lKGl0ZW0gPT4gaXRlbS5zY29yZSA+IDApO1xuICAgIGlmICghaGFzU2lnbmFsKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgc2NvcmVkLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2NvcmVkLm1hcChpdGVtID0+IGl0ZW0udGV4dCk7XG4gIH1cblxuICBwcml2YXRlIHJlYXNvbmluZ1NpZ25hbFNjb3JlKGxpbmU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbGV0IHNjb3JlID0gMDtcbiAgICBjb25zdCBsb3dlciA9IGxpbmUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmICh0aGlzLmxvb2tzU3RydWN0dXJlZFRob3VnaHQobGluZSkpIHtcbiAgICAgIHNjb3JlICs9IDM7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uS2V5d29yZHMgPSBbXG4gICAgICAndG9vbCcsICdjb21tYW5kJywgJ3NjcmlwdCcsICdjb250ZXh0JywgJ3N1bW1hcicsICdyaXNrJywgJ2lzc3VlJyxcbiAgICAgICdpbnZlc3RpZ2F0ZScsICdyb290IGNhdXNlJywgJ3JlbWVkaWF0JywgJ21pdGlnYXQnLCAnZml4JywgJ3BhdGNoJyxcbiAgICAgICd0ZXN0JywgJ3ZlcmlmeScsICd2YWxpZGF0ZScsICdjaGVjaycsICdidWlsZCcsICdkZXBsb3knLCAncnVuJyxcbiAgICAgICdkaWZmJywgJ2xpbnQnLCAndHlwZWNoZWNrJywgJ2JlbmNobWFyaycsXG4gICAgXTtcbiAgICBpZiAoYWN0aW9uS2V5d29yZHMuc29tZShrZXl3b3JkID0+IGxvd2VyLmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgc2NvcmUgKz0gMjtcbiAgICB9XG5cbiAgICBpZiAoL1sjOuKGkl18LT4vLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlICs9IDE7XG4gICAgfVxuXG4gICAgaWYgKC9eKGkoJ3wgYSltfGkgd2lsbHxsZXQgbWV8c3RhcnRpbmd8bm93fG9rfHN1cmUpXFxiL2kudGVzdChsaW5lKSkge1xuICAgICAgc2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggPiAxMjApIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRSZW5kZXJUaG91Z2h0KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCBub3JtYWxpemVkTG93ZXIgPSBub3JtYWxpemVkLnRvTG93ZXJDYXNlKCk7XG4gICAgXG4gICAgLy8gRXhhY3QgZHVwbGljYXRlIGRldGVjdGlvblxuICAgIGlmICh0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCAmJiB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC50ZXh0ID09PSBub3JtYWxpemVkTG93ZXIpIHtcbiAgICAgIGlmIChub3cgLSB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC5hdCA8IHRoaXMudGhvdWdodERlZHVwV2luZG93TXMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlbWFudGljIGR1cGxpY2F0ZSBkZXRlY3Rpb24gLSBjaGVjayBpZiBuZXcgdGhvdWdodCBpcyBhIHN1YnNldCBvZiBwcmV2aW91cyB0aG91Z2h0XG4gICAgaWYgKHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0KSB7XG4gICAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LnRleHQ7XG4gICAgICBjb25zdCBjdXJyZW50ID0gbm9ybWFsaXplZExvd2VyO1xuICAgICAgXG4gICAgICAvLyBJZiBjdXJyZW50IHRob3VnaHQgY29udGFpbnMgbW9zdCBvZiBwcmV2aW91cyB0aG91Z2h0IChvciB2aWNlIHZlcnNhKSwgaXQncyBsaWtlbHkgYSBkdXBsaWNhdGVcbiAgICAgIGNvbnN0IHdvcmRzUHJldmlvdXMgPSBwcmV2aW91cy5zcGxpdCgvXFxzKy8pLmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMyk7XG4gICAgICBjb25zdCB3b3Jkc0N1cnJlbnQgPSBjdXJyZW50LnNwbGl0KC9cXHMrLykuZmlsdGVyKHcgPT4gdy5sZW5ndGggPiAzKTtcbiAgICAgIFxuICAgICAgaWYgKHdvcmRzUHJldmlvdXMubGVuZ3RoID4gMCAmJiB3b3Jkc0N1cnJlbnQubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzaGFyZWRXb3JkcyA9IHdvcmRzQ3VycmVudC5maWx0ZXIod29yZCA9PiB3b3Jkc1ByZXZpb3VzLmluY2x1ZGVzKHdvcmQpKTtcbiAgICAgICAgY29uc3Qgc2ltaWxhcml0eSA9IHNoYXJlZFdvcmRzLmxlbmd0aCAvIE1hdGgubWF4KHdvcmRzUHJldmlvdXMubGVuZ3RoLCB3b3Jkc0N1cnJlbnQubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIC8vIElmIHNpbWlsYXJpdHkgPiA3MCUgYW5kIHdpdGhpbiB0aW1lIHdpbmRvdywgZmlsdGVyIGl0IG91dFxuICAgICAgICBpZiAoc2ltaWxhcml0eSA+IDAuNyAmJiBub3cgLSB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC5hdCA8IHRoaXMudGhvdWdodERlZHVwV2luZG93TXMpIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgb3V0IHZlcnkgc2hvcnQgb3IgdHJpdmlhbCB0aG91Z2h0c1xuICAgIGNvbnN0IHdvcmRDb3VudCA9IG5vcm1hbGl6ZWRMb3dlci5zcGxpdCgvXFxzKy8pLmZpbHRlcih3ID0+IHcubGVuZ3RoID4gMikubGVuZ3RoO1xuICAgIGlmICh3b3JkQ291bnQgPCAzICYmIG5vcm1hbGl6ZWRMb3dlci5sZW5ndGggPCAzMCkge1xuICAgICAgLy8gVG9vIHNob3J0IHRvIGJlIG1lYW5pbmdmdWxcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGNvbW1vbiBtZWFuaW5nbGVzcyBwYXR0ZXJuc1xuICAgIGNvbnN0IG1lYW5pbmdsZXNzUGF0dGVybnMgPSBbXG4gICAgICAvXmkoPzonP2xsPyk/XFxzKyg/OndpbGxcXHMrKT8oPzpub3dcXHMrKT8oPzpwcm9jZWVkfGNvbnRpbnVlfGdvfG1vdmV8c3RhcnQpL2ksXG4gICAgICAvXig/OmxldCBtZXxpIHdpbGx8aSdsbHxpIGFtfGknbSlcXHMrKD86Y2hlY2t8bG9va3xzZWV8ZXhhbWluZXxyZXZpZXd8YW5hbHl6ZSkvaSxcbiAgICAgIC9ecHJvY2VlZGluZ1xccysoPzp3aXRofHRvKS9pLFxuICAgICAgL15jb250aW51aW5nXFxzKyg/OndpdGh8dG8pL2ksXG4gICAgICAvXm1vdmluZ1xccysoPzpvbnxmb3J3YXJkfHRvKS9pLFxuICAgICAgL15zdGFydGluZ1xccysoPzp3aXRofHRvKS9pLFxuICAgICAgL15ub3dcXHMrKD86aXxsZXQgbWV8d2V8bGV0J3MpL2ksXG4gICAgICAvXig/Om9rfGFscmlnaHR8d2VsbClcXHMqLD9cXHMqKD86bm93fHRoZW58c298bGV0KS9pLFxuICAgIF07XG5cbiAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgbWVhbmluZ2xlc3NQYXR0ZXJucykge1xuICAgICAgaWYgKHBhdHRlcm4udGVzdChub3JtYWxpemVkKSkge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyNCwgTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDQsIDExMCkpOyAvLyBSZXNwb25zaXZlIHRvIHRlcm1pbmFsIHdpZHRoXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBsaW5lSWR4ID0gMDsgbGluZUlkeCA8IGxpbmVzLmxlbmd0aDsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZUlkeF0hO1xuICAgICAgaWYgKCFsaW5lLnRyaW0oKSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JkLXdyYXAgZWFjaCBsaW5lXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoLyhcXHMrKS8pO1xuICAgICAgbGV0IGN1cnJlbnRMaW5lID0gJyc7XG5cbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBpZiAoKGN1cnJlbnRMaW5lICsgd29yZCkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgICAgLy8gRmlyc3QgbGluZSBvZiB0aGlzIHBhcmFncmFwaCBnZXRzIOKPuiwgcmVzdCBnZXQgaW5kZW50XG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IHdvcmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgY2FsbCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDij7ogW1NlYXJjaF0gcGF0dGVybjogXCJmb29cIiwgcGF0aDogXCJzcmNcIixcbiAgICogICAgICAgICAgICAgIG91dHB1dF9tb2RlOiBcImNvbnRlbnRcIiwgaGVhZF9saW1pdDogMzBcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KGBbJHtuYW1lTWF0Y2hbMV19XWApfVxcbmA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbnRlbnR9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sTmFtZSA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXSE7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSA0LCA1Nik7XG5cbiAgICAvLyBGb3JtYXQ6IOKPuiBbVG9vbE5hbWVdIGFyZ3MuLi5cbiAgICBjb25zdCBwcmVmaXggPSBgJHtidWxsZXR9ICR7dGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KGBbJHt0b29sTmFtZX1dYCl9IGA7XG4gICAgY29uc3QgcHJlZml4TGVuID0gdG9vbE5hbWUhLmxlbmd0aCArIDU7IC8vIFwi4o+6IFtUb29sTmFtZV0gXCIgdmlzaWJsZSBsZW5ndGhcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHByZWZpeExlbiArIDQpOyAvLyBFeHRyYSBpbmRlbnQgZm9yIHdyYXBwZWQgYXJnc1xuXG4gICAgLy8gUGFyc2UgYW5kIGZvcm1hdCBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZVRvb2xBcmdzKGFyZ3NTdHIpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke3ByZWZpeC50cmltRW5kKCl9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudExpbmUgPSBwcmVmaXg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV0hO1xuICAgICAgY29uc3QgYXJnVGV4dCA9IGAke3RoZW1lLnVpLm11dGVkKGFyZy5rZXkgKyAnOicpfSAke3RoaXMuZm9ybWF0QXJnVmFsdWUoYXJnLmtleSwgYXJnLnZhbHVlKX1gO1xuICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaSA8IGFyZ3MubGVuZ3RoIC0gMSA/ICcsICcgOiAnJztcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhcmcgZml0cyBvbiBjdXJyZW50IGxpbmVcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgaWYgKHRoaXMuc3RyaXBBbnNpKHRlc3RMaW5lKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZSAhPT0gcHJlZml4KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBhcmd1bWVudHMgZnJvbSBzdHJpbmcgbGlrZToga2V5OiBcInZhbHVlXCIsIGtleTI6IHZhbHVlMlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xBcmdzKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IGFyZ3M6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBTaW1wbGUgcmVnZXggdG8gZXh0cmFjdCBrZXk6IHZhbHVlIHBhaXJzXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLCldKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBhcmdzLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhbiBhcmd1bWVudCB2YWx1ZSAodHJ1bmNhdGUgbG9uZyBzdHJpbmdzKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRBcmdWYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XG4gICAgY29uc3QgaXNRdW90ZWQgPSB2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpO1xuICAgIGNvbnN0IGlubmVyID0gaXNRdW90ZWQgPyB2YWx1ZS5zbGljZSgxLCAtMSkgOiB2YWx1ZTtcblxuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc2hvdWxkUHJlc2VydmUgPVxuICAgICAgbG93ZXJLZXkuaW5jbHVkZXMoJ3BhdGgnKSB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdmaWxlJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdxdWVyeScgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY29tbWFuZCcgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY21kJztcblxuICAgIC8vIFRydW5jYXRlIGxvbmcgdmFsdWVzIHdoZW4gbm90IGV4cGxpY2l0bHkgcHJlc2VydmluZ1xuICAgIGNvbnN0IG1heExlbiA9IDQwO1xuICAgIGNvbnN0IHRydW5jYXRlZCA9IHNob3VsZFByZXNlcnZlIHx8IGlubmVyLmxlbmd0aCA8PSBtYXhMZW4gPyBpbm5lciA6IGlubmVyLnNsaWNlKDAsIG1heExlbiAtIDMpICsgJy4uLic7XG5cbiAgICByZXR1cm4gaXNRdW90ZWQgPyBgXCIke3RydW5jYXRlZH1cImAgOiB0cnVuY2F0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCByZXN1bHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o6/ICBGb3VuZCAxMiBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBzdW1tYXJ5IGxpbmUgKGUuZy4sIFwiRm91bmQgWCBsaW5lc1wiKVxuICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oRm91bmQgXFxkKyAoPzpsaW5lcz98ZmlsZXM/fG1hdGNoZXM/KXxSZWFkIFxcZCsgbGluZXM/fFdyb3RlIFxcZCsgbGluZXM/fEVkaXRlZHxDcmVhdGVkfERlbGV0ZWQpL2kpO1xuICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH0gJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgcmVzdWx0cywgc2hvdyB0cnVuY2F0ZWQgcHJldmlld1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMpIHtcbiAgICAgIGNvbnN0IHByZXZpZXcgPSBsaW5lcy5zbGljZSgwLCAyKS5qb2luKCdcXG4nKTtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7cHJldmlld31cXG4gICR7dGhlbWUudWkubXV0ZWQoYC4uLiAke2xpbmVzLmxlbmd0aCAtIDJ9IG1vcmUgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpYCl9XFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgY2FsbDog4o+6IFtSZWFkXSBmaWxlLnRzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJnc1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxccyooPzpcXCgoLiopXFwpKT8kL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV0hO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXT8udHJpbSgpIHx8ICcnO1xuXG4gICAgLy8gVHJhY2sgdG9vbCBuYW1lIGZvciBwYWlyaW5nIHdpdGggcmVzdWx0XG4gICAgdGhpcy5sYXN0VG9vbE5hbWUgPSB0b29sTmFtZTtcblxuICAgIC8vIEdldCB0b29sLXNwZWNpZmljIGNvbG9yIChiYXNoPW9yYW5nZSwgcmVhZD1jeWFuLCB3cml0ZT1ncmVlbiwgZXRjLilcbiAgICBjb25zdCB0b29sQ29sb3IgPSBnZXRUb29sQ29sb3IodG9vbE5hbWUpO1xuICAgIGNvbnN0IGNvbG9yZWRUb29sTmFtZSA9IHRvb2xDb2xvcihgWyR7dG9vbE5hbWV9XWApO1xuXG4gICAgLy8gSWYgbm8gYXJncywganVzdCBzaG93IHRvb2wgbmFtZVxuICAgIGlmICghYXJnc1N0cikge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb2xvcmVkVG9vbE5hbWV9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuY29scyAtIDg7IC8vIExlYXZlIHJvb20gZm9yIG1hcmdpbnNcblxuICAgIC8vIFBhcnNlIGluZGl2aWR1YWwgcGFyYW1zXG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5wYXJzZVRvb2xQYXJhbXMoYXJnc1N0cik7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29sb3JlZFRvb2xOYW1lfSAke2FyZ3NTdHJ9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgcGFyYW1zIHdpdGggcHJvcGVyIHdyYXBwaW5nXG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQodG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgsIHRvb2xDb2xvcik7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBwYXJhbXMgZnJvbSBhcmdzIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xQYXJhbXMoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgcGFyYW1zOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+ID0gW107XG4gICAgLy8gTWF0Y2gga2V5OiBcInZhbHVlXCIgb3Iga2V5OiB2YWx1ZSBwYXR0ZXJuc1xuICAgIGNvbnN0IHJlZ2V4ID0gLyhcXHcrKTpcXHMqKFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxbXixcXG5dKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBwYXJhbXMucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9vbCBwYXJhbXMgaW4gQ2xhdWRlIENvZGUgc3R5bGUgd2l0aCB3cmFwcGluZyAoZGVmYXVsdCBncmVlbiBjb2xvcilcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtcyhcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQodG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgsIHRoZW1lLnRvb2xDb2xvcnMuZGVmYXVsdCk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRvb2wgcGFyYW1zIHdpdGggY3VzdG9tIHRvb2wgY29sb3JcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlcixcbiAgICB0b29sQ29sb3I6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZ1xuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0b29sQ29sb3IoYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgY29sb3JlZFZhbHVlID0gdGhpcy5jb2xvclBhcmFtVmFsdWUocGFyYW0ua2V5LCBwYXJhbS52YWx1ZSk7XG4gICAgICBjb25zdCBwYXJhbVRleHQgPSBgJHtwYXJhbS5rZXl9OiAke2NvbG9yZWRWYWx1ZX1gO1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtID8gcGFyYW1UZXh0IDogYCwgJHtwYXJhbVRleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWRkaW5nIHRoaXMgcGFyYW0gd291bGQgZXhjZWVkIHdpZHRoXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgcGFyYW1TdHI7XG4gICAgICBjb25zdCBwbGFpbkxlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aCh0ZXN0TGluZSk7XG5cbiAgICAgIGlmIChwbGFpbkxlbmd0aCA+IG1heFdpZHRoICYmICFmaXJzdFBhcmFtKSB7XG4gICAgICAgIC8vIFN0YXJ0IG5ldyBsaW5lXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIHBhcmFtVGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IHBhcmFtU3RyO1xuICAgICAgfVxuICAgICAgZmlyc3RQYXJhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogQ29sb3IgY3JpdGljYWwgcGFyYW1ldGVyIHZhbHVlcyAocGF0aHMsIGNvbW1hbmRzKSBmb3IgcmVhZGFiaWxpdHkuXG4gICovXG4gIHByaXZhdGUgY29sb3JQYXJhbVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8IGxvd2VyS2V5ID09PSAnZmlsZScgfHwgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fCBsb3dlcktleSA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAobG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fCBsb3dlcktleSA9PT0gJ2NtZCcpIHtcbiAgICAgIHJldHVybiB0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBhIHNob3J0IHN1bW1hcnkgZnJvbSB0b29sIGFyZ3NcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRvb2xTdW1tYXJ5KHRvb2xOYW1lOiBzdHJpbmcsIGFyZ3NTdHI6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvb2wgPSB0b29sTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gRXh0cmFjdCBwYXRoL2ZpbGUgZm9yIGZpbGUgb3BlcmF0aW9uc1xuICAgIGlmIChbJ3JlYWQnLCAnd3JpdGUnLCAnZWRpdCcsICdnbG9iJywgJ2dyZXAnLCAnc2VhcmNoJ10uaW5jbHVkZXModG9vbCkpIHtcbiAgICAgIGNvbnN0IHBhdGhNYXRjaCA9IGFyZ3NTdHIubWF0Y2goLyg/OnBhdGh8ZmlsZV9wYXRofHBhdHRlcm4pOlxccypcIihbXlwiXSspXCIvKTtcbiAgICAgIGlmIChwYXRoTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHBhdGhNYXRjaFsxXSE7XG4gICAgICAgIHJldHVybiB0aGVtZS5maWxlPy5wYXRoID8gdGhlbWUuZmlsZS5wYXRoKHBhdGgpIDogdGhlbWUudWkubXV0ZWQocGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBjb21tYW5kIGZvciBiYXNoXG4gICAgaWYgKHRvb2wgPT09ICdiYXNoJykge1xuICAgICAgY29uc3QgY21kTWF0Y2ggPSBhcmdzU3RyLm1hdGNoKC9jb21tYW5kOlxccypcIihbXlwiXSspXCIvKTtcbiAgICAgIGlmIChjbWRNYXRjaCkge1xuICAgICAgICBjb25zdCBjbWQgPSBjbWRNYXRjaFsxXSE7XG4gICAgICAgIHJldHVybiB0aGVtZS51aS5tdXRlZChjbWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCByZXN1bHQ6IOKOvyAgRm91bmQgWCBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICogRm9yIGVkaXRzLCBzaG93IGEgc21hbGwgaW5saW5lIGRpZmYgcHJldmlld1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNhbml0aXplIGNvbnRlbnQgZmlyc3QgLSBmaWx0ZXIgb3V0IGdhcmJhZ2UvcmVhc29uaW5nIG91dHB1dCB0aGF0IGxlYWtlZCB0aHJvdWdoXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50KGNvbnRlbnQpO1xuICAgIGlmICghc2FuaXRpemVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KHNhbml0aXplZCkpIHtcbiAgICAgIHJldHVybiAnJzsgLy8gRG9uJ3QgcmVuZGVyIGdhcmJhZ2UgdG9vbCByZXN1bHRzXG4gICAgfVxuXG4gICAgLy8gU3BlY2lhbCBoYW5kbGluZyBmb3IgZWRpdCByZXN1bHRzIC0gc2hvdyBpbmxpbmUgZGlmZlxuICAgIGlmICh0aGlzLmxhc3RUb29sTmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ2VkaXQnKSB7XG4gICAgICByZXR1cm4gdGhpcy5mb3JtYXRFZGl0UmVzdWx0V2l0aERpZmYoc2FuaXRpemVkKTtcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBjb21tb24gcmVzdWx0IHBhdHRlcm5zIGZvciBzdW1tYXJ5XG4gICAgY29uc3QgbGluZU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC8oXFxkKylcXHMqbGluZXM/L2kpO1xuICAgIGNvbnN0IGZpbGVNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvKFxcZCspXFxzKig/OmZpbGVzP3xtYXRjaGVzPykvaSk7XG4gICAgY29uc3QgcmVhZE1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC9yZWFkLio/KFxcZCspXFxzKmxpbmVzPy9pKTtcblxuICAgIC8vIENoZWNrIGlmIGNvbnRlbnQgY29udGFpbnMgYSBmaWxlIHBhdGggb3IgY29tbWFuZCB0aGF0IHNob3VsZCBiZSBwcmVzZXJ2ZWRcbiAgICBjb25zdCBoYXNQYXRoID0gLyg/Ol58XFxzKSg/OlxcL1tcXHcuLy1dK3xbXFx3Li8tXStcXC9bXFx3Li8tXSspLy50ZXN0KHNhbml0aXplZCk7XG4gICAgY29uc3QgaGFzQ29tbWFuZCA9IC9eXFxzKlxcJFxccysuK3xjb21tYW5kOi9pLnRlc3Qoc2FuaXRpemVkKTtcbiAgICBjb25zdCBpc1BhdGhPckRpciA9IC9eKD86RmlsZXxEaXJlY3Rvcnl8UGF0aCk6XFxzKi9pLnRlc3Qoc2FuaXRpemVkKTtcblxuICAgIGxldCBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgbGV0IHByZXNlcnZlRnVsbCA9IGZhbHNlO1xuXG4gICAgaWYgKHJlYWRNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBSZWFkICR7cmVhZE1hdGNoWzFdfSBsaW5lc2A7XG4gICAgfSBlbHNlIGlmIChsaW5lTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgRm91bmQgJHtsaW5lTWF0Y2hbMV19IGxpbmUke2xpbmVNYXRjaFsxXSA9PT0gJzEnID8gJycgOiAncyd9YDtcbiAgICB9IGVsc2UgaWYgKGZpbGVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2ZpbGVNYXRjaFsxXX0gZmlsZSR7ZmlsZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoc2FuaXRpemVkLm1hdGNoKC9eKHN1Y2Nlc3N8b2t8ZG9uZXxjb21wbGV0ZWR8d3JpdHRlbnxlZGl0ZWR8Y3JlYXRlZCkvaSkpIHtcbiAgICAgIHN1bW1hcnkgPSAn4pyTJztcbiAgICB9IGVsc2UgaWYgKGlzUGF0aE9yRGlyIHx8IGhhc1BhdGggfHwgaGFzQ29tbWFuZCkge1xuICAgICAgLy8gUHJlc2VydmUgZnVsbCBjb250ZW50IGZvciBwYXRocywgZGlyZWN0b3JpZXMsIGFuZCBjb21tYW5kc1xuICAgICAgLy8gT25seSBzaG93IGZpcnN0IGxpbmUgaWYgbXVsdGktbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lID0gc2FuaXRpemVkLnNwbGl0KCdcXG4nKVswXSB8fCBzYW5pdGl6ZWQ7XG4gICAgICBzdW1tYXJ5ID0gZmlyc3RMaW5lO1xuICAgICAgcHJlc2VydmVGdWxsID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRXh0cmFjdCBtZWFuaW5nZnVsIHN1bW1hcnkgZnJvbSBjb250ZW50XG4gICAgICBsZXQgc3VtbWFyeVRleHQgPSBzYW5pdGl6ZWQ7XG5cbiAgICAgIC8vIEhhbmRsZSBcIlN1bW1hcnk6XCIgcHJlZml4IGZyb20gd2ViIHNlYXJjaC9leHRyYWN0IHJlc3VsdHNcbiAgICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvXlN1bW1hcnk6XFxzKiguKykvaSk7XG4gICAgICBpZiAoc3VtbWFyeU1hdGNoKSB7XG4gICAgICAgIHN1bW1hcnlUZXh0ID0gc3VtbWFyeU1hdGNoWzFdITtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIG11bHRpLWxpbmUgY29udGVudCwgdXNlIGZpcnN0IG1lYW5pbmdmdWwgbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lID0gc3VtbWFyeVRleHQuc3BsaXQoJ1xcbicpWzBdPy50cmltKCkgfHwgc3VtbWFyeVRleHQ7XG5cbiAgICAgIC8vIFRyeSB0byBlbmQgYXQgYSBzZW50ZW5jZSBib3VuZGFyeSBmb3IgcmVhZGFiaWxpdHkgKHVwIHRvIDEyMCBjaGFycylcbiAgICAgIGNvbnN0IG1heExlbiA9IDEyMDtcbiAgICAgIGlmIChmaXJzdExpbmUubGVuZ3RoID4gbWF4TGVuKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIHNlbnRlbmNlIGVuZCB3aXRoaW4gbGltaXRcbiAgICAgICAgY29uc3Qgc2VudGVuY2VFbmQgPSBmaXJzdExpbmUuc2xpY2UoMCwgbWF4TGVuKS5zZWFyY2goL1suIT87XVxcc3xbLiE/O10kLyk7XG4gICAgICAgIGlmIChzZW50ZW5jZUVuZCA+IDMwKSB7XG4gICAgICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZS5zbGljZSgwLCBzZW50ZW5jZUVuZCArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5vIGdvb2Qgc2VudGVuY2UgYnJlYWssIHRydW5jYXRlIGF0IHdvcmQgYm91bmRhcnlcbiAgICAgICAgICBjb25zdCB0cnVuY2F0ZWQgPSBmaXJzdExpbmUuc2xpY2UoMCwgbWF4TGVuKTtcbiAgICAgICAgICBjb25zdCBsYXN0U3BhY2UgPSB0cnVuY2F0ZWQubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICBzdW1tYXJ5ID0gbGFzdFNwYWNlID4gNjAgPyB0cnVuY2F0ZWQuc2xpY2UoMCwgbGFzdFNwYWNlKSArICfigKYnIDogdHJ1bmNhdGVkICsgJ+KApic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1bW1hcnkgPSBmaXJzdExpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgY29sbGFwc2VkIHJlc3VsdCBmb3IgQ3RybCtPIGV4cGFuc2lvbiAodXNlIHNhbml0aXplZCBjb250ZW50KVxuICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMucHVzaCh7XG4gICAgICB0b29sTmFtZTogdGhpcy5sYXN0VG9vbE5hbWUgfHwgJ3Rvb2wnLFxuICAgICAgY29udGVudDogc2FuaXRpemVkLFxuICAgICAgc3VtbWFyeSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9KTtcblxuICAgIC8vIFRyaW0gdG8gbWF4IHNpemVcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5sZW5ndGggPiB0aGlzLm1heENvbGxhcHNlZFJlc3VsdHMpIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMuc2hpZnQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvcmVkU3VtbWFyeSA9IHRoaXMuY29sb3JSZXN1bHRTdW1tYXJ5KHN1bW1hcnkpO1xuICAgIC8vIE9ubHkgc2hvdyBleHBhbmQgaGludCBpZiBjb250ZW50IGlzIGFjdHVhbGx5IGNvbGxhcHNlZCAobXVsdGktbGluZSBvciB3YXMgdHJ1bmNhdGVkKVxuICAgIGNvbnN0IGhhc01vcmVDb250ZW50ID0gc2FuaXRpemVkLmluY2x1ZGVzKCdcXG4nKSB8fCBzdW1tYXJ5LmVuZHNXaXRoKCfigKYnKSB8fCAoIXByZXNlcnZlRnVsbCAmJiBzYW5pdGl6ZWQubGVuZ3RoID4gc3VtbWFyeS5sZW5ndGgpO1xuICAgIGNvbnN0IGV4cGFuZEhpbnQgPSBoYXNNb3JlQ29udGVudCA/IGAgJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9YCA6ICcnO1xuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29sb3JlZFN1bW1hcnl9JHtleHBhbmRIaW50fVxcbmA7XG4gIH1cblxuICBwcml2YXRlIGNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghc3VtbWFyeSkgcmV0dXJuIHN1bW1hcnk7XG4gICAgY29uc3QgbG93ZXIgPSBzdW1tYXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdmYWlsJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5lcnJvcihzdW1tYXJ5KTtcbiAgICB9XG4gICAgaWYgKHN1bW1hcnkuc3RhcnRzV2l0aCgn4pyTJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3VwZGF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnY3JlYXRlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd3cml0dGVuJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5zdWNjZXNzKHN1bW1hcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhlbWUuaW5mbyhzdW1tYXJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgZWRpdCByZXN1bHQgd2l0aCBlbmhhbmNlZCBpbmxpbmUgZGlmZiBwcmV2aWV3XG4gICAqIFNob3dzOiDijr8g4pyTIFVwZGF0ZWQgKGZpbGVuYW1lKSAtIHJlbW92ZWQgWCwgYWRkZWQgWSBjaGFyc1xuICAgKiAgICAgICAg4pSc4pSA4pSQXG4gICAqICAgICAgICDilIIgLSBvbGQgY29udGVudC4uLlxuICAgKiAgICAgICAg4pSCICsgbmV3IGNvbnRlbnQuLi5cbiAgICogICAgICAgIOKUlOKUgFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRFZGl0UmVzdWx0V2l0aERpZmYoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBpbmRlbnQgPSAnICAnO1xuXG4gICAgLy8gRXh0cmFjdCBmaWxlIHBhdGggZnJvbSBjb250ZW50IHdpdGggYmV0dGVyIHJlZ2V4XG4gICAgY29uc3QgZmlsZVBhdGhNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyg/OmZpbGVbX1xcc10qcGF0aHxwYXRoKTpcXHMqXCIoW15cIl0rKVwiL2kpIHx8IFxuICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQubWF0Y2goL3VwZGF0ZWQuKj8oW1xcL1xcdy5cXC1dK1xcLlxcdyspL2kpIHx8XG4gICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudC5tYXRjaCgvZWRpdGVkLio/KFtcXC9cXHcuXFwtXStcXC5cXHcrKS9pKTtcbiAgICBjb25zdCBmaWxlTmFtZSA9IGZpbGVQYXRoTWF0Y2ggPyBmaWxlUGF0aE1hdGNoWzFdIS5zcGxpdCgnLycpLnBvcCgpIDogJ2ZpbGUnO1xuICAgIGNvbnN0IGZ1bGxQYXRoID0gZmlsZVBhdGhNYXRjaCA/IGZpbGVQYXRoTWF0Y2hbMV0gOiBmaWxlTmFtZTtcblxuICAgIC8vIFRyeSB0byBleHRyYWN0IG9sZC9uZXcgY29udGVudCBmcm9tIGVkaXQgcmVzdWx0IHdpdGggYmV0dGVyIHBhcnNpbmdcbiAgICBjb25zdCBvbGRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL29sZFtfXFxzXSpzdHJpbmdbOlxcc10qKFtcIidgXSkoW15cXHgwMV0rPylcXDEvaSkgfHwgXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQubWF0Y2goL29sZFtfXFxzXSpzdHJpbmdbOlxcc10qW1wiJ10/KFteXCInXFxuXSspW1wiJ10/L2kpO1xuICAgIGNvbnN0IG5ld01hdGNoID0gY29udGVudC5tYXRjaCgvbmV3W19cXHNdKnN0cmluZ1s6XFxzXSooW1wiJ2BdKShbXlxceDAxXSs/KVxcMS9pKSB8fFxuICAgICAgICAgICAgICAgICAgICBjb250ZW50Lm1hdGNoKC9uZXdbX1xcc10qc3RyaW5nWzpcXHNdKltcIiddPyhbXlwiJ1xcbl0rKVtcIiddPy9pKTtcblxuICAgIGNvbnN0IG9sZENvbnRlbnQgPSBvbGRNYXRjaD8uWzJdIHx8IG9sZE1hdGNoPy5bMV0gfHwgJyc7XG4gICAgY29uc3QgbmV3Q29udGVudCA9IG5ld01hdGNoPy5bMl0gfHwgbmV3TWF0Y2g/LlsxXSB8fCAnJztcblxuICAgIC8vIENhbGN1bGF0ZSBkaWZmIHN0YXRzXG4gICAgY29uc3Qgb2xkTGVuID0gb2xkQ29udGVudC5sZW5ndGg7XG4gICAgY29uc3QgbmV3TGVuID0gbmV3Q29udGVudC5sZW5ndGg7XG4gICAgY29uc3QgZGlmZlN0YXQgPSBvbGRMZW4gfHwgbmV3TGVuXG4gICAgICA/IHRoZW1lLnVpLm11dGVkKGAgKCR7dGhlbWUuZXJyb3IoYC0ke29sZExlbn1gKX0gJHt0aGVtZS5zdWNjZXNzKGArJHtuZXdMZW59YCl9IGNoYXJzKWApXG4gICAgICA6ICcnO1xuXG4gICAgLy8gTWFpbiBzdW1tYXJ5IGxpbmUgd2l0aCBlbmhhbmNlZCBzdHlsaW5nXG4gICAgbGluZXMucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke3RoZW1lLnN1Y2Nlc3MoJ+KckycpfSAke3RoZW1lLnN1Y2Nlc3MoYFVwZGF0ZWRgKX0gJHt0aGVtZS5maWxlPy5wYXRoID8gdGhlbWUuZmlsZS5wYXRoKGAke2Z1bGxQYXRofWApIDogdGhlbWUud2FybmluZyhgJHtmdWxsUGF0aH1gKX0ke2RpZmZTdGF0fWApO1xuXG4gICAgLy8gU2hvdyBlbmhhbmNlZCBkaWZmIHZpc3VhbGl6YXRpb25cbiAgICBpZiAob2xkQ29udGVudCB8fCBuZXdDb250ZW50KSB7XG4gICAgICBjb25zdCBtYXhEaWZmTGVuID0gTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDIwLCA4MCk7XG4gICAgICBcbiAgICAgIC8vIFN0YXJ0IGRpZmYgYm94XG4gICAgICBsaW5lcy5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilJzilIDilJAnKX1gKTtcblxuICAgICAgaWYgKG9sZENvbnRlbnQpIHtcbiAgICAgICAgY29uc3Qgb2xkUHJldmlldyA9IG9sZENvbnRlbnQubGVuZ3RoID4gbWF4RGlmZkxlblxuICAgICAgICAgID8gb2xkQ29udGVudC5zbGljZSgwLCBtYXhEaWZmTGVuKSArICfigKYnXG4gICAgICAgICAgOiBvbGRDb250ZW50O1xuICAgICAgICAvLyBDbGVhbiB1cCB0aGUgcHJldmlldyAocmVtb3ZlIGVzY2FwZWQgcXVvdGVzLCBldGMuKVxuICAgICAgICBjb25zdCBjbGVhbk9sZCA9IG9sZFByZXZpZXcucmVwbGFjZSgvXFxcXFwiL2csICdcIicpLnJlcGxhY2UoL1xcXFxuL2csICfihrInKTtcbiAgICAgICAgbGluZXMucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZCgn4pSCJyl9ICR7dGhlbWUuZXJyb3IoJ+KUgCAnICsgY2xlYW5PbGQpfWApO1xuICAgICAgfVxuXG4gICAgICBpZiAobmV3Q29udGVudCkge1xuICAgICAgICBjb25zdCBuZXdQcmV2aWV3ID0gbmV3Q29udGVudC5sZW5ndGggPiBtYXhEaWZmTGVuXG4gICAgICAgICAgPyBuZXdDb250ZW50LnNsaWNlKDAsIG1heERpZmZMZW4pICsgJ+KApidcbiAgICAgICAgICA6IG5ld0NvbnRlbnQ7XG4gICAgICAgIGNvbnN0IGNsZWFuTmV3ID0gbmV3UHJldmlldy5yZXBsYWNlKC9cXFxcXCIvZywgJ1wiJykucmVwbGFjZSgvXFxcXG4vZywgJ+KGsicpO1xuICAgICAgICBsaW5lcy5wdXNoKGAke2luZGVudH0ke3RoZW1lLnVpLm11dGVkKCfilIInKX0gJHt0aGVtZS5zdWNjZXNzKCcrICcgKyBjbGVhbk5ldyl9YCk7XG4gICAgICB9XG5cbiAgICAgIC8vIEVuZCBkaWZmIGJveFxuICAgICAgbGluZXMucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZCgn4pSU4pSAJyl9YCk7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgZm9yIGV4cGFuc2lvbiB3aXRoIGVuaGFuY2VkIG1ldGFkYXRhXG4gICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5wdXNoKHtcbiAgICAgIHRvb2xOYW1lOiAnZWRpdCcsXG4gICAgICBjb250ZW50LFxuICAgICAgc3VtbWFyeTogYFVwZGF0ZWQgJHtmaWxlTmFtZX0gKC0ke29sZExlbn0sICske25ld0xlbn0pYCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIG1ldGFkYXRhOiB7XG4gICAgICAgIGZpbGVQYXRoOiBmdWxsUGF0aCxcbiAgICAgICAgb2xkTGVuZ3RoOiBvbGRMZW4sXG4gICAgICAgIG5ld0xlbmd0aDogbmV3TGVuLFxuICAgICAgICBkaWZmOiB7IG9sZDogb2xkQ29udGVudCwgbmV3OiBuZXdDb250ZW50IH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aCA+IHRoaXMubWF4Q29sbGFwc2VkUmVzdWx0cykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cGFuZEhpbnQgPSBjb250ZW50Lmxlbmd0aCA+IDEwMCB8fCBvbGRMZW4gPiA1MCB8fCBuZXdMZW4gPiA1MCA/IFxuICAgICAgYCAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1gIDogJyc7XG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgZXhwYW5kSGludCArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgcmVzcG9uc2Ugd2l0aCBidWxsZXQgb24gZmlyc3QgbGluZVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0UmVzcG9uc2UoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIHRleHQgd2l0aCBhIHNpbmdsZSBidWxsZXQgb24gdGhlIGZpcnN0IGxpbmUgYW5kIHRpZHkgaW5kZW50YXRpb24gZm9yIHJlYWRhYmlsaXR5LlxuICAgKiBQcmV2ZW50cyBhd2t3YXJkIG1pZC13b3JkIHRlcm1pbmFsIHdyYXBwaW5nIGJ5IGhhbmRsaW5nIHRoZSBsYXlvdXQgb3Vyc2VsdmVzLlxuICAgKiBTdXBwb3J0cyBmdWxsIG1hcmtkb3duIGZvcm1hdHRpbmc6IGhlYWRlcnMsIGxpc3RzLCBjb2RlIGJsb2NrcywgaW5saW5lIHN0eWxlcy5cbiAgICovXG4gIHByaXZhdGUgd3JhcEJ1bGxldFRleHQoXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgbWF4V2lkdGg/OiBudW1iZXI7IGxhYmVsPzogc3RyaW5nOyBsYWJlbENvbG9yPzogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZzsgdGhvdWdodFR5cGU/OiBzdHJpbmcgfSA9IHt9XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgbGV0IGNsZWFuZWQgPSBjb250ZW50LnJlcGxhY2UoL15b4o+64oCi4peLXVxccyovLCAnJykudHJpbUVuZCgpO1xuICAgIGlmICghY2xlYW5lZC50cmltKCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyBOb3JtYWxpemUgY29udGVudDogYWRkIHNwYWNlcyBhZnRlciBoZWFkZXJzLCBmaXggY29tbW9uIGZvcm1hdHRpbmcgaXNzdWVzXG4gICAgLy8gRml4IGhlYWRlcnMgd2l0aG91dCBzcGFjZTogIyNIRUFESU5HIC0+ICMjIEhFQURJTkcgKGluY2x1ZGluZyBlbW9qaSlcbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9eKCN7MSw2fSkoW0EtWvCfmoDimpTvuI/wn46v8J+UkPCfk6binIXinYzimqHwn5KA8J+UpfCfm6HvuI/wn5Kj8J+Olu+4j+KtkF0pL2dtLCAnJDEgJDInKTtcbiAgICAvLyBGaXggbnVtYmVyZWQgaGVhZGVyczogIyMjMSBFbGl0ZSAtPiAjIyMgMS4gRWxpdGVcbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9eKCN7MSw2fSkoXFxkKylcXHMrL2dtLCAnJDEgJDIuICcpO1xuICAgIC8vIEZpeCBkYXNoIGxpc3RzIHdpdGhvdXQgc3BhY2U6IC1SU0EyMDQ4IC0+IC0gUlNBMjA0OFxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoL14tKFtBLVpdKS9nbSwgJy0gJDEnKTtcbiAgICAvLyBGaXggbnVtYmVyZWQgbGlzdHMgd2l0aG91dCBzcGFjZTogMS5JdGVtIC0+IDEuIEl0ZW1cbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC9eKFxcZCtcXC4pKFtBLVpdKS9nbSwgJyQxICQyJyk7XG4gICAgLy8gQWRkIGxpbmUgYnJlYWtzIGJlZm9yZSBoZWFkZXJzIHRoYXQgYXJlIGpvaW5lZCB0byBwcmV2aW91cyB0ZXh0XG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvKFsuIT8pXSkoXFxzKikoI3sxLDZ9XFxzKS9nLCAnJDFcXG5cXG4kMycpO1xuICAgIC8vIEFkZCBsaW5lIGJyZWFrcyBiZXR3ZWVuIHNlY3Rpb25zICh0ZXh0IGZvbGxvd2VkIGltbWVkaWF0ZWx5IGJ5ICMjKVxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoLyhbYS16XSkoXFxzKikoI3syLDZ9XFxzKS9naSwgJyQxXFxuXFxuJDMnKTtcbiAgICAvLyBBZGQgbGluZSBicmVha3MgYmV0d2VlbiBlbW9qaSBidWxsZXRzIGFuZCBuZXh0IHNlY3Rpb25cbiAgICBjbGVhbmVkID0gY2xlYW5lZC5yZXBsYWNlKC8oW1xcdTI3MDVcXHUyNzRDXFx1MjcxNFxcdTI3MThcXHUyNkEwXFx1RDgzQy1cXHVEQkZGXFx1REMwMC1cXHVERkZGXSspXFxzKigjezEsNn0pL2csICckMVxcblxcbiQyJyk7XG4gICAgLy8gRml4IGNvZGUgYmxvY2tzIHRoYXQgcnVuIHRvZ2V0aGVyOiBiYXNoIyAtPiBiYXNoXFxuI1xuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoLyhiYXNofHNofHB5dGhvbnxqYXZhc2NyaXB0fHR5cGVzY3JpcHQpIy9naSwgJyQxXFxuYGBgXFxuIycpO1xuICAgIC8vIEFkZCBuZXdsaW5lcyBiZWZvcmUgY29kZSBibG9jayBtYXJrZXJzXG4gICAgY2xlYW5lZCA9IGNsZWFuZWQucmVwbGFjZSgvKFteXFxuXSlgYGAoXFx3Kyk/L2csICckMVxcbmBgYCQyJyk7XG4gICAgLy8gRml4IHRhYmxlcyB0aGF0IHJ1biB0b2dldGhlclxuICAgIGNsZWFuZWQgPSBjbGVhbmVkLnJlcGxhY2UoLyhcXHcrKVxccysoWy3ilIBdezMsfSlcXHMrKFxcdyspL2csICckMVxcbiQyXFxuJDMnKTtcblxuICAgIC8vIFJlc2VydmUgYSBsaXR0bGUgbWFyZ2luIHRvIHJlZHVjZSB0ZXJtaW5hbCB3cmFwIGppdHRlclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDIwLCBNYXRoLm1pbihvcHRpb25zLm1heFdpZHRoID8/IGF2YWlsYWJsZVdpZHRoIC0gMiwgYXZhaWxhYmxlV2lkdGgpKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBvcHRpb25zLmxhYmVsXG4gICAgICA/IGAke29wdGlvbnMubGFiZWxDb2xvciA/IG9wdGlvbnMubGFiZWxDb2xvcihvcHRpb25zLmxhYmVsKSA6IG9wdGlvbnMubGFiZWx9JHt0aGVtZS51aS5tdXRlZCgnIMK3ICcpfWBcbiAgICAgIDogJyc7XG4gICAgY29uc3QgYnVsbGV0UHJlZml4ID0gYCR7YnVsbGV0fSAke2xhYmVsVGV4dH1gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKGAke2J1bGxldH0gYCkpO1xuXG4gICAgY29uc3QgbGluZXMgPSBjbGVhbmVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGZpcnN0Tm9uRW1wdHkgPSB0cnVlO1xuICAgIGxldCBpbkNvZGVCbG9jayA9IGZhbHNlO1xuICAgIGxldCBjb2RlQmxvY2tMYW5nID0gJyc7XG4gICAgY29uc3QgY29kZUJsb2NrQnVmZmVyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCByYXdMaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCB0cmltbWVkTGluZSA9IHJhd0xpbmUudHJpbSgpO1xuXG4gICAgICAvLyBIYW5kbGUgY29kZSBibG9jayBmZW5jZXNcbiAgICAgIGlmICh0cmltbWVkTGluZS5zdGFydHNXaXRoKCdgYGAnKSkge1xuICAgICAgICBpZiAoIWluQ29kZUJsb2NrKSB7XG4gICAgICAgICAgLy8gU3RhcnQgY29kZSBibG9ja1xuICAgICAgICAgIGluQ29kZUJsb2NrID0gdHJ1ZTtcbiAgICAgICAgICBjb2RlQmxvY2tMYW5nID0gdHJpbW1lZExpbmUuc2xpY2UoMykudHJpbSgpLnRvVXBwZXJDYXNlKCkgfHwgJ0NPREUnO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIEVuZCBjb2RlIGJsb2NrIC0gcmVuZGVyIGl0XG4gICAgICAgICAgaW5Db2RlQmxvY2sgPSBmYWxzZTtcbiAgICAgICAgICBjb25zdCBjb2RlSW5kZW50ID0gZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudDtcbiAgICAgICAgICBpZiAoZmlyc3ROb25FbXB0eSkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYCR7YnVsbGV0UHJlZml4fSR7dGhlbWUudWkubXV0ZWQoYOKUgOKUgOKUgCAke2NvZGVCbG9ja0xhbmd9IOKUgOKUgOKUgGApfWApO1xuICAgICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZChg4pSA4pSA4pSAICR7Y29kZUJsb2NrTGFuZ30g4pSA4pSA4pSAYCl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGZvciAoY29uc3QgY29kZUxpbmUgb2YgY29kZUJsb2NrQnVmZmVyKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZCgn4pSCJyl9ICR7dGhlbWUudWkuY29kZShjb2RlTGluZSl9YCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNvZGVCbG9ja0J1ZmZlci5sZW5ndGggPSAwO1xuICAgICAgICAgIGNvZGVCbG9ja0xhbmcgPSAnJztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoaW5Db2RlQmxvY2spIHtcbiAgICAgICAgY29kZUJsb2NrQnVmZmVyLnB1c2gocmF3TGluZSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgZW1wdHkgbGluZXNcbiAgICAgIGlmICghdHJpbW1lZExpbmUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpOyAvLyBQcmVzZXJ2ZSBpbnRlbnRpb25hbCBzcGFjaW5nIGJldHdlZW4gcGFyYWdyYXBoc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gSGFuZGxlIG1hcmtkb3duIGhlYWRlcnMgKCMgIyMgIyMjIGV0Yy4pIC0gYWxzbyBoYW5kbGUgIyNIRUFESU5HIHdpdGhvdXQgc3BhY2VcbiAgICAgIGNvbnN0IGhlYWRlck1hdGNoID0gdHJpbW1lZExpbmUubWF0Y2goL14oI3sxLDZ9KVxccyooLispJC8pO1xuICAgICAgaWYgKGhlYWRlck1hdGNoICYmIGhlYWRlck1hdGNoWzJdICYmICFoZWFkZXJNYXRjaFsyXS5zdGFydHNXaXRoKCcjJykpIHtcbiAgICAgICAgY29uc3QgbGV2ZWwgPSBoZWFkZXJNYXRjaFsxXT8ubGVuZ3RoID8/IDE7XG4gICAgICAgIGNvbnN0IGhlYWRlclRleHQgPSBoZWFkZXJNYXRjaFsyXT8udHJpbSgpID8/ICcnO1xuICAgICAgICAvLyBTa2lwIGlmIGl0J3MganVzdCBoYXNoZXMgb3IgaWYgY29udGVudCBpcyB0b28gc2hvcnRcbiAgICAgICAgaWYgKGhlYWRlclRleHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIC8vIEFkZCBibGFuayBsaW5lIGJlZm9yZSBoZWFkZXJzIGZvciBiZXR0ZXIgdmlzdWFsIHNlcGFyYXRpb25cbiAgICAgICAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDAgJiYgcmVzdWx0W3Jlc3VsdC5sZW5ndGggLSAxXSAhPT0gJycpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKCcnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgY29uc3QgZm9ybWF0dGVkSGVhZGVyID0gdGhpcy5mb3JtYXRNYXJrZG93bkhlYWRlcihoZWFkZXJUZXh0LCBsZXZlbCwgbWF4V2lkdGgsIGZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnQpO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGZvcm1hdHRlZEhlYWRlcik7XG4gICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEhhbmRsZSBkaXZpZGVycyAoLS0tIG9yICoqKilcbiAgICAgIGlmICgvXlstKl9dezMsfSQvLnRlc3QodHJpbW1lZExpbmUpKSB7XG4gICAgICAgIGNvbnN0IGRpdmlkZXJXaWR0aCA9IE1hdGgubWluKG1heFdpZHRoIC0gaW5kZW50Lmxlbmd0aCwgNTApO1xuICAgICAgICByZXN1bHQucHVzaChgJHtpbmRlbnR9JHt0aGVtZS51aS5tdXRlZCgn4pSAJy5yZXBlYXQoZGl2aWRlcldpZHRoKSl9YCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgbWFya2Rvd24gdGFibGVzIChsaW5lcyBzdGFydGluZyB3aXRoIHwpXG4gICAgICBpZiAodHJpbW1lZExpbmUuc3RhcnRzV2l0aCgnfCcpIHx8IC9eWy18Ol0rJC8udGVzdCh0cmltbWVkTGluZSkpIHtcbiAgICAgICAgLy8gVGFibGUgbGluZSAtIHJlbmRlciB3aXRoIGZpeGVkIHdpZHRoIGZvbnQgc3R5bGluZ1xuICAgICAgICBjb25zdCB0YWJsZVByZWZpeCA9IGZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnQ7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke3RhYmxlUHJlZml4fSR7dGhlbWUudWkubXV0ZWQodHJpbW1lZExpbmUpfWApO1xuICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBIYW5kbGUgbGlzdCBpdGVtcyAoLSBvciAqIG9yIG51bWJlcmVkKSAtIGFsc28gaGFuZGxlIC1JdGVtIHdpdGhvdXQgc3BhY2VcbiAgICAgIGNvbnN0IGxpc3RNYXRjaCA9IHRyaW1tZWRMaW5lLm1hdGNoKC9eKFxcKnwtfOKAonxcXGQrXFwuKVxccyooLispJC8pO1xuICAgICAgaWYgKGxpc3RNYXRjaCAmJiBsaXN0TWF0Y2hbMl0pIHtcbiAgICAgICAgY29uc3QgbGlzdENvbnRlbnQgPSBsaXN0TWF0Y2hbMl0udHJpbSgpO1xuICAgICAgICBjb25zdCBmb3JtYXR0ZWRMaXN0ID0gZm9ybWF0SW5saW5lVGV4dChsaXN0Q29udGVudCk7XG4gICAgICAgIGNvbnN0IGxpc3RCdWxsZXQgPSB0aGVtZS5zZWNvbmRhcnkoJyAg4oCiICcpO1xuICAgICAgICBjb25zdCBsaXN0SW5kZW50ID0gJyAgICAnO1xuXG4gICAgICAgIGlmIChmaXJzdE5vbkVtcHR5KSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYnVsbGV0UHJlZml4LnRyaW1FbmQoKSk7XG4gICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gV3JhcCBsaXN0IGl0ZW0gY29udGVudFxuICAgICAgICBjb25zdCB3b3JkcyA9IGZvcm1hdHRlZExpc3Quc3BsaXQoL1xccysvKTtcbiAgICAgICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICAgICAgbGV0IGlzRmlyc3RMaXN0TGluZSA9IHRydWU7XG4gICAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICAgICAgY29uc3QgcHJlZml4TGVuID0gdGhpcy52aXNpYmxlTGVuZ3RoKGlzRmlyc3RMaXN0TGluZSA/IGxpc3RCdWxsZXQgOiBsaXN0SW5kZW50KTtcbiAgICAgICAgICBpZiAocHJlZml4TGVuICsgdGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiBtYXhXaWR0aCAtIDIgJiYgY3VycmVudCkge1xuICAgICAgICAgICAgcmVzdWx0LnB1c2goYCR7aXNGaXJzdExpc3RMaW5lID8gbGlzdEJ1bGxldCA6IGxpc3RJbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICAgICAgICBpc0ZpcnN0TGlzdExpbmUgPSBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtpc0ZpcnN0TGlzdExpbmUgPyBsaXN0QnVsbGV0IDogbGlzdEluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlZ3VsYXIgcGFyYWdyYXBoIC0gYXBwbHkgbWFya2Rvd24gZm9ybWF0dGluZ1xuICAgICAgY29uc3QgZm9ybWF0dGVkTGluZSA9IGZvcm1hdElubGluZVRleHQodHJpbW1lZExpbmUpO1xuXG4gICAgICBjb25zdCB3b3JkcyA9IGZvcm1hdHRlZExpbmUuc3BsaXQoL1xccysvKTtcbiAgICAgIGxldCBjdXJyZW50ID0gJyc7XG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgICAgY29uc3QgcHJlZml4TGVuZ3RoID0gdGhpcy52aXNpYmxlTGVuZ3RoKGZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnQpO1xuICAgICAgICBpZiAocHJlZml4TGVuZ3RoICsgdGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiBtYXhXaWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgbWFya2Rvd24gaGVhZGVyIHdpdGggQ2xhdWRlIENvZGUgc3R5bGUgdmlzdWFsIGhpZXJhcmNoeS5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0TWFya2Rvd25IZWFkZXIodGV4dDogc3RyaW5nLCBsZXZlbDogbnVtYmVyLCBtYXhXaWR0aDogbnVtYmVyLCBwcmVmaXg6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZm9ybWF0dGVkVGV4dCA9IGZvcm1hdElubGluZVRleHQodGV4dCk7XG5cbiAgICBzd2l0Y2ggKGxldmVsKSB7XG4gICAgICBjYXNlIDE6IHtcbiAgICAgICAgLy8gSDE6IEJvbGQgY3lhbiB3aXRoIGRlY29yYXRpdmUgYm9yZGVyc1xuICAgICAgICBjb25zdCBoZWFkZXJXaWR0aCA9IE1hdGgubWluKG1heFdpZHRoIC0gNCwgdGhpcy52aXNpYmxlTGVuZ3RoKGZvcm1hdHRlZFRleHQpICsgNCk7XG4gICAgICAgIGNvbnN0IHRvcEJvcmRlciA9IHRoZW1lLnByaW1hcnkoJ+KVkCcucmVwZWF0KGhlYWRlcldpZHRoKSk7XG4gICAgICAgIGNvbnN0IGhlYWRlckxpbmUgPSB0aGVtZS5wcmltYXJ5LmJvbGQoYOKXhiAke2Zvcm1hdHRlZFRleHR9YCk7XG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHt0b3BCb3JkZXJ9XFxuICAke2hlYWRlckxpbmV9XFxuICAke3RvcEJvcmRlcn1gO1xuICAgICAgfVxuICAgICAgY2FzZSAyOiB7XG4gICAgICAgIC8vIEgyOiBCb2xkIHdpdGggdW5kZXJsaW5lIGFjY2VudFxuICAgICAgICBjb25zdCBoZWFkZXJMaW5lID0gdGhlbWUuaW5mby5ib2xkKGDilrggJHtmb3JtYXR0ZWRUZXh0fWApO1xuICAgICAgICBjb25zdCB1bmRlcmxpbmUgPSB0aGVtZS5pbmZvKCfilIAnLnJlcGVhdChNYXRoLm1pbihtYXhXaWR0aCAtIDQsIHRoaXMudmlzaWJsZUxlbmd0aChmb3JtYXR0ZWRUZXh0KSArIDIpKSk7XG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHtoZWFkZXJMaW5lfVxcbiAgJHt1bmRlcmxpbmV9YDtcbiAgICAgIH1cbiAgICAgIGNhc2UgMzoge1xuICAgICAgICAvLyBIMzogQm9sZCB3aXRoIGJ1bGxldCBwcmVmaXhcbiAgICAgICAgcmV0dXJuIGAke3ByZWZpeH0ke3RoZW1lLnNlY29uZGFyeS5ib2xkKGDil4cgJHtmb3JtYXR0ZWRUZXh0fWApfWA7XG4gICAgICB9XG4gICAgICBjYXNlIDQ6IHtcbiAgICAgICAgLy8gSDQ6IERpbW1lciBib2xkXG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHt0aGVtZS51aS5tdXRlZCgn4pa5Jyl9ICR7dGhlbWUuYm9sZChmb3JtYXR0ZWRUZXh0KX1gO1xuICAgICAgfVxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBINSs6IFNpbXBsZSBib2xkXG4gICAgICAgIHJldHVybiBgJHtwcmVmaXh9JHt0aGVtZS5ib2xkKGZvcm1hdHRlZFRleHQpfWA7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGlua2luZyBibG9jayB3aXRoIHByZW1pdW0gdmlzdWFsIGRlc2lnbi5cbiAgICogVXNlcyBhIGRpc3RpbmN0IHZpc3VhbCBzdHlsZSB0byBjbGVhcmx5IHNlcGFyYXRlIHRoaW5raW5nIGZyb20gcmVzcG9uc2VzLlxuICAgKiBFbmhhbmNlZCB3aXRoIGdyYWRpZW50IGxhYmVscywgYmV0dGVyIHR5cG9ncmFwaHksIGFuZCB2aXN1YWwgaGllcmFyY2h5LlxuICAgKlxuICAgKiBJbiBwbGFpbiBvdXRwdXQgbW9kZSB3ZSBrZWVwIGl0IHNpbXBsZSBhbmQgaW5saW5lIHdpdGggdGhlIHJlc3Qgb2YgdGhlXG4gICAqIHN0cmVhbSBzbyB0cmFuc2NyaXB0cyByZW1haW4gZWFzeSB0byBzY2FuLlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUaGlua2luZ0Jsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkgcmV0dXJuICcnO1xuXG4gICAgLy8gRGV0ZWN0IHRob3VnaHQgdHlwZSBmb3IgYmV0dGVyIGxhYmVsaW5nIGFuZCB2aXN1YWwgc3R5bGluZ1xuICAgIGNvbnN0IGxvd2VyID0gY29udGVudC50b0xvd2VyQ2FzZSgpO1xuICAgIGxldCBsYWJlbCA9ICd0aGlua2luZyc7XG4gICAgbGV0IGxhYmVsQ29sb3IgPSB0aGVtZS5uZW9uLmN5YW47XG4gICAgbGV0IGxhYmVsSWNvbiA9ICfwn5KtJztcbiAgICBsZXQgdGhvdWdodFR5cGUgPSAnZGVmYXVsdCc7XG5cbiAgICAvLyBEZXRlY3QgaW5pdGlhbCBhY2tub3dsZWRnZW1lbnRcbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2Fja25vd2xlZGdlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3VuZGVyc3RhbmQnKSB8fFxuICAgICAgICBsb3dlci5pbmNsdWRlcyhcInVzZXIgd2FudHNcIikgfHwgbG93ZXIuaW5jbHVkZXMoXCJ1c2VyIGlzIGFza2luZ1wiKSB8fFxuICAgICAgICBsb3dlci5pbmNsdWRlcyhcInRoZSByZXF1ZXN0XCIpIHx8IGxvd2VyLmluY2x1ZGVzKFwiaSdsbCBoZWxwXCIpKSB7XG4gICAgICBsYWJlbCA9ICd1bmRlcnN0b29kJztcbiAgICAgIGxhYmVsQ29sb3IgPSB0aGVtZS5zdWNjZXNzID8/IHRoZW1lLm5lb24uZ3JlZW47XG4gICAgICBsYWJlbEljb24gPSAn4pyFJztcbiAgICAgIHRob3VnaHRUeXBlID0gJ2Fja25vd2xlZGdlbWVudCc7XG4gICAgfVxuICAgIC8vIERldGVjdCBwbGFubmluZyB0aG91Z2h0c1xuICAgIGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdwbGFuJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3N0ZXBzJykgfHxcbiAgICAgICAgICAgICBsb3dlci5pbmNsdWRlcygnZmlyc3QnKSB8fCBsb3dlci5pbmNsdWRlcygndGhlbicpIHx8XG4gICAgICAgICAgICAgbG93ZXIuaW5jbHVkZXMoJ2FwcHJvYWNoJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3N0cmF0ZWd5JykpIHtcbiAgICAgIGxhYmVsID0gJ3BsYW5uaW5nJztcbiAgICAgIGxhYmVsQ29sb3IgPSB0aGVtZS5pbmZvID8/IHRoZW1lLm5lb24uYmx1ZTtcbiAgICAgIGxhYmVsSWNvbiA9ICfwn5e677iPJztcbiAgICAgIHRob3VnaHRUeXBlID0gJ3BsYW5uaW5nJztcbiAgICB9XG4gICAgLy8gRGV0ZWN0IGFuYWx5c2lzL3JlYXNvbmluZ1xuICAgIGVsc2UgaWYgKGxvd2VyLmluY2x1ZGVzKCdhbmFseXppbmcnKSB8fCBsb3dlci5pbmNsdWRlcygnZXhhbWluaW5nJykgfHxcbiAgICAgICAgICAgICBsb3dlci5pbmNsdWRlcygnbG9va2luZyBhdCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdyZXZpZXdpbmcnKSkge1xuICAgICAgbGFiZWwgPSAnYW5hbHl6aW5nJztcbiAgICAgIGxhYmVsQ29sb3IgPSB0aGVtZS53YXJuaW5nID8/IHRoZW1lLm5lb24ub3JhbmdlO1xuICAgICAgbGFiZWxJY29uID0gJ/CflI0nO1xuICAgICAgdGhvdWdodFR5cGUgPSAnYW5hbHlzaXMnO1xuICAgIH1cbiAgICAvLyBEZXRlY3QgdG9vbCBzZWxlY3Rpb24vZXhlY3V0aW9uIHRob3VnaHRzXG4gICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ3Rvb2wnKSB8fCBsb3dlci5pbmNsdWRlcygncmVhZCcpIHx8IFxuICAgICAgICAgICAgIGxvd2VyLmluY2x1ZGVzKCdlZGl0JykgfHwgbG93ZXIuaW5jbHVkZXMoJ3NlYXJjaCcpIHx8XG4gICAgICAgICAgICAgbG93ZXIuaW5jbHVkZXMoJ2Jhc2gnKSB8fCBsb3dlci5pbmNsdWRlcygnZXhlY3V0ZScpKSB7XG4gICAgICBsYWJlbCA9ICdleGVjdXRpbmcnO1xuICAgICAgbGFiZWxDb2xvciA9IHRoZW1lLnRvb2xDb2xvcnMuZGVmYXVsdCA/PyB0aGVtZS5uZW9uLnB1cnBsZTtcbiAgICAgIGxhYmVsSWNvbiA9ICfimpnvuI8nO1xuICAgICAgdGhvdWdodFR5cGUgPSAnZXhlY3V0aW9uJztcbiAgICB9XG4gICAgLy8gRGV0ZWN0IGNvbXBsZXRpb24vcmVzdWx0IHRob3VnaHRzXG4gICAgZWxzZSBpZiAobG93ZXIuaW5jbHVkZXMoJ2NvbXBsZXRlJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2RvbmUnKSB8fFxuICAgICAgICAgICAgIGxvd2VyLmluY2x1ZGVzKCdmaW5pc2hlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdyZXN1bHQnKSkge1xuICAgICAgbGFiZWwgPSAnY29tcGxldGVkJztcbiAgICAgIGxhYmVsQ29sb3IgPSB0aGVtZS5zdWNjZXNzID8/IHRoZW1lLm5lb24uZ3JlZW47XG4gICAgICBsYWJlbEljb24gPSAn4pyTJztcbiAgICAgIHRob3VnaHRUeXBlID0gJ2NvbXBsZXRpb24nO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgXG4gICAgLy8gRW5oYW5jZWQgYnVsbGV0IGRlc2lnbiB3aXRoIGljb24gYW5kIGdyYWRpZW50IHN0eWxpbmdcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBjb25zdCBjb2xvcmVkTGFiZWwgPSBsYWJlbENvbG9yKGAke2xhYmVsSWNvbn0gJHtsYWJlbH1gKTtcbiAgICBcbiAgICAvLyBGb3JtYXQgd2l0aCBwcmVtaXVtIHN0eWxpbmdcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChub3JtYWxpemVkLCB7XG4gICAgICBsYWJlbDogY29sb3JlZExhYmVsLFxuICAgICAgbGFiZWxDb2xvcjogKHRleHQpID0+IHRleHQsIC8vIEFscmVhZHkgY29sb3JlZFxuICAgICAgdGhvdWdodFR5cGUsXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHdyYXBUZXh0VG9XaWR0aCh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkgcmV0dXJuIFsnJ107XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICAgIGxldCBjdXJyZW50ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiB3aWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN0cmVhbWluZyBlbGFwc2VkIHRpbWUgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IDNtIDMwc1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIC8gMTAwMCk7XG4gICAgaWYgKGVsYXBzZWQgPCA1KSByZXR1cm4gbnVsbDsgLy8gRG9uJ3Qgc2hvdyBmb3IgdmVyeSBzaG9ydCBkdXJhdGlvbnNcbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihlbGFwc2VkIC8gNjApO1xuICAgIGNvbnN0IHNlY3MgPSBlbGFwc2VkICUgNjA7XG4gICAgaWYgKG1pbnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7bWluc31tICR7c2Vjc31zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3NlY3N9c2A7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBTaG93cyBhIHZpc3VhbCBzZXBhcmF0b3Igd2l0aCBcImhpc3RvcnlcIiBsYWJlbCBhbmQgY3RybCtvIGhpbnRcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMsIDgwKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBgICR7bGFiZWx9IGA7XG4gICAgY29uc3QgcGFkZGluZyA9IE1hdGgubWF4KDAsIG1heFdpZHRoIC0gbGFiZWxUZXh0Lmxlbmd0aCk7XG4gICAgY29uc3QgbGVmdFBhZCA9IE1hdGguZmxvb3IocGFkZGluZyAvIDIpO1xuICAgIGNvbnN0IHJpZ2h0UGFkID0gTWF0aC5jZWlsKHBhZGRpbmcgLyAyKTtcblxuICAgIC8vIENsYXVkZSBDb2RlIHN0eWxlOiDilZDilZAgaGlzdG9yeSDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiAgICBjb25zdCBzZXBhcmF0b3IgPSB0aGVtZS51aS5tdXRlZCgn4pWQJy5yZXBlYXQobGVmdFBhZCkgKyBsYWJlbFRleHQgKyAn4pWQJy5yZXBlYXQocmlnaHRQYWQpKTtcblxuICAgIHJldHVybiBgXFxuJHtzZXBhcmF0b3J9XFxuJHtjb250ZW50fVxcbmA7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAqIFRoaXMgZGlzcGxheXMgYSBjb2xsYXBzZWQgdmlldyB3aXRoIGV4cGFuc2lvbiBoaW50IChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICovXG4gIGFkZENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiB2b2lkIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRDb250ZW50ID0gdGhpcy5mb3JtYXRDb21wYWN0QmxvY2soY29udGVudCwgbGFiZWwpO1xuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogZm9ybWF0dGVkQ29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiB0cnVlLFxuICAgIH0pO1xuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgdGhlIG1vc3QgcmVjZW50IHRvb2wgcmVzdWx0IGlubGluZSAoQ3RybCtPIHN1cHBvcnQpLlxuICAgKiBQb3BzIGZyb20gdGhlIGNvbGxhcHNlZCByZXN1bHRzIHN0YWNrIGFuZCBkaXNwbGF5cyBmdWxsIGNvbnRlbnQuXG4gICAqL1xuICBleHBhbmRMYXN0VG9vbFJlc3VsdCgpOiBib29sZWFuIHtcbiAgICAvLyBGaXJzdCB0cnkgdGhlIG5ldyBzdGFjaywgZmFsbGJhY2sgdG8gb2xkIGxhc3RUb29sUmVzdWx0XG4gICAgY29uc3QgY29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5wb3AoKTtcbiAgICBpZiAoIWNvbGxhcHNlZCAmJiAhdGhpcy5sYXN0VG9vbFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb2xsYXBzZWQ/LmNvbnRlbnQgfHwgdGhpcy5sYXN0VG9vbFJlc3VsdCB8fCAnJztcbiAgICBjb25zdCB0b29sTmFtZSA9IGNvbGxhcHNlZD8udG9vbE5hbWUgfHwgJ3Jlc3VsdCc7XG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBzdHJ1Y3R1cmVkIG91dHB1dCB0aGF0IHNob3VsZG4ndCBiZSB3b3JkLXdyYXBwZWRcbiAgICBjb25zdCBpc1N0cnVjdHVyZWQgPSB0aGlzLmlzU3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWUsIGNvbnRlbnQpO1xuXG4gICAgbGV0IHJlbmRlcmVkOiBzdHJpbmc7XG4gICAgaWYgKGlzU3RydWN0dXJlZCkge1xuICAgICAgLy8gUHJlc2VydmUgc3RydWN0dXJlZCBvdXRwdXQgKGdyZXAsIGJhc2gsIGNvZGUgb3V0cHV0KSAtIGp1c3QgaW5kZW50LCBkb24ndCB3cmFwXG4gICAgICByZW5kZXJlZCA9IHRoaXMuZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWUsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3JtYXQgcHJvc2UvdGV4dCB3aXRoIHRvb2wgbmFtZSBsYWJlbCBhbmQgd29yZCB3cmFwcGluZ1xuICAgICAgY29uc3QgbGFiZWwgPSBgJHt0b29sTmFtZX1gO1xuICAgICAgcmVuZGVyZWQgPSB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQsIHsgbGFiZWwsIGxhYmVsQ29sb3I6IHRoZW1lLmluZm8gfSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiByZW5kZXJlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIC8vIENsZWFyIGxhc3RUb29sUmVzdWx0IGlmIHdlIHVzZWQgdGhlIHN0YWNrXG4gICAgaWYgKGNvbGxhcHNlZCkge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRvb2wgb3V0cHV0IGlzIHN0cnVjdHVyZWQgKGNvZGUsIGdyZXAsIGZpbGUgbGlzdGluZ3MpIHRoYXQgc2hvdWxkbid0IGJlIHdvcmQtd3JhcHBlZC5cbiAgICovXG4gIHByaXZhdGUgaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b29sID0gdG9vbE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAvLyBUb29scyB0aGF0IHByb2R1Y2Ugc3RydWN0dXJlZCBvdXRwdXRcbiAgICBpZiAoWydiYXNoJywgJ2dyZXAnLCAncmVhZCcsICdnbG9iJywgJ2V4ZWN1dGVfYmFzaCcsICdzZWFyY2gnLCAnZmluZCddLmluY2x1ZGVzKHRvb2wpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gQ29udGVudCBwYXR0ZXJucyB0aGF0IGluZGljYXRlIHN0cnVjdHVyZWQgb3V0cHV0XG4gICAgLy8gLSBGaWxlIHBhdGhzIHdpdGggY29sb25zIChncmVwIG91dHB1dCk6IHNyYy9maWxlLnRzOjEyMzpcbiAgICAvLyAtIExpbmUgbnVtYmVyczogXCIgICAx4oaSXCIgb3IgXCIgIDQyOlwiXG4gICAgLy8gLSBDb2RlLWxpa2UgcGF0dGVybnNcbiAgICBpZiAoL15cXHMqW1xcdy4vXSs6XFxkK1s6XFxzXS8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGdyZXAtc3R5bGUgb3V0cHV0XG4gICAgaWYgKC9eXFxzKlxcZCtb4oaSOuKUgnxdXFxzLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gbGluZS1udW1iZXJlZCBvdXRwdXRcbiAgICBpZiAoL15b4pSC4pSc4pSU4pSA4pSM4pSQ4pSY4pSs4pS04pS84pWt4pWu4pWv4pWwXSsvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBib3ggZHJhd2luZ1xuICAgIGlmICgvXlxccypbJD5dXFxzK1xcdysvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBjb21tYW5kIHByb21wdCBvdXRwdXRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN0cnVjdHVyZWQgdG9vbCBvdXRwdXQgcHJlc2VydmluZyBsaW5lIHN0cnVjdHVyZS5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWU6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGhlYWRlciA9IGDij7ogJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX0ke3RoZW1lLnVpLm11dGVkKCcgwrcgZXhwYW5kZWQnKX1cXG5gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICc7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpIC0gNDtcblxuICAgIGNvbnN0IGZvcm1hdHRlZExpbmVzID0gbGluZXMubWFwKGxpbmUgPT4ge1xuICAgICAgLy8gVHJ1bmNhdGUgb3Zlcmx5IGxvbmcgbGluZXMgaW5zdGVhZCBvZiB3cmFwcGluZyAocHJlc2VydmVzIHN0cnVjdHVyZSlcbiAgICAgIGlmIChsaW5lLmxlbmd0aCA+IG1heFdpZHRoKSB7XG4gICAgICAgIHJldHVybiBpbmRlbnQgKyBsaW5lLnNsaWNlKDAsIG1heFdpZHRoIC0gMSkgKyAn4oCmJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbmRlbnQgKyBsaW5lO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhlYWRlciArIGZvcm1hdHRlZExpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvdW50IG9mIGV4cGFuZGFibGUgY29sbGFwc2VkIHJlc3VsdHNcbiAgICovXG4gIGdldENvbGxhcHNlZFJlc3VsdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBjb2xsYXBzZWQgcmVzdWx0cyAoZS5nLiwgb24gbmV3IGNvbnZlcnNhdGlvbilcbiAgICovXG4gIGNsZWFyQ29sbGFwc2VkUmVzdWx0cygpOiB2b2lkIHtcbiAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzID0gW107XG4gICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IG51bGw7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gU3RhdHVzIC8gbW9kZSAtLS0tLS0tLS0tLS1cblxuICBzZXRNb2RlKG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnKTogdm9pZCB7XG4gICAgY29uc3Qgd2FzU3RyZWFtaW5nID0gdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuXG4gICAgLy8gVHJhY2sgc3RyZWFtaW5nIHN0YXJ0IHRpbWUgZm9yIGVsYXBzZWQgZGlzcGxheVxuICAgIGlmIChtb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhd2FzU3RyZWFtaW5nKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IDA7IC8vIFJlc2V0IHRva2VuIGNvdW50XG4gICAgICB0aGlzLnN0cmVhbWluZ0NvbnRlbnRCdWZmZXIgPSAnJzsgLy8gUmVzZXQgc3RyZWFtaW5nIGJ1ZmZlclxuICAgICAgdGhpcy5zdHJlYW1pbmdMaW5lc1dyaXR0ZW4gPSAwO1xuICAgICAgdGhpcy5zdHJlYW1pbmdJbnB1dFF1ZXVlID0gW107IC8vIENsZWFyIGFueSBzdGFsZSBxdWV1ZWQgaW5wdXRcbiAgICAgIC8vIENsZWFyIGlubGluZSBwYW5lbCB3aGVuIGVudGVyaW5nIHN0cmVhbWluZyBtb2RlIHRvIHByZXZlbnQgc3RhbGUgbWVudXNcbiAgICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGFydFNwaW5uZXJBbmltYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdpZGxlJyAmJiB3YXNTdHJlYW1pbmcpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lID0gbnVsbDtcbiAgICAgIHRoaXMuc3RvcFNwaW5uZXJBbmltYXRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAod2FzU3RyZWFtaW5nICYmIG1vZGUgPT09ICdpZGxlJykge1xuICAgICAgLy8gSU1QT1JUQU5UOiBDbGVhciB0aGUgb3ZlcmxheSBCRUZPUkUgd3JpdGluZyBuZXdsaW5lIHRvIHByZXZlbnQgZHVwbGljYXRlIGJveGVzXG4gICAgICAvLyBUaGUgb2xkIG92ZXJsYXkgd291bGQgb3RoZXJ3aXNlIHNjcm9sbCBpbnRvIHNjcm9sbGJhY2sgaGlzdG9yeVxuICAgICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSkge1xuICAgICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgdGhlIGJ1ZmZlciBhZnRlciBwcm9jZXNzaW5nXG4gICAgICB0aGlzLnN0cmVhbWluZ0NvbnRlbnRCdWZmZXIgPSAnJztcbiAgICAgIHRoaXMuc3RyZWFtaW5nTGluZXNXcml0dGVuID0gMDtcbiAgICAgIC8vIENsZWFyIGFueSByZW1haW5pbmcgcXVldWVkIGlucHV0ICh1c2VyIGRpZG4ndCBwcmVzcyBFbnRlciB0byBxdWV1ZSBpdClcbiAgICAgIHRoaXMuc3RyZWFtaW5nSW5wdXRRdWV1ZSA9IFtdO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIEFsd2F5cyByZW5kZXIgcHJvbXB0IHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnQgKHJpY2ggbW9kZSBvbmx5KVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGFuaW1hdGVkIHNwaW5uZXIgZm9yIHN0cmVhbWluZyBzdGF0dXNcbiAgICovXG4gIHByaXZhdGUgc3RhcnRTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkgcmV0dXJuOyAvLyBBbHJlYWR5IHJ1bm5pbmdcbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnNwaW5uZXJGcmFtZSA9ICh0aGlzLnNwaW5uZXJGcmFtZSArIDEpICUgc3Bpbm5lckZyYW1lcy5icmFpbGxlLmxlbmd0aDtcbiAgICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAodGhpcy5hY3Rpdml0eVN0YXJGcmFtZSArIDEpICUgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXMubGVuZ3RoO1xuICAgICAgLy8gVXBkYXRlIGVsYXBzZWQgdGltZSBjb2xvciBhbmltYXRpb24gKHNsb3dlciBjeWNsZSlcbiAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDMgPT09IDApIHtcbiAgICAgICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9ICh0aGlzLmVsYXBzZWRDb2xvckZyYW1lICsgMSkgJSB0aGlzLmVsYXBzZWRDb2xvckZyYW1lcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICAvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIHNwaW5uZXIvc3RhciBmcmFtZVxuICAgICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSwgMTIwKTsgLy8gfjggRlBTIC0gcmVkdWNlZCBmcm9tIDgwbXMgdG8gbWluaW1pemUgZmxpY2tlcmluZyB3aGlsZSBrZWVwaW5nIGFuaW1hdGlvbiBzbW9vdGhcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBhbmltYXRlZCBzcGlubmVyXG4gICAqL1xuICBwcml2YXRlIHN0b3BTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhY3Rpdml0eSBtZXNzYWdlIGRpc3BsYXllZCB3aXRoIGFuaW1hdGVkIHN0YXJcbiAgICogRXhhbXBsZTogXCJSdW1pbmF0aW5n4oCmXCIgc2hvd3MgYXMgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIlxuICAgKi9cbiAgc2V0QWN0aXZpdHkobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRva2VuIGNvdW50IGRpc3BsYXllZCBpbiB0aGUgYWN0aXZpdHkgbGluZVxuICAgKi9cbiAgdXBkYXRlU3RyZWFtaW5nVG9rZW5zKHRva2VuczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRva2VuIGNvdW50IGFzIGNvbXBhY3Qgc3RyaW5nIChlLmcuLCAxLjJrLCAyNGssIDEyOGspXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRva2VuQ291bnQodG9rZW5zOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0b2tlbnMgPCAxMDAwKSByZXR1cm4gU3RyaW5nKHRva2Vucyk7XG4gICAgaWYgKHRva2VucyA8IDEwMDAwKSByZXR1cm4gYCR7KHRva2VucyAvIDEwMDApLnRvRml4ZWQoMSl9a2A7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQodG9rZW5zIC8gMTAwMCl9a2A7XG4gIH1cblxuICBnZXRNb2RlKCk6ICdpZGxlJyB8ICdzdHJlYW1pbmcnIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0J1bmRsZSh7IG1haW46IG1lc3NhZ2UsIG92ZXJyaWRlOiBudWxsLCBzdHJlYW1pbmc6IG51bGwgfSk7XG4gIH1cblxuICB1cGRhdGVTdGF0dXNCdW5kbGUoXG4gICAgc3RhdHVzOiB7IG1haW4/OiBzdHJpbmcgfCBudWxsOyBvdmVycmlkZT86IHN0cmluZyB8IG51bGw7IHN0cmVhbWluZz86IHN0cmluZyB8IG51bGwgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHByZXZTdHJlYW1pbmcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZztcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBtYWluQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBvdmVycmlkZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgIGlmIChzdGF0dXMubWFpbiAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5tYWluICE9PSB0aGlzLnN0YXR1c01lc3NhZ2UpIHtcbiAgICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IHN0YXR1cy5tYWluO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBtYWluQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChzdGF0dXMub3ZlcnJpZGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMub3ZlcnJpZGUgIT09IHRoaXMuc3RhdHVzT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuc3RhdHVzT3ZlcnJpZGUgPSBzdGF0dXMub3ZlcnJpZGU7XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG92ZXJyaWRlQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nQ2hhbmdlZCA9IHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBwcmV2U3RyZWFtaW5nO1xuICAgIGlmIChzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChzdHJlYW1pbmdDaGFuZ2VkKSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGF0dXNTdHJlYW1pbmcgPSBzdGF0dXMuc3RyZWFtaW5nO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0ludHJvZHVjZSA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHByZXZTdHJlYW1pbmcgPT09IG51bGwgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IHN0cmVhbWluZ0NsZWFyZWQgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBzdGF0dXMuc3RyZWFtaW5nID09PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgb25seVN0cmVhbWluZ0NoYW5nZWQgPSBzdHJlYW1pbmdDaGFuZ2VkICYmICFtYWluQ2hhbmdlZCAmJiAhb3ZlcnJpZGVDaGFuZ2VkO1xuICAgIGNvbnN0IHNraXBTdHJlYW1pbmdSZW5kZXIgPVxuICAgICAgb25seVN0cmVhbWluZ0NoYW5nZWQgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhc3RyZWFtaW5nSW50cm9kdWNlICYmICFzdHJlYW1pbmdDbGVhcmVkO1xuXG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQgJiYgIXNraXBTdHJlYW1pbmdSZW5kZXI7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdGF0dXNNZXRhKFxuICAgIG1ldGE6IHtcbiAgICAgIG1vZGVsPzogc3RyaW5nO1xuICAgICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgICAgcHJvZmlsZT86IHN0cmluZztcbiAgICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICAgIHdyaXRlcz86IHN0cmluZztcbiAgICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gICAgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMuc3RhdHVzTWV0YSwgLi4ubWV0YSB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0dXNNZXRhKTtcbiAgICB0aGlzLnN0YXR1c01ldGEgPSBuZXh0O1xuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTW9kZVRvZ2dsZXMoc3RhdGU6IFBhcnRpYWw8TW9kZVRvZ2dsZVN0YXRlPik6IHZvaWQge1xuICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB7IC4uLnRoaXMudG9nZ2xlU3RhdGUsIC4uLnN0YXRlIH07XG4gICAgaWYgKFxuICAgICAgIXN0YXRlLnRoaW5raW5nSG90a2V5ICYmXG4gICAgICAhc3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSAmJlxuICAgICAgIXN0YXRlLmF1dG9Db250aW51ZUhvdGtleSAmJlxuICAgICAgIXN0YXRlLmFscGhhWmVyb0hvdGtleSAmJlxuICAgICAgIXN0YXRlLmRlYnVnSG90a2V5XG4gICAgKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICB9XG4gICAgLy8gRm9yY2UgbmV4dCByZW5kZXIgdG8gc2hvdyB1cGRhdGVkIHRvZ2dsZSBzdGF0ZVxuICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBSTCBhZ2VudCBleGVjdXRpb24gc3RhdHVzIGZvciBkaXNwbGF5IGluIHRoZSBVSS5cbiAgICogQ2FsbGVkIGR1cmluZyBkdWFsLVJMIG1vZGUgdG8gc2hvdyBhY3RpdmUgYWdlbnQsIG1vZHVsZS9zdGVwIHByb2dyZXNzLCBhbmQgd2luIHN0YXRpc3RpY3MuXG4gICAqL1xuICB1cGRhdGVSTFN0YXR1cyhzdGF0dXM6IFBhcnRpYWw8UkxBZ2VudFN0YXR1cz4pOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnJsU3RhdHVzLCAuLi5zdGF0dXMgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMucmxTdGF0dXMpO1xuICAgIHRoaXMucmxTdGF0dXMgPSBuZXh0O1xuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBSTCBhZ2VudCBzdGF0dXMgKGUuZy4sIHdoZW4gUkwgcnVuIGNvbXBsZXRlcykuXG4gICAqL1xuICBjbGVhclJMU3RhdHVzKCk6IHZvaWQge1xuICAgIHRoaXMucmxTdGF0dXMgPSB7fTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IFJMIHN0YXR1cyBmb3IgZXh0ZXJuYWwgYWNjZXNzLlxuICAgKi9cbiAgZ2V0UkxTdGF0dXMoKTogUmVhZG9ubHk8UkxBZ2VudFN0YXR1cz4ge1xuICAgIHJldHVybiB0aGlzLnJsU3RhdHVzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBzZWN1cmUgVEFPIHRvb2xzIHN0YXR1cyBmb3IgZGlzcGxheSBpbiB0aGUgVUkuXG4gICAqIFRyYWNrcyBFeGVjdXRlLCBQcm9iZSwgU3RhdGUgdG9vbHMgd2l0aCBlbmhhbmNlZCBvdXRwdXQgZm9ybWF0dGluZy5cbiAgICovXG4gIHVwZGF0ZVNlY3VyZVRvb2xzU3RhdHVzKHN0YXR1czogUGFydGlhbDxTZWN1cmVUb29sc1N0YXR1cz4pOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnNlY3VyZVRvb2xzU3RhdHVzLCAuLi5zdGF0dXMgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc2VjdXJlVG9vbHNTdGF0dXMpO1xuICAgIHRoaXMuc2VjdXJlVG9vbHNTdGF0dXMgPSBuZXh0O1xuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmQgYSBzZWN1cmUgdG9vbCBpbnZvY2F0aW9uIGZvciB0cmFja2luZy5cbiAgICovXG4gIHJlY29yZFNlY3VyZVRvb2xJbnZvY2F0aW9uKFxuICAgIHRvb2w6ICdFeGVjdXRlJyB8ICdQcm9iZScgfCAnU3RhdGUnIHwgJ1RyYW5zZm9ybScgfCAnVGFvT3BzJyxcbiAgICBkZXRhaWxzPzogeyBjb21tYW5kPzogc3RyaW5nOyBleGl0Q29kZT86IG51bWJlcjsgdGFyZ2V0Pzogc3RyaW5nOyBzZXJ2aWNlcz86IG51bWJlcjsgYWN0aW9uPzogJ2dldCcgfCAnc2V0Jzsga2V5c0NvdW50PzogbnVtYmVyIH1cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgaW52b2NhdGlvbnMgPSAodGhpcy5zZWN1cmVUb29sc1N0YXR1cy50b3RhbEludm9jYXRpb25zIHx8IDApICsgMTtcbiAgICBjb25zdCB1cGRhdGVzOiBQYXJ0aWFsPFNlY3VyZVRvb2xzU3RhdHVzPiA9IHtcbiAgICAgIGxhc3RUb29sVXNlZDogdG9vbCxcbiAgICAgIHRvdGFsSW52b2NhdGlvbnM6IGludm9jYXRpb25zLFxuICAgIH07XG5cbiAgICBpZiAodG9vbCA9PT0gJ0V4ZWN1dGUnICYmIGRldGFpbHMpIHtcbiAgICAgIHVwZGF0ZXMuZXhlY3V0ZSA9IHtcbiAgICAgICAgYWN0aXZlOiB0cnVlLFxuICAgICAgICBsYXN0Q29tbWFuZDogZGV0YWlscy5jb21tYW5kLFxuICAgICAgICBsYXN0RXhpdENvZGU6IGRldGFpbHMuZXhpdENvZGUsXG4gICAgICAgIGV4ZWNDb3VudDogKHRoaXMuc2VjdXJlVG9vbHNTdGF0dXMuZXhlY3V0ZT8uZXhlY0NvdW50IHx8IDApICsgMSxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0b29sID09PSAnUHJvYmUnICYmIGRldGFpbHMpIHtcbiAgICAgIHVwZGF0ZXMucHJvYmUgPSB7XG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgbGFzdFRhcmdldDogZGV0YWlscy50YXJnZXQsXG4gICAgICAgIHNlcnZpY2VzRm91bmQ6IGRldGFpbHMuc2VydmljZXMsXG4gICAgICAgIHByb2JlQ291bnQ6ICh0aGlzLnNlY3VyZVRvb2xzU3RhdHVzLnByb2JlPy5wcm9iZUNvdW50IHx8IDApICsgMSxcbiAgICAgIH07XG4gICAgfSBlbHNlIGlmICh0b29sID09PSAnU3RhdGUnICYmIGRldGFpbHMpIHtcbiAgICAgIHVwZGF0ZXMuc3RhdGUgPSB7XG4gICAgICAgIGFjdGl2ZTogdHJ1ZSxcbiAgICAgICAgbGFzdEFjdGlvbjogZGV0YWlscy5hY3Rpb24sXG4gICAgICAgIGtleXNTdG9yZWQ6IGRldGFpbHMua2V5c0NvdW50LFxuICAgICAgICBwZXJzaXN0ZW50OiB0cnVlLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICB0aGlzLnVwZGF0ZVNlY3VyZVRvb2xzU3RhdHVzKHVwZGF0ZXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IHNlY3VyZSB0b29scyBzdGF0dXMgZm9yIGV4dGVybmFsIGFjY2Vzcy5cbiAgICovXG4gIGdldFNlY3VyZVRvb2xzU3RhdHVzKCk6IFJlYWRvbmx5PFNlY3VyZVRvb2xzU3RhdHVzPiB7XG4gICAgcmV0dXJuIHRoaXMuc2VjdXJlVG9vbHNTdGF0dXM7XG4gIH1cblxuICBzZXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gKGxpbmVzID8/IFtdKS5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL1xccyskL2csICcnKSk7XG4gICAgY29uc3QgaGFzQ29udGVudCA9IG5vcm1hbGl6ZWQuc29tZSgobGluZSkgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkID0gdGhpcy5saW1pdElubGluZVBhbmVsKG5vcm1hbGl6ZWQpO1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShsaW1pdGVkKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmxpbmVQYW5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IGxpbWl0ZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHN1cHBvcnRzSW5saW5lUGFuZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMucGxhaW5Nb2RlO1xuICB9XG5cbiAgY2xlYXJJbmxpbmVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSByZXR1cm47XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhbiBpbnRlcmFjdGl2ZSBtZW51IHdpdGggYXJyb3cga2V5IG5hdmlnYXRpb24gKENsYXVkZSBDb2RlIHN0eWxlKS5cbiAgICogTWVudSBpcyBkaXNwbGF5ZWQgaW4gdGhlIGlubGluZSBwYW5lbCBhcmVhIGFuZCBpbnRlcmNlcHRzIGFycm93L2VudGVyIGtleXMuXG4gICAqIEBwYXJhbSBpdGVtcyAtIE1lbnUgaXRlbXMgdG8gZGlzcGxheVxuICAgKiBAcGFyYW0gb3B0aW9ucyAtIE1lbnUgb3B0aW9ucyAodGl0bGUsIGluaXRpYWxJbmRleClcbiAgICogQHBhcmFtIGNhbGxiYWNrIC0gQ2FsbGVkIHdoZW4gdXNlciBzZWxlY3RzIGFuIGl0ZW0gKG9yIG51bGwgaWYgY2FuY2VsbGVkKVxuICAgKi9cbiAgc2V0TWVudShcbiAgICBpdGVtczogTWVudUl0ZW1bXSxcbiAgICBvcHRpb25zOiB7IHRpdGxlPzogc3RyaW5nOyBpbml0aWFsSW5kZXg/OiBudW1iZXIgfSA9IHt9LFxuICAgIGNhbGxiYWNrOiAoaXRlbTogTWVudUl0ZW0gfCBudWxsKSA9PiB2b2lkXG4gICk6IHZvaWQge1xuICAgIGlmICghdGhpcy5zdXBwb3J0c0lubGluZVBhbmVsKCkpIHtcbiAgICAgIC8vIE5vbi1pbnRlcmFjdGl2ZSBtb2RlIC0ganVzdCBjYWxsIGNhbGxiYWNrIHdpdGggZmlyc3QgaXRlbSBvciBudWxsXG4gICAgICBjYWxsYmFjayhpdGVtc1swXSA/PyBudWxsKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLm1lbnVJdGVtcyA9IGl0ZW1zO1xuICAgIHRoaXMubWVudUluZGV4ID0gb3B0aW9ucy5pbml0aWFsSW5kZXggPz8gaXRlbXMuZmluZEluZGV4KGkgPT4gaS5pc0FjdGl2ZSkgPz8gMDtcbiAgICBpZiAodGhpcy5tZW51SW5kZXggPCAwKSB0aGlzLm1lbnVJbmRleCA9IDA7XG4gICAgdGhpcy5tZW51VGl0bGUgPSBvcHRpb25zLnRpdGxlID8/IG51bGw7XG4gICAgdGhpcy5tZW51Q2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICB0aGlzLnJlbmRlck1lbnVQYW5lbCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIENsb3NlIHRoZSBhY3RpdmUgbWVudSB3aXRob3V0IHNlbGVjdGluZyBhbnl0aGluZy5cbiAgICovXG4gIGNsb3NlTWVudSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNNZW51QWN0aXZlKCkpIHJldHVybjtcbiAgICBjb25zdCBjYWxsYmFjayA9IHRoaXMubWVudUNhbGxiYWNrO1xuICAgIHRoaXMubWVudUl0ZW1zID0gW107XG4gICAgdGhpcy5tZW51SW5kZXggPSAwO1xuICAgIHRoaXMubWVudVRpdGxlID0gbnVsbDtcbiAgICB0aGlzLm1lbnVDYWxsYmFjayA9IG51bGw7XG4gICAgdGhpcy5jbGVhcklubGluZVBhbmVsKCk7XG4gICAgY2FsbGJhY2s/LihudWxsKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhbiBpbnRlcmFjdGl2ZSBtZW51IGlzIGN1cnJlbnRseSBhY3RpdmUuXG4gICAqL1xuICBpc01lbnVBY3RpdmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMubWVudUl0ZW1zLmxlbmd0aCA+IDAgJiYgdGhpcy5tZW51Q2FsbGJhY2sgIT09IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUmVuZGVyIHRoZSBtZW51IHRvIHRoZSBpbmxpbmUgcGFuZWwuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlck1lbnVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaXNNZW51QWN0aXZlKCkpIHJldHVybjtcblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gVGl0bGVcbiAgICBpZiAodGhpcy5tZW51VGl0bGUpIHtcbiAgICAgIGxpbmVzLnB1c2goY2hhbGsuYm9sZC5oZXgoJyM4QjVDRjYnKSh0aGlzLm1lbnVUaXRsZSkpO1xuICAgICAgbGluZXMucHVzaCgnJyk7XG4gICAgfVxuXG4gICAgLy8gTWVudSBpdGVtcyB3aXRoIHNlbGVjdGlvbiBpbmRpY2F0b3JcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubWVudUl0ZW1zLmxlbmd0aDsgaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gdGhpcy5tZW51SXRlbXNbaV0hO1xuICAgICAgY29uc3QgaXNTZWxlY3RlZCA9IGkgPT09IHRoaXMubWVudUluZGV4O1xuICAgICAgY29uc3QgaXNEaXNhYmxlZCA9IGl0ZW0uZGlzYWJsZWQ7XG4gICAgICBjb25zdCBpc0FjdGl2ZSA9IGl0ZW0uaXNBY3RpdmU7XG5cbiAgICAgIGxldCBsaW5lID0gJyc7XG5cbiAgICAgIC8vIFNlbGVjdGlvbiBpbmRpY2F0b3JcbiAgICAgIGlmIChpc1NlbGVjdGVkKSB7XG4gICAgICAgIGxpbmUgKz0gY2hhbGsuaGV4KCcjMjJEM0VFJykoJ+KdryAnKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmUgKz0gJyAgJztcbiAgICAgIH1cblxuICAgICAgLy8gTGFiZWwgd2l0aCBzdHlsaW5nXG4gICAgICBpZiAoaXNEaXNhYmxlZCkge1xuICAgICAgICBsaW5lICs9IGNoYWxrLmRpbShpdGVtLmxhYmVsKTtcbiAgICAgIH0gZWxzZSBpZiAoaXNTZWxlY3RlZCkge1xuICAgICAgICBsaW5lICs9IGNoYWxrLmJvbGQuaGV4KCcjMjJEM0VFJykoaXRlbS5sYWJlbCk7XG4gICAgICB9IGVsc2UgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgIGxpbmUgKz0gY2hhbGsuaGV4KCcjMzREMzk5JykoaXRlbS5sYWJlbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lICs9IGNoYWxrLndoaXRlKGl0ZW0ubGFiZWwpO1xuICAgICAgfVxuXG4gICAgICAvLyBBY3RpdmUgaW5kaWNhdG9yXG4gICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgbGluZSArPSBjaGFsay5kaW0oJyAoY3VycmVudCknKTtcbiAgICAgIH1cblxuICAgICAgLy8gRGVzY3JpcHRpb25cbiAgICAgIGlmIChpdGVtLmRlc2NyaXB0aW9uKSB7XG4gICAgICAgIGNvbnN0IGRlc2MgPSBpc0Rpc2FibGVkID8gY2hhbGsuZGltKGl0ZW0uZGVzY3JpcHRpb24pIDogY2hhbGsuZGltKGAgLSAke2l0ZW0uZGVzY3JpcHRpb259YCk7XG4gICAgICAgIGxpbmUgKz0gZGVzYztcbiAgICAgIH1cblxuICAgICAgbGluZXMucHVzaChsaW5lKTtcbiAgICB9XG5cbiAgICAvLyBIaW50XG4gICAgbGluZXMucHVzaCgnJyk7XG4gICAgbGluZXMucHVzaChjaGFsay5kaW0oJ+KGkeKGkyBuYXZpZ2F0ZSDigKIgZW50ZXIgc2VsZWN0IOKAoiBlc2MgY2FuY2VsJykpO1xuXG4gICAgdGhpcy5zZXRJbmxpbmVQYW5lbChsaW5lcyk7XG4gIH1cblxuICAvKipcbiAgICogTmF2aWdhdGUgbWVudSBzZWxlY3Rpb24uXG4gICAqIEByZXR1cm5zIHRydWUgaWYgbWVudSBjb25zdW1lZCB0aGUgbmF2aWdhdGlvblxuICAgKi9cbiAgcHJpdmF0ZSBuYXZpZ2F0ZU1lbnUoZGlyZWN0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuaXNNZW51QWN0aXZlKCkpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIEZpbmQgbmV4dCBub24tZGlzYWJsZWQgaXRlbVxuICAgIGxldCBuZXdJbmRleCA9IHRoaXMubWVudUluZGV4O1xuICAgIGxldCBhdHRlbXB0cyA9IDA7XG4gICAgY29uc3QgbWF4QXR0ZW1wdHMgPSB0aGlzLm1lbnVJdGVtcy5sZW5ndGg7XG5cbiAgICBkbyB7XG4gICAgICBuZXdJbmRleCA9IChuZXdJbmRleCArIGRpcmVjdGlvbiArIHRoaXMubWVudUl0ZW1zLmxlbmd0aCkgJSB0aGlzLm1lbnVJdGVtcy5sZW5ndGg7XG4gICAgICBhdHRlbXB0cysrO1xuICAgIH0gd2hpbGUgKHRoaXMubWVudUl0ZW1zW25ld0luZGV4XT8uZGlzYWJsZWQgJiYgYXR0ZW1wdHMgPCBtYXhBdHRlbXB0cyk7XG5cbiAgICBpZiAobmV3SW5kZXggIT09IHRoaXMubWVudUluZGV4KSB7XG4gICAgICB0aGlzLm1lbnVJbmRleCA9IG5ld0luZGV4O1xuICAgICAgdGhpcy5yZW5kZXJNZW51UGFuZWwoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZWxlY3QgdGhlIGN1cnJlbnRseSBoaWdobGlnaHRlZCBtZW51IGl0ZW0uXG4gICAqIEByZXR1cm5zIHRydWUgaWYgbWVudSBjb25zdW1lZCB0aGUgc2VsZWN0aW9uXG4gICAqL1xuICBwcml2YXRlIHNlbGVjdE1lbnVJdGVtKCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5pc01lbnVBY3RpdmUoKSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgY29uc3QgaXRlbSA9IHRoaXMubWVudUl0ZW1zW3RoaXMubWVudUluZGV4XTtcbiAgICBpZiAoIWl0ZW0gfHwgaXRlbS5kaXNhYmxlZCkgcmV0dXJuIHRydWU7IC8vIENvbnN1bWUgYnV0IGRvbid0IHNlbGVjdFxuXG4gICAgY29uc3QgY2FsbGJhY2sgPSB0aGlzLm1lbnVDYWxsYmFjaztcbiAgICB0aGlzLm1lbnVJdGVtcyA9IFtdO1xuICAgIHRoaXMubWVudUluZGV4ID0gMDtcbiAgICB0aGlzLm1lbnVUaXRsZSA9IG51bGw7XG4gICAgdGhpcy5tZW51Q2FsbGJhY2sgPSBudWxsO1xuICAgIHRoaXMuY2xlYXJJbmxpbmVQYW5lbCgpO1xuICAgIGNhbGxiYWNrPy4oaXRlbSk7XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgbGltaXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF4TGluZXMgPSBNYXRoLm1heCg0LCBNYXRoLm1pbih0aGlzLm1heElubGluZVBhbmVsTGluZXMsIE1hdGgubWF4KDIsIHRoaXMucm93cyAtIDgpKSk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBtYXhMaW5lcykge1xuICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGxpbmVzLmxlbmd0aCAtIG1heExpbmVzO1xuICAgIGNvbnN0IGluZGljYXRvciA9IHRoZW1lLnVpLm11dGVkKGDigKYgJHtvdmVyZmxvd30gbW9yZSBsaW5lc2ApO1xuICAgIGNvbnN0IHRhaWxDb3VudCA9IE1hdGgubWF4KDEsIG1heExpbmVzIC0gMSk7XG4gICAgY29uc3QgdGFpbCA9IGxpbmVzLnNsaWNlKC10YWlsQ291bnQpO1xuICAgIHJldHVybiBbaW5kaWNhdG9yLCAuLi50YWlsXTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBQcm9tcHQgcmVuZGVyaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0KCk6IHZvaWQge1xuICAgIC8vIERvbid0IHJlbmRlciBpZiBkaXNwb3NlZCBvciBzdGlsbCBpbml0aWFsaXppbmcgKGJlZm9yZSBiYW5uZXIgc2hvd24pXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQgfHwgdGhpcy5pbml0aWFsaXppbmcpIHJldHVybjtcblxuICAgIC8vIFRocm90dGxlIHJlbmRlcnMgdG8gcHJldmVudCBleGNlc3NpdmUgcmVkcmF3cyBkdXJpbmcgcmFwaWQgaW5wdXRcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSB0aGlzLmxhc3RSZW5kZXJUaW1lIDwgdGhpcy5yZW5kZXJUaHJvdHRsZU1zKSB7XG4gICAgICBpZiAoIXRoaXMucGVuZGluZ1JlbmRlcikge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSB0cnVlO1xuICAgICAgICAvLyBUcmFjayB0aGUgdGltZXIgZm9yIGNsZWFudXBcbiAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLnJlbmRlclRocm90dGxlTXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkIG9yIHN0aWxsIGluaXRpYWxpemluZyAoYmVmb3JlIGJhbm5lciBzaG93bilcbiAgICBpZiAodGhpcy5kaXNwb3NlZCB8fCB0aGlzLmluaXRpYWxpemluZykgcmV0dXJuO1xuXG4gICAgLy8gUGVyZm9ybWFuY2Ugb3B0aW1pemF0aW9uOiBTa2lwIHJlbmRlciBpZiBub3RoaW5nIGNoYW5nZWQgKGR1cmluZyBpZGxlIG1vZGUgb25seSlcbiAgICAvLyBEdXJpbmcgc3RyZWFtaW5nIG1vZGUsIHdlIG5lZWQgdG8gdXBkYXRlIGFuaW1hdGlvbnMgYW5kIHN0YXR1c1xuICAgIGlmICghdGhpcy5mb3JjZU5leHRSZW5kZXIgJiZcbiAgICAgICAgdGhpcy5tb2RlID09PSAnaWRsZScgJiZcbiAgICAgICAgdGhpcy5idWZmZXIgPT09IHRoaXMubGFzdFJlbmRlcmVkQnVmZmVyICYmXG4gICAgICAgIHRoaXMuY3Vyc29yID09PSB0aGlzLmxhc3RSZW5kZXJlZEN1cnNvciAmJlxuICAgICAgICB0aGlzLm1vZGUgPT09IHRoaXMubGFzdFJlbmRlcmVkTW9kZSAmJlxuICAgICAgICB0aGlzLmxhc3RPdmVybGF5ICE9PSBudWxsKSB7XG4gICAgICAvLyBDb250ZW50IHVuY2hhbmdlZCwgc2tpcCBleHBlbnNpdmUgcmUtcmVuZGVyXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuZm9yY2VOZXh0UmVuZGVyID0gZmFsc2U7XG5cbiAgICAvLyBTdXBwcmVzcyByZW5kZXIgZHVyaW5nIHBhc3RlIGJ1cnN0IHRvIHByZXZlbnQgdmlzdWFsIGxlYWtcbiAgICAvLyBPbmx5IGFsbG93IHJlbmRlciBpZiB3ZSBoYXZlIGEgY29sbGFwc2VkIHBhc3RlIHRvIHNob3dcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IGJ1cnN0QWN0aXZlID0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiAwICYmIG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IDw9IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIGNvbnN0IGluRW1pdFBhc3RlID0gdGhpcy5lbWl0UGFzdGVCdWZmZXIubGVuZ3RoID4gMCB8fCB0aGlzLmVtaXRQYXN0ZVRpbWVyICE9PSBudWxsO1xuICAgIGlmICgoYnVyc3RBY3RpdmUgfHwgdGhpcy5pblBsYWluUGFzdGUgfHwgdGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IGluRW1pdFBhc3RlKSAmJiAhdGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMubGFzdFJlbmRlclRpbWUgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMubGFzdFJlbmRlcmVkQnVmZmVyID0gdGhpcy5idWZmZXI7XG4gICAgdGhpcy5sYXN0UmVuZGVyZWRDdXJzb3IgPSB0aGlzLmN1cnNvcjtcbiAgICB0aGlzLmxhc3RSZW5kZXJlZE1vZGUgPSB0aGlzLm1vZGU7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBgPiAke3RoaXMuYnVmZmVyfWA7XG4gICAgICBpZiAoIXRoaXMuaXNQcm9tcHRBY3RpdmUgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShgXFxyJHtFU0MuQ0xFQVJfTElORX0ke2xpbmV9YCk7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlOyAvLyBwcm9tcHQgZW5kcyBtaWQtbGluZSBieSBkZXNpZ25cbiAgICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxsb3dQcm9tcHRSZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSaWNoIGlubGluZSBtb2RlOiBwcm9tcHQgZmxvd3MgbmF0dXJhbGx5IHdpdGggY29udGVudFxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIHRoaXMubGFzdFJlbmRlcldpZHRoID0gbWF4V2lkdGg7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5idWlsZE92ZXJsYXlMaW5lcygpO1xuICAgIGlmICghb3ZlcmxheS5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJlZExpbmVzID0gb3ZlcmxheS5saW5lcy5tYXAobGluZSA9PiB0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIGlmICghcmVuZGVyZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG92ZXJsYXkucHJvbXB0SW5kZXgsIHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVkTGluZXMubGVuZ3RoO1xuXG4gICAgLy8gQmF0Y2ggYWxsIEFOU0kgb3BlcmF0aW9ucyBpbnRvIGEgc2luZ2xlIHdyaXRlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuICAgIC8vIFRoaXMgZWxpbWluYXRlcyB0aGUgdmlzdWFsIGppdHRlciBjYXVzZWQgYnkgbXVsdGlwbGUgc2VxdWVudGlhbCB0ZXJtaW5hbCB3cml0ZXNcbiAgICBjb25zdCBidWZmZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBIaWRlIGN1cnNvciBkdXJpbmcgcmVuZGVyIHRvIHByZXZlbnQgdmlzdWFsIGFydGlmYWN0c1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVsJyk7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyBwcm9tcHQgYW5kIGhhbmRsZSBoZWlnaHQgY2hhbmdlc1xuICAgIC8vIElNUE9SVEFOVDogT25seSBjbGVhciBpZiB3ZSBoYXZlIHZhbGlkIG92ZXJsYXkgc3RhdGUgdG8gYXZvaWQgY3Vyc29yIHBvc2l0aW9uIGJ1Z3NcbiAgICAvLyB0aGF0IGNhdXNlIHNlcGFyYXRvciBsaW5lcyB0byBhY2N1bXVsYXRlIGluIHNjcm9sbGJhY2tcbiAgICBpZiAodGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ICYmIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiAwICYmIHRoaXMubGFzdE92ZXJsYXkgIT09IG51bGwpIHtcbiAgICAgIC8vIE1vdmUgdXAgZnJvbSBwcm9tcHQgcm93IHRvIHRvcCBvZiBvdmVybGF5XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheS5wcm9tcHRJbmRleDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZXhhY3RseSB0aGUgb2xkIG92ZXJsYXkgbGluZXMgdXNpbmcgYXRvbWljIGVzY2FwZSBzZXF1ZW5jZSBiYXRjaFxuICAgICAgY29uc3QgY2xlYXJIZWlnaHQgPSB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0O1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBjbGVhckhlaWdodDsgaSsrKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcbiAgICAgICAgYnVmZmVyLnB1c2goRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgICBpZiAoaSA8IGNsZWFySGVpZ2h0IC0gMSkge1xuICAgICAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYW55dGhpbmcgYmVsb3cgdGhlIG9sZCBvdmVybGF5IChoYW5kbGVzIGVkZ2UgY2FzZXMpXG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbSicpO1xuXG4gICAgICAvLyBBZnRlciBjbGVhcmluZywgY3Vyc29yIGlzIGF0IGxhc3QgY2xlYXJlZCBsaW5lXG4gICAgICAvLyBNb3ZlIGJhY2sgdXAgdG8gdGhlIHRvcCB3aGVyZSBuZXcgb3ZlcmxheSBzaG91bGQgc3RhcnRcbiAgICAgIGNvbnN0IG1vdmVCYWNrVXAgPSBjbGVhckhlaWdodCAtIDE7XG4gICAgICBpZiAobW92ZUJhY2tVcCA+IDApIHtcbiAgICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bW92ZUJhY2tVcH1BYCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkpIHtcbiAgICAgIC8vIE92ZXJsYXkgd2FzIGNsZWFyZWQgYnV0IHdlJ3JlIHJlLXJlbmRlcmluZyAtIGVuc3VyZSBjbGVhbiBzbGF0ZVxuICAgICAgLy8gVXNlIGVyYXNlLXRvLWVuZC1vZi1zY3JlZW4gZnJvbSBjdXJyZW50IHBvc2l0aW9uXG4gICAgICBidWZmZXIucHVzaCgnXFxyJyk7XG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbSicpO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIHByb21wdCBsaW5lcyAobm8gdHJhaWxpbmcgbmV3bGluZSBvbiBsYXN0IGxpbmUpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBidWZmZXIucHVzaCgnXFxyJyk7XG4gICAgICBidWZmZXIucHVzaChFU0MuQ0xFQVJfTElORSk7XG4gICAgICBidWZmZXIucHVzaChyZW5kZXJlZExpbmVzW2ldIHx8ICcnKTtcbiAgICAgIGlmIChpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKCdcXG4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBvbGQgb3ZlcmxheSB3YXMgdGFsbGVyLCBjbGVhciBhbnkgcmVtYWluaW5nIHN0YWxlIGxpbmVzIGJlbG93XG4gICAgLy8gYW5kIHVzZSBDU0kgSiAoZXJhc2UgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIHNjcmVlbikgdG8gY2xlYW4gdXBcbiAgICBpZiAodGhpcy5sYXN0T3ZlcmxheUhlaWdodCA+IGhlaWdodCkge1xuICAgICAgYnVmZmVyLnB1c2goJ1xcbicpOyAvLyBNb3ZlIHRvIGxpbmUgYmVsb3cgbGFzdCBjb250ZW50XG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbSicpOyAvLyBDbGVhciBmcm9tIGN1cnNvciB0byBlbmQgb2Ygc2NyZWVuXG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbQScpOyAvLyBNb3ZlIGJhY2sgdXAgdG8gbGFzdCBjb250ZW50IGxpbmVcbiAgICB9XG5cbiAgICAvLyBQb3NpdGlvbiBjdXJzb3IgYXQgcHJvbXB0IGlucHV0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRDb2wgPSBNYXRoLm1pbihNYXRoLm1heCgxLCAzICsgdGhpcy5jdXJzb3IpLCB0aGlzLmNvbHMgfHwgODApO1xuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bGluZXNUb01vdmVVcH1BYCk7XG4gICAgfVxuICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske3Byb21wdENvbH1HYCk7XG5cbiAgICAvLyBTaG93IGN1cnNvciBhZ2FpbiBhZnRlciBwb3NpdGlvbmluZ1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVoJyk7XG5cbiAgICAvLyBTaW5nbGUgYXRvbWljIHdyaXRlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuICAgIHRoaXMud3JpdGUoYnVmZmVyLmpvaW4oJycpKTtcblxuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IHByb21wdENvbDtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICB0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgPSB0cnVlO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IHsgbGluZXM6IHJlbmRlcmVkTGluZXMsIHByb21wdEluZGV4IH07XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE92ZXJsYXlMaW5lcygpOiB7IGxpbmVzOiBzdHJpbmdbXTsgcHJvbXB0SW5kZXg6IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgLy8gU2ltcGxlIGhvcml6b250YWwgZGl2aWRlciAtIGNsZWFuIGFuZCByZWxpYWJsZVxuICAgIGNvbnN0IGRpdmlkZXIgPSB0aGVtZS51aS5tdXRlZCgn4pSAJy5yZXBlYXQobWF4V2lkdGgpKTtcblxuICAgIGNvbnN0IGZhbGxiYWNrQWN0aXZpdHkgPSAoKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gdGhpcy5zdGF0dXNTdHJlYW1pbmcgfHwgdGhpcy5zdGF0dXNPdmVycmlkZSB8fCB0aGlzLnN0YXR1c01lc3NhZ2U7XG4gICAgICBpZiAoIXJhdykgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCBjbGVhbmVkID0gdGhpcy5zdHJpcEFuc2kocmF3KS5yZXBsYWNlKC9eW+KPuuKAol1cXHMqLywgJycpLnRyaW0oKTtcbiAgICAgIHJldHVybiBjbGVhbmVkIHx8IG51bGw7XG4gICAgfSkoKTtcblxuICAgIC8vIEFjdGl2aXR5IGxpbmUgKG9ubHkgd2hlbiBzdHJlYW1pbmcpIC0gc2hvd3M6IOKXkCBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cylcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAodGhpcy5hY3Rpdml0eU1lc3NhZ2UgfHwgZmFsbGJhY2tBY3Rpdml0eSkpIHtcbiAgICAgIC8vIENsZWFuIHNwaW5uZXIgYW5pbWF0aW9uIHVzaW5nIGJyYWlsbGUgZG90cyArIHNoaW1tZXIgYWNjZW50IGZvciBhIHJpY2hlciBmZWVsXG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgY29uc3Qgc3RhckNoYXIgPSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lc1t0aGlzLmFjdGl2aXR5U3RhckZyYW1lICUgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXMubGVuZ3RoXSA/PyAn4py2JztcbiAgICAgIGNvbnN0IHNwaW5uZXJEZWNvcmF0ZWQgPSBgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0ke3RoZW1lLmFjY2VudCA/IHRoZW1lLmFjY2VudChzdGFyQ2hhcikgOiBzdGFyQ2hhcn1gO1xuICAgICAgY29uc3QgZWxhcHNlZCA9IHRoaXMuZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpO1xuICAgICAgY29uc3QgZ2VuZXJpY0FjdGl2aXRpZXMgPSBbJ1N0cmVhbWluZycsICdUaGlua2luZycsICdQcm9jZXNzaW5nJ107XG4gICAgICBsZXQgZGlzcGxheUFjdGl2aXR5ID0gdGhpcy5hY3Rpdml0eU1lc3NhZ2UgfHwgZmFsbGJhY2tBY3Rpdml0eSB8fCAnJztcbiAgICAgIGlmIChnZW5lcmljQWN0aXZpdGllcy5pbmNsdWRlcyhkaXNwbGF5QWN0aXZpdHkpICYmIGZhbGxiYWNrQWN0aXZpdHkpIHtcbiAgICAgICAgZGlzcGxheUFjdGl2aXR5ID0gZmFsbGJhY2tBY3Rpdml0eTtcbiAgICAgIH1cbiAgICAgIGlmICghZGlzcGxheUFjdGl2aXR5LnRyaW0oKSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5IHx8ICdXb3JraW5nJztcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5lZWRzRWxsaXBzaXMgPSAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgn4oCmJykgJiYgIWRpc3BsYXlBY3Rpdml0eS50cmltRW5kKCkuZW5kc1dpdGgoJy4uLicpO1xuICAgICAgLy8gRm9ybWF0OiDioIsgV29ya2luZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAxbSAxOXMgwrcg4oaRMS4yayB0b2tlbnMpXG4gICAgICAvLyBCdWlsZCBwYXJ0cyB3aXRoIGFuaW1hdGVkIGVsYXBzZWQgdGltZSBjb2xvclxuICAgICAgY29uc3QgZWxhcHNlZENvbG9yID0gY2hhbGsuaGV4KHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzW3RoaXMuZWxhcHNlZENvbG9yRnJhbWUgJSB0aGlzLmVsYXBzZWRDb2xvckZyYW1lcy5sZW5ndGhdID8/ICcjRjU5RTBCJyk7XG4gICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbJ2VzYyB0byBpbnRlcnJ1cHQnXTtcbiAgICAgIGlmIChlbGFwc2VkKSBwYXJ0cy5wdXNoKGVsYXBzZWRDb2xvcihlbGFwc2VkKSk7XG4gICAgICBpZiAodGhpcy5zdHJlYW1pbmdUb2tlbnMgPiAwKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYOKGkSR7dGhpcy5mb3JtYXRUb2tlbkNvdW50KHRoaXMuc3RyZWFtaW5nVG9rZW5zKX0gdG9rZW5zYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmVmaXggPSBgJHtzcGlubmVyRGVjb3JhdGVkfSBgO1xuICAgICAgY29uc3QgYWN0aXZpdHlUZXh0ID0gYCR7ZGlzcGxheUFjdGl2aXR5LnRyaW0oKX0ke25lZWRzRWxsaXBzaXMgPyAn4oCmJyA6ICcnfWA7XG4gICAgICBjb25zdCBzdWZmaXggPSBgICR7dGhlbWUudWkubXV0ZWQoJygnKX0ke3BhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyDCtyAnKSl9JHt0aGVtZS51aS5tdXRlZCgnKScpfWA7XG5cbiAgICAgIC8vIEJ1aWxkIHRoZSBmdWxsIGFjdGl2aXR5IGxpbmUgd2l0aCBhbmltYXRlZCBjb2xvciBmb3IgZWxhcHNlZCB0aW1lXG4gICAgICBjb25zdCBhY3Rpdml0eUxpbmUgPSBgJHtwcmVmaXh9JHthY3Rpdml0eVRleHR9JHtzdWZmaXh9YDtcblxuICAgICAgLy8gQWx3YXlzIHNob3cgZnVsbCB0ZXh0IC0gd3JhcCB0byBtdWx0aXBsZSBsaW5lcyBpZiBuZWVkZWRcbiAgICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKHByZWZpeCkpO1xuICAgICAgY29uc3Qgd3JhcHBlZCA9IHRoaXMud3JhcE92ZXJsYXlMaW5lKGFjdGl2aXR5TGluZSwgbWF4V2lkdGgsIGluZGVudCk7XG4gICAgICBsaW5lcy5wdXNoKC4uLndyYXBwZWQpO1xuICAgIH1cblxuICAgIC8vIFRvcCBkaXZpZGVyXG4gICAgbGluZXMucHVzaChkaXZpZGVyKTtcblxuICAgIC8vIElucHV0IHByb21wdCBsaW5lXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBsaW5lcy5sZW5ndGg7XG4gICAgY29uc3QgaW5wdXRMaW5lID0gdGhpcy5idWlsZElucHV0TGluZSgpO1xuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IGJ5IHNwbGl0dGluZyBvbiBuZXdsaW5lc1xuICAgIC8vIEZpbHRlciBvdXQgZW1wdHkgbGluZXMgdG8gcHJldmVudCBkdXBsaWNhdGUgZGl2aWRlciBhcHBlYXJhbmNlIGZyb20gbGVhZGluZy90cmFpbGluZyBuZXdsaW5lc1xuICAgIGNvbnN0IGlucHV0TGluZXMgPSBpbnB1dExpbmUuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZSwgaWR4LCBhcnIpID0+IHtcbiAgICAgIC8vIEtlZXAgbm9uLWVtcHR5IGxpbmVzLCBidXQgcHJlc2VydmUgc2luZ2xlIGVtcHR5IGxpbmUgaWYgaXQncyBpbnRlbnRpb25hbCAoZS5nLiwgYmV0d2VlbiBjb250ZW50KVxuICAgICAgLy8gT25seSBmaWx0ZXIgbGVhZGluZy90cmFpbGluZyBlbXB0eSBsaW5lc1xuICAgICAgaWYgKGxpbmUudHJpbSgpID09PSAnJykge1xuICAgICAgICAvLyBGaWx0ZXIgaWYgaXQncyB0aGUgZmlyc3QgbGluZSAobGVhZGluZyBlbXB0eSkgb3IgbGFzdCBsaW5lICh0cmFpbGluZyBlbXB0eSlcbiAgICAgICAgaWYgKGlkeCA9PT0gMCB8fCBpZHggPT09IGFyci5sZW5ndGggLSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICAvLyBFbnN1cmUgYXQgbGVhc3Qgb25lIGxpbmUgZm9yIHRoZSBwcm9tcHRcbiAgICBpZiAoaW5wdXRMaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlucHV0TGluZXMucHVzaCh0aGVtZS5wcmltYXJ5KCc+ICcpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGlucHV0TGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBCb3R0b20gZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbmxpbmUgcGFuZWwgKHBpbm5lZCBzY3JvbGwgYm94IGZvciBsaXZlIG91dHB1dC9tZW51cylcbiAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhbmVsTGluZSBvZiB0aGlzLmlubGluZVBhbmVsKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtwYW5lbExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRlIGlubGluZSBjb250ZW50IGZyb20gc3VnZ2VzdGlvbnMvdG9nZ2xlc1xuICAgICAgbGluZXMucHVzaChkaXZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyBTbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb25zXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW2luZGV4XSE7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaW5kZXggPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4O1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ+KWuCcpIDogdGhlbWUudWkubXV0ZWQoJyAnKTtcbiAgICAgICAgY29uc3QgY21kVGV4dCA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeShzdWdnZXN0aW9uLmNvbW1hbmQpIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5jb21tYW5kKTtcbiAgICAgICAgY29uc3QgZGVzY1RleHQgPSBpc0FjdGl2ZSA/IHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24gOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21hcmtlcn0gJHtjbWRUZXh0fSDigJQgJHtkZXNjVGV4dH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIENvbXBhY3Qgc3RhdHVzIGxpbmU6IG1vZGVsIMK3IGNvbnRleHQlIMK3IHByb2ZpbGUgwrcgZGlyXG4gICAgY29uc3QgY29tcGFjdFN0YXR1cyA9IHRoaXMuYnVpbGRDb21wYWN0U3RhdHVzTGluZSgpO1xuICAgIGlmIChjb21wYWN0U3RhdHVzKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7Y29tcGFjdFN0YXR1c31gLCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIC8vIE1vZGUgdG9nZ2xlcyAoY29tcGFjdCBzaW5nbGUgbGluZSB3aGVuIHBvc3NpYmxlKVxuICAgIGNvbnN0IHRvZ2dsZUxpbmUgPSB0aGlzLmJ1aWxkVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7dG9nZ2xlTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiB7IGxpbmVzLCBwcm9tcHRJbmRleCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgc2luZ2xlIGNvbXBhY3Qgc3RhdHVzIGxpbmUgd2l0aCBhbGwgZXNzZW50aWFsIGluZm9cbiAgICogRm9ybWF0OiBkZWVwc2Vlay1yZWFzb25lciDCtyDilpHilpHilpHilpHilpHilpEgNSUgwrcgYWdpLWNvZGUgwrcgfi9HaXRIdWJcbiAgICovXG4gIHByaXZhdGUgYnVpbGRDb21wYWN0U3RhdHVzTGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIE1vZGVsIChjb21wYWN0OiBqdXN0IG1vZGVsIG5hbWUsIG5vdCBwcm92aWRlci9tb2RlbClcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLmluZm8obW9kZWwpKTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0IG1ldGVyIChjb21wYWN0IG1pbmkgYmFyKVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdXNlZCA9IGNsYW1wUGVyY2VudGFnZSh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQpO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSA1O1xuICAgICAgY29uc3QgZmlsbGVkID0gTWF0aC5yb3VuZCgodXNlZCAvIDEwMCkgKiBiYXJXaWR0aCk7XG4gICAgICBjb25zdCBlbXB0eSA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gZmlsbGVkKTtcbiAgICAgIGNvbnN0IGJhckNvbG9yID0gZ2V0Q29udGV4dENvbG9yKHVzZWQsIHtcbiAgICAgICAgZXJyb3I6IHRoZW1lLmVycm9yLFxuICAgICAgICB3YXJuaW5nOiB0aGVtZS53YXJuaW5nLFxuICAgICAgICBpbmZvOiB0aGVtZS5pbmZvLFxuICAgICAgICBzdWNjZXNzOiB0aGVtZS5zdWNjZXNzLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBiYXIgPSBiYXJDb2xvcign4paIJy5yZXBlYXQoZmlsbGVkKSkgKyB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQoZW1wdHkpKTtcbiAgICAgIHBhcnRzLnB1c2goYCR7YmFyfSAke2JhckNvbG9yKGAke3VzZWR9JWApfWApO1xuICAgIH1cblxuICAgIC8vIFByb2ZpbGUgKGlmIHNldClcbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuc2Vjb25kYXJ5KHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSk7XG4gICAgfVxuXG4gICAgLy8gRGlyZWN0b3J5IChhYmJyZXZpYXRlZClcbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgcGFydHMucHVzaCh0aGVtZS51aS5tdXRlZCh0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSkpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyDCtyAnKSkgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENocm9tZUxpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3Qgc3RhdHVzTGluZXMgPSB0aGlzLmJ1aWxkU3RhdHVzQmxvY2sobWF4V2lkdGgpO1xuICAgIGNvbnN0IG1ldGFMaW5lcyA9IHRoaXMuYnVpbGRNZXRhQmxvY2sobWF4V2lkdGgpO1xuICAgIHJldHVybiBbLi4uc3RhdHVzTGluZXMsIC4uLm1ldGFMaW5lc107XG4gIH1cblxuICBwcml2YXRlIGFiYnJldmlhdGVQYXRoKHBhdGhWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBob21lID0gaG9tZWRpcigpO1xuICAgIGlmIChob21lICYmIHBhdGhWYWx1ZS5zdGFydHNXaXRoKGhvbWUpKSB7XG4gICAgICByZXR1cm4gcGF0aFZhbHVlLnJlcGxhY2UoaG9tZSwgJ34nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhWYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gU2tpcCBzdGF0dXMgbGFiZWwgd2hlbiBzdHJlYW1pbmcgLSB0aGUgYWN0aXZpdHkgbGluZSBhbHJlYWR5IHNob3dzIHRoZSBhbmltYXRlZCBzdGF0dXNcbiAgICAvLyBUaGlzIHByZXZlbnRzIGR1cGxpY2F0ZSBcIlRoaW5raW5nLi4uXCIgZGlzcGxheXNcbiAgICBpZiAodGhpcy5tb2RlICE9PSAnc3RyZWFtaW5nJykge1xuICAgICAgY29uc3Qgc3RhdHVzTGFiZWwgPSB0aGlzLmNvbXBvc2VTdGF0dXNMYWJlbCgpO1xuICAgICAgaWYgKHN0YXR1c0xhYmVsKSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3N0YXR1cycpfSAke3RoaXMuYXBwbHlUb25lKHN0YXR1c0xhYmVsLnRleHQsIHN0YXR1c0xhYmVsLnRvbmUpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3J1bnRpbWUnKX0gJHt0aGVtZS51aS5tdXRlZCh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVXNlIGFuaW1hdGVkIGNvbnRleHQgbWV0ZXIgZm9yIHNtb290aCBjb2xvciB0cmFuc2l0aW9uc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIudXBkYXRlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuY29udGV4dE1ldGVyLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2VnbWVudHMubGVuZ3RoID4gMCA/IHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCkgOiBbXTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNZXRhQmxvY2sobWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdwcm9maWxlJywgdGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IC8gJHt0aGlzLnN0YXR1c01ldGEubW9kZWx9YFxuICAgICAgOiB0aGlzLnN0YXR1c01ldGEubW9kZWwgfHwgdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyO1xuICAgIGlmIChtb2RlbCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdtb2RlbCcsIG1vZGVsLCAnaW5mbycpKTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdkaXInLCB0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSksICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLndyaXRlcykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd3cml0ZXMnLCB0aGlzLnN0YXR1c01ldGEud3JpdGVzLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd0b29scycsIHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Nlc3Npb24nLCB0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS52ZXJzaW9uKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2J1aWxkJywgYHYke3RoaXMuc3RhdHVzTWV0YS52ZXJzaW9ufWAsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgUkwgYWdlbnQgc3RhdHVzIHdoZW4gZHVhbC1STCBtb2RlIGlzIGFjdGl2ZVxuICAgIGNvbnN0IHJsU2VnbWVudHMgPSB0aGlzLmJ1aWxkUkxTdGF0dXNTZWdtZW50cygpO1xuICAgIGlmIChybFNlZ21lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goLi4ucmxTZWdtZW50cyk7XG4gICAgfVxuXG4gICAgLy8gQWRkIHNlY3VyZSBUQU8gdG9vbHMgc3RhdHVzXG4gICAgY29uc3Qgc2VjdXJlVG9vbHNTZWdtZW50cyA9IHRoaXMuYnVpbGRTZWN1cmVUb29sc1NlZ21lbnRzKCk7XG4gICAgaWYgKHNlY3VyZVRvb2xzU2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCguLi5zZWN1cmVUb29sc1NlZ21lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgUkwgYWdlbnQgc3RhdHVzIHNlZ21lbnRzIGZvciBkaXNwbGF5IGR1cmluZyBkdWFsLVJMIGV4ZWN1dGlvbi5cbiAgICogU2hvd3M6IHRvdXJuYW1lbnQgc2NvcmVib2FyZCwgYWN0aXZlIGFnZW50LCBtb2R1bGUvc3RlcCBwcm9ncmVzcywgYW5kIHNjb3Jlcy5cbiAgICovXG4gIHByaXZhdGUgYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBybCA9IHRoaXMucmxTdGF0dXM7XG5cbiAgICAvLyBPbmx5IHNob3cgUkwgc3RhdHVzIHdoZW4gdGhlcmUncyBtZWFuaW5nZnVsIGRhdGFcbiAgICBpZiAoIXJsLmFjdGl2ZVZhcmlhbnQgJiYgIXJsLndpbnMgJiYgIXJsLmN1cnJlbnRNb2R1bGUpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICAvLyBUb3VybmFtZW50IHNjb3JlYm9hcmQgKGFsd2F5cyBzaG93IHdoZW4gd2lucyBleGlzdClcbiAgICBpZiAocmwud2lucyAmJiAocmwud2lucy5wcmltYXJ5ID4gMCB8fCBybC53aW5zLnJlZmluZXIgPiAwIHx8IHJsLndpbnMudGllcyA+IDApKSB7XG4gICAgICBjb25zdCB0b3RhbEdhbWVzID0gcmwud2lucy5wcmltYXJ5ICsgcmwud2lucy5yZWZpbmVyICsgcmwud2lucy50aWVzO1xuICAgICAgY29uc3QgbGVhZGVyID0gcmwud2lucy5wcmltYXJ5ID4gcmwud2lucy5yZWZpbmVyID8gJ3ByaW1hcnknIDpcbiAgICAgICAgICAgICAgICAgICAgIHJsLndpbnMucmVmaW5lciA+IHJsLndpbnMucHJpbWFyeSA/ICdyZWZpbmVyJyA6ICd0aWUnO1xuXG4gICAgICAvLyBTY29yZWJvYXJkIHdpdGggY29sb3JzIGJhc2VkIG9uIGxlYWRlclxuICAgICAgY29uc3QgcENvbG9yID0gbGVhZGVyID09PSAncHJpbWFyeScgPyB0aGVtZS5zdWNjZXNzIDogdGhlbWUuaW5mbztcbiAgICAgIGNvbnN0IHJDb2xvciA9IGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUuc3VjY2VzcyA6IHRoZW1lLndhcm5pbmc7XG4gICAgICBjb25zdCBwU2NvcmUgPSBwQ29sb3IoYCR7cmwud2lucy5wcmltYXJ5fWApO1xuICAgICAgY29uc3QgclNjb3JlID0gckNvbG9yKGAke3JsLndpbnMucmVmaW5lcn1gKTtcblxuICAgICAgLy8gVHJvcGh5IGZvciBsZWFkZXJcbiAgICAgIGNvbnN0IHRyb3BoeSA9IGxlYWRlciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbygn8J+PhicpIDpcbiAgICAgICAgICAgICAgICAgICAgIGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUud2FybmluZygn8J+PhicpIDogJ+Kalu+4jyc7XG5cbiAgICAgIC8vIFdpbiBzdHJlYWsgaW5kaWNhdG9yXG4gICAgICBjb25zdCBzdHJlYWtUZXh0ID0gcmwuc3RyZWFrICYmIHJsLnN0cmVhayA+IDEgPyB0aGVtZS51aS5tdXRlZChgIPCflKUke3JsLnN0cmVha31gKSA6ICcnO1xuXG4gICAgICBzZWdtZW50cy5wdXNoKGAke3Ryb3BoeX0ke3BTY29yZX0ke3RoZW1lLnVpLm11dGVkKCc6Jyl9JHtyU2NvcmV9JHtzdHJlYWtUZXh0fWApO1xuXG4gICAgICAvLyBQcm9ncmVzcyBiYXIgc2hvd2luZyByZWxhdGl2ZSB3aW5zXG4gICAgICBpZiAodG90YWxHYW1lcyA+IDApIHtcbiAgICAgICAgY29uc3QgYmFyV2lkdGggPSA4O1xuICAgICAgICBjb25zdCBwQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucHJpbWFyeSAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCByQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucmVmaW5lciAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCB0QmFycyA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gcEJhcnMgLSByQmFycyk7XG4gICAgICAgIGNvbnN0IGJhciA9IHRoZW1lLmluZm8oJ+KWiCcucmVwZWF0KHBCYXJzKSkgK1xuICAgICAgICAgICAgICAgICAgICB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQodEJhcnMpKSArXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lLndhcm5pbmcoJ+KWiCcucmVwZWF0KHJCYXJzKSk7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goYFske2Jhcn1dYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWN0aXZlIHZhcmlhbnQgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmFjdGl2ZVZhcmlhbnQpIHtcbiAgICAgIGNvbnN0IGlzUGFyYWxsZWwgPSBybC5wYXJhbGxlbEV4ZWN1dGlvbjtcbiAgICAgIGlmIChpc1BhcmFsbGVsKSB7XG4gICAgICAgIC8vIEJvdGggcnVubmluZyBpbiBwYXJhbGxlbFxuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3RoZW1lLmluZm8oJ+KaoVAnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oilJyl9ICR7dGhlbWUud2FybmluZygn4pqhUicpfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFyaWFudEljb24gPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAn4pa2JyA6ICfilrcnO1xuICAgICAgICBjb25zdCB2YXJpYW50TGFiZWwgPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAnUCcgOiAnUic7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRDb2xvciA9IHJsLmFjdGl2ZVZhcmlhbnQgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8gOiB0aGVtZS53YXJuaW5nO1xuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3ZhcmlhbnRJY29ufSR7dmFyaWFudENvbG9yKHZhcmlhbnRMYWJlbCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTGFzdCB3aW5uZXIgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmxhc3RXaW5uZXIgJiYgcmwubGFzdFdpbm5lciAhPT0gJ3RpZScpIHtcbiAgICAgIGNvbnN0IHdpbm5lckljb24gPSBybC5sYXN0V2lubmVyID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvKCfinJNQJykgOiB0aGVtZS53YXJuaW5nKCfinJNSJyk7XG4gICAgICBzZWdtZW50cy5wdXNoKHdpbm5lckljb24pO1xuICAgIH0gZWxzZSBpZiAocmwubGFzdFdpbm5lciA9PT0gJ3RpZScpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQoJ+KJiCcpKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IG1vZHVsZS9zdGVwIChjb21wYWN0KVxuICAgIGlmIChybC5jdXJyZW50TW9kdWxlIHx8IHJsLmN1cnJlbnRTdGVwKSB7XG4gICAgICBjb25zdCBzdGVwVGV4dCA9IHJsLmN1cnJlbnRTdGVwIHx8IHJsLmN1cnJlbnRNb2R1bGUgfHwgJyc7XG4gICAgICBpZiAoc3RlcFRleHQpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZCh0aGlzLnRydW5jYXRlTWlkZGxlKHN0ZXBUZXh0LCAxNSkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcm9ncmVzcyBpbmRpY2F0b3IgKHN0ZXBzIGNvbXBsZXRlZCAvIHRvdGFsKVxuICAgIGlmICh0eXBlb2Ygcmwuc3RlcHNDb21wbGV0ZWQgPT09ICdudW1iZXInICYmIHR5cGVvZiBybC50b3RhbFN0ZXBzID09PSAnbnVtYmVyJyAmJiBybC50b3RhbFN0ZXBzID4gMCkge1xuICAgICAgY29uc3QgcGN0ID0gTWF0aC5yb3VuZCgocmwuc3RlcHNDb21wbGV0ZWQgLyBybC50b3RhbFN0ZXBzKSAqIDEwMCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKGAke3BjdH0lYCkpO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgcmV3YXJkIHNjb3JlcyAoY29tcGFjdCwgb25seSBkdXJpbmcgYWN0aXZlIGNvbXBhcmlzb24pXG4gICAgaWYgKHJsLnNjb3JlcyAmJiAodHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInKSkge1xuICAgICAgY29uc3QgcFNjb3JlID0gdHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyA/IHJsLnNjb3Jlcy5wcmltYXJ5LnRvRml4ZWQoMikgOiAnLSc7XG4gICAgICBjb25zdCByU2NvcmUgPSB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInID8gcmwuc2NvcmVzLnJlZmluZXIudG9GaXhlZCgyKSA6ICctJztcbiAgICAgIGNvbnN0IHBWYWwgPSBybC5zY29yZXMucHJpbWFyeSA/PyAwO1xuICAgICAgY29uc3QgclZhbCA9IHJsLnNjb3Jlcy5yZWZpbmVyID8/IDA7XG4gICAgICBjb25zdCBwRGlzcGxheSA9IHBWYWwgPiByVmFsID8gdGhlbWUuc3VjY2VzcyhwU2NvcmUpIDogdGhlbWUuaW5mbyhwU2NvcmUpO1xuICAgICAgY29uc3QgckRpc3BsYXkgPSByVmFsID4gcFZhbCA/IHRoZW1lLnN1Y2Nlc3MoclNjb3JlKSA6IHRoZW1lLndhcm5pbmcoclNjb3JlKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7cERpc3BsYXl9JHt0aGVtZS51aS5tdXRlZCgnLycpfSR7ckRpc3BsYXl9YCk7XG4gICAgfVxuXG4gICAgLy8gSHVtYW4gYWNjdXJhY3kgaW5kaWNhdG9yIChyZWxhdGl2ZSByYW5raW5nIHF1YWxpdHkpXG4gICAgaWYgKHJsLmFjY3VyYWN5ICYmICh0eXBlb2YgcmwuYWNjdXJhY3kucHJpbWFyeSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHJsLmFjY3VyYWN5LnJlZmluZXIgPT09ICdudW1iZXInKSkge1xuICAgICAgY29uc3QgcEFjYyA9IHJsLmFjY3VyYWN5LnByaW1hcnkgIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQocmwuYWNjdXJhY3kucHJpbWFyeSAqIDEwMCkgOiBudWxsO1xuICAgICAgY29uc3QgckFjYyA9IHJsLmFjY3VyYWN5LnJlZmluZXIgIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQocmwuYWNjdXJhY3kucmVmaW5lciAqIDEwMCkgOiBudWxsO1xuICAgICAgY29uc3QgcERpc3BsYXkgPSBwQWNjICE9PSBudWxsID8gdGhlbWUuaW5mbyhgUCR7cEFjY30lYCkgOiBudWxsO1xuICAgICAgY29uc3QgckRpc3BsYXkgPSByQWNjICE9PSBudWxsID8gdGhlbWUud2FybmluZyhgUiR7ckFjY30lYCkgOiBudWxsO1xuICAgICAgY29uc3QgcGFydHMgPSBbcERpc3BsYXksIHJEaXNwbGF5XS5maWx0ZXIoQm9vbGVhbikuam9pbih0aGVtZS51aS5tdXRlZCgnfCcpKTtcbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICBzZWdtZW50cy5wdXNoKHBhcnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VnbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgc2VjdXJlIFRBTyB0b29scyBzdGF0dXMgc2VnbWVudHMgZm9yIGRpc3BsYXkuXG4gICAqIFNob3dzOiB0b29sa2l0IHN0YXR1cywgdG9vbCBpbnZvY2F0aW9uIGNvdW50cywgYW5kIGxhc3QgdG9vbCB1c2VkLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFNlY3VyZVRvb2xzU2VnbWVudHMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHN0ID0gdGhpcy5zZWN1cmVUb29sc1N0YXR1cztcblxuICAgIC8vIE9ubHkgc2hvdyBzdGF0dXMgd2hlbiB0b29scyBoYXZlIGJlZW4gdXNlZFxuICAgIGlmICghc3QudG90YWxJbnZvY2F0aW9ucyAmJiAhc3QubGFzdFRvb2xVc2VkKSB7XG4gICAgICAvLyBTaG93IHRvb2xraXQgcmVhZHkgaW5kaWNhdG9yIGV2ZW4gd2hlbiBubyBpbnZvY2F0aW9uc1xuICAgICAgaWYgKHN0LnRvb2xraXRSZWFkeSkge1xuICAgICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnN1Y2Nlc3MoJ/CflJInKSArIHRoZW1lLnVpLm11dGVkKCcgVEFPJykpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIC8vIFNlY3VyaXR5IGluZGljYXRvciB3aXRoIHNhbml0aXphdGlvbiBzdGF0dXNcbiAgICBjb25zdCBzZWNJY29uID0gc3Quc2FuaXRpemF0aW9uQWN0aXZlID8gdGhlbWUuc3VjY2Vzcygn8J+UkicpIDogdGhlbWUud2FybmluZygn4pqgJyk7XG4gICAgc2VnbWVudHMucHVzaChzZWNJY29uKTtcblxuICAgIC8vIFRvb2wgc3RhdHVzIGluZGljYXRvcnMgKGNvbXBhY3QgZm9ybWF0KVxuICAgIGNvbnN0IHRvb2xJbmRpY2F0b3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHN0LmV4ZWN1dGU/LmFjdGl2ZSkge1xuICAgICAgY29uc3QgZXhlY0ljb24gPSBzdC5leGVjdXRlLmxhc3RFeGl0Q29kZSA9PT0gMCA/IHRoZW1lLnN1Y2Nlc3MoJ+KckycpIDogdGhlbWUuZXJyb3IoJ+KclycpO1xuICAgICAgY29uc3QgZXhlY0NvdW50ID0gc3QuZXhlY3V0ZS5leGVjQ291bnQgfHwgMDtcbiAgICAgIHRvb2xJbmRpY2F0b3JzLnB1c2goYCR7dGhlbWUuaW5mbygnRXgnKX0ke2V4ZWNJY29ufSR7ZXhlY0NvdW50ID4gMSA/IHRoZW1lLnVpLm11dGVkKGDDlyR7ZXhlY0NvdW50fWApIDogJyd9YCk7XG4gICAgfVxuXG4gICAgaWYgKHN0LnByb2JlPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN2Y0NvdW50ID0gc3QucHJvYmUuc2VydmljZXNGb3VuZCB8fCAwO1xuICAgICAgdG9vbEluZGljYXRvcnMucHVzaChgJHtjaGFsay5jeWFuKCdQcicpfSR7dGhlbWUuc3VjY2Vzcygn4pyTJyl9JHtzdmNDb3VudCA+IDAgPyB0aGVtZS51aS5tdXRlZChgWyR7c3ZjQ291bnR9XWApIDogJyd9YCk7XG4gICAgfVxuXG4gICAgaWYgKHN0LnN0YXRlPy5hY3RpdmUpIHtcbiAgICAgIGNvbnN0IHN0YXRlSWNvbiA9IHN0LnN0YXRlLnBlcnNpc3RlbnQgPyB0aGVtZS5zdWNjZXNzKCfwn5K+JykgOiB0aGVtZS5pbmZvKCfwn5OdJyk7XG4gICAgICBjb25zdCBrZXlzQ291bnQgPSBzdC5zdGF0ZS5rZXlzU3RvcmVkIHx8IDA7XG4gICAgICB0b29sSW5kaWNhdG9ycy5wdXNoKGAke3N0YXRlSWNvbn0ke2tleXNDb3VudCA+IDAgPyB0aGVtZS51aS5tdXRlZChgJHtrZXlzQ291bnR9a2ApIDogJyd9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRvb2xJbmRpY2F0b3JzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godG9vbEluZGljYXRvcnMuam9pbih0aGVtZS51aS5tdXRlZCgnwrcnKSkpO1xuICAgIH1cblxuICAgIC8vIFRvdGFsIGludm9jYXRpb25zIGNvdW50ZXJcbiAgICBpZiAoc3QudG90YWxJbnZvY2F0aW9ucyAmJiBzdC50b3RhbEludm9jYXRpb25zID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZChgzqMke3N0LnRvdGFsSW52b2NhdGlvbnN9YCkpO1xuICAgIH1cblxuICAgIC8vIExhc3QgdG9vbCB1c2VkIGluZGljYXRvclxuICAgIGlmIChzdC5sYXN0VG9vbFVzZWQpIHtcbiAgICAgIGNvbnN0IHRvb2xDb2xvcnM6IFJlY29yZDxzdHJpbmcsIChzOiBzdHJpbmcpID0+IHN0cmluZz4gPSB7XG4gICAgICAgIEV4ZWN1dGU6IHRoZW1lLmluZm8sXG4gICAgICAgIFByb2JlOiAoczogc3RyaW5nKSA9PiBjaGFsay5jeWFuKHMpLFxuICAgICAgICBTdGF0ZTogdGhlbWUuc3VjY2VzcyxcbiAgICAgICAgVHJhbnNmb3JtOiB0aGVtZS53YXJuaW5nLFxuICAgICAgICBUYW9PcHM6IChzOiBzdHJpbmcpID0+IGNoYWxrLm1hZ2VudGEocyksXG4gICAgICB9O1xuICAgICAgY29uc3QgY29sb3IgPSB0b29sQ29sb3JzW3N0Lmxhc3RUb29sVXNlZF0gfHwgdGhlbWUudWkubXV0ZWQ7XG4gICAgICBzZWdtZW50cy5wdXNoKGNvbG9yKGDihpIke3N0Lmxhc3RUb29sVXNlZC5zbGljZSgwLCAyKX1gKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRydW5jYXRlIGEgc3RyaW5nIGluIHRoZSBtaWRkbGUsIHNob3dpbmcgc3RhcnQgYW5kIGVuZCB3aXRoIGVsbGlwc2lzLlxuICAgKi9cbiAgcHJpdmF0ZSB0cnVuY2F0ZU1pZGRsZSh0ZXh0OiBzdHJpbmcsIG1heExlbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4TGVuKSByZXR1cm4gdGV4dDtcbiAgICBjb25zdCBrZWVwTGVuID0gTWF0aC5mbG9vcigobWF4TGVuIC0gMykgLyAyKTtcbiAgICByZXR1cm4gYCR7dGV4dC5zbGljZSgwLCBrZWVwTGVuKX0uLi4ke3RleHQuc2xpY2UoLWtlZXBMZW4pfWA7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udHJvbExpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b2dnbGVMaW5lID0gdGhpcy5idWlsZFRvZ2dsZUxpbmUoKTtcbiAgICBpZiAodG9nZ2xlTGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnbW9kZXMnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oC6Jyl9ICR7dG9nZ2xlTGluZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydGN1dExpbmUgPSB0aGlzLmJ1aWxkU2hvcnRjdXRMaW5lKCk7XG4gICAgaWYgKHNob3J0Y3V0TGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgna2V5cycpfSAgJHtzaG9ydGN1dExpbmV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9nZ2xlczogQXJyYXk8e1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIG9uOiBib29sZWFuO1xuICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICBob3RrZXk/OiBzdHJpbmcgfCBudWxsO1xuICAgIH0+ID0gW107XG5cbiAgICBjb25zdCBhZGRUb2dnbGUgPSAobGFiZWw6IHN0cmluZywgb246IGJvb2xlYW4sIGhvdGtleT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpID0+IHtcbiAgICAgIHRvZ2dsZXMucHVzaCh7IGxhYmVsLCBvbiwgaG90a2V5OiB0aGlzLmZvcm1hdEhvdGtleShob3RrZXkpLCB2YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgLy8gQWxwaGFaZXJvIG1vZGU6IHRvZ2dsZSBiZXR3ZWVuIE5vcm1hbCBhbmQgQWxwaGFaZXJvIGR1YWwgdG91cm5hbWVudCBSTFxuICAgIGNvbnN0IGFscGhhWmVyb0FjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYWxwaGFaZXJvRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBhZGRUb2dnbGUoJ01vZGUnLCB0cnVlLCB0aGlzLnRvZ2dsZVN0YXRlLmFscGhhWmVyb0hvdGtleSwgYWxwaGFaZXJvQWN0aXZlID8gJ0FscGhhWmVybycgOiAnTm9ybWFsJyk7XG5cbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCBhcHByb3ZhbEFjdGl2ZSA9IGFwcHJvdmFsTW9kZSAhPT0gJ2F1dG8nO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBcHByb3ZhbHMnLFxuICAgICAgYXBwcm92YWxBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXksXG4gICAgICBhcHByb3ZhbE1vZGUgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdhc2snXG4gICAgKTtcblxuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBhZGRUb2dnbGUoXG4gICAgICAnQXV0bycsXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSA/ICdvbicgOiAnb2ZmJ1xuICAgICk7XG5cbiAgICBjb25zdCB0aGlua2luZ0xhYmVsUmF3ID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpO1xuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPVxuICAgICAgdGhpbmtpbmdMYWJlbFJhdy50b0xvd2VyQ2FzZSgpID09PSAnZXh0ZW5kZWQnID8gJ2RlZXAnIDogdGhpbmtpbmdMYWJlbFJhdyB8fCAnYmFsYW5jZWQnO1xuICAgIGNvbnN0IHRoaW5raW5nQWN0aXZlID0gdGhpbmtpbmdMYWJlbC5sZW5ndGggPiAwO1xuICAgIGFkZFRvZ2dsZSgnVGhpbmtpbmcnLCB0aGlua2luZ0FjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSwgdGhpbmtpbmdMYWJlbCk7XG5cbiAgICBjb25zdCBidWlsZExpbmUgPSAoaW5jbHVkZUhvdGtleXM6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlVGV4dCA9IHRvZ2dsZS5vbiA/IHRoZW1lLnN1Y2Nlc3ModG9nZ2xlLnZhbHVlIHx8ICdvbicpIDogdGhlbWUudWkubXV0ZWQodG9nZ2xlLnZhbHVlIHx8ICdvZmYnKTtcbiAgICAgICAgICBjb25zdCBob3RrZXlUZXh0ID1cbiAgICAgICAgICAgIGluY2x1ZGVIb3RrZXlzICYmIHRvZ2dsZS5ob3RrZXkgPyB0aGVtZS51aS5tdXRlZChgIFske3RvZ2dsZS5ob3RrZXl9XWApIDogJyc7XG4gICAgICAgICAgcmV0dXJuIGAke3RoZW1lLnVpLm11dGVkKGAke3RvZ2dsZS5sYWJlbH06YCl9ICR7c3RhdGVUZXh0fSR7aG90a2V5VGV4dH1gO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbih0aGVtZS51aS5tdXRlZCgnICAnKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBsZXQgbGluZSA9IGJ1aWxkTGluZSh0cnVlKTtcblxuICAgIC8vIFJlY29yZCB3aGljaCBob3RrZXlzIGFyZSBhY3R1YWxseSBzaG93biBzbyB0aGUgc2hvcnRjdXQgbGluZSBjYW4gYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZSA9IG5ldyBTZXQoXG4gICAgICB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+ICh0b2dnbGUuaG90a2V5ID8gdG9nZ2xlLmhvdGtleSA6IG51bGwpKVxuICAgICAgICAuZmlsdGVyKChrZXkpOiBrZXkgaXMgc3RyaW5nID0+IEJvb2xlYW4oa2V5KSlcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIGxpbmUgaXMgdG9vIHdpZGUsIGRyb3AgaG90a2V5IGhpbnRzIHRvIHByZXNlcnZlIGFsbCB0b2dnbGUgbGFiZWxzXG4gICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChsaW5lKSA+IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICAgIGxpbmUgPSBidWlsZExpbmUoZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lLnRyaW0oKSA/IGxpbmUgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNob3J0Y3V0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IGFkZEhvdGtleSA9IChsYWJlbDogc3RyaW5nLCBjb21ibz86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuZm9ybWF0SG90a2V5KGNvbWJvKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5oYXMobm9ybWFsaXplZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChgJHt0aGVtZS5pbmZvKG5vcm1hbGl6ZWQpfSAke3RoZW1lLnVpLm11dGVkKGxhYmVsKX1gKTtcbiAgICB9O1xuXG4gICAgLy8gQ29yZSBjb250cm9sc1xuICAgIGFkZEhvdGtleSgnaW50ZXJydXB0JywgJ0N0cmwrQycpO1xuICAgIGFkZEhvdGtleSgnY2xlYXIgaW5wdXQnLCAnQ3RybCtVJyk7XG5cbiAgICAvLyBGZWF0dXJlIHRvZ2dsZXMgKG9ubHkgaWYgaG90a2V5cyBhcmUgZGVmaW5lZClcbiAgICBhZGRIb3RrZXkoJ2F1dG8nLCB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSk7XG4gICAgYWRkSG90a2V5KCd0aGlua2luZycsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgnbW9kZScsIHRoaXMudG9nZ2xlU3RhdGUuYWxwaGFaZXJvSG90a2V5KTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICAgJykpO1xuICB9XG5cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRMaW5lKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIC8vIENsZWFuIHBhc3RlIGluZGljYXRvciAtIGp1c3Qgc2hvdyB0aGUgc3VtbWFyeSwgbm8gYWN0aW9uIGhpbnRzXG4gICAgICBjb25zdCBsaW5lc1RleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzID09PSAxID8gJzEgbGluZScgOiBgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzfSBsaW5lc2A7XG4gICAgICBjb25zdCBjaGFyc1RleHQgPSB0eXBlb2YgdGhpcy5jb2xsYXBzZWRQYXN0ZS5jaGFycyA9PT0gJ251bWJlcicgP1xuICAgICAgICBgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfSBjaGFyc2AgOlxuICAgICAgICBgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfWA7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gdGhlbWUuc3VjY2VzcyhgW/Cfk4sgJHtsaW5lc1RleHR9LCAke2NoYXJzVGV4dH1dYCk7XG4gICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX0ke3N1bW1hcnl9YCwgdGhpcy5zYWZlV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgLy8gV2hpbGUgZGV0ZWN0aW5nIHBhc3RlIChvciBpbiBidXJzdCBkZXRlY3Rpb24gcGhhc2UpLCBzdXBwcmVzcyBidWZmZXIgZGlzcGxheVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgaWYgKHRoaXMuaW5QbGFpblBhc3RlIHx8IHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSB8fCBidXJzdEFjdGl2ZSkge1xuICAgICAgY29uc3QgY2hhcnMgPSB0aGlzLnBsYWluUGFzdGVCdWZmZXIubGVuZ3RoIHx8IHRoaXMucGFzdGVCdWZmZXIubGVuZ3RoIHx8IHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlci5sZW5ndGggfHwgMDtcbiAgICAgIGlmIChjaGFycyA+IDApIHtcbiAgICAgICAgY29uc3QgaW5kaWNhdG9yID0gdGhlbWUudWkubXV0ZWQoYFvwn5OLIHBhc3RpbmcuLi4gJHtjaGFyc30gY2hhcnNdYCk7XG4gICAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfSR7aW5kaWNhdG9yfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgICAgfVxuICAgICAgLy8gRXZlbiBpZiBubyBjaGFycyB5ZXQsIHNob3cgZW1wdHkgcHJvbXB0IGR1cmluZyBidXJzdCB0byBwcmV2ZW50IGZsaWNrZXJcbiAgICAgIGlmIChidXJzdEFjdGl2ZSkge1xuICAgICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX1gLCB0aGlzLnNhZmVXaWR0aCgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSB1c2VzIHNpbXBsZSAnPicgcHJvbXB0XG4gICAgY29uc3QgcHJvbXB0ID0gdGhlbWUucHJpbWFyeSgnPiAnKTtcbiAgICBjb25zdCBwcm9tcHRXaWR0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChwcm9tcHQpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBjb250aW51YXRpb25JbmRlbnQgPSAnICAnOyAvLyAyIHNwYWNlcyBmb3IgY29udGludWF0aW9uIGxpbmVzXG4gICAgY29uc3QgY29udGludWF0aW9uV2lkdGggPSBjb250aW51YXRpb25JbmRlbnQubGVuZ3RoO1xuXG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgLSBzcGxpdCBidWZmZXIgb24gbmV3bGluZXMgZmlyc3RcbiAgICAvLyBJbiBzZWNyZXQgbW9kZSwgbWFzayBhbGwgY2hhcmFjdGVycyB3aXRoIGJ1bGxldHNcbiAgICBjb25zdCByYXdCdWZmZXIgPSB0aGlzLmJ1ZmZlci5yZXBsYWNlKC9cXHIvZywgJ1xcbicpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLnNlY3JldE1vZGUgPyAn4oCiJy5yZXBlYXQocmF3QnVmZmVyLmxlbmd0aCkgOiByYXdCdWZmZXI7XG4gICAgY29uc3QgYnVmZmVyTGluZXMgPSBub3JtYWxpemVkLnNwbGl0KCdcXG4nKTtcblxuICAgIC8vIFdyYXAgZWFjaCBsb2dpY2FsIGxpbmUgdG8gZml0IHRlcm1pbmFsIHdpZHRoLCBleHBhbmRpbmcgdmVydGljYWxseVxuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgdG90YWxDaGFycyA9IDA7XG4gICAgbGV0IGN1cnNvckxpbmUgPSAwO1xuICAgIGxldCBjdXJzb3JDb2wgPSAwO1xuICAgIGxldCBmb3VuZEN1cnNvciA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgbGluZUluZGV4ID0gMDsgbGluZUluZGV4IDwgYnVmZmVyTGluZXMubGVuZ3RoOyBsaW5lSW5kZXgrKykge1xuICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlckxpbmVzW2xpbmVJbmRleF0gPz8gJyc7XG4gICAgICBjb25zdCBpc0ZpcnN0TG9naWNhbExpbmUgPSBsaW5lSW5kZXggPT09IDA7XG4gICAgICBjb25zdCBsaW5lU3RhcnRDaGFyID0gdG90YWxDaGFycztcblxuICAgICAgLy8gRGV0ZXJtaW5lIGF2YWlsYWJsZSB3aWR0aCBmb3IgdGhpcyBsaW5lXG4gICAgICBjb25zdCBmaXJzdExpbmVXaWR0aCA9IG1heFdpZHRoIC0gcHJvbXB0V2lkdGg7XG4gICAgICBjb25zdCBjb250TGluZVdpZHRoID0gbWF4V2lkdGggLSBjb250aW51YXRpb25XaWR0aDtcblxuICAgICAgLy8gV3JhcCB0aGlzIGxvZ2ljYWwgbGluZSBpbnRvIGRpc3BsYXkgbGluZXNcbiAgICAgIGxldCByZW1haW5pbmcgPSBsaW5lO1xuICAgICAgbGV0IGlzRmlyc3REaXNwbGF5TGluZSA9IHRydWU7XG5cbiAgICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoID4gMCB8fCBpc0ZpcnN0RGlzcGxheUxpbmUpIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSAoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBmaXJzdExpbmVXaWR0aCA6IGNvbnRMaW5lV2lkdGg7XG4gICAgICAgIGNvbnN0IGNodW5rID0gcmVtYWluaW5nLnNsaWNlKDAsIGF2YWlsYWJsZVdpZHRoKTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnNsaWNlKGF2YWlsYWJsZVdpZHRoKTtcblxuICAgICAgICAvLyBCdWlsZCB0aGUgZGlzcGxheSBsaW5lXG4gICAgICAgIGxldCBkaXNwbGF5TGluZTogc3RyaW5nO1xuICAgICAgICBpZiAoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7cHJvbXB0fSR7Y2h1bmt9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5TGluZSA9IGAke2NvbnRpbnVhdGlvbkluZGVudH0ke2NodW5rfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmFjayBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgICAgIGNvbnN0IGNodW5rU3RhcnQgPSBsaW5lU3RhcnRDaGFyICsgKGxpbmUubGVuZ3RoIC0gcmVtYWluaW5nLmxlbmd0aCAtIGNodW5rLmxlbmd0aCk7XG4gICAgICAgICAgY29uc3QgY2h1bmtFbmQgPSBjaHVua1N0YXJ0ICsgY2h1bmsubGVuZ3RoO1xuICAgICAgICAgIGlmICh0aGlzLmN1cnNvciA+PSBjaHVua1N0YXJ0ICYmIHRoaXMuY3Vyc29yIDw9IGNodW5rRW5kKSB7XG4gICAgICAgICAgICBjdXJzb3JMaW5lID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldEluQ2h1bmsgPSB0aGlzLmN1cnNvciAtIGNodW5rU3RhcnQ7XG4gICAgICAgICAgICBjdXJzb3JDb2wgPSAoKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpID8gcHJvbXB0V2lkdGggOiBjb250aW51YXRpb25XaWR0aCkgKyBvZmZzZXRJbkNodW5rO1xuICAgICAgICAgICAgZm91bmRDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdC5wdXNoKGRpc3BsYXlMaW5lKTtcbiAgICAgICAgaXNGaXJzdERpc3BsYXlMaW5lID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgbm90aGluZyBsZWZ0IGFuZCB0aGlzIHdhcyBhbiBlbXB0eSBsaW5lLCB3ZSBhbHJlYWR5IGFkZGVkIGl0XG4gICAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoID09PSAwICYmIGNodW5rLmxlbmd0aCA9PT0gMCkgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHRvdGFsQ2hhcnMgKz0gbGluZS5sZW5ndGggKyAxOyAvLyArMSBmb3IgdGhlIG5ld2xpbmUgc2VwYXJhdG9yXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGN1cnNvciBhdCB2ZXJ5IGVuZFxuICAgIGlmICghZm91bmRDdXJzb3IpIHtcbiAgICAgIGN1cnNvckxpbmUgPSBNYXRoLm1heCgwLCByZXN1bHQubGVuZ3RoIC0gMSk7XG4gICAgICBjb25zdCBsYXN0TGluZSA9IHJlc3VsdFtjdXJzb3JMaW5lXSA/PyAnJztcbiAgICAgIGN1cnNvckNvbCA9IHRoaXMudmlzaWJsZUxlbmd0aChsYXN0TGluZSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGN1cnNvciBoaWdobGlnaHQgdG8gdGhlIGFwcHJvcHJpYXRlIHBvc2l0aW9uXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YXJnZXRMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY29uc3QgdmlzaWJsZVBhcnQgPSB0aGlzLnN0cmlwQW5zaSh0YXJnZXRMaW5lKTtcbiAgICAgIGNvbnN0IGN1cnNvclBvcyA9IE1hdGgubWluKGN1cnNvckNvbCwgdmlzaWJsZVBhcnQubGVuZ3RoKTtcblxuICAgICAgLy8gUmVidWlsZCB0aGUgbGluZSB3aXRoIGN1cnNvciBoaWdobGlnaHRcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHZpc2libGVQYXJ0LnNsaWNlKDAsIGN1cnNvclBvcyk7XG4gICAgICBjb25zdCBhdCA9IHZpc2libGVQYXJ0LmNoYXJBdChjdXJzb3JQb3MpIHx8ICcgJztcbiAgICAgIGNvbnN0IGFmdGVyID0gdmlzaWJsZVBhcnQuc2xpY2UoY3Vyc29yUG9zICsgMSk7XG5cbiAgICAgIC8vIFByZXNlcnZlIHRoZSBwcm9tcHQvaW5kZW50IHN0eWxpbmdcbiAgICAgIGNvbnN0IHByZWZpeCA9IGN1cnNvckxpbmUgPT09IDAgPyBwcm9tcHQgOiBjb250aW51YXRpb25JbmRlbnQ7XG4gICAgICBjb25zdCB0ZXh0UGFydCA9IGN1cnNvckxpbmUgPT09IDAgPyBiZWZvcmUuc2xpY2UocHJvbXB0V2lkdGgpIDogYmVmb3JlLnNsaWNlKGNvbnRpbnVhdGlvbldpZHRoKTtcbiAgICAgIHJlc3VsdFtjdXJzb3JMaW5lXSA9IGAke3ByZWZpeH0ke3RleHRQYXJ0fSR7RVNDLlJFVkVSU0V9JHthdH0ke0VTQy5SRVNFVH0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgY3Vyc29yIGNvbHVtbiBmb3IgdGVybWluYWwgcG9zaXRpb25pbmdcbiAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBjdXJzb3JDb2wgKyAxO1xuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRJbnB1dFdpbmRvdyhhdmFpbGFibGU6IG51bWJlcik6IHsgdGV4dDogc3RyaW5nOyBjdXJzb3I6IG51bWJlciB9IHtcbiAgICBpZiAoYXZhaWxhYmxlIDw9IDApIHtcbiAgICAgIHJldHVybiB7IHRleHQ6ICcnLCBjdXJzb3I6IDAgfTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmJ1ZmZlci5yZXBsYWNlKC9cXHIvZywgJ1xcbicpO1xuICAgIGNvbnN0IGN1cnNvckluZGV4ID0gTWF0aC5taW4odGhpcy5jdXJzb3IsIG5vcm1hbGl6ZWQubGVuZ3RoKTtcblxuICAgIGxldCBvZmZzZXQgPSB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0O1xuICAgIGlmIChjdXJzb3JJbmRleCA8IG9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gY3Vyc29ySW5kZXg7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJmbG93ID0gY3Vyc29ySW5kZXggLSBvZmZzZXQgLSBhdmFpbGFibGUgKyAxO1xuICAgIGlmIChvdmVyZmxvdyA+IDApIHtcbiAgICAgIG9mZnNldCArPSBvdmVyZmxvdztcbiAgICB9XG4gICAgY29uc3QgbWF4T2Zmc2V0ID0gTWF0aC5tYXgoMCwgbm9ybWFsaXplZC5sZW5ndGggLSBhdmFpbGFibGUpO1xuICAgIGlmIChvZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICB9XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IG9mZnNldDtcblxuICAgIGNvbnN0IHdpbmRvdyA9IG5vcm1hbGl6ZWQuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBhdmFpbGFibGUpO1xuICAgIGNvbnN0IGRpc3BsYXkgPSB3aW5kb3cuc3BsaXQoJycpLm1hcChjaGFyID0+IChjaGFyID09PSAnXFxuJyA/IE5FV0xJTkVfUExBQ0VIT0xERVIgOiBjaGFyKSkuam9pbignJyk7XG4gICAgY29uc3QgY3Vyc29ySW5XaW5kb3cgPSBNYXRoLm1pbihkaXNwbGF5Lmxlbmd0aCwgTWF0aC5tYXgoMCwgY3Vyc29ySW5kZXggLSBvZmZzZXQpKTtcblxuICAgIGNvbnN0IGJlZm9yZSA9IGRpc3BsYXkuc2xpY2UoMCwgY3Vyc29ySW5XaW5kb3cpO1xuICAgIGNvbnN0IGF0ID0gZGlzcGxheS5jaGFyQXQoY3Vyc29ySW5XaW5kb3cpIHx8ICcgJztcbiAgICBjb25zdCBhZnRlciA9IGRpc3BsYXkuc2xpY2UoY3Vyc29ySW5XaW5kb3cgKyAxKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiBgJHtiZWZvcmV9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YCxcbiAgICAgIGN1cnNvcjogY3Vyc29ySW5XaW5kb3csXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgY29sbGFwc2VkIHBhc3RlIGludG8gdGhlIGJ1ZmZlciB3aXRob3V0IHN1Ym1pdHRpbmcgKEN0cmwrTCkuXG4gICAqIEFsbG93cyB1c2VyIHRvIGVkaXQgdGhlIHBhc3RlZCBjb250ZW50IGJlZm9yZSBzdWJtaXNzaW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQ7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgLy8gUHV0IHRoZSBwYXN0ZWQgY29udGVudCBpbnRvIHRoZSBidWZmZXIgZm9yIGVkaXRpbmdcbiAgICB0aGlzLmJ1ZmZlciA9IHRleHQ7XG4gICAgdGhpcy5jdXJzb3IgPSB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgYW5kIHN1Ym1pdCBpbW1lZGlhdGVseS5cbiAgICogVXNlZnVsIGZvciBwcm9ncmFtbWF0aWMgc3VibWlzc2lvbnMgd2hlbiBhIHBhc3RlIGNoaXAgaXMgYWN0aXZlLlxuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIC8vIENsZWFyIHRoZSBidWZmZXIgZmlyc3QgdG8gYXZvaWQgYW55IHZpc3VhbCBkdXBsaWNhdGlvblxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgLy8gU3VibWl0IHRoZSBwYXN0ZSBjb250ZW50IChkaXNwbGF5VXNlclByb21wdCBpcyBjYWxsZWQgd2l0aGluIHN1Ym1pdFRleHQgZm9yIG5vbi1zbGFzaCBjb21tYW5kcylcbiAgICB0aGlzLnN1Ym1pdFRleHQodGV4dCk7XG4gIH1cblxuICBjYXB0dXJlSW5wdXQob3B0aW9uczogeyBhbGxvd0VtcHR5PzogYm9vbGVhbjsgdHJpbT86IGJvb2xlYW47IHJlc2V0QnVmZmVyPzogYm9vbGVhbiB9ID0ge30pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBhbHJlYWR5IGluIHByb2dyZXNzJykpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnJlc2V0QnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0ge1xuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB0cmltOiBvcHRpb25zLnRyaW0gIT09IGZhbHNlLFxuICAgICAgICAgIGFsbG93RW1wdHk6IG9wdGlvbnMuYWxsb3dFbXB0eSA/PyBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbElucHV0Q2FwdHVyZShyZWFzb24/OiB1bmtub3duKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYXB0dXJlID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgdGhpcy5pbnB1dENhcHR1cmUgPSBudWxsO1xuICAgIGNhcHR1cmUucmVqZWN0Py4ocmVhc29uID8/IG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gIH1cblxuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JhcE92ZXJsYXlMaW5lKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaW5kZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnNwbGl0KC8oXFxzKykvKTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBuZXh0ID0gY3VycmVudCArIHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKG5leHQpID4gd2lkdGggJiYgY3VycmVudC50cmltKCkpIHtcbiAgICAgICAgLy8gRG9uJ3QgdHJ1bmNhdGUgLSBqdXN0IHB1c2ggdGhlIGxpbmUgYXMtaXMgKGl0IGZpdHMgd2l0aGluIHdpZHRoKVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudCA9IGluZGVudCArIHdvcmQudHJpbVN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudC50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudC50cmltRW5kKCkpO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGxpbmVzIHdlcmUgcHJvZHVjZWQsIHJldHVybiB0aGUgb3JpZ2luYWwgdGV4dCB3aXRob3V0IHRydW5jYXRpb25cbiAgICByZXR1cm4gbGluZXMubGVuZ3RoID8gbGluZXMgOiBbdGV4dF07XG4gIH1cblxuICBwcml2YXRlIHNhZmVXaWR0aCgpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLm91dHB1dC5pc1RUWSA/IHRoaXMuY29scyB8fCA4MCA6IDgwO1xuICAgIHJldHVybiBNYXRoLm1heCgxLCBjb2xzIC0gMSk7XG4gIH1cblxuICBwcml2YXRlIHZpc2libGVMZW5ndGgodmFsdWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RyaXBBbnNpKHZhbHVlKS5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHN0cmlwQW5zaSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXFx1MDAxQlxcW1swLT9dKlsgLS9dKltALX5dL2csICcnKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJ1bmNhdGVMaW5lKHZhbHVlOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgubWF4KDEsIHdpZHRoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGNvbnN0IHRva2VucyA9IHZhbHVlLnNwbGl0KC8oXFx4MWJcXFtbMC05O10qbSkvdSk7XG4gICAgbGV0IHZpc2libGUgPSAwO1xuICAgIGxldCB0cnVuY2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgaWYgKCF0b2tlbikgY29udGludWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKC9eXFx4MWJcXFtbMC05O10qbSQvdS50ZXN0KHRva2VuKSkge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZpc2libGUgPj0gbGltaXQpIHtcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCByZW1haW5pbmcgPSBsaW1pdCAtIHZpc2libGU7XG4gICAgICBpZiAodG9rZW4ubGVuZ3RoIDw9IHJlbWFpbmluZykge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIHZpc2libGUgKz0gdG9rZW4ubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2xpY2VMZW5ndGggPSBNYXRoLm1heCgwLCByZW1haW5pbmcgLSAxKTtcbiAgICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlc3VsdCArPSB0b2tlbi5zbGljZSgwLCBzbGljZUxlbmd0aCk7XG4gICAgICAgICAgdmlzaWJsZSArPSBzbGljZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gJ+KApic7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0cnVuY2F0ZWQgJiYgIXJlc3VsdC5lbmRzV2l0aChFU0MuUkVTRVQpKSB7XG4gICAgICByZXN1bHQgKz0gRVNDLlJFU0VUO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBnZXRCdWZmZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXI7XG4gIH1cblxuICBnZXRDdXJzb3IoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJzb3I7XG4gIH1cblxuICBzZXRCdWZmZXIodGV4dDogc3RyaW5nLCBjdXJzb3JQb3M/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmJ1ZmZlciA9IHRleHQ7XG4gICAgLy8gVmFsaWRhdGUgY3Vyc29yIHBvc2l0aW9uIHRvIHByZXZlbnQgb3V0LW9mLWJvdW5kcyBpc3N1ZXNcbiAgICBjb25zdCByZXF1ZXN0ZWRDdXJzb3IgPSBjdXJzb3JQb3MgPz8gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyZXF1ZXN0ZWRDdXJzb3IsIHRleHQubGVuZ3RoKSk7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldFNlY3JldE1vZGUoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuc2VjcmV0TW9kZSA9IGVuYWJsZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGNsZWFyQnVmZmVyKCk6IHZvaWQge1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRNb2RlU3RhdHVzKHN0YXR1czogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKHN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhIGNvbXBhY3Rpbmcgc3RhdHVzIHdpdGggYW5pbWF0ZWQgc3Bpbm5lciAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFVzZXMg4py7IGNoYXJhY3RlciB3aXRoIGFuaW1hdGlvbiB0byBpbmRpY2F0ZSBjb250ZXh0IGNvbXBhY3Rpb24gaW4gcHJvZ3Jlc3NcbiAgICovXG4gIHNob3dDb21wYWN0aW5nU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3Bpbm5lckZyYW1lKys7XG4gICAgICAgIC8vIEN5Y2xlIGFjdGl2aXR5IHBocmFzZSBldmVyeSB+NCBzZWNvbmRzICg1MCBmcmFtZXMgYXQgODBtcylcbiAgICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgNTAgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5UGhyYXNlSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfSwgODApO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGNvbXBhY3Rpbmcgc3RhdHVzIGFuZCBzdG9wIHNwaW5uZXIgYW5pbWF0aW9uXG4gICAqL1xuICBoaWRlQ29tcGFjdGluZ1N0YXR1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBlbWl0UHJvbXB0KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucHVzaFByb21wdEV2ZW50KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdXNlciBwcm9tcHQgaW1tZWRpYXRlbHkgaW4gc2Nyb2xsYmFjayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFdyaXRlcyBzeW5jaHJvbm91c2x5IHRvIGVuc3VyZSBpdCBhcHBlYXJzIE9OQ0UgaW4gc2Nyb2xsYmFjayBiZWZvcmUgc3RhdHVzIHVwZGF0ZXMuXG4gICAqIFRoZSBwcm9tcHQgaW5wdXQgYXJlYSB3aWxsIHRoZW4gZmxvYXQgYmVsb3cgdGhpcyBhbmQgYWxsIHN1YnNlcXVlbnQgZXZlbnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwbGF5VXNlclByb21wdCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuXG4gICAgLy8gUHJldmVudCBkdXBsaWNhdGUgcHJvbXB0IGRpc3BsYXkgd2l0aGluIDEuNSBzZWNvbmRzXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0UHJvbXB0RXZlbnQgJiYgdGhpcy5sYXN0UHJvbXB0RXZlbnQudGV4dCA9PT0gbm9ybWFsaXplZCAmJiBub3cgLSB0aGlzLmxhc3RQcm9tcHRFdmVudC5hdCA8IDE1MDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcblxuICAgIC8vIEFkZCB0byBldmVudCBxdWV1ZSBpbnN0ZWFkIG9mIHdyaXRpbmcgZGlyZWN0bHkgdG8gZW5zdXJlIHByb3BlciByZW5kZXJpbmdcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIExvdy1sZXZlbCBoZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHB1c2hQcm9tcHRFdmVudCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclByb21wdEFyZWEoKTogdm9pZCB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5sYXN0T3ZlcmxheT8ubGluZXMubGVuZ3RoID8/IHRoaXMucHJvbXB0SGVpZ2h0ID8/IDA7XG4gICAgaWYgKGhlaWdodCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gVXNlIGJhdGNoZWQgYXRvbWljIHdyaXRlIHRvIHByZXZlbnQgdmlzdWFsIGdsaXRjaGVzIGZyb20gbm9uLWF0b21pYyBlc2NhcGUgc2VxdWVuY2VzXG4gICAgY29uc3QgYnVmZmVyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gSGlkZSBjdXJzb3IgZHVyaW5nIGNsZWFyaW5nIHRvIHByZXZlbnQgdmlzdWFsIGFydGlmYWN0c1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVsJyk7XG5cbiAgICAvLyBDdXJzb3IgaXMgYXQgcHJvbXB0IHJvdy4gTW92ZSB1cCB0byB0b3Agb2Ygb3ZlcmxheSBmaXJzdC5cbiAgICBpZiAodGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXkucHJvbXB0SW5kZXg7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGF0IHRvcCwgY2xlYXIgZWFjaCBsaW5lIGRvd253YXJkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgYnVmZmVyLnB1c2goJ1xccicpO1xuICAgICAgYnVmZmVyLnB1c2goRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgaWYgKGkgPCBoZWlnaHQgLSAxKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBiYWNrIHRvIHRvcCAod2hlcmUgY29udGVudCBzaG91bGQgY29udGludWUgZnJvbSlcbiAgICBpZiAoaGVpZ2h0ID4gMSkge1xuICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7aGVpZ2h0IC0gMX1BYCk7XG4gICAgfVxuICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcblxuICAgIC8vIFNob3cgY3Vyc29yIGFnYWluXG4gICAgYnVmZmVyLnB1c2goJ1xceDFiWz8yNWgnKTtcblxuICAgIC8vIFNpbmdsZSBhdG9taWMgd3JpdGVcbiAgICB0aGlzLndyaXRlKGJ1ZmZlci5qb2luKCcnKSk7XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IDA7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm91dHB1dC5yb3dzIHx8IDI0O1xuICAgICAgdGhpcy5jb2xzID0gdGhpcy5vdXRwdXQuY29sdW1ucyB8fCA4MDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBV0EsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sV0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sZUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsWUFBQSxHQUFBUixPQUFBO0FBSUEsSUFBQVMsU0FBQSxHQUFBVCxPQUFBO0FBQ0EsSUFBQVUsZ0JBQUEsR0FBQVYsT0FBQTtBQUFpSCxTQUFBSSx1QkFBQU8sQ0FBQSxXQUFBQSxDQUFBLElBQUFBLENBQUEsQ0FBQUMsVUFBQSxHQUFBRCxDQUFBLEtBQUFFLE9BQUEsRUFBQUYsQ0FBQTtBQUFBLFNBQUFaLHdCQUFBWSxDQUFBLEVBQUFHLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBaEIsdUJBQUEsWUFBQUEsQ0FBQVksQ0FBQSxFQUFBRyxDQUFBLFNBQUFBLENBQUEsSUFBQUgsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsU0FBQUQsQ0FBQSxNQUFBTyxDQUFBLEVBQUFDLENBQUEsRUFBQUMsQ0FBQSxLQUFBQyxTQUFBLFFBQUFSLE9BQUEsRUFBQUYsQ0FBQSxpQkFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUyxDQUFBLE1BQUFGLENBQUEsR0FBQUosQ0FBQSxHQUFBRyxDQUFBLEdBQUFELENBQUEsUUFBQUUsQ0FBQSxDQUFBSSxHQUFBLENBQUFYLENBQUEsVUFBQU8sQ0FBQSxDQUFBSyxHQUFBLENBQUFaLENBQUEsR0FBQU8sQ0FBQSxDQUFBTSxHQUFBLENBQUFiLENBQUEsRUFBQVMsQ0FBQSxnQkFBQU4sQ0FBQSxJQUFBSCxDQUFBLGdCQUFBRyxDQUFBLE9BQUFXLGNBQUEsQ0FBQUMsSUFBQSxDQUFBZixDQUFBLEVBQUFHLENBQUEsT0FBQUssQ0FBQSxJQUFBRCxDQUFBLEdBQUFTLE1BQUEsQ0FBQUMsY0FBQSxLQUFBRCxNQUFBLENBQUFFLHdCQUFBLENBQUFsQixDQUFBLEVBQUFHLENBQUEsT0FBQUssQ0FBQSxDQUFBSSxHQUFBLElBQUFKLENBQUEsQ0FBQUssR0FBQSxJQUFBTixDQUFBLENBQUFFLENBQUEsRUFBQU4sQ0FBQSxFQUFBSyxDQUFBLElBQUFDLENBQUEsQ0FBQU4sQ0FBQSxJQUFBSCxDQUFBLENBQUFHLENBQUEsV0FBQU0sQ0FBQSxLQUFBVCxDQUFBLEVBQUFHLENBQUE7QUF2QmpIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQXlCQTtBQUNPLFNBQVNnQixZQUFZQSxDQUFDQyxLQUFhLEVBQUVDLFFBQWlCLEVBQVU7RUFDckUsTUFBTUMsS0FBZSxHQUFHLEVBQUU7RUFDMUJBLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxjQUFLLENBQUNDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDbERKLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxjQUFLLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR0QsY0FBSyxDQUFDQyxJQUFJLENBQUNFLElBQUksQ0FBQ1AsS0FBSyxDQUFDUSxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBR0osY0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7RUFDbkYsSUFBSUosUUFBUSxFQUFFO0lBQ1pDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxjQUFLLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR0QsY0FBSyxDQUFDSyxLQUFLLENBQUNSLFFBQVEsQ0FBQ08sTUFBTSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUdKLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO0VBQ3BGO0VBQ0FILEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxjQUFLLENBQUNDLElBQUksQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7RUFDbEQsT0FBT0osS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3pCO0FBRU8sU0FBU0MsY0FBY0EsQ0FBQ0MsS0FBYSxFQUFFQyxJQUFZLEVBQUVDLFVBQWtCLEVBQVU7RUFDdEYsTUFBTUMsVUFBVSxHQUFHQyxJQUFJLENBQUNDLEtBQUssQ0FBRUosSUFBSSxHQUFHQyxVQUFVLEdBQUksR0FBRyxDQUFDO0VBQ3hELE1BQU1JLFdBQVcsR0FBRyxHQUFHLENBQUNaLE1BQU0sQ0FBQ1UsSUFBSSxDQUFDRyxLQUFLLENBQUNKLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQ1QsTUFBTSxDQUFDLEVBQUUsR0FBR1UsSUFBSSxDQUFDRyxLQUFLLENBQUNKLFVBQVUsR0FBRyxDQUFDLENBQUMsQ0FBQztFQUN4RyxPQUFPLEdBQUdYLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJRCxjQUFLLENBQUNLLEtBQUssQ0FBQ0csS0FBSyxDQUFDLE1BQU1SLGNBQUssQ0FBQ2dCLEtBQUssQ0FBQ0YsV0FBVyxDQUFDLEtBQUtILFVBQVUsTUFBTUYsSUFBSSxJQUFJQyxVQUFVLEdBQUc7QUFDekg7O0FBRUE7QUFDTyxTQUFTTyxvQkFBb0JBLENBQUNyQixLQUFhLEVBQUVDLFFBQWlCLEVBQVU7RUFDN0UsTUFBTXFCLEtBQUssR0FBRyxFQUFFO0VBQ2hCLE1BQU1wQixLQUFlLEdBQUcsRUFBRTtFQUMxQkEsS0FBSyxDQUFDQyxJQUFJLENBQUNDLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDZ0IsS0FBSyxDQUFDLENBQUMsQ0FBQztFQUN6Q3BCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUdDLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJRCxjQUFLLENBQUNDLElBQUksQ0FBQ0UsSUFBSSxDQUFDUCxLQUFLLENBQUN1QixXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztFQUMxRSxJQUFJdEIsUUFBUSxFQUFFO0lBQ1pDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDQyxjQUFLLENBQUNvQixJQUFJLENBQUMsS0FBS3ZCLFFBQVEsRUFBRSxDQUFDLENBQUM7RUFDekM7RUFDQUMsS0FBSyxDQUFDQyxJQUFJLENBQUNDLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcsQ0FBQ0MsTUFBTSxDQUFDZ0IsS0FBSyxDQUFDLENBQUMsQ0FBQztFQUN6QyxPQUFPcEIsS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3pCO0FBRU8sU0FBU2UscUJBQXFCQSxDQUFDQyxPQUFlLEVBQVU7RUFDN0QsT0FBTyxHQUFHdEIsY0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUlELGNBQUssQ0FBQ0ssS0FBSyxDQUFDaUIsT0FBTyxDQUFDLEVBQUU7QUFDckQ7QUFFTyxTQUFTQyxxQkFBcUJBLENBQUNDLE9BQVksRUFBVTtFQUMxRCxNQUFNQyxjQUFjLEdBQUc7SUFDckJDLFFBQVEsRUFBRTFCLGNBQUssQ0FBQzJCLFNBQVM7SUFDekJDLElBQUksRUFBRTVCLGNBQUssQ0FBQzZCLEdBQUc7SUFDZkMsTUFBTSxFQUFFOUIsY0FBSyxDQUFDK0IsTUFBTTtJQUNwQkMsR0FBRyxFQUFFaEMsY0FBSyxDQUFDaUMsSUFBSTtJQUNmQyxJQUFJLEVBQUVsQyxjQUFLLENBQUNvQjtFQUNkLENBQUM7RUFFRCxNQUFNZSxhQUFhLEdBQUc7SUFDcEJULFFBQVEsRUFBRTFCLGNBQUssQ0FBQzJCLFNBQVMsQ0FBQyxHQUFHLENBQUM7SUFDOUJDLElBQUksRUFBRTVCLGNBQUssQ0FBQzZCLEdBQUcsQ0FBQyxHQUFHLENBQUM7SUFDcEJDLE1BQU0sRUFBRTlCLGNBQUssQ0FBQytCLE1BQU0sQ0FBQyxHQUFHLENBQUM7SUFDekJDLEdBQUcsRUFBRWhDLGNBQUssQ0FBQ2lDLElBQUksQ0FBQyxHQUFHLENBQUM7SUFDcEJDLElBQUksRUFBRWxDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxHQUFHO0VBQ3RCLENBQUM7RUFFRCxNQUFNZ0IsS0FBSyxHQUFHWCxjQUFjLENBQUNELE9BQU8sQ0FBQ2EsUUFBUSxDQUFDLElBQUlyQyxjQUFLLENBQUNLLEtBQUs7RUFDN0QsTUFBTWlDLElBQUksR0FBR0gsYUFBYSxDQUFDWCxPQUFPLENBQUNhLFFBQVEsQ0FBQyxJQUFJckMsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUUvRCxNQUFNdEIsS0FBZSxHQUFHLEVBQUU7RUFDMUJBLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUd1QyxJQUFJLElBQUlGLEtBQUssQ0FBQ2pDLElBQUksQ0FBQ3FCLE9BQU8sQ0FBQ2UsSUFBSSxJQUFJZixPQUFPLENBQUNnQixJQUFJLElBQUksU0FBUyxDQUFDLEVBQUUsQ0FBQztFQUM5RTFDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSXBCLGNBQUssQ0FBQ0ssS0FBSyxDQUFDbUIsT0FBTyxDQUFDaUIsV0FBVyxJQUFJLGdCQUFnQixDQUFDLEVBQUUsQ0FBQztFQUNyRyxJQUFJakIsT0FBTyxDQUFDa0IsUUFBUSxFQUFFO0lBQ3BCNUMsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJcEIsY0FBSyxDQUFDSyxLQUFLLENBQUNtQixPQUFPLENBQUNrQixRQUFRLENBQUMsRUFBRSxDQUFDO0VBQzdFO0VBQ0EsSUFBSWxCLE9BQU8sQ0FBQ21CLFdBQVcsRUFBRTtJQUN2QjdDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSXBCLGNBQUssQ0FBQ2dCLEtBQUssQ0FBQ1EsT0FBTyxDQUFDbUIsV0FBVyxDQUFDLEVBQUUsQ0FBQztFQUNuRjtFQUNBLE9BQU83QyxLQUFLLENBQUNRLElBQUksQ0FBQyxJQUFJLENBQUM7QUFDekI7QUFFTyxTQUFTc0MscUJBQXFCQSxDQUFDQyxPQUFZLEVBQVU7RUFDMUQsTUFBTS9DLEtBQWUsR0FBRyxFQUFFO0VBQzFCQSxLQUFLLENBQUNDLElBQUksQ0FBQ0MsY0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUN0Q0osS0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBR0MsY0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUlELGNBQUssQ0FBQ0MsSUFBSSxDQUFDRSxJQUFJLENBQUMsd0JBQXdCLENBQUMsRUFBRSxDQUFDO0VBQy9FTCxLQUFLLENBQUNDLElBQUksQ0FBQ0MsY0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBRyxDQUFDQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztFQUV0Q0osS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJcEIsY0FBSyxDQUFDSyxLQUFLLENBQUN3QyxPQUFPLENBQUNDLFFBQVEsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDO0VBQ3hGaEQsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLGFBQWEsQ0FBQyxJQUFJcEIsY0FBSyxDQUFDSyxLQUFLLENBQUN3QyxPQUFPLENBQUNFLFNBQVMsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDO0VBQzNGLElBQUlGLE9BQU8sQ0FBQ0csT0FBTyxFQUFFO0lBQ25CbEQsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJcEIsY0FBSyxDQUFDSyxLQUFLLENBQUN3QyxPQUFPLENBQUNHLE9BQU8sQ0FBQyxFQUFFLENBQUM7RUFDNUU7RUFDQSxJQUFJSCxPQUFPLENBQUNJLFFBQVEsRUFBRTtJQUNwQm5ELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSXBCLGNBQUssQ0FBQ0ssS0FBSyxDQUFDLEdBQUd3QyxPQUFPLENBQUNJLFFBQVEsSUFBSSxDQUFDLEVBQUUsQ0FBQztFQUNwRjtFQUVBLElBQUlKLE9BQU8sQ0FBQ0ssUUFBUSxJQUFJQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ1AsT0FBTyxDQUFDSyxRQUFRLENBQUMsRUFBRTtJQUN2RCxNQUFNRyxNQUE4QixHQUFHO01BQUUzQixRQUFRLEVBQUUsQ0FBQztNQUFFRSxJQUFJLEVBQUUsQ0FBQztNQUFFRSxNQUFNLEVBQUUsQ0FBQztNQUFFRSxHQUFHLEVBQUUsQ0FBQztNQUFFRSxJQUFJLEVBQUU7SUFBRSxDQUFDO0lBQzNGVyxPQUFPLENBQUNLLFFBQVEsQ0FBQ0ksT0FBTyxDQUFFckUsQ0FBTSxJQUFLO01BQ25Db0UsTUFBTSxDQUFDcEUsQ0FBQyxDQUFDb0QsUUFBUSxDQUFDLEdBQUcsQ0FBQ2dCLE1BQU0sQ0FBQ3BFLENBQUMsQ0FBQ29ELFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3BELENBQUMsQ0FBQztJQUVGdkMsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUM7SUFDMUM1QixNQUFNLENBQUMrRCxPQUFPLENBQUNGLE1BQU0sQ0FBQyxDQUFDQyxPQUFPLENBQUMsQ0FBQyxDQUFDakIsUUFBUSxFQUFFbUIsS0FBSyxDQUFDLEtBQUs7TUFDcEQsSUFBSUEsS0FBSyxHQUFHLENBQUMsRUFBRTtRQUNiLE1BQU1wQixLQUFLLEdBQUdYLGNBQWMsQ0FBQ1ksUUFBUSxDQUFDLElBQUlyQyxjQUFLLENBQUNLLEtBQUs7UUFDckRQLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLE9BQU9xQyxLQUFLLENBQUMsR0FBR0MsUUFBUSxDQUFDbEIsV0FBVyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUluQixjQUFLLENBQUNLLEtBQUssQ0FBQ21ELEtBQUssQ0FBQyxFQUFFLENBQUM7TUFDaEY7SUFDRixDQUFDLENBQUM7SUFDRjFELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLE9BQU9DLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSXBCLGNBQUssQ0FBQ0ssS0FBSyxDQUFDd0MsT0FBTyxDQUFDSyxRQUFRLENBQUNPLE1BQU0sQ0FBQyxFQUFFLENBQUM7RUFDbkY7RUFFQSxPQUFPM0QsS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDO0FBQ3pCO0FBRU8sU0FBU29ELG9CQUFvQkEsQ0FBQ0MsTUFBYyxFQUFFQyxPQUFlLEVBQVU7RUFDNUUsTUFBTUMsV0FBVyxHQUFHO0lBQ2xCQyxPQUFPLEVBQUUsR0FBRzlELGNBQUssQ0FBQ2dCLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTtJQUM5QitDLFFBQVEsRUFBRSxHQUFHL0QsY0FBSyxDQUFDK0IsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO0lBQ2hDaUMsV0FBVyxFQUFFLEdBQUdoRSxjQUFLLENBQUM2QixHQUFHLENBQUMsR0FBRyxDQUFDO0VBQ2hDLENBQUM7RUFFRCxNQUFNUyxJQUFJLEdBQUd1QixXQUFXLENBQUNGLE1BQU0sQ0FBQyxJQUFJM0QsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLEdBQUcsQ0FBQztFQUNuRCxPQUFPLEdBQUdrQixJQUFJLElBQUl0QyxjQUFLLENBQUNLLEtBQUssQ0FBQ3VELE9BQU8sQ0FBQyxFQUFFO0FBQzFDO0FBRU8sU0FBU0ssbUJBQW1CQSxDQUFDekQsS0FBYSxFQUFFMEQsUUFBZ0IsRUFBRUMsS0FBYSxFQUFVO0VBQzFGLE1BQU14RCxVQUFVLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFFcUQsUUFBUSxHQUFHQyxLQUFLLEdBQUksR0FBRyxDQUFDO0VBQ3ZELE1BQU1DLE1BQU0sR0FBR3hELElBQUksQ0FBQ0MsS0FBSyxDQUFDRixVQUFVLEdBQUcsRUFBRSxDQUFDO0VBQzFDLE1BQU0wRCxLQUFLLEdBQUcsRUFBRSxHQUFHRCxNQUFNO0VBRXpCLE1BQU10RCxXQUFXLEdBQUcsR0FBR2QsY0FBSyxDQUFDZ0IsS0FBSyxDQUFDLEdBQUcsQ0FBQ2QsTUFBTSxDQUFDa0UsTUFBTSxDQUFDLENBQUMsR0FBR3BFLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxHQUFHLENBQUNsQixNQUFNLENBQUNtRSxLQUFLLENBQUMsQ0FBQyxFQUFFO0VBRXhGLE9BQU8sR0FBR3JFLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxHQUFHLENBQUMsSUFBSXBCLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLGdCQUFnQixDQUFDLE1BQU1ELGNBQUssQ0FBQ0ssS0FBSyxDQUFDRyxLQUFLLENBQUMsSUFBSSxHQUM5RSxLQUFLTSxXQUFXLElBQUlkLGNBQUssQ0FBQ0ssS0FBSyxDQUFDLEdBQUc2RCxRQUFRLElBQUlDLEtBQUssRUFBRSxDQUFDLElBQUluRSxjQUFLLENBQUNvQixJQUFJLENBQUMsSUFBSVQsVUFBVSxJQUFJLENBQUMsRUFBRTtBQUNwRzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVMyRCx3QkFBd0JBLENBQUNDLE9BR3hDLEVBQVU7RUFDVCxNQUFNekUsS0FBZSxHQUFHLEVBQUU7RUFDMUIsTUFBTTBFLFNBQVMsR0FBR0QsT0FBTyxFQUFFQyxTQUFTLElBQUksSUFBSTtFQUU1QyxJQUFJQSxTQUFTLEVBQUU7SUFDYjFFLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUdDLGNBQUssQ0FBQ0ssS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJTCxjQUFLLENBQUNLLEtBQUssQ0FBQyx1Q0FBdUMsQ0FBQyxFQUFFLENBQUM7SUFDekZQLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ0ssS0FBSyxDQUFDLGtDQUFrQyxDQUFDLEVBQUUsQ0FBQztJQUNsRVAsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDSyxLQUFLLENBQUMsYUFBYSxDQUFDLEVBQUUsQ0FBQztFQUMvQztFQUVBLE1BQU1vRSxZQUFZLEdBQUcsQ0FDbkI7SUFBRWxDLElBQUksRUFBRSxTQUFTO0lBQUVFLFdBQVcsRUFBRSx1QkFBdUI7SUFBRWtCLE1BQU0sRUFBRTtFQUFrQixDQUFDLEVBQ3BGO0lBQUVwQixJQUFJLEVBQUUsT0FBTztJQUFFRSxXQUFXLEVBQUUsaUJBQWlCO0lBQUVrQixNQUFNLEVBQUU7RUFBa0IsQ0FBQyxFQUM1RTtJQUFFcEIsSUFBSSxFQUFFLE9BQU87SUFBRUUsV0FBVyxFQUFFLG9CQUFvQjtJQUFFa0IsTUFBTSxFQUFFO0VBQWtCLENBQUMsQ0FDaEY7RUFFRCxNQUFNZSxLQUFLLEdBQUdILE9BQU8sRUFBRUcsS0FBSyxJQUFJRCxZQUFZO0VBRTVDLE1BQU1FLFNBQVMsR0FBR0QsS0FBSyxDQUFDRSxHQUFHLENBQUNDLElBQUksSUFBSTtJQUNsQyxNQUFNQyxVQUFVLEdBQUdELElBQUksQ0FBQ2xCLE1BQU0sS0FBSyxRQUFRLEdBQUczRCxjQUFLLENBQUNnQixLQUFLLENBQUMsR0FBRyxDQUFDLEdBQzNDNkQsSUFBSSxDQUFDbEIsTUFBTSxLQUFLLE9BQU8sR0FBRzNELGNBQUssQ0FBQytCLE1BQU0sQ0FBQyxHQUFHLENBQUMsR0FDM0MvQixjQUFLLENBQUNvQixJQUFJLENBQUMsR0FBRyxDQUFDO0lBQ2xDLE9BQU8sR0FBRzBELFVBQVUsSUFBSTlFLGNBQUssQ0FBQ0MsSUFBSSxDQUFDLElBQUk0RSxJQUFJLENBQUN0QyxJQUFJLEdBQUcsQ0FBQyxRQUFRdkMsY0FBSyxDQUFDSyxLQUFLLENBQUN3RSxJQUFJLENBQUNwQyxXQUFXLENBQUMsRUFBRTtFQUM3RixDQUFDLENBQUM7RUFFRixJQUFJa0MsU0FBUyxDQUFDbEIsTUFBTSxHQUFHLENBQUMsRUFBRTtJQUN4QjNELEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ0ssS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJc0UsU0FBUyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUM7SUFDL0QsS0FBSyxJQUFJM0YsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHMkYsU0FBUyxDQUFDbEIsTUFBTSxHQUFHLENBQUMsRUFBRXpFLENBQUMsRUFBRSxFQUFFO01BQzdDYyxLQUFLLENBQUNDLElBQUksQ0FBQyxLQUFLNEUsU0FBUyxDQUFDM0YsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUNsQztJQUNBLElBQUkyRixTQUFTLENBQUNsQixNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3hCM0QsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDSyxLQUFLLENBQUMsS0FBSyxDQUFDLElBQUlzRSxTQUFTLENBQUNBLFNBQVMsQ0FBQ2xCLE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDO0lBQzNFO0lBQ0EzRCxLQUFLLENBQUNDLElBQUksQ0FBQyxLQUFLQyxjQUFLLENBQUNLLEtBQUssQ0FBQyx1Q0FBdUMsQ0FBQyxFQUFFLENBQUM7RUFDekU7RUFFQVAsS0FBSyxDQUFDQyxJQUFJLENBQUMsS0FBS0MsY0FBSyxDQUFDb0IsSUFBSSxDQUFDLDJDQUEyQyxDQUFDLEVBQUUsQ0FBQztFQUMxRXRCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyw2Q0FBNkMsQ0FBQyxFQUFFLENBQUM7RUFDNUV0QixLQUFLLENBQUNDLElBQUksQ0FBQyxLQUFLQyxjQUFLLENBQUNvQixJQUFJLENBQUMsZUFBZSxDQUFDLEVBQUUsQ0FBQztFQUM5Q3RCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEtBQUtDLGNBQUssQ0FBQ29CLElBQUksQ0FBQyxxREFBcUQsQ0FBQyxFQUFFLENBQUM7RUFFcEYsT0FBT3RCLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLElBQUksQ0FBQztBQUN6QjtBQUVBLE1BQU1tQixjQUFtQyxHQUFHO0VBQzFDQyxRQUFRLEVBQUdxRCxJQUFZLElBQUsvRSxjQUFLLENBQUNnRixHQUFHLENBQUMsU0FBUyxDQUFDLENBQUNELElBQUksQ0FBQztFQUFFO0VBQ3hEbkQsSUFBSSxFQUFHbUQsSUFBWSxJQUFLL0UsY0FBSyxDQUFDZ0YsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDRCxJQUFJLENBQUM7RUFBRTtFQUNwRGpELE1BQU0sRUFBR2lELElBQVksSUFBSy9FLGNBQUssQ0FBQ2dGLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQ0QsSUFBSSxDQUFDO0VBQUU7RUFDdEQvQyxHQUFHLEVBQUcrQyxJQUFZLElBQUsvRSxjQUFLLENBQUNnRixHQUFHLENBQUMsU0FBUyxDQUFDLENBQUNELElBQUksQ0FBQztFQUFFO0VBQ25EN0MsSUFBSSxFQUFHNkMsSUFBWSxJQUFLL0UsY0FBSyxDQUFDZ0YsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDRCxJQUFJLENBQUMsQ0FBQztBQUNyRCxDQUFDOztBQVFEO0FBQ0E7QUFDQTs7QUEwREE7QUFDQTtBQUNBOztBQTBCQTtBQUNBO0FBQ0E7O0FBZ0NBO0FBQ0E7QUFDQTtBQUNBOztBQWlDQSxNQUFNRSxHQUFHLEdBQUc7RUFDVkMsV0FBVyxFQUFFLFdBQVc7RUFDeEJDLFdBQVcsRUFBRSxXQUFXO0VBQ3hCQyxZQUFZLEVBQUUsU0FBUztFQUN2QkMsVUFBVSxFQUFFLFNBQVM7RUFDckJDLElBQUksRUFBRSxRQUFRO0VBQ2RDLHNCQUFzQixFQUFFLGFBQWE7RUFDckNDLHVCQUF1QixFQUFFLGFBQWE7RUFDdENDLEVBQUUsRUFBRUEsQ0FBQ0MsR0FBVyxFQUFFQyxHQUFXLEtBQUssUUFBUUQsR0FBRyxJQUFJQyxHQUFHLEdBQUc7RUFDdkRDLE1BQU0sRUFBR0QsR0FBVyxJQUFLLFFBQVFBLEdBQUcsR0FBRztFQUN2Q0UsVUFBVSxFQUFFLFFBQVE7RUFDcEJDLE9BQU8sRUFBRSxTQUFTO0VBQ2xCQyxLQUFLLEVBQUUsU0FBUztFQUNoQjtFQUNBQyxpQkFBaUIsRUFBRUEsQ0FBQ0MsR0FBVyxFQUFFQyxNQUFjLEtBQUssUUFBUUQsR0FBRyxJQUFJQyxNQUFNLEdBQUc7RUFDNUVDLG1CQUFtQixFQUFFLFFBQVE7RUFDN0JDLFdBQVcsRUFBRSxRQUFRO0VBQ3JCQyxjQUFjLEVBQUU7QUFDbEIsQ0FBVTtBQUVWLE1BQU1DLG1CQUFtQixHQUFHLEdBQUc7QUFFeEIsTUFBTUMsaUJBQWlCLFNBQVNDLHdCQUFZLENBQUM7RUFDakNDLE1BQU07RUFDTkMsS0FBSztFQUNMQyxFQUFFO0VBQ0ZDLFNBQVM7RUFDVEMsV0FBVztFQUVwQkMsSUFBSSxHQUFHLEVBQUU7RUFDVEMsSUFBSSxHQUFHLEVBQUU7RUFDVEMsZUFBZSxHQUFrQixJQUFJO0VBRXJDQyxVQUFVLEdBQWMsRUFBRTtFQUMxQkMsaUJBQWlCLEdBQUcsS0FBSztFQUV6QkMsTUFBTSxHQUFHLEVBQUU7RUFDWEMsTUFBTSxHQUFHLENBQUM7RUFDVkMsT0FBTyxHQUFhLEVBQUU7RUFDdEJDLFlBQVksR0FBRyxDQUFDLENBQUM7RUFDakJDLFdBQVcsR0FBa0UsRUFBRTtFQUMvRUMsZUFBZSxHQUFHLENBQUMsQ0FBQztFQUNwQkMsaUJBQWlCLEdBQTRCLEVBQUU7RUFDL0NDLG1CQUFtQixHQUFnQixJQUFJQyxHQUFHLENBQUMsQ0FBQztFQUM1Q0MsY0FBYyxHQUEwRCxJQUFJO0VBRTVFQyxJQUFJLEdBQXlCLE1BQU07RUFDM0M7RUFDUUMsbUJBQW1CLEdBQWEsRUFBRTtFQUMxQztFQUNRQyxzQkFBc0IsR0FBVyxFQUFFO0VBQzNDO0VBQ1FDLHFCQUFxQixHQUFXLENBQUM7RUFDakNDLGNBQWMsR0FBa0IsSUFBSTtFQUM1QztFQUNRQyxvQkFBb0IsR0FXdkIsRUFBRTtFQUNVQyxtQkFBbUIsR0FBRyxFQUFFO0VBQ3pDO0VBQ1FDLFlBQVksR0FBVyxFQUFFO0VBQ3pCQyxrQkFBa0IsR0FBa0IsSUFBSTtFQUN4Q0MsYUFBYSxHQUFrQixJQUFJO0VBQ25DQyxjQUFjLEdBQWtCLElBQUk7RUFDcENDLGVBQWUsR0FBa0IsSUFBSTs7RUFFN0M7RUFDUUMsZ0JBQWdCLEdBQTJCLElBQUk7RUFDL0NDLGlCQUFpQixHQUE2QixJQUFJO0VBQ2xEQyxZQUFZO0VBQ1pDLFlBQVksR0FBRyxDQUFDO0VBQ2hCQyxlQUFlLEdBQTBCLElBQUk7RUFDcENDLG1CQUFtQixHQUFHLEVBQUU7O0VBRXpDO0VBQ1FDLHVCQUF1QixHQUFHLEVBQUU7RUFDNUJDLHFCQUFxQixHQUFHLENBQUM7RUFDekJDLHdCQUF3QixHQUEwQixJQUFJO0VBQzdDQyx1QkFBdUIsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQzs7RUFFL0Q7RUFDUUMsZUFBZSxHQUFrQixJQUFJO0VBQ3JDQyxtQkFBbUIsR0FBRyxDQUFDO0VBQ3ZCQyxpQkFBaUIsR0FBRyxDQUFDO0VBQ1pDLGtCQUFrQixHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUM7RUFDcEU7RUFDUUMsZUFBZSxHQUFHLENBQUM7RUFDM0I7RUFDUUMsaUJBQWlCLEdBQUcsQ0FBQztFQUNaQyxrQkFBa0IsR0FBRyxDQUFDLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxDQUFDO0VBQ3hHO0VBQ2lCQyxrQkFBa0IsR0FBRyxDQUNwQyxVQUFVLEVBQUUsWUFBWSxFQUFFLFdBQVcsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUM5RDtFQUNnQkMsd0JBQXdCLEdBQUcsQ0FBQztFQUM1QkMsd0JBQXdCLEdBQUcsSUFBSTtFQUMvQkMsb0JBQW9CLEdBQUcsS0FBSztFQUNyQ0Msa0JBQWtCLEdBQXdDLElBQUk7RUFFOURDLFVBQVUsR0FjZCxDQUFDLENBQUM7RUFDRUMsV0FBVyxHQUFvQjtJQUNyQ0MsbUJBQW1CLEVBQUUsS0FBSztJQUMxQkMsb0JBQW9CLEVBQUUsTUFBTTtJQUM1QkMsZ0JBQWdCLEVBQUUsS0FBSztJQUFHO0lBQzFCQyxZQUFZLEVBQUU7RUFDaEIsQ0FBQzs7RUFFRDtFQUNRQyxRQUFRLEdBQWtCLENBQUMsQ0FBQzs7RUFFcEM7RUFDUUMsaUJBQWlCLEdBQXNCO0lBQzdDQyxZQUFZLEVBQUUsSUFBSTtJQUNsQkMsa0JBQWtCLEVBQUUsSUFBSTtJQUN4QkMsZ0JBQWdCLEVBQUU7RUFDcEIsQ0FBQzs7RUFFRDs7RUFFQTtFQUNRQyxXQUFXQSxDQUFBLEVBQVM7SUFDMUIsSUFBSSxDQUFDdEQsTUFBTSxHQUFHeEcsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRS9KLElBQUksQ0FBQ2dLLEdBQUcsQ0FBQyxJQUFJLENBQUN4RCxNQUFNLEVBQUUsSUFBSSxDQUFDRCxNQUFNLENBQUMxRCxNQUFNLENBQUMsQ0FBQztFQUN0RTs7RUFFQTtFQUNRb0gsbUJBQW1CQSxDQUFDMUQsTUFBOEIsRUFBRXBDLElBQVksRUFBUTtJQUM5RSxJQUFJLElBQUksQ0FBQytGLG1CQUFtQixFQUFFLE9BQU8sQ0FBQztJQUN0QyxNQUFNQyxPQUFPLEdBQUc1RCxNQUFNLEtBQUssT0FBTyxHQUFHLElBQUksQ0FBQzZELFdBQVcsR0FBRyxJQUFJLENBQUNDLGdCQUFnQjtJQUM3RSxNQUFNQyxTQUFTLEdBQUcsSUFBSSxDQUFDQyxrQkFBa0IsR0FBR0osT0FBTyxDQUFDdEgsTUFBTTtJQUMxRCxJQUFJeUgsU0FBUyxJQUFJLENBQUMsRUFBRTtNQUNsQixJQUFJLENBQUNKLG1CQUFtQixHQUFHLElBQUk7TUFDL0I7SUFDRjtJQUNBLE1BQU1NLEtBQUssR0FBR3JHLElBQUksQ0FBQ3RCLE1BQU0sSUFBSXlILFNBQVMsR0FBR25HLElBQUksR0FBR0EsSUFBSSxDQUFDc0csS0FBSyxDQUFDLENBQUMsRUFBRUgsU0FBUyxDQUFDO0lBQ3hFLElBQUkvRCxNQUFNLEtBQUssT0FBTyxFQUFFO01BQ3RCLElBQUksQ0FBQzZELFdBQVcsSUFBSUksS0FBSztJQUMzQixDQUFDLE1BQU07TUFDTCxJQUFJLENBQUNILGdCQUFnQixJQUFJRyxLQUFLO0lBQ2hDO0lBQ0EsSUFBSUEsS0FBSyxDQUFDM0gsTUFBTSxHQUFHc0IsSUFBSSxDQUFDdEIsTUFBTSxFQUFFO01BQzlCLElBQUksQ0FBQ3FILG1CQUFtQixHQUFHLElBQUk7SUFDakM7RUFDRjs7RUFFQTtFQUNRUSxvQkFBb0JBLENBQUN2RyxJQUFZLEVBQVU7SUFDakQsSUFBSSxDQUFDQSxJQUFJLEVBQUUsT0FBTyxFQUFFOztJQUVwQjtJQUNBO0lBQ0E7SUFDQSxJQUFJd0csU0FBUyxHQUFHeEcsSUFBSSxDQUFDeUcsT0FBTyxDQUFDLDJFQUEyRSxFQUFFLEVBQUUsQ0FBQztJQUM3RztJQUNBRCxTQUFTLEdBQUdBLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUM7SUFDL0M7SUFDQTtJQUNBRCxTQUFTLEdBQUdBLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLGdCQUFnQixFQUFFLEVBQUUsQ0FBQzs7SUFFbkQ7SUFDQTtJQUNBLE1BQU1DLGlCQUFpQixHQUFJQyxFQUFVLElBQWM7TUFDakQsSUFBSSxDQUFDQSxFQUFFLElBQUlBLEVBQUUsQ0FBQ2pJLE1BQU0sS0FBSyxDQUFDLEVBQUUsT0FBTyxLQUFLO01BQ3hDLE1BQU1rSSxJQUFJLEdBQUdELEVBQUUsQ0FBQ0UsVUFBVSxDQUFDLENBQUMsQ0FBQztNQUM3QixJQUFJRCxJQUFJLEtBQUssR0FBRyxJQUFJQSxJQUFJLEtBQUssSUFBSSxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7TUFDaEQsSUFBSUEsSUFBSSxLQUFLLEdBQUcsSUFBSUEsSUFBSSxLQUFLLEdBQUcsRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFFO01BQ2hELElBQUlBLElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztNQUNqRSxJQUFJQSxJQUFJLEtBQUssSUFBSSxJQUFJQSxJQUFJLEtBQUssSUFBSSxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7TUFDakQsSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDO01BQ2hDLE9BQU8sS0FBSztJQUNkLENBQUM7SUFFRCxNQUFNRSxLQUFLLEdBQUcsQ0FBQyxHQUFHTixTQUFTLENBQUM7SUFDNUIsSUFBSU8sTUFBTSxHQUFHLEVBQUU7SUFDZixLQUFLLElBQUk5TSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUc2TSxLQUFLLENBQUNwSSxNQUFNLEVBQUV6RSxDQUFDLEVBQUUsRUFBRTtNQUNyQyxNQUFNME0sRUFBRSxHQUFHRyxLQUFLLENBQUM3TSxDQUFDLENBQUM7TUFDbkIsSUFBSXlNLGlCQUFpQixDQUFDQyxFQUFFLENBQUMsRUFBRTtRQUN6QjtNQUNGO01BQ0FJLE1BQU0sSUFBSUosRUFBRTtJQUNkO0lBQ0FILFNBQVMsR0FBR08sTUFBTTs7SUFFbEI7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBO0lBQ0E7SUFDQVAsU0FBUyxHQUFHQSxTQUFTLENBQUNDLE9BQU8sQ0FBQyw4REFBOEQsRUFBRSxFQUFFLENBQUM7O0lBRWpHO0lBQ0E7SUFDQUQsU0FBUyxHQUFHQSxTQUFTLENBQUNDLE9BQU8sQ0FBQywwQ0FBMEMsRUFBRSxHQUFHLENBQUM7O0lBRTlFO0lBQ0E7SUFDQUQsU0FBUyxHQUFHQSxTQUFTLENBQUNDLE9BQU8sQ0FBQyxtQ0FBbUMsRUFBRSxFQUFFLENBQUM7SUFFdEUsT0FBT0QsU0FBUztFQUNsQjtFQUVRUSxZQUFZQSxDQUFDQyxLQUFjLEVBQWlCO0lBQ2xELElBQUksQ0FBQ0EsS0FBSyxFQUFFQyxJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU8sSUFBSTtJQUMvQixPQUFPRCxLQUFLLENBQUNDLElBQUksQ0FBQyxDQUFDLENBQUM5SyxXQUFXLENBQUMsQ0FBQztFQUNuQztFQUVRK0ssZUFBZSxHQUF3QyxJQUFJO0VBRTNEQyxZQUFZLEdBQUcsQ0FBQztFQUNoQkMsaUJBQWlCLEdBQUcsQ0FBQztFQUNyQkMsV0FBVyxHQUFhLEVBQUU7RUFDMUJDLHNCQUFzQixHQUFHLEtBQUs7RUFDOUJDLGNBQWMsR0FBRyxLQUFLO0VBQ3RCQyxpQkFBaUIsR0FBRyxDQUFDO0VBQ1pDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQyxDQUFDO0VBQ3ZCQyxrQkFBa0IsR0FBRyxHQUFHLENBQUMsQ0FBQztFQUMxQkMsc0JBQXNCLEdBQUcsRUFBRSxDQUFDLENBQUM7RUFDN0JDLDJCQUEyQixHQUFHLENBQUMsQ0FBQyxDQUFDO0VBQ2xEO0VBQ2lCekIsa0JBQWtCLEdBQUcsRUFBRSxHQUFHLElBQUksR0FBRyxJQUFJLENBQUMsQ0FBQztFQUNoREwsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLENBQUM7RUFDN0IrQixtQkFBbUIsR0FBRyxDQUFDO0VBQ3ZCQyxnQkFBZ0IsR0FBRyxLQUFLO0VBQ3hCOUIsV0FBVyxHQUFHLEVBQUU7RUFDaEIrQixZQUFZLEdBQUcsS0FBSztFQUNwQjlCLGdCQUFnQixHQUFHLEVBQUU7RUFDckIrQixlQUFlLEdBQTBCLElBQUk7RUFDN0NDLHFCQUFxQixHQUFHLENBQUM7RUFDekJDLG1CQUFtQixHQUFHLENBQUM7RUFDdkJDLGlCQUFpQixHQUF3QyxFQUFFO0VBQ25FO0VBQ1FDLG1CQUFtQixHQUFHLEVBQUU7RUFDeEJDLGtCQUFrQixHQUEwQixJQUFJO0VBQ3ZDQyxvQkFBb0IsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUM1QztFQUNRQyxlQUFlLEdBQUcsRUFBRTtFQUNwQkMsY0FBYyxHQUEwQixJQUFJO0VBQ25DQyxpQkFBaUIsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUNqQ0Msb0JBQW9CLEdBQWtCLElBQUk7RUFDMUNDLDBCQUEwQixHQUFHLElBQUk7RUFDakNDLGlCQUFpQixHQUFHLEtBQUs7RUFDekJDLHNCQUFzQixHQUFHLEtBQUssQ0FBQyxDQUFFO0VBQ2pDQyxXQUFXLEdBQW9ELElBQUk7RUFDbkVDLGlCQUFpQixHQUFHLElBQUk7RUFDeEJDLHdCQUF3QixHQUFHLEtBQUs7RUFDaENDLFVBQVUsR0FBRyxLQUFLO0VBQzFCO0VBQ1FDLGFBQWEsR0FBRyxLQUFLO0VBQ3JCQyxjQUFjLEdBQUcsQ0FBQztFQUNUQyxnQkFBZ0IsR0FBRyxFQUFFLENBQUMsQ0FBQztFQUNoQ0MsbUJBQW1CLEdBQTBCLElBQUk7RUFDekQ7RUFDUUMsa0JBQWtCLEdBQUcsRUFBRTtFQUN2QkMsZUFBZSxHQUFHLEtBQUs7RUFDdkJDLGtCQUFrQixHQUFHLENBQUM7RUFDdEJDLGdCQUFnQixHQUF5QixNQUFNO0VBQ3ZEO0VBQ1FDLFFBQVEsR0FBRyxLQUFLO0VBQ3hCO0VBQ1FDLFlBQVksR0FBRyxJQUFJO0VBQzNCO0VBQ1FDLGtCQUFrQixHQUF3QixJQUFJO0VBQzlDQyxvQkFBb0IsR0FBc0QsSUFBSTtFQUM5RUMsZ0JBQWdCLEdBQW9DLElBQUk7RUFDeERDLGdCQUFnQixHQUF3QixJQUFJO0VBQ3BEO0VBQ1FDLFlBQVksR0FBNkMsSUFBSTtFQUM3REMsZUFBZSxHQUEyQixJQUFJO0VBQzlDQyxZQUFZLEdBTVQsSUFBSTs7RUFFZjtFQUNRQyxTQUFTLEdBQWUsRUFBRTtFQUMxQkMsU0FBUyxHQUFHLENBQUM7RUFDYkMsU0FBUyxHQUFrQixJQUFJO0VBQy9CQyxZQUFZLEdBQTZDLElBQUk7RUFFckVDLFdBQVdBLENBQ1Q5SSxNQUEwQixHQUFHK0ksT0FBTyxDQUFDQyxNQUFNLEVBQzNDL0ksS0FBd0IsR0FBRzhJLE9BQU8sQ0FBQ0UsS0FBSyxFQUN4Q0MsUUFBbUMsRUFDbkM7SUFDQSxLQUFLLENBQUMsQ0FBQzs7SUFFUDtJQUNBLElBQUksQ0FBQ0MsRUFBRSxDQUFDLE9BQU8sRUFBR0MsR0FBRyxJQUFLO01BQ3hCO01BQ0FDLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLDRCQUE0QixFQUFFRixHQUFHLENBQUM7SUFDbEQsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDcEosTUFBTSxHQUFHQSxNQUFNO0lBQ3BCLElBQUksQ0FBQ0MsS0FBSyxHQUFHQSxLQUFLOztJQUVsQjtJQUNBLE1BQU1zSixXQUFXLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUN4SixNQUFNLEVBQUV5SixLQUFLLENBQUM7SUFDL0MsTUFBTUMsVUFBVSxHQUFHRixPQUFPLENBQUMsSUFBSSxDQUFDdkosS0FBSyxFQUFFd0osS0FBSyxDQUFDO0lBQzdDLElBQUksQ0FBQ3JKLFdBQVcsR0FBR21KLFdBQVcsSUFBSUcsVUFBVTtJQUM1QyxJQUFJLENBQUN2SixTQUFTLEdBQUcsSUFBQXdKLDZCQUFpQixFQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQ3ZKLFdBQVc7O0lBRXpEO0lBQ0EsSUFBSTtNQUNGLElBQUksQ0FBQzhCLFlBQVksR0FBRyxJQUFJMEgsNEJBQVksQ0FBQyxDQUFDO0lBQ3hDLENBQUMsQ0FBQyxNQUFNO01BQ047TUFDQSxJQUFJLENBQUMxSCxZQUFZLEdBQUcsSUFBSTBILDRCQUFZLENBQUMsQ0FBQztJQUN4Qzs7SUFFQTtJQUNBLElBQUk7TUFDRixJQUFJLENBQUMxSixFQUFFLEdBQUdoSixRQUFRLENBQUMyUyxlQUFlLENBQUM7UUFDakM1SixLQUFLLEVBQUUsSUFBSSxDQUFDQSxLQUFLO1FBQ2pCRCxNQUFNLEVBQUUsSUFBSSxDQUFDQSxNQUFNO1FBQ25COEosUUFBUSxFQUFFLElBQUk7UUFDZEMsTUFBTSxFQUFFLEVBQUU7UUFDVkMsT0FBTyxFQUFFO01BQ1gsQ0FBQyxDQUFDO01BQ0YsSUFBSSxDQUFDOUosRUFBRSxDQUFDK0osU0FBUyxDQUFDLEVBQUUsQ0FBQztJQUN2QixDQUFDLENBQUMsT0FBT2IsR0FBRyxFQUFFO01BQ1o7TUFDQUMsT0FBTyxDQUFDQyxLQUFLLENBQUMsMERBQTBELEVBQUVGLEdBQUcsQ0FBQztNQUM5RSxJQUFJLENBQUNsSixFQUFFLEdBQUdoSixRQUFRLENBQUMyUyxlQUFlLENBQUM7UUFDakM1SixLQUFLLEVBQUU4SSxPQUFPLENBQUNFLEtBQUs7UUFDcEJqSixNQUFNLEVBQUUrSSxPQUFPLENBQUNDLE1BQU07UUFDdEJjLFFBQVEsRUFBRTtNQUNaLENBQUMsQ0FBQztNQUNGLElBQUksQ0FBQzFKLFdBQVcsR0FBRyxLQUFLO01BQ3hCLElBQUksQ0FBQ0QsU0FBUyxHQUFHLElBQUk7SUFDdkI7SUFFQSxJQUFJLENBQUMrSixrQkFBa0IsQ0FBQyxDQUFDOztJQUV6QjtJQUNBLElBQUksQ0FBQzFCLGVBQWUsR0FBRyxJQUFBMkIsMENBQXlCLEVBQUM7TUFDL0NDLE9BQU8sRUFBRXJCLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxXQUFXLENBQUMsS0FBSyxHQUFHO01BQ3pDQyxnQkFBZ0IsRUFBRUEsQ0FBQ3ZPLElBQUksRUFBRW9CLE9BQU8sS0FBSztRQUNuQztRQUNBLElBQUk0TCxPQUFPLENBQUNzQixHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUU7VUFDNUJoQixPQUFPLENBQUNDLEtBQUssQ0FBQyxzQ0FBc0N2TixJQUFJLE1BQU1vQixPQUFPLEVBQUUsQ0FBQztRQUMxRTtNQUNGO0lBQ0YsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsSUFBSSxDQUFDZ0wsa0JBQWtCLEdBQUcsTUFBTTtNQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDaEksU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDOEgsUUFBUSxFQUFFO1FBQ3JDLElBQUk7VUFDRixJQUFJLENBQUNpQyxrQkFBa0IsQ0FBQyxDQUFDO1VBQ3pCLElBQUksQ0FBQ0ssWUFBWSxDQUFDLENBQUM7UUFDckIsQ0FBQyxDQUFDLE1BQU07VUFDTjtRQUFBO01BRUo7SUFDRixDQUFDOztJQUVEO0lBQ0EsSUFBSTtNQUNGLElBQUksQ0FBQ3ZLLE1BQU0sQ0FBQ21KLEVBQUUsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDaEIsa0JBQWtCLENBQUM7SUFDbkQsQ0FBQyxDQUFDLE1BQU07TUFDTjtJQUFBO0lBR0YsSUFBSSxDQUFDcUMsa0JBQWtCLENBQUMsQ0FBQztFQUMzQjtFQUVBQyxVQUFVQSxDQUFBLEVBQVM7SUFDakIsSUFBSSxDQUFDLElBQUksQ0FBQ3JLLFdBQVcsRUFBRTtNQUNyQjtJQUNGOztJQUVBO0lBQ0EsSUFBSSxDQUFDTSxNQUFNLEdBQUcsRUFBRTtJQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO0lBQ2YsSUFBSSxDQUFDb0YsaUJBQWlCLEdBQUcsQ0FBQztJQUMxQixJQUFJLENBQUNNLGdCQUFnQixHQUFHLEtBQUs7SUFDN0IsSUFBSSxDQUFDOUIsV0FBVyxHQUFHLEVBQUU7SUFDckIsSUFBSSxDQUFDRixtQkFBbUIsR0FBRyxLQUFLO0lBQ2hDLElBQUksQ0FBQ2lDLFlBQVksR0FBRyxLQUFLO0lBQ3pCLElBQUksQ0FBQzlCLGdCQUFnQixHQUFHLEVBQUU7SUFDMUIsSUFBSSxDQUFDckQsY0FBYyxHQUFHLElBQUk7SUFDMUIsSUFBSSxDQUFDd0YsbUJBQW1CLEdBQUcsRUFBRTtJQUM3QixJQUFJLENBQUMrRCx1QkFBdUIsQ0FBQyxDQUFDO0lBRTlCLElBQUksQ0FBQyxJQUFJLENBQUN2SyxTQUFTLEVBQUU7TUFDbkI7TUFDQTtNQUNBLElBQUksSUFBSSxDQUFDZ0gsaUJBQWlCLElBQUksSUFBSSxDQUFDRSxXQUFXLEVBQUU7UUFDOUMsSUFBSSxDQUFDc0QsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQSxJQUFJLENBQUNDLEtBQUssQ0FBQ3BNLEdBQUcsQ0FBQ00sc0JBQXNCLENBQUM7TUFDdEMsSUFBSSxDQUFDb0wsa0JBQWtCLENBQUMsQ0FBQztNQUN6QixJQUFJLENBQUMvQyxpQkFBaUIsR0FBRyxLQUFLO01BQzlCLElBQUksQ0FBQ0QsMEJBQTBCLEdBQUcsSUFBSTtNQUN0QyxJQUFJLENBQUMwRCxLQUFLLENBQUNwTSxHQUFHLENBQUNFLFdBQVcsQ0FBQztNQUMzQjtJQUNGOztJQUVBO0lBQ0EsSUFBSSxDQUFDd0wsa0JBQWtCLENBQUMsQ0FBQztJQUN6QixJQUFJLENBQUMvQyxpQkFBaUIsR0FBRyxLQUFLO0lBQzlCLElBQUksQ0FBQ0QsMEJBQTBCLEdBQUcsSUFBSTtJQUN0QyxJQUFJLENBQUNxRCxZQUFZLENBQUMsQ0FBQztFQUNyQjtFQUVBTSxPQUFPQSxDQUFBLEVBQVM7SUFDZDtJQUNBLElBQUksQ0FBQzVDLFFBQVEsR0FBRyxJQUFJOztJQUVwQjtJQUNBLElBQUk7TUFDRixJQUFJLENBQUM2QyxrQkFBa0IsQ0FBQyxJQUFJQyxLQUFLLENBQUMsbUJBQW1CLENBQUMsQ0FBQztJQUN6RCxDQUFDLENBQUMsTUFBTSxDQUFFO0lBRVYsSUFBSTtNQUNGLElBQUksQ0FBQ0wsdUJBQXVCLENBQUMsQ0FBQztJQUNoQyxDQUFDLENBQUMsTUFBTSxDQUFFOztJQUVWO0lBQ0EsSUFBSSxJQUFJLENBQUM5QyxtQkFBbUIsRUFBRTtNQUM1QixJQUFJO1FBQ0ZvRCxZQUFZLENBQUMsSUFBSSxDQUFDcEQsbUJBQW1CLENBQUM7TUFDeEMsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtNQUNWLElBQUksQ0FBQ0EsbUJBQW1CLEdBQUcsSUFBSTtJQUNqQzs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDeEYsZUFBZSxFQUFFO01BQ3hCLElBQUk7UUFDRjZJLGFBQWEsQ0FBQyxJQUFJLENBQUM3SSxlQUFlLENBQUM7TUFDckMsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtNQUNWLElBQUksQ0FBQ0EsZUFBZSxHQUFHLElBQUk7SUFDN0I7SUFFQSxJQUFJLElBQUksQ0FBQ0osZ0JBQWdCLEVBQUU7TUFDekIsSUFBSTtRQUNGLElBQUksQ0FBQ0EsZ0JBQWdCLENBQUNrSixJQUFJLENBQUMsQ0FBQztNQUM5QixDQUFDLENBQUMsTUFBTSxDQUFFO01BQ1YsSUFBSSxDQUFDbEosZ0JBQWdCLEdBQUcsSUFBSTtJQUM5QjtJQUVBLElBQUksSUFBSSxDQUFDQyxpQkFBaUIsRUFBRTtNQUMxQixJQUFJO1FBQ0YsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQ2lKLElBQUksQ0FBQyxDQUFDO01BQy9CLENBQUMsQ0FBQyxNQUFNLENBQUU7TUFDVixJQUFJLENBQUNqSixpQkFBaUIsR0FBRyxJQUFJO0lBQy9CO0lBRUEsSUFBSTtNQUNGLElBQUksQ0FBQ0MsWUFBWSxDQUFDaUosT0FBTyxDQUFDLENBQUM7SUFDN0IsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtJQUVWLElBQUk7TUFDRixJQUFBQyxpQ0FBaUIsRUFBQyxDQUFDO0lBQ3JCLENBQUMsQ0FBQyxNQUFNLENBQUU7O0lBRVY7SUFDQSxJQUFJLElBQUksQ0FBQ2pELGtCQUFrQixFQUFFO01BQzNCLElBQUk7UUFDRixJQUFJLENBQUNuSSxNQUFNLENBQUNxTCxjQUFjLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQ2xELGtCQUFrQixDQUFDO01BQy9ELENBQUMsQ0FBQyxNQUFNLENBQUU7TUFDVixJQUFJLENBQUNBLGtCQUFrQixHQUFHLElBQUk7SUFDaEM7SUFFQSxJQUFJLElBQUksQ0FBQ0Msb0JBQW9CLEVBQUU7TUFDN0IsSUFBSTtRQUNGLElBQUksQ0FBQ25JLEtBQUssQ0FBQ29MLGNBQWMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDakQsb0JBQW9CLENBQUM7TUFDbEUsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtNQUNWLElBQUksQ0FBQ0Esb0JBQW9CLEdBQUcsSUFBSTtJQUNsQztJQUVBLElBQUksSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRTtNQUN6QixJQUFJO1FBQ0YsSUFBSSxDQUFDcEksS0FBSyxDQUFDb0wsY0FBYyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUNoRCxnQkFBZ0IsQ0FBQztNQUMxRCxDQUFDLENBQUMsTUFBTSxDQUFFO01BQ1YsSUFBSSxDQUFDQSxnQkFBZ0IsR0FBRyxJQUFJO0lBQzlCO0lBRUEsSUFBSSxJQUFJLENBQUNDLGdCQUFnQixFQUFFO01BQ3pCLElBQUk7UUFDRixJQUFJLENBQUNySSxLQUFLLENBQUNvTCxjQUFjLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQy9DLGdCQUFnQixDQUFDO01BQzFELENBQUMsQ0FBQyxNQUFNLENBQUU7TUFDVixJQUFJLENBQUNBLGdCQUFnQixHQUFHLElBQUk7SUFDOUI7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQ0MsWUFBWSxFQUFFO01BQ3JCLElBQUk7UUFDRjtRQUNDLElBQUksQ0FBQ3RJLEtBQUssQ0FBU3FMLElBQUksR0FBRyxJQUFJLENBQUMvQyxZQUFZO01BQzlDLENBQUMsQ0FBQyxNQUFNLENBQUU7TUFDVixJQUFJLENBQUNBLFlBQVksR0FBRyxJQUFJO0lBQzFCOztJQUVBO0lBQ0EsSUFBSTtNQUNGLElBQUksQ0FBQ2dELGtCQUFrQixDQUFDLENBQUM7SUFDM0IsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtJQUVWLElBQUksQ0FBQyxJQUFJLENBQUNuTCxXQUFXLEVBQUU7TUFDckIsSUFBSTtRQUNGLElBQUksQ0FBQ0YsRUFBRSxDQUFDc0wsS0FBSyxDQUFDLENBQUM7TUFDakIsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtNQUNWO0lBQ0Y7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDckwsU0FBUyxFQUFFO01BQ25CO01BQ0EsSUFBSTtRQUNGLElBQUksQ0FBQ3dLLGVBQWUsQ0FBQyxDQUFDO1FBQ3RCLElBQUksQ0FBQ0MsS0FBSyxDQUFDcE0sR0FBRyxDQUFDTyx1QkFBdUIsQ0FBQztRQUN2QyxJQUFJLENBQUM2TCxLQUFLLENBQUNwTSxHQUFHLENBQUNFLFdBQVcsQ0FBQztRQUMzQixJQUFJLENBQUNrTSxLQUFLLENBQUMsSUFBSSxDQUFDO01BQ2xCLENBQUMsQ0FBQyxNQUFNLENBQUU7SUFDWjtJQUVBLElBQUk7TUFDRixJQUFJLElBQUksQ0FBQzNLLEtBQUssQ0FBQ3dKLEtBQUssRUFBRTtRQUNwQixJQUFJLENBQUN4SixLQUFLLENBQUN3TCxVQUFVLENBQUMsS0FBSyxDQUFDO01BQzlCO0lBQ0YsQ0FBQyxDQUFDLE1BQU0sQ0FBRTtJQUVWLElBQUk7TUFDRixJQUFJLENBQUN2TCxFQUFFLENBQUNzTCxLQUFLLENBQUMsQ0FBQztJQUNqQixDQUFDLENBQUMsTUFBTSxDQUFFO0lBRVYsSUFBSSxDQUFDbkUsV0FBVyxHQUFHLElBQUk7O0lBRXZCO0lBQ0EsSUFBSSxDQUFDN0csVUFBVSxHQUFHLEVBQUU7RUFDdEI7RUFFQWtMLHNCQUFzQkEsQ0FBQSxFQUFTO0lBQzdCLElBQUksQ0FBQ25FLHdCQUF3QixHQUFHLElBQUk7RUFDdEM7RUFFQW9FLHFCQUFxQkEsQ0FBQ0MsTUFBZSxHQUFHLEtBQUssRUFBUTtJQUNuRCxJQUFJLENBQUNyRSx3QkFBd0IsR0FBRyxLQUFLO0lBQ3JDLElBQUlxRSxNQUFNLEVBQUU7TUFDVixJQUFJLENBQUNyQixZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGOztFQUVBOztFQUVBO0VBQ1FzQixpQkFBaUIsR0FBa0IsSUFBSTtFQUN2Q0MsZ0JBQWdCLEdBQUcsS0FBSztFQUN4QkMsZ0JBQWdCLEdBQUcsS0FBSztFQUN4QkMsa0JBQWtCLEdBQUcsQ0FBQztFQUV0QnhCLGtCQUFrQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUNwSyxXQUFXLEVBQUU7TUFDckI7SUFDRjtJQUNBLElBQUksQ0FBQ0YsRUFBRSxDQUFDcUwsa0JBQWtCLENBQUMsTUFBTSxDQUFDOztJQUVsQztJQUNBO0lBQ0E7SUFDQSxNQUFNVSxJQUFJLEdBQUcsSUFBSTtJQUNqQixJQUFJLENBQUMxRCxZQUFZLEdBQUcsSUFBSSxDQUFDdEksS0FBSyxDQUFDcUwsSUFBSSxDQUFDWSxJQUFJLENBQUMsSUFBSSxDQUFDak0sS0FBSyxDQUFDOztJQUVwRDtJQUNDLElBQUksQ0FBQ0EsS0FBSyxDQUFTcUwsSUFBSSxHQUFHLFVBQVNhLEtBQWEsRUFBRSxHQUFHQyxJQUFlLEVBQVc7TUFDOUUsSUFBSUQsS0FBSyxLQUFLLE1BQU0sSUFBSSxDQUFDRixJQUFJLENBQUNoRSxRQUFRLEVBQUU7UUFDdEMsTUFBTW9FLElBQUksR0FBR0QsSUFBSSxDQUFDLENBQUMsQ0FBQztRQUNwQixNQUFNRSxHQUFHLEdBQUdDLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDSCxJQUFJLENBQUMsR0FBR0EsSUFBSSxDQUFDSSxRQUFRLENBQUMsTUFBTSxDQUFDLEdBQUdDLE1BQU0sQ0FBQ0wsSUFBSSxJQUFJLEVBQUUsQ0FBQztRQUM5RSxNQUFNbkgsSUFBSSxHQUFHb0gsR0FBRyxHQUFHQSxHQUFHLENBQUNuSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztRQUV4QyxJQUFJNEQsT0FBTyxDQUFDc0IsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7VUFDakNoQixPQUFPLENBQUNDLEtBQUssQ0FBQyxnQ0FBZ0M2QyxLQUFLLFVBQVVHLEdBQUcsVUFBVXBILElBQUksUUFBUW9ILEdBQUcsQ0FBQ3RQLE1BQU0sRUFBRSxDQUFDO1FBQ3JHOztRQUVBO1FBQ0EsSUFBSWtJLElBQUksS0FBSyxDQUFDLEVBQUU7VUFDZCxJQUFJNkQsT0FBTyxDQUFDc0IsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7WUFDakNoQixPQUFPLENBQUNDLEtBQUssQ0FBQyxvQ0FBb0MsQ0FBQztVQUNyRDtVQUNBO1VBQ0FxRCxZQUFZLENBQUMsTUFBTVYsSUFBSSxDQUFDVyxXQUFXLENBQUMsQ0FBQyxDQUFDO1VBQ3RDLE9BQU8sSUFBSSxDQUFDLENBQUM7UUFDZjs7UUFFQTtRQUNBLElBQUkxSCxJQUFJLEtBQUssQ0FBQyxFQUFFO1VBQ2QsSUFBSTZELE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsb0NBQW9DLENBQUM7VUFDckQ7VUFDQXFELFlBQVksQ0FBQyxNQUFNVixJQUFJLENBQUNZLFdBQVcsQ0FBQyxDQUFDLENBQUM7VUFDdEMsT0FBTyxJQUFJLENBQUMsQ0FBQztRQUNmOztRQUVBO1FBQ0E7UUFDQSxJQUFJQyxZQUEyQixHQUFHLElBQUk7UUFFdEMsSUFBSVIsR0FBRyxDQUFDdFAsTUFBTSxLQUFLLENBQUMsRUFBRTtVQUNwQixJQUFJa0ksSUFBSSxLQUFLLEdBQUcsSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRTRILFlBQVksR0FBRyxHQUFHLENBQUMsQ0FBQztVQUFBLEtBQ2xELElBQUk1SCxJQUFJLEtBQUssR0FBRyxJQUFJQSxJQUFJLEtBQUssR0FBRyxFQUFFNEgsWUFBWSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1VBQUEsS0FDdEQsSUFBSTVILElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxHQUFHLEVBQUU0SCxZQUFZLEdBQUcsR0FBRyxDQUFDLENBQUM7VUFBQSxLQUN4RSxJQUFJNUgsSUFBSSxLQUFLLElBQUksSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRTRILFlBQVksR0FBRyxHQUFHLENBQUMsQ0FBQztVQUFBLEtBQ3hELElBQUk1SCxJQUFJLEtBQUssSUFBSSxFQUFFNEgsWUFBWSxHQUFHLEdBQUcsQ0FBQyxDQUFDO1FBQzlDO1FBQ0E7UUFDQSxJQUFJLENBQUNBLFlBQVksSUFBSTVILElBQUksS0FBSyxFQUFFLElBQUlvSCxHQUFHLENBQUN0UCxNQUFNLEtBQUssQ0FBQyxFQUFFO1VBQ3BELE1BQU0rUCxNQUFNLEdBQUdULEdBQUcsQ0FBQ1UsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztVQUMxQyxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDQyxRQUFRLENBQUNILE1BQU0sQ0FBQyxFQUFFO1lBQzlDRCxZQUFZLEdBQUdDLE1BQU07VUFDdkI7UUFDRjtRQUVBLElBQUlELFlBQVksRUFBRTtVQUNoQjtVQUNBYixJQUFJLENBQUNrQixZQUFZLENBQUNMLFlBQVksQ0FBQztVQUMvQixPQUFPLElBQUksQ0FBQyxDQUFDO1FBQ2Y7O1FBRUE7UUFDQSxNQUFNTSxPQUFPLEdBQUduQixJQUFJLENBQUNvQixvQkFBb0IsQ0FBQ2YsR0FBRyxDQUFDO1FBQzlDLElBQUljLE9BQU8sQ0FBQ3BRLE1BQU0sR0FBRyxDQUFDLEVBQUU7VUFDdEIsSUFBSStMLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1lBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsOEJBQThCOEQsT0FBTyxDQUFDdlQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUM7VUFDbEU7VUFDQSxLQUFLLE1BQU1rVCxNQUFNLElBQUlLLE9BQU8sRUFBRTtZQUM1Qm5CLElBQUksQ0FBQ2tCLFlBQVksQ0FBQ0osTUFBTSxDQUFDO1VBQzNCO1VBQ0EsT0FBTyxJQUFJLENBQUMsQ0FBQztRQUNmOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EsTUFBTU8sZ0JBQWdCLEdBQUcsV0FBVztRQUNwQyxNQUFNQyxjQUFjLEdBQUcsV0FBVztRQUNsQyxNQUFNQyxpQkFBaUIsR0FBR2xCLEdBQUcsQ0FBQ1ksUUFBUSxDQUFDSSxnQkFBZ0IsQ0FBQztRQUN4RCxNQUFNRyxlQUFlLEdBQUduQixHQUFHLENBQUNZLFFBQVEsQ0FBQ0ssY0FBYyxDQUFDOztRQUVwRDtRQUNBLElBQUlDLGlCQUFpQixJQUFJQyxlQUFlLElBQUl4QixJQUFJLENBQUM1RixnQkFBZ0IsRUFBRTtVQUNqRTtVQUNBO1FBQUE7UUFFRjtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0EsTUFBTXFILFdBQVcsR0FBSUMsQ0FBUyxJQUFNQSxDQUFDLElBQUksRUFBRSxJQUFJQSxDQUFDLEdBQUcsR0FBRyxJQUFLQSxDQUFDLEdBQUcsR0FBRyxDQUFDLENBQUM7UUFDcEUsTUFBTUMsU0FBUyxHQUFJRCxDQUFTLElBQUtBLENBQUMsS0FBSyxFQUFFLElBQUlBLENBQUMsS0FBSyxFQUFFO1FBQ3JELE1BQU1FLFlBQVksR0FBRzVCLElBQUksQ0FBQ25GLGVBQWUsQ0FBQzlKLE1BQU0sR0FBRyxDQUFDOztRQUVwRDtRQUNBO1FBQ0E7UUFDQTtRQUNBLElBQUk4USxZQUFZLEdBQUcsS0FBSzs7UUFFeEI7UUFDQSxJQUFJeEIsR0FBRyxDQUFDdFAsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDc1AsR0FBRyxDQUFDeUIsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO1VBQzdDRCxZQUFZLEdBQUcsSUFBSTtRQUNyQjtRQUNBO1FBQUEsS0FDSyxJQUFJRCxZQUFZLElBQUl2QixHQUFHLENBQUN0UCxNQUFNLEtBQUssQ0FBQyxLQUFLMFEsV0FBVyxDQUFDeEksSUFBSSxDQUFDLElBQUkwSSxTQUFTLENBQUMxSSxJQUFJLENBQUMsQ0FBQyxFQUFFO1VBQ25GNEksWUFBWSxHQUFHLElBQUk7UUFDckI7UUFFQSxJQUFJQSxZQUFZLEVBQUU7VUFDaEI7VUFDQSxNQUFNRSxPQUFPLEdBQUcvQixJQUFJLENBQUNnQyxrQkFBa0IsQ0FBQzNCLEdBQUcsQ0FBQztVQUM1QyxJQUFJLENBQUMwQixPQUFPLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztVQUMzQi9CLElBQUksQ0FBQ25GLGVBQWUsSUFBSWtILE9BQU87O1VBRS9CO1VBQ0EsSUFBSS9CLElBQUksQ0FBQ2xGLGNBQWMsRUFBRTtZQUN2QmlFLFlBQVksQ0FBQ2lCLElBQUksQ0FBQ2xGLGNBQWMsQ0FBQztVQUNuQzs7VUFFQTtVQUNBa0YsSUFBSSxDQUFDbEYsY0FBYyxHQUFHbUgsVUFBVSxDQUFDLE1BQU07WUFDckNqQyxJQUFJLENBQUNrQyxxQkFBcUIsQ0FBQyxDQUFDO1VBQzlCLENBQUMsRUFBRWxDLElBQUksQ0FBQ2pGLGlCQUFpQixDQUFDO1VBRTFCLE9BQU8sSUFBSSxDQUFDLENBQUM7UUFDZjtRQUNBO1FBQ0E7O1FBRUE7UUFDQTtRQUNBO01BQ0Y7O01BRUE7TUFDQSxPQUFPaUYsSUFBSSxDQUFDMUQsWUFBWSxDQUFFNEQsS0FBSyxFQUFFLEdBQUdDLElBQUksQ0FBQztJQUMzQyxDQUFDOztJQUVEO0lBQ0FsVixRQUFRLENBQUNrWCxrQkFBa0IsQ0FBQyxJQUFJLENBQUNuTyxLQUFLLEVBQUUsSUFBSSxDQUFDQyxFQUFFLENBQUM7SUFDaEQsSUFBSSxJQUFJLENBQUNELEtBQUssQ0FBQ3dKLEtBQUssRUFBRTtNQUNwQixJQUFJLENBQUN4SixLQUFLLENBQUN3TCxVQUFVLENBQUMsSUFBSSxDQUFDO0lBQzdCOztJQUVBO0lBQ0EsSUFBSSxDQUFDckQsb0JBQW9CLEdBQUcsQ0FBQ2tFLEdBQVcsRUFBRStCLEdBQWlCLEtBQUs7TUFDOUQsSUFBSSxDQUFDLElBQUksQ0FBQ3BHLFFBQVEsRUFBRTtRQUNsQixJQUFJLENBQUNxRyxjQUFjLENBQUNoQyxHQUFHLEVBQUUrQixHQUFHLENBQUM7TUFDL0I7SUFDRixDQUFDO0lBQ0QsSUFBSSxDQUFDcE8sS0FBSyxDQUFDa0osRUFBRSxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUNmLG9CQUFvQixDQUFDO0VBQ3REOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1VtRyx1QkFBdUJBLENBQUN0TyxLQUFhLEVBQWlCO0lBQzVELElBQUksQ0FBQ0EsS0FBSyxFQUFFLE9BQU8sSUFBSTtJQUN2QixNQUFNaUYsSUFBSSxHQUFHakYsS0FBSyxDQUFDa0YsVUFBVSxDQUFDLENBQUMsQ0FBQzs7SUFFaEM7SUFDQSxJQUFJRCxJQUFJLEtBQUssR0FBRyxJQUFJQSxJQUFJLEtBQUssSUFBSSxFQUFFLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDL0MsSUFBSUEsSUFBSSxLQUFLLEdBQUcsSUFBSUEsSUFBSSxLQUFLLEdBQUcsRUFBRSxPQUFPLEdBQUcsQ0FBQyxDQUFFO0lBQy9DLElBQUlBLElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxJQUFJLElBQUlBLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxHQUFHLENBQUMsQ0FBQztJQUNoRSxJQUFJQSxJQUFJLEtBQUssSUFBSSxJQUFJQSxJQUFJLEtBQUssSUFBSSxFQUFFLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDaEQsSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRSxPQUFPLEdBQUcsQ0FBQyxDQUFDOztJQUUvQjtJQUNBLElBQUlBLElBQUksS0FBSyxFQUFFLElBQUlqRixLQUFLLENBQUNqRCxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3JDLE1BQU0rUCxNQUFNLEdBQUc5TSxLQUFLLENBQUMrTSxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDO01BQzVDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUNDLFFBQVEsQ0FBQ0gsTUFBTSxDQUFDLEVBQUUsT0FBT0EsTUFBTTtJQUMvRDtJQUVBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVU0sb0JBQW9CQSxDQUFDcE4sS0FBYSxFQUFZO0lBQ3BELElBQUksQ0FBQ0EsS0FBSyxFQUFFLE9BQU8sRUFBRTtJQUNyQixNQUFNbU4sT0FBaUIsR0FBRyxFQUFFO0lBQzVCLE1BQU1oSSxLQUFLLEdBQUcsQ0FBQyxHQUFHbkYsS0FBSyxDQUFDO0lBRXhCLEtBQUssSUFBSTFILENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzZNLEtBQUssQ0FBQ3BJLE1BQU0sRUFBRXpFLENBQUMsRUFBRSxFQUFFO01BQ3JDLE1BQU0wTSxFQUFFLEdBQUdHLEtBQUssQ0FBQzdNLENBQUMsQ0FBQztNQUNuQixNQUFNMk0sSUFBSSxHQUFHRCxFQUFFLENBQUNFLFVBQVUsQ0FBQyxDQUFDLENBQUM7O01BRTdCO01BQ0EsSUFBSUQsSUFBSSxLQUFLLEVBQUUsSUFBSTNNLENBQUMsR0FBRyxDQUFDLEdBQUc2TSxLQUFLLENBQUNwSSxNQUFNLEVBQUU7UUFDdkMsTUFBTStQLE1BQU0sR0FBRzNILEtBQUssQ0FBQzdNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzBVLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUNDLFFBQVEsQ0FBQ0gsTUFBTSxDQUFDLEVBQUU7VUFDOUNLLE9BQU8sQ0FBQzlULElBQUksQ0FBQ3lULE1BQU0sQ0FBQztVQUNwQnhVLENBQUMsRUFBRSxDQUFDLENBQUM7VUFDTDtRQUNGO01BQ0Y7TUFFQSxNQUFNaVcsUUFBUSxHQUFHLElBQUksQ0FBQ0QsdUJBQXVCLENBQUN0SixFQUFFLENBQUM7TUFDakQsSUFBSXVKLFFBQVEsRUFBRTtRQUNacEIsT0FBTyxDQUFDOVQsSUFBSSxDQUFDa1YsUUFBUSxDQUFDO01BQ3hCO0lBQ0Y7SUFFQSxPQUFPcEIsT0FBTztFQUNoQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVYSxrQkFBa0JBLENBQUNoTyxLQUFhLEVBQVU7SUFDaEQsSUFBSSxDQUFDQSxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQ3JCLE1BQU1tRixLQUFLLEdBQUcsQ0FBQyxHQUFHbkYsS0FBSyxDQUFDO0lBQ3hCLElBQUlvRixNQUFNLEdBQUcsRUFBRTtJQUVmLEtBQUssSUFBSTlNLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzZNLEtBQUssQ0FBQ3BJLE1BQU0sRUFBRXpFLENBQUMsRUFBRSxFQUFFO01BQ3JDLE1BQU0wTSxFQUFFLEdBQUdHLEtBQUssQ0FBQzdNLENBQUMsQ0FBQztNQUNuQixNQUFNMk0sSUFBSSxHQUFHRCxFQUFFLENBQUNFLFVBQVUsQ0FBQyxDQUFDLENBQUM7O01BRTdCO01BQ0EsSUFBSSxJQUFJLENBQUNILGlCQUFpQixDQUFDQyxFQUFFLENBQUMsRUFBRTtRQUM5QjtNQUNGOztNQUVBO01BQ0E7TUFDQSxJQUFJQyxJQUFJLEtBQUssRUFBRSxFQUFFO1FBQ2YsSUFBSTNNLENBQUMsR0FBRyxDQUFDLEdBQUc2TSxLQUFLLENBQUNwSSxNQUFNLEVBQUU7VUFDeEIsTUFBTStQLE1BQU0sR0FBRzNILEtBQUssQ0FBQzdNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzBVLFdBQVcsQ0FBQyxDQUFDO1VBQ3pDLElBQUksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUNDLFFBQVEsQ0FBQ0gsTUFBTSxDQUFDLEVBQUU7WUFDOUN4VSxDQUFDLEVBQUUsQ0FBQyxDQUFDO1lBQ0w7VUFDRjtVQUNBO1VBQ0EsSUFBSTZNLEtBQUssQ0FBQzdNLENBQUMsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7WUFDeEJBLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDTDtZQUNBLE9BQU9BLENBQUMsR0FBRyxDQUFDLEdBQUc2TSxLQUFLLENBQUNwSSxNQUFNLElBQUksUUFBUSxDQUFDeVIsSUFBSSxDQUFDckosS0FBSyxDQUFDN00sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUU7Y0FDMURBLENBQUMsRUFBRTtZQUNMO1lBQ0EsSUFBSUEsQ0FBQyxHQUFHLENBQUMsR0FBRzZNLEtBQUssQ0FBQ3BJLE1BQU0sRUFBRTtjQUN4QnpFLENBQUMsRUFBRSxDQUFDLENBQUM7WUFDUDtZQUNBO1VBQ0Y7UUFDRjtNQUNGO01BRUE4TSxNQUFNLElBQUlKLEVBQUU7SUFDZDtJQUVBLE9BQU9JLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVTCxpQkFBaUJBLENBQUMvRSxLQUFhLEVBQVc7SUFDaEQsSUFBSSxDQUFDQSxLQUFLLElBQUlBLEtBQUssQ0FBQ2pELE1BQU0sS0FBSyxDQUFDLEVBQUUsT0FBTyxLQUFLO0lBQzlDLE1BQU1rSSxJQUFJLEdBQUdqRixLQUFLLENBQUNrRixVQUFVLENBQUMsQ0FBQyxDQUFDO0lBQ2hDO0lBQ0EsSUFBSUQsSUFBSSxLQUFLLEdBQUcsSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDO0lBQ2hELElBQUlBLElBQUksS0FBSyxHQUFHLElBQUlBLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBRTtJQUNoRCxJQUFJQSxJQUFJLEtBQUssSUFBSSxJQUFJQSxJQUFJLEtBQUssSUFBSSxJQUFJQSxJQUFJLEtBQUssR0FBRyxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDakUsSUFBSUEsSUFBSSxLQUFLLElBQUksSUFBSUEsSUFBSSxLQUFLLElBQUksRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDO0lBQ2pELElBQUlBLElBQUksS0FBSyxJQUFJLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUNoQyxPQUFPLEtBQUs7RUFDZDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVaUksWUFBWUEsQ0FBQ0osTUFBYyxFQUFRO0lBQ3pDO0lBQ0EsSUFBSSxDQUFDcEcsbUJBQW1CLEdBQUcsRUFBRTtJQUM3QjtJQUNBLElBQUksQ0FBQytELHVCQUF1QixDQUFDLENBQUM7O0lBRTlCO0lBQ0EsTUFBTWdFLFdBQVcsR0FBR0EsQ0FBQSxLQUFNO01BQ3hCLElBQUksSUFBSSxDQUFDdE4sSUFBSSxLQUFLLFdBQVcsRUFBRTtRQUM3QixJQUFJLENBQUN1TixxQkFBcUIsQ0FBQyxDQUFDO01BQzlCLENBQUMsTUFBTTtRQUNMLElBQUksQ0FBQ3BFLFlBQVksQ0FBQyxDQUFDO01BQ3JCO0lBQ0YsQ0FBQztJQUVELElBQUl4QixPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtNQUNqQ2hCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLDBCQUEwQnlELE1BQU0sRUFBRSxDQUFDO0lBQ25EO0lBRUEsUUFBUUEsTUFBTTtNQUNaLEtBQUssR0FBRztRQUNOLElBQUksQ0FBQ3pCLElBQUksQ0FBQywwQkFBMEIsQ0FBQztRQUNyQ29ELFdBQVcsQ0FBQyxDQUFDO1FBQ2I7TUFDRixLQUFLLEdBQUc7UUFDTixJQUFJLENBQUNwRCxJQUFJLENBQUMsc0JBQXNCLENBQUM7UUFDakNvRCxXQUFXLENBQUMsQ0FBQztRQUNiO01BQ0YsS0FBSyxHQUFHO1FBQ04sSUFBSSxDQUFDcEQsSUFBSSxDQUFDLGtCQUFrQixDQUFDO1FBQzdCb0QsV0FBVyxDQUFDLENBQUM7UUFDYjtNQUNGLEtBQUssR0FBRztRQUNOLElBQUksQ0FBQ3BELElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUM1Qm9ELFdBQVcsQ0FBQyxDQUFDO1FBQ2I7TUFDRixLQUFLLEdBQUc7UUFDTjtRQUNBO0lBQ0o7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVOUIsV0FBV0EsQ0FBQSxFQUFTO0lBQzFCLElBQUk3RCxPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtNQUNqQ2hCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLHVCQUF1QixDQUFDO0lBQ3hDOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNiLFlBQVksRUFBRTtNQUNyQixJQUFJLENBQUNxQyxrQkFBa0IsQ0FBQyxJQUFJQyxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztNQUM3RCxJQUFJLENBQUM2RCxXQUFXLENBQUMsQ0FBQztNQUNsQjtJQUNGOztJQUVBO0lBQ0E7SUFDQTtJQUNBLE1BQU1DLFNBQVMsR0FBRyxJQUFJLENBQUNuTyxNQUFNLENBQUMxRCxNQUFNLEdBQUcsQ0FBQztJQUN4QyxJQUFJNlIsU0FBUyxFQUFFO01BQ2IsSUFBSSxDQUFDbk8sTUFBTSxHQUFHLEVBQUU7TUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNmLElBQUksQ0FBQ29GLGlCQUFpQixHQUFHLENBQUM7TUFDMUIsSUFBSSxDQUFDK0ksZ0JBQWdCLENBQUMsQ0FBQztNQUN2QixJQUFJLENBQUN2RSxZQUFZLENBQUMsQ0FBQztNQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztJQUN4QjtJQUNBO0lBQ0EsSUFBSSxDQUFDekQsSUFBSSxDQUFDLE9BQU8sRUFBRTtNQUFFdUQ7SUFBVSxDQUFDLENBQUM7RUFDbkM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVWhDLFdBQVdBLENBQUEsRUFBUztJQUMxQixJQUFJOUQsT0FBTyxDQUFDc0IsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7TUFDakNoQixPQUFPLENBQUNDLEtBQUssQ0FBQyx1QkFBdUIsQ0FBQztJQUN4Qzs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDYixZQUFZLEVBQUU7TUFDckIsSUFBSSxDQUFDcUMsa0JBQWtCLENBQUMsSUFBSUMsS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7TUFDN0QsSUFBSSxDQUFDNkQsV0FBVyxDQUFDLENBQUM7TUFDbEI7SUFDRjs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDbE8sTUFBTSxDQUFDMUQsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUM1QixJQUFJLENBQUNzTyxJQUFJLENBQUMsV0FBVyxDQUFDO0lBQ3hCO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVTZDLHFCQUFxQkEsQ0FBQSxFQUFTO0lBQ3BDLE1BQU1hLE9BQU8sR0FBRyxJQUFJLENBQUNsSSxlQUFlO0lBQ3BDLElBQUksQ0FBQ0EsZUFBZSxHQUFHLEVBQUU7SUFDekIsSUFBSSxDQUFDQyxjQUFjLEdBQUcsSUFBSTtJQUUxQixJQUFJLENBQUNpSSxPQUFPLEVBQUU7SUFFZCxJQUFJakcsT0FBTyxDQUFDc0IsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7TUFDakNoQixPQUFPLENBQUNDLEtBQUssQ0FBQyw2QkFBNkIwRixPQUFPLENBQUNoUyxNQUFNLFFBQVEsQ0FBQztJQUNwRTs7SUFFQTtJQUNBLElBQUk4SCxTQUFTLEdBQUcsSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQ21LLE9BQU8sQ0FBQztJQUNsRGxLLFNBQVMsR0FBR0EsU0FBUyxDQUFDQyxPQUFPLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzs7SUFFN0M7SUFDQSxJQUFJLElBQUksQ0FBQ3lELGVBQWUsRUFBRTtNQUN4QixNQUFNeUcsVUFBVSxHQUFHLElBQUksQ0FBQ3pHLGVBQWUsQ0FBQzBHLGFBQWEsQ0FBQ3BLLFNBQVMsRUFBRSxJQUFJLENBQUM7TUFDdEUsSUFBSW1LLFVBQVUsQ0FBQ0UsT0FBTyxFQUFFO1FBQ3RCO01BQ0Y7TUFDQXJLLFNBQVMsR0FBR21LLFVBQVUsQ0FBQ25LLFNBQVM7SUFDbEM7SUFFQSxJQUFJLENBQUNBLFNBQVMsRUFBRTtJQUVoQixNQUFNekwsS0FBSyxHQUFHeUwsU0FBUyxDQUFDc0ssS0FBSyxDQUFDLElBQUksQ0FBQztJQUNuQyxNQUFNQyxXQUFXLEdBQUdoVyxLQUFLLENBQUMyRCxNQUFNLEdBQUcsQ0FBQztJQUNwQyxNQUFNc1MsYUFBYSxHQUFHeEssU0FBUyxDQUFDOUgsTUFBTSxHQUFHLEdBQUcsQ0FBQyxDQUFDOztJQUU5QztJQUNBLElBQUlxUyxXQUFXLElBQUlDLGFBQWEsRUFBRTtNQUNoQztNQUNBLElBQUksSUFBSSxDQUFDbk8sY0FBYyxFQUFFO1FBQ3ZCMkQsU0FBUyxHQUFHLElBQUksQ0FBQzNELGNBQWMsQ0FBQzdDLElBQUksR0FBR3dHLFNBQVM7UUFDaEQsTUFBTXlLLFFBQVEsR0FBR3pLLFNBQVMsQ0FBQ3NLLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDdEMsSUFBSSxDQUFDak8sY0FBYyxHQUFHO1VBQ3BCN0MsSUFBSSxFQUFFd0csU0FBUztVQUNmekwsS0FBSyxFQUFFa1csUUFBUSxDQUFDdlMsTUFBTTtVQUN0Qm9JLEtBQUssRUFBRU4sU0FBUyxDQUFDOUg7UUFDbkIsQ0FBQztNQUNILENBQUMsTUFBTTtRQUNMLElBQUksQ0FBQ21FLGNBQWMsR0FBRztVQUNwQjdDLElBQUksRUFBRXdHLFNBQVM7VUFDZnpMLEtBQUssRUFBRUEsS0FBSyxDQUFDMkQsTUFBTTtVQUNuQm9JLEtBQUssRUFBRU4sU0FBUyxDQUFDOUg7UUFDbkIsQ0FBQztRQUNELElBQUksQ0FBQzBELE1BQU0sR0FBRyxFQUFFO1FBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7TUFDakI7TUFDQSxJQUFJLENBQUM2TyxpQkFBaUIsQ0FBQyxDQUFDO01BQ3hCLElBQUksQ0FBQzFILGVBQWUsR0FBRyxJQUFJO01BQzNCLElBQUksQ0FBQ3lDLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO0lBQ3hCLENBQUMsTUFBTTtNQUNMO01BQ0EsSUFBSSxJQUFJLENBQUM1TixjQUFjLEVBQUU7UUFDdkIsSUFBSSxDQUFDc08sNEJBQTRCLENBQUMsQ0FBQztNQUNyQztNQUNBLElBQUksQ0FBQ0Msb0JBQW9CLENBQUM1SyxTQUFTLENBQUM7SUFDdEM7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVNkssb0JBQW9CQSxDQUFDWCxPQUFlLEVBQVE7SUFDbEQsSUFBSWpHLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO01BQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsOEJBQThCMEYsT0FBTyxDQUFDaFMsTUFBTSxRQUFRLENBQUM7SUFDckU7O0lBRUE7SUFDQSxJQUFJOEgsU0FBUyxHQUFHLElBQUksQ0FBQ0Qsb0JBQW9CLENBQUNtSyxPQUFPLENBQUM7SUFDbERsSyxTQUFTLEdBQUdBLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7O0lBRTdDO0lBQ0EsSUFBSSxJQUFJLENBQUN5RCxlQUFlLEVBQUU7TUFDeEIsTUFBTXlHLFVBQVUsR0FBRyxJQUFJLENBQUN6RyxlQUFlLENBQUMwRyxhQUFhLENBQUNwSyxTQUFTLEVBQUUsSUFBSSxDQUFDO01BQ3RFLElBQUltSyxVQUFVLENBQUNFLE9BQU8sRUFBRTtRQUN0QjtNQUNGO01BQ0FySyxTQUFTLEdBQUdtSyxVQUFVLENBQUNuSyxTQUFTO0lBQ2xDO0lBRUEsSUFBSSxDQUFDQSxTQUFTLEVBQUU7SUFFaEIsTUFBTXpMLEtBQUssR0FBR3lMLFNBQVMsQ0FBQ3NLLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDbkMsTUFBTUMsV0FBVyxHQUFHaFcsS0FBSyxDQUFDMkQsTUFBTSxHQUFHLENBQUM7SUFDcEMsTUFBTXNTLGFBQWEsR0FBR3hLLFNBQVMsQ0FBQzlILE1BQU0sR0FBRyxHQUFHOztJQUU1QztJQUNBLElBQUlxUyxXQUFXLElBQUlDLGFBQWEsRUFBRTtNQUNoQztNQUNBLElBQUksSUFBSSxDQUFDbk8sY0FBYyxFQUFFO1FBQ3ZCLElBQUksQ0FBQ3NPLDRCQUE0QixDQUFDLENBQUM7TUFDckM7TUFDQSxJQUFJLENBQUN0TyxjQUFjLEdBQUc7UUFDcEI3QyxJQUFJLEVBQUV3RyxTQUFTO1FBQ2Z6TCxLQUFLLEVBQUVBLEtBQUssQ0FBQzJELE1BQU07UUFDbkJvSSxLQUFLLEVBQUVOLFNBQVMsQ0FBQzlIO01BQ25CLENBQUM7TUFDRCxJQUFJLENBQUMwRCxNQUFNLEdBQUcsRUFBRTtNQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO01BQ2YsSUFBSSxDQUFDNk8saUJBQWlCLENBQUMsQ0FBQztNQUN4QixJQUFJLENBQUMxSCxlQUFlLEdBQUcsSUFBSTtNQUMzQixJQUFJLENBQUN5QyxZQUFZLENBQUMsQ0FBQztNQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztJQUN4QixDQUFDLE1BQU07TUFDTDtNQUNBO01BQ0EsSUFBSSxJQUFJLENBQUM1TixjQUFjLEVBQUU7UUFDdkIsSUFBSSxDQUFDc08sNEJBQTRCLENBQUMsQ0FBQztNQUNyQztNQUNBLElBQUksQ0FBQ0Msb0JBQW9CLENBQUM1SyxTQUFTLENBQUM7SUFDdEM7RUFDRjtFQUVRaUssZUFBZUEsQ0FBQSxFQUFTO0lBQzlCLE1BQU1hLE9BQXlCLEdBQUc7TUFDaEN0UixJQUFJLEVBQUUsSUFBSSxDQUFDb0MsTUFBTTtNQUNqQkMsTUFBTSxFQUFFLElBQUksQ0FBQ0E7SUFDZixDQUFDO0lBQ0QsSUFBSSxDQUFDMkssSUFBSSxDQUFDLFFBQVEsRUFBRXNFLE9BQU8sQ0FBQztFQUM5QjtFQUVRdEIsY0FBY0EsQ0FBQ2hDLEdBQVcsRUFBRStCLEdBQWlCLEVBQVE7SUFDM0Q7SUFDQSxJQUFJLElBQUksQ0FBQ3JDLGtCQUFrQixHQUFHLENBQUMsRUFBRTtNQUMvQixJQUFJLENBQUNBLGtCQUFrQixFQUFFO01BQ3pCLElBQUlqRCxPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtRQUNqQ2hCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLHNDQUFzQyxDQUFDO01BQ3ZEO01BQ0E7SUFDRjs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDd0MsZ0JBQWdCLElBQUksSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRTtNQUNsRCxPQUFPLENBQUM7SUFDVjs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDRixpQkFBaUIsRUFBRTtNQUMxQixJQUFJLENBQUNBLGlCQUFpQixHQUFHLElBQUk7TUFDN0IsT0FBTyxDQUFDO0lBQ1Y7O0lBRUE7SUFDQSxNQUFNM0csSUFBSSxHQUFHb0gsR0FBRyxHQUFHQSxHQUFHLENBQUNuSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUN4QyxJQUFJRCxJQUFJLEtBQUssQ0FBQyxFQUFFO01BQUU7TUFDaEIsSUFBSSxDQUFDMEgsV0FBVyxDQUFDLENBQUM7TUFDbEI7SUFDRjtJQUNBLElBQUkxSCxJQUFJLEtBQUssQ0FBQyxFQUFFO01BQUU7TUFDaEIsSUFBSSxDQUFDMkgsV0FBVyxDQUFDLENBQUM7TUFDbEI7SUFDRjs7SUFFQTtJQUNBLElBQUlQLEdBQUcsSUFBSSxJQUFJLENBQUN0SCxpQkFBaUIsQ0FBQ3NILEdBQUcsQ0FBQyxFQUFFO01BQ3RDLElBQUksQ0FBQ2EsWUFBWSxDQUFDLElBQUksQ0FBQ29CLHVCQUF1QixDQUFDakMsR0FBRyxDQUFFLENBQUM7TUFDckQ7SUFDRjs7SUFFQTtJQUNBLElBQUl2RCxPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtNQUNqQyxNQUFNd0YsT0FBTyxHQUFHeEIsR0FBRyxHQUFHLFFBQVFBLEdBQUcsQ0FBQ3ZTLElBQUksU0FBU3VTLEdBQUcsQ0FBQ3lCLElBQUksU0FBU3pCLEdBQUcsQ0FBQzBCLElBQUksVUFBVTFCLEdBQUcsQ0FBQzJCLEtBQUssUUFBUTNCLEdBQUcsQ0FBQzRCLFFBQVEsR0FBR0MsSUFBSSxDQUFDQyxTQUFTLENBQUM5QixHQUFHLENBQUM0QixRQUFRLENBQUMsR0FBRyxNQUFNLEVBQUUsR0FBRyxNQUFNO01BQ2xLNUcsT0FBTyxDQUFDQyxLQUFLLENBQUMsb0JBQW9CZ0QsR0FBRyxHQUFHNEQsSUFBSSxDQUFDQyxTQUFTLENBQUM3RCxHQUFHLENBQUMsR0FBRyxNQUFNLFNBQVNwSCxJQUFJLFNBQVMySyxPQUFPLEdBQUcsQ0FBQztJQUN2RztJQUNBO0lBQ0EsTUFBTU8sYUFBYSxHQUFHL0IsR0FBRyxJQUFJLElBQUksQ0FBQ2dDLG1CQUFtQixDQUFDL0QsR0FBRyxDQUFDO0lBQzFELE1BQU1nRSxXQUFXLEdBQUdGLGFBQWEsS0FBSzlELEdBQUcsR0FBRztNQUFFMkQsUUFBUSxFQUFFM0Q7SUFBSSxDQUFDLEdBQW1CK0IsR0FBRyxDQUFDOztJQUVwRjtJQUNBO0lBQ0EsSUFBSStCLGFBQWEsRUFBRU4sSUFBSSxLQUFLTSxhQUFhLENBQUN0VSxJQUFJLEtBQUssR0FBRyxJQUFJc1UsYUFBYSxDQUFDdFUsSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFO01BQ3JGO01BQ0EsSUFBSSxJQUFJLENBQUMyTSxZQUFZLEVBQUU7UUFDckIsSUFBSSxDQUFDcUMsa0JBQWtCLENBQUMsSUFBSUMsS0FBSyxDQUFDLHlCQUF5QixDQUFDLENBQUM7UUFDN0QsSUFBSSxDQUFDNkQsV0FBVyxDQUFDLENBQUM7UUFDbEI7TUFDRjtNQUVBLElBQUl3QixhQUFhLENBQUN0VSxJQUFJLEtBQUssR0FBRyxFQUFFO1FBQzlCO1FBQ0E7UUFDQTtRQUNBLE1BQU0rUyxTQUFTLEdBQUcsSUFBSSxDQUFDbk8sTUFBTSxDQUFDMUQsTUFBTSxHQUFHLENBQUM7UUFDeEMsSUFBSTZSLFNBQVMsRUFBRTtVQUNiLElBQUksQ0FBQ25PLE1BQU0sR0FBRyxFQUFFO1VBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7VUFDZixJQUFJLENBQUNvRixpQkFBaUIsR0FBRyxDQUFDO1VBQzFCLElBQUksQ0FBQytJLGdCQUFnQixDQUFDLENBQUM7VUFDdkIsSUFBSSxDQUFDdkUsWUFBWSxDQUFDLENBQUM7VUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7UUFDeEI7UUFDQTtRQUNBLElBQUksQ0FBQ3pELElBQUksQ0FBQyxPQUFPLEVBQUU7VUFBRXVEO1FBQVUsQ0FBQyxDQUFDO1FBQ2pDO01BQ0Y7TUFFQSxJQUFJdUIsYUFBYSxDQUFDdFUsSUFBSSxLQUFLLEdBQUcsRUFBRTtRQUM5QjtRQUNBLElBQUksSUFBSSxDQUFDNEUsTUFBTSxDQUFDMUQsTUFBTSxLQUFLLENBQUMsRUFBRTtVQUM1QixJQUFJLENBQUNzTyxJQUFJLENBQUMsV0FBVyxDQUFDO1FBQ3hCO1FBQ0E7TUFDRjtJQUNGOztJQUVBO0lBQ0E7SUFDQTs7SUFFQTtJQUNBLElBQUlpRixZQUFZLEdBQUcsSUFBSSxDQUFDaEMsdUJBQXVCLENBQUNqQyxHQUFHLENBQUM7O0lBRXBEO0lBQ0EsSUFBSSxDQUFDaUUsWUFBWSxJQUFJbEMsR0FBRyxFQUFFNEIsUUFBUSxFQUFFO01BQ2xDTSxZQUFZLEdBQUcsSUFBSSxDQUFDaEMsdUJBQXVCLENBQUNGLEdBQUcsQ0FBQzRCLFFBQVEsQ0FBQztNQUN6RCxJQUFJTSxZQUFZLElBQUl4SCxPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtRQUNqRGhCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLDJDQUEyQ2lILFlBQVksRUFBRSxDQUFDO01BQzFFO0lBQ0Y7SUFFQSxJQUFJQSxZQUFZLEVBQUU7TUFDaEIsSUFBSXhILE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1FBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsOENBQThDaUgsWUFBWSxFQUFFLENBQUM7TUFDN0U7TUFDQSxJQUFJLENBQUNwRCxZQUFZLENBQUNvRCxZQUFZLENBQUM7TUFDL0I7SUFDRjs7SUFFQTtJQUNBLElBQUlILGFBQWEsRUFBRUwsSUFBSSxJQUFJSyxhQUFhLENBQUN0VSxJQUFJLEVBQUU7TUFDN0MsTUFBTTBVLFVBQVUsR0FBR0osYUFBYSxDQUFDdFUsSUFBSSxDQUFDbVIsV0FBVyxDQUFDLENBQUM7TUFDbkQsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQ0MsUUFBUSxDQUFDc0QsVUFBVSxDQUFDLEVBQUU7UUFDbEQsSUFBSXpILE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1VBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMscUNBQXFDa0gsVUFBVSxFQUFFLENBQUM7UUFDbEU7UUFDQSxJQUFJLENBQUNyRCxZQUFZLENBQUNxRCxVQUFVLENBQUM7UUFDN0I7TUFDRjtJQUNGO0lBRUEsSUFBSSxJQUFJLENBQUNDLG9CQUFvQixDQUFDbkUsR0FBRyxFQUFFZ0UsV0FBVyxDQUFDLEVBQUU7TUFDL0M7SUFDRjtJQUVBLElBQUksSUFBSSxDQUFDSSxnQkFBZ0IsQ0FBQ3BFLEdBQUcsRUFBRWdFLFdBQVcsQ0FBQyxFQUFFO01BQzNDO0lBQ0Y7SUFFQSxJQUFJLENBQUNGLGFBQWEsRUFBRTtNQUNsQjtJQUNGOztJQUVBOztJQUVBO0lBQ0EsTUFBTU8sV0FBVyxHQUFJNUQsTUFBYyxJQUFjO01BQy9DLE1BQU02RCxXQUFXLEdBQUc3RCxNQUFNLENBQUNFLFdBQVcsQ0FBQyxDQUFDO01BQ3hDLE1BQU00RCxXQUFXLEdBQUc5RCxNQUFNLENBQUNyUyxXQUFXLENBQUMsQ0FBQzs7TUFFeEM7TUFDQSxJQUFJMFYsYUFBYSxDQUFDTixJQUFJLElBQUlNLGFBQWEsQ0FBQ0osS0FBSyxJQUFJSSxhQUFhLENBQUN0VSxJQUFJLEVBQUVtUixXQUFXLENBQUMsQ0FBQyxLQUFLMkQsV0FBVyxFQUFFO1FBQ2xHLE9BQU8sSUFBSTtNQUNiOztNQUVBO01BQ0EsSUFBSVIsYUFBYSxDQUFDTixJQUFJLElBQUlNLGFBQWEsQ0FBQ3RVLElBQUksS0FBSytVLFdBQVcsRUFBRTtRQUM1RCxPQUFPLElBQUk7TUFDYjs7TUFFQTtNQUNBLElBQUlULGFBQWEsQ0FBQ0wsSUFBSSxJQUFJSyxhQUFhLENBQUN0VSxJQUFJLEVBQUVtUixXQUFXLENBQUMsQ0FBQyxLQUFLMkQsV0FBVyxFQUFFO1FBQzNFLE9BQU8sSUFBSTtNQUNiOztNQUVBO01BQ0EsTUFBTUUsR0FBRyxHQUFHeEUsR0FBRyxJQUFJOEQsYUFBYSxDQUFDSCxRQUFRO01BQ3pDO01BQ0EsSUFBSWEsR0FBRyxJQUFJLHlCQUF5QixDQUFDckMsSUFBSSxDQUFDcUMsR0FBRyxDQUFDLEVBQUU7UUFDOUMsT0FBTyxJQUFJO01BQ2I7O01BRUE7TUFDQSxJQUFJQSxHQUFHLElBQUlBLEdBQUcsS0FBSyxPQUFPRixXQUFXLEVBQUUsRUFBRTtRQUN2QyxPQUFPLElBQUk7TUFDYjtNQUVBLE9BQU8sS0FBSztJQUNkLENBQUM7SUFFRCxNQUFNRyxxQkFBcUIsR0FBSWhFLE1BQTZCLElBQVc7TUFDckU7TUFDQSxJQUFJLENBQUNwRyxtQkFBbUIsR0FBRyxFQUFFO01BQzdCLElBQUlvRyxNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ2xCLElBQUksQ0FBQ3pCLElBQUksQ0FBQywwQkFBMEIsQ0FBQztNQUN2QyxDQUFDLE1BQU0sSUFBSXlCLE1BQU0sS0FBSyxHQUFHLEVBQUU7UUFDekIsSUFBSSxDQUFDekIsSUFBSSxDQUFDLHNCQUFzQixDQUFDO01BQ25DLENBQUMsTUFBTSxJQUFJeUIsTUFBTSxLQUFLLEdBQUcsRUFBRTtRQUN6QixJQUFJLENBQUN6QixJQUFJLENBQUMsa0JBQWtCLENBQUM7TUFDL0IsQ0FBQyxNQUFNLElBQUl5QixNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQ3pCLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztNQUM5QjtNQUNBO01BQ0EsSUFBSSxJQUFJLENBQUNsSyxJQUFJLEtBQUssV0FBVyxFQUFFO1FBQzdCLElBQUksQ0FBQ3VOLHFCQUFxQixDQUFDLENBQUM7TUFDOUIsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDcEUsWUFBWSxDQUFDLENBQUM7TUFDckI7SUFDRixDQUFDO0lBRUQsSUFBSW9HLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRTtNQUNwQkkscUJBQXFCLENBQUMsR0FBRyxDQUFDO01BQzFCO0lBQ0Y7SUFFQSxJQUFJSixXQUFXLENBQUMsR0FBRyxDQUFDLEVBQUU7TUFDcEJJLHFCQUFxQixDQUFDLEdBQUcsQ0FBQztNQUMxQjtJQUNGO0lBRUEsSUFBSUosV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFO01BQ3BCSSxxQkFBcUIsQ0FBQyxHQUFHLENBQUM7TUFDMUI7SUFDRjtJQUVBLElBQUlKLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRTtNQUNwQkkscUJBQXFCLENBQUMsR0FBRyxDQUFDO01BQzFCO0lBQ0Y7SUFFQSxJQUFJWCxhQUFhLENBQUNOLElBQUksSUFBSU0sYUFBYSxDQUFDdFUsSUFBSSxFQUFFbVIsV0FBVyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUU7TUFDbkUsSUFBSSxDQUFDM0IsSUFBSSxDQUFDLFFBQVEsQ0FBQztNQUNuQjtJQUNGOztJQUVBOztJQUVBLElBQUkrQyxHQUFHLENBQUN5QixJQUFJLElBQUl6QixHQUFHLENBQUN2UyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksQ0FBQzhTLFdBQVcsQ0FBQyxDQUFDO01BQ2xCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJUCxHQUFHLENBQUN5QixJQUFJLElBQUl6QixHQUFHLENBQUN2UyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksSUFBSSxDQUFDcUYsY0FBYyxFQUFFO1FBQ3ZCLElBQUksQ0FBQ3NPLDRCQUE0QixDQUFDLENBQUM7UUFDbkM7TUFDRjtNQUNBO01BQ0EsSUFBSSxDQUFDelAsTUFBTSxDQUFDNEssS0FBSyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUM7TUFDcEMsSUFBSSxDQUFDL0Usc0JBQXNCLEdBQUcsS0FBSztNQUNuQyxJQUFJLENBQUNtTCxxQkFBcUIsQ0FBQyxDQUFDO01BQzVCLElBQUksQ0FBQ3pHLFlBQVksQ0FBQyxDQUFDO01BQ25CO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJOEQsR0FBRyxDQUFDeUIsSUFBSSxJQUFJekIsR0FBRyxDQUFDdlMsSUFBSSxLQUFLLEdBQUcsRUFBRTtNQUNoQyxJQUFJLENBQUN3UCxJQUFJLENBQUMsb0JBQW9CLENBQUM7TUFDL0I7SUFDRjs7SUFFQTtJQUNBLElBQUkrQyxHQUFHLENBQUN5QixJQUFJLElBQUl6QixHQUFHLENBQUN2UyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksSUFBSSxDQUFDNkUsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUNyQixJQUFJLENBQUNBLE1BQU0sR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDb0YsaUJBQWlCLEdBQUcsQ0FBQztRQUMxQixJQUFJLENBQUN3RSxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUN5QixJQUFJLElBQUl6QixHQUFHLENBQUN2UyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksSUFBSSxDQUFDNkUsTUFBTSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxDQUFDMUQsTUFBTSxFQUFFO1FBQ3RDLElBQUksQ0FBQzJELE1BQU0sR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQzFELE1BQU07UUFDaEMsSUFBSSxDQUFDaVUsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMxRyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUN5QixJQUFJLElBQUl6QixHQUFHLENBQUN2UyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksSUFBSSxDQUFDNkUsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNuQjtRQUNBLElBQUl1USxHQUFHLEdBQUcsSUFBSSxDQUFDdlEsTUFBTTtRQUNyQjtRQUNBLE9BQU91USxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQ3hRLE1BQU0sQ0FBQ3dRLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUVBLEdBQUcsRUFBRTtRQUNyRDtRQUNBLE9BQU9BLEdBQUcsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDeFEsTUFBTSxDQUFDd1EsR0FBRyxHQUFHLENBQUMsQ0FBQyxLQUFLLEdBQUcsRUFBRUEsR0FBRyxFQUFFO1FBQ3JELElBQUksQ0FBQ3hRLE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQ2tFLEtBQUssQ0FBQyxDQUFDLEVBQUVzTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUN4USxNQUFNLENBQUNrRSxLQUFLLENBQUMsSUFBSSxDQUFDakUsTUFBTSxDQUFDO1FBQ3hFLElBQUksQ0FBQ0EsTUFBTSxHQUFHdVEsR0FBRztRQUNqQixJQUFJLENBQUMxQixpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQ2pGLFlBQVksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO01BQ3hCO01BQ0E7SUFDRjs7SUFFQTtJQUNBLElBQUlWLEdBQUcsQ0FBQ3lCLElBQUksSUFBSXpCLEdBQUcsQ0FBQ3ZTLElBQUksS0FBSyxHQUFHLEVBQUU7TUFDaEMsSUFBSSxJQUFJLENBQUM2RSxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUMxRCxNQUFNLEVBQUU7UUFDcEMsSUFBSSxDQUFDMEQsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNqRSxNQUFNLENBQUM7UUFDL0MsSUFBSSxDQUFDNk8saUJBQWlCLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUNqRixZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUN2UyxJQUFJLEtBQUssTUFBTSxFQUFFO01BQ3ZCLElBQUksSUFBSSxDQUFDNkUsTUFBTSxLQUFLLENBQUMsRUFBRTtRQUNyQixJQUFJLENBQUNBLE1BQU0sR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDb0YsaUJBQWlCLEdBQUcsQ0FBQztRQUMxQixJQUFJLENBQUN3RSxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUN2UyxJQUFJLEtBQUssS0FBSyxFQUFFO01BQ3RCLElBQUksSUFBSSxDQUFDNkUsTUFBTSxLQUFLLElBQUksQ0FBQ0QsTUFBTSxDQUFDMUQsTUFBTSxFQUFFO1FBQ3RDLElBQUksQ0FBQzJELE1BQU0sR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQzFELE1BQU07UUFDaEMsSUFBSSxDQUFDaVUsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMxRyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUMwQixJQUFJLElBQUkxQixHQUFHLENBQUN2UyxJQUFJLEtBQUssTUFBTSxFQUFFO01BQ25DLElBQUksSUFBSSxDQUFDNkUsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNuQixJQUFJdVEsR0FBRyxHQUFHLElBQUksQ0FBQ3ZRLE1BQU07UUFDckI7UUFDQSxPQUFPdVEsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUN4USxNQUFNLENBQUN3USxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFQSxHQUFHLEVBQUU7UUFDckQ7UUFDQSxPQUFPQSxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQ3hRLE1BQU0sQ0FBQ3dRLEdBQUcsR0FBRyxDQUFDLENBQUMsS0FBSyxHQUFHLEVBQUVBLEdBQUcsRUFBRTtRQUNyRCxJQUFJLENBQUN2USxNQUFNLEdBQUd1USxHQUFHO1FBQ2pCLElBQUksQ0FBQ0QsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMxRyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUMwQixJQUFJLElBQUkxQixHQUFHLENBQUN2UyxJQUFJLEtBQUssT0FBTyxFQUFFO01BQ3BDLElBQUksSUFBSSxDQUFDNkUsTUFBTSxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDMUQsTUFBTSxFQUFFO1FBQ3BDLElBQUlrVSxHQUFHLEdBQUcsSUFBSSxDQUFDdlEsTUFBTTtRQUNyQjtRQUNBLE9BQU91USxHQUFHLEdBQUcsSUFBSSxDQUFDeFEsTUFBTSxDQUFDMUQsTUFBTSxJQUFJLElBQUksQ0FBQzBELE1BQU0sQ0FBQ3dRLEdBQUcsQ0FBQyxLQUFLLEdBQUcsRUFBRUEsR0FBRyxFQUFFO1FBQ2xFO1FBQ0EsT0FBT0EsR0FBRyxHQUFHLElBQUksQ0FBQ3hRLE1BQU0sQ0FBQzFELE1BQU0sSUFBSSxJQUFJLENBQUMwRCxNQUFNLENBQUN3USxHQUFHLENBQUMsS0FBSyxHQUFHLEVBQUVBLEdBQUcsRUFBRTtRQUNsRSxJQUFJLENBQUN2USxNQUFNLEdBQUd1USxHQUFHO1FBQ2pCLElBQUksQ0FBQ0QsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUMxRyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVixHQUFHLENBQUMwQixJQUFJLElBQUkxQixHQUFHLENBQUN2UyxJQUFJLEtBQUssV0FBVyxFQUFFO01BQ3hDLElBQUksSUFBSSxDQUFDcUYsY0FBYyxFQUFFO1FBQ3ZCO1FBQ0EsSUFBSSxDQUFDQSxjQUFjLEdBQUcsSUFBSTtRQUMxQixJQUFJLENBQUNvSixZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztRQUN0QjtNQUNGO01BQ0EsSUFBSSxJQUFJLENBQUNwTyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ25CLElBQUl1USxHQUFHLEdBQUcsSUFBSSxDQUFDdlEsTUFBTTtRQUNyQixPQUFPdVEsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUN4USxNQUFNLENBQUN3USxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFQSxHQUFHLEVBQUU7UUFDckQsT0FBT0EsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUN4USxNQUFNLENBQUN3USxHQUFHLEdBQUcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFQSxHQUFHLEVBQUU7UUFDckQsSUFBSSxDQUFDeFEsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLENBQUMsRUFBRXNNLEdBQUcsQ0FBQyxHQUFHLElBQUksQ0FBQ3hRLE1BQU0sQ0FBQ2tFLEtBQUssQ0FBQyxJQUFJLENBQUNqRSxNQUFNLENBQUM7UUFDeEUsSUFBSSxDQUFDQSxNQUFNLEdBQUd1USxHQUFHO1FBQ2pCLElBQUksQ0FBQzFCLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDakYsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSVYsR0FBRyxDQUFDdlMsSUFBSSxLQUFLLFFBQVEsSUFBSXVTLEdBQUcsQ0FBQ3ZTLElBQUksS0FBSyxPQUFPLEVBQUU7TUFDakQ7TUFDQSxJQUFJLElBQUksQ0FBQ3FWLGVBQWUsQ0FBQyxJQUFJLENBQUMsRUFBRTs7TUFFaEM7TUFDQSxJQUFJLElBQUksQ0FBQ3pRLE1BQU0sQ0FBQ3FOLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNqTixXQUFXLENBQUM5RCxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQzlELE1BQU1vVSxTQUFTLEdBQUcsSUFBSSxDQUFDclEsZUFBZSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJLENBQUNELFdBQVcsQ0FBQzlELE1BQU0sR0FDekYsSUFBSSxDQUFDK0QsZUFBZSxHQUNwQixDQUFDO1FBQ0wsSUFBSSxDQUFDTCxNQUFNLEdBQUcsSUFBSSxDQUFDSSxXQUFXLENBQUNzUSxTQUFTLENBQUMsRUFBRUMsT0FBTyxJQUFJLElBQUksQ0FBQzNRLE1BQU07TUFDbkU7O01BRUE7TUFDQSxJQUFJLElBQUksQ0FBQ1UsSUFBSSxLQUFLLFdBQVcsRUFBRTtRQUM3QixNQUFNa1EsV0FBVyxHQUFHLElBQUksQ0FBQ2pRLG1CQUFtQixDQUFDeEgsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDMkwsSUFBSSxDQUFDLENBQUM7UUFDNUQsSUFBSThMLFdBQVcsRUFBRTtVQUNmLElBQUksQ0FBQ2hHLElBQUksQ0FBQyxPQUFPLEVBQUVnRyxXQUFXLENBQUM7VUFDL0IsSUFBSSxDQUFDalEsbUJBQW1CLEdBQUcsRUFBRTtRQUMvQjtRQUNBO1FBQ0EsSUFBSSxJQUFJLENBQUNYLE1BQU0sQ0FBQzhFLElBQUksQ0FBQyxDQUFDLEVBQUU7VUFDdEIsSUFBSSxDQUFDK0wsVUFBVSxDQUFDLElBQUksQ0FBQzdRLE1BQU0sQ0FBQztRQUM5QjtRQUNBO01BQ0Y7O01BRUE7TUFDQSxJQUFJLElBQUksQ0FBQ1MsY0FBYyxFQUFFO1FBQ3ZCLElBQUksQ0FBQ3NPLDRCQUE0QixDQUFDLENBQUM7UUFDbkM7TUFDRjtNQUVBLElBQUksQ0FBQzhCLFVBQVUsQ0FBQyxJQUFJLENBQUM3USxNQUFNLENBQUM7TUFDNUI7SUFDRjtJQUVBLElBQUkwUCxhQUFhLENBQUN0VSxJQUFJLEtBQUssV0FBVyxFQUFFO01BQ3RDO01BQ0EsSUFBSSxDQUFDMFYsb0JBQW9CLENBQUMsQ0FBQztNQUMzQixJQUFJLENBQUM5Ryx1QkFBdUIsQ0FBQyxDQUFDO01BQzlCLElBQUksSUFBSSxDQUFDdkosY0FBYyxFQUFFO1FBQ3ZCLElBQUksQ0FBQ0EsY0FBYyxHQUFHLElBQUk7UUFDMUIsSUFBSSxDQUFDMkcsZUFBZSxHQUFHLElBQUk7UUFDM0IsSUFBSSxDQUFDeUMsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7UUFDdEI7TUFDRjtNQUNBLElBQUksSUFBSSxDQUFDcE8sTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNuQixJQUFJLENBQUNELE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQ2tFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDakUsTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQztRQUNwRixJQUFJLENBQUNBLE1BQU0sRUFBRTtRQUNiLElBQUksQ0FBQzZPLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDMUgsZUFBZSxHQUFHLElBQUk7UUFDM0IsSUFBSSxDQUFDeUMsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSXFCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxRQUFRLEVBQUU7TUFDbkM7TUFDQSxJQUFJLENBQUMwVixvQkFBb0IsQ0FBQyxDQUFDO01BQzNCLElBQUksQ0FBQzlHLHVCQUF1QixDQUFDLENBQUM7TUFDOUIsSUFBSSxJQUFJLENBQUN2SixjQUFjLEVBQUU7UUFDdkI7UUFDQSxJQUFJLENBQUNBLGNBQWMsR0FBRyxJQUFJO1FBQzFCLElBQUksQ0FBQzJHLGVBQWUsR0FBRyxJQUFJO1FBQzNCLElBQUksQ0FBQ3lDLFlBQVksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO1FBQ3RCO01BQ0Y7TUFDQSxJQUFJLElBQUksQ0FBQ3BPLE1BQU0sR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQzFELE1BQU0sRUFBRTtRQUNwQyxJQUFJLENBQUMwRCxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUNrRSxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLElBQUksQ0FBQ2pFLE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDcEYsSUFBSSxDQUFDNk8saUJBQWlCLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUMxSCxlQUFlLEdBQUcsSUFBSTtRQUMzQixJQUFJLENBQUN5QyxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQzBDLFlBQVksQ0FBQyxDQUFDLEVBQUU7TUFDdkIsSUFBSXJCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxJQUFJLEVBQUU7UUFDL0IsSUFBSSxDQUFDNFYsWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBQ3JCO01BQ0Y7TUFDQSxJQUFJdEIsYUFBYSxDQUFDdFUsSUFBSSxLQUFLLE1BQU0sRUFBRTtRQUNqQyxJQUFJLENBQUM0VixZQUFZLENBQUMsQ0FBQyxDQUFDO1FBQ3BCO01BQ0Y7TUFDQSxJQUFJdEIsYUFBYSxDQUFDdFUsSUFBSSxLQUFLLFFBQVEsRUFBRTtRQUNuQyxJQUFJLENBQUM2VixjQUFjLENBQUMsQ0FBQztRQUNyQjtNQUNGO01BQ0EsSUFBSXZCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxRQUFRLEVBQUU7UUFDbkMsSUFBSSxDQUFDOFYsU0FBUyxDQUFDLENBQUM7UUFDaEI7TUFDRjtNQUNBO01BQ0EsSUFBSXRGLEdBQUcsSUFBSSxDQUFDOEQsYUFBYSxDQUFDTixJQUFJLElBQUksQ0FBQ00sYUFBYSxDQUFDTCxJQUFJLEVBQUU7UUFDckQsSUFBSSxDQUFDNkIsU0FBUyxDQUFDLENBQUM7UUFDaEI7TUFDRjtJQUNGO0lBRUEsSUFBSXhCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxNQUFNLEVBQUU7TUFDakM7TUFDQSxJQUFJLENBQUMwVixvQkFBb0IsQ0FBQyxDQUFDO01BQzNCO01BQ0EsSUFBSSxJQUFJLENBQUNyUSxjQUFjLEVBQUU7UUFDdkIsSUFBSSxDQUFDc08sNEJBQTRCLENBQUMsQ0FBQztNQUNyQztNQUNBLElBQUksSUFBSSxDQUFDOU8sTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNuQixJQUFJLENBQUNBLE1BQU0sRUFBRTtRQUNiLElBQUksQ0FBQ3NRLG1CQUFtQixDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDbkosZUFBZSxHQUFHLElBQUk7UUFDM0IsSUFBSSxDQUFDeUMsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSXFCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxPQUFPLEVBQUU7TUFDbEM7TUFDQSxJQUFJLENBQUMwVixvQkFBb0IsQ0FBQyxDQUFDO01BQzNCO01BQ0EsSUFBSSxJQUFJLENBQUNyUSxjQUFjLEVBQUU7UUFDdkIsSUFBSSxDQUFDc08sNEJBQTRCLENBQUMsQ0FBQztNQUNyQztNQUNBLElBQUksSUFBSSxDQUFDOU8sTUFBTSxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDMUQsTUFBTSxFQUFFO1FBQ3BDLElBQUksQ0FBQzJELE1BQU0sRUFBRTtRQUNiLElBQUksQ0FBQ3NRLG1CQUFtQixDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDbkosZUFBZSxHQUFHLElBQUk7UUFDM0IsSUFBSSxDQUFDeUMsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSXFCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxJQUFJLEVBQUU7TUFDL0IsSUFBSSxJQUFJLENBQUMrVixtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ2hDO01BQ0Y7TUFDQSxJQUFJLElBQUksQ0FBQ2pSLE9BQU8sQ0FBQzVELE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDM0IsSUFBSSxJQUFJLENBQUM2RCxZQUFZLEtBQUssQ0FBQyxDQUFDLEVBQUU7VUFDNUIsSUFBSSxDQUFDQSxZQUFZLEdBQUcsSUFBSSxDQUFDRCxPQUFPLENBQUM1RCxNQUFNLEdBQUcsQ0FBQztRQUM3QyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUM2RCxZQUFZLEdBQUcsQ0FBQyxFQUFFO1VBQ2hDLElBQUksQ0FBQ0EsWUFBWSxFQUFFO1FBQ3JCO1FBQ0E7UUFDQSxJQUFJLElBQUksQ0FBQ0EsWUFBWSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUNBLFlBQVksR0FBRyxJQUFJLENBQUNELE9BQU8sQ0FBQzVELE1BQU0sRUFBRTtVQUNyRSxJQUFJLENBQUMwRCxNQUFNLEdBQUcsSUFBSSxDQUFDRSxPQUFPLENBQUMsSUFBSSxDQUFDQyxZQUFZLENBQUMsSUFBSSxFQUFFO1FBQ3JELENBQUMsTUFBTTtVQUNMLElBQUksQ0FBQ0EsWUFBWSxHQUFHLENBQUMsQ0FBQztVQUN0QixJQUFJLENBQUNILE1BQU0sR0FBRyxFQUFFO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUMxRCxNQUFNO1FBQ2hDLElBQUksQ0FBQytJLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQ3lKLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDakYsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSXFCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxNQUFNLEVBQUU7TUFDakMsSUFBSSxJQUFJLENBQUMrVixtQkFBbUIsQ0FBQyxDQUFDLENBQUMsRUFBRTtRQUMvQjtNQUNGO01BQ0EsSUFBSSxJQUFJLENBQUNoUixZQUFZLEtBQUssQ0FBQyxDQUFDLEVBQUU7UUFDNUIsSUFBSSxDQUFDQSxZQUFZLEVBQUU7UUFDbkIsSUFBSSxJQUFJLENBQUNBLFlBQVksSUFBSSxJQUFJLENBQUNELE9BQU8sQ0FBQzVELE1BQU0sRUFBRTtVQUM1QyxJQUFJLENBQUM2RCxZQUFZLEdBQUcsQ0FBQyxDQUFDO1VBQ3RCLElBQUksQ0FBQ0gsTUFBTSxHQUFHLEVBQUU7UUFDbEIsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDRyxZQUFZLElBQUksQ0FBQyxFQUFFO1VBQ2pDLElBQUksQ0FBQ0gsTUFBTSxHQUFHLElBQUksQ0FBQ0UsT0FBTyxDQUFDLElBQUksQ0FBQ0MsWUFBWSxDQUFDLElBQUksRUFBRTtRQUNyRCxDQUFDLE1BQU07VUFDTDtVQUNBLElBQUksQ0FBQ0EsWUFBWSxHQUFHLENBQUMsQ0FBQztVQUN0QixJQUFJLENBQUNILE1BQU0sR0FBRyxFQUFFO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUMxRCxNQUFNO1FBQ2hDLElBQUksQ0FBQytJLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQ3lKLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDakYsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSXFCLGFBQWEsQ0FBQ3RVLElBQUksS0FBSyxLQUFLLEVBQUU7TUFDaEMsSUFBSSxJQUFJLENBQUNxVixlQUFlLENBQUMsS0FBSyxDQUFDLEVBQUU7TUFDakM7SUFDRjtJQUVBLElBQUk3RSxHQUFHLElBQUksQ0FBQzhELGFBQWEsQ0FBQ04sSUFBSSxJQUFJLENBQUNNLGFBQWEsQ0FBQ0wsSUFBSSxFQUFFO01BQ3JEO01BQ0E7TUFDQSxJQUFJLElBQUksQ0FBQy9LLGlCQUFpQixDQUFDc0gsR0FBRyxDQUFDLEVBQUU7UUFDL0IsSUFBSXZELE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1VBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsbURBQW1EZ0QsR0FBRyxVQUFVQSxHQUFHLENBQUNuSCxVQUFVLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNwRztRQUNBO01BQ0Y7O01BRUE7TUFDQSxJQUFJLElBQUksQ0FBQy9ELElBQUksS0FBSyxXQUFXLEVBQUU7UUFDN0IsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQy9ILElBQUksQ0FBQ2dULEdBQUcsQ0FBQztRQUNsQztNQUNGO01BQ0E7TUFDQSxJQUFJdkQsT0FBTyxDQUFDc0IsR0FBRyxDQUFDLGdCQUFnQixDQUFDLEVBQUU7UUFDakMsTUFBTW5GLElBQUksR0FBR29ILEdBQUcsQ0FBQ25ILFVBQVUsQ0FBQyxDQUFDLENBQUM7UUFDOUJrRSxPQUFPLENBQUNDLEtBQUssQ0FBQyw0QkFBNEJnRCxHQUFHLFVBQVVwSCxJQUFJLEVBQUUsQ0FBQztNQUNoRTtNQUNBO01BQ0EsSUFBSSxDQUFDNE0sa0JBQWtCLENBQUN4RixHQUFHLENBQUM7SUFDOUI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVMkUsbUJBQW1CQSxDQUFBLEVBQVM7SUFDbEMsTUFBTWMsUUFBUSxHQUFHNVgsSUFBSSxDQUFDK0osR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUM4TixTQUFTLENBQUMsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDdEQ7SUFDQSxJQUFJLElBQUksQ0FBQ3JSLE1BQU0sR0FBRyxJQUFJLENBQUNvRixpQkFBaUIsRUFBRTtNQUN4QyxJQUFJLENBQUNBLGlCQUFpQixHQUFHLElBQUksQ0FBQ3BGLE1BQU07TUFDcEM7SUFDRjtJQUNBO0lBQ0EsSUFBSSxJQUFJLENBQUNBLE1BQU0sR0FBRyxJQUFJLENBQUNvRixpQkFBaUIsSUFBSWdNLFFBQVEsRUFBRTtNQUNwRCxJQUFJLENBQUNoTSxpQkFBaUIsR0FBRyxJQUFJLENBQUNwRixNQUFNLEdBQUdvUixRQUFRLEdBQUcsQ0FBQztJQUNyRDtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1UxQixtQkFBbUJBLENBQUNKLFFBQW1DLEVBQXVCO0lBQ3BGLElBQUksQ0FBQ0EsUUFBUSxFQUFFLE9BQU8sSUFBSTtJQUMxQixNQUFNOVIsR0FBaUMsR0FBRztNQUN4QyxRQUFRLEVBQUU7UUFBRXJDLElBQUksRUFBRSxJQUFJO1FBQUVtVTtNQUFTLENBQWlCO01BQ2xELFFBQVEsRUFBRTtRQUFFblUsSUFBSSxFQUFFLE1BQU07UUFBRW1VO01BQVMsQ0FBaUI7TUFDcEQsUUFBUSxFQUFFO1FBQUVuVSxJQUFJLEVBQUUsT0FBTztRQUFFbVU7TUFBUyxDQUFpQjtNQUNyRCxRQUFRLEVBQUU7UUFBRW5VLElBQUksRUFBRSxNQUFNO1FBQUVtVTtNQUFTLENBQWlCO01BQ3BELFFBQVEsRUFBRTtRQUFFblUsSUFBSSxFQUFFLE1BQU07UUFBRW1VO01BQVMsQ0FBaUI7TUFDcEQsUUFBUSxFQUFFO1FBQUVuVSxJQUFJLEVBQUUsS0FBSztRQUFFbVU7TUFBUyxDQUFpQjtNQUNuRCxXQUFXLEVBQUU7UUFBRW5VLElBQUksRUFBRSxhQUFhO1FBQUVtVTtNQUFTLENBQWlCO01BQzlELFdBQVcsRUFBRTtRQUFFblUsSUFBSSxFQUFFLFdBQVc7UUFBRW1VO01BQVM7SUFDN0MsQ0FBQztJQUNELE9BQU85UixHQUFHLENBQUM4UixRQUFRLENBQUMsSUFBSSxJQUFJO0VBQzlCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1U2QixrQkFBa0JBLENBQUN4VCxJQUFZLEVBQVE7SUFDN0M7SUFDQSxNQUFNOE8sT0FBTyxHQUFHLElBQUksQ0FBQ0Msb0JBQW9CLENBQUMvTyxJQUFJLENBQUM7SUFDL0MsSUFBSThPLE9BQU8sQ0FBQ3BRLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDdEIsS0FBSyxNQUFNK1AsTUFBTSxJQUFJSyxPQUFPLEVBQUU7UUFDNUIsSUFBSSxDQUFDRCxZQUFZLENBQUNKLE1BQU0sQ0FBQztNQUMzQjtNQUNBek8sSUFBSSxHQUFHLElBQUksQ0FBQzJQLGtCQUFrQixDQUFDM1AsSUFBSSxDQUFDO01BQ3BDLElBQUksQ0FBQ0EsSUFBSSxFQUFFO1FBQ1QsSUFBSXlLLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO1VBQ2pDaEIsT0FBTyxDQUFDQyxLQUFLLENBQUMsK0NBQStDLENBQUM7UUFDaEU7UUFDQTtNQUNGO0lBQ0Y7O0lBRUE7SUFDQTtJQUNBO0lBQ0EsTUFBTTJJLEdBQUcsR0FBR0MsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN0QixNQUFNRSxXQUFXLEdBQUcsSUFBSSxDQUFDM0wscUJBQXFCLEdBQUcsQ0FBQyxJQUFJeUwsR0FBRyxHQUFHLElBQUksQ0FBQ3pMLHFCQUFxQixJQUFJLElBQUksQ0FBQ1Asa0JBQWtCO0lBQ2pILElBQUkzSCxJQUFJLENBQUN0QixNQUFNLEtBQUssQ0FBQyxJQUNqQixJQUFJLENBQUMySixtQkFBbUIsS0FBSyxFQUFFLElBQy9CLENBQUMsSUFBSSxDQUFDTCxZQUFZLElBQ2xCLENBQUMsSUFBSSxDQUFDRCxnQkFBZ0IsSUFDdEIsQ0FBQzhMLFdBQVcsSUFDWjdULElBQUksQ0FBQzZHLFVBQVUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQ3hCN0csSUFBSSxDQUFDNkcsVUFBVSxDQUFDLENBQUMsQ0FBQyxHQUFHLEdBQUcsRUFBRTtNQUM1QixJQUFJLENBQUNpTixVQUFVLENBQUM5VCxJQUFJLENBQUM7TUFDckI7SUFDRjtJQUVBLElBQUksQ0FBQ3FJLG1CQUFtQixJQUFJckksSUFBSTs7SUFFaEM7SUFDQSxJQUFJLElBQUksQ0FBQ3NJLGtCQUFrQixFQUFFO01BQzNCb0UsWUFBWSxDQUFDLElBQUksQ0FBQ3BFLGtCQUFrQixDQUFDO01BQ3JDLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUcsSUFBSTtJQUNoQzs7SUFFQTtJQUNBLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUdzSCxVQUFVLENBQUMsTUFBTTtNQUN6QyxJQUFJLENBQUNtRSxtQkFBbUIsQ0FBQyxDQUFDO0lBQzVCLENBQUMsRUFBRSxJQUFJLENBQUN4TCxvQkFBb0IsQ0FBQztFQUMvQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVd0wsbUJBQW1CQSxDQUFBLEVBQVM7SUFDbEMsSUFBSSxJQUFJLENBQUN6TCxrQkFBa0IsRUFBRTtNQUMzQm9FLFlBQVksQ0FBQyxJQUFJLENBQUNwRSxrQkFBa0IsQ0FBQztNQUNyQyxJQUFJLENBQUNBLGtCQUFrQixHQUFHLElBQUk7SUFDaEM7SUFFQSxJQUFJLElBQUksQ0FBQ0QsbUJBQW1CLElBQUksQ0FBQyxJQUFJLENBQUNMLFlBQVksSUFBSSxDQUFDLElBQUksQ0FBQ0QsZ0JBQWdCLEVBQUU7TUFDNUU7TUFDQTtNQUNBLElBQUksQ0FBQ21MLG9CQUFvQixDQUFDLENBQUM7TUFDM0IsSUFBSSxDQUFDOUssaUJBQWlCLEdBQUcsRUFBRTtNQUMzQixJQUFJLENBQUMwTCxVQUFVLENBQUMsSUFBSSxDQUFDekwsbUJBQW1CLENBQUM7SUFDM0M7SUFDQSxJQUFJLENBQUNBLG1CQUFtQixHQUFHLEVBQUU7RUFDL0I7O0VBRUE7QUFDRjtBQUNBO0VBQ1UyTCw0QkFBNEJBLENBQUEsRUFBVztJQUM3QyxJQUFJLElBQUksQ0FBQzFMLGtCQUFrQixFQUFFO01BQzNCb0UsWUFBWSxDQUFDLElBQUksQ0FBQ3BFLGtCQUFrQixDQUFDO01BQ3JDLElBQUksQ0FBQ0Esa0JBQWtCLEdBQUcsSUFBSTtJQUNoQztJQUNBLE1BQU0yTCxRQUFRLEdBQUcsSUFBSSxDQUFDNUwsbUJBQW1CO0lBQ3pDLElBQUksQ0FBQ0EsbUJBQW1CLEdBQUcsRUFBRTtJQUM3QixPQUFPNEwsUUFBUTtFQUNqQjtFQUVROUIsb0JBQW9CQSxDQUFDbkUsR0FBVyxFQUFFK0IsR0FBaUIsRUFBVztJQUNwRSxNQUFNNEIsUUFBUSxHQUFHNUIsR0FBRyxFQUFFNEIsUUFBUSxJQUFJM0QsR0FBRztJQUNyQyxJQUFJMkQsUUFBUSxLQUFLelIsR0FBRyxDQUFDTSxzQkFBc0IsSUFBSW1SLFFBQVEsS0FBS3pSLEdBQUcsQ0FBQ08sdUJBQXVCLEVBQUU7TUFDdkYsT0FBTyxJQUFJO0lBQ2I7O0lBRUE7SUFDQSxNQUFNdU8sZ0JBQWdCLEdBQUcsV0FBVztJQUNwQyxNQUFNQyxjQUFjLEdBQUcsV0FBVzs7SUFFbEM7SUFDQSxJQUFJLE9BQU9qQixHQUFHLEtBQUssUUFBUSxJQUFJQSxHQUFHLENBQUNZLFFBQVEsQ0FBQ0ksZ0JBQWdCLENBQUMsRUFBRTtNQUM3RCxJQUFJLENBQUNqSCxnQkFBZ0IsR0FBRyxJQUFJO01BQzVCLElBQUksQ0FBQ2hDLG1CQUFtQixHQUFHLEtBQUs7TUFDaEM7TUFDQSxNQUFNbU8sT0FBTyxHQUFHLElBQUksQ0FBQzNOLG9CQUFvQixDQUFDLElBQUksQ0FBQ3lOLDRCQUE0QixDQUFDLENBQUMsQ0FBQztNQUM5RTtNQUNBLE1BQU1HLFFBQVEsR0FBR25HLEdBQUcsQ0FBQ29HLE9BQU8sQ0FBQ3BGLGdCQUFnQixDQUFDO01BQzlDLElBQUkwQixPQUFPLEdBQUcxQyxHQUFHLENBQUMxSCxLQUFLLENBQUM2TixRQUFRLEdBQUduRixnQkFBZ0IsQ0FBQ3RRLE1BQU0sQ0FBQztNQUMzRDtNQUNBLElBQUlnUyxPQUFPLENBQUM5QixRQUFRLENBQUNLLGNBQWMsQ0FBQyxFQUFFO1FBQ3BDLE1BQU1vRixNQUFNLEdBQUczRCxPQUFPLENBQUMwRCxPQUFPLENBQUNuRixjQUFjLENBQUM7UUFDOUN5QixPQUFPLEdBQUdBLE9BQU8sQ0FBQ3BLLEtBQUssQ0FBQyxDQUFDLEVBQUUrTixNQUFNLENBQUM7UUFDbEMsSUFBSSxDQUFDcE8sV0FBVyxHQUFHaU8sT0FBTyxHQUFHeEQsT0FBTztRQUNwQyxJQUFJLENBQUM0RCxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hCLE9BQU8sSUFBSTtNQUNiO01BQ0EsSUFBSSxDQUFDck8sV0FBVyxHQUFHaU8sT0FBTyxHQUFHeEQsT0FBTztNQUNwQyxJQUFJLENBQUN0RSx1QkFBdUIsQ0FBQyxDQUFDO01BQzlCLE9BQU8sSUFBSTtJQUNiO0lBRUEsSUFBSXVGLFFBQVEsS0FBSzNDLGdCQUFnQixFQUFFO01BQ2pDLElBQUksQ0FBQ2pILGdCQUFnQixHQUFHLElBQUk7TUFDNUIsSUFBSSxDQUFDaEMsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLENBQUM7TUFDbEM7TUFDQSxNQUFNbU8sT0FBTyxHQUFHLElBQUksQ0FBQzNOLG9CQUFvQixDQUFDLElBQUksQ0FBQ3lOLDRCQUE0QixDQUFDLENBQUMsQ0FBQztNQUM5RSxJQUFJLENBQUMvTixXQUFXLEdBQUdpTyxPQUFPO01BQzFCLElBQUksQ0FBQzlILHVCQUF1QixDQUFDLENBQUM7TUFDOUIsT0FBTyxJQUFJO0lBQ2I7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDckUsZ0JBQWdCLEVBQUU7TUFDMUIsT0FBTyxLQUFLO0lBQ2Q7O0lBRUE7SUFDQSxJQUFJLE9BQU9pRyxHQUFHLEtBQUssUUFBUSxJQUFJQSxHQUFHLENBQUNZLFFBQVEsQ0FBQ0ssY0FBYyxDQUFDLEVBQUU7TUFDM0QsTUFBTW9GLE1BQU0sR0FBR3JHLEdBQUcsQ0FBQ29HLE9BQU8sQ0FBQ25GLGNBQWMsQ0FBQztNQUMxQyxNQUFNc0YsYUFBYSxHQUFHdkcsR0FBRyxDQUFDMUgsS0FBSyxDQUFDLENBQUMsRUFBRStOLE1BQU0sQ0FBQztNQUMxQyxJQUFJRSxhQUFhLEVBQUU7UUFDakIsSUFBSSxDQUFDek8sbUJBQW1CLENBQUMsT0FBTyxFQUFFeU8sYUFBYSxDQUFDO01BQ2xEO01BQ0EsSUFBSSxDQUFDRCxpQkFBaUIsQ0FBQyxDQUFDO01BQ3hCLE9BQU8sSUFBSTtJQUNiO0lBRUEsSUFBSTNDLFFBQVEsS0FBSzFDLGNBQWMsRUFBRTtNQUMvQixJQUFJLENBQUNxRixpQkFBaUIsQ0FBQyxDQUFDO01BQ3hCLE9BQU8sSUFBSTtJQUNiO0lBQ0EsSUFBSXZFLEdBQUcsRUFBRXZTLElBQUksS0FBSyxRQUFRLElBQUl1UyxHQUFHLEVBQUV2UyxJQUFJLEtBQUssT0FBTyxFQUFFO01BQ25ELElBQUksQ0FBQ3NJLG1CQUFtQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUM7TUFDdkMsT0FBTyxJQUFJO0lBQ2I7SUFDQSxJQUFJaUssR0FBRyxFQUFFdlMsSUFBSSxLQUFLLFdBQVcsRUFBRTtNQUM3QixJQUFJLENBQUN5SSxXQUFXLEdBQUcsSUFBSSxDQUFDQSxXQUFXLENBQUNLLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFDaEQsT0FBTyxJQUFJO0lBQ2I7SUFDQSxJQUFJLE9BQU8wSCxHQUFHLEtBQUssUUFBUSxJQUFJQSxHQUFHLENBQUN0UCxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQzdDLElBQUksQ0FBQ29ILG1CQUFtQixDQUFDLE9BQU8sRUFBRWtJLEdBQUcsQ0FBQztNQUN0QyxPQUFPLElBQUk7SUFDYjtJQUNBLElBQUksT0FBTzJELFFBQVEsS0FBSyxRQUFRLElBQUlBLFFBQVEsQ0FBQ2pULE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDdkQsSUFBSSxDQUFDb0gsbUJBQW1CLENBQUMsT0FBTyxFQUFFNkwsUUFBUSxDQUFDO01BQzNDLE9BQU8sSUFBSTtJQUNiO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7RUFFUTJDLGlCQUFpQkEsQ0FBQSxFQUFTO0lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUN2TSxnQkFBZ0IsRUFBRTtJQUM1QjtJQUNBLElBQUl2QixTQUFTLEdBQUcsSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQyxJQUFJLENBQUNOLFdBQVcsQ0FBQzs7SUFFM0Q7SUFDQSxJQUFJLElBQUksQ0FBQ2lFLGVBQWUsRUFBRTtNQUN4QixNQUFNeUcsVUFBVSxHQUFHLElBQUksQ0FBQ3pHLGVBQWUsQ0FBQzBHLGFBQWEsQ0FBQ3BLLFNBQVMsRUFBRSxJQUFJLENBQUM7TUFDdEUsSUFBSW1LLFVBQVUsQ0FBQ0UsT0FBTyxFQUFFO1FBQ3RCO1FBQ0EsSUFBSSxDQUFDOUksZ0JBQWdCLEdBQUcsS0FBSztRQUM3QixJQUFJLENBQUM5QixXQUFXLEdBQUcsRUFBRTtRQUNyQixJQUFJLENBQUNGLG1CQUFtQixHQUFHLEtBQUs7UUFDaEM7TUFDRjtNQUNBUyxTQUFTLEdBQUdtSyxVQUFVLENBQUNuSyxTQUFTO0lBQ2xDO0lBRUEsTUFBTWtLLE9BQU8sR0FBR2xLLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDakQsSUFBSWlLLE9BQU8sRUFBRTtNQUNYLE1BQU0zVixLQUFLLEdBQUcyVixPQUFPLENBQUNJLEtBQUssQ0FBQyxJQUFJLENBQUM7TUFDakMsTUFBTTBELFlBQVksR0FBRyxJQUFJLENBQUN6TyxtQkFBbUI7TUFDN0MsSUFBSWhMLEtBQUssQ0FBQzJELE1BQU0sR0FBRyxDQUFDLElBQUlnUyxPQUFPLENBQUNoUyxNQUFNLEdBQUcsR0FBRyxFQUFFO1FBQzVDLElBQUksQ0FBQ21FLGNBQWMsR0FBRztVQUNwQjdDLElBQUksRUFBRTBRLE9BQU87VUFDYjNWLEtBQUssRUFBRUEsS0FBSyxDQUFDMkQsTUFBTTtVQUNuQm9JLEtBQUssRUFBRTRKLE9BQU8sQ0FBQ2hTLE1BQU0sSUFBSThWLFlBQVksR0FBRyxHQUFHLEdBQXdCLENBQUMsQ0FBQyxDQUFFO1FBQ3pFLENBQUM7UUFDRCxJQUFJLENBQUNwUyxNQUFNLEdBQUcsRUFBRTtRQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO1FBQ2YsSUFBSSxDQUFDNk8saUJBQWlCLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUNqRixZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztNQUN4QixDQUFDLE1BQU07UUFDTCxJQUFJLENBQUNxRCxVQUFVLENBQUNwRCxPQUFPLENBQUM7TUFDMUI7SUFDRjtJQUNBLElBQUksQ0FBQzNJLGdCQUFnQixHQUFHLEtBQUs7SUFDN0IsSUFBSSxDQUFDOUIsV0FBVyxHQUFHLEVBQUU7SUFDckIsSUFBSSxDQUFDRixtQkFBbUIsR0FBRyxLQUFLO0lBQ2hDLElBQUksQ0FBQ3FHLHVCQUF1QixDQUFDLENBQUM7RUFDaEM7RUFFUWdHLGdCQUFnQkEsQ0FBQ3BFLEdBQVcsRUFBRStCLEdBQWlCLEVBQVc7SUFDaEU7SUFDQSxJQUFJLElBQUksQ0FBQ2hJLGdCQUFnQixJQUFJZ0ksR0FBRyxFQUFFeUIsSUFBSSxJQUFJekIsR0FBRyxFQUFFMEIsSUFBSSxFQUFFO01BQ25ELElBQUksQ0FBQ3lCLG9CQUFvQixDQUFDLENBQUM7TUFDM0IsSUFBSSxDQUFDdUIsc0JBQXNCLENBQUMsQ0FBQztNQUM3QixPQUFPLEtBQUs7SUFDZDs7SUFFQTtJQUNBO0lBQ0EsSUFBSSxPQUFPekcsR0FBRyxLQUFLLFFBQVEsSUFBSUEsR0FBRyxDQUFDeUIsVUFBVSxDQUFDLE1BQU0sQ0FBQyxFQUFFO01BQ3JELElBQUksQ0FBQ3lELG9CQUFvQixDQUFDLENBQUM7TUFDM0IsSUFBSSxDQUFDdUIsc0JBQXNCLENBQUMsQ0FBQztNQUM3QixPQUFPLEtBQUs7SUFDZDtJQUVBLE1BQU05QyxRQUFRLEdBQUc1QixHQUFHLEVBQUU0QixRQUFRLElBQUksRUFBRTtJQUNwQyxNQUFNK0MsS0FBSyxHQUFHLE9BQU8xRyxHQUFHLEtBQUssUUFBUSxJQUFJQSxHQUFHLENBQUN0UCxNQUFNLEdBQUcsQ0FBQyxHQUFHc1AsR0FBRyxHQUFHMkQsUUFBUTtJQUN4RSxJQUFJLENBQUMrQyxLQUFLLEVBQUU7TUFDVixJQUFJLENBQUN4QixvQkFBb0IsQ0FBQyxDQUFDO01BQzNCLElBQUksQ0FBQ3VCLHNCQUFzQixDQUFDLENBQUM7TUFDN0IsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxNQUFNZCxHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSSxDQUFDZ0Isb0JBQW9CLENBQUNELEtBQUssQ0FBQ2hXLE1BQU0sRUFBRWlWLEdBQUcsQ0FBQztJQUU1QyxJQUFJLENBQUMsSUFBSSxDQUFDM0wsWUFBWSxFQUFFO01BQ3RCLElBQUksQ0FBQzRNLHNCQUFzQixDQUFDRixLQUFLLEVBQUVmLEdBQUcsQ0FBQztJQUN6QztJQUVBLE1BQU1rQixhQUFhLEdBQUdILEtBQUssQ0FBQ2hXLE1BQU0sR0FBRyxDQUFDO0lBQ3RDLE1BQU1vVyxVQUFVLEdBQUcsUUFBUSxDQUFDM0UsSUFBSSxDQUFDdUUsS0FBSyxDQUFDO0lBQ3ZDLE1BQU1iLFdBQVcsR0FBRyxJQUFJLENBQUMzTCxxQkFBcUIsR0FBRyxDQUFDLElBQUl5TCxHQUFHLEdBQUcsSUFBSSxDQUFDekwscUJBQXFCLElBQUksSUFBSSxDQUFDUCxrQkFBa0I7SUFDakgsTUFBTW9OLFlBQVksR0FBR2xCLFdBQVcsSUFBSSxJQUFJLENBQUMxTCxtQkFBbUIsSUFBSSxJQUFJLENBQUNQLHNCQUFzQjtJQUMzRixNQUFNb04sbUJBQW1CLEdBQUcsSUFBSSxDQUFDNU0saUJBQWlCLENBQUM2TSxJQUFJLENBQUNDLEtBQUssSUFBSSxDQUFDLFdBQVcsQ0FBQy9FLElBQUksQ0FBQytFLEtBQUssQ0FBQ2xWLElBQUksQ0FBQyxDQUFDO0lBQy9GLE1BQU1tVixtQkFBbUIsR0FDdkJMLFVBQVUsSUFDVmpCLFdBQVcsSUFDWG1CLG1CQUFtQixJQUNuQixJQUFJLENBQUM3TSxtQkFBbUIsSUFBSSxJQUFJLENBQUNOLDJCQUEyQjtJQUM5RCxNQUFNdU4sY0FBYyxHQUFHTixVQUFVLEtBQUssSUFBSSxDQUFDOU0sWUFBWSxJQUFJNk0sYUFBYSxJQUFJRSxZQUFZLElBQUlJLG1CQUFtQixDQUFDO0lBQ2hILE1BQU1FLGNBQWMsR0FBRyxJQUFJLENBQUNyTixZQUFZLElBQUk2TSxhQUFhLElBQUlFLFlBQVksSUFBSUssY0FBYztJQUUzRixJQUFJLENBQUNDLGNBQWMsRUFBRTtNQUNuQixJQUFJLENBQUNaLHNCQUFzQixDQUFDLENBQUM7TUFDN0IsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxJQUFJYSxvQkFBb0IsR0FBRyxLQUFLO0lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUN0TixZQUFZLEVBQUU7TUFDdEIsSUFBSSxDQUFDQSxZQUFZLEdBQUcsSUFBSTtNQUN4QixJQUFJLENBQUNqQyxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQztNQUNsQztNQUNBLE1BQU1tTyxPQUFPLEdBQUcsSUFBSSxDQUFDRiw0QkFBNEIsQ0FBQyxDQUFDO01BQ25ELE1BQU11QixTQUFTLEdBQUcsSUFBSSxDQUFDQyx3QkFBd0IsQ0FBQyxDQUFDO01BQ2pEO01BQ0EsTUFBTUMsUUFBUSxHQUFHdkIsT0FBTyxHQUFHcUIsU0FBUztNQUNwQyxJQUFJRSxRQUFRLENBQUMvVyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ3ZCO1FBQ0EsSUFBSTZXLFNBQVMsQ0FBQzdXLE1BQU0sR0FBRyxDQUFDLEVBQUU7VUFDeEIsTUFBTWdYLFdBQVcsR0FBRzdaLElBQUksQ0FBQ2dLLEdBQUcsQ0FBQyxJQUFJLENBQUN6RCxNQUFNLENBQUMxRCxNQUFNLEVBQUU2VyxTQUFTLENBQUM3VyxNQUFNLENBQUM7VUFDbEUsTUFBTWlYLE1BQU0sR0FBRyxJQUFJLENBQUN2VCxNQUFNLENBQUNrRSxLQUFLLENBQUMsQ0FBQ29QLFdBQVcsQ0FBQztVQUM5QyxJQUFJQSxXQUFXLEdBQUcsQ0FBQyxJQUFJQyxNQUFNLEtBQUtKLFNBQVMsQ0FBQ2pQLEtBQUssQ0FBQyxDQUFDb1AsV0FBVyxDQUFDLEVBQUU7WUFDL0QsSUFBSSxDQUFDdFQsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNsRSxNQUFNLENBQUMxRCxNQUFNLEdBQUdnWCxXQUFXLENBQUM7WUFDcEUsSUFBSSxDQUFDclQsTUFBTSxHQUFHeEcsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUN4RCxNQUFNLENBQUMxRCxNQUFNLENBQUM7WUFDN0MsSUFBSSxDQUFDaUgsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO1VBQ3RCO1FBQ0Y7UUFDQSxJQUFJLENBQUNPLGdCQUFnQixHQUFHdVAsUUFBUSxDQUFDblAsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNGLGtCQUFrQixDQUFDO1FBQ2xFLElBQUlxUCxRQUFRLENBQUMvVyxNQUFNLEdBQUcsSUFBSSxDQUFDMEgsa0JBQWtCLEVBQUU7VUFDN0MsSUFBSSxDQUFDTCxtQkFBbUIsR0FBRyxJQUFJO1FBQ2pDO1FBQ0F1UCxvQkFBb0IsR0FBR0csUUFBUSxDQUFDRyxRQUFRLENBQUNsQixLQUFLLENBQUM7TUFDakQsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDeE8sZ0JBQWdCLEdBQUcsRUFBRTtNQUM1QjtJQUNGO0lBRUEsSUFBSSxDQUFDb1Asb0JBQW9CLEVBQUU7TUFDekIsSUFBSSxDQUFDeFAsbUJBQW1CLENBQUMsWUFBWSxFQUFFNE8sS0FBSyxDQUFDO0lBQy9DO0lBQ0EsSUFBSSxDQUFDbUIsd0JBQXdCLENBQUMsQ0FBQztJQUMvQixPQUFPLElBQUk7RUFDYjtFQUVRbEIsb0JBQW9CQSxDQUFDalcsTUFBYyxFQUFFaVYsR0FBVyxFQUFRO0lBQzlELElBQUksQ0FBQyxJQUFJLENBQUN6TCxxQkFBcUIsSUFBSXlMLEdBQUcsR0FBRyxJQUFJLENBQUN6TCxxQkFBcUIsR0FBRyxJQUFJLENBQUNQLGtCQUFrQixFQUFFO01BQzdGLElBQUksQ0FBQ08scUJBQXFCLEdBQUd5TCxHQUFHO01BQ2hDLElBQUksQ0FBQ3hMLG1CQUFtQixHQUFHLENBQUM7SUFDOUI7SUFDQSxJQUFJLENBQUNBLG1CQUFtQixJQUFJekosTUFBTTtFQUNwQztFQUVRd1Usb0JBQW9CQSxDQUFBLEVBQVM7SUFDbkMsSUFBSSxDQUFDaEwscUJBQXFCLEdBQUcsQ0FBQztJQUM5QixJQUFJLENBQUNDLG1CQUFtQixHQUFHLENBQUM7RUFDOUI7RUFFUWlFLHVCQUF1QkEsQ0FBQSxFQUFTO0lBQ3RDLElBQUksSUFBSSxDQUFDbkUsZUFBZSxFQUFFO01BQ3hCeUUsWUFBWSxDQUFDLElBQUksQ0FBQ3pFLGVBQWUsQ0FBQztNQUNsQyxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJO0lBQzdCO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ0ssa0JBQWtCLEVBQUU7TUFDM0JvRSxZQUFZLENBQUMsSUFBSSxDQUFDcEUsa0JBQWtCLENBQUM7TUFDckMsSUFBSSxDQUFDQSxrQkFBa0IsR0FBRyxJQUFJO0lBQ2hDO0lBQ0EsSUFBSSxDQUFDRCxtQkFBbUIsR0FBRyxFQUFFO0lBQzdCLElBQUksQ0FBQ0wsWUFBWSxHQUFHLEtBQUs7SUFDekIsSUFBSSxDQUFDOUIsZ0JBQWdCLEdBQUcsRUFBRTtJQUMxQixJQUFJLENBQUNrQyxpQkFBaUIsR0FBRyxFQUFFO0lBQzNCLElBQUksQ0FBQzhLLG9CQUFvQixDQUFDLENBQUM7RUFDN0I7RUFFUTBCLHNCQUFzQkEsQ0FBQzVVLElBQVksRUFBRThWLEVBQVUsRUFBUTtJQUM3RCxNQUFNQyxXQUFXLEdBQUdELEVBQUUsR0FBRyxJQUFJLENBQUNuTyxrQkFBa0I7SUFDaEQsSUFBSSxDQUFDUyxpQkFBaUIsQ0FBQ3BOLElBQUksQ0FBQztNQUFFZ0YsSUFBSTtNQUFFOFY7SUFBRyxDQUFDLENBQUM7SUFDekMsSUFBSSxDQUFDMU4saUJBQWlCLEdBQUcsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQzROLE1BQU0sQ0FBQ2QsS0FBSyxJQUFJQSxLQUFLLENBQUNZLEVBQUUsSUFBSUMsV0FBVyxDQUFDO0VBQzFGO0VBRVF0QixzQkFBc0JBLENBQUEsRUFBUztJQUNyQyxJQUFJLENBQUMsSUFBSSxDQUFDck0saUJBQWlCLENBQUMxSixNQUFNLEVBQUU7SUFDcEMsTUFBTWlWLEdBQUcsR0FBR0MsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN0QixNQUFNb0MsV0FBVyxHQUFHcEMsR0FBRyxHQUFHLElBQUksQ0FBQ2hNLGtCQUFrQjtJQUNqRCxJQUFJLENBQUNTLGlCQUFpQixHQUFHLElBQUksQ0FBQ0EsaUJBQWlCLENBQUM0TixNQUFNLENBQUNkLEtBQUssSUFBSUEsS0FBSyxDQUFDWSxFQUFFLElBQUlDLFdBQVcsQ0FBQztFQUMxRjtFQUVRUCx3QkFBd0JBLENBQUEsRUFBVztJQUN6QyxJQUFJLENBQUMsSUFBSSxDQUFDcE4saUJBQWlCLENBQUMxSixNQUFNLEVBQUUsT0FBTyxFQUFFO0lBQzdDLE1BQU0rVyxRQUFRLEdBQUcsSUFBSSxDQUFDck4saUJBQWlCLENBQUN2SSxHQUFHLENBQUNxVixLQUFLLElBQUlBLEtBQUssQ0FBQ2xWLElBQUksQ0FBQyxDQUFDekUsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUN6RSxJQUFJLENBQUM2TSxpQkFBaUIsR0FBRyxFQUFFO0lBQzNCLE9BQU9xTixRQUFRO0VBQ2pCO0VBRVFJLHdCQUF3QkEsQ0FBQSxFQUFTO0lBQ3ZDLElBQUksSUFBSSxDQUFDNU4sZUFBZSxFQUFFO01BQ3hCeUUsWUFBWSxDQUFDLElBQUksQ0FBQ3pFLGVBQWUsQ0FBQztJQUNwQztJQUNBLElBQUksQ0FBQ0EsZUFBZSxHQUFHMkgsVUFBVSxDQUFDLE1BQU07TUFDdEMsSUFBSSxDQUFDcUcsa0JBQWtCLENBQUMsQ0FBQztJQUMzQixDQUFDLEVBQUUsSUFBSSxDQUFDdk8sZ0JBQWdCLENBQUM7RUFDM0I7RUFFUXVPLGtCQUFrQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUNqTyxZQUFZLEVBQUU7O0lBRXhCO0lBQ0EsSUFBSXhCLFNBQVMsR0FBRyxJQUFJLENBQUNELG9CQUFvQixDQUFDLElBQUksQ0FBQ0wsZ0JBQWdCLENBQUM7O0lBRWhFO0lBQ0EsSUFBSSxJQUFJLENBQUNnRSxlQUFlLEVBQUU7TUFDeEIsTUFBTXlHLFVBQVUsR0FBRyxJQUFJLENBQUN6RyxlQUFlLENBQUMwRyxhQUFhLENBQUNwSyxTQUFTLEVBQUUsSUFBSSxDQUFDO01BQ3RFLElBQUltSyxVQUFVLENBQUNFLE9BQU8sRUFBRTtRQUN0QjtRQUNBLElBQUksQ0FBQzdJLFlBQVksR0FBRyxLQUFLO1FBQ3pCLElBQUksQ0FBQzlCLGdCQUFnQixHQUFHLEVBQUU7UUFDMUIsSUFBSSxDQUFDa0MsaUJBQWlCLEdBQUcsRUFBRTtRQUMzQixJQUFJLENBQUM4SyxvQkFBb0IsQ0FBQyxDQUFDO1FBQzNCLElBQUksQ0FBQ25OLG1CQUFtQixHQUFHLEtBQUs7UUFDaEM7TUFDRjtNQUNBUyxTQUFTLEdBQUdtSyxVQUFVLENBQUNuSyxTQUFTO0lBQ2xDO0lBRUEsTUFBTWtLLE9BQU8sR0FBR2xLLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDakQsTUFBTStOLFlBQVksR0FBRyxJQUFJLENBQUN6TyxtQkFBbUI7SUFDN0MsSUFBSSxDQUFDaUMsWUFBWSxHQUFHLEtBQUs7SUFDekIsSUFBSSxDQUFDOUIsZ0JBQWdCLEdBQUcsRUFBRTtJQUMxQixJQUFJLENBQUNrQyxpQkFBaUIsR0FBRyxFQUFFO0lBQzNCLElBQUksQ0FBQzhLLG9CQUFvQixDQUFDLENBQUM7SUFDM0IsSUFBSSxDQUFDbk4sbUJBQW1CLEdBQUcsS0FBSztJQUNoQyxJQUFJLElBQUksQ0FBQ2tDLGVBQWUsRUFBRTtNQUN4QnlFLFlBQVksQ0FBQyxJQUFJLENBQUN6RSxlQUFlLENBQUM7TUFDbEMsSUFBSSxDQUFDQSxlQUFlLEdBQUcsSUFBSTtJQUM3QjtJQUVBLElBQUksQ0FBQ3lJLE9BQU8sRUFBRTtJQUNkLE1BQU0zVixLQUFLLEdBQUcyVixPQUFPLENBQUNJLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakMsSUFBSS9WLEtBQUssQ0FBQzJELE1BQU0sR0FBRyxDQUFDLElBQUlnUyxPQUFPLENBQUNoUyxNQUFNLEdBQUcsR0FBRyxFQUFFO01BQzVDLElBQUksQ0FBQ21FLGNBQWMsR0FBRztRQUNwQjdDLElBQUksRUFBRTBRLE9BQU87UUFDYjNWLEtBQUssRUFBRUEsS0FBSyxDQUFDMkQsTUFBTTtRQUNuQm9JLEtBQUssRUFBRTRKLE9BQU8sQ0FBQ2hTLE1BQU0sSUFBSThWLFlBQVksR0FBRyxHQUFHLEdBQXdCLENBQUM7TUFDdEUsQ0FBQztNQUNELElBQUksQ0FBQ3BTLE1BQU0sR0FBRyxFQUFFO01BQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7TUFDZixJQUFJLENBQUM2TyxpQkFBaUIsQ0FBQyxDQUFDO01BQ3hCLElBQUksQ0FBQ2pGLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO01BQ3RCO0lBQ0Y7SUFFQSxJQUFJLENBQUNxRCxVQUFVLENBQUNwRCxPQUFPLENBQUM7RUFDMUI7RUFFUW9ELFVBQVVBLENBQUM5VCxJQUFZLEVBQVE7SUFDckMsSUFBSSxDQUFDQSxJQUFJLEVBQUU7O0lBRVg7SUFDQTtJQUNBLE1BQU1rVyxRQUFRLEdBQUcsQ0FBQyxHQUFHbFcsSUFBSSxDQUFDLENBQUNnVyxNQUFNLENBQUMzRyxDQUFDLElBQUk7TUFDckMsTUFBTXpJLElBQUksR0FBR3lJLENBQUMsQ0FBQ3hJLFVBQVUsQ0FBQyxDQUFDLENBQUM7TUFDNUI7TUFDQTtNQUNBLElBQUlELElBQUksR0FBRyxFQUFFLElBQUlBLElBQUksS0FBSyxHQUFHLEVBQUUsT0FBTyxLQUFLO01BQzNDO01BQ0EsSUFBSSxJQUFJLENBQUNGLGlCQUFpQixDQUFDMkksQ0FBQyxDQUFDLEVBQUUsT0FBTyxLQUFLO01BQzNDLE9BQU8sSUFBSTtJQUNiLENBQUMsQ0FBQyxDQUFDOVQsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUVYLElBQUksQ0FBQzJhLFFBQVEsRUFBRTtNQUNiLElBQUl6TCxPQUFPLENBQUNzQixHQUFHLENBQUMsZ0JBQWdCLENBQUMsRUFBRTtRQUNqQ2hCLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLHVEQUF1RGhMLElBQUksR0FBRyxDQUFDO01BQy9FO01BQ0E7SUFDRjtJQUNBQSxJQUFJLEdBQUdrVyxRQUFROztJQUVmO0lBQ0EsSUFBSXpMLE9BQU8sQ0FBQ3NCLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxFQUFFO01BQ2pDLE1BQU1uRixJQUFJLEdBQUc1RyxJQUFJLENBQUM2RyxVQUFVLENBQUMsQ0FBQyxDQUFDO01BQy9Ca0UsT0FBTyxDQUFDQyxLQUFLLENBQUMsdUJBQXVCaEwsSUFBSSxVQUFVNEcsSUFBSSxFQUFFLENBQUM7SUFDNUQ7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQ21CLGdCQUFnQixJQUFJLElBQUksQ0FBQ0MsWUFBWSxFQUFFO01BQzlDO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQ2tDLGVBQWUsRUFBRTtNQUN4QixNQUFNeUcsVUFBVSxHQUFHLElBQUksQ0FBQ3pHLGVBQWUsQ0FBQzBHLGFBQWEsQ0FBQzVRLElBQUksRUFBRSxLQUFLLENBQUM7TUFDbEUsSUFBSTJRLFVBQVUsQ0FBQ0UsT0FBTyxFQUFFO1FBQ3RCO1FBQ0E7TUFDRjtNQUNBLElBQUlGLFVBQVUsQ0FBQ25LLFNBQVMsS0FBS3hHLElBQUksRUFBRTtRQUNqQztRQUNBQSxJQUFJLEdBQUcyUSxVQUFVLENBQUNuSyxTQUFTO1FBQzNCLElBQUksQ0FBQ3hHLElBQUksRUFBRTtNQUNiO0lBQ0Y7SUFDQTtJQUNBLElBQUksSUFBSSxDQUFDNkMsY0FBYyxFQUFFO01BQ3ZCLElBQUksQ0FBQ3NPLDRCQUE0QixDQUFDLENBQUM7SUFDckM7SUFDQTtJQUNBLE1BQU0zSyxTQUFTLEdBQUcsSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQ3ZHLElBQUksQ0FBQztJQUNqRCxJQUFJLENBQUN3RyxTQUFTLEVBQUU7O0lBRWhCO0lBQ0EsTUFBTTJQLFdBQVcsR0FBRzNQLFNBQVMsQ0FBQ29JLFFBQVEsQ0FBQyxJQUFJLENBQUM7SUFDNUMsSUFBSXVILFdBQVcsRUFBRTtNQUNmO01BQ0EsTUFBTUMsU0FBUyxHQUFHNVAsU0FBUyxDQUFDQyxPQUFPLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQztNQUN2RCxJQUFJLENBQUMySyxvQkFBb0IsQ0FBQ2dGLFNBQVMsQ0FBQztJQUN0QyxDQUFDLE1BQU07TUFDTCxJQUFJLENBQUNoRixvQkFBb0IsQ0FBQzVLLFNBQVMsQ0FBQztJQUN0QztFQUNGO0VBRVE0SyxvQkFBb0JBLENBQUNwUixJQUFZLEVBQVE7SUFDL0MsSUFBSSxDQUFDQSxJQUFJLEVBQUU7SUFDWDtJQUNBLElBQUksQ0FBQzJGLFdBQVcsQ0FBQyxDQUFDO0lBQ2xCLElBQUksQ0FBQ3ZELE1BQU0sR0FBRyxJQUFJLENBQUNBLE1BQU0sQ0FBQ2tFLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDakUsTUFBTSxDQUFDLEdBQUdyQyxJQUFJLEdBQUcsSUFBSSxDQUFDb0MsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLElBQUksQ0FBQ2pFLE1BQU0sQ0FBQztJQUN2RixJQUFJLENBQUNBLE1BQU0sSUFBSXJDLElBQUksQ0FBQ3RCLE1BQU07SUFDMUIsSUFBSSxDQUFDaUgsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQ3VMLGlCQUFpQixDQUFDLENBQUM7SUFDeEI7SUFDQSxNQUFNbUYsV0FBVyxHQUFHLElBQUksQ0FBQzdOLGVBQWUsQ0FBQzlKLE1BQU0sR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDK0osY0FBYyxLQUFLLElBQUk7SUFDbkYsSUFBSSxDQUFDLElBQUksQ0FBQ1QsWUFBWSxJQUFJLENBQUMsSUFBSSxDQUFDRCxnQkFBZ0IsSUFBSSxDQUFDc08sV0FBVyxFQUFFO01BQ2hFLElBQUksQ0FBQ3BLLFlBQVksQ0FBQyxDQUFDO0lBQ3JCO0lBQ0EsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFUXdDLFVBQVVBLENBQUNqVCxJQUFZLEVBQVE7SUFDckMsTUFBTXNXLGNBQWMsR0FBR3RXLElBQUksS0FBSyxJQUFJLENBQUNvQyxNQUFNOztJQUUzQztJQUNBO0lBQ0EsSUFBSSxJQUFJLENBQUNTLGNBQWMsRUFBRTtNQUN2QixJQUFJLENBQUMwVCxvQkFBb0IsQ0FBQyxDQUFDO01BQzNCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLENBQUN4QyxtQkFBbUIsQ0FBQyxDQUFDO0lBQzFCLElBQUl1QyxjQUFjLEVBQUU7TUFDbEJ0VyxJQUFJLEdBQUcsSUFBSSxDQUFDb0MsTUFBTTtJQUNwQjtJQUVBLElBQUksSUFBSSxDQUFDK0gsWUFBWSxFQUFFO01BQ3JCLE1BQU1xTSxVQUFVLEdBQUcsSUFBSSxDQUFDck0sWUFBWSxDQUFDM0ssT0FBTyxDQUFDMEgsSUFBSTtNQUNqRCxNQUFNdVAsaUJBQWlCLEdBQUdELFVBQVUsR0FBR3hXLElBQUksQ0FBQ2tILElBQUksQ0FBQyxDQUFDLEdBQUdsSCxJQUFJO01BQ3pELElBQUksQ0FBQyxJQUFJLENBQUNtSyxZQUFZLENBQUMzSyxPQUFPLENBQUNrWCxVQUFVLElBQUksQ0FBQ0QsaUJBQWlCLEVBQUU7UUFDL0QsSUFBSSxDQUFDeEssWUFBWSxDQUFDLENBQUM7UUFDbkI7TUFDRjtNQUNBLE1BQU0wSyxRQUFRLEdBQUcsSUFBSSxDQUFDeE0sWUFBWTtNQUNsQyxJQUFJLENBQUNBLFlBQVksR0FBRyxJQUFJO01BQ3hCLElBQUksQ0FBQy9ILE1BQU0sR0FBRyxFQUFFO01BQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7TUFDZixJQUFJLENBQUNvRixpQkFBaUIsR0FBRyxDQUFDO01BQzFCLElBQUksQ0FBQytJLGdCQUFnQixDQUFDLENBQUM7TUFDdkIsSUFBSSxDQUFDdkUsWUFBWSxDQUFDLENBQUM7TUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7TUFDdEJrRyxRQUFRLENBQUNDLE9BQU8sQ0FBQ0gsaUJBQWlCLENBQUM7TUFDbkM7SUFDRjtJQUVBLElBQUlJLFVBQVUsR0FBRzdXLElBQUksQ0FBQ2tILElBQUksQ0FBQyxDQUFDO0lBQzVCLElBQUksQ0FBQzJQLFVBQVUsRUFBRTtNQUNmLElBQUksQ0FBQzVLLFlBQVksQ0FBQyxDQUFDO01BQ25CO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQy9CLGVBQWUsRUFBRTtNQUN4QixNQUFNeUcsVUFBVSxHQUFHLElBQUksQ0FBQ3pHLGVBQWUsQ0FBQzRNLHdCQUF3QixDQUFDRCxVQUFVLENBQUM7TUFDNUUsSUFBSWxHLFVBQVUsQ0FBQ0UsT0FBTyxFQUFFO1FBQ3RCO1FBQ0EsSUFBSSxDQUFDek8sTUFBTSxHQUFHLEVBQUU7UUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQzRKLFlBQVksQ0FBQyxDQUFDO1FBQ25CO01BQ0Y7TUFDQTRLLFVBQVUsR0FBR2xHLFVBQVUsQ0FBQ25LLFNBQVM7SUFDbkM7O0lBRUE7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDMEMsVUFBVSxJQUFJLENBQUMyTixVQUFVLENBQUNwSCxVQUFVLENBQUMsR0FBRyxDQUFDLEVBQUU7TUFDbkQsSUFBSSxDQUFDbk4sT0FBTyxDQUFDdEgsSUFBSSxDQUFDNmIsVUFBVSxDQUFDO01BQzdCLElBQUksQ0FBQ3RVLFlBQVksR0FBRyxDQUFDLENBQUM7TUFDdEIsSUFBSSxDQUFDd1UsaUJBQWlCLENBQUNGLFVBQVUsQ0FBQztJQUNwQyxDQUFDLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQzNOLFVBQVUsRUFBRTtNQUMzQjtNQUNBLElBQUksQ0FBQzVHLE9BQU8sQ0FBQ3RILElBQUksQ0FBQzZiLFVBQVUsQ0FBQztNQUM3QixJQUFJLENBQUN0VSxZQUFZLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCO0lBQ0EsSUFBSSxJQUFJLENBQUNPLElBQUksS0FBSyxXQUFXLEVBQUU7TUFDN0IsSUFBSSxDQUFDa0ssSUFBSSxDQUFDLE9BQU8sRUFBRTZKLFVBQVUsQ0FBQztJQUNoQyxDQUFDLE1BQU07TUFDTCxJQUFJLENBQUM3SixJQUFJLENBQUMsUUFBUSxFQUFFNkosVUFBVSxDQUFDO0lBQ2pDO0lBQ0EsSUFBSSxDQUFDelUsTUFBTSxHQUFHLEVBQUU7SUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztJQUNmLElBQUksQ0FBQ21PLGdCQUFnQixDQUFDLENBQUM7SUFDdkIsSUFBSSxDQUFDdkUsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFUVMsaUJBQWlCQSxDQUFBLEVBQVM7SUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQzlPLE1BQU0sQ0FBQ3FOLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtNQUNoQyxJQUFJLENBQUNlLGdCQUFnQixDQUFDLENBQUM7TUFDdkI7SUFDRjtJQUVBLE1BQU13RyxVQUFVLEdBQUcsSUFBSSxDQUFDNVUsTUFBTSxDQUFDZ1MsT0FBTyxDQUFDLEdBQUcsQ0FBQztJQUMzQyxNQUFNNkMsVUFBVSxHQUFHRCxVQUFVLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQzdHLElBQUksQ0FBQyxJQUFJLENBQUMvTixNQUFNLENBQUNrRSxLQUFLLENBQUMwUSxVQUFVLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDbEY7SUFDQSxJQUFJQSxVQUFVLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQzNVLE1BQU0sR0FBRzJVLFVBQVUsSUFBSUMsVUFBVSxFQUFFO01BQzdELElBQUksQ0FBQ3pHLGdCQUFnQixDQUFDLENBQUM7TUFDdkI7SUFDRjtJQUVBLE1BQU0wRyxXQUFXLEdBQUcsSUFBSSxDQUFDOVUsTUFBTSxDQUFDa0UsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNqRSxNQUFNLENBQUM7SUFDckQsTUFBTThVLFlBQVksR0FBR0gsVUFBVSxJQUFJLENBQUMsR0FBR0UsV0FBVyxDQUFDNVEsS0FBSyxDQUFDLENBQUMsRUFBRTBRLFVBQVUsQ0FBQyxHQUFHRSxXQUFXO0lBQ3JGLE1BQU1FLGFBQWEsR0FBR0osVUFBVSxJQUFJLENBQUMsR0FBRyxJQUFJLENBQUM1VSxNQUFNLENBQUNrRSxLQUFLLENBQUMsQ0FBQyxFQUFFMFEsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDNVUsTUFBTTtJQUN0RixNQUFNaVYsT0FBTyxHQUFHLENBQUNGLFlBQVksQ0FBQ0csT0FBTyxDQUFDLENBQUMsSUFBSUYsYUFBYSxDQUFDRSxPQUFPLENBQUMsQ0FBQyxJQUFJLEdBQUcsRUFBRTNJLFdBQVcsQ0FBQyxDQUFDO0lBQ3hGLE1BQU00SSxRQUFRLEdBQUcsSUFBSSxDQUFDL1UsV0FBVyxDQUFDLElBQUksQ0FBQ0MsZUFBZSxDQUFDLEVBQUVzUSxPQUFPO0lBQ2hFLElBQUksQ0FBQ3ZRLFdBQVcsR0FBRyxJQUFJLENBQUNFLGlCQUFpQixDQUN0Q3NULE1BQU0sQ0FBQ3dCLEdBQUcsSUFBSUEsR0FBRyxDQUFDekUsT0FBTyxDQUFDcEUsV0FBVyxDQUFDLENBQUMsQ0FBQ2MsVUFBVSxDQUFDNEgsT0FBTyxDQUFDLENBQUMsQ0FDNUQvUSxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNkLElBQUksSUFBSSxDQUFDOUQsV0FBVyxDQUFDOUQsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUNqQyxJQUFJLENBQUM4UixnQkFBZ0IsQ0FBQyxDQUFDO01BQ3ZCO0lBQ0Y7SUFDQSxJQUFJK0csUUFBUSxFQUFFO01BQ1osTUFBTUUsR0FBRyxHQUFHLElBQUksQ0FBQ2pWLFdBQVcsQ0FBQ2tWLFNBQVMsQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUM1RSxPQUFPLEtBQUt3RSxRQUFRLENBQUM7TUFDbkUsSUFBSSxDQUFDOVUsZUFBZSxHQUFHZ1YsR0FBRyxJQUFJLENBQUMsR0FBR0EsR0FBRyxHQUFHLENBQUM7SUFDM0MsQ0FBQyxNQUFNO01BQ0wsSUFBSSxDQUFDaFYsZUFBZSxHQUFHLENBQUM7SUFDMUI7RUFDRjtFQUVBbVYsb0JBQW9CQSxDQUFDQyxRQUFpQyxFQUFRO0lBQzVELElBQUksQ0FBQ25WLGlCQUFpQixHQUFHbVYsUUFBUTtJQUNqQyxJQUFJLENBQUMzRyxpQkFBaUIsQ0FBQyxDQUFDO0VBQzFCO0VBRVEyQixlQUFlQSxDQUFDaUYsTUFBZSxFQUFXO0lBQ2hELElBQUksQ0FBQyxJQUFJLENBQUMxVixNQUFNLENBQUNxTixVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDak4sV0FBVyxDQUFDOUQsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUNqRSxPQUFPLEtBQUs7SUFDZDtJQUNBO0lBQ0EsTUFBTW9VLFNBQVMsR0FBRyxJQUFJLENBQUNyUSxlQUFlLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQ0EsZUFBZSxHQUFHLElBQUksQ0FBQ0QsV0FBVyxDQUFDOUQsTUFBTSxHQUN6RixJQUFJLENBQUMrRCxlQUFlLEdBQ3BCLENBQUM7SUFDTCxNQUFNc1YsUUFBUSxHQUFHLElBQUksQ0FBQ3ZWLFdBQVcsQ0FBQ3NRLFNBQVMsQ0FBQztJQUM1QyxJQUFJLENBQUNpRixRQUFRLEVBQUU7TUFDYixPQUFPLEtBQUs7SUFDZDtJQUNBLElBQUlELE1BQU0sRUFBRTtNQUNWLElBQUksQ0FBQzdFLFVBQVUsQ0FBQzhFLFFBQVEsQ0FBQ2hGLE9BQU8sQ0FBQztJQUNuQyxDQUFDLE1BQU07TUFDTCxJQUFJLENBQUMzUSxNQUFNLEdBQUcsR0FBRzJWLFFBQVEsQ0FBQ2hGLE9BQU8sR0FBRztNQUNwQyxJQUFJLENBQUMxUSxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUMxRCxNQUFNO01BQ2hDLElBQUksQ0FBQzhSLGdCQUFnQixDQUFDLENBQUM7TUFDdkIsSUFBSSxDQUFDdkUsWUFBWSxDQUFDLENBQUM7TUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7SUFDeEI7SUFDQSxPQUFPLElBQUk7RUFDYjtFQUVRRCxnQkFBZ0JBLENBQUEsRUFBUztJQUMvQixJQUFJLENBQUNoTyxXQUFXLEdBQUcsRUFBRTtJQUNyQixJQUFJLENBQUNDLGVBQWUsR0FBRyxDQUFDLENBQUM7RUFDM0I7RUFFUThRLG1CQUFtQkEsQ0FBQ3lFLFNBQWlCLEVBQVc7SUFDdEQsSUFBSSxDQUFDLElBQUksQ0FBQzVWLE1BQU0sQ0FBQ3FOLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNqTixXQUFXLENBQUM5RCxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ2pFO01BQ0EsSUFBSSxJQUFJLENBQUMrRCxlQUFlLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDRCxXQUFXLENBQUM5RCxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ2hFLElBQUksQ0FBQytELGVBQWUsR0FBRyxDQUFDLENBQUM7TUFDM0I7TUFDQSxPQUFPLEtBQUs7SUFDZDtJQUNBO0lBQ0EsTUFBTXdWLFlBQVksR0FBRyxJQUFJLENBQUN4VixlQUFlLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQ0EsZUFBZSxHQUFHLElBQUksQ0FBQ0QsV0FBVyxDQUFDOUQsTUFBTSxHQUM1RixJQUFJLENBQUMrRCxlQUFlLEdBQ3BCLENBQUMsQ0FBQztJQUNOLE1BQU15VixJQUFJLEdBQUdELFlBQVksR0FBR0QsU0FBUztJQUNyQyxNQUFNRyxPQUFPLEdBQUd0YyxJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFL0osSUFBSSxDQUFDZ0ssR0FBRyxDQUFDLElBQUksQ0FBQ3JELFdBQVcsQ0FBQzlELE1BQU0sR0FBRyxDQUFDLEVBQUV3WixJQUFJLENBQUMsQ0FBQztJQUN4RSxJQUFJQyxPQUFPLEtBQUssSUFBSSxDQUFDMVYsZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZSxJQUFJLENBQUMsRUFBRTtNQUNqRSxPQUFPLElBQUk7SUFDYjtJQUNBLElBQUksQ0FBQ0EsZUFBZSxHQUFHMFYsT0FBTztJQUM5QixJQUFJLENBQUNsTSxZQUFZLENBQUMsQ0FBQztJQUNuQixPQUFPLElBQUk7RUFDYjs7RUFFQTs7RUFFQTtFQUNRbU0sdUJBQXVCLEdBQVcsRUFBRTtFQUU1Q0MsUUFBUUEsQ0FBQzVhLElBQXVCLEVBQUVpVCxPQUFlLEVBQVE7SUFDdkQsSUFBSSxDQUFDQSxPQUFPLEVBQUU7SUFDZCxNQUFNbUcsVUFBVSxHQUFHLElBQUksQ0FBQ3lCLGtCQUFrQixDQUFDN2EsSUFBSSxDQUFDO0lBQ2hELElBQUksQ0FBQ29aLFVBQVUsRUFBRTs7SUFFakI7SUFDQTtJQUNBLElBQUlBLFVBQVUsS0FBSyxRQUFRLEVBQUU7TUFDM0IsTUFBTTBCLFNBQVMsR0FBRyxHQUFHMUIsVUFBVSxJQUFJbkcsT0FBTyxFQUFFO01BQzVDLElBQUk2SCxTQUFTLEtBQUssSUFBSSxDQUFDSCx1QkFBdUIsRUFBRTtRQUM5QyxPQUFPLENBQUM7TUFDVjtNQUNBLElBQUksQ0FBQ0EsdUJBQXVCLEdBQUdHLFNBQVM7SUFDMUM7SUFFQSxJQUNFMUIsVUFBVSxLQUFLLFFBQVEsSUFDdkJBLFVBQVUsS0FBSyxVQUFVLElBQ3pCQSxVQUFVLEtBQUssU0FBUyxJQUN4QkEsVUFBVSxLQUFLLFFBQVEsSUFDdkJBLFVBQVUsS0FBSyxNQUFNLElBQ3JCQSxVQUFVLEtBQUssYUFBYSxJQUM1QkEsVUFBVSxLQUFLLE9BQU8sSUFDdEJBLFVBQVUsS0FBSyxNQUFNLEVBQ3JCO01BQ0EsSUFBSSxDQUFDdFAsc0JBQXNCLEdBQUcsSUFBSTtJQUNwQztJQUNBLElBQUlzUCxVQUFVLEtBQUssYUFBYSxFQUFFO01BQ2hDLElBQUksQ0FBQzNULGNBQWMsR0FBR3dOLE9BQU87SUFDL0I7SUFFQSxJQUFJLElBQUksQ0FBQzdPLFNBQVMsRUFBRTtNQUNsQixNQUFNMlcsU0FBUyxHQUFHLElBQUksQ0FBQ0MsYUFBYSxDQUFDO1FBQ25DaGIsSUFBSSxFQUFFb1osVUFBVTtRQUNoQjZCLE9BQU8sRUFBRWpiLElBQUk7UUFDYmlULE9BQU87UUFDUGlJLFNBQVMsRUFBRS9FLElBQUksQ0FBQ0QsR0FBRyxDQUFDO01BQ3RCLENBQUMsQ0FBQztNQUNGLElBQUk2RSxTQUFTLEVBQUU7UUFDYixNQUFNeFksSUFBSSxHQUFHd1ksU0FBUyxDQUFDNUMsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHNEMsU0FBUyxHQUFHLEdBQUdBLFNBQVMsSUFBSTtRQUNwRSxJQUFJLENBQUM5VyxNQUFNLENBQUM0SyxLQUFLLENBQUN0TSxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDNEksMEJBQTBCLEdBQUc1SSxJQUFJLENBQUM0VixRQUFRLENBQUMsSUFBSSxDQUFDO01BQ3ZEO01BQ0E7SUFDRjtJQUVBLE1BQU0vSCxLQUFLLEdBQUc7TUFDWnBRLElBQUksRUFBRW9aLFVBQVU7TUFDaEI2QixPQUFPLEVBQUVqYixJQUFJO01BQ2JpVCxPQUFPO01BQ1BpSSxTQUFTLEVBQUUvRSxJQUFJLENBQUNELEdBQUcsQ0FBQztJQUN0QixDQUFDOztJQUVEO0lBQ0E7SUFDQSxJQUFJa0QsVUFBVSxLQUFLLFFBQVEsRUFBRTtNQUMzQjtNQUNBO01BQ0EsTUFBTStCLFdBQVcsR0FBRyxJQUFJLENBQUMxVyxVQUFVLENBQUN3VixTQUFTLENBQUNqZSxDQUFDLElBQUlBLENBQUMsQ0FBQ2dFLElBQUksS0FBSyxRQUFRLENBQUM7TUFDdkUsSUFBSW1iLFdBQVcsS0FBSyxDQUFDLENBQUMsRUFBRTtRQUN0QixJQUFJLENBQUMxVyxVQUFVLENBQUNsSCxJQUFJLENBQUM2UyxLQUFLLENBQUM7TUFDN0IsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDM0wsVUFBVSxDQUFDMlcsTUFBTSxDQUFDRCxXQUFXLEVBQUUsQ0FBQyxFQUFFL0ssS0FBSyxDQUFDO01BQy9DO0lBQ0YsQ0FBQyxNQUFNO01BQ0wsSUFBSSxDQUFDM0wsVUFBVSxDQUFDbEgsSUFBSSxDQUFDNlMsS0FBSyxDQUFDO0lBQzdCO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQzFMLGlCQUFpQixFQUFFO01BQzNCMlcsY0FBYyxDQUFDLE1BQU07UUFDbkIsSUFBSSxDQUFDLElBQUksQ0FBQzNXLGlCQUFpQixFQUFFO1VBQzNCLEtBQUssSUFBSSxDQUFDNFcsWUFBWSxDQUFDLENBQUM7UUFDMUI7TUFDRixDQUFDLENBQUM7SUFDSjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVUMsbUJBQW1CQSxDQUFDQyxTQUFrQixHQUFHLEtBQUssRUFBUTtJQUM1RCxJQUFJLElBQUksQ0FBQ3BYLFNBQVMsSUFBSSxJQUFJLENBQUM4SCxRQUFRLElBQUksQ0FBQyxJQUFJLENBQUNqSSxNQUFNLENBQUN5SixLQUFLLElBQUksSUFBSSxDQUFDbEMsd0JBQXdCLEVBQUU7TUFDMUY7SUFDRjtJQUNBLElBQUksQ0FBQ0QsaUJBQWlCLEdBQUcsSUFBSTtJQUM3QixJQUFJaVEsU0FBUyxFQUFFO01BQ2IsSUFBSSxDQUFDNUkscUJBQXFCLENBQUMsQ0FBQztNQUM1QjtJQUNGO0lBQ0EsSUFBSSxDQUFDcEUsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFQSxNQUFjOE0sWUFBWUEsQ0FBQSxFQUFrQjtJQUMxQyxJQUFJLElBQUksQ0FBQzVXLGlCQUFpQixJQUFJLElBQUksQ0FBQ3dILFFBQVEsRUFBRTtJQUM3QyxJQUFJLENBQUN4SCxpQkFBaUIsR0FBRyxJQUFJO0lBQzdCLElBQUk7TUFDRixPQUFPLElBQUksQ0FBQ0QsVUFBVSxDQUFDeEQsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQ2lMLFFBQVEsRUFBRTtRQUNuRCxNQUFNa0UsS0FBSyxHQUFHLElBQUksQ0FBQzNMLFVBQVUsQ0FBQ3dQLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQzdELEtBQUssRUFBRTtRQUNaLE1BQU1xTCxTQUFTLEdBQUcsSUFBSSxDQUFDQywwQkFBMEIsQ0FBQ3RMLEtBQUssQ0FBQztRQUN4RCxJQUFJO1VBQ0YsTUFBTSxJQUFJLENBQUN1TCxXQUFXLENBQUNGLFNBQVMsQ0FBQztRQUNuQyxDQUFDLENBQUMsT0FBT2xPLEtBQUssRUFBRTtVQUNkO1VBQ0EsSUFBSSxJQUFJLENBQUNyQixRQUFRLEVBQUUsTUFBTSxDQUFDO1VBQzFCLE1BQU1wTixPQUFPLEdBQ1h5TyxLQUFLLFlBQVl5QixLQUFLLEdBQUd6QixLQUFLLENBQUN6TyxPQUFPLEdBQUcsT0FBT3lPLEtBQUssS0FBSyxRQUFRLEdBQUdBLEtBQUssR0FBRyx3QkFBd0I7VUFDdkcsSUFBSSxDQUFDdEosTUFBTSxDQUFDNEssS0FBSyxDQUFDLGdCQUFnQi9QLE9BQU8sSUFBSSxDQUFDO1FBQ2hEOztRQUVBO1FBQ0EsSUFBSSxJQUFJLENBQUNvTixRQUFRLEVBQUU7O1FBRW5CO1FBQ0E7UUFDQSxJQUFJa0UsS0FBSyxDQUFDcFEsSUFBSSxLQUFLLFFBQVEsRUFBRTtVQUMzQjtVQUNBLElBQUksSUFBSSxDQUFDaUUsTUFBTSxDQUFDeUosS0FBSyxFQUFFO1lBQ3JCLElBQUksQ0FBQ25DLGlCQUFpQixHQUFHLElBQUk7VUFDL0I7VUFDQTtRQUNGLENBQUMsTUFBTTtVQUNMLE1BQU0sSUFBSSxDQUFDcVEsS0FBSyxDQUFDLENBQUMsQ0FBQztRQUNyQjtNQUNGO01BQ0E7TUFDQTtNQUNBLElBQUksSUFBSSxDQUFDM1gsTUFBTSxDQUFDeUosS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDeEIsUUFBUSxFQUFFO1FBQ3ZDLElBQUksQ0FBQ1gsaUJBQWlCLEdBQUcsSUFBSTtRQUM3QixJQUFJLENBQUNpRCxZQUFZLENBQUMsQ0FBQztNQUNyQjtJQUNGLENBQUMsU0FBUztNQUNSLElBQUksQ0FBQzlKLGlCQUFpQixHQUFHLEtBQUs7SUFDaEM7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVZ1gsMEJBQTBCQSxDQUFDdEwsS0FBYyxFQUFXO0lBQzFELE1BQU15TCxXQUFXLEdBQUlDLE1BQTJCLElBQzlDck8sT0FBTyxDQUNMcU8sTUFBTSxJQUNKLENBQUNBLE1BQU0sQ0FBQ0MsV0FBVyxLQUNqQkQsTUFBTSxDQUFDOWIsSUFBSSxLQUFLLFVBQVUsSUFBSThiLE1BQU0sQ0FBQ2IsT0FBTyxLQUFLLFVBQVUsSUFDMURhLE1BQU0sQ0FBQzliLElBQUksS0FBSyxTQUFTLElBQUk4YixNQUFNLENBQUNiLE9BQU8sS0FBSyxTQUFVLENBQ2pFLENBQUM7SUFFSCxJQUFJLENBQUNZLFdBQVcsQ0FBQ3pMLEtBQUssQ0FBQyxFQUFFO01BQ3ZCLE9BQU9BLEtBQUs7SUFDZDtJQUVBLE9BQU8sSUFBSSxDQUFDM0wsVUFBVSxDQUFDeEQsTUFBTSxHQUFHLENBQUMsSUFBSTRhLFdBQVcsQ0FBQyxJQUFJLENBQUNwWCxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtNQUNwRSxNQUFNZ1csSUFBSSxHQUFHLElBQUksQ0FBQ2hXLFVBQVUsQ0FBQ3dQLEtBQUssQ0FBQyxDQUFFO01BQ3JDLE1BQU0rSCxjQUFjLEdBQ2xCNUwsS0FBSyxDQUFDNkMsT0FBTyxDQUFDaFMsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDbVAsS0FBSyxDQUFDNkMsT0FBTyxDQUFDa0YsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUNzQyxJQUFJLENBQUN4SCxPQUFPLENBQUNqQixVQUFVLENBQUMsSUFBSSxDQUFDO01BQzdGNUIsS0FBSyxDQUFDNkMsT0FBTyxHQUFHK0ksY0FBYyxHQUFHLEdBQUc1TCxLQUFLLENBQUM2QyxPQUFPLEtBQUt3SCxJQUFJLENBQUN4SCxPQUFPLEVBQUUsR0FBRyxHQUFHN0MsS0FBSyxDQUFDNkMsT0FBTyxHQUFHd0gsSUFBSSxDQUFDeEgsT0FBTyxFQUFFO0lBQzFHO0lBRUEsT0FBTzdDLEtBQUs7RUFDZDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsTUFBTTZMLFdBQVdBLENBQUNDLFNBQWlCLEdBQUcsR0FBRyxFQUFpQjtJQUN4RDtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUM5WCxTQUFTLElBQUksQ0FBQyxJQUFJLENBQUNNLGlCQUFpQixJQUFJLElBQUksQ0FBQ0QsVUFBVSxDQUFDeEQsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUM1RSxLQUFLLElBQUksQ0FBQ3FhLFlBQVksQ0FBQyxDQUFDO0lBQzFCO0lBRUEsTUFBTWEsS0FBSyxHQUFHaEcsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN4QixPQUFPLENBQUMsSUFBSSxDQUFDeFIsaUJBQWlCLElBQUksSUFBSSxDQUFDRCxVQUFVLENBQUN4RCxNQUFNLEdBQUcsQ0FBQyxLQUFLa1YsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQyxHQUFHaUcsS0FBSyxHQUFHRCxTQUFTLEVBQUU7TUFDL0YsTUFBTSxJQUFJLENBQUNOLEtBQUssQ0FBQyxDQUFDLENBQUM7SUFDckI7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDeFgsU0FBUyxJQUFJLElBQUksQ0FBQ0gsTUFBTSxDQUFDeUosS0FBSyxFQUFFO01BQ3hDLElBQUksQ0FBQ25DLGlCQUFpQixHQUFHLElBQUk7TUFDN0IsSUFBSSxDQUFDaUQsWUFBWSxDQUFDLENBQUM7SUFDckI7RUFDRjtFQUVBLE1BQWNtTixXQUFXQSxDQUFDdkwsS0FBYyxFQUFpQjtJQUN2RDtJQUNBO0lBQ0EsSUFBSUEsS0FBSyxDQUFDNkssT0FBTyxLQUFLLFFBQVEsSUFBSSxJQUFJLENBQUM5TyxZQUFZLEVBQUU7TUFDbkQsSUFBSSxDQUFDQSxZQUFZLEdBQUcsS0FBSztJQUMzQjtJQUVBLElBQUksSUFBSSxDQUFDL0gsU0FBUyxFQUFFO01BQ2xCLE1BQU1nWSxjQUFjLEdBQUcsSUFBSSxDQUFDcEIsYUFBYSxDQUFDNUssS0FBSyxDQUFDO01BQ2hELElBQUlnTSxjQUFjLEVBQUU7UUFDbEIsTUFBTTdaLElBQUksR0FBRzZaLGNBQWMsQ0FBQ2pFLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBR2lFLGNBQWMsR0FBRyxHQUFHQSxjQUFjLElBQUk7UUFDbkYsSUFBSSxDQUFDblksTUFBTSxDQUFDNEssS0FBSyxDQUFDdE0sSUFBSSxDQUFDO1FBQ3ZCLElBQUksQ0FBQzRJLDBCQUEwQixHQUFHNUksSUFBSSxDQUFDNFYsUUFBUSxDQUFDLElBQUksQ0FBQztNQUN2RDtNQUNBO0lBQ0Y7SUFFQSxNQUFNNEMsU0FBUyxHQUFHLElBQUksQ0FBQ0MsYUFBYSxDQUFDNUssS0FBSyxDQUFDO0lBQzNDLElBQUksQ0FBQzJLLFNBQVMsRUFBRTs7SUFFaEI7SUFDQSxNQUFNRCxTQUFTLEdBQUcsR0FBRzFLLEtBQUssQ0FBQzZLLE9BQU8sSUFBSTdLLEtBQUssQ0FBQzZDLE9BQU8sRUFBRTtJQUNyRCxJQUFJLENBQUM3QyxLQUFLLENBQUNwUSxJQUFJLEtBQUssUUFBUSxJQUFJb1EsS0FBSyxDQUFDcFEsSUFBSSxLQUFLLFVBQVUsS0FBSzhhLFNBQVMsS0FBSyxJQUFJLENBQUM1UCxvQkFBb0IsRUFBRTtNQUNyRztJQUNGO0lBQ0EsSUFBSWtGLEtBQUssQ0FBQ3BRLElBQUksS0FBSyxRQUFRLEVBQUU7TUFDM0IsSUFBSSxDQUFDa0wsb0JBQW9CLEdBQUc0UCxTQUFTO0lBQ3ZDOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNuUixZQUFZLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQzJCLFdBQVcsRUFBRTtNQUM3QyxJQUFJLENBQUNzRCxlQUFlLENBQUMsQ0FBQztJQUN4QjtJQUNBLElBQUksQ0FBQzdFLGNBQWMsR0FBRyxLQUFLO0lBRTNCLElBQUlxRyxLQUFLLENBQUNwUSxJQUFJLEtBQUssUUFBUSxJQUFJLENBQUMsSUFBSSxDQUFDbUwsMEJBQTBCLElBQUk0UCxTQUFTLENBQUN0UixJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ25GO01BQ0EsSUFBSSxDQUFDeEYsTUFBTSxDQUFDNEssS0FBSyxDQUFDLElBQUksQ0FBQztNQUN2QixJQUFJLENBQUMxRCwwQkFBMEIsR0FBRyxJQUFJO0lBQ3hDO0lBRUEsSUFBSSxDQUFDbEgsTUFBTSxDQUFDNEssS0FBSyxDQUFDa00sU0FBUyxDQUFDO0lBQzVCLElBQUksQ0FBQzVQLDBCQUEwQixHQUFHNFAsU0FBUyxDQUFDNUMsUUFBUSxDQUFDLElBQUksQ0FBQzs7SUFFMUQ7SUFDQSxJQUFJLElBQUksQ0FBQ2xVLE1BQU0sQ0FBQ3lKLEtBQUssSUFBSSxJQUFJLENBQUNySixXQUFXLElBQUksQ0FBQyxJQUFJLENBQUM2SCxRQUFRLEVBQUU7TUFDM0QsSUFBSSxDQUFDcVAsbUJBQW1CLENBQUMsSUFBSSxDQUFDO0lBQ2hDO0VBQ0Y7RUFFUVYsa0JBQWtCQSxDQUFDN2EsSUFBdUIsRUFBNkI7SUFDN0UsUUFBUUEsSUFBSTtNQUNWLEtBQUssUUFBUTtRQUNYLE9BQU8sUUFBUTtNQUNqQixLQUFLLFNBQVM7UUFDWixPQUFPLFNBQVM7TUFDbEIsS0FBSyxRQUFRO01BQ2IsS0FBSyxXQUFXO1FBQ2QsT0FBTyxRQUFRO01BQ2pCLEtBQUssTUFBTTtNQUNYLEtBQUssV0FBVztRQUNkLE9BQU8sTUFBTTtNQUNmLEtBQUssYUFBYTtRQUNoQixPQUFPLGFBQWE7TUFDdEIsS0FBSyxPQUFPO1FBQ1YsT0FBTyxPQUFPO01BQ2hCLEtBQUssTUFBTTtRQUNULE9BQU8sTUFBTTtNQUNmLEtBQUssVUFBVTtNQUNmLEtBQUssUUFBUTtNQUNiLEtBQUssS0FBSztRQUNSLE9BQU8sVUFBVTtNQUNuQixLQUFLLE9BQU87UUFDVixPQUFPLFVBQVU7TUFDbkI7UUFDRSxPQUFPLElBQUk7SUFDZjtFQUNGO0VBRVFnYixhQUFhQSxDQUFDNUssS0FBYyxFQUFVO0lBQzVDO0lBQ0EsSUFBSUEsS0FBSyxDQUFDMkwsV0FBVyxFQUFFO01BQ3JCLE9BQU8zTCxLQUFLLENBQUM2QyxPQUFPO0lBQ3RCO0lBRUEsSUFBSTdDLEtBQUssQ0FBQzZLLE9BQU8sS0FBSyxRQUFRLEVBQUU7TUFDOUI7TUFDQSxNQUFNM2QsS0FBSyxHQUFHOFMsS0FBSyxDQUFDNkMsT0FBTyxDQUFDSSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUNqUixHQUFHLENBQUNpYSxJQUFJLElBQUlBLElBQUksQ0FBQ3hDLE9BQU8sQ0FBQyxDQUFDLENBQUM7TUFDbkUsT0FBTyxHQUFHdmMsS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk7SUFDaEM7O0lBRUE7SUFDQSxRQUFRc1MsS0FBSyxDQUFDcFEsSUFBSTtNQUNoQixLQUFLLFFBQVE7UUFDWDtRQUNBLE9BQU8sR0FBR3NjLFlBQUssQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJbk0sS0FBSyxDQUFDNkMsT0FBTyxJQUFJO01BRW5ELEtBQUssU0FBUztRQUFFO1VBQ2Q7VUFDQSxJQUFJLElBQUksQ0FBQ3VKLGVBQWUsQ0FBQ3BNLEtBQUssQ0FBQzZDLE9BQU8sQ0FBQyxFQUFFO1lBQ3ZDLE9BQU8sRUFBRTtVQUNYO1VBQ0EsTUFBTXdKLE9BQU8sR0FBRyxJQUFJLENBQUNDLHNCQUFzQixDQUFDdE0sS0FBSyxDQUFDNkMsT0FBTyxDQUFDO1VBQzFELElBQUksQ0FBQ3dKLE9BQU8sSUFBSSxJQUFJLENBQUNELGVBQWUsQ0FBQ0MsT0FBTyxDQUFDLEVBQUU7WUFDN0MsT0FBTyxFQUFFO1VBQ1g7VUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDRSxtQkFBbUIsQ0FBQ0YsT0FBTyxDQUFDLEVBQUU7WUFDdEMsT0FBTyxFQUFFO1VBQ1g7VUFDQSxJQUFJLENBQUNuVixrQkFBa0IsR0FBRztZQUN4Qi9FLElBQUksRUFBRWthLE9BQU8sQ0FBQ3pULE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUNTLElBQUksQ0FBQyxDQUFDLENBQUN5SCxXQUFXLENBQUMsQ0FBQztZQUN2RG1ILEVBQUUsRUFBRWxDLElBQUksQ0FBQ0QsR0FBRyxDQUFDO1VBQ2YsQ0FBQztVQUNELE9BQU8sSUFBSSxDQUFDMEcsbUJBQW1CLENBQUNILE9BQU8sQ0FBQztRQUMxQztNQUVBLEtBQUssTUFBTTtRQUFFO1VBQ1g7VUFDQSxNQUFNeEosT0FBTyxHQUFHN0MsS0FBSyxDQUFDNkMsT0FBTyxDQUFDakssT0FBTyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUM7VUFDdEQsT0FBTyxJQUFJLENBQUM2VCxxQkFBcUIsQ0FBQzVKLE9BQU8sQ0FBQztRQUM1QztNQUVBLEtBQUssYUFBYTtRQUFFO1VBQ2xCO1VBQ0EsT0FBTyxJQUFJLENBQUM2Six1QkFBdUIsQ0FBQzFNLEtBQUssQ0FBQzZDLE9BQU8sQ0FBQztRQUNwRDtNQUVBLEtBQUssT0FBTztRQUNWLE9BQU8sSUFBSSxDQUFDOEosY0FBYyxDQUFDM00sS0FBSyxDQUFDNkMsT0FBTyxFQUFFO1VBQUUrSixLQUFLLEVBQUUsT0FBTztVQUFFQyxVQUFVLEVBQUVYLFlBQUssQ0FBQ1k7UUFBUSxDQUFDLENBQUM7TUFFMUYsS0FBSyxNQUFNO1FBQ1QsT0FBTyxJQUFJLENBQUNILGNBQWMsQ0FBQzNNLEtBQUssQ0FBQzZDLE9BQU8sRUFBRTtVQUFFK0osS0FBSyxFQUFFLE1BQU07VUFBRUMsVUFBVSxFQUFFWCxZQUFLLENBQUM1YztRQUFLLENBQUMsQ0FBQztNQUV0RixLQUFLLFFBQVE7UUFBRTtVQUNiO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBLElBQUksQ0FBQzBRLEtBQUssQ0FBQzZDLE9BQU8sRUFBRTtZQUNsQixPQUFPLEVBQUU7VUFDWDtVQUNBO1VBQ0EsSUFBSSxDQUFDMU4sc0JBQXNCLElBQUk2SyxLQUFLLENBQUM2QyxPQUFPO1VBQzVDO1VBQ0EsTUFBTWtLLFFBQVEsR0FBRyxDQUFDL00sS0FBSyxDQUFDNkMsT0FBTyxDQUFDbUssS0FBSyxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRW5jLE1BQU07VUFDMUQsSUFBSSxDQUFDdUUscUJBQXFCLElBQUkyWCxRQUFRO1VBQ3RDLE9BQU8vTSxLQUFLLENBQUM2QyxPQUFPO1FBQ3RCO01BRUEsS0FBSyxVQUFVO01BQ2Y7UUFBUztVQUNQO1VBQ0EsSUFBSSxJQUFJLENBQUN1SixlQUFlLENBQUNwTSxLQUFLLENBQUM2QyxPQUFPLENBQUMsRUFBRTtZQUN2QyxPQUFPLEVBQUU7VUFDWDtVQUNBO1VBQ0EsTUFBTW9LLE9BQU8sR0FBR2pOLEtBQUssQ0FBQzZLLE9BQU8sS0FBSyxPQUFPO1VBQ3pDLE9BQU8sSUFBSSxDQUFDOEIsY0FBYyxDQUFDM00sS0FBSyxDQUFDNkMsT0FBTyxFQUFFb0ssT0FBTyxHQUFHO1lBQUVMLEtBQUssRUFBRSxPQUFPO1lBQUVDLFVBQVUsRUFBRVgsWUFBSyxDQUFDL087VUFBTSxDQUFDLEdBQUcrUCxTQUFTLENBQUM7UUFDOUc7SUFDRjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1VkLGVBQWVBLENBQUN2SixPQUFlLEVBQVc7SUFDaEQsSUFBSSxDQUFDQSxPQUFPLElBQUlBLE9BQU8sQ0FBQ3hKLElBQUksQ0FBQyxDQUFDLENBQUN4SSxNQUFNLEtBQUssQ0FBQyxFQUFFLE9BQU8sSUFBSTtJQUV4RCxNQUFNc2MsT0FBTyxHQUFHdEssT0FBTyxDQUFDeEosSUFBSSxDQUFDLENBQUM7O0lBRTlCO0lBQ0EsSUFBSThULE9BQU8sQ0FBQ3RjLE1BQU0sSUFBSSxDQUFDLEVBQUU7TUFDdkI7TUFDQSxJQUFJLDBDQUEwQyxDQUFDeVIsSUFBSSxDQUFDNkssT0FBTyxDQUFDLEVBQUU7UUFDNUQsT0FBTyxJQUFJO01BQ2I7SUFDRjs7SUFFQTtJQUNBLE1BQU1qZ0IsS0FBSyxHQUFHMlYsT0FBTyxDQUFDSSxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pDLE1BQU1tSyxjQUFjLEdBQUdsZ0IsS0FBSyxDQUFDaWIsTUFBTSxDQUFDOEQsSUFBSSxJQUFJO01BQzFDLE1BQU1vQixXQUFXLEdBQUdwQixJQUFJLENBQUM1UyxJQUFJLENBQUMsQ0FBQztNQUMvQixPQUFPZ1UsV0FBVyxDQUFDeGMsTUFBTSxHQUFHLENBQUMsSUFBSSw0Q0FBNEMsQ0FBQ3lSLElBQUksQ0FBQytLLFdBQVcsQ0FBQztJQUNqRyxDQUFDLENBQUM7SUFDRjtJQUNBLE1BQU1DLGFBQWEsR0FBR3BnQixLQUFLLENBQUNpYixNQUFNLENBQUNvRixDQUFDLElBQUlBLENBQUMsQ0FBQ2xVLElBQUksQ0FBQyxDQUFDLENBQUN4SSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQzVELElBQUl5YyxhQUFhLENBQUN6YyxNQUFNLEdBQUcsQ0FBQyxJQUFJdWMsY0FBYyxDQUFDdmMsTUFBTSxLQUFLeWMsYUFBYSxDQUFDemMsTUFBTSxFQUFFO01BQzlFLE9BQU8sSUFBSTtJQUNiOztJQUVBO0lBQ0EsSUFBSWdTLE9BQU8sQ0FBQ2pCLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDaUIsT0FBTyxDQUFDakIsVUFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUNpQixPQUFPLENBQUNqQixVQUFVLENBQUMsSUFBSSxDQUFDLEVBQUU7TUFDeEYsT0FBTyxJQUFJO0lBQ2I7O0lBRUE7SUFDQSxJQUFJaUIsT0FBTyxDQUFDOUIsUUFBUSxDQUFDLGVBQWUsQ0FBQyxJQUFJOEIsT0FBTyxDQUFDOUIsUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO01BQ3RFLE9BQU8sSUFBSTtJQUNiOztJQUVBO0lBQ0EsSUFBSThCLE9BQU8sQ0FBQ2pCLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSWlCLE9BQU8sQ0FBQzlCLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSThCLE9BQU8sQ0FBQzlCLFFBQVEsQ0FBQyxNQUFNLENBQUMsRUFBRTtNQUNwRixPQUFPLElBQUk7SUFDYjs7SUFFQTtJQUNBLElBQUk4QixPQUFPLENBQUNoUyxNQUFNLEdBQUcsRUFBRSxJQUFJLHdCQUF3QixDQUFDeVIsSUFBSSxDQUFDTyxPQUFPLENBQUMsRUFBRTtNQUNqRSxPQUFPLElBQUk7SUFDYjs7SUFFQTtJQUNBLE1BQU0ySyxlQUFlLEdBQUd0Z0IsS0FBSyxDQUFDaWIsTUFBTSxDQUFDOEQsSUFBSSxJQUFJO01BQzNDLE1BQU1vQixXQUFXLEdBQUdwQixJQUFJLENBQUM1UyxJQUFJLENBQUMsQ0FBQztNQUMvQixJQUFJLENBQUNnVSxXQUFXLEVBQUUsT0FBTyxLQUFLO01BQzlCO01BQ0EsTUFBTUksUUFBUSxHQUFHLENBQUNKLFdBQVcsQ0FBQ0wsS0FBSyxDQUFDLGNBQWMsQ0FBQyxJQUFJLEVBQUUsRUFBRW5jLE1BQU07TUFDakUsT0FBT3djLFdBQVcsQ0FBQ3hjLE1BQU0sR0FBRyxDQUFDLElBQUk0YyxRQUFRLEdBQUdKLFdBQVcsQ0FBQ3hjLE1BQU0sSUFBSSxHQUFHO0lBQ3ZFLENBQUMsQ0FBQztJQUNGO0lBQ0EsSUFBSTNELEtBQUssQ0FBQzJELE1BQU0sR0FBRyxDQUFDLElBQUkyYyxlQUFlLENBQUMzYyxNQUFNLEdBQUczRCxLQUFLLENBQUMyRCxNQUFNLEdBQUcsR0FBRyxFQUFFO01BQ25FLE9BQU8sSUFBSTtJQUNiOztJQUVBO0lBQ0EsTUFBTTZjLFVBQVUsR0FBRyxDQUFDN0ssT0FBTyxDQUFDbUssS0FBSyxDQUFDLFdBQVcsQ0FBQyxJQUFJLEVBQUUsRUFBRW5jLE1BQU07SUFDNUQsTUFBTThjLFVBQVUsR0FBRzlLLE9BQU8sQ0FBQ2pLLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUMvSCxNQUFNO0lBQ3BELElBQUk4YyxVQUFVLEdBQUcsRUFBRSxJQUFJRCxVQUFVLEdBQUdDLFVBQVUsR0FBRyxHQUFHLEVBQUU7TUFDcEQsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUNmO0lBRUEsT0FBTyxLQUFLO0VBQ2Q7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVUMseUJBQXlCQSxDQUFDL0ssT0FBZSxFQUFVO0lBQ3pELElBQUksQ0FBQ0EsT0FBTyxFQUFFLE9BQU8sRUFBRTs7SUFFdkI7SUFDQSxNQUFNM1YsS0FBSyxHQUFHMlYsT0FBTyxDQUFDSSxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pDLE1BQU00SyxVQUFvQixHQUFHLEVBQUU7SUFFL0IsS0FBSyxNQUFNNUIsSUFBSSxJQUFJL2UsS0FBSyxFQUFFO01BQ3hCLE1BQU1pZ0IsT0FBTyxHQUFHbEIsSUFBSSxDQUFDNVMsSUFBSSxDQUFDLENBQUM7O01BRTNCO01BQ0EsSUFBSXdVLFVBQVUsQ0FBQ2hkLE1BQU0sS0FBSyxDQUFDLElBQUksQ0FBQ3NjLE9BQU8sRUFBRTs7TUFFekM7TUFDQTtNQUNBLElBQUksZ0JBQWdCLENBQUM3SyxJQUFJLENBQUM2SyxPQUFPLENBQUMsRUFBRTtNQUNwQyxJQUFJLFlBQVksQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUMxQyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUN4QyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUN4QyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUN4QyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUN4QyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQztNQUN4QyxJQUFJLFVBQVUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFLFNBQVMsQ0FBQzs7TUFFeEM7TUFDQSxJQUFJLHVCQUF1QixDQUFDN0ssSUFBSSxDQUFDNkssT0FBTyxDQUFDLElBQUlBLE9BQU8sQ0FBQ3RjLE1BQU0sR0FBRyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUN5UixJQUFJLENBQUM2SyxPQUFPLENBQUMsRUFBRTs7TUFFN0Y7TUFDQSxNQUFNVyxXQUFXLEdBQUcsQ0FBQ1gsT0FBTyxDQUFDSCxLQUFLLENBQUMsY0FBYyxDQUFDLElBQUksRUFBRSxFQUFFbmMsTUFBTTtNQUNoRSxJQUFJc2MsT0FBTyxDQUFDdGMsTUFBTSxHQUFHLENBQUMsSUFBSXNjLE9BQU8sQ0FBQ3RjLE1BQU0sR0FBRyxFQUFFLElBQUlpZCxXQUFXLEdBQUdYLE9BQU8sQ0FBQ3RjLE1BQU0sR0FBRyxHQUFHLEVBQUU7O01BRXJGO01BQ0EsSUFBSXNjLE9BQU8sQ0FBQ3RjLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUN5UixJQUFJLENBQUM2SyxPQUFPLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFO1FBQ25GO1FBQ0EsSUFBSSxDQUFDLHNCQUFzQixDQUFDN0ssSUFBSSxDQUFDNkssT0FBTyxDQUFDLEVBQUU7TUFDN0M7O01BRUE7TUFDQSxJQUFJLGNBQWMsQ0FBQzdLLElBQUksQ0FBQzZLLE9BQU8sQ0FBQyxFQUFFOztNQUVsQztNQUNBLElBQUksVUFBVSxDQUFDN0ssSUFBSSxDQUFDNkssT0FBTyxDQUFDLEVBQUU7TUFFOUJVLFVBQVUsQ0FBQzFnQixJQUFJLENBQUM4ZSxJQUFJLENBQUM7SUFDdkI7O0lBRUE7SUFDQSxPQUFPNEIsVUFBVSxDQUFDaGQsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDZ2QsVUFBVSxDQUFDQSxVQUFVLENBQUNoZCxNQUFNLEdBQUcsQ0FBQyxDQUFDLEVBQUV3SSxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQzFFd1UsVUFBVSxDQUFDRSxHQUFHLENBQUMsQ0FBQztJQUNsQjtJQUVBLE9BQU9GLFVBQVUsQ0FBQ25nQixJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMyTCxJQUFJLENBQUMsQ0FBQztFQUNyQztFQUVRaVQsc0JBQXNCQSxDQUFDekosT0FBZSxFQUFpQjtJQUM3RCxNQUFNbUcsVUFBVSxHQUFHbkcsT0FBTyxDQUFDakssT0FBTyxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsQ0FBQ0EsT0FBTyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLENBQUM7SUFDN0UsSUFBSSxDQUFDMlAsVUFBVSxFQUFFLE9BQU8sSUFBSTtJQUU1QixNQUFNZ0YsT0FBTyxHQUNYaEYsVUFBVSxDQUFDblksTUFBTSxHQUFHLElBQUksQ0FBQ21HLHdCQUF3QixHQUM3Q2dTLFVBQVUsQ0FBQ3ZRLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDekIsd0JBQXdCLENBQUMsR0FDbERnUyxVQUFVO0lBRWhCLE1BQU1pRixXQUFXLEdBQUcsSUFBSSxDQUFDbFgsd0JBQXdCLEdBQUcsQ0FBQztJQUNyRCxNQUFNbVgsUUFBUSxHQUFHRixPQUFPLENBQ3JCL0ssS0FBSyxDQUFDLElBQUksQ0FBQyxDQUNYa0wsT0FBTyxDQUFDbEMsSUFBSSxJQUFJQSxJQUFJLENBQUNoSixLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FDNUNqUixHQUFHLENBQUNpYSxJQUFJLElBQUlBLElBQUksQ0FBQ3JULE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUMzRDhPLE1BQU0sQ0FBQzlLLE9BQU8sQ0FBQztJQUVsQixJQUFJNlEsUUFBUSxDQUFDcmQsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN6QixPQUFPLElBQUk7SUFDYjtJQUVBLE1BQU11ZCxJQUFJLEdBQUcsSUFBSXJaLEdBQUcsQ0FBUyxDQUFDO0lBQzlCLE1BQU1zWixPQUFpQixHQUFHLEVBQUU7SUFDNUIsS0FBSyxNQUFNQyxPQUFPLElBQUlKLFFBQVEsRUFBRTtNQUM5QixNQUFNSyxpQkFBaUIsR0FBR0QsT0FBTyxDQUFDMVYsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7TUFDdEQsTUFBTXNKLEdBQUcsR0FBR3FNLGlCQUFpQixDQUFDek4sV0FBVyxDQUFDLENBQUM7TUFDM0MsSUFBSXNOLElBQUksQ0FBQzdoQixHQUFHLENBQUMyVixHQUFHLENBQUMsRUFBRTtRQUNqQjtNQUNGO01BQ0FrTSxJQUFJLENBQUNJLEdBQUcsQ0FBQ3RNLEdBQUcsQ0FBQztNQUNibU0sT0FBTyxDQUFDbGhCLElBQUksQ0FBQ29oQixpQkFBaUIsQ0FBQztNQUMvQixJQUFJRixPQUFPLENBQUN4ZCxNQUFNLElBQUlvZCxXQUFXLEVBQUU7UUFDakM7TUFDRjtJQUNGO0lBRUEsSUFBSUksT0FBTyxDQUFDeGQsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN4QixPQUFPLElBQUk7SUFDYjtJQUVBLE1BQU00ZCxXQUFXLEdBQUcsSUFBSSxDQUFDQywyQkFBMkIsQ0FBQ0wsT0FBTyxDQUFDO0lBQzdELElBQUlJLFdBQVcsQ0FBQzVkLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDNUIsT0FBTyxJQUFJO0lBQ2I7SUFFQSxNQUFNOGQsZ0JBQWdCLEdBQUdGLFdBQVcsQ0FBQ2hXLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDMUIsd0JBQXdCLENBQUM7SUFDNUUsTUFBTTZYLFFBQVEsR0FBR0QsZ0JBQWdCLENBQUMzYyxHQUFHLENBQUNpYSxJQUFJLElBQUksSUFBSSxDQUFDNEMscUJBQXFCLENBQUM1QyxJQUFJLENBQUMsQ0FBQztJQUUvRSxPQUFPMkMsUUFBUSxDQUFDbGhCLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDNUI7RUFFUW1oQixxQkFBcUJBLENBQUM1QyxJQUFZLEVBQVU7SUFDbEQsSUFBSSxzQkFBc0IsQ0FBQzNKLElBQUksQ0FBQzJKLElBQUksQ0FBQyxFQUFFO01BQ3JDLE9BQU9BLElBQUk7SUFDYjtJQUNBLE9BQU8sS0FBS0EsSUFBSSxFQUFFO0VBQ3BCO0VBRVE2QyxzQkFBc0JBLENBQUM3QyxJQUFZLEVBQVc7SUFDcEQsT0FDRSxzREFBc0QsQ0FBQzNKLElBQUksQ0FBQzJKLElBQUksQ0FBQyxJQUNqRSxVQUFVLENBQUMzSixJQUFJLENBQUMySixJQUFJLENBQUMsSUFDckJBLElBQUksQ0FBQ2xMLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFDbkJrTCxJQUFJLENBQUNsTCxRQUFRLENBQUMsR0FBRyxDQUFDLElBQ2xCa0wsSUFBSSxDQUFDbEwsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUNuQixrSEFBa0gsQ0FBQ3VCLElBQUksQ0FBQzJKLElBQUksQ0FBQztFQUVqSTtFQUVReUMsMkJBQTJCQSxDQUFDUixRQUFrQixFQUFZO0lBQ2hFLElBQUksQ0FBQ0EsUUFBUSxDQUFDcmQsTUFBTSxFQUFFO01BQ3BCLE9BQU8sRUFBRTtJQUNYO0lBRUEsTUFBTWtlLE1BQU0sR0FBR2IsUUFBUSxDQUFDbGMsR0FBRyxDQUFDLENBQUNHLElBQUksRUFBRTZjLEtBQUssTUFBTTtNQUM1QzdjLElBQUk7TUFDSjZjLEtBQUs7TUFDTEMsS0FBSyxFQUFFLElBQUksQ0FBQ0Msb0JBQW9CLENBQUMvYyxJQUFJO0lBQ3ZDLENBQUMsQ0FBQyxDQUFDO0lBRUgsTUFBTWdkLFNBQVMsR0FBR0osTUFBTSxDQUFDM0gsSUFBSSxDQUFDZ0ksSUFBSSxJQUFJQSxJQUFJLENBQUNILEtBQUssR0FBRyxDQUFDLENBQUM7SUFDckQsSUFBSSxDQUFDRSxTQUFTLEVBQUU7TUFDZCxPQUFPakIsUUFBUTtJQUNqQjtJQUVBYSxNQUFNLENBQUNNLElBQUksQ0FBQyxDQUFDQyxDQUFDLEVBQUVDLENBQUMsS0FBSztNQUNwQixJQUFJQSxDQUFDLENBQUNOLEtBQUssS0FBS0ssQ0FBQyxDQUFDTCxLQUFLLEVBQUUsT0FBT00sQ0FBQyxDQUFDTixLQUFLLEdBQUdLLENBQUMsQ0FBQ0wsS0FBSztNQUNqRCxPQUFPSyxDQUFDLENBQUNOLEtBQUssR0FBR08sQ0FBQyxDQUFDUCxLQUFLO0lBQzFCLENBQUMsQ0FBQztJQUVGLE9BQU9ELE1BQU0sQ0FBQy9jLEdBQUcsQ0FBQ29kLElBQUksSUFBSUEsSUFBSSxDQUFDamQsSUFBSSxDQUFDO0VBQ3RDO0VBRVErYyxvQkFBb0JBLENBQUNqRCxJQUFZLEVBQVU7SUFDakQsSUFBSWdELEtBQUssR0FBRyxDQUFDO0lBQ2IsTUFBTU8sS0FBSyxHQUFHdkQsSUFBSSxDQUFDbkwsV0FBVyxDQUFDLENBQUM7SUFFaEMsSUFBSSxJQUFJLENBQUNnTyxzQkFBc0IsQ0FBQzdDLElBQUksQ0FBQyxFQUFFO01BQ3JDZ0QsS0FBSyxJQUFJLENBQUM7SUFDWjtJQUVBLE1BQU1RLGNBQWMsR0FBRyxDQUNyQixNQUFNLEVBQUUsU0FBUyxFQUFFLFFBQVEsRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQ2pFLGFBQWEsRUFBRSxZQUFZLEVBQUUsVUFBVSxFQUFFLFNBQVMsRUFBRSxLQUFLLEVBQUUsT0FBTyxFQUNsRSxNQUFNLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRSxLQUFLLEVBQy9ELE1BQU0sRUFBRSxNQUFNLEVBQUUsV0FBVyxFQUFFLFdBQVcsQ0FDekM7SUFDRCxJQUFJQSxjQUFjLENBQUNySSxJQUFJLENBQUNzSSxPQUFPLElBQUlGLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQzJPLE9BQU8sQ0FBQyxDQUFDLEVBQUU7TUFDM0RULEtBQUssSUFBSSxDQUFDO0lBQ1o7SUFFQSxJQUFJLFVBQVUsQ0FBQzNNLElBQUksQ0FBQzJKLElBQUksQ0FBQyxFQUFFO01BQ3pCZ0QsS0FBSyxJQUFJLENBQUM7SUFDWjtJQUVBLElBQUksbURBQW1ELENBQUMzTSxJQUFJLENBQUMySixJQUFJLENBQUMsRUFBRTtNQUNsRWdELEtBQUssSUFBSSxDQUFDO0lBQ1o7SUFFQSxJQUFJaEQsSUFBSSxDQUFDcGIsTUFBTSxHQUFHLEdBQUcsRUFBRTtNQUNyQm9lLEtBQUssSUFBSSxDQUFDO0lBQ1o7SUFFQSxPQUFPQSxLQUFLO0VBQ2Q7RUFFUTFDLG1CQUFtQkEsQ0FBQzFKLE9BQWUsRUFBVztJQUNwRCxNQUFNbUcsVUFBVSxHQUFHbkcsT0FBTyxDQUFDakssT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLENBQUM7SUFDdEQsSUFBSSxDQUFDMlAsVUFBVSxFQUFFO01BQ2YsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxNQUFNbEQsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLE1BQU02SixlQUFlLEdBQUczRyxVQUFVLENBQUNsSSxXQUFXLENBQUMsQ0FBQzs7SUFFaEQ7SUFDQSxJQUFJLElBQUksQ0FBQzVKLGtCQUFrQixJQUFJLElBQUksQ0FBQ0Esa0JBQWtCLENBQUMvRSxJQUFJLEtBQUt3ZCxlQUFlLEVBQUU7TUFDL0UsSUFBSTdKLEdBQUcsR0FBRyxJQUFJLENBQUM1TyxrQkFBa0IsQ0FBQytRLEVBQUUsR0FBRyxJQUFJLENBQUNoUixvQkFBb0IsRUFBRTtRQUNoRSxPQUFPLEtBQUs7TUFDZDtJQUNGOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNDLGtCQUFrQixFQUFFO01BQzNCLE1BQU13UyxRQUFRLEdBQUcsSUFBSSxDQUFDeFMsa0JBQWtCLENBQUMvRSxJQUFJO01BQzdDLE1BQU1nRyxPQUFPLEdBQUd3WCxlQUFlOztNQUUvQjtNQUNBLE1BQU1DLGFBQWEsR0FBR2xHLFFBQVEsQ0FBQ3pHLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQ2tGLE1BQU0sQ0FBQzBILENBQUMsSUFBSUEsQ0FBQyxDQUFDaGYsTUFBTSxHQUFHLENBQUMsQ0FBQztNQUNyRSxNQUFNaWYsWUFBWSxHQUFHM1gsT0FBTyxDQUFDOEssS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDa0YsTUFBTSxDQUFDMEgsQ0FBQyxJQUFJQSxDQUFDLENBQUNoZixNQUFNLEdBQUcsQ0FBQyxDQUFDO01BRW5FLElBQUkrZSxhQUFhLENBQUMvZSxNQUFNLEdBQUcsQ0FBQyxJQUFJaWYsWUFBWSxDQUFDamYsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUN2RCxNQUFNa2YsV0FBVyxHQUFHRCxZQUFZLENBQUMzSCxNQUFNLENBQUM2SCxJQUFJLElBQUlKLGFBQWEsQ0FBQzdPLFFBQVEsQ0FBQ2lQLElBQUksQ0FBQyxDQUFDO1FBQzdFLE1BQU1DLFVBQVUsR0FBR0YsV0FBVyxDQUFDbGYsTUFBTSxHQUFHN0MsSUFBSSxDQUFDK0osR0FBRyxDQUFDNlgsYUFBYSxDQUFDL2UsTUFBTSxFQUFFaWYsWUFBWSxDQUFDamYsTUFBTSxDQUFDOztRQUUzRjtRQUNBLElBQUlvZixVQUFVLEdBQUcsR0FBRyxJQUFJbkssR0FBRyxHQUFHLElBQUksQ0FBQzVPLGtCQUFrQixDQUFDK1EsRUFBRSxHQUFHLElBQUksQ0FBQ2hSLG9CQUFvQixFQUFFO1VBQ3BGLE9BQU8sS0FBSztRQUNkO01BQ0Y7SUFDRjs7SUFFQTtJQUNBLE1BQU1pWixTQUFTLEdBQUdQLGVBQWUsQ0FBQzFNLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQ2tGLE1BQU0sQ0FBQzBILENBQUMsSUFBSUEsQ0FBQyxDQUFDaGYsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDQSxNQUFNO0lBQy9FLElBQUlxZixTQUFTLEdBQUcsQ0FBQyxJQUFJUCxlQUFlLENBQUM5ZSxNQUFNLEdBQUcsRUFBRSxFQUFFO01BQ2hEO01BQ0EsT0FBTyxLQUFLO0lBQ2Q7O0lBRUE7SUFDQSxNQUFNc2YsbUJBQW1CLEdBQUcsQ0FDMUIsMkVBQTJFLEVBQzNFLCtFQUErRSxFQUMvRSw0QkFBNEIsRUFDNUIsNEJBQTRCLEVBQzVCLDhCQUE4QixFQUM5QiwwQkFBMEIsRUFDMUIsK0JBQStCLEVBQy9CLGtEQUFrRCxDQUNuRDtJQUVELEtBQUssTUFBTUMsT0FBTyxJQUFJRCxtQkFBbUIsRUFBRTtNQUN6QyxJQUFJQyxPQUFPLENBQUM5TixJQUFJLENBQUMwRyxVQUFVLENBQUMsRUFBRTtRQUM1QixPQUFPLEtBQUs7TUFDZDtJQUNGO0lBRUEsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDVXFILHFCQUFxQkEsQ0FBQ3hOLE9BQWUsRUFBVTtJQUNyRCxNQUFNeU4sTUFBTSxHQUFHLEdBQUc7SUFDbEIsTUFBTTFLLFFBQVEsR0FBRzVYLElBQUksQ0FBQytKLEdBQUcsQ0FBQyxFQUFFLEVBQUUvSixJQUFJLENBQUNnSyxHQUFHLENBQUMsSUFBSSxDQUFDNk4sU0FBUyxDQUFDLENBQUMsR0FBRyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLE1BQU0zWSxLQUFLLEdBQUcyVixPQUFPLENBQUNJLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakMsTUFBTS9KLE1BQWdCLEdBQUcsRUFBRTtJQUUzQixLQUFLLElBQUlxWCxPQUFPLEdBQUcsQ0FBQyxFQUFFQSxPQUFPLEdBQUdyakIsS0FBSyxDQUFDMkQsTUFBTSxFQUFFMGYsT0FBTyxFQUFFLEVBQUU7TUFDdkQsTUFBTXRFLElBQUksR0FBRy9lLEtBQUssQ0FBQ3FqQixPQUFPLENBQUU7TUFDNUIsSUFBSSxDQUFDdEUsSUFBSSxDQUFDNVMsSUFBSSxDQUFDLENBQUMsRUFBRTtRQUNoQkgsTUFBTSxDQUFDL0wsSUFBSSxDQUFDLEVBQUUsQ0FBQztRQUNmO01BQ0Y7O01BRUE7TUFDQSxNQUFNcWpCLEtBQUssR0FBR3ZFLElBQUksQ0FBQ2hKLEtBQUssQ0FBQyxPQUFPLENBQUM7TUFDakMsSUFBSXdOLFdBQVcsR0FBRyxFQUFFO01BRXBCLEtBQUssTUFBTVQsSUFBSSxJQUFJUSxLQUFLLEVBQUU7UUFDeEIsSUFBSSxDQUFDQyxXQUFXLEdBQUdULElBQUksRUFBRW5mLE1BQU0sR0FBRytVLFFBQVEsSUFBSTZLLFdBQVcsQ0FBQ3BYLElBQUksQ0FBQyxDQUFDLEVBQUU7VUFDaEU7VUFDQSxNQUFNcVgsTUFBTSxHQUFHeFgsTUFBTSxDQUFDckksTUFBTSxLQUFLLENBQUMsSUFBSTBmLE9BQU8sS0FBSyxDQUFDLEdBQUcsR0FBR0QsTUFBTSxHQUFHLEdBQUcsSUFBSTtVQUN6RXBYLE1BQU0sQ0FBQy9MLElBQUksQ0FBQyxHQUFHdWpCLE1BQU0sR0FBR0QsV0FBVyxDQUFDaEgsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDO1VBQ2hEZ0gsV0FBVyxHQUFHVCxJQUFJLENBQUNXLFNBQVMsQ0FBQyxDQUFDO1FBQ2hDLENBQUMsTUFBTTtVQUNMRixXQUFXLElBQUlULElBQUk7UUFDckI7TUFDRjtNQUVBLElBQUlTLFdBQVcsQ0FBQ3BYLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDdEIsTUFBTXFYLE1BQU0sR0FBR3hYLE1BQU0sQ0FBQ3JJLE1BQU0sS0FBSyxDQUFDLElBQUkwZixPQUFPLEtBQUssQ0FBQyxHQUFHLEdBQUdELE1BQU0sR0FBRyxHQUFHLElBQUk7UUFDekVwWCxNQUFNLENBQUMvTCxJQUFJLENBQUMsR0FBR3VqQixNQUFNLEdBQUdELFdBQVcsQ0FBQ2hILE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztNQUNsRDtJQUNGO0lBRUEsT0FBT3ZRLE1BQU0sQ0FBQ3hMLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJO0VBQ2pDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVWtqQixjQUFjQSxDQUFDL04sT0FBZSxFQUFVO0lBQzlDLE1BQU15TixNQUFNLEdBQUcsR0FBRztJQUNsQjtJQUNBLE1BQU10RCxLQUFLLEdBQUduSyxPQUFPLENBQUNtSyxLQUFLLENBQUMsa0JBQWtCLENBQUM7SUFDL0MsSUFBSSxDQUFDQSxLQUFLLEVBQUU7TUFDVjtNQUNBLE1BQU02RCxTQUFTLEdBQUdoTyxPQUFPLENBQUNtSyxLQUFLLENBQUMsUUFBUSxDQUFDO01BQ3pDLElBQUk2RCxTQUFTLEVBQUU7UUFDYixPQUFPLEdBQUdQLE1BQU0sSUFBSXBFLFlBQUssQ0FBQzRFLFVBQVUsQ0FBQ2hsQixPQUFPLENBQUMsSUFBSStrQixTQUFTLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJO01BQ3ZFO01BQ0EsT0FBTyxHQUFHUCxNQUFNLElBQUl6TixPQUFPLElBQUk7SUFDakM7SUFFQSxNQUFNa08sUUFBUSxHQUFHL0QsS0FBSyxDQUFDLENBQUMsQ0FBQztJQUN6QixNQUFNZ0UsT0FBTyxHQUFHaEUsS0FBSyxDQUFDLENBQUMsQ0FBRTtJQUN6QixNQUFNcEgsUUFBUSxHQUFHNVgsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDLElBQUksQ0FBQzdELElBQUksR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDOztJQUU1QztJQUNBLE1BQU11YyxNQUFNLEdBQUcsR0FBR0osTUFBTSxJQUFJcEUsWUFBSyxDQUFDNEUsVUFBVSxDQUFDaGxCLE9BQU8sQ0FBQyxJQUFJaWxCLFFBQVEsR0FBRyxDQUFDLEdBQUc7SUFDeEUsTUFBTUUsU0FBUyxHQUFHRixRQUFRLENBQUVsZ0IsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLE1BQU1xZ0IsTUFBTSxHQUFHLEdBQUcsQ0FBQzVqQixNQUFNLENBQUMyakIsU0FBUyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUM7O0lBRTFDO0lBQ0EsTUFBTWhSLElBQUksR0FBRyxJQUFJLENBQUNrUixhQUFhLENBQUNILE9BQU8sQ0FBQztJQUN4QyxJQUFJL1EsSUFBSSxDQUFDcFAsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUNyQixPQUFPLEdBQUc2ZixNQUFNLENBQUNqSCxPQUFPLENBQUMsQ0FBQyxJQUFJO0lBQ2hDO0lBRUEsTUFBTXZjLEtBQWUsR0FBRyxFQUFFO0lBQzFCLElBQUl1akIsV0FBVyxHQUFHQyxNQUFNO0lBRXhCLEtBQUssSUFBSXRrQixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUc2VCxJQUFJLENBQUNwUCxNQUFNLEVBQUV6RSxDQUFDLEVBQUUsRUFBRTtNQUNwQyxNQUFNZ2xCLEdBQUcsR0FBR25SLElBQUksQ0FBQzdULENBQUMsQ0FBRTtNQUNwQixNQUFNaWxCLE9BQU8sR0FBRyxHQUFHbkYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUNILEdBQUcsQ0FBQ2xQLEdBQUcsR0FBRyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNzUCxjQUFjLENBQUNKLEdBQUcsQ0FBQ2xQLEdBQUcsRUFBRWtQLEdBQUcsQ0FBQ0ssS0FBSyxDQUFDLEVBQUU7TUFDN0YsTUFBTUMsU0FBUyxHQUFHdGxCLENBQUMsR0FBRzZULElBQUksQ0FBQ3BQLE1BQU0sR0FBRyxDQUFDLEdBQUcsSUFBSSxHQUFHLEVBQUU7O01BRWpEO01BQ0EsTUFBTThnQixRQUFRLEdBQUdsQixXQUFXLEdBQUdZLE9BQU8sR0FBR0ssU0FBUztNQUNsRCxJQUFJLElBQUksQ0FBQ0UsU0FBUyxDQUFDRCxRQUFRLENBQUMsQ0FBQzlnQixNQUFNLEdBQUcrVSxRQUFRLElBQUk2SyxXQUFXLEtBQUtDLE1BQU0sRUFBRTtRQUN4RXhqQixLQUFLLENBQUNDLElBQUksQ0FBQ3NqQixXQUFXLENBQUNoSCxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQ2pDZ0gsV0FBVyxHQUFHUyxNQUFNLEdBQUdHLE9BQU8sR0FBR0ssU0FBUztNQUM1QyxDQUFDLE1BQU07UUFDTGpCLFdBQVcsSUFBSVksT0FBTyxHQUFHSyxTQUFTO01BQ3BDO0lBQ0Y7SUFFQSxJQUFJakIsV0FBVyxDQUFDcFgsSUFBSSxDQUFDLENBQUMsRUFBRTtNQUN0Qm5NLEtBQUssQ0FBQ0MsSUFBSSxDQUFDc2pCLFdBQVcsQ0FBQ2hILE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDbkM7SUFFQSxPQUFPdmMsS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSTtFQUNoQzs7RUFFQTtBQUNGO0FBQ0E7RUFDVXlqQixhQUFhQSxDQUFDSCxPQUFlLEVBQXlDO0lBQzVFLE1BQU0vUSxJQUEyQyxHQUFHLEVBQUU7SUFDdEQ7SUFDQSxNQUFNNFIsS0FBSyxHQUFHLHNDQUFzQztJQUNwRCxJQUFJN0UsS0FBSztJQUNULE9BQU8sQ0FBQ0EsS0FBSyxHQUFHNkUsS0FBSyxDQUFDQyxJQUFJLENBQUNkLE9BQU8sQ0FBQyxNQUFNLElBQUksRUFBRTtNQUM3Qy9RLElBQUksQ0FBQzlTLElBQUksQ0FBQztRQUFFK1UsR0FBRyxFQUFFOEssS0FBSyxDQUFDLENBQUMsQ0FBRTtRQUFFeUUsS0FBSyxFQUFFekUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFFM1QsSUFBSSxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQ3hEO0lBQ0EsT0FBTzRHLElBQUk7RUFDYjs7RUFFQTtBQUNGO0FBQ0E7RUFDVXVSLGNBQWNBLENBQUN0UCxHQUFXLEVBQUV1UCxLQUFhLEVBQVU7SUFDekQ7SUFDQSxNQUFNTSxRQUFRLEdBQUdOLEtBQUssQ0FBQzdQLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSTZQLEtBQUssQ0FBQzFKLFFBQVEsQ0FBQyxHQUFHLENBQUM7SUFDN0QsTUFBTWlLLEtBQUssR0FBR0QsUUFBUSxHQUFHTixLQUFLLENBQUNoWixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEdBQUdnWixLQUFLO0lBRW5ELE1BQU1RLFFBQVEsR0FBRy9QLEdBQUcsQ0FBQ3BCLFdBQVcsQ0FBQyxDQUFDO0lBQ2xDLE1BQU1vUixjQUFjLEdBQ2xCRCxRQUFRLENBQUNsUixRQUFRLENBQUMsTUFBTSxDQUFDLElBQ3pCa1IsUUFBUSxLQUFLLE1BQU0sSUFDbkJBLFFBQVEsS0FBSyxTQUFTLElBQ3RCQSxRQUFRLEtBQUssT0FBTyxJQUNwQkEsUUFBUSxLQUFLLFNBQVMsSUFDdEJBLFFBQVEsS0FBSyxLQUFLOztJQUVwQjtJQUNBLE1BQU1FLE1BQU0sR0FBRyxFQUFFO0lBQ2pCLE1BQU1DLFNBQVMsR0FBR0YsY0FBYyxJQUFJRixLQUFLLENBQUNuaEIsTUFBTSxJQUFJc2hCLE1BQU0sR0FBR0gsS0FBSyxHQUFHQSxLQUFLLENBQUN2WixLQUFLLENBQUMsQ0FBQyxFQUFFMFosTUFBTSxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUs7SUFFdkcsT0FBT0osUUFBUSxHQUFHLElBQUlLLFNBQVMsR0FBRyxHQUFHQSxTQUFTO0VBQ2hEOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1VDLGdCQUFnQkEsQ0FBQ3hQLE9BQWUsRUFBVTtJQUNoRDtJQUNBLE1BQU15UCxZQUFZLEdBQUd6UCxPQUFPLENBQUNtSyxLQUFLLENBQUMsa0dBQWtHLENBQUM7SUFDdEksSUFBSXNGLFlBQVksRUFBRTtNQUNoQixPQUFPLEtBQUtwRyxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBSzFPLE9BQU8sSUFBSXFKLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLG9CQUFvQixDQUFDLElBQUk7SUFDekY7O0lBRUE7SUFDQSxNQUFNcmtCLEtBQUssR0FBRzJWLE9BQU8sQ0FBQ0ksS0FBSyxDQUFDLElBQUksQ0FBQztJQUNqQyxJQUFJL1YsS0FBSyxDQUFDMkQsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUNwQixNQUFNMGhCLE9BQU8sR0FBR3JsQixLQUFLLENBQUN1TCxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDL0ssSUFBSSxDQUFDLElBQUksQ0FBQztNQUM1QyxPQUFPLEtBQUt3ZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBS2dCLE9BQU8sT0FBT3JHLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU9ya0IsS0FBSyxDQUFDMkQsTUFBTSxHQUFHLENBQUMsZ0NBQWdDLENBQUMsSUFBSTtJQUMvSDtJQUVBLE9BQU8sS0FBS3FiLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLMU8sT0FBTyxJQUFJO0VBQ2pEOztFQUVBO0FBQ0Y7QUFDQTtFQUNVNEoscUJBQXFCQSxDQUFDNUosT0FBZSxFQUFVO0lBQ3JELE1BQU15TixNQUFNLEdBQUcsR0FBRztJQUNsQjtJQUNBLE1BQU10RCxLQUFLLEdBQUduSyxPQUFPLENBQUNtSyxLQUFLLENBQUMsMEJBQTBCLENBQUM7SUFDdkQsSUFBSSxDQUFDQSxLQUFLLEVBQUU7TUFDVixPQUFPLEdBQUdzRCxNQUFNLElBQUl6TixPQUFPLElBQUk7SUFDakM7SUFFQSxNQUFNa08sUUFBUSxHQUFHL0QsS0FBSyxDQUFDLENBQUMsQ0FBRTtJQUMxQixNQUFNZ0UsT0FBTyxHQUFHaEUsS0FBSyxDQUFDLENBQUMsQ0FBQyxFQUFFM1QsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFOztJQUV0QztJQUNBLElBQUksQ0FBQzdELFlBQVksR0FBR3ViLFFBQVE7O0lBRTVCO0lBQ0EsTUFBTXlCLFNBQVMsR0FBRyxJQUFBQyxtQkFBWSxFQUFDMUIsUUFBUSxDQUFDO0lBQ3hDLE1BQU0yQixlQUFlLEdBQUdGLFNBQVMsQ0FBQyxJQUFJekIsUUFBUSxHQUFHLENBQUM7O0lBRWxEO0lBQ0EsSUFBSSxDQUFDQyxPQUFPLEVBQUU7TUFDWixPQUFPLEdBQUdWLE1BQU0sSUFBSW9DLGVBQWUsSUFBSTtJQUN6QztJQUVBLE1BQU05TSxRQUFRLEdBQUcsSUFBSSxDQUFDelIsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDOztJQUVoQztJQUNBLE1BQU13ZSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxlQUFlLENBQUM1QixPQUFPLENBQUM7SUFDNUMsSUFBSTJCLE1BQU0sQ0FBQzloQixNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3ZCLE9BQU8sR0FBR3lmLE1BQU0sSUFBSW9DLGVBQWUsSUFBSTFCLE9BQU8sSUFBSTtJQUNwRDs7SUFFQTtJQUNBLE9BQU8sSUFBSSxDQUFDNkIsdUJBQXVCLENBQUM5QixRQUFRLEVBQUU0QixNQUFNLEVBQUUvTSxRQUFRLEVBQUU0TSxTQUFTLENBQUM7RUFDNUU7O0VBRUE7QUFDRjtBQUNBO0VBQ1VJLGVBQWVBLENBQUM1QixPQUFlLEVBQXlDO0lBQzlFLE1BQU0yQixNQUE2QyxHQUFHLEVBQUU7SUFDeEQ7SUFDQSxNQUFNZCxLQUFLLEdBQUcsdUNBQXVDO0lBQ3JELElBQUk3RSxLQUFLO0lBQ1QsT0FBTyxDQUFDQSxLQUFLLEdBQUc2RSxLQUFLLENBQUNDLElBQUksQ0FBQ2QsT0FBTyxDQUFDLE1BQU0sSUFBSSxFQUFFO01BQzdDMkIsTUFBTSxDQUFDeGxCLElBQUksQ0FBQztRQUFFK1UsR0FBRyxFQUFFOEssS0FBSyxDQUFDLENBQUMsQ0FBRTtRQUFFeUUsS0FBSyxFQUFFekUsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFFM1QsSUFBSSxDQUFDO01BQUUsQ0FBQyxDQUFDO0lBQzFEO0lBQ0EsT0FBT3NaLE1BQU07RUFDZjs7RUFFQTtBQUNGO0FBQ0E7RUFDVUcsZ0JBQWdCQSxDQUN0Qi9CLFFBQWdCLEVBQ2hCNEIsTUFBNkMsRUFDN0MvTSxRQUFnQixFQUNSO0lBQ1IsT0FBTyxJQUFJLENBQUNpTix1QkFBdUIsQ0FBQzlCLFFBQVEsRUFBRTRCLE1BQU0sRUFBRS9NLFFBQVEsRUFBRXNHLFlBQUssQ0FBQzRFLFVBQVUsQ0FBQ2hsQixPQUFPLENBQUM7RUFDM0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1UrbUIsdUJBQXVCQSxDQUM3QjlCLFFBQWdCLEVBQ2hCNEIsTUFBNkMsRUFDN0MvTSxRQUFnQixFQUNoQjRNLFNBQW1DLEVBQzNCO0lBQ1IsTUFBTWxDLE1BQU0sR0FBRyxHQUFHO0lBQ2xCLE1BQU1wakIsS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTWdrQixNQUFNLEdBQUcsVUFBVSxDQUFDLENBQUM7O0lBRTNCLElBQUlULFdBQVcsR0FBRyxHQUFHSCxNQUFNLElBQUlrQyxTQUFTLENBQUMsSUFBSXpCLFFBQVEsR0FBRyxDQUFDLEdBQUc7SUFDNUQsSUFBSWdDLFVBQVUsR0FBRyxJQUFJO0lBRXJCLEtBQUssTUFBTUMsS0FBSyxJQUFJTCxNQUFNLEVBQUU7TUFDMUIsTUFBTU0sWUFBWSxHQUFHLElBQUksQ0FBQ0MsZUFBZSxDQUFDRixLQUFLLENBQUM5USxHQUFHLEVBQUU4USxLQUFLLENBQUN2QixLQUFLLENBQUM7TUFDakUsTUFBTTBCLFNBQVMsR0FBRyxHQUFHSCxLQUFLLENBQUM5USxHQUFHLEtBQUsrUSxZQUFZLEVBQUU7TUFDakQsTUFBTUcsUUFBUSxHQUFHTCxVQUFVLEdBQUdJLFNBQVMsR0FBRyxLQUFLQSxTQUFTLEVBQUU7O01BRTFEO01BQ0EsTUFBTXhCLFFBQVEsR0FBR2xCLFdBQVcsR0FBRzJDLFFBQVE7TUFDdkMsTUFBTUMsV0FBVyxHQUFHLElBQUksQ0FBQ0MsYUFBYSxDQUFDM0IsUUFBUSxDQUFDO01BRWhELElBQUkwQixXQUFXLEdBQUd6TixRQUFRLElBQUksQ0FBQ21OLFVBQVUsRUFBRTtRQUN6QztRQUNBN2xCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDc2pCLFdBQVcsQ0FBQztRQUN2QkEsV0FBVyxHQUFHUyxNQUFNLEdBQUdpQyxTQUFTO01BQ2xDLENBQUMsTUFBTTtRQUNMMUMsV0FBVyxJQUFJMkMsUUFBUTtNQUN6QjtNQUNBTCxVQUFVLEdBQUcsS0FBSztJQUNwQjtJQUVBN2xCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDc2pCLFdBQVcsQ0FBQztJQUV2QixPQUFPdmpCLEtBQUssQ0FBQ1EsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUk7RUFDaEM7O0VBRUE7QUFDRjtBQUNBO0VBQ1V3bEIsZUFBZUEsQ0FBQ2hSLEdBQVcsRUFBRXVQLEtBQWEsRUFBVTtJQUMxRCxNQUFNUSxRQUFRLEdBQUcvUCxHQUFHLENBQUNwQixXQUFXLENBQUMsQ0FBQztJQUNsQyxJQUFJbVIsUUFBUSxDQUFDbFIsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJa1IsUUFBUSxLQUFLLE1BQU0sSUFBSUEsUUFBUSxLQUFLLFNBQVMsSUFBSUEsUUFBUSxLQUFLLE9BQU8sRUFBRTtNQUN0RyxPQUFPL0YsWUFBSyxDQUFDWSxPQUFPLENBQUMyRSxLQUFLLENBQUM7SUFDN0I7SUFDQSxJQUFJUSxRQUFRLEtBQUssU0FBUyxJQUFJQSxRQUFRLEtBQUssS0FBSyxFQUFFO01BQ2hELE9BQU8vRixZQUFLLENBQUM0RSxVQUFVLENBQUNobEIsT0FBTyxDQUFDMmxCLEtBQUssQ0FBQztJQUN4QztJQUNBLE9BQU9BLEtBQUs7RUFDZDs7RUFFQTtBQUNGO0FBQ0E7RUFDVThCLGtCQUFrQkEsQ0FBQ3hDLFFBQWdCLEVBQUVDLE9BQWUsRUFBaUI7SUFDM0UsTUFBTS9lLElBQUksR0FBRzhlLFFBQVEsQ0FBQ2pRLFdBQVcsQ0FBQyxDQUFDOztJQUVuQztJQUNBLElBQUksQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsTUFBTSxFQUFFLFFBQVEsQ0FBQyxDQUFDQyxRQUFRLENBQUM5TyxJQUFJLENBQUMsRUFBRTtNQUN0RSxNQUFNdWhCLFNBQVMsR0FBR3hDLE9BQU8sQ0FBQ2hFLEtBQUssQ0FBQyx5Q0FBeUMsQ0FBQztNQUMxRSxJQUFJd0csU0FBUyxFQUFFO1FBQ2IsTUFBTUMsSUFBSSxHQUFHRCxTQUFTLENBQUMsQ0FBQyxDQUFFO1FBQzFCLE9BQU90SCxZQUFLLENBQUN3SCxJQUFJLEVBQUVELElBQUksR0FBR3ZILFlBQUssQ0FBQ3dILElBQUksQ0FBQ0QsSUFBSSxDQUFDQSxJQUFJLENBQUMsR0FBR3ZILFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDa0MsSUFBSSxDQUFDO01BQ3hFO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJeGhCLElBQUksS0FBSyxNQUFNLEVBQUU7TUFDbkIsTUFBTTBoQixRQUFRLEdBQUczQyxPQUFPLENBQUNoRSxLQUFLLENBQUMsc0JBQXNCLENBQUM7TUFDdEQsSUFBSTJHLFFBQVEsRUFBRTtRQUNaLE1BQU1oSyxHQUFHLEdBQUdnSyxRQUFRLENBQUMsQ0FBQyxDQUFFO1FBQ3hCLE9BQU96SCxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQzVILEdBQUcsQ0FBQztNQUM1QjtJQUNGO0lBRUEsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVStDLHVCQUF1QkEsQ0FBQzdKLE9BQWUsRUFBVTtJQUN2RDtJQUNBLE1BQU1sSyxTQUFTLEdBQUcsSUFBSSxDQUFDaVYseUJBQXlCLENBQUMvSyxPQUFPLENBQUM7SUFDekQsSUFBSSxDQUFDbEssU0FBUyxJQUFJLElBQUksQ0FBQ3lULGVBQWUsQ0FBQ3pULFNBQVMsQ0FBQyxFQUFFO01BQ2pELE9BQU8sRUFBRSxDQUFDLENBQUM7SUFDYjs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDbkQsWUFBWSxFQUFFc0wsV0FBVyxDQUFDLENBQUMsS0FBSyxNQUFNLEVBQUU7TUFDL0MsT0FBTyxJQUFJLENBQUM4Uyx3QkFBd0IsQ0FBQ2piLFNBQVMsQ0FBQztJQUNqRDs7SUFFQTtJQUNBLE1BQU1rYixTQUFTLEdBQUdsYixTQUFTLENBQUNxVSxLQUFLLENBQUMsaUJBQWlCLENBQUM7SUFDcEQsTUFBTThHLFNBQVMsR0FBR25iLFNBQVMsQ0FBQ3FVLEtBQUssQ0FBQyw4QkFBOEIsQ0FBQztJQUNqRSxNQUFNK0csU0FBUyxHQUFHcGIsU0FBUyxDQUFDcVUsS0FBSyxDQUFDLHdCQUF3QixDQUFDOztJQUUzRDtJQUNBLE1BQU1nSCxPQUFPLEdBQUcsMkNBQTJDLENBQUMxUixJQUFJLENBQUMzSixTQUFTLENBQUM7SUFDM0UsTUFBTXNiLFVBQVUsR0FBRyx1QkFBdUIsQ0FBQzNSLElBQUksQ0FBQzNKLFNBQVMsQ0FBQztJQUMxRCxNQUFNdWIsV0FBVyxHQUFHLCtCQUErQixDQUFDNVIsSUFBSSxDQUFDM0osU0FBUyxDQUFDO0lBRW5FLElBQUl3YixPQUFlO0lBQ25CLElBQUlDLFlBQVksR0FBRyxLQUFLO0lBRXhCLElBQUlMLFNBQVMsRUFBRTtNQUNiSSxPQUFPLEdBQUcsUUFBUUosU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRO0lBQ3hDLENBQUMsTUFBTSxJQUFJRixTQUFTLEVBQUU7TUFDcEJNLE9BQU8sR0FBRyxTQUFTTixTQUFTLENBQUMsQ0FBQyxDQUFDLFFBQVFBLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxHQUFHLEdBQUcsRUFBRSxHQUFHLEdBQUcsRUFBRTtJQUMxRSxDQUFDLE1BQU0sSUFBSUMsU0FBUyxFQUFFO01BQ3BCSyxPQUFPLEdBQUcsU0FBU0wsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRQSxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEVBQUU7SUFDMUUsQ0FBQyxNQUFNLElBQUluYixTQUFTLENBQUNxVSxLQUFLLENBQUMsc0RBQXNELENBQUMsRUFBRTtNQUNsRm1ILE9BQU8sR0FBRyxHQUFHO0lBQ2YsQ0FBQyxNQUFNLElBQUlELFdBQVcsSUFBSUYsT0FBTyxJQUFJQyxVQUFVLEVBQUU7TUFDL0M7TUFDQTtNQUNBLE1BQU1JLFNBQVMsR0FBRzFiLFNBQVMsQ0FBQ3NLLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSXRLLFNBQVM7TUFDdkR3YixPQUFPLEdBQUdFLFNBQVM7TUFDbkJELFlBQVksR0FBRyxJQUFJO0lBQ3JCLENBQUMsTUFBTTtNQUNMO01BQ0EsSUFBSUUsV0FBVyxHQUFHM2IsU0FBUzs7TUFFM0I7TUFDQSxNQUFNMlosWUFBWSxHQUFHM1osU0FBUyxDQUFDcVUsS0FBSyxDQUFDLG1CQUFtQixDQUFDO01BQ3pELElBQUlzRixZQUFZLEVBQUU7UUFDaEJnQyxXQUFXLEdBQUdoQyxZQUFZLENBQUMsQ0FBQyxDQUFFO01BQ2hDOztNQUVBO01BQ0EsTUFBTStCLFNBQVMsR0FBR0MsV0FBVyxDQUFDclIsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFNUosSUFBSSxDQUFDLENBQUMsSUFBSWliLFdBQVc7O01BRW5FO01BQ0EsTUFBTW5DLE1BQU0sR0FBRyxHQUFHO01BQ2xCLElBQUlrQyxTQUFTLENBQUN4akIsTUFBTSxHQUFHc2hCLE1BQU0sRUFBRTtRQUM3QjtRQUNBLE1BQU1vQyxXQUFXLEdBQUdGLFNBQVMsQ0FBQzViLEtBQUssQ0FBQyxDQUFDLEVBQUUwWixNQUFNLENBQUMsQ0FBQ3FDLE1BQU0sQ0FBQyxrQkFBa0IsQ0FBQztRQUN6RSxJQUFJRCxXQUFXLEdBQUcsRUFBRSxFQUFFO1VBQ3BCSixPQUFPLEdBQUdFLFNBQVMsQ0FBQzViLEtBQUssQ0FBQyxDQUFDLEVBQUU4YixXQUFXLEdBQUcsQ0FBQyxDQUFDO1FBQy9DLENBQUMsTUFBTTtVQUNMO1VBQ0EsTUFBTW5DLFNBQVMsR0FBR2lDLFNBQVMsQ0FBQzViLEtBQUssQ0FBQyxDQUFDLEVBQUUwWixNQUFNLENBQUM7VUFDNUMsTUFBTXNDLFNBQVMsR0FBR3JDLFNBQVMsQ0FBQ3NDLFdBQVcsQ0FBQyxHQUFHLENBQUM7VUFDNUNQLE9BQU8sR0FBR00sU0FBUyxHQUFHLEVBQUUsR0FBR3JDLFNBQVMsQ0FBQzNaLEtBQUssQ0FBQyxDQUFDLEVBQUVnYyxTQUFTLENBQUMsR0FBRyxHQUFHLEdBQUdyQyxTQUFTLEdBQUcsR0FBRztRQUNsRjtNQUNGLENBQUMsTUFBTTtRQUNMK0IsT0FBTyxHQUFHRSxTQUFTO01BQ3JCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLENBQUMvZSxvQkFBb0IsQ0FBQ25JLElBQUksQ0FBQztNQUM3QjRqQixRQUFRLEVBQUUsSUFBSSxDQUFDdmIsWUFBWSxJQUFJLE1BQU07TUFDckNxTixPQUFPLEVBQUVsSyxTQUFTO01BQ2xCd2IsT0FBTztNQUNQckosU0FBUyxFQUFFL0UsSUFBSSxDQUFDRCxHQUFHLENBQUM7SUFDdEIsQ0FBQyxDQUFDOztJQUVGO0lBQ0EsSUFBSSxJQUFJLENBQUN4USxvQkFBb0IsQ0FBQ3pFLE1BQU0sR0FBRyxJQUFJLENBQUMwRSxtQkFBbUIsRUFBRTtNQUMvRCxJQUFJLENBQUNELG9CQUFvQixDQUFDdU8sS0FBSyxDQUFDLENBQUM7SUFDbkM7SUFFQSxNQUFNOFEsY0FBYyxHQUFHLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNULE9BQU8sQ0FBQztJQUN2RDtJQUNBLE1BQU1VLGNBQWMsR0FBR2xjLFNBQVMsQ0FBQ29JLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSW9ULE9BQU8sQ0FBQ3BNLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSyxDQUFDcU0sWUFBWSxJQUFJemIsU0FBUyxDQUFDOUgsTUFBTSxHQUFHc2pCLE9BQU8sQ0FBQ3RqQixNQUFPO0lBQ2hJLE1BQU1pa0IsVUFBVSxHQUFHRCxjQUFjLEdBQUcsSUFBSTNJLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLG9CQUFvQixDQUFDLEVBQUUsR0FBRyxFQUFFO0lBQ25GLE9BQU8sS0FBS3JGLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLb0QsY0FBYyxHQUFHRyxVQUFVLElBQUk7RUFDckU7RUFFUUYsa0JBQWtCQSxDQUFDVCxPQUFlLEVBQVU7SUFDbEQsSUFBSSxDQUFDQSxPQUFPLEVBQUUsT0FBT0EsT0FBTztJQUM1QixNQUFNM0UsS0FBSyxHQUFHMkUsT0FBTyxDQUFDclQsV0FBVyxDQUFDLENBQUM7SUFDbkMsSUFBSTBPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtNQUNyRCxPQUFPbUwsWUFBSyxDQUFDL08sS0FBSyxDQUFDZ1gsT0FBTyxDQUFDO0lBQzdCO0lBQ0EsSUFBSUEsT0FBTyxDQUFDdlMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJNE4sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO01BQ2xILE9BQU9tTCxZQUFLLENBQUM2SSxPQUFPLENBQUNaLE9BQU8sQ0FBQztJQUMvQjtJQUNBLE9BQU9qSSxZQUFLLENBQUM1YyxJQUFJLENBQUM2a0IsT0FBTyxDQUFDO0VBQzVCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7RUFDVVAsd0JBQXdCQSxDQUFDL1EsT0FBZSxFQUFVO0lBQ3hELE1BQU0zVixLQUFlLEdBQUcsRUFBRTtJQUMxQixNQUFNZ2tCLE1BQU0sR0FBRyxJQUFJOztJQUVuQjtJQUNBLE1BQU04RCxhQUFhLEdBQUduUyxPQUFPLENBQUNtSyxLQUFLLENBQUMsdUNBQXVDLENBQUMsSUFDdkRuSyxPQUFPLENBQUNtSyxLQUFLLENBQUMsOEJBQThCLENBQUMsSUFDN0NuSyxPQUFPLENBQUNtSyxLQUFLLENBQUMsNkJBQTZCLENBQUM7SUFDakUsTUFBTWlJLFFBQVEsR0FBR0QsYUFBYSxHQUFHQSxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUUvUixLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM4SyxHQUFHLENBQUMsQ0FBQyxHQUFHLE1BQU07SUFDNUUsTUFBTW1ILFFBQVEsR0FBR0YsYUFBYSxHQUFHQSxhQUFhLENBQUMsQ0FBQyxDQUFDLEdBQUdDLFFBQVE7O0lBRTVEO0lBQ0EsTUFBTUUsUUFBUSxHQUFHdFMsT0FBTyxDQUFDbUssS0FBSyxDQUFDLDRDQUE0QyxDQUFDLElBQzVEbkssT0FBTyxDQUFDbUssS0FBSyxDQUFDLDRDQUE0QyxDQUFDO0lBQzNFLE1BQU1vSSxRQUFRLEdBQUd2UyxPQUFPLENBQUNtSyxLQUFLLENBQUMsNENBQTRDLENBQUMsSUFDNURuSyxPQUFPLENBQUNtSyxLQUFLLENBQUMsNENBQTRDLENBQUM7SUFFM0UsTUFBTXFJLFVBQVUsR0FBR0YsUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJQSxRQUFRLEdBQUcsQ0FBQyxDQUFDLElBQUksRUFBRTtJQUN2RCxNQUFNRyxVQUFVLEdBQUdGLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSUEsUUFBUSxHQUFHLENBQUMsQ0FBQyxJQUFJLEVBQUU7O0lBRXZEO0lBQ0EsTUFBTUcsTUFBTSxHQUFHRixVQUFVLENBQUN4a0IsTUFBTTtJQUNoQyxNQUFNMmtCLE1BQU0sR0FBR0YsVUFBVSxDQUFDemtCLE1BQU07SUFDaEMsTUFBTTRrQixRQUFRLEdBQUdGLE1BQU0sSUFBSUMsTUFBTSxHQUM3QnRKLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUtyRixZQUFLLENBQUMvTyxLQUFLLENBQUMsSUFBSW9ZLE1BQU0sRUFBRSxDQUFDLElBQUlySixZQUFLLENBQUM2SSxPQUFPLENBQUMsSUFBSVMsTUFBTSxFQUFFLENBQUMsU0FBUyxDQUFDLEdBQ3RGLEVBQUU7O0lBRU47SUFDQXRvQixLQUFLLENBQUNDLElBQUksQ0FBQyxHQUFHK2pCLE1BQU0sR0FBR2hGLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLckYsWUFBSyxDQUFDNkksT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJN0ksWUFBSyxDQUFDNkksT0FBTyxDQUFDLFNBQVMsQ0FBQyxJQUFJN0ksWUFBSyxDQUFDd0gsSUFBSSxFQUFFRCxJQUFJLEdBQUd2SCxZQUFLLENBQUN3SCxJQUFJLENBQUNELElBQUksQ0FBQyxHQUFHeUIsUUFBUSxFQUFFLENBQUMsR0FBR2hKLFlBQUssQ0FBQ1ksT0FBTyxDQUFDLEdBQUdvSSxRQUFRLEVBQUUsQ0FBQyxHQUFHTyxRQUFRLEVBQUUsQ0FBQzs7SUFFL0w7SUFDQSxJQUFJSixVQUFVLElBQUlDLFVBQVUsRUFBRTtNQUM1QixNQUFNSSxVQUFVLEdBQUcxbkIsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDLElBQUksQ0FBQzZOLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLEVBQUUsQ0FBQzs7TUFFdEQ7TUFDQTNZLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcrakIsTUFBTSxHQUFHaEYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztNQUUvQyxJQUFJOEQsVUFBVSxFQUFFO1FBQ2QsTUFBTU0sVUFBVSxHQUFHTixVQUFVLENBQUN4a0IsTUFBTSxHQUFHNmtCLFVBQVUsR0FDN0NMLFVBQVUsQ0FBQzVjLEtBQUssQ0FBQyxDQUFDLEVBQUVpZCxVQUFVLENBQUMsR0FBRyxHQUFHLEdBQ3JDTCxVQUFVO1FBQ2Q7UUFDQSxNQUFNTyxRQUFRLEdBQUdELFVBQVUsQ0FBQy9jLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUNBLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDO1FBQ3JFMUwsS0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBRytqQixNQUFNLEdBQUdoRixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSXJGLFlBQUssQ0FBQy9PLEtBQUssQ0FBQyxJQUFJLEdBQUd5WSxRQUFRLENBQUMsRUFBRSxDQUFDO01BQy9FO01BRUEsSUFBSU4sVUFBVSxFQUFFO1FBQ2QsTUFBTU8sVUFBVSxHQUFHUCxVQUFVLENBQUN6a0IsTUFBTSxHQUFHNmtCLFVBQVUsR0FDN0NKLFVBQVUsQ0FBQzdjLEtBQUssQ0FBQyxDQUFDLEVBQUVpZCxVQUFVLENBQUMsR0FBRyxHQUFHLEdBQ3JDSixVQUFVO1FBQ2QsTUFBTVEsUUFBUSxHQUFHRCxVQUFVLENBQUNqZCxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDQSxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQztRQUNyRTFMLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcrakIsTUFBTSxHQUFHaEYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLElBQUlyRixZQUFLLENBQUM2SSxPQUFPLENBQUMsSUFBSSxHQUFHZSxRQUFRLENBQUMsRUFBRSxDQUFDO01BQ2pGOztNQUVBO01BQ0E1b0IsS0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBRytqQixNQUFNLEdBQUdoRixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ2hEOztJQUVBO0lBQ0EsSUFBSSxDQUFDamMsb0JBQW9CLENBQUNuSSxJQUFJLENBQUM7TUFDN0I0akIsUUFBUSxFQUFFLE1BQU07TUFDaEJsTyxPQUFPO01BQ1BzUixPQUFPLEVBQUUsV0FBV2MsUUFBUSxNQUFNTSxNQUFNLE1BQU1DLE1BQU0sR0FBRztNQUN2RDFLLFNBQVMsRUFBRS9FLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7TUFDckJpUSxRQUFRLEVBQUU7UUFDUkMsUUFBUSxFQUFFZCxRQUFRO1FBQ2xCZSxTQUFTLEVBQUVWLE1BQU07UUFDakJXLFNBQVMsRUFBRVYsTUFBTTtRQUNqQlcsSUFBSSxFQUFFO1VBQUVDLEdBQUcsRUFBRWYsVUFBVTtVQUFFZ0IsR0FBRyxFQUFFZjtRQUFXO01BQzNDO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxJQUFJLENBQUNoZ0Isb0JBQW9CLENBQUN6RSxNQUFNLEdBQUcsSUFBSSxDQUFDMEUsbUJBQW1CLEVBQUU7TUFDL0QsSUFBSSxDQUFDRCxvQkFBb0IsQ0FBQ3VPLEtBQUssQ0FBQyxDQUFDO0lBQ25DO0lBRUEsTUFBTWlSLFVBQVUsR0FBR2pTLE9BQU8sQ0FBQ2hTLE1BQU0sR0FBRyxHQUFHLElBQUkwa0IsTUFBTSxHQUFHLEVBQUUsSUFBSUMsTUFBTSxHQUFHLEVBQUUsR0FDbkUsSUFBSXRKLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLG9CQUFvQixDQUFDLEVBQUUsR0FBRyxFQUFFO0lBQ2pELE9BQU9ya0IsS0FBSyxDQUFDUSxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUdvbkIsVUFBVSxHQUFHLElBQUk7RUFDN0M7O0VBRUE7QUFDRjtBQUNBO0VBQ1V3QixxQkFBcUJBLENBQUN6VCxPQUFlLEVBQVU7SUFDckQsT0FBTyxJQUFJLENBQUM4SixjQUFjLENBQUM5SixPQUFPLENBQUM7RUFDckM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7QUFDQTtFQUNVOEosY0FBY0EsQ0FDcEI5SixPQUFlLEVBQ2ZsUixPQUE0RyxHQUFHLENBQUMsQ0FBQyxFQUN6RztJQUNSLE1BQU0yZSxNQUFNLEdBQUcsR0FBRztJQUNsQixJQUFJek8sT0FBTyxHQUFHZ0IsT0FBTyxDQUFDakssT0FBTyxDQUFDLFdBQVcsRUFBRSxFQUFFLENBQUMsQ0FBQzZRLE9BQU8sQ0FBQyxDQUFDO0lBQ3hELElBQUksQ0FBQzVILE9BQU8sQ0FBQ3hJLElBQUksQ0FBQyxDQUFDLEVBQUU7TUFDbkIsT0FBTyxFQUFFO0lBQ1g7O0lBRUE7SUFDQTtJQUNBd0ksT0FBTyxHQUFHQSxPQUFPLENBQUNqSixPQUFPLENBQUMsOENBQThDLEVBQUUsT0FBTyxDQUFDO0lBQ2xGO0lBQ0FpSixPQUFPLEdBQUdBLE9BQU8sQ0FBQ2pKLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxTQUFTLENBQUM7SUFDM0Q7SUFDQWlKLE9BQU8sR0FBR0EsT0FBTyxDQUFDakosT0FBTyxDQUFDLGFBQWEsRUFBRSxNQUFNLENBQUM7SUFDaEQ7SUFDQWlKLE9BQU8sR0FBR0EsT0FBTyxDQUFDakosT0FBTyxDQUFDLG1CQUFtQixFQUFFLE9BQU8sQ0FBQztJQUN2RDtJQUNBaUosT0FBTyxHQUFHQSxPQUFPLENBQUNqSixPQUFPLENBQUMsMEJBQTBCLEVBQUUsVUFBVSxDQUFDO0lBQ2pFO0lBQ0FpSixPQUFPLEdBQUdBLE9BQU8sQ0FBQ2pKLE9BQU8sQ0FBQywwQkFBMEIsRUFBRSxVQUFVLENBQUM7SUFDakU7SUFDQWlKLE9BQU8sR0FBR0EsT0FBTyxDQUFDakosT0FBTyxDQUFDLDJFQUEyRSxFQUFFLFVBQVUsQ0FBQztJQUNsSDtJQUNBaUosT0FBTyxHQUFHQSxPQUFPLENBQUNqSixPQUFPLENBQUMsMkNBQTJDLEVBQUUsWUFBWSxDQUFDO0lBQ3BGO0lBQ0FpSixPQUFPLEdBQUdBLE9BQU8sQ0FBQ2pKLE9BQU8sQ0FBQyxtQkFBbUIsRUFBRSxXQUFXLENBQUM7SUFDM0Q7SUFDQWlKLE9BQU8sR0FBR0EsT0FBTyxDQUFDakosT0FBTyxDQUFDLDZCQUE2QixFQUFFLFlBQVksQ0FBQzs7SUFFdEU7SUFDQSxNQUFNMmQsY0FBYyxHQUFHLElBQUksQ0FBQzFRLFNBQVMsQ0FBQyxDQUFDO0lBQ3ZDLE1BQU1ELFFBQVEsR0FBRzVYLElBQUksQ0FBQytKLEdBQUcsQ0FBQyxFQUFFLEVBQUUvSixJQUFJLENBQUNnSyxHQUFHLENBQUNyRyxPQUFPLENBQUNpVSxRQUFRLElBQUkyUSxjQUFjLEdBQUcsQ0FBQyxFQUFFQSxjQUFjLENBQUMsQ0FBQztJQUMvRixNQUFNQyxTQUFTLEdBQUc3a0IsT0FBTyxDQUFDaWIsS0FBSyxHQUMzQixHQUFHamIsT0FBTyxDQUFDa2IsVUFBVSxHQUFHbGIsT0FBTyxDQUFDa2IsVUFBVSxDQUFDbGIsT0FBTyxDQUFDaWIsS0FBSyxDQUFDLEdBQUdqYixPQUFPLENBQUNpYixLQUFLLEdBQUdWLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxFQUFFLEdBQ25HLEVBQUU7SUFDTixNQUFNa0YsWUFBWSxHQUFHLEdBQUduRyxNQUFNLElBQUlrRyxTQUFTLEVBQUU7SUFDN0MsTUFBTXRGLE1BQU0sR0FBRyxHQUFHLENBQUM1akIsTUFBTSxDQUFDLElBQUksQ0FBQ2dtQixhQUFhLENBQUMsR0FBR2hELE1BQU0sR0FBRyxDQUFDLENBQUM7SUFFM0QsTUFBTXBqQixLQUFLLEdBQUcyVSxPQUFPLENBQUNvQixLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pDLE1BQU0vSixNQUFnQixHQUFHLEVBQUU7SUFDM0IsSUFBSXdkLGFBQWEsR0FBRyxJQUFJO0lBQ3hCLElBQUlDLFdBQVcsR0FBRyxLQUFLO0lBQ3ZCLElBQUlDLGFBQWEsR0FBRyxFQUFFO0lBQ3RCLE1BQU1DLGVBQXlCLEdBQUcsRUFBRTtJQUVwQyxLQUFLLE1BQU1DLE9BQU8sSUFBSTVwQixLQUFLLEVBQUU7TUFDM0IsTUFBTTZwQixXQUFXLEdBQUdELE9BQU8sQ0FBQ3pkLElBQUksQ0FBQyxDQUFDOztNQUVsQztNQUNBLElBQUkwZCxXQUFXLENBQUNuVixVQUFVLENBQUMsS0FBSyxDQUFDLEVBQUU7UUFDakMsSUFBSSxDQUFDK1UsV0FBVyxFQUFFO1VBQ2hCO1VBQ0FBLFdBQVcsR0FBRyxJQUFJO1VBQ2xCQyxhQUFhLEdBQUdHLFdBQVcsQ0FBQ3RlLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQ1ksSUFBSSxDQUFDLENBQUMsQ0FBQzlLLFdBQVcsQ0FBQyxDQUFDLElBQUksTUFBTTtVQUNuRTtRQUNGLENBQUMsTUFBTTtVQUNMO1VBQ0Fvb0IsV0FBVyxHQUFHLEtBQUs7VUFDbkIsTUFBTUssVUFBVSxHQUFHTixhQUFhLEdBQUdELFlBQVksR0FBR3ZGLE1BQU07VUFDeEQsSUFBSXdGLGFBQWEsRUFBRTtZQUNqQnhkLE1BQU0sQ0FBQy9MLElBQUksQ0FBQyxHQUFHc3BCLFlBQVksR0FBR3ZLLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU9xRixhQUFhLE1BQU0sQ0FBQyxFQUFFLENBQUM7WUFDM0VGLGFBQWEsR0FBRyxLQUFLO1VBQ3ZCLENBQUMsTUFBTTtZQUNMeGQsTUFBTSxDQUFDL0wsSUFBSSxDQUFDLEdBQUcrakIsTUFBTSxHQUFHaEYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBT3FGLGFBQWEsTUFBTSxDQUFDLEVBQUUsQ0FBQztVQUN2RTtVQUNBLEtBQUssTUFBTUssUUFBUSxJQUFJSixlQUFlLEVBQUU7WUFDdEMzZCxNQUFNLENBQUMvTCxJQUFJLENBQUMsR0FBRytqQixNQUFNLEdBQUdoRixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSXJGLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ3ZZLElBQUksQ0FBQ2tlLFFBQVEsQ0FBQyxFQUFFLENBQUM7VUFDM0U7VUFDQUosZUFBZSxDQUFDaG1CLE1BQU0sR0FBRyxDQUFDO1VBQzFCK2xCLGFBQWEsR0FBRyxFQUFFO1VBQ2xCO1FBQ0Y7TUFDRjtNQUVBLElBQUlELFdBQVcsRUFBRTtRQUNmRSxlQUFlLENBQUMxcEIsSUFBSSxDQUFDMnBCLE9BQU8sQ0FBQztRQUM3QjtNQUNGOztNQUVBO01BQ0EsSUFBSSxDQUFDQyxXQUFXLEVBQUU7UUFDaEI3ZCxNQUFNLENBQUMvTCxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUNqQjtNQUNGOztNQUVBO01BQ0EsTUFBTStwQixXQUFXLEdBQUdILFdBQVcsQ0FBQy9KLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQztNQUMxRCxJQUFJa0ssV0FBVyxJQUFJQSxXQUFXLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQ0EsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDdFYsVUFBVSxDQUFDLEdBQUcsQ0FBQyxFQUFFO1FBQ3BFLE1BQU11VixLQUFLLEdBQUdELFdBQVcsQ0FBQyxDQUFDLENBQUMsRUFBRXJtQixNQUFNLElBQUksQ0FBQztRQUN6QyxNQUFNdW1CLFVBQVUsR0FBR0YsV0FBVyxDQUFDLENBQUMsQ0FBQyxFQUFFN2QsSUFBSSxDQUFDLENBQUMsSUFBSSxFQUFFO1FBQy9DO1FBQ0EsSUFBSStkLFVBQVUsQ0FBQ3ZtQixNQUFNLEdBQUcsQ0FBQyxFQUFFO1VBQ3pCO1VBQ0EsSUFBSXFJLE1BQU0sQ0FBQ3JJLE1BQU0sR0FBRyxDQUFDLElBQUlxSSxNQUFNLENBQUNBLE1BQU0sQ0FBQ3JJLE1BQU0sR0FBRyxDQUFDLENBQUMsS0FBSyxFQUFFLEVBQUU7WUFDekRxSSxNQUFNLENBQUMvTCxJQUFJLENBQUMsRUFBRSxDQUFDO1VBQ2pCO1VBQ0EsTUFBTWtxQixlQUFlLEdBQUcsSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQ0YsVUFBVSxFQUFFRCxLQUFLLEVBQUV2UixRQUFRLEVBQUU4USxhQUFhLEdBQUdELFlBQVksR0FBR3ZGLE1BQU0sQ0FBQztVQUNySGhZLE1BQU0sQ0FBQy9MLElBQUksQ0FBQ2txQixlQUFlLENBQUM7VUFDNUJYLGFBQWEsR0FBRyxLQUFLO1VBQ3JCO1FBQ0Y7TUFDRjs7TUFFQTtNQUNBLElBQUksYUFBYSxDQUFDcFUsSUFBSSxDQUFDeVUsV0FBVyxDQUFDLEVBQUU7UUFDbkMsTUFBTVEsWUFBWSxHQUFHdnBCLElBQUksQ0FBQ2dLLEdBQUcsQ0FBQzROLFFBQVEsR0FBR3NMLE1BQU0sQ0FBQ3JnQixNQUFNLEVBQUUsRUFBRSxDQUFDO1FBQzNEcUksTUFBTSxDQUFDL0wsSUFBSSxDQUFDLEdBQUcrakIsTUFBTSxHQUFHaEYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDamtCLE1BQU0sQ0FBQ2lxQixZQUFZLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDbkU7TUFDRjs7TUFFQTtNQUNBLElBQUlSLFdBQVcsQ0FBQ25WLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxVQUFVLENBQUNVLElBQUksQ0FBQ3lVLFdBQVcsQ0FBQyxFQUFFO1FBQy9EO1FBQ0EsTUFBTVMsV0FBVyxHQUFHZCxhQUFhLEdBQUdELFlBQVksR0FBR3ZGLE1BQU07UUFDekRoWSxNQUFNLENBQUMvTCxJQUFJLENBQUMsR0FBR3FxQixXQUFXLEdBQUd0TCxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQ3dGLFdBQVcsQ0FBQyxFQUFFLENBQUM7UUFDM0RMLGFBQWEsR0FBRyxLQUFLO1FBQ3JCO01BQ0Y7O01BRUE7TUFDQSxNQUFNZSxTQUFTLEdBQUdWLFdBQVcsQ0FBQy9KLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQztNQUM5RCxJQUFJeUssU0FBUyxJQUFJQSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDN0IsTUFBTUMsV0FBVyxHQUFHRCxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUNwZSxJQUFJLENBQUMsQ0FBQztRQUN2QyxNQUFNc2UsYUFBYSxHQUFHLElBQUFDLDBCQUFnQixFQUFDRixXQUFXLENBQUM7UUFDbkQsTUFBTUcsVUFBVSxHQUFHM0wsWUFBSyxDQUFDNEwsU0FBUyxDQUFDLE1BQU0sQ0FBQztRQUMxQyxNQUFNQyxVQUFVLEdBQUcsTUFBTTtRQUV6QixJQUFJckIsYUFBYSxFQUFFO1VBQ2pCeGQsTUFBTSxDQUFDL0wsSUFBSSxDQUFDc3BCLFlBQVksQ0FBQ2hOLE9BQU8sQ0FBQyxDQUFDLENBQUM7VUFDbkNpTixhQUFhLEdBQUcsS0FBSztRQUN2Qjs7UUFFQTtRQUNBLE1BQU1sRyxLQUFLLEdBQUdtSCxhQUFhLENBQUMxVSxLQUFLLENBQUMsS0FBSyxDQUFDO1FBQ3hDLElBQUk5SyxPQUFPLEdBQUcsRUFBRTtRQUNoQixJQUFJNmYsZUFBZSxHQUFHLElBQUk7UUFDMUIsS0FBSyxNQUFNaEksSUFBSSxJQUFJUSxLQUFLLEVBQUU7VUFDeEIsTUFBTXlILFNBQVMsR0FBRzlmLE9BQU8sR0FBRyxHQUFHQSxPQUFPLElBQUk2WCxJQUFJLEVBQUUsR0FBR0EsSUFBSTtVQUN2RCxNQUFNaUIsU0FBUyxHQUFHLElBQUksQ0FBQ3FDLGFBQWEsQ0FBQzBFLGVBQWUsR0FBR0gsVUFBVSxHQUFHRSxVQUFVLENBQUM7VUFDL0UsSUFBSTlHLFNBQVMsR0FBRyxJQUFJLENBQUNxQyxhQUFhLENBQUMyRSxTQUFTLENBQUMsR0FBR3JTLFFBQVEsR0FBRyxDQUFDLElBQUl6TixPQUFPLEVBQUU7WUFDdkVlLE1BQU0sQ0FBQy9MLElBQUksQ0FBQyxHQUFHNnFCLGVBQWUsR0FBR0gsVUFBVSxHQUFHRSxVQUFVLEdBQUc1ZixPQUFPLEVBQUUsQ0FBQztZQUNyRUEsT0FBTyxHQUFHNlgsSUFBSTtZQUNkZ0ksZUFBZSxHQUFHLEtBQUs7VUFDekIsQ0FBQyxNQUFNO1lBQ0w3ZixPQUFPLEdBQUc4ZixTQUFTO1VBQ3JCO1FBQ0Y7UUFDQSxJQUFJOWYsT0FBTyxFQUFFO1VBQ1hlLE1BQU0sQ0FBQy9MLElBQUksQ0FBQyxHQUFHNnFCLGVBQWUsR0FBR0gsVUFBVSxHQUFHRSxVQUFVLEdBQUc1ZixPQUFPLEVBQUUsQ0FBQztRQUN2RTtRQUNBO01BQ0Y7O01BRUE7TUFDQSxNQUFNK2YsYUFBYSxHQUFHLElBQUFOLDBCQUFnQixFQUFDYixXQUFXLENBQUM7TUFFbkQsTUFBTXZHLEtBQUssR0FBRzBILGFBQWEsQ0FBQ2pWLEtBQUssQ0FBQyxLQUFLLENBQUM7TUFDeEMsSUFBSTlLLE9BQU8sR0FBRyxFQUFFO01BQ2hCLEtBQUssTUFBTTZYLElBQUksSUFBSVEsS0FBSyxFQUFFO1FBQ3hCLE1BQU15SCxTQUFTLEdBQUc5ZixPQUFPLEdBQUcsR0FBR0EsT0FBTyxJQUFJNlgsSUFBSSxFQUFFLEdBQUdBLElBQUk7UUFDdkQsTUFBTW1JLFlBQVksR0FBRyxJQUFJLENBQUM3RSxhQUFhLENBQUNvRCxhQUFhLEdBQUdELFlBQVksR0FBR3ZGLE1BQU0sQ0FBQztRQUM5RSxJQUFJaUgsWUFBWSxHQUFHLElBQUksQ0FBQzdFLGFBQWEsQ0FBQzJFLFNBQVMsQ0FBQyxHQUFHclMsUUFBUSxJQUFJek4sT0FBTyxFQUFFO1VBQ3RFZSxNQUFNLENBQUMvTCxJQUFJLENBQUMsR0FBR3VwQixhQUFhLEdBQUdELFlBQVksR0FBR3ZGLE1BQU0sR0FBRy9ZLE9BQU8sRUFBRSxDQUFDO1VBQ2pFQSxPQUFPLEdBQUc2WCxJQUFJO1VBQ2QwRyxhQUFhLEdBQUcsS0FBSztRQUN2QixDQUFDLE1BQU07VUFDTHZlLE9BQU8sR0FBRzhmLFNBQVM7UUFDckI7TUFDRjtNQUVBLElBQUk5ZixPQUFPLEVBQUU7UUFDWGUsTUFBTSxDQUFDL0wsSUFBSSxDQUFDLEdBQUd1cEIsYUFBYSxHQUFHRCxZQUFZLEdBQUd2RixNQUFNLEdBQUcvWSxPQUFPLEVBQUUsQ0FBQztRQUNqRXVlLGFBQWEsR0FBRyxLQUFLO01BQ3ZCO0lBQ0Y7SUFFQSxPQUFPeGQsTUFBTSxDQUFDeEwsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLElBQUk7RUFDakM7O0VBRUE7QUFDRjtBQUNBO0VBQ1U0cEIsb0JBQW9CQSxDQUFDbmxCLElBQVksRUFBRWdsQixLQUFhLEVBQUV2UixRQUFnQixFQUFFOEssTUFBYyxFQUFVO0lBQ2xHLE1BQU0wSCxhQUFhLEdBQUcsSUFBQVIsMEJBQWdCLEVBQUN6bEIsSUFBSSxDQUFDO0lBRTVDLFFBQVFnbEIsS0FBSztNQUNYLEtBQUssQ0FBQztRQUFFO1VBQ047VUFDQSxNQUFNa0IsV0FBVyxHQUFHcnFCLElBQUksQ0FBQ2dLLEdBQUcsQ0FBQzROLFFBQVEsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDME4sYUFBYSxDQUFDOEUsYUFBYSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1VBQ2pGLE1BQU1FLFNBQVMsR0FBR3BNLFlBQUssQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQzdlLE1BQU0sQ0FBQytxQixXQUFXLENBQUMsQ0FBQztVQUN4RCxNQUFNRSxVQUFVLEdBQUdyTSxZQUFLLENBQUNDLE9BQU8sQ0FBQzVlLElBQUksQ0FBQyxLQUFLNnFCLGFBQWEsRUFBRSxDQUFDO1VBQzNELE9BQU8sR0FBRzFILE1BQU0sR0FBRzRILFNBQVMsT0FBT0MsVUFBVSxPQUFPRCxTQUFTLEVBQUU7UUFDakU7TUFDQSxLQUFLLENBQUM7UUFBRTtVQUNOO1VBQ0EsTUFBTUMsVUFBVSxHQUFHck0sWUFBSyxDQUFDNWMsSUFBSSxDQUFDL0IsSUFBSSxDQUFDLEtBQUs2cUIsYUFBYSxFQUFFLENBQUM7VUFDeEQsTUFBTUksU0FBUyxHQUFHdE0sWUFBSyxDQUFDNWMsSUFBSSxDQUFDLEdBQUcsQ0FBQ2hDLE1BQU0sQ0FBQ1UsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDNE4sUUFBUSxHQUFHLENBQUMsRUFBRSxJQUFJLENBQUMwTixhQUFhLENBQUM4RSxhQUFhLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1VBQ3ZHLE9BQU8sR0FBRzFILE1BQU0sR0FBRzZILFVBQVUsT0FBT0MsU0FBUyxFQUFFO1FBQ2pEO01BQ0EsS0FBSyxDQUFDO1FBQUU7VUFDTjtVQUNBLE9BQU8sR0FBRzlILE1BQU0sR0FBR3hFLFlBQUssQ0FBQzRMLFNBQVMsQ0FBQ3ZxQixJQUFJLENBQUMsS0FBSzZxQixhQUFhLEVBQUUsQ0FBQyxFQUFFO1FBQ2pFO01BQ0EsS0FBSyxDQUFDO1FBQUU7VUFDTjtVQUNBLE9BQU8sR0FBRzFILE1BQU0sR0FBR3hFLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJckYsWUFBSyxDQUFDM2UsSUFBSSxDQUFDNnFCLGFBQWEsQ0FBQyxFQUFFO1FBQ3ZFO01BQ0E7UUFBUztVQUNQO1VBQ0EsT0FBTyxHQUFHMUgsTUFBTSxHQUFHeEUsWUFBSyxDQUFDM2UsSUFBSSxDQUFDNnFCLGFBQWEsQ0FBQyxFQUFFO1FBQ2hEO0lBQ0Y7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1U1TCxtQkFBbUJBLENBQUMzSixPQUFlLEVBQVU7SUFDbkQsSUFBSSxDQUFDQSxPQUFPLENBQUN4SixJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU8sRUFBRTs7SUFFOUI7SUFDQSxNQUFNbVcsS0FBSyxHQUFHM00sT0FBTyxDQUFDL0IsV0FBVyxDQUFDLENBQUM7SUFDbkMsSUFBSThMLEtBQUssR0FBRyxVQUFVO0lBQ3RCLElBQUlDLFVBQVUsR0FBR1gsWUFBSyxDQUFDdU0sSUFBSSxDQUFDcHJCLElBQUk7SUFDaEMsSUFBSXFyQixTQUFTLEdBQUcsSUFBSTtJQUNwQixJQUFJQyxXQUFXLEdBQUcsU0FBUzs7SUFFM0I7SUFDQSxJQUFJbkosS0FBSyxDQUFDek8sUUFBUSxDQUFDLGFBQWEsQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUM3RHlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxZQUFZLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxnQkFBZ0IsQ0FBQyxJQUNoRXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxhQUFhLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxXQUFXLENBQUMsRUFBRTtNQUNoRTZMLEtBQUssR0FBRyxZQUFZO01BQ3BCQyxVQUFVLEdBQUdYLFlBQUssQ0FBQzZJLE9BQU8sSUFBSTdJLFlBQUssQ0FBQ3VNLElBQUksQ0FBQ3JxQixLQUFLO01BQzlDc3FCLFNBQVMsR0FBRyxHQUFHO01BQ2ZDLFdBQVcsR0FBRyxpQkFBaUI7SUFDakM7SUFDQTtJQUFBLEtBQ0ssSUFBSW5KLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFDakR5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsT0FBTyxDQUFDLElBQUl5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQ2pEeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFVBQVUsQ0FBQyxFQUFFO01BQ2pFNkwsS0FBSyxHQUFHLFVBQVU7TUFDbEJDLFVBQVUsR0FBR1gsWUFBSyxDQUFDNWMsSUFBSSxJQUFJNGMsWUFBSyxDQUFDdU0sSUFBSSxDQUFDcHBCLElBQUk7TUFDMUNxcEIsU0FBUyxHQUFHLEtBQUs7TUFDakJDLFdBQVcsR0FBRyxVQUFVO0lBQzFCO0lBQ0E7SUFBQSxLQUNLLElBQUluSixLQUFLLENBQUN6TyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQUl5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsV0FBVyxDQUFDLElBQzFEeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFlBQVksQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFdBQVcsQ0FBQyxFQUFFO01BQ3BFNkwsS0FBSyxHQUFHLFdBQVc7TUFDbkJDLFVBQVUsR0FBR1gsWUFBSyxDQUFDWSxPQUFPLElBQUlaLFlBQUssQ0FBQ3VNLElBQUksQ0FBQ0csTUFBTTtNQUMvQ0YsU0FBUyxHQUFHLElBQUk7TUFDaEJDLFdBQVcsR0FBRyxVQUFVO0lBQzFCO0lBQ0E7SUFBQSxLQUNLLElBQUluSixLQUFLLENBQUN6TyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQUl5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsTUFBTSxDQUFDLElBQ2hEeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUFJeU8sS0FBSyxDQUFDek8sUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUNsRHlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxTQUFTLENBQUMsRUFBRTtNQUM1RDZMLEtBQUssR0FBRyxXQUFXO01BQ25CQyxVQUFVLEdBQUdYLFlBQUssQ0FBQzRFLFVBQVUsQ0FBQ2hsQixPQUFPLElBQUlvZ0IsWUFBSyxDQUFDdU0sSUFBSSxDQUFDSSxNQUFNO01BQzFESCxTQUFTLEdBQUcsSUFBSTtNQUNoQkMsV0FBVyxHQUFHLFdBQVc7SUFDM0I7SUFDQTtJQUFBLEtBQ0ssSUFBSW5KLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxVQUFVLENBQUMsSUFBSXlPLEtBQUssQ0FBQ3pPLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFDcER5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsVUFBVSxDQUFDLElBQUl5TyxLQUFLLENBQUN6TyxRQUFRLENBQUMsUUFBUSxDQUFDLEVBQUU7TUFDL0Q2TCxLQUFLLEdBQUcsV0FBVztNQUNuQkMsVUFBVSxHQUFHWCxZQUFLLENBQUM2SSxPQUFPLElBQUk3SSxZQUFLLENBQUN1TSxJQUFJLENBQUNycUIsS0FBSztNQUM5Q3NxQixTQUFTLEdBQUcsR0FBRztNQUNmQyxXQUFXLEdBQUcsWUFBWTtJQUM1QjtJQUVBLE1BQU0zUCxVQUFVLEdBQUduRyxPQUFPLENBQUNqSyxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDUyxJQUFJLENBQUMsQ0FBQzs7SUFFdEQ7SUFDQSxNQUFNaVgsTUFBTSxHQUFHLEdBQUc7SUFDbEIsTUFBTXdJLFlBQVksR0FBR2pNLFVBQVUsQ0FBQyxHQUFHNkwsU0FBUyxJQUFJOUwsS0FBSyxFQUFFLENBQUM7O0lBRXhEO0lBQ0EsT0FBTyxJQUFJLENBQUNELGNBQWMsQ0FBQzNELFVBQVUsRUFBRTtNQUNyQzRELEtBQUssRUFBRWtNLFlBQVk7TUFDbkJqTSxVQUFVLEVBQUcxYSxJQUFJLElBQUtBLElBQUk7TUFBRTtNQUM1QndtQjtJQUNGLENBQUMsQ0FBQztFQUNKO0VBRVFJLGVBQWVBLENBQUM1bUIsSUFBWSxFQUFFN0QsS0FBYSxFQUFZO0lBQzdELElBQUksQ0FBQzZELElBQUksQ0FBQ2tILElBQUksQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLEVBQUUsQ0FBQztJQUM3QixNQUFNbk0sS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTXNqQixLQUFLLEdBQUdyZSxJQUFJLENBQUNrSCxJQUFJLENBQUMsQ0FBQyxDQUFDNEosS0FBSyxDQUFDLEtBQUssQ0FBQztJQUN0QyxJQUFJOUssT0FBTyxHQUFHLEVBQUU7SUFFaEIsS0FBSyxNQUFNNlgsSUFBSSxJQUFJUSxLQUFLLEVBQUU7TUFDeEIsTUFBTXlILFNBQVMsR0FBRzlmLE9BQU8sR0FBRyxHQUFHQSxPQUFPLElBQUk2WCxJQUFJLEVBQUUsR0FBR0EsSUFBSTtNQUN2RCxJQUFJLElBQUksQ0FBQ3NELGFBQWEsQ0FBQzJFLFNBQVMsQ0FBQyxHQUFHM3BCLEtBQUssSUFBSTZKLE9BQU8sRUFBRTtRQUNwRGpMLEtBQUssQ0FBQ0MsSUFBSSxDQUFDZ0wsT0FBTyxDQUFDO1FBQ25CQSxPQUFPLEdBQUc2WCxJQUFJO01BQ2hCLENBQUMsTUFBTTtRQUNMN1gsT0FBTyxHQUFHOGYsU0FBUztNQUNyQjtJQUNGO0lBRUEsSUFBSTlmLE9BQU8sRUFBRTtNQUNYakwsS0FBSyxDQUFDQyxJQUFJLENBQUNnTCxPQUFPLENBQUM7SUFDckI7SUFFQSxPQUFPakwsS0FBSztFQUNkOztFQUVBO0FBQ0Y7QUFDQTtFQUNVOHJCLHNCQUFzQkEsQ0FBQSxFQUFrQjtJQUM5QyxJQUFJLENBQUMsSUFBSSxDQUFDdmpCLGtCQUFrQixFQUFFLE9BQU8sSUFBSTtJQUN6QyxNQUFNd2pCLE9BQU8sR0FBR2pyQixJQUFJLENBQUNHLEtBQUssQ0FBQyxDQUFDNFgsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQyxHQUFHLElBQUksQ0FBQ3JRLGtCQUFrQixJQUFJLElBQUksQ0FBQztJQUN6RSxJQUFJd2pCLE9BQU8sR0FBRyxDQUFDLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUM5QixNQUFNQyxJQUFJLEdBQUdsckIsSUFBSSxDQUFDRyxLQUFLLENBQUM4cUIsT0FBTyxHQUFHLEVBQUUsQ0FBQztJQUNyQyxNQUFNRSxJQUFJLEdBQUdGLE9BQU8sR0FBRyxFQUFFO0lBQ3pCLElBQUlDLElBQUksR0FBRyxDQUFDLEVBQUU7TUFDWixPQUFPLEdBQUdBLElBQUksS0FBS0MsSUFBSSxHQUFHO0lBQzVCO0lBQ0EsT0FBTyxHQUFHQSxJQUFJLEdBQUc7RUFDbkI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVUMsa0JBQWtCQSxDQUFDdlcsT0FBZSxFQUFFK0osS0FBYSxHQUFHLFNBQVMsRUFBVTtJQUM3RSxNQUFNaEgsUUFBUSxHQUFHNVgsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDLElBQUksQ0FBQzdELElBQUksRUFBRSxFQUFFLENBQUM7SUFDeEMsTUFBTXFpQixTQUFTLEdBQUcsSUFBSTVKLEtBQUssR0FBRztJQUM5QixNQUFNeU0sT0FBTyxHQUFHcnJCLElBQUksQ0FBQytKLEdBQUcsQ0FBQyxDQUFDLEVBQUU2TixRQUFRLEdBQUc0USxTQUFTLENBQUMzbEIsTUFBTSxDQUFDO0lBQ3hELE1BQU15b0IsT0FBTyxHQUFHdHJCLElBQUksQ0FBQ0csS0FBSyxDQUFDa3JCLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDdkMsTUFBTUUsUUFBUSxHQUFHdnJCLElBQUksQ0FBQ3dyQixJQUFJLENBQUNILE9BQU8sR0FBRyxDQUFDLENBQUM7O0lBRXZDO0lBQ0EsTUFBTTNILFNBQVMsR0FBR3hGLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQ2prQixNQUFNLENBQUNnc0IsT0FBTyxDQUFDLEdBQUc5QyxTQUFTLEdBQUcsR0FBRyxDQUFDbHBCLE1BQU0sQ0FBQ2lzQixRQUFRLENBQUMsQ0FBQztJQUV4RixPQUFPLEtBQUs3SCxTQUFTLEtBQUs3TyxPQUFPLElBQUk7RUFDdkM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDRTRXLGVBQWVBLENBQUM1VyxPQUFlLEVBQUUrSixLQUFhLEdBQUcsU0FBUyxFQUFRO0lBQ2hFLE1BQU04TSxnQkFBZ0IsR0FBRyxJQUFJLENBQUNOLGtCQUFrQixDQUFDdlcsT0FBTyxFQUFFK0osS0FBSyxDQUFDO0lBQ2hFLElBQUksQ0FBQ3ZZLFVBQVUsQ0FBQ2xILElBQUksQ0FBQztNQUNuQnlDLElBQUksRUFBRSxVQUFVO01BQ2hCaWIsT0FBTyxFQUFFLFVBQVU7TUFDbkJoSSxPQUFPLEVBQUU2VyxnQkFBZ0I7TUFDekI1TyxTQUFTLEVBQUUvRSxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO01BQ3JCNkYsV0FBVyxFQUFFO0lBQ2YsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ3JYLGlCQUFpQixFQUFFO01BQzNCLEtBQUssSUFBSSxDQUFDNFcsWUFBWSxDQUFDLENBQUM7SUFDMUI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNFeU8sb0JBQW9CQSxDQUFBLEVBQVk7SUFDOUI7SUFDQSxNQUFNcFIsU0FBUyxHQUFHLElBQUksQ0FBQ2pULG9CQUFvQixDQUFDeVksR0FBRyxDQUFDLENBQUM7SUFDakQsSUFBSSxDQUFDeEYsU0FBUyxJQUFJLENBQUMsSUFBSSxDQUFDbFQsY0FBYyxFQUFFO01BQ3RDLE9BQU8sS0FBSztJQUNkO0lBRUEsTUFBTXdOLE9BQU8sR0FBRzBGLFNBQVMsRUFBRTFGLE9BQU8sSUFBSSxJQUFJLENBQUN4TixjQUFjLElBQUksRUFBRTtJQUMvRCxNQUFNMGIsUUFBUSxHQUFHeEksU0FBUyxFQUFFd0ksUUFBUSxJQUFJLFFBQVE7O0lBRWhEO0lBQ0EsTUFBTTZJLFlBQVksR0FBRyxJQUFJLENBQUNDLHNCQUFzQixDQUFDOUksUUFBUSxFQUFFbE8sT0FBTyxDQUFDO0lBRW5FLElBQUlpWCxRQUFnQjtJQUNwQixJQUFJRixZQUFZLEVBQUU7TUFDaEI7TUFDQUUsUUFBUSxHQUFHLElBQUksQ0FBQ0MsMEJBQTBCLENBQUNoSixRQUFRLEVBQUVsTyxPQUFPLENBQUM7SUFDL0QsQ0FBQyxNQUFNO01BQ0w7TUFDQSxNQUFNK0osS0FBSyxHQUFHLEdBQUdtRSxRQUFRLEVBQUU7TUFDM0IrSSxRQUFRLEdBQUcsSUFBSSxDQUFDbk4sY0FBYyxDQUFDOUosT0FBTyxFQUFFO1FBQUUrSixLQUFLO1FBQUVDLFVBQVUsRUFBRVgsWUFBSyxDQUFDNWM7TUFBSyxDQUFDLENBQUM7SUFDNUU7SUFFQSxJQUFJLENBQUMrRSxVQUFVLENBQUNsSCxJQUFJLENBQUM7TUFDbkJ5QyxJQUFJLEVBQUUsVUFBVTtNQUNoQmliLE9BQU8sRUFBRSxVQUFVO01BQ25CaEksT0FBTyxFQUFFaVgsUUFBUTtNQUNqQmhQLFNBQVMsRUFBRS9FLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7TUFDckI2RixXQUFXLEVBQUU7SUFDZixDQUFDLENBQUM7O0lBRUY7SUFDQSxJQUFJcEQsU0FBUyxFQUFFO01BQ2IsSUFBSSxDQUFDbFQsY0FBYyxHQUFHLElBQUk7SUFDNUI7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDZixpQkFBaUIsRUFBRTtNQUMzQixLQUFLLElBQUksQ0FBQzRXLFlBQVksQ0FBQyxDQUFDO0lBQzFCO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0VBQ1UyTyxzQkFBc0JBLENBQUM5SSxRQUFnQixFQUFFbE8sT0FBZSxFQUFXO0lBQ3pFLE1BQU01USxJQUFJLEdBQUc4ZSxRQUFRLENBQUNqUSxXQUFXLENBQUMsQ0FBQztJQUNuQztJQUNBLElBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsY0FBYyxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQ0MsUUFBUSxDQUFDOU8sSUFBSSxDQUFDLEVBQUU7TUFDckYsT0FBTyxJQUFJO0lBQ2I7SUFDQTtJQUNBO0lBQ0E7SUFDQTtJQUNBLElBQUksc0JBQXNCLENBQUNxUSxJQUFJLENBQUNPLE9BQU8sQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDdkQsSUFBSSxpQkFBaUIsQ0FBQ1AsSUFBSSxDQUFDTyxPQUFPLENBQUMsRUFBRSxPQUFPLElBQUksQ0FBQyxDQUFDO0lBQ2xELElBQUksb0JBQW9CLENBQUNQLElBQUksQ0FBQ08sT0FBTyxDQUFDLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQztJQUNyRCxJQUFJLGdCQUFnQixDQUFDUCxJQUFJLENBQUNPLE9BQU8sQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDakQsT0FBTyxLQUFLO0VBQ2Q7O0VBRUE7QUFDRjtBQUNBO0VBQ1VrWCwwQkFBMEJBLENBQUNoSixRQUFnQixFQUFFbE8sT0FBZSxFQUFVO0lBQzVFLE1BQU0zVixLQUFLLEdBQUcyVixPQUFPLENBQUNJLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakMsTUFBTStXLE1BQU0sR0FBRyxLQUFLOU4sWUFBSyxDQUFDNWMsSUFBSSxDQUFDeWhCLFFBQVEsQ0FBQyxHQUFHN0UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsYUFBYSxDQUFDLElBQUk7SUFDNUUsTUFBTUwsTUFBTSxHQUFHLElBQUk7SUFDbkIsTUFBTXRMLFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQztJQUVyQyxNQUFNb1UsY0FBYyxHQUFHL3NCLEtBQUssQ0FBQzhFLEdBQUcsQ0FBQ2lhLElBQUksSUFBSTtNQUN2QztNQUNBLElBQUlBLElBQUksQ0FBQ3BiLE1BQU0sR0FBRytVLFFBQVEsRUFBRTtRQUMxQixPQUFPc0wsTUFBTSxHQUFHakYsSUFBSSxDQUFDeFQsS0FBSyxDQUFDLENBQUMsRUFBRW1OLFFBQVEsR0FBRyxDQUFDLENBQUMsR0FBRyxHQUFHO01BQ25EO01BQ0EsT0FBT3NMLE1BQU0sR0FBR2pGLElBQUk7SUFDdEIsQ0FBQyxDQUFDO0lBRUYsT0FBTytOLE1BQU0sR0FBR0MsY0FBYyxDQUFDdnNCLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJO0VBQ2xEOztFQUVBO0FBQ0Y7QUFDQTtFQUNFd3NCLHVCQUF1QkEsQ0FBQSxFQUFXO0lBQ2hDLE9BQU8sSUFBSSxDQUFDNWtCLG9CQUFvQixDQUFDekUsTUFBTTtFQUN6Qzs7RUFFQTtBQUNGO0FBQ0E7RUFDRWdVLHFCQUFxQkEsQ0FBQSxFQUFTO0lBQzVCLElBQUksQ0FBQ3ZQLG9CQUFvQixHQUFHLEVBQUU7SUFDOUIsSUFBSSxDQUFDRCxjQUFjLEdBQUcsSUFBSTtFQUM1Qjs7RUFFQTs7RUFFQThrQixPQUFPQSxDQUFDbGxCLElBQTBCLEVBQVE7SUFDeEMsTUFBTW1sQixZQUFZLEdBQUcsSUFBSSxDQUFDbmxCLElBQUksS0FBSyxXQUFXO0lBQzlDLElBQUksQ0FBQ0EsSUFBSSxHQUFHQSxJQUFJOztJQUVoQjtJQUNBLElBQUlBLElBQUksS0FBSyxXQUFXLElBQUksQ0FBQ21sQixZQUFZLEVBQUU7TUFDekMsSUFBSSxDQUFDM2tCLGtCQUFrQixHQUFHc1EsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztNQUNwQyxJQUFJLENBQUNuUCxlQUFlLEdBQUcsQ0FBQyxDQUFDLENBQUM7TUFDMUIsSUFBSSxDQUFDeEIsc0JBQXNCLEdBQUcsRUFBRSxDQUFDLENBQUM7TUFDbEMsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxDQUFDO01BQzlCLElBQUksQ0FBQ0YsbUJBQW1CLEdBQUcsRUFBRSxDQUFDLENBQUM7TUFDL0I7TUFDQSxJQUFJLElBQUksQ0FBQ3VFLFdBQVcsQ0FBQzVJLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDL0IsSUFBSSxDQUFDNEksV0FBVyxHQUFHLEVBQUU7TUFDdkI7TUFDQSxJQUFJLENBQUM0Z0IscUJBQXFCLENBQUMsQ0FBQztJQUM5QixDQUFDLE1BQU0sSUFBSXBsQixJQUFJLEtBQUssTUFBTSxJQUFJbWxCLFlBQVksRUFBRTtNQUMxQyxJQUFJLENBQUMza0Isa0JBQWtCLEdBQUcsSUFBSTtNQUM5QixJQUFJLENBQUM2a0Isb0JBQW9CLENBQUMsQ0FBQztJQUM3QjtJQUVBLElBQUlGLFlBQVksSUFBSW5sQixJQUFJLEtBQUssTUFBTSxFQUFFO01BQ25DO01BQ0E7TUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDakIsU0FBUyxJQUFJLElBQUksQ0FBQ2tILFdBQVcsRUFBRTtRQUN2QyxJQUFJLENBQUNzRCxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUVBLElBQUksQ0FBQyxJQUFJLENBQUN6RCwwQkFBMEIsRUFBRTtRQUNwQztRQUNBLElBQUksQ0FBQzBELEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDaEIsSUFBSSxDQUFDMUQsMEJBQTBCLEdBQUcsSUFBSTtNQUN4Qzs7TUFFQTtNQUNBLElBQUksQ0FBQzVGLHNCQUFzQixHQUFHLEVBQUU7TUFDaEMsSUFBSSxDQUFDQyxxQkFBcUIsR0FBRyxDQUFDO01BQzlCO01BQ0EsSUFBSSxDQUFDRixtQkFBbUIsR0FBRyxFQUFFO0lBQy9CO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQ2xCLFNBQVMsRUFBRTtNQUNuQjtNQUNBLElBQUksQ0FBQ29LLFlBQVksQ0FBQyxDQUFDO0lBQ3JCO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1VpYyxxQkFBcUJBLENBQUEsRUFBUztJQUNwQyxJQUFJLElBQUksQ0FBQ3BrQixlQUFlLEVBQUUsT0FBTyxDQUFDO0lBQ2xDLElBQUksQ0FBQ0QsWUFBWSxHQUFHLENBQUM7SUFDckIsSUFBSSxDQUFDUyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0csaUJBQWlCLEdBQUcsQ0FBQztJQUMxQixJQUFJLENBQUNYLGVBQWUsR0FBR3NrQixXQUFXLENBQUMsTUFBTTtNQUN2QyxJQUFJLENBQUN2a0IsWUFBWSxHQUFHLENBQUMsSUFBSSxDQUFDQSxZQUFZLEdBQUcsQ0FBQyxJQUFJd2tCLG9CQUFhLENBQUNDLE9BQU8sQ0FBQzVwQixNQUFNO01BQzFFLElBQUksQ0FBQzRGLGlCQUFpQixHQUFHLENBQUMsSUFBSSxDQUFDQSxpQkFBaUIsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQzdGLE1BQU07TUFDdEY7TUFDQSxJQUFJLElBQUksQ0FBQ21GLFlBQVksR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQy9CLElBQUksQ0FBQ1ksaUJBQWlCLEdBQUcsQ0FBQyxJQUFJLENBQUNBLGlCQUFpQixHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNDLGtCQUFrQixDQUFDaEcsTUFBTTtNQUN4RjtNQUNBO01BQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ21ELFNBQVMsSUFBSSxJQUFJLENBQUNpQixJQUFJLEtBQUssV0FBVyxFQUFFO1FBQ2hELElBQUksQ0FBQ21KLFlBQVksQ0FBQyxDQUFDO01BQ3JCO0lBQ0YsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDWDs7RUFFQTtBQUNGO0FBQ0E7RUFDVWtjLG9CQUFvQkEsQ0FBQSxFQUFTO0lBQ25DLElBQUksSUFBSSxDQUFDcmtCLGVBQWUsRUFBRTtNQUN4QjZJLGFBQWEsQ0FBQyxJQUFJLENBQUM3SSxlQUFlLENBQUM7TUFDbkMsSUFBSSxDQUFDQSxlQUFlLEdBQUcsSUFBSTtJQUM3QjtJQUNBLElBQUksQ0FBQ0QsWUFBWSxHQUFHLENBQUM7SUFDckIsSUFBSSxDQUFDUyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0YsZUFBZSxHQUFHLElBQUk7SUFDM0IsSUFBSSxDQUFDSyxpQkFBaUIsR0FBRyxDQUFDO0VBQzVCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ0U4akIsV0FBV0EsQ0FBQ2hzQixPQUFzQixFQUFRO0lBQ3hDLElBQUksQ0FBQzZILGVBQWUsR0FBRzdILE9BQU87SUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQ3NGLFNBQVMsRUFBRTtNQUNuQixJQUFJLENBQUNvSyxZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtFQUNFdWMscUJBQXFCQSxDQUFDQyxNQUFjLEVBQVE7SUFDMUMsSUFBSSxDQUFDamtCLGVBQWUsR0FBR2lrQixNQUFNO0VBQy9COztFQUVBO0FBQ0Y7QUFDQTtFQUNVQyxnQkFBZ0JBLENBQUNELE1BQWMsRUFBVTtJQUMvQyxJQUFJQSxNQUFNLEdBQUcsSUFBSSxFQUFFLE9BQU9yYSxNQUFNLENBQUNxYSxNQUFNLENBQUM7SUFDeEMsSUFBSUEsTUFBTSxHQUFHLEtBQUssRUFBRSxPQUFPLEdBQUcsQ0FBQ0EsTUFBTSxHQUFHLElBQUksRUFBRUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxHQUFHO0lBQzNELE9BQU8sR0FBRzlzQixJQUFJLENBQUNDLEtBQUssQ0FBQzJzQixNQUFNLEdBQUcsSUFBSSxDQUFDLEdBQUc7RUFDeEM7RUFFQUcsT0FBT0EsQ0FBQSxFQUF5QjtJQUM5QixPQUFPLElBQUksQ0FBQzlsQixJQUFJO0VBQ2xCO0VBRUErbEIsWUFBWUEsQ0FBQ3RzQixPQUFzQixFQUFRO0lBQ3pDLElBQUksQ0FBQ3VzQixrQkFBa0IsQ0FBQztNQUFFQyxJQUFJLEVBQUV4c0IsT0FBTztNQUFFeXNCLFFBQVEsRUFBRSxJQUFJO01BQUVDLFNBQVMsRUFBRTtJQUFLLENBQUMsQ0FBQztFQUM3RTtFQUVBSCxrQkFBa0JBLENBQ2hCbHFCLE1BQXFGLEVBQ3JGWSxPQUE2QixHQUFHLENBQUMsQ0FBQyxFQUM1QjtJQUNOLE1BQU0wcEIsYUFBYSxHQUFHLElBQUksQ0FBQ3psQixlQUFlO0lBQzFDLElBQUkwbEIsT0FBTyxHQUFHLEtBQUs7SUFDbkIsSUFBSUMsV0FBVyxHQUFHLEtBQUs7SUFDdkIsSUFBSUMsZUFBZSxHQUFHLEtBQUs7SUFFM0IsSUFBSXpxQixNQUFNLENBQUNtcUIsSUFBSSxLQUFLaE8sU0FBUyxJQUFJbmMsTUFBTSxDQUFDbXFCLElBQUksS0FBSyxJQUFJLENBQUN4bEIsYUFBYSxFQUFFO01BQ25FLElBQUksQ0FBQ0EsYUFBYSxHQUFHM0UsTUFBTSxDQUFDbXFCLElBQUk7TUFDaENJLE9BQU8sR0FBRyxJQUFJO01BQ2RDLFdBQVcsR0FBRyxJQUFJO0lBQ3BCO0lBQ0EsSUFBSXhxQixNQUFNLENBQUNvcUIsUUFBUSxLQUFLak8sU0FBUyxJQUFJbmMsTUFBTSxDQUFDb3FCLFFBQVEsS0FBSyxJQUFJLENBQUN4bEIsY0FBYyxFQUFFO01BQzVFLElBQUksQ0FBQ0EsY0FBYyxHQUFHNUUsTUFBTSxDQUFDb3FCLFFBQVE7TUFDckNHLE9BQU8sR0FBRyxJQUFJO01BQ2RFLGVBQWUsR0FBRyxJQUFJO0lBQ3hCO0lBRUEsTUFBTUMsZ0JBQWdCLEdBQUcxcUIsTUFBTSxDQUFDcXFCLFNBQVMsS0FBS2xPLFNBQVMsSUFBSW5jLE1BQU0sQ0FBQ3FxQixTQUFTLEtBQUtDLGFBQWE7SUFDN0YsSUFBSXRxQixNQUFNLENBQUNxcUIsU0FBUyxLQUFLbE8sU0FBUyxFQUFFO01BQ2xDLElBQUl1TyxnQkFBZ0IsRUFBRTtRQUNwQkgsT0FBTyxHQUFHLElBQUk7TUFDaEI7TUFDQSxJQUFJLENBQUMxbEIsZUFBZSxHQUFHN0UsTUFBTSxDQUFDcXFCLFNBQVM7SUFDekM7SUFFQSxNQUFNTSxrQkFBa0IsR0FDdEJELGdCQUFnQixJQUFJSixhQUFhLEtBQUssSUFBSSxJQUFJdHFCLE1BQU0sQ0FBQ3FxQixTQUFTLEtBQUssSUFBSSxJQUFJLElBQUksQ0FBQ25tQixJQUFJLEtBQUssV0FBVztJQUN0RyxNQUFNMG1CLGdCQUFnQixHQUNwQkYsZ0JBQWdCLElBQUkxcUIsTUFBTSxDQUFDcXFCLFNBQVMsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDbm1CLElBQUksS0FBSyxXQUFXO0lBQzVFLE1BQU0ybUIsb0JBQW9CLEdBQUdILGdCQUFnQixJQUFJLENBQUNGLFdBQVcsSUFBSSxDQUFDQyxlQUFlO0lBQ2pGLE1BQU1LLG1CQUFtQixHQUN2QkQsb0JBQW9CLElBQUksSUFBSSxDQUFDM21CLElBQUksS0FBSyxXQUFXLElBQUksQ0FBQ3ltQixrQkFBa0IsSUFBSSxDQUFDQyxnQkFBZ0I7SUFFL0YsTUFBTUcsWUFBWSxHQUFHbnFCLE9BQU8sQ0FBQzhOLE1BQU0sS0FBSyxLQUFLLElBQUk2YixPQUFPLElBQUksQ0FBQ08sbUJBQW1CO0lBQ2hGLElBQUlDLFlBQVksRUFBRTtNQUNoQixJQUFJLENBQUMxZCxZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGO0VBRUEyZCxnQkFBZ0JBLENBQ2RuWSxJQWNDLEVBQ0RqUyxPQUE2QixHQUFHLENBQUMsQ0FBQyxFQUM1QjtJQUNOLE1BQU0wWSxJQUFJLEdBQUc7TUFBRSxHQUFHLElBQUksQ0FBQ2xULFVBQVU7TUFBRSxHQUFHeU07SUFBSyxDQUFDO0lBQzVDLE1BQU0wWCxPQUFPLEdBQUd2WCxJQUFJLENBQUNDLFNBQVMsQ0FBQ3FHLElBQUksQ0FBQyxLQUFLdEcsSUFBSSxDQUFDQyxTQUFTLENBQUMsSUFBSSxDQUFDN00sVUFBVSxDQUFDO0lBQ3hFLElBQUksQ0FBQ0EsVUFBVSxHQUFHa1QsSUFBSTtJQUN0QixNQUFNeVIsWUFBWSxHQUFHbnFCLE9BQU8sQ0FBQzhOLE1BQU0sS0FBSyxLQUFLLElBQUk2YixPQUFPO0lBQ3hELElBQUlRLFlBQVksRUFBRTtNQUNoQixJQUFJLENBQUMxZCxZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGO0VBRUE0ZCxpQkFBaUJBLENBQUNDLEtBQStCLEVBQVE7SUFDdkQsSUFBSSxDQUFDN2tCLFdBQVcsR0FBRztNQUFFLEdBQUcsSUFBSSxDQUFDQSxXQUFXO01BQUUsR0FBRzZrQjtJQUFNLENBQUM7SUFDcEQsSUFDRSxDQUFDQSxLQUFLLENBQUNDLGNBQWMsSUFDckIsQ0FBQ0QsS0FBSyxDQUFDRSxzQkFBc0IsSUFDN0IsQ0FBQ0YsS0FBSyxDQUFDRyxrQkFBa0IsSUFDekIsQ0FBQ0gsS0FBSyxDQUFDSSxlQUFlLElBQ3RCLENBQUNKLEtBQUssQ0FBQ0ssV0FBVyxFQUNsQjtNQUNBLElBQUksQ0FBQ3huQixtQkFBbUIsQ0FBQ3luQixLQUFLLENBQUMsQ0FBQztJQUNsQztJQUNBO0lBQ0EsSUFBSSxDQUFDNWdCLGVBQWUsR0FBRyxJQUFJO0lBQzNCLElBQUksQ0FBQzZHLHFCQUFxQixDQUFDLENBQUM7RUFDOUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDRWdhLGNBQWNBLENBQUN6ckIsTUFBOEIsRUFBUTtJQUNuRCxNQUFNc1osSUFBSSxHQUFHO01BQUUsR0FBRyxJQUFJLENBQUM1UyxRQUFRO01BQUUsR0FBRzFHO0lBQU8sQ0FBQztJQUM1QyxNQUFNdXFCLE9BQU8sR0FBR3ZYLElBQUksQ0FBQ0MsU0FBUyxDQUFDcUcsSUFBSSxDQUFDLEtBQUt0RyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxJQUFJLENBQUN2TSxRQUFRLENBQUM7SUFDdEUsSUFBSSxDQUFDQSxRQUFRLEdBQUc0UyxJQUFJO0lBQ3BCLElBQUlpUixPQUFPLEVBQUU7TUFDWCxJQUFJLENBQUNsZCxZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGOztFQUVBO0FBQ0Y7QUFDQTtFQUNFcWUsYUFBYUEsQ0FBQSxFQUFTO0lBQ3BCLElBQUksQ0FBQ2hsQixRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQ2xCLElBQUksQ0FBQzJHLFlBQVksQ0FBQyxDQUFDO0VBQ3JCOztFQUVBO0FBQ0Y7QUFDQTtFQUNFc2UsV0FBV0EsQ0FBQSxFQUE0QjtJQUNyQyxPQUFPLElBQUksQ0FBQ2psQixRQUFRO0VBQ3RCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VrbEIsdUJBQXVCQSxDQUFDNXJCLE1BQWtDLEVBQVE7SUFDaEUsTUFBTXNaLElBQUksR0FBRztNQUFFLEdBQUcsSUFBSSxDQUFDM1MsaUJBQWlCO01BQUUsR0FBRzNHO0lBQU8sQ0FBQztJQUNyRCxNQUFNdXFCLE9BQU8sR0FBR3ZYLElBQUksQ0FBQ0MsU0FBUyxDQUFDcUcsSUFBSSxDQUFDLEtBQUt0RyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxJQUFJLENBQUN0TSxpQkFBaUIsQ0FBQztJQUMvRSxJQUFJLENBQUNBLGlCQUFpQixHQUFHMlMsSUFBSTtJQUM3QixJQUFJaVIsT0FBTyxFQUFFO01BQ1gsSUFBSSxDQUFDbGQsWUFBWSxDQUFDLENBQUM7SUFDckI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7RUFDRXdlLDBCQUEwQkEsQ0FDeEIzcUIsSUFBNEQsRUFDNURqQixPQUFpSSxFQUMzSDtJQUNOLE1BQU02ckIsV0FBVyxHQUFHLENBQUMsSUFBSSxDQUFDbmxCLGlCQUFpQixDQUFDRyxnQkFBZ0IsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN0RSxNQUFNaWxCLE9BQW1DLEdBQUc7TUFDMUNDLFlBQVksRUFBRTlxQixJQUFJO01BQ2xCNEYsZ0JBQWdCLEVBQUVnbEI7SUFDcEIsQ0FBQztJQUVELElBQUk1cUIsSUFBSSxLQUFLLFNBQVMsSUFBSWpCLE9BQU8sRUFBRTtNQUNqQzhyQixPQUFPLENBQUNFLE9BQU8sR0FBRztRQUNoQkMsTUFBTSxFQUFFLElBQUk7UUFDWkMsV0FBVyxFQUFFbHNCLE9BQU8sQ0FBQ2tVLE9BQU87UUFDNUJpWSxZQUFZLEVBQUVuc0IsT0FBTyxDQUFDb3NCLFFBQVE7UUFDOUJDLFNBQVMsRUFBRSxDQUFDLElBQUksQ0FBQzNsQixpQkFBaUIsQ0FBQ3NsQixPQUFPLEVBQUVLLFNBQVMsSUFBSSxDQUFDLElBQUk7TUFDaEUsQ0FBQztJQUNILENBQUMsTUFBTSxJQUFJcHJCLElBQUksS0FBSyxPQUFPLElBQUlqQixPQUFPLEVBQUU7TUFDdEM4ckIsT0FBTyxDQUFDUSxLQUFLLEdBQUc7UUFDZEwsTUFBTSxFQUFFLElBQUk7UUFDWk0sVUFBVSxFQUFFdnNCLE9BQU8sQ0FBQzBhLE1BQU07UUFDMUI4UixhQUFhLEVBQUV4c0IsT0FBTyxDQUFDeXNCLFFBQVE7UUFDL0JDLFVBQVUsRUFBRSxDQUFDLElBQUksQ0FBQ2htQixpQkFBaUIsQ0FBQzRsQixLQUFLLEVBQUVJLFVBQVUsSUFBSSxDQUFDLElBQUk7TUFDaEUsQ0FBQztJQUNILENBQUMsTUFBTSxJQUFJenJCLElBQUksS0FBSyxPQUFPLElBQUlqQixPQUFPLEVBQUU7TUFDdEM4ckIsT0FBTyxDQUFDYixLQUFLLEdBQUc7UUFDZGdCLE1BQU0sRUFBRSxJQUFJO1FBQ1pVLFVBQVUsRUFBRTNzQixPQUFPLENBQUM0c0IsTUFBTTtRQUMxQkMsVUFBVSxFQUFFN3NCLE9BQU8sQ0FBQzhzQixTQUFTO1FBQzdCQyxVQUFVLEVBQUU7TUFDZCxDQUFDO0lBQ0g7SUFFQSxJQUFJLENBQUNwQix1QkFBdUIsQ0FBQ0csT0FBTyxDQUFDO0VBQ3ZDOztFQUVBO0FBQ0Y7QUFDQTtFQUNFa0Isb0JBQW9CQSxDQUFBLEVBQWdDO0lBQ2xELE9BQU8sSUFBSSxDQUFDdG1CLGlCQUFpQjtFQUMvQjtFQUVBdW1CLGNBQWNBLENBQUMvd0IsS0FBZSxFQUFRO0lBQ3BDLE1BQU04YixVQUFVLEdBQUcsQ0FBQzliLEtBQUssSUFBSSxFQUFFLEVBQUU4RSxHQUFHLENBQUNpYSxJQUFJLElBQUlBLElBQUksQ0FBQ3JULE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkUsTUFBTXNsQixVQUFVLEdBQUdsVixVQUFVLENBQUM1QixJQUFJLENBQUU2RSxJQUFJLElBQUtBLElBQUksQ0FBQzVTLElBQUksQ0FBQyxDQUFDLENBQUN4SSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ3BFLElBQUksQ0FBQ3F0QixVQUFVLEVBQUU7TUFDZixJQUFJLElBQUksQ0FBQ3prQixXQUFXLENBQUM1SSxNQUFNLEVBQUU7UUFDM0IsSUFBSSxDQUFDNEksV0FBVyxHQUFHLEVBQUU7UUFDckIsSUFBSSxDQUFDMkUsWUFBWSxDQUFDLENBQUM7TUFDckI7TUFDQTtJQUNGO0lBQ0EsTUFBTTRQLE9BQU8sR0FBRyxJQUFJLENBQUNtUSxnQkFBZ0IsQ0FBQ25WLFVBQVUsQ0FBQztJQUNqRCxJQUFJakYsSUFBSSxDQUFDQyxTQUFTLENBQUNnSyxPQUFPLENBQUMsS0FBS2pLLElBQUksQ0FBQ0MsU0FBUyxDQUFDLElBQUksQ0FBQ3ZLLFdBQVcsQ0FBQyxFQUFFO01BQ2hFO0lBQ0Y7SUFDQSxJQUFJLENBQUNBLFdBQVcsR0FBR3VVLE9BQU87SUFDMUIsSUFBSSxDQUFDNVAsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFQWdnQixtQkFBbUJBLENBQUEsRUFBWTtJQUM3QixPQUFPLElBQUksQ0FBQ25xQixXQUFXLElBQUksQ0FBQyxJQUFJLENBQUNELFNBQVM7RUFDNUM7RUFFQXFxQixnQkFBZ0JBLENBQUEsRUFBUztJQUN2QixJQUFJLENBQUMsSUFBSSxDQUFDNWtCLFdBQVcsQ0FBQzVJLE1BQU0sRUFBRTtJQUM5QixJQUFJLENBQUM0SSxXQUFXLEdBQUcsRUFBRTtJQUNyQixJQUFJLENBQUMyRSxZQUFZLENBQUMsQ0FBQztFQUNyQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNFa2dCLE9BQU9BLENBQ0xDLEtBQWlCLEVBQ2pCNXNCLE9BQWtELEdBQUcsQ0FBQyxDQUFDLEVBQ3ZENnNCLFFBQXlDLEVBQ25DO0lBQ04sSUFBSSxDQUFDLElBQUksQ0FBQ0osbUJBQW1CLENBQUMsQ0FBQyxFQUFFO01BQy9CO01BQ0FJLFFBQVEsQ0FBQ0QsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLElBQUksQ0FBQztNQUMxQjtJQUNGO0lBRUEsSUFBSSxDQUFDaGlCLFNBQVMsR0FBR2dpQixLQUFLO0lBQ3RCLElBQUksQ0FBQy9oQixTQUFTLEdBQUc3SyxPQUFPLENBQUM4c0IsWUFBWSxJQUFJRixLQUFLLENBQUMxVSxTQUFTLENBQUN6ZCxDQUFDLElBQUlBLENBQUMsQ0FBQ3N5QixRQUFRLENBQUMsSUFBSSxDQUFDO0lBQzlFLElBQUksSUFBSSxDQUFDbGlCLFNBQVMsR0FBRyxDQUFDLEVBQUUsSUFBSSxDQUFDQSxTQUFTLEdBQUcsQ0FBQztJQUMxQyxJQUFJLENBQUNDLFNBQVMsR0FBRzlLLE9BQU8sQ0FBQzNFLEtBQUssSUFBSSxJQUFJO0lBQ3RDLElBQUksQ0FBQzBQLFlBQVksR0FBRzhoQixRQUFRO0lBQzVCLElBQUksQ0FBQ0csZUFBZSxDQUFDLENBQUM7RUFDeEI7O0VBRUE7QUFDRjtBQUNBO0VBQ0VsWixTQUFTQSxDQUFBLEVBQVM7SUFDaEIsSUFBSSxDQUFDLElBQUksQ0FBQ0gsWUFBWSxDQUFDLENBQUMsRUFBRTtJQUMxQixNQUFNa1osUUFBUSxHQUFHLElBQUksQ0FBQzloQixZQUFZO0lBQ2xDLElBQUksQ0FBQ0gsU0FBUyxHQUFHLEVBQUU7SUFDbkIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsQ0FBQztJQUNsQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJO0lBQ3JCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7SUFDeEIsSUFBSSxDQUFDMmhCLGdCQUFnQixDQUFDLENBQUM7SUFDdkJHLFFBQVEsR0FBRyxJQUFJLENBQUM7RUFDbEI7O0VBRUE7QUFDRjtBQUNBO0VBQ0VsWixZQUFZQSxDQUFBLEVBQVk7SUFDdEIsT0FBTyxJQUFJLENBQUMvSSxTQUFTLENBQUMxTCxNQUFNLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQzZMLFlBQVksS0FBSyxJQUFJO0VBQ2hFOztFQUVBO0FBQ0Y7QUFDQTtFQUNVaWlCLGVBQWVBLENBQUEsRUFBUztJQUM5QixJQUFJLENBQUMsSUFBSSxDQUFDclosWUFBWSxDQUFDLENBQUMsRUFBRTtJQUUxQixNQUFNcFksS0FBZSxHQUFHLEVBQUU7O0lBRTFCO0lBQ0EsSUFBSSxJQUFJLENBQUN1UCxTQUFTLEVBQUU7TUFDbEJ2UCxLQUFLLENBQUNDLElBQUksQ0FBQ0MsY0FBSyxDQUFDRyxJQUFJLENBQUM2RSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUMsSUFBSSxDQUFDcUssU0FBUyxDQUFDLENBQUM7TUFDckR2UCxLQUFLLENBQUNDLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDaEI7O0lBRUE7SUFDQSxLQUFLLElBQUlmLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUNtUSxTQUFTLENBQUMxTCxNQUFNLEVBQUV6RSxDQUFDLEVBQUUsRUFBRTtNQUM5QyxNQUFNZ2pCLElBQUksR0FBRyxJQUFJLENBQUM3UyxTQUFTLENBQUNuUSxDQUFDLENBQUU7TUFDL0IsTUFBTXd5QixVQUFVLEdBQUd4eUIsQ0FBQyxLQUFLLElBQUksQ0FBQ29RLFNBQVM7TUFDdkMsTUFBTXFpQixVQUFVLEdBQUd6UCxJQUFJLENBQUMwUCxRQUFRO01BQ2hDLE1BQU1KLFFBQVEsR0FBR3RQLElBQUksQ0FBQ3NQLFFBQVE7TUFFOUIsSUFBSXpTLElBQUksR0FBRyxFQUFFOztNQUViO01BQ0EsSUFBSTJTLFVBQVUsRUFBRTtRQUNkM1MsSUFBSSxJQUFJN2UsY0FBSyxDQUFDZ0YsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDLElBQUksQ0FBQztNQUNwQyxDQUFDLE1BQU07UUFDTDZaLElBQUksSUFBSSxJQUFJO01BQ2Q7O01BRUE7TUFDQSxJQUFJNFMsVUFBVSxFQUFFO1FBQ2Q1UyxJQUFJLElBQUk3ZSxjQUFLLENBQUMyeEIsR0FBRyxDQUFDM1AsSUFBSSxDQUFDeEMsS0FBSyxDQUFDO01BQy9CLENBQUMsTUFBTSxJQUFJZ1MsVUFBVSxFQUFFO1FBQ3JCM1MsSUFBSSxJQUFJN2UsY0FBSyxDQUFDRyxJQUFJLENBQUM2RSxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUNnZCxJQUFJLENBQUN4QyxLQUFLLENBQUM7TUFDL0MsQ0FBQyxNQUFNLElBQUk4UixRQUFRLEVBQUU7UUFDbkJ6UyxJQUFJLElBQUk3ZSxjQUFLLENBQUNnRixHQUFHLENBQUMsU0FBUyxDQUFDLENBQUNnZCxJQUFJLENBQUN4QyxLQUFLLENBQUM7TUFDMUMsQ0FBQyxNQUFNO1FBQ0xYLElBQUksSUFBSTdlLGNBQUssQ0FBQ0ssS0FBSyxDQUFDMmhCLElBQUksQ0FBQ3hDLEtBQUssQ0FBQztNQUNqQzs7TUFFQTtNQUNBLElBQUk4UixRQUFRLEVBQUU7UUFDWnpTLElBQUksSUFBSTdlLGNBQUssQ0FBQzJ4QixHQUFHLENBQUMsWUFBWSxDQUFDO01BQ2pDOztNQUVBO01BQ0EsSUFBSTNQLElBQUksQ0FBQ3ZmLFdBQVcsRUFBRTtRQUNwQixNQUFNbXZCLElBQUksR0FBR0gsVUFBVSxHQUFHenhCLGNBQUssQ0FBQzJ4QixHQUFHLENBQUMzUCxJQUFJLENBQUN2ZixXQUFXLENBQUMsR0FBR3pDLGNBQUssQ0FBQzJ4QixHQUFHLENBQUMsTUFBTTNQLElBQUksQ0FBQ3ZmLFdBQVcsRUFBRSxDQUFDO1FBQzNGb2MsSUFBSSxJQUFJK1MsSUFBSTtNQUNkO01BRUE5eEIsS0FBSyxDQUFDQyxJQUFJLENBQUM4ZSxJQUFJLENBQUM7SUFDbEI7O0lBRUE7SUFDQS9lLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNkRCxLQUFLLENBQUNDLElBQUksQ0FBQ0MsY0FBSyxDQUFDMnhCLEdBQUcsQ0FBQyx5Q0FBeUMsQ0FBQyxDQUFDO0lBRWhFLElBQUksQ0FBQ2QsY0FBYyxDQUFDL3dCLEtBQUssQ0FBQztFQUM1Qjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVcVksWUFBWUEsQ0FBQzRFLFNBQWlCLEVBQVc7SUFDL0MsSUFBSSxDQUFDLElBQUksQ0FBQzdFLFlBQVksQ0FBQyxDQUFDLEVBQUUsT0FBTyxLQUFLOztJQUV0QztJQUNBLElBQUkyWixRQUFRLEdBQUcsSUFBSSxDQUFDemlCLFNBQVM7SUFDN0IsSUFBSTBpQixRQUFRLEdBQUcsQ0FBQztJQUNoQixNQUFNQyxXQUFXLEdBQUcsSUFBSSxDQUFDNWlCLFNBQVMsQ0FBQzFMLE1BQU07SUFFekMsR0FBRztNQUNEb3VCLFFBQVEsR0FBRyxDQUFDQSxRQUFRLEdBQUc5VSxTQUFTLEdBQUcsSUFBSSxDQUFDNU4sU0FBUyxDQUFDMUwsTUFBTSxJQUFJLElBQUksQ0FBQzBMLFNBQVMsQ0FBQzFMLE1BQU07TUFDakZxdUIsUUFBUSxFQUFFO0lBQ1osQ0FBQyxRQUFRLElBQUksQ0FBQzNpQixTQUFTLENBQUMwaUIsUUFBUSxDQUFDLEVBQUVILFFBQVEsSUFBSUksUUFBUSxHQUFHQyxXQUFXO0lBRXJFLElBQUlGLFFBQVEsS0FBSyxJQUFJLENBQUN6aUIsU0FBUyxFQUFFO01BQy9CLElBQUksQ0FBQ0EsU0FBUyxHQUFHeWlCLFFBQVE7TUFDekIsSUFBSSxDQUFDTixlQUFlLENBQUMsQ0FBQztJQUN4QjtJQUVBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1VuWixjQUFjQSxDQUFBLEVBQVk7SUFDaEMsSUFBSSxDQUFDLElBQUksQ0FBQ0YsWUFBWSxDQUFDLENBQUMsRUFBRSxPQUFPLEtBQUs7SUFFdEMsTUFBTThKLElBQUksR0FBRyxJQUFJLENBQUM3UyxTQUFTLENBQUMsSUFBSSxDQUFDQyxTQUFTLENBQUM7SUFDM0MsSUFBSSxDQUFDNFMsSUFBSSxJQUFJQSxJQUFJLENBQUMwUCxRQUFRLEVBQUUsT0FBTyxJQUFJLENBQUMsQ0FBQzs7SUFFekMsTUFBTU4sUUFBUSxHQUFHLElBQUksQ0FBQzloQixZQUFZO0lBQ2xDLElBQUksQ0FBQ0gsU0FBUyxHQUFHLEVBQUU7SUFDbkIsSUFBSSxDQUFDQyxTQUFTLEdBQUcsQ0FBQztJQUNsQixJQUFJLENBQUNDLFNBQVMsR0FBRyxJQUFJO0lBQ3JCLElBQUksQ0FBQ0MsWUFBWSxHQUFHLElBQUk7SUFDeEIsSUFBSSxDQUFDMmhCLGdCQUFnQixDQUFDLENBQUM7SUFDdkJHLFFBQVEsR0FBR3BQLElBQUksQ0FBQztJQUVoQixPQUFPLElBQUk7RUFDYjtFQUVRK08sZ0JBQWdCQSxDQUFDanhCLEtBQWUsRUFBWTtJQUNsRCxNQUFNa3lCLFFBQVEsR0FBR3B4QixJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFL0osSUFBSSxDQUFDZ0ssR0FBRyxDQUFDLElBQUksQ0FBQzlCLG1CQUFtQixFQUFFbEksSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUM3RCxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1RixJQUFJaEgsS0FBSyxDQUFDMkQsTUFBTSxJQUFJdXVCLFFBQVEsRUFBRTtNQUM1QixPQUFPbHlCLEtBQUs7SUFDZDtJQUNBLE1BQU1teUIsUUFBUSxHQUFHbnlCLEtBQUssQ0FBQzJELE1BQU0sR0FBR3V1QixRQUFRO0lBQ3hDLE1BQU1FLFNBQVMsR0FBR3BULFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUs4TixRQUFRLGFBQWEsQ0FBQztJQUM1RCxNQUFNRSxTQUFTLEdBQUd2eEIsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRXFuQixRQUFRLEdBQUcsQ0FBQyxDQUFDO0lBQzNDLE1BQU1JLElBQUksR0FBR3R5QixLQUFLLENBQUN1TCxLQUFLLENBQUMsQ0FBQzhtQixTQUFTLENBQUM7SUFDcEMsT0FBTyxDQUFDRCxTQUFTLEVBQUUsR0FBR0UsSUFBSSxDQUFDO0VBQzdCOztFQUVBOztFQUVRcGhCLFlBQVlBLENBQUEsRUFBUztJQUMzQjtJQUNBLElBQUksSUFBSSxDQUFDdEMsUUFBUSxJQUFJLElBQUksQ0FBQ0MsWUFBWSxFQUFFOztJQUV4QztJQUNBLE1BQU0rSixHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSUEsR0FBRyxHQUFHLElBQUksQ0FBQ3ZLLGNBQWMsR0FBRyxJQUFJLENBQUNDLGdCQUFnQixFQUFFO01BQ3JELElBQUksQ0FBQyxJQUFJLENBQUNGLGFBQWEsRUFBRTtRQUN2QixJQUFJLENBQUNBLGFBQWEsR0FBRyxJQUFJO1FBQ3pCO1FBQ0EsSUFBSSxDQUFDRyxtQkFBbUIsR0FBR3NHLFVBQVUsQ0FBQyxNQUFNO1VBQzFDLElBQUksQ0FBQ3RHLG1CQUFtQixHQUFHLElBQUk7VUFDL0IsSUFBSSxDQUFDSCxhQUFhLEdBQUcsS0FBSztVQUMxQixJQUFJLENBQUMsSUFBSSxDQUFDUSxRQUFRLEVBQUU7WUFDbEIsSUFBSSxDQUFDMEcscUJBQXFCLENBQUMsQ0FBQztVQUM5QjtRQUNGLENBQUMsRUFBRSxJQUFJLENBQUNoSCxnQkFBZ0IsQ0FBQztNQUMzQjtNQUNBO0lBQ0Y7SUFDQSxJQUFJLENBQUNnSCxxQkFBcUIsQ0FBQyxDQUFDO0VBQzlCO0VBRVFBLHFCQUFxQkEsQ0FBQSxFQUFTO0lBQ3BDO0lBQ0EsSUFBSSxJQUFJLENBQUMxRyxRQUFRLElBQUksSUFBSSxDQUFDQyxZQUFZLEVBQUU7O0lBRXhDO0lBQ0E7SUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDSixlQUFlLElBQ3JCLElBQUksQ0FBQzFHLElBQUksS0FBSyxNQUFNLElBQ3BCLElBQUksQ0FBQ1YsTUFBTSxLQUFLLElBQUksQ0FBQ21ILGtCQUFrQixJQUN2QyxJQUFJLENBQUNsSCxNQUFNLEtBQUssSUFBSSxDQUFDb0gsa0JBQWtCLElBQ3ZDLElBQUksQ0FBQzNHLElBQUksS0FBSyxJQUFJLENBQUM0RyxnQkFBZ0IsSUFDbkMsSUFBSSxDQUFDWCxXQUFXLEtBQUssSUFBSSxFQUFFO01BQzdCO01BQ0E7SUFDRjtJQUNBLElBQUksQ0FBQ1MsZUFBZSxHQUFHLEtBQUs7O0lBRTVCO0lBQ0E7SUFDQSxNQUFNbUssR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLE1BQU1FLFdBQVcsR0FBRyxJQUFJLENBQUMzTCxxQkFBcUIsR0FBRyxDQUFDLElBQUl5TCxHQUFHLEdBQUcsSUFBSSxDQUFDekwscUJBQXFCLElBQUksSUFBSSxDQUFDUCxrQkFBa0I7SUFDakgsTUFBTTBPLFdBQVcsR0FBRyxJQUFJLENBQUM3TixlQUFlLENBQUM5SixNQUFNLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQytKLGNBQWMsS0FBSyxJQUFJO0lBQ25GLElBQUksQ0FBQ29MLFdBQVcsSUFBSSxJQUFJLENBQUM3TCxZQUFZLElBQUksSUFBSSxDQUFDRCxnQkFBZ0IsSUFBSXNPLFdBQVcsS0FBSyxDQUFDLElBQUksQ0FBQ3hULGNBQWMsRUFBRTtNQUN0RztJQUNGO0lBRUEsSUFBSSxDQUFDdUcsY0FBYyxHQUFHd0ssSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUNoQyxJQUFJLENBQUNwSyxrQkFBa0IsR0FBRyxJQUFJLENBQUNuSCxNQUFNO0lBQ3JDLElBQUksQ0FBQ3FILGtCQUFrQixHQUFHLElBQUksQ0FBQ3BILE1BQU07SUFDckMsSUFBSSxDQUFDcUgsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDNUcsSUFBSTtJQUVqQyxJQUFJLENBQUMsSUFBSSxDQUFDaEIsV0FBVyxFQUFFO01BQ3JCLElBQUksQ0FBQzBGLGNBQWMsR0FBRyxLQUFLO01BQzNCO0lBQ0Y7SUFFQSxJQUFJLElBQUksQ0FBQ3lCLHdCQUF3QixFQUFFO01BQ2pDLElBQUksQ0FBQ3pCLGNBQWMsR0FBRyxLQUFLO01BQzNCO0lBQ0Y7SUFFQSxJQUFJLElBQUksQ0FBQzNGLFNBQVMsRUFBRTtNQUNsQixNQUFNaVksSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDMVgsTUFBTSxFQUFFO01BQy9CLElBQUksQ0FBQyxJQUFJLENBQUNvRixjQUFjLElBQUksQ0FBQyxJQUFJLENBQUNvQiwwQkFBMEIsRUFBRTtRQUM1RCxJQUFJLENBQUMwRCxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQzFELDBCQUEwQixHQUFHLElBQUk7TUFDeEM7TUFDQSxJQUFJLENBQUMwRCxLQUFLLENBQUMsS0FBS3BNLEdBQUcsQ0FBQ0ksVUFBVSxHQUFHd1osSUFBSSxFQUFFLENBQUM7TUFDeEMsSUFBSSxDQUFDaFMsbUJBQW1CLEdBQUdnUyxJQUFJLENBQUNwYixNQUFNLEdBQUcsQ0FBQztNQUMxQyxJQUFJLENBQUNtSyxpQkFBaUIsR0FBRyxJQUFJO01BQzdCLElBQUksQ0FBQ3JCLGNBQWMsR0FBRyxJQUFJO01BQzFCLElBQUksQ0FBQ29CLDBCQUEwQixHQUFHLEtBQUssQ0FBQyxDQUFDO01BQ3pDLElBQUksQ0FBQ3hCLFlBQVksR0FBRyxDQUFDO01BQ3JCO0lBQ0Y7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDNEIsaUJBQWlCLEVBQUU7TUFDM0I7SUFDRjs7SUFFQTtJQUNBLElBQUksQ0FBQzRDLGtCQUFrQixDQUFDLENBQUM7SUFDekIsTUFBTTZILFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLElBQUksQ0FBQ3pSLGVBQWUsR0FBR3dSLFFBQVE7SUFFL0IsTUFBTTZaLE9BQU8sR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDeEMsSUFBSSxDQUFDRCxPQUFPLENBQUN2eUIsS0FBSyxDQUFDMkQsTUFBTSxFQUFFO01BQ3pCO0lBQ0Y7SUFFQSxNQUFNOHVCLGFBQWEsR0FBR0YsT0FBTyxDQUFDdnlCLEtBQUssQ0FBQzhFLEdBQUcsQ0FBQ2lhLElBQUksSUFBSSxJQUFJLENBQUMyVCxZQUFZLENBQUMzVCxJQUFJLEVBQUVyRyxRQUFRLENBQUMsQ0FBQztJQUNsRixJQUFJLENBQUMrWixhQUFhLENBQUM5dUIsTUFBTSxFQUFFO01BQ3pCO0lBQ0Y7SUFFQSxNQUFNZ3ZCLFdBQVcsR0FBRzd4QixJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFL0osSUFBSSxDQUFDZ0ssR0FBRyxDQUFDeW5CLE9BQU8sQ0FBQ0ksV0FBVyxFQUFFRixhQUFhLENBQUM5dUIsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hGLE1BQU1pdkIsTUFBTSxHQUFHSCxhQUFhLENBQUM5dUIsTUFBTTs7SUFFbkM7SUFDQTtJQUNBLE1BQU0wRCxNQUFnQixHQUFHLEVBQUU7O0lBRTNCO0lBQ0FBLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxXQUFXLENBQUM7O0lBRXhCO0lBQ0E7SUFDQTtJQUNBLElBQUksSUFBSSxDQUFDOE4sc0JBQXNCLElBQUksSUFBSSxDQUFDekIsaUJBQWlCLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQzBCLFdBQVcsS0FBSyxJQUFJLEVBQUU7TUFDMUY7TUFDQSxNQUFNNmtCLFVBQVUsR0FBRyxJQUFJLENBQUM3a0IsV0FBVyxDQUFDMmtCLFdBQVc7TUFDL0MsSUFBSUUsVUFBVSxHQUFHLENBQUMsRUFBRTtRQUNsQnhyQixNQUFNLENBQUNwSCxJQUFJLENBQUMsUUFBUTR5QixVQUFVLEdBQUcsQ0FBQztNQUNwQzs7TUFFQTtNQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJLENBQUN4bUIsaUJBQWlCO01BQzFDLEtBQUssSUFBSXBOLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRzR6QixXQUFXLEVBQUU1ekIsQ0FBQyxFQUFFLEVBQUU7UUFDcENtSSxNQUFNLENBQUNwSCxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ2pCb0gsTUFBTSxDQUFDcEgsSUFBSSxDQUFDa0YsR0FBRyxDQUFDSSxVQUFVLENBQUM7UUFDM0IsSUFBSXJHLENBQUMsR0FBRzR6QixXQUFXLEdBQUcsQ0FBQyxFQUFFO1VBQ3ZCenJCLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkI7TUFDRjs7TUFFQTtNQUNBb0gsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFFBQVEsQ0FBQzs7TUFFckI7TUFDQTtNQUNBLE1BQU04eUIsVUFBVSxHQUFHRCxXQUFXLEdBQUcsQ0FBQztNQUNsQyxJQUFJQyxVQUFVLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCMXJCLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxRQUFROHlCLFVBQVUsR0FBRyxDQUFDO01BQ3BDO0lBQ0YsQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDaGxCLHNCQUFzQixFQUFFO01BQ3RDO01BQ0E7TUFDQTFHLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxJQUFJLENBQUM7TUFDakJvSCxNQUFNLENBQUNwSCxJQUFJLENBQUMsUUFBUSxDQUFDO0lBQ3ZCOztJQUVBO0lBQ0EsS0FBSyxJQUFJZixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd1ekIsYUFBYSxDQUFDOXVCLE1BQU0sRUFBRXpFLENBQUMsRUFBRSxFQUFFO01BQzdDbUksTUFBTSxDQUFDcEgsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNqQm9ILE1BQU0sQ0FBQ3BILElBQUksQ0FBQ2tGLEdBQUcsQ0FBQ0ksVUFBVSxDQUFDO01BQzNCOEIsTUFBTSxDQUFDcEgsSUFBSSxDQUFDd3lCLGFBQWEsQ0FBQ3Z6QixDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7TUFDbkMsSUFBSUEsQ0FBQyxHQUFHdXpCLGFBQWEsQ0FBQzl1QixNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ2hDMEQsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNuQjtJQUNGOztJQUVBO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ3FNLGlCQUFpQixHQUFHc21CLE1BQU0sRUFBRTtNQUNuQ3ZyQixNQUFNLENBQUNwSCxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUNuQm9ILE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDO01BQ3ZCb0gsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7SUFDekI7O0lBRUE7SUFDQSxNQUFNK3lCLFNBQVMsR0FBR2x5QixJQUFJLENBQUNnSyxHQUFHLENBQUNoSyxJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUN2RCxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNMLElBQUksSUFBSSxFQUFFLENBQUM7SUFDekU7SUFDQSxNQUFNZ3NCLGFBQWEsR0FBR0wsTUFBTSxHQUFHLENBQUMsR0FBR0QsV0FBVztJQUM5QyxJQUFJTSxhQUFhLEdBQUcsQ0FBQyxFQUFFO01BQ3JCNXJCLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxRQUFRZ3pCLGFBQWEsR0FBRyxDQUFDO0lBQ3ZDO0lBQ0E1ckIsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFFBQVEreUIsU0FBUyxHQUFHLENBQUM7O0lBRWpDO0lBQ0EzckIsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFdBQVcsQ0FBQzs7SUFFeEI7SUFDQSxJQUFJLENBQUNzUixLQUFLLENBQUNsSyxNQUFNLENBQUM3RyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFM0IsSUFBSSxDQUFDdU0sbUJBQW1CLEdBQUdpbUIsU0FBUztJQUNwQyxJQUFJLENBQUNsbEIsaUJBQWlCLEdBQUcsSUFBSTtJQUM3QixJQUFJLENBQUNDLHNCQUFzQixHQUFHLElBQUk7SUFDbEMsSUFBSSxDQUFDdEIsY0FBYyxHQUFHLElBQUk7SUFDMUIsSUFBSSxDQUFDSCxpQkFBaUIsR0FBR3NtQixNQUFNO0lBQy9CLElBQUksQ0FBQzVrQixXQUFXLEdBQUc7TUFBRWhPLEtBQUssRUFBRXl5QixhQUFhO01BQUVFO0lBQVksQ0FBQztJQUN4RCxJQUFJLENBQUM5a0IsMEJBQTBCLEdBQUcsS0FBSztJQUN2QyxJQUFJLENBQUN4QixZQUFZLEdBQUd1bUIsTUFBTTtFQUM1QjtFQUVRSixpQkFBaUJBLENBQUEsRUFBNkM7SUFDcEUsTUFBTXh5QixLQUFlLEdBQUcsRUFBRTtJQUMxQixNQUFNMFksUUFBUSxHQUFHLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUM7SUFDakM7SUFDQSxNQUFNdWEsT0FBTyxHQUFHbFUsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDamtCLE1BQU0sQ0FBQ3NZLFFBQVEsQ0FBQyxDQUFDO0lBRXBELE1BQU15YSxnQkFBZ0IsR0FBRyxDQUFDLE1BQU07TUFDOUIsTUFBTUMsR0FBRyxHQUFHLElBQUksQ0FBQzFxQixlQUFlLElBQUksSUFBSSxDQUFDRCxjQUFjLElBQUksSUFBSSxDQUFDRCxhQUFhO01BQzdFLElBQUksQ0FBQzRxQixHQUFHLEVBQUUsT0FBTyxJQUFJO01BQ3JCLE1BQU16ZSxPQUFPLEdBQUcsSUFBSSxDQUFDK1AsU0FBUyxDQUFDME8sR0FBRyxDQUFDLENBQUMxbkIsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQ1MsSUFBSSxDQUFDLENBQUM7TUFDbEUsT0FBT3dJLE9BQU8sSUFBSSxJQUFJO0lBQ3hCLENBQUMsRUFBRSxDQUFDOztJQUVKO0lBQ0EsSUFBSSxJQUFJLENBQUM1TSxJQUFJLEtBQUssV0FBVyxLQUFLLElBQUksQ0FBQ3NCLGVBQWUsSUFBSThwQixnQkFBZ0IsQ0FBQyxFQUFFO01BQzNFO01BQ0EsTUFBTUUsWUFBWSxHQUFHL0Ysb0JBQWEsQ0FBQ0MsT0FBTztNQUMxQyxNQUFNK0YsV0FBVyxHQUFHRCxZQUFZLENBQUMsSUFBSSxDQUFDdnFCLFlBQVksR0FBR3VxQixZQUFZLENBQUMxdkIsTUFBTSxDQUFDLElBQUksR0FBRztNQUNoRixNQUFNNHZCLFFBQVEsR0FBRyxJQUFJLENBQUMvcEIsa0JBQWtCLENBQUMsSUFBSSxDQUFDRCxpQkFBaUIsR0FBRyxJQUFJLENBQUNDLGtCQUFrQixDQUFDN0YsTUFBTSxDQUFDLElBQUksR0FBRztNQUN4RyxNQUFNNnZCLGdCQUFnQixHQUFHLEdBQUd4VSxZQUFLLENBQUM1YyxJQUFJLENBQUNreEIsV0FBVyxDQUFDLEdBQUd0VSxZQUFLLENBQUN5VSxNQUFNLEdBQUd6VSxZQUFLLENBQUN5VSxNQUFNLENBQUNGLFFBQVEsQ0FBQyxHQUFHQSxRQUFRLEVBQUU7TUFDeEcsTUFBTXhILE9BQU8sR0FBRyxJQUFJLENBQUNELHNCQUFzQixDQUFDLENBQUM7TUFDN0MsTUFBTTRILGlCQUFpQixHQUFHLENBQUMsV0FBVyxFQUFFLFVBQVUsRUFBRSxZQUFZLENBQUM7TUFDakUsSUFBSUMsZUFBZSxHQUFHLElBQUksQ0FBQ3RxQixlQUFlLElBQUk4cEIsZ0JBQWdCLElBQUksRUFBRTtNQUNwRSxJQUFJTyxpQkFBaUIsQ0FBQzdmLFFBQVEsQ0FBQzhmLGVBQWUsQ0FBQyxJQUFJUixnQkFBZ0IsRUFBRTtRQUNuRVEsZUFBZSxHQUFHUixnQkFBZ0I7TUFDcEM7TUFDQSxJQUFJLENBQUNRLGVBQWUsQ0FBQ3huQixJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQzNCd25CLGVBQWUsR0FBR1IsZ0JBQWdCLElBQUksU0FBUztNQUNqRDtNQUNBLE1BQU1TLGFBQWEsR0FBRyxDQUFDRCxlQUFlLENBQUNwWCxPQUFPLENBQUMsQ0FBQyxDQUFDMUIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUM4WSxlQUFlLENBQUNwWCxPQUFPLENBQUMsQ0FBQyxDQUFDMUIsUUFBUSxDQUFDLEtBQUssQ0FBQztNQUM1RztNQUNBO01BQ0EsTUFBTWdaLFlBQVksR0FBRzN6QixjQUFLLENBQUNnRixHQUFHLENBQUMsSUFBSSxDQUFDeUUsa0JBQWtCLENBQUMsSUFBSSxDQUFDRCxpQkFBaUIsR0FBRyxJQUFJLENBQUNDLGtCQUFrQixDQUFDaEcsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDO01BQzdILE1BQU1td0IsS0FBZSxHQUFHLENBQUMsa0JBQWtCLENBQUM7TUFDNUMsSUFBSS9ILE9BQU8sRUFBRStILEtBQUssQ0FBQzd6QixJQUFJLENBQUM0ekIsWUFBWSxDQUFDOUgsT0FBTyxDQUFDLENBQUM7TUFDOUMsSUFBSSxJQUFJLENBQUN0aUIsZUFBZSxHQUFHLENBQUMsRUFBRTtRQUM1QnFxQixLQUFLLENBQUM3ekIsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDMHRCLGdCQUFnQixDQUFDLElBQUksQ0FBQ2xrQixlQUFlLENBQUMsU0FBUyxDQUFDO01BQ3RFO01BQ0EsTUFBTStaLE1BQU0sR0FBRyxHQUFHZ1EsZ0JBQWdCLEdBQUc7TUFDckMsTUFBTU8sWUFBWSxHQUFHLEdBQUdKLGVBQWUsQ0FBQ3huQixJQUFJLENBQUMsQ0FBQyxHQUFHeW5CLGFBQWEsR0FBRyxHQUFHLEdBQUcsRUFBRSxFQUFFO01BQzNFLE1BQU1oWixNQUFNLEdBQUcsSUFBSW9FLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxHQUFHeVAsS0FBSyxDQUFDdHpCLElBQUksQ0FBQ3dlLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDLEdBQUdyRixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsRUFBRTs7TUFFbEc7TUFDQSxNQUFNMlAsWUFBWSxHQUFHLEdBQUd4USxNQUFNLEdBQUd1USxZQUFZLEdBQUduWixNQUFNLEVBQUU7O01BRXhEO01BQ0EsTUFBTW9KLE1BQU0sR0FBRyxHQUFHLENBQUM1akIsTUFBTSxDQUFDLElBQUksQ0FBQ2dtQixhQUFhLENBQUM1QyxNQUFNLENBQUMsQ0FBQztNQUNyRCxNQUFNeVEsT0FBTyxHQUFHLElBQUksQ0FBQ0MsZUFBZSxDQUFDRixZQUFZLEVBQUV0YixRQUFRLEVBQUVzTCxNQUFNLENBQUM7TUFDcEVoa0IsS0FBSyxDQUFDQyxJQUFJLENBQUMsR0FBR2cwQixPQUFPLENBQUM7SUFDeEI7O0lBRUE7SUFDQWowQixLQUFLLENBQUNDLElBQUksQ0FBQ2l6QixPQUFPLENBQUM7O0lBRW5CO0lBQ0EsTUFBTVAsV0FBVyxHQUFHM3lCLEtBQUssQ0FBQzJELE1BQU07SUFDaEMsTUFBTXd3QixTQUFTLEdBQUcsSUFBSSxDQUFDQyxjQUFjLENBQUMsQ0FBQztJQUN2QztJQUNBO0lBQ0EsTUFBTUMsVUFBVSxHQUFHRixTQUFTLENBQUNwZSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUNrRixNQUFNLENBQUMsQ0FBQzhELElBQUksRUFBRXJDLEdBQUcsRUFBRTRYLEdBQUcsS0FBSztNQUNsRTtNQUNBO01BQ0EsSUFBSXZWLElBQUksQ0FBQzVTLElBQUksQ0FBQyxDQUFDLEtBQUssRUFBRSxFQUFFO1FBQ3RCO1FBQ0EsSUFBSXVRLEdBQUcsS0FBSyxDQUFDLElBQUlBLEdBQUcsS0FBSzRYLEdBQUcsQ0FBQzN3QixNQUFNLEdBQUcsQ0FBQyxFQUFFLE9BQU8sS0FBSztNQUN2RDtNQUNBLE9BQU8sSUFBSTtJQUNiLENBQUMsQ0FBQztJQUNGO0lBQ0EsSUFBSTB3QixVQUFVLENBQUMxd0IsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUMzQjB3QixVQUFVLENBQUNwMEIsSUFBSSxDQUFDK2UsWUFBSyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdEM7SUFDQSxLQUFLLE1BQU1GLElBQUksSUFBSXNWLFVBQVUsRUFBRTtNQUM3QnIwQixLQUFLLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUN5eUIsWUFBWSxDQUFDM1QsSUFBSSxFQUFFckcsUUFBUSxDQUFDLENBQUM7SUFDL0M7O0lBRUE7SUFDQTFZLEtBQUssQ0FBQ0MsSUFBSSxDQUFDaXpCLE9BQU8sQ0FBQzs7SUFFbkI7SUFDQSxJQUFJLElBQUksQ0FBQzNtQixXQUFXLENBQUM1SSxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQy9CLEtBQUssTUFBTTR3QixTQUFTLElBQUksSUFBSSxDQUFDaG9CLFdBQVcsRUFBRTtRQUN4Q3ZNLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ3l5QixZQUFZLENBQUMsS0FBSzZCLFNBQVMsRUFBRSxFQUFFN2IsUUFBUSxDQUFDLENBQUM7TUFDM0Q7TUFDQTtNQUNBMVksS0FBSyxDQUFDQyxJQUFJLENBQUNpekIsT0FBTyxDQUFDO0lBQ3JCOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUN6ckIsV0FBVyxDQUFDOUQsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUMvQixLQUFLLElBQUltZSxLQUFLLEdBQUcsQ0FBQyxFQUFFQSxLQUFLLEdBQUcsSUFBSSxDQUFDcmEsV0FBVyxDQUFDOUQsTUFBTSxFQUFFbWUsS0FBSyxFQUFFLEVBQUU7UUFDNUQsTUFBTTBTLFVBQVUsR0FBRyxJQUFJLENBQUMvc0IsV0FBVyxDQUFDcWEsS0FBSyxDQUFFO1FBQzNDLE1BQU0wUCxRQUFRLEdBQUcxUCxLQUFLLEtBQUssSUFBSSxDQUFDcGEsZUFBZTtRQUMvQyxNQUFNK3NCLE1BQU0sR0FBR2pELFFBQVEsR0FBR3hTLFlBQUssQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHRCxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUM7UUFDbEUsTUFBTXFRLE9BQU8sR0FBR2xELFFBQVEsR0FBR3hTLFlBQUssQ0FBQ0MsT0FBTyxDQUFDdVYsVUFBVSxDQUFDeGMsT0FBTyxDQUFDLEdBQUdnSCxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQ21RLFVBQVUsQ0FBQ3hjLE9BQU8sQ0FBQztRQUNqRyxNQUFNMmMsUUFBUSxHQUFHbkQsUUFBUSxHQUFHZ0QsVUFBVSxDQUFDN3hCLFdBQVcsR0FBR3FjLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDbVEsVUFBVSxDQUFDN3hCLFdBQVcsQ0FBQztRQUMzRjNDLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQ3l5QixZQUFZLENBQUMsS0FBSytCLE1BQU0sSUFBSUMsT0FBTyxNQUFNQyxRQUFRLEVBQUUsRUFBRWpjLFFBQVEsQ0FBQyxDQUFDO01BQ2pGO0lBQ0Y7O0lBRUE7SUFDQSxNQUFNa2MsYUFBYSxHQUFHLElBQUksQ0FBQ0Msc0JBQXNCLENBQUMsQ0FBQztJQUNuRCxJQUFJRCxhQUFhLEVBQUU7TUFDakI1MEIsS0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDeXlCLFlBQVksQ0FBQyxLQUFLa0MsYUFBYSxFQUFFLEVBQUVsYyxRQUFRLENBQUMsQ0FBQztJQUMvRDs7SUFFQTtJQUNBLE1BQU1vYyxVQUFVLEdBQUcsSUFBSSxDQUFDQyxlQUFlLENBQUMsQ0FBQztJQUN6QyxJQUFJRCxVQUFVLEVBQUU7TUFDZDkwQixLQUFLLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUN5eUIsWUFBWSxDQUFDLEtBQUtvQyxVQUFVLEVBQUUsRUFBRXBjLFFBQVEsQ0FBQyxDQUFDO0lBQzVEO0lBRUEsT0FBTztNQUFFMVksS0FBSztNQUFFMnlCO0lBQVksQ0FBQztFQUMvQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVa0Msc0JBQXNCQSxDQUFBLEVBQWtCO0lBQzlDLE1BQU1mLEtBQWUsR0FBRyxFQUFFOztJQUUxQjtJQUNBLE1BQU1rQixLQUFLLEdBQUcsSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQytxQixLQUFLLElBQUksSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQ2dyQixRQUFRO0lBQy9ELElBQUlELEtBQUssRUFBRTtNQUNUbEIsS0FBSyxDQUFDN3pCLElBQUksQ0FBQytlLFlBQUssQ0FBQzVjLElBQUksQ0FBQzR5QixLQUFLLENBQUMsQ0FBQztJQUMvQjs7SUFFQTtJQUNBLElBQUksSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQ2lyQixjQUFjLEtBQUtsVixTQUFTLEVBQUU7TUFDaEQsTUFBTW1WLElBQUksR0FBRyxJQUFBQyw0QkFBZSxFQUFDLElBQUksQ0FBQ25yQixVQUFVLENBQUNpckIsY0FBYyxDQUFDO01BQzVELE1BQU1HLFFBQVEsR0FBRyxDQUFDO01BQ2xCLE1BQU0vd0IsTUFBTSxHQUFHeEQsSUFBSSxDQUFDQyxLQUFLLENBQUVvMEIsSUFBSSxHQUFHLEdBQUcsR0FBSUUsUUFBUSxDQUFDO01BQ2xELE1BQU05d0IsS0FBSyxHQUFHekQsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRXdxQixRQUFRLEdBQUcvd0IsTUFBTSxDQUFDO01BQzVDLE1BQU1neEIsUUFBUSxHQUFHLElBQUFDLDRCQUFlLEVBQUNKLElBQUksRUFBRTtRQUNyQ2xsQixLQUFLLEVBQUUrTyxZQUFLLENBQUMvTyxLQUFLO1FBQ2xCMlAsT0FBTyxFQUFFWixZQUFLLENBQUNZLE9BQU87UUFDdEJ4ZCxJQUFJLEVBQUU0YyxZQUFLLENBQUM1YyxJQUFJO1FBQ2hCeWxCLE9BQU8sRUFBRTdJLFlBQUssQ0FBQzZJO01BQ2pCLENBQUMsQ0FBQztNQUNGLE1BQU0yTixHQUFHLEdBQUdGLFFBQVEsQ0FBQyxHQUFHLENBQUNsMUIsTUFBTSxDQUFDa0UsTUFBTSxDQUFDLENBQUMsR0FBRzBhLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQ2prQixNQUFNLENBQUNtRSxLQUFLLENBQUMsQ0FBQztNQUM1RXV2QixLQUFLLENBQUM3ekIsSUFBSSxDQUFDLEdBQUd1MUIsR0FBRyxJQUFJRixRQUFRLENBQUMsR0FBR0gsSUFBSSxHQUFHLENBQUMsRUFBRSxDQUFDO0lBQzlDOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNsckIsVUFBVSxDQUFDd3JCLE9BQU8sRUFBRTtNQUMzQjNCLEtBQUssQ0FBQzd6QixJQUFJLENBQUMrZSxZQUFLLENBQUM0TCxTQUFTLENBQUMsSUFBSSxDQUFDM2dCLFVBQVUsQ0FBQ3dyQixPQUFPLENBQUMsQ0FBQztJQUN0RDs7SUFFQTtJQUNBLE1BQU1DLFNBQVMsR0FBRyxJQUFJLENBQUN6ckIsVUFBVSxDQUFDeXJCLFNBQVMsSUFBSSxJQUFJLENBQUN6ckIsVUFBVSxDQUFDMHJCLFNBQVM7SUFDeEUsSUFBSUQsU0FBUyxFQUFFO01BQ2I1QixLQUFLLENBQUM3ekIsSUFBSSxDQUFDK2UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsSUFBSSxDQUFDdVIsY0FBYyxDQUFDRixTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQzVEO0lBRUEsT0FBTzVCLEtBQUssQ0FBQ253QixNQUFNLEdBQUcsQ0FBQyxHQUFHbXdCLEtBQUssQ0FBQ3R6QixJQUFJLENBQUN3ZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHLElBQUk7RUFDcEU7RUFFUXdSLGdCQUFnQkEsQ0FBQSxFQUFhO0lBQ25DLE1BQU1uZCxRQUFRLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNqQyxNQUFNbWQsV0FBVyxHQUFHLElBQUksQ0FBQ0MsZ0JBQWdCLENBQUNyZCxRQUFRLENBQUM7SUFDbkQsTUFBTXNkLFNBQVMsR0FBRyxJQUFJLENBQUNDLGNBQWMsQ0FBQ3ZkLFFBQVEsQ0FBQztJQUMvQyxPQUFPLENBQUMsR0FBR29kLFdBQVcsRUFBRSxHQUFHRSxTQUFTLENBQUM7RUFDdkM7RUFFUUosY0FBY0EsQ0FBQ00sU0FBaUIsRUFBVTtJQUNoRCxNQUFNQyxJQUFJLEdBQUcsSUFBQUMsZUFBTyxFQUFDLENBQUM7SUFDdEIsSUFBSUQsSUFBSSxJQUFJRCxTQUFTLENBQUN4aEIsVUFBVSxDQUFDeWhCLElBQUksQ0FBQyxFQUFFO01BQ3RDLE9BQU9ELFNBQVMsQ0FBQ3hxQixPQUFPLENBQUN5cUIsSUFBSSxFQUFFLEdBQUcsQ0FBQztJQUNyQztJQUNBLE9BQU9ELFNBQVM7RUFDbEI7RUFFUUgsZ0JBQWdCQSxDQUFDcmQsUUFBZ0IsRUFBWTtJQUNuRCxNQUFNc0ksUUFBa0IsR0FBRyxFQUFFOztJQUU3QjtJQUNBO0lBQ0EsSUFBSSxJQUFJLENBQUNqWixJQUFJLEtBQUssV0FBVyxFQUFFO01BQzdCLE1BQU1zdUIsV0FBVyxHQUFHLElBQUksQ0FBQ0Msa0JBQWtCLENBQUMsQ0FBQztNQUM3QyxJQUFJRCxXQUFXLEVBQUU7UUFDZnJWLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMsR0FBRytlLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQ2tTLFNBQVMsQ0FBQ0YsV0FBVyxDQUFDcHhCLElBQUksRUFBRW94QixXQUFXLENBQUNHLElBQUksQ0FBQyxFQUFFLENBQUM7TUFDcEc7SUFDRjtJQUVBLElBQUksSUFBSSxDQUFDdnNCLFVBQVUsQ0FBQ3dzQixXQUFXLEVBQUU7TUFDL0J6VixRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLEdBQUcrZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSXJGLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQ3BhLFVBQVUsQ0FBQ3dzQixXQUFXLENBQUMsRUFBRSxDQUFDO0lBQzlGO0lBRUEsSUFBSSxJQUFJLENBQUN4c0IsVUFBVSxDQUFDaXJCLGNBQWMsS0FBS2xWLFNBQVMsRUFBRTtNQUNoRDtNQUNBLElBQUksQ0FBQ25YLFlBQVksQ0FBQzZ0QixNQUFNLENBQUMsSUFBSSxDQUFDenNCLFVBQVUsQ0FBQ2lyQixjQUFjLENBQUM7TUFDeERsVSxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLElBQUksQ0FBQzRJLFlBQVksQ0FBQzBKLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDM0M7SUFFQSxPQUFPeU8sUUFBUSxDQUFDcmQsTUFBTSxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUNnekIsWUFBWSxDQUFDM1YsUUFBUSxFQUFFdEksUUFBUSxDQUFDLEdBQUcsRUFBRTtFQUN6RTtFQUVRdWQsY0FBY0EsQ0FBQ3ZkLFFBQWdCLEVBQVk7SUFDakQsTUFBTXNJLFFBQWtCLEdBQUcsRUFBRTtJQUU3QixJQUFJLElBQUksQ0FBQy9XLFVBQVUsQ0FBQ3dyQixPQUFPLEVBQUU7TUFDM0J6VSxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLElBQUksQ0FBQzIyQixpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDM3NCLFVBQVUsQ0FBQ3dyQixPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkY7SUFFQSxNQUFNVCxLQUFLLEdBQUcsSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQ2dyQixRQUFRLElBQUksSUFBSSxDQUFDaHJCLFVBQVUsQ0FBQytxQixLQUFLLEdBQzNELEdBQUcsSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQ2dyQixRQUFRLE1BQU0sSUFBSSxDQUFDaHJCLFVBQVUsQ0FBQytxQixLQUFLLEVBQUUsR0FDeEQsSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQytxQixLQUFLLElBQUksSUFBSSxDQUFDL3FCLFVBQVUsQ0FBQ2dyQixRQUFRO0lBQ3JELElBQUlELEtBQUssRUFBRTtNQUNUaFUsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxJQUFJLENBQUMyMkIsaUJBQWlCLENBQUMsT0FBTyxFQUFFNUIsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0lBQy9EO0lBRUEsTUFBTVUsU0FBUyxHQUFHLElBQUksQ0FBQ3pyQixVQUFVLENBQUN5ckIsU0FBUyxJQUFJLElBQUksQ0FBQ3pyQixVQUFVLENBQUMwckIsU0FBUztJQUN4RSxJQUFJRCxTQUFTLEVBQUU7TUFDYjFVLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMsSUFBSSxDQUFDMjJCLGlCQUFpQixDQUFDLEtBQUssRUFBRSxJQUFJLENBQUNoQixjQUFjLENBQUNGLFNBQVMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZGO0lBRUEsSUFBSSxJQUFJLENBQUN6ckIsVUFBVSxDQUFDNHNCLE1BQU0sRUFBRTtNQUMxQjdWLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMsSUFBSSxDQUFDMjJCLGlCQUFpQixDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUMzc0IsVUFBVSxDQUFDNHNCLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQztJQUNsRjtJQUVBLElBQUksSUFBSSxDQUFDNXNCLFVBQVUsQ0FBQzZzQixXQUFXLEVBQUU7TUFDL0I5VixRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLElBQUksQ0FBQzIyQixpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDM3NCLFVBQVUsQ0FBQzZzQixXQUFXLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDdEY7SUFFQSxJQUFJLElBQUksQ0FBQzdzQixVQUFVLENBQUM4c0IsWUFBWSxFQUFFO01BQ2hDL1YsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxJQUFJLENBQUMyMkIsaUJBQWlCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQzNzQixVQUFVLENBQUM4c0IsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pGO0lBRUEsSUFBSSxJQUFJLENBQUM5c0IsVUFBVSxDQUFDK3NCLE9BQU8sRUFBRTtNQUMzQmhXLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMsSUFBSSxDQUFDMjJCLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxJQUFJLElBQUksQ0FBQzNzQixVQUFVLENBQUMrc0IsT0FBTyxFQUFFLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDeEY7O0lBRUE7SUFDQSxNQUFNQyxVQUFVLEdBQUcsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQyxDQUFDO0lBQy9DLElBQUlELFVBQVUsQ0FBQ3R6QixNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3pCcWQsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxHQUFHZzNCLFVBQVUsQ0FBQztJQUM5Qjs7SUFFQTtJQUNBLE1BQU1FLG1CQUFtQixHQUFHLElBQUksQ0FBQ0Msd0JBQXdCLENBQUMsQ0FBQztJQUMzRCxJQUFJRCxtQkFBbUIsQ0FBQ3h6QixNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ2xDcWQsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxHQUFHazNCLG1CQUFtQixDQUFDO0lBQ3ZDO0lBRUEsSUFBSW5XLFFBQVEsQ0FBQ3JkLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDekIsT0FBTyxFQUFFO0lBQ1g7SUFFQSxPQUFPLElBQUksQ0FBQ2d6QixZQUFZLENBQUMzVixRQUFRLEVBQUV0SSxRQUFRLENBQUM7RUFDOUM7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVXdlLHFCQUFxQkEsQ0FBQSxFQUFhO0lBQ3hDLE1BQU1sVyxRQUFrQixHQUFHLEVBQUU7SUFDN0IsTUFBTW5hLEVBQUUsR0FBRyxJQUFJLENBQUMwRCxRQUFROztJQUV4QjtJQUNBLElBQUksQ0FBQzFELEVBQUUsQ0FBQ3d3QixhQUFhLElBQUksQ0FBQ3h3QixFQUFFLENBQUN5d0IsSUFBSSxJQUFJLENBQUN6d0IsRUFBRSxDQUFDMHdCLGFBQWEsRUFBRTtNQUN0RCxPQUFPdlcsUUFBUTtJQUNqQjs7SUFFQTtJQUNBLElBQUluYSxFQUFFLENBQUN5d0IsSUFBSSxLQUFLendCLEVBQUUsQ0FBQ3l3QixJQUFJLENBQUNyWSxPQUFPLEdBQUcsQ0FBQyxJQUFJcFksRUFBRSxDQUFDeXdCLElBQUksQ0FBQ0UsT0FBTyxHQUFHLENBQUMsSUFBSTN3QixFQUFFLENBQUN5d0IsSUFBSSxDQUFDRyxJQUFJLEdBQUcsQ0FBQyxDQUFDLEVBQUU7TUFDL0UsTUFBTUMsVUFBVSxHQUFHN3dCLEVBQUUsQ0FBQ3l3QixJQUFJLENBQUNyWSxPQUFPLEdBQUdwWSxFQUFFLENBQUN5d0IsSUFBSSxDQUFDRSxPQUFPLEdBQUczd0IsRUFBRSxDQUFDeXdCLElBQUksQ0FBQ0csSUFBSTtNQUNuRSxNQUFNRSxNQUFNLEdBQUc5d0IsRUFBRSxDQUFDeXdCLElBQUksQ0FBQ3JZLE9BQU8sR0FBR3BZLEVBQUUsQ0FBQ3l3QixJQUFJLENBQUNFLE9BQU8sR0FBRyxTQUFTLEdBQzdDM3dCLEVBQUUsQ0FBQ3l3QixJQUFJLENBQUNFLE9BQU8sR0FBRzN3QixFQUFFLENBQUN5d0IsSUFBSSxDQUFDclksT0FBTyxHQUFHLFNBQVMsR0FBRyxLQUFLOztNQUVwRTtNQUNBLE1BQU0yWSxNQUFNLEdBQUdELE1BQU0sS0FBSyxTQUFTLEdBQUczWSxZQUFLLENBQUM2SSxPQUFPLEdBQUc3SSxZQUFLLENBQUM1YyxJQUFJO01BQ2hFLE1BQU15MUIsTUFBTSxHQUFHRixNQUFNLEtBQUssU0FBUyxHQUFHM1ksWUFBSyxDQUFDNkksT0FBTyxHQUFHN0ksWUFBSyxDQUFDWSxPQUFPO01BQ25FLE1BQU1rWSxNQUFNLEdBQUdGLE1BQU0sQ0FBQyxHQUFHL3dCLEVBQUUsQ0FBQ3l3QixJQUFJLENBQUNyWSxPQUFPLEVBQUUsQ0FBQztNQUMzQyxNQUFNOFksTUFBTSxHQUFHRixNQUFNLENBQUMsR0FBR2h4QixFQUFFLENBQUN5d0IsSUFBSSxDQUFDRSxPQUFPLEVBQUUsQ0FBQzs7TUFFM0M7TUFDQSxNQUFNUSxNQUFNLEdBQUdMLE1BQU0sS0FBSyxTQUFTLEdBQUczWSxZQUFLLENBQUM1YyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQ3ZDdTFCLE1BQU0sS0FBSyxTQUFTLEdBQUczWSxZQUFLLENBQUNZLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJOztNQUVoRTtNQUNBLE1BQU1xWSxVQUFVLEdBQUdweEIsRUFBRSxDQUFDcXhCLE1BQU0sSUFBSXJ4QixFQUFFLENBQUNxeEIsTUFBTSxHQUFHLENBQUMsR0FBR2xaLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE1BQU14ZCxFQUFFLENBQUNxeEIsTUFBTSxFQUFFLENBQUMsR0FBRyxFQUFFO01BRXRGbFgsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxHQUFHKzNCLE1BQU0sR0FBR0YsTUFBTSxHQUFHOVksWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcwVCxNQUFNLEdBQUdFLFVBQVUsRUFBRSxDQUFDOztNQUUvRTtNQUNBLElBQUlQLFVBQVUsR0FBRyxDQUFDLEVBQUU7UUFDbEIsTUFBTXJDLFFBQVEsR0FBRyxDQUFDO1FBQ2xCLE1BQU04QyxLQUFLLEdBQUdyM0IsSUFBSSxDQUFDQyxLQUFLLENBQUU4RixFQUFFLENBQUN5d0IsSUFBSSxDQUFDclksT0FBTyxHQUFHeVksVUFBVSxHQUFJckMsUUFBUSxDQUFDO1FBQ25FLE1BQU0rQyxLQUFLLEdBQUd0M0IsSUFBSSxDQUFDQyxLQUFLLENBQUU4RixFQUFFLENBQUN5d0IsSUFBSSxDQUFDRSxPQUFPLEdBQUdFLFVBQVUsR0FBSXJDLFFBQVEsQ0FBQztRQUNuRSxNQUFNZ0QsS0FBSyxHQUFHdjNCLElBQUksQ0FBQytKLEdBQUcsQ0FBQyxDQUFDLEVBQUV3cUIsUUFBUSxHQUFHOEMsS0FBSyxHQUFHQyxLQUFLLENBQUM7UUFDbkQsTUFBTTVDLEdBQUcsR0FBR3hXLFlBQUssQ0FBQzVjLElBQUksQ0FBQyxHQUFHLENBQUNoQyxNQUFNLENBQUMrM0IsS0FBSyxDQUFDLENBQUMsR0FDN0JuWixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUNqa0IsTUFBTSxDQUFDaTRCLEtBQUssQ0FBQyxDQUFDLEdBQ2pDclosWUFBSyxDQUFDWSxPQUFPLENBQUMsR0FBRyxDQUFDeGYsTUFBTSxDQUFDZzRCLEtBQUssQ0FBQyxDQUFDO1FBQzVDcFgsUUFBUSxDQUFDL2dCLElBQUksQ0FBQyxJQUFJdTFCLEdBQUcsR0FBRyxDQUFDO01BQzNCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJM3VCLEVBQUUsQ0FBQ3d3QixhQUFhLEVBQUU7TUFDcEIsTUFBTWlCLFVBQVUsR0FBR3p4QixFQUFFLENBQUMweEIsaUJBQWlCO01BQ3ZDLElBQUlELFVBQVUsRUFBRTtRQUNkO1FBQ0F0WCxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLEdBQUcrZSxZQUFLLENBQUM1YyxJQUFJLENBQUMsSUFBSSxDQUFDLElBQUk0YyxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSXJGLFlBQUssQ0FBQ1ksT0FBTyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUM7TUFDcEYsQ0FBQyxNQUFNO1FBQ0wsTUFBTTRZLFdBQVcsR0FBRzN4QixFQUFFLENBQUN3d0IsYUFBYSxLQUFLLFNBQVMsR0FBRyxHQUFHLEdBQUcsR0FBRztRQUM5RCxNQUFNb0IsWUFBWSxHQUFHNXhCLEVBQUUsQ0FBQ3d3QixhQUFhLEtBQUssU0FBUyxHQUFHLEdBQUcsR0FBRyxHQUFHO1FBQy9ELE1BQU1xQixZQUFZLEdBQUc3eEIsRUFBRSxDQUFDd3dCLGFBQWEsS0FBSyxTQUFTLEdBQUdyWSxZQUFLLENBQUM1YyxJQUFJLEdBQUc0YyxZQUFLLENBQUNZLE9BQU87UUFDaEZvQixRQUFRLENBQUMvZ0IsSUFBSSxDQUFDLEdBQUd1NEIsV0FBVyxHQUFHRSxZQUFZLENBQUNELFlBQVksQ0FBQyxFQUFFLENBQUM7TUFDOUQ7SUFDRjs7SUFFQTtJQUNBLElBQUk1eEIsRUFBRSxDQUFDOHhCLFVBQVUsSUFBSTl4QixFQUFFLENBQUM4eEIsVUFBVSxLQUFLLEtBQUssRUFBRTtNQUM1QyxNQUFNQyxVQUFVLEdBQUcveEIsRUFBRSxDQUFDOHhCLFVBQVUsS0FBSyxTQUFTLEdBQUczWixZQUFLLENBQUM1YyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc0YyxZQUFLLENBQUNZLE9BQU8sQ0FBQyxJQUFJLENBQUM7TUFDdkZvQixRQUFRLENBQUMvZ0IsSUFBSSxDQUFDMjRCLFVBQVUsQ0FBQztJQUMzQixDQUFDLE1BQU0sSUFBSS94QixFQUFFLENBQUM4eEIsVUFBVSxLQUFLLEtBQUssRUFBRTtNQUNsQzNYLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMrZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNwQzs7SUFFQTtJQUNBLElBQUl4ZCxFQUFFLENBQUMwd0IsYUFBYSxJQUFJMXdCLEVBQUUsQ0FBQ2d5QixXQUFXLEVBQUU7TUFDdEMsTUFBTUMsUUFBUSxHQUFHanlCLEVBQUUsQ0FBQ2d5QixXQUFXLElBQUloeUIsRUFBRSxDQUFDMHdCLGFBQWEsSUFBSSxFQUFFO01BQ3pELElBQUl1QixRQUFRLEVBQUU7UUFDWjlYLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMrZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxJQUFJLENBQUMwVSxjQUFjLENBQUNELFFBQVEsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO01BQ2xFO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLE9BQU9qeUIsRUFBRSxDQUFDbXlCLGNBQWMsS0FBSyxRQUFRLElBQUksT0FBT255QixFQUFFLENBQUNqRyxVQUFVLEtBQUssUUFBUSxJQUFJaUcsRUFBRSxDQUFDakcsVUFBVSxHQUFHLENBQUMsRUFBRTtNQUNuRyxNQUFNcTRCLEdBQUcsR0FBR240QixJQUFJLENBQUNDLEtBQUssQ0FBRThGLEVBQUUsQ0FBQ215QixjQUFjLEdBQUdueUIsRUFBRSxDQUFDakcsVUFBVSxHQUFJLEdBQUcsQ0FBQztNQUNqRW9nQixRQUFRLENBQUMvZ0IsSUFBSSxDQUFDK2UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRzRVLEdBQUcsR0FBRyxDQUFDLENBQUM7SUFDMUM7O0lBRUE7SUFDQSxJQUFJcHlCLEVBQUUsQ0FBQ3F5QixNQUFNLEtBQUssT0FBT3J5QixFQUFFLENBQUNxeUIsTUFBTSxDQUFDamEsT0FBTyxLQUFLLFFBQVEsSUFBSSxPQUFPcFksRUFBRSxDQUFDcXlCLE1BQU0sQ0FBQzFCLE9BQU8sS0FBSyxRQUFRLENBQUMsRUFBRTtNQUNqRyxNQUFNTSxNQUFNLEdBQUcsT0FBT2p4QixFQUFFLENBQUNxeUIsTUFBTSxDQUFDamEsT0FBTyxLQUFLLFFBQVEsR0FBR3BZLEVBQUUsQ0FBQ3F5QixNQUFNLENBQUNqYSxPQUFPLENBQUMyTyxPQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUcsR0FBRztNQUN6RixNQUFNbUssTUFBTSxHQUFHLE9BQU9seEIsRUFBRSxDQUFDcXlCLE1BQU0sQ0FBQzFCLE9BQU8sS0FBSyxRQUFRLEdBQUczd0IsRUFBRSxDQUFDcXlCLE1BQU0sQ0FBQzFCLE9BQU8sQ0FBQzVKLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxHQUFHO01BQ3pGLE1BQU11TCxJQUFJLEdBQUd0eUIsRUFBRSxDQUFDcXlCLE1BQU0sQ0FBQ2phLE9BQU8sSUFBSSxDQUFDO01BQ25DLE1BQU1tYSxJQUFJLEdBQUd2eUIsRUFBRSxDQUFDcXlCLE1BQU0sQ0FBQzFCLE9BQU8sSUFBSSxDQUFDO01BQ25DLE1BQU02QixRQUFRLEdBQUdGLElBQUksR0FBR0MsSUFBSSxHQUFHcGEsWUFBSyxDQUFDNkksT0FBTyxDQUFDaVEsTUFBTSxDQUFDLEdBQUc5WSxZQUFLLENBQUM1YyxJQUFJLENBQUMwMUIsTUFBTSxDQUFDO01BQ3pFLE1BQU13QixRQUFRLEdBQUdGLElBQUksR0FBR0QsSUFBSSxHQUFHbmEsWUFBSyxDQUFDNkksT0FBTyxDQUFDa1EsTUFBTSxDQUFDLEdBQUcvWSxZQUFLLENBQUNZLE9BQU8sQ0FBQ21ZLE1BQU0sQ0FBQztNQUM1RS9XLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMsR0FBR281QixRQUFRLEdBQUdyYSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsR0FBR2lWLFFBQVEsRUFBRSxDQUFDO0lBQy9EOztJQUVBO0lBQ0EsSUFBSXp5QixFQUFFLENBQUMweUIsUUFBUSxLQUFLLE9BQU8xeUIsRUFBRSxDQUFDMHlCLFFBQVEsQ0FBQ3RhLE9BQU8sS0FBSyxRQUFRLElBQUksT0FBT3BZLEVBQUUsQ0FBQzB5QixRQUFRLENBQUMvQixPQUFPLEtBQUssUUFBUSxDQUFDLEVBQUU7TUFDdkcsTUFBTWdDLElBQUksR0FBRzN5QixFQUFFLENBQUMweUIsUUFBUSxDQUFDdGEsT0FBTyxLQUFLZSxTQUFTLEdBQUdsZixJQUFJLENBQUNDLEtBQUssQ0FBQzhGLEVBQUUsQ0FBQzB5QixRQUFRLENBQUN0YSxPQUFPLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSTtNQUM3RixNQUFNd2EsSUFBSSxHQUFHNXlCLEVBQUUsQ0FBQzB5QixRQUFRLENBQUMvQixPQUFPLEtBQUt4WCxTQUFTLEdBQUdsZixJQUFJLENBQUNDLEtBQUssQ0FBQzhGLEVBQUUsQ0FBQzB5QixRQUFRLENBQUMvQixPQUFPLEdBQUcsR0FBRyxDQUFDLEdBQUcsSUFBSTtNQUM3RixNQUFNNkIsUUFBUSxHQUFHRyxJQUFJLEtBQUssSUFBSSxHQUFHeGEsWUFBSyxDQUFDNWMsSUFBSSxDQUFDLElBQUlvM0IsSUFBSSxHQUFHLENBQUMsR0FBRyxJQUFJO01BQy9ELE1BQU1GLFFBQVEsR0FBR0csSUFBSSxLQUFLLElBQUksR0FBR3phLFlBQUssQ0FBQ1ksT0FBTyxDQUFDLElBQUk2WixJQUFJLEdBQUcsQ0FBQyxHQUFHLElBQUk7TUFDbEUsTUFBTTNGLEtBQUssR0FBRyxDQUFDdUYsUUFBUSxFQUFFQyxRQUFRLENBQUMsQ0FBQ3JlLE1BQU0sQ0FBQzlLLE9BQU8sQ0FBQyxDQUFDM1AsSUFBSSxDQUFDd2UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUM7TUFDNUUsSUFBSXlQLEtBQUssRUFBRTtRQUNUOVMsUUFBUSxDQUFDL2dCLElBQUksQ0FBQzZ6QixLQUFLLENBQUM7TUFDdEI7SUFDRjtJQUVBLE9BQU85UyxRQUFRO0VBQ2pCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1VvVyx3QkFBd0JBLENBQUEsRUFBYTtJQUMzQyxNQUFNcFcsUUFBa0IsR0FBRyxFQUFFO0lBQzdCLE1BQU0wWSxFQUFFLEdBQUcsSUFBSSxDQUFDbHZCLGlCQUFpQjs7SUFFakM7SUFDQSxJQUFJLENBQUNrdkIsRUFBRSxDQUFDL3VCLGdCQUFnQixJQUFJLENBQUMrdUIsRUFBRSxDQUFDN0osWUFBWSxFQUFFO01BQzVDO01BQ0EsSUFBSTZKLEVBQUUsQ0FBQ2p2QixZQUFZLEVBQUU7UUFDbkJ1VyxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDK2UsWUFBSyxDQUFDNkksT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHN0ksWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7TUFDN0Q7TUFDQSxPQUFPckQsUUFBUTtJQUNqQjs7SUFFQTtJQUNBLE1BQU0yWSxPQUFPLEdBQUdELEVBQUUsQ0FBQ2h2QixrQkFBa0IsR0FBR3NVLFlBQUssQ0FBQzZJLE9BQU8sQ0FBQyxJQUFJLENBQUMsR0FBRzdJLFlBQUssQ0FBQ1ksT0FBTyxDQUFDLEdBQUcsQ0FBQztJQUNoRm9CLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMwNUIsT0FBTyxDQUFDOztJQUV0QjtJQUNBLE1BQU1DLGNBQXdCLEdBQUcsRUFBRTtJQUVuQyxJQUFJRixFQUFFLENBQUM1SixPQUFPLEVBQUVDLE1BQU0sRUFBRTtNQUN0QixNQUFNOEosUUFBUSxHQUFHSCxFQUFFLENBQUM1SixPQUFPLENBQUNHLFlBQVksS0FBSyxDQUFDLEdBQUdqUixZQUFLLENBQUM2SSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUc3SSxZQUFLLENBQUMvTyxLQUFLLENBQUMsR0FBRyxDQUFDO01BQ3RGLE1BQU1rZ0IsU0FBUyxHQUFHdUosRUFBRSxDQUFDNUosT0FBTyxDQUFDSyxTQUFTLElBQUksQ0FBQztNQUMzQ3lKLGNBQWMsQ0FBQzM1QixJQUFJLENBQUMsR0FBRytlLFlBQUssQ0FBQzVjLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBR3kzQixRQUFRLEdBQUcxSixTQUFTLEdBQUcsQ0FBQyxHQUFHblIsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsSUFBSThMLFNBQVMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDOUc7SUFFQSxJQUFJdUosRUFBRSxDQUFDdEosS0FBSyxFQUFFTCxNQUFNLEVBQUU7TUFDcEIsTUFBTStKLFFBQVEsR0FBR0osRUFBRSxDQUFDdEosS0FBSyxDQUFDRSxhQUFhLElBQUksQ0FBQztNQUM1Q3NKLGNBQWMsQ0FBQzM1QixJQUFJLENBQUMsR0FBR0MsY0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUc2ZSxZQUFLLENBQUM2SSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUdpUyxRQUFRLEdBQUcsQ0FBQyxHQUFHOWEsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsSUFBSXlWLFFBQVEsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUM7SUFDdkg7SUFFQSxJQUFJSixFQUFFLENBQUMzSyxLQUFLLEVBQUVnQixNQUFNLEVBQUU7TUFDcEIsTUFBTWdLLFNBQVMsR0FBR0wsRUFBRSxDQUFDM0ssS0FBSyxDQUFDOEIsVUFBVSxHQUFHN1IsWUFBSyxDQUFDNkksT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHN0ksWUFBSyxDQUFDNWMsSUFBSSxDQUFDLElBQUksQ0FBQztNQUM5RSxNQUFNd3VCLFNBQVMsR0FBRzhJLEVBQUUsQ0FBQzNLLEtBQUssQ0FBQzRCLFVBQVUsSUFBSSxDQUFDO01BQzFDaUosY0FBYyxDQUFDMzVCLElBQUksQ0FBQyxHQUFHODVCLFNBQVMsR0FBR25KLFNBQVMsR0FBRyxDQUFDLEdBQUc1UixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHdU0sU0FBUyxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsQ0FBQztJQUM1RjtJQUVBLElBQUlnSixjQUFjLENBQUNqMkIsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUM3QnFkLFFBQVEsQ0FBQy9nQixJQUFJLENBQUMyNUIsY0FBYyxDQUFDcDVCLElBQUksQ0FBQ3dlLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDekQ7O0lBRUE7SUFDQSxJQUFJcVYsRUFBRSxDQUFDL3VCLGdCQUFnQixJQUFJK3VCLEVBQUUsQ0FBQy91QixnQkFBZ0IsR0FBRyxDQUFDLEVBQUU7TUFDbERxVyxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDK2UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsSUFBSXFWLEVBQUUsQ0FBQy91QixnQkFBZ0IsRUFBRSxDQUFDLENBQUM7SUFDMUQ7O0lBRUE7SUFDQSxJQUFJK3VCLEVBQUUsQ0FBQzdKLFlBQVksRUFBRTtNQUNuQixNQUFNak0sVUFBaUQsR0FBRztRQUN4RG9XLE9BQU8sRUFBRWhiLFlBQUssQ0FBQzVjLElBQUk7UUFDbkI2M0IsS0FBSyxFQUFHcmQsQ0FBUyxJQUFLMWMsY0FBSyxDQUFDQyxJQUFJLENBQUN5YyxDQUFDLENBQUM7UUFDbkNzZCxLQUFLLEVBQUVsYixZQUFLLENBQUM2SSxPQUFPO1FBQ3BCc1MsU0FBUyxFQUFFbmIsWUFBSyxDQUFDWSxPQUFPO1FBQ3hCd2EsTUFBTSxFQUFHeGQsQ0FBUyxJQUFLMWMsY0FBSyxDQUFDbTZCLE9BQU8sQ0FBQ3pkLENBQUM7TUFDeEMsQ0FBQztNQUNELE1BQU10YSxLQUFLLEdBQUdzaEIsVUFBVSxDQUFDOFYsRUFBRSxDQUFDN0osWUFBWSxDQUFDLElBQUk3USxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUs7TUFDM0RyRCxRQUFRLENBQUMvZ0IsSUFBSSxDQUFDcUMsS0FBSyxDQUFDLElBQUlvM0IsRUFBRSxDQUFDN0osWUFBWSxDQUFDdGtCLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ3pEO0lBRUEsT0FBT3lWLFFBQVE7RUFDakI7O0VBRUE7QUFDRjtBQUNBO0VBQ1UrWCxjQUFjQSxDQUFDOXpCLElBQVksRUFBRWdnQixNQUFjLEVBQVU7SUFDM0QsSUFBSWhnQixJQUFJLENBQUN0QixNQUFNLElBQUlzaEIsTUFBTSxFQUFFLE9BQU9oZ0IsSUFBSTtJQUN0QyxNQUFNcTFCLE9BQU8sR0FBR3g1QixJQUFJLENBQUNHLEtBQUssQ0FBQyxDQUFDZ2tCLE1BQU0sR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE9BQU8sR0FBR2hnQixJQUFJLENBQUNzRyxLQUFLLENBQUMsQ0FBQyxFQUFFK3VCLE9BQU8sQ0FBQyxNQUFNcjFCLElBQUksQ0FBQ3NHLEtBQUssQ0FBQyxDQUFDK3VCLE9BQU8sQ0FBQyxFQUFFO0VBQzlEO0VBRVFoRSxrQkFBa0JBLENBQUEsRUFBeUU7SUFDakcsTUFBTWlFLFFBQVEsR0FBRyxDQUFDLElBQUksQ0FBQzd4QixlQUFlLEVBQUUsSUFBSSxDQUFDRCxjQUFjLEVBQUUsSUFBSSxDQUFDRCxhQUFhLENBQUMsQ0FBQ3lTLE1BQU0sQ0FDckYsQ0FBQ3NKLEtBQUssRUFBRXpDLEtBQUssRUFBRXdTLEdBQUcsS0FBc0Jua0IsT0FBTyxDQUFDb1UsS0FBSyxDQUFDLElBQUkrUCxHQUFHLENBQUNqYixPQUFPLENBQUNrTCxLQUFLLENBQUMsS0FBS3pDLEtBQ25GLENBQUM7SUFDRCxNQUFNN2MsSUFBSSxHQUFHczFCLFFBQVEsQ0FBQzUyQixNQUFNLEdBQUcsQ0FBQyxHQUFHNDJCLFFBQVEsQ0FBQy81QixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsbUJBQW1CO0lBQzdFLElBQUksQ0FBQ3lFLElBQUksQ0FBQ2tILElBQUksQ0FBQyxDQUFDLEVBQUU7TUFDaEIsT0FBTyxJQUFJO0lBQ2I7SUFDQSxNQUFNMlAsVUFBVSxHQUFHN1csSUFBSSxDQUFDMk8sV0FBVyxDQUFDLENBQUM7SUFDckMsTUFBTTRpQixJQUEyQyxHQUFHMWEsVUFBVSxDQUFDakksUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLFNBQVMsR0FBRyxNQUFNO0lBQ3JHLE9BQU87TUFBRTVPLElBQUk7TUFBRXV4QjtJQUFLLENBQUM7RUFDdkI7RUFFUUksaUJBQWlCQSxDQUN2QmxYLEtBQWEsRUFDYjZFLEtBQWEsRUFDYmlTLElBQXFELEVBQzdDO0lBQ1IsTUFBTWdFLFNBQVMsR0FDYmhFLElBQUksS0FBSyxTQUFTLEdBQ2R4WCxZQUFLLENBQUM2SSxPQUFPLEdBQ2IyTyxJQUFJLEtBQUssTUFBTSxHQUNieFgsWUFBSyxDQUFDWSxPQUFPLEdBQ2I0VyxJQUFJLEtBQUssT0FBTyxHQUNkeFgsWUFBSyxDQUFDL08sS0FBSyxHQUNYdW1CLElBQUksS0FBSyxPQUFPLEdBQ2R4WCxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssR0FDZHJGLFlBQUssQ0FBQzVjLElBQUk7SUFDdEIsT0FBTyxHQUFHNGMsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMzRSxLQUFLLENBQUMsSUFBSThhLFNBQVMsQ0FBQ2pXLEtBQUssQ0FBQyxFQUFFO0VBQ3ZEO0VBRVFnUyxTQUFTQSxDQUFDdHhCLElBQVksRUFBRXV4QixJQUEyQyxFQUFVO0lBQ25GLFFBQVFBLElBQUk7TUFDVixLQUFLLFNBQVM7UUFDWixPQUFPeFgsWUFBSyxDQUFDNkksT0FBTyxDQUFDNWlCLElBQUksQ0FBQztNQUM1QixLQUFLLE1BQU07UUFDVCxPQUFPK1osWUFBSyxDQUFDWSxPQUFPLENBQUMzYSxJQUFJLENBQUM7TUFDNUIsS0FBSyxPQUFPO1FBQ1YsT0FBTytaLFlBQUssQ0FBQy9PLEtBQUssQ0FBQ2hMLElBQUksQ0FBQztNQUMxQixLQUFLLE1BQU07TUFDWDtRQUNFLE9BQU8rWixZQUFLLENBQUM1YyxJQUFJLENBQUM2QyxJQUFJLENBQUM7SUFDM0I7RUFDRjtFQUVRMHhCLFlBQVlBLENBQUMzVixRQUFrQixFQUFFdEksUUFBZ0IsRUFBWTtJQUNuRSxNQUFNMVksS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTXdrQixTQUFTLEdBQUd4RixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxPQUFPLENBQUM7SUFFekMsSUFBSXBaLE9BQU8sR0FBRyxFQUFFO0lBQ2hCLEtBQUssTUFBTW1XLE9BQU8sSUFBSUosUUFBUSxFQUFFO01BQzlCLE1BQU1sRixVQUFVLEdBQUdzRixPQUFPLENBQUNqVixJQUFJLENBQUMsQ0FBQztNQUNqQyxJQUFJLENBQUMyUCxVQUFVLEVBQUU7TUFDakIsSUFBSSxDQUFDN1EsT0FBTyxFQUFFO1FBQ1pBLE9BQU8sR0FBRyxJQUFJLENBQUN5bkIsWUFBWSxDQUFDNVcsVUFBVSxFQUFFcEQsUUFBUSxDQUFDO1FBQ2pEO01BQ0Y7TUFDQSxNQUFNcVMsU0FBUyxHQUFHLEdBQUc5ZixPQUFPLEdBQUd1WixTQUFTLEdBQUcxSSxVQUFVLEVBQUU7TUFDdkQsSUFBSSxJQUFJLENBQUNzSyxhQUFhLENBQUMyRSxTQUFTLENBQUMsSUFBSXJTLFFBQVEsRUFBRTtRQUM3Q3pOLE9BQU8sR0FBRzhmLFNBQVM7TUFDckIsQ0FBQyxNQUFNO1FBQ0wvcUIsS0FBSyxDQUFDQyxJQUFJLENBQUMsSUFBSSxDQUFDeXlCLFlBQVksQ0FBQ3puQixPQUFPLEVBQUV5TixRQUFRLENBQUMsQ0FBQztRQUNoRHpOLE9BQU8sR0FBRyxJQUFJLENBQUN5bkIsWUFBWSxDQUFDNVcsVUFBVSxFQUFFcEQsUUFBUSxDQUFDO01BQ25EO0lBQ0Y7SUFFQSxJQUFJek4sT0FBTyxFQUFFO01BQ1hqTCxLQUFLLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUN5eUIsWUFBWSxDQUFDem5CLE9BQU8sRUFBRXlOLFFBQVEsQ0FBQyxDQUFDO0lBQ2xEO0lBRUEsT0FBTzFZLEtBQUs7RUFDZDtFQUVReTZCLGlCQUFpQkEsQ0FBQSxFQUFhO0lBQ3BDLE1BQU16NkIsS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTTgwQixVQUFVLEdBQUcsSUFBSSxDQUFDQyxlQUFlLENBQUMsQ0FBQztJQUN6QyxJQUFJRCxVQUFVLEVBQUU7TUFDZDkwQixLQUFLLENBQUNDLElBQUksQ0FBQyxHQUFHK2UsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUlyRixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSXlRLFVBQVUsRUFBRSxDQUFDO0lBQy9FO0lBRUEsTUFBTTRGLFlBQVksR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDN0MsSUFBSUQsWUFBWSxFQUFFO01BQ2hCMTZCLEtBQUssQ0FBQ0MsSUFBSSxDQUFDLEdBQUcrZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxNQUFNLENBQUMsS0FBS3FXLFlBQVksRUFBRSxDQUFDO0lBQzFEO0lBRUEsT0FBTzE2QixLQUFLO0VBQ2Q7RUFFUSswQixlQUFlQSxDQUFBLEVBQWtCO0lBQ3ZDLE1BQU1oaEIsT0FLSixHQUFHLEVBQUU7SUFFUCxNQUFNNm1CLFNBQVMsR0FBR0EsQ0FBQ2xiLEtBQWEsRUFBRTVQLEVBQVcsRUFBRStxQixNQUFlLEVBQUV0VyxLQUFjLEtBQUs7TUFDakZ4USxPQUFPLENBQUM5VCxJQUFJLENBQUM7UUFBRXlmLEtBQUs7UUFBRTVQLEVBQUU7UUFBRStxQixNQUFNLEVBQUUsSUFBSSxDQUFDNXVCLFlBQVksQ0FBQzR1QixNQUFNLENBQUM7UUFBRXRXO01BQU0sQ0FBQyxDQUFDO0lBQ3ZFLENBQUM7O0lBRUQ7SUFDQSxNQUFNdVcsZUFBZSxHQUFHLElBQUksQ0FBQzV3QixXQUFXLENBQUNHLGdCQUFnQixJQUFJLEtBQUs7SUFDbEV1d0IsU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsSUFBSSxDQUFDMXdCLFdBQVcsQ0FBQ2lsQixlQUFlLEVBQUUyTCxlQUFlLEdBQUcsV0FBVyxHQUFHLFFBQVEsQ0FBQztJQUVuRyxNQUFNQyxZQUFZLEdBQUcsSUFBSSxDQUFDN3dCLFdBQVcsQ0FBQ0Usb0JBQW9CLElBQUksTUFBTTtJQUNwRSxNQUFNNHdCLGNBQWMsR0FBR0QsWUFBWSxLQUFLLE1BQU07SUFDOUNILFNBQVMsQ0FDUCxXQUFXLEVBQ1hJLGNBQWMsRUFDZCxJQUFJLENBQUM5d0IsV0FBVyxDQUFDK2tCLHNCQUFzQixFQUN2QzhMLFlBQVksS0FBSyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQ3JDLENBQUM7SUFFRCxNQUFNRSxrQkFBa0IsR0FBRyxJQUFJLENBQUMvd0IsV0FBVyxDQUFDQyxtQkFBbUIsSUFBSSxLQUFLO0lBQ3hFeXdCLFNBQVMsQ0FDUCxNQUFNLEVBQ05LLGtCQUFrQixFQUNsQixJQUFJLENBQUMvd0IsV0FBVyxDQUFDZ2xCLGtCQUFrQixFQUNuQytMLGtCQUFrQixHQUFHLElBQUksR0FBRyxLQUM5QixDQUFDO0lBRUQsTUFBTUMsZ0JBQWdCLEdBQUcsQ0FBQyxJQUFJLENBQUNoeEIsV0FBVyxDQUFDaXhCLGlCQUFpQixJQUFJLFVBQVUsRUFBRWh2QixJQUFJLENBQUMsQ0FBQztJQUNsRixNQUFNaXZCLGFBQWEsR0FDakJGLGdCQUFnQixDQUFDdG5CLFdBQVcsQ0FBQyxDQUFDLEtBQUssVUFBVSxHQUFHLE1BQU0sR0FBR3NuQixnQkFBZ0IsSUFBSSxVQUFVO0lBQ3pGLE1BQU1HLGNBQWMsR0FBR0QsYUFBYSxDQUFDejNCLE1BQU0sR0FBRyxDQUFDO0lBQy9DaTNCLFNBQVMsQ0FBQyxVQUFVLEVBQUVTLGNBQWMsRUFBRSxJQUFJLENBQUNueEIsV0FBVyxDQUFDOGtCLGNBQWMsRUFBRW9NLGFBQWEsQ0FBQztJQUVyRixNQUFNRSxTQUFTLEdBQUlDLGNBQXVCLElBQWE7TUFDckQsT0FBT3huQixPQUFPLENBQ1hqUCxHQUFHLENBQUMwMkIsTUFBTSxJQUFJO1FBQ2IsTUFBTUMsU0FBUyxHQUFHRCxNQUFNLENBQUMxckIsRUFBRSxHQUFHa1AsWUFBSyxDQUFDNkksT0FBTyxDQUFDMlQsTUFBTSxDQUFDalgsS0FBSyxJQUFJLElBQUksQ0FBQyxHQUFHdkYsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUNtWCxNQUFNLENBQUNqWCxLQUFLLElBQUksS0FBSyxDQUFDO1FBQ3pHLE1BQU1tWCxVQUFVLEdBQ2RILGNBQWMsSUFBSUMsTUFBTSxDQUFDWCxNQUFNLEdBQUc3YixZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLbVgsTUFBTSxDQUFDWCxNQUFNLEdBQUcsQ0FBQyxHQUFHLEVBQUU7UUFDOUUsT0FBTyxHQUFHN2IsWUFBSyxDQUFDb0YsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBR21YLE1BQU0sQ0FBQzliLEtBQUssR0FBRyxDQUFDLElBQUkrYixTQUFTLEdBQUdDLFVBQVUsRUFBRTtNQUMxRSxDQUFDLENBQUMsQ0FDRGw3QixJQUFJLENBQUN3ZSxZQUFLLENBQUNvRixFQUFFLENBQUNDLEtBQUssQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBRUQsTUFBTTNMLFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLElBQUlvRyxJQUFJLEdBQUd1YyxTQUFTLENBQUMsSUFBSSxDQUFDOztJQUUxQjtJQUNBLElBQUksQ0FBQzF6QixtQkFBbUIsR0FBRyxJQUFJQyxHQUFHLENBQ2hDa00sT0FBTyxDQUNKalAsR0FBRyxDQUFDMDJCLE1BQU0sSUFBS0EsTUFBTSxDQUFDWCxNQUFNLEdBQUdXLE1BQU0sQ0FBQ1gsTUFBTSxHQUFHLElBQUssQ0FBQyxDQUNyRDVmLE1BQU0sQ0FBRWpHLEdBQUcsSUFBb0I3RSxPQUFPLENBQUM2RSxHQUFHLENBQUMsQ0FDaEQsQ0FBQzs7SUFFRDtJQUNBLElBQUksSUFBSSxDQUFDb1IsYUFBYSxDQUFDckgsSUFBSSxDQUFDLEdBQUdyRyxRQUFRLEVBQUU7TUFDdkMsSUFBSSxDQUFDOVEsbUJBQW1CLENBQUN5bkIsS0FBSyxDQUFDLENBQUM7TUFDaEN0USxJQUFJLEdBQUd1YyxTQUFTLENBQUMsS0FBSyxDQUFDO0lBQ3pCO0lBRUEsT0FBT3ZjLElBQUksQ0FBQzVTLElBQUksQ0FBQyxDQUFDLEdBQUc0UyxJQUFJLEdBQUcsSUFBSTtFQUNsQztFQUVRNGIsaUJBQWlCQSxDQUFBLEVBQWtCO0lBQ3pDLE1BQU03RyxLQUFlLEdBQUcsRUFBRTtJQUUxQixNQUFNNkgsU0FBUyxHQUFHQSxDQUFDamMsS0FBYSxFQUFFeFQsS0FBYyxLQUFLO01BQ25ELE1BQU00UCxVQUFVLEdBQUcsSUFBSSxDQUFDN1AsWUFBWSxDQUFDQyxLQUFLLENBQUM7TUFDM0MsSUFBSSxDQUFDNFAsVUFBVSxFQUFFO01BQ2pCLElBQUksSUFBSSxDQUFDbFUsbUJBQW1CLENBQUN2SSxHQUFHLENBQUN5YyxVQUFVLENBQUMsRUFBRTtRQUM1QztNQUNGO01BQ0FnWSxLQUFLLENBQUM3ekIsSUFBSSxDQUFDLEdBQUcrZSxZQUFLLENBQUM1YyxJQUFJLENBQUMwWixVQUFVLENBQUMsSUFBSWtELFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDM0UsS0FBSyxDQUFDLEVBQUUsQ0FBQztJQUNsRSxDQUFDOztJQUVEO0lBQ0FpYyxTQUFTLENBQUMsV0FBVyxFQUFFLFFBQVEsQ0FBQztJQUNoQ0EsU0FBUyxDQUFDLGFBQWEsRUFBRSxRQUFRLENBQUM7O0lBRWxDO0lBQ0FBLFNBQVMsQ0FBQyxNQUFNLEVBQUUsSUFBSSxDQUFDenhCLFdBQVcsQ0FBQ2dsQixrQkFBa0IsQ0FBQztJQUN0RHlNLFNBQVMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDenhCLFdBQVcsQ0FBQzhrQixjQUFjLENBQUM7SUFDdEQyTSxTQUFTLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQ3p4QixXQUFXLENBQUNpbEIsZUFBZSxDQUFDO0lBRW5ELElBQUkyRSxLQUFLLENBQUNud0IsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN0QixPQUFPLElBQUk7SUFDYjtJQUNBLE9BQU9td0IsS0FBSyxDQUFDdHpCLElBQUksQ0FBQ3dlLFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0VBQzFDO0VBR1ErUCxjQUFjQSxDQUFBLEVBQVc7SUFDL0IsSUFBSSxJQUFJLENBQUN0c0IsY0FBYyxFQUFFO01BQ3ZCO01BQ0EsTUFBTTh6QixTQUFTLEdBQUcsSUFBSSxDQUFDOXpCLGNBQWMsQ0FBQzlILEtBQUssS0FBSyxDQUFDLEdBQUcsUUFBUSxHQUFHLEdBQUcsSUFBSSxDQUFDOEgsY0FBYyxDQUFDOUgsS0FBSyxRQUFRO01BQ25HLE1BQU02N0IsU0FBUyxHQUFHLE9BQU8sSUFBSSxDQUFDL3pCLGNBQWMsQ0FBQ2lFLEtBQUssS0FBSyxRQUFRLEdBQzdELEdBQUcsSUFBSSxDQUFDakUsY0FBYyxDQUFDaUUsS0FBSyxRQUFRLEdBQ3BDLEdBQUcsSUFBSSxDQUFDakUsY0FBYyxDQUFDaUUsS0FBSyxFQUFFO01BQ2hDLE1BQU1rYixPQUFPLEdBQUdqSSxZQUFLLENBQUM2SSxPQUFPLENBQUMsT0FBTytULFNBQVMsS0FBS0MsU0FBUyxHQUFHLENBQUM7TUFDaEUsT0FBTyxJQUFJLENBQUNuSixZQUFZLENBQUMsR0FBRzFULFlBQUssQ0FBQ0MsT0FBTyxDQUFDLElBQUksQ0FBQyxHQUFHZ0ksT0FBTyxFQUFFLEVBQUUsSUFBSSxDQUFDdE8sU0FBUyxDQUFDLENBQUMsQ0FBQztJQUNoRjs7SUFFQTtJQUNBLE1BQU1DLEdBQUcsR0FBR0MsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN0QixNQUFNRSxXQUFXLEdBQUcsSUFBSSxDQUFDM0wscUJBQXFCLEdBQUcsQ0FBQyxJQUFJeUwsR0FBRyxHQUFHLElBQUksQ0FBQ3pMLHFCQUFxQixJQUFJLElBQUksQ0FBQ1Asa0JBQWtCO0lBQ2pILElBQUksSUFBSSxDQUFDSyxZQUFZLElBQUksSUFBSSxDQUFDRCxnQkFBZ0IsSUFBSThMLFdBQVcsRUFBRTtNQUM3RCxNQUFNL00sS0FBSyxHQUFHLElBQUksQ0FBQ1osZ0JBQWdCLENBQUN4SCxNQUFNLElBQUksSUFBSSxDQUFDdUgsV0FBVyxDQUFDdkgsTUFBTSxJQUFJLElBQUksQ0FBQzJKLG1CQUFtQixDQUFDM0osTUFBTSxJQUFJLENBQUM7TUFDN0csSUFBSW9JLEtBQUssR0FBRyxDQUFDLEVBQUU7UUFDYixNQUFNcW1CLFNBQVMsR0FBR3BULFlBQUssQ0FBQ29GLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLGtCQUFrQnRZLEtBQUssU0FBUyxDQUFDO1FBQ2xFLE9BQU8sSUFBSSxDQUFDMm1CLFlBQVksQ0FBQyxHQUFHMVQsWUFBSyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUdtVCxTQUFTLEVBQUUsRUFBRSxJQUFJLENBQUN6WixTQUFTLENBQUMsQ0FBQyxDQUFDO01BQ2xGO01BQ0E7TUFDQSxJQUFJRyxXQUFXLEVBQUU7UUFDZixPQUFPLElBQUksQ0FBQzRaLFlBQVksQ0FBQyxHQUFHMVQsWUFBSyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUN0RyxTQUFTLENBQUMsQ0FBQyxDQUFDO01BQ3RFO0lBQ0Y7O0lBRUE7SUFDQSxNQUFNakksTUFBTSxHQUFHc08sWUFBSyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDO0lBQ2xDLE1BQU02YyxXQUFXLEdBQUcsSUFBSSxDQUFDMVYsYUFBYSxDQUFDMVYsTUFBTSxDQUFDO0lBQzlDLE1BQU1nSSxRQUFRLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNqQyxNQUFNb2pCLGtCQUFrQixHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ2pDLE1BQU1DLGlCQUFpQixHQUFHRCxrQkFBa0IsQ0FBQ3A0QixNQUFNOztJQUVuRDtJQUNBO0lBQ0EsTUFBTXM0QixTQUFTLEdBQUcsSUFBSSxDQUFDNTBCLE1BQU0sQ0FBQ3FFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2xELE1BQU1vUSxVQUFVLEdBQUcsSUFBSSxDQUFDM04sVUFBVSxHQUFHLEdBQUcsQ0FBQy9OLE1BQU0sQ0FBQzY3QixTQUFTLENBQUN0NEIsTUFBTSxDQUFDLEdBQUdzNEIsU0FBUztJQUM3RSxNQUFNQyxXQUFXLEdBQUdwZ0IsVUFBVSxDQUFDL0YsS0FBSyxDQUFDLElBQUksQ0FBQzs7SUFFMUM7SUFDQSxNQUFNL0osTUFBZ0IsR0FBRyxFQUFFO0lBQzNCLElBQUltd0IsVUFBVSxHQUFHLENBQUM7SUFDbEIsSUFBSUMsVUFBVSxHQUFHLENBQUM7SUFDbEIsSUFBSUMsU0FBUyxHQUFHLENBQUM7SUFDakIsSUFBSUMsV0FBVyxHQUFHLEtBQUs7SUFFdkIsS0FBSyxJQUFJQyxTQUFTLEdBQUcsQ0FBQyxFQUFFQSxTQUFTLEdBQUdMLFdBQVcsQ0FBQ3Y0QixNQUFNLEVBQUU0NEIsU0FBUyxFQUFFLEVBQUU7TUFDbkUsTUFBTXhkLElBQUksR0FBR21kLFdBQVcsQ0FBQ0ssU0FBUyxDQUFDLElBQUksRUFBRTtNQUN6QyxNQUFNQyxrQkFBa0IsR0FBR0QsU0FBUyxLQUFLLENBQUM7TUFDMUMsTUFBTUUsYUFBYSxHQUFHTixVQUFVOztNQUVoQztNQUNBLE1BQU1PLGNBQWMsR0FBR2hrQixRQUFRLEdBQUdvakIsV0FBVztNQUM3QyxNQUFNYSxhQUFhLEdBQUdqa0IsUUFBUSxHQUFHc2pCLGlCQUFpQjs7TUFFbEQ7TUFDQSxJQUFJNXdCLFNBQVMsR0FBRzJULElBQUk7TUFDcEIsSUFBSTZkLGtCQUFrQixHQUFHLElBQUk7TUFFN0IsT0FBT3h4QixTQUFTLENBQUN6SCxNQUFNLEdBQUcsQ0FBQyxJQUFJaTVCLGtCQUFrQixFQUFFO1FBQ2pELE1BQU12VCxjQUFjLEdBQUltVCxrQkFBa0IsSUFBSUksa0JBQWtCLEdBQUlGLGNBQWMsR0FBR0MsYUFBYTtRQUNsRyxNQUFNaGpCLEtBQUssR0FBR3ZPLFNBQVMsQ0FBQ0csS0FBSyxDQUFDLENBQUMsRUFBRThkLGNBQWMsQ0FBQztRQUNoRGplLFNBQVMsR0FBR0EsU0FBUyxDQUFDRyxLQUFLLENBQUM4ZCxjQUFjLENBQUM7O1FBRTNDO1FBQ0EsSUFBSXdULFdBQW1CO1FBQ3ZCLElBQUlMLGtCQUFrQixJQUFJSSxrQkFBa0IsRUFBRTtVQUM1Q0MsV0FBVyxHQUFHLEdBQUduc0IsTUFBTSxHQUFHaUosS0FBSyxFQUFFO1FBQ25DLENBQUMsTUFBTTtVQUNMa2pCLFdBQVcsR0FBRyxHQUFHZCxrQkFBa0IsR0FBR3BpQixLQUFLLEVBQUU7UUFDL0M7O1FBRUE7UUFDQSxJQUFJLENBQUMyaUIsV0FBVyxFQUFFO1VBQ2hCLE1BQU1RLFVBQVUsR0FBR0wsYUFBYSxJQUFJMWQsSUFBSSxDQUFDcGIsTUFBTSxHQUFHeUgsU0FBUyxDQUFDekgsTUFBTSxHQUFHZ1csS0FBSyxDQUFDaFcsTUFBTSxDQUFDO1VBQ2xGLE1BQU1vNUIsUUFBUSxHQUFHRCxVQUFVLEdBQUduakIsS0FBSyxDQUFDaFcsTUFBTTtVQUMxQyxJQUFJLElBQUksQ0FBQzJELE1BQU0sSUFBSXcxQixVQUFVLElBQUksSUFBSSxDQUFDeDFCLE1BQU0sSUFBSXkxQixRQUFRLEVBQUU7WUFDeERYLFVBQVUsR0FBR3B3QixNQUFNLENBQUNySSxNQUFNO1lBQzFCLE1BQU1xNUIsYUFBYSxHQUFHLElBQUksQ0FBQzExQixNQUFNLEdBQUd3MUIsVUFBVTtZQUM5Q1QsU0FBUyxHQUFHLENBQUVHLGtCQUFrQixJQUFJSSxrQkFBa0IsR0FBSWQsV0FBVyxHQUFHRSxpQkFBaUIsSUFBSWdCLGFBQWE7WUFDMUdWLFdBQVcsR0FBRyxJQUFJO1VBQ3BCO1FBQ0Y7UUFFQXR3QixNQUFNLENBQUMvTCxJQUFJLENBQUM0OEIsV0FBVyxDQUFDO1FBQ3hCRCxrQkFBa0IsR0FBRyxLQUFLOztRQUUxQjtRQUNBLElBQUl4eEIsU0FBUyxDQUFDekgsTUFBTSxLQUFLLENBQUMsSUFBSWdXLEtBQUssQ0FBQ2hXLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDcEQ7TUFFQXc0QixVQUFVLElBQUlwZCxJQUFJLENBQUNwYixNQUFNLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDakM7O0lBRUE7SUFDQSxJQUFJLENBQUMyNEIsV0FBVyxFQUFFO01BQ2hCRixVQUFVLEdBQUd0N0IsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRW1CLE1BQU0sQ0FBQ3JJLE1BQU0sR0FBRyxDQUFDLENBQUM7TUFDM0MsTUFBTXM1QixRQUFRLEdBQUdqeEIsTUFBTSxDQUFDb3dCLFVBQVUsQ0FBQyxJQUFJLEVBQUU7TUFDekNDLFNBQVMsR0FBRyxJQUFJLENBQUNqVyxhQUFhLENBQUM2VyxRQUFRLENBQUM7SUFDMUM7O0lBRUE7SUFDQSxJQUFJanhCLE1BQU0sQ0FBQ3JJLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDckIsTUFBTXU1QixVQUFVLEdBQUdseEIsTUFBTSxDQUFDb3dCLFVBQVUsQ0FBQyxJQUFJLEVBQUU7TUFDM0MsTUFBTWUsV0FBVyxHQUFHLElBQUksQ0FBQ3pZLFNBQVMsQ0FBQ3dZLFVBQVUsQ0FBQztNQUM5QyxNQUFNRSxTQUFTLEdBQUd0OEIsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDdXhCLFNBQVMsRUFBRWMsV0FBVyxDQUFDeDVCLE1BQU0sQ0FBQzs7TUFFekQ7TUFDQSxNQUFNMDVCLE1BQU0sR0FBR0YsV0FBVyxDQUFDNXhCLEtBQUssQ0FBQyxDQUFDLEVBQUU2eEIsU0FBUyxDQUFDO01BQzlDLE1BQU1yaUIsRUFBRSxHQUFHb2lCLFdBQVcsQ0FBQ3hwQixNQUFNLENBQUN5cEIsU0FBUyxDQUFDLElBQUksR0FBRztNQUMvQyxNQUFNRSxLQUFLLEdBQUdILFdBQVcsQ0FBQzV4QixLQUFLLENBQUM2eEIsU0FBUyxHQUFHLENBQUMsQ0FBQzs7TUFFOUM7TUFDQSxNQUFNNVosTUFBTSxHQUFHNFksVUFBVSxLQUFLLENBQUMsR0FBRzFyQixNQUFNLEdBQUdxckIsa0JBQWtCO01BQzdELE1BQU13QixRQUFRLEdBQUduQixVQUFVLEtBQUssQ0FBQyxHQUFHaUIsTUFBTSxDQUFDOXhCLEtBQUssQ0FBQ3V3QixXQUFXLENBQUMsR0FBR3VCLE1BQU0sQ0FBQzl4QixLQUFLLENBQUN5d0IsaUJBQWlCLENBQUM7TUFDL0Zod0IsTUFBTSxDQUFDb3dCLFVBQVUsQ0FBQyxHQUFHLEdBQUc1WSxNQUFNLEdBQUcrWixRQUFRLEdBQUdwNEIsR0FBRyxDQUFDYSxPQUFPLEdBQUcrVSxFQUFFLEdBQUc1VixHQUFHLENBQUNjLEtBQUssR0FBR3EzQixLQUFLLEVBQUU7SUFDcEY7O0lBRUE7SUFDQSxJQUFJLENBQUN2d0IsbUJBQW1CLEdBQUdzdkIsU0FBUyxHQUFHLENBQUM7SUFFeEMsT0FBT3J3QixNQUFNLENBQUN4TCxJQUFJLENBQUMsSUFBSSxDQUFDO0VBQzFCO0VBRVFnOUIsZ0JBQWdCQSxDQUFDQyxTQUFpQixFQUFvQztJQUM1RSxJQUFJQSxTQUFTLElBQUksQ0FBQyxFQUFFO01BQ2xCLE9BQU87UUFBRXg0QixJQUFJLEVBQUUsRUFBRTtRQUFFcUMsTUFBTSxFQUFFO01BQUUsQ0FBQztJQUNoQztJQUVBLElBQUksSUFBSSxDQUFDUSxjQUFjLEVBQUU7TUFDdkIsT0FBTztRQUFFN0MsSUFBSSxFQUFFLEVBQUU7UUFBRXFDLE1BQU0sRUFBRTtNQUFFLENBQUM7SUFDaEM7SUFFQSxNQUFNd1UsVUFBVSxHQUFHLElBQUksQ0FBQ3pVLE1BQU0sQ0FBQ3FFLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ25ELE1BQU1neUIsV0FBVyxHQUFHNThCLElBQUksQ0FBQ2dLLEdBQUcsQ0FBQyxJQUFJLENBQUN4RCxNQUFNLEVBQUV3VSxVQUFVLENBQUNuWSxNQUFNLENBQUM7SUFFNUQsSUFBSWc2QixNQUFNLEdBQUcsSUFBSSxDQUFDanhCLGlCQUFpQjtJQUNuQyxJQUFJZ3hCLFdBQVcsR0FBR0MsTUFBTSxFQUFFO01BQ3hCQSxNQUFNLEdBQUdELFdBQVc7SUFDdEI7SUFDQSxNQUFNdkwsUUFBUSxHQUFHdUwsV0FBVyxHQUFHQyxNQUFNLEdBQUdGLFNBQVMsR0FBRyxDQUFDO0lBQ3JELElBQUl0TCxRQUFRLEdBQUcsQ0FBQyxFQUFFO01BQ2hCd0wsTUFBTSxJQUFJeEwsUUFBUTtJQUNwQjtJQUNBLE1BQU15TCxTQUFTLEdBQUc5OEIsSUFBSSxDQUFDK0osR0FBRyxDQUFDLENBQUMsRUFBRWlSLFVBQVUsQ0FBQ25ZLE1BQU0sR0FBRzg1QixTQUFTLENBQUM7SUFDNUQsSUFBSUUsTUFBTSxHQUFHQyxTQUFTLEVBQUU7TUFDdEJELE1BQU0sR0FBR0MsU0FBUztJQUNwQjtJQUNBLElBQUksQ0FBQ2x4QixpQkFBaUIsR0FBR2l4QixNQUFNO0lBRS9CLE1BQU1FLE1BQU0sR0FBRy9oQixVQUFVLENBQUN2USxLQUFLLENBQUNveUIsTUFBTSxFQUFFQSxNQUFNLEdBQUdGLFNBQVMsQ0FBQztJQUMzRCxNQUFNSyxPQUFPLEdBQUdELE1BQU0sQ0FBQzluQixLQUFLLENBQUMsRUFBRSxDQUFDLENBQUNqUixHQUFHLENBQUNpNUIsSUFBSSxJQUFLQSxJQUFJLEtBQUssSUFBSSxHQUFHdjNCLG1CQUFtQixHQUFHdTNCLElBQUssQ0FBQyxDQUFDdjlCLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDbkcsTUFBTXc5QixjQUFjLEdBQUdsOUIsSUFBSSxDQUFDZ0ssR0FBRyxDQUFDZ3pCLE9BQU8sQ0FBQ242QixNQUFNLEVBQUU3QyxJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFNnlCLFdBQVcsR0FBR0MsTUFBTSxDQUFDLENBQUM7SUFFbEYsTUFBTU4sTUFBTSxHQUFHUyxPQUFPLENBQUN2eUIsS0FBSyxDQUFDLENBQUMsRUFBRXl5QixjQUFjLENBQUM7SUFDL0MsTUFBTWpqQixFQUFFLEdBQUcraUIsT0FBTyxDQUFDbnFCLE1BQU0sQ0FBQ3FxQixjQUFjLENBQUMsSUFBSSxHQUFHO0lBQ2hELE1BQU1WLEtBQUssR0FBR1EsT0FBTyxDQUFDdnlCLEtBQUssQ0FBQ3l5QixjQUFjLEdBQUcsQ0FBQyxDQUFDO0lBRS9DLE9BQU87TUFDTC80QixJQUFJLEVBQUUsR0FBR280QixNQUFNLEdBQUdsNEIsR0FBRyxDQUFDYSxPQUFPLEdBQUcrVSxFQUFFLEdBQUc1VixHQUFHLENBQUNjLEtBQUssR0FBR3EzQixLQUFLLEVBQUU7TUFDeERoMkIsTUFBTSxFQUFFMDJCO0lBQ1YsQ0FBQztFQUNIOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1U1bkIsNEJBQTRCQSxDQUFBLEVBQVM7SUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQ3RPLGNBQWMsRUFBRTtJQUMxQixNQUFNN0MsSUFBSSxHQUFHLElBQUksQ0FBQzZDLGNBQWMsQ0FBQzdDLElBQUk7SUFDckMsSUFBSSxDQUFDNkMsY0FBYyxHQUFHLElBQUk7SUFDMUI7SUFDQSxJQUFJLENBQUNULE1BQU0sR0FBR3BDLElBQUk7SUFDbEIsSUFBSSxDQUFDcUMsTUFBTSxHQUFHckMsSUFBSSxDQUFDdEIsTUFBTTtJQUN6QixJQUFJLENBQUN3UyxpQkFBaUIsQ0FBQyxDQUFDO0lBQ3hCLElBQUksQ0FBQ2pGLFlBQVksQ0FBQyxDQUFDO0lBQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO0VBQ3hCOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1U4RixvQkFBb0JBLENBQUEsRUFBUztJQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDMVQsY0FBYyxFQUFFO0lBQzFCLE1BQU03QyxJQUFJLEdBQUcsSUFBSSxDQUFDNkMsY0FBYyxDQUFDN0MsSUFBSTtJQUNyQyxJQUFJLENBQUM2QyxjQUFjLEdBQUcsSUFBSTtJQUMxQjtJQUNBLElBQUksQ0FBQ1QsTUFBTSxHQUFHLEVBQUU7SUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztJQUNmLElBQUksQ0FBQzZPLGlCQUFpQixDQUFDLENBQUM7SUFDeEIsSUFBSSxDQUFDakYsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7SUFDdEI7SUFDQSxJQUFJLENBQUN3QyxVQUFVLENBQUNqVCxJQUFJLENBQUM7RUFDdkI7RUFFQWc1QixZQUFZQSxDQUFDeDVCLE9BQXdFLEdBQUcsQ0FBQyxDQUFDLEVBQW1CO0lBQzNHLElBQUksSUFBSSxDQUFDMkssWUFBWSxFQUFFO01BQ3JCLE9BQU84dUIsT0FBTyxDQUFDQyxNQUFNLENBQUMsSUFBSXpzQixLQUFLLENBQUMsbUNBQW1DLENBQUMsQ0FBQztJQUN2RTtJQUVBLElBQUlqTixPQUFPLENBQUMyNUIsV0FBVyxFQUFFO01BQ3ZCLElBQUksQ0FBQy8yQixNQUFNLEdBQUcsRUFBRTtNQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO01BQ2YsSUFBSSxDQUFDb0YsaUJBQWlCLEdBQUcsQ0FBQztNQUMxQixJQUFJLENBQUMrSSxnQkFBZ0IsQ0FBQyxDQUFDO01BQ3ZCLElBQUksQ0FBQ3ZFLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQUksQ0FBQ3dFLGVBQWUsQ0FBQyxDQUFDO0lBQ3hCO0lBRUEsT0FBTyxJQUFJd29CLE9BQU8sQ0FBUyxDQUFDcmlCLE9BQU8sRUFBRXNpQixNQUFNLEtBQUs7TUFDOUMsSUFBSSxDQUFDL3VCLFlBQVksR0FBRztRQUNsQnlNLE9BQU87UUFDUHNpQixNQUFNO1FBQ04xNUIsT0FBTyxFQUFFO1VBQ1AwSCxJQUFJLEVBQUUxSCxPQUFPLENBQUMwSCxJQUFJLEtBQUssS0FBSztVQUM1QndQLFVBQVUsRUFBRWxYLE9BQU8sQ0FBQ2tYLFVBQVUsSUFBSTtRQUNwQztNQUNGLENBQUM7SUFDSCxDQUFDLENBQUM7RUFDSjtFQUVRbEssa0JBQWtCQSxDQUFDNHNCLE1BQWdCLEVBQVE7SUFDakQsSUFBSSxDQUFDLElBQUksQ0FBQ2p2QixZQUFZLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE1BQU1rdkIsT0FBTyxHQUFHLElBQUksQ0FBQ2x2QixZQUFZO0lBQ2pDLElBQUksQ0FBQ0EsWUFBWSxHQUFHLElBQUk7SUFDeEJrdkIsT0FBTyxDQUFDSCxNQUFNLEdBQUdFLE1BQU0sSUFBSSxJQUFJM3NCLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0VBQ2xFOztFQUdBOztFQUVRd2lCLGVBQWVBLENBQUNqdkIsSUFBWSxFQUFFN0QsS0FBYSxFQUFFNGlCLE1BQWMsRUFBWTtJQUM3RSxNQUFNVixLQUFLLEdBQUdyZSxJQUFJLENBQUM4USxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ2pDLE1BQU0vVixLQUFlLEdBQUcsRUFBRTtJQUMxQixJQUFJaUwsT0FBTyxHQUFHLEVBQUU7SUFFaEIsS0FBSyxNQUFNNlgsSUFBSSxJQUFJUSxLQUFLLEVBQUU7TUFDeEIsTUFBTW5HLElBQUksR0FBR2xTLE9BQU8sR0FBRzZYLElBQUk7TUFDM0IsSUFBSSxJQUFJLENBQUNzRCxhQUFhLENBQUNqSixJQUFJLENBQUMsR0FBRy9iLEtBQUssSUFBSTZKLE9BQU8sQ0FBQ2tCLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDdEQ7UUFDQW5NLEtBQUssQ0FBQ0MsSUFBSSxDQUFDZ0wsT0FBTyxDQUFDc1IsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUM3QnRSLE9BQU8sR0FBRytZLE1BQU0sR0FBR2xCLElBQUksQ0FBQ1csU0FBUyxDQUFDLENBQUM7TUFDckMsQ0FBQyxNQUFNO1FBQ0x4WSxPQUFPLEdBQUdrUyxJQUFJO01BQ2hCO0lBQ0Y7SUFFQSxJQUFJbFMsT0FBTyxDQUFDa0IsSUFBSSxDQUFDLENBQUMsRUFBRTtNQUNsQm5NLEtBQUssQ0FBQ0MsSUFBSSxDQUFDZ0wsT0FBTyxDQUFDc1IsT0FBTyxDQUFDLENBQUMsQ0FBQztJQUMvQjs7SUFFQTtJQUNBLE9BQU92YyxLQUFLLENBQUMyRCxNQUFNLEdBQUczRCxLQUFLLEdBQUcsQ0FBQ2lGLElBQUksQ0FBQztFQUN0QztFQUVRMFQsU0FBU0EsQ0FBQSxFQUFXO0lBQzFCLE1BQU0xUixJQUFJLEdBQUcsSUFBSSxDQUFDTixNQUFNLENBQUN5SixLQUFLLEdBQUcsSUFBSSxDQUFDbkosSUFBSSxJQUFJLEVBQUUsR0FBRyxFQUFFO0lBQ3JELE9BQU9uRyxJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFNUQsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUM5QjtFQUVRbWYsYUFBYUEsQ0FBQzdCLEtBQWEsRUFBVTtJQUMzQyxJQUFJLENBQUNBLEtBQUssRUFBRSxPQUFPLENBQUM7SUFDcEIsT0FBTyxJQUFJLENBQUNHLFNBQVMsQ0FBQ0gsS0FBSyxDQUFDLENBQUM1Z0IsTUFBTTtFQUNyQztFQUVRK2dCLFNBQVNBLENBQUNILEtBQWEsRUFBVTtJQUN2QyxJQUFJLENBQUNBLEtBQUssRUFBRSxPQUFPLEVBQUU7SUFDckI7SUFDQSxPQUFPQSxLQUFLLENBQUM3WSxPQUFPLENBQUMsNEJBQTRCLEVBQUUsRUFBRSxDQUFDO0VBQ3hEO0VBRVFnbkIsWUFBWUEsQ0FBQ25PLEtBQWEsRUFBRW5qQixLQUFhLEVBQVU7SUFDekQsSUFBSSxDQUFDbWpCLEtBQUssRUFBRSxPQUFPLEVBQUU7SUFDckIsTUFBTWdhLEtBQUssR0FBR3o5QixJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFekosS0FBSyxDQUFDO0lBQ2hDO0lBQ0EsTUFBTXNzQixNQUFNLEdBQUduSixLQUFLLENBQUN4TyxLQUFLLENBQUMsbUJBQW1CLENBQUM7SUFDL0MsSUFBSXlvQixPQUFPLEdBQUcsQ0FBQztJQUNmLElBQUl0WixTQUFTLEdBQUcsS0FBSztJQUNyQixJQUFJbFosTUFBTSxHQUFHLEVBQUU7SUFFZixLQUFLLE1BQU15eUIsS0FBSyxJQUFJL1EsTUFBTSxFQUFFO01BQzFCLElBQUksQ0FBQytRLEtBQUssRUFBRTtNQUNaO01BQ0EsSUFBSSxtQkFBbUIsQ0FBQ3JwQixJQUFJLENBQUNxcEIsS0FBSyxDQUFDLEVBQUU7UUFDbkN6eUIsTUFBTSxJQUFJeXlCLEtBQUs7UUFDZjtNQUNGO01BQ0EsSUFBSUQsT0FBTyxJQUFJRCxLQUFLLEVBQUU7UUFDcEJyWixTQUFTLEdBQUcsSUFBSTtRQUNoQjtNQUNGO01BQ0EsTUFBTTlaLFNBQVMsR0FBR216QixLQUFLLEdBQUdDLE9BQU87TUFDakMsSUFBSUMsS0FBSyxDQUFDOTZCLE1BQU0sSUFBSXlILFNBQVMsRUFBRTtRQUM3QlksTUFBTSxJQUFJeXlCLEtBQUs7UUFDZkQsT0FBTyxJQUFJQyxLQUFLLENBQUM5NkIsTUFBTTtNQUN6QixDQUFDLE1BQU07UUFDTCxNQUFNKzZCLFdBQVcsR0FBRzU5QixJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFTyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQzlDLElBQUlzekIsV0FBVyxHQUFHLENBQUMsRUFBRTtVQUNuQjF5QixNQUFNLElBQUl5eUIsS0FBSyxDQUFDbHpCLEtBQUssQ0FBQyxDQUFDLEVBQUVtekIsV0FBVyxDQUFDO1VBQ3JDRixPQUFPLElBQUlFLFdBQVc7UUFDeEI7UUFDQTF5QixNQUFNLElBQUksR0FBRztRQUNia1osU0FBUyxHQUFHLElBQUk7UUFDaEI7TUFDRjtJQUNGO0lBRUEsSUFBSUEsU0FBUyxJQUFJLENBQUNsWixNQUFNLENBQUM2TyxRQUFRLENBQUMxVixHQUFHLENBQUNjLEtBQUssQ0FBQyxFQUFFO01BQzVDK0YsTUFBTSxJQUFJN0csR0FBRyxDQUFDYyxLQUFLO0lBQ3JCO0lBRUEsT0FBTytGLE1BQU07RUFDZjtFQUVBMnlCLFNBQVNBLENBQUEsRUFBVztJQUNsQixPQUFPLElBQUksQ0FBQ3QzQixNQUFNO0VBQ3BCO0VBRUF1M0IsU0FBU0EsQ0FBQSxFQUFXO0lBQ2xCLE9BQU8sSUFBSSxDQUFDdDNCLE1BQU07RUFDcEI7RUFFQXUzQixTQUFTQSxDQUFDNTVCLElBQVksRUFBRW00QixTQUFrQixFQUFRO0lBQ2hELElBQUksQ0FBQy8xQixNQUFNLEdBQUdwQyxJQUFJO0lBQ2xCO0lBQ0EsTUFBTTY1QixlQUFlLEdBQUcxQixTQUFTLElBQUluNEIsSUFBSSxDQUFDdEIsTUFBTTtJQUNoRCxJQUFJLENBQUMyRCxNQUFNLEdBQUd4RyxJQUFJLENBQUMrSixHQUFHLENBQUMsQ0FBQyxFQUFFL0osSUFBSSxDQUFDZ0ssR0FBRyxDQUFDZzBCLGVBQWUsRUFBRTc1QixJQUFJLENBQUN0QixNQUFNLENBQUMsQ0FBQztJQUNqRSxJQUFJLENBQUMrSSxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ3lKLGlCQUFpQixDQUFDLENBQUM7SUFDeEIsSUFBSSxDQUFDakYsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDd0UsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFQXFwQixhQUFhQSxDQUFDQyxPQUFnQixFQUFRO0lBQ3BDLElBQUksQ0FBQzd3QixVQUFVLEdBQUc2d0IsT0FBTztJQUN6QixJQUFJLENBQUM5dEIsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFQXFFLFdBQVdBLENBQUEsRUFBUztJQUNsQixJQUFJLENBQUNsRSx1QkFBdUIsQ0FBQyxDQUFDO0lBQzlCLElBQUksQ0FBQ2hLLE1BQU0sR0FBRyxFQUFFO0lBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7SUFDZixJQUFJLENBQUNvRixpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ2pGLFdBQVcsR0FBRyxFQUFFO0lBQ3JCLElBQUksQ0FBQ0MsZUFBZSxHQUFHLENBQUMsQ0FBQztJQUN6QixJQUFJLENBQUN3SixZQUFZLENBQUMsQ0FBQztJQUNuQixJQUFJLENBQUN3RSxlQUFlLENBQUMsQ0FBQztFQUN4QjtFQUVBdXBCLGFBQWFBLENBQUNwN0IsTUFBcUIsRUFBUTtJQUN6QyxJQUFJLENBQUNpcUIsWUFBWSxDQUFDanFCLE1BQU0sQ0FBQztFQUMzQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNFcTdCLG9CQUFvQkEsQ0FBQzE5QixPQUFlLEVBQVE7SUFDMUMsSUFBSSxDQUFDZ0gsYUFBYSxHQUFHaEgsT0FBTztJQUM1QixJQUFJLENBQUMsSUFBSSxDQUFDdUgsZUFBZSxFQUFFO01BQ3pCLElBQUksQ0FBQ0EsZUFBZSxHQUFHc2tCLFdBQVcsQ0FBQyxNQUFNO1FBQ3ZDLElBQUksQ0FBQ3ZrQixZQUFZLEVBQUU7UUFDbkI7UUFDQSxJQUFJLElBQUksQ0FBQ0EsWUFBWSxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUU7VUFDaEMsSUFBSSxDQUFDUSxtQkFBbUIsRUFBRTtRQUM1QjtRQUNBLElBQUksQ0FBQzRILFlBQVksQ0FBQyxDQUFDO01BQ3JCLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDUjtJQUNBLElBQUksQ0FBQ0EsWUFBWSxDQUFDLENBQUM7RUFDckI7O0VBRUE7QUFDRjtBQUNBO0VBQ0VpdUIsb0JBQW9CQSxDQUFBLEVBQVM7SUFDM0IsSUFBSSxJQUFJLENBQUNwMkIsZUFBZSxFQUFFO01BQ3hCNkksYUFBYSxDQUFDLElBQUksQ0FBQzdJLGVBQWUsQ0FBQztNQUNuQyxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJO0lBQzdCO0lBQ0EsSUFBSSxDQUFDUCxhQUFhLEdBQUcsSUFBSTtJQUN6QixJQUFJLENBQUMwSSxZQUFZLENBQUMsQ0FBQztFQUNyQjtFQUVBa3VCLFVBQVVBLENBQUN6cEIsT0FBZSxFQUFRO0lBQ2hDLElBQUksQ0FBQzBwQixlQUFlLENBQUMxcEIsT0FBTyxDQUFDO0VBQy9COztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVXFHLGlCQUFpQkEsQ0FBQy9XLElBQVksRUFBUTtJQUM1QyxNQUFNNlcsVUFBVSxHQUFHN1csSUFBSSxFQUFFa0gsSUFBSSxDQUFDLENBQUM7SUFDL0IsSUFBSSxDQUFDMlAsVUFBVSxFQUFFOztJQUVqQjtJQUNBLE1BQU1sRCxHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSSxJQUFJLENBQUN4TSxlQUFlLElBQUksSUFBSSxDQUFDQSxlQUFlLENBQUNuSCxJQUFJLEtBQUs2VyxVQUFVLElBQUlsRCxHQUFHLEdBQUcsSUFBSSxDQUFDeE0sZUFBZSxDQUFDMk8sRUFBRSxHQUFHLElBQUksRUFBRTtNQUM1RztJQUNGO0lBQ0EsSUFBSSxDQUFDM08sZUFBZSxHQUFHO01BQUVuSCxJQUFJLEVBQUU2VyxVQUFVO01BQUVmLEVBQUUsRUFBRW5DO0lBQUksQ0FBQzs7SUFFcEQ7SUFDQSxJQUFJLENBQUMwRSxRQUFRLENBQUMsUUFBUSxFQUFFeEIsVUFBVSxDQUFDO0VBQ3JDO0VBRUF2SixNQUFNQSxDQUFBLEVBQVM7SUFDYixJQUFJLENBQUNyQixZQUFZLENBQUMsQ0FBQztFQUNyQjtFQUVRb04sS0FBS0EsQ0FBQ2doQixFQUFVLEVBQWlCO0lBQ3ZDLE9BQU8sSUFBSXBCLE9BQU8sQ0FBQ3JpQixPQUFPLElBQUloSCxVQUFVLENBQUNnSCxPQUFPLEVBQUV5akIsRUFBRSxDQUFDLENBQUM7RUFDeEQ7O0VBRUE7O0VBRVEvdEIsS0FBS0EsQ0FBQ3lCLElBQVksRUFBUTtJQUNoQyxJQUFJLENBQUNyTSxNQUFNLENBQUM0SyxLQUFLLENBQUN5QixJQUFJLENBQUM7RUFDekI7RUFFUXFzQixlQUFlQSxDQUFDcDZCLElBQVksRUFBUTtJQUMxQyxNQUFNNlcsVUFBVSxHQUFHN1csSUFBSSxFQUFFa0gsSUFBSSxDQUFDLENBQUM7SUFDL0IsSUFBSSxDQUFDMlAsVUFBVSxFQUFFO01BQ2Y7SUFDRjtJQUNBLE1BQU1sRCxHQUFHLEdBQUdDLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSSxJQUFJLENBQUN4TSxlQUFlLElBQUksSUFBSSxDQUFDQSxlQUFlLENBQUNuSCxJQUFJLEtBQUs2VyxVQUFVLElBQUlsRCxHQUFHLEdBQUcsSUFBSSxDQUFDeE0sZUFBZSxDQUFDMk8sRUFBRSxHQUFHLElBQUksRUFBRTtNQUM1RztJQUNGO0lBQ0EsSUFBSSxDQUFDM08sZUFBZSxHQUFHO01BQUVuSCxJQUFJLEVBQUU2VyxVQUFVO01BQUVmLEVBQUUsRUFBRW5DO0lBQUksQ0FBQztJQUNwRCxJQUFJLENBQUMwRSxRQUFRLENBQUMsUUFBUSxFQUFFeEIsVUFBVSxDQUFDO0VBQ3JDO0VBRVF4SyxlQUFlQSxDQUFBLEVBQVM7SUFDOUIsTUFBTXNoQixNQUFNLEdBQUcsSUFBSSxDQUFDNWtCLFdBQVcsRUFBRWhPLEtBQUssQ0FBQzJELE1BQU0sSUFBSSxJQUFJLENBQUMwSSxZQUFZLElBQUksQ0FBQztJQUN2RSxJQUFJdW1CLE1BQU0sS0FBSyxDQUFDLEVBQUU7O0lBRWxCO0lBQ0EsTUFBTXZyQixNQUFnQixHQUFHLEVBQUU7O0lBRTNCO0lBQ0FBLE1BQU0sQ0FBQ3BILElBQUksQ0FBQyxXQUFXLENBQUM7O0lBRXhCO0lBQ0EsSUFBSSxJQUFJLENBQUMrTixXQUFXLEVBQUU7TUFDcEIsTUFBTTZrQixVQUFVLEdBQUcsSUFBSSxDQUFDN2tCLFdBQVcsQ0FBQzJrQixXQUFXO01BQy9DLElBQUlFLFVBQVUsR0FBRyxDQUFDLEVBQUU7UUFDbEJ4ckIsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFFBQVE0eUIsVUFBVSxHQUFHLENBQUM7TUFDcEM7SUFDRjs7SUFFQTtJQUNBLEtBQUssSUFBSTN6QixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcwekIsTUFBTSxFQUFFMXpCLENBQUMsRUFBRSxFQUFFO01BQy9CbUksTUFBTSxDQUFDcEgsSUFBSSxDQUFDLElBQUksQ0FBQztNQUNqQm9ILE1BQU0sQ0FBQ3BILElBQUksQ0FBQ2tGLEdBQUcsQ0FBQ0ksVUFBVSxDQUFDO01BQzNCLElBQUlyRyxDQUFDLEdBQUcwekIsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNsQnZyQixNQUFNLENBQUNwSCxJQUFJLENBQUMsUUFBUSxDQUFDO01BQ3ZCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJMnlCLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDZHZyQixNQUFNLENBQUNwSCxJQUFJLENBQUMsUUFBUTJ5QixNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUM7SUFDcEM7SUFDQXZyQixNQUFNLENBQUNwSCxJQUFJLENBQUMsSUFBSSxDQUFDOztJQUVqQjtJQUNBb0gsTUFBTSxDQUFDcEgsSUFBSSxDQUFDLFdBQVcsQ0FBQzs7SUFFeEI7SUFDQSxJQUFJLENBQUNzUixLQUFLLENBQUNsSyxNQUFNLENBQUM3RyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUM7SUFFM0IsSUFBSSxDQUFDd04sV0FBVyxHQUFHLElBQUk7SUFDdkIsSUFBSSxDQUFDM0IsWUFBWSxHQUFHLENBQUM7SUFDckIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0csY0FBYyxHQUFHLEtBQUs7RUFDN0I7RUFFUW9FLGtCQUFrQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksSUFBSSxDQUFDbEssTUFBTSxDQUFDeUosS0FBSyxFQUFFO01BQ3JCLElBQUksQ0FBQ3BKLElBQUksR0FBRyxJQUFJLENBQUNMLE1BQU0sQ0FBQ0ssSUFBSSxJQUFJLEVBQUU7TUFDbEMsSUFBSSxDQUFDQyxJQUFJLEdBQUcsSUFBSSxDQUFDTixNQUFNLENBQUM0NEIsT0FBTyxJQUFJLEVBQUU7SUFDdkM7RUFDRjtBQUNGO0FBQUNDLE9BQUEsQ0FBQS80QixpQkFBQSxHQUFBQSxpQkFBQSIsImlnbm9yZUxpc3QiOltdfQ==