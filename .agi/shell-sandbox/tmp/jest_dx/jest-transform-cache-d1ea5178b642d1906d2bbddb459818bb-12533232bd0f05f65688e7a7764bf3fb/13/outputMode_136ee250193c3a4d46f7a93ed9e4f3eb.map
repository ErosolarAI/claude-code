{"version":3,"names":["cov_2pn3fxv5sg","actualCoverage","_plainMode","s","_colorEnabled","isPlainOutputMode","f","b","envValue","process","env","undefined","envEnabled","includes","toLowerCase","envDisabled","term","isCi","Boolean","isTty","stdout","isTTY","stdin","isColorEnabled","setPlainOutputMode","enabled","setColorEnabled","resetPlainOutputMode","resetColorEnabled","resetOutputModes"],"sources":["outputMode.ts"],"sourcesContent":["/**\n * Output mode configuration for terminal UI\n *\n * Controls whether to use decorative box-drawing characters or plain text.\n * Plain mode outputs clipboard-friendly text without Unicode borders.\n * Automatically enabled in CI or non-interactive shells; override with AGI_PLAIN_OUTPUT=true.\n *\n * Environment Variables:\n * - AGI_PLAIN_OUTPUT: Set to 'true', '1', 'yes', or 'on' to force plain mode\n * - CI: Automatically enables plain mode when set\n * - TERM: Checked for 'dumb' terminals which get plain mode\n * - NO_COLOR: If set, enables plain mode (respects https://no-color.org/)\n */\n\nlet _plainMode: boolean | null = null;\nlet _colorEnabled: boolean | null = null;\n\n/**\n * Check if plain output mode is enabled.\n * Plain mode outputs text without box-drawing characters for clean clipboard copying.\n */\nexport function isPlainOutputMode(): boolean {\n  if (_plainMode !== null) {\n    return _plainMode;\n  }\n\n  try {\n    // Check explicit environment override first\n    const envValue = process.env['AGI_PLAIN_OUTPUT'];\n    if (envValue !== undefined) {\n      const envEnabled = ['true', '1', 'yes', 'on'].includes(envValue.toLowerCase());\n      if (envEnabled) {\n        _plainMode = true;\n        return _plainMode;\n      }\n      // Also check for explicit disable\n      const envDisabled = ['false', '0', 'no', 'off'].includes(envValue.toLowerCase());\n      if (envDisabled) {\n        _plainMode = false;\n        return _plainMode;\n      }\n    }\n\n    // Check for dumb terminal\n    const term = process.env['TERM'];\n    if (term === 'dumb') {\n      _plainMode = true;\n      return _plainMode;\n    }\n\n    // Check for CI environments\n    const isCi = Boolean(\n      process.env['CI'] ||\n      process.env['GITHUB_ACTIONS'] ||\n      process.env['GITLAB_CI'] ||\n      process.env['CIRCLECI'] ||\n      process.env['TRAVIS'] ||\n      process.env['JENKINS_URL']\n    );\n\n    // Check TTY status safely\n    const isTty = Boolean(\n      process.stdout?.isTTY &&\n      process.stdin?.isTTY\n    );\n\n    // Default to plain logging in non-interactive/CI environments; rich UI only in TTY sessions.\n    _plainMode = !isTty || isCi;\n  } catch {\n    // If anything fails, default to plain mode for safety\n    _plainMode = true;\n  }\n\n  return _plainMode;\n}\n\n/**\n * Check if color output is enabled.\n * Respects NO_COLOR environment variable (https://no-color.org/)\n */\nexport function isColorEnabled(): boolean {\n  if (_colorEnabled !== null) {\n    return _colorEnabled;\n  }\n\n  try {\n    // NO_COLOR takes precedence (https://no-color.org/)\n    if (process.env['NO_COLOR'] !== undefined) {\n      _colorEnabled = false;\n      return _colorEnabled;\n    }\n\n    // FORCE_COLOR enables colors\n    if (process.env['FORCE_COLOR'] !== undefined) {\n      _colorEnabled = true;\n      return _colorEnabled;\n    }\n\n    // Color enabled in TTY by default\n    _colorEnabled = Boolean(process.stdout?.isTTY);\n  } catch {\n    _colorEnabled = false;\n  }\n\n  return _colorEnabled;\n}\n\n/**\n * Override the plain output mode setting (useful for testing)\n */\nexport function setPlainOutputMode(enabled: boolean): void {\n  _plainMode = enabled;\n}\n\n/**\n * Override the color output mode setting (useful for testing)\n */\nexport function setColorEnabled(enabled: boolean): void {\n  _colorEnabled = enabled;\n}\n\n/**\n * Reset plain output mode to check environment variable again\n */\nexport function resetPlainOutputMode(): void {\n  _plainMode = null;\n}\n\n/**\n * Reset color mode to check environment variable again\n */\nexport function resetColorEnabled(): void {\n  _colorEnabled = null;\n}\n\n/**\n * Reset all output mode settings\n */\nexport function resetOutputModes(): void {\n  _plainMode = null;\n  _colorEnabled = null;\n}\n"],"mappings":"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","ignoreList":[]}