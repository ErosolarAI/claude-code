a2cb1075b15d50b1dbd9f70c08965169
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ToolSuiteBuilder = exports.SharedUtilities = exports.BaseCapabilityModule = void 0;
var _crypto = _interopRequireDefault(require("crypto"));
var fs = _interopRequireWildcard(require("fs"));
var path = _interopRequireWildcard(require("path"));
var os = _interopRequireWildcard(require("os"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
/**
 * BASE CAPABILITY MODULE - SHARED INFRASTRUCTURE FOR ALL CAPABILITIES
 * 
 * Provides common utilities, patterns, and infrastructure for all capability modules
 * to promote code reuse and maintain consistency across the codebase.
 */

// ============================================================================
// SHARED TYPES AND INTERFACES
// ============================================================================

// ============================================================================
// SHARED UTILITIES
// ============================================================================

class SharedUtilities {
  static generateOperationId(prefix = 'op') {
    const timestamp = Date.now();
    const random = _crypto.default.randomBytes(4).toString('hex');
    return `${prefix}_${timestamp}_${random}`;
  }
  static createEvidenceDir(baseDir, operationId) {
    const evidenceDir = path.join(baseDir, 'evidence', operationId);
    if (!fs.existsSync(evidenceDir)) {
      fs.mkdirSync(evidenceDir, {
        recursive: true
      });
    }
    return evidenceDir;
  }
  static saveEvidence(evidenceDir, fileName, data) {
    const filePath = path.join(evidenceDir, fileName);
    const content = typeof data === 'string' ? data : JSON.stringify(data, null, 2);
    fs.writeFileSync(filePath, content, 'utf8');
    return filePath;
  }
  static getSecurityContext() {
    return {
      hostname: os.hostname(),
      username: os.userInfo().username,
      platform: os.platform(),
      architecture: os.arch(),
      os: os.type(),
      userAgent: process.env['USER_AGENT'] || 'AGI-Core/1.0'
    };
  }
  static calculateChecksum(data) {
    return _crypto.default.createHash('sha256').update(data).digest('hex');
  }
  static validateAuthorization(current, required) {
    const levels = ['basic', 'elevated', 'military', 'full'];
    const currentIndex = levels.indexOf(current);
    const requiredIndex = levels.indexOf(required);
    return currentIndex >= requiredIndex;
  }
  static createToolDefinition(name, description, parameters, handler) {
    return {
      name,
      description,
      parameters,
      handler
    };
  }
}

// ============================================================================
// BASE CAPABILITY CLASS
// ============================================================================
exports.SharedUtilities = SharedUtilities;
class BaseCapabilityModule {
  options;
  utilities;
  evidenceCollector = null;
  constructor(options = {}) {
    this.options = {
      workingDir: process.cwd(),
      debug: false,
      enableEvidence: true,
      authorization: 'basic',
      emergencyOverride: false,
      ...options
    };
    this.utilities = SharedUtilities;
  }
  initializeEvidenceCollector() {
    if (this.options.enableEvidence) {
      this.evidenceCollector = {
        collect: (data, type) => {
          const evidenceDir = SharedUtilities.createEvidenceDir(this.options.workingDir, SharedUtilities.generateOperationId());
          const fileName = `${type}_${Date.now()}.json`;
          return SharedUtilities.saveEvidence(evidenceDir, fileName, data);
        },
        save: (fileName, content) => {
          const evidenceDir = SharedUtilities.createEvidenceDir(this.options.workingDir, 'misc');
          return SharedUtilities.saveEvidence(evidenceDir, fileName, content);
        },
        cleanup: olderThan => {
          const evidenceDir = path.join(this.options.workingDir, 'evidence');
          if (fs.existsSync(evidenceDir)) {
            const cutoff = olderThan || Date.now() - 7 * 24 * 60 * 60 * 1000; // Default: 7 days
            this.cleanupOldFiles(evidenceDir, cutoff);
          }
        }
      };
    }
  }
  cleanupOldFiles(dir, cutoff) {
    try {
      const files = fs.readdirSync(dir);
      for (const file of files) {
        const filePath = path.join(dir, file);
        const stat = fs.statSync(filePath);
        if (stat.isDirectory()) {
          this.cleanupOldFiles(filePath, cutoff);
        } else if (stat.mtimeMs < cutoff) {
          fs.unlinkSync(filePath);
        }
      }
    } catch (error) {
      // Silent fail for cleanup operations
    }
  }
  log(message, level = 'info') {
    if (this.options.debug || level !== 'debug') {
      const timestamp = new Date().toISOString();
      const prefix = `[${timestamp}] [${level.toUpperCase()}] [${this.id}]`;
      console.log(`${prefix} ${message}`);
    }
  }
  validateOperation(authorizationRequired = 'basic') {
    if (this.options.emergencyOverride) {
      return true;
    }
    const isValid = SharedUtilities.validateAuthorization(this.options.authorization, authorizationRequired);
    if (!isValid) {
      this.log(`Authorization required: ${authorizationRequired}, current: ${this.options.authorization}`, 'warn');
    }
    return isValid;
  }
  createOperationResult(success, operationId, metadata = {}, errors = []) {
    const result = {
      success,
      timestamp: new Date().toISOString(),
      operationId,
      metadata: {
        ...metadata,
        securityContext: SharedUtilities.getSecurityContext(),
        capabilityId: this.id
      },
      errors: errors.length > 0 ? errors : undefined
    };
    if (this.evidenceCollector && success) {
      try {
        const evidencePath = this.evidenceCollector.collect(result, 'operation_result');
        result.evidence = [evidencePath];
      } catch (error) {
        // Evidence collection is optional
      }
    }
    return result;
  }
}

// ============================================================================
// TOOL SUITE BUILDER
// ============================================================================
exports.BaseCapabilityModule = BaseCapabilityModule;
class ToolSuiteBuilder {
  tools = [];
  id;
  description;
  constructor(id, description) {
    this.id = id;
    this.description = description;
  }
  addTool(name, description, parameters, handler) {
    this.tools.push(SharedUtilities.createToolDefinition(name, description, parameters, handler));
    return this;
  }
  build() {
    return {
      id: this.id,
      description: this.description,
      tools: this.tools
    };
  }
}
exports.ToolSuiteBuilder = ToolSuiteBuilder;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfY3J5cHRvIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJmcyIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicGF0aCIsIm9zIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiU2hhcmVkVXRpbGl0aWVzIiwiZ2VuZXJhdGVPcGVyYXRpb25JZCIsInByZWZpeCIsInRpbWVzdGFtcCIsIkRhdGUiLCJub3ciLCJyYW5kb20iLCJjcnlwdG8iLCJyYW5kb21CeXRlcyIsInRvU3RyaW5nIiwiY3JlYXRlRXZpZGVuY2VEaXIiLCJiYXNlRGlyIiwib3BlcmF0aW9uSWQiLCJldmlkZW5jZURpciIsImpvaW4iLCJleGlzdHNTeW5jIiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwic2F2ZUV2aWRlbmNlIiwiZmlsZU5hbWUiLCJkYXRhIiwiZmlsZVBhdGgiLCJjb250ZW50IiwiSlNPTiIsInN0cmluZ2lmeSIsIndyaXRlRmlsZVN5bmMiLCJnZXRTZWN1cml0eUNvbnRleHQiLCJob3N0bmFtZSIsInVzZXJuYW1lIiwidXNlckluZm8iLCJwbGF0Zm9ybSIsImFyY2hpdGVjdHVyZSIsImFyY2giLCJ0eXBlIiwidXNlckFnZW50IiwicHJvY2VzcyIsImVudiIsImNhbGN1bGF0ZUNoZWNrc3VtIiwiY3JlYXRlSGFzaCIsInVwZGF0ZSIsImRpZ2VzdCIsInZhbGlkYXRlQXV0aG9yaXphdGlvbiIsImN1cnJlbnQiLCJyZXF1aXJlZCIsImxldmVscyIsImN1cnJlbnRJbmRleCIsImluZGV4T2YiLCJyZXF1aXJlZEluZGV4IiwiY3JlYXRlVG9vbERlZmluaXRpb24iLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJwYXJhbWV0ZXJzIiwiaGFuZGxlciIsImV4cG9ydHMiLCJCYXNlQ2FwYWJpbGl0eU1vZHVsZSIsIm9wdGlvbnMiLCJ1dGlsaXRpZXMiLCJldmlkZW5jZUNvbGxlY3RvciIsImNvbnN0cnVjdG9yIiwid29ya2luZ0RpciIsImN3ZCIsImRlYnVnIiwiZW5hYmxlRXZpZGVuY2UiLCJhdXRob3JpemF0aW9uIiwiZW1lcmdlbmN5T3ZlcnJpZGUiLCJpbml0aWFsaXplRXZpZGVuY2VDb2xsZWN0b3IiLCJjb2xsZWN0Iiwic2F2ZSIsImNsZWFudXAiLCJvbGRlclRoYW4iLCJjdXRvZmYiLCJjbGVhbnVwT2xkRmlsZXMiLCJkaXIiLCJmaWxlcyIsInJlYWRkaXJTeW5jIiwiZmlsZSIsInN0YXQiLCJzdGF0U3luYyIsImlzRGlyZWN0b3J5IiwibXRpbWVNcyIsInVubGlua1N5bmMiLCJlcnJvciIsImxvZyIsIm1lc3NhZ2UiLCJsZXZlbCIsInRvSVNPU3RyaW5nIiwidG9VcHBlckNhc2UiLCJpZCIsImNvbnNvbGUiLCJ2YWxpZGF0ZU9wZXJhdGlvbiIsImF1dGhvcml6YXRpb25SZXF1aXJlZCIsImlzVmFsaWQiLCJjcmVhdGVPcGVyYXRpb25SZXN1bHQiLCJzdWNjZXNzIiwibWV0YWRhdGEiLCJlcnJvcnMiLCJyZXN1bHQiLCJzZWN1cml0eUNvbnRleHQiLCJjYXBhYmlsaXR5SWQiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJldmlkZW5jZVBhdGgiLCJldmlkZW5jZSIsIlRvb2xTdWl0ZUJ1aWxkZXIiLCJ0b29scyIsImFkZFRvb2wiLCJwdXNoIiwiYnVpbGQiXSwic291cmNlcyI6WyJiYXNlQ2FwYWJpbGl0eS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEJBU0UgQ0FQQUJJTElUWSBNT0RVTEUgLSBTSEFSRUQgSU5GUkFTVFJVQ1RVUkUgRk9SIEFMTCBDQVBBQklMSVRJRVNcbiAqIFxuICogUHJvdmlkZXMgY29tbW9uIHV0aWxpdGllcywgcGF0dGVybnMsIGFuZCBpbmZyYXN0cnVjdHVyZSBmb3IgYWxsIGNhcGFiaWxpdHkgbW9kdWxlc1xuICogdG8gcHJvbW90ZSBjb2RlIHJldXNlIGFuZCBtYWludGFpbiBjb25zaXN0ZW5jeSBhY3Jvc3MgdGhlIGNvZGViYXNlLlxuICovXG5cbmltcG9ydCB0eXBlIHsgQ2FwYWJpbGl0eUNvbnRyaWJ1dGlvbiwgQ2FwYWJpbGl0eUNvbnRleHQsIENhcGFiaWxpdHlNb2R1bGUgfSBmcm9tICcuLi9ydW50aW1lL2FnZW50SG9zdC5qcyc7XG5pbXBvcnQgdHlwZSB7IFRvb2xTdWl0ZSwgVG9vbERlZmluaXRpb24gfSBmcm9tICcuLi9jb3JlL3Rvb2xSdW50aW1lLmpzJztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcbmltcG9ydCAqIGFzIGZzIGZyb20gJ2ZzJztcbmltcG9ydCAqIGFzIHBhdGggZnJvbSAncGF0aCc7XG5pbXBvcnQgKiBhcyBvcyBmcm9tICdvcyc7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNIQVJFRCBUWVBFUyBBTkQgSU5URVJGQUNFU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2VDYXBhYmlsaXR5T3B0aW9ucyB7XG4gIC8qKiBXb3JraW5nIGRpcmVjdG9yeSBmb3Igb3BlcmF0aW9ucyAqL1xuICB3b3JraW5nRGlyPzogc3RyaW5nO1xuICAvKiogRW5hYmxlIGRlYnVnIGxvZ2dpbmcgKi9cbiAgZGVidWc/OiBib29sZWFuO1xuICAvKiogRW5hYmxlIGV2aWRlbmNlIGNvbGxlY3Rpb24gKi9cbiAgZW5hYmxlRXZpZGVuY2U/OiBib29sZWFuO1xuICAvKiogQXV0aG9yaXphdGlvbiBsZXZlbCBmb3Igb3BlcmF0aW9ucyAqL1xuICBhdXRob3JpemF0aW9uPzogJ2Jhc2ljJyB8ICdlbGV2YXRlZCcgfCAnbWlsaXRhcnknIHwgJ2Z1bGwnO1xuICAvKiogRW1lcmdlbmN5IG92ZXJyaWRlIGNhcGFiaWxpdHkgKi9cbiAgZW1lcmdlbmN5T3ZlcnJpZGU/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE9wZXJhdGlvblJlc3VsdCB7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHRpbWVzdGFtcDogc3RyaW5nO1xuICBvcGVyYXRpb25JZDogc3RyaW5nO1xuICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgYW55PjtcbiAgZXZpZGVuY2U/OiBzdHJpbmdbXTtcbiAgZXJyb3JzPzogc3RyaW5nW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZpZGVuY2VDb2xsZWN0b3Ige1xuICBjb2xsZWN0KGRhdGE6IGFueSwgdHlwZTogc3RyaW5nKTogc3RyaW5nO1xuICBzYXZlKGZpbGVOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSk6IHN0cmluZztcbiAgY2xlYW51cChvbGRlclRoYW4/OiBudW1iZXIpOiB2b2lkO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNlY3VyaXR5Q29udGV4dCB7XG4gIGhvc3RuYW1lOiBzdHJpbmc7XG4gIHVzZXJuYW1lOiBzdHJpbmc7XG4gIHBsYXRmb3JtOiBzdHJpbmc7XG4gIGFyY2hpdGVjdHVyZTogc3RyaW5nO1xuICBvczogc3RyaW5nO1xuICB1c2VyQWdlbnQ/OiBzdHJpbmc7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNIQVJFRCBVVElMSVRJRVNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFNoYXJlZFV0aWxpdGllcyB7XG4gIHN0YXRpYyBnZW5lcmF0ZU9wZXJhdGlvbklkKHByZWZpeDogc3RyaW5nID0gJ29wJyk6IHN0cmluZyB7XG4gICAgY29uc3QgdGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCByYW5kb20gPSBjcnlwdG8ucmFuZG9tQnl0ZXMoNCkudG9TdHJpbmcoJ2hleCcpO1xuICAgIHJldHVybiBgJHtwcmVmaXh9XyR7dGltZXN0YW1wfV8ke3JhbmRvbX1gO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZUV2aWRlbmNlRGlyKGJhc2VEaXI6IHN0cmluZywgb3BlcmF0aW9uSWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgZXZpZGVuY2VEaXIgPSBwYXRoLmpvaW4oYmFzZURpciwgJ2V2aWRlbmNlJywgb3BlcmF0aW9uSWQpO1xuICAgIGlmICghZnMuZXhpc3RzU3luYyhldmlkZW5jZURpcikpIHtcbiAgICAgIGZzLm1rZGlyU3luYyhldmlkZW5jZURpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgfVxuICAgIHJldHVybiBldmlkZW5jZURpcjtcbiAgfVxuXG4gIHN0YXRpYyBzYXZlRXZpZGVuY2UoZXZpZGVuY2VEaXI6IHN0cmluZywgZmlsZU5hbWU6IHN0cmluZywgZGF0YTogYW55KTogc3RyaW5nIHtcbiAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihldmlkZW5jZURpciwgZmlsZU5hbWUpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSB0eXBlb2YgZGF0YSA9PT0gJ3N0cmluZycgPyBkYXRhIDogSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMik7XG4gICAgZnMud3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgY29udGVudCwgJ3V0ZjgnKTtcbiAgICByZXR1cm4gZmlsZVBhdGg7XG4gIH1cblxuICBzdGF0aWMgZ2V0U2VjdXJpdHlDb250ZXh0KCk6IFNlY3VyaXR5Q29udGV4dCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGhvc3RuYW1lOiBvcy5ob3N0bmFtZSgpLFxuICAgICAgdXNlcm5hbWU6IG9zLnVzZXJJbmZvKCkudXNlcm5hbWUsXG4gICAgICBwbGF0Zm9ybTogb3MucGxhdGZvcm0oKSxcbiAgICAgIGFyY2hpdGVjdHVyZTogb3MuYXJjaCgpLFxuICAgICAgb3M6IG9zLnR5cGUoKSxcbiAgICAgIHVzZXJBZ2VudDogcHJvY2Vzcy5lbnZbJ1VTRVJfQUdFTlQnXSB8fCAnQUdJLUNvcmUvMS4wJ1xuICAgIH07XG4gIH1cblxuICBzdGF0aWMgY2FsY3VsYXRlQ2hlY2tzdW0oZGF0YTogc3RyaW5nIHwgQnVmZmVyKTogc3RyaW5nIHtcbiAgICByZXR1cm4gY3J5cHRvLmNyZWF0ZUhhc2goJ3NoYTI1NicpLnVwZGF0ZShkYXRhKS5kaWdlc3QoJ2hleCcpO1xuICB9XG5cbiAgc3RhdGljIHZhbGlkYXRlQXV0aG9yaXphdGlvbihjdXJyZW50OiBzdHJpbmcsIHJlcXVpcmVkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBsZXZlbHMgPSBbJ2Jhc2ljJywgJ2VsZXZhdGVkJywgJ21pbGl0YXJ5JywgJ2Z1bGwnXTtcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSBsZXZlbHMuaW5kZXhPZihjdXJyZW50KTtcbiAgICBjb25zdCByZXF1aXJlZEluZGV4ID0gbGV2ZWxzLmluZGV4T2YocmVxdWlyZWQpO1xuICAgIHJldHVybiBjdXJyZW50SW5kZXggPj0gcmVxdWlyZWRJbmRleDtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVUb29sRGVmaW5pdGlvbjxUIGV4dGVuZHMgUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBkZXNjcmlwdGlvbjogc3RyaW5nLFxuICAgIHBhcmFtZXRlcnM6IGFueSxcbiAgICBoYW5kbGVyOiAoYXJnczogVCkgPT4gUHJvbWlzZTxzdHJpbmc+IHwgc3RyaW5nXG4gICk6IFRvb2xEZWZpbml0aW9uPFQ+IHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgcGFyYW1ldGVycyxcbiAgICAgIGhhbmRsZXJcbiAgICB9O1xuICB9XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIEJBU0UgQ0FQQUJJTElUWSBDTEFTU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZUNhcGFiaWxpdHlNb2R1bGUgaW1wbGVtZW50cyBDYXBhYmlsaXR5TW9kdWxlIHtcbiAgYWJzdHJhY3QgcmVhZG9ubHkgaWQ6IHN0cmluZztcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IG9wdGlvbnM6IEJhc2VDYXBhYmlsaXR5T3B0aW9ucztcbiAgcHJvdGVjdGVkIHJlYWRvbmx5IHV0aWxpdGllczogU2hhcmVkVXRpbGl0aWVzO1xuICBwcm90ZWN0ZWQgZXZpZGVuY2VDb2xsZWN0b3I6IEV2aWRlbmNlQ29sbGVjdG9yIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3Iob3B0aW9uczogQmFzZUNhcGFiaWxpdHlPcHRpb25zID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSB7XG4gICAgICB3b3JraW5nRGlyOiBwcm9jZXNzLmN3ZCgpLFxuICAgICAgZGVidWc6IGZhbHNlLFxuICAgICAgZW5hYmxlRXZpZGVuY2U6IHRydWUsXG4gICAgICBhdXRob3JpemF0aW9uOiAnYmFzaWMnLFxuICAgICAgZW1lcmdlbmN5T3ZlcnJpZGU6IGZhbHNlLFxuICAgICAgLi4ub3B0aW9uc1xuICAgIH07XG4gICAgdGhpcy51dGlsaXRpZXMgPSBTaGFyZWRVdGlsaXRpZXM7XG4gIH1cblxuICBhYnN0cmFjdCBjcmVhdGUoY29udGV4dDogQ2FwYWJpbGl0eUNvbnRleHQpOiBQcm9taXNlPENhcGFiaWxpdHlDb250cmlidXRpb24+O1xuXG4gIHByb3RlY3RlZCBpbml0aWFsaXplRXZpZGVuY2VDb2xsZWN0b3IoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5lbmFibGVFdmlkZW5jZSkge1xuICAgICAgdGhpcy5ldmlkZW5jZUNvbGxlY3RvciA9IHtcbiAgICAgICAgY29sbGVjdDogKGRhdGE6IGFueSwgdHlwZTogc3RyaW5nKSA9PiB7XG4gICAgICAgICAgY29uc3QgZXZpZGVuY2VEaXIgPSBTaGFyZWRVdGlsaXRpZXMuY3JlYXRlRXZpZGVuY2VEaXIoXG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMud29ya2luZ0RpciEsXG4gICAgICAgICAgICBTaGFyZWRVdGlsaXRpZXMuZ2VuZXJhdGVPcGVyYXRpb25JZCgpXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IGAke3R5cGV9XyR7RGF0ZS5ub3coKX0uanNvbmA7XG4gICAgICAgICAgcmV0dXJuIFNoYXJlZFV0aWxpdGllcy5zYXZlRXZpZGVuY2UoZXZpZGVuY2VEaXIsIGZpbGVOYW1lLCBkYXRhKTtcbiAgICAgICAgfSxcbiAgICAgICAgc2F2ZTogKGZpbGVOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IGFueSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGV2aWRlbmNlRGlyID0gU2hhcmVkVXRpbGl0aWVzLmNyZWF0ZUV2aWRlbmNlRGlyKFxuICAgICAgICAgICAgdGhpcy5vcHRpb25zLndvcmtpbmdEaXIhLFxuICAgICAgICAgICAgJ21pc2MnXG4gICAgICAgICAgKTtcbiAgICAgICAgICByZXR1cm4gU2hhcmVkVXRpbGl0aWVzLnNhdmVFdmlkZW5jZShldmlkZW5jZURpciwgZmlsZU5hbWUsIGNvbnRlbnQpO1xuICAgICAgICB9LFxuICAgICAgICBjbGVhbnVwOiAob2xkZXJUaGFuPzogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgY29uc3QgZXZpZGVuY2VEaXIgPSBwYXRoLmpvaW4odGhpcy5vcHRpb25zLndvcmtpbmdEaXIhLCAnZXZpZGVuY2UnKTtcbiAgICAgICAgICBpZiAoZnMuZXhpc3RzU3luYyhldmlkZW5jZURpcikpIHtcbiAgICAgICAgICAgIGNvbnN0IGN1dG9mZiA9IG9sZGVyVGhhbiB8fCAoRGF0ZS5ub3coKSAtIDcgKiAyNCAqIDYwICogNjAgKiAxMDAwKTsgLy8gRGVmYXVsdDogNyBkYXlzXG4gICAgICAgICAgICB0aGlzLmNsZWFudXBPbGRGaWxlcyhldmlkZW5jZURpciwgY3V0b2ZmKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBjbGVhbnVwT2xkRmlsZXMoZGlyOiBzdHJpbmcsIGN1dG9mZjogbnVtYmVyKTogdm9pZCB7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IGZpbGVzID0gZnMucmVhZGRpclN5bmMoZGlyKTtcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhdGguam9pbihkaXIsIGZpbGUpO1xuICAgICAgICBjb25zdCBzdGF0ID0gZnMuc3RhdFN5bmMoZmlsZVBhdGgpO1xuICAgICAgICBpZiAoc3RhdC5pc0RpcmVjdG9yeSgpKSB7XG4gICAgICAgICAgdGhpcy5jbGVhbnVwT2xkRmlsZXMoZmlsZVBhdGgsIGN1dG9mZik7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdC5tdGltZU1zIDwgY3V0b2ZmKSB7XG4gICAgICAgICAgZnMudW5saW5rU3luYyhmaWxlUGF0aCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgLy8gU2lsZW50IGZhaWwgZm9yIGNsZWFudXAgb3BlcmF0aW9uc1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBsb2cobWVzc2FnZTogc3RyaW5nLCBsZXZlbDogJ2RlYnVnJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSAnaW5mbycpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vcHRpb25zLmRlYnVnIHx8IGxldmVsICE9PSAnZGVidWcnKSB7XG4gICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gICAgICBjb25zdCBwcmVmaXggPSBgWyR7dGltZXN0YW1wfV0gWyR7bGV2ZWwudG9VcHBlckNhc2UoKX1dIFske3RoaXMuaWR9XWA7XG4gICAgICBjb25zb2xlLmxvZyhgJHtwcmVmaXh9ICR7bWVzc2FnZX1gKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgdmFsaWRhdGVPcGVyYXRpb24oYXV0aG9yaXphdGlvblJlcXVpcmVkOiBzdHJpbmcgPSAnYmFzaWMnKTogYm9vbGVhbiB7XG4gICAgaWYgKHRoaXMub3B0aW9ucy5lbWVyZ2VuY3lPdmVycmlkZSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGlzVmFsaWQgPSBTaGFyZWRVdGlsaXRpZXMudmFsaWRhdGVBdXRob3JpemF0aW9uKFxuICAgICAgdGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb24hLFxuICAgICAgYXV0aG9yaXphdGlvblJlcXVpcmVkXG4gICAgKTtcbiAgICBcbiAgICBpZiAoIWlzVmFsaWQpIHtcbiAgICAgIHRoaXMubG9nKGBBdXRob3JpemF0aW9uIHJlcXVpcmVkOiAke2F1dGhvcml6YXRpb25SZXF1aXJlZH0sIGN1cnJlbnQ6ICR7dGhpcy5vcHRpb25zLmF1dGhvcml6YXRpb259YCwgJ3dhcm4nKTtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIGlzVmFsaWQ7XG4gIH1cblxuICBwcm90ZWN0ZWQgY3JlYXRlT3BlcmF0aW9uUmVzdWx0KFxuICAgIHN1Y2Nlc3M6IGJvb2xlYW4sXG4gICAgb3BlcmF0aW9uSWQ6IHN0cmluZyxcbiAgICBtZXRhZGF0YTogUmVjb3JkPHN0cmluZywgYW55PiA9IHt9LFxuICAgIGVycm9yczogc3RyaW5nW10gPSBbXVxuICApOiBPcGVyYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IHJlc3VsdDogT3BlcmF0aW9uUmVzdWx0ID0ge1xuICAgICAgc3VjY2VzcyxcbiAgICAgIHRpbWVzdGFtcDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgICAgb3BlcmF0aW9uSWQsXG4gICAgICBtZXRhZGF0YToge1xuICAgICAgICAuLi5tZXRhZGF0YSxcbiAgICAgICAgc2VjdXJpdHlDb250ZXh0OiBTaGFyZWRVdGlsaXRpZXMuZ2V0U2VjdXJpdHlDb250ZXh0KCksXG4gICAgICAgIGNhcGFiaWxpdHlJZDogdGhpcy5pZFxuICAgICAgfSxcbiAgICAgIGVycm9yczogZXJyb3JzLmxlbmd0aCA+IDAgPyBlcnJvcnMgOiB1bmRlZmluZWRcbiAgICB9O1xuXG4gICAgaWYgKHRoaXMuZXZpZGVuY2VDb2xsZWN0b3IgJiYgc3VjY2Vzcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgZXZpZGVuY2VQYXRoID0gdGhpcy5ldmlkZW5jZUNvbGxlY3Rvci5jb2xsZWN0KHJlc3VsdCwgJ29wZXJhdGlvbl9yZXN1bHQnKTtcbiAgICAgICAgcmVzdWx0LmV2aWRlbmNlID0gW2V2aWRlbmNlUGF0aF07XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAvLyBFdmlkZW5jZSBjb2xsZWN0aW9uIGlzIG9wdGlvbmFsXG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUT09MIFNVSVRFIEJVSUxERVJcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNsYXNzIFRvb2xTdWl0ZUJ1aWxkZXIge1xuICBwcml2YXRlIHRvb2xzOiBUb29sRGVmaW5pdGlvbjxhbnk+W10gPSBbXTtcbiAgcHJpdmF0ZSBpZDogc3RyaW5nO1xuICBwcml2YXRlIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3IoaWQ6IHN0cmluZywgZGVzY3JpcHRpb246IHN0cmluZykge1xuICAgIHRoaXMuaWQgPSBpZDtcbiAgICB0aGlzLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gIH1cblxuICBhZGRUb29sPFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmcsXG4gICAgcGFyYW1ldGVyczogYW55LFxuICAgIGhhbmRsZXI6IChhcmdzOiBUKSA9PiBQcm9taXNlPHN0cmluZz4gfCBzdHJpbmdcbiAgKTogdGhpcyB7XG4gICAgdGhpcy50b29scy5wdXNoKFNoYXJlZFV0aWxpdGllcy5jcmVhdGVUb29sRGVmaW5pdGlvbihuYW1lLCBkZXNjcmlwdGlvbiwgcGFyYW1ldGVycywgaGFuZGxlcikpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgYnVpbGQoKTogVG9vbFN1aXRlIHtcbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IHRoaXMuaWQsXG4gICAgICBkZXNjcmlwdGlvbjogdGhpcy5kZXNjcmlwdGlvbixcbiAgICAgIHRvb2xzOiB0aGlzLnRvb2xzXG4gICAgfTtcbiAgfVxufSJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBU0EsSUFBQUEsT0FBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsRUFBQSxHQUFBQyx1QkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUcsSUFBQSxHQUFBRCx1QkFBQSxDQUFBRixPQUFBO0FBQ0EsSUFBQUksRUFBQSxHQUFBRix1QkFBQSxDQUFBRixPQUFBO0FBQXlCLFNBQUFFLHdCQUFBRyxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBTCx1QkFBQSxZQUFBQSxDQUFBRyxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtB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