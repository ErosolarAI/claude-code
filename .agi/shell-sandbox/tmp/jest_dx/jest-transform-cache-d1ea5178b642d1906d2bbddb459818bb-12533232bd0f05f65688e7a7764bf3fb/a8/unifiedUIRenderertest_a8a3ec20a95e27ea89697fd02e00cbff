874ce22ade480944f471c1c52314cd75
"use strict";

var _globals = require("@jest/globals");
var _nodeStream = require("node:stream");
var _UnifiedUIRenderer = require("../src/ui/UnifiedUIRenderer.js");
var _outputMode = require("../src/ui/outputMode.js");
const createRenderer = () => {
  const input = new _nodeStream.PassThrough();
  input.isTTY = true;
  input.setRawMode = _globals.jest.fn();
  const output = new _nodeStream.PassThrough();
  output.isTTY = true;
  output.columns = 80;
  output.rows = /* TODO: Extract constant */24;
  output.write = chunk => {
    const text = typeof chunk === 'string' ? chunk : chunk?.toString?.() ?? '';
    // Preserve write signature used by readline
    _nodeStream.PassThrough.prototype.write.call(output, text);
    return true;
  };
  const renderer = new _UnifiedUIRenderer.UnifiedUIRenderer(output, input);
  return {
    renderer,
    input,
    output
  };
};
const stripAnsi = value => value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
const originalCI = process.env.CI;
beforeEach(() => {
  process.env.CI = '';
  (0, _outputMode.resetPlainOutputMode)();
  (0, _outputMode.setPlainOutputMode)(false);
});
afterAll(() => {
  if (originalCI === undefined) {
    delete process.env.CI;
  } else {
    process.env.CI = originalCI;
  }
  (0, _outputMode.resetPlainOutputMode)();
});
(0, _globals.describe)('UnifiedUIRenderer slash menu', () => {
  (0, _globals.it)('submits highlighted slash command on enter', () => {
    const {
      renderer
    } = createRenderer();
    try {
      const submissions = [];
      renderer.on('submit', text => submissions.push(text));
      renderer.setAvailableCommands([{
        command: '/model',
        description: 'Choose model'
      }]);
      renderer.setBuffer('/mo');
      renderer.handleKeypress('', {
        name: 'enter'
      });
      (0, _globals.expect)(submissions).toEqual(['/model']);
      (0, _globals.expect)(renderer.getBuffer()).toBe('');
      (0, _globals.expect)((renderer.suggestions ?? []).length).toBe(0);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('queues highlighted slash command on enter while streaming', () => {
    const {
      renderer
    } = createRenderer();
    try {
      const queued = [];
      renderer.on('queue', text => queued.push(text));
      renderer.setMode('streaming');
      renderer.setAvailableCommands([{
        command: '/help',
        description: 'Help'
      }]);
      renderer.setBuffer('/h');
      renderer.handleKeypress('', {
        name: 'enter'
      });
      (0, _globals.expect)(queued).toEqual(['/help']);
      (0, _globals.expect)(renderer.getBuffer()).toBe('');
      (0, _globals.expect)((renderer.suggestions ?? []).length).toBe(0);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('applies the active suggestion with tab (not just the first)', () => {
    const {
      renderer
    } = createRenderer();
    try {
      renderer.setAvailableCommands([{
        command: '/model',
        description: 'Choose model'
      }, {
        command: '/help',
        description: 'Help'
      }]);
      renderer.setBuffer('/');

      // Move highlight to the second suggestion then apply with tab
      renderer.handleKeypress('', {
        name: 'down'
      });
      renderer.handleKeypress('', {
        name: 'tab'
      });
      (0, _globals.expect)(renderer.getBuffer()).toBe('/help ');
      (0, _globals.expect)((renderer.suggestions ?? []).length).toBe(0);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('hides suggestions when typing arguments but keeps them with trailing space', () => {
    const {
      renderer
    } = createRenderer();
    try {
      renderer.setAvailableCommands([{
        command: '/model',
        description: 'Choose model'
      }]);
      renderer.setBuffer('/model ');
      (0, _globals.expect)((renderer.suggestions ?? []).length).toBeGreaterThan(0);
      renderer.setBuffer('/model gpt-4');
      (0, _globals.expect)((renderer.suggestions ?? []).length).toBe(0);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('captures bracketed multi-line paste without submitting intermediate lines', () => {
    const {
      renderer
    } = createRenderer();
    try {
      const submissions = [];
      renderer.on('submit', text => submissions.push(text));
      renderer.handleKeypress('', {
        sequence: '\x1b[200~'
      });
      renderer.handleKeypress('line 1', {
        sequence: 'line 1'
      });
      renderer.handleKeypress('', {
        name: 'enter',
        sequence: '\r'
      });
      renderer.handleKeypress('line 2', {
        sequence: 'line 2'
      });
      renderer.handleKeypress('', {
        sequence: '\x1b[201~'
      });
      (0, _globals.expect)(renderer.getBuffer()).toBe('');
      // Expand collapsed paste with Ctrl+L
      renderer.handleKeypress('', {
        name: 'l',
        ctrl: true
      });
      (0, _globals.expect)(renderer.getBuffer()).toBe('line 1\nline 2');
      (0, _globals.expect)(submissions).toEqual([]);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('expands collapsed paste into the buffer on enter before submitting', () => {
    const {
      renderer
    } = createRenderer();
    try {
      const submissions = [];
      renderer.on('submit', text => submissions.push(text));
      renderer.handleKeypress('', {
        sequence: '\x1b[200~'
      });
      renderer.handleKeypress('alpha', {
        sequence: 'alpha'
      });
      renderer.handleKeypress('', {
        name: 'enter',
        sequence: '\r'
      });
      renderer.handleKeypress('beta', {
        sequence: 'beta'
      });
      renderer.handleKeypress('', {
        sequence: '\x1b[201~'
      });

      // First enter should insert the paste into the buffer for editing
      renderer.handleKeypress('', {
        name: 'enter'
      });
      (0, _globals.expect)(renderer.getBuffer()).toBe('alpha\nbeta');
      (0, _globals.expect)(submissions).toEqual([]);

      // Second enter submits the now-visible buffer content
      renderer.handleKeypress('', {
        name: 'enter'
      });
      (0, _globals.expect)(submissions).toEqual(['alpha\nbeta']);
      (0, _globals.expect)(renderer.getBuffer()).toBe('');
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('renders mode toggles when provided', () => {
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      // Set some buffer content to ensure the prompt renders
      renderer.setBuffer('test');
      renderer.updateModeToggles({
        autoContinueEnabled: true,
        autoContinueHotkey: 'ctrl+enter',
        thinkingModeLabel: 'on',
        thinkingHotkey: 'tab'
      });
      renderer.renderPrompt();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted);
      console.log('Output (clean):', clean);
      console.log('Output length:', clean.length);
      // Check for mode toggle indicators
      // The toggle line should appear, but might be empty if width constraints hide it
      if (clean.length > 0) {
        (0, _globals.expect)(clean).toMatch(/auto.*continue|continue.*on|thinking.*on|on.*thinking/i);
      } else {
        // If no output, that's a problem
        (0, _globals.expect)(clean.length).toBeGreaterThan(0);
      }
    } finally {
      renderer.cleanup();
    }
  });
});
(0, _globals.describe)('UnifiedUIRenderer event coalescing', () => {
  (0, _globals.it)('renders contiguous response blocks with a single bullet', async () => {
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      renderer.addEvent('response', 'First part of the block.');
      renderer.addEvent('response', 'Second part, same block.');
      await renderer.flushEvents();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted);
      const bulletCount = (clean.match(/⏺/g) || []).length;
      (0, _globals.expect)(bulletCount).toBe(1);
      (0, _globals.expect)(clean).toMatch(/First part of the block/);
      (0, _globals.expect)(clean).toMatch(/Second part, same block/);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('wraps long responses with a single bullet and indented continuation', async () => {
    (0, _outputMode.setPlainOutputMode)(true);
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      const longResponse = Array(8).fill('This is a long, user-facing response meant to wrap cleanly').join(' ');
      renderer.addEvent('response', longResponse);
      await renderer.flushEvents();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted).trimEnd().split('\n');
      const firstBulletLineIndex = clean.findIndex(line => line.startsWith('⏺ '));
      (0, _globals.expect)(firstBulletLineIndex).toBeGreaterThanOrEqual(0);
      (0, _globals.expect)(clean.length).toBeGreaterThan(firstBulletLineIndex + 1);
      (0, _globals.expect)(clean[firstBulletLineIndex + 1].startsWith('  ')).toBe(true);
      const bulletCount = (clean.join('\n').match(/⏺/g) || []).length;
      (0, _globals.expect)(bulletCount).toBe(1);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('formats thoughts with a thinking label and tidy wrapping', async () => {
    (0, _outputMode.setPlainOutputMode)(true);
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      const thought = Array(6).fill('Reasoning through the requested steps to keep UX stable and readable.').join(' ');
      renderer.addEvent('thought', thought);
      await renderer.flushEvents();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted).trimEnd().split('\n');
      // Thought events can show as "understood" or "thinking" depending on content
      (0, _globals.expect)(clean[0]).toMatch(/^⏺ (understood|thinking) · /i);
      (0, _globals.expect)(clean.length).toBeGreaterThan(1);
      (0, _globals.expect)(clean[1].startsWith('  ')).toBe(true);
      const bulletCount = (clean.join('\n').match(/⏺/g) || []).length;
      (0, _globals.expect)(bulletCount).toBe(1);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('formats build events with a build label and wrapped continuation', async () => {
    (0, _outputMode.setPlainOutputMode)(true);
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      const buildMsg = Array(5).fill('Building artifacts and preparing bundles for deployment').join(' ');
      renderer.addEvent('build', buildMsg);
      await renderer.flushEvents();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted).trimEnd().split('\n');
      (0, _globals.expect)(clean[0]).toMatch(/^⏺ build · /i);
      (0, _globals.expect)(clean.length).toBeGreaterThan(1);
      (0, _globals.expect)(clean[1].startsWith('  ')).toBe(true);
      const bulletCount = (clean.join('\n').match(/⏺/g) || []).length;
      (0, _globals.expect)(bulletCount).toBe(1);
    } finally {
      renderer.cleanup();
    }
  });
  (0, _globals.it)('formats error events with an error label and wrapped continuation', async () => {
    (0, _outputMode.setPlainOutputMode)(true);
    const {
      renderer,
      output
    } = createRenderer();
    try {
      output.setEncoding('utf8');
      const errorMsg = Array(4).fill('Critical failure detected while executing the requested workflow.').join(' ');
      renderer.addEvent('error', errorMsg);
      await renderer.flushEvents();
      let emitted = '';
      let chunk;
      while ((chunk = output.read()) !== null) {
        emitted += chunk;
      }
      const clean = stripAnsi(emitted).trimEnd().split('\n');
      (0, _globals.expect)(clean[0]).toMatch(/^⏺ error · /i);
      (0, _globals.expect)(clean.length).toBeGreaterThan(1);
      (0, _globals.expect)(clean[1].startsWith('  ')).toBe(true);
      const bulletCount = (clean.join('\n').match(/⏺/g) || []).length;
      (0, _globals.expect)(bulletCount).toBe(1);
    } finally {
      renderer.cleanup();
    }
  });
});
(0, _globals.describe)('UnifiedUIRenderer shortcuts', () => {
  (0, _globals.it)('emits resume on Ctrl+R', () => {
    const {
      renderer
    } = createRenderer();
    try {
      const onResume = _globals.jest.fn();
      renderer.on('resume', onResume);
      renderer.handleKeypress('', {
        ctrl: true,
        name: 'r'
      });
      (0, _globals.expect)(onResume).toHaveBeenCalledTimes(1);
    } finally {
      renderer.cleanup();
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfbm9kZVN0cmVhbSIsIl9VbmlmaWVkVUlSZW5kZXJlciIsIl9vdXRwdXRNb2RlIiwiY3JlYXRlUmVuZGVyZXIiLCJpbnB1dCIsIlBhc3NUaHJvdWdoIiwiaXNUVFkiLCJzZXRSYXdNb2RlIiwiamVzdCIsImZuIiwib3V0cHV0IiwiY29sdW1ucyIsInJvd3MiLCJ3cml0ZSIsImNodW5rIiwidGV4dCIsInRvU3RyaW5nIiwicHJvdG90eXBlIiwiY2FsbCIsInJlbmRlcmVyIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJzdHJpcEFuc2kiLCJ2YWx1ZSIsInJlcGxhY2UiLCJvcmlnaW5hbENJIiwicHJvY2VzcyIsImVudiIsIkNJIiwiYmVmb3JlRWFjaCIsInJlc2V0UGxhaW5PdXRwdXRNb2RlIiwic2V0UGxhaW5PdXRwdXRNb2RlIiwiYWZ0ZXJBbGwiLCJ1bmRlZmluZWQiLCJkZXNjcmliZSIsIml0Iiwic3VibWlzc2lvbnMiLCJvbiIsInB1c2giLCJzZXRBdmFpbGFibGVDb21tYW5kcyIsImNvbW1hbmQiLCJkZXNjcmlwdGlvbiIsInNldEJ1ZmZlciIsImhhbmRsZUtleXByZXNzIiwibmFtZSIsImV4cGVjdCIsInRvRXF1YWwiLCJnZXRCdWZmZXIiLCJ0b0JlIiwic3VnZ2VzdGlvbnMiLCJsZW5ndGgiLCJjbGVhbnVwIiwicXVldWVkIiwic2V0TW9kZSIsInRvQmVHcmVhdGVyVGhhbiIsInNlcXVlbmNlIiwiY3RybCIsInNldEVuY29kaW5nIiwidXBkYXRlTW9kZVRvZ2dsZXMiLCJhdXRvQ29udGludWVFbmFibGVkIiwiYXV0b0NvbnRpbnVlSG90a2V5IiwidGhpbmtpbmdNb2RlTGFiZWwiLCJ0aGlua2luZ0hvdGtleSIsInJlbmRlclByb21wdCIsImVtaXR0ZWQiLCJyZWFkIiwiY2xlYW4iLCJjb25zb2xlIiwibG9nIiwidG9NYXRjaCIsImFkZEV2ZW50IiwiZmx1c2hFdmVudHMiLCJidWxsZXRDb3VudCIsIm1hdGNoIiwibG9uZ1Jlc3BvbnNlIiwiQXJyYXkiLCJmaWxsIiwiam9pbiIsInRyaW1FbmQiLCJzcGxpdCIsImZpcnN0QnVsbGV0TGluZUluZGV4IiwiZmluZEluZGV4IiwibGluZSIsInN0YXJ0c1dpdGgiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwidGhvdWdodCIsImJ1aWxkTXNnIiwiZXJyb3JNc2ciLCJvblJlc3VtZSIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyJdLCJzb3VyY2VzIjpbInVuaWZpZWRVSVJlbmRlcmVyLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IFBhc3NUaHJvdWdoIH0gZnJvbSAnbm9kZTpzdHJlYW0nO1xuaW1wb3J0IHsgVW5pZmllZFVJUmVuZGVyZXIgfSBmcm9tICcuLi9zcmMvdWkvVW5pZmllZFVJUmVuZGVyZXIuanMnO1xuaW1wb3J0IHsgcmVzZXRQbGFpbk91dHB1dE1vZGUsIHNldFBsYWluT3V0cHV0TW9kZSB9IGZyb20gJy4uL3NyYy91aS9vdXRwdXRNb2RlLmpzJztcblxuY29uc3QgY3JlYXRlUmVuZGVyZXIgPSAoKSA9PiB7XG4gIGNvbnN0IGlucHV0ID0gbmV3IFBhc3NUaHJvdWdoKCkgYXMgdW5rbm93biBhcyBOb2RlSlMuUmVhZFN0cmVhbTtcbiAgKGlucHV0IGFzIGFueSkuaXNUVFkgPSB0cnVlO1xuICAoaW5wdXQgYXMgYW55KS5zZXRSYXdNb2RlID0gamVzdC5mbigpO1xuXG4gIGNvbnN0IG91dHB1dCA9IG5ldyBQYXNzVGhyb3VnaCgpIGFzIHVua25vd24gYXMgTm9kZUpTLldyaXRlU3RyZWFtO1xuICAob3V0cHV0IGFzIGFueSkuaXNUVFkgPSB0cnVlO1xuICAob3V0cHV0IGFzIGFueSkuY29sdW1ucyA9IDgwO1xuICAob3V0cHV0IGFzIGFueSkucm93cyA9IC8qIFRPRE86IEV4dHJhY3QgY29uc3RhbnQgKi8gMjQ7XG4gIChvdXRwdXQgYXMgYW55KS53cml0ZSA9ICgoY2h1bms6IGFueSkgPT4ge1xuICAgIGNvbnN0IHRleHQgPSB0eXBlb2YgY2h1bmsgPT09ICdzdHJpbmcnID8gY2h1bmsgOiBjaHVuaz8udG9TdHJpbmc/LigpID8/ICcnO1xuICAgIC8vIFByZXNlcnZlIHdyaXRlIHNpZ25hdHVyZSB1c2VkIGJ5IHJlYWRsaW5lXG4gICAgUGFzc1Rocm91Z2gucHJvdG90eXBlLndyaXRlLmNhbGwob3V0cHV0LCB0ZXh0KTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfSkgYXMgYW55O1xuXG4gIGNvbnN0IHJlbmRlcmVyID0gbmV3IFVuaWZpZWRVSVJlbmRlcmVyKG91dHB1dCwgaW5wdXQpO1xuICByZXR1cm4geyByZW5kZXJlciwgaW5wdXQsIG91dHB1dCB9O1xufTtcblxuY29uc3Qgc3RyaXBBbnNpID0gKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcgPT4gdmFsdWUucmVwbGFjZSgvXFx1MDAxQlxcW1swLT9dKlsgLS9dKltALX5dL2csICcnKTtcblxuY29uc3Qgb3JpZ2luYWxDSSA9IHByb2Nlc3MuZW52LkNJO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgcHJvY2Vzcy5lbnYuQ0kgPSAnJztcbiAgcmVzZXRQbGFpbk91dHB1dE1vZGUoKTtcbiAgc2V0UGxhaW5PdXRwdXRNb2RlKGZhbHNlKTtcbn0pO1xuXG5hZnRlckFsbCgoKSA9PiB7XG4gIGlmIChvcmlnaW5hbENJID09PSB1bmRlZmluZWQpIHtcbiAgICBkZWxldGUgcHJvY2Vzcy5lbnYuQ0k7XG4gIH0gZWxzZSB7XG4gICAgcHJvY2Vzcy5lbnYuQ0kgPSBvcmlnaW5hbENJO1xuICB9XG4gIHJlc2V0UGxhaW5PdXRwdXRNb2RlKCk7XG59KTtcblxuZGVzY3JpYmUoJ1VuaWZpZWRVSVJlbmRlcmVyIHNsYXNoIG1lbnUnLCAoKSA9PiB7XG4gIGl0KCdzdWJtaXRzIGhpZ2hsaWdodGVkIHNsYXNoIGNvbW1hbmQgb24gZW50ZXInLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZW5kZXJlciB9ID0gY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgc3VibWlzc2lvbnM6IHN0cmluZ1tdID0gW107XG4gICAgICByZW5kZXJlci5vbignc3VibWl0JywgKHRleHQ6IHN0cmluZykgPT4gc3VibWlzc2lvbnMucHVzaCh0ZXh0KSk7XG4gICAgICByZW5kZXJlci5zZXRBdmFpbGFibGVDb21tYW5kcyhbeyBjb21tYW5kOiAnL21vZGVsJywgZGVzY3JpcHRpb246ICdDaG9vc2UgbW9kZWwnIH1dKTtcbiAgICAgIHJlbmRlcmVyLnNldEJ1ZmZlcignL21vJyk7XG5cbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICdlbnRlcicgfSBhcyBhbnkpO1xuXG4gICAgICBleHBlY3Qoc3VibWlzc2lvbnMpLnRvRXF1YWwoWycvbW9kZWwnXSk7XG4gICAgICBleHBlY3QocmVuZGVyZXIuZ2V0QnVmZmVyKCkpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KCgocmVuZGVyZXIgYXMgYW55KS5zdWdnZXN0aW9ucyA/PyBbXSkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZW5kZXJlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgncXVldWVzIGhpZ2hsaWdodGVkIHNsYXNoIGNvbW1hbmQgb24gZW50ZXIgd2hpbGUgc3RyZWFtaW5nJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVuZGVyZXIgfSA9IGNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHF1ZXVlZDogc3RyaW5nW10gPSBbXTtcbiAgICAgIHJlbmRlcmVyLm9uKCdxdWV1ZScsICh0ZXh0OiBzdHJpbmcpID0+IHF1ZXVlZC5wdXNoKHRleHQpKTtcbiAgICAgIHJlbmRlcmVyLnNldE1vZGUoJ3N0cmVhbWluZycpO1xuICAgICAgcmVuZGVyZXIuc2V0QXZhaWxhYmxlQ29tbWFuZHMoW3sgY29tbWFuZDogJy9oZWxwJywgZGVzY3JpcHRpb246ICdIZWxwJyB9XSk7XG4gICAgICByZW5kZXJlci5zZXRCdWZmZXIoJy9oJyk7XG5cbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICdlbnRlcicgfSBhcyBhbnkpO1xuXG4gICAgICBleHBlY3QocXVldWVkKS50b0VxdWFsKFsnL2hlbHAnXSk7XG4gICAgICBleHBlY3QocmVuZGVyZXIuZ2V0QnVmZmVyKCkpLnRvQmUoJycpO1xuICAgICAgZXhwZWN0KCgocmVuZGVyZXIgYXMgYW55KS5zdWdnZXN0aW9ucyA/PyBbXSkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZW5kZXJlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnYXBwbGllcyB0aGUgYWN0aXZlIHN1Z2dlc3Rpb24gd2l0aCB0YWIgKG5vdCBqdXN0IHRoZSBmaXJzdCknLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZW5kZXJlciB9ID0gY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0cnkge1xuICAgICAgcmVuZGVyZXIuc2V0QXZhaWxhYmxlQ29tbWFuZHMoW1xuICAgICAgICB7IGNvbW1hbmQ6ICcvbW9kZWwnLCBkZXNjcmlwdGlvbjogJ0Nob29zZSBtb2RlbCcgfSxcbiAgICAgICAgeyBjb21tYW5kOiAnL2hlbHAnLCBkZXNjcmlwdGlvbjogJ0hlbHAnIH0sXG4gICAgICBdKTtcbiAgICAgIHJlbmRlcmVyLnNldEJ1ZmZlcignLycpO1xuXG4gICAgICAvLyBNb3ZlIGhpZ2hsaWdodCB0byB0aGUgc2Vjb25kIHN1Z2dlc3Rpb24gdGhlbiBhcHBseSB3aXRoIHRhYlxuICAgICAgKHJlbmRlcmVyIGFzIGFueSkuaGFuZGxlS2V5cHJlc3MoJycsIHsgbmFtZTogJ2Rvd24nIH0gYXMgYW55KTtcbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICd0YWInIH0gYXMgYW55KTtcblxuICAgICAgZXhwZWN0KHJlbmRlcmVyLmdldEJ1ZmZlcigpKS50b0JlKCcvaGVscCAnKTtcbiAgICAgIGV4cGVjdCgoKHJlbmRlcmVyIGFzIGFueSkuc3VnZ2VzdGlvbnMgPz8gW10pLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaXQoJ2hpZGVzIHN1Z2dlc3Rpb25zIHdoZW4gdHlwaW5nIGFyZ3VtZW50cyBidXQga2VlcHMgdGhlbSB3aXRoIHRyYWlsaW5nIHNwYWNlJywgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVuZGVyZXIgfSA9IGNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgdHJ5IHtcbiAgICAgIHJlbmRlcmVyLnNldEF2YWlsYWJsZUNvbW1hbmRzKFt7IGNvbW1hbmQ6ICcvbW9kZWwnLCBkZXNjcmlwdGlvbjogJ0Nob29zZSBtb2RlbCcgfV0pO1xuXG4gICAgICByZW5kZXJlci5zZXRCdWZmZXIoJy9tb2RlbCAnKTtcbiAgICAgIGV4cGVjdCgoKHJlbmRlcmVyIGFzIGFueSkuc3VnZ2VzdGlvbnMgPz8gW10pLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICByZW5kZXJlci5zZXRCdWZmZXIoJy9tb2RlbCBncHQtNCcpO1xuICAgICAgZXhwZWN0KCgocmVuZGVyZXIgYXMgYW55KS5zdWdnZXN0aW9ucyA/PyBbXSkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZW5kZXJlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnY2FwdHVyZXMgYnJhY2tldGVkIG11bHRpLWxpbmUgcGFzdGUgd2l0aG91dCBzdWJtaXR0aW5nIGludGVybWVkaWF0ZSBsaW5lcycsICgpID0+IHtcbiAgICBjb25zdCB7IHJlbmRlcmVyIH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdWJtaXNzaW9uczogc3RyaW5nW10gPSBbXTtcbiAgICAgIHJlbmRlcmVyLm9uKCdzdWJtaXQnLCAodGV4dDogc3RyaW5nKSA9PiBzdWJtaXNzaW9ucy5wdXNoKHRleHQpKTtcblxuICAgICAgKHJlbmRlcmVyIGFzIGFueSkuaGFuZGxlS2V5cHJlc3MoJycsIHsgc2VxdWVuY2U6ICdcXHgxYlsyMDB+JyB9IGFzIGFueSk7XG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnbGluZSAxJywgeyBzZXF1ZW5jZTogJ2xpbmUgMScgfSBhcyBhbnkpO1xuICAgICAgKHJlbmRlcmVyIGFzIGFueSkuaGFuZGxlS2V5cHJlc3MoJycsIHsgbmFtZTogJ2VudGVyJywgc2VxdWVuY2U6ICdcXHInIH0gYXMgYW55KTtcbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCdsaW5lIDInLCB7IHNlcXVlbmNlOiAnbGluZSAyJyB9IGFzIGFueSk7XG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnJywgeyBzZXF1ZW5jZTogJ1xceDFiWzIwMX4nIH0gYXMgYW55KTtcblxuICAgICAgZXhwZWN0KHJlbmRlcmVyLmdldEJ1ZmZlcigpKS50b0JlKCcnKTtcbiAgICAgIC8vIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgd2l0aCBDdHJsK0xcbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICdsJywgY3RybDogdHJ1ZSB9IGFzIGFueSk7XG4gICAgICBleHBlY3QocmVuZGVyZXIuZ2V0QnVmZmVyKCkpLnRvQmUoJ2xpbmUgMVxcbmxpbmUgMicpO1xuICAgICAgZXhwZWN0KHN1Ym1pc3Npb25zKS50b0VxdWFsKFtdKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaXQoJ2V4cGFuZHMgY29sbGFwc2VkIHBhc3RlIGludG8gdGhlIGJ1ZmZlciBvbiBlbnRlciBiZWZvcmUgc3VibWl0dGluZycsICgpID0+IHtcbiAgICBjb25zdCB7IHJlbmRlcmVyIH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBzdWJtaXNzaW9uczogc3RyaW5nW10gPSBbXTtcbiAgICAgIHJlbmRlcmVyLm9uKCdzdWJtaXQnLCAodGV4dDogc3RyaW5nKSA9PiBzdWJtaXNzaW9ucy5wdXNoKHRleHQpKTtcblxuICAgICAgKHJlbmRlcmVyIGFzIGFueSkuaGFuZGxlS2V5cHJlc3MoJycsIHsgc2VxdWVuY2U6ICdcXHgxYlsyMDB+JyB9IGFzIGFueSk7XG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnYWxwaGEnLCB7IHNlcXVlbmNlOiAnYWxwaGEnIH0gYXMgYW55KTtcbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICdlbnRlcicsIHNlcXVlbmNlOiAnXFxyJyB9IGFzIGFueSk7XG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnYmV0YScsIHsgc2VxdWVuY2U6ICdiZXRhJyB9IGFzIGFueSk7XG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnJywgeyBzZXF1ZW5jZTogJ1xceDFiWzIwMX4nIH0gYXMgYW55KTtcblxuICAgICAgLy8gRmlyc3QgZW50ZXIgc2hvdWxkIGluc2VydCB0aGUgcGFzdGUgaW50byB0aGUgYnVmZmVyIGZvciBlZGl0aW5nXG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnJywgeyBuYW1lOiAnZW50ZXInIH0gYXMgYW55KTtcbiAgICAgIGV4cGVjdChyZW5kZXJlci5nZXRCdWZmZXIoKSkudG9CZSgnYWxwaGFcXG5iZXRhJyk7XG4gICAgICBleHBlY3Qoc3VibWlzc2lvbnMpLnRvRXF1YWwoW10pO1xuXG4gICAgICAvLyBTZWNvbmQgZW50ZXIgc3VibWl0cyB0aGUgbm93LXZpc2libGUgYnVmZmVyIGNvbnRlbnRcbiAgICAgIChyZW5kZXJlciBhcyBhbnkpLmhhbmRsZUtleXByZXNzKCcnLCB7IG5hbWU6ICdlbnRlcicgfSBhcyBhbnkpO1xuICAgICAgZXhwZWN0KHN1Ym1pc3Npb25zKS50b0VxdWFsKFsnYWxwaGFcXG5iZXRhJ10pO1xuICAgICAgZXhwZWN0KHJlbmRlcmVyLmdldEJ1ZmZlcigpKS50b0JlKCcnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaXQoJ3JlbmRlcnMgbW9kZSB0b2dnbGVzIHdoZW4gcHJvdmlkZWQnLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZW5kZXJlciwgb3V0cHV0IH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBvdXRwdXQuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcbiAgICAgIC8vIFNldCBzb21lIGJ1ZmZlciBjb250ZW50IHRvIGVuc3VyZSB0aGUgcHJvbXB0IHJlbmRlcnNcbiAgICAgIHJlbmRlcmVyLnNldEJ1ZmZlcigndGVzdCcpO1xuICAgICAgcmVuZGVyZXIudXBkYXRlTW9kZVRvZ2dsZXMoe1xuICAgICAgICBhdXRvQ29udGludWVFbmFibGVkOiB0cnVlLFxuICAgICAgICBhdXRvQ29udGludWVIb3RrZXk6ICdjdHJsK2VudGVyJyxcbiAgICAgICAgdGhpbmtpbmdNb2RlTGFiZWw6ICdvbicsXG4gICAgICAgIHRoaW5raW5nSG90a2V5OiAndGFiJyxcbiAgICAgIH0pO1xuICAgICAgcmVuZGVyZXIucmVuZGVyUHJvbXB0KCk7XG5cbiAgICAgIGxldCBlbWl0dGVkID0gJyc7XG4gICAgICBsZXQgY2h1bms6IHN0cmluZyB8IG51bGw7XG4gICAgICB3aGlsZSAoKGNodW5rID0gb3V0cHV0LnJlYWQoKSkgIT09IG51bGwpIHtcbiAgICAgICAgZW1pdHRlZCArPSBjaHVuaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsZWFuID0gc3RyaXBBbnNpKGVtaXR0ZWQpO1xuICAgICAgY29uc29sZS5sb2coJ091dHB1dCAoY2xlYW4pOicsIGNsZWFuKTtcbiAgICAgIGNvbnNvbGUubG9nKCdPdXRwdXQgbGVuZ3RoOicsIGNsZWFuLmxlbmd0aCk7XG4gICAgICAvLyBDaGVjayBmb3IgbW9kZSB0b2dnbGUgaW5kaWNhdG9yc1xuICAgICAgLy8gVGhlIHRvZ2dsZSBsaW5lIHNob3VsZCBhcHBlYXIsIGJ1dCBtaWdodCBiZSBlbXB0eSBpZiB3aWR0aCBjb25zdHJhaW50cyBoaWRlIGl0XG4gICAgICBpZiAoY2xlYW4ubGVuZ3RoID4gMCkge1xuICAgICAgICBleHBlY3QoY2xlYW4pLnRvTWF0Y2goL2F1dG8uKmNvbnRpbnVlfGNvbnRpbnVlLipvbnx0aGlua2luZy4qb258b24uKnRoaW5raW5nL2kpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gSWYgbm8gb3V0cHV0LCB0aGF0J3MgYSBwcm9ibGVtXG4gICAgICAgIGV4cGVjdChjbGVhbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1VuaWZpZWRVSVJlbmRlcmVyIGV2ZW50IGNvYWxlc2NpbmcnLCAoKSA9PiB7XG4gIGl0KCdyZW5kZXJzIGNvbnRpZ3VvdXMgcmVzcG9uc2UgYmxvY2tzIHdpdGggYSBzaW5nbGUgYnVsbGV0JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHsgcmVuZGVyZXIsIG91dHB1dCB9ID0gY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0cnkge1xuICAgICAgb3V0cHV0LnNldEVuY29kaW5nKCd1dGY4Jyk7XG4gICAgICByZW5kZXJlci5hZGRFdmVudCgncmVzcG9uc2UnLCAnRmlyc3QgcGFydCBvZiB0aGUgYmxvY2suJyk7XG4gICAgICByZW5kZXJlci5hZGRFdmVudCgncmVzcG9uc2UnLCAnU2Vjb25kIHBhcnQsIHNhbWUgYmxvY2suJyk7XG5cbiAgICAgIGF3YWl0IHJlbmRlcmVyLmZsdXNoRXZlbnRzKCk7XG5cbiAgICAgIGxldCBlbWl0dGVkID0gJyc7XG4gICAgICBsZXQgY2h1bms6IHN0cmluZyB8IG51bGw7XG4gICAgICB3aGlsZSAoKGNodW5rID0gb3V0cHV0LnJlYWQoKSkgIT09IG51bGwpIHtcbiAgICAgICAgZW1pdHRlZCArPSBjaHVuaztcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNsZWFuID0gc3RyaXBBbnNpKGVtaXR0ZWQpO1xuICAgICAgY29uc3QgYnVsbGV0Q291bnQgPSAoY2xlYW4ubWF0Y2goL+KPui9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgZXhwZWN0KGJ1bGxldENvdW50KS50b0JlKDEpO1xuICAgICAgZXhwZWN0KGNsZWFuKS50b01hdGNoKC9GaXJzdCBwYXJ0IG9mIHRoZSBibG9jay8pO1xuICAgICAgZXhwZWN0KGNsZWFuKS50b01hdGNoKC9TZWNvbmQgcGFydCwgc2FtZSBibG9jay8pO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZW5kZXJlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnd3JhcHMgbG9uZyByZXNwb25zZXMgd2l0aCBhIHNpbmdsZSBidWxsZXQgYW5kIGluZGVudGVkIGNvbnRpbnVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBzZXRQbGFpbk91dHB1dE1vZGUodHJ1ZSk7XG4gICAgY29uc3QgeyByZW5kZXJlciwgb3V0cHV0IH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBvdXRwdXQuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcbiAgICAgIGNvbnN0IGxvbmdSZXNwb25zZSA9IEFycmF5KDgpLmZpbGwoJ1RoaXMgaXMgYSBsb25nLCB1c2VyLWZhY2luZyByZXNwb25zZSBtZWFudCB0byB3cmFwIGNsZWFubHknKS5qb2luKCcgJyk7XG5cbiAgICAgIHJlbmRlcmVyLmFkZEV2ZW50KCdyZXNwb25zZScsIGxvbmdSZXNwb25zZSk7XG4gICAgICBhd2FpdCByZW5kZXJlci5mbHVzaEV2ZW50cygpO1xuXG4gICAgICBsZXQgZW1pdHRlZCA9ICcnO1xuICAgICAgbGV0IGNodW5rOiBzdHJpbmcgfCBudWxsO1xuICAgICAgd2hpbGUgKChjaHVuayA9IG91dHB1dC5yZWFkKCkpICE9PSBudWxsKSB7XG4gICAgICAgIGVtaXR0ZWQgKz0gY2h1bms7XG4gICAgICB9XG4gICAgICBjb25zdCBjbGVhbiA9IHN0cmlwQW5zaShlbWl0dGVkKS50cmltRW5kKCkuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3QgZmlyc3RCdWxsZXRMaW5lSW5kZXggPSBjbGVhbi5maW5kSW5kZXgobGluZSA9PiBsaW5lLnN0YXJ0c1dpdGgoJ+KPuiAnKSk7XG4gICAgICBleHBlY3QoZmlyc3RCdWxsZXRMaW5lSW5kZXgpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoY2xlYW4ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oZmlyc3RCdWxsZXRMaW5lSW5kZXggKyAxKTtcbiAgICAgIGV4cGVjdChjbGVhbltmaXJzdEJ1bGxldExpbmVJbmRleCArIDFdLnN0YXJ0c1dpdGgoJyAgJykpLnRvQmUodHJ1ZSk7XG4gICAgICBjb25zdCBidWxsZXRDb3VudCA9IChjbGVhbi5qb2luKCdcXG4nKS5tYXRjaCgv4o+6L2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICBleHBlY3QoYnVsbGV0Q291bnQpLnRvQmUoMSk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJlbmRlcmVyLmNsZWFudXAoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdmb3JtYXRzIHRob3VnaHRzIHdpdGggYSB0aGlua2luZyBsYWJlbCBhbmQgdGlkeSB3cmFwcGluZycsIGFzeW5jICgpID0+IHtcbiAgICBzZXRQbGFpbk91dHB1dE1vZGUodHJ1ZSk7XG4gICAgY29uc3QgeyByZW5kZXJlciwgb3V0cHV0IH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBvdXRwdXQuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcbiAgICAgIGNvbnN0IHRob3VnaHQgPSBBcnJheSg2KS5maWxsKCdSZWFzb25pbmcgdGhyb3VnaCB0aGUgcmVxdWVzdGVkIHN0ZXBzIHRvIGtlZXAgVVggc3RhYmxlIGFuZCByZWFkYWJsZS4nKS5qb2luKCcgJyk7XG5cbiAgICAgIHJlbmRlcmVyLmFkZEV2ZW50KCd0aG91Z2h0JywgdGhvdWdodCk7XG4gICAgICBhd2FpdCByZW5kZXJlci5mbHVzaEV2ZW50cygpO1xuXG4gICAgICBsZXQgZW1pdHRlZCA9ICcnO1xuICAgICAgbGV0IGNodW5rOiBzdHJpbmcgfCBudWxsO1xuICAgICAgd2hpbGUgKChjaHVuayA9IG91dHB1dC5yZWFkKCkpICE9PSBudWxsKSB7XG4gICAgICAgIGVtaXR0ZWQgKz0gY2h1bms7XG4gICAgICB9XG4gICAgICBjb25zdCBjbGVhbiA9IHN0cmlwQW5zaShlbWl0dGVkKS50cmltRW5kKCkuc3BsaXQoJ1xcbicpO1xuICAgICAgLy8gVGhvdWdodCBldmVudHMgY2FuIHNob3cgYXMgXCJ1bmRlcnN0b29kXCIgb3IgXCJ0aGlua2luZ1wiIGRlcGVuZGluZyBvbiBjb250ZW50XG4gICAgICBleHBlY3QoY2xlYW5bMF0pLnRvTWF0Y2goL17ij7ogKHVuZGVyc3Rvb2R8dGhpbmtpbmcpIMK3IC9pKTtcbiAgICAgIGV4cGVjdChjbGVhbi5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigxKTtcbiAgICAgIGV4cGVjdChjbGVhblsxXS5zdGFydHNXaXRoKCcgICcpKS50b0JlKHRydWUpO1xuICAgICAgY29uc3QgYnVsbGV0Q291bnQgPSAoY2xlYW4uam9pbignXFxuJykubWF0Y2goL+KPui9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgZXhwZWN0KGJ1bGxldENvdW50KS50b0JlKDEpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICByZW5kZXJlci5jbGVhbnVwKCk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnZm9ybWF0cyBidWlsZCBldmVudHMgd2l0aCBhIGJ1aWxkIGxhYmVsIGFuZCB3cmFwcGVkIGNvbnRpbnVhdGlvbicsIGFzeW5jICgpID0+IHtcbiAgICBzZXRQbGFpbk91dHB1dE1vZGUodHJ1ZSk7XG4gICAgY29uc3QgeyByZW5kZXJlciwgb3V0cHV0IH0gPSBjcmVhdGVSZW5kZXJlcigpO1xuICAgIHRyeSB7XG4gICAgICBvdXRwdXQuc2V0RW5jb2RpbmcoJ3V0ZjgnKTtcbiAgICAgIGNvbnN0IGJ1aWxkTXNnID0gQXJyYXkoNSkuZmlsbCgnQnVpbGRpbmcgYXJ0aWZhY3RzIGFuZCBwcmVwYXJpbmcgYnVuZGxlcyBmb3IgZGVwbG95bWVudCcpLmpvaW4oJyAnKTtcblxuICAgICAgcmVuZGVyZXIuYWRkRXZlbnQoJ2J1aWxkJywgYnVpbGRNc2cpO1xuICAgICAgYXdhaXQgcmVuZGVyZXIuZmx1c2hFdmVudHMoKTtcblxuICAgICAgbGV0IGVtaXR0ZWQgPSAnJztcbiAgICAgIGxldCBjaHVuazogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHdoaWxlICgoY2h1bmsgPSBvdXRwdXQucmVhZCgpKSAhPT0gbnVsbCkge1xuICAgICAgICBlbWl0dGVkICs9IGNodW5rO1xuICAgICAgfVxuICAgICAgY29uc3QgY2xlYW4gPSBzdHJpcEFuc2koZW1pdHRlZCkudHJpbUVuZCgpLnNwbGl0KCdcXG4nKTtcbiAgICAgIGV4cGVjdChjbGVhblswXSkudG9NYXRjaCgvXuKPuiBidWlsZCDCtyAvaSk7XG4gICAgICBleHBlY3QoY2xlYW4ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMSk7XG4gICAgICBleHBlY3QoY2xlYW5bMV0uc3RhcnRzV2l0aCgnICAnKSkudG9CZSh0cnVlKTtcbiAgICAgIGNvbnN0IGJ1bGxldENvdW50ID0gKGNsZWFuLmpvaW4oJ1xcbicpLm1hdGNoKC/ij7ovZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIGV4cGVjdChidWxsZXRDb3VudCkudG9CZSgxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgaXQoJ2Zvcm1hdHMgZXJyb3IgZXZlbnRzIHdpdGggYW4gZXJyb3IgbGFiZWwgYW5kIHdyYXBwZWQgY29udGludWF0aW9uJywgYXN5bmMgKCkgPT4ge1xuICAgIHNldFBsYWluT3V0cHV0TW9kZSh0cnVlKTtcbiAgICBjb25zdCB7IHJlbmRlcmVyLCBvdXRwdXQgfSA9IGNyZWF0ZVJlbmRlcmVyKCk7XG4gICAgdHJ5IHtcbiAgICAgIG91dHB1dC5zZXRFbmNvZGluZygndXRmOCcpO1xuICAgICAgY29uc3QgZXJyb3JNc2cgPSBBcnJheSg0KS5maWxsKCdDcml0aWNhbCBmYWlsdXJlIGRldGVjdGVkIHdoaWxlIGV4ZWN1dGluZyB0aGUgcmVxdWVzdGVkIHdvcmtmbG93LicpLmpvaW4oJyAnKTtcblxuICAgICAgcmVuZGVyZXIuYWRkRXZlbnQoJ2Vycm9yJywgZXJyb3JNc2cpO1xuICAgICAgYXdhaXQgcmVuZGVyZXIuZmx1c2hFdmVudHMoKTtcblxuICAgICAgbGV0IGVtaXR0ZWQgPSAnJztcbiAgICAgIGxldCBjaHVuazogc3RyaW5nIHwgbnVsbDtcbiAgICAgIHdoaWxlICgoY2h1bmsgPSBvdXRwdXQucmVhZCgpKSAhPT0gbnVsbCkge1xuICAgICAgICBlbWl0dGVkICs9IGNodW5rO1xuICAgICAgfVxuICAgICAgY29uc3QgY2xlYW4gPSBzdHJpcEFuc2koZW1pdHRlZCkudHJpbUVuZCgpLnNwbGl0KCdcXG4nKTtcbiAgICAgIGV4cGVjdChjbGVhblswXSkudG9NYXRjaCgvXuKPuiBlcnJvciDCtyAvaSk7XG4gICAgICBleHBlY3QoY2xlYW4ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMSk7XG4gICAgICBleHBlY3QoY2xlYW5bMV0uc3RhcnRzV2l0aCgnICAnKSkudG9CZSh0cnVlKTtcbiAgICAgIGNvbnN0IGJ1bGxldENvdW50ID0gKGNsZWFuLmpvaW4oJ1xcbicpLm1hdGNoKC/ij7ovZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIGV4cGVjdChidWxsZXRDb3VudCkudG9CZSgxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1VuaWZpZWRVSVJlbmRlcmVyIHNob3J0Y3V0cycsICgpID0+IHtcbiAgaXQoJ2VtaXRzIHJlc3VtZSBvbiBDdHJsK1InLCAoKSA9PiB7XG4gICAgY29uc3QgeyByZW5kZXJlciB9ID0gY3JlYXRlUmVuZGVyZXIoKTtcbiAgICB0cnkge1xuICAgICAgY29uc3Qgb25SZXN1bWUgPSBqZXN0LmZuKCk7XG4gICAgICByZW5kZXJlci5vbigncmVzdW1lJywgb25SZXN1bWUpO1xuXG4gICAgICAocmVuZGVyZXIgYXMgYW55KS5oYW5kbGVLZXlwcmVzcygnJywgeyBjdHJsOiB0cnVlLCBuYW1lOiAncicgfSBhcyBhbnkpO1xuXG4gICAgICBleHBlY3Qob25SZXN1bWUpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcmVuZGVyZXIuY2xlYW51cCgpO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxrQkFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsV0FBQSxHQUFBSCxPQUFBO0FBRUEsTUFBTUksY0FBYyxHQUFHQSxDQUFBLEtBQU07RUFDM0IsTUFBTUMsS0FBSyxHQUFHLElBQUlDLHVCQUFXLENBQUMsQ0FBaUM7RUFDOURELEtBQUssQ0FBU0UsS0FBSyxHQUFHLElBQUk7RUFDMUJGLEtBQUssQ0FBU0csVUFBVSxHQUFHQyxhQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO0VBRXJDLE1BQU1DLE1BQU0sR0FBRyxJQUFJTCx1QkFBVyxDQUFDLENBQWtDO0VBQ2hFSyxNQUFNLENBQVNKLEtBQUssR0FBRyxJQUFJO0VBQzNCSSxNQUFNLENBQVNDLE9BQU8sR0FBRyxFQUFFO0VBQzNCRCxNQUFNLENBQVNFLElBQUksR0FBRyw0QkFBNkIsRUFBRTtFQUNyREYsTUFBTSxDQUFTRyxL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