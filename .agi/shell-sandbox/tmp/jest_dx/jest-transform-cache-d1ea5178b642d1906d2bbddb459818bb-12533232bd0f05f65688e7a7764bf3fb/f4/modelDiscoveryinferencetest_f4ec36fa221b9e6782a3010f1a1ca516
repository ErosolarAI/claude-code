7681fdde2aa7104469deeb271d67b5d0
"use strict";

var modelDiscovery = _interopRequireWildcard(require("../src/core/modelDiscovery.js"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
const {
  inferProviderFromModelId,
  getLatestModelForProvider
} = modelDiscovery;
describe('modelDiscovery provider inference', () => {
  it('infers providers from common model IDs', () => {
    expect(inferProviderFromModelId('gpt-4o')).toBe('openai');
    expect(inferProviderFromModelId('claude-3-5-sonnet-20241022')).toBe('anthropic');
    expect(inferProviderFromModelId('gemini-2.5-pro')).toBe('google');
    expect(inferProviderFromModelId('deepseek-reasoner')).toBe('deepseek');
    expect(inferProviderFromModelId('grok-4-1-fast-reasoning')).toBe('xai');
    expect(inferProviderFromModelId('llama3.2:3b')).toBe('ollama');
  });
  it('falls back to safe defaults when no discovered models exist', () => {
    const spy = jest.spyOn(modelDiscovery, 'getCachedDiscoveredModels').mockReturnValue([]);
    expect(getLatestModelForProvider('openai')).toBe('gpt-5.2-codex');
    expect(getLatestModelForProvider('anthropic')).toBe('claude-sonnet-4-5-20250514');
    expect(getLatestModelForProvider('google')).toBe('gemini-3.0-pro');
    expect(getLatestModelForProvider('ollama')).toBe('llama3.3:70b');
    spy.mockRestore();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJtb2RlbERpc2NvdmVyeSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsImUiLCJ0IiwiV2Vha01hcCIsInIiLCJuIiwiX19lc01vZHVsZSIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImRlZmF1bHQiLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsImluZmVyUHJvdmlkZXJGcm9tTW9kZWxJZCIsImdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIiLCJkZXNjcmliZSIsIml0IiwiZXhwZWN0IiwidG9CZSIsInNweSIsImplc3QiLCJzcHlPbiIsIm1vY2tSZXR1cm5WYWx1ZSIsIm1vY2tSZXN0b3JlIl0sInNvdXJjZXMiOlsibW9kZWxEaXNjb3ZlcnkuaW5mZXJlbmNlLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBQcm92aWRlcklkIH0gZnJvbSAnLi4vc3JjL2NvcmUvdHlwZXMuanMnO1xuaW1wb3J0ICogYXMgbW9kZWxEaXNjb3ZlcnkgZnJvbSAnLi4vc3JjL2NvcmUvbW9kZWxEaXNjb3ZlcnkuanMnO1xuXG5jb25zdCB7IGluZmVyUHJvdmlkZXJGcm9tTW9kZWxJZCwgZ2V0TGF0ZXN0TW9kZWxGb3JQcm92aWRlciB9ID0gbW9kZWxEaXNjb3Zlcnk7XG5cbmRlc2NyaWJlKCdtb2RlbERpc2NvdmVyeSBwcm92aWRlciBpbmZlcmVuY2UnLCAoKSA9PiB7XG4gIGl0KCdpbmZlcnMgcHJvdmlkZXJzIGZyb20gY29tbW9uIG1vZGVsIElEcycsICgpID0+IHtcbiAgICBleHBlY3QoaW5mZXJQcm92aWRlckZyb21Nb2RlbElkKCdncHQtNG8nKSkudG9CZSgnb3BlbmFpJyk7XG4gICAgZXhwZWN0KGluZmVyUHJvdmlkZXJGcm9tTW9kZWxJZCgnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInKSkudG9CZSgnYW50aHJvcGljJyk7XG4gICAgZXhwZWN0KGluZmVyUHJvdmlkZXJGcm9tTW9kZWxJZCgnZ2VtaW5pLTIuNS1wcm8nKSkudG9CZSgnZ29vZ2xlJyk7XG4gICAgZXhwZWN0KGluZmVyUHJvdmlkZXJGcm9tTW9kZWxJZCgnZGVlcHNlZWstcmVhc29uZXInKSkudG9CZSgnZGVlcHNlZWsnKTtcbiAgICBleHBlY3QoaW5mZXJQcm92aWRlckZyb21Nb2RlbElkKCdncm9rLTQtMS1mYXN0LXJlYXNvbmluZycpKS50b0JlKCd4YWknKTtcbiAgICBleHBlY3QoaW5mZXJQcm92aWRlckZyb21Nb2RlbElkKCdsbGFtYTMuMjozYicpKS50b0JlKCdvbGxhbWEnKTtcbiAgfSk7XG5cbiAgaXQoJ2ZhbGxzIGJhY2sgdG8gc2FmZSBkZWZhdWx0cyB3aGVuIG5vIGRpc2NvdmVyZWQgbW9kZWxzIGV4aXN0JywgKCkgPT4ge1xuICAgIGNvbnN0IHNweSA9IGplc3Quc3B5T24obW9kZWxEaXNjb3ZlcnksICdnZXRDYWNoZWREaXNjb3ZlcmVkTW9kZWxzJykubW9ja1JldHVyblZhbHVlKFtdKTtcblxuICAgIGV4cGVjdChnZXRMYXRlc3RNb2RlbEZvclByb3ZpZGVyKCdvcGVuYWknIGFzIFByb3ZpZGVySWQpKS50b0JlKCdncHQtNS4yLWNvZGV4Jyk7XG4gICAgZXhwZWN0KGdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIoJ2FudGhyb3BpYycgYXMgUHJvdmlkZXJJZCkpLnRvQmUoJ2NsYXVkZS1zb25uZXQtNC01LTIwMjUwNTE0Jyk7XG4gICAgZXhwZWN0KGdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIoJ2dvb2dsZScgYXMgUHJvdmlkZXJJZCkpLnRvQmUoJ2dlbWluaS0zLjAtcHJvJyk7XG4gICAgZXhwZWN0KGdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIoJ29sbGFtYScgYXMgUHJvdmlkZXJJZCkpLnRvQmUoJ2xsYW1hMy4zOjcwYicpO1xuXG4gICAgc3B5Lm1vY2tSZXN0b3JlKCk7XG4gIH0pO1xufSk7XG4iXSwi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