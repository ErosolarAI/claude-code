{"version":3,"names":["modelDiscovery","_interopRequireWildcard","require","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","inferProviderFromModelId","getLatestModelForProvider","describe","it","expect","toBe","spy","jest","spyOn","mockReturnValue","mockRestore"],"sources":["modelDiscovery.inference.test.ts"],"sourcesContent":["import type { ProviderId } from '../src/core/types.js';\nimport * as modelDiscovery from '../src/core/modelDiscovery.js';\n\nconst { inferProviderFromModelId, getLatestModelForProvider } = modelDiscovery;\n\ndescribe('modelDiscovery provider inference', () => {\n  it('infers providers from common model IDs', () => {\n    expect(inferProviderFromModelId('gpt-4o')).toBe('openai');\n    expect(inferProviderFromModelId('claude-3-5-sonnet-20241022')).toBe('anthropic');\n    expect(inferProviderFromModelId('gemini-2.5-pro')).toBe('google');\n    expect(inferProviderFromModelId('deepseek-reasoner')).toBe('deepseek');\n    expect(inferProviderFromModelId('grok-4-1-fast-reasoning')).toBe('xai');\n    expect(inferProviderFromModelId('llama3.2:3b')).toBe('ollama');\n  });\n\n  it('falls back to safe defaults when no discovered models exist', () => {\n    const spy = jest.spyOn(modelDiscovery, 'getCachedDiscoveredModels').mockReturnValue([]);\n\n    expect(getLatestModelForProvider('openai' as ProviderId)).toBe('gpt-5.2-codex');\n    expect(getLatestModelForProvider('anthropic' as ProviderId)).toBe('claude-sonnet-4-5-20250514');\n    expect(getLatestModelForProvider('google' as ProviderId)).toBe('gemini-3.0-pro');\n    expect(getLatestModelForProvider('ollama' as ProviderId)).toBe('llama3.3:70b');\n\n    spy.mockRestore();\n  });\n});\n"],"mappings":";;AACA,IAAAA,cAAA,GAAAC,uBAAA,CAAAC,OAAA;AAAgE,SAAAD,wBAAAE,CAAA,EAAAC,CAAA,6BAAAC,OAAA,MAAAC,CAAA,OAAAD,OAAA,IAAAE,CAAA,OAAAF,OAAA,YAAAJ,uBAAA,YAAAA,CAAAE,CAAA,EAAAC,CAAA,SAAAA,CAAA,IAAAD,CAAA,IAAAA,CAAA,CAAAK,UAAA,SAAAL,CAAA,MAAAM,CAAA,EAAAC,CAAA,EAAAC,CAAA,KAAAC,SAAA,QAAAC,OAAA,EAAAV,CAAA,iBAAAA,CAAA,uBAAAA,CAAA,yBAAAA,CAAA,SAAAQ,CAAA,MAAAF,CAAA,GAAAL,CAAA,GAAAG,CAAA,GAAAD,CAAA,QAAAG,CAAA,CAAAK,GAAA,CAAAX,CAAA,UAAAM,CAAA,CAAAM,GAAA,CAAAZ,CAAA,GAAAM,CAAA,CAAAO,GAAA,CAAAb,CAAA,EAAAQ,CAAA,gBAAAP,CAAA,IAAAD,CAAA,gBAAAC,CAAA,OAAAa,cAAA,CAAAC,IAAA,CAAAf,CAAA,EAAAC,CAAA,OAAAM,CAAA,IAAAD,CAAA,GAAAU,MAAA,CAAAC,cAAA,KAAAD,MAAA,CAAAE,wBAAA,CAAAlB,CAAA,EAAAC,CAAA,OAAAM,CAAA,CAAAK,GAAA,IAAAL,CAAA,CAAAM,GAAA,IAAAP,CAAA,CAAAE,CAAA,EAAAP,CAAA,EAAAM,CAAA,IAAAC,CAAA,CAAAP,CAAA,IAAAD,CAAA,CAAAC,CAAA,WAAAO,CAAA,KAAAR,CAAA,EAAAC,CAAA;AAEhE,MAAM;EAAEkB,wBAAwB;EAAEC;AAA0B,CAAC,GAAGvB,cAAc;AAE9EwB,QAAQ,CAAC,mCAAmC,EAAE,MAAM;EAClDC,EAAE,CAAC,wCAAwC,EAAE,MAAM;IACjDC,MAAM,CAACJ,wBAAwB,CAAC,QAAQ,CAAC,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;IACzDD,MAAM,CAACJ,wBAAwB,CAAC,4BAA4B,CAAC,CAAC,CAACK,IAAI,CAAC,WAAW,CAAC;IAChFD,MAAM,CAACJ,wBAAwB,CAAC,gBAAgB,CAAC,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;IACjED,MAAM,CAACJ,wBAAwB,CAAC,mBAAmB,CAAC,CAAC,CAACK,IAAI,CAAC,UAAU,CAAC;IACtED,MAAM,CAACJ,wBAAwB,CAAC,yBAAyB,CAAC,CAAC,CAACK,IAAI,CAAC,KAAK,CAAC;IACvED,MAAM,CAACJ,wBAAwB,CAAC,aAAa,CAAC,CAAC,CAACK,IAAI,CAAC,QAAQ,CAAC;EAChE,CAAC,CAAC;EAEFF,EAAE,CAAC,6DAA6D,EAAE,MAAM;IACtE,MAAMG,GAAG,GAAGC,IAAI,CAACC,KAAK,CAAC9B,cAAc,EAAE,2BAA2B,CAAC,CAAC+B,eAAe,CAAC,EAAE,CAAC;IAEvFL,MAAM,CAACH,yBAAyB,CAAC,QAAsB,CAAC,CAAC,CAACI,IAAI,CAAC,eAAe,CAAC;IAC/ED,MAAM,CAACH,yBAAyB,CAAC,WAAyB,CAAC,CAAC,CAACI,IAAI,CAAC,4BAA4B,CAAC;IAC/FD,MAAM,CAACH,yBAAyB,CAAC,QAAsB,CAAC,CAAC,CAACI,IAAI,CAAC,gBAAgB,CAAC;IAChFD,MAAM,CAACH,yBAAyB,CAAC,QAAsB,CAAC,CAAC,CAACI,IAAI,CAAC,cAAc,CAAC;IAE9EC,GAAG,CAACI,WAAW,CAAC,CAAC;EACnB,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}