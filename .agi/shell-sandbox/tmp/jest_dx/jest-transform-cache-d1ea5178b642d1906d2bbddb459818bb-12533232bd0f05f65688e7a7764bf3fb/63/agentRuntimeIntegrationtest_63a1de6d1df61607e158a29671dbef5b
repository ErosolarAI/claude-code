515ce7950afc5bbffdc3fa6923861116
"use strict";

var _globals = require("@jest/globals");
var _agent = require("../../src/core/agent.js");
var _toolRuntime = require("../../src/core/toolRuntime.js");
var _contextManager = require("../../src/core/contextManager.js");
/**
 * Agent Runtime Integration Tests
 *
 * Tests the AgentRuntime class with:
 * - Context overflow recovery
 * - Streaming with interruption handling
 * - Cancellation support
 * - Tool execution pipeline
 */

// Mock LLM Provider for testing
class MockLLMProvider {
  responses = [];
  responseIndex = 0;
  callHistory = [];
  queueTextResponse(content) {
    this.responses.push({
      type: 'text',
      content
    });
  }
  queueToolCallResponse(content, toolCalls) {
    this.responses.push({
      type: 'tool_calls',
      content,
      toolCalls
    });
  }
  queueContextOverflowError() {
    this.responses.push({
      type: 'text',
      content: '__OVERFLOW__'
    });
  }
  async generate(messages) {
    this.callHistory.push([...messages]);
    if (this.responseIndex >= this.responses.length) {
      return {
        type: 'text',
        content: 'Default mock response'
      };
    }
    const response = this.responses[this.responseIndex++];

    // Simulate context overflow error
    if (response.content === '__OVERFLOW__') {
      const error = new Error('Context length exceeded: token limit reached');
      throw error;
    }
    return {
      ...response,
      usage: {
        inputTokens: 100,
        outputTokens: 50
      }
    };
  }
  reset() {
    this.responses = [];
    this.responseIndex = 0;
    this.callHistory = [];
  }
}

// Mock Tool Suite for testing
function createMockToolSuite() {
  const tools = [{
    name: 'echo',
    description: 'Echoes back the input',
    parameters: {
      type: 'object',
      properties: {
        message: {
          type: 'string',
          description: 'Message to echo'
        }
      },
      required: ['message']
    },
    handler: args => `Echo: ${args['message']}`
  }, {
    name: 'add',
    description: 'Adds two numbers',
    parameters: {
      type: 'object',
      properties: {
        a: {
          type: 'number',
          description: 'First number'
        },
        b: {
          type: 'number',
          description: 'Second number'
        }
      },
      required: ['a', 'b']
    },
    handler: args => {
      const a = Number(args['a']);
      const b = Number(args['b']);
      return `Result: ${a + b}`;
    }
  }, {
    name: 'read_file',
    description: 'Reads a file',
    parameters: {
      type: 'object',
      properties: {
        path: {
          type: 'string',
          description: 'File path'
        }
      },
      required: ['path']
    },
    handler: args => `Content of ${args['path']}: [mock content]`,
    cacheable: true
  }, {
    name: 'slow_operation',
    description: 'Simulates a slow operation',
    parameters: {
      type: 'object',
      properties: {
        duration: {
          type: 'number',
          description: 'Duration in ms'
        }
      }
    },
    handler: async args => {
      const duration = Number(args['duration']) || 100;
      await new Promise(resolve => setTimeout(resolve, Math.min(duration, /* TODO: Extract constant */ /* TODO: Extract constant */1000)));
      return 'Operation completed';
    }
  }];
  return {
    id: 'test.mock-tools',
    description: 'Mock tools for testing',
    tools
  };
}
function createMockDiffSuite() {
  return {
    id: 'test.mock-diff',
    description: 'Mock git diff tool for snapshot tracking',
    tools: [{
      name: 'git_diff_mock',
      description: 'Returns mock git diff output',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Git diff command'
          }
        },
        required: ['command']
      },
      handler: args => `mock diff for ${args['command'] ?? ''}`
    }]
  };
}
(0, _globals.describe)('Agent Runtime Integration', () => {
  let provider;
  let toolRuntime;
  let contextManager;
  (0, _globals.beforeEach)(() => {
    provider = new MockLLMProvider();
    toolRuntime = new _toolRuntime.ToolRuntime();
    toolRuntime.registerSuite(createMockToolSuite());
    contextManager = (0, _contextManager.createDefaultContextManager)({
      maxTokens: 10000,
      targetTokens: 7000
    });
  });
  (0, _globals.afterEach)(() => {
    provider.reset();
  });
  (0, _globals.describe)('Basic Message Handling', () => {
    (0, _globals.test)('should send a simple message and receive response', async () => {
      provider.queueTextResponse('Hello! How can I help you?');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Hello');
      (0, _globals.expect)(response).toContain('Hello! How can I help you?');
      (0, _globals.expect)(response.toLowerCase()).not.toContain('next steps');
      (0, _globals.expect)(provider.callHistory.length).toBe(1);
    });
    (0, _globals.test)('should maintain conversation history', async () => {
      provider.queueTextResponse('First response');
      provider.queueTextResponse('Second response');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('First message');
      await agent.send('Second message');
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(5); // system + user + assistant + user + assistant
      (0, _globals.expect)(history[0]?.role).toBe('system');
      (0, _globals.expect)(history[1]?.role).toBe('user');
      (0, _globals.expect)(history[2]?.role).toBe('assistant');
      (0, _globals.expect)(history[3]?.role).toBe('user');
      (0, _globals.expect)(history[4]?.role).toBe('assistant');
    });
    (0, _globals.test)('should clear history correctly', async () => {
      provider.queueTextResponse('Response');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('Hello');
      agent.clearHistory();
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(1); // Only system message
      (0, _globals.expect)(history[0]?.role).toBe('system');
    });
    (0, _globals.test)('should load history from previous session', async () => {
      const previousHistory = [{
        role: 'system',
        content: 'Previous system prompt'
      }, {
        role: 'user',
        content: 'Previous user message'
      }, {
        role: 'assistant',
        content: 'Previous assistant response'
      }];
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'New system prompt'
      });
      agent.loadHistory(previousHistory);
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(3);
      (0, _globals.expect)(history[0]?.content).toBe('Previous system prompt');
    });
  });
  (0, _globals.describe)('Tool Execution', () => {
    (0, _globals.test)('should execute tool calls from provider response', async () => {
      provider.queueToolCallResponse('I will echo your message', [{
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'Hello, World!'
        }
      }]);
      provider.queueTextResponse('The echo result was: Echo: Hello, World!');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Echo "Hello, World!"');
      (0, _globals.expect)(response).toContain('The echo result was: Echo: Hello, World!');
      (0, _globals.expect)(provider.callHistory.length).toBe(2); // Initial + after tool result
    });
    (0, _globals.test)('should execute multiple tool calls in sequence', async () => {
      provider.queueToolCallResponse('I will add some numbers', [{
        id: 'call_1',
        name: 'add',
        arguments: {
          a: 5,
          b: 3
        }
      }, {
        id: 'call_2',
        name: 'add',
        arguments: {
          a: 10,
          b: 7
        }
      }]);
      provider.queueTextResponse('The results are 8 and 17');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Add 5+3 and 10+7');
      (0, _globals.expect)(response).toContain('The results are 8 and 17');

      // Check tool results are in history
      const history = agent.getHistory();
      const toolMessages = history.filter(m => m.role === 'tool');
      (0, _globals.expect)(toolMessages.length).toBe(2);
    });
    (0, _globals.test)('should track tool calls via observer', async () => {
      const toolStarts = [];
      const toolResults = [];
      const observer = {
        onToolStart: call => toolStarts.push(call.name),
        onToolResult: (call, output) => toolResults.push(`${call.name}: ${output}`)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        observer
      });
      toolRuntime.registerSuite(createMockToolSuite());
      provider.queueToolCallResponse('Executing echo', [{
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      }]);
      provider.queueTextResponse('Done');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('Echo test');
      (0, _globals.expect)(toolStarts).toContain('echo');
      (0, _globals.expect)(toolResults.some(r => r.includes('Echo: test'))).toBe(true);
    });
  });
  (0, _globals.describe)('Callbacks', () => {
    (0, _globals.test)('should call onAssistantMessage callback', async () => {
      const messages = [];
      const callbacks = {
        onAssistantMessage: content => messages.push(content)
      };
      provider.queueTextResponse('Hello there!');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks
      });
      await agent.send('Hi');
      (0, _globals.expect)(messages.some(msg => msg.includes('Hello there!'))).toBe(true);
    });
    (0, _globals.test)('should call onContextPruned when context is pruned', async () => {
      let prunedCount = 0;
      const callbacks = {
        onContextPruned: count => {
          prunedCount = count;
        }
      };

      // Create a context manager that will trigger pruning
      const smallContextManager = (0, _contextManager.createDefaultContextManager)({
        maxTokens: 500,
        targetTokens: 200,
        preserveRecentMessages: 2
      });
      provider.queueTextResponse('Response 1');
      provider.queueTextResponse('Response 2');
      provider.queueTextResponse('Response 3');
      provider.queueTextResponse('Response 4');
      provider.queueTextResponse('Response 5');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks,
        contextManager: smallContextManager
      });

      // Fill up the context
      for (let i = 0; i < 5; i++) {
        await agent.send('A'.repeat(100));
      }

      // Context should have been pruned at some point
      // Note: exact behavior depends on token estimation
      (0, _globals.expect)(prunedCount).toBeGreaterThanOrEqual(0);
    });
  });
  (0, _globals.describe)('Cancellation', () => {
    (0, _globals.test)('should handle cancellation request during processing', async () => {
      let cancelledCalled = false;
      const callbacks = {
        onCancelled: () => {
          cancelledCalled = true;
        }
      };

      // Queue a slow operation
      provider.queueToolCallResponse('Running slow operation', [{
        id: 'call_1',
        name: 'slow_operation',
        arguments: {
          duration: 500
        }
      }]);
      provider.queueTextResponse('Done');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks
      });

      // Request cancellation before completing
      setTimeout(() => {
        agent.requestCancellation();
      }, 50);
      const response = await agent.send('Run slow operation');

      // Either cancelled or completed depending on timing
      if (cancelledCalled) {
        (0, _globals.expect)(response).toContain('cancelled');
      }
    });
    (0, _globals.test)('should reset cancellation flag on new request', async () => {
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });

      // Request cancellation
      agent.requestCancellation();
      (0, _globals.expect)(agent.isCancellationRequested()).toBe(true);

      // Start new request
      provider.queueTextResponse('Response');
      await agent.send('Hello');

      // Cancellation should be reset after request completes
      (0, _globals.expect)(agent.isCancellationRequested()).toBe(false);
    });
  });
  (0, _globals.describe)('Context Overflow Recovery', () => {
    (0, _globals.test)('should attempt recovery on context overflow error', async () => {
      let recoveryAttempts = 0;
      const callbacks = {
        onContextRecovery: attempt => {
          recoveryAttempts = attempt;
        }
      };

      // First call throws overflow, then succeeds
      provider.queueContextOverflowError();
      provider.queueTextResponse('Response after recovery');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks,
        contextManager
      });

      // Pre-fill some history
      agent.loadHistory([{
        role: 'system',
        content: 'System prompt'
      }, {
        role: 'user',
        content: 'Old message 1'
      }, {
        role: 'assistant',
        content: 'Old response 1'
      }, {
        role: 'user',
        content: 'Old message 2'
      }, {
        role: 'assistant',
        content: 'Old response 2'
      }]);
      const response = await agent.send('New message');
      (0, _globals.expect)(recoveryAttempts).toBeGreaterThan(0);
      (0, _globals.expect)(response).toContain('Response after recovery');
    });
  });
  (0, _globals.describe)('Running State', () => {
    (0, _globals.test)('should track running state correctly', async () => {
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      (0, _globals.expect)(agent.isRunning()).toBe(false);
      provider.queueToolCallResponse('Processing', [{
        id: 'call_1',
        name: 'slow_operation',
        arguments: {
          duration: 100
        }
      }]);
      provider.queueTextResponse('Done');
      const promise = agent.send('Run something');

      // Should be running during execution
      // Note: This timing is tricky in tests
      await promise;
      (0, _globals.expect)(agent.isRunning()).toBe(false);
    });
  });
});
(0, _globals.describe)('Tool Runtime Integration', () => {
  let toolRuntime;
  let contextManager;
  (0, _globals.beforeEach)(() => {
    contextManager = (0, _contextManager.createDefaultContextManager)({
      maxTokens: 10000,
      maxToolOutputLength: 1000
    });
    toolRuntime = new _toolRuntime.ToolRuntime([], {
      contextManager
    });
    toolRuntime.registerSuite(createMockToolSuite());
  });
  (0, _globals.describe)('Tool Registration', () => {
    (0, _globals.test)('should register and list tools', () => {
      const tools = toolRuntime.listProviderTools();
      const toolNames = tools.map(t => t.name);
      (0, _globals.expect)(toolNames).toContain('echo');
      (0, _globals.expect)(toolNames).toContain('add');
      (0, _globals.expect)(toolNames).toContain('read_file');
      (0, _globals.expect)(toolNames).toContain('slow_operation');
    });
    (0, _globals.test)('should unregister suite', () => {
      toolRuntime.unregisterSuite('test.mock-tools');
      const tools = toolRuntime.listProviderTools();
      (0, _globals.expect)(tools.find(t => t.name === 'echo')).toBeUndefined();
    });
  });
  (0, _globals.describe)('Tool Execution', () => {
    (0, _globals.test)('should execute tool successfully', async () => {
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'Hello!'
        }
      });
      (0, _globals.expect)(result).toBe('Echo: Hello!');
    });
    (0, _globals.test)('should handle unknown tool gracefully', async () => {
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'unknown_tool',
        arguments: {}
      });
      (0, _globals.expect)(result).toContain('not available');
    });
    (0, _globals.test)('should handle tool execution errors', async () => {
      const errorSuite = {
        id: 'test.error-tools',
        tools: [{
          name: 'error_tool',
          description: 'Always throws an error',
          handler: () => {
            throw new Error('Intentional error');
          }
        }]
      };
      toolRuntime.registerSuite(errorSuite);
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'error_tool',
        arguments: {}
      });
      (0, _globals.expect)(result).toContain('Failed');
      (0, _globals.expect)(result).toContain('Intentional error');
    });
  });
  (0, _globals.describe)('Tool Caching', () => {
    (0, _globals.test)('should cache cacheable tool results', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());

      // First call
      await toolRuntime.execute({
        id: 'call_1',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });

      // Second call with same args should hit cache
      await toolRuntime.execute({
        id: 'call_2',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });
      (0, _globals.expect)(cacheHits).toContain('read_file');
    });
    (0, _globals.test)('should not cache non-cacheable tools', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());

      // First call
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });

      // Second call should not hit cache
      await toolRuntime.execute({
        id: 'call_2',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });
      (0, _globals.expect)(cacheHits).not.toContain('echo');
    });
    (0, _globals.test)('should clear cache', async () => {
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());
      await toolRuntime.execute({
        id: 'call_1',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });
      const statsBeforeClear = toolRuntime.getCacheStats();
      (0, _globals.expect)(statsBeforeClear.entries).toBeGreaterThan(0);
      toolRuntime.clearCache();
      const statsAfterClear = toolRuntime.getCacheStats();
      (0, _globals.expect)(statsAfterClear.entries).toBe(0);
    });
    (0, _globals.test)('respects per-tool cache TTL overrides', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite({
        id: 'ttl.override',
        tools: [{
          name: 'burst',
          description: 'Returns a timestamp string',
          handler: () => `ts:${Date.now()}`,
          cacheable: true,
          cacheTtlMs: 5
        }]
      });
      await toolRuntime.execute({
        id: 'call_1',
        name: 'burst',
        arguments: {}
      });
      await toolRuntime.execute({
        id: 'call_2',
        name: 'burst',
        arguments: {}
      });
      (0, _globals.expect)(cacheHits).toEqual(['burst']);
      await new Promise(resolve => setTimeout(resolve, 15));
      await toolRuntime.execute({
        id: 'call_3',
        name: 'burst',
        arguments: {}
      });
      (0, _globals.expect)(cacheHits).toEqual(['burst']);
    });
  });
  (0, _globals.describe)('Tool History', () => {
    (0, _globals.test)('should track tool history', async () => {
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'first'
        }
      });
      await toolRuntime.execute({
        id: 'call_2',
        name: 'add',
        arguments: {
          a: 1,
          b: 2
        }
      });
      const history = toolRuntime.getToolHistory();
      (0, _globals.expect)(history.length).toBe(2);
      (0, _globals.expect)(history[0]?.toolName).toBe('echo');
      (0, _globals.expect)(history[1]?.toolName).toBe('add');
    });
    (0, _globals.test)('should clear tool history', async () => {
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });
      toolRuntime.clearToolHistory();
      const history = toolRuntime.getToolHistory();
      (0, _globals.expect)(history.length).toBe(0);
    });
  });
  (0, _globals.describe)('Diff Snapshots', () => {
    (0, _globals.test)('should capture git diff outputs from tool commands', async () => {
      toolRuntime.registerSuite(createMockDiffSuite());
      await toolRuntime.execute({
        id: 'call_git_diff',
        name: 'git_diff_mock',
        arguments: {
          command: 'git diff --stat'
        }
      });
      const snapshots = toolRuntime.getDiffSnapshots();
      (0, _globals.expect)(snapshots.length).toBe(1);
      (0, _globals.expect)(snapshots[0]?.command).toBe('git diff --stat');
      (0, _globals.expect)(snapshots[0]?.output).toContain('mock diff for git diff --stat');
      (0, _globals.expect)(typeof snapshots[0]?.timestamp).toBe('number');
    });
    (0, _globals.test)('should bound diff snapshots and support clearing', async () => {
      toolRuntime.registerSuite(createMockDiffSuite());
      for (let i = 0; i < 6; i++) {
        await toolRuntime.execute({
          id: `call_${i}`,
          name: 'git_diff_mock',
          arguments: {
            command: `git diff --stat ${i}`
          }
        });
      }
      const snapshots = toolRuntime.getDiffSnapshots();
      (0, _globals.expect)(snapshots.length).toBe(5);
      (0, _globals.expect)(snapshots[0]?.command).toBe('git diff --stat 1');
      (0, _globals.expect)(snapshots[snapshots.length - 1]?.command).toBe('git diff --stat 5');
      toolRuntime.clearDiffSnapshots();
      (0, _globals.expect)(toolRuntime.getDiffSnapshots().length).toBe(0);
    });
  });
  (0, _globals.describe)('Tool Output Truncation', () => {
    (0, _globals.test)('should truncate large tool outputs', async () => {
      const largeSuite = {
        id: 'test.large-output',
        tools: [{
          name: 'large_output',
          description: 'Returns large output',
          handler: () => 'X'.repeat(5000) // Exceeds maxToolOutputLength
        }]
      };
      toolRuntime.registerSuite(largeSuite);
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'large_output',
        arguments: {}
      });

      // Output should be truncated
      (0, _globals.expect)(result.length).toBeLessThan(5000);
      (0, _globals.expect)(result).toContain('truncated');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfYWdlbnQiLCJfdG9vbFJ1bnRpbWUiLCJfY29udGV4dE1hbmFnZXIiLCJNb2NrTExNUHJvdmlkZXIiLCJyZXNwb25zZXMiLCJyZXNwb25zZUluZGV4IiwiY2FsbEhpc3RvcnkiLCJxdWV1ZVRleHRSZXNwb25zZSIsImNvbnRlbnQiLCJwdXNoIiwidHlwZSIsInF1ZXVlVG9vbENhbGxSZXNwb25zZSIsInRvb2xDYWxscyIsInF1ZXVlQ29udGV4dE92ZXJmbG93RXJyb3IiLCJnZW5lcmF0ZSIsIm1lc3NhZ2VzIiwibGVuZ3RoIiwicmVzcG9uc2UiLCJlcnJvciIsIkVycm9yIiwidXNhZ2UiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInJlc2V0IiwiY3JlYXRlTW9ja1Rvb2xTdWl0ZSIsInRvb2xzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInByb3BlcnRpZXMiLCJtZXNzYWdlIiwicmVxdWlyZWQiLCJoYW5kbGVyIiwiYXJncyIsImEiLCJiIiwiTnVtYmVyIiwicGF0aCIsImNhY2hlYWJsZSIsImR1cmF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiTWF0aCIsIm1pbiIsImlkIiwiY3JlYXRlTW9ja0RpZmZTdWl0ZSIsImNvbW1hbmQiLCJkZXNjcmliZSIsInByb3ZpZGVyIiwidG9vbFJ1bnRpbWUiLCJjb250ZXh0TWFuYWdlciIsImJlZm9yZUVhY2giLCJUb29sUnVudGltZSIsInJlZ2lzdGVyU3VpdGUiLCJjcmVhdGVEZWZhdWx0Q29udGV4dE1hbmFnZXIiLCJtYXhUb2tlbnMiLCJ0YXJnZXRUb2tlbnMiLCJhZnRlckVhY2giLCJ0ZXN0IiwiYWdlbnQiLCJBZ2VudFJ1bnRpbWUiLCJzeXN0ZW1Qcm9tcHQiLCJzZW5kIiwiZXhwZWN0IiwidG9Db250YWluIiwidG9Mb3dlckNhc2UiLCJub3QiLCJ0b0JlIiwiaGlzdG9yeSIsImdldEhpc3RvcnkiLCJyb2xlIiwiY2xlYXJIaXN0b3J5IiwicHJldmlvdXNIaXN0b3J5IiwibG9hZEhpc3RvcnkiLCJhcmd1bWVudHMiLCJ0b29sTWVzc2FnZXMiLCJmaWx0ZXIiLCJtIiwidG9vbFN0YXJ0cyIsInRvb2xSZXN1bHRzIiwib2JzZXJ2ZXIiLCJvblRvb2xTdGFydCIsImNhbGwiLCJvblRvb2xSZXN1bHQiLCJvdXRwdXQiLCJzb21lIiwiciIsImluY2x1ZGVzIiwiY2FsbGJhY2tzIiwib25Bc3Npc3RhbnRNZXNzYWdlIiwibXNnIiwicHJ1bmVkQ291bnQiLCJvbkNvbnRleHRQcnVuZWQiLCJjb3VudCIsInNtYWxsQ29udGV4dE1hbmFnZXIiLCJwcmVzZXJ2ZVJlY2VudE1lc3NhZ2VzIiwiaSIsInJlcGVhdCIsInRvQmVHcmVhdGVyVGhhbk9yRXF1YWwiLCJjYW5jZWxsZWRDYWxsZWQiLCJvbkNhbmNlbGxlZCIsInJlcXVlc3RDYW5jZWxsYXRpb24iLCJpc0NhbmNlbGxhdGlvblJlcXVlc3RlZCIsInJlY292ZXJ5QXR0ZW1wdHMiLCJvbkNvbnRleHRSZWNvdmVyeSIsImF0dGVtcHQiLCJ0b0JlR3JlYXRlclRoYW4iLCJpc1J1bm5pbmciLCJwcm9taXNlIiwibWF4VG9vbE91dHB1dExlbmd0aCIsImxpc3RQcm92aWRlclRvb2xzIiwidG9vbE5hbWVzIiwibWFwIiwidCIsInVucmVnaXN0ZXJTdWl0ZSIsImZpbmQiLCJ0b0JlVW5kZWZpbmVkIiwicmVzdWx0IiwiZXhlY3V0ZSIsImVycm9yU3VpdGUiLCJjYWNoZUhpdHMiLCJvbkNhY2hlSGl0IiwiZW5hYmxlQ2FjaGUiLCJzdGF0c0JlZm9yZUNsZWFyIiwiZ2V0Q2FjaGVTdGF0cyIsImVudHJpZXMiLCJjbGVhckNhY2hlIiwic3RhdHNBZnRlckNsZWFyIiwiRGF0ZSIsIm5vdyIsImNhY2hlVHRsTXMiLCJ0b0VxdWFsIiwiZ2V0VG9vbEhpc3RvcnkiLCJ0b29sTmFtZSIsImNsZWFyVG9vbEhpc3RvcnkiLCJzbmFwc2hvdHMiLCJnZXREaWZmU25hcHNob3RzIiwidGltZXN0YW1wIiwiY2xlYXJEaWZmU25hcHNob3RzIiwibGFyZ2VTdWl0ZSIsInRvQmVMZXNzVGhhbiJdLCJzb3VyY2VzIjpbImFnZW50UnVudGltZUludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBBZ2VudCBSdW50aW1lIEludGVncmF0aW9uIFRlc3RzXG4gKlxuICogVGVzdHMgdGhlIEFnZW50UnVudGltZSBjbGFzcyB3aXRoOlxuICogLSBDb250ZXh0IG92ZXJmbG93IHJlY292ZXJ5XG4gKiAtIFN0cmVhbWluZyB3aXRoIGludGVycnVwdGlvbiBoYW5kbGluZ1xuICogLSBDYW5jZWxsYXRpb24gc3VwcG9ydFxuICogLSBUb29sIGV4ZWN1dGlvbiBwaXBlbGluZVxuICovXG5cbmltcG9ydCB7IGRlc2NyaWJlLCB0ZXN0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgQWdlbnRSdW50aW1lLCB0eXBlIEFnZW50Q2FsbGJhY2tzIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvYWdlbnQuanMnO1xuaW1wb3J0IHsgVG9vbFJ1bnRpbWUsIHR5cGUgVG9vbFN1aXRlLCB0eXBlIFRvb2xEZWZpbml0aW9uIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdG9vbFJ1bnRpbWUuanMnO1xuaW1wb3J0IHsgQ29udGV4dE1hbmFnZXIsIGNyZWF0ZURlZmF1bHRDb250ZXh0TWFuYWdlciB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL2NvbnRleHRNYW5hZ2VyLmpzJztcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uTWVzc2FnZSwgTExNUHJvdmlkZXIsIFRvb2xDYWxsUmVxdWVzdCB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL3R5cGVzLmpzJztcblxuLy8gTW9jayBMTE0gUHJvdmlkZXIgZm9yIHRlc3RpbmdcbmNsYXNzIE1vY2tMTE1Qcm92aWRlciBpbXBsZW1lbnRzIExMTVByb3ZpZGVyIHtcbiAgcHJpdmF0ZSByZXNwb25zZXM6IEFycmF5PHtcbiAgICB0eXBlOiAndGV4dCcgfCAndG9vbF9jYWxscyc7XG4gICAgY29udGVudD86IHN0cmluZztcbiAgICB0b29sQ2FsbHM/OiBUb29sQ2FsbFJlcXVlc3RbXTtcbiAgfT4gPSBbXTtcbiAgcHJpdmF0ZSByZXNwb25zZUluZGV4ID0gMDtcbiAgcHVibGljIGNhbGxIaXN0b3J5OiBDb252ZXJzYXRpb25NZXNzYWdlW11bXSA9IFtdO1xuXG4gIHF1ZXVlVGV4dFJlc3BvbnNlKGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucmVzcG9uc2VzLnB1c2goeyB0eXBlOiAndGV4dCcsIGNvbnRlbnQgfSk7XG4gIH1cblxuICBxdWV1ZVRvb2xDYWxsUmVzcG9uc2UoY29udGVudDogc3RyaW5nLCB0b29sQ2FsbHM6IFRvb2xDYWxsUmVxdWVzdFtdKTogdm9pZCB7XG4gICAgdGhpcy5yZXNwb25zZXMucHVzaCh7IHR5cGU6ICd0b29sX2NhbGxzJywgY29udGVudCwgdG9vbENhbGxzIH0pO1xuICB9XG5cbiAgcXVldWVDb250ZXh0T3ZlcmZsb3dFcnJvcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3BvbnNlcy5wdXNoKHsgdHlwZTogJ3RleHQnLCBjb250ZW50OiAnX19PVkVSRkxPV19fJyB9KTtcbiAgfVxuXG4gIGFzeW5jIGdlbmVyYXRlKG1lc3NhZ2VzOiBDb252ZXJzYXRpb25NZXNzYWdlW10pOiBQcm9taXNlPHtcbiAgICB0eXBlOiAndGV4dCcgfCAndG9vbF9jYWxscyc7XG4gICAgY29udGVudD86IHN0cmluZztcbiAgICB0b29sQ2FsbHM/OiBUb29sQ2FsbFJlcXVlc3RbXTtcbiAgICB1c2FnZT86IHsgaW5wdXRUb2tlbnM6IG51bWJlcjsgb3V0cHV0VG9rZW5zOiBudW1iZXIgfTtcbiAgfT4ge1xuICAgIHRoaXMuY2FsbEhpc3RvcnkucHVzaChbLi4ubWVzc2FnZXNdKTtcblxuICAgIGlmICh0aGlzLnJlc3BvbnNlSW5kZXggPj0gdGhpcy5yZXNwb25zZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4geyB0eXBlOiAndGV4dCcsIGNvbnRlbnQ6ICdEZWZhdWx0IG1vY2sgcmVzcG9uc2UnIH07XG4gICAgfVxuXG4gICAgY29uc3QgcmVzcG9uc2UgPSB0aGlzLnJlc3BvbnNlc1t0aGlzLnJlc3BvbnNlSW5kZXgrK10hO1xuXG4gICAgLy8gU2ltdWxhdGUgY29udGV4dCBvdmVyZmxvdyBlcnJvclxuICAgIGlmIChyZXNwb25zZS5jb250ZW50ID09PSAnX19PVkVSRkxPV19fJykge1xuICAgICAgY29uc3QgZXJyb3IgPSBuZXcgRXJyb3IoJ0NvbnRleHQgbGVuZ3RoIGV4Y2VlZGVkOiB0b2tlbiBsaW1pdCByZWFjaGVkJyk7XG4gICAgICB0aHJvdyBlcnJvcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucmVzcG9uc2UsXG4gICAgICB1c2FnZTogeyBpbnB1dFRva2VuczogMTAwLCBvdXRwdXRUb2tlbnM6IDUwIH0sXG4gICAgfTtcbiAgfVxuXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMucmVzcG9uc2VzID0gW107XG4gICAgdGhpcy5yZXNwb25zZUluZGV4ID0gMDtcbiAgICB0aGlzLmNhbGxIaXN0b3J5ID0gW107XG4gIH1cbn1cblxuLy8gTW9jayBUb29sIFN1aXRlIGZvciB0ZXN0aW5nXG5mdW5jdGlvbiBjcmVhdGVNb2NrVG9vbFN1aXRlKCk6IFRvb2xTdWl0ZSB7XG4gIGNvbnN0IHRvb2xzOiBUb29sRGVmaW5pdGlvbltdID0gW1xuICAgIHtcbiAgICAgIG5hbWU6ICdlY2hvJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRWNob2VzIGJhY2sgdGhlIGlucHV0JyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBtZXNzYWdlOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ01lc3NhZ2UgdG8gZWNobycgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsnbWVzc2FnZSddLFxuICAgICAgfSxcbiAgICAgIGhhbmRsZXI6IChhcmdzKSA9PiBgRWNobzogJHthcmdzWydtZXNzYWdlJ119YCxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdhZGQnLFxuICAgICAgZGVzY3JpcHRpb246ICdBZGRzIHR3byBudW1iZXJzJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBhOiB7IHR5cGU6ICdudW1iZXInLCBkZXNjcmlwdGlvbjogJ0ZpcnN0IG51bWJlcicgfSxcbiAgICAgICAgICBiOiB7IHR5cGU6ICdudW1iZXInLCBkZXNjcmlwdGlvbjogJ1NlY29uZCBudW1iZXInIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ2EnLCAnYiddLFxuICAgICAgfSxcbiAgICAgIGhhbmRsZXI6IChhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGEgPSBOdW1iZXIoYXJnc1snYSddKTtcbiAgICAgICAgY29uc3QgYiA9IE51bWJlcihhcmdzWydiJ10pO1xuICAgICAgICByZXR1cm4gYFJlc3VsdDogJHthICsgYn1gO1xuICAgICAgfSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdyZWFkX2ZpbGUnLFxuICAgICAgZGVzY3JpcHRpb246ICdSZWFkcyBhIGZpbGUnLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHBhdGg6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnRmlsZSBwYXRoJyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWydwYXRoJ10sXG4gICAgICB9LFxuICAgICAgaGFuZGxlcjogKGFyZ3MpID0+IGBDb250ZW50IG9mICR7YXJnc1sncGF0aCddfTogW21vY2sgY29udGVudF1gLFxuICAgICAgY2FjaGVhYmxlOiB0cnVlLFxuICAgIH0sXG4gICAge1xuICAgICAgbmFtZTogJ3Nsb3dfb3BlcmF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnU2ltdWxhdGVzIGEgc2xvdyBvcGVyYXRpb24nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIGR1cmF0aW9uOiB7IHR5cGU6ICdudW1iZXInLCBkZXNjcmlwdGlvbjogJ0R1cmF0aW9uIGluIG1zJyB9LFxuICAgICAgICB9LFxuICAgICAgfSxcbiAgICAgIGhhbmRsZXI6IGFzeW5jIChhcmdzKSA9PiB7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID0gTnVtYmVyKGFyZ3NbJ2R1cmF0aW9uJ10pIHx8IDEwMDtcbiAgICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgTWF0aC5taW4oZHVyYXRpb24sIC8qIFRPRE86IEV4dHJhY3QgY29uc3RhbnQgKi8gLyogVE9ETzogRXh0cmFjdCBjb25zdGFudCAqLyAxMDAwKSkpO1xuICAgICAgICByZXR1cm4gJ09wZXJhdGlvbiBjb21wbGV0ZWQnO1xuICAgICAgfSxcbiAgICB9LFxuICBdO1xuXG4gIHJldHVybiB7XG4gICAgaWQ6ICd0ZXN0Lm1vY2stdG9vbHMnLFxuICAgIGRlc2NyaXB0aW9uOiAnTW9jayB0b29scyBmb3IgdGVzdGluZycsXG4gICAgdG9vbHMsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGNyZWF0ZU1vY2tEaWZmU3VpdGUoKTogVG9vbFN1aXRlIHtcbiAgcmV0dXJuIHtcbiAgICBpZDogJ3Rlc3QubW9jay1kaWZmJyxcbiAgICBkZXNjcmlwdGlvbjogJ01vY2sgZ2l0IGRpZmYgdG9vbCBmb3Igc25hcHNob3QgdHJhY2tpbmcnLFxuICAgIHRvb2xzOiBbXG4gICAgICB7XG4gICAgICAgIG5hbWU6ICdnaXRfZGlmZl9tb2NrJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdSZXR1cm5zIG1vY2sgZ2l0IGRpZmYgb3V0cHV0JyxcbiAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICAgIGNvbW1hbmQ6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnR2l0IGRpZmYgY29tbWFuZCcgfSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHJlcXVpcmVkOiBbJ2NvbW1hbmQnXSxcbiAgICAgICAgfSxcbiAgICAgICAgaGFuZGxlcjogKGFyZ3MpID0+IGBtb2NrIGRpZmYgZm9yICR7YXJnc1snY29tbWFuZCddID8/ICcnfWAsXG4gICAgICB9LFxuICAgIF0sXG4gIH07XG59XG5cbmRlc2NyaWJlKCdBZ2VudCBSdW50aW1lIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgcHJvdmlkZXI6IE1vY2tMTE1Qcm92aWRlcjtcbiAgbGV0IHRvb2xSdW50aW1lOiBUb29sUnVudGltZTtcbiAgbGV0IGNvbnRleHRNYW5hZ2VyOiBDb250ZXh0TWFuYWdlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBwcm92aWRlciA9IG5ldyBNb2NrTExNUHJvdmlkZXIoKTtcbiAgICB0b29sUnVudGltZSA9IG5ldyBUb29sUnVudGltZSgpO1xuICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUoY3JlYXRlTW9ja1Rvb2xTdWl0ZSgpKTtcbiAgICBjb250ZXh0TWFuYWdlciA9IGNyZWF0ZURlZmF1bHRDb250ZXh0TWFuYWdlcih7XG4gICAgICBtYXhUb2tlbnM6IDEwMDAwLFxuICAgICAgdGFyZ2V0VG9rZW5zOiA3MDAwLFxuICAgIH0pO1xuICB9KTtcblxuICBhZnRlckVhY2goKCkgPT4ge1xuICAgIHByb3ZpZGVyLnJlc2V0KCk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdCYXNpYyBNZXNzYWdlIEhhbmRsaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBzZW5kIGEgc2ltcGxlIG1lc3NhZ2UgYW5kIHJlY2VpdmUgcmVzcG9uc2UnLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnSGVsbG8hIEhvdyBjYW4gSSBoZWxwIHlvdT8nKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50LnNlbmQoJ0hlbGxvJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9Db250YWluKCdIZWxsbyEgSG93IGNhbiBJIGhlbHAgeW91PycpO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlLnRvTG93ZXJDYXNlKCkpLm5vdC50b0NvbnRhaW4oJ25leHQgc3RlcHMnKTtcbiAgICAgIGV4cGVjdChwcm92aWRlci5jYWxsSGlzdG9yeS5sZW5ndGgpLnRvQmUoMSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbWFpbnRhaW4gY29udmVyc2F0aW9uIGhpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnRmlyc3QgcmVzcG9uc2UnKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdTZWNvbmQgcmVzcG9uc2UnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdGaXJzdCBtZXNzYWdlJyk7XG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdTZWNvbmQgbWVzc2FnZScpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gYWdlbnQuZ2V0SGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDUpOyAvLyBzeXN0ZW0gKyB1c2VyICsgYXNzaXN0YW50ICsgdXNlciArIGFzc2lzdGFudFxuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0/LnJvbGUpLnRvQmUoJ3N5c3RlbScpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMV0/LnJvbGUpLnRvQmUoJ3VzZXInKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzJdPy5yb2xlKS50b0JlKCdhc3Npc3RhbnQnKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzNdPy5yb2xlKS50b0JlKCd1c2VyJyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVs0XT8ucm9sZSkudG9CZSgnYXNzaXN0YW50Jyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2xlYXIgaGlzdG9yeSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnUmVzcG9uc2UnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdIZWxsbycpO1xuICAgICAgYWdlbnQuY2xlYXJIaXN0b3J5KCk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhZ2VudC5nZXRIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMSk7IC8vIE9ubHkgc3lzdGVtIG1lc3NhZ2VcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdPy5yb2xlKS50b0JlKCdzeXN0ZW0nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBsb2FkIGhpc3RvcnkgZnJvbSBwcmV2aW91cyBzZXNzaW9uJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcHJldmlvdXNIaXN0b3J5OiBDb252ZXJzYXRpb25NZXNzYWdlW10gPSBbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdQcmV2aW91cyBzeXN0ZW0gcHJvbXB0JyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ1ByZXZpb3VzIHVzZXIgbWVzc2FnZScgfSxcbiAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ1ByZXZpb3VzIGFzc2lzdGFudCByZXNwb25zZScgfSxcbiAgICAgIF07XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnTmV3IHN5c3RlbSBwcm9tcHQnLFxuICAgICAgfSk7XG5cbiAgICAgIGFnZW50LmxvYWRIaXN0b3J5KHByZXZpb3VzSGlzdG9yeSk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhZ2VudC5nZXRIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVswXT8uY29udGVudCkudG9CZSgnUHJldmlvdXMgc3lzdGVtIHByb21wdCcpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9vbCBFeGVjdXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgdG9vbCBjYWxscyBmcm9tIHByb3ZpZGVyIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvdmlkZXIucXVldWVUb29sQ2FsbFJlc3BvbnNlKCdJIHdpbGwgZWNobyB5b3VyIG1lc3NhZ2UnLCBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgICAgbmFtZTogJ2VjaG8nLFxuICAgICAgICAgIGFyZ3VtZW50czogeyBtZXNzYWdlOiAnSGVsbG8sIFdvcmxkIScgfSxcbiAgICAgICAgfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1RoZSBlY2hvIHJlc3VsdCB3YXM6IEVjaG86IEhlbGxvLCBXb3JsZCEnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50LnNlbmQoJ0VjaG8gXCJIZWxsbywgV29ybGQhXCInKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlKS50b0NvbnRhaW4oJ1RoZSBlY2hvIHJlc3VsdCB3YXM6IEVjaG86IEhlbGxvLCBXb3JsZCEnKTtcbiAgICAgIGV4cGVjdChwcm92aWRlci5jYWxsSGlzdG9yeS5sZW5ndGgpLnRvQmUoMik7IC8vIEluaXRpYWwgKyBhZnRlciB0b29sIHJlc3VsdFxuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgbXVsdGlwbGUgdG9vbCBjYWxscyBpbiBzZXF1ZW5jZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVG9vbENhbGxSZXNwb25zZSgnSSB3aWxsIGFkZCBzb21lIG51bWJlcnMnLCBbXG4gICAgICAgIHsgaWQ6ICdjYWxsXzEnLCBuYW1lOiAnYWRkJywgYXJndW1lbnRzOiB7IGE6IDUsIGI6IDMgfSB9LFxuICAgICAgICB7IGlkOiAnY2FsbF8yJywgbmFtZTogJ2FkZCcsIGFyZ3VtZW50czogeyBhOiAxMCwgYjogNyB9IH0sXG4gICAgICBdKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdUaGUgcmVzdWx0cyBhcmUgOCBhbmQgMTcnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50LnNlbmQoJ0FkZCA1KzMgYW5kIDEwKzcnKTtcblxuICAgICAgZXhwZWN0KHJlc3BvbnNlKS50b0NvbnRhaW4oJ1RoZSByZXN1bHRzIGFyZSA4IGFuZCAxNycpO1xuXG4gICAgICAvLyBDaGVjayB0b29sIHJlc3VsdHMgYXJlIGluIGhpc3RvcnlcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhZ2VudC5nZXRIaXN0b3J5KCk7XG4gICAgICBjb25zdCB0b29sTWVzc2FnZXMgPSBoaXN0b3J5LmZpbHRlcigobSkgPT4gbS5yb2xlID09PSAndG9vbCcpO1xuICAgICAgZXhwZWN0KHRvb2xNZXNzYWdlcy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdHJhY2sgdG9vbCBjYWxscyB2aWEgb2JzZXJ2ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b29sU3RhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgdG9vbFJlc3VsdHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGNvbnN0IG9ic2VydmVyID0ge1xuICAgICAgICBvblRvb2xTdGFydDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCkgPT4gdG9vbFN0YXJ0cy5wdXNoKGNhbGwubmFtZSksXG4gICAgICAgIG9uVG9vbFJlc3VsdDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCwgb3V0cHV0OiBzdHJpbmcpID0+XG4gICAgICAgICAgdG9vbFJlc3VsdHMucHVzaChgJHtjYWxsLm5hbWV9OiAke291dHB1dH1gKSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IG9ic2VydmVyIH0pO1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrVG9vbFN1aXRlKCkpO1xuXG4gICAgICBwcm92aWRlci5xdWV1ZVRvb2xDYWxsUmVzcG9uc2UoJ0V4ZWN1dGluZyBlY2hvJywgW1xuICAgICAgICB7IGlkOiAnY2FsbF8xJywgbmFtZTogJ2VjaG8nLCBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ3Rlc3QnIH0gfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0RvbmUnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdFY2hvIHRlc3QnKTtcblxuICAgICAgZXhwZWN0KHRvb2xTdGFydHMpLnRvQ29udGFpbignZWNobycpO1xuICAgICAgZXhwZWN0KHRvb2xSZXN1bHRzLnNvbWUoKHIpID0+IHIuaW5jbHVkZXMoJ0VjaG86IHRlc3QnKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYWxsYmFja3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNhbGwgb25Bc3Npc3RhbnRNZXNzYWdlIGNhbGxiYWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBjYWxsYmFja3M6IEFnZW50Q2FsbGJhY2tzID0ge1xuICAgICAgICBvbkFzc2lzdGFudE1lc3NhZ2U6IChjb250ZW50KSA9PiBtZXNzYWdlcy5wdXNoKGNvbnRlbnQpLFxuICAgICAgfTtcblxuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0hlbGxvIHRoZXJlIScpO1xuXG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuICAgICAgICBjYWxsYmFja3MsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnSGknKTtcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzLnNvbWUoKG1zZykgPT4gbXNnLmluY2x1ZGVzKCdIZWxsbyB0aGVyZSEnKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2FsbCBvbkNvbnRleHRQcnVuZWQgd2hlbiBjb250ZXh0IGlzIHBydW5lZCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBwcnVuZWRDb3VudCA9IDA7XG4gICAgICBjb25zdCBjYWxsYmFja3M6IEFnZW50Q2FsbGJhY2tzID0ge1xuICAgICAgICBvbkNvbnRleHRQcnVuZWQ6IChjb3VudCkgPT4ge1xuICAgICAgICAgIHBydW5lZENvdW50ID0gY291bnQ7XG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBDcmVhdGUgYSBjb250ZXh0IG1hbmFnZXIgdGhhdCB3aWxsIHRyaWdnZXIgcHJ1bmluZ1xuICAgICAgY29uc3Qgc21hbGxDb250ZXh0TWFuYWdlciA9IGNyZWF0ZURlZmF1bHRDb250ZXh0TWFuYWdlcih7XG4gICAgICAgIG1heFRva2VuczogNTAwLFxuICAgICAgICB0YXJnZXRUb2tlbnM6IDIwMCxcbiAgICAgICAgcHJlc2VydmVSZWNlbnRNZXNzYWdlczogMixcbiAgICAgIH0pO1xuXG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnUmVzcG9uc2UgMScpO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlIDInKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdSZXNwb25zZSAzJyk7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnUmVzcG9uc2UgNCcpO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlIDUnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgICAgY2FsbGJhY2tzLFxuICAgICAgICBjb250ZXh0TWFuYWdlcjogc21hbGxDb250ZXh0TWFuYWdlcixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBGaWxsIHVwIHRoZSBjb250ZXh0XG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDU7IGkrKykge1xuICAgICAgICBhd2FpdCBhZ2VudC5zZW5kKCdBJy5yZXBlYXQoMTAwKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIENvbnRleHQgc2hvdWxkIGhhdmUgYmVlbiBwcnVuZWQgYXQgc29tZSBwb2ludFxuICAgICAgLy8gTm90ZTogZXhhY3QgYmVoYXZpb3IgZGVwZW5kcyBvbiB0b2tlbiBlc3RpbWF0aW9uXG4gICAgICBleHBlY3QocHJ1bmVkQ291bnQpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYW5jZWxsYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSBjYW5jZWxsYXRpb24gcmVxdWVzdCBkdXJpbmcgcHJvY2Vzc2luZycsIGFzeW5jICgpID0+IHtcbiAgICAgIGxldCBjYW5jZWxsZWRDYWxsZWQgPSBmYWxzZTtcbiAgICAgIGNvbnN0IGNhbGxiYWNrczogQWdlbnRDYWxsYmFja3MgPSB7XG4gICAgICAgIG9uQ2FuY2VsbGVkOiAoKSA9PiB7XG4gICAgICAgICAgY2FuY2VsbGVkQ2FsbGVkID0gdHJ1ZTtcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIFF1ZXVlIGEgc2xvdyBvcGVyYXRpb25cbiAgICAgIHByb3ZpZGVyLnF1ZXVlVG9vbENhbGxSZXNwb25zZSgnUnVubmluZyBzbG93IG9wZXJhdGlvbicsIFtcbiAgICAgICAgeyBpZDogJ2NhbGxfMScsIG5hbWU6ICdzbG93X29wZXJhdGlvbicsIGFyZ3VtZW50czogeyBkdXJhdGlvbjogNTAwIH0gfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0RvbmUnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgICAgY2FsbGJhY2tzLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlcXVlc3QgY2FuY2VsbGF0aW9uIGJlZm9yZSBjb21wbGV0aW5nXG4gICAgICBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgYWdlbnQucmVxdWVzdENhbmNlbGxhdGlvbigpO1xuICAgICAgfSwgNTApO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50LnNlbmQoJ1J1biBzbG93IG9wZXJhdGlvbicpO1xuXG4gICAgICAvLyBFaXRoZXIgY2FuY2VsbGVkIG9yIGNvbXBsZXRlZCBkZXBlbmRpbmcgb24gdGltaW5nXG4gICAgICBpZiAoY2FuY2VsbGVkQ2FsbGVkKSB7XG4gICAgICAgIGV4cGVjdChyZXNwb25zZSkudG9Db250YWluKCdjYW5jZWxsZWQnKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCByZXNldCBjYW5jZWxsYXRpb24gZmxhZyBvbiBuZXcgcmVxdWVzdCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICB9KTtcblxuICAgICAgLy8gUmVxdWVzdCBjYW5jZWxsYXRpb25cbiAgICAgIGFnZW50LnJlcXVlc3RDYW5jZWxsYXRpb24oKTtcbiAgICAgIGV4cGVjdChhZ2VudC5pc0NhbmNlbGxhdGlvblJlcXVlc3RlZCgpKS50b0JlKHRydWUpO1xuXG4gICAgICAvLyBTdGFydCBuZXcgcmVxdWVzdFxuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlJyk7XG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdIZWxsbycpO1xuXG4gICAgICAvLyBDYW5jZWxsYXRpb24gc2hvdWxkIGJlIHJlc2V0IGFmdGVyIHJlcXVlc3QgY29tcGxldGVzXG4gICAgICBleHBlY3QoYWdlbnQuaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKSkudG9CZShmYWxzZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDb250ZXh0IE92ZXJmbG93IFJlY292ZXJ5JywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBhdHRlbXB0IHJlY292ZXJ5IG9uIGNvbnRleHQgb3ZlcmZsb3cgZXJyb3InLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcmVjb3ZlcnlBdHRlbXB0cyA9IDA7XG4gICAgICBjb25zdCBjYWxsYmFja3M6IEFnZW50Q2FsbGJhY2tzID0ge1xuICAgICAgICBvbkNvbnRleHRSZWNvdmVyeTogKGF0dGVtcHQpID0+IHtcbiAgICAgICAgICByZWNvdmVyeUF0dGVtcHRzID0gYXR0ZW1wdDtcbiAgICAgICAgfSxcbiAgICAgIH07XG5cbiAgICAgIC8vIEZpcnN0IGNhbGwgdGhyb3dzIG92ZXJmbG93LCB0aGVuIHN1Y2NlZWRzXG4gICAgICBwcm92aWRlci5xdWV1ZUNvbnRleHRPdmVyZmxvd0Vycm9yKCk7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnUmVzcG9uc2UgYWZ0ZXIgcmVjb3ZlcnknKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgICAgY2FsbGJhY2tzLFxuICAgICAgICBjb250ZXh0TWFuYWdlcixcbiAgICAgIH0pO1xuXG4gICAgICAvLyBQcmUtZmlsbCBzb21lIGhpc3RvcnlcbiAgICAgIGFnZW50LmxvYWRIaXN0b3J5KFtcbiAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogJ1N5c3RlbSBwcm9tcHQnIH0sXG4gICAgICAgIHsgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnT2xkIG1lc3NhZ2UgMScgfSxcbiAgICAgICAgeyByb2xlOiAnYXNzaXN0YW50JywgY29udGVudDogJ09sZCByZXNwb25zZSAxJyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ09sZCBtZXNzYWdlIDInIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdPbGQgcmVzcG9uc2UgMicgfSxcbiAgICAgIF0pO1xuXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGFnZW50LnNlbmQoJ05ldyBtZXNzYWdlJyk7XG5cbiAgICAgIGV4cGVjdChyZWNvdmVyeUF0dGVtcHRzKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvQ29udGFpbignUmVzcG9uc2UgYWZ0ZXIgcmVjb3ZlcnknKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1J1bm5pbmcgU3RhdGUnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRyYWNrIHJ1bm5pbmcgc3RhdGUgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoYWdlbnQuaXNSdW5uaW5nKCkpLnRvQmUoZmFsc2UpO1xuXG4gICAgICBwcm92aWRlci5xdWV1ZVRvb2xDYWxsUmVzcG9uc2UoJ1Byb2Nlc3NpbmcnLCBbXG4gICAgICAgIHsgaWQ6ICdjYWxsXzEnLCBuYW1lOiAnc2xvd19vcGVyYXRpb24nLCBhcmd1bWVudHM6IHsgZHVyYXRpb246IDEwMCB9IH0sXG4gICAgICBdKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdEb25lJyk7XG5cbiAgICAgIGNvbnN0IHByb21pc2UgPSBhZ2VudC5zZW5kKCdSdW4gc29tZXRoaW5nJyk7XG5cbiAgICAgIC8vIFNob3VsZCBiZSBydW5uaW5nIGR1cmluZyBleGVjdXRpb25cbiAgICAgIC8vIE5vdGU6IFRoaXMgdGltaW5nIGlzIHRyaWNreSBpbiB0ZXN0c1xuICAgICAgYXdhaXQgcHJvbWlzZTtcblxuICAgICAgZXhwZWN0KGFnZW50LmlzUnVubmluZygpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1Rvb2wgUnVudGltZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgbGV0IHRvb2xSdW50aW1lOiBUb29sUnVudGltZTtcbiAgbGV0IGNvbnRleHRNYW5hZ2VyOiBDb250ZXh0TWFuYWdlcjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBjb250ZXh0TWFuYWdlciA9IGNyZWF0ZURlZmF1bHRDb250ZXh0TWFuYWdlcih7XG4gICAgICBtYXhUb2tlbnM6IDEwMDAwLFxuICAgICAgbWF4VG9vbE91dHB1dExlbmd0aDogMTAwMCxcbiAgICB9KTtcbiAgICB0b29sUnVudGltZSA9IG5ldyBUb29sUnVudGltZShbXSwgeyBjb250ZXh0TWFuYWdlciB9KTtcbiAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tUb29sU3VpdGUoKSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb29sIFJlZ2lzdHJhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgcmVnaXN0ZXIgYW5kIGxpc3QgdG9vbHMnLCAoKSA9PiB7XG4gICAgICBjb25zdCB0b29scyA9IHRvb2xSdW50aW1lLmxpc3RQcm92aWRlclRvb2xzKCk7XG4gICAgICBjb25zdCB0b29sTmFtZXMgPSB0b29scy5tYXAoKHQpID0+IHQubmFtZSk7XG5cbiAgICAgIGV4cGVjdCh0b29sTmFtZXMpLnRvQ29udGFpbignZWNobycpO1xuICAgICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdhZGQnKTtcbiAgICAgIGV4cGVjdCh0b29sTmFtZXMpLnRvQ29udGFpbigncmVhZF9maWxlJyk7XG4gICAgICBleHBlY3QodG9vbE5hbWVzKS50b0NvbnRhaW4oJ3Nsb3dfb3BlcmF0aW9uJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdW5yZWdpc3RlciBzdWl0ZScsICgpID0+IHtcbiAgICAgIHRvb2xSdW50aW1lLnVucmVnaXN0ZXJTdWl0ZSgndGVzdC5tb2NrLXRvb2xzJyk7XG4gICAgICBjb25zdCB0b29scyA9IHRvb2xSdW50aW1lLmxpc3RQcm92aWRlclRvb2xzKCk7XG5cbiAgICAgIGV4cGVjdCh0b29scy5maW5kKCh0KSA9PiB0Lm5hbWUgPT09ICdlY2hvJykpLnRvQmVVbmRlZmluZWQoKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rvb2wgRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBleGVjdXRlIHRvb2wgc3VjY2Vzc2Z1bGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF8xJyxcbiAgICAgICAgbmFtZTogJ2VjaG8nLFxuICAgICAgICBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ0hlbGxvIScgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKCdFY2hvOiBIZWxsbyEnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdW5rbm93biB0b29sIGdyYWNlZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAndW5rbm93bl90b29sJyxcbiAgICAgICAgYXJndW1lbnRzOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ25vdCBhdmFpbGFibGUnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgdG9vbCBleGVjdXRpb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZXJyb3JTdWl0ZTogVG9vbFN1aXRlID0ge1xuICAgICAgICBpZDogJ3Rlc3QuZXJyb3ItdG9vbHMnLFxuICAgICAgICB0b29sczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdlcnJvcl90b29sJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQWx3YXlzIHRocm93cyBhbiBlcnJvcicsXG4gICAgICAgICAgICBoYW5kbGVyOiAoKSA9PiB7XG4gICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW50ZW50aW9uYWwgZXJyb3InKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUoZXJyb3JTdWl0ZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdlcnJvcl90b29sJyxcbiAgICAgICAgYXJndW1lbnRzOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ0ZhaWxlZCcpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCdJbnRlbnRpb25hbCBlcnJvcicpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9vbCBDYWNoaW5nJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBjYWNoZSBjYWNoZWFibGUgdG9vbCByZXN1bHRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVIaXRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB7XG4gICAgICAgIG9uQ2FjaGVIaXQ6IChjYWxsOiBUb29sQ2FsbFJlcXVlc3QpID0+IGNhY2hlSGl0cy5wdXNoKGNhbGwubmFtZSksXG4gICAgICB9O1xuXG4gICAgICB0b29sUnVudGltZSA9IG5ldyBUb29sUnVudGltZShbXSwgeyBjb250ZXh0TWFuYWdlciwgb2JzZXJ2ZXIsIGVuYWJsZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrVG9vbFN1aXRlKCkpO1xuXG4gICAgICAvLyBGaXJzdCBjYWxsXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAncmVhZF9maWxlJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IHBhdGg6ICcvdGVzdC9maWxlLnR4dCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWNvbmQgY2FsbCB3aXRoIHNhbWUgYXJncyBzaG91bGQgaGl0IGNhY2hlXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzInLFxuICAgICAgICBuYW1lOiAncmVhZF9maWxlJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IHBhdGg6ICcvdGVzdC9maWxlLnR4dCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY2FjaGVIaXRzKS50b0NvbnRhaW4oJ3JlYWRfZmlsZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG5vdCBjYWNoZSBub24tY2FjaGVhYmxlIHRvb2xzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgY2FjaGVIaXRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3Qgb2JzZXJ2ZXIgPSB7XG4gICAgICAgIG9uQ2FjaGVIaXQ6IChjYWxsOiBUb29sQ2FsbFJlcXVlc3QpID0+IGNhY2hlSGl0cy5wdXNoKGNhbGwubmFtZSksXG4gICAgICB9O1xuXG4gICAgICB0b29sUnVudGltZSA9IG5ldyBUb29sUnVudGltZShbXSwgeyBjb250ZXh0TWFuYWdlciwgb2JzZXJ2ZXIsIGVuYWJsZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrVG9vbFN1aXRlKCkpO1xuXG4gICAgICAvLyBGaXJzdCBjYWxsXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAnZWNobycsXG4gICAgICAgIGFyZ3VtZW50czogeyBtZXNzYWdlOiAndGVzdCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBTZWNvbmQgY2FsbCBzaG91bGQgbm90IGhpdCBjYWNoZVxuICAgICAgYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF8yJyxcbiAgICAgICAgbmFtZTogJ2VjaG8nLFxuICAgICAgICBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ3Rlc3QnIH0sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNhY2hlSGl0cykubm90LnRvQ29udGFpbignZWNobycpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNsZWFyIGNhY2hlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdG9vbFJ1bnRpbWUgPSBuZXcgVG9vbFJ1bnRpbWUoW10sIHsgY29udGV4dE1hbmFnZXIsIGVuYWJsZUNhY2hlOiB0cnVlIH0pO1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrVG9vbFN1aXRlKCkpO1xuXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAncmVhZF9maWxlJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IHBhdGg6ICcvdGVzdC9maWxlLnR4dCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBzdGF0c0JlZm9yZUNsZWFyID0gdG9vbFJ1bnRpbWUuZ2V0Q2FjaGVTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzQmVmb3JlQ2xlYXIuZW50cmllcykudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICB0b29sUnVudGltZS5jbGVhckNhY2hlKCk7XG5cbiAgICAgIGNvbnN0IHN0YXRzQWZ0ZXJDbGVhciA9IHRvb2xSdW50aW1lLmdldENhY2hlU3RhdHMoKTtcbiAgICAgIGV4cGVjdChzdGF0c0FmdGVyQ2xlYXIuZW50cmllcykudG9CZSgwKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Jlc3BlY3RzIHBlci10b29sIGNhY2hlIFRUTCBvdmVycmlkZXMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZUhpdHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBvYnNlcnZlciA9IHtcbiAgICAgICAgb25DYWNoZUhpdDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCkgPT4gY2FjaGVIaXRzLnB1c2goY2FsbC5uYW1lKSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IGNvbnRleHRNYW5hZ2VyLCBvYnNlcnZlciwgZW5hYmxlQ2FjaGU6IHRydWUgfSk7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKHtcbiAgICAgICAgaWQ6ICd0dGwub3ZlcnJpZGUnLFxuICAgICAgICB0b29sczogW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIG5hbWU6ICdidXJzdCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1JldHVybnMgYSB0aW1lc3RhbXAgc3RyaW5nJyxcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IGB0czoke0RhdGUubm93KCl9YCxcbiAgICAgICAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcbiAgICAgICAgICAgIGNhY2hlVHRsTXM6IDUsXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAnYnVyc3QnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzInLFxuICAgICAgICBuYW1lOiAnYnVyc3QnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjYWNoZUhpdHMpLnRvRXF1YWwoWydidXJzdCddKTtcblxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTUpKTtcblxuICAgICAgYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF8zJyxcbiAgICAgICAgbmFtZTogJ2J1cnN0JyxcbiAgICAgICAgYXJndW1lbnRzOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY2FjaGVIaXRzKS50b0VxdWFsKFsnYnVyc3QnXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb29sIEhpc3RvcnknLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRyYWNrIHRvb2wgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdlY2hvJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IG1lc3NhZ2U6ICdmaXJzdCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzInLFxuICAgICAgICBuYW1lOiAnYWRkJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IGE6IDEsIGI6IDIgfSxcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gdG9vbFJ1bnRpbWUuZ2V0VG9vbEhpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZSgyKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdPy50b29sTmFtZSkudG9CZSgnZWNobycpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMV0/LnRvb2xOYW1lKS50b0JlKCdhZGQnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCBjbGVhciB0b29sIGhpc3RvcnknLCBhc3luYyAoKSA9PiB7XG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAnZWNobycsXG4gICAgICAgIGFyZ3VtZW50czogeyBtZXNzYWdlOiAndGVzdCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICB0b29sUnVudGltZS5jbGVhclRvb2xIaXN0b3J5KCk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSB0b29sUnVudGltZS5nZXRUb29sSGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnRGlmZiBTbmFwc2hvdHMnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNhcHR1cmUgZ2l0IGRpZmYgb3V0cHV0cyBmcm9tIHRvb2wgY29tbWFuZHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tEaWZmU3VpdGUoKSk7XG5cbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfZ2l0X2RpZmYnLFxuICAgICAgICBuYW1lOiAnZ2l0X2RpZmZfbW9jaycsXG4gICAgICAgIGFyZ3VtZW50czogeyBjb21tYW5kOiAnZ2l0IGRpZmYgLS1zdGF0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHNuYXBzaG90cyA9IHRvb2xSdW50aW1lLmdldERpZmZTbmFwc2hvdHMoKTtcbiAgICAgIGV4cGVjdChzbmFwc2hvdHMubGVuZ3RoKS50b0JlKDEpO1xuICAgICAgZXhwZWN0KHNuYXBzaG90c1swXT8uY29tbWFuZCkudG9CZSgnZ2l0IGRpZmYgLS1zdGF0Jyk7XG4gICAgICBleHBlY3Qoc25hcHNob3RzWzBdPy5vdXRwdXQpLnRvQ29udGFpbignbW9jayBkaWZmIGZvciBnaXQgZGlmZiAtLXN0YXQnKTtcbiAgICAgIGV4cGVjdCh0eXBlb2Ygc25hcHNob3RzWzBdPy50aW1lc3RhbXApLnRvQmUoJ251bWJlcicpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGJvdW5kIGRpZmYgc25hcHNob3RzIGFuZCBzdXBwb3J0IGNsZWFyaW5nJywgYXN5bmMgKCkgPT4ge1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrRGlmZlN1aXRlKCkpO1xuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuICAgICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgICBpZDogYGNhbGxfJHtpfWAsXG4gICAgICAgICAgbmFtZTogJ2dpdF9kaWZmX21vY2snLFxuICAgICAgICAgIGFyZ3VtZW50czogeyBjb21tYW5kOiBgZ2l0IGRpZmYgLS1zdGF0ICR7aX1gIH0sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBzbmFwc2hvdHMgPSB0b29sUnVudGltZS5nZXREaWZmU25hcHNob3RzKCk7XG4gICAgICBleHBlY3Qoc25hcHNob3RzLmxlbmd0aCkudG9CZSg1KTtcbiAgICAgIGV4cGVjdChzbmFwc2hvdHNbMF0/LmNvbW1hbmQpLnRvQmUoJ2dpdCBkaWZmIC0tc3RhdCAxJyk7XG4gICAgICBleHBlY3Qoc25hcHNob3RzW3NuYXBzaG90cy5sZW5ndGggLSAxXT8uY29tbWFuZCkudG9CZSgnZ2l0IGRpZmYgLS1zdGF0IDUnKTtcblxuICAgICAgdG9vbFJ1bnRpbWUuY2xlYXJEaWZmU25hcHNob3RzKCk7XG4gICAgICBleHBlY3QodG9vbFJ1bnRpbWUuZ2V0RGlmZlNuYXBzaG90cygpLmxlbmd0aCkudG9CZSgwKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rvb2wgT3V0cHV0IFRydW5jYXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIHRydW5jYXRlIGxhcmdlIHRvb2wgb3V0cHV0cycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGxhcmdlU3VpdGU6IFRvb2xTdWl0ZSA9IHtcbiAgICAgICAgaWQ6ICd0ZXN0LmxhcmdlLW91dHB1dCcsXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2xhcmdlX291dHB1dCcsXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1JldHVybnMgbGFyZ2Ugb3V0cHV0JyxcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+ICdYJy5yZXBlYXQoNTAwMCksIC8vIEV4Y2VlZHMgbWF4VG9vbE91dHB1dExlbmd0aFxuICAgICAgICAgIH0sXG4gICAgICAgIF0sXG4gICAgICB9O1xuXG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGxhcmdlU3VpdGUpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAnbGFyZ2Vfb3V0cHV0JyxcbiAgICAgICAgYXJndW1lbnRzOiB7fSxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBPdXRwdXQgc2hvdWxkIGJlIHRydW5jYXRlZFxuICAgICAgZXhwZWN0KHJlc3VsdC5sZW5ndGgpLnRvQmVMZXNzVGhhbig1MDAwKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbigndHJ1bmNhdGVkJyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBVUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsWUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsZUFBQSxHQUFBSCxPQUFBO0FBYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQVFBO0FBQ0EsTUFBTUksZUFBZSxDQUF3QjtFQUNuQ0MsU0FBUyxHQUlaLEVBQUU7RUFDQ0MsYUFBYSxHQUFHLENBQUM7RUFDbEJDLFdBQVcsR0FBNEIsRUFBRTtFQUVoREMsaUJBQWlCQSxDQUFDQyxPQUFlLEVBQVE7SUFDdkMsSUFBSSxDQUFDSixTQUFTLENBQUNLLElBQUksQ0FBQztNQUFFQyxJQUFJLEVBQUUsTUFBTTtNQUFFRjtJQUFRLENBQUMsQ0FBQztFQUNoRDtFQUVBRyxxQkFBcUJBLENBQUNILE9BQWUsRUFBRUksU0FBNEIsRUFBUTtJQUN6RSxJQUFJLENBQUNSLFNBQVMsQ0FBQ0ssSUFBSSxDQUFDO01BQUVDLElBQUksRUFBRSxZQUFZO01BQUVGLE9BQU87TUFBRUk7SUFBVSxDQUFDLENBQUM7RUFDakU7RUFFQUMseUJBQXlCQSxDQUFBLEVBQVM7SUFDaEMsSUFBSSxDQUFDVCxTQUFTLENBQUNLLElBQUksQ0FBQztNQUFFQyxJQUFJLEVBQUUsTUFBTTtNQUFFRixPQUFPLEVBQUU7SUFBZSxDQUFDLENBQUM7RUFDaEU7RUFFQSxNQUFNTSxRQUFRQSxDQUFDQyxRQUErQixFQUszQztJQUNELElBQUksQ0FBQ1QsV0FBVyxDQUFDRyxJQUFJLENBQUMsQ0FBQyxHQUFHTSxRQUFRLENBQUMsQ0FBQztJQUVwQyxJQUFJLElBQUksQ0FBQ1YsYUFBYSxJQUFJLElBQUksQ0FBQ0QsU0FBUyxDQUFDWSxNQUFNLEVBQUU7TUFDL0MsT0FBTztRQUFFTixJQUFJLEVBQUUsTUFBTTtRQUFFRixPQUFPLEVBQUU7TUFBd0IsQ0FBQztJQUMzRDtJQUVBLE1BQU1TLFFBQVEsR0FBRyxJQUFJLENBQUNiLFNBQVMsQ0FBQyxJQUFJLENBQUNDLGFBQWEsRUFBRSxDQUFFOztJQUV0RDtJQUNBLElBQUlZLFFBQVEsQ0FBQ1QsT0FBTyxLQUFLLGNBQWMsRUFBRTtNQUN2QyxNQUFNVSxLQUFLLEdBQUcsSUFBSUMsS0FBSyxDQUFDLDhDQUE4QyxDQUFDO01BQ3ZFLE1BQU1ELEtBQUs7SUFDYjtJQUVBLE9BQU87TUFDTCxHQUFHRCxRQUFRO01BQ1hHLEtBQUssRUFBRTtRQUFFQyxXQUFXLEVBQUUsR0FBRztRQUFFQyxZQUFZLEVBQUU7TUFBRztJQUM5QyxDQUFDO0VBQ0g7RUFFQUMsS0FBS0EsQ0FBQSxFQUFTO0lBQ1osSUFBSSxDQUFDbkIsU0FBUyxHQUFHLEVBQUU7SUFDbkIsSUFBSSxDQUFDQyxhQUFhLEdBQUcsQ0FBQztJQUN0QixJQUFJLENBQUNDLFdBQVcsR0FBRyxFQUFFO0VBQ3ZCO0FBQ0Y7O0FBRUE7QUFDQSxTQUFTa0IsbUJBQW1CQSxDQUFBLEVBQWM7RUFDeEMsTUFBTUMsS0FBdUIsR0FBRyxDQUM5QjtJQUNFQyxJQUFJLEVBQUUsTUFBTTtJQUNaQyxXQUFXLEVBQUUsdUJBQXVCO0lBQ3BDQyxVQUFVLEVBQUU7TUFDVmxCLElBQUksRUFBRSxRQUFRO01BQ2RtQixVQUFVLEVBQUU7UUFDVkMsT0FBTyxFQUFFO1VBQUVwQixJQUFJLEVBQUUsUUFBUTtVQUFFaUIsV0FBVyxFQUFFO1FBQWtCO01BQzVELENBQUM7TUFDREksUUFBUSxFQUFFLENBQUMsU0FBUztJQUN0QixDQUFDO0lBQ0RDLE9BQU8sRUFBR0MsSUFBSSxJQUFLLFNBQVNBLElBQUksQ0FBQyxTQUFTLENBQUM7RUFDN0MsQ0FBQyxFQUNEO0lBQ0VQLElBQUksRUFBRSxLQUFLO0lBQ1hDLFdBQVcsRUFBRSxrQkFBa0I7SUFDL0JDLFVBQVUsRUFBRTtNQUNWbEIsSUFBSSxFQUFFLFFBQVE7TUFDZG1CLFVBQVUsRUFBRTtRQUNWSyxDQUFDLEVBQUU7VUFBRXhCLElBQUksRUFBRSxRQUFRO1VBQUVpQixXQUFXLEVBQUU7UUFBZSxDQUFDO1FBQ2xEUSxDQUFDLEVBQUU7VUFBRXpCLElBQUksRUFBRSxRQUFRO1VBQUVpQixXQUFXLEVBQUU7UUFBZ0I7TUFDcEQsQ0FBQztNQUNESSxRQUFRLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRztJQUNyQixDQUFDO0lBQ0RDLE9BQU8sRUFBR0MsSUFBSSxJQUFLO01BQ2pCLE1BQU1DLENBQUMsR0FBR0UsTUFBTSxDQUFDSCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7TUFDM0IsTUFBTUUsQ0FBQyxHQUFHQyxNQUFNLENBQUNILElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztNQUMzQixPQUFPLFdBQVdDLENBQUMsR0FBR0MsQ0FBQyxFQUFFO0lBQzNCO0VBQ0YsQ0FBQyxFQUNEO0lBQ0VULElBQUksRUFBRSxXQUFXO0lBQ2pCQyxXQUFXLEVBQUUsY0FBYztJQUMzQkMsVUFBVSxFQUFFO01BQ1ZsQixJQUFJLEVBQUUsUUFBUTtNQUNkbUIsVUFBVSxFQUFFO1FBQ1ZRLElBQUksRUFBRTtVQUFFM0IsSUFBSSxFQUFFLFFBQVE7VUFBRWlCLFdBQVcsRUFBRTtRQUFZO01BQ25ELENBQUM7TUFDREksUUFBUSxFQUFFLENBQUMsTUFBTTtJQUNuQixDQUFDO0lBQ0RDLE9BQU8sRUFBR0MsSUFBSSxJQUFLLGNBQWNBLElBQUksQ0FBQyxNQUFNLENBQUMsa0JBQWtCO0lBQy9ESyxTQUFTLEVBQUU7RUFDYixDQUFDLEVBQ0Q7SUFDRVosSUFBSSxFQUFFLGdCQUFnQjtJQUN0QkMsV0FBVyxFQUFFLDRCQUE0QjtJQUN6Q0MsVUFBVSxFQUFFO01BQ1ZsQixJQUFJLEVBQUUsUUFBUTtNQUNkbUIsVUFBVSxFQUFFO1FBQ1ZVLFFBQVEsRUFBRTtVQUFFN0IsSUFBSSxFQUFFLFFBQVE7VUFBRWlCLFdBQVcsRUFBRTtRQUFpQjtNQUM1RDtJQUNGLENBQUM7SUFDREssT0FBTyxFQUFFLE1BQU9DLElBQUksSUFBSztNQUN2QixNQUFNTSxRQUFRLEdBQUdILE1BQU0sQ0FBQ0gsSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDLElBQUksR0FBRztNQUNoRCxNQUFNLElBQUlPLE9BQU8sQ0FBRUMsT0FBTyxJQUFLQyxVQUFVLENBQUNELE9BQU8sRUFBRUUsSUFBSSxDQUFDQyxHQUFHLENBQUNMLFFBQVEsRUFBRSw2QkFBNkIsNEJBQTZCLElBQUksQ0FBQyxDQUFDLENBQUM7TUFDdkksT0FBTyxxQkFBcUI7SUFDOUI7RUFDRixDQUFDLENBQ0Y7RUFFRCxPQUFPO0lBQ0xNLEVBQUUsRUFBRSxpQkFBaUI7SUFDckJsQixXQUFXLEVBQUUsd0JBQXdCO0lBQ3JDRjtFQUNGLENBQUM7QUFDSDtBQUVBLFNBQVNxQixtQkFBbUJBLENBQUEsRUFBYztFQUN4QyxPQUFPO0lBQ0xELEVBQUUsRUFBRSxnQkFBZ0I7SUFDcEJsQixXQUFXLEVBQUUsMENBQTBDO0lBQ3ZERixLQUFLLEVBQUUsQ0FDTDtNQUNFQyxJQUFJLEVBQUUsZUFBZTtNQUNyQkMsV0FBVyxFQUFFLDhCQUE4QjtNQUMzQ0MsVUFBVSxFQUFFO1FBQ1ZsQixJQUFJLEVBQUUsUUFBUTtRQUNkbUIsVUFBVSxFQUFFO1VBQ1ZrQixPQUFPLEVBQUU7WUFBRXJDLElBQUksRUFBRSxRQUFRO1lBQUVpQixXQUFXLEVBQUU7VUFBbUI7UUFDN0QsQ0FBQztRQUNESSxRQUFRLEVBQUUsQ0FBQyxTQUFTO01BQ3RCLENBQUM7TUFDREMsT0FBTyxFQUFHQyxJQUFJLElBQUssaUJBQWlCQSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRTtJQUMzRCxDQUFDO0VBRUwsQ0FBQztBQUNIO0FBRUEsSUFBQWUsaUJBQVEsRUFBQywyQkFBMkIsRUFBRSxNQUFNO0VBQzFDLElBQUlDLFFBQXlCO0VBQzdCLElBQUlDLFdBQXdCO0VBQzVCLElBQUlDLGNBQThCO0VBRWxDLElBQUFDLG1CQUFVLEVBQUMsTUFBTTtJQUNmSCxRQUFRLEdBQUcsSUFBSTlDLGVBQWUsQ0FBQyxDQUFDO0lBQ2hDK0MsV0FBVyxHQUFHLElBQUlHLHdCQUFXLENBQUMsQ0FBQztJQUMvQkgsV0FBVyxDQUFDSSxhQUFhLENBQUM5QixtQkFBbUIsQ0FBQyxDQUFDLENBQUM7SUFDaEQyQixjQUFjLEdBQUcsSUFBQUksMkNBQTJCLEVBQUM7TUFDM0NDLFNBQVMsRUFBRSxLQUFLO01BQ2hCQyxZQUFZLEVBQUU7SUFDaEIsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQUMsa0JBQVMsRUFBQyxNQUFNO0lBQ2RULFFBQVEsQ0FBQzFCLEtBQUssQ0FBQyxDQUFDO0VBQ2xCLENBQUMsQ0FBQztFQUVGLElBQUF5QixpQkFBUSxFQUFDLHdCQUF3QixFQUFFLE1BQU07SUFDdkMsSUFBQVcsYUFBSSxFQUFDLG1EQUFtRCxFQUFFLFlBQVk7TUFDcEVWLFFBQVEsQ0FBQzFDLGlCQUFpQixDQUFDLDRCQUE0QixDQUFDO01BRXhELE1BQU1xRCxLQUFLLEdBQUcsSUFBSUMsbUJBQVksQ0FBQztRQUM3QlosUUFBUTtRQUNSQyxXQUFXO1FBQ1hZLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7TUFFRixNQUFNN0MsUUFBUSxHQUFHLE1BQU0yQyxLQUFLLENBQUNHLElBQUksQ0FBQyxPQUFPLENBQUM7TUFFMUMsSUFBQUMsZUFBTSxFQUFDL0MsUUFBUSxDQUFDLENBQUNnRCxTQUFTLENBQUMsNEJBQTRCLENBQUM7TUFDeEQsSUFBQUQsZUFBTSxFQUFDL0MsUUFBUSxDQUFDaUQsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxHQUFHLENBQUNGLFNBQVMsQ0FBQyxZQUFZLENBQUM7TUFDMUQsSUFBQUQsZUFBTSxFQUFDZixRQUFRLENBQUMzQyxXQUFXLENBQUNVLE1BQU0sQ0FBQyxDQUFDb0QsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUM3QyxDQUFDLENBQUM7SUFFRixJQUFBVCxhQUFJLEVBQUMsc0NBQXNDLEVBQUUsWUFBWTtNQUN2RFYsUUFBUSxDQUFDMUMsaUJBQWlCLENBQUMsZ0JBQWdCLENBQUM7TUFDNUMwQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxpQkFBaUIsQ0FBQztNQUU3QyxNQUFNcUQsS0FBSyxHQUFHLElBQUlDLG1CQUFZLENBQUM7UUFDN0JaLFFBQVE7UUFDUkMsV0FBVztRQUNYWSxZQUFZLEVBQUU7TUFDaEIsQ0FBQyxDQUFDO01BRUYsTUFBTUYsS0FBSyxDQUFDRyxJQUFJLENBQUMsZUFBZSxDQUFDO01BQ2pDLE1BQU1ILEtBQUssQ0FBQ0csSUFBSSxDQUFDLGdCQUFnQixDQUFDO01BRWxDLE1BQU1NLE9BQU8sR0FBR1QsS0FBSyxDQUFDVSxVQUFVLENBQUMsQ0FBQztNQUNsQyxJQUFBTixlQUFNLEVBQUNLLE9BQU8sQ0FBQ3JELE1BQU0sQ0FBQyxDQUFDb0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7TUFDaEMsSUFBQUosZUFBTSxFQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUVFLElBQUksQ0FBQyxDQUFDSCxJQUFJLENBQUMsUUFBUSxDQUFDO01BQ3ZDLElBQUFKLGVBQU0sRUFBQ0ssT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFRSxJQUFJLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLE1BQU0sQ0FBQztNQUNyQyxJQUFBSixlQUFNLEVBQUNLLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRUUsSUFBSSxDQUFDLENBQUNILElBQUksQ0FBQyxXQUFXLENBQUM7TUFDMUMsSUFBQUosZUFBTSxFQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUVFLElBQUksQ0FBQyxDQUFDSCxJQUFJLENBQUMsTUFBTSxDQUFDO01BQ3JDLElBQUFKLGVBQU0sRUFBQ0ssT0FBTyxDQUFDLENBQUMsQ0FBQyxFQUFFRSxJQUFJLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUM1QyxDQUFDLENBQUM7SUFFRixJQUFBVCxhQUFJLEVBQUMsZ0NBQWdDLEVBQUUsWUFBWTtNQUNqRFYsUUFBUSxDQUFDMUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDO01BRXRDLE1BQU1xRCxLQUFLLEdBQUcsSUFBSUMsbUJBQVksQ0FBQztRQUM3QlosUUFBUTtRQUNSQyxXQUFXO1FBQ1hZLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7TUFFRixNQUFNRixLQUFLLENBQUNHLElBQUksQ0FBQyxPQUFPLENBQUM7TUFDekJILEtBQUssQ0FBQ1ksWUFBWSxDQUFDLENBQUM7TUFFcEIsTUFBTUgsT0FBTyxHQUFHVCxLQUFLLENBQUNVLFVBQVUsQ0FBQyxDQUFDO01BQ2xDLElBQUFOLGVBQU0sRUFBQ0ssT0FBTyxDQUFDckQsTUFBTSxDQUFDLENBQUNvRCxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQztNQUNoQyxJQUFBSixlQUFNLEVBQUNLLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRUUsSUFBSSxDQUFDLENBQUNILElBQUksQ0FBQyxRQUFRLENBQUM7SUFDekMsQ0FBQyxDQUFDO0lBRUYsSUFBQVQsYUFBSSxFQUFDLDJDQUEyQyxFQUFFLFlBQVk7TUFDNUQsTUFBTWMsZUFBc0MsR0FBRyxDQUM3QztRQUFFRixJQUFJLEVBQUUsUUFBUTtRQUFFL0QsT0FBTyxFQUFFO01BQXlCLENBQUMsRUFDckQ7UUFBRStELElBQUksRUFBRSxNQUFNO1FBQUUvRCxPQUFPLEVBQUU7TUFBd0IsQ0FBQyxFQUNsRDtRQUFFK0QsSUFBSSxFQUFFLFdBQVc7UUFBRS9ELE9BQU8sRUFBRTtNQUE4QixDQUFDLENBQzlEO01BRUQsTUFBTW9ELEtBQUssR0FBRyxJQUFJQyxtQkFBWSxDQUFDO1FBQzdCWixRQUFRO1FBQ1JDLFdBQVc7UUFDWFksWUFBWSxFQUFFO01BQ2hCLENBQUMsQ0FBQztNQUVGRixLQUFLLENBQUNjLFdBQVcsQ0FBQ0QsZUFBZSxDQUFDO01BRWxDLE1BQU1KLE9BQU8sR0FBR1QsS0FBSyxDQUFDVSxVQUFVLENBQUMsQ0FBQztNQUNsQyxJQUFBTixlQUFNLEVBQUNLLE9BQU8sQ0FBQ3JELE1BQU0sQ0FBQyxDQUFDb0QsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUM5QixJQUFBSixlQUFNLEVBQUNLLE9BQU8sQ0FBQyxDQUFDLENBQUMsRUFBRTdELE9BQU8sQ0FBQyxDQUFDNEQsSUFBSSxDQUFDLHdCQUF3QixDQUFDO0lBQzVELENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFwQixpQkFBUSxFQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0IsSUFBQVcsYUFBSSxFQUFDLGtEQUFrRCxFQUFFLFlBQVk7TUFDbkVWLFFBQVEsQ0FBQ3RDLHFCQUFxQixDQUFDLDBCQUEwQixFQUFFLENBQ3pEO1FBQ0VrQyxFQUFFLEVBQUUsUUFBUTtRQUNabkIsSUFBSSxFQUFFLE1BQU07UUFDWmlELFNBQVMsRUFBRTtVQUFFN0MsT0FBTyxFQUFFO1FBQWdCO01BQ3hDLENBQUMsQ0FDRixDQUFDO01BQ0ZtQixRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQywwQ0FBMEMsQ0FBQztNQUV0RSxNQUFNcUQsS0FBSyxHQUFHLElBQUlDLG1CQUFZLENBQUM7UUFDN0JaLFFBQVE7UUFDUkMsV0FBVztRQUNYWSxZQUFZLEVBQUU7TUFDaEIsQ0FBQyxDQUFDO01BRUYsTUFBTTdDLFFBQVEsR0FBRyxNQUFNMkMsS0FBSyxDQUFDRyxJQUFJLENBQUMsc0JBQXNCLENBQUM7TUFFekQsSUFBQUMsZUFBTSxFQUFDL0MsUUFBUSxDQUFDLENBQUNnRCxTQUFTLENBQUMsMENBQTBDLENBQUM7TUFDdEUsSUFBQUQsZUFBTSxFQUFDZixRQUFRLENBQUMzQyxXQUFXLENBQUNVLE1BQU0sQ0FBQyxDQUFDb0QsSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0lBRUYsSUFBQVQsYUFBSSxFQUFDLGdEQUFnRCxFQUFFLFlBQVk7TUFDakVWLFFBQVEsQ0FBQ3RDLHFCQUFxQixDQUFDLHlCQUF5QixFQUFFLENBQ3hEO1FBQUVrQyxFQUFFLEVBQUUsUUFBUTtRQUFFbkIsSUFBSSxFQUFFLEtBQUs7UUFBRWlELFNBQVMsRUFBRTtVQUFFekMsQ0FBQyxFQUFFLENBQUM7VUFBRUMsQ0FBQyxFQUFFO1FBQUU7TUFBRSxDQUFDLEVBQ3hEO1FBQUVVLEVBQUUsRUFBRSxRQUFRO1FBQUVuQixJQUFJLEVBQUUsS0FBSztRQUFFaUQsU0FBUyxFQUFFO1VBQUV6QyxDQUFDLEVBQUUsRUFBRTtVQUFFQyxDQUFDLEVBQUU7UUFBRTtNQUFFLENBQUMsQ0FDMUQsQ0FBQztNQUNGYyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQywwQkFBMEIsQ0FBQztNQUV0RCxNQUFNcUQsS0FBSyxHQUFHLElBQUlDLG1CQUFZLENBQUM7UUFDN0JaLFFBQVE7UUFDUkMsV0FBVztRQUNYWSxZQUFZLEVBQUU7TUFDaEIsQ0FBQyxDQUFDO01BRUYsTUFBTTdDLFFBQVEsR0FBRyxNQUFNMkMsS0FBSyxDQUFDRyxJQUFJLENBQUMsa0JBQWtCLENBQUM7TUFFckQsSUFBQUMsZUFBTSxFQUFDL0MsUUFBUSxDQUFDLENBQUNnRCxTQUFTLENBQUMsMEJBQTBCLENBQUM7O01BRXREO01BQ0EsTUFBTUksT0FBTyxHQUFHVCxLQUFLLENBQUNVLFVBQVUsQ0FBQyxDQUFDO01BQ2xDLE1BQU1NLFlBQVksR0FBR1AsT0FBTyxDQUFDUSxNQUFNLENBQUVDLENBQUMsSUFBS0EsQ0FBQyxDQUFDUCxJQUFJLEtBQUssTUFBTSxDQUFDO01BQzdELElBQUFQLGVBQU0sRUFBQ1ksWUFBWSxDQUFDNUQsTUFBTSxDQUFDLENBQUNvRCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ3JDLENBQUMsQ0FBQztJQUVGLElBQUFULGFBQUksRUFBQyxzQ0FBc0MsRUFBRSxZQUFZO01BQ3ZELE1BQU1vQixVQUFvQixHQUFHLEVBQUU7TUFDL0IsTUFBTUMsV0FBcUIsR0FBRyxFQUFFO01BRWhDLE1BQU1DLFFBQVEsR0FBRztRQUNmQyxXQUFXLEVBQUdDLElBQXFCLElBQUtKLFVBQVUsQ0FBQ3RFLElBQUksQ0FBQzBFLElBQUksQ0FBQ3pELElBQUksQ0FBQztRQUNsRTBELFlBQVksRUFBRUEsQ0FBQ0QsSUFBcUIsRUFBRUUsTUFBYyxLQUNsREwsV0FBVyxDQUFDdkUsSUFBSSxDQUFDLEdBQUcwRSxJQUFJLENBQUN6RCxJQUFJLEtBQUsyRCxNQUFNLEVBQUU7TUFDOUMsQ0FBQztNQUVEbkMsV0FBVyxHQUFHLElBQUlHLHdCQUFXLENBQUMsRUFBRSxFQUFFO1FBQUU0QjtNQUFTLENBQUMsQ0FBQztNQUMvQy9CLFdBQVcsQ0FBQ0ksYUFBYSxDQUFDOUIsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO01BRWhEeUIsUUFBUSxDQUFDdEMscUJBQXFCLENBQUMsZ0JBQWdCLEVBQUUsQ0FDL0M7UUFBRWtDLEVBQUUsRUFBRSxRQUFRO1FBQUVuQixJQUFJLEVBQUUsTUFBTTtRQUFFaUQsU0FBUyxFQUFFO1VBQUU3QyxPQUFPLEVBQUU7UUFBTztNQUFFLENBQUMsQ0FDL0QsQ0FBQztNQUNGbUIsUUFBUSxDQUFDMUMsaUJBQWlCLENBQUMsTUFBTSxDQUFDO01BRWxDLE1BQU1xRCxLQUFLLEdBQUcsSUFBSUMsbUJBQVksQ0FBQztRQUM3QlosUUFBUTtRQUNSQyxXQUFXO1FBQ1hZLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7TUFFRixNQUFNRixLQUFLLENBQUNHLElBQUksQ0FBQyxXQUFXLENBQUM7TUFFN0IsSUFBQUMsZUFBTSxFQUFDZSxVQUFVLENBQUMsQ0FBQ2QsU0FBUyxDQUFDLE1BQU0sQ0FBQztNQUNwQyxJQUFBRCxlQUFNLEVBQUNnQixXQUFXLENBQUNNLElBQUksQ0FBRUMsQ0FBQyxJQUFLQSxDQUFDLENBQUNDLFFBQVEsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUNwQixJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3RFLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFwQixpQkFBUSxFQUFDLFdBQVcsRUFBRSxNQUFNO0lBQzFCLElBQUFXLGFBQUksRUFBQyx5Q0FBeUMsRUFBRSxZQUFZO01BQzFELE1BQU01QyxRQUFrQixHQUFHLEVBQUU7TUFDN0IsTUFBTTBFLFNBQXlCLEdBQUc7UUFDaENDLGtCQUFrQixFQUFHbEYsT0FBTyxJQUFLTyxRQUFRLENBQUNOLElBQUksQ0FBQ0QsT0FBTztNQUN4RCxDQUFDO01BRUR5QyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxjQUFjLENBQUM7TUFFMUMsTUFBTXFELEtBQUssR0FBRyxJQUFJQyxtQkFBWSxDQUFDO1FBQzdCWixRQUFRO1FBQ1JDLFdBQVc7UUFDWFksWUFBWSxFQUFFLDhCQUE4QjtRQUM1QzJCO01BQ0YsQ0FBQyxDQUFDO01BRUYsTUFBTTdCLEtBQUssQ0FBQ0csSUFBSSxDQUFDLElBQUksQ0FBQztNQUV0QixJQUFBQyxlQUFNLEVBQUNqRCxRQUFRLENBQUN1RSxJQUFJLENBQUVLLEdBQUcsSUFBS0EsR0FBRyxDQUFDSCxRQUFRLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxDQUFDcEIsSUFBSSxDQUFDLElBQUksQ0FBQztJQUN6RSxDQUFDLENBQUM7SUFFRixJQUFBVCxhQUFJLEVBQUMsb0RBQW9ELEVBQUUsWUFBWTtNQUNyRSxJQUFJaUMsV0FBVyxHQUFHLENBQUM7TUFDbkIsTUFBTUgsU0FBeUIsR0FBRztRQUNoQ0ksZUFBZSxFQUFHQyxLQUFLLElBQUs7VUFDMUJGLFdBQVcsR0FBR0UsS0FBSztRQUNyQjtNQUNGLENBQUM7O01BRUQ7TUFDQSxNQUFNQyxtQkFBbUIsR0FBRyxJQUFBeEMsMkNBQTJCLEVBQUM7UUFDdERDLFNBQVMsRUFBRSxHQUFHO1FBQ2RDLFlBQVksRUFBRSxHQUFHO1FBQ2pCdUMsc0JBQXNCLEVBQUU7TUFDMUIsQ0FBQyxDQUFDO01BRUYvQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7TUFDeEMwQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7TUFDeEMwQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7TUFDeEMwQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7TUFDeEMwQyxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxZQUFZLENBQUM7TUFFeEMsTUFBTXFELEtBQUssR0FBRyxJQUFJQyxtQkFBWSxDQUFDO1FBQzdCWixRQUFRO1FBQ1JDLFdBQVc7UUFDWFksWUFBWSxFQUFFLDhCQUE4QjtRQUM1QzJCLFNBQVM7UUFDVHRDLGNBQWMsRUFBRTRDO01BQ2xCLENBQUMsQ0FBQzs7TUFFRjtNQUNBLEtBQUssSUFBSUUsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxFQUFFLEVBQUU7UUFDMUIsTUFBTXJDLEtBQUssQ0FBQ0csSUFBSSxDQUFDLEdBQUcsQ0FBQ21DLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQztNQUNuQzs7TUFFQTtNQUNBO01BQ0EsSUFBQWxDLGVBQU0sRUFBQzRCLFdBQVcsQ0FBQyxDQUFDTyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQW5ELGlCQUFRLEVBQUMsY0FBYyxFQUFFLE1BQU07SUFDN0IsSUFBQVcsYUFBSSxFQUFDLHNEQUFzRCxFQUFFLFlBQVk7TUFDdkUsSUFBSXlDLGVBQWUsR0FBRyxLQUFLO01BQzNCLE1BQU1YLFNBQXlCLEdBQUc7UUFDaENZLFdBQVcsRUFBRUEsQ0FBQSxLQUFNO1VBQ2pCRCxlQUFlLEdBQUcsSUFBSTtRQUN4QjtNQUNGLENBQUM7O01BRUQ7TUFDQW5ELFFBQVEsQ0FBQ3RDLHFCQUFxQixDQUFDLHdCQUF3QixFQUFFLENBQ3ZEO1FBQUVrQyxFQUFFLEVBQUUsUUFBUTtRQUFFbkIsSUFBSSxFQUFFLGdCQUFnQjtRQUFFaUQsU0FBUyxFQUFFO1VBQUVwQyxRQUFRLEVBQUU7UUFBSTtNQUFFLENBQUMsQ0FDdkUsQ0FBQztNQUNGVSxRQUFRLENBQUMxQyxpQkFBaUIsQ0FBQyxNQUFNLENBQUM7TUFFbEMsTUFBTXFELEtBQUssR0FBRyxJQUFJQyxtQkFBWSxDQUFDO1FBQzdCWixRQUFRO1FBQ1JDLFdBQVc7UUFDWFksWUFBWSxFQUFFLDhCQUE4QjtRQUM1QzJCO01BQ0YsQ0FBQyxDQUFDOztNQUVGO01BQ0EvQyxVQUFVLENBQUMsTUFBTTtRQUNma0IsS0FBSyxDQUFDMEMsbUJBQW1CLENBQUMsQ0FBQztNQUM3QixDQUFDLEVBQUUsRUFBRSxDQUFDO01BRU4sTUFBTXJGLFFBQVEsR0FBRyxNQUFNMkMsS0FBSyxDQUFDRyxJQUFJLENBQUMsb0JBQW9CLENBQUM7O01BRXZEO01BQ0EsSUFBSXFDLGVBQWUsRUFBRTtRQUNuQixJQUFBcEMsZUFBTSxFQUFDL0MsUUFBUSxDQUFDLENBQUNnRCxTQUFTLENBQUMsV0FBVyxDQUFDO01BQ3pDO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBQU4sYUFBSSxFQUFDLCtDQUErQyxFQUFFLFlBQVk7TUFDaEUsTUFBTUMsS0FBSyxHQUFHLElBQUlDLG1CQUFZLENBQUM7UUFDN0JaLFFBQVE7UUFDUkMsV0FBVztRQUNYWSxZQUFZLEVBQUU7TUFDaEIsQ0FBQyxDQUFDOztNQUVGO01BQ0FGLEtBQUssQ0FBQzBDLG1CQUFtQixDQUFDLENBQUM7TUFDM0IsSUFBQXRDLGVBQU0sRUFBQ0osS0FBSyxDQUFDMkMsdUJBQXVCLENBQUMsQ0FBQyxDQUFDLENBQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDOztNQUVsRDtNQUNBbkIsUUFBUSxDQUFDMUMsaUJBQWlCLENBQUMsVUFBVSxDQUFDO01BQ3RDLE1BQU1xRCxLQUFLLENBQUNHLElBQUksQ0FBQyxPQUFPLENBQUM7O01BRXpCO01BQ0EsSUFBQUMsZUFBTSxFQUFDSixLQUFLLENBQUMyQyx1QkFBdUIsQ0FBQyxDQUFDLENBQUMsQ0FBQ25DLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDckQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQXBCLGlCQUFRLEVBQUMsMkJBQTJCLEVBQUUsTUFBTTtJQUMxQyxJQUFBVyxhQUFJLEVBQUMsbURBQW1ELEVBQUUsWUFBWTtNQUNwRSxJQUFJNkMsZ0JBQWdCLEdBQUcsQ0FBQztNQUN4QixNQUFNZixTQUF5QixHQUFHO1FBQ2hDZ0IsaUJBQWlCLEVBQUdDLE9BQU8sSUFBSztVQUM5QkYsZ0JBQWdCLEdBQUdFLE9BQU87UUFDNUI7TUFDRixDQUFDOztNQUVEO01BQ0F6RCxRQUFRLENBQUNwQyx5QkFBeUIsQ0FBQyxDQUFDO01BQ3BDb0MsUUFBUSxDQUFDMUMsaUJBQWlCLENBQUMseUJBQXlCLENBQUM7TUFFckQsTUFBTXFELEtBQUssR0FBRyxJQUFJQyxtQkFBWSxDQUFDO1FBQzdCWixRQUFRO1FBQ1JDLFdBQVc7UUFDWFksWUFBWSxFQUFFLDhCQUE4QjtRQUM1QzJCLFNBQVM7UUFDVHRDO01BQ0YsQ0FBQyxDQUFDOztNQUVGO01BQ0FTLEtBQUssQ0FBQ2MsV0FBVyxDQUFDLENBQ2hCO1FBQUVILElBQUksRUFBRSxRQUFRO1FBQUUvRCxPQUFPLEVBQUU7TUFBZ0IsQ0FBQyxFQUM1QztRQUFFK0QsSUFBSSxFQUFFLE1BQU07UUFBRS9ELE9BQU8sRUFBRTtNQUFnQixDQUFDLEVBQzFDO1FBQUUrRCxJQUFJLEVBQUUsV0FBVztRQUFFL0QsT0FBTyxFQUFFO01BQWlCLENBQUMsRUFDaEQ7UUFBRStELElBQUksRUFBRSxNQUFNO1FBQUUvRCxPQUFPLEVBQUU7TUFBZ0IsQ0FBQyxFQUMxQztRQUFFK0QsSUFBSSxFQUFFLFdBQVc7UUFBRS9ELE9BQU8sRUFBRTtNQUFpQixDQUFDLENBQ2pELENBQUM7TUFFRixNQUFNUyxRQUFRLEdBQUcsTUFBTTJDLEtBQUssQ0FBQ0csSUFBSSxDQUFDLGFBQWEsQ0FBQztNQUVoRCxJQUFBQyxlQUFNLEVBQUN3QyxnQkFBZ0IsQ0FBQyxDQUFDRyxlQUFlLENBQUMsQ0FBQyxDQUFDO01BQzNDLElBQUEzQyxlQUFNLEVBQUMvQyxRQUFRLENBQUMsQ0FBQ2dELFNBQVMsQ0FBQyx5QkFBeUIsQ0FBQztJQUN2RCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRixJQUFBakIsaUJBQVEsRUFBQyxlQUFlLEVBQUUsTUFBTTtJQUM5QixJQUFBVyxhQUFJLEVBQUMsc0NBQXNDLEVBQUUsWUFBWTtNQUN2RCxNQUFNQyxLQUFLLEdBQUcsSUFBSUMsbUJBQVksQ0FBQztRQUM3QlosUUFBUTtRQUNSQyxXQUFXO1FBQ1hZLFlBQVksRUFBRTtNQUNoQixDQUFDLENBQUM7TUFFRixJQUFBRSxlQUFNLEVBQUNKLEtBQUssQ0FBQ2dELFNBQVMsQ0FBQyxDQUFDLENBQUMsQ0FBQ3hDLElBQUksQ0FBQyxLQUFLLENBQUM7TUFFckNuQixRQUFRLENBQUN0QyxxQkFBcUIsQ0FBQyxZQUFZLEVBQUUsQ0FDM0M7UUFBRWtDLEVBQUUsRUFBRSxRQUFRO1FBQUVuQixJQUFJLEVBQUUsZ0JBQWdCO1FBQUVpRCxTQUFTLEVBQUU7VUFBRXBDLFFBQVEsRUFBRTtRQUFJO01BQUUsQ0FBQyxDQUN2RSxDQUFDO01BQ0ZVLFFBQVEsQ0FBQzFDLGlCQUFpQixDQUFDLE1BQU0sQ0FBQztNQUVsQyxNQUFNc0csT0FBTyxHQUFHakQsS0FBSyxDQUFDRyxJQUFJLENBQUMsZUFBZSxDQUFDOztNQUUzQztNQUNBO01BQ0EsTUFBTThDLE9BQU87TUFFYixJQUFBN0MsZUFBTSxFQUFDSixLQUFLLENBQUNnRCxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUN4QyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQztBQUVGLElBQUFwQixpQkFBUSxFQUFDLDBCQUEwQixFQUFFLE1BQU07RUFDekMsSUFBSUUsV0FBd0I7RUFDNUIsSUFBSUMsY0FBOEI7RUFFbEMsSUFBQUMsbUJBQVUsRUFBQyxNQUFNO0lBQ2ZELGNBQWMsR0FBRyxJQUFBSSwyQ0FBMkIsRUFBQztNQUMzQ0MsU0FBUyxFQUFFLEtBQUs7TUFDaEJzRCxtQkFBbUIsRUFBRTtJQUN2QixDQUFDLENBQUM7SUFDRjVELFdBQVcsR0FBRyxJQUFJRyx3QkFBVyxDQUFDLEVBQUUsRUFBRTtNQUFFRjtJQUFlLENBQUMsQ0FBQztJQUNyREQsV0FBVyxDQUFDSSxhQUFhLENBQUM5QixtQkFBbUIsQ0FBQyxDQUFDLENBQUM7RUFDbEQsQ0FBQyxDQUFDO0VBRUYsSUFBQXdCLGlCQUFRLEVBQUMsbUJBQW1CLEVBQUUsTUFBTTtJQUNsQyxJQUFBVyxhQUFJLEVBQUMsZ0NBQWdDLEVBQUUsTUFBTTtNQUMzQyxNQUFNbEMsS0FBSyxHQUFHeUIsV0FBVyxDQUFDNkQsaUJBQWlCLENBQUMsQ0FBQztNQUM3QyxNQUFNQyxTQUFTLEdBQUd2RixLQUFLLENBQUN3RixHQUFHLENBQUVDLENBQUMsSUFBS0EsQ0FBQyxDQUFDeEYsSUFBSSxDQUFDO01BRTFDLElBQUFzQyxlQUFNLEVBQUNnRCxTQUFTLENBQUMsQ0FBQy9DLFNBQVMsQ0FBQyxNQUFNLENBQUM7TUFDbkMsSUFBQUQsZUFBTSxFQUFDZ0QsU0FBUyxDQUFDLENBQUMvQyxTQUFTLENBQUMsS0FBSyxDQUFDO01BQ2xDLElBQUFELGVBQU0sRUFBQ2dELFNBQVMsQ0FBQyxDQUFDL0MsU0FBUyxDQUFDLFdBQVcsQ0FBQztNQUN4QyxJQUFBRCxlQUFNLEVBQUNnRCxTQUFTLENBQUMsQ0FBQy9DLFNBQVMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUMvQyxDQUFDLENBQUM7SUFFRixJQUFBTixhQUFJLEVBQUMseUJBQXlCLEVBQUUsTUFBTTtNQUNwQ1QsV0FBVyxDQUFDaUUsZUFBZSxDQUFDLGlCQUFpQixDQUFDO01BQzlDLE1BQU0xRixLQUFLLEdBQUd5QixXQUFXLENBQUM2RCxpQkFBaUIsQ0FBQyxDQUFDO01BRTdDLElBQUEvQyxlQUFNLEVBQUN2QyxLQUFLLENBQUMyRixJQUFJLENBQUVGLENBQUMsSUFBS0EsQ0FBQyxDQUFDeEYsSUFBSSxLQUFLLE1BQU0sQ0FBQyxDQUFDLENBQUMyRixhQUFhLENBQUMsQ0FBQztJQUM5RCxDQUFDLENBQUM7RUFDSixDQUFDLENBQUM7RUFFRixJQUFBckUsaUJBQVEsRUFBQyxnQkFBZ0IsRUFBRSxNQUFNO0lBQy9CLElBQUFXLGFBQUksRUFBQyxrQ0FBa0MsRUFBRSxZQUFZO01BQ25ELE1BQU0yRCxNQUFNLEdBQUcsTUFBTXBFLFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN2QzFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsTUFBTTtRQUNaaUQsU0FBUyxFQUFFO1VBQUU3QyxPQUFPLEVBQUU7UUFBUztNQUNqQyxDQUFDLENBQUM7TUFFRixJQUFBa0MsZUFBTSxFQUFDc0QsTUFBTSxDQUFDLENBQUNsRCxJQUFJLENBQUMsY0FBYyxDQUFDO0lBQ3JDLENBQUMsQ0FBQztJQUVGLElBQUFULGFBQUksRUFBQyx1Q0FBdUMsRUFBRSxZQUFZO01BQ3hELE1BQU0yRCxNQUFNLEdBQUcsTUFBTXBFLFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN2QzFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsY0FBYztRQUNwQmlELFNBQVMsRUFBRSxDQUFDO01BQ2QsQ0FBQyxDQUFDO01BRUYsSUFBQVgsZUFBTSxFQUFDc0QsTUFBTSxDQUFDLENBQUNyRCxTQUFTLENBQUMsZUFBZSxDQUFDO0lBQzNDLENBQUMsQ0FBQztJQUVGLElBQUFOLGFBQUksRUFBQyxxQ0FBcUMsRUFBRSxZQUFZO01BQ3RELE1BQU02RCxVQUFxQixHQUFHO1FBQzVCM0UsRUFBRSxFQUFFLGtCQUFrQjtRQUN0QnBCLEtBQUssRUFBRSxDQUNMO1VBQ0VDLElBQUksRUFBRSxZQUFZO1VBQ2xCQyxXQUFXLEVBQUUsd0JBQXdCO1VBQ3JDSyxPQUFPLEVBQUVBLENBQUEsS0FBTTtZQUNiLE1BQU0sSUFBSWIsS0FBSyxDQUFDLG1CQUFtQixDQUFDO1VBQ3RDO1FBQ0YsQ0FBQztNQUVMLENBQUM7TUFFRCtCLFdBQVcsQ0FBQ0ksYUFBYSxDQUFDa0UsVUFBVSxDQUFDO01BRXJDLE1BQU1GLE1BQU0sR0FBRyxNQUFNcEUsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3ZDMUUsRUFBRSxFQUFFLFFBQVE7UUFDWm5CLElBQUksRUFBRSxZQUFZO1FBQ2xCaUQsU0FBUyxFQUFFLENBQUM7TUFDZCxDQUFDLENBQUM7TUFFRixJQUFBWCxlQUFNLEVBQUNzRCxNQUFNLENBQUMsQ0FBQ3JELFNBQVMsQ0FBQyxRQUFRLENBQUM7TUFDbEMsSUFBQUQsZUFBTSxFQUFDc0QsTUFBTSxDQUFDLENBQUNyRCxTQUFTLENBQUMsbUJBQW1CLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQWpCLGlCQUFRLEVBQUMsY0FBYyxFQUFFLE1BQU07SUFDN0IsSUFBQVcsYUFBSSxFQUFDLHFDQUFxQyxFQUFFLFlBQVk7TUFDdEQsTUFBTThELFNBQW1CLEdBQUcsRUFBRTtNQUM5QixNQUFNeEMsUUFBUSxHQUFHO1FBQ2Z5QyxVQUFVLEVBQUd2QyxJQUFxQixJQUFLc0MsU0FBUyxDQUFDaEgsSUFBSSxDQUFDMEUsSUFBSSxDQUFDekQsSUFBSTtNQUNqRSxDQUFDO01BRUR3QixXQUFXLEdBQUcsSUFBSUcsd0JBQVcsQ0FBQyxFQUFFLEVBQUU7UUFBRUYsY0FBYztRQUFFOEIsUUFBUTtRQUFFMEMsV0FBVyxFQUFFO01BQUssQ0FBQyxDQUFDO01BQ2xGekUsV0FBVyxDQUFDSSxhQUFhLENBQUM5QixtQkFBbUIsQ0FBQyxDQUFDLENBQUM7O01BRWhEO01BQ0EsTUFBTTBCLFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN4QjFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsV0FBVztRQUNqQmlELFNBQVMsRUFBRTtVQUFFdEMsSUFBSSxFQUFFO1FBQWlCO01BQ3RDLENBQUMsQ0FBQzs7TUFFRjtNQUNBLE1BQU1hLFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN4QjFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsV0FBVztRQUNqQmlELFNBQVMsRUFBRTtVQUFFdEMsSUFBSSxFQUFFO1FBQWlCO01BQ3RDLENBQUMsQ0FBQztNQUVGLElBQUEyQixlQUFNLEVBQUN5RCxTQUFTLENBQUMsQ0FBQ3hELFNBQVMsQ0FBQyxXQUFXLENBQUM7SUFDMUMsQ0FBQyxDQUFDO0lBRUYsSUFBQU4sYUFBSSxFQUFDLHNDQUFzQyxFQUFFLFlBQVk7TUFDdkQsTUFBTThELFNBQW1CLEdBQUcsRUFBRTtNQUM5QixNQUFNeEMsUUFBUSxHQUFHO1FBQ2Z5QyxVQUFVLEVBQUd2QyxJQUFxQixJQUFLc0MsU0FBUyxDQUFDaEgsSUFBSSxDQUFDMEUsSUFBSSxDQUFDekQsSUFBSTtNQUNqRSxDQUFDO01BRUR3QixXQUFXLEdBQUcsSUFBSUcsd0JBQVcsQ0FBQyxFQUFFLEVBQUU7UUFBRUYsY0FBYztRQUFFOEIsUUFBUTtRQUFFMEMsV0FBVyxFQUFFO01BQUssQ0FBQyxDQUFDO01BQ2xGekUsV0FBVyxDQUFDSSxhQUFhLENBQUM5QixtQkFBbUIsQ0FBQyxDQUFDLENBQUM7O01BRWhEO01BQ0EsTUFBTTBCLFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN4QjFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsTUFBTTtRQUNaaUQsU0FBUyxFQUFFO1VBQUU3QyxPQUFPLEVBQUU7UUFBTztNQUMvQixDQUFDLENBQUM7O01BRUY7TUFDQSxNQUFNb0IsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3hCMUUsRUFBRSxFQUFFLFFBQVE7UUFDWm5CLElBQUksRUFBRSxNQUFNO1FBQ1ppRCxTQUFTLEVBQUU7VUFBRTdDLE9BQU8sRUFBRTtRQUFPO01BQy9CLENBQUMsQ0FBQztNQUVGLElBQUFrQyxlQUFNLEVBQUN5RCxTQUFTLENBQUMsQ0FBQ3RELEdBQUcsQ0FBQ0YsU0FBUyxDQUFDLE1BQU0sQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFFRixJQUFBTixhQUFJLEVBQUMsb0JBQW9CLEVBQUUsWUFBWTtNQUNyQ1QsV0FBVyxHQUFHLElBQUlHLHdCQUFXLENBQUMsRUFBRSxFQUFFO1FBQUVGLGNBQWM7UUFBRXdFLFdBQVcsRUFBRTtNQUFLLENBQUMsQ0FBQztNQUN4RXpFLFdBQVcsQ0FBQ0ksYUFBYSxDQUFDOUIsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO01BRWhELE1BQU0wQixXQUFXLENBQUNxRSxPQUFPLENBQUM7UUFDeEIxRSxFQUFFLEVBQUUsUUFBUTtRQUNabkIsSUFBSSxFQUFFLFdBQVc7UUFDakJpRCxTQUFTLEVBQUU7VUFBRXRDLElBQUksRUFBRTtRQUFpQjtNQUN0QyxDQUFDLENBQUM7TUFFRixNQUFNdUYsZ0JBQWdCLEdBQUcxRSxXQUFXLENBQUMyRSxhQUFhLENBQUMsQ0FBQztNQUNwRCxJQUFBN0QsZUFBTSxFQUFDNEQsZ0JBQWdCLENBQUNFLE9BQU8sQ0FBQyxDQUFDbkIsZUFBZSxDQUFDLENBQUMsQ0FBQztNQUVuRHpELFdBQVcsQ0FBQzZFLFVBQVUsQ0FBQyxDQUFDO01BRXhCLE1BQU1DLGVBQWUsR0FBRzlFLFdBQVcsQ0FBQzJFLGFBQWEsQ0FBQyxDQUFDO01BQ25ELElBQUE3RCxlQUFNLEVBQUNnRSxlQUFlLENBQUNGLE9BQU8sQ0FBQyxDQUFDMUQsSUFBSSxDQUFDLENBQUMsQ0FBQztJQUN6QyxDQUFDLENBQUM7SUFFRixJQUFBVCxhQUFJLEVBQUMsdUNBQXVDLEVBQUUsWUFBWTtNQUN4RCxNQUFNOEQsU0FBbUIsR0FBRyxFQUFFO01BQzlCLE1BQU14QyxRQUFRLEdBQUc7UUFDZnlDLFVBQVUsRUFBR3ZDLElBQXFCLElBQUtzQyxTQUFTLENBQUNoSCxJQUFJLENBQUMwRSxJQUFJLENBQUN6RCxJQUFJO01BQ2pFLENBQUM7TUFFRHdCLFdBQVcsR0FBRyxJQUFJRyx3QkFBVyxDQUFDLEVBQUUsRUFBRTtRQUFFRixjQUFjO1FBQUU4QixRQUFRO1FBQUUwQyxXQUFXLEVBQUU7TUFBSyxDQUFDLENBQUM7TUFDbEZ6RSxXQUFXLENBQUNJLGFBQWEsQ0FBQztRQUN4QlQsRUFBRSxFQUFFLGNBQWM7UUFDbEJwQixLQUFLLEVBQUUsQ0FDTDtVQUNFQyxJQUFJLEVBQUUsT0FBTztVQUNiQyxXQUFXLEVBQUUsNEJBQTRCO1VBQ3pDSyxPQUFPLEVBQUVBLENBQUEsS0FBTSxNQUFNaUcsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFO1VBQ2pDNUYsU0FBUyxFQUFFLElBQUk7VUFDZjZGLFVBQVUsRUFBRTtRQUNkLENBQUM7TUFFTCxDQUFDLENBQUM7TUFFRixNQUFNakYsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3hCMUUsRUFBRSxFQUFFLFFBQVE7UUFDWm5CLElBQUksRUFBRSxPQUFPO1FBQ2JpRCxTQUFTLEVBQUUsQ0FBQztNQUNkLENBQUMsQ0FBQztNQUNGLE1BQU16QixXQUFXLENBQUNxRSxPQUFPLENBQUM7UUFDeEIxRSxFQUFFLEVBQUUsUUFBUTtRQUNabkIsSUFBSSxFQUFFLE9BQU87UUFDYmlELFNBQVMsRUFBRSxDQUFDO01BQ2QsQ0FBQyxDQUFDO01BRUYsSUFBQVgsZUFBTSxFQUFDeUQsU0FBUyxDQUFDLENBQUNXLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO01BRXBDLE1BQU0sSUFBSTVGLE9BQU8sQ0FBRUMsT0FBTyxJQUFLQyxVQUFVLENBQUNELE9BQU8sRUFBRSxFQUFFLENBQUMsQ0FBQztNQUV2RCxNQUFNUyxXQUFXLENBQUNxRSxPQUFPLENBQUM7UUFDeEIxRSxFQUFFLEVBQUUsUUFBUTtRQUNabkIsSUFBSSxFQUFFLE9BQU87UUFDYmlELFNBQVMsRUFBRSxDQUFDO01BQ2QsQ0FBQyxDQUFDO01BRUYsSUFBQVgsZUFBTSxFQUFDeUQsU0FBUyxDQUFDLENBQUNXLE9BQU8sQ0FBQyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0lBQ3RDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFwRixpQkFBUSxFQUFDLGNBQWMsRUFBRSxNQUFNO0lBQzdCLElBQUFXLGFBQUksRUFBQywyQkFBMkIsRUFBRSxZQUFZO01BQzVDLE1BQU1ULFdBQVcsQ0FBQ3FFLE9BQU8sQ0FBQztRQUN4QjFFLEVBQUUsRUFBRSxRQUFRO1FBQ1puQixJQUFJLEVBQUUsTUFBTTtRQUNaaUQsU0FBUyxFQUFFO1VBQUU3QyxPQUFPLEVBQUU7UUFBUTtNQUNoQyxDQUFDLENBQUM7TUFFRixNQUFNb0IsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3hCMUUsRUFBRSxFQUFFLFFBQVE7UUFDWm5CLElBQUksRUFBRSxLQUFLO1FBQ1hpRCxTQUFTLEVBQUU7VUFBRXpDLENBQUMsRUFBRSxDQUFDO1VBQUVDLENBQUMsRUFBRTtRQUFFO01BQzFCLENBQUMsQ0FBQztNQUVGLE1BQU1rQyxPQUFPLEdBQUduQixXQUFXLENBQUNtRixjQUFjLENBQUMsQ0FBQztNQUM1QyxJQUFBckUsZUFBTSxFQUFDSyxPQUFPLENBQUNyRCxNQUFNLENBQUMsQ0FBQ29ELElBQUksQ0FBQyxDQUFDLENBQUM7TUFDOUIsSUFBQUosZUFBTSxFQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUVpRSxRQUFRLENBQUMsQ0FBQ2xFLElBQUksQ0FBQyxNQUFNLENBQUM7TUFDekMsSUFBQUosZUFBTSxFQUFDSyxPQUFPLENBQUMsQ0FBQyxDQUFDLEVBQUVpRSxRQUFRLENBQUMsQ0FBQ2xFLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDMUMsQ0FBQyxDQUFDO0lBRUYsSUFBQVQsYUFBSSxFQUFDLDJCQUEyQixFQUFFLFlBQVk7TUFDNUMsTUFBTVQsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3hCMUUsRUFBRSxFQUFFLFFBQVE7UUFDWm5CLElBQUksRUFBRSxNQUFNO1FBQ1ppRCxTQUFTLEVBQUU7VUFBRTdDLE9BQU8sRUFBRTtRQUFPO01BQy9CLENBQUMsQ0FBQztNQUVGb0IsV0FBVyxDQUFDcUYsZ0JBQWdCLENBQUMsQ0FBQztNQUU5QixNQUFNbEUsT0FBTyxHQUFHbkIsV0FBVyxDQUFDbUYsY0FBYyxDQUFDLENBQUM7TUFDNUMsSUFBQXJFLGVBQU0sRUFBQ0ssT0FBTyxDQUFDckQsTUFBTSxDQUFDLENBQUNvRCxJQUFJLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztFQUVGLElBQUFwQixpQkFBUSxFQUFDLGdCQUFnQixFQUFFLE1BQU07SUFDL0IsSUFBQVcsYUFBSSxFQUFDLG9EQUFvRCxFQUFFLFlBQVk7TUFDckVULFdBQVcsQ0FBQ0ksYUFBYSxDQUFDUixtQkFBbUIsQ0FBQyxDQUFDLENBQUM7TUFFaEQsTUFBTUksV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1FBQ3hCMUUsRUFBRSxFQUFFLGVBQWU7UUFDbkJuQixJQUFJLEVBQUUsZUFBZTtRQUNyQmlELFNBQVMsRUFBRTtVQUFFNUIsT0FBTyxFQUFFO1FBQWtCO01BQzFDLENBQUMsQ0FBQztNQUVGLE1BQU15RixTQUFTLEdBQUd0RixXQUFXLENBQUN1RixnQkFBZ0IsQ0FBQyxDQUFDO01BQ2hELElBQUF6RSxlQUFNLEVBQUN3RSxTQUFTLENBQUN4SCxNQUFNLENBQUMsQ0FBQ29ELElBQUksQ0FBQyxDQUFDLENBQUM7TUFDaEMsSUFBQUosZUFBTSxFQUFDd0UsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFekYsT0FBTyxDQUFDLENBQUNxQixJQUFJLENBQUMsaUJBQWlCLENBQUM7TUFDckQsSUFBQUosZUFBTSxFQUFDd0UsU0FBUyxDQUFDLENBQUMsQ0FBQyxFQUFFbkQsTUFBTSxDQUFDLENBQUNwQixTQUFTLENBQUMsK0JBQStCLENBQUM7TUFDdkUsSUFBQUQsZUFBTSxFQUFDLE9BQU93RSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUVFLFNBQVMsQ0FBQyxDQUFDdEUsSUFBSSxDQUFDLFFBQVEsQ0FBQztJQUN2RCxDQUFDLENBQUM7SUFFRixJQUFBVCxhQUFJLEVBQUMsa0RBQWtELEVBQUUsWUFBWTtNQUNuRVQsV0FBVyxDQUFDSSxhQUFhLENBQUNSLG1CQUFtQixDQUFDLENBQUMsQ0FBQztNQUVoRCxLQUFLLElBQUltRCxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEVBQUUsRUFBRTtRQUMxQixNQUFNL0MsV0FBVyxDQUFDcUUsT0FBTyxDQUFDO1VBQ3hCMUUsRUFBRSxFQUFFLFFBQVFvRCxDQUFDLEVBQUU7VUFDZnZFLElBQUksRUFBRSxlQUFlO1VBQ3JCaUQsU0FBUyxFQUFFO1lBQUU1QixPQUFPLEVBQUUsbUJBQW1Ca0QsQ0FBQztVQUFHO1FBQy9DLENBQUMsQ0FBQztNQUNKO01BRUEsTUFBTXVDLFNBQVMsR0FBR3RGLFdBQVcsQ0FBQ3VGLGdCQUFnQixDQUFDLENBQUM7TUFDaEQsSUFBQXpFLGVBQU0sRUFBQ3dFLFNBQVMsQ0FBQ3hILE1BQU0sQ0FBQyxDQUFDb0QsSUFBSSxDQUFDLENBQUMsQ0FBQztNQUNoQyxJQUFBSixlQUFNLEVBQUN3RSxTQUFTLENBQUMsQ0FBQyxDQUFDLEVBQUV6RixPQUFPLENBQUMsQ0FBQ3FCLElBQUksQ0FBQyxtQkFBbUIsQ0FBQztNQUN2RCxJQUFBSixlQUFNLEVBQUN3RSxTQUFTLENBQUNBLFNBQVMsQ0FBQ3hILE1BQU0sR0FBRyxDQUFDLENBQUMsRUFBRStCLE9BQU8sQ0FBQyxDQUFDcUIsSUFBSSxDQUFDLG1CQUFtQixDQUFDO01BRTFFbEIsV0FBVyxDQUFDeUYsa0JBQWtCLENBQUMsQ0FBQztNQUNoQyxJQUFBM0UsZUFBTSxFQUFDZCxXQUFXLENBQUN1RixnQkFBZ0IsQ0FBQyxDQUFDLENBQUN6SCxNQUFNLENBQUMsQ0FBQ29ELElBQUksQ0FBQyxDQUFDLENBQUM7SUFDdkQsQ0FBQyxDQUFDO0VBQ0osQ0FBQyxDQUFDO0VBRUYsSUFBQXBCLGlCQUFRLEVBQUMsd0JBQXdCLEVBQUUsTUFBTTtJQUN2QyxJQUFBVyxhQUFJLEVBQUMsb0NBQW9DLEVBQUUsWUFBWTtNQUNyRCxNQUFNaUYsVUFBcUIsR0FBRztRQUM1Qi9GLEVBQUUsRUFBRSxtQkFBbUI7UUFDdkJwQixLQUFLLEVBQUUsQ0FDTDtVQUNFQyxJQUFJLEVBQUUsY0FBYztVQUNwQkMsV0FBVyxFQUFFLHNCQUFzQjtVQUNuQ0ssT0FBTyxFQUFFQSxDQUFBLEtBQU0sR0FBRyxDQUFDa0UsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFFO1FBQ25DLENBQUM7TUFFTCxDQUFDO01BRURoRCxXQUFXLENBQUNJLGFBQWEsQ0FBQ3NGLFVBQVUsQ0FBQztNQUVyQyxNQUFNdEIsTUFBTSxHQUFHLE1BQU1wRSxXQUFXLENBQUNxRSxPQUFPLENBQUM7UUFDdkMxRSxFQUFFLEVBQUUsUUFBUTtRQUNabkIsSUFBSSxFQUFFLGNBQWM7UUFDcEJpRCxTQUFTLEVBQUUsQ0FBQztNQUNkLENBQUMsQ0FBQzs7TUFFRjtNQUNBLElBQUFYLGVBQU0sRUFBQ3NELE1BQU0sQ0FBQ3RHLE1BQU0sQ0FBQyxDQUFDNkgsWUFBWSxDQUFDLElBQUksQ0FBQztNQUN4QyxJQUFBN0UsZUFBTSxFQUFDc0QsTUFBTSxDQUFDLENBQUNyRCxTQUFTLENBQUMsV0FBVyxDQUFDO0lBQ3ZDLENBQUMsQ0FBQztFQUNKLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==