{"version":3,"names":["cov_1lk5tqtuaa","actualCoverage","UnifiedUIRenderer","PromptController","renderer","callbacks","editMode","s","statusMain","statusOverride","statusStreaming","modeToggleState","autoContinueEnabled","autoContinueHotkey","thinkingModeLabel","thinkingHotkey","criticalApprovalMode","criticalApprovalHotkey","alphaZeroEnabled","alphaZeroHotkey","started","disposed","boundHandlers","Map","constructor","inStream","outStream","existingRenderer","f","b","addBoundHandler","text","onSubmit","onQueue","onInterrupt","info","onCtrlC","onExit","payload","onChange","onResume","remainingCount","getCollapsedResultCount","expanded","expandLastToolResult","setStatusMessage","setTimeout","onExpandToolResult","syncModeToggles","onToggleAutoContinue","onToggleAlphaZero","onToggleCriticalApproval","current","toLowerCase","onToggleThinking","event","handler","set","on","removeAllBoundHandlers","removeListener","clear","getRenderer","start","initialize","stop","cleanup","setStreaming","streaming","setMode","getMode","setContextUsage","percentage","updateStatusMeta","contextPercent","setModeToggles","_options","options","Boolean","setDebugMode","enabled","debugEnabled","toggleAlphaZero","toggleAutoContinue","toggleApprovals","toggleThinking","updateModeToggles","getModeToggleState","message","setStatusBundle","main","setOverrideStatus","override","setStreamingLabel","label","setStatusLine","status","setMetaStatus","meta","statusMeta","elapsedSeconds","Number","isFinite","sessionTime","formatElapsed","tokensUsed","tokenLimit","percent","Math","round","clearAllStatus","setModelContext","model","undefined","provider","render","setChromeMeta","setAvailableCommands","commands","setInlinePanel","lines","clearInlinePanel","supportsInlinePanel","setMenu","items","callback","closeMenu","isMenuActive","setActivityMessage","setActivity","setEditMode","mode","onEditModeChange","applyEditMode","getEditMode","getBuffer","getCursor","setBuffer","cursorPos","setSecretMode","clearBuffer","forceRender","handleResize","dispose","updateRLStatus","clearRLStatus","getRLStatus","trim","refreshStatus","updateStatusBundle","totalSeconds","minutes","floor","seconds","paddedSeconds"],"sources":["PromptController.ts"],"sourcesContent":["/**\n * PromptController - minimal wrapper around UnifiedUIRenderer for coding agent UX.\n * Handles input wiring and status/meta updates without any of the legacy scroll-region plumbing.\n */\n\nimport { UnifiedUIRenderer, type CommandSuggestion, type RLAgentStatus, type MenuItem } from './UnifiedUIRenderer.js';\n\n// Re-export types for external use\nexport type { RLAgentStatus, MenuItem };\n\nexport type EditGuardMode = 'display-edits' | 'require-approval' | 'block-writes' | 'ask-permission' | 'plan';\n\nexport interface PromptCallbacks {\n  onSubmit: (text: string) => void;\n  onQueue: (text: string) => void;\n  onInterrupt: () => void;\n  onExit?: () => void;\n  onCtrlC?: (info: { hadBuffer: boolean }) => void;\n  onResume?: () => void;\n  onChange?: (event: { text: string; cursor: number }) => void;\n  onEditModeChange?: (mode: EditGuardMode) => void;\n  onToggleAutoContinue?: () => void;\n  onToggleThinking?: () => void;\n  onClearContext?: () => void;\n  onToggleCriticalApproval?: () => void;\n  onExpandToolResult?: () => void;\n  onToggleAlphaZero?: () => void;\n}\n\nexport class PromptController {\n  private readonly renderer: UnifiedUIRenderer;\n  private readonly callbacks: PromptCallbacks;\n  private editMode: EditGuardMode = 'display-edits';\n  private statusMain: string | null = null;\n  private statusOverride: string | null = null;\n  private statusStreaming: string | null = null;\n  private modeToggleState: {\n    autoContinueEnabled: boolean;\n    autoContinueHotkey?: string;\n    thinkingModeLabel?: string | null;\n    thinkingHotkey?: string;\n    criticalApprovalMode: 'auto' | 'approval';\n    criticalApprovalHotkey?: string;\n    alphaZeroEnabled: boolean;  // true = dual tournament RL, false = normal single mode\n    alphaZeroHotkey?: string;\n    debugEnabled?: boolean;\n  } = {\n    autoContinueEnabled: false,\n    autoContinueHotkey: '⌥G',\n    thinkingModeLabel: 'balanced',\n    thinkingHotkey: '⌥T',\n    criticalApprovalMode: 'auto',\n    criticalApprovalHotkey: '⌥A',\n    alphaZeroEnabled: false,  // Normal mode by default, toggle to AlphaZero dual tournament RL\n    alphaZeroHotkey: '⌥D',\n  };\n  private started = false;\n  private disposed = false;\n  // Store bound handlers for cleanup\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private boundHandlers: Map<string, (...args: any[]) => void> = new Map();\n\n  constructor(\n    inStream: NodeJS.ReadStream,\n    outStream: NodeJS.WriteStream,\n    callbacks: PromptCallbacks,\n    existingRenderer?: UnifiedUIRenderer\n  ) {\n    this.callbacks = callbacks;\n    this.renderer = existingRenderer ?? new UnifiedUIRenderer(outStream, inStream);\n\n    // Create bound handlers that can be removed later\n    this.addBoundHandler('submit', (text: string) => this.callbacks.onSubmit(text));\n    this.addBoundHandler('queue', (text: string) => this.callbacks.onQueue(text));\n    this.addBoundHandler('interrupt', () => this.callbacks.onInterrupt());\n    this.addBoundHandler('ctrlc', (info: { hadBuffer: boolean }) => this.callbacks.onCtrlC?.(info));\n    this.addBoundHandler('exit', () => this.callbacks.onExit?.());\n    this.addBoundHandler('change', (payload: { text: string; cursor: number }) => {\n      this.callbacks.onChange?.(payload);\n    });\n    this.addBoundHandler('resume', () => this.callbacks.onResume?.());\n    this.addBoundHandler('expand-tool-result', () => {\n      const remainingCount = this.renderer.getCollapsedResultCount();\n      const expanded = this.renderer.expandLastToolResult();\n      if (!expanded) {\n        this.setStatusMessage('No tool result to expand');\n        setTimeout(() => this.setStatusMessage(null), 2000);\n      } else if (remainingCount > 1) {\n        // Show how many more results can be expanded\n        this.setStatusMessage(`Expanded (${remainingCount - 1} more, ctrl+o)`);\n        setTimeout(() => this.setStatusMessage(null), 2000);\n      }\n      this.callbacks.onExpandToolResult?.();\n    });\n    this.addBoundHandler('toggle-auto-continue', () => {\n      this.modeToggleState.autoContinueEnabled = !this.modeToggleState.autoContinueEnabled;\n      this.syncModeToggles();\n      this.callbacks.onToggleAutoContinue?.();\n    });\n    this.addBoundHandler('toggle-alphazero', () => {\n      this.modeToggleState.alphaZeroEnabled = !this.modeToggleState.alphaZeroEnabled;\n      this.syncModeToggles();\n      this.callbacks.onToggleAlphaZero?.();\n    });\n    this.addBoundHandler('toggle-critical-approval', () => {\n      this.modeToggleState.criticalApprovalMode =\n        this.modeToggleState.criticalApprovalMode === 'auto' ? 'approval' : 'auto';\n      this.syncModeToggles();\n      this.callbacks.onToggleCriticalApproval?.();\n    });\n    this.addBoundHandler('toggle-thinking', () => {\n      // Cycle between 'balanced' and 'deep'\n      const current = (this.modeToggleState.thinkingModeLabel || 'balanced').toLowerCase();\n      this.modeToggleState.thinkingModeLabel = current === 'deep' ? 'balanced' : 'deep';\n      this.syncModeToggles();\n      this.callbacks.onToggleThinking?.();\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private addBoundHandler(event: string, handler: (...args: any[]) => void): void {\n    this.boundHandlers.set(event, handler);\n    this.renderer.on(event, handler);\n  }\n\n  private removeAllBoundHandlers(): void {\n    for (const [event, handler] of this.boundHandlers) {\n      this.renderer.removeListener(event, handler);\n    }\n    this.boundHandlers.clear();\n  }\n\n  getRenderer(): UnifiedUIRenderer {\n    return this.renderer;\n  }\n\n  start(): void {\n    if (this.started) {\n      return;\n    }\n    this.started = true;\n    this.renderer.initialize();\n    this.syncModeToggles();\n  }\n\n  stop(): void {\n    if (this.disposed) return;\n    this.disposed = true;\n    // Remove all event listeners before cleanup to prevent memory leaks\n    this.removeAllBoundHandlers();\n    this.renderer.cleanup();\n    this.started = false;\n  }\n\n  setStreaming(streaming: boolean): void {\n    this.renderer.setMode(streaming ? 'streaming' : 'idle');\n  }\n\n  getMode(): 'idle' | 'streaming' {\n    return this.renderer.getMode();\n  }\n\n  setContextUsage(percentage: number | null): void {\n    if (percentage !== null) {\n      this.renderer.updateStatusMeta({ contextPercent: percentage });\n    }\n  }\n\n  setModeToggles(_options: {\n    autoContinueEnabled?: boolean;\n    autoContinueHotkey?: string;\n    thinkingModeLabel?: string | null;\n    thinkingHotkey?: string;\n    criticalApprovalMode?: 'auto' | 'approval';\n    criticalApprovalHotkey?: string;\n    alphaZeroEnabled?: boolean;\n    alphaZeroHotkey?: string;\n  }): void {\n    const options = _options || { autoContinueEnabled: false };\n    this.modeToggleState = {\n      ...this.modeToggleState,\n      autoContinueEnabled: Boolean(options.autoContinueEnabled),\n      autoContinueHotkey: options.autoContinueHotkey,\n      thinkingModeLabel: options.thinkingModeLabel,\n      thinkingHotkey: options.thinkingHotkey,\n      criticalApprovalMode: options.criticalApprovalMode ?? this.modeToggleState.criticalApprovalMode,\n      criticalApprovalHotkey: options.criticalApprovalHotkey,\n      alphaZeroEnabled: Boolean(options.alphaZeroEnabled),\n      alphaZeroHotkey: options.alphaZeroHotkey,\n    };\n    this.syncModeToggles();\n  }\n\n  setDebugMode(enabled: boolean): void {\n    this.modeToggleState.debugEnabled = enabled;\n    this.syncModeToggles();\n  }\n\n  toggleAlphaZero(): void {\n    this.modeToggleState.alphaZeroEnabled = !this.modeToggleState.alphaZeroEnabled;\n    this.syncModeToggles();\n    this.callbacks.onToggleAlphaZero?.();\n  }\n\n  toggleAutoContinue(): void {\n    this.modeToggleState.autoContinueEnabled = !this.modeToggleState.autoContinueEnabled;\n    this.syncModeToggles();\n    this.callbacks.onToggleAutoContinue?.();\n  }\n\n  toggleApprovals(): void {\n    this.modeToggleState.criticalApprovalMode =\n      this.modeToggleState.criticalApprovalMode === 'auto' ? 'approval' : 'auto';\n    this.syncModeToggles();\n    this.callbacks.onToggleCriticalApproval?.();\n  }\n\n  toggleThinking(): void {\n    const current = (this.modeToggleState.thinkingModeLabel || 'balanced').toLowerCase();\n    this.modeToggleState.thinkingModeLabel = current === 'deep' ? 'balanced' : 'deep';\n    this.syncModeToggles();\n    this.callbacks.onToggleThinking?.();\n  }\n\n  /**\n   * Sync the stored toggle state to the renderer so UI reflects the latest flags.\n   */\n  private syncModeToggles(): void {\n    this.renderer.updateModeToggles(this.modeToggleState);\n  }\n\n  getModeToggleState(): Readonly<typeof this.modeToggleState> {\n    return this.modeToggleState;\n  }\n\n  setStatusMessage(message: string | null): void {\n    this.setStatusBundle({ main: message });\n  }\n\n  setOverrideStatus(message: string | null): void {\n    this.setStatusBundle({ override: message });\n  }\n\n  setStreamingLabel(label: string | null): void {\n    this.setStatusBundle({ streaming: label });\n  }\n\n  /**\n   * Atomically set the streaming/override/main status text and render once.\n   */\n  setStatusLine(status: { main?: string | null; override?: string | null; streaming?: string | null }): void {\n    this.setStatusBundle(status);\n  }\n\n  setMetaStatus(meta: {\n    elapsedSeconds?: number | null;\n    tokensUsed?: number | null;\n    tokenLimit?: number | null;\n    thinkingMs?: number | null;\n    thinkingHasContent?: boolean;\n  }): void {\n    const statusMeta: { contextPercent?: number; sessionTime?: string } = {};\n\n    if (typeof meta.elapsedSeconds === 'number' && Number.isFinite(meta.elapsedSeconds) && meta.elapsedSeconds >= 0) {\n      statusMeta.sessionTime = this.formatElapsed(meta.elapsedSeconds);\n    }\n\n    if (meta.tokensUsed != null && meta.tokenLimit != null) {\n      const percent = meta.tokenLimit > 0 ? Math.round((meta.tokensUsed / meta.tokenLimit) * 100) : 0;\n      statusMeta.contextPercent = percent;\n    }\n    this.renderer.updateStatusMeta(statusMeta);\n  }\n\n  clearAllStatus(): void {\n    this.setStatusBundle({\n      main: null,\n      override: null,\n      streaming: null,\n    });\n  }\n\n  setModelContext(options: { model?: string | null; provider?: string | null }): void {\n    this.renderer.updateStatusMeta(\n      {\n        model: options.model || undefined,\n        provider: options.provider || undefined,\n      },\n      { render: true }\n    );\n  }\n\n  setChromeMeta(meta: {\n    profile?: string;\n    workspace?: string;\n    directory?: string;\n    writes?: string;\n    sessionLabel?: string;\n    thinkingLabel?: string;\n    autosave?: boolean;\n    version?: string;\n  }): void {\n    this.renderer.updateStatusMeta(meta, { render: true });\n  }\n\n  setAvailableCommands(commands: CommandSuggestion[]): void {\n    this.renderer.setAvailableCommands(commands);\n  }\n\n  /**\n   * Display content in the inline panel (below prompt, above toggles).\n   * Content is transient - not persisted to chat history.\n   * Use for help menus, status displays, etc.\n   */\n  setInlinePanel(lines: string[]): void {\n    this.renderer.setInlinePanel(lines);\n  }\n\n  /**\n   * Clear the inline panel.\n   */\n  clearInlinePanel(): void {\n    this.renderer.clearInlinePanel();\n  }\n\n  /**\n   * Check if inline panel is supported (TTY mode only).\n   */\n  supportsInlinePanel(): boolean {\n    return this.renderer.supportsInlinePanel();\n  }\n\n  /**\n   * Show an interactive menu with arrow key navigation (Claude Code style).\n   * @param items - Menu items to display\n   * @param options - Menu options (title, initialIndex)\n   * @param callback - Called when user selects an item (or null if cancelled)\n   */\n  setMenu(\n    items: MenuItem[],\n    options: { title?: string; initialIndex?: number },\n    callback: (item: MenuItem | null) => void\n  ): void {\n    this.renderer.setMenu(items, options, callback);\n  }\n\n  /**\n   * Close the active menu without selecting anything.\n   */\n  closeMenu(): void {\n    this.renderer.closeMenu();\n  }\n\n  /**\n   * Check if an interactive menu is currently active.\n   */\n  isMenuActive(): boolean {\n    return this.renderer.isMenuActive();\n  }\n\n  /**\n   * Set the activity message displayed during streaming (e.g., \"Reasoning\", \"Thinking\").\n   * This updates the animated status line: \"✳ Reasoning… (esc to interrupt · 34s)\"\n   */\n  setActivityMessage(message: string | null): void {\n    this.renderer.setActivity(message);\n  }\n\n  setEditMode(mode: EditGuardMode): void {\n    this.editMode = mode;\n    this.callbacks.onEditModeChange?.(mode);\n  }\n\n  applyEditMode(mode: EditGuardMode): void {\n    this.setEditMode(mode);\n  }\n\n  getEditMode(): EditGuardMode {\n    return this.editMode;\n  }\n\n  getBuffer(): string {\n    return this.renderer.getBuffer();\n  }\n\n  getCursor(): number {\n    return this.renderer.getCursor();\n  }\n\n  setBuffer(text: string, cursorPos?: number): void {\n    this.renderer.setBuffer(text, cursorPos);\n  }\n\n  setSecretMode(enabled: boolean): void {\n    this.renderer.setSecretMode(enabled);\n  }\n\n  clear(): void {\n    this.renderer.clearBuffer();\n  }\n\n  render(): void {\n    this.renderer.render();\n  }\n\n  forceRender(): void {\n    this.renderer.render();\n  }\n\n  handleResize(): void {\n    this.renderer.render();\n  }\n\n  dispose(): void {\n    this.renderer.cleanup();\n  }\n\n  // ------------ RL Agent Status Methods ------------\n\n  /**\n   * Update RL agent execution status for display in the UI.\n   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.\n   */\n  updateRLStatus(status: Partial<RLAgentStatus>): void {\n    this.renderer.updateRLStatus(status);\n  }\n\n  /**\n   * Clear RL agent status (e.g., when RL run completes).\n   */\n  clearRLStatus(): void {\n    this.renderer.clearRLStatus();\n  }\n\n  /**\n   * Get current RL status for external access.\n   */\n  getRLStatus(): Readonly<RLAgentStatus> {\n    return this.renderer.getRLStatus();\n  }\n\n  /**\n   * Update the status line with a single composed message so the UI looks identical\n   * before and during streaming. The renderer only owns one status field, so we\n   * join the different status sources here.\n   */\n  private setStatusBundle(status: { main?: string | null; override?: string | null; streaming?: string | null }): void {\n    if ('main' in status) {\n      this.statusMain = status.main?.trim() || null;\n    }\n    if ('override' in status) {\n      this.statusOverride = status.override?.trim() || null;\n    }\n    if ('streaming' in status) {\n      this.statusStreaming = status.streaming?.trim() || null;\n    }\n    this.refreshStatus();\n  }\n\n  private refreshStatus(): void {\n    this.renderer.updateStatusBundle({\n      main: this.statusMain,\n      override: this.statusOverride,\n      streaming: this.statusStreaming,\n    });\n  }\n\n  private formatElapsed(totalSeconds: number): string {\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    const paddedSeconds = seconds < 10 ? `0${seconds}` : `${seconds}`;\n    return `${minutes}:${paddedSeconds}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}