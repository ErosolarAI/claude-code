{"version":3,"names":["cov_jmrgoj80j","actualCoverage","CitationValidator","validateCitations","response","citations","f","s","length","b","valid","coverage","missing","citationMarkers","match","claimPatterns","hasClaimMarkers","some","pattern","test","hasCitations","invalidCitations","filter","c","sourceDoc","map","_","i","extractCitations","citationRegex","exec","parts","split","p","trim","push","section","version","Array","isArray","ApprovalManager","pendingApprovals","Map","approvalHistory","requestApproval","actionType","actionDescription","riskLevel","requiredApprover","context","request","id","Date","now","Math","random","toString","substr","requestedAt","set","console","log","recordApproval","requestId","delete","requiresApproval","actionContext","policies","condition","type","ctx","amount","approver","dealValue","pii","matchedPolicy","find","required","getPendingApproval","get","getApprovalStatus","AuditLogger","logs","observabilityEndpoint","constructor","process","env","OBSERVABILITY_ENDPOINT","logAction","entry","fullEntry","timestamp","redactedEntry","redactPII","sendToObservability","error","status","piiPatterns","regex","replacement","inputs","inputsStr","JSON","stringify","redactedStr","replace","parse","outputs","outputsStr","getLogsByCorrelationId","correlationId","getLogsByUserId","userId","getAllLogs","GuardrailsOrchestrator","citationValidator","approvalManager","auditLogger","getCitationValidator","getApprovalManager","getAuditLogger","executeWithGuardrails","actionFn","options","approvalCheck","approvalRequest","Error","requireCitations","citationValidation","errorMessage","join","result","message","String","guardrailsInstance","getGuardrails"],"sources":["guardrails.ts"],"sourcesContent":["/**\n * Runtime Guardrails for Revenue Suite\n * Enforces citations, approvals, and audit logging as per manifest requirements\n */\n\nexport interface Citation {\n  sourceDoc: string;\n  section?: string;\n  version?: string;\n  lineNumber?: number;\n  quote?: string;\n}\n\nexport interface ApprovalRequest {\n  id: string;\n  actionType: string;\n  actionDescription: string;\n  riskLevel: 'low' | 'medium' | 'high' | 'critical';\n  requiredApprover: string;\n  context: Record<string, any>;\n  requestedAt: Date;\n}\n\nexport interface ApprovalResponse {\n  requestId: string;\n  approved: boolean;\n  approver: string;\n  approvedAt: Date;\n  notes?: string;\n}\n\nexport interface AuditLogEntry {\n  id: string;\n  timestamp: Date;\n  correlationId: string;\n  userId: string;\n  actionType: string;\n  actionDescription: string;\n  inputs: Record<string, any>;\n  outputs?: Record<string, any>;\n  citations?: Citation[];\n  approvalId?: string;\n  status: 'success' | 'failed' | 'pending_approval';\n  errorMessage?: string;\n  metadata?: Record<string, any>;\n}\n\n/**\n * Citation Validator\n * Ensures every claim has proper source attribution\n */\nexport class CitationValidator {\n  /**\n   * Validates that a response includes proper citations\n   */\n  validateCitations(response: string, citations: Citation[]): {\n    valid: boolean;\n    coverage: number;\n    missing: string[];\n  } {\n    if (citations.length === 0) {\n      return {\n        valid: false,\n        coverage: 0,\n        missing: ['No citations provided']\n      };\n    }\n\n    // Check for citation markers in response (e.g., [1], [Source: ...])\n    const citationMarkers = response.match(/\\[(\\d+|Source:.*?)\\]/g) || [];\n\n    // Check for factual claims without citations\n    const claimPatterns = [\n      /\\b(according to|as stated in|referenced in|cited in)\\b/gi,\n      /\\b(our policy|our documentation|our guide)\\b/gi\n    ];\n\n    const hasClaimMarkers = claimPatterns.some(pattern => pattern.test(response));\n    const hasCitations = citations.length > 0;\n\n    if (hasClaimMarkers && !hasCitations) {\n      return {\n        valid: false,\n        coverage: 0,\n        missing: ['Claims detected but no citations provided']\n      };\n    }\n\n    // Basic validation: ensure citations have required fields\n    const invalidCitations = citations.filter(c => !c.sourceDoc);\n    if (invalidCitations.length > 0) {\n      return {\n        valid: false,\n        coverage: (citations.length - invalidCitations.length) / citations.length * 100,\n        missing: invalidCitations.map((_, i) => `Citation ${i + 1} missing sourceDoc`)\n      };\n    }\n\n    // All validations passed\n    return {\n      valid: true,\n      coverage: 100,\n      missing: []\n    };\n  }\n\n  /**\n   * Extracts citations from structured response\n   */\n  extractCitations(response: any): Citation[] {\n    if (typeof response === 'string') {\n      // Parse citations from markdown-style references\n      const citations: Citation[] = [];\n      const citationRegex = /\\[Source:\\s*([^\\]]+)\\]/g;\n      let match;\n\n      while ((match = citationRegex.exec(response)) !== null) {\n        const parts = match[1].split(',').map(p => p.trim());\n        citations.push({\n          sourceDoc: parts[0],\n          section: parts[1],\n          version: parts[2]\n        });\n      }\n\n      return citations;\n    }\n\n    // Handle structured response with citations array\n    if (response && Array.isArray(response.citations)) {\n      return response.citations;\n    }\n\n    return [];\n  }\n}\n\n/**\n * Approval Manager\n * Handles human-in-the-loop approval workflows\n */\nexport class ApprovalManager {\n  private pendingApprovals: Map<string, ApprovalRequest> = new Map();\n  private approvalHistory: Map<string, ApprovalResponse> = new Map();\n\n  /**\n   * Request approval for a high-risk action\n   */\n  async requestApproval(\n    actionType: string,\n    actionDescription: string,\n    riskLevel: ApprovalRequest['riskLevel'],\n    requiredApprover: string,\n    context: Record<string, any>\n  ): Promise<ApprovalRequest> {\n    const request: ApprovalRequest = {\n      id: `APPROVAL-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      actionType,\n      actionDescription,\n      riskLevel,\n      requiredApprover,\n      context,\n      requestedAt: new Date()\n    };\n\n    this.pendingApprovals.set(request.id, request);\n\n    // TODO: Send notification to approver (email, Slack, webhook, etc.)\n    console.log(`⚠️  Approval required: ${actionDescription}`);\n    console.log(`   Approver: ${requiredApprover}`);\n    console.log(`   Risk Level: ${riskLevel}`);\n    console.log(`   Approval ID: ${request.id}`);\n\n    return request;\n  }\n\n  /**\n   * Record an approval response\n   */\n  async recordApproval(response: ApprovalResponse): Promise<void> {\n    this.approvalHistory.set(response.requestId, response);\n    this.pendingApprovals.delete(response.requestId);\n  }\n\n  /**\n   * Check if an action requires approval based on policy\n   */\n  requiresApproval(\n    actionType: string,\n    actionContext: Record<string, any>\n  ): { required: boolean; approver?: string; riskLevel?: ApprovalRequest['riskLevel'] } {\n    // Define approval policies\n    const policies = [\n      {\n        condition: (type: string, ctx: any) =>\n          type === 'refund' && ctx.amount > 50000,\n        approver: 'finance_director',\n        riskLevel: 'high' as const\n      },\n      {\n        condition: (type: string, ctx: any) =>\n          type === 'contract_edit',\n        approver: 'legal_counsel',\n        riskLevel: 'critical' as const\n      },\n      {\n        condition: (type: string, ctx: any) =>\n          type === 'crm_update' && ctx.dealValue > 100000,\n        approver: 'sales_director',\n        riskLevel: 'medium' as const\n      },\n      {\n        condition: (type: string, ctx: any) =>\n          type === 'data_export' && ctx.pii === true,\n        approver: 'compliance_officer',\n        riskLevel: 'high' as const\n      }\n    ];\n\n    const matchedPolicy = policies.find(p => p.condition(actionType, actionContext));\n\n    if (matchedPolicy) {\n      return {\n        required: true,\n        approver: matchedPolicy.approver,\n        riskLevel: matchedPolicy.riskLevel\n      };\n    }\n\n    return { required: false };\n  }\n\n  /**\n   * Get pending approval by ID\n   */\n  getPendingApproval(id: string): ApprovalRequest | undefined {\n    return this.pendingApprovals.get(id);\n  }\n\n  /**\n   * Get approval status\n   */\n  getApprovalStatus(id: string): ApprovalResponse | undefined {\n    return this.approvalHistory.get(id);\n  }\n}\n\n/**\n * Audit Logger\n * Logs all actions with inputs, outputs, and correlation IDs\n */\nexport class AuditLogger {\n  private logs: AuditLogEntry[] = [];\n  private observabilityEndpoint?: string;\n\n  constructor(observabilityEndpoint?: string) {\n    this.observabilityEndpoint = observabilityEndpoint || process.env.OBSERVABILITY_ENDPOINT;\n  }\n\n  /**\n   * Log an action with full context\n   */\n  async logAction(entry: Omit<AuditLogEntry, 'id' | 'timestamp'>): Promise<string> {\n    const fullEntry: AuditLogEntry = {\n      ...entry,\n      id: `AUDIT-${Date.now()}-${Math.random().toString(36).substr(2, 9)}`,\n      timestamp: new Date()\n    };\n\n    // Redact PII from logs\n    const redactedEntry = this.redactPII(fullEntry);\n\n    // Store locally\n    this.logs.push(redactedEntry);\n\n    // Send to observability endpoint if configured\n    if (this.observabilityEndpoint) {\n      try {\n        await this.sendToObservability(redactedEntry);\n      } catch (error) {\n        console.error('Failed to send audit log to observability endpoint:', error);\n        // Continue - don't fail the action if logging fails\n      }\n    }\n\n    // Also log to console for development\n    console.log(`[AUDIT] ${redactedEntry.actionType}: ${redactedEntry.status}`);\n\n    return fullEntry.id;\n  }\n\n  /**\n   * Redact PII from audit logs\n   */\n  private redactPII(entry: AuditLogEntry): AuditLogEntry {\n    const piiPatterns = [\n      { regex: /\\b\\d{3}-\\d{2}-\\d{4}\\b/g, replacement: 'SSN-REDACTED' }, // SSN\n      { regex: /\\b\\d{16}\\b/g, replacement: 'CC-REDACTED' }, // Credit card\n      { regex: /\\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\\.[A-Z|a-z]{2,}\\b/g, replacement: 'EMAIL-REDACTED' } // Email (optional)\n    ];\n\n    const redactedEntry = { ...entry };\n\n    // Redact inputs\n    if (entry.inputs) {\n      const inputsStr = JSON.stringify(entry.inputs);\n      let redactedStr = inputsStr;\n      for (const pattern of piiPatterns) {\n        redactedStr = redactedStr.replace(pattern.regex, pattern.replacement);\n      }\n      redactedEntry.inputs = JSON.parse(redactedStr);\n    }\n\n    // Redact outputs\n    if (entry.outputs) {\n      const outputsStr = JSON.stringify(entry.outputs);\n      let redactedStr = outputsStr;\n      for (const pattern of piiPatterns) {\n        redactedStr = redactedStr.replace(pattern.regex, pattern.replacement);\n      }\n      redactedEntry.outputs = JSON.parse(redactedStr);\n    }\n\n    return redactedEntry;\n  }\n\n  /**\n   * Send audit log to external observability system\n   */\n  private async sendToObservability(entry: AuditLogEntry): Promise<void> {\n    if (!this.observabilityEndpoint) {\n      return;\n    }\n\n    // TODO: Implement actual HTTP POST to observability endpoint\n    // Use fetch or axios\n    console.log(`Sending audit log to ${this.observabilityEndpoint}:`, entry.id);\n\n    // Example implementation:\n    // await fetch(this.observabilityEndpoint, {\n    //   method: 'POST',\n    //   headers: { 'Content-Type': 'application/json' },\n    //   body: JSON.stringify(entry)\n    // });\n  }\n\n  /**\n   * Query audit logs by correlation ID\n   */\n  getLogsByCorrelationId(correlationId: string): AuditLogEntry[] {\n    return this.logs.filter(log => log.correlationId === correlationId);\n  }\n\n  /**\n   * Query audit logs by user ID\n   */\n  getLogsByUserId(userId: string): AuditLogEntry[] {\n    return this.logs.filter(log => log.userId === userId);\n  }\n\n  /**\n   * Get all logs (for testing/debugging)\n   */\n  getAllLogs(): AuditLogEntry[] {\n    return [...this.logs];\n  }\n}\n\n/**\n * Guardrails Orchestrator\n * Coordinates citation validation, approval flows, and audit logging\n */\nexport class GuardrailsOrchestrator {\n  private citationValidator: CitationValidator;\n  private approvalManager: ApprovalManager;\n  private auditLogger: AuditLogger;\n\n  constructor(observabilityEndpoint?: string) {\n    this.citationValidator = new CitationValidator();\n    this.approvalManager = new ApprovalManager();\n    this.auditLogger = new AuditLogger(observabilityEndpoint);\n  }\n\n  getCitationValidator(): CitationValidator {\n    return this.citationValidator;\n  }\n\n  getApprovalManager(): ApprovalManager {\n    return this.approvalManager;\n  }\n\n  getAuditLogger(): AuditLogger {\n    return this.auditLogger;\n  }\n\n  /**\n   * Execute an action with full guardrail enforcement\n   */\n  async executeWithGuardrails<T>(\n    userId: string,\n    correlationId: string,\n    actionType: string,\n    actionDescription: string,\n    actionFn: () => Promise<T>,\n    inputs: Record<string, any>,\n    options: {\n      requireCitations?: boolean;\n      citations?: Citation[];\n    } = {}\n  ): Promise<T> {\n    // 1. Check if approval is required\n    const approvalCheck = this.approvalManager.requiresApproval(actionType, inputs);\n\n    if (approvalCheck.required) {\n      const approvalRequest = await this.approvalManager.requestApproval(\n        actionType,\n        actionDescription,\n        approvalCheck.riskLevel!,\n        approvalCheck.approver!,\n        inputs\n      );\n\n      // TODO: Wait for approval (implement polling or webhook callback)\n      throw new Error(\n        `Action requires approval from ${approvalCheck.approver}. ` +\n        `Approval ID: ${approvalRequest.id}`\n      );\n    }\n\n    // 2. Validate citations if required\n    if (options.requireCitations) {\n      const citationValidation = this.citationValidator.validateCitations(\n        actionDescription,\n        options.citations || []\n      );\n\n      if (!citationValidation.valid) {\n        await this.auditLogger.logAction({\n          correlationId,\n          userId,\n          actionType,\n          actionDescription,\n          inputs,\n          status: 'failed',\n          errorMessage: `Citation validation failed: ${citationValidation.missing.join(', ')}`,\n          citations: options.citations\n        });\n\n        throw new Error(\n          `Citation requirement not met: ${citationValidation.missing.join(', ')}`\n        );\n      }\n    }\n\n    // 3. Execute action with audit logging\n    try {\n      const result = await actionFn();\n\n      await this.auditLogger.logAction({\n        correlationId,\n        userId,\n        actionType,\n        actionDescription,\n        inputs,\n        outputs: result as any,\n        citations: options.citations,\n        status: 'success'\n      });\n\n      return result;\n    } catch (error) {\n      await this.auditLogger.logAction({\n        correlationId,\n        userId,\n        actionType,\n        actionDescription,\n        inputs,\n        status: 'failed',\n        errorMessage: error instanceof Error ? error.message : String(error),\n        citations: options.citations\n      });\n\n      throw error;\n    }\n  }\n}\n\n// Singleton instance\nlet guardrailsInstance: GuardrailsOrchestrator | null = null;\n\n/**\n * Get or create the guardrails orchestrator instance\n */\nexport function getGuardrails(observabilityEndpoint?: string): GuardrailsOrchestrator {\n  if (!guardrailsInstance) {\n    guardrailsInstance = new GuardrailsOrchestrator(observabilityEndpoint);\n  }\n  return guardrailsInstance;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}