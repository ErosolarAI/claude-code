9ad1ba266437ec90ebb026cdfe2dbff1
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.createUnifiedOpsTools = createUnifiedOpsTools;
var _humanOpsTools = require("./humanOpsTools.js");
function runGenerateTool(args) {
  const name = typeof args['name'] === 'string' && args['name'].trim() ? args['name'].trim() : 'GeneratedTool';
  const description = typeof args['description'] === 'string' ? args['description'] : 'Generated tool';
  const intent = typeof args['intent'] === 'string' ? args['intent'] : 'general';
  return {
    name,
    description,
    intent,
    toolDefinition: {
      name,
      description,
      parameters: {
        type: 'object',
        properties: {},
        additionalProperties: true
      }
    }
  };
}
function createUnifiedOpsTools(workingDir) {
  const humanTools = (0, _humanOpsTools.createHumanOpsTools)();
  const humanIntegration = humanTools.find(t => t.name === 'HumanIntegration');
  return [{
    name: 'UnifiedOps',
    description: 'Unified Ops router for developer + human-in-the-loop workflows.',
    parameters: {
      type: 'object',
      properties: {
        tool: {
          type: 'string',
          description: 'Tool to invoke (list | GenerateTool | HumanIntegration | Bash)'
        },
        args: {
          type: 'object',
          description: 'Arguments for the dispatched tool'
        }
      }
    },
    handler: async ({
      tool,
      args
    }) => {
      const target = (tool ?? '').toString();
      if (!target || target === 'list') {
        return ['Available tools:', '- Bash', '- GenerateTool', '- HumanIntegration'].join('\n');
      }
      if (target === 'GenerateTool') {
        return JSON.stringify(runGenerateTool(args ?? {}), null, 2);
      }
      if (target === 'HumanIntegration' && humanIntegration) {
        return humanIntegration.handler?.(args ?? {});
      }
      if (target === 'Bash') {
        const command = typeof args?.['command'] === 'string' ? args['command'] : '';
        return `Bash command requested in ${workingDir}:\n${command}`;
      }
      return `Unknown tool: ${target}`;
    }
  }, ...humanTools];
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfaHVtYW5PcHNUb29scyIsInJlcXVpcmUiLCJydW5HZW5lcmF0ZVRvb2wiLCJhcmdzIiwibmFtZSIsInRyaW0iLCJkZXNjcmlwdGlvbiIsImludGVudCIsInRvb2xEZWZpbml0aW9uIiwicGFyYW1ldGVycyIsInR5cGUiLCJwcm9wZXJ0aWVzIiwiYWRkaXRpb25hbFByb3BlcnRpZXMiLCJjcmVhdGVVbmlmaWVkT3BzVG9vbHMiLCJ3b3JraW5nRGlyIiwiaHVtYW5Ub29scyIsImNyZWF0ZUh1bWFuT3BzVG9vbHMiLCJodW1hbkludGVncmF0aW9uIiwiZmluZCIsInQiLCJ0b29sIiwiaGFuZGxlciIsInRhcmdldCIsInRvU3RyaW5nIiwiam9pbiIsIkpTT04iLCJzdHJpbmdpZnkiLCJjb21tYW5kIl0sInNvdXJjZXMiOlsidW5pZmllZE9wcy50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgdHlwZSB7IFRvb2xEZWZpbml0aW9uIH0gZnJvbSAnLi4vY29yZS90b29sUnVudGltZS5qcyc7XG5pbXBvcnQgeyBjcmVhdGVIdW1hbk9wc1Rvb2xzIH0gZnJvbSAnLi9odW1hbk9wc1Rvb2xzLmpzJztcblxuaW50ZXJmYWNlIFVuaWZpZWRPcHNBcmdzIHtcbiAgdG9vbD86IHN0cmluZztcbiAgYXJncz86IFJlY29yZDxzdHJpbmcsIHVua25vd24+O1xufVxuXG5mdW5jdGlvbiBydW5HZW5lcmF0ZVRvb2woYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4pOiBvYmplY3Qge1xuICBjb25zdCBuYW1lID0gdHlwZW9mIGFyZ3NbJ25hbWUnXSA9PT0gJ3N0cmluZycgJiYgYXJnc1snbmFtZSddLnRyaW0oKSA/IGFyZ3NbJ25hbWUnXS50cmltKCkgOiAnR2VuZXJhdGVkVG9vbCc7XG4gIGNvbnN0IGRlc2NyaXB0aW9uID0gdHlwZW9mIGFyZ3NbJ2Rlc2NyaXB0aW9uJ10gPT09ICdzdHJpbmcnID8gYXJnc1snZGVzY3JpcHRpb24nXSA6ICdHZW5lcmF0ZWQgdG9vbCc7XG4gIGNvbnN0IGludGVudCA9IHR5cGVvZiBhcmdzWydpbnRlbnQnXSA9PT0gJ3N0cmluZycgPyBhcmdzWydpbnRlbnQnXSA6ICdnZW5lcmFsJztcbiAgcmV0dXJuIHtcbiAgICBuYW1lLFxuICAgIGRlc2NyaXB0aW9uLFxuICAgIGludGVudCxcbiAgICB0b29sRGVmaW5pdGlvbjoge1xuICAgICAgbmFtZSxcbiAgICAgIGRlc2NyaXB0aW9uLFxuICAgICAgcGFyYW1ldGVyczogeyB0eXBlOiAnb2JqZWN0JywgcHJvcGVydGllczoge30sIGFkZGl0aW9uYWxQcm9wZXJ0aWVzOiB0cnVlIH0sXG4gICAgfSxcbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVVuaWZpZWRPcHNUb29scyh3b3JraW5nRGlyOiBzdHJpbmcpOiBUb29sRGVmaW5pdGlvbltdIHtcbiAgY29uc3QgaHVtYW5Ub29scyA9IGNyZWF0ZUh1bWFuT3BzVG9vbHMoKTtcbiAgY29uc3QgaHVtYW5JbnRlZ3JhdGlvbiA9IGh1bWFuVG9vbHMuZmluZCgodCkgPT4gdC5uYW1lID09PSAnSHVtYW5JbnRlZ3JhdGlvbicpO1xuXG4gIHJldHVybiBbXG4gICAge1xuICAgICAgbmFtZTogJ1VuaWZpZWRPcHMnLFxuICAgICAgZGVzY3JpcHRpb246ICdVbmlmaWVkIE9wcyByb3V0ZXIgZm9yIGRldmVsb3BlciArIGh1bWFuLWluLXRoZS1sb29wIHdvcmtmbG93cy4nLFxuICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgcHJvcGVydGllczoge1xuICAgICAgICAgIHRvb2w6IHsgdHlwZTogJ3N0cmluZycsIGRlc2NyaXB0aW9uOiAnVG9vbCB0byBpbnZva2UgKGxpc3QgfCBHZW5lcmF0ZVRvb2wgfCBIdW1hbkludGVncmF0aW9uIHwgQmFzaCknIH0sXG4gICAgICAgICAgYXJnczogeyB0eXBlOiAnb2JqZWN0JywgZGVzY3JpcHRpb246ICdBcmd1bWVudHMgZm9yIHRoZSBkaXNwYXRjaGVkIHRvb2wnIH0sXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgaGFuZGxlcjogYXN5bmMgKHsgdG9vbCwgYXJncyB9OiBVbmlmaWVkT3BzQXJncykgPT4ge1xuICAgICAgICBjb25zdCB0YXJnZXQgPSAodG9vbCA/PyAnJykudG9TdHJpbmcoKTtcbiAgICAgICAgaWYgKCF0YXJnZXQgfHwgdGFyZ2V0ID09PSAnbGlzdCcpIHtcbiAgICAgICAgICByZXR1cm4gW1xuICAgICAgICAgICAgJ0F2YWlsYWJsZSB0b29sczonLFxuICAgICAgICAgICAgJy0gQmFzaCcsXG4gICAgICAgICAgICAnLSBHZW5lcmF0ZVRvb2wnLFxuICAgICAgICAgICAgJy0gSHVtYW5JbnRlZ3JhdGlvbicsXG4gICAgICAgICAgXS5qb2luKCdcXG4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQgPT09ICdHZW5lcmF0ZVRvb2wnKSB7XG4gICAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHJ1bkdlbmVyYXRlVG9vbChhcmdzID8/IHt9KSwgbnVsbCwgMik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGFyZ2V0ID09PSAnSHVtYW5JbnRlZ3JhdGlvbicgJiYgaHVtYW5JbnRlZ3JhdGlvbikge1xuICAgICAgICAgIHJldHVybiBodW1hbkludGVncmF0aW9uLmhhbmRsZXI/LihhcmdzID8/IHt9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YXJnZXQgPT09ICdCYXNoJykge1xuICAgICAgICAgIGNvbnN0IGNvbW1hbmQgPSB0eXBlb2YgYXJncz8uWydjb21tYW5kJ10gPT09ICdzdHJpbmcnID8gYXJnc1snY29tbWFuZCddIDogJyc7XG4gICAgICAgICAgcmV0dXJuIGBCYXNoIGNvbW1hbmQgcmVxdWVzdGVkIGluICR7d29ya2luZ0Rpcn06XFxuJHtjb21tYW5kfWA7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gYFVua25vd24gdG9vbDogJHt0YXJnZXR9YDtcbiAgICAgIH0sXG4gICAg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