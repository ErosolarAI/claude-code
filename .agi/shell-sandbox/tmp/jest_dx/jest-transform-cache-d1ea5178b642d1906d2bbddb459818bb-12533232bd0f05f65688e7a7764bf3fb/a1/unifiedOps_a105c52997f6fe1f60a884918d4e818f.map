{"version":3,"names":["_humanOpsTools","require","runGenerateTool","args","name","trim","description","intent","toolDefinition","parameters","type","properties","additionalProperties","createUnifiedOpsTools","workingDir","humanTools","createHumanOpsTools","humanIntegration","find","t","tool","handler","target","toString","join","JSON","stringify","command"],"sources":["unifiedOps.ts"],"sourcesContent":["import type { ToolDefinition } from '../core/toolRuntime.js';\nimport { createHumanOpsTools } from './humanOpsTools.js';\n\ninterface UnifiedOpsArgs {\n  tool?: string;\n  args?: Record<string, unknown>;\n}\n\nfunction runGenerateTool(args: Record<string, unknown>): object {\n  const name = typeof args['name'] === 'string' && args['name'].trim() ? args['name'].trim() : 'GeneratedTool';\n  const description = typeof args['description'] === 'string' ? args['description'] : 'Generated tool';\n  const intent = typeof args['intent'] === 'string' ? args['intent'] : 'general';\n  return {\n    name,\n    description,\n    intent,\n    toolDefinition: {\n      name,\n      description,\n      parameters: { type: 'object', properties: {}, additionalProperties: true },\n    },\n  };\n}\n\nexport function createUnifiedOpsTools(workingDir: string): ToolDefinition[] {\n  const humanTools = createHumanOpsTools();\n  const humanIntegration = humanTools.find((t) => t.name === 'HumanIntegration');\n\n  return [\n    {\n      name: 'UnifiedOps',\n      description: 'Unified Ops router for developer + human-in-the-loop workflows.',\n      parameters: {\n        type: 'object',\n        properties: {\n          tool: { type: 'string', description: 'Tool to invoke (list | GenerateTool | HumanIntegration | Bash)' },\n          args: { type: 'object', description: 'Arguments for the dispatched tool' },\n        },\n      },\n      handler: async ({ tool, args }: UnifiedOpsArgs) => {\n        const target = (tool ?? '').toString();\n        if (!target || target === 'list') {\n          return [\n            'Available tools:',\n            '- Bash',\n            '- GenerateTool',\n            '- HumanIntegration',\n          ].join('\\n');\n        }\n\n        if (target === 'GenerateTool') {\n          return JSON.stringify(runGenerateTool(args ?? {}), null, 2);\n        }\n\n        if (target === 'HumanIntegration' && humanIntegration) {\n          return humanIntegration.handler?.(args ?? {});\n        }\n\n        if (target === 'Bash') {\n          const command = typeof args?.['command'] === 'string' ? args['command'] : '';\n          return `Bash command requested in ${workingDir}:\\n${command}`;\n        }\n\n        return `Unknown tool: ${target}`;\n      },\n    },\n    ...humanTools,\n  ];\n}\n"],"mappings":";;;;;;AACA,IAAAA,cAAA,GAAAC,OAAA;AAOA,SAASC,eAAeA,CAACC,IAA6B,EAAU;EAC9D,MAAMC,IAAI,GAAG,OAAOD,IAAI,CAAC,MAAM,CAAC,KAAK,QAAQ,IAAIA,IAAI,CAAC,MAAM,CAAC,CAACE,IAAI,CAAC,CAAC,GAAGF,IAAI,CAAC,MAAM,CAAC,CAACE,IAAI,CAAC,CAAC,GAAG,eAAe;EAC5G,MAAMC,WAAW,GAAG,OAAOH,IAAI,CAAC,aAAa,CAAC,KAAK,QAAQ,GAAGA,IAAI,CAAC,aAAa,CAAC,GAAG,gBAAgB;EACpG,MAAMI,MAAM,GAAG,OAAOJ,IAAI,CAAC,QAAQ,CAAC,KAAK,QAAQ,GAAGA,IAAI,CAAC,QAAQ,CAAC,GAAG,SAAS;EAC9E,OAAO;IACLC,IAAI;IACJE,WAAW;IACXC,MAAM;IACNC,cAAc,EAAE;MACdJ,IAAI;MACJE,WAAW;MACXG,UAAU,EAAE;QAAEC,IAAI,EAAE,QAAQ;QAAEC,UAAU,EAAE,CAAC,CAAC;QAAEC,oBAAoB,EAAE;MAAK;IAC3E;EACF,CAAC;AACH;AAEO,SAASC,qBAAqBA,CAACC,UAAkB,EAAoB;EAC1E,MAAMC,UAAU,GAAG,IAAAC,kCAAmB,EAAC,CAAC;EACxC,MAAMC,gBAAgB,GAAGF,UAAU,CAACG,IAAI,CAAEC,CAAC,IAAKA,CAAC,CAACf,IAAI,KAAK,kBAAkB,CAAC;EAE9E,OAAO,CACL;IACEA,IAAI,EAAE,YAAY;IAClBE,WAAW,EAAE,iEAAiE;IAC9EG,UAAU,EAAE;MACVC,IAAI,EAAE,QAAQ;MACdC,UAAU,EAAE;QACVS,IAAI,EAAE;UAAEV,IAAI,EAAE,QAAQ;UAAEJ,WAAW,EAAE;QAAiE,CAAC;QACvGH,IAAI,EAAE;UAAEO,IAAI,EAAE,QAAQ;UAAEJ,WAAW,EAAE;QAAoC;MAC3E;IACF,CAAC;IACDe,OAAO,EAAE,MAAAA,CAAO;MAAED,IAAI;MAAEjB;IAAqB,CAAC,KAAK;MACjD,MAAMmB,MAAM,GAAG,CAACF,IAAI,IAAI,EAAE,EAAEG,QAAQ,CAAC,CAAC;MACtC,IAAI,CAACD,MAAM,IAAIA,MAAM,KAAK,MAAM,EAAE;QAChC,OAAO,CACL,kBAAkB,EAClB,QAAQ,EACR,gBAAgB,EAChB,oBAAoB,CACrB,CAACE,IAAI,CAAC,IAAI,CAAC;MACd;MAEA,IAAIF,MAAM,KAAK,cAAc,EAAE;QAC7B,OAAOG,IAAI,CAACC,SAAS,CAACxB,eAAe,CAACC,IAAI,IAAI,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,CAAC,CAAC;MAC7D;MAEA,IAAImB,MAAM,KAAK,kBAAkB,IAAIL,gBAAgB,EAAE;QACrD,OAAOA,gBAAgB,CAACI,OAAO,GAAGlB,IAAI,IAAI,CAAC,CAAC,CAAC;MAC/C;MAEA,IAAImB,MAAM,KAAK,MAAM,EAAE;QACrB,MAAMK,OAAO,GAAG,OAAOxB,IAAI,GAAG,SAAS,CAAC,KAAK,QAAQ,GAAGA,IAAI,CAAC,SAAS,CAAC,GAAG,EAAE;QAC5E,OAAO,6BAA6BW,UAAU,MAAMa,OAAO,EAAE;MAC/D;MAEA,OAAO,iBAAiBL,MAAM,EAAE;IAClC;EACF,CAAC,EACD,GAAGP,UAAU,CACd;AACH","ignoreList":[]}