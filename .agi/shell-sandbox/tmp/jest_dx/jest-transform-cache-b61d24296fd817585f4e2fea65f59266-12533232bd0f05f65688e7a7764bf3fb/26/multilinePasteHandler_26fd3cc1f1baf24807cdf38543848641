761f83d62ebf4f67a1ab85de7422f8cb
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.formatPasteSummaryForDisplay = formatPasteSummaryForDisplay;
exports.generatePasteSummary = generatePasteSummary;
exports.isMultilinePaste = isMultilinePaste;
exports.processPaste = processPaste;
/**
 * Handles multi-line paste detection and summarization
 * Provides graceful handling of large text blocks pasted into chat
 */

/**
 * Detect if text is a multi-line paste (3+ lines)
 */
function isMultilinePaste(text) {
  const lines = text.split('\n').filter(line => line.trim().length > 0);
  return lines.length >= 3;
}

/**
 * Detect likely programming language from content
 */
function detectLanguage(text) {
  const patterns = {
    javascript: /\b(const|let|var|function|async|await|import|export|=>)\b/,
    typescript: /\b(interface|type|enum|namespace|declare|as const)\b/,
    python: /\b(def|class|import|from|if __name__|async def)\b/,
    json: /^\s*(?:\{|\[).*(?:\}|\])\s*$/,
    html: /^<[a-z]/i,
    css: /^\s*[.#[]?[\w-]+\s*{/,
    sql: /\b(SELECT|FROM|WHERE|INSERT|UPDATE|DELETE|CREATE|TABLE)\b/i,
    bash: /^#!/,
    yaml: /^[\w-]+:\s*\S/m
  };
  for (const [lang, pattern] of Object.entries(patterns)) {
    if (pattern.test(text)) {
      return lang;
    }
  }
  return undefined;
}

/**
 * Generate a concise summary of pasted content
 */
function generatePasteSummary(text) {
  const lines = text.split('\n');
  const nonEmptyLines = lines.filter(line => line.trim().length > 0);
  const charCount = text.length;
  const lineCount = nonEmptyLines.length;
  const language = detectLanguage(text);

  // Create preview: first 60 chars or first line
  let preview = nonEmptyLines[0]?.substring(0, 60) || '';
  if (preview.length === 60) {
    preview += '...';
  }

  // Generate summary description
  const summaryParts = [];
  if (language) {
    summaryParts.push(`${language.toUpperCase()}`);
  }
  summaryParts.push(`${lineCount} line${lineCount !== 1 ? 's' : ''}`);
  summaryParts.push(`${charCount} char${charCount !== 1 ? 's' : ''}`);
  const summary = `ðŸ“‹ Pasted: ${summaryParts.join(' â€¢ ')}`;
  return {
    isMultiline: true,
    lineCount,
    charCount,
    preview,
    language,
    summary
  };
}

/**
 * Format a paste summary for display
 */
function formatPasteSummaryForDisplay(summary) {
  return `${summary.summary}\n"${summary.preview}"`;
}

/**
 * Create a display-friendly version of multi-line content
 * Returns both the summary for display and the full content for sending
 */

function processPaste(text) {
  const summary = generatePasteSummary(text);
  const displaySummary = formatPasteSummaryForDisplay(summary);
  return {
    displaySummary,
    fullContent: text,
    metadata: summary
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJpc011bHRpbGluZVBhc3RlIiwidGV4dCIsImxpbmVzIiwic3BsaXQiLCJmaWx0ZXIiLCJsaW5lIiwidHJpbSIsImxlbmd0aCIsImRldGVjdExhbmd1YWdlIiwicGF0dGVybnMiLCJqYXZhc2NyaXB0IiwidHlwZXNjcmlwdCIsInB5dGhvbiIsImpzb24iLCJodG1sIiwiY3NzIiwic3FsIiwiYmFzaCIsInlhbWwiLCJsYW5nIiwicGF0dGVybiIsIk9iamVjdCIsImVudHJpZXMiLCJ0ZXN0IiwidW5kZWZpbmVkIiwiZ2VuZXJhdGVQYXN0ZVN1bW1hcnkiLCJub25FbXB0eUxpbmVzIiwiY2hhckNvdW50IiwibGluZUNvdW50IiwibGFuZ3VhZ2UiLCJwcmV2aWV3Iiwic3Vic3RyaW5nIiwic3VtbWFyeVBhcnRzIiwicHVzaCIsInRvVXBwZXJDYXNlIiwic3VtbWFyeSIsImpvaW4iLCJpc011bHRpbGluZSIsImZvcm1hdFBhc3RlU3VtbWFyeUZvckRpc3BsYXkiLCJwcm9jZXNzUGFzdGUiLCJkaXNwbGF5U3VtbWFyeSIsImZ1bGxDb250ZW50IiwibWV0YWRhdGEiXSwic291cmNlcyI6WyJtdWx0aWxpbmVQYXN0ZUhhbmRsZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBIYW5kbGVzIG11bHRpLWxpbmUgcGFzdGUgZGV0ZWN0aW9uIGFuZCBzdW1tYXJpemF0aW9uXG4gKiBQcm92aWRlcyBncmFjZWZ1bCBoYW5kbGluZyBvZiBsYXJnZSB0ZXh0IGJsb2NrcyBwYXN0ZWQgaW50byBjaGF0XG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBQYXN0ZVN1bW1hcnkge1xuICBpc011bHRpbGluZTogYm9vbGVhbjtcbiAgbGluZUNvdW50OiBudW1iZXI7XG4gIGNoYXJDb3VudDogbnVtYmVyO1xuICBwcmV2aWV3OiBzdHJpbmc7XG4gIGxhbmd1YWdlPzogc3RyaW5nO1xuICBzdW1tYXJ5OiBzdHJpbmc7XG59XG5cbi8qKlxuICogRGV0ZWN0IGlmIHRleHQgaXMgYSBtdWx0aS1saW5lIHBhc3RlICgzKyBsaW5lcylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTXVsdGlsaW5lUGFzdGUodGV4dDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGNvbnN0IGxpbmVzID0gdGV4dC5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gIHJldHVybiBsaW5lcy5sZW5ndGggPj0gMztcbn1cblxuLyoqXG4gKiBEZXRlY3QgbGlrZWx5IHByb2dyYW1taW5nIGxhbmd1YWdlIGZyb20gY29udGVudFxuICovXG5mdW5jdGlvbiBkZXRlY3RMYW5ndWFnZSh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQge1xuICBjb25zdCBwYXR0ZXJuczogUmVjb3JkPHN0cmluZywgUmVnRXhwPiA9IHtcbiAgICBqYXZhc2NyaXB0OiAvXFxiKGNvbnN0fGxldHx2YXJ8ZnVuY3Rpb258YXN5bmN8YXdhaXR8aW1wb3J0fGV4cG9ydHw9PilcXGIvLFxuICAgIHR5cGVzY3JpcHQ6IC9cXGIoaW50ZXJmYWNlfHR5cGV8ZW51bXxuYW1lc3BhY2V8ZGVjbGFyZXxhcyBjb25zdClcXGIvLFxuICAgIHB5dGhvbjogL1xcYihkZWZ8Y2xhc3N8aW1wb3J0fGZyb218aWYgX19uYW1lX198YXN5bmMgZGVmKVxcYi8sXG4gICAganNvbjogL15cXHMqKD86XFx7fFxcWykuKig/OlxcfXxcXF0pXFxzKiQvLFxuICAgIGh0bWw6IC9ePFthLXpdL2ksXG4gICAgY3NzOiAvXlxccypbLiNbXT9bXFx3LV0rXFxzKnsvLFxuICAgIHNxbDogL1xcYihTRUxFQ1R8RlJPTXxXSEVSRXxJTlNFUlR8VVBEQVRFfERFTEVURXxDUkVBVEV8VEFCTEUpXFxiL2ksXG4gICAgYmFzaDogL14jIS8sXG4gICAgeWFtbDogL15bXFx3LV0rOlxccypcXFMvbSxcbiAgfTtcblxuICBmb3IgKGNvbnN0IFtsYW5nLCBwYXR0ZXJuXSBvZiBPYmplY3QuZW50cmllcyhwYXR0ZXJucykpIHtcbiAgICBpZiAocGF0dGVybi50ZXN0KHRleHQpKSB7XG4gICAgICByZXR1cm4gbGFuZztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEdlbmVyYXRlIGEgY29uY2lzZSBzdW1tYXJ5IG9mIHBhc3RlZCBjb250ZW50XG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZVBhc3RlU3VtbWFyeSh0ZXh0OiBzdHJpbmcpOiBQYXN0ZVN1bW1hcnkge1xuICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xcbicpO1xuICBjb25zdCBub25FbXB0eUxpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gIGNvbnN0IGNoYXJDb3VudCA9IHRleHQubGVuZ3RoO1xuICBjb25zdCBsaW5lQ291bnQgPSBub25FbXB0eUxpbmVzLmxlbmd0aDtcbiAgY29uc3QgbGFuZ3VhZ2UgPSBkZXRlY3RMYW5ndWFnZSh0ZXh0KTtcblxuICAvLyBDcmVhdGUgcHJldmlldzogZmlyc3QgNjAgY2hhcnMgb3IgZmlyc3QgbGluZVxuICBsZXQgcHJldmlldyA9IG5vbkVtcHR5TGluZXNbMF0/LnN1YnN0cmluZygwLCA2MCkgfHwgJyc7XG4gIGlmIChwcmV2aWV3Lmxlbmd0aCA9PT0gNjApIHtcbiAgICBwcmV2aWV3ICs9ICcuLi4nO1xuICB9XG5cbiAgLy8gR2VuZXJhdGUgc3VtbWFyeSBkZXNjcmlwdGlvblxuICBjb25zdCBzdW1tYXJ5UGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgaWYgKGxhbmd1YWdlKSB7XG4gICAgc3VtbWFyeVBhcnRzLnB1c2goYCR7bGFuZ3VhZ2UudG9VcHBlckNhc2UoKX1gKTtcbiAgfVxuXG4gIHN1bW1hcnlQYXJ0cy5wdXNoKGAke2xpbmVDb3VudH0gbGluZSR7bGluZUNvdW50ICE9PSAxID8gJ3MnIDogJyd9YCk7XG4gIHN1bW1hcnlQYXJ0cy5wdXNoKGAke2NoYXJDb3VudH0gY2hhciR7Y2hhckNvdW50ICE9PSAxID8gJ3MnIDogJyd9YCk7XG5cbiAgY29uc3Qgc3VtbWFyeSA9IGDwn5OLIFBhc3RlZDogJHtzdW1tYXJ5UGFydHMuam9pbignIOKAoiAnKX1gO1xuXG4gIHJldHVybiB7XG4gICAgaXNNdWx0aWxpbmU6IHRydWUsXG4gICAgbGluZUNvdW50LFxuICAgIGNoYXJDb3VudCxcbiAgICBwcmV2aWV3LFxuICAgIGxhbmd1YWdlLFxuICAgIHN1bW1hcnksXG4gIH07XG59XG5cbi8qKlxuICogRm9ybWF0IGEgcGFzdGUgc3VtbWFyeSBmb3IgZGlzcGxheVxuICovXG5leHBvcnQgZnVuY3Rpb24gZm9ybWF0UGFzdGVTdW1tYXJ5Rm9yRGlzcGxheShzdW1tYXJ5OiBQYXN0ZVN1bW1hcnkpOiBzdHJpbmcge1xuICByZXR1cm4gYCR7c3VtbWFyeS5zdW1tYXJ5fVxcblwiJHtzdW1tYXJ5LnByZXZpZXd9XCJgO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIGRpc3BsYXktZnJpZW5kbHkgdmVyc2lvbiBvZiBtdWx0aS1saW5lIGNvbnRlbnRcbiAqIFJldHVybnMgYm90aCB0aGUgc3VtbWFyeSBmb3IgZGlzcGxheSBhbmQgdGhlIGZ1bGwgY29udGVudCBmb3Igc2VuZGluZ1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb2Nlc3NlZFBhc3RlIHtcbiAgZGlzcGxheVN1bW1hcnk6IHN0cmluZztcbiAgZnVsbENvbnRlbnQ6IHN0cmluZztcbiAgbWV0YWRhdGE6IFBhc3RlU3VtbWFyeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHByb2Nlc3NQYXN0ZSh0ZXh0OiBzdHJpbmcpOiBQcm9jZXNzZWRQYXN0ZSB7XG4gIGNvbnN0IHN1bW1hcnkgPSBnZW5lcmF0ZVBhc3RlU3VtbWFyeSh0ZXh0KTtcbiAgY29uc3QgZGlzcGxheVN1bW1hcnkgPSBmb3JtYXRQYXN0ZVN1bW1hcnlGb3JEaXNwbGF5KHN1bW1hcnkpO1xuXG4gIHJldHVybiB7XG4gICAgZGlzcGxheVN1bW1hcnksXG4gICAgZnVsbENvbnRlbnQ6IHRleHQsXG4gICAgbWV0YWRhdGE6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