{"version":3,"names":["TRUNCATE","exports","SHORT_PATH","LONG_PATH","DESCRIPTION","QUERY","PATTERN","PREVIEW_LINE","ERROR_MESSAGE","COMMAND","DEFAULT","ELLIPSIS","moreIndicator","count","PROGRESS","BAR_WIDTH","COMPACT_WIDTH","MICRO_WIDTH","CHARS","filled","empty","partial","CONTEXT_THRESHOLDS","CRITICAL","WARNING","INFO","COVERAGE_THRESHOLDS","SUCCESS","TOKEN_THRESHOLDS","HIGH","MEDIUM","DISPLAY_LIMITS","INLINE_PANEL_MAX_LINES","MIN_WIDTH","MAX_THOUGHT_WIDTH","MAX_INLINE_ARGS","MAX_COLLAPSED_RESULTS","PREVIEW_LINES","TOOL_RESULT_PREVIEW_LINES","SEARCH_PREVIEW_FILES","GREP_PREVIEW_MATCHES","TIMING","MIN_SHOW_DURATION","STATUS_DEBOUNCE","ANIMATION_INTERVAL","SPINNER_INTERVAL","UI_STRINGS","INTERRUPT_HINT","EXPAND_HINT","NO_MATCHES","NO_OUTPUT","LOADING","FAILURE","PENDING","truncateString","text","maxLength","ellipsis","length","truncateAt","Math","max","slice","truncatePath","path","keepLength","calculatePercentage","current","total","Number","isFinite","min","round","clampPercentage","value","getContextColor","percentage","colors","pct","error","warning","info","success","getCoverageColor","getTokenColor","formatDurationMs","ms","seconds","floor","minutes","hours","remainingMinutes","remainingSeconds","formatElapsedSeconds","calculateUsableWidth","terminalWidth","margins","normalizeLineCount","lines","defaultValue"],"sources":["uiConstants.ts"],"sourcesContent":["/**\n * Centralized UI Constants\n *\n * Single source of truth for all magic numbers, thresholds, and display limits\n * used throughout the UI layer. Prevents inconsistencies and makes tuning easier.\n */\n\n// ============================================================================\n// TRUNCATION LIMITS\n// ============================================================================\n\n/**\n * Standard truncation lengths for different content types.\n * All values account for ellipsis character (…) which is 1 char.\n */\nexport const TRUNCATE = {\n  /** Short paths in compact displays */\n  SHORT_PATH: 40,\n  /** Full paths in expanded displays */\n  LONG_PATH: 80,\n  /** Task/tool descriptions */\n  DESCRIPTION: 50,\n  /** Search queries and patterns */\n  QUERY: 40,\n  /** Pattern display in search results */\n  PATTERN: 30,\n  /** Preview lines in collapsed content */\n  PREVIEW_LINE: 70,\n  /** Error messages */\n  ERROR_MESSAGE: 80,\n  /** Command display */\n  COMMAND: 100,\n  /** Generic content truncation */\n  DEFAULT: 40,\n} as const;\n\n/**\n * The ellipsis character to use for truncation.\n * Unicode ellipsis (…) is preferred over three dots (...) for consistency.\n */\nexport const ELLIPSIS = '…';\n\n/**\n * Format for showing additional hidden items.\n */\nexport const moreIndicator = (count: number): string => `+${count} more`;\n\n// ============================================================================\n// PROGRESS BAR CONFIGURATION\n// ============================================================================\n\nexport const PROGRESS = {\n  /** Default width for progress bars */\n  BAR_WIDTH: 20,\n  /** Compact progress bar width */\n  COMPACT_WIDTH: 15,\n  /** Micro progress indicator width */\n  MICRO_WIDTH: 10,\n  /** Progress bar characters */\n  CHARS: {\n    filled: '█',\n    empty: '░',\n    partial: ['░', '▒', '▓', '█'],\n  },\n} as const;\n\n// ============================================================================\n// STATUS/HEALTH THRESHOLDS\n// ============================================================================\n\n/**\n * Color thresholds for context/memory usage indicators.\n * Values are percentages (0-100).\n */\nexport const CONTEXT_THRESHOLDS = {\n  /** Critical - show error color */\n  CRITICAL: 90,\n  /** Warning - show warning color */\n  WARNING: 70,\n  /** Info - show info color */\n  INFO: 50,\n  // Below INFO threshold shows success color\n} as const;\n\n/**\n * Color thresholds for test coverage displays.\n */\nexport const COVERAGE_THRESHOLDS = {\n  /** Good coverage - show success color */\n  SUCCESS: 80,\n  /** Acceptable coverage - show warning color */\n  WARNING: 60,\n  // Below WARNING threshold shows error color\n} as const;\n\n/**\n * Color thresholds for token usage displays.\n */\nexport const TOKEN_THRESHOLDS = {\n  /** High usage - show error color */\n  HIGH: 90,\n  /** Medium usage - show warning color */\n  MEDIUM: 70,\n  // Below MEDIUM shows success color\n} as const;\n\n// ============================================================================\n// DISPLAY LIMITS\n// ============================================================================\n\nexport const DISPLAY_LIMITS = {\n  /** Maximum lines to show in inline panels before collapsing */\n  INLINE_PANEL_MAX_LINES: 64,\n  /** Minimum usable width for content */\n  MIN_WIDTH: 20,\n  /** Default max width for thinking/reasoning blocks */\n  MAX_THOUGHT_WIDTH: 72,\n  /** Maximum tool arguments to display inline */\n  MAX_INLINE_ARGS: 5,\n  /** Maximum collapsed tool results to keep in memory */\n  MAX_COLLAPSED_RESULTS: 50,\n  /** Preview lines for expandable content */\n  PREVIEW_LINES: 5,\n  /** Preview lines for tool results */\n  TOOL_RESULT_PREVIEW_LINES: 3,\n  /** Maximum files to show in search results preview */\n  SEARCH_PREVIEW_FILES: 4,\n  /** Maximum matches to show in grep results preview */\n  GREP_PREVIEW_MATCHES: 3,\n} as const;\n\n// ============================================================================\n// TIMING CONSTANTS\n// ============================================================================\n\nexport const TIMING = {\n  /** Minimum duration (ms) to show elapsed time */\n  MIN_SHOW_DURATION: 1000,\n  /** Debounce delay for status updates (ms) */\n  STATUS_DEBOUNCE: 100,\n  /** Animation frame interval (ms) */\n  ANIMATION_INTERVAL: 80,\n  /** Spinner animation interval (ms) */\n  SPINNER_INTERVAL: 100,\n} as const;\n\n// ============================================================================\n// UI STRINGS\n// ============================================================================\n\nexport const UI_STRINGS = {\n  /** Interrupt hint shown during long operations */\n  INTERRUPT_HINT: 'esc to interrupt',\n  /** Expand hint for collapsed content */\n  EXPAND_HINT: 'ctrl+o to expand',\n  /** No matches found */\n  NO_MATCHES: 'No matches found',\n  /** No output */\n  NO_OUTPUT: 'No output',\n  /** Loading indicator */\n  LOADING: 'Loading…',\n  /** Success indicator */\n  SUCCESS: '✓',\n  /** Failure indicator */\n  FAILURE: '✗',\n  /** Warning indicator */\n  WARNING: '⚠',\n  /** Info indicator */\n  INFO: 'ℹ',\n  /** Pending indicator */\n  PENDING: '○',\n} as const;\n\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n\n/**\n * Safely truncate a string with ellipsis.\n * Handles edge cases and ensures consistent truncation.\n */\nexport function truncateString(\n  text: string,\n  maxLength: number,\n  ellipsis: string = ELLIPSIS\n): string {\n  if (!text || maxLength < 1) return '';\n  if (text.length <= maxLength) return text;\n\n  const truncateAt = Math.max(1, maxLength - ellipsis.length);\n  return text.slice(0, truncateAt) + ellipsis;\n}\n\n/**\n * Truncate a file path, preserving the end (most relevant part).\n * Shows \"…/path/to/file.ts\" instead of \"/very/long/pat…\"\n */\nexport function truncatePath(\n  path: string,\n  maxLength: number,\n  ellipsis: string = ELLIPSIS\n): string {\n  if (!path || maxLength < 1) return '';\n  if (path.length <= maxLength) return path;\n\n  // Keep the end of the path (most relevant)\n  const keepLength = Math.max(1, maxLength - ellipsis.length);\n  return ellipsis + path.slice(-keepLength);\n}\n\n/**\n * Calculate percentage with bounds checking.\n * Always returns a value between 0 and 100.\n */\nexport function calculatePercentage(current: number, total: number): number {\n  if (total <= 0 || !Number.isFinite(current) || !Number.isFinite(total)) {\n    return 0;\n  }\n  return Math.min(100, Math.max(0, Math.round((current / total) * 100)));\n}\n\n/**\n * Clamp a percentage value to valid range.\n */\nexport function clampPercentage(value: number): number {\n  if (!Number.isFinite(value)) return 0;\n  return Math.min(100, Math.max(0, value));\n}\n\n/**\n * Get color function based on context usage percentage.\n */\nexport function getContextColor<T>(\n  percentage: number,\n  colors: { error: T; warning: T; info: T; success: T }\n): T {\n  const pct = clampPercentage(percentage);\n  if (pct > CONTEXT_THRESHOLDS.CRITICAL) return colors.error;\n  if (pct > CONTEXT_THRESHOLDS.WARNING) return colors.warning;\n  if (pct > CONTEXT_THRESHOLDS.INFO) return colors.info;\n  return colors.success;\n}\n\n/**\n * Get color function based on coverage percentage.\n */\nexport function getCoverageColor<T>(\n  percentage: number,\n  colors: { success: T; warning: T; error: T }\n): T {\n  const pct = clampPercentage(percentage);\n  if (pct >= COVERAGE_THRESHOLDS.SUCCESS) return colors.success;\n  if (pct >= COVERAGE_THRESHOLDS.WARNING) return colors.warning;\n  return colors.error;\n}\n\n/**\n * Get color function based on token usage percentage.\n */\nexport function getTokenColor<T>(\n  percentage: number,\n  colors: { error: T; warning: T; success: T }\n): T {\n  const pct = clampPercentage(percentage);\n  if (pct >= TOKEN_THRESHOLDS.HIGH) return colors.error;\n  if (pct >= TOKEN_THRESHOLDS.MEDIUM) return colors.warning;\n  return colors.success;\n}\n\n/**\n * Format duration in milliseconds to human-readable string.\n * Handles ms, seconds, minutes, and hours.\n */\nexport function formatDurationMs(ms: number): string {\n  if (!Number.isFinite(ms) || ms < 0) return '0ms';\n\n  if (ms < 1000) {\n    return `${Math.round(ms)}ms`;\n  }\n\n  const seconds = Math.floor(ms / 1000);\n  const minutes = Math.floor(seconds / 60);\n  const hours = Math.floor(minutes / 60);\n\n  if (hours > 0) {\n    const remainingMinutes = minutes % 60;\n    return `${hours}h ${remainingMinutes}m`;\n  }\n\n  if (minutes > 0) {\n    const remainingSeconds = seconds % 60;\n    return `${minutes}m ${remainingSeconds}s`;\n  }\n\n  return `${seconds}s`;\n}\n\n/**\n * Format elapsed time from seconds.\n */\nexport function formatElapsedSeconds(seconds: number): string {\n  return formatDurationMs(seconds * 1000);\n}\n\n/**\n * Calculate usable width accounting for margins.\n */\nexport function calculateUsableWidth(\n  terminalWidth: number,\n  margins: number = 4\n): number {\n  return Math.max(DISPLAY_LIMITS.MIN_WIDTH, terminalWidth - margins);\n}\n\n/**\n * Validate and normalize a line count.\n */\nexport function normalizeLineCount(lines: number, defaultValue: number = 0): number {\n  if (!Number.isFinite(lines) || lines < 0) return defaultValue;\n  return Math.floor(lines);\n}\n"],"mappings":"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","ignoreList":[]}