cf7a39823539ecbeb0d52f8da466a856
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildError = buildError;
function buildError(action, error, context) {
  const message = error instanceof Error ? error.message : String(error);
  const contextDetails = formatContext(context);
  return contextDetails ? `Error ${action}: ${message} (${contextDetails})` : `Error ${action}: ${message}`;
}
function formatContext(context) {
  if (!context) {
    return '';
  }
  const entries = Object.entries(context).filter(([, value]) => value !== undefined && value !== null);
  if (entries.length === 0) {
    return '';
  }
  return entries.map(([key, value]) => `${formatContextKey(key)} ${formatContextValue(value)}`).join(', ');
}
function formatContextKey(key) {
  if (!key) {
    return key;
  }
  return key.slice(0, 1).toUpperCase() + key.slice(1);
}
function formatContextValue(value) {
  if (typeof value === 'string') {
    return value || '(empty)';
  }
  if (typeof value === 'number' || typeof value === 'boolean') {
    return String(value);
  }
  return '(unknown)';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJidWlsZEVycm9yIiwiYWN0aW9uIiwiZXJyb3IiLCJjb250ZXh0IiwibWVzc2FnZSIsIkVycm9yIiwiU3RyaW5nIiwiY29udGV4dERldGFpbHMiLCJmb3JtYXRDb250ZXh0IiwiZW50cmllcyIsIk9iamVjdCIsImZpbHRlciIsInZhbHVlIiwidW5kZWZpbmVkIiwibGVuZ3RoIiwibWFwIiwia2V5IiwiZm9ybWF0Q29udGV4dEtleSIsImZvcm1hdENvbnRleHRWYWx1ZSIsImpvaW4iLCJzbGljZSIsInRvVXBwZXJDYXNlIl0sInNvdXJjZXMiOlsiZXJyb3JzLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCB0eXBlIEVycm9yQ29udGV4dFZhbHVlID0gc3RyaW5nIHwgbnVtYmVyIHwgYm9vbGVhbiB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIEVycm9yQ29udGV4dCA9IFJlY29yZDxzdHJpbmcsIEVycm9yQ29udGV4dFZhbHVlPjtcblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRXJyb3IoYWN0aW9uOiBzdHJpbmcsIGVycm9yOiB1bmtub3duLCBjb250ZXh0PzogRXJyb3JDb250ZXh0KTogc3RyaW5nIHtcbiAgY29uc3QgbWVzc2FnZSA9IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKTtcbiAgY29uc3QgY29udGV4dERldGFpbHMgPSBmb3JtYXRDb250ZXh0KGNvbnRleHQpO1xuICByZXR1cm4gY29udGV4dERldGFpbHMgPyBgRXJyb3IgJHthY3Rpb259OiAke21lc3NhZ2V9ICgke2NvbnRleHREZXRhaWxzfSlgIDogYEVycm9yICR7YWN0aW9ufTogJHttZXNzYWdlfWA7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdENvbnRleHQoY29udGV4dD86IEVycm9yQ29udGV4dCk6IHN0cmluZyB7XG4gIGlmICghY29udGV4dCkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LmVudHJpZXMoY29udGV4dCkuZmlsdGVyKChbLCB2YWx1ZV0pID0+IHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsdWUgIT09IG51bGwpO1xuICBpZiAoZW50cmllcy5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gJyc7XG4gIH1cbiAgcmV0dXJuIGVudHJpZXNcbiAgICAubWFwKChba2V5LCB2YWx1ZV0pID0+IGAke2Zvcm1hdENvbnRleHRLZXkoa2V5KX0gJHtmb3JtYXRDb250ZXh0VmFsdWUodmFsdWUpfWApXG4gICAgLmpvaW4oJywgJyk7XG59XG5cbmZ1bmN0aW9uIGZvcm1hdENvbnRleHRLZXkoa2V5OiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIWtleSkge1xuICAgIHJldHVybiBrZXk7XG4gIH1cbiAgcmV0dXJuIGtleS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpICsga2V5LnNsaWNlKDEpO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRDb250ZXh0VmFsdWUodmFsdWU6IEVycm9yQ29udGV4dFZhbHVlKTogc3RyaW5nIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gdmFsdWUgfHwgJyhlbXB0eSknO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgcmV0dXJuIFN0cmluZyh2YWx1ZSk7XG4gIH1cbiAgcmV0dXJuICcodW5rbm93biknO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJTyxTQUFTQSxVQUFVQSxDQUFDQyxNQUFjLEVBQUVDLEtBQWMsRUFBRUMsT0FBc0IsRUFBVTtFQUN6RixNQUFNQyxPQUFPLEdBQUdGLEtBQUssWUFBWUcsS0FBSyxHQUFHSCxLQUFLLENBQUNFLE9BQU8sR0FBR0UsTUFBTSxDQUFDSixLQUFLLENBQUM7RUFDdEUsTUFBTUssY0FBYyxHQUFHQyxhQUFhLENBQUNMLE9BQU8sQ0FBQztFQUM3QyxPQUFPSSxjQUFjLEdBQUcsU0FBU04sTUFBTSxLQUFLRyxPQUFPLEtBQUtHLGNBQWMsR0FBRyxHQUFHLFNBQVNOLE1BQU0sS0FBS0csT0FBTyxFQUFFO0FBQzNHO0FBRUEsU0FBU0ksYUFBYUEsQ0FBQ0wsT0FBc0IsRUFBVTtFQUNyRCxJQUFJLENBQUNBLE9BQU8sRUFBRTtJQUNaLE9BQU8sRUFBRTtFQUNYO0VBQ0EsTUFBTU0sT0FBTyxHQUFHQyxNQUFNLENBQUNELE9BQU8sQ0FBQ04sT0FBTyxDQUFDLENBQUNRLE1BQU0sQ0FBQyxDQUFDLEdBQUdDLEtBQUssQ0FBQyxLQUFLQSxLQUFLLEtBQUtDLFNBQVMsSUFBSUQsS0FBSyxLQUFLLElBQUksQ0FBQztFQUNwRyxJQUFJSCxPQUFPLENBQUNLLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDeEIsT0FBTyxFQUFFO0VBQ1g7RUFDQSxPQUFPTCxPQUFPLENBQ1hNLEdBQUcsQ0FBQyxDQUFDLENBQUNDLEdBQUcsRUFBRUosS0FBSyxDQUFDLEtBQUssR0FBR0ssZ0JBQWdCLENBQUNELEdBQUcsQ0FBQyxJQUFJRSxrQkFBa0IsQ0FBQ04sS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUM5RU8sSUFBSSxDQUFDLElBQUksQ0FBQztBQUNmO0FBRUEsU0FBU0YsZ0JBQWdCQSxDQUFDRCxHQUFXLEVBQVU7RUFDN0MsSUFBSSxDQUFDQSxHQUFHLEVBQUU7SUFDUixPQUFPQSxHQUFHO0VBQ1o7RUFDQSxPQUFPQSxHQUFHLENBQUNJLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLFdBQVcsQ0FBQyxDQUFDLEdBQUdMLEdBQUcsQ0FBQ0ksS0FBSyxDQUFDLENBQUMsQ0FBQztBQUNyRDtBQUVBLFNBQVNGLGtCQUFrQkEsQ0FBQ04sS0FBd0IsRUFBVTtFQUM1RCxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLEVBQUU7SUFDN0IsT0FBT0EsS0FBSyxJQUFJLFNBQVM7RUFDM0I7RUFDQSxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLElBQUksT0FBT0EsS0FBSyxLQUFLLFNBQVMsRUFBRTtJQUMzRCxPQUFPTixNQUFNLENBQUNNLEtBQUssQ0FBQztFQUN0QjtFQUNBLE9BQU8sV0FBVztBQUNwQiIsImlnbm9yZUxpc3QiOltdfQ==