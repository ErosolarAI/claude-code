{"version":3,"names":["analyzeBashFlow","command","warnings","normalized","toLowerCase","trim","gitStatusMatches","match","length","push","code","message","suggestion","severity","includes","hasVersionStep","test","hasBuildOrTests","hasGitPush"],"sources":["bashCommandGuidance.ts"],"sourcesContent":["/**\n * Centralized guidance for bash command flows.\n * Keeps publish/git heuristics in one place so bash tooling stays concise.\n */\n\nexport type BashFlowSeverity = 'info' | 'warning' | 'critical';\n\nexport interface BashFlowWarning {\n  readonly code: string;\n  readonly message: string;\n  readonly suggestion?: string;\n  readonly severity?: BashFlowSeverity;\n}\n\n/**\n * Analyze a bash command for common workflow gaps (publish, git efficiency).\n */\nexport function analyzeBashFlow(command: string): BashFlowWarning[] {\n  const warnings: BashFlowWarning[] = [];\n  const normalized = command.toLowerCase();\n\n  if (!normalized.trim()) {\n    return warnings;\n  }\n\n  // Git efficiency: avoid repeated status calls in a single command chain.\n  const gitStatusMatches = normalized.match(/git status/g);\n  if (gitStatusMatches && gitStatusMatches.length > 1) {\n    warnings.push({\n      code: 'GIT_REDUNDANT_STATUS',\n      message: 'Multiple git status calls detected in one command',\n      suggestion: 'Combine git operations: git add -A && git commit -m \"msg\" && git push',\n      severity: 'info',\n    });\n  }\n\n  // Publish flow completeness for npm-style commands.\n  if (normalized.includes('npm publish')) {\n    const hasVersionStep = /\\b(?:npm|pnpm|yarn)\\s+version\\b/.test(normalized);\n    const hasBuildOrTests = /\\b(?:npm|pnpm|yarn)\\s+(?:run\\s+)?(build|test|lint|prepare)\\b/.test(normalized);\n    const hasGitPush = /\\bgit\\s+push\\b/.test(normalized);\n\n    if (!(hasVersionStep && hasBuildOrTests && hasGitPush)) {\n      warnings.push({\n        code: 'NPM_INCOMPLETE_WORKFLOW',\n        message: 'npm publish detected without a complete release flow',\n        suggestion: 'Include version bump, build/tests, and git push or use npm_publish to automate the full release',\n        severity: 'warning',\n      });\n    }\n  }\n\n  return warnings;\n}\n"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;;AAWA;AACA;AACA;AACO,SAASA,eAAeA,CAACC,OAAe,EAAqB;EAClE,MAAMC,QAA2B,GAAG,EAAE;EACtC,MAAMC,UAAU,GAAGF,OAAO,CAACG,WAAW,CAAC,CAAC;EAExC,IAAI,CAACD,UAAU,CAACE,IAAI,CAAC,CAAC,EAAE;IACtB,OAAOH,QAAQ;EACjB;;EAEA;EACA,MAAMI,gBAAgB,GAAGH,UAAU,CAACI,KAAK,CAAC,aAAa,CAAC;EACxD,IAAID,gBAAgB,IAAIA,gBAAgB,CAACE,MAAM,GAAG,CAAC,EAAE;IACnDN,QAAQ,CAACO,IAAI,CAAC;MACZC,IAAI,EAAE,sBAAsB;MAC5BC,OAAO,EAAE,mDAAmD;MAC5DC,UAAU,EAAE,uEAAuE;MACnFC,QAAQ,EAAE;IACZ,CAAC,CAAC;EACJ;;EAEA;EACA,IAAIV,UAAU,CAACW,QAAQ,CAAC,aAAa,CAAC,EAAE;IACtC,MAAMC,cAAc,GAAG,iCAAiC,CAACC,IAAI,CAACb,UAAU,CAAC;IACzE,MAAMc,eAAe,GAAG,8DAA8D,CAACD,IAAI,CAACb,UAAU,CAAC;IACvG,MAAMe,UAAU,GAAG,gBAAgB,CAACF,IAAI,CAACb,UAAU,CAAC;IAEpD,IAAI,EAAEY,cAAc,IAAIE,eAAe,IAAIC,UAAU,CAAC,EAAE;MACtDhB,QAAQ,CAACO,IAAI,CAAC;QACZC,IAAI,EAAE,yBAAyB;QAC/BC,OAAO,EAAE,sDAAsD;QAC/DC,UAAU,EAAE,iGAAiG;QAC7GC,QAAQ,EAAE;MACZ,CAAC,CAAC;IACJ;EACF;EAEA,OAAOX,QAAQ;AACjB","ignoreList":[]}