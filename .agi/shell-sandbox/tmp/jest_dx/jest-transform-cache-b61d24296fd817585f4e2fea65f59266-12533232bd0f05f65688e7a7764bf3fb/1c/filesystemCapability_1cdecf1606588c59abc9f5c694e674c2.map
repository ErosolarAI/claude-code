{"version":3,"names":["_fileTools","require","cov_f1a2rs926","path","hash","global","Function","gcv","coverageData","statementMap","start","line","column","end","fnMap","name","decl","loc","branchMap","type","locations","s","f","b","_coverageSchema","coverage","actualCoverage","FilesystemCapabilityModule","id","constructor","options","create","context","workingDir","description","toolSuite","tools","createFileTools","metadata","exports"],"sources":["filesystemCapability.ts"],"sourcesContent":["import type { CapabilityContribution, CapabilityContext, CapabilityModule } from '../runtime/agentHost.js';\nimport { createFileTools } from '../tools/fileTools.js';\n\nexport interface FilesystemCapabilityOptions {\n  workingDir?: string;\n  id?: string;\n  description?: string;\n}\n\nexport class FilesystemCapabilityModule implements CapabilityModule {\n  readonly id = 'capability.filesystem';\n  private readonly options: FilesystemCapabilityOptions;\n\n  constructor(options: FilesystemCapabilityOptions = {}) {\n    this.options = options;\n  }\n\n  async create(context: CapabilityContext): Promise<CapabilityContribution> {\n    const workingDir = this.options.workingDir ?? context.workingDir;\n    return {\n      id: this.options.id ?? 'filesystem.tools.local',\n      description: this.options.description ?? 'Local file system access with deterministic diff summaries.',\n      toolSuite: {\n        id: 'fs',\n        description: 'File operations',\n        tools: createFileTools(workingDir),\n      },\n      metadata: {\n        workingDir,\n      },\n    };\n  }\n}\n"],"mappings":"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","ignoreList":[]}