023b672f4079364ae36d9700284b3d41
/* istanbul ignore next */
function cov_4swa1ogp6() {
  var path = "/Users/bo/GitHub/agi-core-CLI-coding/src/shell/systemPrompt.ts";
  var hash = "e0fe646d102664a4686d8e8ec13521a73e21bee9";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/bo/GitHub/agi-core-CLI-coding/src/shell/systemPrompt.ts",
    statementMap: {
      "0": {
        start: {
          line: 18,
          column: 15
        },
        end: {
          line: 18,
          column: 38
        }
      },
      "1": {
        start: {
          line: 19,
          column: 20
        },
        end: {
          line: 19,
          column: 49
        }
      },
      "2": {
        start: {
          line: 21,
          column: 17
        },
        end: {
          line: 21,
          column: 67
        }
      },
      "3": {
        start: {
          line: 22,
          column: 2
        },
        end: {
          line: 22,
          column: 73
        }
      }
    },
    fnMap: {
      "0": {
        name: "buildInteractiveSystemPrompt",
        decl: {
          start: {
            line: 12,
            column: 16
          },
          end: {
            line: 12,
            column: 44
          }
        },
        loc: {
          start: {
            line: 17,
            column: 10
          },
          end: {
            line: 23,
            column: 1
          }
        },
        line: 17
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 38
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 18,
            column: 15
          },
          end: {
            line: 18,
            column: 27
          }
        }, {
          start: {
            line: 18,
            column: 31
          },
          end: {
            line: 18,
            column: 38
          }
        }],
        line: 18
      },
      "1": {
        loc: {
          start: {
            line: 19,
            column: 20
          },
          end: {
            line: 19,
            column: 49
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 19,
            column: 20
          },
          end: {
            line: 19,
            column: 32
          }
        }, {
          start: {
            line: 19,
            column: 36
          },
          end: {
            line: 19,
            column: 49
          }
        }],
        line: 19
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0
    },
    f: {
      "0": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "e0fe646d102664a4686d8e8ec13521a73e21bee9"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_4swa1ogp6 = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_4swa1ogp6();
/**
 * Builds a lean, effective system prompt for the interactive shell.
 *
 * Design principles:
 * - Use native API system prompt (not user message) for better model compliance
 * - Keep instructions minimal - trust tool descriptions for specifics
 * - Focus on critical behavioral constraints only
 * - Avoid redundancy with tool-level guidance
 */
export function buildInteractiveSystemPrompt(basePrompt, profileLabel, _tools, workspaceDir) {
  /* istanbul ignore next */
  cov_4swa1ogp6().f[0]++;
  const name =
  /* istanbul ignore next */
  (cov_4swa1ogp6().s[0]++,
  /* istanbul ignore next */
  (cov_4swa1ogp6().b[0][0]++, profileLabel) ||
  /* istanbul ignore next */
  (cov_4swa1ogp6().b[0][1]++, 'Agent'));
  const workspace =
  /* istanbul ignore next */
  (cov_4swa1ogp6().s[1]++,
  /* istanbul ignore next */
  (cov_4swa1ogp6().b[1][0]++, workspaceDir) ||
  /* istanbul ignore next */
  (cov_4swa1ogp6().b[1][1]++, process.cwd()));
  const header =
  /* istanbul ignore next */
  (cov_4swa1ogp6().s[2]++, `You are ${name}, a coding agent in ${workspace}.`);
  /* istanbul ignore next */
  cov_4swa1ogp6().s[3]++;
  return [basePrompt.trim(), header].filter(Boolean).join('\n\n').trim();
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfNHN3YTFvZ3A2IiwiYWN0dWFsQ292ZXJhZ2UiLCJidWlsZEludGVyYWN0aXZlU3lzdGVtUHJvbXB0IiwiYmFzZVByb21wdCIsInByb2ZpbGVMYWJlbCIsIl90b29scyIsIndvcmtzcGFjZURpciIsImYiLCJuYW1lIiwicyIsImIiLCJ3b3Jrc3BhY2UiLCJwcm9jZXNzIiwiY3dkIiwiaGVhZGVyIiwidHJpbSIsImZpbHRlciIsIkJvb2xlYW4iLCJqb2luIl0sInNvdXJjZXMiOlsic3lzdGVtUHJvbXB0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgUHJvdmlkZXJUb29sRGVmaW5pdGlvbiB9IGZyb20gJy4uL2NvcmUvdHlwZXMuanMnO1xuXG4vKipcbiAqIEJ1aWxkcyBhIGxlYW4sIGVmZmVjdGl2ZSBzeXN0ZW0gcHJvbXB0IGZvciB0aGUgaW50ZXJhY3RpdmUgc2hlbGwuXG4gKlxuICogRGVzaWduIHByaW5jaXBsZXM6XG4gKiAtIFVzZSBuYXRpdmUgQVBJIHN5c3RlbSBwcm9tcHQgKG5vdCB1c2VyIG1lc3NhZ2UpIGZvciBiZXR0ZXIgbW9kZWwgY29tcGxpYW5jZVxuICogLSBLZWVwIGluc3RydWN0aW9ucyBtaW5pbWFsIC0gdHJ1c3QgdG9vbCBkZXNjcmlwdGlvbnMgZm9yIHNwZWNpZmljc1xuICogLSBGb2N1cyBvbiBjcml0aWNhbCBiZWhhdmlvcmFsIGNvbnN0cmFpbnRzIG9ubHlcbiAqIC0gQXZvaWQgcmVkdW5kYW5jeSB3aXRoIHRvb2wtbGV2ZWwgZ3VpZGFuY2VcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkSW50ZXJhY3RpdmVTeXN0ZW1Qcm9tcHQoXG4gIGJhc2VQcm9tcHQ6IHN0cmluZyxcbiAgcHJvZmlsZUxhYmVsOiBzdHJpbmcsXG4gIF90b29sczogUHJvdmlkZXJUb29sRGVmaW5pdGlvbltdLFxuICB3b3Jrc3BhY2VEaXI/OiBzdHJpbmdcbik6IHN0cmluZyB7XG4gIGNvbnN0IG5hbWUgPSBwcm9maWxlTGFiZWwgfHwgJ0FnZW50JztcbiAgY29uc3Qgd29ya3NwYWNlID0gd29ya3NwYWNlRGlyIHx8IHByb2Nlc3MuY3dkKCk7XG5cbiAgY29uc3QgaGVhZGVyID0gYFlvdSBhcmUgJHtuYW1lfSwgYSBjb2RpbmcgYWdlbnQgaW4gJHt3b3Jrc3BhY2V9LmA7XG4gIHJldHVybiBbYmFzZVByb21wdC50cmltKCksIGhlYWRlcl0uZmlsdGVyKEJvb2xlYW4pLmpvaW4oJ1xcblxcbicpLnRyaW0oKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGFBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGFBQUE7QUFiWjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFNBQVNFLDRCQUE0QkEsQ0FDMUNDLFVBQWtCLEVBQ2xCQyxZQUFvQixFQUNwQkMsTUFBZ0MsRUFDaENDLFlBQXFCLEVBQ2I7RUFBQTtFQUFBTixhQUFBLEdBQUFPLENBQUE7RUFDUixNQUFNQyxJQUFJO0VBQUE7RUFBQSxDQUFBUixhQUFBLEdBQUFTLENBQUE7RUFBRztFQUFBLENBQUFULGFBQUEsR0FBQVUsQ0FBQSxVQUFBTixZQUFZO0VBQUE7RUFBQSxDQUFBSixhQUFBLEdBQUFVLENBQUEsVUFBSSxPQUFPO0VBQ3BDLE1BQU1DLFNBQVM7RUFBQTtFQUFBLENBQUFYLGFBQUEsR0FBQVMsQ0FBQTtFQUFHO0VBQUEsQ0FBQVQsYUFBQSxHQUFBVSxDQUFBLFVBQUFKLFlBQVk7RUFBQTtFQUFBLENBQUFOLGFBQUEsR0FBQVUsQ0FBQSxVQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxDQUFDO0VBRS9DLE1BQU1DLE1BQU07RUFBQTtFQUFBLENBQUFkLGFBQUEsR0FBQVMsQ0FBQSxPQUFHLFdBQVdELElBQUksdUJBQXVCRyxTQUFTLEdBQUc7RUFBQztFQUFBWCxhQUFBLEdBQUFTLENBQUE7RUFDbEUsT0FBTyxDQUFDTixVQUFVLENBQUNZLElBQUksQ0FBQyxDQUFDLEVBQUVELE1BQU0sQ0FBQyxDQUFDRSxNQUFNLENBQUNDLE9BQU8sQ0FBQyxDQUFDQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUNILElBQUksQ0FBQyxDQUFDO0FBQ3hFIiwiaWdub3JlTGlzdCI6W119