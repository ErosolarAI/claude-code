{"version":3,"names":["DeepBugAnalyzer","analyze","bug","codeContext","depth","signals","contextText","Array","from","values","join","toLowerCase","lowerDesc","description","stackTrace","includes","push","primaryCause","length","category","confidence","contributingFactors","slice","map","signal","recommendedActions","exports"],"sources":["deepBugAnalyzer.ts"],"sourcesContent":["export interface BugReport {\n  title: string;\n  description: string;\n  expectedBehavior?: string;\n  actualBehavior?: string;\n  stackTrace?: string;\n}\n\nexport interface BugAnalysisResult {\n  primaryCause?: {\n    category: string;\n    description: string;\n    confidence: number;\n  };\n  contributingFactors: Array<{\n    category: string;\n    description: string;\n    confidence: number;\n  }>;\n  recommendedActions: string[];\n  confidence: number;\n}\n\nexport class DeepBugAnalyzer {\n  async analyze(\n    bug: BugReport,\n    codeContext: Map<string, string>,\n    depth: 'shallow' | 'moderate' | 'deep' = 'moderate'\n  ): Promise<BugAnalysisResult> {\n    const signals: string[] = [];\n    const contextText = Array.from(codeContext.values()).join('\\n').toLowerCase();\n    const lowerDesc = `${bug.description ?? ''} ${bug.stackTrace ?? ''}`.toLowerCase();\n\n    if (lowerDesc.includes('null') || lowerDesc.includes('undefined') || contextText.includes('null') || contextText.includes('undefined')) {\n      signals.push('null/undefined access');\n    }\n    if (lowerDesc.includes('race') || lowerDesc.includes('concurrent')) {\n      signals.push('possible race condition');\n    }\n\n    const primaryCause = signals.length\n      ? {\n          category: 'code',\n          description: signals[0]!,\n          confidence: 0.7,\n        }\n      : {\n          category: 'unknown',\n          description: 'Insufficient context; investigate logs and inputs.',\n          confidence: 0.4,\n        };\n\n    const contributingFactors = signals.slice(1).map((signal) => ({\n      category: 'code',\n      description: signal,\n      confidence: 0.5,\n    }));\n\n    const recommendedActions = [\n      'Add null/undefined guards around user input',\n      'Capture minimal reproduction steps',\n      'Add unit tests around the failing path',\n    ];\n    if (depth === 'deep') {\n      recommendedActions.push('Trace async boundaries to rule out race conditions');\n    }\n\n    return {\n      primaryCause,\n      contributingFactors,\n      recommendedActions,\n      confidence: primaryCause.confidence,\n    };\n  }\n}\n"],"mappings":";;;;;;AAuBO,MAAMA,eAAe,CAAC;EAC3B,MAAMC,OAAOA,CACXC,GAAc,EACdC,WAAgC,EAChCC,KAAsC,GAAG,UAAU,EACvB;IAC5B,MAAMC,OAAiB,GAAG,EAAE;IAC5B,MAAMC,WAAW,GAAGC,KAAK,CAACC,IAAI,CAACL,WAAW,CAACM,MAAM,CAAC,CAAC,CAAC,CAACC,IAAI,CAAC,IAAI,CAAC,CAACC,WAAW,CAAC,CAAC;IAC7E,MAAMC,SAAS,GAAG,GAAGV,GAAG,CAACW,WAAW,IAAI,EAAE,IAAIX,GAAG,CAACY,UAAU,IAAI,EAAE,EAAE,CAACH,WAAW,CAAC,CAAC;IAElF,IAAIC,SAAS,CAACG,QAAQ,CAAC,MAAM,CAAC,IAAIH,SAAS,CAACG,QAAQ,CAAC,WAAW,CAAC,IAAIT,WAAW,CAACS,QAAQ,CAAC,MAAM,CAAC,IAAIT,WAAW,CAACS,QAAQ,CAAC,WAAW,CAAC,EAAE;MACtIV,OAAO,CAACW,IAAI,CAAC,uBAAuB,CAAC;IACvC;IACA,IAAIJ,SAAS,CAACG,QAAQ,CAAC,MAAM,CAAC,IAAIH,SAAS,CAACG,QAAQ,CAAC,YAAY,CAAC,EAAE;MAClEV,OAAO,CAACW,IAAI,CAAC,yBAAyB,CAAC;IACzC;IAEA,MAAMC,YAAY,GAAGZ,OAAO,CAACa,MAAM,GAC/B;MACEC,QAAQ,EAAE,MAAM;MAChBN,WAAW,EAAER,OAAO,CAAC,CAAC,CAAE;MACxBe,UAAU,EAAE;IACd,CAAC,GACD;MACED,QAAQ,EAAE,SAAS;MACnBN,WAAW,EAAE,oDAAoD;MACjEO,UAAU,EAAE;IACd,CAAC;IAEL,MAAMC,mBAAmB,GAAGhB,OAAO,CAACiB,KAAK,CAAC,CAAC,CAAC,CAACC,GAAG,CAAEC,MAAM,KAAM;MAC5DL,QAAQ,EAAE,MAAM;MAChBN,WAAW,EAAEW,MAAM;MACnBJ,UAAU,EAAE;IACd,CAAC,CAAC,CAAC;IAEH,MAAMK,kBAAkB,GAAG,CACzB,6CAA6C,EAC7C,oCAAoC,EACpC,wCAAwC,CACzC;IACD,IAAIrB,KAAK,KAAK,MAAM,EAAE;MACpBqB,kBAAkB,CAACT,IAAI,CAAC,oDAAoD,CAAC;IAC/E;IAEA,OAAO;MACLC,YAAY;MACZI,mBAAmB;MACnBI,kBAAkB;MAClBL,UAAU,EAAEH,YAAY,CAACG;IAC3B,CAAC;EACH;AACF;AAACM,OAAA,CAAA1B,eAAA,GAAAA,eAAA","ignoreList":[]}