c78f2ca028be2022cecad68e9ec1ddf8
"use strict";

var _globals = require("@jest/globals");
var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
var _orchestrationPlugin = require("../../src/plugins/tools/orchestration/orchestrationPlugin.js");
var _bidirectionalAuditPlugin = require("../../src/plugins/tools/bidirectionalAudit/bidirectionalAuditPlugin.js");
var _localFilesystemPlugin = require("../../src/plugins/tools/filesystem/localFilesystemPlugin.js");
var _localSearchPlugin = require("../../src/plugins/tools/search/localSearchPlugin.js");
var _editPlugin = require("../../src/plugins/tools/edit/editPlugin.js");
/**
 * CLI Integration Tests
 * Verifies that the unified orchestration plugins and core tools are wired correctly.
 */

(0, _globals.describe)('CLI Integration', () => {
  (0, _globals.describe)('Unified orchestrator plugin', () => {
    (0, _globals.it)('creates the orchestration tool suite with key tools', async () => {
      const plugin = (0, _orchestrationPlugin.createOrchestrationToolPlugin)();
      const module = await plugin.create({
        workingDir: process.cwd(),
        env: process.env
      });
      const contribution = await module.create({
        profile: 'agi-code',
        workspaceContext: null,
        workingDir: process.cwd(),
        env: process.env
      });
      (0, _globals.expect)(contribution?.toolSuite?.id).toBe('orchestration.tools.unified');
      const toolNames = contribution?.toolSuite?.tools.map(t => t.name) ?? [];
      (0, _globals.expect)(toolNames.length).toBeGreaterThan(0);
      (0, _globals.expect)(toolNames).toEqual(_globals.expect.arrayContaining(['analyze_errors', 'verify_result', 'hypothesis', 'run_build', 'run_tests', 'run_lint', 'run_type_check', 'quality_gate', 'summarize_orchestration']));
    });
    (0, _globals.it)('runs orchestration build/test flows and summaries without invoking heavy tasks', async () => {
      const workspace = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'erosolar-orchestration-'));
      try {
        // Tiny script for a fast "build" run
        (0, _nodeFs.writeFileSync)((0, _nodePath.join)(workspace, 'echo-ok.js'), 'console.log("orchestration-ok")');
        const plugin = (0, _orchestrationPlugin.createOrchestrationToolPlugin)();
        const module = await plugin.create({
          workingDir: workspace,
          env: process.env
        });
        const contribution = await module.create({
          profile: 'agi-code',
          workspaceContext: null,
          workingDir: workspace,
          env: process.env
        });
        const tools = new Map((contribution?.toolSuite?.tools ?? []).map(t => [t.name, t]));
        const summarize = tools.get('summarize_orchestration');
        (0, _globals.expect)(await summarize.handler()).toMatch(/No orchestration runs/i);
        const qualityGate = tools.get('quality_gate');
        const qualityOutput = await qualityGate.handler({
          dryRun: true,
          steps: ['build', 'lint', 'type-check', 'test', 'health']
        });
        (0, _globals.expect)(qualityOutput).toMatch(/build/i);
        (0, _globals.expect)(qualityOutput).toMatch(/lint/i);
        (0, _globals.expect)(qualityOutput).toMatch(/type-check/i);
        (0, _globals.expect)(qualityOutput).toMatch(/test/i);
        const runBuild = tools.get('run_build');
        const buildOutput = await runBuild.handler({
          command: `${process.execPath} echo-ok.js`,
          cwd: workspace
        });
        (0, _globals.expect)(buildOutput).toMatch(/orchestration-ok/);
        const summarizeAfter = await summarize.handler();
        (0, _globals.expect)(summarizeAfter).toMatch(/build/i);
        const analyze = tools.get('analyze_errors');
        const analysis = await analyze.handler({
          error: 'lint failed'
        });
        (0, _globals.expect)(analysis.toLowerCase()).toContain('lint');
      } finally {
        (0, _nodeFs.rmSync)(workspace, {
          recursive: true,
          force: true
        });
      }
    });
  });
  (0, _globals.describe)('Bidirectional audit plugin', () => {
    (0, _globals.it)('exposes the bidirectional audit tool', async () => {
      const plugin = (0, _bidirectionalAuditPlugin.createBidirectionalAuditToolPlugin)();
      const module = await plugin.create({
        workingDir: process.cwd(),
        env: process.env
      });
      const contribution = await module.create({
        profile: 'agi-code',
        workspaceContext: null,
        workingDir: process.cwd(),
        env: process.env
      });
      const suites = contribution?.toolSuites ?? (contribution?.toolSuite ? [contribution.toolSuite] : []);
      (0, _globals.expect)(suites.length).toBeGreaterThan(0);
      const tools = suites.flatMap(suite => suite.tools);
      const names = tools.map(t => t.name);
      (0, _globals.expect)(names).toContain('BidirectionalAudit');
    });
  });
});
(0, _globals.describe)('Core engineering toolchain integration', () => {
  const profile = 'agi-code';
  const tempDirs = [];
  afterEach(() => {
    while (tempDirs.length) {
      const dir = tempDirs.pop();
      if (dir) {
        (0, _nodeFs.rmSync)(dir, {
          recursive: true,
          force: true
        });
      }
    }
  });

  /**
   * Collect tool definitions from core CLI plugins without invoking an LLM.
   */
  async function loadToolMap(workingDir) {
    const toolDefs = [];
    const plugins = [(0, _localFilesystemPlugin.createLocalFilesystemToolPlugin)(), (0, _localSearchPlugin.createLocalSearchToolPlugin)(), (0, _editPlugin.createEditToolPlugin)()];
    for (const plugin of plugins) {
      const created = await plugin.create({
        workingDir,
        env: process.env
      });
      const modules = Array.isArray(created) ? created : [created];
      for (const module of modules) {
        if (!module) continue;
        const contributionResult = await module.create({
          profile: profile,
          workspaceContext: null,
          workingDir,
          env: process.env
        });
        const contributions = Array.isArray(contributionResult) ? contributionResult : [contributionResult];
        for (const contribution of contributions) {
          if (contribution?.toolSuite) {
            toolDefs.push(...contribution.toolSuite.tools);
          }
          if (contribution?.toolSuites?.length) {
            for (const suite of contribution.toolSuites) {
              toolDefs.push(...suite.tools);
            }
          }
        }
      }
    }
    return toolDefs.reduce((acc, tool) => {
      acc[tool.name] = tool;
      return acc;
    }, {});
  }
  (0, _globals.it)('exposes core filesystem/search/edit tools', async () => {
    const workspace = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'erosolar-cli-core-'));
    tempDirs.push(workspace);
    const tools = await loadToolMap(workspace);
    (0, _globals.expect)(tools['list_files']).toBeDefined();
    (0, _globals.expect)(tools['read_file']).toBeDefined();
    (0, _globals.expect)(tools['Grep']).toBeDefined();
    (0, _globals.expect)(tools['Edit']).toBeDefined();
  });
  (0, _globals.it)('supports basic read/search/edit workflow', async () => {
    const workspace = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'erosolar-cli-workflow-'));
    tempDirs.push(workspace);
    const srcDir = (0, _nodePath.join)(workspace, 'src');
    (0, _nodeFs.mkdirSync)(srcDir, {
      recursive: true
    });
    const filePath = (0, _nodePath.join)(srcDir, 'example.ts');
    const originalContent = ['export function hello(name: string) {', '  return `hi ${name}`;', '}', ''].join('\n');
    (0, _nodeFs.writeFileSync)(filePath, originalContent);
    const tools = await loadToolMap(workspace);
    const listFiles = tools['list_files'];
    const readFile = tools['read_file'];
    const grep = tools['Grep'];
    const edit = tools['Edit'];

    // List files
    const listing = await listFiles.handler({
      path: 'src',
      recursive: true
    });
    (0, _globals.expect)(listing).toContain('example.ts');

    // Read file
    const readOutput = await readFile.handler({
      path: 'src/example.ts'
    });
    (0, _globals.expect)(readOutput).toContain('hello');

    // Search for content
    const grepOutput = await grep.handler({
      pattern: 'hello',
      path: workspace,
      output_mode: 'files_with_matches'
    });
    (0, _globals.expect)(grepOutput).toContain('example.ts');

    // Edit file content
    const editOutput = await edit.handler({
      file_path: filePath,
      old_string: 'return `hi ${name}`;',
      new_string: 'return `hello ${name}`;',
      replace_all: true
    });
    (0, _globals.expect)(editOutput).toContain('hello');
    const updated = (0, _nodeFs.readFileSync)(filePath, 'utf-8');
    (0, _globals.expect)(updated).toContain('hello ${name}');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfbm9kZUZzIiwiX25vZGVQYXRoIiwiX25vZGVPcyIsIl9vcmNoZXN0cmF0aW9uUGx1Z2luIiwiX2JpZGlyZWN0aW9uYWxBdWRpdFBsdWdpbiIsIl9sb2NhbEZpbGVzeXN0ZW1QbHVnaW4iLCJfbG9jYWxTZWFyY2hQbHVnaW4iLCJfZWRpdFBsdWdpbiIsImRlc2NyaWJlIiwiaXQiLCJwbHVnaW4iLCJjcmVhdGVPcmNoZXN0cmF0aW9uVG9vbFBsdWdpbiIsIm1vZHVsZSIsImNyZWF0ZSIsIndvcmtpbmdEaXIiLCJwcm9jZXNzIiwiY3dkIiwiZW52IiwiY29udHJpYnV0aW9uIiwicHJvZmlsZSIsIndvcmtzcGFjZUNvbnRleHQiLCJleHBlY3QiLCJ0b29sU3VpdGUiLCJpZCIsInRvQmUiLCJ0b29sTmFtZXMiLCJ0b29scyIsIm1hcCIsInQiLCJuYW1lIiwibGVuZ3RoIiwidG9CZUdyZWF0ZXJUaGFuIiwidG9FcXVhbCIsImFycmF5Q29udGFpbmluZyIsIndvcmtzcGFjZSIsIm1rZHRlbXBTeW5jIiwiam9pbiIsInRtcGRpciIsIndyaXRlRmlsZVN5bmMiLCJNYXAiLCJzdW1tYXJpemUiLCJnZXQiLCJoYW5kbGVyIiwidG9NYXRjaCIsInF1YWxpdHlHYXRlIiwicXVhbGl0eU91dHB1dCIsImRyeVJ1biIsInN0ZXBzIiwicnVuQnVpbGQiLCJidWlsZE91dHB1dCIsImNvbW1hbmQiLCJleGVjUGF0aCIsInN1bW1hcml6ZUFmdGVyIiwiYW5hbHl6ZSIsImFuYWx5c2lzIiwiZXJyb3IiLCJ0b0xvd2VyQ2FzZSIsInRvQ29udGFpbiIsInJtU3luYyIsInJlY3Vyc2l2ZSIsImZvcmNlIiwiY3JlYXRlQmlkaXJlY3Rpb25hbEF1ZGl0VG9vbFBsdWdpbiIsInN1aXRlcyIsInRvb2xTdWl0ZXMiLCJmbGF0TWFwIiwic3VpdGUiLCJuYW1lcyIsInRlbXBEaXJzIiwiYWZ0ZXJFYWNoIiwiZGlyIiwicG9wIiwibG9hZFRvb2xNYXAiLCJ0b29sRGVmcyIsInBsdWdpbnMiLCJjcmVhdGVMb2NhbEZpbGVzeXN0ZW1Ub29sUGx1Z2luIiwiY3JlYXRlTG9jYWxTZWFyY2hUb29sUGx1Z2luIiwiY3JlYXRlRWRpdFRvb2xQbHVnaW4iLCJjcmVhdGVkIiwibW9kdWxlcyIsIkFycmF5IiwiaXNBcnJheSIsImNvbnRyaWJ1dGlvblJlc3VsdCIsImNvbnRyaWJ1dGlvbnMiLCJwdXNoIiwicmVkdWNlIiwiYWNjIiwidG9vbCIsInRvQmVEZWZpbmVkIiwic3JjRGlyIiwibWtkaXJTeW5jIiwiZmlsZVBhdGgiLCJvcmlnaW5hbENvbnRlbnQiLCJsaXN0RmlsZXMiLCJyZWFkRmlsZSIsImdyZXAiLCJlZGl0IiwibGlzdGluZyIsInBhdGgiLCJyZWFkT3V0cHV0IiwiZ3JlcE91dHB1dCIsInBhdHRlcm4iLCJvdXRwdXRfbW9kZSIsImVkaXRPdXRwdXQiLCJmaWxlX3BhdGgiLCJvbGRfc3RyaW5nIiwibmV3X3N0cmluZyIsInJlcGxhY2VfYWxsIiwidXBkYXRlZCIsInJlYWRGaWxlU3luYyJdLCJzb3VyY2VzIjpbImNsaUludGVncmF0aW9uLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDTEkgSW50ZWdyYXRpb24gVGVzdHNcbiAqIFZlcmlmaWVzIHRoYXQgdGhlIHVuaWZpZWQgb3JjaGVzdHJhdGlvbiBwbHVnaW5zIGFuZCBjb3JlIHRvb2xzIGFyZSB3aXJlZCBjb3JyZWN0bHkuXG4gKi9cblxuaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IG1rZHRlbXBTeW5jLCBta2RpclN5bmMsIHJlYWRGaWxlU3luYywgcm1TeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IHRtcGRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IHsgY3JlYXRlT3JjaGVzdHJhdGlvblRvb2xQbHVnaW4gfSBmcm9tICcuLi8uLi9zcmMvcGx1Z2lucy90b29scy9vcmNoZXN0cmF0aW9uL29yY2hlc3RyYXRpb25QbHVnaW4uanMnO1xuaW1wb3J0IHsgY3JlYXRlQmlkaXJlY3Rpb25hbEF1ZGl0VG9vbFBsdWdpbiB9IGZyb20gJy4uLy4uL3NyYy9wbHVnaW5zL3Rvb2xzL2JpZGlyZWN0aW9uYWxBdWRpdC9iaWRpcmVjdGlvbmFsQXVkaXRQbHVnaW4uanMnO1xuaW1wb3J0IHsgY3JlYXRlTG9jYWxGaWxlc3lzdGVtVG9vbFBsdWdpbiB9IGZyb20gJy4uLy4uL3NyYy9wbHVnaW5zL3Rvb2xzL2ZpbGVzeXN0ZW0vbG9jYWxGaWxlc3lzdGVtUGx1Z2luLmpzJztcbmltcG9ydCB7IGNyZWF0ZUxvY2FsU2VhcmNoVG9vbFBsdWdpbiB9IGZyb20gJy4uLy4uL3NyYy9wbHVnaW5zL3Rvb2xzL3NlYXJjaC9sb2NhbFNlYXJjaFBsdWdpbi5qcyc7XG5pbXBvcnQgeyBjcmVhdGVFZGl0VG9vbFBsdWdpbiB9IGZyb20gJy4uLy4uL3NyYy9wbHVnaW5zL3Rvb2xzL2VkaXQvZWRpdFBsdWdpbi5qcyc7XG5pbXBvcnQgdHlwZSB7IFRvb2xEZWZpbml0aW9uIH0gZnJvbSAnLi4vLi4vc3JjL2NvcmUvdG9vbFJ1bnRpbWUuanMnO1xuXG5kZXNjcmliZSgnQ0xJIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBkZXNjcmliZSgnVW5pZmllZCBvcmNoZXN0cmF0b3IgcGx1Z2luJywgKCkgPT4ge1xuICAgIGl0KCdjcmVhdGVzIHRoZSBvcmNoZXN0cmF0aW9uIHRvb2wgc3VpdGUgd2l0aCBrZXkgdG9vbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBwbHVnaW4gPSBjcmVhdGVPcmNoZXN0cmF0aW9uVG9vbFBsdWdpbigpO1xuICAgICAgY29uc3QgbW9kdWxlID0gYXdhaXQgcGx1Z2luLmNyZWF0ZSh7IHdvcmtpbmdEaXI6IHByb2Nlc3MuY3dkKCksIGVudjogcHJvY2Vzcy5lbnYgfSk7XG4gICAgICBjb25zdCBjb250cmlidXRpb24gPSBhd2FpdCBtb2R1bGUhLmNyZWF0ZSh7XG4gICAgICAgIHByb2ZpbGU6ICdhZ2ktY29kZScsXG4gICAgICAgIHdvcmtzcGFjZUNvbnRleHQ6IG51bGwsXG4gICAgICAgIHdvcmtpbmdEaXI6IHByb2Nlc3MuY3dkKCksXG4gICAgICAgIGVudjogcHJvY2Vzcy5lbnYsXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNvbnRyaWJ1dGlvbj8udG9vbFN1aXRlPy5pZCkudG9CZSgnb3JjaGVzdHJhdGlvbi50b29scy51bmlmaWVkJyk7XG4gICAgICBjb25zdCB0b29sTmFtZXMgPSBjb250cmlidXRpb24/LnRvb2xTdWl0ZT8udG9vbHMubWFwKCh0KSA9PiB0Lm5hbWUpID8/IFtdO1xuICAgICAgZXhwZWN0KHRvb2xOYW1lcy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdCh0b29sTmFtZXMpLnRvRXF1YWwoXG4gICAgICAgIGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW1xuICAgICAgICAgICdhbmFseXplX2Vycm9ycycsXG4gICAgICAgICAgJ3ZlcmlmeV9yZXN1bHQnLFxuICAgICAgICAgICdoeXBvdGhlc2lzJyxcbiAgICAgICAgICAncnVuX2J1aWxkJyxcbiAgICAgICAgICAncnVuX3Rlc3RzJyxcbiAgICAgICAgICAncnVuX2xpbnQnLFxuICAgICAgICAgICdydW5fdHlwZV9jaGVjaycsXG4gICAgICAgICAgJ3F1YWxpdHlfZ2F0ZScsXG4gICAgICAgICAgJ3N1bW1hcml6ZV9vcmNoZXN0cmF0aW9uJyxcbiAgICAgICAgXSlcbiAgICAgICk7XG4gICAgfSk7XG5cbiAgICBpdCgncnVucyBvcmNoZXN0cmF0aW9uIGJ1aWxkL3Rlc3QgZmxvd3MgYW5kIHN1bW1hcmllcyB3aXRob3V0IGludm9raW5nIGhlYXZ5IHRhc2tzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qgd29ya3NwYWNlID0gbWtkdGVtcFN5bmMoam9pbih0bXBkaXIoKSwgJ2Vyb3NvbGFyLW9yY2hlc3RyYXRpb24tJykpO1xuXG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaW55IHNjcmlwdCBmb3IgYSBmYXN0IFwiYnVpbGRcIiBydW5cbiAgICAgICAgd3JpdGVGaWxlU3luYyhqb2luKHdvcmtzcGFjZSwgJ2VjaG8tb2suanMnKSwgJ2NvbnNvbGUubG9nKFwib3JjaGVzdHJhdGlvbi1va1wiKScpO1xuXG4gICAgICAgIGNvbnN0IHBsdWdpbiA9IGNyZWF0ZU9yY2hlc3RyYXRpb25Ub29sUGx1Z2luKCk7XG4gICAgICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IHBsdWdpbi5jcmVhdGUoeyB3b3JraW5nRGlyOiB3b3Jrc3BhY2UsIGVudjogcHJvY2Vzcy5lbnYgfSk7XG4gICAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvbiA9IGF3YWl0IG1vZHVsZSEuY3JlYXRlKHtcbiAgICAgICAgICBwcm9maWxlOiAnYWdpLWNvZGUnLFxuICAgICAgICAgIHdvcmtzcGFjZUNvbnRleHQ6IG51bGwsXG4gICAgICAgICAgd29ya2luZ0Rpcjogd29ya3NwYWNlLFxuICAgICAgICAgIGVudjogcHJvY2Vzcy5lbnYsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGNvbnN0IHRvb2xzID0gbmV3IE1hcCgoY29udHJpYnV0aW9uPy50b29sU3VpdGU/LnRvb2xzID8/IFtdKS5tYXAoKHQpID0+IFt0Lm5hbWUsIHRdKSk7XG5cbiAgICAgICAgY29uc3Qgc3VtbWFyaXplID0gdG9vbHMuZ2V0KCdzdW1tYXJpemVfb3JjaGVzdHJhdGlvbicpITtcbiAgICAgICAgZXhwZWN0KGF3YWl0IHN1bW1hcml6ZS5oYW5kbGVyISgpKS50b01hdGNoKC9ObyBvcmNoZXN0cmF0aW9uIHJ1bnMvaSk7XG5cbiAgICAgICAgY29uc3QgcXVhbGl0eUdhdGUgPSB0b29scy5nZXQoJ3F1YWxpdHlfZ2F0ZScpITtcbiAgICAgICAgY29uc3QgcXVhbGl0eU91dHB1dCA9IGF3YWl0IHF1YWxpdHlHYXRlLmhhbmRsZXIhKHtcbiAgICAgICAgICBkcnlSdW46IHRydWUsXG4gICAgICAgICAgc3RlcHM6IFsnYnVpbGQnLCAnbGludCcsICd0eXBlLWNoZWNrJywgJ3Rlc3QnLCAnaGVhbHRoJ10sXG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3QocXVhbGl0eU91dHB1dCkudG9NYXRjaCgvYnVpbGQvaSk7XG4gICAgICAgIGV4cGVjdChxdWFsaXR5T3V0cHV0KS50b01hdGNoKC9saW50L2kpO1xuICAgICAgICBleHBlY3QocXVhbGl0eU91dHB1dCkudG9NYXRjaCgvdHlwZS1jaGVjay9pKTtcbiAgICAgICAgZXhwZWN0KHF1YWxpdHlPdXRwdXQpLnRvTWF0Y2goL3Rlc3QvaSk7XG5cbiAgICAgICAgY29uc3QgcnVuQnVpbGQgPSB0b29scy5nZXQoJ3J1bl9idWlsZCcpITtcbiAgICAgICAgY29uc3QgYnVpbGRPdXRwdXQgPSBhd2FpdCBydW5CdWlsZC5oYW5kbGVyISh7XG4gICAgICAgICAgY29tbWFuZDogYCR7cHJvY2Vzcy5leGVjUGF0aH0gZWNoby1vay5qc2AsXG4gICAgICAgICAgY3dkOiB3b3Jrc3BhY2UsXG4gICAgICAgIH0pO1xuICAgICAgICBleHBlY3QoYnVpbGRPdXRwdXQpLnRvTWF0Y2goL29yY2hlc3RyYXRpb24tb2svKTtcblxuICAgICAgICBjb25zdCBzdW1tYXJpemVBZnRlciA9IGF3YWl0IHN1bW1hcml6ZS5oYW5kbGVyISgpO1xuICAgICAgICBleHBlY3Qoc3VtbWFyaXplQWZ0ZXIpLnRvTWF0Y2goL2J1aWxkL2kpO1xuXG4gICAgICAgIGNvbnN0IGFuYWx5emUgPSB0b29scy5nZXQoJ2FuYWx5emVfZXJyb3JzJykhO1xuICAgICAgICBjb25zdCBhbmFseXNpcyA9IGF3YWl0IGFuYWx5emUuaGFuZGxlciEoeyBlcnJvcjogJ2xpbnQgZmFpbGVkJyB9KTtcbiAgICAgICAgZXhwZWN0KGFuYWx5c2lzLnRvTG93ZXJDYXNlKCkpLnRvQ29udGFpbignbGludCcpO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgcm1TeW5jKHdvcmtzcGFjZSwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmlkaXJlY3Rpb25hbCBhdWRpdCBwbHVnaW4nLCAoKSA9PiB7XG4gICAgaXQoJ2V4cG9zZXMgdGhlIGJpZGlyZWN0aW9uYWwgYXVkaXQgdG9vbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHBsdWdpbiA9IGNyZWF0ZUJpZGlyZWN0aW9uYWxBdWRpdFRvb2xQbHVnaW4oKTtcbiAgICAgIGNvbnN0IG1vZHVsZSA9IGF3YWl0IHBsdWdpbi5jcmVhdGUoeyB3b3JraW5nRGlyOiBwcm9jZXNzLmN3ZCgpLCBlbnY6IHByb2Nlc3MuZW52IH0pO1xuICAgICAgY29uc3QgY29udHJpYnV0aW9uID0gYXdhaXQgbW9kdWxlIS5jcmVhdGUoe1xuICAgICAgICBwcm9maWxlOiAnYWdpLWNvZGUnLFxuICAgICAgICB3b3Jrc3BhY2VDb250ZXh0OiBudWxsLFxuICAgICAgICB3b3JraW5nRGlyOiBwcm9jZXNzLmN3ZCgpLFxuICAgICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN1aXRlcyA9IGNvbnRyaWJ1dGlvbj8udG9vbFN1aXRlcyA/PyAoY29udHJpYnV0aW9uPy50b29sU3VpdGUgPyBbY29udHJpYnV0aW9uLnRvb2xTdWl0ZV0gOiBbXSk7XG4gICAgICBleHBlY3Qoc3VpdGVzLmxlbmd0aCkudG9CZUdyZWF0ZXJUaGFuKDApO1xuXG4gICAgICBjb25zdCB0b29scyA9IHN1aXRlcy5mbGF0TWFwKChzdWl0ZSkgPT4gc3VpdGUudG9vbHMpO1xuICAgICAgY29uc3QgbmFtZXMgPSB0b29scy5tYXAoKHQpID0+IHQubmFtZSk7XG4gICAgICBleHBlY3QobmFtZXMpLnRvQ29udGFpbignQmlkaXJlY3Rpb25hbEF1ZGl0Jyk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdDb3JlIGVuZ2luZWVyaW5nIHRvb2xjaGFpbiBpbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgY29uc3QgcHJvZmlsZSA9ICdhZ2ktY29kZSc7XG4gIGNvbnN0IHRlbXBEaXJzOiBzdHJpbmdbXSA9IFtdO1xuXG4gIGFmdGVyRWFjaCgoKSA9PiB7XG4gICAgd2hpbGUgKHRlbXBEaXJzLmxlbmd0aCkge1xuICAgICAgY29uc3QgZGlyID0gdGVtcERpcnMucG9wKCk7XG4gICAgICBpZiAoZGlyKSB7XG4gICAgICAgIHJtU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIC8qKlxuICAgKiBDb2xsZWN0IHRvb2wgZGVmaW5pdGlvbnMgZnJvbSBjb3JlIENMSSBwbHVnaW5zIHdpdGhvdXQgaW52b2tpbmcgYW4gTExNLlxuICAgKi9cbiAgYXN5bmMgZnVuY3Rpb24gbG9hZFRvb2xNYXAod29ya2luZ0Rpcjogc3RyaW5nKTogUHJvbWlzZTxSZWNvcmQ8c3RyaW5nLCBUb29sRGVmaW5pdGlvbj4+IHtcbiAgICBjb25zdCB0b29sRGVmczogVG9vbERlZmluaXRpb25bXSA9IFtdO1xuICAgIGNvbnN0IHBsdWdpbnMgPSBbXG4gICAgICBjcmVhdGVMb2NhbEZpbGVzeXN0ZW1Ub29sUGx1Z2luKCksXG4gICAgICBjcmVhdGVMb2NhbFNlYXJjaFRvb2xQbHVnaW4oKSxcbiAgICAgIGNyZWF0ZUVkaXRUb29sUGx1Z2luKCksXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgcGx1Z2luIG9mIHBsdWdpbnMpIHtcbiAgICAgIGNvbnN0IGNyZWF0ZWQgPSBhd2FpdCBwbHVnaW4uY3JlYXRlKHsgd29ya2luZ0RpciwgZW52OiBwcm9jZXNzLmVudiB9KTtcbiAgICAgIGNvbnN0IG1vZHVsZXMgPSBBcnJheS5pc0FycmF5KGNyZWF0ZWQpID8gY3JlYXRlZCA6IFtjcmVhdGVkXTtcblxuICAgICAgZm9yIChjb25zdCBtb2R1bGUgb2YgbW9kdWxlcykge1xuICAgICAgICBpZiAoIW1vZHVsZSkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNvbnRyaWJ1dGlvblJlc3VsdCA9IGF3YWl0IG1vZHVsZS5jcmVhdGUoe1xuICAgICAgICAgIHByb2ZpbGU6IHByb2ZpbGUgYXMgYW55LFxuICAgICAgICAgIHdvcmtzcGFjZUNvbnRleHQ6IG51bGwsXG4gICAgICAgICAgd29ya2luZ0RpcixcbiAgICAgICAgICBlbnY6IHByb2Nlc3MuZW52LFxuICAgICAgICB9KTtcbiAgICAgICAgY29uc3QgY29udHJpYnV0aW9ucyA9IEFycmF5LmlzQXJyYXkoY29udHJpYnV0aW9uUmVzdWx0KSA/IGNvbnRyaWJ1dGlvblJlc3VsdCA6IFtjb250cmlidXRpb25SZXN1bHRdO1xuICAgICAgICBmb3IgKGNvbnN0IGNvbnRyaWJ1dGlvbiBvZiBjb250cmlidXRpb25zKSB7XG4gICAgICAgICAgaWYgKGNvbnRyaWJ1dGlvbj8udG9vbFN1aXRlKSB7XG4gICAgICAgICAgICB0b29sRGVmcy5wdXNoKC4uLmNvbnRyaWJ1dGlvbi50b29sU3VpdGUudG9vbHMpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoY29udHJpYnV0aW9uPy50b29sU3VpdGVzPy5sZW5ndGgpIHtcbiAgICAgICAgICAgIGZvciAoY29uc3Qgc3VpdGUgb2YgY29udHJpYnV0aW9uLnRvb2xTdWl0ZXMpIHtcbiAgICAgICAgICAgICAgdG9vbERlZnMucHVzaCguLi5zdWl0ZS50b29scyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRvb2xEZWZzLnJlZHVjZTxSZWNvcmQ8c3RyaW5nLCBUb29sRGVmaW5pdGlvbj4+KChhY2MsIHRvb2wpID0+IHtcbiAgICAgIGFjY1t0b29sLm5hbWVdID0gdG9vbDtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSwge30pO1xuICB9XG5cbiAgaXQoJ2V4cG9zZXMgY29yZSBmaWxlc3lzdGVtL3NlYXJjaC9lZGl0IHRvb2xzJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9IG1rZHRlbXBTeW5jKGpvaW4odG1wZGlyKCksICdlcm9zb2xhci1jbGktY29yZS0nKSk7XG4gICAgdGVtcERpcnMucHVzaCh3b3Jrc3BhY2UpO1xuXG4gICAgY29uc3QgdG9vbHMgPSBhd2FpdCBsb2FkVG9vbE1hcCh3b3Jrc3BhY2UpO1xuICAgIGV4cGVjdCh0b29sc1snbGlzdF9maWxlcyddKS50b0JlRGVmaW5lZCgpO1xuICAgIGV4cGVjdCh0b29sc1sncmVhZF9maWxlJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRvb2xzWydHcmVwJ10pLnRvQmVEZWZpbmVkKCk7XG4gICAgZXhwZWN0KHRvb2xzWydFZGl0J10pLnRvQmVEZWZpbmVkKCk7XG4gIH0pO1xuXG4gIGl0KCdzdXBwb3J0cyBiYXNpYyByZWFkL3NlYXJjaC9lZGl0IHdvcmtmbG93JywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IHdvcmtzcGFjZSA9IG1rZHRlbXBTeW5jKGpvaW4odG1wZGlyKCksICdlcm9zb2xhci1jbGktd29ya2Zsb3ctJykpO1xuICAgIHRlbXBEaXJzLnB1c2god29ya3NwYWNlKTtcblxuICAgIGNvbnN0IHNyY0RpciA9IGpvaW4od29ya3NwYWNlLCAnc3JjJyk7XG4gICAgbWtkaXJTeW5jKHNyY0RpciwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG5cbiAgICBjb25zdCBmaWxlUGF0aCA9IGpvaW4oc3JjRGlyLCAnZXhhbXBsZS50cycpO1xuICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IFtcbiAgICAgICdleHBvcnQgZnVuY3Rpb24gaGVsbG8obmFtZTogc3RyaW5nKSB7JyxcbiAgICAgICcgIHJldHVybiBgaGkgJHtuYW1lfWA7JyxcbiAgICAgICd9JyxcbiAgICAgICcnLFxuICAgIF0uam9pbignXFxuJyk7XG4gICAgd3JpdGVGaWxlU3luYyhmaWxlUGF0aCwgb3JpZ2luYWxDb250ZW50KTtcblxuICAgIGNvbnN0IHRvb2xzID0gYXdhaXQgbG9hZFRvb2xNYXAod29ya3NwYWNlKTtcbiAgICBjb25zdCBsaXN0RmlsZXMgPSB0b29sc1snbGlzdF9maWxlcyddO1xuICAgIGNvbnN0IHJlYWRGaWxlID0gdG9vbHNbJ3JlYWRfZmlsZSddO1xuICAgIGNvbnN0IGdyZXAgPSB0b29sc1snR3JlcCddO1xuICAgIGNvbnN0IGVkaXQgPSB0b29sc1snRWRpdCddO1xuXG4gICAgLy8gTGlzdCBmaWxlc1xuICAgIGNvbnN0IGxpc3RpbmcgPSBhd2FpdCBsaXN0RmlsZXMuaGFuZGxlciEoeyBwYXRoOiAnc3JjJywgcmVjdXJzaXZlOiB0cnVlIH0pO1xuICAgIGV4cGVjdChsaXN0aW5nKS50b0NvbnRhaW4oJ2V4YW1wbGUudHMnKTtcblxuICAgIC8vIFJlYWQgZmlsZVxuICAgIGNvbnN0IHJlYWRPdXRwdXQgPSBhd2FpdCByZWFkRmlsZS5oYW5kbGVyISh7IHBhdGg6ICdzcmMvZXhhbXBsZS50cycgfSk7XG4gICAgZXhwZWN0KHJlYWRPdXRwdXQpLnRvQ29udGFpbignaGVsbG8nKTtcblxuICAgIC8vIFNlYXJjaCBmb3IgY29udGVudFxuICAgIGNvbnN0IGdyZXBPdXRwdXQgPSBhd2FpdCBncmVwLmhhbmRsZXIhKHtcbiAgICAgIHBhdHRlcm46ICdoZWxsbycsXG4gICAgICBwYXRoOiB3b3Jrc3BhY2UsXG4gICAgICBvdXRwdXRfbW9kZTogJ2ZpbGVzX3dpdGhfbWF0Y2hlcycsXG4gICAgfSk7XG4gICAgZXhwZWN0KGdyZXBPdXRwdXQpLnRvQ29udGFpbignZXhhbXBsZS50cycpO1xuXG4gICAgLy8gRWRpdCBmaWxlIGNvbnRlbnRcbiAgICBjb25zdCBlZGl0T3V0cHV0ID0gYXdhaXQgZWRpdC5oYW5kbGVyISh7XG4gICAgICBmaWxlX3BhdGg6IGZpbGVQYXRoLFxuICAgICAgb2xkX3N0cmluZzogJ3JldHVybiBgaGkgJHtuYW1lfWA7JyxcbiAgICAgIG5ld19zdHJpbmc6ICdyZXR1cm4gYGhlbGxvICR7bmFtZX1gOycsXG4gICAgICByZXBsYWNlX2FsbDogdHJ1ZSxcbiAgICB9KTtcbiAgICBleHBlY3QoZWRpdE91dHB1dCkudG9Db250YWluKCdoZWxsbycpO1xuXG4gICAgY29uc3QgdXBkYXRlZCA9IHJlYWRGaWxlU3luYyhmaWxlUGF0aCwgJ3V0Zi04Jyk7XG4gICAgZXhwZWN0KHVwZGF0ZWQpLnRvQ29udGFpbignaGVsbG8gJHtuYW1lfScpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUtBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLFNBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE9BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLG9CQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyx5QkFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sc0JBQUEsR0FBQU4sT0FBQTtBQUNBLElBQUFPLGtCQUFBLEdBQUFQLE9BQUE7QUFDQSxJQUFBUSxXQUFBLEdBQUFSLE9BQUE7QUFiQTtBQUNBO0FBQ0E7QUFDQTs7QUFhQSxJQUFBUyxpQkFBUSxFQUFDLGlCQUFpQixFQUFFLE1BQU07RUFDaEMsSUFBQUEsaUJBQVEsRUFBQyw2QkFBNkIsRUFBRSxNQUFNO0lBQzVDLElBQUFDLFdBQUUsRUFBQyxxREFBcUQsRUFBRSxZQUFZO01BQ3BFLE1BQU1DLE1BQU0sR0FBRyxJQUFBQyxrREFBNkIsRUFBQyxDQUFDO01BQzlDLE1BQU1DLE1BQU0sR0FBRyxNQUFNRixNQUFNLENBQUNHLE1BQU0sQ0FBQztRQUFFQyxVQUFVLEVBQUVDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLENBQUM7UUFBRUMsR0FBRyxFQUFFRixPQUFPLENBQUNFO01BQUksQ0FBQyxDQUFDO01BQ25GLE1BQU1DLFlBQVksR0FBRyxNQUFNTixNQUFNLENBQUVDLE1BQU0sQ0FBQztRQUN4Q00sT0FBTyxFQUFFLFVBQVU7UUFDbkJDLGdCQUFnQixFQUFFLElBQUk7UUFDdEJOLFVBQVUsRUFBRUMsT0FBTyxDQUFDQyxHQUFHLENBQUMsQ0FBQztRQUN6QkMsR0FB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