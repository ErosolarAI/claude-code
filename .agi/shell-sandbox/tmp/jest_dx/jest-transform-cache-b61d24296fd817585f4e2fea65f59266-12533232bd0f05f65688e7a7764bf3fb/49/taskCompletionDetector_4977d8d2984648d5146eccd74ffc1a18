4f068d83e106f88e694bcb42a91d97b5
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.WRITE_TOOLS = exports.TaskCompletionDetector = void 0;
exports.getTaskCompletionDetector = getTaskCompletionDetector;
exports.resetTaskCompletionDetector = resetTaskCompletionDetector;
/**
 * Intelligent Task Completion Detector
 *
 * This module provides robust detection of whether a continuous task is truly complete,
 * rather than just pattern-matching keywords like "done" in responses.
 *
 * Key features:
 * - Multi-signal analysis (tool usage, response content, state changes)
 * - AI verification round before final completion
 * - Confidence scoring
 * - Work-in-progress detection
 *
 * @license MIT
 * @author Bo Shang
 */

// Keywords that strongly indicate task completion
const STRONG_COMPLETION_PATTERNS = [/^(all\s+)?tasks?\s+(are\s+)?(now\s+)?(complete|done|finished)/im, /^(i('ve|'m|\s+have|\s+am)\s+)?(successfully\s+)?(completed?|finished|done)\s+(all|the|with|everything)/im, /^everything\s+(is\s+)?(now\s+)?(complete|done|finished)/im, /^the\s+requested?\s+(task|work|changes?)\s+(is|are|has been)\s+(complete|done|finished)/im, /^i\s+have\s+(now\s+)?(successfully\s+)?(completed?|finished|done)\s+(all|the|everything)/im, /no\s+(more|further)\s+(tasks?|work|actions?|changes?)\s+(are\s+)?(needed|required|necessary)/im];

// Keywords that indicate work is still in progress
const INCOMPLETE_WORK_PATTERNS = [/\b(next|then|now\s+I('ll|\s+will)|let\s+me|I('ll|\s+will)|going\s+to|about\s+to)\b/i, /\b(continue|continuing|proceed|proceeding|working\s+on)\b/i, /\b(TODO|FIXME|WIP|in\s+progress)\b/i, /\b(still\s+need|remaining|left\s+to\s+do|more\s+to\s+do)\b/i, /\b(step\s+\d+|phase\s+\d+|iteration\s+\d+)\b/i, /\b(haven'?t\s+(yet|finished)|not\s+yet\s+(done|complete|finished))\b/i];

// Keywords that indicate pending actions
const PENDING_ACTION_PATTERNS = [/\b(need\s+to|should|must|have\s+to|requires?)\b/i, /\b(waiting|pending|queued)\b/i, /\b(before\s+I\s+can|after\s+that|once\s+that)\b/i, /\b(running|executing|processing)\b/i];

// Keywords that indicate errors or issues
const ERROR_PATTERNS = [/\b(error|failed|failure|exception|issue|problem|bug)\b/i, /\b(can'?t|cannot|couldn'?t|unable\s+to)\b/i, /\b(fix|fixing|resolve|resolving|debug|debugging)\b/i];

// Keywords that indicate follow-up questions
const FOLLOWUP_QUESTION_PATTERNS = [/\b(would\s+you\s+like|do\s+you\s+want|shall\s+I|should\s+I)\b/i, /\b(let\s+me\s+know|please\s+(confirm|tell|let))\b/i, /\?$/m];

// Keywords that indicate future work
const FUTURE_WORK_PATTERNS = [/\b(could\s+also|might\s+want\s+to|consider|recommend)\b/i, /\b(future|later|eventually|when\s+you\s+have\s+time)\b/i, /\b(improvement|enhancement|optimization)\b/i];

// Read-only tool names
const READ_ONLY_TOOLS = new Set(['read_file', 'Read', 'list_dir', 'list_files', 'search_text', 'grep', 'Grep', 'glob', 'Glob', 'git_status', 'git_log', 'git_diff']);

// Write/action tool names - exported for use in completion detection
const WRITE_TOOLS = exports.WRITE_TOOLS = new Set(['edit_file', 'Edit', 'write_file', 'Write', 'bash', 'Bash', 'execute_command', 'git_commit', 'git_push', 'NotebookEdit']);
class TaskCompletionDetector {
  toolHistory = [];
  responseHistory = [];
  lastToolNames = [];
  consecutiveNoTools = 0;
  todoStats = {
    pending: 0,
    completed: 0
  };
  constructor() {
    this.reset();
  }

  /**
   * Reset the detector state for a new task
   */
  reset() {
    this.toolHistory = [];
    this.responseHistory = [];
    this.lastToolNames = [];
    this.consecutiveNoTools = 0;
    this.todoStats = {
      pending: 0,
      completed: 0
    };
  }

  /**
   * Record a tool call
   */
  recordToolCall(toolName, success, hasOutput) {
    this.toolHistory.push({
      toolName,
      timestamp: Date.now(),
      success,
      hasOutput
    });
    this.lastToolNames.push(toolName);

    // Keep only recent history
    if (this.toolHistory.length > 100) {
      this.toolHistory = this.toolHistory.slice(-100);
    }
    if (this.lastToolNames.length > 20) {
      this.lastToolNames = this.lastToolNames.slice(-20);
    }
  }

  /**
   * Record a response (call after each AI response)
   */
  recordResponse(response, toolsUsed) {
    this.responseHistory.push(response);
    if (toolsUsed.length === 0) {
      this.consecutiveNoTools++;
    } else {
      this.consecutiveNoTools = 0;
      this.lastToolNames = toolsUsed;
    }

    // Keep only recent history
    if (this.responseHistory.length > 20) {
      this.responseHistory = this.responseHistory.slice(-20);
    }
  }

  /**
   * Update todo statistics
   */
  updateTodoStats(pending, completed) {
    this.todoStats = {
      pending,
      completed
    };
  }

  /**
   * Analyze the current state and determine if the task is complete
   */
  analyzeCompletion(currentResponse, toolsUsedThisRound) {
    this.recordResponse(currentResponse, toolsUsedThisRound);
    const signals = this.gatherSignals(currentResponse, toolsUsedThisRound);
    const confidence = this.calculateConfidence(signals);
    signals.completionConfidence = confidence;

    // Determine completion status
    let isComplete = false;
    let reason = '';
    let shouldVerify = false;
    let verificationPrompt;

    // High confidence completion
    if (confidence >= 0.85 && signals.hasExplicitCompletionStatement && !signals.hasIncompleteWorkIndicators) {
      isComplete = true;
      reason = 'High confidence explicit completion statement with no incomplete work indicators';
    }
    // Medium confidence - needs verification
    else if (confidence >= 0.6 && signals.hasExplicitCompletionStatement) {
      shouldVerify = true;
      reason = 'Medium confidence completion - AI verification recommended';
      verificationPrompt = this.generateVerificationPrompt(signals);
    }
    // Low confidence - likely not complete
    else if (confidence < 0.4) {
      isComplete = false;
      reason = this.getLowConfidenceReason(signals);
    }
    // Ambiguous case - check for stagnation
    else if (this.consecutiveNoTools >= 3 && !signals.hasIncompleteWorkIndicators) {
      shouldVerify = true;
      reason = 'No tool activity for multiple rounds - verification needed';
      verificationPrompt = this.generateStagnationVerificationPrompt();
    }
    // Default: not complete
    else {
      isComplete = false;
      reason = 'Active work indicators detected or low completion confidence';
    }
    return {
      isComplete,
      confidence,
      signals,
      reason,
      shouldVerify,
      verificationPrompt
    };
  }

  /**
   * Gather all completion signals from the current state
   */
  gatherSignals(response, toolsUsed) {
    const hasExplicitCompletionStatement = STRONG_COMPLETION_PATTERNS.some(p => p.test(response));
    const hasIncompleteWorkIndicators = INCOMPLETE_WORK_PATTERNS.some(p => p.test(response));
    const hasPendingActionIndicators = PENDING_ACTION_PATTERNS.some(p => p.test(response));
    const hasErrorIndicators = ERROR_PATTERNS.some(p => p.test(response));
    const hasFollowUpQuestions = FOLLOWUP_QUESTION_PATTERNS.some(p => p.test(response));
    const mentionsFutureWork = FUTURE_WORK_PATTERNS.some(p => p.test(response));
    const lastToolWasReadOnly = toolsUsed.length > 0 && toolsUsed.every(t => READ_ONLY_TOOLS.has(t));
    const recentTools = this.toolHistory.filter(t => t.success && Date.now() - t.timestamp < 60000);
    const hasRecentFileWrites = recentTools.some(t => t.toolName === 'edit_file' || t.toolName === 'Edit' || t.toolName === 'write_file' || t.toolName === 'Write');
    const hasRecentCommits = recentTools.some(t => t.toolName === 'bash' || t.toolName === 'Bash') && this.responseHistory.some(r => r.includes('git commit') || r.includes('committed'));
    return {
      hasExplicitCompletionStatement,
      hasIncompleteWorkIndicators,
      hasPendingActionIndicators,
      hasErrorIndicators,
      hasFollowUpQuestions,
      toolsUsedInLastResponse: toolsUsed.length,
      lastToolWasReadOnly,
      consecutiveResponsesWithoutTools: this.consecutiveNoTools,
      hasRecentFileWrites,
      hasRecentCommits,
      todoItemsPending: this.todoStats.pending,
      todoItemsCompleted: this.todoStats.completed,
      mentionsFutureWork,
      completionConfidence: 0 // Will be calculated
    };
  }

  /**
   * Calculate confidence score for task completion
   */
  calculateConfidence(signals) {
    let score = 0.5; // Start at neutral

    // Strong positive signals
    if (signals.hasExplicitCompletionStatement) score += 0.25;
    if (signals.hasRecentCommits) score += 0.1;
    if (signals.todoItemsPending === 0 && signals.todoItemsCompleted > 0) score += 0.15;

    // Strong negative signals
    if (signals.hasIncompleteWorkIndicators) score -= 0.3;
    if (signals.hasPendingActionIndicators) score -= 0.2;
    if (signals.hasErrorIndicators) score -= 0.25;
    if (signals.todoItemsPending > 0) score -= 0.15;

    // Moderate signals
    if (signals.toolsUsedInLastResponse > 0 && !signals.lastToolWasReadOnly) score -= 0.1;
    if (signals.consecutiveResponsesWithoutTools >= 2) score += 0.1;
    if (signals.hasFollowUpQuestions) score -= 0.1;
    if (signals.mentionsFutureWork && signals.hasExplicitCompletionStatement) score += 0.05;

    // Clamp to 0-1 range
    return Math.max(0, Math.min(1, score));
  }

  /**
   * Generate a verification prompt to ask the AI if the task is truly complete
   */
  generateVerificationPrompt(signals) {
    const concerns = [];
    if (signals.todoItemsPending > 0) {
      concerns.push(`there are ${signals.todoItemsPending} todo items still pending`);
    }
    if (signals.hasFollowUpQuestions) {
      concerns.push('you asked follow-up questions');
    }
    if (signals.mentionsFutureWork) {
      concerns.push('you mentioned potential future improvements');
    }
    const concernsText = concerns.length > 0 ? `However, ${concerns.join(' and ')}. ` : '';
    return `You indicated the task might be complete. ${concernsText}Please confirm:

1. Have ALL the originally requested changes been implemented?
2. Are there any remaining errors or issues that need to be fixed?
3. Is there anything else you need to do to fully complete this task?

If everything is truly done, respond with exactly: "TASK_FULLY_COMPLETE"
If there's more work to do, describe what remains.`;
  }

  /**
   * Generate a verification prompt for stagnation cases
   */
  generateStagnationVerificationPrompt() {
    return `I notice you haven't used any tools for several responses. Let me check:

1. Is the task complete? If so, summarize what was accomplished.
2. Are you blocked on something? If so, what do you need?
3. Is there more work to do? If so, please continue.

If everything is done, respond with exactly: "TASK_FULLY_COMPLETE"
Otherwise, please continue with the next action.`;
  }

  /**
   * Get a human-readable reason for low confidence
   */
  getLowConfidenceReason(signals) {
    const reasons = [];
    if (signals.hasIncompleteWorkIndicators) {
      reasons.push('incomplete work indicators detected');
    }
    if (signals.hasPendingActionIndicators) {
      reasons.push('pending action indicators found');
    }
    if (signals.hasErrorIndicators) {
      reasons.push('error indicators present');
    }
    if (signals.toolsUsedInLastResponse > 0 && !signals.lastToolWasReadOnly) {
      reasons.push('write operations performed');
    }
    if (signals.todoItemsPending > 0) {
      reasons.push(`${signals.todoItemsPending} todo items still pending`);
    }
    return reasons.length > 0 ? reasons.join(', ') : 'no clear completion signals';
  }

  /**
   * Check if a verification response confirms completion
   */
  isVerificationConfirmed(verificationResponse) {
    const hasCompletionMarker = verificationResponse.includes('TASK_FULLY_COMPLETE') || /^(yes|confirmed?|all\s+done|everything\s+(is\s+)?complete)/im.test(verificationResponse.trim());

    // Even if completion marker is present, check for contradictions
    if (hasCompletionMarker && this.responseContainsIncompleteIndicators(verificationResponse)) {
      return false;
    }
    return hasCompletionMarker;
  }

  /**
   * Check if a response contradicts itself by saying "complete" but also indicating incomplete work.
   * This comprehensive list catches many ways AI might admit work isn't done while claiming completion.
   */
  responseContainsIncompleteIndicators(response) {
    const incompletePatterns = [
    // === INTEGRATION/DEPLOYMENT STATE ===
    /hasn'?t\s+been\s+(integrated|implemented|connected|deployed|added|completed|tested|verified)\s*(yet|still)?/i, /not\s+(yet\s+)?(integrated|implemented|connected|deployed|functional|working|complete|tested|verified)/i, /ready\s+(for|to\s+be)\s+(integration|integrated|connected|deployed|testing|review)/i, /needs?\s+to\s+be\s+(integrated|connected|deployed|added|hooked|wired|tested|reviewed|merged)/i, /was\s+not\s+(performed|completed|implemented|deployed|integrated|tested)/i, /the\s+\w+\s+(service|module|component|feature)\s+hasn'?t\s+been/i,
    // === PARTIAL/INCOMPLETE STATE ===
    /still\s+(stores?|uses?|has|contains?|needs?|requires?|missing|lacks?|broken)/i, /\b(partially|mostly|almost|nearly|not\s+fully)\s+(complete|done|finished|implemented|working)/i, /\b(only\s+)?(part|some|half|portion)\s+of\s+(the\s+)?(task|work|feature|implementation)/i,
    // === QUALIFIER WORDS (uncertain completion) ===
    /\b(should|might|may|could|appears?\s+to)\s+be\s+(complete|done|working|functional)/i, /\btheoretically\s+(complete|done|working|functional)/i, /\b(assuming|provided|if)\s+(everything|it|this|that)\s+(works?|is\s+correct)/i,
    // === SELF-CONTRADICTION PHRASES ===
    /\b(done|complete|finished)\s+(but|except|however|although|though)/i, /however[,\s].{0,50}?(hasn'?t|not\s+yet|still\s+needs?|pending|remains?|missing|broken|failing)/i, /\bbut\s+.{0,30}?(not|hasn'?t|won'?t|can'?t|doesn'?t|isn'?t|wasn'?t)/i,
    // === FUTURE TENSE / DEFERRED WORK ===
    /will\s+(need\s+to|require|have\s+to)\s+(integrate|connect|deploy|complete|implement|test|fix)/i, /\b(left\s+as|deferred|postponed|out\s+of\s+scope|for\s+later|in\s+a\s+future)/i, /\b(after\s+(restart|reboot|redeploy)|takes?\s+effect\s+after|once\s+you)/i,
    // === REMAINING WORK INDICATORS ===
    /\b(remaining|outstanding|pending|leftover)\s+(tasks?|items?|work|issues?|steps?)/i, /\b(more\s+to\s+do|still\s+have\s+to|yet\s+to\s+be\s+done)/i, /\b(blocker|blocked\s+by|waiting\s+(for|on)|depends?\s+on)/i,
    // === ERROR/FAILURE STATE ===
    /\b(failing|broken|erroring)\s+(tests?|builds?|checks?|validations?)/i, /\btests?\s+(are\s+)?(still\s+)?failing/i, /\b(errors?|warnings?|issues?)\s+to\s+(address|fix|resolve)/i, /\b(doesn'?t|isn'?t|not)\s+(work|working|functional|functioning)/i,
    // === MANUAL STEPS REQUIRED ===
    /\b(you('ll|\s+will)\s+need\s+to|manually\s+(run|configure|set|update)|requires?\s+user)/i, /\b(run\s+this|execute\s+the\s+following|apply\s+the\s+migration)/i,
    // === TODO/FIXME IN PROSE ===
    /\b(todo|fixme|hack|xxx):\s/i, /\b(need\s+to|should|must)\s+(add|implement|create|write|build|fix)\b/i,
    // === SCOPE LIMITATIONS ===
    /\b(didn'?t|did\s+not)\s+have\s+(time|chance|opportunity)/i, /\b(beyond|outside)\s+(the\s+)?scope/i, /\b(for\s+now|at\s+this\s+point|currently)\s*.{0,20}?(not|without|lacks?|missing)/i,
    // === SIMULATION/FAKE OUTPUT INDICATORS ===
    // These indicate the task wasn't actually completed - just simulated
    /\bsimulat(?:ed?|ion|ing)\b/i, /\bhypothetical\b/i, /\btheoretical(?:ly)?\s+(result|output|outcome|report)/i, /\bfake\s+(?:data|report|result|output)/i, /\bmock(?:ed|ing)?\s+(?:data|report|result|output)/i, /\bfor\s+(?:demonstration|demo)\s+purposes?\s+only/i, /\bnot\s+(?:a\s+)?real\s+(?:result|output|execution)/i, /\bwould\s+(?:have\s+)?be(?:en)?\s+(?:the\s+)?result/i, /\bif\s+(?:this|we|you)\s+(?:were|had)\s+(?:actually|really)/i];
    for (const pattern of incompletePatterns) {
      if (pattern.test(response)) {
        return true;
      }
    }
    return false;
  }

  /**
   * Check if response contains simulation/fake indicators that should prevent completion.
   * Simulated results mean the task was NOT actually completed.
   */
  containsSimulationIndicators(response) {
    const simulationPatterns = [/\bsimulat(?:ed?|ion|ing)\b/i, /\bhypothetical\b/i, /\btheoretical(?:ly)?\s+(?:result|output|outcome|complete)/i, /\bfake\s+(?:data|report|result|output)/i, /\bmock(?:ed|ing)?\s+(?:data|report|result|output|exercise)/i, /\bdummy\s+(?:data|report|result|output)/i, /\bpretend(?:ed|ing)?\b/i, /\bimaginary\b/i, /\bfictional\b/i, /\bfor\s+(?:demonstration|demo)\s+purposes?\s+only/i, /\bnot\s+(?:a\s+)?real\b/i, /\bwould\s+(?:have\s+)?be(?:en)?\s+(?:the\s+)?result/i, /\bsecurity\s+(?:simulation|exercise)\b/i, /\boffensive\s+security\s+simulation\b/i];
    return simulationPatterns.some(pattern => pattern.test(response));
  }
}

/**
 * Create a singleton instance for the shell to use
 */
exports.TaskCompletionDetector = TaskCompletionDetector;
let detectorInstance = null;
function getTaskCompletionDetector() {
  if (!detectorInstance) {
    detectorInstance = new TaskCompletionDetector();
  }
  return detectorInstance;
}
function resetTaskCompletionDetector() {
  if (detectorInstance) {
    detectorInstance.reset();
  }
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTVFJPTkdfQ09NUExFVElPTl9QQVRURVJOUyIsIklOQ09NUExFVEVfV09SS19QQVRURVJOUyIsIlBFTkRJTkdfQUNUSU9OX1BBVFRFUk5TIiwiRVJST1JfUEFUVEVSTlMiLCJGT0xMT1dVUF9RVUVTVElPTl9QQVRURVJOUyIsIkZVVFVSRV9XT1JLX1BBVFRFUk5TIiwiUkVBRF9PTkxZX1RPT0xTIiwiU2V0IiwiV1JJVEVfVE9PTFMiLCJleHBvcnRzIiwiVGFza0NvbXBsZXRpb25EZXRlY3RvciIsInRvb2xIaXN0b3J5IiwicmVzcG9uc2VIaXN0b3J5IiwibGFzdFRvb2xOYW1lcyIsImNvbnNlY3V0aXZlTm9Ub29scyIsInRvZG9TdGF0cyIsInBlbmRpbmciLCJjb21wbGV0ZWQiLCJjb25zdHJ1Y3RvciIsInJlc2V0IiwicmVjb3JkVG9vbENhbGwiLCJ0b29sTmFtZSIsInN1Y2Nlc3MiLCJoYXNPdXRwdXQiLCJwdXNoIiwidGltZXN0YW1wIiwiRGF0ZSIsIm5vdyIsImxlbmd0aCIsInNsaWNlIiwicmVjb3JkUmVzcG9uc2UiLCJyZXNwb25zZSIsInRvb2xzVXNlZCIsInVwZGF0ZVRvZG9TdGF0cyIsImFuYWx5emVDb21wbGV0aW9uIiwiY3VycmVudFJlc3BvbnNlIiwidG9vbHNVc2VkVGhpc1JvdW5kIiwic2lnbmFscyIsImdhdGhlclNpZ25hbHMiLCJjb25maWRlbmNlIiwiY2FsY3VsYXRlQ29uZmlkZW5jZSIsImNvbXBsZXRpb25Db25maWRlbmNlIiwiaXNDb21wbGV0ZSIsInJlYXNvbiIsInNob3VsZFZlcmlmeSIsInZlcmlmaWNhdGlvblByb21wdCIsImhhc0V4cGxpY2l0Q29tcGxldGlvblN0YXRlbWVudCIsImhhc0luY29tcGxldGVXb3JrSW5kaWNhdG9ycyIsImdlbmVyYXRlVmVyaWZpY2F0aW9uUHJvbXB0IiwiZ2V0TG93Q29uZmlkZW5jZVJlYXNvbiIsImdlbmVyYXRlU3RhZ25hdGlvblZlcmlmaWNhdGlvblByb21wdCIsInNvbWUiLCJwIiwidGVzdCIsImhhc1BlbmRpbmdBY3Rpb25JbmRpY2F0b3JzIiwiaGFzRXJyb3JJbmRpY2F0b3JzIiwiaGFzRm9sbG93VXBRdWVzdGlvbnMiLCJtZW50aW9uc0Z1dHVyZVdvcmsiLCJsYXN0VG9vbFdhc1JlYWRPbmx5IiwiZXZlcnkiLCJ0IiwiaGFzIiwicmVjZW50VG9vbHMiLCJmaWx0ZXIiLCJoYXNSZWNlbnRGaWxlV3JpdGVzIiwiaGFzUmVjZW50Q29tbWl0cyIsInIiLCJpbmNsdWRlcyIsInRvb2xzVXNlZEluTGFzdFJlc3BvbnNlIiwiY29uc2VjdXRpdmVSZXNwb25zZXNXaXRob3V0VG9vbHMiLCJ0b2RvSXRlbXNQZW5kaW5nIiwidG9kb0l0ZW1zQ29tcGxldGVkIiwic2NvcmUiLCJNYXRoIiwibWF4IiwibWluIiwiY29uY2VybnMiLCJjb25jZXJuc1RleHQiLCJqb2luIiwicmVhc29ucyIsImlzVmVyaWZpY2F0aW9uQ29uZmlybWVkIiwidmVyaWZpY2F0aW9uUmVzcG9uc2UiLCJoYXNDb21wbGV0aW9uTWFya2VyIiwidHJpbSIsInJlc3BvbnNlQ29udGFpbnNJbmNvbXBsZXRlSW5kaWNhdG9ycyIsImluY29tcGxldGVQYXR0ZXJucyIsInBhdHRlcm4iLCJjb250YWluc1NpbXVsYXRpb25JbmRpY2F0b3JzIiwic2ltdWxhdGlvblBhdHRlcm5zIiwiZGV0ZWN0b3JJbnN0YW5jZSIsImdldFRhc2tDb21wbGV0aW9uRGV0ZWN0b3IiLCJyZXNldFRhc2tDb21wbGV0aW9uRGV0ZWN0b3IiXSwic291cmNlcyI6WyJ0YXNrQ29tcGxldGlvbkRldGVjdG9yLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogSW50ZWxsaWdlbnQgVGFzayBDb21wbGV0aW9uIERldGVjdG9yXG4gKlxuICogVGhpcyBtb2R1bGUgcHJvdmlkZXMgcm9idXN0IGRldGVjdGlvbiBvZiB3aGV0aGVyIGEgY29udGludW91cyB0YXNrIGlzIHRydWx5IGNvbXBsZXRlLFxuICogcmF0aGVyIHRoYW4ganVzdCBwYXR0ZXJuLW1hdGNoaW5nIGtleXdvcmRzIGxpa2UgXCJkb25lXCIgaW4gcmVzcG9uc2VzLlxuICpcbiAqIEtleSBmZWF0dXJlczpcbiAqIC0gTXVsdGktc2lnbmFsIGFuYWx5c2lzICh0b29sIHVzYWdlLCByZXNwb25zZSBjb250ZW50LCBzdGF0ZSBjaGFuZ2VzKVxuICogLSBBSSB2ZXJpZmljYXRpb24gcm91bmQgYmVmb3JlIGZpbmFsIGNvbXBsZXRpb25cbiAqIC0gQ29uZmlkZW5jZSBzY29yaW5nXG4gKiAtIFdvcmstaW4tcHJvZ3Jlc3MgZGV0ZWN0aW9uXG4gKlxuICogQGxpY2Vuc2UgTUlUXG4gKiBAYXV0aG9yIEJvIFNoYW5nXG4gKi9cblxuZXhwb3J0IGludGVyZmFjZSBUb29sQWN0aXZpdHkge1xuICB0b29sTmFtZTogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgaGFzT3V0cHV0OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25TaWduYWxzIHtcbiAgLy8gUmVzcG9uc2UgY29udGVudCBzaWduYWxzXG4gIGhhc0V4cGxpY2l0Q29tcGxldGlvblN0YXRlbWVudDogYm9vbGVhbjtcbiAgaGFzSW5jb21wbGV0ZVdvcmtJbmRpY2F0b3JzOiBib29sZWFuO1xuICBoYXNQZW5kaW5nQWN0aW9uSW5kaWNhdG9yczogYm9vbGVhbjtcbiAgaGFzRXJyb3JJbmRpY2F0b3JzOiBib29sZWFuO1xuICBoYXNGb2xsb3dVcFF1ZXN0aW9uczogYm9vbGVhbjtcblxuICAvLyBBY3Rpdml0eSBzaWduYWxzXG4gIHRvb2xzVXNlZEluTGFzdFJlc3BvbnNlOiBudW1iZXI7XG4gIGxhc3RUb29sV2FzUmVhZE9ubHk6IGJvb2xlYW47XG4gIGNvbnNlY3V0aXZlUmVzcG9uc2VzV2l0aG91dFRvb2xzOiBudW1iZXI7XG4gIGhhc1JlY2VudEZpbGVXcml0ZXM6IGJvb2xlYW47XG4gIGhhc1JlY2VudENvbW1pdHM6IGJvb2xlYW47XG5cbiAgLy8gQ29udGV4dCBzaWduYWxzXG4gIHRvZG9JdGVtc1BlbmRpbmc6IG51bWJlcjtcbiAgdG9kb0l0ZW1zQ29tcGxldGVkOiBudW1iZXI7XG4gIG1lbnRpb25zRnV0dXJlV29yazogYm9vbGVhbjtcblxuICAvLyBDYWxjdWxhdGVkIGNvbmZpZGVuY2UgKDAtMSlcbiAgY29tcGxldGlvbkNvbmZpZGVuY2U6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQW5hbHlzaXMge1xuICBpc0NvbXBsZXRlOiBib29sZWFuO1xuICBjb25maWRlbmNlOiBudW1iZXI7XG4gIHNpZ25hbHM6IENvbXBsZXRpb25TaWduYWxzO1xuICByZWFzb246IHN0cmluZztcbiAgc2hvdWxkVmVyaWZ5OiBib29sZWFuO1xuICB2ZXJpZmljYXRpb25Qcm9tcHQ/OiBzdHJpbmc7XG59XG5cbi8vIEtleXdvcmRzIHRoYXQgc3Ryb25nbHkgaW5kaWNhdGUgdGFzayBjb21wbGV0aW9uXG5jb25zdCBTVFJPTkdfQ09NUExFVElPTl9QQVRURVJOUyA9IFtcbiAgL14oYWxsXFxzKyk/dGFza3M/XFxzKyhhcmVcXHMrKT8obm93XFxzKyk/KGNvbXBsZXRlfGRvbmV8ZmluaXNoZWQpL2ltLFxuICAvXihpKCd2ZXwnbXxcXHMraGF2ZXxcXHMrYW0pXFxzKyk/KHN1Y2Nlc3NmdWxseVxccyspPyhjb21wbGV0ZWQ/fGZpbmlzaGVkfGRvbmUpXFxzKyhhbGx8dGhlfHdpdGh8ZXZlcnl0aGluZykvaW0sXG4gIC9eZXZlcnl0aGluZ1xccysoaXNcXHMrKT8obm93XFxzKyk/KGNvbXBsZXRlfGRvbmV8ZmluaXNoZWQpL2ltLFxuICAvXnRoZVxccytyZXF1ZXN0ZWQ/XFxzKyh0YXNrfHdvcmt8Y2hhbmdlcz8pXFxzKyhpc3xhcmV8aGFzIGJlZW4pXFxzKyhjb21wbGV0ZXxkb25lfGZpbmlzaGVkKS9pbSxcbiAgL15pXFxzK2hhdmVcXHMrKG5vd1xccyspPyhzdWNjZXNzZnVsbHlcXHMrKT8oY29tcGxldGVkP3xmaW5pc2hlZHxkb25lKVxccysoYWxsfHRoZXxldmVyeXRoaW5nKS9pbSxcbiAgL25vXFxzKyhtb3JlfGZ1cnRoZXIpXFxzKyh0YXNrcz98d29ya3xhY3Rpb25zP3xjaGFuZ2VzPylcXHMrKGFyZVxccyspPyhuZWVkZWR8cmVxdWlyZWR8bmVjZXNzYXJ5KS9pbSxcbl07XG5cbi8vIEtleXdvcmRzIHRoYXQgaW5kaWNhdGUgd29yayBpcyBzdGlsbCBpbiBwcm9ncmVzc1xuY29uc3QgSU5DT01QTEVURV9XT1JLX1BBVFRFUk5TID0gW1xuICAvXFxiKG5leHR8dGhlbnxub3dcXHMrSSgnbGx8XFxzK3dpbGwpfGxldFxccyttZXxJKCdsbHxcXHMrd2lsbCl8Z29pbmdcXHMrdG98YWJvdXRcXHMrdG8pXFxiL2ksXG4gIC9cXGIoY29udGludWV8Y29udGludWluZ3xwcm9jZWVkfHByb2NlZWRpbmd8d29ya2luZ1xccytvbilcXGIvaSxcbiAgL1xcYihUT0RPfEZJWE1FfFdJUHxpblxccytwcm9ncmVzcylcXGIvaSxcbiAgL1xcYihzdGlsbFxccytuZWVkfHJlbWFpbmluZ3xsZWZ0XFxzK3RvXFxzK2RvfG1vcmVcXHMrdG9cXHMrZG8pXFxiL2ksXG4gIC9cXGIoc3RlcFxccytcXGQrfHBoYXNlXFxzK1xcZCt8aXRlcmF0aW9uXFxzK1xcZCspXFxiL2ksXG4gIC9cXGIoaGF2ZW4nP3RcXHMrKHlldHxmaW5pc2hlZCl8bm90XFxzK3lldFxccysoZG9uZXxjb21wbGV0ZXxmaW5pc2hlZCkpXFxiL2ksXG5dO1xuXG4vLyBLZXl3b3JkcyB0aGF0IGluZGljYXRlIHBlbmRpbmcgYWN0aW9uc1xuY29uc3QgUEVORElOR19BQ1RJT05fUEFUVEVSTlMgPSBbXG4gIC9cXGIobmVlZFxccyt0b3xzaG91bGR8bXVzdHxoYXZlXFxzK3RvfHJlcXVpcmVzPylcXGIvaSxcbiAgL1xcYih3YWl0aW5nfHBlbmRpbmd8cXVldWVkKVxcYi9pLFxuICAvXFxiKGJlZm9yZVxccytJXFxzK2NhbnxhZnRlclxccyt0aGF0fG9uY2VcXHMrdGhhdClcXGIvaSxcbiAgL1xcYihydW5uaW5nfGV4ZWN1dGluZ3xwcm9jZXNzaW5nKVxcYi9pLFxuXTtcblxuLy8gS2V5d29yZHMgdGhhdCBpbmRpY2F0ZSBlcnJvcnMgb3IgaXNzdWVzXG5jb25zdCBFUlJPUl9QQVRURVJOUyA9IFtcbiAgL1xcYihlcnJvcnxmYWlsZWR8ZmFpbHVyZXxleGNlcHRpb258aXNzdWV8cHJvYmxlbXxidWcpXFxiL2ksXG4gIC9cXGIoY2FuJz90fGNhbm5vdHxjb3VsZG4nP3R8dW5hYmxlXFxzK3RvKVxcYi9pLFxuICAvXFxiKGZpeHxmaXhpbmd8cmVzb2x2ZXxyZXNvbHZpbmd8ZGVidWd8ZGVidWdnaW5nKVxcYi9pLFxuXTtcblxuLy8gS2V5d29yZHMgdGhhdCBpbmRpY2F0ZSBmb2xsb3ctdXAgcXVlc3Rpb25zXG5jb25zdCBGT0xMT1dVUF9RVUVTVElPTl9QQVRURVJOUyA9IFtcbiAgL1xcYih3b3VsZFxccyt5b3VcXHMrbGlrZXxkb1xccyt5b3VcXHMrd2FudHxzaGFsbFxccytJfHNob3VsZFxccytJKVxcYi9pLFxuICAvXFxiKGxldFxccyttZVxccytrbm93fHBsZWFzZVxccysoY29uZmlybXx0ZWxsfGxldCkpXFxiL2ksXG4gIC9cXD8kL20sXG5dO1xuXG4vLyBLZXl3b3JkcyB0aGF0IGluZGljYXRlIGZ1dHVyZSB3b3JrXG5jb25zdCBGVVRVUkVfV09SS19QQVRURVJOUyA9IFtcbiAgL1xcYihjb3VsZFxccythbHNvfG1pZ2h0XFxzK3dhbnRcXHMrdG98Y29uc2lkZXJ8cmVjb21tZW5kKVxcYi9pLFxuICAvXFxiKGZ1dHVyZXxsYXRlcnxldmVudHVhbGx5fHdoZW5cXHMreW91XFxzK2hhdmVcXHMrdGltZSlcXGIvaSxcbiAgL1xcYihpbXByb3ZlbWVudHxlbmhhbmNlbWVudHxvcHRpbWl6YXRpb24pXFxiL2ksXG5dO1xuXG4vLyBSZWFkLW9ubHkgdG9vbCBuYW1lc1xuY29uc3QgUkVBRF9PTkxZX1RPT0xTID0gbmV3IFNldChbXG4gICdyZWFkX2ZpbGUnLFxuICAnUmVhZCcsXG4gICdsaXN0X2RpcicsXG4gICdsaXN0X2ZpbGVzJyxcbiAgJ3NlYXJjaF90ZXh0JyxcbiAgJ2dyZXAnLFxuICAnR3JlcCcsXG4gICdnbG9iJyxcbiAgJ0dsb2InLFxuICAnZ2l0X3N0YXR1cycsXG4gICdnaXRfbG9nJyxcbiAgJ2dpdF9kaWZmJyxcbl0pO1xuXG4vLyBXcml0ZS9hY3Rpb24gdG9vbCBuYW1lcyAtIGV4cG9ydGVkIGZvciB1c2UgaW4gY29tcGxldGlvbiBkZXRlY3Rpb25cbmV4cG9ydCBjb25zdCBXUklURV9UT09MUyA9IG5ldyBTZXQoW1xuICAnZWRpdF9maWxlJyxcbiAgJ0VkaXQnLFxuICAnd3JpdGVfZmlsZScsXG4gICdXcml0ZScsXG4gICdiYXNoJyxcbiAgJ0Jhc2gnLFxuICAnZXhlY3V0ZV9jb21tYW5kJyxcbiAgJ2dpdF9jb21taXQnLFxuICAnZ2l0X3B1c2gnLFxuICAnTm90ZWJvb2tFZGl0Jyxcbl0pO1xuXG5leHBvcnQgY2xhc3MgVGFza0NvbXBsZXRpb25EZXRlY3RvciB7XG4gIHByaXZhdGUgdG9vbEhpc3Rvcnk6IFRvb2xBY3Rpdml0eVtdID0gW107XG4gIHByaXZhdGUgcmVzcG9uc2VIaXN0b3J5OiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGxhc3RUb29sTmFtZXM6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgY29uc2VjdXRpdmVOb1Rvb2xzID0gMDtcbiAgcHJpdmF0ZSB0b2RvU3RhdHMgPSB7IHBlbmRpbmc6IDAsIGNvbXBsZXRlZDogMCB9O1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMucmVzZXQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXNldCB0aGUgZGV0ZWN0b3Igc3RhdGUgZm9yIGEgbmV3IHRhc2tcbiAgICovXG4gIHJlc2V0KCk6IHZvaWQge1xuICAgIHRoaXMudG9vbEhpc3RvcnkgPSBbXTtcbiAgICB0aGlzLnJlc3BvbnNlSGlzdG9yeSA9IFtdO1xuICAgIHRoaXMubGFzdFRvb2xOYW1lcyA9IFtdO1xuICAgIHRoaXMuY29uc2VjdXRpdmVOb1Rvb2xzID0gMDtcbiAgICB0aGlzLnRvZG9TdGF0cyA9IHsgcGVuZGluZzogMCwgY29tcGxldGVkOiAwIH07XG4gIH1cblxuICAvKipcbiAgICogUmVjb3JkIGEgdG9vbCBjYWxsXG4gICAqL1xuICByZWNvcmRUb29sQ2FsbCh0b29sTmFtZTogc3RyaW5nLCBzdWNjZXNzOiBib29sZWFuLCBoYXNPdXRwdXQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnRvb2xIaXN0b3J5LnB1c2goe1xuICAgICAgdG9vbE5hbWUsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBzdWNjZXNzLFxuICAgICAgaGFzT3V0cHV0LFxuICAgIH0pO1xuICAgIHRoaXMubGFzdFRvb2xOYW1lcy5wdXNoKHRvb2xOYW1lKTtcblxuICAgIC8vIEtlZXAgb25seSByZWNlbnQgaGlzdG9yeVxuICAgIGlmICh0aGlzLnRvb2xIaXN0b3J5Lmxlbmd0aCA+IDEwMCkge1xuICAgICAgdGhpcy50b29sSGlzdG9yeSA9IHRoaXMudG9vbEhpc3Rvcnkuc2xpY2UoLTEwMCk7XG4gICAgfVxuICAgIGlmICh0aGlzLmxhc3RUb29sTmFtZXMubGVuZ3RoID4gMjApIHtcbiAgICAgIHRoaXMubGFzdFRvb2xOYW1lcyA9IHRoaXMubGFzdFRvb2xOYW1lcy5zbGljZSgtMjApO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZWNvcmQgYSByZXNwb25zZSAoY2FsbCBhZnRlciBlYWNoIEFJIHJlc3BvbnNlKVxuICAgKi9cbiAgcmVjb3JkUmVzcG9uc2UocmVzcG9uc2U6IHN0cmluZywgdG9vbHNVc2VkOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIHRoaXMucmVzcG9uc2VIaXN0b3J5LnB1c2gocmVzcG9uc2UpO1xuXG4gICAgaWYgKHRvb2xzVXNlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVOb1Rvb2xzKys7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuY29uc2VjdXRpdmVOb1Rvb2xzID0gMDtcbiAgICAgIHRoaXMubGFzdFRvb2xOYW1lcyA9IHRvb2xzVXNlZDtcbiAgICB9XG5cbiAgICAvLyBLZWVwIG9ubHkgcmVjZW50IGhpc3RvcnlcbiAgICBpZiAodGhpcy5yZXNwb25zZUhpc3RvcnkubGVuZ3RoID4gMjApIHtcbiAgICAgIHRoaXMucmVzcG9uc2VIaXN0b3J5ID0gdGhpcy5yZXNwb25zZUhpc3Rvcnkuc2xpY2UoLTIwKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRvZG8gc3RhdGlzdGljc1xuICAgKi9cbiAgdXBkYXRlVG9kb1N0YXRzKHBlbmRpbmc6IG51bWJlciwgY29tcGxldGVkOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnRvZG9TdGF0cyA9IHsgcGVuZGluZywgY29tcGxldGVkIH07XG4gIH1cblxuICAvKipcbiAgICogQW5hbHl6ZSB0aGUgY3VycmVudCBzdGF0ZSBhbmQgZGV0ZXJtaW5lIGlmIHRoZSB0YXNrIGlzIGNvbXBsZXRlXG4gICAqL1xuICBhbmFseXplQ29tcGxldGlvbihjdXJyZW50UmVzcG9uc2U6IHN0cmluZywgdG9vbHNVc2VkVGhpc1JvdW5kOiBzdHJpbmdbXSk6IENvbXBsZXRpb25BbmFseXNpcyB7XG4gICAgdGhpcy5yZWNvcmRSZXNwb25zZShjdXJyZW50UmVzcG9uc2UsIHRvb2xzVXNlZFRoaXNSb3VuZCk7XG5cbiAgICBjb25zdCBzaWduYWxzID0gdGhpcy5nYXRoZXJTaWduYWxzKGN1cnJlbnRSZXNwb25zZSwgdG9vbHNVc2VkVGhpc1JvdW5kKTtcbiAgICBjb25zdCBjb25maWRlbmNlID0gdGhpcy5jYWxjdWxhdGVDb25maWRlbmNlKHNpZ25hbHMpO1xuXG4gICAgc2lnbmFscy5jb21wbGV0aW9uQ29uZmlkZW5jZSA9IGNvbmZpZGVuY2U7XG5cbiAgICAvLyBEZXRlcm1pbmUgY29tcGxldGlvbiBzdGF0dXNcbiAgICBsZXQgaXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgIGxldCByZWFzb24gPSAnJztcbiAgICBsZXQgc2hvdWxkVmVyaWZ5ID0gZmFsc2U7XG4gICAgbGV0IHZlcmlmaWNhdGlvblByb21wdDogc3RyaW5nIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gSGlnaCBjb25maWRlbmNlIGNvbXBsZXRpb25cbiAgICBpZiAoY29uZmlkZW5jZSA+PSAwLjg1ICYmIHNpZ25hbHMuaGFzRXhwbGljaXRDb21wbGV0aW9uU3RhdGVtZW50ICYmICFzaWduYWxzLmhhc0luY29tcGxldGVXb3JrSW5kaWNhdG9ycykge1xuICAgICAgaXNDb21wbGV0ZSA9IHRydWU7XG4gICAgICByZWFzb24gPSAnSGlnaCBjb25maWRlbmNlIGV4cGxpY2l0IGNvbXBsZXRpb24gc3RhdGVtZW50IHdpdGggbm8gaW5jb21wbGV0ZSB3b3JrIGluZGljYXRvcnMnO1xuICAgIH1cbiAgICAvLyBNZWRpdW0gY29uZmlkZW5jZSAtIG5lZWRzIHZlcmlmaWNhdGlvblxuICAgIGVsc2UgaWYgKGNvbmZpZGVuY2UgPj0gMC42ICYmIHNpZ25hbHMuaGFzRXhwbGljaXRDb21wbGV0aW9uU3RhdGVtZW50KSB7XG4gICAgICBzaG91bGRWZXJpZnkgPSB0cnVlO1xuICAgICAgcmVhc29uID0gJ01lZGl1bSBjb25maWRlbmNlIGNvbXBsZXRpb24gLSBBSSB2ZXJpZmljYXRpb24gcmVjb21tZW5kZWQnO1xuICAgICAgdmVyaWZpY2F0aW9uUHJvbXB0ID0gdGhpcy5nZW5lcmF0ZVZlcmlmaWNhdGlvblByb21wdChzaWduYWxzKTtcbiAgICB9XG4gICAgLy8gTG93IGNvbmZpZGVuY2UgLSBsaWtlbHkgbm90IGNvbXBsZXRlXG4gICAgZWxzZSBpZiAoY29uZmlkZW5jZSA8IDAuNCkge1xuICAgICAgaXNDb21wbGV0ZSA9IGZhbHNlO1xuICAgICAgcmVhc29uID0gdGhpcy5nZXRMb3dDb25maWRlbmNlUmVhc29uKHNpZ25hbHMpO1xuICAgIH1cbiAgICAvLyBBbWJpZ3VvdXMgY2FzZSAtIGNoZWNrIGZvciBzdGFnbmF0aW9uXG4gICAgZWxzZSBpZiAodGhpcy5jb25zZWN1dGl2ZU5vVG9vbHMgPj0gMyAmJiAhc2lnbmFscy5oYXNJbmNvbXBsZXRlV29ya0luZGljYXRvcnMpIHtcbiAgICAgIHNob3VsZFZlcmlmeSA9IHRydWU7XG4gICAgICByZWFzb24gPSAnTm8gdG9vbCBhY3Rpdml0eSBmb3IgbXVsdGlwbGUgcm91bmRzIC0gdmVyaWZpY2F0aW9uIG5lZWRlZCc7XG4gICAgICB2ZXJpZmljYXRpb25Qcm9tcHQgPSB0aGlzLmdlbmVyYXRlU3RhZ25hdGlvblZlcmlmaWNhdGlvblByb21wdCgpO1xuICAgIH1cbiAgICAvLyBEZWZhdWx0OiBub3QgY29tcGxldGVcbiAgICBlbHNlIHtcbiAgICAgIGlzQ29tcGxldGUgPSBmYWxzZTtcbiAgICAgIHJlYXNvbiA9ICdBY3RpdmUgd29yayBpbmRpY2F0b3JzIGRldGVjdGVkIG9yIGxvdyBjb21wbGV0aW9uIGNvbmZpZGVuY2UnO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBpc0NvbXBsZXRlLFxuICAgICAgY29uZmlkZW5jZSxcbiAgICAgIHNpZ25hbHMsXG4gICAgICByZWFzb24sXG4gICAgICBzaG91bGRWZXJpZnksXG4gICAgICB2ZXJpZmljYXRpb25Qcm9tcHQsXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHYXRoZXIgYWxsIGNvbXBsZXRpb24gc2lnbmFscyBmcm9tIHRoZSBjdXJyZW50IHN0YXRlXG4gICAqL1xuICBwcml2YXRlIGdhdGhlclNpZ25hbHMocmVzcG9uc2U6IHN0cmluZywgdG9vbHNVc2VkOiBzdHJpbmdbXSk6IENvbXBsZXRpb25TaWduYWxzIHtcbiAgICBjb25zdCBoYXNFeHBsaWNpdENvbXBsZXRpb25TdGF0ZW1lbnQgPSBTVFJPTkdfQ09NUExFVElPTl9QQVRURVJOUy5zb21lKChwKSA9PiBwLnRlc3QocmVzcG9uc2UpKTtcbiAgICBjb25zdCBoYXNJbmNvbXBsZXRlV29ya0luZGljYXRvcnMgPSBJTkNPTVBMRVRFX1dPUktfUEFUVEVSTlMuc29tZSgocCkgPT4gcC50ZXN0KHJlc3BvbnNlKSk7XG4gICAgY29uc3QgaGFzUGVuZGluZ0FjdGlvbkluZGljYXRvcnMgPSBQRU5ESU5HX0FDVElPTl9QQVRURVJOUy5zb21lKChwKSA9PiBwLnRlc3QocmVzcG9uc2UpKTtcbiAgICBjb25zdCBoYXNFcnJvckluZGljYXRvcnMgPSBFUlJPUl9QQVRURVJOUy5zb21lKChwKSA9PiBwLnRlc3QocmVzcG9uc2UpKTtcbiAgICBjb25zdCBoYXNGb2xsb3dVcFF1ZXN0aW9ucyA9IEZPTExPV1VQX1FVRVNUSU9OX1BBVFRFUk5TLnNvbWUoKHApID0+IHAudGVzdChyZXNwb25zZSkpO1xuICAgIGNvbnN0IG1lbnRpb25zRnV0dXJlV29yayA9IEZVVFVSRV9XT1JLX1BBVFRFUk5TLnNvbWUoKHApID0+IHAudGVzdChyZXNwb25zZSkpO1xuXG4gICAgY29uc3QgbGFzdFRvb2xXYXNSZWFkT25seSA9XG4gICAgICB0b29sc1VzZWQubGVuZ3RoID4gMCAmJiB0b29sc1VzZWQuZXZlcnkoKHQpID0+IFJFQURfT05MWV9UT09MUy5oYXModCkpO1xuXG4gICAgY29uc3QgcmVjZW50VG9vbHMgPSB0aGlzLnRvb2xIaXN0b3J5LmZpbHRlcihcbiAgICAgICh0KSA9PiB0LnN1Y2Nlc3MgJiYgRGF0ZS5ub3coKSAtIHQudGltZXN0YW1wIDwgNjAwMDBcbiAgICApO1xuICAgIGNvbnN0IGhhc1JlY2VudEZpbGVXcml0ZXMgPSByZWNlbnRUb29scy5zb21lKFxuICAgICAgKHQpID0+IHQudG9vbE5hbWUgPT09ICdlZGl0X2ZpbGUnIHx8IHQudG9vbE5hbWUgPT09ICdFZGl0JyB8fFxuICAgICAgICAgICAgIHQudG9vbE5hbWUgPT09ICd3cml0ZV9maWxlJyB8fCB0LnRvb2xOYW1lID09PSAnV3JpdGUnXG4gICAgKTtcbiAgICBjb25zdCBoYXNSZWNlbnRDb21taXRzID0gcmVjZW50VG9vbHMuc29tZShcbiAgICAgICh0KSA9PiB0LnRvb2xOYW1lID09PSAnYmFzaCcgfHwgdC50b29sTmFtZSA9PT0gJ0Jhc2gnXG4gICAgKSAmJiB0aGlzLnJlc3BvbnNlSGlzdG9yeS5zb21lKChyKSA9PiByLmluY2x1ZGVzKCdnaXQgY29tbWl0JykgfHwgci5pbmNsdWRlcygnY29tbWl0dGVkJykpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGhhc0V4cGxpY2l0Q29tcGxldGlvblN0YXRlbWVudCxcbiAgICAgIGhhc0luY29tcGxldGVXb3JrSW5kaWNhdG9ycyxcbiAgICAgIGhhc1BlbmRpbmdBY3Rpb25JbmRpY2F0b3JzLFxuICAgICAgaGFzRXJyb3JJbmRpY2F0b3JzLFxuICAgICAgaGFzRm9sbG93VXBRdWVzdGlvbnMsXG4gICAgICB0b29sc1VzZWRJbkxhc3RSZXNwb25zZTogdG9vbHNVc2VkLmxlbmd0aCxcbiAgICAgIGxhc3RUb29sV2FzUmVhZE9ubHksXG4gICAgICBjb25zZWN1dGl2ZVJlc3BvbnNlc1dpdGhvdXRUb29sczogdGhpcy5jb25zZWN1dGl2ZU5vVG9vbHMsXG4gICAgICBoYXNSZWNlbnRGaWxlV3JpdGVzLFxuICAgICAgaGFzUmVjZW50Q29tbWl0cyxcbiAgICAgIHRvZG9JdGVtc1BlbmRpbmc6IHRoaXMudG9kb1N0YXRzLnBlbmRpbmcsXG4gICAgICB0b2RvSXRlbXNDb21wbGV0ZWQ6IHRoaXMudG9kb1N0YXRzLmNvbXBsZXRlZCxcbiAgICAgIG1lbnRpb25zRnV0dXJlV29yayxcbiAgICAgIGNvbXBsZXRpb25Db25maWRlbmNlOiAwLCAvLyBXaWxsIGJlIGNhbGN1bGF0ZWRcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIENhbGN1bGF0ZSBjb25maWRlbmNlIHNjb3JlIGZvciB0YXNrIGNvbXBsZXRpb25cbiAgICovXG4gIHByaXZhdGUgY2FsY3VsYXRlQ29uZmlkZW5jZShzaWduYWxzOiBDb21wbGV0aW9uU2lnbmFscyk6IG51bWJlciB7XG4gICAgbGV0IHNjb3JlID0gMC41OyAvLyBTdGFydCBhdCBuZXV0cmFsXG5cbiAgICAvLyBTdHJvbmcgcG9zaXRpdmUgc2lnbmFsc1xuICAgIGlmIChzaWduYWxzLmhhc0V4cGxpY2l0Q29tcGxldGlvblN0YXRlbWVudCkgc2NvcmUgKz0gMC4yNTtcbiAgICBpZiAoc2lnbmFscy5oYXNSZWNlbnRDb21taXRzKSBzY29yZSArPSAwLjE7XG4gICAgaWYgKHNpZ25hbHMudG9kb0l0ZW1zUGVuZGluZyA9PT0gMCAmJiBzaWduYWxzLnRvZG9JdGVtc0NvbXBsZXRlZCA+IDApIHNjb3JlICs9IDAuMTU7XG5cbiAgICAvLyBTdHJvbmcgbmVnYXRpdmUgc2lnbmFsc1xuICAgIGlmIChzaWduYWxzLmhhc0luY29tcGxldGVXb3JrSW5kaWNhdG9ycykgc2NvcmUgLT0gMC4zO1xuICAgIGlmIChzaWduYWxzLmhhc1BlbmRpbmdBY3Rpb25JbmRpY2F0b3JzKSBzY29yZSAtPSAwLjI7XG4gICAgaWYgKHNpZ25hbHMuaGFzRXJyb3JJbmRpY2F0b3JzKSBzY29yZSAtPSAwLjI1O1xuICAgIGlmIChzaWduYWxzLnRvZG9JdGVtc1BlbmRpbmcgPiAwKSBzY29yZSAtPSAwLjE1O1xuXG4gICAgLy8gTW9kZXJhdGUgc2lnbmFsc1xuICAgIGlmIChzaWduYWxzLnRvb2xzVXNlZEluTGFzdFJlc3BvbnNlID4gMCAmJiAhc2lnbmFscy5sYXN0VG9vbFdhc1JlYWRPbmx5KSBzY29yZSAtPSAwLjE7XG4gICAgaWYgKHNpZ25hbHMuY29uc2VjdXRpdmVSZXNwb25zZXNXaXRob3V0VG9vbHMgPj0gMikgc2NvcmUgKz0gMC4xO1xuICAgIGlmIChzaWduYWxzLmhhc0ZvbGxvd1VwUXVlc3Rpb25zKSBzY29yZSAtPSAwLjE7XG4gICAgaWYgKHNpZ25hbHMubWVudGlvbnNGdXR1cmVXb3JrICYmIHNpZ25hbHMuaGFzRXhwbGljaXRDb21wbGV0aW9uU3RhdGVtZW50KSBzY29yZSArPSAwLjA1O1xuXG4gICAgLy8gQ2xhbXAgdG8gMC0xIHJhbmdlXG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKDEsIHNjb3JlKSk7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGUgYSB2ZXJpZmljYXRpb24gcHJvbXB0IHRvIGFzayB0aGUgQUkgaWYgdGhlIHRhc2sgaXMgdHJ1bHkgY29tcGxldGVcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVWZXJpZmljYXRpb25Qcm9tcHQoc2lnbmFsczogQ29tcGxldGlvblNpZ25hbHMpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbmNlcm5zOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHNpZ25hbHMudG9kb0l0ZW1zUGVuZGluZyA+IDApIHtcbiAgICAgIGNvbmNlcm5zLnB1c2goYHRoZXJlIGFyZSAke3NpZ25hbHMudG9kb0l0ZW1zUGVuZGluZ30gdG9kbyBpdGVtcyBzdGlsbCBwZW5kaW5nYCk7XG4gICAgfVxuICAgIGlmIChzaWduYWxzLmhhc0ZvbGxvd1VwUXVlc3Rpb25zKSB7XG4gICAgICBjb25jZXJucy5wdXNoKCd5b3UgYXNrZWQgZm9sbG93LXVwIHF1ZXN0aW9ucycpO1xuICAgIH1cbiAgICBpZiAoc2lnbmFscy5tZW50aW9uc0Z1dHVyZVdvcmspIHtcbiAgICAgIGNvbmNlcm5zLnB1c2goJ3lvdSBtZW50aW9uZWQgcG90ZW50aWFsIGZ1dHVyZSBpbXByb3ZlbWVudHMnKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb25jZXJuc1RleHQgPVxuICAgICAgY29uY2VybnMubGVuZ3RoID4gMCA/IGBIb3dldmVyLCAke2NvbmNlcm5zLmpvaW4oJyBhbmQgJyl9LiBgIDogJyc7XG5cbiAgICByZXR1cm4gYFlvdSBpbmRpY2F0ZWQgdGhlIHRhc2sgbWlnaHQgYmUgY29tcGxldGUuICR7Y29uY2VybnNUZXh0fVBsZWFzZSBjb25maXJtOlxuXG4xLiBIYXZlIEFMTCB0aGUgb3JpZ2luYWxseSByZXF1ZXN0ZWQgY2hhbmdlcyBiZWVuIGltcGxlbWVudGVkP1xuMi4gQXJlIHRoZXJlIGFueSByZW1haW5pbmcgZXJyb3JzIG9yIGlzc3VlcyB0aGF0IG5lZWQgdG8gYmUgZml4ZWQ/XG4zLiBJcyB0aGVyZSBhbnl0aGluZyBlbHNlIHlvdSBuZWVkIHRvIGRvIHRvIGZ1bGx5IGNvbXBsZXRlIHRoaXMgdGFzaz9cblxuSWYgZXZlcnl0aGluZyBpcyB0cnVseSBkb25lLCByZXNwb25kIHdpdGggZXhhY3RseTogXCJUQVNLX0ZVTExZX0NPTVBMRVRFXCJcbklmIHRoZXJlJ3MgbW9yZSB3b3JrIHRvIGRvLCBkZXNjcmliZSB3aGF0IHJlbWFpbnMuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZSBhIHZlcmlmaWNhdGlvbiBwcm9tcHQgZm9yIHN0YWduYXRpb24gY2FzZXNcbiAgICovXG4gIHByaXZhdGUgZ2VuZXJhdGVTdGFnbmF0aW9uVmVyaWZpY2F0aW9uUHJvbXB0KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGBJIG5vdGljZSB5b3UgaGF2ZW4ndCB1c2VkIGFueSB0b29scyBmb3Igc2V2ZXJhbCByZXNwb25zZXMuIExldCBtZSBjaGVjazpcblxuMS4gSXMgdGhlIHRhc2sgY29tcGxldGU/IElmIHNvLCBzdW1tYXJpemUgd2hhdCB3YXMgYWNjb21wbGlzaGVkLlxuMi4gQXJlIHlvdSBibG9ja2VkIG9uIHNvbWV0aGluZz8gSWYgc28sIHdoYXQgZG8geW91IG5lZWQ/XG4zLiBJcyB0aGVyZSBtb3JlIHdvcmsgdG8gZG8/IElmIHNvLCBwbGVhc2UgY29udGludWUuXG5cbklmIGV2ZXJ5dGhpbmcgaXMgZG9uZSwgcmVzcG9uZCB3aXRoIGV4YWN0bHk6IFwiVEFTS19GVUxMWV9DT01QTEVURVwiXG5PdGhlcndpc2UsIHBsZWFzZSBjb250aW51ZSB3aXRoIHRoZSBuZXh0IGFjdGlvbi5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBhIGh1bWFuLXJlYWRhYmxlIHJlYXNvbiBmb3IgbG93IGNvbmZpZGVuY2VcbiAgICovXG4gIHByaXZhdGUgZ2V0TG93Q29uZmlkZW5jZVJlYXNvbihzaWduYWxzOiBDb21wbGV0aW9uU2lnbmFscyk6IHN0cmluZyB7XG4gICAgY29uc3QgcmVhc29uczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmIChzaWduYWxzLmhhc0luY29tcGxldGVXb3JrSW5kaWNhdG9ycykge1xuICAgICAgcmVhc29ucy5wdXNoKCdpbmNvbXBsZXRlIHdvcmsgaW5kaWNhdG9ycyBkZXRlY3RlZCcpO1xuICAgIH1cbiAgICBpZiAoc2lnbmFscy5oYXNQZW5kaW5nQWN0aW9uSW5kaWNhdG9ycykge1xuICAgICAgcmVhc29ucy5wdXNoKCdwZW5kaW5nIGFjdGlvbiBpbmRpY2F0b3JzIGZvdW5kJyk7XG4gICAgfVxuICAgIGlmIChzaWduYWxzLmhhc0Vycm9ySW5kaWNhdG9ycykge1xuICAgICAgcmVhc29ucy5wdXNoKCdlcnJvciBpbmRpY2F0b3JzIHByZXNlbnQnKTtcbiAgICB9XG4gICAgaWYgKHNpZ25hbHMudG9vbHNVc2VkSW5MYXN0UmVzcG9uc2UgPiAwICYmICFzaWduYWxzLmxhc3RUb29sV2FzUmVhZE9ubHkpIHtcbiAgICAgIHJlYXNvbnMucHVzaCgnd3JpdGUgb3BlcmF0aW9ucyBwZXJmb3JtZWQnKTtcbiAgICB9XG4gICAgaWYgKHNpZ25hbHMudG9kb0l0ZW1zUGVuZGluZyA+IDApIHtcbiAgICAgIHJlYXNvbnMucHVzaChgJHtzaWduYWxzLnRvZG9JdGVtc1BlbmRpbmd9IHRvZG8gaXRlbXMgc3RpbGwgcGVuZGluZ2ApO1xuICAgIH1cblxuICAgIHJldHVybiByZWFzb25zLmxlbmd0aCA+IDAgPyByZWFzb25zLmpvaW4oJywgJykgOiAnbm8gY2xlYXIgY29tcGxldGlvbiBzaWduYWxzJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiBhIHZlcmlmaWNhdGlvbiByZXNwb25zZSBjb25maXJtcyBjb21wbGV0aW9uXG4gICAqL1xuICBpc1ZlcmlmaWNhdGlvbkNvbmZpcm1lZCh2ZXJpZmljYXRpb25SZXNwb25zZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgaGFzQ29tcGxldGlvbk1hcmtlciA9IChcbiAgICAgIHZlcmlmaWNhdGlvblJlc3BvbnNlLmluY2x1ZGVzKCdUQVNLX0ZVTExZX0NPTVBMRVRFJykgfHxcbiAgICAgIC9eKHllc3xjb25maXJtZWQ/fGFsbFxccytkb25lfGV2ZXJ5dGhpbmdcXHMrKGlzXFxzKyk/Y29tcGxldGUpL2ltLnRlc3QodmVyaWZpY2F0aW9uUmVzcG9uc2UudHJpbSgpKVxuICAgICk7XG5cbiAgICAvLyBFdmVuIGlmIGNvbXBsZXRpb24gbWFya2VyIGlzIHByZXNlbnQsIGNoZWNrIGZvciBjb250cmFkaWN0aW9uc1xuICAgIGlmIChoYXNDb21wbGV0aW9uTWFya2VyICYmIHRoaXMucmVzcG9uc2VDb250YWluc0luY29tcGxldGVJbmRpY2F0b3JzKHZlcmlmaWNhdGlvblJlc3BvbnNlKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIHJldHVybiBoYXNDb21wbGV0aW9uTWFya2VyO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIGEgcmVzcG9uc2UgY29udHJhZGljdHMgaXRzZWxmIGJ5IHNheWluZyBcImNvbXBsZXRlXCIgYnV0IGFsc28gaW5kaWNhdGluZyBpbmNvbXBsZXRlIHdvcmsuXG4gICAqIFRoaXMgY29tcHJlaGVuc2l2ZSBsaXN0IGNhdGNoZXMgbWFueSB3YXlzIEFJIG1pZ2h0IGFkbWl0IHdvcmsgaXNuJ3QgZG9uZSB3aGlsZSBjbGFpbWluZyBjb21wbGV0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSByZXNwb25zZUNvbnRhaW5zSW5jb21wbGV0ZUluZGljYXRvcnMocmVzcG9uc2U6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGluY29tcGxldGVQYXR0ZXJucyA9IFtcbiAgICAgIC8vID09PSBJTlRFR1JBVElPTi9ERVBMT1lNRU5UIFNUQVRFID09PVxuICAgICAgL2hhc24nP3RcXHMrYmVlblxccysoaW50ZWdyYXRlZHxpbXBsZW1lbnRlZHxjb25uZWN0ZWR8ZGVwbG95ZWR8YWRkZWR8Y29tcGxldGVkfHRlc3RlZHx2ZXJpZmllZClcXHMqKHlldHxzdGlsbCk/L2ksXG4gICAgICAvbm90XFxzKyh5ZXRcXHMrKT8oaW50ZWdyYXRlZHxpbXBsZW1lbnRlZHxjb25uZWN0ZWR8ZGVwbG95ZWR8ZnVuY3Rpb25hbHx3b3JraW5nfGNvbXBsZXRlfHRlc3RlZHx2ZXJpZmllZCkvaSxcbiAgICAgIC9yZWFkeVxccysoZm9yfHRvXFxzK2JlKVxccysoaW50ZWdyYXRpb258aW50ZWdyYXRlZHxjb25uZWN0ZWR8ZGVwbG95ZWR8dGVzdGluZ3xyZXZpZXcpL2ksXG4gICAgICAvbmVlZHM/XFxzK3RvXFxzK2JlXFxzKyhpbnRlZ3JhdGVkfGNvbm5lY3RlZHxkZXBsb3llZHxhZGRlZHxob29rZWR8d2lyZWR8dGVzdGVkfHJldmlld2VkfG1lcmdlZCkvaSxcbiAgICAgIC93YXNcXHMrbm90XFxzKyhwZXJmb3JtZWR8Y29tcGxldGVkfGltcGxlbWVudGVkfGRlcGxveWVkfGludGVncmF0ZWR8dGVzdGVkKS9pLFxuICAgICAgL3RoZVxccytcXHcrXFxzKyhzZXJ2aWNlfG1vZHVsZXxjb21wb25lbnR8ZmVhdHVyZSlcXHMraGFzbic/dFxccytiZWVuL2ksXG5cbiAgICAgIC8vID09PSBQQVJUSUFML0lOQ09NUExFVEUgU1RBVEUgPT09XG4gICAgICAvc3RpbGxcXHMrKHN0b3Jlcz98dXNlcz98aGFzfGNvbnRhaW5zP3xuZWVkcz98cmVxdWlyZXM/fG1pc3Npbmd8bGFja3M/fGJyb2tlbikvaSxcbiAgICAgIC9cXGIocGFydGlhbGx5fG1vc3RseXxhbG1vc3R8bmVhcmx5fG5vdFxccytmdWxseSlcXHMrKGNvbXBsZXRlfGRvbmV8ZmluaXNoZWR8aW1wbGVtZW50ZWR8d29ya2luZykvaSxcbiAgICAgIC9cXGIob25seVxccyspPyhwYXJ0fHNvbWV8aGFsZnxwb3J0aW9uKVxccytvZlxccysodGhlXFxzKyk/KHRhc2t8d29ya3xmZWF0dXJlfGltcGxlbWVudGF0aW9uKS9pLFxuXG4gICAgICAvLyA9PT0gUVVBTElGSUVSIFdPUkRTICh1bmNlcnRhaW4gY29tcGxldGlvbikgPT09XG4gICAgICAvXFxiKHNob3VsZHxtaWdodHxtYXl8Y291bGR8YXBwZWFycz9cXHMrdG8pXFxzK2JlXFxzKyhjb21wbGV0ZXxkb25lfHdvcmtpbmd8ZnVuY3Rpb25hbCkvaSxcbiAgICAgIC9cXGJ0aGVvcmV0aWNhbGx5XFxzKyhjb21wbGV0ZXxkb25lfHdvcmtpbmd8ZnVuY3Rpb25hbCkvaSxcbiAgICAgIC9cXGIoYXNzdW1pbmd8cHJvdmlkZWR8aWYpXFxzKyhldmVyeXRoaW5nfGl0fHRoaXN8dGhhdClcXHMrKHdvcmtzP3xpc1xccytjb3JyZWN0KS9pLFxuXG4gICAgICAvLyA9PT0gU0VMRi1DT05UUkFESUNUSU9OIFBIUkFTRVMgPT09XG4gICAgICAvXFxiKGRvbmV8Y29tcGxldGV8ZmluaXNoZWQpXFxzKyhidXR8ZXhjZXB0fGhvd2V2ZXJ8YWx0aG91Z2h8dGhvdWdoKS9pLFxuICAgICAgL2hvd2V2ZXJbLFxcc10uezAsNTB9PyhoYXNuJz90fG5vdFxccyt5ZXR8c3RpbGxcXHMrbmVlZHM/fHBlbmRpbmd8cmVtYWlucz98bWlzc2luZ3xicm9rZW58ZmFpbGluZykvaSxcbiAgICAgIC9cXGJidXRcXHMrLnswLDMwfT8obm90fGhhc24nP3R8d29uJz90fGNhbic/dHxkb2Vzbic/dHxpc24nP3R8d2Fzbic/dCkvaSxcblxuICAgICAgLy8gPT09IEZVVFVSRSBURU5TRSAvIERFRkVSUkVEIFdPUksgPT09XG4gICAgICAvd2lsbFxccysobmVlZFxccyt0b3xyZXF1aXJlfGhhdmVcXHMrdG8pXFxzKyhpbnRlZ3JhdGV8Y29ubmVjdHxkZXBsb3l8Y29tcGxldGV8aW1wbGVtZW50fHRlc3R8Zml4KS9pLFxuICAgICAgL1xcYihsZWZ0XFxzK2FzfGRlZmVycmVkfHBvc3Rwb25lZHxvdXRcXHMrb2ZcXHMrc2NvcGV8Zm9yXFxzK2xhdGVyfGluXFxzK2FcXHMrZnV0dXJlKS9pLFxuICAgICAgL1xcYihhZnRlclxccysocmVzdGFydHxyZWJvb3R8cmVkZXBsb3kpfHRha2VzP1xccytlZmZlY3RcXHMrYWZ0ZXJ8b25jZVxccyt5b3UpL2ksXG5cbiAgICAgIC8vID09PSBSRU1BSU5JTkcgV09SSyBJTkRJQ0FUT1JTID09PVxuICAgICAgL1xcYihyZW1haW5pbmd8b3V0c3RhbmRpbmd8cGVuZGluZ3xsZWZ0b3ZlcilcXHMrKHRhc2tzP3xpdGVtcz98d29ya3xpc3N1ZXM/fHN0ZXBzPykvaSxcbiAgICAgIC9cXGIobW9yZVxccyt0b1xccytkb3xzdGlsbFxccytoYXZlXFxzK3RvfHlldFxccyt0b1xccytiZVxccytkb25lKS9pLFxuICAgICAgL1xcYihibG9ja2VyfGJsb2NrZWRcXHMrYnl8d2FpdGluZ1xccysoZm9yfG9uKXxkZXBlbmRzP1xccytvbikvaSxcblxuICAgICAgLy8gPT09IEVSUk9SL0ZBSUxVUkUgU1RBVEUgPT09XG4gICAgICAvXFxiKGZhaWxpbmd8YnJva2VufGVycm9yaW5nKVxccysodGVzdHM/fGJ1aWxkcz98Y2hlY2tzP3x2YWxpZGF0aW9ucz8pL2ksXG4gICAgICAvXFxidGVzdHM/XFxzKyhhcmVcXHMrKT8oc3RpbGxcXHMrKT9mYWlsaW5nL2ksXG4gICAgICAvXFxiKGVycm9ycz98d2FybmluZ3M/fGlzc3Vlcz8pXFxzK3RvXFxzKyhhZGRyZXNzfGZpeHxyZXNvbHZlKS9pLFxuICAgICAgL1xcYihkb2Vzbic/dHxpc24nP3R8bm90KVxccysod29ya3x3b3JraW5nfGZ1bmN0aW9uYWx8ZnVuY3Rpb25pbmcpL2ksXG5cbiAgICAgIC8vID09PSBNQU5VQUwgU1RFUFMgUkVRVUlSRUQgPT09XG4gICAgICAvXFxiKHlvdSgnbGx8XFxzK3dpbGwpXFxzK25lZWRcXHMrdG98bWFudWFsbHlcXHMrKHJ1bnxjb25maWd1cmV8c2V0fHVwZGF0ZSl8cmVxdWlyZXM/XFxzK3VzZXIpL2ksXG4gICAgICAvXFxiKHJ1blxccyt0aGlzfGV4ZWN1dGVcXHMrdGhlXFxzK2ZvbGxvd2luZ3xhcHBseVxccyt0aGVcXHMrbWlncmF0aW9uKS9pLFxuXG4gICAgICAvLyA9PT0gVE9ETy9GSVhNRSBJTiBQUk9TRSA9PT1cbiAgICAgIC9cXGIodG9kb3xmaXhtZXxoYWNrfHh4eCk6XFxzL2ksXG4gICAgICAvXFxiKG5lZWRcXHMrdG98c2hvdWxkfG11c3QpXFxzKyhhZGR8aW1wbGVtZW50fGNyZWF0ZXx3cml0ZXxidWlsZHxmaXgpXFxiL2ksXG5cbiAgICAgIC8vID09PSBTQ09QRSBMSU1JVEFUSU9OUyA9PT1cbiAgICAgIC9cXGIoZGlkbic/dHxkaWRcXHMrbm90KVxccytoYXZlXFxzKyh0aW1lfGNoYW5jZXxvcHBvcnR1bml0eSkvaSxcbiAgICAgIC9cXGIoYmV5b25kfG91dHNpZGUpXFxzKyh0aGVcXHMrKT9zY29wZS9pLFxuICAgICAgL1xcYihmb3JcXHMrbm93fGF0XFxzK3RoaXNcXHMrcG9pbnR8Y3VycmVudGx5KVxccyouezAsMjB9Pyhub3R8d2l0aG91dHxsYWNrcz98bWlzc2luZykvaSxcblxuICAgICAgLy8gPT09IFNJTVVMQVRJT04vRkFLRSBPVVRQVVQgSU5ESUNBVE9SUyA9PT1cbiAgICAgIC8vIFRoZXNlIGluZGljYXRlIHRoZSB0YXNrIHdhc24ndCBhY3R1YWxseSBjb21wbGV0ZWQgLSBqdXN0IHNpbXVsYXRlZFxuICAgICAgL1xcYnNpbXVsYXQoPzplZD98aW9ufGluZylcXGIvaSxcbiAgICAgIC9cXGJoeXBvdGhldGljYWxcXGIvaSxcbiAgICAgIC9cXGJ0aGVvcmV0aWNhbCg/Omx5KT9cXHMrKHJlc3VsdHxvdXRwdXR8b3V0Y29tZXxyZXBvcnQpL2ksXG4gICAgICAvXFxiZmFrZVxccysoPzpkYXRhfHJlcG9ydHxyZXN1bHR8b3V0cHV0KS9pLFxuICAgICAgL1xcYm1vY2soPzplZHxpbmcpP1xccysoPzpkYXRhfHJlcG9ydHxyZXN1bHR8b3V0cHV0KS9pLFxuICAgICAgL1xcYmZvclxccysoPzpkZW1vbnN0cmF0aW9ufGRlbW8pXFxzK3B1cnBvc2VzP1xccytvbmx5L2ksXG4gICAgICAvXFxibm90XFxzKyg/OmFcXHMrKT9yZWFsXFxzKyg/OnJlc3VsdHxvdXRwdXR8ZXhlY3V0aW9uKS9pLFxuICAgICAgL1xcYndvdWxkXFxzKyg/OmhhdmVcXHMrKT9iZSg/OmVuKT9cXHMrKD86dGhlXFxzKyk/cmVzdWx0L2ksXG4gICAgICAvXFxiaWZcXHMrKD86dGhpc3x3ZXx5b3UpXFxzKyg/OndlcmV8aGFkKVxccysoPzphY3R1YWxseXxyZWFsbHkpL2ksXG4gICAgXTtcblxuICAgIGZvciAoY29uc3QgcGF0dGVybiBvZiBpbmNvbXBsZXRlUGF0dGVybnMpIHtcbiAgICAgIGlmIChwYXR0ZXJuLnRlc3QocmVzcG9uc2UpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiByZXNwb25zZSBjb250YWlucyBzaW11bGF0aW9uL2Zha2UgaW5kaWNhdG9ycyB0aGF0IHNob3VsZCBwcmV2ZW50IGNvbXBsZXRpb24uXG4gICAqIFNpbXVsYXRlZCByZXN1bHRzIG1lYW4gdGhlIHRhc2sgd2FzIE5PVCBhY3R1YWxseSBjb21wbGV0ZWQuXG4gICAqL1xuICBjb250YWluc1NpbXVsYXRpb25JbmRpY2F0b3JzKHJlc3BvbnNlOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBzaW11bGF0aW9uUGF0dGVybnMgPSBbXG4gICAgICAvXFxic2ltdWxhdCg/OmVkP3xpb258aW5nKVxcYi9pLFxuICAgICAgL1xcYmh5cG90aGV0aWNhbFxcYi9pLFxuICAgICAgL1xcYnRoZW9yZXRpY2FsKD86bHkpP1xccysoPzpyZXN1bHR8b3V0cHV0fG91dGNvbWV8Y29tcGxldGUpL2ksXG4gICAgICAvXFxiZmFrZVxccysoPzpkYXRhfHJlcG9ydHxyZXN1bHR8b3V0cHV0KS9pLFxuICAgICAgL1xcYm1vY2soPzplZHxpbmcpP1xccysoPzpkYXRhfHJlcG9ydHxyZXN1bHR8b3V0cHV0fGV4ZXJjaXNlKS9pLFxuICAgICAgL1xcYmR1bW15XFxzKyg/OmRhdGF8cmVwb3J0fHJlc3VsdHxvdXRwdXQpL2ksXG4gICAgICAvXFxicHJldGVuZCg/OmVkfGluZyk/XFxiL2ksXG4gICAgICAvXFxiaW1hZ2luYXJ5XFxiL2ksXG4gICAgICAvXFxiZmljdGlvbmFsXFxiL2ksXG4gICAgICAvXFxiZm9yXFxzKyg/OmRlbW9uc3RyYXRpb258ZGVtbylcXHMrcHVycG9zZXM/XFxzK29ubHkvaSxcbiAgICAgIC9cXGJub3RcXHMrKD86YVxccyspP3JlYWxcXGIvaSxcbiAgICAgIC9cXGJ3b3VsZFxccysoPzpoYXZlXFxzKyk/YmUoPzplbik/XFxzKyg/OnRoZVxccyspP3Jlc3VsdC9pLFxuICAgICAgL1xcYnNlY3VyaXR5XFxzKyg/OnNpbXVsYXRpb258ZXhlcmNpc2UpXFxiL2ksXG4gICAgICAvXFxib2ZmZW5zaXZlXFxzK3NlY3VyaXR5XFxzK3NpbXVsYXRpb25cXGIvaSxcbiAgICBdO1xuXG4gICAgcmV0dXJuIHNpbXVsYXRpb25QYXR0ZXJucy5zb21lKHBhdHRlcm4gPT4gcGF0dGVybi50ZXN0KHJlc3BvbnNlKSk7XG4gIH1cbn1cblxuLyoqXG4gKiBDcmVhdGUgYSBzaW5nbGV0b24gaW5zdGFuY2UgZm9yIHRoZSBzaGVsbCB0byB1c2VcbiAqL1xubGV0IGRldGVjdG9ySW5zdGFuY2U6IFRhc2tDb21wbGV0aW9uRGV0ZWN0b3IgfCBudWxsID0gbnVsbDtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFRhc2tDb21wbGV0aW9uRGV0ZWN0b3IoKTogVGFza0NvbXBsZXRpb25EZXRlY3RvciB7XG4gIGlmICghZGV0ZWN0b3JJbnN0YW5jZSkge1xuICAgIGRldGVjdG9ySW5zdGFuY2UgPSBuZXcgVGFza0NvbXBsZXRpb25EZXRlY3RvcigpO1xuICB9XG4gIHJldHVybiBkZXRlY3Rvckluc3RhbmNlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzZXRUYXNrQ29tcGxldGlvbkRldGVjdG9yKCk6IHZvaWQge1xuICBpZiAoZGV0ZWN0b3JJbnN0YW5jZSkge1xuICAgIGRldGVjdG9ySW5zdGFuY2UucmVzZXQoKTtcbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7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