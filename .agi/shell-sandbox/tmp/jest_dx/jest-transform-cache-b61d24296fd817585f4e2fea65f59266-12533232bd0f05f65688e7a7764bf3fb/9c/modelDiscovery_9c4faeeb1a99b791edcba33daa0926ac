b431dc458a50ed3cd46c6b8ffff16ad8
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clearDiscoveredModelsCache = clearDiscoveredModelsCache;
exports.discoverAllModels = discoverAllModels;
exports.getBestModel = getBestModel;
exports.getCachedDiscoveredModels = getCachedDiscoveredModels;
exports.getConfiguredProviders = getConfiguredProviders;
exports.getFirstAvailableProvider = getFirstAvailableProvider;
exports.getLatestModelForProvider = getLatestModelForProvider;
exports.getProvidersStatus = getProvidersStatus;
exports.getUnconfiguredProviders = getUnconfiguredProviders;
exports.isProviderConfigured = isProviderConfigured;
exports.quickCheckProviders = quickCheckProviders;
exports.sortModelsByPriority = sortModelsByPriority;
var _nodeFs = require("node:fs");
var _promises = require("node:fs/promises");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
var _secretStore = require("./secretStore.js");
var _debugLogger = require("../utils/debugLogger.js");
/**
 * Model discovery system for auto-detecting new models from providers.
 *
 * This module queries provider APIs to discover available models and caches
 * them for use alongside the static model schema. It never modifies the
 * static schema - discoveries are stored separately and merged at runtime.
 */

/**
 * Discovered model cache file location
 */
const CACHE_DIR = (0, _nodePath.join)((0, _nodeOs.homedir)(), '.agi');
const CACHE_FILE = (0, _nodePath.join)(CACHE_DIR, 'discovered-models.json');

/**
 * Cache expiration time (24 hours)
 */
const CACHE_EXPIRATION_MS = 24 * 60 * 60 * 1000;

/**
 * Discovered models cache structure
 */

/**
 * Model discovery result for a single provider
 */

/**
 * Complete discovery result
 */

/**
 * Get cached discovered models
 */
function getCachedDiscoveredModels() {
  try {
    if (!(0, _nodeFs.existsSync)(CACHE_FILE)) {
      return [];
    }
    const raw = (0, _nodeFs.readFileSync)(CACHE_FILE, 'utf-8');
    const cache = JSON.parse(raw);

    // Check if cache is expired
    const lastUpdated = new Date(cache.lastUpdated).getTime();
    const now = Date.now();
    if (now - lastUpdated > CACHE_EXPIRATION_MS) {
      return [];
    }
    return cache.models;
  } catch (error) {
    (0, _debugLogger.logDebug)('Failed to read discovered models cache:', (0, _secretStore.safeErrorMessage)(error));
    return [];
  }
}

/**
 * Save discovered models to cache
 */
async function saveDiscoveredModels(models) {
  try {
    await (0, _promises.mkdir)(CACHE_DIR, {
      recursive: true
    });
    const cache = {
      version: '1.0.0',
      lastUpdated: new Date().toISOString(),
      models
    };
    (0, _nodeFs.writeFileSync)(CACHE_FILE, JSON.stringify(cache, null, 2), 'utf-8');
  } catch (error) {
    (0, _debugLogger.logDebug)('Failed to save discovered models cache:', (0, _secretStore.safeErrorMessage)(error));
  }
}

/**
 * Discover models from OpenAI
 */
async function discoverOpenAIModels(apiKey) {
  const provider = 'openai';
  try {
    const response = await fetch('https://api.openai.com/v1/models', {
      headers: {
        'Authorization': `Bearer ${apiKey}`
      }
    });
    if (!response.ok) {
      throw new Error(`API returned ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();

    // Filter for GPT models only and create ModelConfig objects
    const models = data.data.filter(model => {
      // Allow both dash and non-dash variants for newer reasoning SKUs (o1/o3)
      return model.id.startsWith('gpt-') || model.id.startsWith('o1') || model.id.startsWith('o3') || model.id.startsWith('codex-');
    }).map(model => ({
      id: model.id,
      label: model.id,
      provider,
      description: `OpenAI ${model.id} (auto-discovered)`,
      capabilities: ['chat', 'tools', 'streaming']
    }));
    return {
      provider,
      success: true,
      models
    };
  } catch (error) {
    return {
      provider,
      success: false,
      models: [],
      error: error instanceof Error ? error.message : String(error)
    };
  }
}

/**
 * Discover models from Anthropic
 */
async function discoverAnthropicModels(apiKey) {
  const provider = 'anthropic';
  try {
    const response = await fetch('https://api.anthropic.com/v1/models', {
      headers: {
        'x-api-key': apiKey,
        'anthropic-version': '2023-06-01'
      }
    });
    if (!response.ok) {
      throw new Error(`API returned ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();
    const models = data.data.filter(model => model.type === 'model').map(model => ({
      id: model.id,
      label: model.display_name || model.id,
      provider,
      description: `Anthropic ${model.display_name || model.id} (auto-discovered)`,
      capabilities: ['chat', 'reasoning', 'tools', 'streaming']
    }));
    return {
      provider,
      success: true,
      models
    };
  } catch (error) {
    return {
      provider,
      success: false,
      models: [],
      error: error instanceof Error ? error.message : String(error)
    };
  }
}

/**
 * Discover models from Google Gemini
 * Note: Google's models API often requires special permissions.
 * Falls back to known models if API access fails.
 */
async function discoverGoogleModels(apiKey) {
  const provider = 'google';

  // Known Google Gemini models (fallback if API doesn't work) - Updated Dec 2025
  const knownModels = [{
    id: 'gemini-3.0-pro',
    label: 'Gemini 3.0 Pro',
    provider,
    description: 'Latest Gemini with best reasoning and coding',
    capabilities: ['chat', 'reasoning', 'tools', 'streaming', 'multimodal']
  }, {
    id: 'gemini-3.0-flash',
    label: 'Gemini 3.0 Flash',
    provider,
    description: 'Fast Gemini 3.0 model',
    capabilities: ['chat', 'reasoning', 'tools', 'streaming', 'multimodal']
  }, {
    id: 'gemini-2.5-pro',
    label: 'Gemini 2.5 Pro',
    provider,
    description: 'Capable Gemini model with advanced reasoning',
    capabilities: ['chat', 'reasoning', 'tools', 'streaming', 'multimodal']
  }, {
    id: 'gemini-2.5-flash',
    label: 'Gemini 2.5 Flash',
    provider,
    description: 'Fast Gemini 2.5 with reasoning',
    capabilities: ['chat', 'reasoning', 'tools', 'streaming', 'multimodal']
  }, {
    id: 'gemini-2.0-flash',
    label: 'Gemini 2.0 Flash',
    provider,
    description: 'Gemini 2.0 with native tool use',
    capabilities: ['chat', 'tools', 'streaming', 'multimodal']
  }];
  try {
    // SECURITY: Use x-goog-api-key header instead of URL query parameter
    // to prevent API key leakage in logs, error messages, and browser history
    const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models', {
      headers: {
        'x-goog-api-key': apiKey
      },
      signal: AbortSignal.timeout(5000)
    });
    if (!response.ok) {
      // API access restricted - return known models with warning
      return {
        provider,
        success: true,
        // Consider it success with fallback
        models: knownModels
      };
    }
    const data = await response.json();
    const models = data.models.filter(model => model.name.includes('gemini') && model.supportedGenerationMethods?.includes('generateContent')).map(model => {
      const id = model.name.replace('models/', '');
      return {
        id,
        label: id,
        provider,
        description: `${model.displayName} (auto-discovered)`,
        capabilities: ['chat', 'reasoning', 'tools', 'streaming', 'multimodal']
      };
    });
    return {
      provider,
      success: true,
      models: models.length > 0 ? models : knownModels
    };
  } catch {
    // Network error or timeout - return known models
    return {
      provider,
      success: true,
      models: knownModels
    };
  }
}

/**
 * Discover models from DeepSeek (OpenAI-compatible)
 */
async function discoverDeepSeekModels(apiKey) {
  const provider = 'deepseek';
  try {
    const response = await fetch('https://api.deepseek.com/v1/models', {
      headers: {
        'Authorization': `Bearer ${apiKey}`
      }
    });
    if (!response.ok) {
      throw new Error(`API returned ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();
    const models = data.data.map(model => ({
      id: model.id,
      label: model.id,
      provider,
      description: `DeepSeek ${model.id} (auto-discovered)`,
      capabilities: ['chat', 'reasoning', 'tools', 'streaming']
    }));
    return {
      provider,
      success: true,
      models
    };
  } catch (error) {
    return {
      provider,
      success: false,
      models: [],
      error: error instanceof Error ? error.message : String(error)
    };
  }
}

/**
 * Discover models from xAI (OpenAI-compatible)
 */
async function discoverXAIModels(apiKey) {
  const provider = 'xai';
  try {
    const response = await fetch('https://api.x.ai/v1/models', {
      headers: {
        'Authorization': `Bearer ${apiKey}`
      }
    });
    if (!response.ok) {
      throw new Error(`API returned ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();
    const models = data.data.map(model => ({
      id: model.id,
      label: model.id,
      provider,
      description: `xAI ${model.id} (auto-discovered)`,
      capabilities: ['chat', 'reasoning', 'tools', 'streaming']
    }));
    return {
      provider,
      success: true,
      models
    };
  } catch (error) {
    return {
      provider,
      success: false,
      models: [],
      error: error instanceof Error ? error.message : String(error)
    };
  }
}

/**
 * Discover models from Ollama (local)
 */
async function discoverOllamaModels() {
  const provider = 'ollama';
  const baseURL = process.env['OLLAMA_BASE_URL'] || 'http://localhost:11434';
  try {
    const response = await fetch(`${baseURL}/api/tags`, {
      signal: AbortSignal.timeout(2000) // 2 second timeout
    });
    if (!response.ok) {
      throw new Error(`API returned ${response.status}: ${response.statusText}`);
    }
    const data = await response.json();
    const models = (data.models || []).map(model => ({
      id: model.name,
      label: model.name,
      provider,
      description: `Local Ollama model: ${model.name} (auto-discovered)`,
      capabilities: ['chat', 'tools', 'streaming']
    }));
    return {
      provider,
      success: true,
      models
    };
  } catch (error) {
    return {
      provider,
      success: false,
      models: [],
      error: error instanceof Error ? error.message : String(error)
    };
  }
}

/**
 * Discover models from all configured providers
 *
 * PERF: Uses Promise.allSettled for parallel discovery - all providers queried
 * simultaneously. No single slow/failed provider blocks the others.
 */
async function discoverAllModels() {
  const errors = [];
  let totalModelsDiscovered = 0;

  // Discover from each provider if API key is available
  const providers = [{
    id: 'openai',
    envVar: 'OPENAI_API_KEY',
    discover: discoverOpenAIModels
  }, {
    id: 'anthropic',
    envVar: 'ANTHROPIC_API_KEY',
    discover: discoverAnthropicModels
  }, {
    id: 'google',
    envVar: 'GEMINI_API_KEY',
    discover: discoverGoogleModels
  }, {
    id: 'deepseek',
    envVar: 'DEEPSEEK_API_KEY',
    discover: discoverDeepSeekModels
  }, {
    id: 'xai',
    envVar: 'XAI_API_KEY',
    discover: discoverXAIModels
  }];

  // PERF: Build discovery promises in parallel
  const discoveryPromises = providers.map(async provider => {
    const apiKey = process.env[provider.envVar];
    if (!apiKey) {
      return {
        provider: provider.id,
        success: false,
        models: [],
        error: `API key not configured (${provider.envVar})`
      };
    }
    try {
      return await provider.discover(apiKey);
    } catch (error) {
      const errorMessage = error instanceof Error ? error.message : String(error);
      return {
        provider: provider.id,
        success: false,
        models: [],
        error: errorMessage
      };
    }
  });

  // Add Ollama discovery (no API key required)
  discoveryPromises.push(discoverOllamaModels().catch(() => ({
    provider: 'ollama',
    success: false,
    models: [],
    error: 'Connection failed'
  })));

  // PERF: Execute ALL provider discoveries in parallel using Promise.allSettled
  // This ensures one slow/failed provider doesn't block others
  const settledResults = await Promise.allSettled(discoveryPromises);

  // Process results
  const results = settledResults.map((settled, index) => {
    if (settled.status === 'fulfilled') {
      return settled.value;
    }
    // Promise rejected (shouldn't happen with our error handling, but be safe)
    const providerId = index < providers.length ? providers[index].id : 'ollama';
    return {
      provider: providerId,
      success: false,
      models: [],
      error: settled.reason instanceof Error ? settled.reason.message : String(settled.reason)
    };
  });

  // Collect errors and count models
  for (const result of results) {
    if (result.success) {
      totalModelsDiscovered += result.models.length;
    } else if (result.error) {
      // Don't add Ollama connection errors (it's often not running)
      if (result.provider === 'ollama' && (result.error.includes('ECONNREFUSED') || result.error.includes('fetch failed') || result.error.includes('Connection failed'))) {
        continue;
      }
      errors.push(`${result.provider}: ${result.error}`);
    }
  }

  // Collect all discovered models
  const allModels = results.filter(r => r.success).flatMap(r => r.models);

  // Save to cache
  if (allModels.length > 0) {
    await saveDiscoveredModels(allModels);
  }
  return {
    success: errors.length === 0,
    timestamp: new Date().toISOString(),
    results,
    totalModelsDiscovered,
    errors
  };
}

/**
 * Clear the discovered models cache
 */
function clearDiscoveredModelsCache() {
  try {
    if ((0, _nodeFs.existsSync)(CACHE_FILE)) {
      (0, _nodeFs.writeFileSync)(CACHE_FILE, JSON.stringify({
        version: '1.0.0',
        lastUpdated: new Date().toISOString(),
        models: []
      }, null, 2), 'utf-8');
    }
  } catch (error) {
    (0, _debugLogger.logDebug)('Failed to clear discovered models cache:', (0, _secretStore.safeErrorMessage)(error));
  }
}

// ============================================================================
// Provider Status Detection
// ============================================================================

/**
 * Provider configuration info
 */

/**
 * Supported providers with their environment variable requirements
 */
const PROVIDER_CONFIGS = [{
  id: 'anthropic',
  name: 'Anthropic',
  envVar: 'ANTHROPIC_API_KEY',
  defaultLatestModel: 'claude-opus-4-5-20251101'
}, {
  id: 'openai',
  name: 'OpenAI',
  envVar: 'OPENAI_API_KEY',
  defaultLatestModel: 'gpt-5.1-codex'
}, {
  id: 'google',
  name: 'Google',
  envVar: 'GEMINI_API_KEY',
  altEnvVars: ['GOOGLE_API_KEY'],
  defaultLatestModel: 'gemini-3.0-pro'
}, {
  id: 'deepseek',
  name: 'DeepSeek',
  envVar: 'DEEPSEEK_API_KEY',
  defaultLatestModel: 'deepseek-reasoner'
}, {
  id: 'xai',
  name: 'xAI',
  envVar: 'XAI_API_KEY',
  defaultLatestModel: 'grok-4-1-fast-reasoning'
}, {
  id: 'ollama',
  name: 'Ollama',
  envVar: 'OLLAMA_BASE_URL',
  defaultLatestModel: 'llama3.3:70b'
}];

/**
 * Model priority rankings for selecting the "best" model
 */
const MODEL_PRIORITIES = {
  openai: {
    'o3-pro': 120,
    'o3-mini': 114,
    'o3': 112,
    'o1-pro': 110,
    'o1': 108,
    'o1-mini': 104,
    'codex-max': 105,
    'gpt-5.1-codex-max': 105,
    'gpt-5.1-codex': 100,
    'gpt-5.1-codex-mini': 98,
    'gpt-5.1': 96,
    'gpt-5-pro': 94,
    'gpt-5-mini': 92,
    'gpt-5-nano': 90
  },
  anthropic: {
    'claude-opus-4-5': 100,
    'claude-opus-4-5-20251101': 100,
    'claude-sonnet-4-5': 98,
    'claude-sonnet-4-5-20250929': 98,
    'claude-opus-4-20250514': 95,
    'claude-opus-4': 95,
    'claude-sonnet-4': 92,
    'claude-3-5-sonnet-20241022': 88,
    'claude-3-5-haiku-20241022': 85,
    'claude-3-opus-20240229': 80,
    'claude-3-sonnet-20240229': 75,
    'claude-3-haiku-20240307': 70
  },
  google: {
    'gemini-3.0-pro': 100,
    'gemini-3.0-flash': 98,
    'gemini-2.5-pro': 95,
    'gemini-2.5-flash': 93,
    'gemini-2.0-flash': 90,
    'gemini-2.0': 88,
    'gemini-1.5-pro': 80,
    'gemini-1.5-flash': 75,
    'gemini-1.0': 50
  },
  deepseek: {
    'deepseek-reasoner': 100,
    'deepseek-chat': 90,
    'deepseek-coder': 85
  },
  xai: {
    'grok-4-1-fast-reasoning': 100,
    'grok-4-1-fast-non-reasoning': 98,
    'grok-4-fast-reasoning': 95,
    'grok-4-fast-non-reasoning': 93,
    'grok-4': 90,
    'grok-code-fast-1': 88,
    'grok-3': 85,
    'grok-3-mini': 80,
    'grok-2-vision-1212': 75,
    'grok-2-1212': 70,
    'grok-beta': 60
  }
};

/**
 * Get model priority for sorting
 */
function getModelPriority(provider, modelId) {
  const priorities = MODEL_PRIORITIES[provider];
  if (!priorities) return 0;

  // Check for exact match first
  if (priorities[modelId] !== undefined) {
    return priorities[modelId];
  }

  // Check for prefix match
  for (const [prefix, priority] of Object.entries(priorities)) {
    if (modelId.startsWith(prefix)) {
      return priority;
    }
  }
  return 0;
}

/**
 * Sort models by priority (best first)
 */
function sortModelsByPriority(provider, models) {
  return [...models].sort((a, b) => {
    const priorityA = getModelPriority(provider, a);
    const priorityB = getModelPriority(provider, b);
    return priorityB - priorityA;
  });
}

/**
 * Get the best/latest model for a provider
 */
function getBestModel(provider, models) {
  if (models.length === 0) {
    const config = PROVIDER_CONFIGS.find(p => p.id === provider);
    return config?.defaultLatestModel || '';
  }
  const sorted = sortModelsByPriority(provider, models);
  return sorted[0] ?? models[0] ?? '';
}

/**
 * Check if a provider is configured (has API key or is accessible)
 */
function isProviderConfigured(providerId) {
  const config = PROVIDER_CONFIGS.find(p => p.id === providerId);
  if (!config) return false;

  // Ollama is special - it's available if the server is running (no API key needed)
  if (providerId === 'ollama') {
    // We'll check this via actual connection, return true for now
    // The actual check happens in getConfiguredProviders
    return true;
  }

  // Check main env var
  if (process.env[config.envVar]) {
    return true;
  }

  // Check alternative env vars
  if (config.altEnvVars) {
    for (const altVar of config.altEnvVars) {
      if (process.env[altVar]) {
        return true;
      }
    }
  }
  return false;
}

/**
 * Get all providers with their configuration status
 */
function getProvidersStatus() {
  return PROVIDER_CONFIGS.map(config => {
    let configured = false;
    if (config.id === 'ollama') {
      // For Ollama, we can't check synchronously if it's running
      // Mark as potentially available
      configured = !!process.env['OLLAMA_BASE_URL'] || true; // Always show Ollama as option
    } else {
      configured = !!process.env[config.envVar];
      if (!configured && config.altEnvVars) {
        configured = config.altEnvVars.some(v => !!process.env[v]);
      }
    }
    return {
      id: config.id,
      name: config.name,
      envVar: config.envVar,
      configured,
      latestModel: config.defaultLatestModel
    };
  });
}

/**
 * Get list of configured providers (with valid API keys)
 */
function getConfiguredProviders() {
  return getProvidersStatus().filter(p => p.configured);
}

/**
 * Get list of unconfigured providers
 */
function getUnconfiguredProviders() {
  return getProvidersStatus().filter(p => !p.configured);
}

/**
 * Get the first available provider (for auto-selection)
 */
function getFirstAvailableProvider() {
  const configured = getConfiguredProviders();

  // Prefer in this order: anthropic, openai, google, deepseek, xai, ollama
  const preferenceOrder = ['anthropic', 'openai', 'google', 'deepseek', 'xai', 'ollama'];
  for (const providerId of preferenceOrder) {
    const provider = configured.find(p => p.id === providerId);
    if (provider && provider.id !== 'ollama') {
      return provider;
    }
  }

  // Fall back to Ollama if nothing else is configured
  return configured.find(p => p.id === 'ollama') || null;
}

/**
 * Get latest model for a provider from cache or defaults
 */
function getLatestModelForProvider(providerId) {
  // Check cache first
  const cached = getCachedDiscoveredModels();
  const providerModels = cached.filter(m => m.provider === providerId);
  if (providerModels.length > 0) {
    const modelIds = providerModels.map(m => m.id);
    return getBestModel(providerId, modelIds);
  }

  // Fall back to default
  const config = PROVIDER_CONFIGS.find(p => p.id === providerId);
  return config?.defaultLatestModel || '';
}

/**
 * Quick provider availability check result
 */

/**
 * Quick API check for a single provider - returns best model or null
 */
async function quickFetchProviderModels(providerId, apiKey, timeoutMs = 3000) {
  try {
    switch (providerId) {
      case 'openai':
        {
          const response = await fetch('https://api.openai.com/v1/models', {
            headers: {
              'Authorization': `Bearer ${apiKey}`
            },
            signal: AbortSignal.timeout(timeoutMs)
          });
          if (!response.ok) return [];
          const data = await response.json();
          return data.data.filter(m => m.id.startsWith('gpt-') || m.id.startsWith('o1') || m.id.startsWith('o3') || m.id.startsWith('codex-')).map(m => m.id);
        }
      case 'anthropic':
        {
          const response = await fetch('https://api.anthropic.com/v1/models', {
            headers: {
              'x-api-key': apiKey,
              'anthropic-version': '2023-06-01'
            },
            signal: AbortSignal.timeout(timeoutMs)
          });
          if (!response.ok) return [];
          const data = await response.json();
          return data.data.filter(m => m.type === 'model').map(m => m.id);
        }
      case 'google':
        {
          // SECURITY: Use x-goog-api-key header instead of URL query parameter
          const response = await fetch('https://generativelanguage.googleapis.com/v1beta/models', {
            headers: {
              'x-goog-api-key': apiKey
            },
            signal: AbortSignal.timeout(timeoutMs)
          });
          if (!response.ok) return [];
          const data = await response.json();
          return data.models.filter(m => m.name.includes('gemini') && m.supportedGenerationMethods?.includes('generateContent')).map(m => m.name.replace('models/', ''));
        }
      case 'deepseek':
        {
          const response = await fetch('https://api.deepseek.com/v1/models', {
            headers: {
              'Authorization': `Bearer ${apiKey}`
            },
            signal: AbortSignal.timeout(timeoutMs)
          });
          if (!response.ok) return [];
          const data = await response.json();
          return data.data.map(m => m.id);
        }
      case 'xai':
        {
          const response = await fetch('https://api.x.ai/v1/models', {
            headers: {
              'Authorization': `Bearer ${apiKey}`
            },
            signal: AbortSignal.timeout(timeoutMs)
          });
          if (!response.ok) return [];
          const data = await response.json();
          return data.data.map(m => m.id);
        }
      default:
        return [];
    }
  } catch {
    return [];
  }
}

/**
 * Quickly check if providers are available by querying their APIs
 * Returns actual latest models from each provider
 */
async function quickCheckProviders() {
  const checks = [];
  for (const config of PROVIDER_CONFIGS) {
    // Handle Ollama separately (no API key needed)
    if (config.id === 'ollama') {
      checks.push((async () => {
        try {
          const baseURL = process.env['OLLAMA_BASE_URL'] || 'http://localhost:11434';
          const response = await fetch(`${baseURL}/api/tags`, {
            signal: AbortSignal.timeout(1500)
          });
          if (response.ok) {
            const data = await response.json();
            const models = data.models?.map(m => m.name) || [];
            return {
              provider: 'ollama',
              available: models.length > 0,
              latestModel: models[0] || config.defaultLatestModel
            };
          }
        } catch {/* ignore */}
        return {
          provider: 'ollama',
          available: false,
          latestModel: config.defaultLatestModel,
          error: 'Not running'
        };
      })());
      continue;
    }

    // Check for API key
    let apiKey = process.env[config.envVar];
    if (!apiKey && config.altEnvVars) {
      for (const altVar of config.altEnvVars) {
        if (process.env[altVar]) {
          apiKey = process.env[altVar];
          break;
        }
      }
    }
    if (!apiKey) {
      checks.push(Promise.resolve({
        provider: config.id,
        available: false,
        latestModel: config.defaultLatestModel,
        error: `${config.envVar} not set`
      }));
      continue;
    }

    // Query the API for actual models
    checks.push((async () => {
      const models = await quickFetchProviderModels(config.id, apiKey, 3000);
      if (models.length > 0) {
        const bestModel = getBestModel(config.id, models);
        return {
          provider: config.id,
          available: true,
          latestModel: bestModel
        };
      }
      // API call failed or returned no models - still mark available if key exists
      return {
        provider: config.id,
        available: true,
        latestModel: config.defaultLatestModel,
        error: 'Could not fetch models'
      };
    })());
  }

  // Run all checks in parallel for speed
  return Promise.all(checks);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9wcm9taXNlcyIsIl9ub2RlUGF0aCIsIl9ub2RlT3MiLCJfc2VjcmV0U3RvcmUiLCJfZGVidWdMb2dnZXIiLCJDQUNIRV9ESVIiLCJqb2luIiwiaG9tZWRpciIsIkNBQ0hFX0ZJTEUiLCJDQUNIRV9FWFBJUkFUSU9OX01TIiwiZ2V0Q2FjaGVkRGlzY292ZXJlZE1vZGVscyIsImV4aXN0c1N5bmMiLCJyYXciLCJyZWFkRmlsZVN5bmMiLCJjYWNoZSIsIkpTT04iLCJwYXJzZSIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsImdldFRpbWUiLCJub3ciLCJtb2RlbHMiLCJlcnJvciIsImxvZ0RlYnVnIiwic2FmZUVycm9yTWVzc2FnZSIsInNhdmVEaXNjb3ZlcmVkTW9kZWxzIiwibWtkaXIiLCJyZWN1cnNpdmUiLCJ2ZXJzaW9uIiwidG9JU09TdHJpbmciLCJ3cml0ZUZpbGVTeW5jIiwic3RyaW5naWZ5IiwiZGlzY292ZXJPcGVuQUlNb2RlbHMiLCJhcGlLZXkiLCJwcm92aWRlciIsInJlc3BvbnNlIiwiZmV0Y2giLCJoZWFkZXJzIiwib2siLCJFcnJvciIsInN0YXR1cyIsInN0YXR1c1RleHQiLCJkYXRhIiwianNvbiIsImZpbHRlciIsIm1vZGVsIiwiaWQiLCJzdGFydHNXaXRoIiwibWFwIiwibGFiZWwiLCJkZXNjcmlwdGlvbiIsImNhcGFiaWxpdGllcyIsInN1Y2Nlc3MiLCJtZXNzYWdlIiwiU3RyaW5nIiwiZGlzY292ZXJBbnRocm9waWNNb2RlbHMiLCJ0eXBlIiwiZGlzcGxheV9uYW1lIiwiZGlzY292ZXJHb29nbGVNb2RlbHMiLCJrbm93bk1vZGVscyIsInNpZ25hbCIsIkFib3J0U2lnbmFsIiwidGltZW91dCIsIm5hbWUiLCJpbmNsdWRlcyIsInN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzIiwicmVwbGFjZSIsImRpc3BsYXlOYW1lIiwibGVuZ3RoIiwiZGlzY292ZXJEZWVwU2Vla01vZGVscyIsImRpc2NvdmVyWEFJTW9kZWxzIiwiZGlzY292ZXJPbGxhbWFNb2RlbHMiLCJiYXNlVVJMIiwicHJvY2VzcyIsImVudiIsImRpc2NvdmVyQWxsTW9kZWxzIiwiZXJyb3JzIiwidG90YWxNb2RlbHNEaXNjb3ZlcmVkIiwicHJvdmlkZXJzIiwiZW52VmFyIiwiZGlzY292ZXIiLCJkaXNjb3ZlcnlQcm9taXNlcyIsImVycm9yTWVzc2FnZSIsInB1c2giLCJjYXRjaCIsInNldHRsZWRSZXN1bHRzIiwiUHJvbWlzZSIsImFsbFNldHRsZWQiLCJyZXN1bHRzIiwic2V0dGxlZCIsImluZGV4IiwidmFsdWUiLCJwcm92aWRlcklkIiwicmVhc29uIiwicmVzdWx0IiwiYWxsTW9kZWxzIiwiciIsImZsYXRNYXAiLCJ0aW1lc3RhbXAiLCJjbGVhckRpc2NvdmVyZWRNb2RlbHNDYWNoZSIsIlBST1ZJREVSX0NPTkZJR1MiLCJkZWZhdWx0TGF0ZXN0TW9kZWwiLCJhbHRFbnZWYXJzIiwiTU9ERUxfUFJJT1JJVElFUyIsIm9wZW5haSIsImFudGhyb3BpYyIsImdvb2dsZSIsImRlZXBzZWVrIiwieGFpIiwiZ2V0TW9kZWxQcmlvcml0eSIsIm1vZGVsSWQiLCJwcmlvcml0aWVzIiwidW5kZWZpbmVkIiwicHJlZml4IiwicHJpb3JpdHkiLCJPYmplY3QiLCJlbnRyaWVzIiwic29ydE1vZGVsc0J5UHJpb3JpdHkiLCJzb3J0IiwiYSIsImIiLCJwcmlvcml0eUEiLCJwcmlvcml0eUIiLCJnZXRCZXN0TW9kZWwiLCJjb25maWciLCJmaW5kIiwicCIsInNvcnRlZCIsImlzUHJvdmlkZXJDb25maWd1cmVkIiwiYWx0VmFyIiwiZ2V0UHJvdmlkZXJzU3RhdHVzIiwiY29uZmlndXJlZCIsInNvbWUiLCJ2IiwibGF0ZXN0TW9kZWwiLCJnZXRDb25maWd1cmVkUHJvdmlkZXJzIiwiZ2V0VW5jb25maWd1cmVkUHJvdmlkZXJzIiwiZ2V0Rmlyc3RBdmFpbGFibGVQcm92aWRlciIsInByZWZlcmVuY2VPcmRlciIsImdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIiLCJjYWNoZWQiLCJwcm92aWRlck1vZGVscyIsIm0iLCJtb2RlbElkcyIsInF1aWNrRmV0Y2hQcm92aWRlck1vZGVscyIsInRpbWVvdXRNcyIsInF1aWNrQ2hlY2tQcm92aWRlcnMiLCJjaGVja3MiLCJhdmFpbGFibGUiLCJyZXNvbHZlIiwiYmVzdE1vZGVsIiwiYWxsIl0sInNvdXJjZXMiOlsibW9kZWxEaXNjb3ZlcnkudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBNb2RlbCBkaXNjb3Zlcnkgc3lzdGVtIGZvciBhdXRvLWRldGVjdGluZyBuZXcgbW9kZWxzIGZyb20gcHJvdmlkZXJzLlxuICpcbiAqIFRoaXMgbW9kdWxlIHF1ZXJpZXMgcHJvdmlkZXIgQVBJcyB0byBkaXNjb3ZlciBhdmFpbGFibGUgbW9kZWxzIGFuZCBjYWNoZXNcbiAqIHRoZW0gZm9yIHVzZSBhbG9uZ3NpZGUgdGhlIHN0YXRpYyBtb2RlbCBzY2hlbWEuIEl0IG5ldmVyIG1vZGlmaWVzIHRoZVxuICogc3RhdGljIHNjaGVtYSAtIGRpc2NvdmVyaWVzIGFyZSBzdG9yZWQgc2VwYXJhdGVseSBhbmQgbWVyZ2VkIGF0IHJ1bnRpbWUuXG4gKi9cblxuaW1wb3J0IHsgcmVhZEZpbGVTeW5jLCB3cml0ZUZpbGVTeW5jLCBleGlzdHNTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBta2RpciB9IGZyb20gJ25vZGU6ZnMvcHJvbWlzZXMnO1xuaW1wb3J0IHsgam9pbiB9IGZyb20gJ25vZGU6cGF0aCc7XG5pbXBvcnQgeyBob21lZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgdHlwZSB7IFByb3ZpZGVySWQgfSBmcm9tICcuL3R5cGVzLmpzJztcbmltcG9ydCB0eXBlIHsgTW9kZWxDb25maWcgfSBmcm9tICcuL2FnZW50U2NoZW1hTG9hZGVyLmpzJztcbmltcG9ydCB7IHNhZmVFcnJvck1lc3NhZ2UgfSBmcm9tICcuL3NlY3JldFN0b3JlLmpzJztcbmltcG9ydCB7IGxvZ0RlYnVnIH0gZnJvbSAnLi4vdXRpbHMvZGVidWdMb2dnZXIuanMnO1xuXG4vKipcbiAqIERpc2NvdmVyZWQgbW9kZWwgY2FjaGUgZmlsZSBsb2NhdGlvblxuICovXG5jb25zdCBDQUNIRV9ESVIgPSBqb2luKGhvbWVkaXIoKSwgJy5hZ2knKTtcbmNvbnN0IENBQ0hFX0ZJTEUgPSBqb2luKENBQ0hFX0RJUiwgJ2Rpc2NvdmVyZWQtbW9kZWxzLmpzb24nKTtcblxuLyoqXG4gKiBDYWNoZSBleHBpcmF0aW9uIHRpbWUgKDI0IGhvdXJzKVxuICovXG5jb25zdCBDQUNIRV9FWFBJUkFUSU9OX01TID0gMjQgKiA2MCAqIDYwICogMTAwMDtcblxuLyoqXG4gKiBEaXNjb3ZlcmVkIG1vZGVscyBjYWNoZSBzdHJ1Y3R1cmVcbiAqL1xuaW50ZXJmYWNlIERpc2NvdmVyZWRNb2RlbHNDYWNoZSB7XG4gIHZlcnNpb246IHN0cmluZztcbiAgbGFzdFVwZGF0ZWQ6IHN0cmluZztcbiAgbW9kZWxzOiBNb2RlbENvbmZpZ1tdO1xufVxuXG4vKipcbiAqIE1vZGVsIGRpc2NvdmVyeSByZXN1bHQgZm9yIGEgc2luZ2xlIHByb3ZpZGVyXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUHJvdmlkZXJEaXNjb3ZlcnlSZXN1bHQge1xuICBwcm92aWRlcjogUHJvdmlkZXJJZDtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgbW9kZWxzOiBNb2RlbENvbmZpZ1tdO1xuICBlcnJvcj86IHN0cmluZztcbn1cblxuLyoqXG4gKiBDb21wbGV0ZSBkaXNjb3ZlcnkgcmVzdWx0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRGlzY292ZXJ5UmVzdWx0IHtcbiAgc3VjY2VzczogYm9vbGVhbjtcbiAgdGltZXN0YW1wOiBzdHJpbmc7XG4gIHJlc3VsdHM6IFByb3ZpZGVyRGlzY292ZXJ5UmVzdWx0W107XG4gIHRvdGFsTW9kZWxzRGlzY292ZXJlZDogbnVtYmVyO1xuICBlcnJvcnM6IHN0cmluZ1tdO1xufVxuXG4vKipcbiAqIEdldCBjYWNoZWQgZGlzY292ZXJlZCBtb2RlbHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldENhY2hlZERpc2NvdmVyZWRNb2RlbHMoKTogTW9kZWxDb25maWdbXSB7XG4gIHRyeSB7XG4gICAgaWYgKCFleGlzdHNTeW5jKENBQ0hFX0ZJTEUpKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jKENBQ0hFX0ZJTEUsICd1dGYtOCcpO1xuICAgIGNvbnN0IGNhY2hlOiBEaXNjb3ZlcmVkTW9kZWxzQ2FjaGUgPSBKU09OLnBhcnNlKHJhdyk7XG5cbiAgICAvLyBDaGVjayBpZiBjYWNoZSBpcyBleHBpcmVkXG4gICAgY29uc3QgbGFzdFVwZGF0ZWQgPSBuZXcgRGF0ZShjYWNoZS5sYXN0VXBkYXRlZCkuZ2V0VGltZSgpO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIGxhc3RVcGRhdGVkID4gQ0FDSEVfRVhQSVJBVElPTl9NUykge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiBjYWNoZS5tb2RlbHM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nRGVidWcoJ0ZhaWxlZCB0byByZWFkIGRpc2NvdmVyZWQgbW9kZWxzIGNhY2hlOicsIHNhZmVFcnJvck1lc3NhZ2UoZXJyb3IpKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLyoqXG4gKiBTYXZlIGRpc2NvdmVyZWQgbW9kZWxzIHRvIGNhY2hlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHNhdmVEaXNjb3ZlcmVkTW9kZWxzKG1vZGVsczogTW9kZWxDb25maWdbXSk6IFByb21pc2U8dm9pZD4ge1xuICB0cnkge1xuICAgIGF3YWl0IG1rZGlyKENBQ0hFX0RJUiwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG5cbiAgICBjb25zdCBjYWNoZTogRGlzY292ZXJlZE1vZGVsc0NhY2hlID0ge1xuICAgICAgdmVyc2lvbjogJzEuMC4wJyxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgICBtb2RlbHMsXG4gICAgfTtcblxuICAgIHdyaXRlRmlsZVN5bmMoQ0FDSEVfRklMRSwgSlNPTi5zdHJpbmdpZnkoY2FjaGUsIG51bGwsIDIpLCAndXRmLTgnKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBsb2dEZWJ1ZygnRmFpbGVkIHRvIHNhdmUgZGlzY292ZXJlZCBtb2RlbHMgY2FjaGU6Jywgc2FmZUVycm9yTWVzc2FnZShlcnJvcikpO1xuICB9XG59XG5cbi8qKlxuICogRGlzY292ZXIgbW9kZWxzIGZyb20gT3BlbkFJXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyT3BlbkFJTW9kZWxzKGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxQcm92aWRlckRpc2NvdmVyeVJlc3VsdD4ge1xuICBjb25zdCBwcm92aWRlcjogUHJvdmlkZXJJZCA9ICdvcGVuYWknO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9tb2RlbHMnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJldHVybmVkICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgeyBkYXRhOiBBcnJheTx7IGlkOiBzdHJpbmc7IG93bmVkX2J5OiBzdHJpbmcgfT4gfTtcblxuICAgIC8vIEZpbHRlciBmb3IgR1BUIG1vZGVscyBvbmx5IGFuZCBjcmVhdGUgTW9kZWxDb25maWcgb2JqZWN0c1xuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IGRhdGEuZGF0YVxuICAgICAgLmZpbHRlcihtb2RlbCA9PiB7XG4gICAgICAgIC8vIEFsbG93IGJvdGggZGFzaCBhbmQgbm9uLWRhc2ggdmFyaWFudHMgZm9yIG5ld2VyIHJlYXNvbmluZyBTS1VzIChvMS9vMylcbiAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICBtb2RlbC5pZC5zdGFydHNXaXRoKCdncHQtJykgfHxcbiAgICAgICAgICBtb2RlbC5pZC5zdGFydHNXaXRoKCdvMScpIHx8XG4gICAgICAgICAgbW9kZWwuaWQuc3RhcnRzV2l0aCgnbzMnKSB8fFxuICAgICAgICAgIG1vZGVsLmlkLnN0YXJ0c1dpdGgoJ2NvZGV4LScpXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLm1hcChtb2RlbCA9PiAoe1xuICAgICAgICBpZDogbW9kZWwuaWQsXG4gICAgICAgIGxhYmVsOiBtb2RlbC5pZCxcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgT3BlbkFJICR7bW9kZWwuaWR9IChhdXRvLWRpc2NvdmVyZWQpYCxcbiAgICAgICAgY2FwYWJpbGl0aWVzOiBbJ2NoYXQnLCAndG9vbHMnLCAnc3RyZWFtaW5nJ10sXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvdmlkZXIsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbW9kZWxzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtb2RlbHM6IFtdLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRGlzY292ZXIgbW9kZWxzIGZyb20gQW50aHJvcGljXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyQW50aHJvcGljTW9kZWxzKGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxQcm92aWRlckRpc2NvdmVyeVJlc3VsdD4ge1xuICBjb25zdCBwcm92aWRlcjogUHJvdmlkZXJJZCA9ICdhbnRocm9waWMnO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tb2RlbHMnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICd4LWFwaS1rZXknOiBhcGlLZXksXG4gICAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgIH0sXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFQSSByZXR1cm5lZCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHtcbiAgICAgIGRhdGE6IEFycmF5PHtcbiAgICAgICAgaWQ6IHN0cmluZztcbiAgICAgICAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XG4gICAgICAgIHR5cGU6IHN0cmluZztcbiAgICAgIH0+XG4gICAgfTtcblxuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IGRhdGEuZGF0YVxuICAgICAgLmZpbHRlcihtb2RlbCA9PiBtb2RlbC50eXBlID09PSAnbW9kZWwnKVxuICAgICAgLm1hcChtb2RlbCA9PiAoe1xuICAgICAgICBpZDogbW9kZWwuaWQsXG4gICAgICAgIGxhYmVsOiBtb2RlbC5kaXNwbGF5X25hbWUgfHwgbW9kZWwuaWQsXG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICBkZXNjcmlwdGlvbjogYEFudGhyb3BpYyAke21vZGVsLmRpc3BsYXlfbmFtZSB8fCBtb2RlbC5pZH0gKGF1dG8tZGlzY292ZXJlZClgLFxuICAgICAgICBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICdyZWFzb25pbmcnLCAndG9vbHMnLCAnc3RyZWFtaW5nJ10sXG4gICAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvdmlkZXIsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbW9kZWxzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtb2RlbHM6IFtdLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRGlzY292ZXIgbW9kZWxzIGZyb20gR29vZ2xlIEdlbWluaVxuICogTm90ZTogR29vZ2xlJ3MgbW9kZWxzIEFQSSBvZnRlbiByZXF1aXJlcyBzcGVjaWFsIHBlcm1pc3Npb25zLlxuICogRmFsbHMgYmFjayB0byBrbm93biBtb2RlbHMgaWYgQVBJIGFjY2VzcyBmYWlscy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gZGlzY292ZXJHb29nbGVNb2RlbHMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPFByb3ZpZGVyRGlzY292ZXJ5UmVzdWx0PiB7XG4gIGNvbnN0IHByb3ZpZGVyOiBQcm92aWRlcklkID0gJ2dvb2dsZSc7XG5cbiAgLy8gS25vd24gR29vZ2xlIEdlbWluaSBtb2RlbHMgKGZhbGxiYWNrIGlmIEFQSSBkb2Vzbid0IHdvcmspIC0gVXBkYXRlZCBEZWMgMjAyNVxuICBjb25zdCBrbm93bk1vZGVsczogTW9kZWxDb25maWdbXSA9IFtcbiAgICB7IGlkOiAnZ2VtaW5pLTMuMC1wcm8nLCBsYWJlbDogJ0dlbWluaSAzLjAgUHJvJywgcHJvdmlkZXIsIGRlc2NyaXB0aW9uOiAnTGF0ZXN0IEdlbWluaSB3aXRoIGJlc3QgcmVhc29uaW5nIGFuZCBjb2RpbmcnLCBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICdyZWFzb25pbmcnLCAndG9vbHMnLCAnc3RyZWFtaW5nJywgJ211bHRpbW9kYWwnXSB9LFxuICAgIHsgaWQ6ICdnZW1pbmktMy4wLWZsYXNoJywgbGFiZWw6ICdHZW1pbmkgMy4wIEZsYXNoJywgcHJvdmlkZXIsIGRlc2NyaXB0aW9uOiAnRmFzdCBHZW1pbmkgMy4wIG1vZGVsJywgY2FwYWJpbGl0aWVzOiBbJ2NoYXQnLCAncmVhc29uaW5nJywgJ3Rvb2xzJywgJ3N0cmVhbWluZycsICdtdWx0aW1vZGFsJ10gfSxcbiAgICB7IGlkOiAnZ2VtaW5pLTIuNS1wcm8nLCBsYWJlbDogJ0dlbWluaSAyLjUgUHJvJywgcHJvdmlkZXIsIGRlc2NyaXB0aW9uOiAnQ2FwYWJsZSBHZW1pbmkgbW9kZWwgd2l0aCBhZHZhbmNlZCByZWFzb25pbmcnLCBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICdyZWFzb25pbmcnLCAndG9vbHMnLCAnc3RyZWFtaW5nJywgJ211bHRpbW9kYWwnXSB9LFxuICAgIHsgaWQ6ICdnZW1pbmktMi41LWZsYXNoJywgbGFiZWw6ICdHZW1pbmkgMi41IEZsYXNoJywgcHJvdmlkZXIsIGRlc2NyaXB0aW9uOiAnRmFzdCBHZW1pbmkgMi41IHdpdGggcmVhc29uaW5nJywgY2FwYWJpbGl0aWVzOiBbJ2NoYXQnLCAncmVhc29uaW5nJywgJ3Rvb2xzJywgJ3N0cmVhbWluZycsICdtdWx0aW1vZGFsJ10gfSxcbiAgICB7IGlkOiAnZ2VtaW5pLTIuMC1mbGFzaCcsIGxhYmVsOiAnR2VtaW5pIDIuMCBGbGFzaCcsIHByb3ZpZGVyLCBkZXNjcmlwdGlvbjogJ0dlbWluaSAyLjAgd2l0aCBuYXRpdmUgdG9vbCB1c2UnLCBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICd0b29scycsICdzdHJlYW1pbmcnLCAnbXVsdGltb2RhbCddIH0sXG4gIF07XG5cbiAgdHJ5IHtcbiAgICAvLyBTRUNVUklUWTogVXNlIHgtZ29vZy1hcGkta2V5IGhlYWRlciBpbnN0ZWFkIG9mIFVSTCBxdWVyeSBwYXJhbWV0ZXJcbiAgICAvLyB0byBwcmV2ZW50IEFQSSBrZXkgbGVha2FnZSBpbiBsb2dzLCBlcnJvciBtZXNzYWdlcywgYW5kIGJyb3dzZXIgaGlzdG9yeVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleSxcbiAgICAgIH0sXG4gICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoNTAwMCksXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICAvLyBBUEkgYWNjZXNzIHJlc3RyaWN0ZWQgLSByZXR1cm4ga25vd24gbW9kZWxzIHdpdGggd2FybmluZ1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsIC8vIENvbnNpZGVyIGl0IHN1Y2Nlc3Mgd2l0aCBmYWxsYmFja1xuICAgICAgICBtb2RlbHM6IGtub3duTW9kZWxzLFxuICAgICAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHtcbiAgICAgIG1vZGVsczogQXJyYXk8e1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIGRpc3BsYXlOYW1lOiBzdHJpbmc7XG4gICAgICAgIHN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzOiBzdHJpbmdbXTtcbiAgICAgIH0+XG4gICAgfTtcblxuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IGRhdGEubW9kZWxzXG4gICAgICAuZmlsdGVyKG1vZGVsID0+XG4gICAgICAgIG1vZGVsLm5hbWUuaW5jbHVkZXMoJ2dlbWluaScpICYmXG4gICAgICAgIG1vZGVsLnN1cHBvcnRlZEdlbmVyYXRpb25NZXRob2RzPy5pbmNsdWRlcygnZ2VuZXJhdGVDb250ZW50JylcbiAgICAgIClcbiAgICAgIC5tYXAobW9kZWwgPT4ge1xuICAgICAgICBjb25zdCBpZCA9IG1vZGVsLm5hbWUucmVwbGFjZSgnbW9kZWxzLycsICcnKTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBpZCxcbiAgICAgICAgICBsYWJlbDogaWQsXG4gICAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGAke21vZGVsLmRpc3BsYXlOYW1lfSAoYXV0by1kaXNjb3ZlcmVkKWAsXG4gICAgICAgICAgY2FwYWJpbGl0aWVzOiBbJ2NoYXQnLCAncmVhc29uaW5nJywgJ3Rvb2xzJywgJ3N0cmVhbWluZycsICdtdWx0aW1vZGFsJ10sXG4gICAgICAgIH07XG4gICAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcixcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtb2RlbHM6IG1vZGVscy5sZW5ndGggPiAwID8gbW9kZWxzIDoga25vd25Nb2RlbHMsXG4gICAgfTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gTmV0d29yayBlcnJvciBvciB0aW1lb3V0IC0gcmV0dXJuIGtub3duIG1vZGVsc1xuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcixcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtb2RlbHM6IGtub3duTW9kZWxzLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNjb3ZlciBtb2RlbHMgZnJvbSBEZWVwU2VlayAoT3BlbkFJLWNvbXBhdGlibGUpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyRGVlcFNlZWtNb2RlbHMoYXBpS2V5OiBzdHJpbmcpOiBQcm9taXNlPFByb3ZpZGVyRGlzY292ZXJ5UmVzdWx0PiB7XG4gIGNvbnN0IHByb3ZpZGVyOiBQcm92aWRlcklkID0gJ2RlZXBzZWVrJztcblxuICB0cnkge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRlZXBzZWVrLmNvbS92MS9tb2RlbHMnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJldHVybmVkICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgeyBkYXRhOiBBcnJheTx7IGlkOiBzdHJpbmcgfT4gfTtcblxuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IGRhdGEuZGF0YS5tYXAobW9kZWwgPT4gKHtcbiAgICAgIGlkOiBtb2RlbC5pZCxcbiAgICAgIGxhYmVsOiBtb2RlbC5pZCxcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgZGVzY3JpcHRpb246IGBEZWVwU2VlayAke21vZGVsLmlkfSAoYXV0by1kaXNjb3ZlcmVkKWAsXG4gICAgICBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICdyZWFzb25pbmcnLCAndG9vbHMnLCAnc3RyZWFtaW5nJ10sXG4gICAgfSkpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIG1vZGVscyxcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcixcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgbW9kZWxzOiBbXSxcbiAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvciksXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIERpc2NvdmVyIG1vZGVscyBmcm9tIHhBSSAoT3BlbkFJLWNvbXBhdGlibGUpXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyWEFJTW9kZWxzKGFwaUtleTogc3RyaW5nKTogUHJvbWlzZTxQcm92aWRlckRpc2NvdmVyeVJlc3VsdD4ge1xuICBjb25zdCBwcm92aWRlcjogUHJvdmlkZXJJZCA9ICd4YWknO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkueC5haS92MS9tb2RlbHMnLCB7XG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gLFxuICAgICAgfSxcbiAgICB9KTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQVBJIHJldHVybmVkICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgIH1cblxuICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgeyBkYXRhOiBBcnJheTx7IGlkOiBzdHJpbmcgfT4gfTtcblxuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IGRhdGEuZGF0YS5tYXAobW9kZWwgPT4gKHtcbiAgICAgIGlkOiBtb2RlbC5pZCxcbiAgICAgIGxhYmVsOiBtb2RlbC5pZCxcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgZGVzY3JpcHRpb246IGB4QUkgJHttb2RlbC5pZH0gKGF1dG8tZGlzY292ZXJlZClgLFxuICAgICAgY2FwYWJpbGl0aWVzOiBbJ2NoYXQnLCAncmVhc29uaW5nJywgJ3Rvb2xzJywgJ3N0cmVhbWluZyddLFxuICAgIH0pKTtcblxuICAgIHJldHVybiB7XG4gICAgICBwcm92aWRlcixcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtb2RlbHMsXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICByZXR1cm4ge1xuICAgICAgcHJvdmlkZXIsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1vZGVsczogW10sXG4gICAgICBlcnJvcjogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBTdHJpbmcoZXJyb3IpLFxuICAgIH07XG4gIH1cbn1cblxuLyoqXG4gKiBEaXNjb3ZlciBtb2RlbHMgZnJvbSBPbGxhbWEgKGxvY2FsKVxuICovXG5hc3luYyBmdW5jdGlvbiBkaXNjb3Zlck9sbGFtYU1vZGVscygpOiBQcm9taXNlPFByb3ZpZGVyRGlzY292ZXJ5UmVzdWx0PiB7XG4gIGNvbnN0IHByb3ZpZGVyOiBQcm92aWRlcklkID0gJ29sbGFtYSc7XG4gIGNvbnN0IGJhc2VVUkwgPSBwcm9jZXNzLmVudlsnT0xMQU1BX0JBU0VfVVJMJ10gfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnO1xuXG4gIHRyeSB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHtiYXNlVVJMfS9hcGkvdGFnc2AsIHtcbiAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCgyMDAwKSwgLy8gMiBzZWNvbmQgdGltZW91dFxuICAgIH0pO1xuXG4gICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgcmV0dXJuZWQgJHtyZXNwb25zZS5zdGF0dXN9OiAke3Jlc3BvbnNlLnN0YXR1c1RleHR9YCk7XG4gICAgfVxuXG4gICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKSBhcyB7IG1vZGVscz86IEFycmF5PHsgbmFtZTogc3RyaW5nOyBzaXplOiBudW1iZXIgfT4gfTtcblxuICAgIGNvbnN0IG1vZGVsczogTW9kZWxDb25maWdbXSA9IChkYXRhLm1vZGVscyB8fCBbXSkubWFwKG1vZGVsID0+ICh7XG4gICAgICBpZDogbW9kZWwubmFtZSxcbiAgICAgIGxhYmVsOiBtb2RlbC5uYW1lLFxuICAgICAgcHJvdmlkZXIsXG4gICAgICBkZXNjcmlwdGlvbjogYExvY2FsIE9sbGFtYSBtb2RlbDogJHttb2RlbC5uYW1lfSAoYXV0by1kaXNjb3ZlcmVkKWAsXG4gICAgICBjYXBhYmlsaXRpZXM6IFsnY2hhdCcsICd0b29scycsICdzdHJlYW1pbmcnXSxcbiAgICB9KSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvdmlkZXIsXG4gICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgbW9kZWxzLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb3ZpZGVyLFxuICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICBtb2RlbHM6IFtdLFxuICAgICAgZXJyb3I6IGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogU3RyaW5nKGVycm9yKSxcbiAgICB9O1xuICB9XG59XG5cbi8qKlxuICogRGlzY292ZXIgbW9kZWxzIGZyb20gYWxsIGNvbmZpZ3VyZWQgcHJvdmlkZXJzXG4gKlxuICogUEVSRjogVXNlcyBQcm9taXNlLmFsbFNldHRsZWQgZm9yIHBhcmFsbGVsIGRpc2NvdmVyeSAtIGFsbCBwcm92aWRlcnMgcXVlcmllZFxuICogc2ltdWx0YW5lb3VzbHkuIE5vIHNpbmdsZSBzbG93L2ZhaWxlZCBwcm92aWRlciBibG9ja3MgdGhlIG90aGVycy5cbiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGRpc2NvdmVyQWxsTW9kZWxzKCk6IFByb21pc2U8RGlzY292ZXJ5UmVzdWx0PiB7XG4gIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcbiAgbGV0IHRvdGFsTW9kZWxzRGlzY292ZXJlZCA9IDA7XG5cbiAgLy8gRGlzY292ZXIgZnJvbSBlYWNoIHByb3ZpZGVyIGlmIEFQSSBrZXkgaXMgYXZhaWxhYmxlXG4gIGNvbnN0IHByb3ZpZGVyczogQXJyYXk8e1xuICAgIGlkOiBQcm92aWRlcklkO1xuICAgIGVudlZhcjogc3RyaW5nO1xuICAgIGRpc2NvdmVyOiAoYXBpS2V5OiBzdHJpbmcpID0+IFByb21pc2U8UHJvdmlkZXJEaXNjb3ZlcnlSZXN1bHQ+O1xuICB9PiA9IFtcbiAgICB7IGlkOiAnb3BlbmFpJywgZW52VmFyOiAnT1BFTkFJX0FQSV9LRVknLCBkaXNjb3ZlcjogZGlzY292ZXJPcGVuQUlNb2RlbHMgfSxcbiAgICB7IGlkOiAnYW50aHJvcGljJywgZW52VmFyOiAnQU5USFJPUElDX0FQSV9LRVknLCBkaXNjb3ZlcjogZGlzY292ZXJBbnRocm9waWNNb2RlbHMgfSxcbiAgICB7IGlkOiAnZ29vZ2xlJywgZW52VmFyOiAnR0VNSU5JX0FQSV9LRVknLCBkaXNjb3ZlcjogZGlzY292ZXJHb29nbGVNb2RlbHMgfSxcbiAgICB7IGlkOiAnZGVlcHNlZWsnLCBlbnZWYXI6ICdERUVQU0VFS19BUElfS0VZJywgZGlzY292ZXI6IGRpc2NvdmVyRGVlcFNlZWtNb2RlbHMgfSxcbiAgICB7IGlkOiAneGFpJywgZW52VmFyOiAnWEFJX0FQSV9LRVknLCBkaXNjb3ZlcjogZGlzY292ZXJYQUlNb2RlbHMgfSxcbiAgXTtcblxuICAvLyBQRVJGOiBCdWlsZCBkaXNjb3ZlcnkgcHJvbWlzZXMgaW4gcGFyYWxsZWxcbiAgY29uc3QgZGlzY292ZXJ5UHJvbWlzZXM6IFByb21pc2U8UHJvdmlkZXJEaXNjb3ZlcnlSZXN1bHQ+W10gPSBwcm92aWRlcnMubWFwKGFzeW5jIChwcm92aWRlcikgPT4ge1xuICAgIGNvbnN0IGFwaUtleSA9IHByb2Nlc3MuZW52W3Byb3ZpZGVyLmVudlZhcl07XG5cbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyLmlkLFxuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgbW9kZWxzOiBbXSxcbiAgICAgICAgZXJyb3I6IGBBUEkga2V5IG5vdCBjb25maWd1cmVkICgke3Byb3ZpZGVyLmVudlZhcn0pYCxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBhd2FpdCBwcm92aWRlci5kaXNjb3ZlcihhcGlLZXkpO1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFN0cmluZyhlcnJvcik7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIuaWQsXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBtb2RlbHM6IFtdIGFzIE1vZGVsQ29uZmlnW10sXG4gICAgICAgIGVycm9yOiBlcnJvck1lc3NhZ2UsXG4gICAgICB9O1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gQWRkIE9sbGFtYSBkaXNjb3ZlcnkgKG5vIEFQSSBrZXkgcmVxdWlyZWQpXG4gIGRpc2NvdmVyeVByb21pc2VzLnB1c2goXG4gICAgZGlzY292ZXJPbGxhbWFNb2RlbHMoKS5jYXRjaCgoKSA9PiAoe1xuICAgICAgcHJvdmlkZXI6ICdvbGxhbWEnIGFzIFByb3ZpZGVySWQsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1vZGVsczogW10gYXMgTW9kZWxDb25maWdbXSxcbiAgICAgIGVycm9yOiAnQ29ubmVjdGlvbiBmYWlsZWQnLFxuICAgIH0pKVxuICApO1xuXG4gIC8vIFBFUkY6IEV4ZWN1dGUgQUxMIHByb3ZpZGVyIGRpc2NvdmVyaWVzIGluIHBhcmFsbGVsIHVzaW5nIFByb21pc2UuYWxsU2V0dGxlZFxuICAvLyBUaGlzIGVuc3VyZXMgb25lIHNsb3cvZmFpbGVkIHByb3ZpZGVyIGRvZXNuJ3QgYmxvY2sgb3RoZXJzXG4gIGNvbnN0IHNldHRsZWRSZXN1bHRzID0gYXdhaXQgUHJvbWlzZS5hbGxTZXR0bGVkKGRpc2NvdmVyeVByb21pc2VzKTtcblxuICAvLyBQcm9jZXNzIHJlc3VsdHNcbiAgY29uc3QgcmVzdWx0czogUHJvdmlkZXJEaXNjb3ZlcnlSZXN1bHRbXSA9IHNldHRsZWRSZXN1bHRzLm1hcCgoc2V0dGxlZCwgaW5kZXgpID0+IHtcbiAgICBpZiAoc2V0dGxlZC5zdGF0dXMgPT09ICdmdWxmaWxsZWQnKSB7XG4gICAgICByZXR1cm4gc2V0dGxlZC52YWx1ZTtcbiAgICB9XG4gICAgLy8gUHJvbWlzZSByZWplY3RlZCAoc2hvdWxkbid0IGhhcHBlbiB3aXRoIG91ciBlcnJvciBoYW5kbGluZywgYnV0IGJlIHNhZmUpXG4gICAgY29uc3QgcHJvdmlkZXJJZCA9IGluZGV4IDwgcHJvdmlkZXJzLmxlbmd0aFxuICAgICAgPyBwcm92aWRlcnNbaW5kZXhdIS5pZFxuICAgICAgOiAnb2xsYW1hJztcbiAgICByZXR1cm4ge1xuICAgICAgcHJvdmlkZXI6IHByb3ZpZGVySWQsXG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIG1vZGVsczogW10sXG4gICAgICBlcnJvcjogc2V0dGxlZC5yZWFzb24gaW5zdGFuY2VvZiBFcnJvciA/IHNldHRsZWQucmVhc29uLm1lc3NhZ2UgOiBTdHJpbmcoc2V0dGxlZC5yZWFzb24pLFxuICAgIH07XG4gIH0pO1xuXG4gIC8vIENvbGxlY3QgZXJyb3JzIGFuZCBjb3VudCBtb2RlbHNcbiAgZm9yIChjb25zdCByZXN1bHQgb2YgcmVzdWx0cykge1xuICAgIGlmIChyZXN1bHQuc3VjY2Vzcykge1xuICAgICAgdG90YWxNb2RlbHNEaXNjb3ZlcmVkICs9IHJlc3VsdC5tb2RlbHMubGVuZ3RoO1xuICAgIH0gZWxzZSBpZiAocmVzdWx0LmVycm9yKSB7XG4gICAgICAvLyBEb24ndCBhZGQgT2xsYW1hIGNvbm5lY3Rpb24gZXJyb3JzIChpdCdzIG9mdGVuIG5vdCBydW5uaW5nKVxuICAgICAgaWYgKHJlc3VsdC5wcm92aWRlciA9PT0gJ29sbGFtYScgJiZcbiAgICAgICAgICAocmVzdWx0LmVycm9yLmluY2x1ZGVzKCdFQ09OTlJFRlVTRUQnKSB8fFxuICAgICAgICAgICByZXN1bHQuZXJyb3IuaW5jbHVkZXMoJ2ZldGNoIGZhaWxlZCcpIHx8XG4gICAgICAgICAgIHJlc3VsdC5lcnJvci5pbmNsdWRlcygnQ29ubmVjdGlvbiBmYWlsZWQnKSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBlcnJvcnMucHVzaChgJHtyZXN1bHQucHJvdmlkZXJ9OiAke3Jlc3VsdC5lcnJvcn1gKTtcbiAgICB9XG4gIH1cblxuICAvLyBDb2xsZWN0IGFsbCBkaXNjb3ZlcmVkIG1vZGVsc1xuICBjb25zdCBhbGxNb2RlbHMgPSByZXN1bHRzXG4gICAgLmZpbHRlcihyID0+IHIuc3VjY2VzcylcbiAgICAuZmxhdE1hcChyID0+IHIubW9kZWxzKTtcblxuICAvLyBTYXZlIHRvIGNhY2hlXG4gIGlmIChhbGxNb2RlbHMubGVuZ3RoID4gMCkge1xuICAgIGF3YWl0IHNhdmVEaXNjb3ZlcmVkTW9kZWxzKGFsbE1vZGVscyk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIHN1Y2Nlc3M6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgcmVzdWx0cyxcbiAgICB0b3RhbE1vZGVsc0Rpc2NvdmVyZWQsXG4gICAgZXJyb3JzLFxuICB9O1xufVxuXG4vKipcbiAqIENsZWFyIHRoZSBkaXNjb3ZlcmVkIG1vZGVscyBjYWNoZVxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJEaXNjb3ZlcmVkTW9kZWxzQ2FjaGUoKTogdm9pZCB7XG4gIHRyeSB7XG4gICAgaWYgKGV4aXN0c1N5bmMoQ0FDSEVfRklMRSkpIHtcbiAgICAgIHdyaXRlRmlsZVN5bmMoQ0FDSEVfRklMRSwgSlNPTi5zdHJpbmdpZnkoeyB2ZXJzaW9uOiAnMS4wLjAnLCBsYXN0VXBkYXRlZDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLCBtb2RlbHM6IFtdIH0sIG51bGwsIDIpLCAndXRmLTgnKTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgbG9nRGVidWcoJ0ZhaWxlZCB0byBjbGVhciBkaXNjb3ZlcmVkIG1vZGVscyBjYWNoZTonLCBzYWZlRXJyb3JNZXNzYWdlKGVycm9yKSk7XG4gIH1cbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gUHJvdmlkZXIgU3RhdHVzIERldGVjdGlvblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gaW5mb1xuICovXG5leHBvcnQgaW50ZXJmYWNlIFByb3ZpZGVySW5mbyB7XG4gIGlkOiBQcm92aWRlcklkO1xuICBuYW1lOiBzdHJpbmc7XG4gIGVudlZhcjogc3RyaW5nO1xuICBjb25maWd1cmVkOiBib29sZWFuO1xuICBsYXRlc3RNb2RlbDogc3RyaW5nO1xuICBtb2RlbHM/OiBzdHJpbmdbXTtcbn1cblxuLyoqXG4gKiBTdXBwb3J0ZWQgcHJvdmlkZXJzIHdpdGggdGhlaXIgZW52aXJvbm1lbnQgdmFyaWFibGUgcmVxdWlyZW1lbnRzXG4gKi9cbmNvbnN0IFBST1ZJREVSX0NPTkZJR1M6IEFycmF5PHtcbiAgaWQ6IFByb3ZpZGVySWQ7XG4gIG5hbWU6IHN0cmluZztcbiAgZW52VmFyOiBzdHJpbmc7XG4gIGFsdEVudlZhcnM/OiBzdHJpbmdbXTtcbiAgZGVmYXVsdExhdGVzdE1vZGVsOiBzdHJpbmc7XG59PiA9IFtcbiAgeyBpZDogJ2FudGhyb3BpYycsIG5hbWU6ICdBbnRocm9waWMnLCBlbnZWYXI6ICdBTlRIUk9QSUNfQVBJX0tFWScsIGRlZmF1bHRMYXRlc3RNb2RlbDogJ2NsYXVkZS1vcHVzLTQtNS0yMDI1MTEwMScgfSxcbiAgeyBpZDogJ29wZW5haScsIG5hbWU6ICdPcGVuQUknLCBlbnZWYXI6ICdPUEVOQUlfQVBJX0tFWScsIGRlZmF1bHRMYXRlc3RNb2RlbDogJ2dwdC01LjEtY29kZXgnIH0sXG4gIHsgaWQ6ICdnb29nbGUnLCBuYW1lOiAnR29vZ2xlJywgZW52VmFyOiAnR0VNSU5JX0FQSV9LRVknLCBhbHRFbnZWYXJzOiBbJ0dPT0dMRV9BUElfS0VZJ10sIGRlZmF1bHRMYXRlc3RNb2RlbDogJ2dlbWluaS0zLjAtcHJvJyB9LFxuICB7IGlkOiAnZGVlcHNlZWsnLCBuYW1lOiAnRGVlcFNlZWsnLCBlbnZWYXI6ICdERUVQU0VFS19BUElfS0VZJywgZGVmYXVsdExhdGVzdE1vZGVsOiAnZGVlcHNlZWstcmVhc29uZXInIH0sXG4gIHsgaWQ6ICd4YWknLCBuYW1lOiAneEFJJywgZW52VmFyOiAnWEFJX0FQSV9LRVknLCBkZWZhdWx0TGF0ZXN0TW9kZWw6ICdncm9rLTQtMS1mYXN0LXJlYXNvbmluZycgfSxcbiAgeyBpZDogJ29sbGFtYScsIG5hbWU6ICdPbGxhbWEnLCBlbnZWYXI6ICdPTExBTUFfQkFTRV9VUkwnLCBkZWZhdWx0TGF0ZXN0TW9kZWw6ICdsbGFtYTMuMzo3MGInIH0sXG5dO1xuXG4vKipcbiAqIE1vZGVsIHByaW9yaXR5IHJhbmtpbmdzIGZvciBzZWxlY3RpbmcgdGhlIFwiYmVzdFwiIG1vZGVsXG4gKi9cbmNvbnN0IE1PREVMX1BSSU9SSVRJRVM6IFJlY29yZDxzdHJpbmcsIFJlY29yZDxzdHJpbmcsIG51bWJlcj4+ID0ge1xuICBvcGVuYWk6IHtcbiAgICAnbzMtcHJvJzogMTIwLFxuICAgICdvMy1taW5pJzogMTE0LFxuICAgICdvMyc6IDExMixcbiAgICAnbzEtcHJvJzogMTEwLFxuICAgICdvMSc6IDEwOCxcbiAgICAnbzEtbWluaSc6IDEwNCxcbiAgICAnY29kZXgtbWF4JzogMTA1LFxuICAgICdncHQtNS4xLWNvZGV4LW1heCc6IDEwNSxcbiAgICAnZ3B0LTUuMS1jb2RleCc6IDEwMCxcbiAgICAnZ3B0LTUuMS1jb2RleC1taW5pJzogOTgsXG4gICAgJ2dwdC01LjEnOiA5NixcbiAgICAnZ3B0LTUtcHJvJzogOTQsXG4gICAgJ2dwdC01LW1pbmknOiA5MixcbiAgICAnZ3B0LTUtbmFubyc6IDkwLFxuICB9LFxuICBhbnRocm9waWM6IHtcbiAgICAnY2xhdWRlLW9wdXMtNC01JzogMTAwLFxuICAgICdjbGF1ZGUtb3B1cy00LTUtMjAyNTExMDEnOiAxMDAsXG4gICAgJ2NsYXVkZS1zb25uZXQtNC01JzogOTgsXG4gICAgJ2NsYXVkZS1zb25uZXQtNC01LTIwMjUwOTI5JzogOTgsXG4gICAgJ2NsYXVkZS1vcHVzLTQtMjAyNTA1MTQnOiA5NSxcbiAgICAnY2xhdWRlLW9wdXMtNCc6IDk1LFxuICAgICdjbGF1ZGUtc29ubmV0LTQnOiA5MixcbiAgICAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInOiA4OCxcbiAgICAnY2xhdWRlLTMtNS1oYWlrdS0yMDI0MTAyMic6IDg1LFxuICAgICdjbGF1ZGUtMy1vcHVzLTIwMjQwMjI5JzogODAsXG4gICAgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSc6IDc1LFxuICAgICdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNyc6IDcwLFxuICB9LFxuICBnb29nbGU6IHtcbiAgICAnZ2VtaW5pLTMuMC1wcm8nOiAxMDAsXG4gICAgJ2dlbWluaS0zLjAtZmxhc2gnOiA5OCxcbiAgICAnZ2VtaW5pLTIuNS1wcm8nOiA5NSxcbiAgICAnZ2VtaW5pLTIuNS1mbGFzaCc6IDkzLFxuICAgICdnZW1pbmktMi4wLWZsYXNoJzogOTAsXG4gICAgJ2dlbWluaS0yLjAnOiA4OCxcbiAgICAnZ2VtaW5pLTEuNS1wcm8nOiA4MCxcbiAgICAnZ2VtaW5pLTEuNS1mbGFzaCc6IDc1LFxuICAgICdnZW1pbmktMS4wJzogNTAsXG4gIH0sXG4gIGRlZXBzZWVrOiB7XG4gICAgJ2RlZXBzZWVrLXJlYXNvbmVyJzogMTAwLFxuICAgICdkZWVwc2Vlay1jaGF0JzogOTAsXG4gICAgJ2RlZXBzZWVrLWNvZGVyJzogODUsXG4gIH0sXG4gIHhhaToge1xuICAgICdncm9rLTQtMS1mYXN0LXJlYXNvbmluZyc6IDEwMCxcbiAgICAnZ3Jvay00LTEtZmFzdC1ub24tcmVhc29uaW5nJzogOTgsXG4gICAgJ2dyb2stNC1mYXN0LXJlYXNvbmluZyc6IDk1LFxuICAgICdncm9rLTQtZmFzdC1ub24tcmVhc29uaW5nJzogOTMsXG4gICAgJ2dyb2stNCc6IDkwLFxuICAgICdncm9rLWNvZGUtZmFzdC0xJzogODgsXG4gICAgJ2dyb2stMyc6IDg1LFxuICAgICdncm9rLTMtbWluaSc6IDgwLFxuICAgICdncm9rLTItdmlzaW9uLTEyMTInOiA3NSxcbiAgICAnZ3Jvay0yLTEyMTInOiA3MCxcbiAgICAnZ3Jvay1iZXRhJzogNjAsXG4gIH0sXG59O1xuXG4vKipcbiAqIEdldCBtb2RlbCBwcmlvcml0eSBmb3Igc29ydGluZ1xuICovXG5mdW5jdGlvbiBnZXRNb2RlbFByaW9yaXR5KHByb3ZpZGVyOiBQcm92aWRlcklkLCBtb2RlbElkOiBzdHJpbmcpOiBudW1iZXIge1xuICBjb25zdCBwcmlvcml0aWVzID0gTU9ERUxfUFJJT1JJVElFU1twcm92aWRlcl07XG4gIGlmICghcHJpb3JpdGllcykgcmV0dXJuIDA7XG5cbiAgLy8gQ2hlY2sgZm9yIGV4YWN0IG1hdGNoIGZpcnN0XG4gIGlmIChwcmlvcml0aWVzW21vZGVsSWRdICE9PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gcHJpb3JpdGllc1ttb2RlbElkXTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBwcmVmaXggbWF0Y2hcbiAgZm9yIChjb25zdCBbcHJlZml4LCBwcmlvcml0eV0gb2YgT2JqZWN0LmVudHJpZXMocHJpb3JpdGllcykpIHtcbiAgICBpZiAobW9kZWxJZC5zdGFydHNXaXRoKHByZWZpeCkpIHtcbiAgICAgIHJldHVybiBwcmlvcml0eTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gMDtcbn1cblxuLyoqXG4gKiBTb3J0IG1vZGVscyBieSBwcmlvcml0eSAoYmVzdCBmaXJzdClcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNvcnRNb2RlbHNCeVByaW9yaXR5KHByb3ZpZGVyOiBQcm92aWRlcklkLCBtb2RlbHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICByZXR1cm4gWy4uLm1vZGVsc10uc29ydCgoYSwgYikgPT4ge1xuICAgIGNvbnN0IHByaW9yaXR5QSA9IGdldE1vZGVsUHJpb3JpdHkocHJvdmlkZXIsIGEpO1xuICAgIGNvbnN0IHByaW9yaXR5QiA9IGdldE1vZGVsUHJpb3JpdHkocHJvdmlkZXIsIGIpO1xuICAgIHJldHVybiBwcmlvcml0eUIgLSBwcmlvcml0eUE7XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCB0aGUgYmVzdC9sYXRlc3QgbW9kZWwgZm9yIGEgcHJvdmlkZXJcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldEJlc3RNb2RlbChwcm92aWRlcjogUHJvdmlkZXJJZCwgbW9kZWxzOiBzdHJpbmdbXSk6IHN0cmluZyB7XG4gIGlmIChtb2RlbHMubGVuZ3RoID09PSAwKSB7XG4gICAgY29uc3QgY29uZmlnID0gUFJPVklERVJfQ09ORklHUy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvdmlkZXIpO1xuICAgIHJldHVybiBjb25maWc/LmRlZmF1bHRMYXRlc3RNb2RlbCB8fCAnJztcbiAgfVxuXG4gIGNvbnN0IHNvcnRlZCA9IHNvcnRNb2RlbHNCeVByaW9yaXR5KHByb3ZpZGVyLCBtb2RlbHMpO1xuICByZXR1cm4gc29ydGVkWzBdID8/IG1vZGVsc1swXSA/PyAnJztcbn1cblxuLyoqXG4gKiBDaGVjayBpZiBhIHByb3ZpZGVyIGlzIGNvbmZpZ3VyZWQgKGhhcyBBUEkga2V5IG9yIGlzIGFjY2Vzc2libGUpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3ZpZGVyQ29uZmlndXJlZChwcm92aWRlcklkOiBQcm92aWRlcklkKTogYm9vbGVhbiB7XG4gIGNvbnN0IGNvbmZpZyA9IFBST1ZJREVSX0NPTkZJR1MuZmluZChwID0+IHAuaWQgPT09IHByb3ZpZGVySWQpO1xuICBpZiAoIWNvbmZpZykgcmV0dXJuIGZhbHNlO1xuXG4gIC8vIE9sbGFtYSBpcyBzcGVjaWFsIC0gaXQncyBhdmFpbGFibGUgaWYgdGhlIHNlcnZlciBpcyBydW5uaW5nIChubyBBUEkga2V5IG5lZWRlZClcbiAgaWYgKHByb3ZpZGVySWQgPT09ICdvbGxhbWEnKSB7XG4gICAgLy8gV2UnbGwgY2hlY2sgdGhpcyB2aWEgYWN0dWFsIGNvbm5lY3Rpb24sIHJldHVybiB0cnVlIGZvciBub3dcbiAgICAvLyBUaGUgYWN0dWFsIGNoZWNrIGhhcHBlbnMgaW4gZ2V0Q29uZmlndXJlZFByb3ZpZGVyc1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQ2hlY2sgbWFpbiBlbnYgdmFyXG4gIGlmIChwcm9jZXNzLmVudltjb25maWcuZW52VmFyXSkge1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gQ2hlY2sgYWx0ZXJuYXRpdmUgZW52IHZhcnNcbiAgaWYgKGNvbmZpZy5hbHRFbnZWYXJzKSB7XG4gICAgZm9yIChjb25zdCBhbHRWYXIgb2YgY29uZmlnLmFsdEVudlZhcnMpIHtcbiAgICAgIGlmIChwcm9jZXNzLmVudlthbHRWYXJdKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLyoqXG4gKiBHZXQgYWxsIHByb3ZpZGVycyB3aXRoIHRoZWlyIGNvbmZpZ3VyYXRpb24gc3RhdHVzXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRQcm92aWRlcnNTdGF0dXMoKTogUHJvdmlkZXJJbmZvW10ge1xuICByZXR1cm4gUFJPVklERVJfQ09ORklHUy5tYXAoY29uZmlnID0+IHtcbiAgICBsZXQgY29uZmlndXJlZCA9IGZhbHNlO1xuXG4gICAgaWYgKGNvbmZpZy5pZCA9PT0gJ29sbGFtYScpIHtcbiAgICAgIC8vIEZvciBPbGxhbWEsIHdlIGNhbid0IGNoZWNrIHN5bmNocm9ub3VzbHkgaWYgaXQncyBydW5uaW5nXG4gICAgICAvLyBNYXJrIGFzIHBvdGVudGlhbGx5IGF2YWlsYWJsZVxuICAgICAgY29uZmlndXJlZCA9ICEhcHJvY2Vzcy5lbnZbJ09MTEFNQV9CQVNFX1VSTCddIHx8IHRydWU7IC8vIEFsd2F5cyBzaG93IE9sbGFtYSBhcyBvcHRpb25cbiAgICB9IGVsc2Uge1xuICAgICAgY29uZmlndXJlZCA9ICEhcHJvY2Vzcy5lbnZbY29uZmlnLmVudlZhcl07XG4gICAgICBpZiAoIWNvbmZpZ3VyZWQgJiYgY29uZmlnLmFsdEVudlZhcnMpIHtcbiAgICAgICAgY29uZmlndXJlZCA9IGNvbmZpZy5hbHRFbnZWYXJzLnNvbWUodiA9PiAhIXByb2Nlc3MuZW52W3ZdKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaWQ6IGNvbmZpZy5pZCxcbiAgICAgIG5hbWU6IGNvbmZpZy5uYW1lLFxuICAgICAgZW52VmFyOiBjb25maWcuZW52VmFyLFxuICAgICAgY29uZmlndXJlZCxcbiAgICAgIGxhdGVzdE1vZGVsOiBjb25maWcuZGVmYXVsdExhdGVzdE1vZGVsLFxuICAgIH07XG4gIH0pO1xufVxuXG4vKipcbiAqIEdldCBsaXN0IG9mIGNvbmZpZ3VyZWQgcHJvdmlkZXJzICh3aXRoIHZhbGlkIEFQSSBrZXlzKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29uZmlndXJlZFByb3ZpZGVycygpOiBQcm92aWRlckluZm9bXSB7XG4gIHJldHVybiBnZXRQcm92aWRlcnNTdGF0dXMoKS5maWx0ZXIocCA9PiBwLmNvbmZpZ3VyZWQpO1xufVxuXG4vKipcbiAqIEdldCBsaXN0IG9mIHVuY29uZmlndXJlZCBwcm92aWRlcnNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFVuY29uZmlndXJlZFByb3ZpZGVycygpOiBQcm92aWRlckluZm9bXSB7XG4gIHJldHVybiBnZXRQcm92aWRlcnNTdGF0dXMoKS5maWx0ZXIocCA9PiAhcC5jb25maWd1cmVkKTtcbn1cblxuLyoqXG4gKiBHZXQgdGhlIGZpcnN0IGF2YWlsYWJsZSBwcm92aWRlciAoZm9yIGF1dG8tc2VsZWN0aW9uKVxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Rmlyc3RBdmFpbGFibGVQcm92aWRlcigpOiBQcm92aWRlckluZm8gfCBudWxsIHtcbiAgY29uc3QgY29uZmlndXJlZCA9IGdldENvbmZpZ3VyZWRQcm92aWRlcnMoKTtcblxuICAvLyBQcmVmZXIgaW4gdGhpcyBvcmRlcjogYW50aHJvcGljLCBvcGVuYWksIGdvb2dsZSwgZGVlcHNlZWssIHhhaSwgb2xsYW1hXG4gIGNvbnN0IHByZWZlcmVuY2VPcmRlciA9IFsnYW50aHJvcGljJywgJ29wZW5haScsICdnb29nbGUnLCAnZGVlcHNlZWsnLCAneGFpJywgJ29sbGFtYSddO1xuXG4gIGZvciAoY29uc3QgcHJvdmlkZXJJZCBvZiBwcmVmZXJlbmNlT3JkZXIpIHtcbiAgICBjb25zdCBwcm92aWRlciA9IGNvbmZpZ3VyZWQuZmluZChwID0+IHAuaWQgPT09IHByb3ZpZGVySWQpO1xuICAgIGlmIChwcm92aWRlciAmJiBwcm92aWRlci5pZCAhPT0gJ29sbGFtYScpIHtcbiAgICAgIHJldHVybiBwcm92aWRlcjtcbiAgICB9XG4gIH1cblxuICAvLyBGYWxsIGJhY2sgdG8gT2xsYW1hIGlmIG5vdGhpbmcgZWxzZSBpcyBjb25maWd1cmVkXG4gIHJldHVybiBjb25maWd1cmVkLmZpbmQocCA9PiBwLmlkID09PSAnb2xsYW1hJykgfHwgbnVsbDtcbn1cblxuLyoqXG4gKiBHZXQgbGF0ZXN0IG1vZGVsIGZvciBhIHByb3ZpZGVyIGZyb20gY2FjaGUgb3IgZGVmYXVsdHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldExhdGVzdE1vZGVsRm9yUHJvdmlkZXIocHJvdmlkZXJJZDogUHJvdmlkZXJJZCk6IHN0cmluZyB7XG4gIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gIGNvbnN0IGNhY2hlZCA9IGdldENhY2hlZERpc2NvdmVyZWRNb2RlbHMoKTtcbiAgY29uc3QgcHJvdmlkZXJNb2RlbHMgPSBjYWNoZWQuZmlsdGVyKG0gPT4gbS5wcm92aWRlciA9PT0gcHJvdmlkZXJJZCk7XG5cbiAgaWYgKHByb3ZpZGVyTW9kZWxzLmxlbmd0aCA+IDApIHtcbiAgICBjb25zdCBtb2RlbElkcyA9IHByb3ZpZGVyTW9kZWxzLm1hcChtID0+IG0uaWQpO1xuICAgIHJldHVybiBnZXRCZXN0TW9kZWwocHJvdmlkZXJJZCwgbW9kZWxJZHMpO1xuICB9XG5cbiAgLy8gRmFsbCBiYWNrIHRvIGRlZmF1bHRcbiAgY29uc3QgY29uZmlnID0gUFJPVklERVJfQ09ORklHUy5maW5kKHAgPT4gcC5pZCA9PT0gcHJvdmlkZXJJZCk7XG4gIHJldHVybiBjb25maWc/LmRlZmF1bHRMYXRlc3RNb2RlbCB8fCAnJztcbn1cblxuLyoqXG4gKiBRdWljayBwcm92aWRlciBhdmFpbGFiaWxpdHkgY2hlY2sgcmVzdWx0XG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUXVpY2tQcm92aWRlclN0YXR1cyB7XG4gIHByb3ZpZGVyOiBQcm92aWRlcklkO1xuICBhdmFpbGFibGU6IGJvb2xlYW47XG4gIGxhdGVzdE1vZGVsOiBzdHJpbmc7XG4gIGVycm9yPzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFF1aWNrIEFQSSBjaGVjayBmb3IgYSBzaW5nbGUgcHJvdmlkZXIgLSByZXR1cm5zIGJlc3QgbW9kZWwgb3IgbnVsbFxuICovXG5hc3luYyBmdW5jdGlvbiBxdWlja0ZldGNoUHJvdmlkZXJNb2RlbHMoXG4gIHByb3ZpZGVySWQ6IFByb3ZpZGVySWQsXG4gIGFwaUtleTogc3RyaW5nLFxuICB0aW1lb3V0TXM6IG51bWJlciA9IDMwMDBcbik6IFByb21pc2U8c3RyaW5nW10+IHtcbiAgdHJ5IHtcbiAgICBzd2l0Y2ggKHByb3ZpZGVySWQpIHtcbiAgICAgIGNhc2UgJ29wZW5haSc6IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MS9tb2RlbHMnLCB7XG4gICAgICAgICAgaGVhZGVyczogeyAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHthcGlLZXl9YCB9LFxuICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aW1lb3V0TXMpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHsgZGF0YTogQXJyYXk8eyBpZDogc3RyaW5nIH0+IH07XG4gICAgICAgIHJldHVybiBkYXRhLmRhdGFcbiAgICAgICAgICAuZmlsdGVyKG0gPT5cbiAgICAgICAgICAgIG0uaWQuc3RhcnRzV2l0aCgnZ3B0LScpIHx8XG4gICAgICAgICAgICBtLmlkLnN0YXJ0c1dpdGgoJ28xJykgfHxcbiAgICAgICAgICAgIG0uaWQuc3RhcnRzV2l0aCgnbzMnKSB8fFxuICAgICAgICAgICAgbS5pZC5zdGFydHNXaXRoKCdjb2RleC0nKVxuICAgICAgICAgIClcbiAgICAgICAgICAubWFwKG0gPT4gbS5pZCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2FudGhyb3BpYyc6IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MS9tb2RlbHMnLCB7XG4gICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgJ3gtYXBpLWtleSc6IGFwaUtleSxcbiAgICAgICAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aW1lb3V0TXMpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHsgZGF0YTogQXJyYXk8eyBpZDogc3RyaW5nOyB0eXBlOiBzdHJpbmcgfT4gfTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGF0YS5maWx0ZXIobSA9PiBtLnR5cGUgPT09ICdtb2RlbCcpLm1hcChtID0+IG0uaWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdnb29nbGUnOiB7XG4gICAgICAgIC8vIFNFQ1VSSVRZOiBVc2UgeC1nb29nLWFwaS1rZXkgaGVhZGVyIGluc3RlYWQgb2YgVVJMIHF1ZXJ5IHBhcmFtZXRlclxuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MWJldGEvbW9kZWxzJywge1xuICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICd4LWdvb2ctYXBpLWtleSc6IGFwaUtleSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNpZ25hbDogQWJvcnRTaWduYWwudGltZW91dCh0aW1lb3V0TXMpLFxuICAgICAgICB9KTtcbiAgICAgICAgaWYgKCFyZXNwb25zZS5vaykgcmV0dXJuIFtdO1xuICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHtcbiAgICAgICAgICBtb2RlbHM6IEFycmF5PHsgbmFtZTogc3RyaW5nOyBzdXBwb3J0ZWRHZW5lcmF0aW9uTWV0aG9kcz86IHN0cmluZ1tdIH0+XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiBkYXRhLm1vZGVsc1xuICAgICAgICAgIC5maWx0ZXIobSA9PiBtLm5hbWUuaW5jbHVkZXMoJ2dlbWluaScpICYmIG0uc3VwcG9ydGVkR2VuZXJhdGlvbk1ldGhvZHM/LmluY2x1ZGVzKCdnZW5lcmF0ZUNvbnRlbnQnKSlcbiAgICAgICAgICAubWFwKG0gPT4gbS5uYW1lLnJlcGxhY2UoJ21vZGVscy8nLCAnJykpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICdkZWVwc2Vlayc6IHtcbiAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9hcGkuZGVlcHNlZWsuY29tL3YxL21vZGVscycsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gIH0sXG4gICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRpbWVvdXRNcyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgeyBkYXRhOiBBcnJheTx7IGlkOiBzdHJpbmcgfT4gfTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGF0YS5tYXAobSA9PiBtLmlkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAneGFpJzoge1xuICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKCdodHRwczovL2FwaS54LmFpL3YxL21vZGVscycsIHtcbiAgICAgICAgICBoZWFkZXJzOiB7ICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke2FwaUtleX1gIH0sXG4gICAgICAgICAgc2lnbmFsOiBBYm9ydFNpZ25hbC50aW1lb3V0KHRpbWVvdXRNcyksXG4gICAgICAgIH0pO1xuICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSByZXR1cm4gW107XG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCkgYXMgeyBkYXRhOiBBcnJheTx7IGlkOiBzdHJpbmcgfT4gfTtcbiAgICAgICAgcmV0dXJuIGRhdGEuZGF0YS5tYXAobSA9PiBtLmlkKTtcbiAgICAgIH1cblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogUXVpY2tseSBjaGVjayBpZiBwcm92aWRlcnMgYXJlIGF2YWlsYWJsZSBieSBxdWVyeWluZyB0aGVpciBBUElzXG4gKiBSZXR1cm5zIGFjdHVhbCBsYXRlc3QgbW9kZWxzIGZyb20gZWFjaCBwcm92aWRlclxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcXVpY2tDaGVja1Byb3ZpZGVycygpOiBQcm9taXNlPFF1aWNrUHJvdmlkZXJTdGF0dXNbXT4ge1xuICBjb25zdCBjaGVja3M6IFByb21pc2U8UXVpY2tQcm92aWRlclN0YXR1cz5bXSA9IFtdO1xuXG4gIGZvciAoY29uc3QgY29uZmlnIG9mIFBST1ZJREVSX0NPTkZJR1MpIHtcbiAgICAvLyBIYW5kbGUgT2xsYW1hIHNlcGFyYXRlbHkgKG5vIEFQSSBrZXkgbmVlZGVkKVxuICAgIGlmIChjb25maWcuaWQgPT09ICdvbGxhbWEnKSB7XG4gICAgICBjaGVja3MucHVzaCgoYXN5bmMgKCk6IFByb21pc2U8UXVpY2tQcm92aWRlclN0YXR1cz4gPT4ge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IGJhc2VVUkwgPSBwcm9jZXNzLmVudlsnT0xMQU1BX0JBU0VfVVJMJ10gfHwgJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnO1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7YmFzZVVSTH0vYXBpL3RhZ3NgLCB7XG4gICAgICAgICAgICBzaWduYWw6IEFib3J0U2lnbmFsLnRpbWVvdXQoMTUwMCksXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpIGFzIHsgbW9kZWxzPzogQXJyYXk8eyBuYW1lOiBzdHJpbmcgfT4gfTtcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGRhdGEubW9kZWxzPy5tYXAobSA9PiBtLm5hbWUpIHx8IFtdO1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgcHJvdmlkZXI6ICdvbGxhbWEnLFxuICAgICAgICAgICAgICBhdmFpbGFibGU6IG1vZGVscy5sZW5ndGggPiAwLFxuICAgICAgICAgICAgICBsYXRlc3RNb2RlbDogbW9kZWxzWzBdIHx8IGNvbmZpZy5kZWZhdWx0TGF0ZXN0TW9kZWwsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCB7IC8qIGlnbm9yZSAqLyB9XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcHJvdmlkZXI6ICdvbGxhbWEnLFxuICAgICAgICAgIGF2YWlsYWJsZTogZmFsc2UsXG4gICAgICAgICAgbGF0ZXN0TW9kZWw6IGNvbmZpZy5kZWZhdWx0TGF0ZXN0TW9kZWwsXG4gICAgICAgICAgZXJyb3I6ICdOb3QgcnVubmluZycsXG4gICAgICAgIH07XG4gICAgICB9KSgpKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGZvciBBUEkga2V5XG4gICAgbGV0IGFwaUtleSA9IHByb2Nlc3MuZW52W2NvbmZpZy5lbnZWYXJdO1xuICAgIGlmICghYXBpS2V5ICYmIGNvbmZpZy5hbHRFbnZWYXJzKSB7XG4gICAgICBmb3IgKGNvbnN0IGFsdFZhciBvZiBjb25maWcuYWx0RW52VmFycykge1xuICAgICAgICBpZiAocHJvY2Vzcy5lbnZbYWx0VmFyXSkge1xuICAgICAgICAgIGFwaUtleSA9IHByb2Nlc3MuZW52W2FsdFZhcl07XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgY2hlY2tzLnB1c2goUHJvbWlzZS5yZXNvbHZlKHtcbiAgICAgICAgcHJvdmlkZXI6IGNvbmZpZy5pZCxcbiAgICAgICAgYXZhaWxhYmxlOiBmYWxzZSxcbiAgICAgICAgbGF0ZXN0TW9kZWw6IGNvbmZpZy5kZWZhdWx0TGF0ZXN0TW9kZWwsXG4gICAgICAgIGVycm9yOiBgJHtjb25maWcuZW52VmFyfSBub3Qgc2V0YCxcbiAgICAgIH0pKTtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIC8vIFF1ZXJ5IHRoZSBBUEkgZm9yIGFjdHVhbCBtb2RlbHNcbiAgICBjaGVja3MucHVzaCgoYXN5bmMgKCk6IFByb21pc2U8UXVpY2tQcm92aWRlclN0YXR1cz4gPT4ge1xuICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgcXVpY2tGZXRjaFByb3ZpZGVyTW9kZWxzKGNvbmZpZy5pZCwgYXBpS2V5LCAzMDAwKTtcbiAgICAgIGlmIChtb2RlbHMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBiZXN0TW9kZWwgPSBnZXRCZXN0TW9kZWwoY29uZmlnLmlkLCBtb2RlbHMpO1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHByb3ZpZGVyOiBjb25maWcuaWQsXG4gICAgICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICAgIGxhdGVzdE1vZGVsOiBiZXN0TW9kZWwsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICAvLyBBUEkgY2FsbCBmYWlsZWQgb3IgcmV0dXJuZWQgbm8gbW9kZWxzIC0gc3RpbGwgbWFyayBhdmFpbGFibGUgaWYga2V5IGV4aXN0c1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgcHJvdmlkZXI6IGNvbmZpZy5pZCxcbiAgICAgICAgYXZhaWxhYmxlOiB0cnVlLFxuICAgICAgICBsYXRlc3RNb2RlbDogY29uZmlnLmRlZmF1bHRMYXRlc3RNb2RlbCxcbiAgICAgICAgZXJyb3I6ICdDb3VsZCBub3QgZmV0Y2ggbW9kZWxzJyxcbiAgICAgIH07XG4gICAgfSkoKSk7XG4gIH1cblxuICAvLyBSdW4gYWxsIGNoZWNrcyBpbiBwYXJhbGxlbCBmb3Igc3BlZWRcbiAgcmV0dXJuIFByb21pc2UuYWxsKGNoZWNrcyk7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBUUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBR0EsSUFBQUksWUFBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssWUFBQSxHQUFBTCxPQUFBO0FBZkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBV0E7QUFDQTtBQUNBO0FBQ0EsTUFBTU0sU0FBUyxHQUFHLElBQUFDLGNBQUksRUFBQyxJQUFBQyxlQUFPLEVBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQztBQUN6QyxNQUFNQyxVQUFVLEdBQUcsSUFBQUYsY0FBSSxFQUFDRCxTQUFTLEVBQUUsd0JBQXdCLENBQUM7O0FBRTVEO0FBQ0E7QUFDQTtBQUNBLE1BQU1JLG1CQUFtQixHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLElBQUk7O0FBRS9DO0FBQ0E7QUFDQTs7QUFPQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQTtBQUNBOztBQVNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLHlCQUF5QkEsQ0FBQSxFQUFrQjtFQUN6RCxJQUFJO0lBQ0YsSUFBSSxDQUFDLElBQUFDLGtCQUFVLEVBQUNILFVBQVUsQ0FBQyxFQUFFO01BQzNCLE9BQU8sRUFBRTtJQUNYO0lBRUEsTUFBTUksR0FBRyxHQUFHLElBQUFDLG9CQUFZLEVBQUNMLFVBQVUsRUFBRSxPQUFPLENBQUM7SUFDN0MsTUFBTU0sS0FBNEIsR0FBR0MsSUFBSSxDQUFDQyxLQUFLLENBQUNKLEdBQUcsQ0FBQzs7SUFFcEQ7SUFDQSxNQUFNSyxXQUFXLEdBQUcsSUFBSUMsSUFBSSxDQUFDSixLQUFLLENBQUNHLFdBQVcsQ0FBQyxDQUFDRSxPQUFPLENBQUMsQ0FBQztJQUN6RCxNQUFNQyxHQUFHLEdBQUdGLElBQUksQ0FBQ0UsR0FBRyxDQUFDLENBQUM7SUFDdEIsSUFBSUEsR0FBRyxHQUFHSCxXQUFXLEdBQUdSLG1CQUFtQixFQUFFO01BQzNDLE9BQU8sRUFBRTtJQUNYO0lBRUEsT0FBT0ssS0FBSyxDQUFDTyxNQUFNO0VBQ3JCLENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZCxJQUFBQyxxQkFBUSxFQUFDLHlDQUF5QyxFQUFFLElBQUFDLDZCQUFnQixFQUFDRixLQUFLLENBQUMsQ0FBQztJQUM1RSxPQUFPLEVBQUU7RUFDWDtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWVHLG9CQUFvQkEsQ0FBQ0osTUFBcUIsRUFBaUI7RUFDeEUsSUFBSTtJQUNGLE1BQU0sSUFBQUssZUFBSyxFQUFDckIsU0FBUyxFQUFFO01BQUVzQixTQUFTLEVBQUU7SUFBSyxDQUFDLENBQUM7SUFFM0MsTUFBTWIsS0FBNEIsR0FBRztNQUNuQ2MsT0FBTyxFQUFFLE9BQU87TUFDaEJYLFdBQVcsRUFBRSxJQUFJQyxJQUFJLENBQUMsQ0FBQyxDQUFDVyxXQUFXLENBQUMsQ0FBQztNQUNyQ1I7SUFDRixDQUFDO0lBRUQsSUFBQVMscUJBQWEsRUFBQ3RCLFVBQVUsRUFBRU8sSUFBSSxDQUFDZ0IsU0FBUyxDQUFDakIsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUM7RUFDcEUsQ0FBQyxDQUFDLE9BQU9RLEtBQUssRUFBRTtJQUNkLElBQUFDLHFCQUFRLEVBQUMseUNBQXlDLEVBQUUsSUFBQUMsNkJBQWdCLEVBQUNGLEtBQUssQ0FBQyxDQUFDO0VBQzlFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZVUsb0JBQW9CQSxDQUFDQyxNQUFjLEVBQW9DO0VBQ3BGLE1BQU1DLFFBQW9CLEdBQUcsUUFBUTtFQUVyQyxJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyxrQ0FBa0MsRUFBRTtNQUMvREMsT0FBTyxFQUFFO1FBQ1AsZUFBZSxFQUFFLFVBQVVKLE1BQU07TUFDbkM7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUNFLFFBQVEsQ0FBQ0csRUFBRSxFQUFFO01BQ2hCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGdCQUFnQkosUUFBUSxDQUFDSyxNQUFNLEtBQUtMLFFBQVEsQ0FBQ00sVUFBVSxFQUFFLENBQUM7SUFDNUU7SUFFQSxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBc0Q7O0lBRXZGO0lBQ0EsTUFBTXRCLE1BQXFCLEdBQUdxQixJQUFJLENBQUNBLElBQUksQ0FDcENFLE1BQU0sQ0FBQ0MsS0FBSyxJQUFJO01BQ2Y7TUFDQSxPQUNFQSxLQUFLLENBQUNDLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUMzQkYsS0FBSyxDQUFDQyxFQUFFLENBQUNDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFDekJGLEtBQUssQ0FBQ0MsRUFBRSxDQUFDQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQ3pCRixLQUFLLENBQUNDLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLFFBQVEsQ0FBQztJQUVqQyxDQUFDLENBQUMsQ0FDREMsR0FBRyxDQUFDSCxLQUFLLEtBQUs7TUFDYkMsRUFBRSxFQUFFRCxLQUFLLENBQUNDLEVBQUU7TUFDWkcsS0FBSyxFQUFFSixLQUFLLENBQUNDLEVBQUU7TUFDZlosUUFBUTtNQUNSZ0IsV0FBVyxFQUFFLFVBQVVMLEtBQUssQ0FBQ0MsRUFBRSxvQkFBb0I7TUFDbkRLLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsV0FBVztJQUM3QyxDQUFDLENBQUMsQ0FBQztJQUVMLE9BQU87TUFDTGpCLFFBQVE7TUFDUmtCLE9BQU8sRUFBRSxJQUFJO01BQ2IvQjtJQUNGLENBQUM7RUFDSCxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2QsT0FBTztNQUNMWSxRQUFRO01BQ1JrQixPQUFPLEVBQUUsS0FBSztNQUNkL0IsTUFBTSxFQUFFLEVBQUU7TUFDVkMsS0FBSyxFQUFFQSxLQUFLLFlBQVlpQixLQUFLLEdBQUdqQixLQUFLLENBQUMrQixPQUFPLEdBQUdDLE1BQU0sQ0FBQ2hDLEtBQUs7SUFDOUQsQ0FBQztFQUNIO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZWlDLHVCQUF1QkEsQ0FBQ3RCLE1BQWMsRUFBb0M7RUFDdkYsTUFBTUMsUUFBb0IsR0FBRyxXQUFXO0VBRXhDLElBQUk7SUFDRixNQUFNQyxRQUFRLEdBQUcsTUFBTUMsS0FBSyxDQUFDLHFDQUFxQyxFQUFFO01BQ2xFQyxPQUFPLEVBQUU7UUFDUCxXQUFXLEVBQUVKLE1BQU07UUFDbkIsbUJBQW1CLEVBQUU7TUFDdkI7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUNFLFFBQVEsQ0FBQ0csRUFBRSxFQUFFO01BQ2hCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGdCQUFnQkosUUFBUSxDQUFDSyxNQUFNLEtBQUtMLFFBQVEsQ0FBQ00sVUFBVSxFQUFFLENBQUM7SUFDNUU7SUFFQSxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FNaEM7SUFFRCxNQUFNdEIsTUFBcUIsR0FBR3FCLElBQUksQ0FBQ0EsSUFBSSxDQUNwQ0UsTUFBTSxDQUFDQyxLQUFLLElBQUlBLEtBQUssQ0FBQ1csSUFBSSxLQUFLLE9BQU8sQ0FBQyxDQUN2Q1IsR0FBRyxDQUFDSCxLQUFLLEtBQUs7TUFDYkMsRUFBRSxFQUFFRCxLQUFLLENBQUNDLEVBQUU7TUFDWkcsS0FBSyxFQUFFSixLQUFLLENBQUNZLFlBQVksSUFBSVosS0FBSyxDQUFDQyxFQUFFO01BQ3JDWixRQUFRO01BQ1JnQixXQUFXLEVBQUUsYUFBYUwsS0FBSyxDQUFDWSxZQUFZLElBQUlaLEtBQUssQ0FBQ0MsRUFBRSxvQkFBb0I7TUFDNUVLLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFdBQVc7SUFDMUQsQ0FBQyxDQUFDLENBQUM7SUFFTCxPQUFPO01BQ0xqQixRQUFRO01BQ1JrQixPQUFPLEVBQUUsSUFBSTtNQUNiL0I7SUFDRixDQUFDO0VBQ0gsQ0FBQyxDQUFDLE9BQU9DLEtBQUssRUFBRTtJQUNkLE9BQU87TUFDTFksUUFBUTtNQUNSa0IsT0FBTyxFQUFFLEtBQUs7TUFDZC9CLE1BQU0sRUFBRSxFQUFFO01BQ1ZDLEtBQUssRUFBRUEsS0FBSyxZQUFZaUIsS0FBSyxHQUFHakIsS0FBSyxDQUFDK0IsT0FBTyxHQUFHQyxNQUFNLENBQUNoQyxLQUFLO0lBQzlELENBQUM7RUFDSDtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlb0Msb0JBQW9CQSxDQUFDekIsTUFBYyxFQUFvQztFQUNwRixNQUFNQyxRQUFvQixHQUFHLFFBQVE7O0VBRXJDO0VBQ0EsTUFBTXlCLFdBQTBCLEdBQUcsQ0FDakM7SUFBRWIsRUFBRSxFQUFFLGdCQUFnQjtJQUFFRyxLQUFLLEVBQUUsZ0JBQWdCO0lBQUVmLFFBQVE7SUFBRWdCLFdBQVcsRUFBRSw4Q0FBOEM7SUFBRUMsWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVk7RUFBRSxDQUFDLEVBQ2pNO0lBQUVMLEVBQUUsRUFBRSxrQkFBa0I7SUFBRUcsS0FBSyxFQUFFLGtCQUFrQjtJQUFFZixRQUFRO0lBQUVnQixXQUFXLEVBQUUsdUJBQXVCO0lBQUVDLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZO0VBQUUsQ0FBQyxFQUM5SztJQUFFTCxFQUFFLEVBQUUsZ0JBQWdCO0lBQUVHLEtBQUssRUFBRSxnQkFBZ0I7SUFBRWYsUUFBUTtJQUFFZ0IsV0FBVyxFQUFFLDhDQUE4QztJQUFFQyxZQUFZLEVBQUUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxXQUFXLEVBQUUsWUFBWTtFQUFFLENBQUMsRUFDak07SUFBRUwsRUFBRSxFQUFFLGtCQUFrQjtJQUFFRyxLQUFLLEVBQUUsa0JBQWtCO0lBQUVmLFFBQVE7SUFBRWdCLFdBQVcsRUFBRSxnQ0FBZ0M7SUFBRUMsWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVk7RUFBRSxDQUFDLEVBQ3ZMO0lBQUVMLEVBQUUsRUFBRSxrQkFBa0I7SUFBRUcsS0FBSyxFQUFFLGtCQUFrQjtJQUFFZixRQUFRO0lBQUVnQixXQUFXLEVBQUUsaUNBQWlDO0lBQUVDLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsV0FBVyxFQUFFLFlBQVk7RUFBRSxDQUFDLENBQzVLO0VBRUQsSUFBSTtJQUNGO0lBQ0E7SUFDQSxNQUFNaEIsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyx5REFBeUQsRUFBRTtNQUN0RkMsT0FBTyxFQUFFO1FBQ1AsZ0JBQWdCLEVBQUVKO01BQ3BCLENBQUM7TUFDRDJCLE1BQU0sRUFBRUMsV0FBVyxDQUFDQyxPQUFPLENBQUMsSUFBSTtJQUNsQyxDQUFDLENBQUM7SUFFRixJQUFJLENBQUMzQixRQUFRLENBQUNHLEVBQUUsRUFBRTtNQUNoQjtNQUNBLE9BQU87UUFDTEosUUFBUTtRQUNSa0IsT0FBTyxFQUFFLElBQUk7UUFBRTtRQUNmL0IsTUFBTSxFQUFFc0M7TUFDVixDQUFDO0lBQ0g7SUFFQSxNQUFNakIsSUFBSSxHQUFHLE1BQU1QLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBTWhDO0lBRUQsTUFBTXRCLE1BQXFCLEdBQUdxQixJQUFJLENBQUNyQixNQUFNLENBQ3RDdUIsTUFBTSxDQUFDQyxLQUFLLElBQ1hBLEtBQUssQ0FBQ2tCLElBQUksQ0FBQ0MsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUM3Qm5CLEtBQUssQ0FBQ29CLDBCQUEwQixFQUFFRCxRQUFRLENBQUMsaUJBQWlCLENBQzlELENBQUMsQ0FDQWhCLEdBQUcsQ0FBQ0gsS0FBSyxJQUFJO01BQ1osTUFBTUMsRUFBRSxHQUFHRCxLQUFLLENBQUNrQixJQUFJLENBQUNHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDO01BQzVDLE9BQU87UUFDTHBCLEVBQUU7UUFDRkcsS0FBSyxFQUFFSCxFQUFFO1FBQ1RaLFFBQVE7UUFDUmdCLFdBQVcsRUFBRSxHQUFHTCxLQUFLLENBQUNzQixXQUFXLG9CQUFvQjtRQUNyRGhCLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxXQUFXLEVBQUUsT0FBTyxFQUFFLFdBQVcsRUFBRSxZQUFZO01BQ3hFLENBQUM7SUFDSCxDQUFDLENBQUM7SUFFSixPQUFPO01BQ0xqQixRQUFRO01BQ1JrQixPQUFPLEVBQUUsSUFBSTtNQUNiL0IsTUFBTSxFQUFFQSxNQUFNLENBQUMrQyxNQUFNLEdBQUcsQ0FBQyxHQUFHL0MsTUFBTSxHQUFHc0M7SUFDdkMsQ0FBQztFQUNILENBQUMsQ0FBQyxNQUFNO0lBQ047SUFDQSxPQUFPO01BQ0x6QixRQUFRO01BQ1JrQixPQUFPLEVBQUUsSUFBSTtNQUNiL0IsTUFBTSxFQUFFc0M7SUFDVixDQUFDO0VBQ0g7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlVSxzQkFBc0JBLENBQUNwQyxNQUFjLEVBQW9DO0VBQ3RGLE1BQU1DLFFBQW9CLEdBQUcsVUFBVTtFQUV2QyxJQUFJO0lBQ0YsTUFBTUMsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyxvQ0FBb0MsRUFBRTtNQUNqRUMsT0FBTyxFQUFFO1FBQ1AsZUFBZSxFQUFFLFVBQVVKLE1BQU07TUFDbkM7SUFDRixDQUFDLENBQUM7SUFFRixJQUFJLENBQUNFLFFBQVEsQ0FBQ0csRUFBRSxFQUFFO01BQ2hCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGdCQUFnQkosUUFBUSxDQUFDSyxNQUFNLEtBQUtMLFFBQVEsQ0FBQ00sVUFBVSxFQUFFLENBQUM7SUFDNUU7SUFFQSxNQUFNQyxJQUFJLEdBQUcsTUFBTVAsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FBb0M7SUFFckUsTUFBTXRCLE1BQXFCLEdBQUdxQixJQUFJLENBQUNBLElBQUksQ0FBQ00sR0FBRyxDQUFDSCxLQUFLLEtBQUs7TUFDcERDLEVBQUUsRUFBRUQsS0FBSyxDQUFDQyxFQUFFO01BQ1pHLEtBQUssRUFBRUosS0FBSyxDQUFDQyxFQUFFO01BQ2ZaLFFBQVE7TUFDUmdCLFdBQVcsRUFBRSxZQUFZTCxLQUFLLENBQUNDLEVBQUUsb0JBQW9CO01BQ3JESyxZQUFZLEVBQUUsQ0FBQyxNQUFNLEVBQUUsV0FBVyxFQUFFLE9BQU8sRUFBRSxXQUFXO0lBQzFELENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTztNQUNMakIsUUFBUTtNQUNSa0IsT0FBTyxFQUFFLElBQUk7TUFDYi9CO0lBQ0YsQ0FBQztFQUNILENBQUMsQ0FBQyxPQUFPQyxLQUFLLEVBQUU7SUFDZCxPQUFPO01BQ0xZLFFBQVE7TUFDUmtCLE9BQU8sRUFBRSxLQUFLO01BQ2QvQixNQUFNLEVBQUUsRUFBRTtNQUNWQyxLQUFLLEVBQUVBLEtBQUssWUFBWWlCLEtBQUssR0FBR2pCLEtBQUssQ0FBQytCLE9BQU8sR0FBR0MsTUFBTSxDQUFDaEMsS0FBSztJQUM5RCxDQUFDO0VBQ0g7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlZ0QsaUJBQWlCQSxDQUFDckMsTUFBYyxFQUFvQztFQUNqRixNQUFNQyxRQUFvQixHQUFHLEtBQUs7RUFFbEMsSUFBSTtJQUNGLE1BQU1DLFFBQVEsR0FBRyxNQUFNQyxLQUFLLENBQUMsNEJBQTRCLEVBQUU7TUFDekRDLE9BQU8sRUFBRTtRQUNQLGVBQWUsRUFBRSxVQUFVSixNQUFNO01BQ25DO0lBQ0YsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDRSxRQUFRLENBQUNHLEVBQUUsRUFBRTtNQUNoQixNQUFNLElBQUlDLEtBQUssQ0FBQyxnQkFBZ0JKLFFBQVEsQ0FBQ0ssTUFBTSxLQUFLTCxRQUFRLENBQUNNLFVBQVUsRUFBRSxDQUFDO0lBQzVFO0lBRUEsTUFBTUMsSUFBSSxHQUFHLE1BQU1QLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQW9DO0lBRXJFLE1BQU10QixNQUFxQixHQUFHcUIsSUFBSSxDQUFDQSxJQUFJLENBQUNNLEdBQUcsQ0FBQ0gsS0FBSyxLQUFLO01BQ3BEQyxFQUFFLEVBQUVELEtBQUssQ0FBQ0MsRUFBRTtNQUNaRyxLQUFLLEVBQUVKLEtBQUssQ0FBQ0MsRUFBRTtNQUNmWixRQUFRO01BQ1JnQixXQUFXLEVBQUUsT0FBT0wsS0FBSyxDQUFDQyxFQUFFLG9CQUFvQjtNQUNoREssWUFBWSxFQUFFLENBQUMsTUFBTSxFQUFFLFdBQVcsRUFBRSxPQUFPLEVBQUUsV0FBVztJQUMxRCxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU87TUFDTGpCLFFBQVE7TUFDUmtCLE9BQU8sRUFBRSxJQUFJO01BQ2IvQjtJQUNGLENBQUM7RUFDSCxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2QsT0FBTztNQUNMWSxRQUFRO01BQ1JrQixPQUFPLEVBQUUsS0FBSztNQUNkL0IsTUFBTSxFQUFFLEVBQUU7TUFDVkMsS0FBSyxFQUFFQSxLQUFLLFlBQVlpQixLQUFLLEdBQUdqQixLQUFLLENBQUMrQixPQUFPLEdBQUdDLE1BQU0sQ0FBQ2hDLEtBQUs7SUFDOUQsQ0FBQztFQUNIO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZWlELG9CQUFvQkEsQ0FBQSxFQUFxQztFQUN0RSxNQUFNckMsUUFBb0IsR0FBRyxRQUFRO0VBQ3JDLE1BQU1zQyxPQUFPLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksd0JBQXdCO0VBRTFFLElBQUk7SUFDRixNQUFNdkMsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyxHQUFHb0MsT0FBTyxXQUFXLEVBQUU7TUFDbERaLE1BQU0sRUFBRUMsV0FBVyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUU7SUFDckMsQ0FBQyxDQUFDO0lBRUYsSUFBSSxDQUFDM0IsUUFBUSxDQUFDRyxFQUFFLEVBQUU7TUFDaEIsTUFBTSxJQUFJQyxLQUFLLENBQUMsZ0JBQWdCSixRQUFRLENBQUNLLE1BQU0sS0FBS0wsUUFBUSxDQUFDTSxVQUFVLEVBQUUsQ0FBQztJQUM1RTtJQUVBLE1BQU1DLElBQUksR0FBRyxNQUFNUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUF1RDtJQUV4RixNQUFNdEIsTUFBcUIsR0FBRyxDQUFDcUIsSUFBSSxDQUFDckIsTUFBTSxJQUFJLEVBQUUsRUFBRTJCLEdBQUcsQ0FBQ0gsS0FBSyxLQUFLO01BQzlEQyxFQUFFLEVBQUVELEtBQUssQ0FBQ2tCLElBQUk7TUFDZGQsS0FBSyxFQUFFSixLQUFLLENBQUNrQixJQUFJO01BQ2pCN0IsUUFBUTtNQUNSZ0IsV0FBVyxFQUFFLHVCQUF1QkwsS0FBSyxDQUFDa0IsSUFBSSxvQkFBb0I7TUFDbEVaLFlBQVksRUFBRSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsV0FBVztJQUM3QyxDQUFDLENBQUMsQ0FBQztJQUVILE9BQU87TUFDTGpCLFFBQVE7TUFDUmtCLE9BQU8sRUFBRSxJQUFJO01BQ2IvQjtJQUNGLENBQUM7RUFDSCxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2QsT0FBTztNQUNMWSxRQUFRO01BQ1JrQixPQUFPLEVBQUUsS0FBSztNQUNkL0IsTUFBTSxFQUFFLEVBQUU7TUFDVkMsS0FBSyxFQUFFQSxLQUFLLFlBQVlpQixLQUFLLEdBQUdqQixLQUFLLENBQUMrQixPQUFPLEdBQUdDLE1BQU0sQ0FBQ2hDLEtBQUs7SUFDOUQsQ0FBQztFQUNIO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sZUFBZXFELGlCQUFpQkEsQ0FBQSxFQUE2QjtFQUNsRSxNQUFNQyxNQUFnQixHQUFHLEVBQUU7RUFDM0IsSUFBSUMscUJBQXFCLEdBQUcsQ0FBQzs7RUFFN0I7RUFDQSxNQUFNQyxTQUlKLEdBQUcsQ0FDSDtJQUFFaEMsRUFBRSxFQUFFLFFBQVE7SUFBRWlDLE1BQU0sRUFBRSxnQkFBZ0I7SUFBRUMsUUFBUSxFQUFFaEQ7RUFBcUIsQ0FBQyxFQUMxRTtJQUFFYyxFQUFFLEVBQUUsV0FBVztJQUFFaUMsTUFBTSxFQUFFLG1CQUFtQjtJQUFFQyxRQUFRLEVBQUV6QjtFQUF3QixDQUFDLEVBQ25GO0lBQUVULEVBQUUsRUFBRSxRQUFRO0lBQUVpQyxNQUFNLEVBQUUsZ0JBQWdCO0lBQUVDLFFBQVEsRUFBRXRCO0VBQXFCLENBQUMsRUFDMUU7SUFBRVosRUFBRSxFQUFFLFVBQVU7SUFBRWlDLE1BQU0sRUFBRSxrQkFBa0I7SUFBRUMsUUFBUSxFQUFFWDtFQUF1QixDQUFDLEVBQ2hGO0lBQUV2QixFQUFFLEVBQUUsS0FBSztJQUFFaUMsTUFBTSxFQUFFLGFBQWE7SUFBRUMsUUFBUSxFQUFFVjtFQUFrQixDQUFDLENBQ2xFOztFQUVEO0VBQ0EsTUFBTVcsaUJBQXFELEdBQUdILFNBQVMsQ0FBQzlCLEdBQUcsQ0FBQyxNQUFPZCxRQUFRLElBQUs7SUFDOUYsTUFBTUQsTUFBTSxHQUFHd0MsT0FBTyxDQUFDQyxHQUFHLENBQUN4QyxRQUFRLENBQUM2QyxNQUFNLENBQUM7SUFFM0MsSUFBSSxDQUFDOUMsTUFBTSxFQUFFO01BQ1gsT0FBTztRQUNMQyxRQUFRLEVBQUVBLFFBQVEsQ0FBQ1ksRUFBRTtRQUNyQk0sT0FBTyxFQUFFLEtBQUs7UUFDZC9CLE1BQU0sRUFBRSxFQUFFO1FBQ1ZDLEtBQUssRUFBRSwyQkFBMkJZLFFBQVEsQ0FBQzZDLE1BQU07TUFDbkQsQ0FBQztJQUNIO0lBRUEsSUFBSTtNQUNGLE9BQU8sTUFBTTdDLFFBQVEsQ0FBQzhDLFFBQVEsQ0FBQy9DLE1BQU0sQ0FBQztJQUN4QyxDQUFDLENBQUMsT0FBT1gsS0FBSyxFQUFFO01BQ2QsTUFBTTRELFlBQVksR0FBRzVELEtBQUssWUFBWWlCLEtBQUssR0FBR2pCLEtBQUssQ0FBQytCLE9BQU8sR0FBR0MsTUFBTSxDQUFDaEMsS0FBSyxDQUFDO01BQzNFLE9BQU87UUFDTFksUUFBUSxFQUFFQSxRQUFRLENBQUNZLEVBQUU7UUFDckJNLE9BQU8sRUFBRSxLQUFLO1FBQ2QvQixNQUFNLEVBQUUsRUFBbUI7UUFDM0JDLEtBQUssRUFBRTREO01BQ1QsQ0FBQztJQUNIO0VBQ0YsQ0FBQyxDQUFDOztFQUVGO0VBQ0FELGlCQUFpQixDQUFDRSxJQUFJLENBQ3BCWixvQkFBb0IsQ0FBQyxDQUFDLENBQUNhLEtBQUssQ0FBQyxPQUFPO0lBQ2xDbEQsUUFBUSxFQUFFLFFBQXNCO0lBQ2hDa0IsT0FBTyxFQUFFLEtBQUs7SUFDZC9CLE1BQU0sRUFBRSxFQUFtQjtJQUMzQkMsS0FBSyxFQUFFO0VBQ1QsQ0FBQyxDQUFDLENBQ0osQ0FBQzs7RUFFRDtFQUNBO0VBQ0EsTUFBTStELGNBQWMsR0FBRyxNQUFNQyxPQUFPLENBQUNDLFVBQVUsQ0FBQ04saUJBQWlCLENBQUM7O0VBRWxFO0VBQ0EsTUFBTU8sT0FBa0MsR0FBR0gsY0FBYyxDQUFDckMsR0FBRyxDQUFDLENBQUN5QyxPQUFPLEVBQUVDLEtBQUssS0FBSztJQUNoRixJQUFJRCxPQUFPLENBQUNqRCxNQUFNLEtBQUssV0FBVyxFQUFFO01BQ2xDLE9BQU9pRCxPQUFPLENBQUNFLEtBQUs7SUFDdEI7SUFDQTtJQUNBLE1BQU1DLFVBQVUsR0FBR0YsS0FBSyxHQUFHWixTQUFTLENBQUNWLE1BQU0sR0FDdkNVLFNBQVMsQ0FBQ1ksS0FBSyxDQUFDLENBQUU1QyxFQUFFLEdBQ3BCLFFBQVE7SUFDWixPQUFPO01BQ0xaLFFBQVEsRUFBRTBELFVBQVU7TUFDcEJ4QyxPQUFPLEVBQUUsS0FBSztNQUNkL0IsTUFBTSxFQUFFLEVBQUU7TUFDVkMsS0FBSyxFQUFFbUUsT0FBTyxDQUFDSSxNQUFNLFlBQVl0RCxLQUFLLEdBQUdrRCxPQUFPLENBQUNJLE1BQU0sQ0FBQ3hDLE9BQU8sR0FBR0MsTUFBTSxDQUFDbUMsT0FBTyxDQUFDSSxNQUFNO0lBQ3pGLENBQUM7RUFDSCxDQUFDLENBQUM7O0VBRUY7RUFDQSxLQUFLLE1BQU1DLE1BQU0sSUFBSU4sT0FBTyxFQUFFO0lBQzVCLElBQUlNLE1BQU0sQ0FBQzFDLE9BQU8sRUFBRTtNQUNsQnlCLHFCQUFxQixJQUFJaUIsTUFBTSxDQUFDekUsTUFBTSxDQUFDK0MsTUFBTTtJQUMvQyxDQUFDLE1BQU0sSUFBSTBCLE1BQU0sQ0FBQ3hFLEtBQUssRUFBRTtNQUN2QjtNQUNBLElBQUl3RSxNQUFNLENBQUM1RCxRQUFRLEtBQUssUUFBUSxLQUMzQjRELE1BQU0sQ0FBQ3hFLEtBQUssQ0FBQzBDLFFBQVEsQ0FBQyxjQUFjLENBQUMsSUFDckM4QixNQUFNLENBQUN4RSxLQUFLLENBQUMwQyxRQUFRLENBQUMsY0FBYyxDQUFDLElBQ3JDOEIsTUFBTSxDQUFDeEUsS0FBSyxDQUFDMEMsUUFBUSxDQUFDLG1CQUFtQixDQUFDLENBQUMsRUFBRTtRQUNoRDtNQUNGO01BQ0FZLE1BQU0sQ0FBQ08sSUFBSSxDQUFDLEdBQUdXLE1BQU0sQ0FBQzVELFFBQVEsS0FBSzRELE1BQU0sQ0FBQ3hFLEtBQUssRUFBRSxDQUFDO0lBQ3BEO0VBQ0Y7O0VBRUE7RUFDQSxNQUFNeUUsU0FBUyxHQUFHUCxPQUFPLENBQ3RCNUMsTUFBTSxDQUFDb0QsQ0FBQyxJQUFJQSxDQUFDLENBQUM1QyxPQUFPLENBQUMsQ0FDdEI2QyxPQUFPLENBQUNELENBQUMsSUFBSUEsQ0FBQyxDQUFDM0UsTUFBTSxDQUFDOztFQUV6QjtFQUNBLElBQUkwRSxTQUFTLENBQUMzQixNQUFNLEdBQUcsQ0FBQyxFQUFFO0lBQ3hCLE1BQU0zQyxvQkFBb0IsQ0FBQ3NFLFNBQVMsQ0FBQztFQUN2QztFQUVBLE9BQU87SUFDTDNDLE9BQU8sRUFBRXdCLE1BQU0sQ0FBQ1IsTUFBTSxLQUFLLENBQUM7SUFDNUI4QixTQUFTLEVBQUUsSUFBSWhGLElBQUksQ0FBQyxDQUFDLENBQUNXLFdBQVcsQ0FBQyxDQUFDO0lBQ25DMkQsT0FBTztJQUNQWCxxQkFBcUI7SUFDckJEO0VBQ0YsQ0FBQztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVN1QiwwQkFBMEJBLENBQUEsRUFBUztFQUNqRCxJQUFJO0lBQ0YsSUFBSSxJQUFBeEYsa0JBQVUsRUFBQ0gsVUFBVSxDQUFDLEVBQUU7TUFDMUIsSUFBQXNCLHFCQUFhLEVBQUN0QixVQUFVLEVBQUVPLElBQUksQ0FBQ2dCLFNBQVMsQ0FBQztRQUFFSCxPQUFPLEVBQUUsT0FBTztRQUFFWCxXQUFXLEVBQUUsSUFBSUMsSUFBSSxDQUFDLENBQUMsQ0FBQ1csV0FBVyxDQUFDLENBQUM7UUFBRVIsTUFBTSxFQUFFO01BQUcsQ0FBQyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUM7SUFDdEk7RUFDRixDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO0lBQ2QsSUFBQUMscUJBQVEsRUFBQywwQ0FBMEMsRUFBRSxJQUFBQyw2QkFBZ0IsRUFBQ0YsS0FBSyxDQUFDLENBQUM7RUFDL0U7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQVVBO0FBQ0E7QUFDQTtBQUNBLE1BQU04RSxnQkFNSixHQUFHLENBQ0g7RUFBRXRELEVBQUUsRUFBRSxXQUFXO0VBQUVpQixJQUFJLEVBQUUsV0FBVztFQUFFZ0IsTUFBTSxFQUFFLG1CQUFtQjtFQUFFc0Isa0JBQWtCLEVBQUU7QUFBMkIsQ0FBQyxFQUNuSDtFQUFFdkQsRUFBRSxFQUFFLFFBQVE7RUFBRWlCLElBQUksRUFBRSxRQUFRO0VBQUVnQixNQUFNLEVBQUUsZ0JBQWdCO0VBQUVzQixrQkFBa0IsRUFBRTtBQUFnQixDQUFDLEVBQy9GO0VBQUV2RCxFQUFFLEVBQUUsUUFBUTtFQUFFaUIsSUFBSSxFQUFFLFFBQVE7RUFBRWdCLE1BQU0sRUFBRSxnQkFBZ0I7RUFBRXVCLFVBQVUsRUFBRSxDQUFDLGdCQUFnQixDQUFDO0VBQUVELGtCQUFrQixFQUFFO0FBQWlCLENBQUMsRUFDaEk7RUFBRXZELEVBQUUsRUFBRSxVQUFVO0VBQUVpQixJQUFJLEVBQUUsVUFBVTtFQUFFZ0IsTUFBTSxFQUFFLGtCQUFrQjtFQUFFc0Isa0JBQWtCLEVBQUU7QUFBb0IsQ0FBQyxFQUN6RztFQUFFdkQsRUFBRSxFQUFFLEtBQUs7RUFBRWlCLElBQUksRUFBRSxLQUFLO0VBQUVnQixNQUFNLEVBQUUsYUFBYTtFQUFFc0Isa0JBQWtCLEVBQUU7QUFBMEIsQ0FBQyxFQUNoRztFQUFFdkQsRUFBRSxFQUFFLFFBQVE7RUFBRWlCLElBQUksRUFBRSxRQUFRO0VBQUVnQixNQUFNLEVBQUUsaUJBQWlCO0VBQUVzQixrQkFBa0IsRUFBRTtBQUFlLENBQUMsQ0FDaEc7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsTUFBTUUsZ0JBQXdELEdBQUc7RUFDL0RDLE1BQU0sRUFBRTtJQUNOLFFBQVEsRUFBRSxHQUFHO0lBQ2IsU0FBUyxFQUFFLEdBQUc7SUFDZCxJQUFJLEVBQUUsR0FBRztJQUNULFFBQVEsRUFBRSxHQUFHO0lBQ2IsSUFBSSxFQUFFLEdBQUc7SUFDVCxTQUFTLEVBQUUsR0FBRztJQUNkLFdBQVcsRUFBRSxHQUFHO0lBQ2hCLG1CQUFtQixFQUFFLEdBQUc7SUFDeEIsZUFBZSxFQUFFLEdBQUc7SUFDcEIsb0JBQW9CLEVBQUUsRUFBRTtJQUN4QixTQUFTLEVBQUUsRUFBRTtJQUNiLFdBQVcsRUFBRSxFQUFFO0lBQ2YsWUFBWSxFQUFFLEVBQUU7SUFDaEIsWUFBWSxFQUFFO0VBQ2hCLENBQUM7RUFDREMsU0FBUyxFQUFFO0lBQ1QsaUJBQWlCLEVBQUUsR0FBRztJQUN0QiwwQkFBMEIsRUFBRSxHQUFHO0lBQy9CLG1CQUFtQixFQUFFLEVBQUU7SUFDdkIsNEJBQTRCLEVBQUUsRUFBRTtJQUNoQyx3QkFBd0IsRUFBRSxFQUFFO0lBQzVCLGVBQWUsRUFBRSxFQUFFO0lBQ25CLGlCQUFpQixFQUFFLEVBQUU7SUFDckIsNEJBQTRCLEVBQUUsRUFBRTtJQUNoQywyQkFBMkIsRUFBRSxFQUFFO0lBQy9CLHdCQUF3QixFQUFFLEVBQUU7SUFDNUIsMEJBQTBCLEVBQUUsRUFBRTtJQUM5Qix5QkFBeUIsRUFBRTtFQUM3QixDQUFDO0VBQ0RDLE1BQU0sRUFBRTtJQUNOLGdCQUFnQixFQUFFLEdBQUc7SUFDckIsa0JBQWtCLEVBQUUsRUFBRTtJQUN0QixnQkFBZ0IsRUFBRSxFQUFFO0lBQ3BCLGtCQUFrQixFQUFFLEVBQUU7SUFDdEIsa0JBQWtCLEVBQUUsRUFBRTtJQUN0QixZQUFZLEVBQUUsRUFBRTtJQUNoQixnQkFBZ0IsRUFBRSxFQUFFO0lBQ3BCLGtCQUFrQixFQUFFLEVBQUU7SUFDdEIsWUFBWSxFQUFFO0VBQ2hCLENBQUM7RUFDREMsUUFBUSxFQUFFO0lBQ1IsbUJBQW1CLEVBQUUsR0FBRztJQUN4QixlQUFlLEVBQUUsRUFBRTtJQUNuQixnQkFBZ0IsRUFBRTtFQUNwQixDQUFDO0VBQ0RDLEdBQUcsRUFBRTtJQUNILHlCQUF5QixFQUFFLEdBQUc7SUFDOUIsNkJBQTZCLEVBQUUsRUFBRTtJQUNqQyx1QkFBdUIsRUFBRSxFQUFFO0lBQzNCLDJCQUEyQixFQUFFLEVBQUU7SUFDL0IsUUFBUSxFQUFFLEVBQUU7SUFDWixrQkFBa0IsRUFBRSxFQUFFO0lBQ3RCLFFBQVEsRUFBRSxFQUFFO0lBQ1osYUFBYSxFQUFFLEVBQUU7SUFDakIsb0JBQW9CLEVBQUUsRUFBRTtJQUN4QixhQUFhLEVBQUUsRUFBRTtJQUNqQixXQUFXLEVBQUU7RUFDZjtBQUNGLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0EsU0FBU0MsZ0JBQWdCQSxDQUFDM0UsUUFBb0IsRUFBRTRFLE9BQWUsRUFBVTtFQUN2RSxNQUFNQyxVQUFVLEdBQUdSLGdCQUFnQixDQUFDckUsUUFBUSxDQUFDO0VBQzdDLElBQUksQ0FBQzZFLFVBQVUsRUFBRSxPQUFPLENBQUM7O0VBRXpCO0VBQ0EsSUFBSUEsVUFBVSxDQUFDRCxPQUFPLENBQUMsS0FBS0UsU0FBUyxFQUFFO0lBQ3JDLE9BQU9ELFVBQVUsQ0FBQ0QsT0FBTyxDQUFDO0VBQzVCOztFQUVBO0VBQ0EsS0FBSyxNQUFNLENBQUNHLE1BQU0sRUFBRUMsUUFBUSxDQUFDLElBQUlDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDTCxVQUFVLENBQUMsRUFBRTtJQUMzRCxJQUFJRCxPQUFPLENBQUMvRCxVQUFVLENBQUNrRSxNQUFNLENBQUMsRUFBRTtNQUM5QixPQUFPQyxRQUFRO0lBQ2pCO0VBQ0Y7RUFFQSxPQUFPLENBQUM7QUFDVjs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTRyxvQkFBb0JBLENBQUNuRixRQUFvQixFQUFFYixNQUFnQixFQUFZO0VBQ3JGLE9BQU8sQ0FBQyxHQUFHQSxNQUFNLENBQUMsQ0FBQ2lHLElBQUksQ0FBQyxDQUFDQyxDQUFDLEVBQUVDLENBQUMsS0FBSztJQUNoQyxNQUFNQyxTQUFTLEdBQUdaLGdCQUFnQixDQUFDM0UsUUFBUSxFQUFFcUYsQ0FBQyxDQUFDO0lBQy9DLE1BQU1HLFNBQVMsR0FBR2IsZ0JBQWdCLENBQUMzRSxRQUFRLEVBQUVzRixDQUFDLENBQUM7SUFDL0MsT0FBT0UsU0FBUyxHQUFHRCxTQUFTO0VBQzlCLENBQUMsQ0FBQztBQUNKOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVNFLFlBQVlBLENBQUN6RixRQUFvQixFQUFFYixNQUFnQixFQUFVO0VBQzNFLElBQUlBLE1BQU0sQ0FBQytDLE1BQU0sS0FBSyxDQUFDLEVBQUU7SUFDdkIsTUFBTXdELE1BQU0sR0FBR3hCLGdCQUFnQixDQUFDeUIsSUFBSSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hGLEVBQUUsS0FBS1osUUFBUSxDQUFDO0lBQzVELE9BQU8wRixNQUFNLEVBQUV2QixrQkFBa0IsSUFBSSxFQUFFO0VBQ3pDO0VBRUEsTUFBTTBCLE1BQU0sR0FBR1Ysb0JBQW9CLENBQUNuRixRQUFRLEVBQUViLE1BQU0sQ0FBQztFQUNyRCxPQUFPMEcsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJMUcsTUFBTSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUU7QUFDckM7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBUzJHLG9CQUFvQkEsQ0FBQ3BDLFVBQXNCLEVBQVc7RUFDcEUsTUFBTWdDLE1BQU0sR0FBR3hCLGdCQUFnQixDQUFDeUIsSUFBSSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hGLEVBQUUsS0FBSzhDLFVBQVUsQ0FBQztFQUM5RCxJQUFJLENBQUNnQyxNQUFNLEVBQUUsT0FBTyxLQUFLOztFQUV6QjtFQUNBLElBQUloQyxVQUFVLEtBQUssUUFBUSxFQUFFO0lBQzNCO0lBQ0E7SUFDQSxPQUFPLElBQUk7RUFDYjs7RUFFQTtFQUNBLElBQUluQixPQUFPLENBQUNDLEdBQUcsQ0FBQ2tELE1BQU0sQ0FBQzdDLE1BQU0sQ0FBQyxFQUFFO0lBQzlCLE9BQU8sSUFBSTtFQUNiOztFQUVBO0VBQ0EsSUFBSTZDLE1BQU0sQ0FBQ3RCLFVBQVUsRUFBRTtJQUNyQixLQUFLLE1BQU0yQixNQUFNLElBQUlMLE1BQU0sQ0FBQ3RCLFVBQVUsRUFBRTtNQUN0QyxJQUFJN0IsT0FBTyxDQUFDQyxHQUFHLENBQUN1RCxNQUFNLENBQUMsRUFBRTtRQUN2QixPQUFPLElBQUk7TUFDYjtJQUNGO0VBQ0Y7RUFFQSxPQUFPLEtBQUs7QUFDZDs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxrQkFBa0JBLENBQUEsRUFBbUI7RUFDbkQsT0FBTzlCLGdCQUFnQixDQUFDcEQsR0FBRyxDQUFDNEUsTUFBTSxJQUFJO0lBQ3BDLElBQUlPLFVBQVUsR0FBRyxLQUFLO0lBRXRCLElBQUlQLE1BQU0sQ0FBQzlFLEVBQUUsS0FBSyxRQUFRLEVBQUU7TUFDMUI7TUFDQTtNQUNBcUYsVUFBVSxHQUFHLENBQUMsQ0FBQzFELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7SUFDekQsQ0FBQyxNQUFNO01BQ0x5RCxVQUFVLEdBQUcsQ0FBQyxDQUFDMUQsT0FBTyxDQUFDQyxHQUFHLENBQUNrRCxNQUFNLENBQUM3QyxNQUFNLENBQUM7TUFDekMsSUFBSSxDQUFDb0QsVUFBVSxJQUFJUCxNQUFNLENBQUN0QixVQUFVLEVBQUU7UUFDcEM2QixVQUFVLEdBQUdQLE1BQU0sQ0FBQ3RCLFVBQVUsQ0FBQzhCLElBQUksQ0FBQ0MsQ0FBQyxJQUFJLENBQUMsQ0FBQzVELE9BQU8sQ0FBQ0MsR0FBRyxDQUFDMkQsQ0FBQyxDQUFDLENBQUM7TUFDNUQ7SUFDRjtJQUVBLE9BQU87TUFDTHZGLEVBQUUsRUFBRThFLE1BQU0sQ0FBQzlFLEVBQUU7TUFDYmlCLElBQUksRUFBRTZELE1BQU0sQ0FBQzdELElBQUk7TUFDakJnQixNQUFNLEVBQUU2QyxNQUFNLENBQUM3QyxNQUFNO01BQ3JCb0QsVUFBVTtNQUNWRyxXQUFXLEVBQUVWLE1BQU0sQ0FBQ3ZCO0lBQ3RCLENBQUM7RUFDSCxDQUFDLENBQUM7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTa0Msc0JBQXNCQSxDQUFBLEVBQW1CO0VBQ3ZELE9BQU9MLGtCQUFrQixDQUFDLENBQUMsQ0FBQ3RGLE1BQU0sQ0FBQ2tGLENBQUMsSUFBSUEsQ0FBQyxDQUFDSyxVQUFVLENBQUM7QUFDdkQ7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU0ssd0JBQXdCQSxDQUFBLEVBQW1CO0VBQ3pELE9BQU9OLGtCQUFrQixDQUFDLENBQUMsQ0FBQ3RGLE1BQU0sQ0FBQ2tGLENBQUMsSUFBSSxDQUFDQSxDQUFDLENBQUNLLFVBQVUsQ0FBQztBQUN4RDs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTTSx5QkFBeUJBLENBQUEsRUFBd0I7RUFDL0QsTUFBTU4sVUFBVSxHQUFHSSxzQkFBc0IsQ0FBQyxDQUFDOztFQUUzQztFQUNBLE1BQU1HLGVBQWUsR0FBRyxDQUFDLFdBQVcsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFVBQVUsRUFBRSxLQUFLLEVBQUUsUUFBUSxDQUFDO0VBRXRGLEtBQUssTUFBTTlDLFVBQVUsSUFBSThDLGVBQWUsRUFBRTtJQUN4QyxNQUFNeEcsUUFBUSxHQUFHaUcsVUFBVSxDQUFDTixJQUFJLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDaEYsRUFBRSxLQUFLOEMsVUFBVSxDQUFDO0lBQzFELElBQUkxRCxRQUFRLElBQUlBLFFBQVEsQ0FBQ1ksRUFBRSxLQUFLLFFBQVEsRUFBRTtNQUN4QyxPQUFPWixRQUFRO0lBQ2pCO0VBQ0Y7O0VBRUE7RUFDQSxPQUFPaUcsVUFBVSxDQUFDTixJQUFJLENBQUNDLENBQUMsSUFBSUEsQ0FBQyxDQUFDaEYsRUFBRSxLQUFLLFFBQVEsQ0FBQyxJQUFJLElBQUk7QUFDeEQ7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBUzZGLHlCQUF5QkEsQ0FBQy9DLFVBQXNCLEVBQVU7RUFDeEU7RUFDQSxNQUFNZ0QsTUFBTSxHQUFHbEkseUJBQXlCLENBQUMsQ0FBQztFQUMxQyxNQUFNbUksY0FBYyxHQUFHRCxNQUFNLENBQUNoRyxNQUFNLENBQUNrRyxDQUFDLElBQUlBLENBQUMsQ0FBQzVHLFFBQVEsS0FBSzBELFVBQVUsQ0FBQztFQUVwRSxJQUFJaUQsY0FBYyxDQUFDekUsTUFBTSxHQUFHLENBQUMsRUFBRTtJQUM3QixNQUFNMkUsUUFBUSxHQUFHRixjQUFjLENBQUM3RixHQUFHLENBQUM4RixDQUFDLElBQUlBLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQztJQUM5QyxPQUFPNkUsWUFBWSxDQUFDL0IsVUFBVSxFQUFFbUQsUUFBUSxDQUFDO0VBQzNDOztFQUVBO0VBQ0EsTUFBTW5CLE1BQU0sR0FBR3hCLGdCQUFnQixDQUFDeUIsSUFBSSxDQUFDQyxDQUFDLElBQUlBLENBQUMsQ0FBQ2hGLEVBQUUsS0FBSzhDLFVBQVUsQ0FBQztFQUM5RCxPQUFPZ0MsTUFBTSxFQUFFdkIsa0JBQWtCLElBQUksRUFBRTtBQUN6Qzs7QUFFQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQTtBQUNBO0FBQ0EsZUFBZTJDLHdCQUF3QkEsQ0FDckNwRCxVQUFzQixFQUN0QjNELE1BQWMsRUFDZGdILFNBQWlCLEdBQUcsSUFBSSxFQUNMO0VBQ25CLElBQUk7SUFDRixRQUFRckQsVUFBVTtNQUNoQixLQUFLLFFBQVE7UUFBRTtVQUNiLE1BQU16RCxRQUFRLEdBQUcsTUFBTUMsS0FBSyxDQUFDLGtDQUFrQyxFQUFFO1lBQy9EQyxPQUFPLEVBQUU7Y0FBRSxlQUFlLEVBQUUsVUFBVUosTUFBTTtZQUFHLENBQUM7WUFDaEQyQixNQUFNLEVBQUVDLFdBQVcsQ0FBQ0MsT0FBTyxDQUFDbUYsU0FBUztVQUN2QyxDQUFDLENBQUM7VUFDRixJQUFJLENBQUM5RyxRQUFRLENBQUNHLEVBQUUsRUFBRSxPQUFPLEVBQUU7VUFDM0IsTUFBTUksSUFBSSxHQUFHLE1BQU1QLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQW9DO1VBQ3JFLE9BQU9ELElBQUksQ0FBQ0EsSUFBSSxDQUNiRSxNQUFNLENBQUNrRyxDQUFDLElBQ1BBLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLE1BQU0sQ0FBQyxJQUN2QitGLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUNyQitGLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUNyQitGLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQ0MsVUFBVSxDQUFDLFFBQVEsQ0FDMUIsQ0FBQyxDQUNBQyxHQUFHLENBQUM4RixDQUFDLElBQUlBLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQztRQUNuQjtNQUVBLEtBQUssV0FBVztRQUFFO1VBQ2hCLE1BQU1YLFFBQVEsR0FBRyxNQUFNQyxLQUFLLENBQUMscUNBQXFDLEVBQUU7WUFDbEVDLE9BQU8sRUFBRTtjQUNQLFdBQVcsRUFBRUosTUFBTTtjQUNuQixtQkFBbUIsRUFBRTtZQUN2QixDQUFDO1lBQ0QyQixNQUFNLEVBQUVDLFdBQVcsQ0FBQ0MsT0FBTyxDQUFDbUYsU0FBUztVQUN2QyxDQUFDLENBQUM7VUFDRixJQUFJLENBQUM5RyxRQUFRLENBQUNHLEVBQUUsRUFBRSxPQUFPLEVBQUU7VUFDM0IsTUFBTUksSUFBSSxHQUFHLE1BQU1QLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQWtEO1VBQ25GLE9BQU9ELElBQUksQ0FBQ0EsSUFBSSxDQUFDRSxNQUFNLENBQUNrRyxDQUFDLElBQUlBLENBQUMsQ0FBQ3RGLElBQUksS0FBSyxPQUFPLENBQUMsQ0FBQ1IsR0FBRyxDQUFDOEYsQ0FBQyxJQUFJQSxDQUFDLENBQUNoRyxFQUFFLENBQUM7UUFDakU7TUFFQSxLQUFLLFFBQVE7UUFBRTtVQUNiO1VBQ0EsTUFBTVgsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyx5REFBeUQsRUFBRTtZQUN0RkMsT0FBTyxFQUFFO2NBQ1AsZ0JBQWdCLEVBQUVKO1lBQ3BCLENBQUM7WUFDRDJCLE1BQU0sRUFBRUMsV0FBVyxDQUFDQyxPQUFPLENBQUNtRixTQUFTO1VBQ3ZDLENBQUMsQ0FBQztVQUNGLElBQUksQ0FBQzlHLFFBQVEsQ0FBQ0csRUFBRSxFQUFFLE9BQU8sRUFBRTtVQUMzQixNQUFNSSxJQUFJLEdBQUcsTUFBTVAsUUFBUSxDQUFDUSxJQUFJLENBQUMsQ0FFaEM7VUFDRCxPQUFPRCxJQUFJLENBQUNyQixNQUFNLENBQ2Z1QixNQUFNLENBQUNrRyxDQUFDLElBQUlBLENBQUMsQ0FBQy9FLElBQUksQ0FBQ0MsUUFBUSxDQUFDLFFBQVEsQ0FBQyxJQUFJOEUsQ0FBQyxDQUFDN0UsMEJBQTBCLEVBQUVELFFBQVEsQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDLENBQ25HaEIsR0FBRyxDQUFDOEYsQ0FBQyxJQUFJQSxDQUFDLENBQUMvRSxJQUFJLENBQUNHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsRUFBRSxDQUFDLENBQUM7UUFDNUM7TUFFQSxLQUFLLFVBQVU7UUFBRTtVQUNmLE1BQU0vQixRQUFRLEdBQUcsTUFBTUMsS0FBSyxDQUFDLG9DQUFvQyxFQUFFO1lBQ2pFQyxPQUFPLEVBQUU7Y0FBRSxlQUFlLEVBQUUsVUFBVUosTUFBTTtZQUFHLENBQUM7WUFDaEQyQixNQUFNLEVBQUVDLFdBQVcsQ0FBQ0MsT0FBTyxDQUFDbUYsU0FBUztVQUN2QyxDQUFDLENBQUM7VUFDRixJQUFJLENBQUM5RyxRQUFRLENBQUNHLEVBQUUsRUFBRSxPQUFPLEVBQUU7VUFDM0IsTUFBTUksSUFBSSxHQUFHLE1BQU1QLFFBQVEsQ0FBQ1EsSUFBSSxDQUFDLENBQW9DO1VBQ3JFLE9BQU9ELElBQUksQ0FBQ0EsSUFBSSxDQUFDTSxHQUFHLENBQUM4RixDQUFDLElBQUlBLENBQUMsQ0FBQ2hHLEVBQUUsQ0FBQztRQUNqQztNQUVBLEtBQUssS0FBSztRQUFFO1VBQ1YsTUFBTVgsUUFBUSxHQUFHLE1BQU1DLEtBQUssQ0FBQyw0QkFBNEIsRUFBRTtZQUN6REMsT0FBTyxFQUFFO2NBQUUsZUFBZSxFQUFFLFVBQVVKLE1BQU07WUFBRyxDQUFDO1lBQ2hEMkIsTUFBTSxFQUFFQyxXQUFXLENBQUNDLE9BQU8sQ0FBQ21GLFNBQVM7VUFDdkMsQ0FBQyxDQUFDO1VBQ0YsSUFBSSxDQUFDOUcsUUFBUSxDQUFDRyxFQUFFLEVBQUUsT0FBTyxFQUFFO1VBQzNCLE1BQU1JLElBQUksR0FBRyxNQUFNUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUFvQztVQUNyRSxPQUFPRCxJQUFJLENBQUNBLElBQUksQ0FBQ00sR0FBRyxDQUFDOEYsQ0FBQyxJQUFJQSxDQUFDLENBQUNoRyxFQUFFLENBQUM7UUFDakM7TUFFQTtRQUNFLE9BQU8sRUFBRTtJQUNiO0VBQ0YsQ0FBQyxDQUFDLE1BQU07SUFDTixPQUFPLEVBQUU7RUFDWDtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sZUFBZW9HLG1CQUFtQkEsQ0FBQSxFQUFtQztFQUMxRSxNQUFNQyxNQUFzQyxHQUFHLEVBQUU7RUFFakQsS0FBSyxNQUFNdkIsTUFBTSxJQUFJeEIsZ0JBQWdCLEVBQUU7SUFDckM7SUFDQSxJQUFJd0IsTUFBTSxDQUFDOUUsRUFBRSxLQUFLLFFBQVEsRUFBRTtNQUMxQnFHLE1BQU0sQ0FBQ2hFLElBQUksQ0FBQyxDQUFDLFlBQTBDO1FBQ3JELElBQUk7VUFDRixNQUFNWCxPQUFPLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGlCQUFpQixDQUFDLElBQUksd0JBQXdCO1VBQzFFLE1BQU12QyxRQUFRLEdBQUcsTUFBTUMsS0FBSyxDQUFDLEdBQUdvQyxPQUFPLFdBQVcsRUFBRTtZQUNsRFosTUFBTSxFQUFFQyxXQUFXLENBQUNDLE9BQU8sQ0FBQyxJQUFJO1VBQ2xDLENBQUMsQ0FBQztVQUNGLElBQUkzQixRQUFRLENBQUNHLEVBQUUsRUFBRTtZQUNmLE1BQU1JLElBQUksR0FBRyxNQUFNUCxRQUFRLENBQUNRLElBQUksQ0FBQyxDQUF5QztZQUMxRSxNQUFNdEIsTUFBTSxHQUFHcUIsSUFBSSxDQUFDckIsTUFBTSxFQUFFMkIsR0FBRyxDQUFDOEYsQ0FBQyxJQUFJQSxDQUFDLENBQUMvRSxJQUFJLENBQUMsSUFBSSxFQUFFO1lBQ2xELE9BQU87Y0FDTDdCLFFBQVEsRUFBRSxRQUFRO2NBQ2xCa0gsU0FBUyxFQUFFL0gsTUFBTSxDQUFDK0MsTUFBTSxHQUFHLENBQUM7Y0FDNUJrRSxXQUFXLEVBQUVqSCxNQUFNLENBQUMsQ0FBQyxDQUFDLElBQUl1RyxNQUFNLENBQUN2QjtZQUNuQyxDQUFDO1VBQ0g7UUFDRixDQUFDLENBQUMsTUFBTSxDQUFFO1FBQ1YsT0FBTztVQUNMbkUsUUFBUSxFQUFFLFFBQVE7VUFDbEJrSCxTQUFTLEVBQUUsS0FBSztVQUNoQmQsV0FBVyxFQUFFVixNQUFNLENBQUN2QixrQkFBa0I7VUFDdEMvRSxLQUFLLEVBQUU7UUFDVCxDQUFDO01BQ0gsQ0FBQyxFQUFFLENBQUMsQ0FBQztNQUNMO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJVyxNQUFNLEdBQUd3QyxPQUFPLENBQUNDLEdBQUcsQ0FBQ2tELE1BQU0sQ0FBQzdDLE1BQU0sQ0FBQztJQUN2QyxJQUFJLENBQUM5QyxNQUFNLElBQUkyRixNQUFNLENBQUN0QixVQUFVLEVBQUU7TUFDaEMsS0FBSyxNQUFNMkIsTUFBTSxJQUFJTCxNQUFNLENBQUN0QixVQUFVLEVBQUU7UUFDdEMsSUFBSTdCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDdUQsTUFBTSxDQUFDLEVBQUU7VUFDdkJoRyxNQUFNLEdBQUd3QyxPQUFPLENBQUNDLEdBQUcsQ0FBQ3VELE1BQU0sQ0FBQztVQUM1QjtRQUNGO01BQ0Y7SUFDRjtJQUVBLElBQUksQ0FBQ2hHLE1BQU0sRUFBRTtNQUNYa0gsTUFBTSxDQUFDaEUsSUFBSSxDQUFDRyxPQUFPLENBQUMrRCxPQUFPLENBQUM7UUFDMUJuSCxRQUFRLEVBQUUwRixNQUFNLENBQUM5RSxFQUFFO1FBQ25Cc0csU0FBUyxFQUFFLEtBQUs7UUFDaEJkLFdBQVcsRUFBRVYsTUFBTSxDQUFDdkIsa0JBQWtCO1FBQ3RDL0UsS0FBSyxFQUFFLEdBQUdzRyxNQUFNLENBQUM3QyxNQUFNO01BQ3pCLENBQUMsQ0FBQyxDQUFDO01BQ0g7SUFDRjs7SUFFQTtJQUNBb0UsTUFBTSxDQUFDaEUsSUFBSSxDQUFDLENBQUMsWUFBMEM7TUFDckQsTUFBTTlELE1BQU0sR0FBRyxNQUFNMkgsd0JBQXdCLENBQUNwQixNQUFNLENBQUM5RSxFQUFFLEVBQUViLE1BQU0sRUFBRSxJQUFJLENBQUM7TUFDdEUsSUFBSVosTUFBTSxDQUFDK0MsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUNyQixNQUFNa0YsU0FBUyxHQUFHM0IsWUFBWSxDQUFDQyxNQUFNLENBQUM5RSxFQUFFLEVBQUV6QixNQUFNLENBQUM7UUFDakQsT0FBTztVQUNMYSxRQUFRLEVBQUUwRixNQUFNLENBQUM5RSxFQUFFO1VBQ25Cc0csU0FBUyxFQUFFLElBQUk7VUFDZmQsV0FBVyxFQUFFZ0I7UUFDZixDQUFDO01BQ0g7TUFDQTtNQUNBLE9BQU87UUFDTHBILFFBQVEsRUFBRTBGLE1BQU0sQ0FBQzlFLEVBQUU7UUFDbkJzRyxTQUFTLEVBQUUsSUFBSTtRQUNmZCxXQUFXLEVBQUVWLE1BQU0sQ0FBQ3ZCLGtCQUFrQjtRQUN0Qy9FLEtBQUssRUFBRTtNQUNULENBQUM7SUFDSCxDQUFDLEVBQUUsQ0FBQyxDQUFDO0VBQ1A7O0VBRUE7RUFDQSxPQUFPZ0UsT0FBTyxDQUFDaUUsR0FBRyxDQUFDSixNQUFNLENBQUM7QUFDNUIiLCJpZ25vcmVMaXN0IjpbXX0=