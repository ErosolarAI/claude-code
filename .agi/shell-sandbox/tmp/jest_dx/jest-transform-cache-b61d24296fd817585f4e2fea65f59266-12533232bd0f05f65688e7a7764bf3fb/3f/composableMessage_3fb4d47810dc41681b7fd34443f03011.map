{"version":3,"names":["cov_2efqikszjm","actualCoverage","theme","PASTE_LIMITS","s","WARN_CHARS","WARN_LINES","MAX_CHARS","MAX_LINES","ComposableMessageBuilder","parts","currentDraft","idCounter","history","historyIndex","maxHistorySize","constructor","f","saveHistory","length","b","slice","push","map","p","shift","undo","redo","canUndo","canRedo","checkPasteSize","content","chars","lines","split","ok","error","toFixed","warnings","warning","join","undefined","getState","isEmpty","trim","hasContent","getPartCount","setDraft","text","getDraft","commitDraft","trimmed","type","id","generateId","timestamp","Date","now","addPaste","sizeCheck","lineCount","summary","generateSummary","edited","addPasteUnchecked","editPaste","newContent","part","find","removePart","index","findIndex","splice","getPart","assemble","draftTrimmed","clear","formatForDisplay","header","ui","muted","indexOf","preview","secondary","formatSummary","partCount","hasDraft","Boolean","pasteCount","filter","formatPasteChips","pasteBlocks","block","formatPasteChip","firstLine","charCount","typeIcon","typeLabel","match","sizeStr","getPasteBlockCount","l","maxLength"],"sources":["composableMessage.ts"],"sourcesContent":["/**\n * ComposableMessage - Data structure for building messages from multiple parts\n *\n * Handles multi-line pastes by storing them as editable blocks that can be:\n * - Displayed as summaries\n * - Edited individually\n * - Assembled into a final message when sent\n *\n * Architecture:\n * - MessagePart: Union type for text or paste blocks\n * - ComposableMessageBuilder: Manages parts and provides editing/assembly\n * - UI helpers: Format blocks for display with summaries\n */\n\nimport { theme } from '../ui/theme.js';\n\nexport type MessagePartType = 'text' | 'paste';\n\nexport interface TextPart {\n  type: 'text';\n  id: string;\n  content: string;\n  timestamp: number;\n}\n\nexport interface PastePart {\n  type: 'paste';\n  id: string;\n  content: string;\n  lineCount: number;\n  timestamp: number;\n  summary: string; // First line or truncated preview\n  edited: boolean;\n}\n\nexport type MessagePart = TextPart | PastePart;\n\nexport interface ComposableMessageState {\n  parts: MessagePart[];\n  currentDraft: string; // Current input line being typed\n}\n\n/**\n * Paste size warning thresholds\n */\nexport const PASTE_LIMITS = {\n  WARN_CHARS: 10000,    // Warn when paste exceeds 10KB\n  WARN_LINES: 100,      // Warn when paste exceeds 100 lines\n  MAX_CHARS: 500000,    // Hard limit at 500KB\n  MAX_LINES: 5000,      // Hard limit at 5000 lines\n} as const;\n\n/**\n * Paste size check result\n */\nexport interface PasteSizeCheck {\n  ok: boolean;\n  warning?: string;\n  error?: string;\n  chars: number;\n  lines: number;\n}\n\n/**\n * Builds messages from composable parts (text + paste blocks)\n * Allows editing blocks before final assembly\n *\n * Features:\n * - Undo/redo support for paste operations\n * - Size warnings for large pastes\n * - Inline editing of paste blocks\n */\nexport class ComposableMessageBuilder {\n  private parts: MessagePart[] = [];\n  private currentDraft: string = '';\n  private idCounter: number = 0;\n\n  // History for undo/redo\n  private history: MessagePart[][] = [];\n  private historyIndex: number = -1;\n  private maxHistorySize: number = 20;\n\n  constructor() {\n    this.saveHistory();\n  }\n\n  /**\n   * Save current state to history\n   */\n  private saveHistory(): void {\n    // Remove any redo states\n    if (this.historyIndex < this.history.length - 1) {\n      this.history = this.history.slice(0, this.historyIndex + 1);\n    }\n\n    // Save current state\n    this.history.push(this.parts.map(p => ({ ...p })));\n    this.historyIndex = this.history.length - 1;\n\n    // Limit history size\n    if (this.history.length > this.maxHistorySize) {\n      this.history.shift();\n      this.historyIndex--;\n    }\n  }\n\n  /**\n   * Undo last operation\n   */\n  undo(): boolean {\n    if (this.historyIndex <= 0) {\n      return false;\n    }\n\n    this.historyIndex--;\n    this.parts = this.history[this.historyIndex]!.map(p => ({ ...p }));\n    return true;\n  }\n\n  /**\n   * Redo last undone operation\n   */\n  redo(): boolean {\n    if (this.historyIndex >= this.history.length - 1) {\n      return false;\n    }\n\n    this.historyIndex++;\n    this.parts = this.history[this.historyIndex]!.map(p => ({ ...p }));\n    return true;\n  }\n\n  /**\n   * Check if undo is available\n   */\n  canUndo(): boolean {\n    return this.historyIndex > 0;\n  }\n\n  /**\n   * Check if redo is available\n   */\n  canRedo(): boolean {\n    return this.historyIndex < this.history.length - 1;\n  }\n\n  /**\n   * Check paste size and return warnings/errors\n   */\n  static checkPasteSize(content: string): PasteSizeCheck {\n    const chars = content.length;\n    const lines = content.split('\\n').length;\n\n    // Hard limits\n    if (chars > PASTE_LIMITS.MAX_CHARS) {\n      return {\n        ok: false,\n        error: `Paste too large: ${(chars / 1000).toFixed(1)}KB exceeds ${(PASTE_LIMITS.MAX_CHARS / 1000)}KB limit`,\n        chars,\n        lines,\n      };\n    }\n\n    if (lines > PASTE_LIMITS.MAX_LINES) {\n      return {\n        ok: false,\n        error: `Paste too long: ${lines} lines exceeds ${PASTE_LIMITS.MAX_LINES} line limit`,\n        chars,\n        lines,\n      };\n    }\n\n    // Warnings\n    const warnings: string[] = [];\n    if (chars > PASTE_LIMITS.WARN_CHARS) {\n      warnings.push(`Large paste: ${(chars / 1000).toFixed(1)}KB`);\n    }\n    if (lines > PASTE_LIMITS.WARN_LINES) {\n      warnings.push(`${lines} lines`);\n    }\n\n    return {\n      ok: true,\n      warning: warnings.length > 0 ? warnings.join(', ') : undefined,\n      chars,\n      lines,\n    };\n  }\n\n  /**\n   * Get current state\n   */\n  getState(): ComposableMessageState {\n    return {\n      parts: [...this.parts],\n      currentDraft: this.currentDraft,\n    };\n  }\n\n  /**\n   * Check if message is empty\n   */\n  isEmpty(): boolean {\n    return this.parts.length === 0 && !this.currentDraft.trim();\n  }\n\n  /**\n   * Check if message has content\n   */\n  hasContent(): boolean {\n    return !this.isEmpty();\n  }\n\n  /**\n   * Get number of parts\n   */\n  getPartCount(): number {\n    return this.parts.length;\n  }\n\n  /**\n   * Set current draft text\n   */\n  setDraft(text: string): void {\n    this.currentDraft = text;\n  }\n\n  /**\n   * Get current draft\n   */\n  getDraft(): string {\n    return this.currentDraft;\n  }\n\n  /**\n   * Add a text part from current draft\n   */\n  commitDraft(): void {\n    const trimmed = this.currentDraft.trim();\n    if (!trimmed) {\n      return;\n    }\n\n    this.parts.push({\n      type: 'text',\n      id: this.generateId(),\n      content: trimmed,\n      timestamp: Date.now(),\n    });\n\n    this.currentDraft = '';\n  }\n\n  /**\n   * Add a paste block\n   * @returns Paste ID, or null if paste was rejected due to size limits\n   */\n  addPaste(content: string): string | null {\n    // Check paste size\n    const sizeCheck = ComposableMessageBuilder.checkPasteSize(content);\n    if (!sizeCheck.ok) {\n      // Paste rejected - return null, caller should show error\n      return null;\n    }\n\n    const lines = content.split('\\n');\n    const lineCount = lines.length;\n    const summary = this.generateSummary(content, lineCount);\n    const id = this.generateId();\n\n    this.parts.push({\n      type: 'paste',\n      id,\n      content,\n      lineCount,\n      summary,\n      timestamp: Date.now(),\n      edited: false,\n    });\n\n    // Save to history for undo\n    this.saveHistory();\n\n    return id;\n  }\n\n  /**\n   * Add a paste block without size check (for internal use)\n   */\n  addPasteUnchecked(content: string): string {\n    const lines = content.split('\\n');\n    const lineCount = lines.length;\n    const summary = this.generateSummary(content, lineCount);\n    const id = this.generateId();\n\n    this.parts.push({\n      type: 'paste',\n      id,\n      content,\n      lineCount,\n      summary,\n      timestamp: Date.now(),\n      edited: false,\n    });\n\n    this.saveHistory();\n    return id;\n  }\n\n  /**\n   * Edit a paste block by ID\n   */\n  editPaste(id: string, newContent: string): boolean {\n    const part = this.parts.find((p) => p.id === id && p.type === 'paste') as PastePart | undefined;\n    if (!part) {\n      return false;\n    }\n\n    const lines = newContent.split('\\n');\n    part.content = newContent;\n    part.lineCount = lines.length;\n    part.summary = this.generateSummary(newContent, lines.length);\n    part.edited = true;\n\n    // Save to history for undo\n    this.saveHistory();\n\n    return true;\n  }\n\n  /**\n   * Remove a part by ID\n   */\n  removePart(id: string): boolean {\n    const index = this.parts.findIndex((p) => p.id === id);\n    if (index === -1) {\n      return false;\n    }\n\n    this.parts.splice(index, 1);\n\n    // Save to history for undo\n    this.saveHistory();\n\n    return true;\n  }\n\n  /**\n   * Get a part by ID\n   */\n  getPart(id: string): MessagePart | null {\n    return this.parts.find((p) => p.id === id) ?? null;\n  }\n\n  /**\n   * Assemble final message from all parts\n   */\n  assemble(): string {\n    const parts: string[] = [];\n\n    // Add all committed parts\n    for (const part of this.parts) {\n      parts.push(part.content);\n    }\n\n    // Add current draft if non-empty\n    const draftTrimmed = this.currentDraft.trim();\n    if (draftTrimmed) {\n      parts.push(draftTrimmed);\n    }\n\n    return parts.join('\\n\\n').trim();\n  }\n\n  /**\n   * Clear all parts and draft\n   */\n  clear(): void {\n    if (this.parts.length > 0) {\n      // Save to history for undo before clearing\n      this.saveHistory();\n    }\n    this.parts = [];\n    this.currentDraft = '';\n  }\n\n  /**\n   * Format for display in chat\n   */\n  formatForDisplay(): string {\n    if (this.parts.length === 0) {\n      return this.currentDraft;\n    }\n\n    const lines: string[] = [];\n\n    for (const part of this.parts) {\n      if (part.type === 'text') {\n        lines.push(part.content);\n      } else if (part.type === 'paste') {\n        const header = theme.ui.muted(\n          `[Block ${this.parts.indexOf(part) + 1}: ${part.lineCount} lines${part.edited ? ', edited' : ''}]`\n        );\n        const preview = theme.secondary(\n          part.summary.length > 60 ? `${part.summary.slice(0, 57)  }...` : part.summary\n        );\n        lines.push(`${header}\\n${preview}`);\n      }\n    }\n\n    if (this.currentDraft.trim()) {\n      lines.push(this.currentDraft);\n    }\n\n    return lines.join('\\n\\n');\n  }\n\n  /**\n   * Format summary for status display\n   */\n  formatSummary(): string {\n    const partCount = this.parts.length;\n    const hasDraft = Boolean(this.currentDraft.trim());\n\n    if (partCount === 0 && hasDraft) {\n      return 'Current input';\n    }\n\n    if (partCount === 1 && !hasDraft) {\n      const part = this.parts[0]!;\n      return part.type === 'paste' ? `1 pasted block (${part.lineCount} lines)` : 'Text input';\n    }\n\n    const parts: string[] = [];\n    if (partCount > 0) {\n      const pasteCount = this.parts.filter((p) => p.type === 'paste').length;\n      if (pasteCount > 0) {\n        parts.push(`${pasteCount} block${pasteCount > 1 ? 's' : ''}`);\n      }\n    }\n    if (hasDraft) {\n      parts.push('text');\n    }\n\n    return parts.join(' + ');\n  }\n\n  /**\n   * Format paste blocks as inline chips for prompt display.\n   * Returns a string like: \"[üìù Code: 15L/2.3kc] [üìã Text: 50L/5kc]\"\n   * Returns empty string if no paste blocks exist.\n   */\n  formatPasteChips(): string {\n    const pasteBlocks = this.parts.filter((p): p is PastePart => p.type === 'paste');\n    if (pasteBlocks.length === 0) {\n      return '';\n    }\n\n    return pasteBlocks\n      .map((block) => this.formatPasteChip(block))\n      .join(' ');\n  }\n\n  /**\n   * Format a single paste chip with type detection\n   */\n  private formatPasteChip(block: PastePart): string {\n    const content = block.content;\n    const lines = content.split('\\n');\n    const firstLine = lines[0]?.trim() || '';\n    const charCount = content.length;\n\n    // Detect content type\n    let typeIcon = 'üìã';\n    let typeLabel = 'Pasted';\n\n    if (firstLine.match(/^(import|export|const|let|var|function|class|def |async |from |interface |type )/)) {\n      typeIcon = 'üìù';\n      typeLabel = 'Code';\n    } else if (firstLine.match(/^[{[\\]]/)) {\n      typeIcon = 'üìä';\n      typeLabel = 'JSON';\n    } else if (firstLine.match(/^<[!?]?[a-zA-Z]/)) {\n      typeIcon = 'üìÑ';\n      typeLabel = 'XML';\n    }\n\n    // Format size compactly\n    const sizeStr = charCount > 1000\n      ? `${(charCount / 1000).toFixed(1)}k`\n      : `${charCount}`;\n\n    return `[${typeIcon} ${typeLabel}: ${block.lineCount}L/${sizeStr}c]`;\n  }\n\n  /**\n   * Get count of paste blocks only\n   */\n  getPasteBlockCount(): number {\n    return this.parts.filter((p) => p.type === 'paste').length;\n  }\n\n  /**\n   * Generate a summary for a paste block\n   */\n  private generateSummary(content: string, lineCount: number): string {\n    const lines = content.split('\\n').map((l) => l.trim()).filter(Boolean);\n\n    if (lines.length === 0) {\n      return `[${lineCount} empty lines]`;\n    }\n\n    // Use first non-empty line as summary\n    const firstLine = lines[0] || '';\n    const maxLength = 80;\n\n    if (firstLine.length <= maxLength) {\n      return firstLine;\n    }\n\n    return `${firstLine.slice(0, maxLength - 3)  }...`;\n  }\n\n  /**\n   * Generate unique ID for parts\n   */\n  private generateId(): string {\n    this.idCounter += 1;\n    return `part-${this.idCounter}-${Date.now()}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}