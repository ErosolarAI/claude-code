{"version":3,"names":["cov_1c6by5y8oa","actualCoverage","FRONTMATTER_REGEX","s","parseFrontmatter","content","f","trim","startsWith","b","attributes","body","match","exec","rawFrontmatter","parseAttributes","raw","lines","split","result","line","trimmed","separatorIndex","indexOf","key","slice","value","parseAttributeValue","singleQuoted","doubleQuoted","endsWith","inner","splitList","includes","numeric","Number","isNaN","map","entry","filter","Boolean"],"sources":["frontmatter.ts"],"sourcesContent":["/**\n * Lightweight frontmatter parser that supports simple YAML-style key/value fields.\n * Designed for small agent/skill metadata files without pulling in extra dependencies.\n */\nexport interface ParsedFrontmatter<T extends Record<string, unknown>> {\n  attributes: Partial<T>;\n  body: string;\n}\n\nconst FRONTMATTER_REGEX = /^---\\s*\\n([\\s\\S]*?)\\n---\\s*\\n?([\\s\\S]*)$/;\n\nexport function parseFrontmatter<T extends Record<string, unknown>>(content: string): ParsedFrontmatter<T> {\n  if (!content.trim().startsWith('---')) {\n    return { attributes: {}, body: content };\n  }\n\n  const match = FRONTMATTER_REGEX.exec(content);\n  if (!match) {\n    return { attributes: {}, body: content };\n  }\n\n  const [, rawFrontmatter, body] = match;\n  const attributes = parseAttributes(rawFrontmatter ?? '');\n  return {\n    attributes: attributes as Partial<T>,\n    body: body ?? '',\n  };\n}\n\nfunction parseAttributes(raw: string): Record<string, unknown> {\n  const lines = raw.split('\\n');\n  const result: Record<string, unknown> = {};\n\n  for (const line of lines) {\n    const trimmed = line.trim();\n    if (!trimmed || trimmed.startsWith('#')) {\n      continue;\n    }\n\n    const separatorIndex = trimmed.indexOf(':');\n    if (separatorIndex === -1) {\n      continue;\n    }\n\n    const key = trimmed.slice(0, separatorIndex).trim();\n    const value = trimmed.slice(separatorIndex + 1).trim();\n    if (!key) {\n      continue;\n    }\n\n    result[key] = parseAttributeValue(value);\n  }\n\n  return result;\n}\n\nfunction parseAttributeValue(raw: string): unknown {\n  if (!raw) {\n    return '';\n  }\n\n  // Quoted strings\n  const singleQuoted = /^'(.*)'$/.exec(raw);\n  if (singleQuoted) {\n    return singleQuoted[1];\n  }\n  const doubleQuoted = /^\"(.*)\"$/.exec(raw);\n  if (doubleQuoted) {\n    return doubleQuoted[1];\n  }\n\n  // Boolean\n  if (raw === 'true') return true;\n  if (raw === 'false') return false;\n\n  // Array syntax: [a, b, c]\n  if (raw.startsWith('[') && raw.endsWith(']')) {\n    const inner = raw.slice(1, -1);\n    return splitList(inner);\n  }\n\n  // Comma-separated list: a, b, c\n  if (raw.includes(',')) {\n    return splitList(raw);\n  }\n\n  // Numeric\n  const numeric = Number(raw);\n  if (!Number.isNaN(numeric)) {\n    return numeric;\n  }\n\n  return raw;\n}\n\nfunction splitList(value: string): string[] {\n  return value\n    .split(',')\n    .map((entry) => entry.trim())\n    .filter(Boolean);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;;AAMA,MAAME,iBAAiB;AAAA;AAAA,CAAAF,cAAA,GAAAG,CAAA,OAAG,0CAA0C;AAEpE,OAAO,SAASC,gBAAgBA,CAAoCC,OAAe,EAAwB;EAAA;EAAAL,cAAA,GAAAM,CAAA;EAAAN,cAAA,GAAAG,CAAA;EACzG,IAAI,CAACE,OAAO,CAACE,IAAI,CAAC,CAAC,CAACC,UAAU,CAAC,KAAK,CAAC,EAAE;IAAA;IAAAR,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IACrC,OAAO;MAAEO,UAAU,EAAE,CAAC,CAAC;MAAEC,IAAI,EAAEN;IAAQ,CAAC;EAC1C,CAAC;EAAA;EAAA;IAAAL,cAAA,GAAAS,CAAA;EAAA;EAED,MAAMG,KAAK;EAAA;EAAA,CAAAZ,cAAA,GAAAG,CAAA,OAAGD,iBAAiB,CAACW,IAAI,CAACR,OAAO,CAAC;EAAC;EAAAL,cAAA,GAAAG,CAAA;EAC9C,IAAI,CAACS,KAAK,EAAE;IAAA;IAAAZ,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IACV,OAAO;MAAEO,UAAU,EAAE,CAAC,CAAC;MAAEC,IAAI,EAAEN;IAAQ,CAAC;EAC1C,CAAC;EAAA;EAAA;IAAAL,cAAA,GAAAS,CAAA;EAAA;EAED,MAAM,GAAGK,cAAc,EAAEH,IAAI,CAAC;EAAA;EAAA,CAAAX,cAAA,GAAAG,CAAA,OAAGS,KAAK;EACtC,MAAMF,UAAU;EAAA;EAAA,CAAAV,cAAA,GAAAG,CAAA,OAAGY,eAAe;EAAC;EAAA,CAAAf,cAAA,GAAAS,CAAA,UAAAK,cAAc;EAAA;EAAA,CAAAd,cAAA,GAAAS,CAAA,UAAI,EAAE,EAAC;EAAC;EAAAT,cAAA,GAAAG,CAAA;EACzD,OAAO;IACLO,UAAU,EAAEA,UAAwB;IACpCC,IAAI;IAAE;IAAA,CAAAX,cAAA,GAAAS,CAAA,UAAAE,IAAI;IAAA;IAAA,CAAAX,cAAA,GAAAS,CAAA,UAAI,EAAE;EAClB,CAAC;AACH;AAEA,SAASM,eAAeA,CAACC,GAAW,EAA2B;EAAA;EAAAhB,cAAA,GAAAM,CAAA;EAC7D,MAAMW,KAAK;EAAA;EAAA,CAAAjB,cAAA,GAAAG,CAAA,OAAGa,GAAG,CAACE,KAAK,CAAC,IAAI,CAAC;EAC7B,MAAMC,MAA+B;EAAA;EAAA,CAAAnB,cAAA,GAAAG,CAAA,QAAG,CAAC,CAAC;EAAC;EAAAH,cAAA,GAAAG,CAAA;EAE3C,KAAK,MAAMiB,IAAI,IAAIH,KAAK,EAAE;IACxB,MAAMI,OAAO;IAAA;IAAA,CAAArB,cAAA,GAAAG,CAAA,QAAGiB,IAAI,CAACb,IAAI,CAAC,CAAC;IAAC;IAAAP,cAAA,GAAAG,CAAA;IAC5B;IAAI;IAAA,CAAAH,cAAA,GAAAS,CAAA,WAACY,OAAO;IAAA;IAAA,CAAArB,cAAA,GAAAS,CAAA,UAAIY,OAAO,CAACb,UAAU,CAAC,GAAG,CAAC,GAAE;MAAA;MAAAR,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAG,CAAA;MACvC;IACF,CAAC;IAAA;IAAA;MAAAH,cAAA,GAAAS,CAAA;IAAA;IAED,MAAMa,cAAc;IAAA;IAAA,CAAAtB,cAAA,GAAAG,CAAA,QAAGkB,OAAO,CAACE,OAAO,CAAC,GAAG,CAAC;IAAC;IAAAvB,cAAA,GAAAG,CAAA;IAC5C,IAAImB,cAAc,KAAK,CAAC,CAAC,EAAE;MAAA;MAAAtB,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAG,CAAA;MACzB;IACF,CAAC;IAAA;IAAA;MAAAH,cAAA,GAAAS,CAAA;IAAA;IAED,MAAMe,GAAG;IAAA;IAAA,CAAAxB,cAAA,GAAAG,CAAA,QAAGkB,OAAO,CAACI,KAAK,CAAC,CAAC,EAAEH,cAAc,CAAC,CAACf,IAAI,CAAC,CAAC;IACnD,MAAMmB,KAAK;IAAA;IAAA,CAAA1B,cAAA,GAAAG,CAAA,QAAGkB,OAAO,CAACI,KAAK,CAACH,cAAc,GAAG,CAAC,CAAC,CAACf,IAAI,CAAC,CAAC;IAAC;IAAAP,cAAA,GAAAG,CAAA;IACvD,IAAI,CAACqB,GAAG,EAAE;MAAA;MAAAxB,cAAA,GAAAS,CAAA;MAAAT,cAAA,GAAAG,CAAA;MACR;IACF,CAAC;IAAA;IAAA;MAAAH,cAAA,GAAAS,CAAA;IAAA;IAAAT,cAAA,GAAAG,CAAA;IAEDgB,MAAM,CAACK,GAAG,CAAC,GAAGG,mBAAmB,CAACD,KAAK,CAAC;EAC1C;EAAC;EAAA1B,cAAA,GAAAG,CAAA;EAED,OAAOgB,MAAM;AACf;AAEA,SAASQ,mBAAmBA,CAACX,GAAW,EAAW;EAAA;EAAAhB,cAAA,GAAAM,CAAA;EAAAN,cAAA,GAAAG,CAAA;EACjD,IAAI,CAACa,GAAG,EAAE;IAAA;IAAAhB,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IACR,OAAO,EAAE;EACX,CAAC;EAAA;EAAA;IAAAH,cAAA,GAAAS,CAAA;EAAA;;EAED;EACA,MAAMmB,YAAY;EAAA;EAAA,CAAA5B,cAAA,GAAAG,CAAA,QAAG,UAAU,CAACU,IAAI,CAACG,GAAG,CAAC;EAAC;EAAAhB,cAAA,GAAAG,CAAA;EAC1C,IAAIyB,YAAY,EAAE;IAAA;IAAA5B,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IAChB,OAAOyB,YAAY,CAAC,CAAC,CAAC;EACxB,CAAC;EAAA;EAAA;IAAA5B,cAAA,GAAAS,CAAA;EAAA;EACD,MAAMoB,YAAY;EAAA;EAAA,CAAA7B,cAAA,GAAAG,CAAA,QAAG,UAAU,CAACU,IAAI,CAACG,GAAG,CAAC;EAAC;EAAAhB,cAAA,GAAAG,CAAA;EAC1C,IAAI0B,YAAY,EAAE;IAAA;IAAA7B,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IAChB,OAAO0B,YAAY,CAAC,CAAC,CAAC;EACxB,CAAC;EAAA;EAAA;IAAA7B,cAAA,GAAAS,CAAA;EAAA;;EAED;EAAAT,cAAA,GAAAG,CAAA;EACA,IAAIa,GAAG,KAAK,MAAM,EAAE;IAAA;IAAAhB,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IAAA,OAAO,IAAI;EAAA,CAAC;EAAA;EAAA;IAAAH,cAAA,GAAAS,CAAA;EAAA;EAAAT,cAAA,GAAAG,CAAA;EAChC,IAAIa,GAAG,KAAK,OAAO,EAAE;IAAA;IAAAhB,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IAAA,OAAO,KAAK;EAAA,CAAC;EAAA;EAAA;IAAAH,cAAA,GAAAS,CAAA;EAAA;;EAElC;EAAAT,cAAA,GAAAG,CAAA;EACA;EAAI;EAAA,CAAAH,cAAA,GAAAS,CAAA,WAAAO,GAAG,CAACR,UAAU,CAAC,GAAG,CAAC;EAAA;EAAA,CAAAR,cAAA,GAAAS,CAAA,WAAIO,GAAG,CAACc,QAAQ,CAAC,GAAG,CAAC,GAAE;IAAA;IAAA9B,cAAA,GAAAS,CAAA;IAC5C,MAAMsB,KAAK;IAAA;IAAA,CAAA/B,cAAA,GAAAG,CAAA,QAAGa,GAAG,CAACS,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;IAAC;IAAAzB,cAAA,GAAAG,CAAA;IAC/B,OAAO6B,SAAS,CAACD,KAAK,CAAC;EACzB,CAAC;EAAA;EAAA;IAAA/B,cAAA,GAAAS,CAAA;EAAA;;EAED;EAAAT,cAAA,GAAAG,CAAA;EACA,IAAIa,GAAG,CAACiB,QAAQ,CAAC,GAAG,CAAC,EAAE;IAAA;IAAAjC,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IACrB,OAAO6B,SAAS,CAAChB,GAAG,CAAC;EACvB,CAAC;EAAA;EAAA;IAAAhB,cAAA,GAAAS,CAAA;EAAA;;EAED;EACA,MAAMyB,OAAO;EAAA;EAAA,CAAAlC,cAAA,GAAAG,CAAA,QAAGgC,MAAM,CAACnB,GAAG,CAAC;EAAC;EAAAhB,cAAA,GAAAG,CAAA;EAC5B,IAAI,CAACgC,MAAM,CAACC,KAAK,CAACF,OAAO,CAAC,EAAE;IAAA;IAAAlC,cAAA,GAAAS,CAAA;IAAAT,cAAA,GAAAG,CAAA;IAC1B,OAAO+B,OAAO;EAChB,CAAC;EAAA;EAAA;IAAAlC,cAAA,GAAAS,CAAA;EAAA;EAAAT,cAAA,GAAAG,CAAA;EAED,OAAOa,GAAG;AACZ;AAEA,SAASgB,SAASA,CAACN,KAAa,EAAY;EAAA;EAAA1B,cAAA,GAAAM,CAAA;EAAAN,cAAA,GAAAG,CAAA;EAC1C,OAAOuB,KAAK,CACTR,KAAK,CAAC,GAAG,CAAC,CACVmB,GAAG,CAAEC,KAAK,IAAK;IAAA;IAAAtC,cAAA,GAAAM,CAAA;IAAAN,cAAA,GAAAG,CAAA;IAAA,OAAAmC,KAAK,CAAC/B,IAAI,CAAC,CAAC;EAAD,CAAC,CAAC,CAC5BgC,MAAM,CAACC,OAAO,CAAC;AACpB","ignoreList":[]}