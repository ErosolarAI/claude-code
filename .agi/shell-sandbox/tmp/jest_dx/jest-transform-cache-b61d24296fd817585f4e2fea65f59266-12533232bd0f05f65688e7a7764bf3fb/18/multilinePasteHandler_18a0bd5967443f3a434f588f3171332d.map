{"version":3,"names":["isMultilinePaste","text","lines","split","filter","line","trim","length","detectLanguage","patterns","javascript","typescript","python","json","html","css","sql","bash","yaml","lang","pattern","Object","entries","test","undefined","generatePasteSummary","nonEmptyLines","charCount","lineCount","language","preview","substring","summaryParts","push","toUpperCase","summary","join","isMultiline","formatPasteSummaryForDisplay","processPaste","displaySummary","fullContent","metadata"],"sources":["multilinePasteHandler.ts"],"sourcesContent":["/**\n * Handles multi-line paste detection and summarization\n * Provides graceful handling of large text blocks pasted into chat\n */\n\nexport interface PasteSummary {\n  isMultiline: boolean;\n  lineCount: number;\n  charCount: number;\n  preview: string;\n  language?: string;\n  summary: string;\n}\n\n/**\n * Detect if text is a multi-line paste (3+ lines)\n */\nexport function isMultilinePaste(text: string): boolean {\n  const lines = text.split('\\n').filter(line => line.trim().length > 0);\n  return lines.length >= 3;\n}\n\n/**\n * Detect likely programming language from content\n */\nfunction detectLanguage(text: string): string | undefined {\n  const patterns: Record<string, RegExp> = {\n    javascript: /\\b(const|let|var|function|async|await|import|export|=>)\\b/,\n    typescript: /\\b(interface|type|enum|namespace|declare|as const)\\b/,\n    python: /\\b(def|class|import|from|if __name__|async def)\\b/,\n    json: /^\\s*(?:\\{|\\[).*(?:\\}|\\])\\s*$/,\n    html: /^<[a-z]/i,\n    css: /^\\s*[.#[]?[\\w-]+\\s*{/,\n    sql: /\\b(SELECT|FROM|WHERE|INSERT|UPDATE|DELETE|CREATE|TABLE)\\b/i,\n    bash: /^#!/,\n    yaml: /^[\\w-]+:\\s*\\S/m,\n  };\n\n  for (const [lang, pattern] of Object.entries(patterns)) {\n    if (pattern.test(text)) {\n      return lang;\n    }\n  }\n\n  return undefined;\n}\n\n/**\n * Generate a concise summary of pasted content\n */\nexport function generatePasteSummary(text: string): PasteSummary {\n  const lines = text.split('\\n');\n  const nonEmptyLines = lines.filter(line => line.trim().length > 0);\n  const charCount = text.length;\n  const lineCount = nonEmptyLines.length;\n  const language = detectLanguage(text);\n\n  // Create preview: first 60 chars or first line\n  let preview = nonEmptyLines[0]?.substring(0, 60) || '';\n  if (preview.length === 60) {\n    preview += '...';\n  }\n\n  // Generate summary description\n  const summaryParts: string[] = [];\n\n  if (language) {\n    summaryParts.push(`${language.toUpperCase()}`);\n  }\n\n  summaryParts.push(`${lineCount} line${lineCount !== 1 ? 's' : ''}`);\n  summaryParts.push(`${charCount} char${charCount !== 1 ? 's' : ''}`);\n\n  const summary = `ðŸ“‹ Pasted: ${summaryParts.join(' â€¢ ')}`;\n\n  return {\n    isMultiline: true,\n    lineCount,\n    charCount,\n    preview,\n    language,\n    summary,\n  };\n}\n\n/**\n * Format a paste summary for display\n */\nexport function formatPasteSummaryForDisplay(summary: PasteSummary): string {\n  return `${summary.summary}\\n\"${summary.preview}\"`;\n}\n\n/**\n * Create a display-friendly version of multi-line content\n * Returns both the summary for display and the full content for sending\n */\nexport interface ProcessedPaste {\n  displaySummary: string;\n  fullContent: string;\n  metadata: PasteSummary;\n}\n\nexport function processPaste(text: string): ProcessedPaste {\n  const summary = generatePasteSummary(text);\n  const displaySummary = formatPasteSummaryForDisplay(summary);\n\n  return {\n    displaySummary,\n    fullContent: text,\n    metadata: summary,\n  };\n}\n"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;;AAWA;AACA;AACA;AACO,SAASA,gBAAgBA,CAACC,IAAY,EAAW;EACtD,MAAMC,KAAK,GAAGD,IAAI,CAACE,KAAK,CAAC,IAAI,CAAC,CAACC,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC,CAAC;EACrE,OAAOL,KAAK,CAACK,MAAM,IAAI,CAAC;AAC1B;;AAEA;AACA;AACA;AACA,SAASC,cAAcA,CAACP,IAAY,EAAsB;EACxD,MAAMQ,QAAgC,GAAG;IACvCC,UAAU,EAAE,2DAA2D;IACvEC,UAAU,EAAE,sDAAsD;IAClEC,MAAM,EAAE,mDAAmD;IAC3DC,IAAI,EAAE,8BAA8B;IACpCC,IAAI,EAAE,UAAU;IAChBC,GAAG,EAAE,sBAAsB;IAC3BC,GAAG,EAAE,4DAA4D;IACjEC,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE;EACR,CAAC;EAED,KAAK,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,IAAIC,MAAM,CAACC,OAAO,CAACb,QAAQ,CAAC,EAAE;IACtD,IAAIW,OAAO,CAACG,IAAI,CAACtB,IAAI,CAAC,EAAE;MACtB,OAAOkB,IAAI;IACb;EACF;EAEA,OAAOK,SAAS;AAClB;;AAEA;AACA;AACA;AACO,SAASC,oBAAoBA,CAACxB,IAAY,EAAgB;EAC/D,MAAMC,KAAK,GAAGD,IAAI,CAACE,KAAK,CAAC,IAAI,CAAC;EAC9B,MAAMuB,aAAa,GAAGxB,KAAK,CAACE,MAAM,CAACC,IAAI,IAAIA,IAAI,CAACC,IAAI,CAAC,CAAC,CAACC,MAAM,GAAG,CAAC,CAAC;EAClE,MAAMoB,SAAS,GAAG1B,IAAI,CAACM,MAAM;EAC7B,MAAMqB,SAAS,GAAGF,aAAa,CAACnB,MAAM;EACtC,MAAMsB,QAAQ,GAAGrB,cAAc,CAACP,IAAI,CAAC;;EAErC;EACA,IAAI6B,OAAO,GAAGJ,aAAa,CAAC,CAAC,CAAC,EAAEK,SAAS,CAAC,CAAC,EAAE,EAAE,CAAC,IAAI,EAAE;EACtD,IAAID,OAAO,CAACvB,MAAM,KAAK,EAAE,EAAE;IACzBuB,OAAO,IAAI,KAAK;EAClB;;EAEA;EACA,MAAME,YAAsB,GAAG,EAAE;EAEjC,IAAIH,QAAQ,EAAE;IACZG,YAAY,CAACC,IAAI,CAAC,GAAGJ,QAAQ,CAACK,WAAW,CAAC,CAAC,EAAE,CAAC;EAChD;EAEAF,YAAY,CAACC,IAAI,CAAC,GAAGL,SAAS,QAAQA,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,CAAC;EACnEI,YAAY,CAACC,IAAI,CAAC,GAAGN,SAAS,QAAQA,SAAS,KAAK,CAAC,GAAG,GAAG,GAAG,EAAE,EAAE,CAAC;EAEnE,MAAMQ,OAAO,GAAG,cAAcH,YAAY,CAACI,IAAI,CAAC,KAAK,CAAC,EAAE;EAExD,OAAO;IACLC,WAAW,EAAE,IAAI;IACjBT,SAAS;IACTD,SAAS;IACTG,OAAO;IACPD,QAAQ;IACRM;EACF,CAAC;AACH;;AAEA;AACA;AACA;AACO,SAASG,4BAA4BA,CAACH,OAAqB,EAAU;EAC1E,OAAO,GAAGA,OAAO,CAACA,OAAO,MAAMA,OAAO,CAACL,OAAO,GAAG;AACnD;;AAEA;AACA;AACA;AACA;;AAOO,SAASS,YAAYA,CAACtC,IAAY,EAAkB;EACzD,MAAMkC,OAAO,GAAGV,oBAAoB,CAACxB,IAAI,CAAC;EAC1C,MAAMuC,cAAc,GAAGF,4BAA4B,CAACH,OAAO,CAAC;EAE5D,OAAO;IACLK,cAAc;IACdC,WAAW,EAAExC,IAAI;IACjByC,QAAQ,EAAEP;EACZ,CAAC;AACH","ignoreList":[]}