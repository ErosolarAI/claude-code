{"version":3,"names":["cov_1vc3jch1rn","actualCoverage","registerToolPlugin","unregisterToolPlugin","listRegisteredToolPlugins","instantiateToolPlugins","registerDefaultNodeToolPlugins","loadedPlugins","s","Map","markPluginLoaded","plugin","f","set","id","getLoadedPlugin","get","listLoadedPlugins","Array","from","values","listAvailablePlugins","available","Set","BUILTIN_PLUGINS","add","keys","getAllPluginToolSuites","filter","p","enabled","loadPlugin","existing","b","includes","name","replace","c","toUpperCase","version","getPluginIdsFromFlags","flags","ids","forEach","flag","Object","entries"],"sources":["index.ts"],"sourcesContent":["/**\n * Plugin System - Root Index\n *\n * Aggregates all plugin functionality for easy import.\n *\n * Principal Investigator: Bo Shang\n * Framework: agi-cli\n */\n\n// Re-export tool plugin system\nexport {\n  registerToolPlugin,\n  unregisterToolPlugin,\n  listRegisteredToolPlugins,\n  instantiateToolPlugins,\n  type ToolPlugin,\n  type ToolPluginContext,\n  type ToolPluginTarget,\n} from './tools/index.js';\n\nexport { registerDefaultNodeToolPlugins } from './tools/nodeDefaults.js';\n\n// Plugin loading state and builtin list\nexport interface LoadedPlugin {\n  id: string;\n  name: string;\n  version: string;\n  enabled: boolean;\n}\n\n// Track loaded plugins\nconst loadedPlugins = new Map<string, LoadedPlugin>();\n\n/**\n * Register a plugin as loaded\n */\nexport function markPluginLoaded(plugin: LoadedPlugin): void {\n  loadedPlugins.set(plugin.id, plugin);\n}\n\n/**\n * Get a loaded plugin by ID\n */\nexport function getLoadedPlugin(id: string): LoadedPlugin | undefined {\n  return loadedPlugins.get(id);\n}\n\n/**\n * List all loaded plugins\n */\nexport function listLoadedPlugins(): LoadedPlugin[] {\n  return Array.from(loadedPlugins.values());\n}\n\n/**\n * List available plugins (combines loaded + builtin)\n */\nexport function listAvailablePlugins(): string[] {\n  const available = new Set<string>();\n  for (const id of BUILTIN_PLUGINS) {\n    available.add(id);\n  }\n  for (const id of loadedPlugins.keys()) {\n    available.add(id);\n  }\n  return Array.from(available);\n}\n\n/**\n * Get all plugin tool suites\n */\nexport function getAllPluginToolSuites(): LoadedPlugin[] {\n  return listLoadedPlugins().filter((p) => p.enabled);\n}\n\n/**\n * Load a plugin by ID\n */\nexport async function loadPlugin(id: string): Promise<LoadedPlugin | null> {\n  // Check if already loaded\n  const existing = loadedPlugins.get(id);\n  if (existing) {\n    return existing;\n  }\n\n  // Check if it's a builtin plugin\n  if (!BUILTIN_PLUGINS.includes(id as typeof BUILTIN_PLUGINS[number])) {\n    return null;\n  }\n\n  // Create a loaded plugin entry\n  const plugin: LoadedPlugin = {\n    id,\n    name: id.replace(/-/g, ' ').replace(/\\b\\w/g, (c) => c.toUpperCase()),\n    version: '1.0.0',\n    enabled: true,\n  };\n\n  loadedPlugins.set(id, plugin);\n  return plugin;\n}\n\n/**\n * Get plugin IDs from command line flags\n */\nexport function getPluginIdsFromFlags(flags: Record<string, boolean>): string[] {\n  const ids = new Set<string>();\n\n  // Convenience flags\n  if (flags['allPlugins']) {\n    BUILTIN_PLUGINS.forEach((id) => ids.add(id));\n  }\n  if (flags['coding']) {\n    ids.add('tool.enhanced-git');\n  }\n\n  for (const [flag, enabled] of Object.entries(flags)) {\n    if (enabled && BUILTIN_PLUGINS.includes(flag as typeof BUILTIN_PLUGINS[number])) {\n      ids.add(flag);\n    }\n  }\n\n  return Array.from(ids);\n}\n\n/**\n * Builtin plugin identifiers\n */\nexport const BUILTIN_PLUGINS = [\n  'tool.filesystem.local',\n  'tool.bash.local',\n  'tool.search.local',\n  'tool.edit',\n  'tool.enhanced-git',\n] as const;\n"],"mappings":"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","ignoreList":[]}