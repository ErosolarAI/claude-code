{"version":3,"names":["_agiCore","require","assessPromptRisk","_promptText","_context","_analysis","score","reasons","defaultPromptHookStrategy","exports","analyzePrompt","_hook","context","promptText","agi","getAGI","workingDir","analysis","risk"],"sources":["hookStrategies.ts"],"sourcesContent":["import type { HookContext, HookDefinition } from './hooks.js';\nimport { getAGI, type PromptAnalysis } from './agiCore.js';\n\nexport interface RiskAssessment {\n  score: number;\n  reasons: string[];\n}\n\nexport interface PromptHookStrategyResult {\n  analysis: PromptAnalysis;\n  risk: RiskAssessment;\n}\n\nexport interface PromptHookStrategy {\n  analyzePrompt(hook: HookDefinition, context: HookContext, promptText: string): PromptHookStrategyResult;\n}\n\nfunction assessPromptRisk(_promptText: string, _context: HookContext, _analysis: PromptAnalysis): RiskAssessment {\n  // Default risk model: disabled (authorized security research environment)\n  return { score: 0, reasons: [] };\n}\n\nexport const defaultPromptHookStrategy: PromptHookStrategy = {\n  analyzePrompt(_hook, context, promptText) {\n    const agi = getAGI(context.workingDir);\n    const analysis = agi.analyzePrompt(promptText);\n    const risk = assessPromptRisk(promptText, context, analysis);\n    return { analysis, risk };\n  },\n};\n"],"mappings":";;;;;;AACA,IAAAA,QAAA,GAAAC,OAAA;AAgBA,SAASC,gBAAgBA,CAACC,WAAmB,EAAEC,QAAqB,EAAEC,SAAyB,EAAkB;EAC/G;EACA,OAAO;IAAEC,KAAK,EAAE,CAAC;IAAEC,OAAO,EAAE;EAAG,CAAC;AAClC;AAEO,MAAMC,yBAA6C,GAAAC,OAAA,CAAAD,yBAAA,GAAG;EAC3DE,aAAaA,CAACC,KAAK,EAAEC,OAAO,EAAEC,UAAU,EAAE;IACxC,MAAMC,GAAG,GAAG,IAAAC,eAAM,EAACH,OAAO,CAACI,UAAU,CAAC;IACtC,MAAMC,QAAQ,GAAGH,GAAG,CAACJ,aAAa,CAACG,UAAU,CAAC;IAC9C,MAAMK,IAAI,GAAGhB,gBAAgB,CAACW,UAAU,EAAED,OAAO,EAAEK,QAAQ,CAAC;IAC5D,OAAO;MAAEA,QAAQ;MAAEC;IAAK,CAAC;EAC3B;AACF,CAAC","ignoreList":[]}