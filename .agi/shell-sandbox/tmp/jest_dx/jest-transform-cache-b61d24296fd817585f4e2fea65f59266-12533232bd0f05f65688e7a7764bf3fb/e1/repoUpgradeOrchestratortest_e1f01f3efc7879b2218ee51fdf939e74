51f93cf23ae17e5403d68a8cab4cfc31
"use strict";

var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
var _globals = require("@jest/globals");
var _repoUpgradeOrchestrator = require("../src/core/repoUpgradeOrchestrator.js");
const simpleModule = id => ({
  id,
  label: id,
  description: `Module ${id}`,
  scope: [`${id}/**/*`],
  steps: [{
    id: `${id}-analyze`,
    intent: 'analyze',
    description: 'analyze'
  }, {
    id: `${id}-upgrade`,
    intent: 'upgrade',
    description: 'upgrade'
  }, {
    id: `${id}-verify`,
    intent: 'verify',
    description: 'verify'
  }]
});
const makePlan = (...modules) => ({
  modules
});
(0, _globals.describe)('RepoUpgradeOrchestrator - modes', () => {
  (0, _globals.it)('runs primary only in single-continuous mode and records winning executions', async () => {
    const calls = [];
    const executor = _globals.jest.fn(async input => {
      calls.push(input);
      return {
        success: true,
        summary: `${input.step.id}-${input.variant}`,
        score: input.variant === 'primary' ? 0.4 : 0.9,
        execution: {
          success: true,
          output: 'ok',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('source'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      objective: 'upgrade'
    });
    (0, _globals.expect)(report.modules[0]?.steps.map(s => s.winnerVariant)).toEqual(['primary', 'primary', 'primary']);
    (0, _globals.expect)(calls.every(call => call.variant === 'primary')).toBe(true);
    (0, _globals.expect)(report.results).toHaveLength(plan.modules[0]?.steps.length ?? 0);
    (0, _globals.expect)(report.results.every(result => result.command?.endsWith('/primary'))).toBe(true);
  });
  (0, _globals.it)('prefers the refiner path in dual-rl-continuous mode when it scores higher', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.variant === 'primary') {
        return {
          success: true,
          summary: 'primary version',
          score: 0.2,
          rewardSignals: {
            executionSuccess: 1,
            testsPassed: 0.2
          },
          execution: {
            success: true,
            output: 'primary',
            duration: 1,
            command: `${input.module.id}/${input.step.id}/primary`
          }
        };
      }
      return {
        success: true,
        summary: 'refiner wins',
        score: 0.9,
        rewardSignals: {
          executionSuccess: 1,
          testsPassed: 0.9
        },
        execution: {
          success: true,
          output: 'refiner',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/refiner`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('src-only'));
    const report = await orchestrator.run(plan, {
      mode: 'dual-rl-continuous'
    });
    const step = report.modules[0]?.steps[0];
    (0, _globals.expect)(step?.winnerVariant).toBe('refiner');
    (0, _globals.expect)(report.results[0]?.command).toContain('/refiner');
    const expectedCalls = (plan.modules[0]?.steps.length ?? 0) * 2;
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(expectedCalls);
  });
  (0, _globals.it)('halts when continueOnFailure is false and marks remaining modules as skipped', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.module.id === 'first') {
        return {
          success: false,
          summary: 'failed primary',
          execution: {
            success: false,
            output: 'failed',
            duration: 0,
            command: `${input.module.id}/${input.step.id}/${input.variant}`,
            error: 'failed'
          }
        };
      }
      return {
        success: true,
        summary: 'should not run',
        execution: {
          success: true,
          output: 'ok',
          duration: 0,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('first'), simpleModule('second'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      continueOnFailure: false
    });
    (0, _globals.expect)(report.modules[0]?.status).toBe('failed');
    (0, _globals.expect)(report.modules[1]?.status).toBe('skipped');
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(1);
    (0, _globals.expect)(report.results[0]?.success).toBe(false);
  });
  (0, _globals.it)('uses refiner bias to break ties when both variants succeed', async () => {
    const executor = _globals.jest.fn(async input => ({
      success: true,
      summary: `${input.step.id}-${input.variant}`,
      score: 0.4,
      rewardSignals: {
        executionSuccess: 1,
        testsPassed: 0.4
      },
      execution: {
        success: true,
        output: input.variant,
        duration: 1,
        command: `${input.module.id}/${input.step.id}/${input.variant}`
      }
    }));
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('tie-breaker'));
    const report = await orchestrator.run(plan, {
      mode: 'dual-rl-continuous'
    });
    const step = report.modules[0]?.steps[0];
    (0, _globals.expect)(step?.winnerVariant).toBe('refiner');
    (0, _globals.expect)(executor).toHaveBeenCalledTimes((plan.modules[0]?.steps.length ?? 0) * 2);
  });
});
(0, _globals.describe)('buildRepoWidePlan', () => {
  (0, _globals.it)('returns a fallback module when no known scopes exist', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      (0, _globals.expect)(plan.modules).toHaveLength(1);
      (0, _globals.expect)(plan.modules[0]?.id).toBe('repo-wide');
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
  (0, _globals.it)('expands npm/yarn workspaces into dedicated modules', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      (0, _nodeFs.writeFileSync)((0, _nodePath.join)(dir, 'package.json'), JSON.stringify({
        name: 'workspace-test',
        workspaces: ['packages/*']
      }));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'packages', 'svc-a'), {
        recursive: true
      });
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      const ids = plan.modules.map(m => m.id);
      (0, _globals.expect)(ids.some(id => id.includes('workspace-packages-svc-a'))).toBe(true);
      const workspaceModule = plan.modules.find(m => m.id.includes('workspace-packages-svc-a'));
      (0, _globals.expect)(workspaceModule?.scope).toEqual(['packages/svc-a/**/*']);
      (0, _globals.expect)(workspaceModule?.validationCommands?.length).toBeGreaterThan(0);
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
  (0, _globals.it)('detects repo-specific scopes like skills/agents/examples and carries validation hints', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'src'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'skills'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'agents'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'examples'));
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      const moduleIds = plan.modules.map(m => m.id);
      (0, _globals.expect)(moduleIds).toEqual(_globals.expect.arrayContaining(['source', 'skills', 'agents', 'examples']));
      const skillsModule = plan.modules.find(m => m.id === 'skills');
      (0, _globals.expect)(skillsModule?.validationCommands?.length).toBeGreaterThan(0);
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9ub2RlUGF0aCIsIl9ub2RlT3MiLCJfZ2xvYmFscyIsIl9yZXBvVXBncmFkZU9yY2hlc3RyYXRvciIsInNpbXBsZU1vZHVsZSIsImlkIiwibGFiZWwiLCJkZXNjcmlwdGlvbiIsInNjb3BlIiwic3RlcHMiLCJpbnRlbnQiLCJtYWtlUGxhbiIsIm1vZHVsZXMiLCJkZXNjcmliZSIsIml0IiwiY2FsbHMiLCJleGVjdXRvciIsImplc3QiLCJmbiIsImlucHV0IiwicHVzaCIsInN1Y2Nlc3MiLCJzdW1tYXJ5Iiwic3RlcCIsInZhcmlhbnQiLCJzY29yZSIsImV4ZWN1dGlvbiIsIm91dHB1dCIsImR1cmF0aW9uIiwiY29tbWFuZCIsIm1vZHVsZSIsIm9yY2hlc3RyYXRvciIsIlJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yIiwicGxhbiIsInJlcG9ydCIsInJ1biIsIm1vZGUiLCJvYmplY3RpdmUiLCJleHBlY3QiLCJtYXAiLCJzIiwid2lubmVyVmFyaWFudCIsInRvRXF1YWwiLCJldmVyeSIsImNhbGwiLCJ0b0JlIiwicmVzdWx0cyIsInRvSGF2ZUxlbmd0aCIsImxlbmd0aCIsInJlc3VsdCIsImVuZHNXaXRoIiwicmV3YXJkU2lnbmFscyIsImV4ZWN1dGlvblN1Y2Nlc3MiLCJ0ZXN0c1Bhc3NlZCIsInRvQ29udGFpbiIsImV4cGVjdGVkQ2FsbHMiLCJ0b0hhdmVCZWVuQ2FsbGVkVGltZXMiLCJlcnJvciIsImNvbnRpbnVlT25GYWlsdXJlIiwic3RhdHVzIiwiZGlyIiwibWtkdGVtcFN5bmMiLCJqb2luIiwidG1wZGlyIiwiYnVpbGRSZXBvV2lkZVBsYW4iLCJybVN5bmMiLCJyZWN1cnNpdmUiLCJmb3JjZSIsIndyaXRlRmlsZVN5bmMiLCJKU09OIiwic3RyaW5naWZ5IiwibmFtZSIsIndvcmtzcGFjZXMiLCJta2RpclN5bmMiLCJpZHMiLCJtIiwic29tZSIsImluY2x1ZGVzIiwid29ya3NwYWNlTW9kdWxlIiwiZmluZCIsInZhbGlkYXRpb25Db21tYW5kcyIsInRvQmVHcmVhdGVyVGhhbiIsIm1vZHVsZUlkcyIsImFycmF5Q29udGFpbmluZyIsInNraWxsc01vZHVsZSJdLCJzb3VyY2VzIjpbInJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgbWtkdGVtcFN5bmMsIG1rZGlyU3luYywgcm1TeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IHRtcGRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IHsgZGVzY3JpYmUsIGV4cGVjdCwgaXQsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7XG4gIFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yLFxuICBidWlsZFJlcG9XaWRlUGxhbixcbiAgdHlwZSBSZXBvVXBncmFkZU1vZHVsZSxcbiAgdHlwZSBSZXBvVXBncmFkZVBsYW4sXG4gIHR5cGUgVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCxcbn0gZnJvbSAnLi4vc3JjL2NvcmUvcmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IuanMnO1xuXG5jb25zdCBzaW1wbGVNb2R1bGUgPSAoaWQ6IHN0cmluZyk6IFJlcG9VcGdyYWRlTW9kdWxlID0+ICh7XG4gIGlkLFxuICBsYWJlbDogaWQsXG4gIGRlc2NyaXB0aW9uOiBgTW9kdWxlICR7aWR9YCxcbiAgc2NvcGU6IFtgJHtpZH0vKiovKmBdLFxuICBzdGVwczogW1xuICAgIHsgaWQ6IGAke2lkfS1hbmFseXplYCwgaW50ZW50OiAnYW5hbHl6ZScsIGRlc2NyaXB0aW9uOiAnYW5hbHl6ZScgfSxcbiAgICB7IGlkOiBgJHtpZH0tdXBncmFkZWAsIGludGVudDogJ3VwZ3JhZGUnLCBkZXNjcmlwdGlvbjogJ3VwZ3JhZGUnIH0sXG4gICAgeyBpZDogYCR7aWR9LXZlcmlmeWAsIGludGVudDogJ3ZlcmlmeScsIGRlc2NyaXB0aW9uOiAndmVyaWZ5JyB9LFxuICBdLFxufSk7XG5cbmNvbnN0IG1ha2VQbGFuID0gKC4uLm1vZHVsZXM6IFJlcG9VcGdyYWRlTW9kdWxlW10pOiBSZXBvVXBncmFkZVBsYW4gPT4gKHsgbW9kdWxlcyB9KTtcblxuZGVzY3JpYmUoJ1JlcG9VcGdyYWRlT3JjaGVzdHJhdG9yIC0gbW9kZXMnLCAoKSA9PiB7XG4gIGl0KCdydW5zIHByaW1hcnkgb25seSBpbiBzaW5nbGUtY29udGludW91cyBtb2RlIGFuZCByZWNvcmRzIHdpbm5pbmcgZXhlY3V0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjYWxsczogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dFtdID0gW107XG4gICAgY29uc3QgZXhlY3V0b3IgPSBqZXN0LmZuKGFzeW5jIChpbnB1dDogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCkgPT4ge1xuICAgICAgY2FsbHMucHVzaChpbnB1dCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzdW1tYXJ5OiBgJHtpbnB1dC5zdGVwLmlkfS0ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgICAgc2NvcmU6IGlucHV0LnZhcmlhbnQgPT09ICdwcmltYXJ5JyA/IDAuNCA6IDAuOSxcbiAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBvdXRwdXQ6ICdvaycsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9LyR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG9yY2hlc3RyYXRvciA9IG5ldyBSZXBvVXBncmFkZU9yY2hlc3RyYXRvcihleGVjdXRvcik7XG4gICAgY29uc3QgcGxhbiA9IG1ha2VQbGFuKHNpbXBsZU1vZHVsZSgnc291cmNlJykpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnJ1bihwbGFuLCB7XG4gICAgICBtb2RlOiAnc2luZ2xlLWNvbnRpbnVvdXMnLFxuICAgICAgb2JqZWN0aXZlOiAndXBncmFkZScsXG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVwb3J0Lm1vZHVsZXNbMF0/LnN0ZXBzLm1hcCgocykgPT4gcy53aW5uZXJWYXJpYW50KSkudG9FcXVhbChbJ3ByaW1hcnknLCAncHJpbWFyeScsICdwcmltYXJ5J10pO1xuICAgIGV4cGVjdChjYWxscy5ldmVyeSgoY2FsbCkgPT4gY2FsbC52YXJpYW50ID09PSAncHJpbWFyeScpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0cykudG9IYXZlTGVuZ3RoKHBsYW4ubW9kdWxlc1swXT8uc3RlcHMubGVuZ3RoID8/IDApO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0cy5ldmVyeSgocmVzdWx0KSA9PiByZXN1bHQuY29tbWFuZD8uZW5kc1dpdGgoJy9wcmltYXJ5JykpKS50b0JlKHRydWUpO1xuICB9KTtcblxuICBpdCgncHJlZmVycyB0aGUgcmVmaW5lciBwYXRoIGluIGR1YWwtcmwtY29udGludW91cyBtb2RlIHdoZW4gaXQgc2NvcmVzIGhpZ2hlcicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBleGVjdXRvciA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0KSA9PiB7XG4gICAgICBpZiAoaW5wdXQudmFyaWFudCA9PT0gJ3ByaW1hcnknKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzdW1tYXJ5OiAncHJpbWFyeSB2ZXJzaW9uJyxcbiAgICAgICAgICBzY29yZTogMC4yLFxuICAgICAgICAgIHJld2FyZFNpZ25hbHM6IHsgZXhlY3V0aW9uU3VjY2VzczogMSwgdGVzdHNQYXNzZWQ6IDAuMiB9LFxuICAgICAgICAgIGV4ZWN1dGlvbjoge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG91dHB1dDogJ3ByaW1hcnknLFxuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vcHJpbWFyeWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHN1bW1hcnk6ICdyZWZpbmVyIHdpbnMnLFxuICAgICAgICBzY29yZTogMC45LFxuICAgICAgICByZXdhcmRTaWduYWxzOiB7IGV4ZWN1dGlvblN1Y2Nlc3M6IDEsIHRlc3RzUGFzc2VkOiAwLjkgfSxcbiAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBvdXRwdXQ6ICdyZWZpbmVyJyxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vcmVmaW5lcmAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3Qgb3JjaGVzdHJhdG9yID0gbmV3IFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yKGV4ZWN1dG9yKTtcbiAgICBjb25zdCBwbGFuID0gbWFrZVBsYW4oc2ltcGxlTW9kdWxlKCdzcmMtb25seScpKTtcblxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IG9yY2hlc3RyYXRvci5ydW4ocGxhbiwgeyBtb2RlOiAnZHVhbC1ybC1jb250aW51b3VzJyB9KTtcbiAgICBjb25zdCBzdGVwID0gcmVwb3J0Lm1vZHVsZXNbMF0/LnN0ZXBzWzBdO1xuXG4gICAgZXhwZWN0KHN0ZXA/Lndpbm5lclZhcmlhbnQpLnRvQmUoJ3JlZmluZXInKTtcbiAgICBleHBlY3QocmVwb3J0LnJlc3VsdHNbMF0/LmNvbW1hbmQpLnRvQ29udGFpbignL3JlZmluZXInKTtcbiAgICBjb25zdCBleHBlY3RlZENhbGxzID0gKHBsYW4ubW9kdWxlc1swXT8uc3RlcHMubGVuZ3RoID8/IDApICogMjtcbiAgICBleHBlY3QoZXhlY3V0b3IpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcyhleHBlY3RlZENhbGxzKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbHRzIHdoZW4gY29udGludWVPbkZhaWx1cmUgaXMgZmFsc2UgYW5kIG1hcmtzIHJlbWFpbmluZyBtb2R1bGVzIGFzIHNraXBwZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZXhlY3V0b3IgPSBqZXN0LmZuKGFzeW5jIChpbnB1dDogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCkgPT4ge1xuICAgICAgaWYgKGlucHV0Lm1vZHVsZS5pZCA9PT0gJ2ZpcnN0Jykge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgIHN1bW1hcnk6ICdmYWlsZWQgcHJpbWFyeScsXG4gICAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICAgIG91dHB1dDogJ2ZhaWxlZCcsXG4gICAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICAgIGNvbW1hbmQ6IGAke2lucHV0Lm1vZHVsZS5pZH0vJHtpbnB1dC5zdGVwLmlkfS8ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgICAgICAgIGVycm9yOiAnZmFpbGVkJyxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3VtbWFyeTogJ3Nob3VsZCBub3QgcnVuJyxcbiAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBvdXRwdXQ6ICdvaycsXG4gICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9LyR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG9yY2hlc3RyYXRvciA9IG5ldyBSZXBvVXBncmFkZU9yY2hlc3RyYXRvcihleGVjdXRvcik7XG4gICAgY29uc3QgcGxhbiA9IG1ha2VQbGFuKHNpbXBsZU1vZHVsZSgnZmlyc3QnKSwgc2ltcGxlTW9kdWxlKCdzZWNvbmQnKSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBvcmNoZXN0cmF0b3IucnVuKHBsYW4sIHtcbiAgICAgIG1vZGU6ICdzaW5nbGUtY29udGludW91cycsXG4gICAgICBjb250aW51ZU9uRmFpbHVyZTogZmFsc2UsXG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVwb3J0Lm1vZHVsZXNbMF0/LnN0YXR1cykudG9CZSgnZmFpbGVkJyk7XG4gICAgZXhwZWN0KHJlcG9ydC5tb2R1bGVzWzFdPy5zdGF0dXMpLnRvQmUoJ3NraXBwZWQnKTtcbiAgICBleHBlY3QoZXhlY3V0b3IpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygxKTtcbiAgICBleHBlY3QocmVwb3J0LnJlc3VsdHNbMF0/LnN1Y2Nlc3MpLnRvQmUoZmFsc2UpO1xuICB9KTtcblxuICBpdCgndXNlcyByZWZpbmVyIGJpYXMgdG8gYnJlYWsgdGllcyB3aGVuIGJvdGggdmFyaWFudHMgc3VjY2VlZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBleGVjdXRvciA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0KSA9PiAoe1xuICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgIHN1bW1hcnk6IGAke2lucHV0LnN0ZXAuaWR9LSR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgc2NvcmU6IDAuNCxcbiAgICAgIHJld2FyZFNpZ25hbHM6IHsgZXhlY3V0aW9uU3VjY2VzczogMSwgdGVzdHNQYXNzZWQ6IDAuNCB9LFxuICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIG91dHB1dDogaW5wdXQudmFyaWFudCxcbiAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgIGNvbW1hbmQ6IGAke2lucHV0Lm1vZHVsZS5pZH0vJHtpbnB1dC5zdGVwLmlkfS8ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgIH0sXG4gICAgfSkpO1xuXG4gICAgY29uc3Qgb3JjaGVzdHJhdG9yID0gbmV3IFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yKGV4ZWN1dG9yKTtcbiAgICBjb25zdCBwbGFuID0gbWFrZVBsYW4oc2ltcGxlTW9kdWxlKCd0aWUtYnJlYWtlcicpKTtcblxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IG9yY2hlc3RyYXRvci5ydW4ocGxhbiwgeyBtb2RlOiAnZHVhbC1ybC1jb250aW51b3VzJyB9KTtcbiAgICBjb25zdCBzdGVwID0gcmVwb3J0Lm1vZHVsZXNbMF0/LnN0ZXBzWzBdO1xuXG4gICAgZXhwZWN0KHN0ZXA/Lndpbm5lclZhcmlhbnQpLnRvQmUoJ3JlZmluZXInKTtcbiAgICBleHBlY3QoZXhlY3V0b3IpLnRvSGF2ZUJlZW5DYWxsZWRUaW1lcygocGxhbi5tb2R1bGVzWzBdPy5zdGVwcy5sZW5ndGggPz8gMCkgKiAyKTtcbiAgfSk7XG59KTtcblxuZGVzY3JpYmUoJ2J1aWxkUmVwb1dpZGVQbGFuJywgKCkgPT4ge1xuICBpdCgncmV0dXJucyBhIGZhbGxiYWNrIG1vZHVsZSB3aGVuIG5vIGtub3duIHNjb3BlcyBleGlzdCcsICgpID0+IHtcbiAgICBjb25zdCBkaXIgPSBta2R0ZW1wU3luYyhqb2luKHRtcGRpcigpLCAndXBncmFkZS1mdy0nKSk7XG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHBsYW4gPSBidWlsZFJlcG9XaWRlUGxhbihkaXIpO1xuICAgICAgZXhwZWN0KHBsYW4ubW9kdWxlcykudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KHBsYW4ubW9kdWxlc1swXT8uaWQpLnRvQmUoJ3JlcG8td2lkZScpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBybVN5bmMoZGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG4gICAgfVxuICB9KTtcblxuICBpdCgnZXhwYW5kcyBucG0veWFybiB3b3Jrc3BhY2VzIGludG8gZGVkaWNhdGVkIG1vZHVsZXMnLCAoKSA9PiB7XG4gICAgY29uc3QgZGlyID0gbWtkdGVtcFN5bmMoam9pbih0bXBkaXIoKSwgJ3VwZ3JhZGUtZnctJykpO1xuICAgIHRyeSB7XG4gICAgICB3cml0ZUZpbGVTeW5jKGpvaW4oZGlyLCAncGFja2FnZS5qc29uJyksIEpTT04uc3RyaW5naWZ5KHsgbmFtZTogJ3dvcmtzcGFjZS10ZXN0Jywgd29ya3NwYWNlczogWydwYWNrYWdlcy8qJ10gfSkpO1xuICAgICAgbWtkaXJTeW5jKGpvaW4oZGlyLCAncGFja2FnZXMnLCAnc3ZjLWEnKSwgeyByZWN1cnNpdmU6IHRydWUgfSk7XG4gICAgICBjb25zdCBwbGFuID0gYnVpbGRSZXBvV2lkZVBsYW4oZGlyKTtcbiAgICAgIGNvbnN0IGlkcyA9IHBsYW4ubW9kdWxlcy5tYXAoKG0pID0+IG0uaWQpO1xuXG4gICAgICBleHBlY3QoaWRzLnNvbWUoKGlkKSA9PiBpZC5pbmNsdWRlcygnd29ya3NwYWNlLXBhY2thZ2VzLXN2Yy1hJykpKS50b0JlKHRydWUpO1xuICAgICAgY29uc3Qgd29ya3NwYWNlTW9kdWxlID0gcGxhbi5tb2R1bGVzLmZpbmQoKG0pID0+IG0uaWQuaW5jbHVkZXMoJ3dvcmtzcGFjZS1wYWNrYWdlcy1zdmMtYScpKTtcbiAgICAgIGV4cGVjdCh3b3Jrc3BhY2VNb2R1bGU/LnNjb3BlKS50b0VxdWFsKFsncGFja2FnZXMvc3ZjLWEvKiovKiddKTtcbiAgICAgIGV4cGVjdCh3b3Jrc3BhY2VNb2R1bGU/LnZhbGlkYXRpb25Db21tYW5kcz8ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJtU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdkZXRlY3RzIHJlcG8tc3BlY2lmaWMgc2NvcGVzIGxpa2Ugc2tpbGxzL2FnZW50cy9leGFtcGxlcyBhbmQgY2FycmllcyB2YWxpZGF0aW9uIGhpbnRzJywgKCkgPT4ge1xuICAgIGNvbnN0IGRpciA9IG1rZHRlbXBTeW5jKGpvaW4odG1wZGlyKCksICd1cGdyYWRlLWZ3LScpKTtcbiAgICB0cnkge1xuICAgICAgbWtkaXJTeW5jKGpvaW4oZGlyLCAnc3JjJykpO1xuICAgICAgbWtkaXJTeW5jKGpvaW4oZGlyLCAnc2tpbGxzJykpO1xuICAgICAgbWtkaXJTeW5jKGpvaW4oZGlyLCAnYWdlbnRzJykpO1xuICAgICAgbWtkaXJTeW5jKGpvaW4oZGlyLCAnZXhhbXBsZXMnKSk7XG5cbiAgICAgIGNvbnN0IHBsYW4gPSBidWlsZFJlcG9XaWRlUGxhbihkaXIpO1xuICAgICAgY29uc3QgbW9kdWxlSWRzID0gcGxhbi5tb2R1bGVzLm1hcCgobSkgPT4gbS5pZCk7XG5cbiAgICAgIGV4cGVjdChtb2R1bGVJZHMpLnRvRXF1YWwoZXhwZWN0LmFycmF5Q29udGFpbmluZyhbJ3NvdXJjZScsICdza2lsbHMnLCAnYWdlbnRzJywgJ2V4YW1wbGVzJ10pKTtcblxuICAgICAgY29uc3Qgc2tpbGxzTW9kdWxlID0gcGxhbi5tb2R1bGVzLmZpbmQoKG0pID0+IG0uaWQgPT09ICdza2lsbHMnKTtcbiAgICAgIGV4cGVjdChza2lsbHNNb2R1bGU/LnZhbGlkYXRpb25Db21tYW5kcz8ubGVuZ3RoKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJtU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFB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