{"version":3,"names":["cov_14l3yxqwhp","actualCoverage","readFileSync","dirname","join","fileURLToPath","__filename","s","import","meta","url","__dirname","manifest","normalizeManifest","JSON","parse","getToolManifest","f","raw","b","Error","options","Array","isArray","map","normalizeOption","length","contractVersion","requireString","profile","version","label","optionalString","description","metadata","normalizeRecord","presets","normalizePresets","id","pluginIds","dedupeStrings","option","defaultEnabled","Boolean","category","requiresSecret","scopes","undefined","entries","preset","normalized","enabled","disabled","locked","appliesTo","normalizeTargets","notes","targets","seen","Set","result","target","has","add","push","values","entry","trimmed","trim","value","field"],"sources":["toolManifest.ts"],"sourcesContent":["import { readFileSync } from 'node:fs';\nimport { dirname, join } from 'node:path';\nimport { fileURLToPath } from 'node:url';\nimport type {\n  ToolAvailabilityOption,\n  ToolSelectionManifest,\n  ToolSelectionPreset,\n  ToolSelectionTarget,\n} from '../contracts/v1/toolAccess.js';\n\ntype RawToolManifest = ToolSelectionManifest & { $schema?: string };\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = dirname(__filename);\nconst manifest = normalizeManifest(\n  JSON.parse(readFileSync(join(__dirname, '../contracts/tools.schema.json'), 'utf-8')) as Partial<RawToolManifest>\n);\n\nexport function getToolManifest(): ToolSelectionManifest {\n  return manifest;\n}\n\nfunction normalizeManifest(raw: Partial<RawToolManifest>): ToolSelectionManifest {\n  if (!raw || typeof raw !== 'object') {\n    throw new Error('Tool manifest is malformed: expected an object.');\n  }\n\n  const options = Array.isArray(raw.options) ? raw.options.map(normalizeOption) : null;\n  if (!options?.length) {\n    throw new Error('Tool manifest must include at least one tool option.');\n  }\n\n  const manifest: ToolSelectionManifest = {\n    contractVersion: requireString(raw.contractVersion, 'contractVersion'),\n    profile: requireString(raw.profile, 'profile'),\n    version: requireString(raw.version, 'version'),\n    options,\n  };\n\n  const label = optionalString(raw.label);\n  if (label) {\n    manifest.label = label;\n  }\n  const description = optionalString(raw.description);\n  if (description) {\n    manifest.description = description;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    manifest.metadata = metadata;\n  }\n  const presets = normalizePresets(raw.presets);\n  if (presets) {\n    manifest.presets = presets;\n  }\n\n  return manifest;\n}\n\nfunction normalizeOption(raw: ToolAvailabilityOption): ToolAvailabilityOption {\n  const id = requireString(raw.id, 'option.id');\n  const label = requireString(raw.label, `option(\"${id}\").label`);\n  const description = requireString(raw.description, `option(\"${id}\").description`);\n\n  const pluginIds = dedupeStrings(raw.pluginIds);\n  if (!pluginIds.length) {\n    throw new Error(`Tool option \"${id}\" must declare at least one plugin id.`);\n  }\n\n  const option: ToolAvailabilityOption = {\n    id,\n    label,\n    description,\n    defaultEnabled: Boolean(raw.defaultEnabled),\n    pluginIds,\n  };\n\n  const category = optionalString(raw.category);\n  if (category) {\n    option.category = category;\n  }\n  const requiresSecret = optionalString(raw.requiresSecret);\n  if (requiresSecret) {\n    option.requiresSecret = requiresSecret;\n  }\n  const scopes = raw.scopes?.length ? dedupeStrings(raw.scopes) : undefined;\n  if (scopes?.length) {\n    option.scopes = scopes;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    option.metadata = metadata;\n  }\n\n  return option;\n}\n\nfunction normalizePresets(entries: ToolSelectionPreset[] | undefined): ToolSelectionPreset[] | undefined {\n  if (!entries?.length) {\n    return undefined;\n  }\n  return entries.map((preset) => {\n    const id = requireString(preset.id, 'preset.id');\n    const normalized: ToolSelectionPreset = {\n      id,\n      label: requireString(preset.label, `preset(\"${id}\").label`),\n      enabled: dedupeStrings(preset.enabled),\n      disabled: dedupeStrings(preset.disabled),\n      locked: dedupeStrings(preset.locked),\n    };\n\n    const description = optionalString(preset.description);\n    if (description) {\n      normalized.description = description;\n    }\n    const appliesTo = normalizeTargets(preset.appliesTo);\n    if (appliesTo) {\n      normalized.appliesTo = appliesTo;\n    }\n    const metadata = normalizeRecord(preset.metadata);\n    if (metadata) {\n      normalized.metadata = metadata;\n    }\n    const notes = optionalString(preset.notes);\n    if (notes) {\n      normalized.notes = notes;\n    }\n\n    return normalized;\n  });\n}\n\nfunction normalizeTargets(targets: ToolSelectionTarget[] | undefined): ToolSelectionTarget[] | undefined {\n  if (!targets?.length) {\n    return undefined;\n  }\n  const seen = new Set<ToolSelectionTarget>();\n  const result: ToolSelectionTarget[] = [];\n  for (const target of targets) {\n    if (target && !seen.has(target)) {\n      seen.add(target);\n      result.push(target);\n    }\n  }\n  return result.length ? result : undefined;\n}\n\nfunction dedupeStrings<T extends string>(values: T[] | undefined): T[] {\n  if (!values?.length) {\n    return [];\n  }\n  const seen = new Set<string>();\n  const result: T[] = [];\n  for (const entry of values) {\n    if (typeof entry !== 'string') {\n      continue;\n    }\n    const trimmed = entry.trim();\n    if (!trimmed || seen.has(trimmed)) {\n      continue;\n    }\n    seen.add(trimmed);\n    result.push(trimmed as T);\n  }\n  return result;\n}\n\nfunction normalizeRecord(value: unknown): Record<string, unknown> | undefined {\n  if (!value || typeof value !== 'object' || Array.isArray(value)) {\n    return undefined;\n  }\n  return { ...(value as Record<string, unknown>) };\n}\n\nfunction requireString(value: unknown, field: string): string {\n  if (typeof value !== 'string') {\n    throw new Error(`Tool manifest is missing required field \"${field}\".`);\n  }\n  const trimmed = value.trim();\n  if (!trimmed) {\n    throw new Error(`Tool manifest field \"${field}\" cannot be blank.`);\n  }\n  return trimmed;\n}\n\nfunction optionalString(value: unknown): string | undefined {\n  if (typeof value !== 'string') {\n    return undefined;\n  }\n  const trimmed = value.trim();\n  return trimmed.length ? trimmed : undefined;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ,SAASE,YAAY,QAAQ,SAAS;AACtC,SAASC,OAAO,EAAEC,IAAI,QAAQ,WAAW;AACzC,SAASC,aAAa,QAAQ,UAAU;AAUxC,MAAMC,UAAU;AAAA;AAAA,CAAAN,cAAA,GAAAO,CAAA,OAAGF,aAAa,CAACG,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC;AACjD,MAAMC,SAAS;AAAA;AAAA,CAAAX,cAAA,GAAAO,CAAA,OAAGJ,OAAO,CAACG,UAAU,CAAC;AACrC,MAAMM,QAAQ;AAAA;AAAA,CAAAZ,cAAA,GAAAO,CAAA,OAAGM,iBAAiB,CAChCC,IAAI,CAACC,KAAK,CAACb,YAAY,CAACE,IAAI,CAACO,SAAS,EAAE,gCAAgC,CAAC,EAAE,OAAO,CAAC,CACrF,CAAC;AAED,OAAO,SAASK,eAAeA,CAAA,EAA0B;EAAA;EAAAhB,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EACvD,OAAOK,QAAQ;AACjB;AAEA,SAASC,iBAAiBA,CAACK,GAA6B,EAAyB;EAAA;EAAAlB,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EAC/E;EAAI;EAAA,CAAAP,cAAA,GAAAmB,CAAA,WAACD,GAAG;EAAA;EAAA,CAAAlB,cAAA,GAAAmB,CAAA,UAAI,OAAOD,GAAG,KAAK,QAAQ,GAAE;IAAA;IAAAlB,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACnC,MAAM,IAAIa,KAAK,CAAC,iDAAiD,CAAC;EACpE,CAAC;EAAA;EAAA;IAAApB,cAAA,GAAAmB,CAAA;EAAA;EAED,MAAME,OAAO;EAAA;EAAA,CAAArB,cAAA,GAAAO,CAAA,OAAGe,KAAK,CAACC,OAAO,CAACL,GAAG,CAACG,OAAO,CAAC;EAAA;EAAA,CAAArB,cAAA,GAAAmB,CAAA,UAAGD,GAAG,CAACG,OAAO,CAACG,GAAG,CAACC,eAAe,CAAC;EAAA;EAAA,CAAAzB,cAAA,GAAAmB,CAAA,UAAG,IAAI;EAAC;EAAAnB,cAAA,GAAAO,CAAA;EACrF,IAAI,CAACc,OAAO,EAAEK,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACpB,MAAM,IAAIa,KAAK,CAAC,sDAAsD,CAAC;EACzE,CAAC;EAAA;EAAA;IAAApB,cAAA,GAAAmB,CAAA;EAAA;EAED,MAAMP,QAA+B;EAAA;EAAA,CAAAZ,cAAA,GAAAO,CAAA,OAAG;IACtCoB,eAAe,EAAEC,aAAa,CAACV,GAAG,CAACS,eAAe,EAAE,iBAAiB,CAAC;IACtEE,OAAO,EAAED,aAAa,CAACV,GAAG,CAACW,OAAO,EAAE,SAAS,CAAC;IAC9CC,OAAO,EAAEF,aAAa,CAACV,GAAG,CAACY,OAAO,EAAE,SAAS,CAAC;IAC9CT;EACF,CAAC;EAED,MAAMU,KAAK;EAAA;EAAA,CAAA/B,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACd,GAAG,CAACa,KAAK,CAAC;EAAC;EAAA/B,cAAA,GAAAO,CAAA;EACxC,IAAIwB,KAAK,EAAE;IAAA;IAAA/B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACTK,QAAQ,CAACmB,KAAK,GAAGA,KAAK;EACxB,CAAC;EAAA;EAAA;IAAA/B,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMc,WAAW;EAAA;EAAA,CAAAjC,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACd,GAAG,CAACe,WAAW,CAAC;EAAC;EAAAjC,cAAA,GAAAO,CAAA;EACpD,IAAI0B,WAAW,EAAE;IAAA;IAAAjC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACfK,QAAQ,CAACqB,WAAW,GAAGA,WAAW;EACpC,CAAC;EAAA;EAAA;IAAAjC,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMe,QAAQ;EAAA;EAAA,CAAAlC,cAAA,GAAAO,CAAA,QAAG4B,eAAe,CAACjB,GAAG,CAACgB,QAAQ,CAAC;EAAC;EAAAlC,cAAA,GAAAO,CAAA;EAC/C,IAAI2B,QAAQ,EAAE;IAAA;IAAAlC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACZK,QAAQ,CAACsB,QAAQ,GAAGA,QAAQ;EAC9B,CAAC;EAAA;EAAA;IAAAlC,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMiB,OAAO;EAAA;EAAA,CAAApC,cAAA,GAAAO,CAAA,QAAG8B,gBAAgB,CAACnB,GAAG,CAACkB,OAAO,CAAC;EAAC;EAAApC,cAAA,GAAAO,CAAA;EAC9C,IAAI6B,OAAO,EAAE;IAAA;IAAApC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACXK,QAAQ,CAACwB,OAAO,GAAGA,OAAO;EAC5B,CAAC;EAAA;EAAA;IAAApC,cAAA,GAAAmB,CAAA;EAAA;EAAAnB,cAAA,GAAAO,CAAA;EAED,OAAOK,QAAQ;AACjB;AAEA,SAASa,eAAeA,CAACP,GAA2B,EAA0B;EAAA;EAAAlB,cAAA,GAAAiB,CAAA;EAC5E,MAAMqB,EAAE;EAAA;EAAA,CAAAtC,cAAA,GAAAO,CAAA,QAAGqB,aAAa,CAACV,GAAG,CAACoB,EAAE,EAAE,WAAW,CAAC;EAC7C,MAAMP,KAAK;EAAA;EAAA,CAAA/B,cAAA,GAAAO,CAAA,QAAGqB,aAAa,CAACV,GAAG,CAACa,KAAK,EAAE,WAAWO,EAAE,UAAU,CAAC;EAC/D,MAAML,WAAW;EAAA;EAAA,CAAAjC,cAAA,GAAAO,CAAA,QAAGqB,aAAa,CAACV,GAAG,CAACe,WAAW,EAAE,WAAWK,EAAE,gBAAgB,CAAC;EAEjF,MAAMC,SAAS;EAAA;EAAA,CAAAvC,cAAA,GAAAO,CAAA,QAAGiC,aAAa,CAACtB,GAAG,CAACqB,SAAS,CAAC;EAAC;EAAAvC,cAAA,GAAAO,CAAA;EAC/C,IAAI,CAACgC,SAAS,CAACb,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACrB,MAAM,IAAIa,KAAK,CAAC,gBAAgBkB,EAAE,wCAAwC,CAAC;EAC7E,CAAC;EAAA;EAAA;IAAAtC,cAAA,GAAAmB,CAAA;EAAA;EAED,MAAMsB,MAA8B;EAAA;EAAA,CAAAzC,cAAA,GAAAO,CAAA,QAAG;IACrC+B,EAAE;IACFP,KAAK;IACLE,WAAW;IACXS,cAAc,EAAEC,OAAO,CAACzB,GAAG,CAACwB,cAAc,CAAC;IAC3CH;EACF,CAAC;EAED,MAAMK,QAAQ;EAAA;EAAA,CAAA5C,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACd,GAAG,CAAC0B,QAAQ,CAAC;EAAC;EAAA5C,cAAA,GAAAO,CAAA;EAC9C,IAAIqC,QAAQ,EAAE;IAAA;IAAA5C,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACZkC,MAAM,CAACG,QAAQ,GAAGA,QAAQ;EAC5B,CAAC;EAAA;EAAA;IAAA5C,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAM0B,cAAc;EAAA;EAAA,CAAA7C,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACd,GAAG,CAAC2B,cAAc,CAAC;EAAC;EAAA7C,cAAA,GAAAO,CAAA;EAC1D,IAAIsC,cAAc,EAAE;IAAA;IAAA7C,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IAClBkC,MAAM,CAACI,cAAc,GAAGA,cAAc;EACxC,CAAC;EAAA;EAAA;IAAA7C,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAM2B,MAAM;EAAA;EAAA,CAAA9C,cAAA,GAAAO,CAAA,QAAGW,GAAG,CAAC4B,MAAM,EAAEpB,MAAM;EAAA;EAAA,CAAA1B,cAAA,GAAAmB,CAAA,WAAGqB,aAAa,CAACtB,GAAG,CAAC4B,MAAM,CAAC;EAAA;EAAA,CAAA9C,cAAA,GAAAmB,CAAA,WAAG4B,SAAS;EAAC;EAAA/C,cAAA,GAAAO,CAAA;EAC1E,IAAIuC,MAAM,EAAEpB,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IAClBkC,MAAM,CAACK,MAAM,GAAGA,MAAM;EACxB,CAAC;EAAA;EAAA;IAAA9C,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMe,QAAQ;EAAA;EAAA,CAAAlC,cAAA,GAAAO,CAAA,QAAG4B,eAAe,CAACjB,GAAG,CAACgB,QAAQ,CAAC;EAAC;EAAAlC,cAAA,GAAAO,CAAA;EAC/C,IAAI2B,QAAQ,EAAE;IAAA;IAAAlC,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACZkC,MAAM,CAACP,QAAQ,GAAGA,QAAQ;EAC5B,CAAC;EAAA;EAAA;IAAAlC,cAAA,GAAAmB,CAAA;EAAA;EAAAnB,cAAA,GAAAO,CAAA;EAED,OAAOkC,MAAM;AACf;AAEA,SAASJ,gBAAgBA,CAACW,OAA0C,EAAqC;EAAA;EAAAhD,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EACvG,IAAI,CAACyC,OAAO,EAAEtB,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACpB,OAAOwC,SAAS;EAClB,CAAC;EAAA;EAAA;IAAA/C,cAAA,GAAAmB,CAAA;EAAA;EAAAnB,cAAA,GAAAO,CAAA;EACD,OAAOyC,OAAO,CAACxB,GAAG,CAAEyB,MAAM,IAAK;IAAA;IAAAjD,cAAA,GAAAiB,CAAA;IAC7B,MAAMqB,EAAE;IAAA;IAAA,CAAAtC,cAAA,GAAAO,CAAA,QAAGqB,aAAa,CAACqB,MAAM,CAACX,EAAE,EAAE,WAAW,CAAC;IAChD,MAAMY,UAA+B;IAAA;IAAA,CAAAlD,cAAA,GAAAO,CAAA,QAAG;MACtC+B,EAAE;MACFP,KAAK,EAAEH,aAAa,CAACqB,MAAM,CAAClB,KAAK,EAAE,WAAWO,EAAE,UAAU,CAAC;MAC3Da,OAAO,EAAEX,aAAa,CAACS,MAAM,CAACE,OAAO,CAAC;MACtCC,QAAQ,EAAEZ,aAAa,CAACS,MAAM,CAACG,QAAQ,CAAC;MACxCC,MAAM,EAAEb,aAAa,CAACS,MAAM,CAACI,MAAM;IACrC,CAAC;IAED,MAAMpB,WAAW;IAAA;IAAA,CAAAjC,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACiB,MAAM,CAAChB,WAAW,CAAC;IAAC;IAAAjC,cAAA,GAAAO,CAAA;IACvD,IAAI0B,WAAW,EAAE;MAAA;MAAAjC,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MACf2C,UAAU,CAACjB,WAAW,GAAGA,WAAW;IACtC,CAAC;IAAA;IAAA;MAAAjC,cAAA,GAAAmB,CAAA;IAAA;IACD,MAAMmC,SAAS;IAAA;IAAA,CAAAtD,cAAA,GAAAO,CAAA,QAAGgD,gBAAgB,CAACN,MAAM,CAACK,SAAS,CAAC;IAAC;IAAAtD,cAAA,GAAAO,CAAA;IACrD,IAAI+C,SAAS,EAAE;MAAA;MAAAtD,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MACb2C,UAAU,CAACI,SAAS,GAAGA,SAAS;IAClC,CAAC;IAAA;IAAA;MAAAtD,cAAA,GAAAmB,CAAA;IAAA;IACD,MAAMe,QAAQ;IAAA;IAAA,CAAAlC,cAAA,GAAAO,CAAA,QAAG4B,eAAe,CAACc,MAAM,CAACf,QAAQ,CAAC;IAAC;IAAAlC,cAAA,GAAAO,CAAA;IAClD,IAAI2B,QAAQ,EAAE;MAAA;MAAAlC,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MACZ2C,UAAU,CAAChB,QAAQ,GAAGA,QAAQ;IAChC,CAAC;IAAA;IAAA;MAAAlC,cAAA,GAAAmB,CAAA;IAAA;IACD,MAAMqC,KAAK;IAAA;IAAA,CAAAxD,cAAA,GAAAO,CAAA,QAAGyB,cAAc,CAACiB,MAAM,CAACO,KAAK,CAAC;IAAC;IAAAxD,cAAA,GAAAO,CAAA;IAC3C,IAAIiD,KAAK,EAAE;MAAA;MAAAxD,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MACT2C,UAAU,CAACM,KAAK,GAAGA,KAAK;IAC1B,CAAC;IAAA;IAAA;MAAAxD,cAAA,GAAAmB,CAAA;IAAA;IAAAnB,cAAA,GAAAO,CAAA;IAED,OAAO2C,UAAU;EACnB,CAAC,CAAC;AACJ;AAEA,SAASK,gBAAgBA,CAACE,OAA0C,EAAqC;EAAA;EAAAzD,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EACvG,IAAI,CAACkD,OAAO,EAAE/B,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACpB,OAAOwC,SAAS;EAClB,CAAC;EAAA;EAAA;IAAA/C,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMuC,IAAI;EAAA;EAAA,CAAA1D,cAAA,GAAAO,CAAA,QAAG,IAAIoD,GAAG,CAAsB,CAAC;EAC3C,MAAMC,MAA6B;EAAA;EAAA,CAAA5D,cAAA,GAAAO,CAAA,QAAG,EAAE;EAAC;EAAAP,cAAA,GAAAO,CAAA;EACzC,KAAK,MAAMsD,MAAM,IAAIJ,OAAO,EAAE;IAAA;IAAAzD,cAAA,GAAAO,CAAA;IAC5B;IAAI;IAAA,CAAAP,cAAA,GAAAmB,CAAA,WAAA0C,MAAM;IAAA;IAAA,CAAA7D,cAAA,GAAAmB,CAAA,WAAI,CAACuC,IAAI,CAACI,GAAG,CAACD,MAAM,CAAC,GAAE;MAAA;MAAA7D,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MAC/BmD,IAAI,CAACK,GAAG,CAACF,MAAM,CAAC;MAAC;MAAA7D,cAAA,GAAAO,CAAA;MACjBqD,MAAM,CAACI,IAAI,CAACH,MAAM,CAAC;IACrB,CAAC;IAAA;IAAA;MAAA7D,cAAA,GAAAmB,CAAA;IAAA;EACH;EAAC;EAAAnB,cAAA,GAAAO,CAAA;EACD,OAAOqD,MAAM,CAAClC,MAAM;EAAA;EAAA,CAAA1B,cAAA,GAAAmB,CAAA,WAAGyC,MAAM;EAAA;EAAA,CAAA5D,cAAA,GAAAmB,CAAA,WAAG4B,SAAS;AAC3C;AAEA,SAASP,aAAaA,CAAmByB,MAAuB,EAAO;EAAA;EAAAjE,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EACrE,IAAI,CAAC0D,MAAM,EAAEvC,MAAM,EAAE;IAAA;IAAA1B,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACnB,OAAO,EAAE;EACX,CAAC;EAAA;EAAA;IAAAP,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMuC,IAAI;EAAA;EAAA,CAAA1D,cAAA,GAAAO,CAAA,QAAG,IAAIoD,GAAG,CAAS,CAAC;EAC9B,MAAMC,MAAW;EAAA;EAAA,CAAA5D,cAAA,GAAAO,CAAA,QAAG,EAAE;EAAC;EAAAP,cAAA,GAAAO,CAAA;EACvB,KAAK,MAAM2D,KAAK,IAAID,MAAM,EAAE;IAAA;IAAAjE,cAAA,GAAAO,CAAA;IAC1B,IAAI,OAAO2D,KAAK,KAAK,QAAQ,EAAE;MAAA;MAAAlE,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MAC7B;IACF,CAAC;IAAA;IAAA;MAAAP,cAAA,GAAAmB,CAAA;IAAA;IACD,MAAMgD,OAAO;IAAA;IAAA,CAAAnE,cAAA,GAAAO,CAAA,QAAG2D,KAAK,CAACE,IAAI,CAAC,CAAC;IAAC;IAAApE,cAAA,GAAAO,CAAA;IAC7B;IAAI;IAAA,CAAAP,cAAA,GAAAmB,CAAA,YAACgD,OAAO;IAAA;IAAA,CAAAnE,cAAA,GAAAmB,CAAA,WAAIuC,IAAI,CAACI,GAAG,CAACK,OAAO,CAAC,GAAE;MAAA;MAAAnE,cAAA,GAAAmB,CAAA;MAAAnB,cAAA,GAAAO,CAAA;MACjC;IACF,CAAC;IAAA;IAAA;MAAAP,cAAA,GAAAmB,CAAA;IAAA;IAAAnB,cAAA,GAAAO,CAAA;IACDmD,IAAI,CAACK,GAAG,CAACI,OAAO,CAAC;IAAC;IAAAnE,cAAA,GAAAO,CAAA;IAClBqD,MAAM,CAACI,IAAI,CAACG,OAAY,CAAC;EAC3B;EAAC;EAAAnE,cAAA,GAAAO,CAAA;EACD,OAAOqD,MAAM;AACf;AAEA,SAASzB,eAAeA,CAACkC,KAAc,EAAuC;EAAA;EAAArE,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EAC5E;EAAI;EAAA,CAAAP,cAAA,GAAAmB,CAAA,YAACkD,KAAK;EAAA;EAAA,CAAArE,cAAA,GAAAmB,CAAA,WAAI,OAAOkD,KAAK,KAAK,QAAQ;EAAA;EAAA,CAAArE,cAAA,GAAAmB,CAAA,WAAIG,KAAK,CAACC,OAAO,CAAC8C,KAAK,CAAC,GAAE;IAAA;IAAArE,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IAC/D,OAAOwC,SAAS;EAClB,CAAC;EAAA;EAAA;IAAA/C,cAAA,GAAAmB,CAAA;EAAA;EAAAnB,cAAA,GAAAO,CAAA;EACD,OAAO;IAAE,GAAI8D;EAAkC,CAAC;AAClD;AAEA,SAASzC,aAAaA,CAACyC,KAAc,EAAEC,KAAa,EAAU;EAAA;EAAAtE,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EAC5D,IAAI,OAAO8D,KAAK,KAAK,QAAQ,EAAE;IAAA;IAAArE,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IAC7B,MAAM,IAAIa,KAAK,CAAC,4CAA4CkD,KAAK,IAAI,CAAC;EACxE,CAAC;EAAA;EAAA;IAAAtE,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMgD,OAAO;EAAA;EAAA,CAAAnE,cAAA,GAAAO,CAAA,QAAG8D,KAAK,CAACD,IAAI,CAAC,CAAC;EAAC;EAAApE,cAAA,GAAAO,CAAA;EAC7B,IAAI,CAAC4D,OAAO,EAAE;IAAA;IAAAnE,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IACZ,MAAM,IAAIa,KAAK,CAAC,wBAAwBkD,KAAK,oBAAoB,CAAC;EACpE,CAAC;EAAA;EAAA;IAAAtE,cAAA,GAAAmB,CAAA;EAAA;EAAAnB,cAAA,GAAAO,CAAA;EACD,OAAO4D,OAAO;AAChB;AAEA,SAASnC,cAAcA,CAACqC,KAAc,EAAsB;EAAA;EAAArE,cAAA,GAAAiB,CAAA;EAAAjB,cAAA,GAAAO,CAAA;EAC1D,IAAI,OAAO8D,KAAK,KAAK,QAAQ,EAAE;IAAA;IAAArE,cAAA,GAAAmB,CAAA;IAAAnB,cAAA,GAAAO,CAAA;IAC7B,OAAOwC,SAAS;EAClB,CAAC;EAAA;EAAA;IAAA/C,cAAA,GAAAmB,CAAA;EAAA;EACD,MAAMgD,OAAO;EAAA;EAAA,CAAAnE,cAAA,GAAAO,CAAA,QAAG8D,KAAK,CAACD,IAAI,CAAC,CAAC;EAAC;EAAApE,cAAA,GAAAO,CAAA;EAC7B,OAAO4D,OAAO,CAACzC,MAAM;EAAA;EAAA,CAAA1B,cAAA,GAAAmB,CAAA,WAAGgD,OAAO;EAAA;EAAA,CAAAnE,cAAA,GAAAmB,CAAA,WAAG4B,SAAS;AAC7C","ignoreList":[]}