9ad228f80f5f4fd9813a2381da8963ec
"use strict";

var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
var _globals = require("@jest/globals");
var _repoUpgradeOrchestrator = require("../src/core/repoUpgradeOrchestrator.js");
const simpleModule = id => ({
  id,
  label: id,
  description: `Module ${id}`,
  scope: [`${id}/**/*`],
  steps: [{
    id: `${id}-analyze`,
    intent: 'analyze',
    description: 'analyze'
  }, {
    id: `${id}-upgrade`,
    intent: 'upgrade',
    description: 'upgrade'
  }, {
    id: `${id}-verify`,
    intent: 'verify',
    description: 'verify'
  }]
});
const makePlan = (...modules) => ({
  modules
});
(0, _globals.describe)('RepoUpgradeOrchestrator - modes', () => {
  (0, _globals.it)('runs primary only in single-continuous mode and records winning executions', async () => {
    const calls = [];
    const executor = _globals.jest.fn(async input => {
      calls.push(input);
      return {
        success: true,
        summary: `${input.step.id}-${input.variant}`,
        score: input.variant === 'primary' ? 0.4 : 0.9,
        execution: {
          success: true,
          output: 'ok',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('source'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      objective: 'upgrade'
    });
    (0, _globals.expect)(report.modules[0]?.steps.map(s => s.winnerVariant)).toEqual(['primary', 'primary', 'primary']);
    (0, _globals.expect)(calls.every(call => call.variant === 'primary')).toBe(true);
    (0, _globals.expect)(report.results).toHaveLength(plan.modules[0]?.steps.length ?? 0);
    (0, _globals.expect)(report.results.every(result => result.command?.endsWith('/primary'))).toBe(true);
  });
  (0, _globals.it)('prefers the refiner path in dual-rl-continuous mode when it scores higher', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.variant === 'primary') {
        return {
          success: true,
          summary: 'primary version',
          score: 0.2,
          execution: {
            success: true,
            output: 'primary',
            duration: 1,
            command: `${input.module.id}/${input.step.id}/primary`
          }
        };
      }
      return {
        success: true,
        summary: 'refiner wins',
        score: 0.9,
        execution: {
          success: true,
          output: 'refiner',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/refiner`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('src-only'));
    const report = await orchestrator.run(plan, {
      mode: 'dual-rl-continuous'
    });
    const step = report.modules[0]?.steps[0];
    (0, _globals.expect)(step?.winnerVariant).toBe('refiner');
    (0, _globals.expect)(report.results[0]?.command).toContain('/refiner');
    const expectedCalls = (plan.modules[0]?.steps.length ?? 0) * 2;
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(expectedCalls);
  });
  (0, _globals.it)('halts when continueOnFailure is false and marks remaining modules as skipped', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.module.id === 'first') {
        return {
          success: false,
          summary: 'failed primary',
          execution: {
            success: false,
            output: 'failed',
            duration: 0,
            command: `${input.module.id}/${input.step.id}/${input.variant}`,
            error: 'failed'
          }
        };
      }
      return {
        success: true,
        summary: 'should not run',
        execution: {
          success: true,
          output: 'ok',
          duration: 0,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('first'), simpleModule('second'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      continueOnFailure: false
    });
    (0, _globals.expect)(report.modules[0]?.status).toBe('failed');
    (0, _globals.expect)(report.modules[1]?.status).toBe('skipped');
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(1);
    (0, _globals.expect)(report.results[0]?.success).toBe(false);
  });
  (0, _globals.it)('uses refiner bias to break ties when both variants succeed', async () => {
    const executor = _globals.jest.fn(async input => ({
      success: true,
      summary: `${input.step.id}-${input.variant}`,
      score: 0.4,
      execution: {
        success: true,
        output: input.variant,
        duration: 1,
        command: `${input.module.id}/${input.step.id}/${input.variant}`
      }
    }));
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('tie-breaker'));
    const report = await orchestrator.run(plan, {
      mode: 'dual-rl-continuous'
    });
    const step = report.modules[0]?.steps[0];
    (0, _globals.expect)(step?.winnerVariant).toBe('refiner');
    (0, _globals.expect)(executor).toHaveBeenCalledTimes((plan.modules[0]?.steps.length ?? 0) * 2);
  });
});
(0, _globals.describe)('buildRepoWidePlan', () => {
  (0, _globals.it)('returns a fallback module when no known scopes exist', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      (0, _globals.expect)(plan.modules).toHaveLength(1);
      (0, _globals.expect)(plan.modules[0]?.id).toBe('repo-wide');
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
  (0, _globals.it)('expands npm/yarn workspaces into dedicated modules', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      (0, _nodeFs.writeFileSync)((0, _nodePath.join)(dir, 'package.json'), JSON.stringify({
        name: 'workspace-test',
        workspaces: ['packages/*']
      }));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'packages', 'svc-a'), {
        recursive: true
      });
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      const ids = plan.modules.map(m => m.id);
      (0, _globals.expect)(ids.some(id => id.includes('workspace-packages-svc-a'))).toBe(true);
      const workspaceModule = plan.modules.find(m => m.id.includes('workspace-packages-svc-a'));
      (0, _globals.expect)(workspaceModule?.scope).toEqual(['packages/svc-a/**/*']);
      (0, _globals.expect)(workspaceModule?.validationCommands?.length).toBeGreaterThan(0);
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
  (0, _globals.it)('detects repo-specific scopes like skills/agents/examples and carries validation hints', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'src'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'skills'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'agents'));
      (0, _nodeFs.mkdirSync)((0, _nodePath.join)(dir, 'examples'));
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      const moduleIds = plan.modules.map(m => m.id);
      (0, _globals.expect)(moduleIds).toEqual(_globals.expect.arrayContaining(['source', 'skills', 'agents', 'examples']));
      const skillsModule = plan.modules.find(m => m.id === 'skills');
      (0, _globals.expect)(skillsModule?.validationCommands?.length).toBeGreaterThan(0);
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9ub2RlUGF0aCIsIl9ub2RlT3MiLCJfZ2xvYmFscyIsIl9yZXBvVXBncmFkZU9yY2hlc3RyYXRvciIsInNpbXBsZU1vZHVsZSIsImlkIiwibGFiZWwiLCJkZXNjcmlwdGlvbiIsInNjb3BlIiwic3RlcHMiLCJpbnRlbnQiLCJtYWtlUGxhbiIsIm1vZHVsZXMiLCJkZXNjcmliZSIsIml0IiwiY2FsbHMiLCJleGVjdXRvciIsImplc3QiLCJmbiIsImlucHV0IiwicHVzaCIsInN1Y2Nlc3MiLCJzdW1tYXJ5Iiwic3RlcCIsInZhcmlhbnQiLCJzY29yZSIsImV4ZWN1dGlvbiIsIm91dHB1dCIsImR1cmF0aW9uIiwiY29tbWFuZCIsIm1vZHVsZSIsIm9yY2hlc3RyYXRvciIsIlJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yIiwicGxhbiIsInJlcG9ydCIsInJ1biIsIm1vZGUiLCJvYmplY3RpdmUiLCJleHBlY3QiLCJtYXAiLCJzIiwid2lubmVyVmFyaWFudCIsInRvRXF1YWwiLCJldmVyeSIsImNhbGwiLCJ0b0JlIiwicmVzdWx0cyIsInRvSGF2ZUxlbmd0aCIsImxlbmd0aCIsInJlc3VsdCIsImVuZHNXaXRoIiwidG9Db250YWluIiwiZXhwZWN0ZWRDYWxscyIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImVycm9yIiwiY29udGludWVPbkZhaWx1cmUiLCJzdGF0dXMiLCJkaXIiLCJta2R0ZW1wU3luYyIsImpvaW4iLCJ0bXBkaXIiLCJidWlsZFJlcG9XaWRlUGxhbiIsInJtU3luYyIsInJlY3Vyc2l2ZSIsImZvcmNlIiwid3JpdGVGaWxlU3luYyIsIkpTT04iLCJzdHJpbmdpZnkiLCJuYW1lIiwid29ya3NwYWNlcyIsIm1rZGlyU3luYyIsImlkcyIsIm0iLCJzb21lIiwiaW5jbHVkZXMiLCJ3b3Jrc3BhY2VNb2R1bGUiLCJmaW5kIiwidmFsaWRhdGlvbkNvbW1hbmRzIiwidG9CZUdyZWF0ZXJUaGFuIiwibW9kdWxlSWRzIiwiYXJyYXlDb250YWluaW5nIiwic2tpbGxzTW9kdWxlIl0sInNvdXJjZXMiOlsicmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBta2R0ZW1wU3luYywgbWtkaXJTeW5jLCBybVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHsgdG1wZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgeyBkZXNjcmliZSwgZXhwZWN0LCBpdCwgamVzdCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHtcbiAgUmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IsXG4gIGJ1aWxkUmVwb1dpZGVQbGFuLFxuICB0eXBlIFJlcG9VcGdyYWRlTW9kdWxlLFxuICB0eXBlIFJlcG9VcGdyYWRlUGxhbixcbiAgdHlwZSBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0LFxufSBmcm9tICcuLi9zcmMvY29yZS9yZXBvVXBncmFkZU9yY2hlc3RyYXRvci5qcyc7XG5cbmNvbnN0IHNpbXBsZU1vZHVsZSA9IChpZDogc3RyaW5nKTogUmVwb1VwZ3JhZGVNb2R1bGUgPT4gKHtcbiAgaWQsXG4gIGxhYmVsOiBpZCxcbiAgZGVzY3JpcHRpb246IGBNb2R1bGUgJHtpZH1gLFxuICBzY29wZTogW2Ake2lkfS8qKi8qYF0sXG4gIHN0ZXBzOiBbXG4gICAgeyBpZDogYCR7aWR9LWFuYWx5emVgLCBpbnRlbnQ6ICdhbmFseXplJywgZGVzY3JpcHRpb246ICdhbmFseXplJyB9LFxuICAgIHsgaWQ6IGAke2lkfS11cGdyYWRlYCwgaW50ZW50OiAndXBncmFkZScsIGRlc2NyaXB0aW9uOiAndXBncmFkZScgfSxcbiAgICB7IGlkOiBgJHtpZH0tdmVyaWZ5YCwgaW50ZW50OiAndmVyaWZ5JywgZGVzY3JpcHRpb246ICd2ZXJpZnknIH0sXG4gIF0sXG59KTtcblxuY29uc3QgbWFrZVBsYW4gPSAoLi4ubW9kdWxlczogUmVwb1VwZ3JhZGVNb2R1bGVbXSk6IFJlcG9VcGdyYWRlUGxhbiA9PiAoeyBtb2R1bGVzIH0pO1xuXG5kZXNjcmliZSgnUmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IgLSBtb2RlcycsICgpID0+IHtcbiAgaXQoJ3J1bnMgcHJpbWFyeSBvbmx5IGluIHNpbmdsZS1jb250aW51b3VzIG1vZGUgYW5kIHJlY29yZHMgd2lubmluZyBleGVjdXRpb25zJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGNhbGxzOiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0W10gPSBbXTtcbiAgICBjb25zdCBleGVjdXRvciA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0KSA9PiB7XG4gICAgICBjYWxscy5wdXNoKGlucHV0KTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHN1bW1hcnk6IGAke2lucHV0LnN0ZXAuaWR9LSR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgICBzY29yZTogaW5wdXQudmFyaWFudCA9PT0gJ3ByaW1hcnknID8gMC40IDogMC45LFxuICAgICAgICBleGVjdXRpb246IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG91dHB1dDogJ29rJyxcbiAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vJHtpbnB1dC52YXJpYW50fWAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3Qgb3JjaGVzdHJhdG9yID0gbmV3IFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yKGV4ZWN1dG9yKTtcbiAgICBjb25zdCBwbGFuID0gbWFrZVBsYW4oc2ltcGxlTW9kdWxlKCdzb3VyY2UnKSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBvcmNoZXN0cmF0b3IucnVuKHBsYW4sIHtcbiAgICAgIG1vZGU6ICdzaW5nbGUtY29udGludW91cycsXG4gICAgICBvYmplY3RpdmU6ICd1cGdyYWRlJyxcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXBvcnQubW9kdWxlc1swXT8uc3RlcHMubWFwKChzKSA9PiBzLndpbm5lclZhcmlhbnQpKS50b0VxdWFsKFsncHJpbWFyeScsICdwcmltYXJ5JywgJ3ByaW1hcnknXSk7XG4gICAgZXhwZWN0KGNhbGxzLmV2ZXJ5KChjYWxsKSA9PiBjYWxsLnZhcmlhbnQgPT09ICdwcmltYXJ5JykpLnRvQmUodHJ1ZSk7XG4gICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzKS50b0hhdmVMZW5ndGgocGxhbi5tb2R1bGVzWzBdPy5zdGVwcy5sZW5ndGggPz8gMCk7XG4gICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzLmV2ZXJ5KChyZXN1bHQpID0+IHJlc3VsdC5jb21tYW5kPy5lbmRzV2l0aCgnL3ByaW1hcnknKSkpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIGl0KCdwcmVmZXJzIHRoZSByZWZpbmVyIHBhdGggaW4gZHVhbC1ybC1jb250aW51b3VzIG1vZGUgd2hlbiBpdCBzY29yZXMgaGlnaGVyJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGV4ZWN1dG9yID0gamVzdC5mbihhc3luYyAoaW5wdXQ6IFVwZ3JhZGVTdGVwRXhlY3V0aW9uSW5wdXQpID0+IHtcbiAgICAgIGlmIChpbnB1dC52YXJpYW50ID09PSAncHJpbWFyeScpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIHN1bW1hcnk6ICdwcmltYXJ5IHZlcnNpb24nLFxuICAgICAgICAgIHNjb3JlOiAwLjIsXG4gICAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgICAgb3V0cHV0OiAncHJpbWFyeScsXG4gICAgICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgICAgIGNvbW1hbmQ6IGAke2lucHV0Lm1vZHVsZS5pZH0vJHtpbnB1dC5zdGVwLmlkfS9wcmltYXJ5YCxcbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgc3VtbWFyeTogJ3JlZmluZXIgd2lucycsXG4gICAgICAgIHNjb3JlOiAwLjksXG4gICAgICAgIGV4ZWN1dGlvbjoge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgb3V0cHV0OiAncmVmaW5lcicsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9L3JlZmluZXJgLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG9yY2hlc3RyYXRvciA9IG5ldyBSZXBvVXBncmFkZU9yY2hlc3RyYXRvcihleGVjdXRvcik7XG4gICAgY29uc3QgcGxhbiA9IG1ha2VQbGFuKHNpbXBsZU1vZHVsZSgnc3JjLW9ubHknKSk7XG5cbiAgICBjb25zdCByZXBvcnQgPSBhd2FpdCBvcmNoZXN0cmF0b3IucnVuKHBsYW4sIHsgbW9kZTogJ2R1YWwtcmwtY29udGludW91cycgfSk7XG4gICAgY29uc3Qgc3RlcCA9IHJlcG9ydC5tb2R1bGVzWzBdPy5zdGVwc1swXTtcblxuICAgIGV4cGVjdChzdGVwPy53aW5uZXJWYXJpYW50KS50b0JlKCdyZWZpbmVyJyk7XG4gICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzWzBdPy5jb21tYW5kKS50b0NvbnRhaW4oJy9yZWZpbmVyJyk7XG4gICAgY29uc3QgZXhwZWN0ZWRDYWxscyA9IChwbGFuLm1vZHVsZXNbMF0/LnN0ZXBzLmxlbmd0aCA/PyAwKSAqIDI7XG4gICAgZXhwZWN0KGV4ZWN1dG9yKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoZXhwZWN0ZWRDYWxscyk7XG4gIH0pO1xuXG4gIGl0KCdoYWx0cyB3aGVuIGNvbnRpbnVlT25GYWlsdXJlIGlzIGZhbHNlIGFuZCBtYXJrcyByZW1haW5pbmcgbW9kdWxlcyBhcyBza2lwcGVkJywgYXN5bmMgKCkgPT4ge1xuICAgIGNvbnN0IGV4ZWN1dG9yID0gamVzdC5mbihhc3luYyAoaW5wdXQ6IFVwZ3JhZGVTdGVwRXhlY3V0aW9uSW5wdXQpID0+IHtcbiAgICAgIGlmIChpbnB1dC5tb2R1bGUuaWQgPT09ICdmaXJzdCcpIHtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgICBzdW1tYXJ5OiAnZmFpbGVkIHByaW1hcnknLFxuICAgICAgICAgIGV4ZWN1dGlvbjoge1xuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgICBvdXRwdXQ6ICdmYWlsZWQnLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vJHtpbnB1dC52YXJpYW50fWAsXG4gICAgICAgICAgICBlcnJvcjogJ2ZhaWxlZCcsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHN1bW1hcnk6ICdzaG91bGQgbm90IHJ1bicsXG4gICAgICAgIGV4ZWN1dGlvbjoge1xuICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgICAgb3V0cHV0OiAnb2snLFxuICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgIGNvbW1hbmQ6IGAke2lucHV0Lm1vZHVsZS5pZH0vJHtpbnB1dC5zdGVwLmlkfS8ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBvcmNoZXN0cmF0b3IgPSBuZXcgUmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IoZXhlY3V0b3IpO1xuICAgIGNvbnN0IHBsYW4gPSBtYWtlUGxhbihzaW1wbGVNb2R1bGUoJ2ZpcnN0JyksIHNpbXBsZU1vZHVsZSgnc2Vjb25kJykpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnJ1bihwbGFuLCB7XG4gICAgICBtb2RlOiAnc2luZ2xlLWNvbnRpbnVvdXMnLFxuICAgICAgY29udGludWVPbkZhaWx1cmU6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgZXhwZWN0KHJlcG9ydC5tb2R1bGVzWzBdPy5zdGF0dXMpLnRvQmUoJ2ZhaWxlZCcpO1xuICAgIGV4cGVjdChyZXBvcnQubW9kdWxlc1sxXT8uc3RhdHVzKS50b0JlKCdza2lwcGVkJyk7XG4gICAgZXhwZWN0KGV4ZWN1dG9yKS50b0hhdmVCZWVuQ2FsbGVkVGltZXMoMSk7XG4gICAgZXhwZWN0KHJlcG9ydC5yZXN1bHRzWzBdPy5zdWNjZXNzKS50b0JlKGZhbHNlKTtcbiAgfSk7XG5cbiAgaXQoJ3VzZXMgcmVmaW5lciBiaWFzIHRvIGJyZWFrIHRpZXMgd2hlbiBib3RoIHZhcmlhbnRzIHN1Y2NlZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgZXhlY3V0b3IgPSBqZXN0LmZuKGFzeW5jIChpbnB1dDogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCkgPT4gKHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBzdW1tYXJ5OiBgJHtpbnB1dC5zdGVwLmlkfS0ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgIHNjb3JlOiAwLjQsXG4gICAgICBleGVjdXRpb246IHtcbiAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgb3V0cHV0OiBpbnB1dC52YXJpYW50LFxuICAgICAgICBkdXJhdGlvbjogMSxcbiAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9LyR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgfSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBvcmNoZXN0cmF0b3IgPSBuZXcgUmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IoZXhlY3V0b3IpO1xuICAgIGNvbnN0IHBsYW4gPSBtYWtlUGxhbihzaW1wbGVNb2R1bGUoJ3RpZS1icmVha2VyJykpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnJ1bihwbGFuLCB7IG1vZGU6ICdkdWFsLXJsLWNvbnRpbnVvdXMnIH0pO1xuICAgIGNvbnN0IHN0ZXAgPSByZXBvcnQubW9kdWxlc1swXT8uc3RlcHNbMF07XG5cbiAgICBleHBlY3Qoc3RlcD8ud2lubmVyVmFyaWFudCkudG9CZSgncmVmaW5lcicpO1xuICAgIGV4cGVjdChleGVjdXRvcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKChwbGFuLm1vZHVsZXNbMF0/LnN0ZXBzLmxlbmd0aCA/PyAwKSAqIDIpO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnYnVpbGRSZXBvV2lkZVBsYW4nLCAoKSA9PiB7XG4gIGl0KCdyZXR1cm5zIGEgZmFsbGJhY2sgbW9kdWxlIHdoZW4gbm8ga25vd24gc2NvcGVzIGV4aXN0JywgKCkgPT4ge1xuICAgIGNvbnN0IGRpciA9IG1rZHRlbXBTeW5jKGpvaW4odG1wZGlyKCksICd1cGdyYWRlLWZ3LScpKTtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcGxhbiA9IGJ1aWxkUmVwb1dpZGVQbGFuKGRpcik7XG4gICAgICBleHBlY3QocGxhbi5tb2R1bGVzKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBleHBlY3QocGxhbi5tb2R1bGVzWzBdPy5pZCkudG9CZSgncmVwby13aWRlJyk7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHJtU3luYyhkaXIsIHsgcmVjdXJzaXZlOiB0cnVlLCBmb3JjZTogdHJ1ZSB9KTtcbiAgICB9XG4gIH0pO1xuXG4gIGl0KCdleHBhbmRzIG5wbS95YXJuIHdvcmtzcGFjZXMgaW50byBkZWRpY2F0ZWQgbW9kdWxlcycsICgpID0+IHtcbiAgICBjb25zdCBkaXIgPSBta2R0ZW1wU3luYyhqb2luKHRtcGRpcigpLCAndXBncmFkZS1mdy0nKSk7XG4gICAgdHJ5IHtcbiAgICAgIHdyaXRlRmlsZVN5bmMoam9pbihkaXIsICdwYWNrYWdlLmpzb24nKSwgSlNPTi5zdHJpbmdpZnkoeyBuYW1lOiAnd29ya3NwYWNlLXRlc3QnLCB3b3Jrc3BhY2VzOiBbJ3BhY2thZ2VzLyonXSB9KSk7XG4gICAgICBta2RpclN5bmMoam9pbihkaXIsICdwYWNrYWdlcycsICdzdmMtYScpLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgICAgIGNvbnN0IHBsYW4gPSBidWlsZFJlcG9XaWRlUGxhbihkaXIpO1xuICAgICAgY29uc3QgaWRzID0gcGxhbi5tb2R1bGVzLm1hcCgobSkgPT4gbS5pZCk7XG5cbiAgICAgIGV4cGVjdChpZHMuc29tZSgoaWQpID0+IGlkLmluY2x1ZGVzKCd3b3Jrc3BhY2UtcGFja2FnZXMtc3ZjLWEnKSkpLnRvQmUodHJ1ZSk7XG4gICAgICBjb25zdCB3b3Jrc3BhY2VNb2R1bGUgPSBwbGFuLm1vZHVsZXMuZmluZCgobSkgPT4gbS5pZC5pbmNsdWRlcygnd29ya3NwYWNlLXBhY2thZ2VzLXN2Yy1hJykpO1xuICAgICAgZXhwZWN0KHdvcmtzcGFjZU1vZHVsZT8uc2NvcGUpLnRvRXF1YWwoWydwYWNrYWdlcy9zdmMtYS8qKi8qJ10pO1xuICAgICAgZXhwZWN0KHdvcmtzcGFjZU1vZHVsZT8udmFsaWRhdGlvbkNvbW1hbmRzPy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcm1TeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG5cbiAgaXQoJ2RldGVjdHMgcmVwby1zcGVjaWZpYyBzY29wZXMgbGlrZSBza2lsbHMvYWdlbnRzL2V4YW1wbGVzIGFuZCBjYXJyaWVzIHZhbGlkYXRpb24gaGludHMnLCAoKSA9PiB7XG4gICAgY29uc3QgZGlyID0gbWtkdGVtcFN5bmMoam9pbih0bXBkaXIoKSwgJ3VwZ3JhZGUtZnctJykpO1xuICAgIHRyeSB7XG4gICAgICBta2RpclN5bmMoam9pbihkaXIsICdzcmMnKSk7XG4gICAgICBta2RpclN5bmMoam9pbihkaXIsICdza2lsbHMnKSk7XG4gICAgICBta2RpclN5bmMoam9pbihkaXIsICdhZ2VudHMnKSk7XG4gICAgICBta2RpclN5bmMoam9pbihkaXIsICdleGFtcGxlcycpKTtcblxuICAgICAgY29uc3QgcGxhbiA9IGJ1aWxkUmVwb1dpZGVQbGFuKGRpcik7XG4gICAgICBjb25zdCBtb2R1bGVJZHMgPSBwbGFuLm1vZHVsZXMubWFwKChtKSA9PiBtLmlkKTtcblxuICAgICAgZXhwZWN0KG1vZHVsZUlkcykudG9FcXVhbChleHBlY3QuYXJyYXlDb250YWluaW5nKFsnc291cmNlJywgJ3NraWxscycsICdhZ2VudHMnLCAnZXhhbXBsZXMnXSkpO1xuXG4gICAgICBjb25zdCBza2lsbHNNb2R1bGUgPSBwbGFuLm1vZHVsZXMuZmluZCgobSkgPT4gbS5pZCA9PT0gJ3NraWxscycpO1xuICAgICAgZXhwZWN0KHNraWxsc01vZHVsZT8udmFsaWRhdGlvbkNvbW1hbmRzPy5sZW5ndGgpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcm1TeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSx3QkFBQSxHQUFBSixPQUFBO0FBUUEsTUFBTUssWUFBWSxHQUFJQyxFQUFVLEtBQXlCO0VBQ3ZEQSxFQUFFO0VBQ0ZDLEtBQUssRUFBRUQsRUFBRTtFQUNURSxXQUFXLEVBQUUsVUFBVUYsRUFBRSxFQUFFO0VBQzNCRyxLQUFLLEVBQUUsQ0FBQyxHQUFHSCxFQUFFLE9BQU8sQ0FBQztFQUNyQkks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