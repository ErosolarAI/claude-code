5ef6fd5f5b949bfe3bfcd6b6aa2f7fd0
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clearAutosaveSnapshot = clearAutosaveSnapshot;
exports.deleteSession = deleteSession;
exports.listSessions = listSessions;
exports.loadAutosaveSnapshot = loadAutosaveSnapshot;
exports.loadSessionById = loadSessionById;
exports.saveAutosaveSnapshot = saveAutosaveSnapshot;
exports.saveSessionSnapshot = saveSessionSnapshot;
var _nodeCrypto = require("node:crypto");
var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
const dataRoot = process.env['AGI_DATA_DIR']?.trim() || (0, _nodePath.join)((0, _nodeOs.homedir)(), '.agi');
const sessionsDir = (0, _nodePath.join)(dataRoot, 'sessions');
const indexPath = (0, _nodePath.join)(sessionsDir, 'index.json');
function listSessions(profile) {
  const index = readIndex();
  const entries = Object.values(index.entries);
  const filtered = profile ? entries.filter(entry => entry.profile === profile) : entries;
  return filtered.sort((a, b) => {
    const aTime = Date.parse(a.updatedAt ?? '') || 0;
    const bTime = Date.parse(b.updatedAt ?? '') || 0;
    return bTime - aTime;
  });
}
function saveSessionSnapshot(options) {
  ensureDirectory();
  if (!Array.isArray(options.messages)) {
    throw new Error('Session snapshots must include the entire message history array.');
  }
  const index = readIndex();
  const now = new Date().toISOString();
  const existingId = options.id ?? null;
  const summaryId = existingId && index.entries[existingId] ? existingId : (0, _nodeCrypto.randomUUID)();
  const previous = index.entries[summaryId];
  const summary = {
    id: summaryId,
    title: sanitizeTitle(options.title) ?? previous?.title ?? buildDefaultTitle(options.messages),
    profile: options.profile,
    provider: options.provider,
    model: options.model,
    workspaceRoot: options.workspaceRoot ?? previous?.workspaceRoot ?? undefined,
    createdAt: previous?.createdAt ?? now,
    updatedAt: now,
    messageCount: options.messages.length
  };
  const payload = {
    ...summary,
    messages: options.messages,
    ...(options.scrollbackBuffer && {
      scrollbackBuffer: options.scrollbackBuffer
    })
  };
  (0, _nodeFs.writeFileSync)(getSessionPath(summaryId), JSON.stringify(payload, null, 2), 'utf8');
  index.entries[summaryId] = summary;
  writeIndex(index);
  return summary;
}
function loadSessionById(id) {
  if (!id) {
    return null;
  }
  try {
    const raw = (0, _nodeFs.readFileSync)(getSessionPath(id), 'utf8');
    const parsed = JSON.parse(raw);
    return parsed;
  } catch {
    return null;
  }
}
function deleteSession(id) {
  if (!id) {
    return false;
  }
  const index = readIndex();
  if (!index.entries[id]) {
    return false;
  }
  try {
    (0, _nodeFs.rmSync)(getSessionPath(id), {
      force: true
    });
  } catch {
    // ignore
  }
  delete index.entries[id];
  writeIndex(index);
  return true;
}
function saveAutosaveSnapshot(profile, options) {
  ensureDirectory();
  const payload = {
    id: `autosave-${profile}`,
    profile,
    provider: options.provider,
    model: options.model,
    workspaceRoot: options.workspaceRoot ?? undefined,
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
    title: sanitizeTitle(options.title) ?? buildDefaultTitle(options.messages),
    messageCount: options.messages.length,
    messages: options.messages
  };
  (0, _nodeFs.writeFileSync)(getAutosavePath(profile), JSON.stringify(payload, null, 2), 'utf8');
}
function loadAutosaveSnapshot(profile) {
  try {
    const raw = (0, _nodeFs.readFileSync)(getAutosavePath(profile), 'utf8');
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
function clearAutosaveSnapshot(profile) {
  try {
    (0, _nodeFs.rmSync)(getAutosavePath(profile), {
      force: true
    });
  } catch {
    // ignore
  }
}
function readIndex() {
  ensureDirectory();
  try {
    const raw = (0, _nodeFs.readFileSync)(indexPath, 'utf8');
    const parsed = JSON.parse(raw);
    if (!parsed || typeof parsed !== 'object' || typeof parsed.entries !== 'object') {
      return {
        entries: {}
      };
    }
    return {
      entries: {
        ...parsed.entries
      }
    };
  } catch {
    return {
      entries: {}
    };
  }
}
function writeIndex(index) {
  ensureDirectory();
  (0, _nodeFs.writeFileSync)(indexPath, JSON.stringify(index, null, 2), 'utf8');
}
function ensureDirectory() {
  (0, _nodeFs.mkdirSync)(sessionsDir, {
    recursive: true
  });
}
function getSessionPath(id) {
  return (0, _nodePath.join)(sessionsDir, `${id}.json`);
}
function getAutosavePath(profile) {
  return (0, _nodePath.join)(sessionsDir, `${profile}-autosave.json`);
}
function sanitizeTitle(value) {
  if (typeof value !== 'string') {
    return null;
  }
  const trimmed = value.trim();
  if (!trimmed) {
    return null;
  }
  return trimmed.slice(0, 160);
}
function buildDefaultTitle(messages) {
  for (const message of messages) {
    if (message.role !== 'user') {
      continue;
    }
    const condensed = message.content.trim().replace(/\s+/g, ' ');
    if (condensed) {
      return condensed.slice(0, 160);
    }
  }
  return `Session ${new Date().toLocaleString()}`;
}
function pruneOrphans() {
  try {
    ensureDirectory();
    const index = readIndex();
    const known = new Set(Object.keys(index.entries));
    for (const file of (0, _nodeFs.readdirSync)(sessionsDir)) {
      if (!file.endsWith('.json')) {
        continue;
      }
      if (file === 'index.json' || file.includes('-autosave')) {
        continue;
      }
      const id = file.slice(0, -5);
      if (!known.has(id)) {
        const candidate = (0, _nodePath.join)(sessionsDir, file);
        const stats = (0, _nodeFs.statSync)(candidate);
        if (stats.isFile()) {
          (0, _nodeFs.rmSync)(candidate, {
            force: true
          });
        }
      }
    }
  } catch {
    // best-effort cleanup
  }
}
pruneOrphans();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUNyeXB0byIsInJlcXVpcmUiLCJfbm9kZUZzIiwiX25vZGVQYXRoIiwiX25vZGVPcyIsImRhdGFSb290IiwicHJvY2VzcyIsImVudiIsInRyaW0iLCJqb2luIiwiaG9tZWRpciIsInNlc3Npb25zRGlyIiwiaW5kZXhQYXRoIiwibGlzdFNlc3Npb25zIiwicHJvZmlsZSIsImluZGV4IiwicmVhZEluZGV4IiwiZW50cmllcyIsIk9iamVjdCIsInZhbHVlcyIsImZpbHRlcmVkIiwiZmlsdGVyIiwiZW50cnkiLCJzb3J0IiwiYSIsImIiLCJhVGltZSIsIkRhdGUiLCJwYXJzZSIsInVwZGF0ZWRBdCIsImJUaW1lIiwic2F2ZVNlc3Npb25TbmFwc2hvdCIsIm9wdGlvbnMiLCJlbnN1cmVEaXJlY3RvcnkiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsIkVycm9yIiwibm93IiwidG9JU09TdHJpbmciLCJleGlzdGluZ0lkIiwiaWQiLCJzdW1tYXJ5SWQiLCJyYW5kb21VVUlEIiwicHJldmlvdXMiLCJzdW1tYXJ5IiwidGl0bGUiLCJzYW5pdGl6ZVRpdGxlIiwiYnVpbGREZWZhdWx0VGl0bGUiLCJwcm92aWRlciIsIm1vZGVsIiwid29ya3NwYWNlUm9vdCIsInVuZGVmaW5lZCIsImNyZWF0ZWRBdCIsIm1lc3NhZ2VDb3VudCIsImxlbmd0aCIsInBheWxvYWQiLCJzY3JvbGxiYWNrQnVmZmVyIiwid3JpdGVGaWxlU3luYyIsImdldFNlc3Npb25QYXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsIndyaXRlSW5kZXgiLCJsb2FkU2Vzc2lvbkJ5SWQiLCJyYXciLCJyZWFkRmlsZVN5bmMiLCJwYXJzZWQiLCJkZWxldGVTZXNzaW9uIiwicm1TeW5jIiwiZm9yY2UiLCJzYXZlQXV0b3NhdmVTbmFwc2hvdCIsImdldEF1dG9zYXZlUGF0aCIsImxvYWRBdXRvc2F2ZVNuYXBzaG90IiwiY2xlYXJBdXRvc2F2ZVNuYXBzaG90IiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwidmFsdWUiLCJ0cmltbWVkIiwic2xpY2UiLCJtZXNzYWdlIiwicm9sZSIsImNvbmRlbnNlZCIsImNvbnRlbnQiLCJyZXBsYWNlIiwidG9Mb2NhbGVTdHJpbmciLCJwcnVuZU9ycGhhbnMiLCJrbm93biIsIlNldCIsImtleXMiLCJmaWxlIiwicmVhZGRpclN5bmMiLCJlbmRzV2l0aCIsImluY2x1ZGVzIiwiaGFzIiwiY2FuZGlkYXRlIiwic3RhdHMiLCJzdGF0U3luYyIsImlzRmlsZSJdLCJzb3VyY2VzIjpbInNlc3Npb25TdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnbm9kZTpjcnlwdG8nO1xuaW1wb3J0IHsgbWtkaXJTeW5jLCByZWFkZGlyU3luYywgcmVhZEZpbGVTeW5jLCBybVN5bmMsIHN0YXRTeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdub2RlOm9zJztcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uTWVzc2FnZSwgUHJvdmlkZXJJZCB9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHR5cGUgeyBQcm9maWxlTmFtZSB9IGZyb20gJy4uL2NvbmZpZy5qcyc7XG5cbmNvbnN0IGRhdGFSb290ID0gcHJvY2Vzcy5lbnZbJ0FHSV9EQVRBX0RJUiddPy50cmltKCkgfHwgam9pbihob21lZGlyKCksICcuYWdpJyk7XG5jb25zdCBzZXNzaW9uc0RpciA9IGpvaW4oZGF0YVJvb3QsICdzZXNzaW9ucycpO1xuY29uc3QgaW5kZXhQYXRoID0gam9pbihzZXNzaW9uc0RpciwgJ2luZGV4Lmpzb24nKTtcblxuZXhwb3J0IGludGVyZmFjZSBTZXNzaW9uU3VtbWFyeSB7XG4gIGlkOiBzdHJpbmc7XG4gIHRpdGxlOiBzdHJpbmc7XG4gIHByb2ZpbGU6IFByb2ZpbGVOYW1lO1xuICBwcm92aWRlcjogUHJvdmlkZXJJZDtcbiAgbW9kZWw6IHN0cmluZztcbiAgY3JlYXRlZEF0OiBzdHJpbmc7XG4gIHVwZGF0ZWRBdDogc3RyaW5nO1xuICBtZXNzYWdlQ291bnQ6IG51bWJlcjtcbiAgd29ya3NwYWNlUm9vdD86IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBTdG9yZWRTZXNzaW9uIGV4dGVuZHMgU2Vzc2lvblN1bW1hcnkge1xuICBtZXNzYWdlczogQ29udmVyc2F0aW9uTWVzc2FnZVtdO1xuICBzY3JvbGxiYWNrQnVmZmVyPzogc3RyaW5nW107IC8vIE9wdGlvbmFsIHNjcm9sbGJhY2sgaGlzdG9yeVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFNhdmVTZXNzaW9uT3B0aW9ucyB7XG4gIGlkPzogc3RyaW5nIHwgbnVsbDtcbiAgdGl0bGU/OiBzdHJpbmcgfCBudWxsO1xuICBwcm9maWxlOiBQcm9maWxlTmFtZTtcbiAgcHJvdmlkZXI6IFByb3ZpZGVySWQ7XG4gIG1vZGVsOiBzdHJpbmc7XG4gIHdvcmtzcGFjZVJvb3Q/OiBzdHJpbmcgfCBudWxsO1xuICBtZXNzYWdlczogQ29udmVyc2F0aW9uTWVzc2FnZVtdO1xuICBzY3JvbGxiYWNrQnVmZmVyPzogc3RyaW5nW107IC8vIE9wdGlvbmFsIHNjcm9sbGJhY2sgaGlzdG9yeVxufVxuXG5pbnRlcmZhY2UgU2Vzc2lvbkluZGV4IHtcbiAgZW50cmllczogUmVjb3JkPHN0cmluZywgU2Vzc2lvblN1bW1hcnk+O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbGlzdFNlc3Npb25zKHByb2ZpbGU/OiBQcm9maWxlTmFtZSk6IFNlc3Npb25TdW1tYXJ5W10ge1xuICBjb25zdCBpbmRleCA9IHJlYWRJbmRleCgpO1xuICBjb25zdCBlbnRyaWVzID0gT2JqZWN0LnZhbHVlcyhpbmRleC5lbnRyaWVzKTtcbiAgY29uc3QgZmlsdGVyZWQgPSBwcm9maWxlID8gZW50cmllcy5maWx0ZXIoKGVudHJ5KSA9PiBlbnRyeS5wcm9maWxlID09PSBwcm9maWxlKSA6IGVudHJpZXM7XG4gIHJldHVybiBmaWx0ZXJlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgY29uc3QgYVRpbWUgPSBEYXRlLnBhcnNlKGEudXBkYXRlZEF0ID8/ICcnKSB8fCAwO1xuICAgIGNvbnN0IGJUaW1lID0gRGF0ZS5wYXJzZShiLnVwZGF0ZWRBdCA/PyAnJykgfHwgMDtcbiAgICByZXR1cm4gYlRpbWUgLSBhVGltZTtcbiAgfSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlU2Vzc2lvblNuYXBzaG90KG9wdGlvbnM6IFNhdmVTZXNzaW9uT3B0aW9ucyk6IFNlc3Npb25TdW1tYXJ5IHtcbiAgZW5zdXJlRGlyZWN0b3J5KCk7XG4gIGlmICghQXJyYXkuaXNBcnJheShvcHRpb25zLm1lc3NhZ2VzKSkge1xuICAgIHRocm93IG5ldyBFcnJvcignU2Vzc2lvbiBzbmFwc2hvdHMgbXVzdCBpbmNsdWRlIHRoZSBlbnRpcmUgbWVzc2FnZSBoaXN0b3J5IGFycmF5LicpO1xuICB9XG5cbiAgY29uc3QgaW5kZXggPSByZWFkSW5kZXgoKTtcbiAgY29uc3Qgbm93ID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xuICBjb25zdCBleGlzdGluZ0lkID0gb3B0aW9ucy5pZCA/PyBudWxsO1xuICBjb25zdCBzdW1tYXJ5SWQgPVxuICAgIGV4aXN0aW5nSWQgJiYgaW5kZXguZW50cmllc1tleGlzdGluZ0lkXSA/IGV4aXN0aW5nSWQgOiByYW5kb21VVUlEKCk7XG4gIGNvbnN0IHByZXZpb3VzID0gaW5kZXguZW50cmllc1tzdW1tYXJ5SWRdO1xuXG4gIGNvbnN0IHN1bW1hcnk6IFNlc3Npb25TdW1tYXJ5ID0ge1xuICAgIGlkOiBzdW1tYXJ5SWQsXG4gICAgdGl0bGU6IHNhbml0aXplVGl0bGUob3B0aW9ucy50aXRsZSkgPz8gcHJldmlvdXM/LnRpdGxlID8/IGJ1aWxkRGVmYXVsdFRpdGxlKG9wdGlvbnMubWVzc2FnZXMpLFxuICAgIHByb2ZpbGU6IG9wdGlvbnMucHJvZmlsZSxcbiAgICBwcm92aWRlcjogb3B0aW9ucy5wcm92aWRlcixcbiAgICBtb2RlbDogb3B0aW9ucy5tb2RlbCxcbiAgICB3b3Jrc3BhY2VSb290OiBvcHRpb25zLndvcmtzcGFjZVJvb3QgPz8gcHJldmlvdXM/LndvcmtzcGFjZVJvb3QgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRBdDogcHJldmlvdXM/LmNyZWF0ZWRBdCA/PyBub3csXG4gICAgdXBkYXRlZEF0OiBub3csXG4gICAgbWVzc2FnZUNvdW50OiBvcHRpb25zLm1lc3NhZ2VzLmxlbmd0aCxcbiAgfTtcblxuICBjb25zdCBwYXlsb2FkOiBTdG9yZWRTZXNzaW9uID0ge1xuICAgIC4uLnN1bW1hcnksXG4gICAgbWVzc2FnZXM6IG9wdGlvbnMubWVzc2FnZXMsXG4gICAgLi4uKG9wdGlvbnMuc2Nyb2xsYmFja0J1ZmZlciAmJiB7IHNjcm9sbGJhY2tCdWZmZXI6IG9wdGlvbnMuc2Nyb2xsYmFja0J1ZmZlciB9KSxcbiAgfTtcblxuICB3cml0ZUZpbGVTeW5jKGdldFNlc3Npb25QYXRoKHN1bW1hcnlJZCksIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpLCAndXRmOCcpO1xuICBpbmRleC5lbnRyaWVzW3N1bW1hcnlJZF0gPSBzdW1tYXJ5O1xuICB3cml0ZUluZGV4KGluZGV4KTtcbiAgcmV0dXJuIHN1bW1hcnk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsb2FkU2Vzc2lvbkJ5SWQoaWQ6IHN0cmluZyk6IFN0b3JlZFNlc3Npb24gfCBudWxsIHtcbiAgaWYgKCFpZCkge1xuICAgIHJldHVybiBudWxsO1xuICB9XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jKGdldFNlc3Npb25QYXRoKGlkKSwgJ3V0ZjgnKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdykgYXMgU3RvcmVkU2Vzc2lvbjtcbiAgICByZXR1cm4gcGFyc2VkO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVsZXRlU2Vzc2lvbihpZDogc3RyaW5nKTogYm9vbGVhbiB7XG4gIGlmICghaWQpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgaW5kZXggPSByZWFkSW5kZXgoKTtcbiAgaWYgKCFpbmRleC5lbnRyaWVzW2lkXSkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICB0cnkge1xuICAgIHJtU3luYyhnZXRTZXNzaW9uUGF0aChpZCksIHsgZm9yY2U6IHRydWUgfSk7XG4gIH0gY2F0Y2gge1xuICAgIC8vIGlnbm9yZVxuICB9XG4gIGRlbGV0ZSBpbmRleC5lbnRyaWVzW2lkXTtcbiAgd3JpdGVJbmRleChpbmRleCk7XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2F2ZUF1dG9zYXZlU25hcHNob3QoXG4gIHByb2ZpbGU6IFByb2ZpbGVOYW1lLFxuICBvcHRpb25zOiBPbWl0PFNhdmVTZXNzaW9uT3B0aW9ucywgJ3Byb2ZpbGUnPlxuKTogdm9pZCB7XG4gIGVuc3VyZURpcmVjdG9yeSgpO1xuICBjb25zdCBwYXlsb2FkOiBTdG9yZWRTZXNzaW9uID0ge1xuICAgIGlkOiBgYXV0b3NhdmUtJHtwcm9maWxlfWAsXG4gICAgcHJvZmlsZSxcbiAgICBwcm92aWRlcjogb3B0aW9ucy5wcm92aWRlcixcbiAgICBtb2RlbDogb3B0aW9ucy5tb2RlbCxcbiAgICB3b3Jrc3BhY2VSb290OiBvcHRpb25zLndvcmtzcGFjZVJvb3QgPz8gdW5kZWZpbmVkLFxuICAgIGNyZWF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHVwZGF0ZWRBdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxuICAgIHRpdGxlOiBzYW5pdGl6ZVRpdGxlKG9wdGlvbnMudGl0bGUpID8/IGJ1aWxkRGVmYXVsdFRpdGxlKG9wdGlvbnMubWVzc2FnZXMpLFxuICAgIG1lc3NhZ2VDb3VudDogb3B0aW9ucy5tZXNzYWdlcy5sZW5ndGgsXG4gICAgbWVzc2FnZXM6IG9wdGlvbnMubWVzc2FnZXMsXG4gIH07XG4gIHdyaXRlRmlsZVN5bmMoZ2V0QXV0b3NhdmVQYXRoKHByb2ZpbGUpLCBKU09OLnN0cmluZ2lmeShwYXlsb2FkLCBudWxsLCAyKSwgJ3V0ZjgnKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRBdXRvc2F2ZVNuYXBzaG90KHByb2ZpbGU6IFByb2ZpbGVOYW1lKTogU3RvcmVkU2Vzc2lvbiB8IG51bGwge1xuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IHJlYWRGaWxlU3luYyhnZXRBdXRvc2F2ZVBhdGgocHJvZmlsZSksICd1dGY4Jyk7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UocmF3KSBhcyBTdG9yZWRTZXNzaW9uO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gY2xlYXJBdXRvc2F2ZVNuYXBzaG90KHByb2ZpbGU6IFByb2ZpbGVOYW1lKTogdm9pZCB7XG4gIHRyeSB7XG4gICAgcm1TeW5jKGdldEF1dG9zYXZlUGF0aChwcm9maWxlKSwgeyBmb3JjZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cbn1cblxuZnVuY3Rpb24gcmVhZEluZGV4KCk6IFNlc3Npb25JbmRleCB7XG4gIGVuc3VyZURpcmVjdG9yeSgpO1xuICB0cnkge1xuICAgIGNvbnN0IHJhdyA9IHJlYWRGaWxlU3luYyhpbmRleFBhdGgsICd1dGY4Jyk7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShyYXcpIGFzIFNlc3Npb25JbmRleDtcbiAgICBpZiAoIXBhcnNlZCB8fCB0eXBlb2YgcGFyc2VkICE9PSAnb2JqZWN0JyB8fCB0eXBlb2YgcGFyc2VkLmVudHJpZXMgIT09ICdvYmplY3QnKSB7XG4gICAgICByZXR1cm4geyBlbnRyaWVzOiB7fSB9O1xuICAgIH1cbiAgICByZXR1cm4geyBlbnRyaWVzOiB7IC4uLnBhcnNlZC5lbnRyaWVzIH0gfTtcbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHsgZW50cmllczoge30gfTtcbiAgfVxufVxuXG5mdW5jdGlvbiB3cml0ZUluZGV4KGluZGV4OiBTZXNzaW9uSW5kZXgpOiB2b2lkIHtcbiAgZW5zdXJlRGlyZWN0b3J5KCk7XG4gIHdyaXRlRmlsZVN5bmMoaW5kZXhQYXRoLCBKU09OLnN0cmluZ2lmeShpbmRleCwgbnVsbCwgMiksICd1dGY4Jyk7XG59XG5cbmZ1bmN0aW9uIGVuc3VyZURpcmVjdG9yeSgpOiB2b2lkIHtcbiAgbWtkaXJTeW5jKHNlc3Npb25zRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0U2Vzc2lvblBhdGgoaWQ6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBqb2luKHNlc3Npb25zRGlyLCBgJHtpZH0uanNvbmApO1xufVxuXG5mdW5jdGlvbiBnZXRBdXRvc2F2ZVBhdGgocHJvZmlsZTogUHJvZmlsZU5hbWUpOiBzdHJpbmcge1xuICByZXR1cm4gam9pbihzZXNzaW9uc0RpciwgYCR7cHJvZmlsZX0tYXV0b3NhdmUuanNvbmApO1xufVxuXG5mdW5jdGlvbiBzYW5pdGl6ZVRpdGxlKHZhbHVlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgaWYgKCF0cmltbWVkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgcmV0dXJuIHRyaW1tZWQuc2xpY2UoMCwgMTYwKTtcbn1cblxuZnVuY3Rpb24gYnVpbGREZWZhdWx0VGl0bGUobWVzc2FnZXM6IENvbnZlcnNhdGlvbk1lc3NhZ2VbXSk6IHN0cmluZyB7XG4gIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykge1xuICAgIGlmIChtZXNzYWdlLnJvbGUgIT09ICd1c2VyJykge1xuICAgICAgY29udGludWU7XG4gICAgfVxuICAgIGNvbnN0IGNvbmRlbnNlZCA9IG1lc3NhZ2UuY29udGVudC50cmltKCkucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgIGlmIChjb25kZW5zZWQpIHtcbiAgICAgIHJldHVybiBjb25kZW5zZWQuc2xpY2UoMCwgMTYwKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGBTZXNzaW9uICR7bmV3IERhdGUoKS50b0xvY2FsZVN0cmluZygpfWA7XG59XG5cbmZ1bmN0aW9uIHBydW5lT3JwaGFucygpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBlbnN1cmVEaXJlY3RvcnkoKTtcbiAgICBjb25zdCBpbmRleCA9IHJlYWRJbmRleCgpO1xuICAgIGNvbnN0IGtub3duID0gbmV3IFNldChPYmplY3Qua2V5cyhpbmRleC5lbnRyaWVzKSk7XG4gICAgZm9yIChjb25zdCBmaWxlIG9mIHJlYWRkaXJTeW5jKHNlc3Npb25zRGlyKSkge1xuICAgICAgaWYgKCFmaWxlLmVuZHNXaXRoKCcuanNvbicpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKGZpbGUgPT09ICdpbmRleC5qc29uJyB8fCBmaWxlLmluY2x1ZGVzKCctYXV0b3NhdmUnKSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGlkID0gZmlsZS5zbGljZSgwLCAtNSk7XG4gICAgICBpZiAoIWtub3duLmhhcyhpZCkpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gam9pbihzZXNzaW9uc0RpciwgZmlsZSk7XG4gICAgICAgIGNvbnN0IHN0YXRzID0gc3RhdFN5bmMoY2FuZGlkYXRlKTtcbiAgICAgICAgaWYgKHN0YXRzLmlzRmlsZSgpKSB7XG4gICAgICAgICAgcm1TeW5jKGNhbmRpZGF0ZSwgeyBmb3JjZTogdHJ1ZSB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgLy8gYmVzdC1lZmZvcnQgY2xlYW51cFxuICB9XG59XG5cbnBydW5lT3JwaGFucygpO1xuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7QUFBQSxJQUFBQSxXQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxPQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxTQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxPQUFBLEdBQUFILE9BQUE7QUFJQSxNQUFNSSxRQUFRLEdBQUdDLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLGNBQWMsQ0FBQyxFQUFFQyxJQUFJLENBQUMsQ0FBQyxJQUFJLElBQUFDLGNBQUksRUFBQyxJQUFBQyxlQUFPLEVBQUMsQ0FBQyxFQUFFLE1BQU0sQ0FBQztBQUMvRSxNQUFNQyxXQUFXLEdBQUcsSUFBQUYsY0FBSSxFQUFDSixRQUFRLEVBQUUsVUFBVSxDQUFDO0FBQzlDLE1BQU1PLFNBQVMsR0FBRyxJQUFBSCxjQUFJLEVBQUNFLFdBQVcsRUFBRSxZQUFZLENBQUM7QUFrQzFDLFNBQVNFLFlBQVlBLENBQUNDLE9BQXFCLEVBQW9CO0VBQ3BFLE1BQU1DLEtBQUssR0FBR0MsU0FBUyxDQUFDLENBQUM7RUFDekIsTUFBTUMsT0FBTyxHQUFHQyxNQUFNLENBQUNDLE1BQU0sQ0FBQ0osS0FBSyxDQUFDRSxPQUFPLENBQUM7RUFDNUMsTUFBTUcsUUFBUSxHQUFHTixPQUFPLEdBQUdHLE9BQU8sQ0FBQ0ksTUFBTSxDQUFFQyxLQUFLLElBQUtBLEtBQUssQ0FBQ1IsT0FBTyxLQUFLQSxPQUFPLENBQUMsR0FBR0csT0FBTztFQUN6RixPQUFPRyxRQUFRLENBQUNHLElBQUksQ0FBQyxDQUFDQyxDQUFDLEVBQUVDLENBQUMsS0FBSztJQUM3QixNQUFNQyxLQUFLLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDSixDQUFDLENBQUNLLFNBQVMsSUFBSSxFQUFFLENBQUMsSUFBSSxDQUFDO0lBQ2hELE1BQU1DLEtBQUssR0FBR0gsSUFBSSxDQUFDQyxLQUFLLENBQUNILENBQUMsQ0FBQ0ksU0FBUyxJQUFJLEVBQUUsQ0FBQyxJQUFJLENBQUM7SUFDaEQsT0FBT0MsS0FBSyxHQUFHSixLQUFLO0VBQ3RCLENBQUMsQ0FBQztBQUNKO0FBRU8sU0FBU0ssbUJBQW1CQSxDQUFDQyxPQUEyQixFQUFrQjtFQUMvRUMsZUFBZSxDQUFDLENBQUM7RUFDakIsSUFBSSxDQUFDQyxLQUFLLENBQUNDLE9BQU8sQ0FBQ0gsT0FBTyxDQUFDSSxRQUFRLENBQUMsRUFBRTtJQUNwQyxNQUFNLElBQUlDLEtBQUssQ0FBQyxrRUFBa0UsQ0FBQztFQUNyRjtFQUVBLE1BQU10QixLQUFLLEdBQUdDLFNBQVMsQ0FBQyxDQUFDO0VBQ3pCLE1BQU1zQixHQUFHLEdBQUcsSUFBSVgsSUFBSSxDQUFDLENBQUMsQ0FBQ1ksV0FBVyxDQUFDLENBQUM7RUFDcEMsTUFBTUMsVUFBVSxHQUFHUixPQUFPLENBQUNTLEVBQUUsSUFBSSxJQUFJO0VBQ3JDLE1BQU1DLFNBQVMsR0FDYkYsVUFBVSxJQUFJekIsS0FBSyxDQUFDRSxPQUFPLENBQUN1QixVQUFVLENBQUMsR0FBR0EsVUFBVSxHQUFHLElBQUFHLHNCQUFVLEVBQUMsQ0FBQztFQUNyRSxNQUFNQyxRQUFRLEdBQUc3QixLQUFLLENBQUNFLE9BQU8sQ0FBQ3lCLFNBQVMsQ0FBQztFQUV6QyxNQUFNRyxPQUF1QixHQUFHO0lBQzlCSixFQUFFLEVBQUVDLFNBQVM7SUFDYkksS0FBSyxFQUFFQyxhQUFhLENBQUNmLE9BQU8sQ0FBQ2MsS0FBSyxDQUFDLElBQUlGLFFBQVEsRUFBRUUsS0FBSyxJQUFJRSxpQkFBaUIsQ0FBQ2hCLE9BQU8sQ0FBQ0ksUUFBUSxDQUFDO0lBQzdGdEIsT0FBTyxFQUFFa0IsT0FBTyxDQUFDbEIsT0FBTztJQUN4Qm1DLFFBQVEsRUFBRWpCLE9BQU8sQ0FBQ2lCLFFBQVE7SUFDMUJDLEtBQUssRUFBRWxCLE9BQU8sQ0FBQ2tCLEtBQUs7SUFDcEJDLGFBQWEsRUFBRW5CLE9BQU8sQ0FBQ21CLGFBQWEsSUFBSVAsUUFBUSxFQUFFTyxhQUFhLElBQUlDLFNBQVM7SUFDNUVDLFNBQVMsRUFBRVQsUUFBUSxFQUFFUyxTQUFTLElBQUlmLEdBQUc7SUFDckNULFNBQVMsRUFBRVMsR0FBRztJQUNkZ0IsWUFBWSxFQUFFdEIsT0FBTyxDQUFDSSxRQUFRLENBQUNtQjtFQUNqQyxDQUFDO0VBRUQsTUFBTUMsT0FBc0IsR0FBRztJQUM3QixHQUFHWCxPQUFPO0lBQ1ZULFFBQVEsRUFBRUosT0FBTyxDQUFDSSxRQUFRO0lBQzFCLElBQUlKLE9BQU8sQ0FBQ3lCLGdCQUFnQixJQUFJO01BQUVBLGdCQUFnQixFQUFFekIsT0FBTyxDQUFDeUI7SUFBaUIsQ0FBQztFQUNoRixDQUFDO0VBRUQsSUFBQUMscUJBQWEsRUFBQ0MsY0FBYyxDQUFDakIsU0FBUyxDQUFDLEVBQUVrQixJQUFJLENBQUNDLFNBQVMsQ0FBQ0wsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUM7RUFDbEZ6QyxLQUFLLENBQUNFLE9BQU8sQ0FBQ3lCLFNBQVMsQ0FBQyxHQUFHRyxPQUFPO0VBQ2xDaUIsVUFBVSxDQUFDL0MsS0FBSyxDQUFDO0VBQ2pCLE9BQU84QixPQUFPO0FBQ2hCO0FBRU8sU0FBU2tCLGVBQWVBLENBQUN0QixFQUFVLEVBQXdCO0VBQ2hFLElBQUksQ0FBQ0EsRUFBRSxFQUFFO0lBQ1AsT0FBTyxJQUFJO0VBQ2I7RUFDQSxJQUFJO0lBQ0YsTUFBTXVCLEdBQUcsR0FBRyxJQUFBQyxvQkFBWSxFQUFDTixjQUFjLENBQUNsQixFQUFFLENBQUMsRUFBRSxNQUFNLENBQUM7SUFDcEQsTUFBTXlCLE1BQU0sR0FBR04sSUFBSSxDQUFDaEMsS0FBSyxDQUFDb0MsR0FBRyxDQUFrQjtJQUMvQyxPQUFPRSxNQUFNO0VBQ2YsQ0FBQyxDQUFDLE1BQU07SUFDTixPQUFPLElBQUk7RUFDYjtBQUNGO0FBRU8sU0FBU0MsYUFBYUEsQ0FBQzFCLEVBQVUsRUFBVztFQUNqRCxJQUFJLENBQUNBLEVBQUUsRUFBRTtJQUNQLE9BQU8sS0FBSztFQUNkO0VBQ0EsTUFBTTFCLEtBQUssR0FBR0MsU0FBUyxDQUFDLENBQUM7RUFDekIsSUFBSSxDQUFDRCxLQUFLLENBQUNFLE9BQU8sQ0FBQ3dCLEVBQUUsQ0FBQyxFQUFFO0lBQ3RCLE9BQU8sS0FBSztFQUNkO0VBQ0EsSUFBSTtJQUNGLElBQUEyQixjQUFNLEVBQUNULGNBQWMsQ0FBQ2xCLEVBQUUsQ0FBQyxFQUFFO01BQUU0QixLQUFLLEVBQUU7SUFBSyxDQUFDLENBQUM7RUFDN0MsQ0FBQyxDQUFDLE1BQU07SUFDTjtFQUFBO0VBRUYsT0FBT3RELEtBQUssQ0FBQ0UsT0FBTyxDQUFDd0IsRUFBRSxDQUFDO0VBQ3hCcUIsVUFBVSxDQUFDL0MsS0FBSyxDQUFDO0VBQ2pCLE9BQU8sSUFBSTtBQUNiO0FBRU8sU0FBU3VELG9CQUFvQkEsQ0FDbEN4RCxPQUFvQixFQUNwQmtCLE9BQTRDLEVBQ3RDO0VBQ05DLGVBQWUsQ0FBQyxDQUFDO0VBQ2pCLE1BQU11QixPQUFzQixHQUFHO0lBQzdCZixFQUFFLEVBQUUsWUFBWTNCLE9BQU8sRUFBRTtJQUN6QkEsT0FBTztJQUNQbUMsUUFBUSxFQUFFakIsT0FBTyxDQUFDaUIsUUFBUTtJQUMxQkMsS0FBSyxFQUFFbEIsT0FBTyxDQUFDa0IsS0FBSztJQUNwQkMsYUFBYSxFQUFFbkIsT0FBTyxDQUFDbUIsYUFBYSxJQUFJQyxTQUFTO0lBQ2pEQyxTQUFTLEVBQUUsSUFBSTFCLElBQUksQ0FBQyxDQUFDLENBQUNZLFdBQVcsQ0FBQyxDQUFDO0lBQ25DVixTQUFTLEVBQUUsSUFBSUYsSUFBSSxDQUFDLENBQUMsQ0FBQ1ksV0FBVyxDQUFDLENBQUM7SUFDbkNPLEtBQUssRUFBRUMsYUFBYSxDQUFDZixPQUFPLENBQUNjLEtBQUssQ0FBQyxJQUFJRSxpQkFBaUIsQ0FBQ2hCLE9BQU8sQ0FBQ0ksUUFBUSxDQUFDO0lBQzFFa0IsWUFBWSxFQUFFdEIsT0FBTyxDQUFDSSxRQUFRLENBQUNtQixNQUFNO0lBQ3JDbkIsUUFBUSxFQUFFSixPQUFPLENBQUNJO0VBQ3BCLENBQUM7RUFDRCxJQUFBc0IscUJBQWEsRUFBQ2EsZUFBZSxDQUFDekQsT0FBTyxDQUFDLEVBQUU4QyxJQUFJLENBQUNDLFNBQVMsQ0FBQ0wsT0FBTyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUM7QUFDbkY7QUFFTyxTQUFTZ0Isb0JBQW9CQSxDQUFDMUQsT0FBb0IsRUFBd0I7RUFDL0UsSUFBSTtJQUNGLE1BQU1rRCxHQUFHLEdBQUcsSUFBQUMsb0JBQVksRUFBQ00sZUFBZSxDQUFDekQsT0FBTyxDQUFDLEVBQUUsTUFBTSxDQUFDO0lBQzFELE9BQU84QyxJQUFJLENBQUNoQyxLQUFLLENBQUNvQyxHQUFHLENBQUM7RUFDeEIsQ0FBQyxDQUFDLE1BQU07SUFDTixPQUFPLElBQUk7RUFDYjtBQUNGO0FBRU8sU0FBU1MscUJBQXFCQSxDQUFDM0QsT0FBb0IsRUFBUTtFQUNoRSxJQUFJO0lBQ0YsSUFBQXNELGNBQU0sRUFBQ0csZUFBZSxDQUFDekQsT0FBTyxDQUFDLEVBQUU7TUFBRXVELEtBQUssRUFBRTtJQUFLLENBQUMsQ0FBQztFQUNuRCxDQUFDLENBQUMsTUFBTTtJQUNOO0VBQUE7QUFFSjtBQUVBLFNBQVNyRCxTQUFTQSxDQUFBLEVBQWlCO0VBQ2pDaUIsZUFBZSxDQUFDLENBQUM7RUFDakIsSUFBSTtJQUNGLE1BQU0rQixHQUFHLEdBQUcsSUFBQUMsb0JBQVksRUFBQ3JELFNBQVMsRUFBRSxNQUFNLENBQUM7SUFDM0MsTUFBTXNELE1BQU0sR0FBR04sSUFBSSxDQUFDaEMsS0FBSyxDQUFDb0MsR0FBRyxDQUFpQjtJQUM5QyxJQUFJLENBQUNFLE1BQU0sSUFBSSxPQUFPQSxNQUFNLEtBQUssUUFBUSxJQUFJLE9BQU9BLE1BQU0sQ0FBQ2pELE9BQU8sS0FBSyxRQUFRLEVBQUU7TUFDL0UsT0FBTztRQUFFQSxPQUFPLEVBQUUsQ0FBQztNQUFFLENBQUM7SUFDeEI7SUFDQSxPQUFPO01BQUVBLE9BQU8sRUFBRTtRQUFFLEdBQUdpRCxNQUFNLENBQUNqRDtNQUFRO0lBQUUsQ0FBQztFQUMzQyxDQUFDLENBQUMsTUFBTTtJQUNOLE9BQU87TUFBRUEsT0FBTyxFQUFFLENBQUM7SUFBRSxDQUFDO0VBQ3hCO0FBQ0Y7QUFFQSxTQUFTNkMsVUFBVUEsQ0FBQy9DLEtBQW1CLEVBQVE7RUFDN0NrQixlQUFlLENBQUMsQ0FBQztFQUNqQixJQUFBeUIscUJBQWEsRUFBQzlDLFNBQVMsRUFBRWdELElBQUksQ0FBQ0MsU0FBUyxDQUFDOUMsS0FBSyxFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxNQUFNLENBQUM7QUFDbEU7QUFFQSxTQUFTa0IsZUFBZUEsQ0FBQSxFQUFTO0VBQy9CLElBQUF5QyxpQkFBUyxFQUFDL0QsV0FBVyxFQUFFO0lBQUVnRSxTQUFTLEVBQUU7RUFBSyxDQUFDLENBQUM7QUFDN0M7QUFFQSxTQUFTaEIsY0FBY0EsQ0FBQ2xCLEVBQVUsRUFBVTtFQUMxQyxPQUFPLElBQUFoQyxjQUFJLEVBQUNFLFdBQVcsRUFBRSxHQUFHOEIsRUFBRSxPQUFPLENBQUM7QUFDeEM7QUFFQSxTQUFTOEIsZUFBZUEsQ0FBQ3pELE9BQW9CLEVBQVU7RUFDckQsT0FBTyxJQUFBTCxjQUFJLEVBQUNFLFdBQVcsRUFBRSxHQUFHRyxPQUFPLGdCQUFnQixDQUFDO0FBQ3REO0FBRUEsU0FBU2lDLGFBQWFBLENBQUM2QixLQUFnQyxFQUFpQjtFQUN0RSxJQUFJLE9BQU9BLEtBQUssS0FBSyxRQUFRLEVBQUU7SUFDN0IsT0FBTyxJQUFJO0VBQ2I7RUFDQSxNQUFNQyxPQUFPLEdBQUdELEtBQUssQ0FBQ3BFLElBQUksQ0FBQyxDQUFDO0VBQzVCLElBQUksQ0FBQ3FFLE9BQU8sRUFBRTtJQUNaLE9BQU8sSUFBSTtFQUNiO0VBQ0EsT0FBT0EsT0FBTyxDQUFDQyxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztBQUM5QjtBQUVBLFNBQVM5QixpQkFBaUJBLENBQUNaLFFBQStCLEVBQVU7RUFDbEUsS0FBSyxNQUFNMkMsT0FBTyxJQUFJM0MsUUFBUSxFQUFFO0lBQzlCLElBQUkyQyxPQUFPLENBQUNDLElBQUksS0FBSyxNQUFNLEVBQUU7TUFDM0I7SUFDRjtJQUNBLE1BQU1DLFNBQVMsR0FBR0YsT0FBTyxDQUFDRyxPQUFPLENBQUMxRSxJQUFJLENBQUMsQ0FBQyxDQUFDMkUsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7SUFDN0QsSUFBSUYsU0FBUyxFQUFFO01BQ2IsT0FBT0EsU0FBUyxDQUFDSCxLQUFLLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQztJQUNoQztFQUNGO0VBQ0EsT0FBTyxXQUFXLElBQUluRCxJQUFJLENBQUMsQ0FBQyxDQUFDeUQsY0FBYyxDQUFDLENBQUMsRUFBRTtBQUNqRDtBQUVBLFNBQVNDLFlBQVlBLENBQUEsRUFBUztFQUM1QixJQUFJO0lBQ0ZwRCxlQUFlLENBQUMsQ0FBQztJQUNqQixNQUFNbEIsS0FBSyxHQUFHQyxTQUFTLENBQUMsQ0FBQztJQUN6QixNQUFNc0UsS0FBSyxHQUFHLElBQUlDLEdBQUcsQ0FBQ3JFLE1BQU0sQ0FBQ3NFLElBQUksQ0FBQ3pFLEtBQUssQ0FBQ0UsT0FBTyxDQUFDLENBQUM7SUFDakQsS0FBSyxNQUFNd0UsSUFBSSxJQUFJLElBQUFDLG1CQUFXLEVBQUMvRSxXQUFXLENBQUMsRUFBRTtNQUMzQyxJQUFJLENBQUM4RSxJQUFJLENBQUNFLFFBQVEsQ0FBQyxPQUFPLENBQUMsRUFBRTtRQUMzQjtNQUNGO01BQ0EsSUFBSUYsSUFBSSxLQUFLLFlBQVksSUFBSUEsSUFBSSxDQUFDRyxRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUU7UUFDdkQ7TUFDRjtNQUNBLE1BQU1uRCxFQUFFLEdBQUdnRCxJQUFJLENBQUNYLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFDNUIsSUFBSSxDQUFDUSxLQUFLLENBQUNPLEdBQUcsQ0FBQ3BELEVBQUUsQ0FBQyxFQUFFO1FBQ2xCLE1BQU1xRCxTQUFTLEdBQUcsSUFBQXJGLGNBQUksRUFBQ0UsV0FBVyxFQUFFOEUsSUFBSSxDQUFDO1FBQ3pDLE1BQU1NLEtBQUssR0FBRyxJQUFBQyxnQkFBUSxFQUFDRixTQUFTLENBQUM7UUFDakMsSUFBSUMsS0FBSyxDQUFDRSxNQUFNLENBQUMsQ0FBQyxFQUFFO1VBQ2xCLElBQUE3QixjQUFNLEVBQUMwQixTQUFTLEVBQUU7WUFBRXpCLEtBQUssRUFBRTtVQUFLLENBQUMsQ0FBQztRQUNwQztNQUNGO0lBQ0Y7RUFDRixDQUFDLENBQUMsTUFBTTtJQUNOO0VBQUE7QUFFSjtBQUVBZ0IsWUFBWSxDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=