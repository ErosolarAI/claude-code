0179d1bc8c1d8bfd417be4a1492216c8
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.ensureNextSteps = ensureNextSteps;
/**
 * Ensures final assistant responses include a "Next steps" section.
 * Returns both the full output and any appended text so callers can stream just the delta.
 */

const NEXT_STEPS_HEADING = /(^|\n)\s*next steps?\s*:/i;
function ensureNextSteps(content) {
  const normalized = content?.trimEnd() ?? '';
  if (!normalized) {
    return {
      output: '',
      appended: null
    };
  }
  if (NEXT_STEPS_HEADING.test(normalized)) {
    return {
      output: normalized,
      appended: null
    };
  }
  const fallbackSteps = ['- I can run checks or prep a PR-style summary if needed.', '- Tell me if you want more changes or tests.', '- I can analyze the current state or suggest optimizations.', '- Let me know what specific actions you\'d like me to take.'];
  const appended = ['\n', 'Next steps:', ...fallbackSteps].join('\n');
  return {
    output: `${normalized}${appended}`,
    appended
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJORVhUX1NURVBTX0hFQURJTkciLCJlbnN1cmVOZXh0U3RlcHMiLCJjb250ZW50Iiwibm9ybWFsaXplZCIsInRyaW1FbmQiLCJvdXRwdXQiLCJhcHBlbmRlZCIsInRlc3QiLCJmYWxsYmFja1N0ZXBzIiwiam9pbiJdLCJzb3VyY2VzIjpbImZpbmFsUmVzcG9uc2VGb3JtYXR0ZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBFbnN1cmVzIGZpbmFsIGFzc2lzdGFudCByZXNwb25zZXMgaW5jbHVkZSBhIFwiTmV4dCBzdGVwc1wiIHNlY3Rpb24uXG4gKiBSZXR1cm5zIGJvdGggdGhlIGZ1bGwgb3V0cHV0IGFuZCBhbnkgYXBwZW5kZWQgdGV4dCBzbyBjYWxsZXJzIGNhbiBzdHJlYW0ganVzdCB0aGUgZGVsdGEuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgRmluYWxSZXNwb25zZUZvcm1hdCB7XG4gIG91dHB1dDogc3RyaW5nO1xuICBhcHBlbmRlZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuY29uc3QgTkVYVF9TVEVQU19IRUFESU5HID0gLyhefFxcbilcXHMqbmV4dCBzdGVwcz9cXHMqOi9pO1xuXG5leHBvcnQgZnVuY3Rpb24gZW5zdXJlTmV4dFN0ZXBzKGNvbnRlbnQ6IHN0cmluZyk6IEZpbmFsUmVzcG9uc2VGb3JtYXQge1xuICBjb25zdCBub3JtYWxpemVkID0gY29udGVudD8udHJpbUVuZCgpID8/ICcnO1xuICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICByZXR1cm4geyBvdXRwdXQ6ICcnLCBhcHBlbmRlZDogbnVsbCB9O1xuICB9XG5cbiAgaWYgKE5FWFRfU1RFUFNfSEVBRElORy50ZXN0KG5vcm1hbGl6ZWQpKSB7XG4gICAgcmV0dXJuIHsgb3V0cHV0OiBub3JtYWxpemVkLCBhcHBlbmRlZDogbnVsbCB9O1xuICB9XG5cbiAgY29uc3QgZmFsbGJhY2tTdGVwcyA9IFtcbiAgICAnLSBJIGNhbiBydW4gY2hlY2tzIG9yIHByZXAgYSBQUi1zdHlsZSBzdW1tYXJ5IGlmIG5lZWRlZC4nLFxuICAgICctIFRlbGwgbWUgaWYgeW91IHdhbnQgbW9yZSBjaGFuZ2VzIG9yIHRlc3RzLicsXG4gICAgJy0gSSBjYW4gYW5hbHl6ZSB0aGUgY3VycmVudCBzdGF0ZSBvciBzdWdnZXN0IG9wdGltaXphdGlvbnMuJyxcbiAgICAnLSBMZXQgbWUga25vdyB3aGF0IHNwZWNpZmljIGFjdGlvbnMgeW91XFwnZCBsaWtlIG1lIHRvIHRha2UuJyxcbiAgXTtcblxuICBjb25zdCBhcHBlbmRlZCA9IFsnXFxuJywgJ05leHQgc3RlcHM6JywgLi4uZmFsbGJhY2tTdGVwc10uam9pbignXFxuJyk7XG4gIHJldHVybiB7XG4gICAgb3V0cHV0OiBgJHtub3JtYWxpemVkfSR7YXBwZW5kZWR9YCxcbiAgICBhcHBlbmRlZCxcbiAgfTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7O0FBTUEsTUFBTUEsa0JBQWtCLEdBQUcsMkJBQTJCO0FBRS9DLFNBQVNDLGVBQWVBLENBQUNDLE9BQWUsRUFBdUI7RUFDcEUsTUFBTUMsVUFBVSxHQUFHRCxPQUFPLEVBQUVFLE9BQU8sQ0FBQyxDQUFDLElBQUksRUFBRTtFQUMzQyxJQUFJLENBQUNELFVBQVUsRUFBRTtJQUNmLE9BQU87TUFBRUUsTUFBTSxFQUFFLEVBQUU7TUFBRUMsUUFBUSxFQUFFO0lBQUssQ0FBQztFQUN2QztFQUVBLElBQUlOLGtCQUFrQixDQUFDTyxJQUFJLENBQUNKLFVBQVUsQ0FBQyxFQUFFO0lBQ3ZDLE9BQU87TUFBRUUsTUFBTSxFQUFFRixVQUFVO01BQUVHLFFBQVEsRUFBRTtJQUFLLENBQUM7RUFDL0M7RUFFQSxNQUFNRSxhQUFhLEdBQUcsQ0FDcEIsMERBQTBELEVBQzFELDhDQUE4QyxFQUM5Qyw2REFBNkQsRUFDN0QsNkRBQTZELENBQzlEO0VBRUQsTUFBTUYsUUFBUSxHQUFHLENBQUMsSUFBSSxFQUFFLGFBQWEsRUFBRSxHQUFHRSxhQUFhLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLElBQUksQ0FBQztFQUNuRSxPQUFPO0lBQ0xKLE1BQU0sRUFBRSxHQUFHRixVQUFVLEdBQUdHLFFBQVEsRUFBRTtJQUNsQ0E7RUFDRixDQUFDO0FBQ0giLCJpZ25vcmVMaXN0IjpbXX0=