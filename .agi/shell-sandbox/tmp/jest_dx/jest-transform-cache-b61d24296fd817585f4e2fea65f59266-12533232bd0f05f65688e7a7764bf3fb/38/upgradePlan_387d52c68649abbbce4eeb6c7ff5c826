e4bf657184dfb98f965f899c890047e9
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.buildDefaultSteps = buildDefaultSteps;
exports.buildRepoWidePlan = buildRepoWidePlan;
exports.detectWorkspaceModules = detectWorkspaceModules;
exports.expandWorkspacePattern = expandWorkspacePattern;
exports.parseWorkspaceField = parseWorkspaceField;
var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
/**
 * Build a repo-wide upgrade plan using common directories. Falls back to a single
 * catch-all module when no known scopes are found.
 */
function buildRepoWidePlan(workspaceRoot, additionalScopes = []) {
  const normalizedScopes = normalizeScopes(additionalScopes);
  const areas = [{
    id: 'source',
    label: 'Source',
    description: 'Core application and library code.',
    scope: ['src/**/*', 'lib/**/*'],
    candidates: ['src', 'lib'],
    codemodCommands: ['npx jscodeshift -t <transform> src'],
    validationCommands: ['npm run build', 'npm test']
  }, {
    id: 'tests',
    label: 'Tests',
    description: 'Unit, integration, and smoke tests.',
    scope: ['test/**/*', '__tests__/**/*'],
    candidates: ['test', '__tests__'],
    validationCommands: ['npm test -- --runInBand', 'npm run lint']
  }, {
    id: 'docs',
    label: 'Docs',
    description: 'Documentation and guides.',
    scope: ['docs/**/*', 'README.md'],
    candidates: ['docs', 'README.md']
  }, {
    id: 'scripts',
    label: 'Tooling Scripts',
    description: 'Build, migration, and maintenance scripts.',
    scope: ['scripts/**/*'],
    candidates: ['scripts'],
    validationCommands: ['npm run lint -- scripts/**/*.ts']
  }, {
    id: 'agents',
    label: 'Agents',
    description: 'Agent rules and behaviors.',
    scope: ['agents/**/*'],
    candidates: ['agents'],
    validationCommands: ['npm run build']
  }, {
    id: 'skills',
    label: 'Skills',
    description: 'Skill packs and reusable automation.',
    scope: ['skills/**/*'],
    candidates: ['skills'],
    validationCommands: ['npm run build']
  }, {
    id: 'examples',
    label: 'Examples',
    description: 'Example flows and templates.',
    scope: ['examples/**/*'],
    candidates: ['examples']
  }, {
    id: 'configs',
    label: 'Configuration',
    description: 'Configuration and deployment settings.',
    scope: ['config/**/*', '*.config.*', '*.rc', '*.json'],
    candidates: ['config']
  }];
  const modules = [];
  const workspaceModules = detectWorkspaceModules(workspaceRoot);

  // When scopes are provided, build a targeted plan instead of sweeping the repo.
  if (normalizedScopes.length) {
    for (const scope of normalizedScopes) {
      modules.push(buildCustomScopeModule(scope));
    }
    for (const module of workspaceModules) {
      if (moduleMatchesRequestedScopes(module.scope, normalizedScopes)) {
        modules.push(module);
      }
    }
    const deduped = dedupeModules(modules);
    if (deduped.length === 0) {
      deduped.push(buildCustomScopeModule(normalizedScopes[0] ?? 'repo'));
    }
    return {
      modules: deduped
    };
  }
  modules.push(...workspaceModules);
  for (const area of areas) {
    const matches = area.candidates.some(candidate => (0, _nodeFs.existsSync)((0, _nodePath.join)(workspaceRoot, candidate)));
    if (!matches) {
      continue;
    }
    modules.push({
      id: area.id,
      label: area.label,
      description: area.description,
      scope: area.scope,
      codemodCommands: area.codemodCommands,
      validationCommands: area.validationCommands,
      steps: buildDefaultSteps(area.id)
    });
  }
  if (modules.length === 0) {
    modules.push({
      id: 'repo-wide',
      label: 'Repository',
      description: 'Fallback repo-wide upgrade module.',
      scope: ['**/*'],
      steps: buildDefaultSteps('repo')
    });
  }
  return {
    modules
  };
}
function detectWorkspaceModules(workspaceRoot) {
  const pkgPath = (0, _nodePath.join)(workspaceRoot, 'package.json');
  if (!(0, _nodeFs.existsSync)(pkgPath)) {
    return [];
  }
  let workspaces = [];
  try {
    const pkg = JSON.parse((0, _nodeFs.readFileSync)(pkgPath, 'utf8'));
    workspaces = parseWorkspaceField(pkg?.workspaces);
  } catch {
    return [];
  }
  if (!workspaces.length) {
    return [];
  }
  const modules = [];
  const seen = new Set();
  for (const pattern of workspaces) {
    const paths = expandWorkspacePattern(workspaceRoot, pattern);
    for (const relPath of paths) {
      if (seen.has(relPath)) {
        continue;
      }
      seen.add(relPath);
      const cleanPath = relPath.replace(/\/+$/, '');
      const name = cleanPath.split('/').filter(Boolean).pop() ?? cleanPath;
      const normalizedPath = cleanPath.replace(/[/\\]+/g, '-');
      const slug = `workspace-${normalizedPath.replace(/[^\w-]+/g, '-').replace(/-+/g, '-').toLowerCase() || 'default'}`;
      modules.push({
        id: slug,
        label: `Workspace: ${name}`,
        description: `Upgrade tasks scoped to workspace "${name}" (${cleanPath}).`,
        scope: [`${cleanPath}/**/*`],
        validationCommands: [`npm test --workspace ${name} --if-present`, `npm run lint --workspace ${name} --if-present`],
        steps: buildDefaultSteps(slug)
      });
    }
  }
  return modules;
}
function parseWorkspaceField(value) {
  if (Array.isArray(value)) {
    return value.map(entry => typeof entry === 'string' ? entry.trim() : '').filter(Boolean);
  }
  if (value && typeof value === 'object') {
    const record = value;
    if (Array.isArray(record.packages)) {
      return record.packages.map(entry => typeof entry === 'string' ? entry.trim() : '').filter(Boolean);
    }
  }
  return [];
}
function expandWorkspacePattern(workspaceRoot, pattern) {
  const normalized = pattern.trim();
  if (!normalized) return [];
  if (!normalized.includes('*')) {
    const target = (0, _nodePath.join)(workspaceRoot, normalized);
    return (0, _nodeFs.existsSync)(target) ? [normalized] : [];
  }
  const base = normalized.split('*')[0]?.replace(/\/+$/, '') ?? '';
  if (!base) return [];
  const baseDir = (0, _nodePath.join)(workspaceRoot, base);
  if (!(0, _nodeFs.existsSync)(baseDir)) return [];
  try {
    const entries = (0, _nodeFs.readdirSync)(baseDir, {
      withFileTypes: true
    });
    return entries.filter(entry => entry.isDirectory()).map(entry => `${base}/${entry.name}`);
  } catch {
    return [];
  }
}
function buildDefaultSteps(moduleId) {
  return [{
    id: `${moduleId}-analyze`,
    intent: 'analyze',
    description: `Map the upgrade surface for ${moduleId}. Identify risky files and coupling.`,
    prompt: 'Inventory files, dependencies, and breaking-change areas before upgrading.'
  }, {
    id: `${moduleId}-upgrade`,
    intent: 'upgrade',
    description: `Apply modular upgrades for ${moduleId} with minimal blast radius.`,
    prompt: 'Execute codemods or targeted edits. Keep edits small, atomic, and well scoped.'
  }, {
    id: `${moduleId}-verify`,
    intent: 'verify',
    description: `Validate ${moduleId} after the upgrade.`,
    prompt: 'Run tests/lint/health checks relevant to this scope. Summarize residual risks.'
  }];
}
function normalizeScopeValue(scope) {
  return scope.replace(/^[./\\]+/, '').replace(/[/\\]+$/, '').trim();
}
function normalizeScopes(scopes) {
  return scopes.map(normalizeScopeValue).filter(Boolean);
}
function stripGlob(scope) {
  return scope.replace(/\*\*/g, '').replace(/\*/g, '').replace(/\[[^\]]*]/g, '').replace(/[/\\]+$/, '');
}
function moduleMatchesRequestedScopes(moduleScope, requestedScopes) {
  if (!requestedScopes.length) return true;
  const normalizedModuleScopes = moduleScope.map(scope => normalizeScopeValue(stripGlob(scope))).filter(Boolean);
  return requestedScopes.some(requested => normalizedModuleScopes.some(modulePath => modulePath === requested || modulePath.startsWith(`${requested}/`) || requested.startsWith(`${modulePath}/`)));
}
function buildCustomScopeModule(scope) {
  const slug = scope.replace(/[^\w]/g, '-').toLowerCase() || 'custom';
  return {
    id: `custom-${slug}`,
    label: `Custom: ${scope}`,
    description: `User-specified scope: ${scope}`,
    scope: [`${scope}/**/*`],
    validationCommands: ['npm run build', 'npm test'],
    steps: buildDefaultSteps(`custom-${slug}`)
  };
}
function dedupeModules(modules) {
  const seen = new Set();
  const result = [];
  for (const module of modules) {
    if (seen.has(module.id)) continue;
    seen.add(module.id);
    result.push(module);
  }
  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9ub2RlUGF0aCIsImJ1aWxkUmVwb1dpZGVQbGFuIiwid29ya3NwYWNlUm9vdCIsImFkZGl0aW9uYWxTY29wZXMiLCJub3JtYWxpemVkU2NvcGVzIiwibm9ybWFsaXplU2NvcGVzIiwiYXJlYXMiLCJpZCIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJzY29wZSIsImNhbmRpZGF0ZXMiLCJjb2RlbW9kQ29tbWFuZHMiLCJ2YWxpZGF0aW9uQ29tbWFuZHMiLCJtb2R1bGVzIiwid29ya3NwYWNlTW9kdWxlcyIsImRldGVjdFdvcmtzcGFjZU1vZHVsZXMiLCJsZW5ndGgiLCJwdXNoIiwiYnVpbGRDdXN0b21TY29wZU1vZHVsZSIsIm1vZHVsZSIsIm1vZHVsZU1hdGNoZXNSZXF1ZXN0ZWRTY29wZXMiLCJkZWR1cGVkIiwiZGVkdXBlTW9kdWxlcyIsImFyZWEiLCJtYXRjaGVzIiwic29tZSIsImNhbmRpZGF0ZSIsImV4aXN0c1N5bmMiLCJqb2luIiwic3RlcHMiLCJidWlsZERlZmF1bHRTdGVwcyIsInBrZ1BhdGgiLCJ3b3Jrc3BhY2VzIiwicGtnIiwiSlNPTiIsInBhcnNlIiwicmVhZEZpbGVTeW5jIiwicGFyc2VXb3Jrc3BhY2VGaWVsZCIsInNlZW4iLCJTZXQiLCJwYXR0ZXJuIiwicGF0aHMiLCJleHBhbmRXb3Jrc3BhY2VQYXR0ZXJuIiwicmVsUGF0aCIsImhhcyIsImFkZCIsImNsZWFuUGF0aCIsInJlcGxhY2UiLCJuYW1lIiwic3BsaXQiLCJmaWx0ZXIiLCJCb29sZWFuIiwicG9wIiwibm9ybWFsaXplZFBhdGgiLCJzbHVnIiwidG9Mb3dlckNhc2UiLCJ2YWx1ZSIsIkFycmF5IiwiaXNBcnJheSIsIm1hcCIsImVudHJ5IiwidHJpbSIsInJlY29yZCIsInBhY2thZ2VzIiwibm9ybWFsaXplZCIsImluY2x1ZGVzIiwidGFyZ2V0IiwiYmFzZSIsImJhc2VEaXIiLCJlbnRyaWVzIiwicmVhZGRpclN5bmMiLCJ3aXRoRmlsZVR5cGVzIiwiaXNEaXJlY3RvcnkiLCJtb2R1bGVJZCIsImludGVudCIsInByb21wdCIsIm5vcm1hbGl6ZVNjb3BlVmFsdWUiLCJzY29wZXMiLCJzdHJpcEdsb2IiLCJtb2R1bGVTY29wZSIsInJlcXVlc3RlZFNjb3BlcyIsIm5vcm1hbGl6ZWRNb2R1bGVTY29wZXMiLCJyZXF1ZXN0ZWQiLCJtb2R1bGVQYXRoIiwic3RhcnRzV2l0aCIsInJlc3VsdCJdLCJzb3VyY2VzIjpbInVwZ3JhZGVQbGFuLnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGV4aXN0c1N5bmMsIHJlYWRGaWxlU3luYywgcmVhZGRpclN5bmMgfSBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IGpvaW4gfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHR5cGUgeyBSZXBvVXBncmFkZU1vZHVsZSwgUmVwb1VwZ3JhZGVQbGFuLCBSZXBvVXBncmFkZVN0ZXAgfSBmcm9tICcuL3JlcG9VcGdyYWRlT3JjaGVzdHJhdG9yLmpzJztcblxuLyoqXG4gKiBCdWlsZCBhIHJlcG8td2lkZSB1cGdyYWRlIHBsYW4gdXNpbmcgY29tbW9uIGRpcmVjdG9yaWVzLiBGYWxscyBiYWNrIHRvIGEgc2luZ2xlXG4gKiBjYXRjaC1hbGwgbW9kdWxlIHdoZW4gbm8ga25vd24gc2NvcGVzIGFyZSBmb3VuZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkUmVwb1dpZGVQbGFuKHdvcmtzcGFjZVJvb3Q6IHN0cmluZywgYWRkaXRpb25hbFNjb3Blczogc3RyaW5nW10gPSBbXSk6IFJlcG9VcGdyYWRlUGxhbiB7XG4gIGNvbnN0IG5vcm1hbGl6ZWRTY29wZXMgPSBub3JtYWxpemVTY29wZXMoYWRkaXRpb25hbFNjb3Blcyk7XG4gIGNvbnN0IGFyZWFzOiBBcnJheTx7XG4gICAgaWQ6IHN0cmluZztcbiAgICBsYWJlbDogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgc2NvcGU6IHN0cmluZ1tdO1xuICAgIGNhbmRpZGF0ZXM6IHN0cmluZ1tdO1xuICAgIGNvZGVtb2RDb21tYW5kcz86IHN0cmluZ1tdO1xuICAgIHZhbGlkYXRpb25Db21tYW5kcz86IHN0cmluZ1tdO1xuICB9PiA9IFtcbiAgICB7XG4gICAgICBpZDogJ3NvdXJjZScsXG4gICAgICBsYWJlbDogJ1NvdXJjZScsXG4gICAgICBkZXNjcmlwdGlvbjogJ0NvcmUgYXBwbGljYXRpb24gYW5kIGxpYnJhcnkgY29kZS4nLFxuICAgICAgc2NvcGU6IFsnc3JjLyoqLyonLCAnbGliLyoqLyonXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsnc3JjJywgJ2xpYiddLFxuICAgICAgY29kZW1vZENvbW1hbmRzOiBbJ25weCBqc2NvZGVzaGlmdCAtdCA8dHJhbnNmb3JtPiBzcmMnXSxcbiAgICAgIHZhbGlkYXRpb25Db21tYW5kczogWyducG0gcnVuIGJ1aWxkJywgJ25wbSB0ZXN0J10sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ3Rlc3RzJyxcbiAgICAgIGxhYmVsOiAnVGVzdHMnLFxuICAgICAgZGVzY3JpcHRpb246ICdVbml0LCBpbnRlZ3JhdGlvbiwgYW5kIHNtb2tlIHRlc3RzLicsXG4gICAgICBzY29wZTogWyd0ZXN0LyoqLyonLCAnX190ZXN0c19fLyoqLyonXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsndGVzdCcsICdfX3Rlc3RzX18nXSxcbiAgICAgIHZhbGlkYXRpb25Db21tYW5kczogWyducG0gdGVzdCAtLSAtLXJ1bkluQmFuZCcsICducG0gcnVuIGxpbnQnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnZG9jcycsXG4gICAgICBsYWJlbDogJ0RvY3MnLFxuICAgICAgZGVzY3JpcHRpb246ICdEb2N1bWVudGF0aW9uIGFuZCBndWlkZXMuJyxcbiAgICAgIHNjb3BlOiBbJ2RvY3MvKiovKicsICdSRUFETUUubWQnXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsnZG9jcycsICdSRUFETUUubWQnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnc2NyaXB0cycsXG4gICAgICBsYWJlbDogJ1Rvb2xpbmcgU2NyaXB0cycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0J1aWxkLCBtaWdyYXRpb24sIGFuZCBtYWludGVuYW5jZSBzY3JpcHRzLicsXG4gICAgICBzY29wZTogWydzY3JpcHRzLyoqLyonXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsnc2NyaXB0cyddLFxuICAgICAgdmFsaWRhdGlvbkNvbW1hbmRzOiBbJ25wbSBydW4gbGludCAtLSBzY3JpcHRzLyoqLyoudHMnXSxcbiAgICB9LFxuICAgIHtcbiAgICAgIGlkOiAnYWdlbnRzJyxcbiAgICAgIGxhYmVsOiAnQWdlbnRzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWdlbnQgcnVsZXMgYW5kIGJlaGF2aW9ycy4nLFxuICAgICAgc2NvcGU6IFsnYWdlbnRzLyoqLyonXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsnYWdlbnRzJ10sXG4gICAgICB2YWxpZGF0aW9uQ29tbWFuZHM6IFsnbnBtIHJ1biBidWlsZCddLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdza2lsbHMnLFxuICAgICAgbGFiZWw6ICdTa2lsbHMnLFxuICAgICAgZGVzY3JpcHRpb246ICdTa2lsbCBwYWNrcyBhbmQgcmV1c2FibGUgYXV0b21hdGlvbi4nLFxuICAgICAgc2NvcGU6IFsnc2tpbGxzLyoqLyonXSxcbiAgICAgIGNhbmRpZGF0ZXM6IFsnc2tpbGxzJ10sXG4gICAgICB2YWxpZGF0aW9uQ29tbWFuZHM6IFsnbnBtIHJ1biBidWlsZCddLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6ICdleGFtcGxlcycsXG4gICAgICBsYWJlbDogJ0V4YW1wbGVzJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnRXhhbXBsZSBmbG93cyBhbmQgdGVtcGxhdGVzLicsXG4gICAgICBzY29wZTogWydleGFtcGxlcy8qKi8qJ10sXG4gICAgICBjYW5kaWRhdGVzOiBbJ2V4YW1wbGVzJ10sXG4gICAgfSxcbiAgICB7XG4gICAgICBpZDogJ2NvbmZpZ3MnLFxuICAgICAgbGFiZWw6ICdDb25maWd1cmF0aW9uJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQ29uZmlndXJhdGlvbiBhbmQgZGVwbG95bWVudCBzZXR0aW5ncy4nLFxuICAgICAgc2NvcGU6IFsnY29uZmlnLyoqLyonLCAnKi5jb25maWcuKicsICcqLnJjJywgJyouanNvbiddLFxuICAgICAgY2FuZGlkYXRlczogWydjb25maWcnXSxcbiAgICB9LFxuICBdO1xuXG4gIGNvbnN0IG1vZHVsZXM6IFJlcG9VcGdyYWRlTW9kdWxlW10gPSBbXTtcbiAgY29uc3Qgd29ya3NwYWNlTW9kdWxlcyA9IGRldGVjdFdvcmtzcGFjZU1vZHVsZXMod29ya3NwYWNlUm9vdCk7XG5cbiAgLy8gV2hlbiBzY29wZXMgYXJlIHByb3ZpZGVkLCBidWlsZCBhIHRhcmdldGVkIHBsYW4gaW5zdGVhZCBvZiBzd2VlcGluZyB0aGUgcmVwby5cbiAgaWYgKG5vcm1hbGl6ZWRTY29wZXMubGVuZ3RoKSB7XG4gICAgZm9yIChjb25zdCBzY29wZSBvZiBub3JtYWxpemVkU2NvcGVzKSB7XG4gICAgICBtb2R1bGVzLnB1c2goYnVpbGRDdXN0b21TY29wZU1vZHVsZShzY29wZSkpO1xuICAgIH1cblxuICAgIGZvciAoY29uc3QgbW9kdWxlIG9mIHdvcmtzcGFjZU1vZHVsZXMpIHtcbiAgICAgIGlmIChtb2R1bGVNYXRjaGVzUmVxdWVzdGVkU2NvcGVzKG1vZHVsZS5zY29wZSwgbm9ybWFsaXplZFNjb3BlcykpIHtcbiAgICAgICAgbW9kdWxlcy5wdXNoKG1vZHVsZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgZGVkdXBlZCA9IGRlZHVwZU1vZHVsZXMobW9kdWxlcyk7XG4gICAgaWYgKGRlZHVwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICBkZWR1cGVkLnB1c2goYnVpbGRDdXN0b21TY29wZU1vZHVsZShub3JtYWxpemVkU2NvcGVzWzBdID8/ICdyZXBvJykpO1xuICAgIH1cblxuICAgIHJldHVybiB7IG1vZHVsZXM6IGRlZHVwZWQgfTtcbiAgfVxuXG4gIG1vZHVsZXMucHVzaCguLi53b3Jrc3BhY2VNb2R1bGVzKTtcblxuICBmb3IgKGNvbnN0IGFyZWEgb2YgYXJlYXMpIHtcbiAgICBjb25zdCBtYXRjaGVzID0gYXJlYS5jYW5kaWRhdGVzLnNvbWUoKGNhbmRpZGF0ZSkgPT4gZXhpc3RzU3luYyhqb2luKHdvcmtzcGFjZVJvb3QsIGNhbmRpZGF0ZSkpKTtcbiAgICBpZiAoIW1hdGNoZXMpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBtb2R1bGVzLnB1c2goe1xuICAgICAgaWQ6IGFyZWEuaWQsXG4gICAgICBsYWJlbDogYXJlYS5sYWJlbCxcbiAgICAgIGRlc2NyaXB0aW9uOiBhcmVhLmRlc2NyaXB0aW9uLFxuICAgICAgc2NvcGU6IGFyZWEuc2NvcGUsXG4gICAgICBjb2RlbW9kQ29tbWFuZHM6IGFyZWEuY29kZW1vZENvbW1hbmRzLFxuICAgICAgdmFsaWRhdGlvbkNvbW1hbmRzOiBhcmVhLnZhbGlkYXRpb25Db21tYW5kcyxcbiAgICAgIHN0ZXBzOiBidWlsZERlZmF1bHRTdGVwcyhhcmVhLmlkKSxcbiAgICB9KTtcbiAgfVxuXG4gIGlmIChtb2R1bGVzLmxlbmd0aCA9PT0gMCkge1xuICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICBpZDogJ3JlcG8td2lkZScsXG4gICAgICBsYWJlbDogJ1JlcG9zaXRvcnknLFxuICAgICAgZGVzY3JpcHRpb246ICdGYWxsYmFjayByZXBvLXdpZGUgdXBncmFkZSBtb2R1bGUuJyxcbiAgICAgIHNjb3BlOiBbJyoqLyonXSxcbiAgICAgIHN0ZXBzOiBidWlsZERlZmF1bHRTdGVwcygncmVwbycpLFxuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHsgbW9kdWxlcyB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0V29ya3NwYWNlTW9kdWxlcyh3b3Jrc3BhY2VSb290OiBzdHJpbmcpOiBSZXBvVXBncmFkZU1vZHVsZVtdIHtcbiAgY29uc3QgcGtnUGF0aCA9IGpvaW4od29ya3NwYWNlUm9vdCwgJ3BhY2thZ2UuanNvbicpO1xuICBpZiAoIWV4aXN0c1N5bmMocGtnUGF0aCkpIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBsZXQgd29ya3NwYWNlczogc3RyaW5nW10gPSBbXTtcbiAgdHJ5IHtcbiAgICBjb25zdCBwa2cgPSBKU09OLnBhcnNlKHJlYWRGaWxlU3luYyhwa2dQYXRoLCAndXRmOCcpKTtcbiAgICB3b3Jrc3BhY2VzID0gcGFyc2VXb3Jrc3BhY2VGaWVsZChwa2c/LndvcmtzcGFjZXMpO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBpZiAoIXdvcmtzcGFjZXMubGVuZ3RoKSB7XG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgY29uc3QgbW9kdWxlczogUmVwb1VwZ3JhZGVNb2R1bGVbXSA9IFtdO1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG5cbiAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIHdvcmtzcGFjZXMpIHtcbiAgICBjb25zdCBwYXRocyA9IGV4cGFuZFdvcmtzcGFjZVBhdHRlcm4od29ya3NwYWNlUm9vdCwgcGF0dGVybik7XG4gICAgZm9yIChjb25zdCByZWxQYXRoIG9mIHBhdGhzKSB7XG4gICAgICBpZiAoc2Vlbi5oYXMocmVsUGF0aCkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVuLmFkZChyZWxQYXRoKTtcblxuICAgICAgY29uc3QgY2xlYW5QYXRoID0gcmVsUGF0aC5yZXBsYWNlKC9cXC8rJC8sICcnKTtcbiAgICAgIGNvbnN0IG5hbWUgPSBjbGVhblBhdGguc3BsaXQoJy8nKS5maWx0ZXIoQm9vbGVhbikucG9wKCkgPz8gY2xlYW5QYXRoO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBjbGVhblBhdGgucmVwbGFjZSgvWy9cXFxcXSsvZywgJy0nKTtcbiAgICAgIGNvbnN0IHNsdWcgPSBgd29ya3NwYWNlLSR7bm9ybWFsaXplZFBhdGgucmVwbGFjZSgvW15cXHctXSsvZywgJy0nKS5yZXBsYWNlKC8tKy9nLCAnLScpLnRvTG93ZXJDYXNlKCkgfHwgJ2RlZmF1bHQnfWA7XG5cbiAgICAgIG1vZHVsZXMucHVzaCh7XG4gICAgICAgIGlkOiBzbHVnLFxuICAgICAgICBsYWJlbDogYFdvcmtzcGFjZTogJHtuYW1lfWAsXG4gICAgICAgIGRlc2NyaXB0aW9uOiBgVXBncmFkZSB0YXNrcyBzY29wZWQgdG8gd29ya3NwYWNlIFwiJHtuYW1lfVwiICgke2NsZWFuUGF0aH0pLmAsXG4gICAgICAgIHNjb3BlOiBbYCR7Y2xlYW5QYXRofS8qKi8qYF0sXG4gICAgICAgIHZhbGlkYXRpb25Db21tYW5kczogW1xuICAgICAgICAgIGBucG0gdGVzdCAtLXdvcmtzcGFjZSAke25hbWV9IC0taWYtcHJlc2VudGAsXG4gICAgICAgICAgYG5wbSBydW4gbGludCAtLXdvcmtzcGFjZSAke25hbWV9IC0taWYtcHJlc2VudGAsXG4gICAgICAgIF0sXG4gICAgICAgIHN0ZXBzOiBidWlsZERlZmF1bHRTdGVwcyhzbHVnKSxcbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBtb2R1bGVzO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcGFyc2VXb3Jrc3BhY2VGaWVsZCh2YWx1ZTogdW5rbm93bik6IHN0cmluZ1tdIHtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlLm1hcCgoZW50cnkpID0+ICh0eXBlb2YgZW50cnkgPT09ICdzdHJpbmcnID8gZW50cnkudHJpbSgpIDogJycpKS5maWx0ZXIoQm9vbGVhbik7XG4gIH1cbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBjb25zdCByZWNvcmQgPSB2YWx1ZSBhcyB7IHBhY2thZ2VzPzogdW5rbm93biB9O1xuICAgIGlmIChBcnJheS5pc0FycmF5KHJlY29yZC5wYWNrYWdlcykpIHtcbiAgICAgIHJldHVybiByZWNvcmQucGFja2FnZXMubWFwKChlbnRyeSkgPT4gKHR5cGVvZiBlbnRyeSA9PT0gJ3N0cmluZycgPyBlbnRyeS50cmltKCkgOiAnJykpLmZpbHRlcihCb29sZWFuKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZXhwYW5kV29ya3NwYWNlUGF0dGVybih3b3Jrc3BhY2VSb290OiBzdHJpbmcsIHBhdHRlcm46IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgY29uc3Qgbm9ybWFsaXplZCA9IHBhdHRlcm4udHJpbSgpO1xuICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybiBbXTtcblxuICBpZiAoIW5vcm1hbGl6ZWQuaW5jbHVkZXMoJyonKSkge1xuICAgIGNvbnN0IHRhcmdldCA9IGpvaW4od29ya3NwYWNlUm9vdCwgbm9ybWFsaXplZCk7XG4gICAgcmV0dXJuIGV4aXN0c1N5bmModGFyZ2V0KSA/IFtub3JtYWxpemVkXSA6IFtdO1xuICB9XG5cbiAgY29uc3QgYmFzZSA9IG5vcm1hbGl6ZWQuc3BsaXQoJyonKVswXT8ucmVwbGFjZSgvXFwvKyQvLCAnJykgPz8gJyc7XG4gIGlmICghYmFzZSkgcmV0dXJuIFtdO1xuXG4gIGNvbnN0IGJhc2VEaXIgPSBqb2luKHdvcmtzcGFjZVJvb3QsIGJhc2UpO1xuICBpZiAoIWV4aXN0c1N5bmMoYmFzZURpcikpIHJldHVybiBbXTtcblxuICB0cnkge1xuICAgIGNvbnN0IGVudHJpZXMgPSByZWFkZGlyU3luYyhiYXNlRGlyLCB7IHdpdGhGaWxlVHlwZXM6IHRydWUgfSk7XG4gICAgcmV0dXJuIGVudHJpZXMuZmlsdGVyKChlbnRyeSkgPT4gZW50cnkuaXNEaXJlY3RvcnkoKSkubWFwKChlbnRyeSkgPT4gYCR7YmFzZX0vJHtlbnRyeS5uYW1lfWApO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkRGVmYXVsdFN0ZXBzKG1vZHVsZUlkOiBzdHJpbmcpOiBSZXBvVXBncmFkZVN0ZXBbXSB7XG4gIHJldHVybiBbXG4gICAge1xuICAgICAgaWQ6IGAke21vZHVsZUlkfS1hbmFseXplYCxcbiAgICAgIGludGVudDogJ2FuYWx5emUnLFxuICAgICAgZGVzY3JpcHRpb246IGBNYXAgdGhlIHVwZ3JhZGUgc3VyZmFjZSBmb3IgJHttb2R1bGVJZH0uIElkZW50aWZ5IHJpc2t5IGZpbGVzIGFuZCBjb3VwbGluZy5gLFxuICAgICAgcHJvbXB0OiAnSW52ZW50b3J5IGZpbGVzLCBkZXBlbmRlbmNpZXMsIGFuZCBicmVha2luZy1jaGFuZ2UgYXJlYXMgYmVmb3JlIHVwZ3JhZGluZy4nLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGAke21vZHVsZUlkfS11cGdyYWRlYCxcbiAgICAgIGludGVudDogJ3VwZ3JhZGUnLFxuICAgICAgZGVzY3JpcHRpb246IGBBcHBseSBtb2R1bGFyIHVwZ3JhZGVzIGZvciAke21vZHVsZUlkfSB3aXRoIG1pbmltYWwgYmxhc3QgcmFkaXVzLmAsXG4gICAgICBwcm9tcHQ6ICdFeGVjdXRlIGNvZGVtb2RzIG9yIHRhcmdldGVkIGVkaXRzLiBLZWVwIGVkaXRzIHNtYWxsLCBhdG9taWMsIGFuZCB3ZWxsIHNjb3BlZC4nLFxuICAgIH0sXG4gICAge1xuICAgICAgaWQ6IGAke21vZHVsZUlkfS12ZXJpZnlgLFxuICAgICAgaW50ZW50OiAndmVyaWZ5JyxcbiAgICAgIGRlc2NyaXB0aW9uOiBgVmFsaWRhdGUgJHttb2R1bGVJZH0gYWZ0ZXIgdGhlIHVwZ3JhZGUuYCxcbiAgICAgIHByb21wdDogJ1J1biB0ZXN0cy9saW50L2hlYWx0aCBjaGVja3MgcmVsZXZhbnQgdG8gdGhpcyBzY29wZS4gU3VtbWFyaXplIHJlc2lkdWFsIHJpc2tzLicsXG4gICAgfSxcbiAgXTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplU2NvcGVWYWx1ZShzY29wZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIHNjb3BlLnJlcGxhY2UoL15bLi9cXFxcXSsvLCAnJykucmVwbGFjZSgvWy9cXFxcXSskLywgJycpLnRyaW0oKTtcbn1cblxuZnVuY3Rpb24gbm9ybWFsaXplU2NvcGVzKHNjb3Blczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIHJldHVybiBzY29wZXMubWFwKG5vcm1hbGl6ZVNjb3BlVmFsdWUpLmZpbHRlcihCb29sZWFuKTtcbn1cblxuZnVuY3Rpb24gc3RyaXBHbG9iKHNjb3BlOiBzdHJpbmcpOiBzdHJpbmcge1xuICByZXR1cm4gc2NvcGUucmVwbGFjZSgvXFwqXFwqL2csICcnKS5yZXBsYWNlKC9cXCovZywgJycpLnJlcGxhY2UoL1xcW1teXFxdXSpdL2csICcnKS5yZXBsYWNlKC9bL1xcXFxdKyQvLCAnJyk7XG59XG5cbmZ1bmN0aW9uIG1vZHVsZU1hdGNoZXNSZXF1ZXN0ZWRTY29wZXMobW9kdWxlU2NvcGU6IHN0cmluZ1tdLCByZXF1ZXN0ZWRTY29wZXM6IHN0cmluZ1tdKTogYm9vbGVhbiB7XG4gIGlmICghcmVxdWVzdGVkU2NvcGVzLmxlbmd0aCkgcmV0dXJuIHRydWU7XG4gIGNvbnN0IG5vcm1hbGl6ZWRNb2R1bGVTY29wZXMgPSBtb2R1bGVTY29wZVxuICAgIC5tYXAoKHNjb3BlKSA9PiBub3JtYWxpemVTY29wZVZhbHVlKHN0cmlwR2xvYihzY29wZSkpKVxuICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgcmV0dXJuIHJlcXVlc3RlZFNjb3Blcy5zb21lKChyZXF1ZXN0ZWQpID0+XG4gICAgbm9ybWFsaXplZE1vZHVsZVNjb3Blcy5zb21lKFxuICAgICAgKG1vZHVsZVBhdGgpID0+XG4gICAgICAgIG1vZHVsZVBhdGggPT09IHJlcXVlc3RlZCB8fFxuICAgICAgICBtb2R1bGVQYXRoLnN0YXJ0c1dpdGgoYCR7cmVxdWVzdGVkfS9gKSB8fFxuICAgICAgICByZXF1ZXN0ZWQuc3RhcnRzV2l0aChgJHttb2R1bGVQYXRofS9gKVxuICAgIClcbiAgKTtcbn1cblxuZnVuY3Rpb24gYnVpbGRDdXN0b21TY29wZU1vZHVsZShzY29wZTogc3RyaW5nKTogUmVwb1VwZ3JhZGVNb2R1bGUge1xuICBjb25zdCBzbHVnID0gc2NvcGUucmVwbGFjZSgvW15cXHddL2csICctJykudG9Mb3dlckNhc2UoKSB8fCAnY3VzdG9tJztcbiAgcmV0dXJuIHtcbiAgICBpZDogYGN1c3RvbS0ke3NsdWd9YCxcbiAgICBsYWJlbDogYEN1c3RvbTogJHtzY29wZX1gLFxuICAgIGRlc2NyaXB0aW9uOiBgVXNlci1zcGVjaWZpZWQgc2NvcGU6ICR7c2NvcGV9YCxcbiAgICBzY29wZTogW2Ake3Njb3BlfS8qKi8qYF0sXG4gICAgdmFsaWRhdGlvbkNvbW1hbmRzOiBbJ25wbSBydW4gYnVpbGQnLCAnbnBtIHRlc3QnXSxcbiAgICBzdGVwczogYnVpbGREZWZhdWx0U3RlcHMoYGN1c3RvbS0ke3NsdWd9YCksXG4gIH07XG59XG5cbmZ1bmN0aW9uIGRlZHVwZU1vZHVsZXMobW9kdWxlczogUmVwb1VwZ3JhZGVNb2R1bGVbXSk6IFJlcG9VcGdyYWRlTW9kdWxlW10ge1xuICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gIGNvbnN0IHJlc3VsdDogUmVwb1VwZ3JhZGVNb2R1bGVbXSA9IFtdO1xuICBmb3IgKGNvbnN0IG1vZHVsZSBvZiBtb2R1bGVzKSB7XG4gICAgaWYgKHNlZW4uaGFzKG1vZHVsZS5pZCkpIGNvbnRpbnVlO1xuICAgIHNlZW4uYWRkKG1vZHVsZS5pZCk7XG4gICAgcmVzdWx0LnB1c2gobW9kdWxlKTtcbiAgfVxuICByZXR1cm4gcmVzdWx0O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsU0FBQSxHQUFBRCxPQUFBO0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTRSxpQkFBaUJBLENBQUNDLGFBQXFCLEVBQUVDLGdCQUEwQixHQUFHLEVBQUUsRUFBbUI7RUFDekcsTUFBTUMsZ0JBQWdCLEdBQUdDLGVBQWUsQ0FBQ0YsZ0JBQWdCLENBQUM7RUFDMUQsTUFBTUcsS0FRSixHQUFHLENBQ0g7SUFDRUMsRUFBRSxFQUFFLFFBQVE7SUFDWkMsS0FBSyxF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