{"version":3,"names":["_nodeFs","require","_nodePath","buildRepoWidePlan","workspaceRoot","additionalScopes","normalizedScopes","normalizeScopes","areas","id","label","description","scope","candidates","codemodCommands","validationCommands","modules","workspaceModules","detectWorkspaceModules","length","push","buildCustomScopeModule","module","moduleMatchesRequestedScopes","deduped","dedupeModules","area","matches","some","candidate","existsSync","join","steps","buildDefaultSteps","pkgPath","workspaces","pkg","JSON","parse","readFileSync","parseWorkspaceField","seen","Set","pattern","paths","expandWorkspacePattern","relPath","has","add","cleanPath","replace","name","split","filter","Boolean","pop","normalizedPath","slug","toLowerCase","value","Array","isArray","map","entry","trim","record","packages","normalized","includes","target","base","baseDir","entries","readdirSync","withFileTypes","isDirectory","moduleId","intent","prompt","normalizeScopeValue","scopes","stripGlob","moduleScope","requestedScopes","normalizedModuleScopes","requested","modulePath","startsWith","result"],"sources":["upgradePlan.ts"],"sourcesContent":["import { existsSync, readFileSync, readdirSync } from 'node:fs';\nimport { join } from 'node:path';\nimport type { RepoUpgradeModule, RepoUpgradePlan, RepoUpgradeStep } from './repoUpgradeOrchestrator.js';\n\n/**\n * Build a repo-wide upgrade plan using common directories. Falls back to a single\n * catch-all module when no known scopes are found.\n */\nexport function buildRepoWidePlan(workspaceRoot: string, additionalScopes: string[] = []): RepoUpgradePlan {\n  const normalizedScopes = normalizeScopes(additionalScopes);\n  const areas: Array<{\n    id: string;\n    label: string;\n    description: string;\n    scope: string[];\n    candidates: string[];\n    codemodCommands?: string[];\n    validationCommands?: string[];\n  }> = [\n    {\n      id: 'source',\n      label: 'Source',\n      description: 'Core application and library code.',\n      scope: ['src/**/*', 'lib/**/*'],\n      candidates: ['src', 'lib'],\n      codemodCommands: ['npx jscodeshift -t <transform> src'],\n      validationCommands: ['npm run build', 'npm test'],\n    },\n    {\n      id: 'tests',\n      label: 'Tests',\n      description: 'Unit, integration, and smoke tests.',\n      scope: ['test/**/*', '__tests__/**/*'],\n      candidates: ['test', '__tests__'],\n      validationCommands: ['npm test -- --runInBand', 'npm run lint'],\n    },\n    {\n      id: 'docs',\n      label: 'Docs',\n      description: 'Documentation and guides.',\n      scope: ['docs/**/*', 'README.md'],\n      candidates: ['docs', 'README.md'],\n    },\n    {\n      id: 'scripts',\n      label: 'Tooling Scripts',\n      description: 'Build, migration, and maintenance scripts.',\n      scope: ['scripts/**/*'],\n      candidates: ['scripts'],\n      validationCommands: ['npm run lint -- scripts/**/*.ts'],\n    },\n    {\n      id: 'agents',\n      label: 'Agents',\n      description: 'Agent rules and behaviors.',\n      scope: ['agents/**/*'],\n      candidates: ['agents'],\n      validationCommands: ['npm run build'],\n    },\n    {\n      id: 'skills',\n      label: 'Skills',\n      description: 'Skill packs and reusable automation.',\n      scope: ['skills/**/*'],\n      candidates: ['skills'],\n      validationCommands: ['npm run build'],\n    },\n    {\n      id: 'examples',\n      label: 'Examples',\n      description: 'Example flows and templates.',\n      scope: ['examples/**/*'],\n      candidates: ['examples'],\n    },\n    {\n      id: 'configs',\n      label: 'Configuration',\n      description: 'Configuration and deployment settings.',\n      scope: ['config/**/*', '*.config.*', '*.rc', '*.json'],\n      candidates: ['config'],\n    },\n  ];\n\n  const modules: RepoUpgradeModule[] = [];\n  const workspaceModules = detectWorkspaceModules(workspaceRoot);\n\n  // When scopes are provided, build a targeted plan instead of sweeping the repo.\n  if (normalizedScopes.length) {\n    for (const scope of normalizedScopes) {\n      modules.push(buildCustomScopeModule(scope));\n    }\n\n    for (const module of workspaceModules) {\n      if (moduleMatchesRequestedScopes(module.scope, normalizedScopes)) {\n        modules.push(module);\n      }\n    }\n\n    const deduped = dedupeModules(modules);\n    if (deduped.length === 0) {\n      deduped.push(buildCustomScopeModule(normalizedScopes[0] ?? 'repo'));\n    }\n\n    return { modules: deduped };\n  }\n\n  modules.push(...workspaceModules);\n\n  for (const area of areas) {\n    const matches = area.candidates.some((candidate) => existsSync(join(workspaceRoot, candidate)));\n    if (!matches) {\n      continue;\n    }\n    modules.push({\n      id: area.id,\n      label: area.label,\n      description: area.description,\n      scope: area.scope,\n      codemodCommands: area.codemodCommands,\n      validationCommands: area.validationCommands,\n      steps: buildDefaultSteps(area.id),\n    });\n  }\n\n  if (modules.length === 0) {\n    modules.push({\n      id: 'repo-wide',\n      label: 'Repository',\n      description: 'Fallback repo-wide upgrade module.',\n      scope: ['**/*'],\n      steps: buildDefaultSteps('repo'),\n    });\n  }\n\n  return { modules };\n}\n\nexport function detectWorkspaceModules(workspaceRoot: string): RepoUpgradeModule[] {\n  const pkgPath = join(workspaceRoot, 'package.json');\n  if (!existsSync(pkgPath)) {\n    return [];\n  }\n\n  let workspaces: string[] = [];\n  try {\n    const pkg = JSON.parse(readFileSync(pkgPath, 'utf8'));\n    workspaces = parseWorkspaceField(pkg?.workspaces);\n  } catch {\n    return [];\n  }\n\n  if (!workspaces.length) {\n    return [];\n  }\n\n  const modules: RepoUpgradeModule[] = [];\n  const seen = new Set<string>();\n\n  for (const pattern of workspaces) {\n    const paths = expandWorkspacePattern(workspaceRoot, pattern);\n    for (const relPath of paths) {\n      if (seen.has(relPath)) {\n        continue;\n      }\n      seen.add(relPath);\n\n      const cleanPath = relPath.replace(/\\/+$/, '');\n      const name = cleanPath.split('/').filter(Boolean).pop() ?? cleanPath;\n      const normalizedPath = cleanPath.replace(/[/\\\\]+/g, '-');\n      const slug = `workspace-${normalizedPath.replace(/[^\\w-]+/g, '-').replace(/-+/g, '-').toLowerCase() || 'default'}`;\n\n      modules.push({\n        id: slug,\n        label: `Workspace: ${name}`,\n        description: `Upgrade tasks scoped to workspace \"${name}\" (${cleanPath}).`,\n        scope: [`${cleanPath}/**/*`],\n        validationCommands: [\n          `npm test --workspace ${name} --if-present`,\n          `npm run lint --workspace ${name} --if-present`,\n        ],\n        steps: buildDefaultSteps(slug),\n      });\n    }\n  }\n\n  return modules;\n}\n\nexport function parseWorkspaceField(value: unknown): string[] {\n  if (Array.isArray(value)) {\n    return value.map((entry) => (typeof entry === 'string' ? entry.trim() : '')).filter(Boolean);\n  }\n  if (value && typeof value === 'object') {\n    const record = value as { packages?: unknown };\n    if (Array.isArray(record.packages)) {\n      return record.packages.map((entry) => (typeof entry === 'string' ? entry.trim() : '')).filter(Boolean);\n    }\n  }\n  return [];\n}\n\nexport function expandWorkspacePattern(workspaceRoot: string, pattern: string): string[] {\n  const normalized = pattern.trim();\n  if (!normalized) return [];\n\n  if (!normalized.includes('*')) {\n    const target = join(workspaceRoot, normalized);\n    return existsSync(target) ? [normalized] : [];\n  }\n\n  const base = normalized.split('*')[0]?.replace(/\\/+$/, '') ?? '';\n  if (!base) return [];\n\n  const baseDir = join(workspaceRoot, base);\n  if (!existsSync(baseDir)) return [];\n\n  try {\n    const entries = readdirSync(baseDir, { withFileTypes: true });\n    return entries.filter((entry) => entry.isDirectory()).map((entry) => `${base}/${entry.name}`);\n  } catch {\n    return [];\n  }\n}\n\nexport function buildDefaultSteps(moduleId: string): RepoUpgradeStep[] {\n  return [\n    {\n      id: `${moduleId}-analyze`,\n      intent: 'analyze',\n      description: `Map the upgrade surface for ${moduleId}. Identify risky files and coupling.`,\n      prompt: 'Inventory files, dependencies, and breaking-change areas before upgrading.',\n    },\n    {\n      id: `${moduleId}-upgrade`,\n      intent: 'upgrade',\n      description: `Apply modular upgrades for ${moduleId} with minimal blast radius.`,\n      prompt: 'Execute codemods or targeted edits. Keep edits small, atomic, and well scoped.',\n    },\n    {\n      id: `${moduleId}-verify`,\n      intent: 'verify',\n      description: `Validate ${moduleId} after the upgrade.`,\n      prompt: 'Run tests/lint/health checks relevant to this scope. Summarize residual risks.',\n    },\n  ];\n}\n\nfunction normalizeScopeValue(scope: string): string {\n  return scope.replace(/^[./\\\\]+/, '').replace(/[/\\\\]+$/, '').trim();\n}\n\nfunction normalizeScopes(scopes: string[]): string[] {\n  return scopes.map(normalizeScopeValue).filter(Boolean);\n}\n\nfunction stripGlob(scope: string): string {\n  return scope.replace(/\\*\\*/g, '').replace(/\\*/g, '').replace(/\\[[^\\]]*]/g, '').replace(/[/\\\\]+$/, '');\n}\n\nfunction moduleMatchesRequestedScopes(moduleScope: string[], requestedScopes: string[]): boolean {\n  if (!requestedScopes.length) return true;\n  const normalizedModuleScopes = moduleScope\n    .map((scope) => normalizeScopeValue(stripGlob(scope)))\n    .filter(Boolean);\n\n  return requestedScopes.some((requested) =>\n    normalizedModuleScopes.some(\n      (modulePath) =>\n        modulePath === requested ||\n        modulePath.startsWith(`${requested}/`) ||\n        requested.startsWith(`${modulePath}/`)\n    )\n  );\n}\n\nfunction buildCustomScopeModule(scope: string): RepoUpgradeModule {\n  const slug = scope.replace(/[^\\w]/g, '-').toLowerCase() || 'custom';\n  return {\n    id: `custom-${slug}`,\n    label: `Custom: ${scope}`,\n    description: `User-specified scope: ${scope}`,\n    scope: [`${scope}/**/*`],\n    validationCommands: ['npm run build', 'npm test'],\n    steps: buildDefaultSteps(`custom-${slug}`),\n  };\n}\n\nfunction dedupeModules(modules: RepoUpgradeModule[]): RepoUpgradeModule[] {\n  const seen = new Set<string>();\n  const result: RepoUpgradeModule[] = [];\n  for (const module of modules) {\n    if (seen.has(module.id)) continue;\n    seen.add(module.id);\n    result.push(module);\n  }\n  return result;\n}\n"],"mappings":"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","ignoreList":[]}