52a35e8fd027b7d11e77977e367de9f2
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _uiConstants = require("./uiConstants.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

/**
 * Attack operation status for real-time display during offensive security operations.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences and special formatting from text to get clean plaintext */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    let sanitized = text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
    // Also remove partial bracketed paste markers that may have leaked (e.g., "[200~" without ESC)
    sanitized = sanitized.replace(/\[20[01]~/g, '');
    // Remove any stray escape character at start/end
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/^\x1b+|\x1b+$/g, '');

    // Strip special formatting characters for clean plaintext:
    // - Zero-width characters (ZWSP, ZWNJ, ZWJ, BOM/ZWNBSP)
    // - Word joiner, invisible separator, invisible times/plus
    // - Directional formatting (LRM, RLM, LRE, RLE, LRO, RLO, PDF, LRI, RLI, FSI, PDI)
    // - Object replacement character
    // - Soft hyphen
    // - Non-breaking space variants (NBSP, narrow NBSP, figure space, etc.)
    sanitized = sanitized.replace(/[\u200B-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\u00AD\uFFFC]/g, '');

    // Normalize various space characters to regular space
    // Includes: NBSP, en/em space, thin space, hair space, figure space, etc.
    sanitized = sanitized.replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g, ' ');

    // Remove control characters except tab, newline, carriage return
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g, '');
    return sanitized;
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 80; // Increased for more robust multi-line paste detection
  plainPasteWindowMs = 120; // Increased window for paste burst detection
  plainPasteTriggerChars = 16; // Lower threshold to catch multi-line pastes sooner
  plainPasteEarlyNewlineChars = 1; // Immediate detection of multi-line content
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }

    // Reset input and paste state to prevent stale state from previous session
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.collapsedPaste = null;
    this.pendingInsertBuffer = '';
    this.cancelPlainPasteCapture();
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.collapsedPaste) {
        // If there's a collapsed paste, delete it completely (similar to backspace)
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      // Consume and sanitize pending buffer to prevent partial escape sequences leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      // Extract content after the start marker (discard any content before it - likely partial escapes)
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume and sanitize any pending insert buffer to prevent partial escapes leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      this.pasteBuffer = pending;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }

    // Don't treat escape sequences (arrow keys, etc.) as paste
    // Escape sequences start with \x1b (ESC) and are used for cursor movement, etc.
    if (typeof str === 'string' && str.startsWith('\x1b')) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Sanitize input to remove special formatting characters
    const sanitized = this.sanitizePasteContent(text);
    if (!sanitized) return;

    // Handle multi-line text by collapsing to single line for normal input
    const hasNewlines = sanitized.includes('\n');
    if (hasNewlines) {
      // For multi-line text in normal insertion, collapse to single line with spaces
      const collapsed = sanitized.replace(/\r\n|\r|\n/g, ' ');
      this.insertSingleLineText(collapsed);
    } else {
      this.insertSingleLineText(sanitized);
    }
  }
  insertSingleLineText(text) {
    if (!text) return;
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // Note: For prompt events, the overlay is already rendered in renderEvent()
        // via renderPromptOverlay(true). No need to render again here.
        if (event.type === 'prompt') {
          // Ensure prompt rendering is allowed for subsequent events
          if (this.output.isTTY) {
            this.allowPromptRender = true;
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    if (this.plainMode) {
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        {
          // Streaming content is the model's response - pass through directly
          // IMPORTANT: Don't filter streaming chunks with isGarbageOutput because:
          // 1. Chunks arrive character-by-character or in small pieces
          // 2. Small chunks like "." or ":" are valid parts of sentences
          // 3. Filtering would break the streaming display
          // Only filter completely empty content
          if (!event.content) {
            return '';
          }
          return event.content;
        }
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;
    const trimmed = content.trim();

    // Very short content checks - catch leaked punctuation fragments like "." or ":"
    if (trimmed.length <= 3) {
      // Single punctuation marks or very short punctuation sequences are garbage
      if (/^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$]+$/.test(trimmed)) {
        return true;
      }
    }

    // Check if content is just punctuation on multiple lines (leaked reasoning)
    const lines = content.split('\n');
    const punctOnlyLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      return lineTrimmed.length > 0 && /^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$\s]+$/.test(lineTrimmed);
    });
    // If ALL non-empty lines are just punctuation, it's garbage
    const nonEmptyLines = lines.filter(l => l.trim().length > 0);
    if (nonEmptyLines.length > 0 && punctOnlyLines.length === nonEmptyLines.length) {
      return true;
    }

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: mostly punctuation/symbols - leaked reasoning fragments
    const meaningfulLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      if (!lineTrimmed) return false;
      // Line must have at least 30% alphanumeric content
      const alphaNum = (lineTrimmed.match(/[a-zA-Z0-9]/g) || []).length;
      return lineTrimmed.length > 0 && alphaNum / lineTrimmed.length >= 0.3;
    });
    // If less than 30% of lines are meaningful, it's garbage
    if (lines.length > 3 && meaningfulLines.length / lines.length < 0.3) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.4) {
      return true; // Less than 40% letters = likely garbage
    }
    return false;
  }

  /**
   * Sanitize tool result content to remove leaked reasoning/thinking output.
   * This filters out fragments that look like internal model output.
   */
  sanitizeToolResultContent(content) {
    if (!content) return '';

    // Split into lines and filter out garbage lines
    const lines = content.split('\n');
    const cleanLines = [];
    for (const line of lines) {
      const trimmed = line.trim();

      // Skip empty lines at start
      if (cleanLines.length === 0 && !trimmed) continue;

      // Skip lines that look like leaked reasoning fragments
      // Common patterns: single punctuation, markdown artifacts, emoji fragments
      if (/^[)\]}>*`'"]+$/.test(trimmed)) continue;
      if (/^[*_]{2,}$/.test(trimmed)) continue; // Just ** or __
      if (/^[|│┃]+$/.test(trimmed)) continue; // Just vertical bars
      if (/^[─━═]+$/.test(trimmed)) continue; // Just horizontal lines
      if (/^\.{2,}$/.test(trimmed)) continue; // Just dots
      if (/^[\s️]+$/.test(trimmed)) continue; // Just whitespace/emoji modifiers
      if (/^[:\s]+$/.test(trimmed)) continue; // Just colons/whitespace
      if (/^[,\s]+$/.test(trimmed)) continue; // Just commas/whitespace

      // Skip markdown bold/italic fragments that leaked
      if (/^\*{1,2}[^*]*\*{0,2}$/.test(trimmed) && trimmed.length < 10 && !/\w{3,}/.test(trimmed)) continue;

      // Skip lines that are just short fragments with high punctuation ratio
      const alphaInLine = (trimmed.match(/[a-zA-Z0-9]/g) || []).length;
      if (trimmed.length > 0 && trimmed.length < 20 && alphaInLine / trimmed.length < 0.3) continue;

      // Skip very short lines that are just punctuation or single chars (except numbers)
      if (trimmed.length <= 2 && !/^\d+$/.test(trimmed) && !/^[a-zA-Z]{2}$/.test(trimmed)) {
        // Allow specific short patterns like "OK", "0", "1" etc.
        if (!/^(?:ok|no|yes|\d+)$/i.test(trimmed)) continue;
      }

      // Skip lines that look like stray parentheses or brackets from reasoning
      if (/^[()[\]{}]+$/.test(trimmed)) continue;

      // Skip lines that look like markdown code fence artifacts
      if (/^```\s*$/.test(trimmed)) continue;
      cleanLines.push(line);
    }

    // Trim trailing empty lines
    while (cleanLines.length > 0 && !cleanLines[cleanLines.length - 1]?.trim()) {
      cleanLines.pop();
    }
    return cleanLines.join('\n').trim();
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.toolColors.default(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.toolColors.default(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "⏺ [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // Get tool-specific color (bash=orange, read=cyan, write=green, etc.)
    const toolColor = (0, _theme.getToolColor)(toolName);
    const coloredToolName = toolColor(`[${toolName}]`);

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${coloredToolName}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${coloredToolName} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParamsColored(toolName, params, maxWidth, toolColor);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping (default green color)
   */
  formatToolParams(toolName, params, maxWidth) {
    return this.formatToolParamsColored(toolName, params, maxWidth, _theme.theme.toolColors.default);
  }

  /**
   * Format tool params with custom tool color
   */
  formatToolParamsColored(toolName, params, maxWidth, toolColor) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${toolColor(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.toolColors.default(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Sanitize content first - filter out garbage/reasoning output that leaked through
    const sanitized = this.sanitizeToolResultContent(content);
    if (!sanitized || this.isGarbageOutput(sanitized)) {
      return ''; // Don't render garbage tool results
    }

    // Parse common result patterns for summary
    const lineMatch = sanitized.match(/(\d+)\s*lines?/i);
    const fileMatch = sanitized.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = sanitized.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(sanitized);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(sanitized);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(sanitized);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (sanitized.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = sanitized.split('\n')[0] || sanitized;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Extract meaningful summary from content
      let summaryText = sanitized;

      // Handle "Summary:" prefix from web search/extract results
      const summaryMatch = sanitized.match(/^Summary:\s*(.+)/i);
      if (summaryMatch) {
        summaryText = summaryMatch[1];
      }

      // For multi-line content, use first meaningful line
      const firstLine = summaryText.split('\n')[0]?.trim() || summaryText;

      // Try to end at a sentence boundary for readability (up to 120 chars)
      const maxLen = 120;
      if (firstLine.length > maxLen) {
        // Look for sentence end within limit
        const sentenceEnd = firstLine.slice(0, maxLen).search(/[.!?;]\s|[.!?;]$/);
        if (sentenceEnd > 30) {
          summary = firstLine.slice(0, sentenceEnd + 1);
        } else {
          // No good sentence break, truncate at word boundary
          const truncated = firstLine.slice(0, maxLen);
          const lastSpace = truncated.lastIndexOf(' ');
          summary = lastSpace > 60 ? truncated.slice(0, lastSpace) + '…' : truncated + '…';
        }
      } else {
        summary = firstLine;
      }
    }

    // Store collapsed result for Ctrl+O expansion (use sanitized content)
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content: sanitized,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = sanitized.includes('\n') || summary.endsWith('…') || !preserveFull && sanitized.length > summary.length;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.secondary ?? _theme.theme.ui.muted // Purple for thinking (distinct from blue tools)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Determine if this is structured output that shouldn't be word-wrapped
    const isStructured = this.isStructuredToolOutput(toolName, content);
    let rendered;
    if (isStructured) {
      // Preserve structured output (grep, bash, code output) - just indent, don't wrap
      rendered = this.formatStructuredToolOutput(toolName, content);
    } else {
      // Format prose/text with tool name label and word wrapping
      const label = `${toolName}`;
      rendered = this.wrapBulletText(content, {
        label,
        labelColor: _theme.theme.info
      });
    }
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Check if tool output is structured (code, grep, file listings) that shouldn't be word-wrapped.
   */
  isStructuredToolOutput(toolName, content) {
    const tool = toolName.toLowerCase();
    // Tools that produce structured output
    if (['bash', 'grep', 'read', 'glob', 'execute_bash', 'search', 'find'].includes(tool)) {
      return true;
    }
    // Content patterns that indicate structured output
    // - File paths with colons (grep output): src/file.ts:123:
    // - Line numbers: "   1→" or "  42:"
    // - Code-like patterns
    if (/^\s*[\w./]+:\d+[:\s]/.test(content)) return true; // grep-style output
    if (/^\s*\d+[→:│|]\s/.test(content)) return true; // line-numbered output
    if (/^[│├└─┌┐┘┬┴┼╭╮╯╰]+/.test(content)) return true; // box drawing
    if (/^\s*[$>]\s+\w+/.test(content)) return true; // command prompt output
    return false;
  }

  /**
   * Format structured tool output preserving line structure.
   */
  formatStructuredToolOutput(toolName, content) {
    const lines = content.split('\n');
    const header = `⏺ ${_theme.theme.info(toolName)}${_theme.theme.ui.muted(' · expanded')}\n`;
    const indent = '  ';
    const maxWidth = this.safeWidth() - 4;
    const formattedLines = lines.map(line => {
      // Truncate overly long lines instead of wrapping (preserves structure)
      if (line.length > maxWidth) {
        return indent + line.slice(0, maxWidth - 1) + '…';
      }
      return indent + line;
    });
    return header + formattedLines.join('\n') + '\n';
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 120); // ~8 FPS - reduced from 80ms to minimize flickering while keeping animation smooth
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Batch all ANSI operations into a single write to prevent flickering
    // This eliminates the visual jitter caused by multiple sequential terminal writes
    const buffer = [];

    // Hide cursor during render to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }

      // Clear exactly the old overlay lines, then erase to end of screen
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        buffer.push('\r');
        buffer.push(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          buffer.push('\x1b[B');
        }
      }

      // Clear anything below the old overlay (handles edge cases)
      buffer.push('\x1b[J');

      // After clearing, cursor is at last cleared line
      // Move back up to the top where new overlay should start
      const moveBackUp = this.lastOverlayHeight - 1;
      if (moveBackUp > 0) {
        buffer.push(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      buffer.push(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        buffer.push('\n');
      }
    }

    // If old overlay was taller, clear any remaining stale lines below
    // and use CSI J (erase from cursor to end of screen) to clean up
    if (this.lastOverlayHeight > height) {
      buffer.push('\n'); // Move to line below last content
      buffer.push('\x1b[J'); // Clear from cursor to end of screen
      buffer.push('\x1b[A'); // Move back up to last content line
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      buffer.push(`\x1b[${linesToMoveUp}A`);
    }
    buffer.push(`\x1b[${promptCol}G`);

    // Show cursor again after positioning
    buffer.push('\x1b[?25h');

    // Single atomic write to prevent flickering
    this.write(buffer.join(''));
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    // Filter out empty lines to prevent duplicate divider appearance from leading/trailing newlines
    const inputLines = inputLine.split('\n').filter((line, idx, arr) => {
      // Keep non-empty lines, but preserve single empty line if it's intentional (e.g., between content)
      // Only filter leading/trailing empty lines
      if (line.trim() === '') {
        // Filter if it's the first line (leading empty) or last line (trailing empty)
        if (idx === 0 || idx === arr.length - 1) return false;
      }
      return true;
    });
    // Ensure at least one line for the prompt
    if (inputLines.length === 0) {
      inputLines.push(_theme.theme.primary('> '));
    }
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('🏆') : leader === 'refiner' ? _theme.theme.warning('🏆') : '⚖️';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` 🔥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('█'.repeat(pBars)) + _theme.theme.ui.muted('░'.repeat(tBars)) + _theme.theme.warning('█'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('⚡P')} ${_theme.theme.ui.muted('∥')} ${_theme.theme.warning('⚡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? '▶' : '▷';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('✓P') : _theme.theme.warning('✓R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('≈'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }

    // Human accuracy indicator (relative ranking quality)
    if (rl.accuracy && (typeof rl.accuracy.primary === 'number' || typeof rl.accuracy.refiner === 'number')) {
      const pAcc = rl.accuracy.primary !== undefined ? Math.round(rl.accuracy.primary * 100) : null;
      const rAcc = rl.accuracy.refiner !== undefined ? Math.round(rl.accuracy.refiner * 100) : null;
      const pDisplay = pAcc !== null ? _theme.theme.info(`P${pAcc}%`) : null;
      const rDisplay = rAcc !== null ? _theme.theme.warning(`R${rAcc}%`) : null;
      const parts = [pDisplay, rDisplay].filter(Boolean).join(_theme.theme.ui.muted('|'));
      if (parts) {
        segments.push(parts);
      }
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately (Enter).
   * Used when user wants to send the pasted content as-is.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;

    // Prevent duplicate prompt display within 1.5 seconds
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl91aUNvbnN0YW50cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkVG9vbFJlc3VsdHMiLCJtYXhDb2xsYXBzZWRSZXN1bHRzIiwibGFzdFRvb2xOYW1lIiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJlbGFwc2VkQ29sb3JGcmFtZSIsImVsYXBzZWRDb2xvckZyYW1lcyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJybFN0YXR1cyIsImNsYW1wQ3Vyc29yIiwiTWF0aCIsIm1heCIsIm1pbiIsImxlbmd0aCIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJ0ZXh0IiwicGFzdGVCdWZmZXJPdmVyZmxvdyIsImN1cnJlbnQiLCJwYXN0ZUJ1ZmZlciIsInBsYWluUGFzdGVCdWZmZXIiLCJyZW1haW5pbmciLCJtYXhQYXN0ZUJ1ZmZlclNpemUiLCJ0b0FkZCIsInNsaWNlIiwic2FuaXRpemVQYXN0ZUNvbnRlbnQiLCJzYW5pdGl6ZWQiLCJyZXBsYWNlIiwiZm9ybWF0SG90a2V5IiwiY29tYm8iLCJ0cmltIiwidG9VcHBlckNhc2UiLCJsYXN0UHJvbXB0RXZlbnQiLCJwcm9tcHRIZWlnaHQiLCJsYXN0T3ZlcmxheUhlaWdodCIsImlubGluZVBhbmVsIiwiaGFzQ29udmVyc2F0aW9uQ29udGVudCIsImlzUHJvbXB0QWN0aXZlIiwiaW5wdXRSZW5kZXJPZmZzZXQiLCJwbGFpblBhc3RlSWRsZU1zIiwicGxhaW5QYXN0ZVdpbmRvd01zIiwicGxhaW5QYXN0ZVRyaWdnZXJDaGFycyIsInBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyIsImN1cnNvclZpc2libGVDb2x1bW4iLCJpbkJyYWNrZXRlZFBhc3RlIiwiaW5QbGFpblBhc3RlIiwicGxhaW5QYXN0ZVRpbWVyIiwicGFzdGVCdXJzdFdpbmRvd1N0YXJ0IiwicGFzdGVCdXJzdENoYXJDb3VudCIsInBsYWluUmVjZW50Q2h1bmtzIiwicGVuZGluZ0luc2VydEJ1ZmZlciIsInBlbmRpbmdJbnNlcnRUaW1lciIsInBlbmRpbmdJbnNlcnREZWxheU1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwiYWxsb3dQcm9tcHRSZW5kZXIiLCJwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQiLCJzZWNyZXRNb2RlIiwicGVuZGluZ1JlbmRlciIsImxhc3RSZW5kZXJUaW1lIiwicmVuZGVyVGhyb3R0bGVNcyIsInJlbmRlclRocm90dGxlVGltZXIiLCJkaXNwb3NlZCIsImJvdW5kUmVzaXplSGFuZGxlciIsImJvdW5kS2V5cHJlc3NIYW5kbGVyIiwiaW5wdXRDYXB0dXJlIiwiY29uc3RydWN0b3IiLCJvdXRwdXQiLCJwcm9jZXNzIiwic3Rkb3V0IiwiaW5wdXQiLCJzdGRpbiIsIl9vcHRpb25zIiwiaW50ZXJhY3RpdmUiLCJCb29sZWFuIiwiaXNUVFkiLCJlbnYiLCJwbGFpbk1vZGUiLCJpc1BsYWluT3V0cHV0TW9kZSIsImNvbnRleHRNZXRlciIsIkNvbnRleHRNZXRlciIsInJsIiwiY3JlYXRlSW50ZXJmYWNlIiwidGVybWluYWwiLCJwcm9tcHQiLCJ0YWJTaXplIiwic2V0UHJvbXB0IiwidXBkYXRlVGVybWluYWxTaXplIiwicmVuZGVyUHJvbXB0Iiwib24iLCJzZXR1cElucHV0SGFuZGxlcnMiLCJpbml0aWFsaXplIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiZGlzcG9zZSIsImRpc3Bvc2VBbmltYXRpb25zIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJjbG9zZSIsInNldFJhd01vZGUiLCJzdXNwZW5kUHJvbXB0UmVuZGVyaW5nIiwicmVzdW1lUHJvbXB0UmVuZGVyaW5nIiwicmVuZGVyIiwiZW1pdEtleXByZXNzRXZlbnRzIiwic3RyIiwia2V5IiwiaGFuZGxlS2V5cHJlc3MiLCJlbWl0SW5wdXRDaGFuZ2UiLCJwYXlsb2FkIiwiZW1pdCIsIm5vcm1hbGl6ZWRLZXkiLCJwYXJzZUVzY2FwZVNlcXVlbmNlIiwia2V5Rm9yUGFzdGUiLCJzZXF1ZW5jZSIsImhhbmRsZUJyYWNrZXRlZFBhc3RlIiwiaGFuZGxlUGxhaW5QYXN0ZSIsIm1hY09wdGlvbkNoYXJzIiwibGV0dGVyIiwiY3RybCIsIm5hbWUiLCJjbGVhckJ1ZmZlciIsImlzQ3RybFNoaWZ0IiwibG93ZXJMZXR0ZXIiLCJ0b0xvd2VyQ2FzZSIsInVwcGVyTGV0dGVyIiwic2hpZnQiLCJtZXRhIiwic2VxIiwidGVzdCIsImhhbmRsZUN0cmxTaGlmdFRvZ2dsZSIsImhhZEJ1ZmZlciIsImV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIiLCJjbGVhckNvbGxhcHNlZFJlc3VsdHMiLCJlbnN1cmVDdXJzb3JWaXNpYmxlIiwicG9zIiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZSIsImFwcGx5U3VnZ2VzdGlvbiIsInN0YXJ0c1dpdGgiLCJzYWZlSW5kZXgiLCJjb21tYW5kIiwic3VibWl0VGV4dCIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBhc3RlU3RhcnRNYXJrZXIiLCJwYXN0ZUVuZE1hcmtlciIsImluY2x1ZGVzIiwicGVuZGluZyIsInN0YXJ0SWR4IiwiaW5kZXhPZiIsImNvbnRlbnQiLCJlbmRJZHgiLCJjb21taXRQYXN0ZUJ1ZmZlciIsImNvbnRlbnRCZWZvcmUiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJoYXNOZXdsaW5lcyIsImNvbGxhcHNlZCIsImluc2VydFNpbmdsZUxpbmVUZXh0Iiwic2hvdWxkVHJpbSIsIm9wdGlvbnMiLCJub3JtYWxpemVkQ2FwdHVyZSIsImFsbG93RW1wdHkiLCJyZXNvbHZlciIsInJlc2V0U3VnZ2VzdGlvbnMiLCJyZXNvbHZlIiwibm9ybWFsaXplZCIsImRpc3BsYXlVc2VyUHJvbXB0IiwiZmlyc3RTcGFjZSIsImhhc0FyZ1RleHQiLCJjdXJzb3JTbGljZSIsImNvbW1hbmRTbGljZSIsImZhbGxiYWNrU2xpY2UiLCJwYXJ0aWFsIiwidHJpbUVuZCIsInByZXZpb3VzIiwiY21kIiwiaWR4IiwiZmluZEluZGV4IiwicyIsInNldEF2YWlsYWJsZUNvbW1hbmRzIiwiY29tbWFuZHMiLCJzdWJtaXQiLCJzZWxlY3RlZCIsImRpcmVjdGlvbiIsImN1cnJlbnRJbmRleCIsIm5leHQiLCJjbGFtcGVkIiwiYWRkRXZlbnQiLCJ0eXBlIiwibm9ybWFsaXplRXZlbnRUeXBlIiwiZm9ybWF0dGVkIiwiZm9ybWF0Q29udGVudCIsInJhd1R5cGUiLCJ0aW1lc3RhbXAiLCJldmVudCIsImluc2VydEluZGV4Iiwic3BsaWNlIiwicXVldWVNaWNyb3Rhc2siLCJwcm9jZXNzUXVldWUiLCJyZW5kZXJQcm9tcHRPdmVybGF5IiwiaW1tZWRpYXRlIiwicmVuZGVyUHJvbXB0SW1tZWRpYXRlIiwiY29hbGVzY2VkIiwiY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMiLCJyZW5kZXJFdmVudCIsImVycm9yIiwibWVzc2FnZSIsImRlbGF5IiwiaXNNZXJnZWFibGUiLCJ0YXJnZXQiLCJpc0NvbXBhY3RlZCIsIm5lZWRzU2VwYXJhdG9yIiwiZmx1c2hFdmVudHMiLCJ0aW1lb3V0TXMiLCJzdGFydCIsImZvcm1hdHRlZFBsYWluIiwic2lnbmF0dXJlIiwibGluZSIsInRoZW1lIiwicHJpbWFyeSIsImlzR2FyYmFnZU91dHB1dCIsImN1cmF0ZWQiLCJjdXJhdGVSZWFzb25pbmdDb250ZW50Iiwic2hvdWxkUmVuZGVyVGhvdWdodCIsImZvcm1hdFRoaW5raW5nQmxvY2siLCJmb3JtYXRDb21wYWN0VG9vbENhbGwiLCJmb3JtYXRDb21wYWN0VG9vbFJlc3VsdCIsIndyYXBCdWxsZXRUZXh0IiwibGFiZWwiLCJsYWJlbENvbG9yIiwid2FybmluZyIsImluZm8iLCJpc0Vycm9yIiwidW5kZWZpbmVkIiwidHJpbW1lZCIsInB1bmN0T25seUxpbmVzIiwibGluZVRyaW1tZWQiLCJub25FbXB0eUxpbmVzIiwibCIsIm1lYW5pbmdmdWxMaW5lcyIsImFscGhhTnVtIiwibWF0Y2giLCJhbHBoYUNvdW50IiwidG90YWxDb3VudCIsInNhbml0aXplVG9vbFJlc3VsdENvbnRlbnQiLCJjbGVhbkxpbmVzIiwiYWxwaGFJbkxpbmUiLCJwb3AiLCJsaW1pdGVkIiwibWF4U2VnbWVudHMiLCJzZWdtZW50cyIsImZsYXRNYXAiLCJzZWVuIiwiZGVkdXBlZCIsInNlZ21lbnQiLCJub3JtYWxpemVkU2VnbWVudCIsImFkZCIsInByaW9yaXRpemVkIiwicHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzIiwibGltaXRlZFNlbGVjdGlvbiIsImJ1bGxldGVkIiwiZW5zdXJlUmVhc29uaW5nQnVsbGV0IiwibG9va3NTdHJ1Y3R1cmVkVGhvdWdodCIsInNjb3JlZCIsImluZGV4Iiwic2NvcmUiLCJyZWFzb25pbmdTaWduYWxTY29yZSIsImhhc1NpZ25hbCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJsb3dlciIsImFjdGlvbktleXdvcmRzIiwia2V5d29yZCIsImZvcm1hdENsYXVkZUNvZGVCbG9jayIsImJ1bGxldCIsInJlc3VsdCIsImxpbmVJZHgiLCJ3b3JkcyIsImN1cnJlbnRMaW5lIiwid29yZCIsInByZWZpeCIsInRyaW1TdGFydCIsImZvcm1hdFRvb2xDYWxsIiwibmFtZU1hdGNoIiwidG9vbENvbG9ycyIsInRvb2xOYW1lIiwiYXJnc1N0ciIsInByZWZpeExlbiIsImluZGVudCIsInJlcGVhdCIsImFyZ3MiLCJwYXJzZVRvb2xBcmdzIiwiYXJnIiwiYXJnVGV4dCIsInVpIiwibXV0ZWQiLCJmb3JtYXRBcmdWYWx1ZSIsInZhbHVlIiwic2VwYXJhdG9yIiwidGVzdExpbmUiLCJzdHJpcEFuc2kiLCJyZWdleCIsImV4ZWMiLCJpc1F1b3RlZCIsImlubmVyIiwibG93ZXJLZXkiLCJzaG91bGRQcmVzZXJ2ZSIsIm1heExlbiIsInRydW5jYXRlZCIsImZvcm1hdFRvb2xSZXN1bHQiLCJzdW1tYXJ5TWF0Y2giLCJwcmV2aWV3IiwidG9vbENvbG9yIiwiZ2V0VG9vbENvbG9yIiwiY29sb3JlZFRvb2xOYW1lIiwicGFyYW1zIiwicGFyc2VUb29sUGFyYW1zIiwiZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQiLCJmb3JtYXRUb29sUGFyYW1zIiwiZmlyc3RQYXJhbSIsInBhcmFtIiwiY29sb3JlZFZhbHVlIiwiY29sb3JQYXJhbVZhbHVlIiwicGFyYW1UZXh0IiwicGFyYW1TdHIiLCJwbGFpbkxlbmd0aCIsInZpc2libGVMZW5ndGgiLCJleHRyYWN0VG9vbFN1bW1hcnkiLCJ0b29sIiwicGF0aE1hdGNoIiwicGF0aCIsImZpbGUiLCJjbWRNYXRjaCIsImxpbmVNYXRjaCIsImZpbGVNYXRjaCIsInJlYWRNYXRjaCIsImhhc1BhdGgiLCJoYXNDb21tYW5kIiwiaXNQYXRoT3JEaXIiLCJzdW1tYXJ5IiwicHJlc2VydmVGdWxsIiwiZmlyc3RMaW5lIiwic3VtbWFyeVRleHQiLCJzZW50ZW5jZUVuZCIsInNlYXJjaCIsImxhc3RTcGFjZSIsImxhc3RJbmRleE9mIiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJoYXNNb3JlQ29udGVudCIsImV4cGFuZEhpbnQiLCJzdWNjZXNzIiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwiZmlyc3ROb25FbXB0eSIsInJhd0xpbmUiLCJjYW5kaWRhdGUiLCJwcmVmaXhMZW5ndGgiLCJzZWNvbmRhcnkiLCJ3cmFwVGV4dFRvV2lkdGgiLCJ3aWR0aCIsImZvcm1hdFN0cmVhbWluZ0VsYXBzZWQiLCJlbGFwc2VkIiwiZmxvb3IiLCJtaW5zIiwic2VjcyIsImZvcm1hdENvbXBhY3RCbG9jayIsInBhZGRpbmciLCJsZWZ0UGFkIiwicmlnaHRQYWQiLCJjZWlsIiwiYWRkQ29tcGFjdEJsb2NrIiwiZm9ybWF0dGVkQ29udGVudCIsImV4cGFuZExhc3RUb29sUmVzdWx0IiwiaXNTdHJ1Y3R1cmVkIiwiaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsInJlbmRlcmVkIiwiZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQiLCJoZWFkZXIiLCJmb3JtYXR0ZWRMaW5lcyIsImdldENvbGxhcHNlZFJlc3VsdENvdW50Iiwic2V0TW9kZSIsIndhc1N0cmVhbWluZyIsInN0YXJ0U3Bpbm5lckFuaW1hdGlvbiIsInN0b3BTcGlubmVyQW5pbWF0aW9uIiwic2V0SW50ZXJ2YWwiLCJzcGlubmVyRnJhbWVzIiwiYnJhaWxsZSIsInNldEFjdGl2aXR5IiwidXBkYXRlU3RyZWFtaW5nVG9rZW5zIiwidG9rZW5zIiwiZm9ybWF0VG9rZW5Db3VudCIsIlN0cmluZyIsInRvRml4ZWQiLCJyb3VuZCIsImdldE1vZGUiLCJ1cGRhdGVTdGF0dXMiLCJ1cGRhdGVTdGF0dXNCdW5kbGUiLCJtYWluIiwib3ZlcnJpZGUiLCJzdHJlYW1pbmciLCJzdGF0dXMiLCJwcmV2U3RyZWFtaW5nIiwiY2hhbmdlZCIsIm1haW5DaGFuZ2VkIiwib3ZlcnJpZGVDaGFuZ2VkIiwic3RyZWFtaW5nQ2hhbmdlZCIsInN0cmVhbWluZ0ludHJvZHVjZSIsInN0cmVhbWluZ0NsZWFyZWQiLCJvbmx5U3RyZWFtaW5nQ2hhbmdlZCIsInNraXBTdHJlYW1pbmdSZW5kZXIiLCJzaG91bGRSZW5kZXIiLCJ1cGRhdGVTdGF0dXNNZXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZU1vZGVUb2dnbGVzIiwic3RhdGUiLCJ2ZXJpZmljYXRpb25Ib3RrZXkiLCJ0aGlua2luZ0hvdGtleSIsImNyaXRpY2FsQXBwcm92YWxIb3RrZXkiLCJhdXRvQ29udGludWVIb3RrZXkiLCJkdWFsUmxIb3RrZXkiLCJkZWJ1Z0hvdGtleSIsImNsZWFyIiwidXBkYXRlUkxTdGF0dXMiLCJjbGVhclJMU3RhdHVzIiwiZ2V0UkxTdGF0dXMiLCJzZXRJbmxpbmVQYW5lbCIsImhhc0NvbnRlbnQiLCJsaW1pdElubGluZVBhbmVsIiwic3VwcG9ydHNJbmxpbmVQYW5lbCIsImNsZWFySW5saW5lUGFuZWwiLCJtYXhMaW5lcyIsIm92ZXJmbG93IiwiaW5kaWNhdG9yIiwidGFpbENvdW50IiwidGFpbCIsIm92ZXJsYXkiLCJidWlsZE92ZXJsYXlMaW5lcyIsInJlbmRlcmVkTGluZXMiLCJ0cnVuY2F0ZUxpbmUiLCJwcm9tcHRJbmRleCIsImhlaWdodCIsImxpbmVzVG9Ub3AiLCJtb3ZlQmFja1VwIiwicHJvbXB0Q29sIiwibGluZXNUb01vdmVVcCIsImRpdmlkZXIiLCJmYWxsYmFja0FjdGl2aXR5IiwicmF3Iiwic3Bpbm5lckNoYXJzIiwic3Bpbm5lckNoYXIiLCJzdGFyQ2hhciIsInNwaW5uZXJEZWNvcmF0ZWQiLCJhY2NlbnQiLCJnZW5lcmljQWN0aXZpdGllcyIsImRpc3BsYXlBY3Rpdml0eSIsIm5lZWRzRWxsaXBzaXMiLCJlbGFwc2VkQ29sb3IiLCJjaGFsayIsImhleCIsInBhcnRzIiwiYWN0aXZpdHlUZXh0IiwiYWN0aXZpdHlMaW5lIiwid3JhcHBlZCIsIndyYXBPdmVybGF5TGluZSIsImlucHV0TGluZSIsImJ1aWxkSW5wdXRMaW5lIiwiaW5wdXRMaW5lcyIsImFyciIsInBhbmVsTGluZSIsInN1Z2dlc3Rpb24iLCJpc0FjdGl2ZSIsIm1hcmtlciIsImNtZFRleHQiLCJkZXNjVGV4dCIsImRlc2NyaXB0aW9uIiwibW9kZWxDb250ZXh0TGluZSIsImJ1aWxkTW9kZWxDb250ZXh0TGluZSIsImNocm9tZUxpbmVzIiwiYnVpbGRDaHJvbWVMaW5lcyIsImNocm9tZUxpbmUiLCJ0b2dnbGVMaW5lcyIsImJ1aWxkSW5saW5lVG9nZ2xlTGluZSIsInRvZ2dsZUxpbmUiLCJsZWdlbmRMaW5lcyIsImJ1aWxkVG9nZ2xlTGVnZW5kIiwibGVnZW5kIiwibW9kZWwiLCJwcm92aWRlciIsImNvbnRleHRQZXJjZW50IiwidXNlZCIsImNsYW1wUGVyY2VudGFnZSIsImJhcldpZHRoIiwiZmlsbGVkIiwiZW1wdHkiLCJiYXJDb2xvciIsImdldENvbnRleHRDb2xvciIsImJhciIsImF1dG9Db250aW51ZUFjdGl2ZSIsInZlcmlmaWNhdGlvbkFjdGl2ZSIsImFwcHJvdmFsTW9kZSIsInRoaW5raW5nTGFiZWwiLCJ0aGlua2luZ01vZGVMYWJlbCIsInRvZ2dsZXMiLCJybE9uIiwicmxJY29uIiwicmxFeHBsYWluIiwiY29udEljb24iLCJjb250U3RhdHVzIiwiY29udEV4cGxhaW4iLCJ2ZXJpZnlJY29uIiwidmVyaWZ5U3RhdHVzIiwidmVyaWZ5RXhwbGFpbiIsImFwcHJJY29uIiwiYXBwclN0YXR1cyIsImFwcHJFeHBsYWluIiwidGhpbmtpbmdJc0RlZXAiLCJ0aGlua0ljb24iLCJ0aGlua1N0YXR1cyIsInRoaW5rRXhwbGFpbiIsImRlYnVnQWN0aXZlIiwiZGVidWdJY29uIiwiZGVidWdTdGF0dXMiLCJkZWJ1Z0V4cGxhaW4iLCJ3cmFwU2VnbWVudHMiLCJzdGF0dXNMaW5lcyIsImJ1aWxkU3RhdHVzQmxvY2siLCJtZXRhTGluZXMiLCJidWlsZE1ldGFCbG9jayIsImFiYnJldmlhdGVQYXRoIiwicGF0aFZhbHVlIiwiaG9tZSIsImhvbWVkaXIiLCJzdGF0dXNMYWJlbCIsImNvbXBvc2VTdGF0dXNMYWJlbCIsImFwcGx5VG9uZSIsInRvbmUiLCJzZXNzaW9uVGltZSIsInVwZGF0ZSIsInByb2ZpbGUiLCJmb3JtYXRNZXRhU2VnbWVudCIsIndvcmtzcGFjZSIsImRpcmVjdG9yeSIsIndyaXRlcyIsInRvb2xTdW1tYXJ5Iiwic2Vzc2lvbkxhYmVsIiwidmVyc2lvbiIsInJsU2VnbWVudHMiLCJidWlsZFJMU3RhdHVzU2VnbWVudHMiLCJhY3RpdmVWYXJpYW50Iiwid2lucyIsImN1cnJlbnRNb2R1bGUiLCJyZWZpbmVyIiwidGllcyIsInRvdGFsR2FtZXMiLCJsZWFkZXIiLCJwQ29sb3IiLCJyQ29sb3IiLCJwU2NvcmUiLCJyU2NvcmUiLCJ0cm9waHkiLCJzdHJlYWtUZXh0Iiwic3RyZWFrIiwicEJhcnMiLCJyQmFycyIsInRCYXJzIiwiaXNQYXJhbGxlbCIsInBhcmFsbGVsRXhlY3V0aW9uIiwidmFyaWFudEljb24iLCJ2YXJpYW50TGFiZWwiLCJ2YXJpYW50Q29sb3IiLCJsYXN0V2lubmVyIiwid2lubmVySWNvbiIsImN1cnJlbnRTdGVwIiwic3RlcFRleHQiLCJ0cnVuY2F0ZU1pZGRsZSIsInN0ZXBzQ29tcGxldGVkIiwidG90YWxTdGVwcyIsInBjdCIsInNjb3JlcyIsInBWYWwiLCJyVmFsIiwicERpc3BsYXkiLCJyRGlzcGxheSIsImFjY3VyYWN5IiwicEFjYyIsInJBY2MiLCJrZWVwTGVuIiwic3RhdHVzZXMiLCJjb2xvcml6ZXIiLCJidWlsZENvbnRyb2xMaW5lcyIsImJ1aWxkVG9nZ2xlTGluZSIsInNob3J0Y3V0TGluZSIsImJ1aWxkU2hvcnRjdXRMaW5lIiwiYnVpbGRDb21wYWN0VG9nZ2xlTGluZSIsImVkaXRJY29uIiwiZWRpdFN0YXRlIiwiY3ljbGVIaW50IiwiYWRkVG9nZ2xlIiwiaG90a2V5IiwiYXV0b1ZlcmlmeUFjdGl2ZSIsInZlcmlmeVZhbHVlIiwiYXBwcm92YWxBY3RpdmUiLCJ0aGlua2luZ0xhYmVsUmF3IiwidGhpbmtpbmdBY3RpdmUiLCJkdWFsUmxBY3RpdmUiLCJtb2RlVmFsdWUiLCJidWlsZExpbmUiLCJpbmNsdWRlSG90a2V5cyIsInRvZ2dsZSIsInN0YXRlVGV4dCIsImhvdGtleVRleHQiLCJhZGRIb3RrZXkiLCJwcm9tcHRXaWR0aCIsImNvbnRpbnVhdGlvbkluZGVudCIsImNvbnRpbnVhdGlvbldpZHRoIiwicmF3QnVmZmVyIiwiYnVmZmVyTGluZXMiLCJ0b3RhbENoYXJzIiwiY3Vyc29yTGluZSIsImN1cnNvckNvbCIsImZvdW5kQ3Vyc29yIiwibGluZUluZGV4IiwiaXNGaXJzdExvZ2ljYWxMaW5lIiwibGluZVN0YXJ0Q2hhciIsImZpcnN0TGluZVdpZHRoIiwiY29udExpbmVXaWR0aCIsImlzRmlyc3REaXNwbGF5TGluZSIsImRpc3BsYXlMaW5lIiwiY2h1bmtTdGFydCIsImNodW5rRW5kIiwib2Zmc2V0SW5DaHVuayIsImxhc3RMaW5lIiwidGFyZ2V0TGluZSIsInZpc2libGVQYXJ0IiwiY3Vyc29yUG9zIiwiYmVmb3JlIiwiY2hhckF0IiwiYWZ0ZXIiLCJ0ZXh0UGFydCIsImJ1aWxkSW5wdXRXaW5kb3ciLCJhdmFpbGFibGUiLCJjdXJzb3JJbmRleCIsIm9mZnNldCIsIm1heE9mZnNldCIsIndpbmRvdyIsImRpc3BsYXkiLCJjaGFyIiwiY3Vyc29ySW5XaW5kb3ciLCJjYXB0dXJlSW5wdXQiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzZXRCdWZmZXIiLCJyZWFzb24iLCJjYXB0dXJlIiwibGltaXQiLCJ2aXNpYmxlIiwidG9rZW4iLCJzbGljZUxlbmd0aCIsImdldEJ1ZmZlciIsImdldEN1cnNvciIsInNldEJ1ZmZlciIsInJlcXVlc3RlZEN1cnNvciIsInNldFNlY3JldE1vZGUiLCJlbmFibGVkIiwic2V0TW9kZVN0YXR1cyIsInNob3dDb21wYWN0aW5nU3RhdHVzIiwiaGlkZUNvbXBhY3RpbmdTdGF0dXMiLCJlbWl0UHJvbXB0IiwicHVzaFByb21wdEV2ZW50IiwibXMiLCJkYXRhIiwiY29sdW1ucyIsImV4cG9ydHMiXSwic291cmNlcyI6WyJVbmlmaWVkVUlSZW5kZXJlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaWZpZWRVSVJlbmRlcmVyIC0gQ2xhdWRlIENvZGUgc3R5bGUgbWluaW1hbGlzdCB0ZXJtaW5hbCBVSS5cbiAqXG4gKiBHb2FsczpcbiAqIC0gU2luZ2xlIGV2ZW50IHBpcGVsaW5lIGZvciBldmVyeXRoaW5nIChwcm9tcHQg4oaSIHRob3VnaHQg4oaSIHRvb2wvYnVpbGQvdGVzdCDihpIgcmVzcG9uc2UpLlxuICogLSBQaW5uZWQgc3RhdHVzL21ldGEgb25seSAobmV2ZXIgaW4gc2Nyb2xsYmFjaykuXG4gKiAtIFNjcm9sbGJhY2sgb25seSBzaG93cyBldmVudHM7IG5vIGR1cGxpY2F0ZSBzdGF0dXMgbGlrZSBcIldvcmtpbmcgb24geW91ciByZXF1ZXN0XCIgb3IgXCJSZWFkeSBmb3IgcHJvbXB0c1wiLlxuICogLSBTdHJlYW1pbmc6IGZpcnN0IGNodW5rIHNldHMgYSBvbmUtbGluZSBiYW5uZXI7IHJlbWFpbmRlciBzdHJlYW1zIG5hdHVyYWxseSAob3B0aW9uYWwpLlxuICogLSBDb2xsYXBzaWJsZS1saWtlIHN1bW1hcmllczogd2UgZm9ybWF0IGEgY29tcGFjdCBoZWFkaW5nIHdpdGggYW4gZWxsaXBzaXMgaW5kaWNhdG9yLCBidXQgYXZvaWQgY3RybCtvIGhpbnRzLlxuICovXG5cbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gJ25vZGU6cmVhZGxpbmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnbm9kZTpldmVudHMnO1xuaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcbmltcG9ydCB7IHRoZW1lLCBzcGlubmVyRnJhbWVzLCBnZXRUb29sQ29sb3IgfSBmcm9tICcuL3RoZW1lLmpzJztcbmltcG9ydCB7IGlzUGxhaW5PdXRwdXRNb2RlIH0gZnJvbSAnLi9vdXRwdXRNb2RlLmpzJztcbmltcG9ydCB7IEFuaW1hdGVkU3Bpbm5lciwgVGhpbmtpbmdJbmRpY2F0b3IsIENvbnRleHRNZXRlciwgZGlzcG9zZUFuaW1hdGlvbnMgfSBmcm9tICcuL2FuaW1hdGVkU3RhdHVzLmpzJztcbmltcG9ydCB7XG4gIGNsYW1wUGVyY2VudGFnZSxcbiAgZ2V0Q29udGV4dENvbG9yLFxufSBmcm9tICcuL3VpQ29uc3RhbnRzLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kU3VnZ2VzdGlvbiB7XG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG59XG5cbnR5cGUgQ2Fub25pY2FsRXZlbnRUeXBlID0gJ3Byb21wdCcgfCAndGhvdWdodCcgfCAnc3RyZWFtJyB8ICd0b29sJyB8ICd0b29sLXJlc3VsdCcgfCAnYnVpbGQnIHwgJ3Rlc3QnIHwgJ3Jlc3BvbnNlJztcblxuZXhwb3J0IHR5cGUgUmVuZGVyZXJFdmVudFR5cGUgPVxuICB8IENhbm9uaWNhbEV2ZW50VHlwZVxuICB8ICdyYXcnXG4gIHwgJ2Jhbm5lcidcbiAgfCAnZXJyb3InXG4gIHwgJ3N0cmVhbWluZydcbiAgfCAndG9vbC1jYWxsJ1xuICB8ICd0b29sLXJlc3VsdCc7XG5cbnR5cGUgVUlFdmVudCA9IHtcbiAgdHlwZTogQ2Fub25pY2FsRXZlbnRUeXBlO1xuICByYXdUeXBlOiBSZW5kZXJlckV2ZW50VHlwZTtcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgaXNDb21wYWN0ZWQ/OiBib29sZWFuOyAvLyBDbGF1ZGUgQ29kZSBzdHlsZSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9ja1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnMge1xuICBkZWJ1Zz86IGJvb2xlYW47XG59XG5cbnR5cGUgSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBjdXJzb3I6IG51bWJlcjtcbn07XG5cbmludGVyZmFjZSBNb2RlVG9nZ2xlU3RhdGUge1xuICB2ZXJpZmljYXRpb25FbmFibGVkOiBib29sZWFuO1xuICB2ZXJpZmljYXRpb25Ib3RrZXk/OiBzdHJpbmc7XG4gIGF1dG9Db250aW51ZUVuYWJsZWQ/OiBib29sZWFuO1xuICBhdXRvQ29udGludWVIb3RrZXk/OiBzdHJpbmc7XG4gIHRoaW5raW5nTW9kZUxhYmVsPzogc3RyaW5nIHwgbnVsbDtcbiAgdGhpbmtpbmdIb3RrZXk/OiBzdHJpbmc7XG4gIGNyaXRpY2FsQXBwcm92YWxNb2RlPzogJ2F1dG8nIHwgJ2FwcHJvdmFsJztcbiAgY3JpdGljYWxBcHByb3ZhbEhvdGtleT86IHN0cmluZztcbiAgZHVhbFJsRW5hYmxlZD86IGJvb2xlYW47XG4gIGR1YWxSbEhvdGtleT86IHN0cmluZztcbiAgZGVidWdFbmFibGVkPzogYm9vbGVhbjtcbiAgZGVidWdIb3RrZXk/OiBzdHJpbmc7XG59XG5cbi8qKlxuICogUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgZHVyaW5nIGR1YWwtUkwgbW9kZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSTEFnZW50U3RhdHVzIHtcbiAgLyoqIEN1cnJlbnQgYWN0aXZlIHZhcmlhbnQgYmVpbmcgZXhlY3V0ZWQgKi9cbiAgYWN0aXZlVmFyaWFudD86ICdwcmltYXJ5JyB8ICdyZWZpbmVyJyB8IG51bGw7XG4gIC8qKiBDdXJyZW50IG1vZHVsZSBiZWluZyBwcm9jZXNzZWQgKi9cbiAgY3VycmVudE1vZHVsZT86IHN0cmluZztcbiAgLyoqIEN1cnJlbnQgc3RlcCB3aXRoaW4gdGhlIG1vZHVsZSAqL1xuICBjdXJyZW50U3RlcD86IHN0cmluZztcbiAgLyoqIFdpbiBzdGF0aXN0aWNzIGZvciBwcmltYXJ5IHZzIHJlZmluZXIgKi9cbiAgd2lucz86IHsgcHJpbWFyeTogbnVtYmVyOyByZWZpbmVyOiBudW1iZXI7IHRpZXM6IG51bWJlciB9O1xuICAvKiogQ3VycmVudCByZXdhcmQgc2NvcmVzIGlmIGF2YWlsYWJsZSAqL1xuICBzY29yZXM/OiB7IHByaW1hcnk/OiBudW1iZXI7IHJlZmluZXI/OiBudW1iZXIgfTtcbiAgLyoqIEh1bWFuLWFjY3VyYWN5IHN0eWxlIHNjb3JlcyAoMC0xKSAqL1xuICBhY2N1cmFjeT86IHsgcHJpbWFyeT86IG51bWJlcjsgcmVmaW5lcj86IG51bWJlciB9O1xuICAvKiogV2hldGhlciB2YXJpYW50cyBhcmUgcnVubmluZyBpbiBwYXJhbGxlbCAqL1xuICBwYXJhbGxlbEV4ZWN1dGlvbj86IGJvb2xlYW47XG4gIC8qKiBUb3RhbCBzdGVwcyBjb21wbGV0ZWQgKi9cbiAgc3RlcHNDb21wbGV0ZWQ/OiBudW1iZXI7XG4gIC8qKiBUb3RhbCBzdGVwcyB0byBwcm9jZXNzICovXG4gIHRvdGFsU3RlcHM/OiBudW1iZXI7XG4gIC8qKiBMYXN0IHN0ZXAgd2lubmVyIGZvciBjZWxlYnJhdGlvbiAqL1xuICBsYXN0V2lubmVyPzogJ3ByaW1hcnknIHwgJ3JlZmluZXInIHwgJ3RpZScgfCBudWxsO1xuICAvKiogU3RyZWFrIGNvdW50IGZvciBjdXJyZW50IGxlYWRlciAqL1xuICBzdHJlYWs/OiBudW1iZXI7XG59XG5cbi8qKlxuICogQXR0YWNrIG9wZXJhdGlvbiBzdGF0dXMgZm9yIHJlYWwtdGltZSBkaXNwbGF5IGR1cmluZyBvZmZlbnNpdmUgc2VjdXJpdHkgb3BlcmF0aW9ucy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBBdHRhY2tTdGF0dXMge1xuICAvKiogQ3VycmVudCBhdHRhY2sgcGhhc2UgKi9cbiAgcGhhc2U/OiAncmVjb24nIHwgJ3NjYW5uaW5nJyB8ICdleHBsb2l0YXRpb24nIHwgJ3BlcnNpc3RlbmNlJyB8ICdleGZpbHRyYXRpb24nIHwgJ2Rlc3RydWN0aW9uJztcbiAgLyoqIEN1cnJlbnQgdGFyZ2V0IGJlaW5nIGF0dGFja2VkICovXG4gIGN1cnJlbnRUYXJnZXQ/OiBzdHJpbmc7XG4gIC8qKiBOdW1iZXIgb2YgdGFyZ2V0cyBhY3F1aXJlZCAqL1xuICB0YXJnZXRzQWNxdWlyZWQ/OiBudW1iZXI7XG4gIC8qKiBOdW1iZXIgb2YgdnVsbmVyYWJpbGl0aWVzIGZvdW5kICovXG4gIHZ1bG5lcmFiaWxpdGllc0ZvdW5kPzogbnVtYmVyO1xuICAvKiogTnVtYmVyIG9mIHN1Y2Nlc3NmdWwgZXhwbG9pdHMgKi9cbiAgZXhwbG9pdHNTdWNjZXNzZnVsPzogbnVtYmVyO1xuICAvKiogUGVyc2lzdGVuY2UgbWVjaGFuaXNtcyBlc3RhYmxpc2hlZCAqL1xuICBwZXJzaXN0ZW5jZUVzdGFibGlzaGVkPzogbnVtYmVyO1xuICAvKiogRGF0YSBleGZpbHRyYXRlZCAoTUIpICovXG4gIGRhdGFFeGZpbHRyYXRlZD86IG51bWJlcjtcbiAgLyoqIEluZnJhc3RydWN0dXJlIGNvbXByb21pc2VkIGNvdW50ICovXG4gIGluZnJhc3RydWN0dXJlQ29tcHJvbWlzZWQ/OiBudW1iZXI7XG4gIC8qKiBSZWFsLXRpbWUgbW9uaXRvcmluZyBhY3RpdmUgKi9cbiAgbW9uaXRvcmluZ0FjdGl2ZT86IGJvb2xlYW47XG4gIC8qKiBDdXJyZW50IGF0dGFjayBtb2RlICovXG4gIGF0dGFja01vZGU/OiAncmVjb24nIHwgJ2F0dGFjaycgfCAnZXhwbG9pdCcgfCAncGVyc2lzdGVuY2UnIHwgJ2MyJyB8ICdkZXN0cnVjdGlvbic7XG4gIC8qKiBBdHRhY2sgc3VjY2VzcyByYXRlIHBlcmNlbnRhZ2UgKi9cbiAgc3VjY2Vzc1JhdGU/OiBudW1iZXI7XG4gIC8qKiBMYXN0IGF0dGFjayByZXN1bHQgKi9cbiAgbGFzdFJlc3VsdD86ICdzdWNjZXNzJyB8ICdmYWlsdXJlJyB8ICdwYXJ0aWFsJztcbiAgLyoqIEFjdGl2ZSBhdHRhY2sgbW9kdWxlcyAqL1xuICBhY3RpdmVNb2R1bGVzPzogc3RyaW5nW107XG4gIC8qKiBUaW1lIHNpbmNlIGF0dGFjayBzdGFydGVkICovXG4gIGF0dGFja0R1cmF0aW9uPzogbnVtYmVyO1xufVxuXG5jb25zdCBFU0MgPSB7XG4gIEhJREVfQ1VSU09SOiAnXFx4MWJbPzI1bCcsXG4gIFNIT1dfQ1VSU09SOiAnXFx4MWJbPzI1aCcsXG4gIENMRUFSX1NDUkVFTjogJ1xceDFiWzJKJyxcbiAgQ0xFQVJfTElORTogJ1xceDFiWzJLJyxcbiAgSE9NRTogJ1xceDFiW0gnLFxuICBFTkFCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRoJyxcbiAgRElTQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGwnLFxuICBUTzogKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7cm93fTske2NvbH1IYCxcbiAgVE9fQ09MOiAoY29sOiBudW1iZXIpID0+IGBcXHgxYlske2NvbH1HYCxcbiAgRVJBU0VfRE9XTjogJ1xceDFiW0onLFxuICBSRVZFUlNFOiAnXFx4MWJbN20nLFxuICBSRVNFVDogJ1xceDFiWzBtJyxcbiAgLy8gU2Nyb2xsIHJlZ2lvbiBjb250cm9sIC0gQ1JJVElDQUwgZm9yIGZpeGVkIGJvdHRvbSBvdmVybGF5XG4gIFNFVF9TQ1JPTExfUkVHSU9OOiAodG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyKSA9PiBgXFx4MWJbJHt0b3B9OyR7Ym90dG9tfXJgLFxuICBSRVNFVF9TQ1JPTExfUkVHSU9OOiAnXFx4MWJbcicsXG4gIFNBVkVfQ1VSU09SOiAnXFx4MWJbcycsXG4gIFJFU1RPUkVfQ1VSU09SOiAnXFx4MWJbdScsXG59IGFzIGNvbnN0O1xuXG5jb25zdCBORVdMSU5FX1BMQUNFSE9MREVSID0gJ+KGtSc7XG5cbmV4cG9ydCBjbGFzcyBVbmlmaWVkVUlSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IHJsOiByZWFkbGluZS5JbnRlcmZhY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5Nb2RlOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IGludGVyYWN0aXZlOiBib29sZWFuO1xuXG4gIHByaXZhdGUgcm93cyA9IDI0O1xuICBwcml2YXRlIGNvbHMgPSA4MDtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyV2lkdGg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgZXZlbnRRdWV1ZTogVUlFdmVudFtdID0gW107XG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcblxuICBwcml2YXRlIGJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIGN1cnNvciA9IDA7XG4gIHByaXZhdGUgaGlzdG9yeTogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoaXN0b3J5SW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uczogeyBjb21tYW5kOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IGNhdGVnb3J5Pzogc3RyaW5nIH1bXSA9IFtdO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICBwcml2YXRlIGF2YWlsYWJsZUNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICBwcml2YXRlIGhvdGtleXNJblRvZ2dsZUxpbmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGNvbGxhcHNlZFBhc3RlOiB7IHRleHQ6IHN0cmluZzsgbGluZXM6IG51bWJlcjsgY2hhcnM6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyA9ICdpZGxlJztcbiAgcHJpdmF0ZSBsYXN0VG9vbFJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIC8qKiBTdGFjayBvZiBjb2xsYXBzZWQgdG9vbCByZXN1bHRzIGZvciBDdHJsK08gZXhwYW5zaW9uICovXG4gIHByaXZhdGUgY29sbGFwc2VkVG9vbFJlc3VsdHM6IEFycmF5PHtcbiAgICB0b29sTmFtZTogc3RyaW5nO1xuICAgIGNvbnRlbnQ6IHN0cmluZztcbiAgICBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgdGltZXN0YW1wOiBudW1iZXI7XG4gIH0+ID0gW107XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q29sbGFwc2VkUmVzdWx0cyA9IDUwO1xuICAvKiogVHJhY2sgdGhlIGxhc3QgdG9vbCBuYW1lIGZvciBwYWlyaW5nIHdpdGggcmVzdWx0cyAqL1xuICBwcml2YXRlIGxhc3RUb29sTmFtZTogc3RyaW5nID0gJyc7XG4gIHByaXZhdGUgc3RyZWFtaW5nU3RhcnRUaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNPdmVycmlkZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzU3RyZWFtaW5nOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvLyBBbmltYXRlZCBVSSBjb21wb25lbnRzXG4gIHByaXZhdGUgc3RyZWFtaW5nU3Bpbm5lcjogQW5pbWF0ZWRTcGlubmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGhpbmtpbmdJbmRpY2F0b3I6IFRoaW5raW5nSW5kaWNhdG9yIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY29udGV4dE1ldGVyOiBDb250ZXh0TWV0ZXI7XG4gIHByaXZhdGUgc3Bpbm5lckZyYW1lID0gMDtcbiAgcHJpdmF0ZSBzcGlubmVySW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4SW5saW5lUGFuZWxMaW5lcyA9IDEyO1xuXG4gIC8vIENvbXBhY3Rpbmcgc3RhdHVzIGFuaW1hdGlvblxuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlID0gJyc7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ZyYW1lID0gMDtcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMgPSBbJ+KcuycsICfinLwnLCAn4py7JywgJ+KcuiddO1xuXG4gIC8vIEFuaW1hdGVkIGFjdGl2aXR5IGxpbmUgKGUuZy4sIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCIpXG4gIHByaXZhdGUgYWN0aXZpdHlNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVBocmFzZUluZGV4ID0gMDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgYWN0aXZpdHlTdGFyRnJhbWVzID0gWyfinLMnLCAn4py0JywgJ+KctScsICfinLYnLCAn4py3JywgJ+KcuCddO1xuICAvLyBUb2tlbiBjb3VudCBkdXJpbmcgc3RyZWFtaW5nXG4gIHByaXZhdGUgc3RyZWFtaW5nVG9rZW5zID0gMDtcbiAgLy8gRWxhcHNlZCB0aW1lIGNvbG9yIGFuaW1hdGlvblxuICBwcml2YXRlIGVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGFwc2VkQ29sb3JGcmFtZXMgPSBbJyNGNTlFMEInLCAnI0ZCQkYyNCcsICcjRkNEMzREJywgJyNGREU2OEEnLCAnI0ZDRDM0RCcsICcjRkJCRjI0J107XG4gIC8vIFVzZXItZnJpZW5kbHkgYWN0aXZpdHkgcGhyYXNlcyAoY2xlYW4sIHByb2Zlc3Npb25hbClcbiAgcHJpdmF0ZSByZWFkb25seSBmdW5BY3Rpdml0eVBocmFzZXMgPSBbXG4gICAgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnLCAnQW5hbHl6aW5nJywgJ1dvcmtpbmcnLCAnUHJlcGFyaW5nJyxcbiAgXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgPSA4O1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyA9IDE4MDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGhvdWdodERlZHVwV2luZG93TXMgPSAxNTAwMDtcbiAgcHJpdmF0ZSBsYXN0Q3VyYXRlZFRob3VnaHQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHN0YXR1c01ldGE6IHtcbiAgICBtb2RlbD86IHN0cmluZztcbiAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgd3JpdGVzPzogc3RyaW5nO1xuICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICB9ID0ge307XG4gIHByaXZhdGUgdG9nZ2xlU3RhdGU6IE1vZGVUb2dnbGVTdGF0ZSA9IHtcbiAgICB2ZXJpZmljYXRpb25FbmFibGVkOiBmYWxzZSxcbiAgICBhdXRvQ29udGludWVFbmFibGVkOiBmYWxzZSxcbiAgICBjcml0aWNhbEFwcHJvdmFsTW9kZTogJ2F1dG8nLFxuICAgIGR1YWxSbEVuYWJsZWQ6IGZhbHNlLFxuICAgIGRlYnVnRW5hYmxlZDogZmFsc2UsXG4gIH07XG5cbiAgLyoqIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIGR1YWwtUkwgbW9kZSBkaXNwbGF5ICovXG4gIHByaXZhdGUgcmxTdGF0dXM6IFJMQWdlbnRTdGF0dXMgPSB7fTtcblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICAvKiogRW5zdXJlIGN1cnNvciBpcyBhbHdheXMgd2l0aGluIHZhbGlkIGJvdW5kcyBmb3IgdGhlIGN1cnJlbnQgYnVmZmVyICovXG4gIHByaXZhdGUgY2xhbXBDdXJzb3IoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLmN1cnNvciwgdGhpcy5idWZmZXIubGVuZ3RoKSk7XG4gIH1cblxuICAvKiogU2FmZWx5IGFwcGVuZCB0byBwYXN0ZSBidWZmZXIgd2l0aCBzaXplIGxpbWl0IGVuZm9yY2VtZW50ICovXG4gIHByaXZhdGUgYXBwZW5kVG9QYXN0ZUJ1ZmZlcihidWZmZXI6ICdwYXN0ZScgfCAncGxhaW5QYXN0ZScsIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cpIHJldHVybjsgLy8gQWxyZWFkeSBhdCBsaW1pdFxuICAgIGNvbnN0IGN1cnJlbnQgPSBidWZmZXIgPT09ICdwYXN0ZScgPyB0aGlzLnBhc3RlQnVmZmVyIDogdGhpcy5wbGFpblBhc3RlQnVmZmVyO1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplIC0gY3VycmVudC5sZW5ndGg7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0b0FkZCA9IHRleHQubGVuZ3RoIDw9IHJlbWFpbmluZyA/IHRleHQgOiB0ZXh0LnNsaWNlKDAsIHJlbWFpbmluZyk7XG4gICAgaWYgKGJ1ZmZlciA9PT0gJ3Bhc3RlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH1cbiAgICBpZiAodG9BZGQubGVuZ3RoIDwgdGV4dC5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIFN0cmlwIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyBhbmQgc3BlY2lhbCBmb3JtYXR0aW5nIGZyb20gdGV4dCB0byBnZXQgY2xlYW4gcGxhaW50ZXh0ICovXG4gIHByaXZhdGUgc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgYWxsIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyAoQ1NJLCBPU0MsIGV0Yy4pXG4gICAgLy8gSW5jbHVkaW5nIGJyYWNrZXRlZCBwYXN0ZSBtYXJrZXJzIChcXHgxYlsyMDB+IGFuZCBcXHgxYlsyMDF+KSB3aGljaCBlbmQgd2l0aCB+XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBsZXQgc2FuaXRpemVkID0gdGV4dC5yZXBsYWNlKC9cXHgxYlxcW1swLTk7XSpbQS1aYS16fl18XFx4MWJcXF1bXlxceDA3XSpcXHgwN3xcXHgxYltQWF5fXVteXFx4MWJdKlxceDFiXFxcXHxcXHgxYi4vZywgJycpO1xuICAgIC8vIEFsc28gcmVtb3ZlIHBhcnRpYWwgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgdGhhdCBtYXkgaGF2ZSBsZWFrZWQgKGUuZy4sIFwiWzIwMH5cIiB3aXRob3V0IEVTQylcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxbMjBbMDFdfi9nLCAnJyk7XG4gICAgLy8gUmVtb3ZlIGFueSBzdHJheSBlc2NhcGUgY2hhcmFjdGVyIGF0IHN0YXJ0L2VuZFxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL15cXHgxYit8XFx4MWIrJC9nLCAnJyk7XG5cbiAgICAvLyBTdHJpcCBzcGVjaWFsIGZvcm1hdHRpbmcgY2hhcmFjdGVycyBmb3IgY2xlYW4gcGxhaW50ZXh0OlxuICAgIC8vIC0gWmVyby13aWR0aCBjaGFyYWN0ZXJzIChaV1NQLCBaV05KLCBaV0osIEJPTS9aV05CU1ApXG4gICAgLy8gLSBXb3JkIGpvaW5lciwgaW52aXNpYmxlIHNlcGFyYXRvciwgaW52aXNpYmxlIHRpbWVzL3BsdXNcbiAgICAvLyAtIERpcmVjdGlvbmFsIGZvcm1hdHRpbmcgKExSTSwgUkxNLCBMUkUsIFJMRSwgTFJPLCBSTE8sIFBERiwgTFJJLCBSTEksIEZTSSwgUERJKVxuICAgIC8vIC0gT2JqZWN0IHJlcGxhY2VtZW50IGNoYXJhY3RlclxuICAgIC8vIC0gU29mdCBoeXBoZW5cbiAgICAvLyAtIE5vbi1icmVha2luZyBzcGFjZSB2YXJpYW50cyAoTkJTUCwgbmFycm93IE5CU1AsIGZpZ3VyZSBzcGFjZSwgZXRjLilcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvW1xcdTIwMEItXFx1MjAwRlxcdTIwMjgtXFx1MjAyRlxcdTIwNjAtXFx1MjA2RlxcdUZFRkZcXHUwMEFEXFx1RkZGQ10vZywgJycpO1xuXG4gICAgLy8gTm9ybWFsaXplIHZhcmlvdXMgc3BhY2UgY2hhcmFjdGVycyB0byByZWd1bGFyIHNwYWNlXG4gICAgLy8gSW5jbHVkZXM6IE5CU1AsIGVuL2VtIHNwYWNlLCB0aGluIHNwYWNlLCBoYWlyIHNwYWNlLCBmaWd1cmUgc3BhY2UsIGV0Yy5cbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvW1xcdTAwQTBcXHUyMDAwLVxcdTIwMEFcXHUyMDJGXFx1MjA1RlxcdTMwMDBdL2csICcgJyk7XG5cbiAgICAvLyBSZW1vdmUgY29udHJvbCBjaGFyYWN0ZXJzIGV4Y2VwdCB0YWIsIG5ld2xpbmUsIGNhcnJpYWdlIHJldHVyblxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgc2FuaXRpemVkID0gc2FuaXRpemVkLnJlcGxhY2UoL1tcXHgwMC1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDdGXS9nLCAnJyk7XG5cbiAgICByZXR1cm4gc2FuaXRpemVkO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRIb3RrZXkoY29tYm8/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWNvbWJvPy50cmltKCkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBjb21iby50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgbGFzdFByb21wdEV2ZW50OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBwcm9tcHRIZWlnaHQgPSAwO1xuICBwcml2YXRlIGxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgcHJpdmF0ZSBpbmxpbmVQYW5lbDogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoYXNDb252ZXJzYXRpb25Db250ZW50ID0gZmFsc2U7XG4gIHByaXZhdGUgaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZUlkbGVNcyA9IDgwOyAvLyBJbmNyZWFzZWQgZm9yIG1vcmUgcm9idXN0IG11bHRpLWxpbmUgcGFzdGUgZGV0ZWN0aW9uXG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gMTIwOyAvLyBJbmNyZWFzZWQgd2luZG93IGZvciBwYXN0ZSBidXJzdCBkZXRlY3Rpb25cbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlVHJpZ2dlckNoYXJzID0gMTY7IC8vIExvd2VyIHRocmVzaG9sZCB0byBjYXRjaCBtdWx0aS1saW5lIHBhc3RlcyBzb29uZXJcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnMgPSAxOyAvLyBJbW1lZGlhdGUgZGV0ZWN0aW9uIG9mIG11bHRpLWxpbmUgY29udGVudFxuICAvLyBQYXN0ZSBidWZmZXIgbGltaXRzIHRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb25cbiAgcHJpdmF0ZSByZWFkb25seSBtYXhQYXN0ZUJ1ZmZlclNpemUgPSAxMCAqIDEwMjQgKiAxMDI0OyAvLyAxME1CIG1heCBwYXN0ZSBzaXplXG4gIHByaXZhdGUgcGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBUcmFjayBpZiBwYXN0ZSB3YXMgdHJ1bmNhdGVkXG4gIHByaXZhdGUgY3Vyc29yVmlzaWJsZUNvbHVtbiA9IDE7XG4gIHByaXZhdGUgaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICBwcml2YXRlIHBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBsYWluUGFzdGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICBwcml2YXRlIHBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICBwcml2YXRlIHBsYWluUmVjZW50Q2h1bmtzOiBBcnJheTx7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9PiA9IFtdO1xuICAvLyBQZW5kaW5nIGluc2VydCBidWZmZXI6IGhvbGRzIGNoYXJhY3RlcnMgZHVyaW5nIHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gcHJldmVudCB2aXN1YWwgbGVha1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBwZW5kaW5nSW5zZXJ0VGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGVuZGluZ0luc2VydERlbGF5TXMgPSA4MDsgLy8gV2FpdCBiZWZvcmUgY29tbWl0dGluZyBjaGFycyBhcyBub3JtYWwgaW5wdXRcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRFdmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICBwcml2YXRlIGhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gIHByaXZhdGUgaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IGZhbHNlOyAgLy8gVHJhY2sgaWYgd2UndmUgZXZlciByZW5kZXJlZCBmb3IgaW5saW5lIGNsZWFyaW5nXG4gIHByaXZhdGUgbGFzdE92ZXJsYXk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gIHByaXZhdGUgcHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gIHByaXZhdGUgc2VjcmV0TW9kZSA9IGZhbHNlO1xuICAvLyBSZW5kZXIgdGhyb3R0bGluZyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICBwcml2YXRlIHBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyVGltZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyVGhyb3R0bGVNcyA9IDE2OyAvLyB+NjBmcHMgbWF4XG4gIHByaXZhdGUgcmVuZGVyVGhyb3R0bGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgLy8gRGlzcG9zYWwgc3RhdGUgdG8gcHJldmVudCBvcGVyYXRpb25zIGFmdGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBkaXNwb3NlZCA9IGZhbHNlO1xuICAvLyBCb3VuZCBldmVudCBoYW5kbGVycyBmb3IgcHJvcGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBib3VuZFJlc2l6ZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kS2V5cHJlc3NIYW5kbGVyOiAoKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dENhcHR1cmU6XG4gICAgfCB7XG4gICAgICAgIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgICByZWplY3Q/OiAocmVhc29uPzogdW5rbm93bikgPT4gdm9pZDtcbiAgICAgICAgb3B0aW9uczogeyB0cmltOiBib29sZWFuOyBhbGxvd0VtcHR5OiBib29sZWFuIH07XG4gICAgICB9XG4gICAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbSA9IHByb2Nlc3Muc3Rkb3V0LFxuICAgIGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbSA9IHByb2Nlc3Muc3RkaW4sXG4gICAgX29wdGlvbnM/OiBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5pbnRlcmFjdGl2ZSA9IEJvb2xlYW4odGhpcy5vdXRwdXQuaXNUVFkgJiYgdGhpcy5pbnB1dC5pc1RUWSAmJiAhcHJvY2Vzcy5lbnZbJ0NJJ10pO1xuICAgIHRoaXMucGxhaW5Nb2RlID0gaXNQbGFpbk91dHB1dE1vZGUoKSB8fCAhdGhpcy5pbnRlcmFjdGl2ZTtcblxuICAgIC8vIEluaXRpYWxpemUgYW5pbWF0ZWQgY29tcG9uZW50c1xuICAgIHRoaXMuY29udGV4dE1ldGVyID0gbmV3IENvbnRleHRNZXRlcigpO1xuXG4gICAgdGhpcy5ybCA9IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gICAgICBpbnB1dDogdGhpcy5pbnB1dCxcbiAgICAgIG91dHB1dDogdGhpcy5vdXRwdXQsXG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIHByb21wdDogJycsXG4gICAgICB0YWJTaXplOiAyLFxuICAgIH0pO1xuICAgIHRoaXMucmwuc2V0UHJvbXB0KCcnKTtcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXJzIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm91dHB1dC5vbigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuXG4gICAgdGhpcy5zZXR1cElucHV0SGFuZGxlcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmVzZXQgaW5wdXQgYW5kIHBhc3RlIHN0YXRlIHRvIHByZXZlbnQgc3RhbGUgc3RhdGUgZnJvbSBwcmV2aW91cyBzZXNzaW9uXG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gSWYgYW4gb3ZlcmxheSB3YXMgYWxyZWFkeSByZW5kZXJlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gKGUuZy4sIGJhbm5lciBlbWl0dGVkIGVhcmx5KSxcbiAgICAgIC8vIGNsZWFyIGl0IHNvIGluaXRpYWxpemUoKSBkb2Vzbid0IHN0YWNrIGEgc2Vjb25kIGNvbnRyb2wgYmFyIGluIHNjcm9sbGJhY2suXG4gICAgICBpZiAodGhpcy5oYXNSZW5kZXJlZFByb21wdCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQbGFpbiBtb2RlOiBtaW5pbWFsIHNldHVwLCBzdGlsbCByZW5kZXIgYSBzaW1wbGUgcHJvbXB0IGxpbmVcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkIGZpcnN0IHRvIHByZXZlbnQgYW55IHBlbmRpbmcgb3BlcmF0aW9uc1xuICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdSZW5kZXJlciBkaXNwb3NlZCcpKTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG5cbiAgICAvLyBDbGVhciByZW5kZXIgdGhyb3R0bGUgdGltZXJcbiAgICBpZiAodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKTtcbiAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU3RvcCBhbnkgcnVubmluZyBhbmltYXRpb25zXG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RyZWFtaW5nU3Bpbm5lcikge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnRoaW5raW5nSW5kaWNhdG9yKSB7XG4gICAgICB0aGlzLnRoaW5raW5nSW5kaWNhdG9yLnN0b3AoKTtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3IgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHRNZXRlci5kaXNwb3NlKCk7XG4gICAgZGlzcG9zZUFuaW1hdGlvbnMoKTtcblxuICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICBpZiAodGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMub3V0cHV0LnJlbW92ZUxpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKSB7XG4gICAgICB0aGlzLmlucHV0LnJlbW92ZUxpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBFdmVudEVtaXR0ZXIgbGlzdGVuZXJzIGZyb20gdGhpcyBpbnN0YW5jZVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgc28gaXQgZG9lc24ndCByZW1haW4gaW4gc2Nyb2xsYmFjayBoaXN0b3J5XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgdGhpcy53cml0ZShFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUoZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IG51bGw7XG5cbiAgICAvLyBDbGVhciBldmVudCBxdWV1ZVxuICAgIHRoaXMuZXZlbnRRdWV1ZSA9IFtdO1xuICB9XG5cbiAgc3VzcGVuZFByb21wdFJlbmRlcmluZygpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IHRydWU7XG4gIH1cblxuICByZXN1bWVQcm9tcHRSZW5kZXJpbmcocmVuZGVyOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IGZhbHNlO1xuICAgIGlmIChyZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIElucHV0IGhhbmRsaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgc2V0dXBJbnB1dEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJsLnJlbW92ZUFsbExpc3RlbmVycygnbGluZScpO1xuICAgIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyh0aGlzLmlucHV0LCB0aGlzLnJsKTtcbiAgICBpZiAodGhpcy5pbnB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5pbnB1dC5zZXRSYXdNb2RlKHRydWUpO1xuICAgIH1cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5cHJlc3Moc3RyLCBrZXkpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5pbnB1dC5vbigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgZW1pdElucHV0Q2hhbmdlKCk6IHZvaWQge1xuICAgIGNvbnN0IHBheWxvYWQ6IElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gICAgICB0ZXh0OiB0aGlzLmJ1ZmZlcixcbiAgICAgIGN1cnNvcjogdGhpcy5jdXJzb3IsXG4gICAgfTtcbiAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIHBheWxvYWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlwcmVzcyhzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiB2b2lkIHtcbiAgICAvLyBOb3JtYWxpemUgbWlzc2luZyBrZXkgbWV0YWRhdGEgKGNvbW1vbiBmb3Igc29tZSB0ZXJtaW5hbHMgZW1pdHRpbmcgcmF3IGVzY2FwZSBjb2RlcylcbiAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5ID8/IHRoaXMucGFyc2VFc2NhcGVTZXF1ZW5jZShzdHIpO1xuICAgIGNvbnN0IGtleUZvclBhc3RlID0gbm9ybWFsaXplZEtleSA/PyAoc3RyID8geyBzZXF1ZW5jZTogc3RyIH0gYXMgcmVhZGxpbmUuS2V5IDoga2V5KTtcblxuICAgIGlmICh0aGlzLmhhbmRsZUJyYWNrZXRlZFBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFuZGxlUGxhaW5QYXN0ZShzdHIsIGtleUZvclBhc3RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG1hY09TIE9wdGlvbitrZXkgcHJvZHVjZXMgVW5pY29kZSBjaGFyYWN0ZXJzOyBoYW5kbGUgdGhlbSBiZWZvcmUga2V5IG1ldGFkYXRhIGNoZWNrcy5cbiAgICBjb25zdCBtYWNPcHRpb25DaGFyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICfCqSc6ICdnJywgIC8vIE9wdGlvbitHXG4gICAgICAn4oSiJzogJ2cnLCAgLy8gT3B0aW9uK1NoaWZ0K0dcbiAgICAgICfDpSc6ICdhJywgIC8vIE9wdGlvbitBXG4gICAgICAnw4UnOiAnYScsICAvLyBPcHRpb24rU2hpZnQrQVxuICAgICAgJ+KImic6ICd2JywgIC8vIE9wdGlvbitWIC8gT3B0aW9uK1NoaWZ0K1ZcbiAgICAgICfiiIInOiAnZCcsICAvLyBPcHRpb24rRFxuICAgICAgJ8OOJzogJ2QnLCAgLy8gT3B0aW9uK1NoaWZ0K0QgKGNvbW1vbiBtYWNPUyBlbWlzc2lvbilcbiAgICAgICfiiIYnOiAnZCcsICAvLyBDb21tb24gYWx0ZXJuYXRlIGRlbHRhIHN5bWJvbFxuICAgIH07XG5cbiAgICBpZiAoc3RyICYmIG1hY09wdGlvbkNoYXJzW3N0cl0pIHtcbiAgICAgIGNvbnN0IGxldHRlciA9IG1hY09wdGlvbkNoYXJzW3N0cl07XG4gICAgICAvLyBDbGVhciBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHNvIHRoZSBzeW1ib2wgbmV2ZXIgbGFuZHMgaW4gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBzd2l0Y2ggKGxldHRlcikge1xuICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdnJzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWR1YWwtcmwnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdmVyaWZ5Jyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFub3JtYWxpemVkS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlICYmIG5vcm1hbGl6ZWRLZXkuY3RybCAmJiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYycgfHwgbm9ybWFsaXplZEtleS5uYW1lID09PSAnZCcpKSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVjdCBDdHJsK1NoaWZ0IGNvbWJpbmF0aW9ucyAoZmFsbGJhY2sgZm9yIG5vbi1tYWNPUyBvciBjb25maWd1cmVkIHRlcm1pbmFscylcbiAgICBjb25zdCBpc0N0cmxTaGlmdCA9IChsZXR0ZXI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgY29uc3QgbG93ZXJMZXR0ZXIgPSBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHVwcGVyTGV0dGVyID0gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgIC8vIFBhdHRlcm4gMTogU3RhbmRhcmQgcmVhZGxpbmUgc2hpZnQgZmxhZyArIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5zaGlmdCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDI6IFNvbWUgdGVybWluYWxzIHNlbmQgdXBwZXJjYXNlIG5hbWUgd2l0aCBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gdXBwZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMzogTWV0YS9BbHQgKyBsZXR0ZXIgKGlUZXJtMiB3aXRoIFwiT3B0aW9uIHNlbmRzIE1ldGFcIilcbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm1ldGEgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA0OiBSYXcgZXNjYXBlIHNlcXVlbmNlIGNoZWNrIGZvciB4dGVybS1zdHlsZSBtb2RpZmllcnNcbiAgICAgIGNvbnN0IHNlcSA9IHN0ciB8fCBub3JtYWxpemVkS2V5LnNlcXVlbmNlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmIChzZXEgJiYgL15cXHgxYlxcW1swLTldKzs2W35BLVpdPyQvLnRlc3Qoc2VxKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA1OiBFU0MgKyBsZXR0ZXIgKE9wdGlvbiBzZW5kcyBFU0MgcHJlZml4IGluIHNvbWUgY29uZmlncylcbiAgICAgIGlmIChzZXEgJiYgc2VxID09PSBgXFx4MWIke2xvd2VyTGV0dGVyfWApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlID0gKGxldHRlcjogJ2EnIHwgJ2cnIHwgJ2QnIHwgJ3YnKTogdm9pZCA9PiB7XG4gICAgICAvLyBFbnN1cmUgbm8gYnVmZmVyZWQgY2hhcnMgbGVhayBpbnRvIHRoZSBwcm9tcHRcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgICAgaWYgKGxldHRlciA9PT0gJ2EnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ2cnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZCcpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICd2Jykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfTtcblxuICAgIGlmIChpc0N0cmxTaGlmdCgnYScpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2EnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2cnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdkJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgndicpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ3YnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmVtaXQoJ3Jlc3VtZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSAnYycpIHtcbiAgICAgIC8vIEN0cmwrQyBiZWhhdmlvcjpcbiAgICAgIC8vIDEuIElmIGJ1ZmZlciBoYXMgdGV4dDogY2xlYXIgaXQgZmlyc3QsIHRoZW4gbm90aWZ5IHNoZWxsXG4gICAgICAvLyAyLiBJZiBidWZmZXIgaXMgZW1wdHk6IGxldCBzaGVsbCBkZWNpZGUgdG8gcGF1c2UgQUkgb3IgcXVpdFxuICAgICAgLy9cbiAgICAgIC8vIFRoZSBJbnRlcmFjdGl2ZVNoZWxsIG1haW50YWlucyBhIGNvdW50ZXIgdG8gdHJhY2sgQ3RybCtDIHByZXNzZXMgYW5kIGRlY2lkZXNcbiAgICAgIC8vIHdoZXRoZXIgdG8gcGF1c2UgQUkgb3IgZXhpdCBiYXNlZCBvbiBwcm9jZXNzaW5nIHN0YXRlLlxuXG4gICAgICBjb25zdCBoYWRCdWZmZXIgPSB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgICAgaWYgKGhhZEJ1ZmZlcikge1xuICAgICAgICAvLyBDbGVhciB0aGUgaW5wdXQgYnVmZmVyIGZpcnN0XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIC8vIEVtaXQgY3RybGMgZXZlbnQgd2l0aCBidWZmZXIgc3RhdGUgc28gc2hlbGwgY2FuIGhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICB0aGlzLmVtaXQoJ2N0cmxjJywgeyBoYWRCdWZmZXIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZCcpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdpbnRlcnJ1cHQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICd1Jykge1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrTDogQ2xlYXIgc2NyZWVuIHdoaWxlIHByZXNlcnZpbmcgaW5wdXRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdsJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIENsZWFyIHNjcmVlbiBhbmQgcmVkcmF3XG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFx4MWJbMkpcXHgxYltIJyk7IC8vIENsZWFyIHNjcmVlbiwgbW92ZSB0byB0b3BcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5jbGVhckNvbGxhcHNlZFJlc3VsdHMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtPOiBFeHBhbmQgbGFzdCB0b29sIHJlc3VsdFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ28nKSB7XG4gICAgICB0aGlzLmVtaXQoJ2V4cGFuZC10b29sLXJlc3VsdCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrQTogTW92ZSBjdXJzb3IgdG8gc3RhcnQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2EnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0U6IE1vdmUgY3Vyc29yIHRvIGVuZCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK1c6IERlbGV0ZSB3b3JkIGJhY2t3YXJkXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndycpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgLy8gRmluZCBzdGFydCBvZiBwcmV2aW91cyB3b3JkXG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCB0cmFpbGluZyBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIC8vIFNraXAgd29yZCBjaGFyYWN0ZXJzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtLOiBEZWxldGUgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdrJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSG9tZTogTW92ZSBjdXJzb3IgdG8gc3RhcnRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdob21lJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5kOiBNb3ZlIGN1cnNvciB0byBlbmRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdlbmQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K0xlZnQ6IE1vdmUgY3Vyc29yIGJhY2sgb25lIHdvcmRcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdsZWZ0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICAvLyBTa2lwIHdvcmQgY2hhcmFjdGVyc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtSaWdodDogTW92ZSBjdXJzb3IgZm9yd2FyZCBvbmUgd29yZFxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCBjdXJyZW50IHdvcmRcbiAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuYnVmZmVyLmxlbmd0aCAmJiB0aGlzLmJ1ZmZlcltwb3NdICE9PSAnICcpIHBvcysrO1xuICAgICAgICAvLyBTa2lwIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmIHRoaXMuYnVmZmVyW3Bvc10gPT09ICcgJykgcG9zKys7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrQmFja3NwYWNlOiBEZWxldGUgd29yZCBiYWNrd2FyZCAoYWx0ZXJuYXRpdmUgdG8gQ3RybCtXKVxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGRlbGV0ZSBpdCBjb21wbGV0ZWx5XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5uYW1lID09PSAncmV0dXJuJyB8fCBrZXkubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgZXhwYW5kIGFuZCBzdWJtaXQgaW4gb25lIGFjdGlvblxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBJZiBhIHNsYXNoIGNvbW1hbmQgc3VnZ2VzdGlvbiBpcyBoaWdobGlnaHRlZCwgcHJlc3NpbmcgRW50ZXIgc3VibWl0cyBpdCBpbW1lZGlhdGVseVxuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKHRydWUpKSByZXR1cm47XG4gICAgICAvLyBGYWxsYmFjazogaWYgYnVmZmVyIHN0YXJ0cyB3aXRoICcvJyBhbmQgc3VnZ2VzdGlvbnMgZXhpc3QsIHVzZSB0aGUgc2VsZWN0ZWQvZmlyc3Qgb25lXG4gICAgICBpZiAodGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XT8uY29tbWFuZCA/PyB0aGlzLmJ1ZmZlcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3VibWl0VGV4dCh0aGlzLmJ1ZmZlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IgLSAxKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBkZWxldGUgaXQgY29tcGxldGVseSAoc2ltaWxhciB0byBiYWNrc3BhY2UpXG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcikgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvciArIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvcisrO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndXAnKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKC0xKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSBpbmRleCBpcyB3aXRoaW4gYm91bmRzIGJlZm9yZSBhY2Nlc3NpbmdcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDAgJiYgdGhpcy5oaXN0b3J5SW5kZXggPCB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkb3duJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygxKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeUluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDApIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2FmZXR5OiBpbnZhbGlkIHN0YXRlLCByZXNldFxuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd0YWInKSB7XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24oZmFsc2UpKSByZXR1cm47XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN0ciAmJiAhbm9ybWFsaXplZEtleS5jdHJsICYmICFub3JtYWxpemVkS2V5Lm1ldGEpIHtcbiAgICAgIC8vIERlZmVyIGluc2VydGlvbiB0byBhbGxvdyBwYXN0ZSBkZXRlY3Rpb24gd2luZG93IHRvIGNhdGNoIHJhcGlkIGlucHV0XG4gICAgICB0aGlzLnF1ZXVlUGVuZGluZ0luc2VydChzdHIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgaG9yaXpvbnRhbCBjdXJzb3IgcG9zaXRpb24gc3RheXMgd2l0aGluIHRoZSB2aXNpYmxlIGlucHV0IHdpbmRvdy5cbiAgICogUHJldmVudHMganVtcHMgd2hlbiB1c2luZyBsZWZ0L3JpZ2h0IGFycm93cyBvbiBsb25nIGxpbmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBlbnN1cmVDdXJzb3JWaXNpYmxlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAxMik7IC8vIG1hcmdpbiBmb3IgcHJvbXB0L3RvZ2dsZXMgYW5kIHBhZGRpbmdcbiAgICAvLyBJZiBjdXJzb3IgaXMgbGVmdCBvZiBjdXJyZW50IHdpbmRvdywgc2hpZnQgd2luZG93IGxlZnRcbiAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0KSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3I7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGN1cnNvciBpcyBiZXlvbmQgdmlzaWJsZSB3aW5kb3csIHNoaWZ0IHdpbmRvdyByaWdodFxuICAgIGlmICh0aGlzLmN1cnNvciAtIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPj0gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvciAtIG1heFdpZHRoICsgMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcmF3IGVzY2FwZSBzZXF1ZW5jZXMgd2hlbiByZWFkbGluZSBkb2Vzbid0IHBvcHVsYXRlIGtleSBtZXRhZGF0YS5cbiAgICogUHJldmVudHMgY29udHJvbCBjb2RlcyAoZS5nLiwgXltbMjAwfikgZnJvbSBsZWFraW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIHByaXZhdGUgcGFyc2VFc2NhcGVTZXF1ZW5jZShzZXF1ZW5jZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHJlYWRsaW5lLktleSB8IG51bGwge1xuICAgIGlmICghc2VxdWVuY2UpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgcmVhZGxpbmUuS2V5PiA9IHtcbiAgICAgICdcXHgxYltBJzogeyBuYW1lOiAndXAnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltCJzogeyBuYW1lOiAnZG93bicsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0MnOiB7IG5hbWU6ICdyaWdodCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0QnOiB7IG5hbWU6ICdsZWZ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbSCc6IHsgbmFtZTogJ2hvbWUnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltGJzogeyBuYW1lOiAnZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAwfic6IHsgbmFtZTogJ3Bhc3RlLXN0YXJ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAxfic6IHsgbmFtZTogJ3Bhc3RlLWVuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgIH07XG4gICAgcmV0dXJuIG1hcFtzZXF1ZW5jZV0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZSBjaGFyYWN0ZXJzIGZvciBkZWZlcnJlZCBpbnNlcnRpb24uIFRoaXMgcHJldmVudHMgdmlzdWFsIFwibGVha1wiIG9mXG4gICAqIHBhc3RlZCBjb250ZW50IGJ5IGhvbGRpbmcgY2hhcmFjdGVycyB1bnRpbCB3ZSdyZSBjb25maWRlbnQgaXQncyBub3QgYSBwYXN0ZS5cbiAgICovXG4gIHByaXZhdGUgcXVldWVQZW5kaW5nSW5zZXJ0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciArPSB0ZXh0O1xuXG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIGNvbW1pdCBhZnRlciBkZWxheSAtIGlmIHBhc3RlIGRldGVjdGlvbiB0cmlnZ2VycyBmaXJzdCwgaXQgd2lsbCBjb25zdW1lIHRoZSBidWZmZXJcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb21taXRQZW5kaW5nSW5zZXJ0KCk7XG4gICAgfSwgdGhpcy5wZW5kaW5nSW5zZXJ0RGVsYXlNcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IHBlbmRpbmcgY2hhcmFjdGVycyBhcyBub3JtYWwgaW5wdXQgKG5vdCBhIHBhc3RlKS5cbiAgICovXG4gIHByaXZhdGUgY29tbWl0UGVuZGluZ0luc2VydCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciAmJiAhdGhpcy5pblBsYWluUGFzdGUgJiYgIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcik7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGludG8gcGFzdGUgZGV0ZWN0aW9uIChwcmV2ZW50cyB2aXN1YWwgbGVhaykuXG4gICAqL1xuICBwcml2YXRlIGNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGNvbnN1bWVkID0gdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHJldHVybiBjb25zdW1lZDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlIHx8IHN0cjtcbiAgICBpZiAoc2VxdWVuY2UgPT09IEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFIHx8IHNlcXVlbmNlID09PSBFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHBhc3RlIG1hcmtlcnMgbWlnaHQgYmUgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ1xuICAgIGNvbnN0IHBhc3RlU3RhcnRNYXJrZXIgPSAnXFx4MWJbMjAwfic7XG4gICAgY29uc3QgcGFzdGVFbmRNYXJrZXIgPSAnXFx4MWJbMjAxfic7XG5cbiAgICAvLyBDaGVjayBpZiBzdHIgY29udGFpbnMgcGFzdGUgc3RhcnQgbWFya2VyIChoYW5kbGVzIGNodW5rZWQgYXJyaXZhbClcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlU3RhcnRNYXJrZXIpKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBwZW5kaW5nIGJ1ZmZlciB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlIHNlcXVlbmNlcyBsZWFraW5nXG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKSk7XG4gICAgICAvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgdGhlIHN0YXJ0IG1hcmtlciAoZGlzY2FyZCBhbnkgY29udGVudCBiZWZvcmUgaXQgLSBsaWtlbHkgcGFydGlhbCBlc2NhcGVzKVxuICAgICAgY29uc3Qgc3RhcnRJZHggPSBzdHIuaW5kZXhPZihwYXN0ZVN0YXJ0TWFya2VyKTtcbiAgICAgIGxldCBjb250ZW50ID0gc3RyLnNsaWNlKHN0YXJ0SWR4ICsgcGFzdGVTdGFydE1hcmtlci5sZW5ndGgpO1xuICAgICAgLy8gQ2hlY2sgaWYgZW5kIG1hcmtlciBpcyBhbHNvIGluIHRoaXMgY2h1bmtcbiAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgICBjb25zdCBlbmRJZHggPSBjb250ZW50LmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxdWVuY2UgPT09IHBhc3RlU3RhcnRNYXJrZXIpIHtcbiAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHRvIHByZXZlbnQgcGFydGlhbCBlc2NhcGVzIGxlYWtpbmdcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nO1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgc3RyIGNvbnRhaW5zIHBhc3RlIGVuZCBtYXJrZXJcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgY29uc3QgZW5kSWR4ID0gc3RyLmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgY29uc3QgY29udGVudEJlZm9yZSA9IHN0ci5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgaWYgKGNvbnRlbnRCZWZvcmUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIGNvbnRlbnRCZWZvcmUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNlcXVlbmNlID09PSBwYXN0ZUVuZE1hcmtlcikge1xuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleT8ubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsICdcXG4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHRoaXMucGFzdGVCdWZmZXIuc2xpY2UoMCwgLTEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHN0cik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXF1ZW5jZSA9PT0gJ3N0cmluZycgJiYgc2VxdWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHNlcXVlbmNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY29tbWl0UGFzdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHJldHVybjtcbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wYXN0ZUJ1ZmZlcik7XG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSwgLy8gSW5kaWNhdGUgdHJ1bmNhdGlvblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUGxhaW5QYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICAvLyBGYWxsYmFjayBwYXN0ZSBjYXB0dXJlIHdoZW4gYnJhY2tldGVkIHBhc3RlIGlzbid0IHN1cHBvcnRlZFxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwga2V5Py5jdHJsIHx8IGtleT8ubWV0YSkge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgdHJlYXQgZXNjYXBlIHNlcXVlbmNlcyAoYXJyb3cga2V5cywgZXRjLikgYXMgcGFzdGVcbiAgICAvLyBFc2NhcGUgc2VxdWVuY2VzIHN0YXJ0IHdpdGggXFx4MWIgKEVTQykgYW5kIGFyZSB1c2VkIGZvciBjdXJzb3IgbW92ZW1lbnQsIGV0Yy5cbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLnN0YXJ0c1dpdGgoJ1xceDFiJykpIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcXVlbmNlID0ga2V5Py5zZXF1ZW5jZSA/PyAnJztcbiAgICBjb25zdCBjaHVuayA9IHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwID8gc3RyIDogc2VxdWVuY2U7XG4gICAgaWYgKCFjaHVuaykge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGNodW5rLmxlbmd0aCwgbm93KTtcblxuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMucmVjb3JkUmVjZW50UGxhaW5DaHVuayhjaHVuaywgbm93KTtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVua011bHRpcGxlID0gY2h1bmsubGVuZ3RoID4gMTtcbiAgICBjb25zdCBoYXNOZXdsaW5lID0gL1tcXHJcXG5dLy50ZXN0KGNodW5rKTtcbiAgICBjb25zdCBidXJzdEFjdGl2ZSA9IHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gMCAmJiBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA8PSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICBjb25zdCBidXJzdFRyaWdnZXIgPSBidXJzdEFjdGl2ZSAmJiB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlVHJpZ2dlckNoYXJzO1xuICAgIGNvbnN0IGhhc1JlY2VudE5vbk5ld2xpbmUgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnNvbWUoZW50cnkgPT4gIS9eW1xcclxcbl0rJC8udGVzdChlbnRyeS50ZXh0KSk7XG4gICAgY29uc3QgZWFybHlOZXdsaW5lVHJpZ2dlciA9XG4gICAgICBoYXNOZXdsaW5lICYmXG4gICAgICBidXJzdEFjdGl2ZSAmJlxuICAgICAgaGFzUmVjZW50Tm9uTmV3bGluZSAmJlxuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzO1xuICAgIGNvbnN0IG5ld2xpbmVUcmlnZ2VyID0gaGFzTmV3bGluZSAmJiAodGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgZWFybHlOZXdsaW5lVHJpZ2dlcik7XG4gICAgY29uc3QgbG9va3NMaWtlUGFzdGUgPSB0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBuZXdsaW5lVHJpZ2dlcjtcblxuICAgIGlmICghbG9va3NMaWtlUGFzdGUpIHtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMuaW5QbGFpblBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGZpcnN0IC0gdGhpcyBpcyB0aGUgcHJpbWFyeSBzb3VyY2Ugbm93XG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5jb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCk7XG4gICAgICBjb25zdCByZWNsYWltZWQgPSB0aGlzLnJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgLy8gQ29tYmluZSBwZW5kaW5nIGJ1ZmZlciB3aXRoIGFueSByZWNsYWltZWQgY2h1bmtzXG4gICAgICBjb25zdCBjb21iaW5lZCA9IHBlbmRpbmcgKyByZWNsYWltZWQ7XG4gICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBSZW1vdmUgYW55IGNoYXJzIHRoYXQgbGVha2VkIGludG8gYnVmZmVyIChsZWdhY3kgcmVjbGFpbSBwYXRoKVxuICAgICAgICBpZiAocmVjbGFpbWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZW1vdmVDb3VudCA9IE1hdGgubWluKHRoaXMuYnVmZmVyLmxlbmd0aCwgcmVjbGFpbWVkLmxlbmd0aCk7XG4gICAgICAgICAgY29uc3Qgc3VmZml4ID0gdGhpcy5idWZmZXIuc2xpY2UoLXJlbW92ZUNvdW50KTtcbiAgICAgICAgICBpZiAocmVtb3ZlQ291bnQgPiAwICYmIHN1ZmZpeCA9PT0gcmVjbGFpbWVkLnNsaWNlKC1yZW1vdmVDb3VudCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5idWZmZXIubGVuZ3RoIC0gcmVtb3ZlQ291bnQpO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9IGNvbWJpbmVkLnNsaWNlKDAsIHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKTtcbiAgICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKSB7XG4gICAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGNvbWJpbmVkLmVuZHNXaXRoKGNodW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2h1bmtBbHJlYWR5Q2FwdHVyZWQpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGxhaW5QYXN0ZScsIGNodW5rKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhY2tQbGFpblBhc3RlQnVyc3QobGVuZ3RoOiBudW1iZXIsIG5vdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCB8fCBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zKSB7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IG5vdztcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCArPSBsZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk6IHZvaWQge1xuICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gMDtcbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIC8vIEFsc28gY2FuY2VsIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlclxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRSZWNlbnRQbGFpbkNodW5rKHRleHQ6IHN0cmluZywgYXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gYXQgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnB1c2goeyB0ZXh0LCBhdCB9KTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBwcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybjtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5tYXAoZW50cnkgPT4gZW50cnkudGV4dCkuam9pbignJyk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHJldHVybiBjb21iaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICB9XG4gICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZmluYWxpemVQbGFpblBhc3RlKCk7XG4gICAgfSwgdGhpcy5wbGFpblBhc3RlSWRsZU1zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluYWxpemVQbGFpblBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHJldHVybjtcblxuICAgIC8vIFNhbml0aXplIHRvIHJlbW92ZSBhbnkgaW5qZWN0ZWQgZXNjYXBlIHNlcXVlbmNlcywgdGhlbiBub3JtYWxpemUgbGluZSBlbmRpbmdzXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBsYWluUGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMSB8fCBjb250ZW50Lmxlbmd0aCA+IDIwMCkge1xuICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgY2hhcnM6IGNvbnRlbnQubGVuZ3RoICsgKHdhc1RydW5jYXRlZCA/ICcrJyBhcyB1bmtub3duIGFzIG51bWJlciA6IDApLFxuICAgICAgfTtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmluc2VydFRleHQoY29udGVudCk7XG4gIH1cblxuICBwcml2YXRlIGluc2VydFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm47XG4gICAgLy8gRG9uJ3QgaW5zZXJ0IGR1cmluZyBwYXN0ZSBvcGVyYXRpb25zIC0gY29udGVudCBnb2VzIHRvIHBhc3RlIGJ1ZmZlclxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwgdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSBhbmQgdXNlciB0eXBlcywgZXhwYW5kIHRvIGJ1ZmZlciBmaXJzdCB0aGVuIGluc2VydCBhdCBjdXJzb3JcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgfVxuICAgIC8vIFNhbml0aXplIGlucHV0IHRvIHJlbW92ZSBzcGVjaWFsIGZvcm1hdHRpbmcgY2hhcmFjdGVyc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dCk7XG4gICAgaWYgKCFzYW5pdGl6ZWQpIHJldHVybjtcbiAgICBcbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSB0ZXh0IGJ5IGNvbGxhcHNpbmcgdG8gc2luZ2xlIGxpbmUgZm9yIG5vcm1hbCBpbnB1dFxuICAgIGNvbnN0IGhhc05ld2xpbmVzID0gc2FuaXRpemVkLmluY2x1ZGVzKCdcXG4nKTtcbiAgICBpZiAoaGFzTmV3bGluZXMpIHtcbiAgICAgIC8vIEZvciBtdWx0aS1saW5lIHRleHQgaW4gbm9ybWFsIGluc2VydGlvbiwgY29sbGFwc2UgdG8gc2luZ2xlIGxpbmUgd2l0aCBzcGFjZXNcbiAgICAgIGNvbnN0IGNvbGxhcHNlZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG58XFxyfFxcbi9nLCAnICcpO1xuICAgICAgdGhpcy5pbnNlcnRTaW5nbGVMaW5lVGV4dChjb2xsYXBzZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmluc2VydFNpbmdsZUxpbmVUZXh0KHNhbml0aXplZCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRTaW5nbGVMaW5lVGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkIGJlZm9yZSBzbGljaW5nXG4gICAgdGhpcy5jbGFtcEN1cnNvcigpO1xuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpICsgdGV4dCArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICB0aGlzLmN1cnNvciArPSB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgcmVtYWlucyB2YWxpZCBhZnRlciBtb2RpZmljYXRpb25cbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJtaXRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIHN1Ym1pdCB0aGF0IGluc3RlYWQgb2YgdGhlIGJ1ZmZlciB0ZXh0XG4gICAgLy8gVGhpcyBoYW5kbGVzIGVkZ2UgY2FzZXMgd2hlcmUgc3VibWl0VGV4dCBpcyBjYWxsZWQgcHJvZ3JhbW1hdGljYWxseVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICBjb25zdCBzaG91bGRUcmltID0gdGhpcy5pbnB1dENhcHR1cmUub3B0aW9ucy50cmltO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZENhcHR1cmUgPSBzaG91bGRUcmltID8gdGV4dC50cmltKCkgOiB0ZXh0O1xuICAgICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLmFsbG93RW1wdHkgJiYgIW5vcm1hbGl6ZWRDYXB0dXJlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmVzb2x2ZXIucmVzb2x2ZShub3JtYWxpemVkQ2FwdHVyZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBhZGQgc2VjcmV0cyBvciBzbGFzaCBjb21tYW5kcyB0byBoaXN0b3J5L3Njcm9sbGJhY2tcbiAgICBpZiAoIXRoaXMuc2VjcmV0TW9kZSAmJiAhbm9ybWFsaXplZC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5vcm1hbGl6ZWQpO1xuICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgIHRoaXMuZGlzcGxheVVzZXJQcm9tcHQobm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZWNyZXRNb2RlKSB7XG4gICAgICAvLyBTdGlsbCB0cmFjayBzbGFzaCBjb21tYW5kcyBpbiBoaXN0b3J5IGZvciBjb252ZW5pZW5jZVxuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgdGhpcy5lbWl0KCdxdWV1ZScsIG5vcm1hbGl6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ3N1Ym1pdCcsIG5vcm1hbGl6ZWQpO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNwYWNlID0gdGhpcy5idWZmZXIuaW5kZXhPZignICcpO1xuICAgIGNvbnN0IGhhc0FyZ1RleHQgPSBmaXJzdFNwYWNlID49IDAgJiYgL1xcUy8udGVzdCh0aGlzLmJ1ZmZlci5zbGljZShmaXJzdFNwYWNlICsgMSkpO1xuICAgIC8vIEhpZGUgc2xhc2ggc3VnZ2VzdGlvbnMgd2hlbiB0aGUgdXNlciBpcyBlZGl0aW5nIGFyZ3VtZW50c1xuICAgIGlmIChmaXJzdFNwYWNlID49IDAgJiYgdGhpcy5jdXJzb3IgPiBmaXJzdFNwYWNlICYmIGhhc0FyZ1RleHQpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclNsaWNlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgIGNvbnN0IGNvbW1hbmRTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IGN1cnNvclNsaWNlLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogY3Vyc29yU2xpY2U7XG4gICAgY29uc3QgZmFsbGJhY2tTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogdGhpcy5idWZmZXI7XG4gICAgY29uc3QgcGFydGlhbCA9IChjb21tYW5kU2xpY2UudHJpbUVuZCgpIHx8IGZhbGxiYWNrU2xpY2UudHJpbUVuZCgpIHx8ICcvJykudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5zdWdnZXN0aW9uSW5kZXhdPy5jb21tYW5kO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzXG4gICAgICAuZmlsdGVyKGNtZCA9PiBjbWQuY29tbWFuZC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgocGFydGlhbCkpXG4gICAgICAuc2xpY2UoMCwgNSk7XG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICBjb25zdCBpZHggPSB0aGlzLnN1Z2dlc3Rpb25zLmZpbmRJbmRleChzID0+IHMuY29tbWFuZCA9PT0gcHJldmlvdXMpO1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBpZHggPj0gMCA/IGlkeCA6IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gMDtcbiAgICB9XG4gIH1cblxuICBzZXRBdmFpbGFibGVDb21tYW5kcyhjb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzID0gY29tbWFuZHM7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVN1Z2dlc3Rpb24oc3VibWl0OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgfHwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHN1Z2dlc3Rpb25JbmRleCBpcyB2YWxpZCwgZGVmYXVsdCB0byBmaXJzdCBpdGVtXG4gICAgY29uc3Qgc2FmZUluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IDA7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnN1Z2dlc3Rpb25zW3NhZmVJbmRleF07XG4gICAgaWYgKCFzZWxlY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLnN1Ym1pdFRleHQoc2VsZWN0ZWQuY29tbWFuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gYCR7c2VsZWN0ZWQuY29tbWFuZH0gYDtcbiAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0U3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIH1cblxuICBwcml2YXRlIG5hdmlnYXRlU3VnZ2VzdGlvbnMoZGlyZWN0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmVzZXQgaW5kZXggaWYgc3VnZ2VzdGlvbnMgd2VyZSBjbGVhcmVkIGJ1dCBpbmRleCB3YXNuJ3RcbiAgICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25JbmRleCAhPT0gLTEgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIGN1cnJlbnQgaW5kZXggaXMgdmFsaWQgYmVmb3JlIGNvbXB1dGluZyBuZXh0XG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IC0xO1xuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50SW5kZXggKyBkaXJlY3Rpb247XG4gICAgY29uc3QgY2xhbXBlZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoIC0gMSwgbmV4dCkpO1xuICAgIGlmIChjbGFtcGVkID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBjbGFtcGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gRXZlbnQgcXVldWUgLS0tLS0tLS0tLS0tXG5cbiAgYWRkRXZlbnQodHlwZTogUmVuZGVyZXJFdmVudFR5cGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICBpZiAoXG4gICAgICBub3JtYWxpemVkID09PSAncHJvbXB0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Jlc3BvbnNlJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rob3VnaHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnc3RyZWFtJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnYnVpbGQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGVzdCdcbiAgICApIHtcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnKSB7XG4gICAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudCh7XG4gICAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgaWYgKGZvcm1hdHRlZCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZCA6IGAke2Zvcm1hdHRlZH1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICAvLyBQcmlvcml0eSBxdWV1ZTogcHJvbXB0IGV2ZW50cyBhcmUgaW5zZXJ0ZWQgYXQgdGhlIGZyb250IHRvIGVuc3VyZSBpbW1lZGlhdGUgZGlzcGxheVxuICAgIC8vIFRoaXMgZ3VhcmFudGVlcyB1c2VyIGlucHV0IGlzIGVjaG9lZCBiZWZvcmUgYW55IGFzeW5jIHByb2Nlc3NpbmcgcmVzcG9uc2VzXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnKSB7XG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBub24tcHJvbXB0IGV2ZW50IGFuZCBpbnNlcnQgYmVmb3JlIGl0XG4gICAgICAvLyBUaGlzIG1haW50YWlucyBwcm9tcHQgb3JkZXIgd2hpbGUgZ2l2aW5nIHRoZW0gcHJpb3JpdHkgb3ZlciBvdGhlciBldmVudHNcbiAgICAgIGNvbnN0IGluc2VydEluZGV4ID0gdGhpcy5ldmVudFF1ZXVlLmZpbmRJbmRleChlID0+IGUudHlwZSAhPT0gJ3Byb21wdCcpO1xuICAgICAgaWYgKGluc2VydEluZGV4ID09PSAtMSkge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUuc3BsaWNlKGluc2VydEluZGV4LCAwLCBldmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtcmVuZGVyIHRoZSBwcm9tcHQvY29udHJvbCBiYXIgaW1tZWRpYXRlbHkuXG4gICAqIFRoaXMga2VlcHMgdGhlIGNoYXQgYm94IHBpbm5lZCBkdXJpbmcgbG9uZyBzdHJlYW1pbmcgcnVucyBpbnN0ZWFkIG9mIHdhaXRpbmdcbiAgICogZm9yIHRoZSBldmVudCBxdWV1ZSB0byBkcmFpbiBiZWZvcmUgdGhlIHByb21wdCByZWFwcGVhcnMuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclByb21wdE92ZXJsYXkoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUgfHwgdGhpcy5kaXNwb3NlZCB8fCAhdGhpcy5vdXRwdXQuaXNUVFkgfHwgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1F1ZXVlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZGlzcG9zZWQpIHJldHVybjtcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghZXZlbnQpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBjb2FsZXNjZWQgPSB0aGlzLmNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckV2ZW50KGNvYWxlc2NlZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYSByZW5kZXJpbmcgZmFpbHVyZSB0byBzdGFsbCB0aGUgZXZlbnQgcXVldWVcbiAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7IC8vIERvbid0IHRyeSB0byB3cml0ZSBhZnRlciBkaXNwb3NhbFxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnID8gZXJyb3IgOiAnVW5rbm93biByZW5kZXJlciBlcnJvcic7XG4gICAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUoYFxcbltyZW5kZXJlcl0gJHttZXNzYWdlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZGlzcG9zZWQgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrO1xuXG4gICAgICAgIC8vIE5vdGU6IEZvciBwcm9tcHQgZXZlbnRzLCB0aGUgb3ZlcmxheSBpcyBhbHJlYWR5IHJlbmRlcmVkIGluIHJlbmRlckV2ZW50KClcbiAgICAgICAgLy8gdmlhIHJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSkuIE5vIG5lZWQgdG8gcmVuZGVyIGFnYWluIGhlcmUuXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgIC8vIEVuc3VyZSBwcm9tcHQgcmVuZGVyaW5nIGlzIGFsbG93ZWQgZm9yIHN1YnNlcXVlbnQgZXZlbnRzXG4gICAgICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTm8gZGVsYXkgZm9yIHByb21wdCBldmVudHMgLSByZW5kZXIgaW1tZWRpYXRlbHlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBTFdBWVMgcmVuZGVyIHByb21wdCBhZnRlciBxdWV1ZSBjb21wbGV0ZXMgdG8ga2VlcCBib3R0b20gVUkgcGVyc2lzdGVudFxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHN0YXR1cy90b2dnbGVzIHN0YXkgcGlubmVkIGFuZCByZXNwb25zZXMgYXJlIGZ1bGx5IHJlbmRlcmVkXG4gICAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2UgYWRqYWNlbnQgcmVzcG9uc2UvdGhvdWdodCBldmVudHMgaW50byBhIHNpbmdsZSBibG9jayBzbyBjb250aW51b3VzXG4gICAqIGNoYXQgdGV4dCByZW5kZXJzIHdpdGggb25lIGJ1bGxldCBpbnN0ZWFkIG9mIG9uZSBwZXIgY2h1bmsuXG4gICAqL1xuICBwcml2YXRlIGNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50OiBVSUV2ZW50KTogVUlFdmVudCB7XG4gICAgY29uc3QgaXNNZXJnZWFibGUgPSAodGFyZ2V0OiBVSUV2ZW50IHwgdW5kZWZpbmVkKTogdGFyZ2V0IGlzIFVJRXZlbnQgPT5cbiAgICAgIEJvb2xlYW4oXG4gICAgICAgIHRhcmdldCAmJlxuICAgICAgICAgICF0YXJnZXQuaXNDb21wYWN0ZWQgJiZcbiAgICAgICAgICAoKHRhcmdldC50eXBlID09PSAncmVzcG9uc2UnICYmIHRhcmdldC5yYXdUeXBlID09PSAncmVzcG9uc2UnKSB8fFxuICAgICAgICAgICAgKHRhcmdldC50eXBlID09PSAndGhvdWdodCcgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICd0aG91Z2h0JykpXG4gICAgICApO1xuXG4gICAgaWYgKCFpc01lcmdlYWJsZShldmVudCkpIHtcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgaXNNZXJnZWFibGUodGhpcy5ldmVudFF1ZXVlWzBdKSkge1xuICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpITtcbiAgICAgIGNvbnN0IG5lZWRzU2VwYXJhdG9yID1cbiAgICAgICAgZXZlbnQuY29udGVudC5sZW5ndGggPiAwICYmICFldmVudC5jb250ZW50LmVuZHNXaXRoKCdcXG4nKSAmJiAhbmV4dC5jb250ZW50LnN0YXJ0c1dpdGgoJ1xcbicpO1xuICAgICAgZXZlbnQuY29udGVudCA9IG5lZWRzU2VwYXJhdG9yID8gYCR7ZXZlbnQuY29udGVudH1cXG4ke25leHQuY29udGVudH1gIDogYCR7ZXZlbnQuY29udGVudH0ke25leHQuY29udGVudH1gO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCBwZW5kaW5nIHJlbmRlcmVyIGV2ZW50cy5cbiAgICogVXNlZnVsIGZvciBzdGFydHVwIGZsb3dzIChlLmcuLCB3ZWxjb21lIGJhbm5lcikgdG8gZ3VhcmFudGVlIHRoZSBzY3JvbGxiYWNrIGlzIGh5ZHJhdGVkXG4gICAqIGJlZm9yZSBjb250aW51aW5nIHdpdGggYWRkaXRpb25hbCBVSSB1cGRhdGVzLlxuICAgKi9cbiAgYXN5bmMgZmx1c2hFdmVudHModGltZW91dE1zOiBudW1iZXIgPSAyNTApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBLaWNrIG9mZiBwcm9jZXNzaW5nIGlmIGlkbGVcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlICYmIHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHdoaWxlICgodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkgJiYgRGF0ZS5ub3coKSAtIHN0YXJ0IDwgdGltZW91dE1zKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlbGF5KDUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckV2ZW50KGV2ZW50OiBVSUV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQbGFpbiA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgICBpZiAoZm9ybWF0dGVkUGxhaW4pIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZFBsYWluLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZFBsYWluIDogYCR7Zm9ybWF0dGVkUGxhaW59XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgIGlmICghZm9ybWF0dGVkKSByZXR1cm47XG5cbiAgICAvLyBBbGxvdyBwcm9tcHRzIGFuZCByZXNwb25zZXMgdG8gYWx3YXlzIHJlbmRlciAoZG9uJ3QgZGVkdXBsaWNhdGUpXG4gICAgLy8gT25seSBkZWR1cGxpY2F0ZSBzdHJlYW1pbmcgY29udGVudFxuICAgIGNvbnN0IHNpZ25hdHVyZSA9IGAke2V2ZW50LnJhd1R5cGV9OiR7ZXZlbnQuY29udGVudH1gO1xuICAgIGlmIChldmVudC50eXBlID09PSAnc3RyZWFtJyAmJiBzaWduYXR1cmUgPT09IHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdwcm9tcHQnKSB7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5ID0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBiZWZvcmUgd3JpdGluZyBuZXcgY29udGVudFxuICAgIGlmICh0aGlzLnByb21wdEhlaWdodCA+IDAgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdzdHJlYW0nICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lICYmIGZvcm1hdHRlZC50cmltKCkpIHtcbiAgICAgIC8vIEtlZXAgc2Nyb2xsYmFjayBvcmRlcmluZyBwcmVkaWN0YWJsZSB3aGVuIHByZXZpb3VzIG91dHB1dCBlbmRlZCBtaWQtbGluZVxuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZm9ybWF0dGVkKTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IHJlc3RvcmUgdGhlIHByb21wdCBvdmVybGF5IHNvIHRoZSBjaGF0IGJveCBzdGF5cyBwaW5uZWQgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVFdmVudFR5cGUodHlwZTogUmVuZGVyZXJFdmVudFR5cGUpOiBDYW5vbmljYWxFdmVudFR5cGUgfCBudWxsIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIHJldHVybiAncHJvbXB0JztcbiAgICAgIGNhc2UgJ3Rob3VnaHQnOlxuICAgICAgICByZXR1cm4gJ3Rob3VnaHQnO1xuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgIGNhc2UgJ3N0cmVhbWluZyc6XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIGNhc2UgJ3Rvb2wnOlxuICAgICAgY2FzZSAndG9vbC1jYWxsJzpcbiAgICAgICAgcmV0dXJuICd0b29sJztcbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0JzpcbiAgICAgICAgcmV0dXJuICd0b29sLXJlc3VsdCc7XG4gICAgICBjYXNlICdidWlsZCc6XG4gICAgICAgIHJldHVybiAnYnVpbGQnO1xuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiAndGVzdCc7XG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiAncmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KGV2ZW50OiBVSUV2ZW50KTogc3RyaW5nIHtcbiAgICAvLyBDb21wYWN0ZWQgYmxvY2tzIGFscmVhZHkgaGF2ZSBzZXBhcmF0b3IgYW5kIGZvcm1hdHRpbmdcbiAgICBpZiAoZXZlbnQuaXNDb21wYWN0ZWQpIHtcbiAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgIH1cblxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJykge1xuICAgICAgLy8gQmFubmVycyBkaXNwbGF5IHdpdGhvdXQgYnVsbGV0IHByZWZpeFxuICAgICAgY29uc3QgbGluZXMgPSBldmVudC5jb250ZW50LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSk7XG4gICAgICByZXR1cm4gYCR7bGluZXMuam9pbignXFxuJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBDb21wYWN0LCB1c2VyLWZyaWVuZGx5IGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIC8vIFVzZXIgcHJvbXB0IC0ganVzdCB0aGUgdGV4dCAocHJvbXB0IGJveCBoYW5kbGVzIHN0eWxpbmcpXG4gICAgICAgIHJldHVybiBgJHt0aGVtZS5wcmltYXJ5KCc+Jyl9ICR7ZXZlbnQuY29udGVudH1cXG5gO1xuXG4gICAgICBjYXNlICd0aG91Z2h0Jzoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cmF0ZWQgPSB0aGlzLmN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoZXZlbnQuY29udGVudCk7XG4gICAgICAgIGlmICghY3VyYXRlZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUmVuZGVyVGhvdWdodChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCA9IHtcbiAgICAgICAgICB0ZXh0OiBjdXJhdGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGhpbmtpbmdCbG9jayhjdXJhdGVkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndG9vbCc6IHtcbiAgICAgICAgLy8gQ29tcGFjdCB0b29sIGRpc3BsYXk6IOKaoVRvb2xOYW1lIOKGkiByZXN1bHRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LmNvbnRlbnQucmVwbGFjZSgvXlvij7rimpnil4tdXFxzKi8sICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sLXJlc3VsdCc6IHtcbiAgICAgICAgLy8gSW5saW5lIHJlc3VsdDog4pSU4pSAIHN1bW1hcnlcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoZXZlbnQuY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ2J1aWxkJywgbGFiZWxDb2xvcjogdGhlbWUud2FybmluZyB9KTtcblxuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGV2ZW50LmNvbnRlbnQsIHsgbGFiZWw6ICd0ZXN0JywgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcblxuICAgICAgY2FzZSAnc3RyZWFtJzoge1xuICAgICAgICAvLyBTdHJlYW1pbmcgY29udGVudCBpcyB0aGUgbW9kZWwncyByZXNwb25zZSAtIHBhc3MgdGhyb3VnaCBkaXJlY3RseVxuICAgICAgICAvLyBJTVBPUlRBTlQ6IERvbid0IGZpbHRlciBzdHJlYW1pbmcgY2h1bmtzIHdpdGggaXNHYXJiYWdlT3V0cHV0IGJlY2F1c2U6XG4gICAgICAgIC8vIDEuIENodW5rcyBhcnJpdmUgY2hhcmFjdGVyLWJ5LWNoYXJhY3RlciBvciBpbiBzbWFsbCBwaWVjZXNcbiAgICAgICAgLy8gMi4gU21hbGwgY2h1bmtzIGxpa2UgXCIuXCIgb3IgXCI6XCIgYXJlIHZhbGlkIHBhcnRzIG9mIHNlbnRlbmNlc1xuICAgICAgICAvLyAzLiBGaWx0ZXJpbmcgd291bGQgYnJlYWsgdGhlIHN0cmVhbWluZyBkaXNwbGF5XG4gICAgICAgIC8vIE9ubHkgZmlsdGVyIGNvbXBsZXRlbHkgZW1wdHkgY29udGVudFxuICAgICAgICBpZiAoIWV2ZW50LmNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gUHJvZ3JhbW1hdGljIGZpbHRlcjogcmVqZWN0IGNvbnRlbnQgdGhhdCBsb29rcyBsaWtlIGludGVybmFsL2dhcmJhZ2Ugb3V0cHV0XG4gICAgICAgIGlmICh0aGlzLmlzR2FyYmFnZU91dHB1dChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhbiByZXNwb25zZSB3aXRob3V0IGV4Y2Vzc2l2ZSBidWxsZXRzLCB3cmFwcGVkIGZvciByZWFkYWJpbGl0eVxuICAgICAgICBjb25zdCBpc0Vycm9yID0gZXZlbnQucmF3VHlwZSA9PT0gJ2Vycm9yJztcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgaXNFcnJvciA/IHsgbGFiZWw6ICdlcnJvcicsIGxhYmVsQ29sb3I6IHRoZW1lLmVycm9yIH0gOiB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9ncmFtbWF0aWMgZ2FyYmFnZSBkZXRlY3Rpb24gLSBjaGVja3MgaWYgY29udGVudCBsb29rcyBsaWtlIGludGVybmFsL3N5c3RlbSBvdXRwdXRcbiAgICogdGhhdCBzaG91bGRuJ3QgYmUgc2hvd24gdG8gdXNlcnMuIFVzZXMgc3RydWN0dXJhbCBjaGVja3MsIG5vdCBwYXR0ZXJuIG1hdGNoaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBpc0dhcmJhZ2VPdXRwdXQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb250ZW50IHx8IGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCB0cmltbWVkID0gY29udGVudC50cmltKCk7XG5cbiAgICAvLyBWZXJ5IHNob3J0IGNvbnRlbnQgY2hlY2tzIC0gY2F0Y2ggbGVha2VkIHB1bmN0dWF0aW9uIGZyYWdtZW50cyBsaWtlIFwiLlwiIG9yIFwiOlwiXG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IDMpIHtcbiAgICAgIC8vIFNpbmdsZSBwdW5jdHVhdGlvbiBtYXJrcyBvciB2ZXJ5IHNob3J0IHB1bmN0dWF0aW9uIHNlcXVlbmNlcyBhcmUgZ2FyYmFnZVxuICAgICAgaWYgKC9eWy4sOjshPyojXFwtXz0rfFxcXFwvPD4oKXt9W1xcXWAnXCJ+XkAmJSRdKyQvLnRlc3QodHJpbW1lZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgY29udGVudCBpcyBqdXN0IHB1bmN0dWF0aW9uIG9uIG11bHRpcGxlIGxpbmVzIChsZWFrZWQgcmVhc29uaW5nKVxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcHVuY3RPbmx5TGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiB7XG4gICAgICBjb25zdCBsaW5lVHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgcmV0dXJuIGxpbmVUcmltbWVkLmxlbmd0aCA+IDAgJiYgL15bLiw6OyE/KiNcXC1fPSt8XFxcXC88Pigpe31bXFxdYCdcIn5eQCYlJFxcc10rJC8udGVzdChsaW5lVHJpbW1lZCk7XG4gICAgfSk7XG4gICAgLy8gSWYgQUxMIG5vbi1lbXB0eSBsaW5lcyBhcmUganVzdCBwdW5jdHVhdGlvbiwgaXQncyBnYXJiYWdlXG4gICAgY29uc3Qgbm9uRW1wdHlMaW5lcyA9IGxpbmVzLmZpbHRlcihsID0+IGwudHJpbSgpLmxlbmd0aCA+IDApO1xuICAgIGlmIChub25FbXB0eUxpbmVzLmxlbmd0aCA+IDAgJiYgcHVuY3RPbmx5TGluZXMubGVuZ3RoID09PSBub25FbXB0eUxpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogY29udGVudCBzdGFydGluZyB3aXRoIDwgdGhhdCBpc24ndCB2YWxpZCBtYXJrZG93bi9jb2RlXG4gICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgnPCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzxodHRwJykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPCEnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogY29udGFpbnMgXCJ0bz1mdW5jdGlvbnMuXCIgb3IgXCJ0bz10b29scy5cIiAoaW50ZXJuYWwgcm91dGluZylcbiAgICBpZiAoY29udGVudC5pbmNsdWRlcygndG89ZnVuY3Rpb25zLicpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ3RvPXRvb2xzLicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBsb29rcyBsaWtlIGludGVybmFsIGluc3RydWN0aW9uIChxdW90ZWQgc3lzdGVtIHRleHQpXG4gICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgnXCInKSAmJiBjb250ZW50LmluY2x1ZGVzKCdibG9jaycpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ3Rvb2wnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogdmVyeSBzaG9ydCBjb250ZW50IHRoYXQncyBqdXN0IHRpbWluZyBpbmZvXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgMzAgJiYgL2VsYXBzZWR8c2Vjb25kcz98bXNcXGIvaS50ZXN0KGNvbnRlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBtb3N0bHkgcHVuY3R1YXRpb24vc3ltYm9scyAtIGxlYWtlZCByZWFzb25pbmcgZnJhZ21lbnRzXG4gICAgY29uc3QgbWVhbmluZ2Z1bExpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4ge1xuICAgICAgY29uc3QgbGluZVRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgIGlmICghbGluZVRyaW1tZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIExpbmUgbXVzdCBoYXZlIGF0IGxlYXN0IDMwJSBhbHBoYW51bWVyaWMgY29udGVudFxuICAgICAgY29uc3QgYWxwaGFOdW0gPSAobGluZVRyaW1tZWQubWF0Y2goL1thLXpBLVowLTldL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICByZXR1cm4gbGluZVRyaW1tZWQubGVuZ3RoID4gMCAmJiBhbHBoYU51bSAvIGxpbmVUcmltbWVkLmxlbmd0aCA+PSAwLjM7XG4gICAgfSk7XG4gICAgLy8gSWYgbGVzcyB0aGFuIDMwJSBvZiBsaW5lcyBhcmUgbWVhbmluZ2Z1bCwgaXQncyBnYXJiYWdlXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMgJiYgbWVhbmluZ2Z1bExpbmVzLmxlbmd0aCAvIGxpbmVzLmxlbmd0aCA8IDAuMykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogZ2liYmVyaXNoIC0gaGlnaCByYXRpbyBvZiBub24td29yZCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYWxwaGFDb3VudCA9IChjb250ZW50Lm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1xccy9nLCAnJykubGVuZ3RoO1xuICAgIGlmICh0b3RhbENvdW50ID4gMjAgJiYgYWxwaGFDb3VudCAvIHRvdGFsQ291bnQgPCAwLjQpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBMZXNzIHRoYW4gNDAlIGxldHRlcnMgPSBsaWtlbHkgZ2FyYmFnZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSB0b29sIHJlc3VsdCBjb250ZW50IHRvIHJlbW92ZSBsZWFrZWQgcmVhc29uaW5nL3RoaW5raW5nIG91dHB1dC5cbiAgICogVGhpcyBmaWx0ZXJzIG91dCBmcmFnbWVudHMgdGhhdCBsb29rIGxpa2UgaW50ZXJuYWwgbW9kZWwgb3V0cHV0LlxuICAgKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gJyc7XG5cbiAgICAvLyBTcGxpdCBpbnRvIGxpbmVzIGFuZCBmaWx0ZXIgb3V0IGdhcmJhZ2UgbGluZXNcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGNsZWFuTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcblxuICAgICAgLy8gU2tpcCBlbXB0eSBsaW5lcyBhdCBzdGFydFxuICAgICAgaWYgKGNsZWFuTGluZXMubGVuZ3RoID09PSAwICYmICF0cmltbWVkKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBsZWFrZWQgcmVhc29uaW5nIGZyYWdtZW50c1xuICAgICAgLy8gQ29tbW9uIHBhdHRlcm5zOiBzaW5nbGUgcHVuY3R1YXRpb24sIG1hcmtkb3duIGFydGlmYWN0cywgZW1vamkgZnJhZ21lbnRzXG4gICAgICBpZiAoL15bKVxcXX0+KmAnXCJdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuICAgICAgaWYgKC9eWypfXXsyLH0kLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCAqKiBvciBfX1xuICAgICAgaWYgKC9eW3zilILilINdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IHZlcnRpY2FsIGJhcnNcbiAgICAgIGlmICgvXlvilIDilIHilZBdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGhvcml6b250YWwgbGluZXNcbiAgICAgIGlmICgvXlxcLnsyLH0kLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBkb3RzXG4gICAgICBpZiAoL15bXFxz77iPXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCB3aGl0ZXNwYWNlL2Vtb2ppIG1vZGlmaWVyc1xuICAgICAgaWYgKC9eWzpcXHNdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGNvbG9ucy93aGl0ZXNwYWNlXG4gICAgICBpZiAoL15bLFxcc10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgY29tbWFzL3doaXRlc3BhY2VcblxuICAgICAgLy8gU2tpcCBtYXJrZG93biBib2xkL2l0YWxpYyBmcmFnbWVudHMgdGhhdCBsZWFrZWRcbiAgICAgIGlmICgvXlxcKnsxLDJ9W14qXSpcXCp7MCwyfSQvLnRlc3QodHJpbW1lZCkgJiYgdHJpbW1lZC5sZW5ndGggPCAxMCAmJiAhL1xcd3szLH0vLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgYXJlIGp1c3Qgc2hvcnQgZnJhZ21lbnRzIHdpdGggaGlnaCBwdW5jdHVhdGlvbiByYXRpb1xuICAgICAgY29uc3QgYWxwaGFJbkxpbmUgPSAodHJpbW1lZC5tYXRjaCgvW2EtekEtWjAtOV0vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIGlmICh0cmltbWVkLmxlbmd0aCA+IDAgJiYgdHJpbW1lZC5sZW5ndGggPCAyMCAmJiBhbHBoYUluTGluZSAvIHRyaW1tZWQubGVuZ3RoIDwgMC4zKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCB2ZXJ5IHNob3J0IGxpbmVzIHRoYXQgYXJlIGp1c3QgcHVuY3R1YXRpb24gb3Igc2luZ2xlIGNoYXJzIChleGNlcHQgbnVtYmVycylcbiAgICAgIGlmICh0cmltbWVkLmxlbmd0aCA8PSAyICYmICEvXlxcZCskLy50ZXN0KHRyaW1tZWQpICYmICEvXlthLXpBLVpdezJ9JC8udGVzdCh0cmltbWVkKSkge1xuICAgICAgICAvLyBBbGxvdyBzcGVjaWZpYyBzaG9ydCBwYXR0ZXJucyBsaWtlIFwiT0tcIiwgXCIwXCIsIFwiMVwiIGV0Yy5cbiAgICAgICAgaWYgKCEvXig/Om9rfG5vfHllc3xcXGQrKSQvaS50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBzdHJheSBwYXJlbnRoZXNlcyBvciBicmFja2V0cyBmcm9tIHJlYXNvbmluZ1xuICAgICAgaWYgKC9eWygpW1xcXXt9XSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBtYXJrZG93biBjb2RlIGZlbmNlIGFydGlmYWN0c1xuICAgICAgaWYgKC9eYGBgXFxzKiQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICBjbGVhbkxpbmVzLnB1c2gobGluZSk7XG4gICAgfVxuXG4gICAgLy8gVHJpbSB0cmFpbGluZyBlbXB0eSBsaW5lc1xuICAgIHdoaWxlIChjbGVhbkxpbmVzLmxlbmd0aCA+IDAgJiYgIWNsZWFuTGluZXNbY2xlYW5MaW5lcy5sZW5ndGggLSAxXT8udHJpbSgpKSB7XG4gICAgICBjbGVhbkxpbmVzLnBvcCgpO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbkxpbmVzLmpvaW4oJ1xcbicpLnRyaW0oKTtcbiAgfVxuXG4gIHByaXZhdGUgY3VyYXRlUmVhc29uaW5nQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJykudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBsaW1pdGVkID1cbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID4gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnNcbiAgICAgICAgPyBub3JtYWxpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzKVxuICAgICAgICA6IG5vcm1hbGl6ZWQ7XG5cbiAgICBjb25zdCBtYXhTZWdtZW50cyA9IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzICogMztcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbWl0ZWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5mbGF0TWFwKGxpbmUgPT4gbGluZS5zcGxpdCgvKD88PVsuPyFdKVxccysvKSlcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL15b4oCiKuKPuuKXi1xcLVxcdTIwMjJdK1xccyovLCAnJykudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkZWR1cGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNlZ21lbnQgPSBzZWdtZW50LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWRTZWdtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKGtleSk7XG4gICAgICBkZWR1cGVkLnB1c2gobm9ybWFsaXplZFNlZ21lbnQpO1xuICAgICAgaWYgKGRlZHVwZWQubGVuZ3RoID49IG1heFNlZ21lbnRzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWR1cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpb3JpdGl6ZWQgPSB0aGlzLnByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhkZWR1cGVkKTtcbiAgICBpZiAocHJpb3JpdGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW1pdGVkU2VsZWN0aW9uID0gcHJpb3JpdGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMpO1xuICAgIGNvbnN0IGJ1bGxldGVkID0gbGltaXRlZFNlbGVjdGlvbi5tYXAobGluZSA9PiB0aGlzLmVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lKSk7XG5cbiAgICByZXR1cm4gYnVsbGV0ZWQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICgvXihb4oCiKuKPuuKXiy1dfFxcZCtbLildKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBg4oCiICR7bGluZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAvXihcXGQrWy4pXVxcc3xzdGVwXFxzKlxcZCt8cGxhblxcYnxuZXh0XFxifHRoZW5cXGJ8Z29hbFxcYikvaS50ZXN0KGxpbmUpIHx8XG4gICAgICAvXlstKuKAol1cXHMvLnRlc3QobGluZSkgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJy0+JykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJ+KGkicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCc6ICcpIHx8XG4gICAgICAvXFxiKHRlc3R8dmVyaWZ5fHZhbGlkYXRlfGNoZWNrfGJ1aWxkfHJ1bnxkZXBsb3l8ZGlmZnxsaW50fHR5cGUgP2NoZWNrfGZpeHxidWd8aXNzdWV8cmlza3xtaXRpZ2F0ZXxpbnZlc3RpZ2F0ZSlcXGIvaS50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKHNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlZCA9IHNlZ21lbnRzLm1hcCgodGV4dCwgaW5kZXgpID0+ICh7XG4gICAgICB0ZXh0LFxuICAgICAgaW5kZXgsXG4gICAgICBzY29yZTogdGhpcy5yZWFzb25pbmdTaWduYWxTY29yZSh0ZXh0KSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNTaWduYWwgPSBzY29yZWQuc29tZShpdGVtID0+IGl0ZW0uc2NvcmUgPiAwKTtcbiAgICBpZiAoIWhhc1NpZ25hbCkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIHNjb3JlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlZC5tYXAoaXRlbSA9PiBpdGVtLnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFzb25pbmdTaWduYWxTY29yZShsaW5lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5sb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAzO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbktleXdvcmRzID0gW1xuICAgICAgJ3Rvb2wnLCAnY29tbWFuZCcsICdzY3JpcHQnLCAnY29udGV4dCcsICdzdW1tYXInLCAncmlzaycsICdpc3N1ZScsXG4gICAgICAnaW52ZXN0aWdhdGUnLCAncm9vdCBjYXVzZScsICdyZW1lZGlhdCcsICdtaXRpZ2F0JywgJ2ZpeCcsICdwYXRjaCcsXG4gICAgICAndGVzdCcsICd2ZXJpZnknLCAndmFsaWRhdGUnLCAnY2hlY2snLCAnYnVpbGQnLCAnZGVwbG95JywgJ3J1bicsXG4gICAgICAnZGlmZicsICdsaW50JywgJ3R5cGVjaGVjaycsICdiZW5jaG1hcmsnLFxuICAgIF07XG4gICAgaWYgKGFjdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHNjb3JlICs9IDI7XG4gICAgfVxuXG4gICAgaWYgKC9bIzrihpJdfC0+Ly50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cblxuICAgIGlmICgvXihpKCd8IGEpbXxpIHdpbGx8bGV0IG1lfHN0YXJ0aW5nfG5vd3xva3xzdXJlKVxcYi9pLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMTIwKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVuZGVyVGhvdWdodChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQgJiYgdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dCA9PT0gbm9ybWFsaXplZCkge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyNCwgTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDQsIDExMCkpOyAvLyBSZXNwb25zaXZlIHRvIHRlcm1pbmFsIHdpZHRoXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBsaW5lSWR4ID0gMDsgbGluZUlkeCA8IGxpbmVzLmxlbmd0aDsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZUlkeF0hO1xuICAgICAgaWYgKCFsaW5lLnRyaW0oKSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JkLXdyYXAgZWFjaCBsaW5lXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoLyhcXHMrKS8pO1xuICAgICAgbGV0IGN1cnJlbnRMaW5lID0gJyc7XG5cbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBpZiAoKGN1cnJlbnRMaW5lICsgd29yZCkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgICAgLy8gRmlyc3QgbGluZSBvZiB0aGlzIHBhcmFncmFwaCBnZXRzIOKPuiwgcmVzdCBnZXQgaW5kZW50XG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IHdvcmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgY2FsbCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDij7ogW1NlYXJjaF0gcGF0dGVybjogXCJmb29cIiwgcGF0aDogXCJzcmNcIixcbiAgICogICAgICAgICAgICAgIG91dHB1dF9tb2RlOiBcImNvbnRlbnRcIiwgaGVhZF9saW1pdDogMzBcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KGBbJHtuYW1lTWF0Y2hbMV19XWApfVxcbmA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbnRlbnR9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sTmFtZSA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXSE7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSA0LCA1Nik7XG5cbiAgICAvLyBGb3JtYXQ6IOKPuiBbVG9vbE5hbWVdIGFyZ3MuLi5cbiAgICBjb25zdCBwcmVmaXggPSBgJHtidWxsZXR9ICR7dGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KGBbJHt0b29sTmFtZX1dYCl9IGA7XG4gICAgY29uc3QgcHJlZml4TGVuID0gdG9vbE5hbWUhLmxlbmd0aCArIDU7IC8vIFwi4o+6IFtUb29sTmFtZV0gXCIgdmlzaWJsZSBsZW5ndGhcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHByZWZpeExlbiArIDQpOyAvLyBFeHRyYSBpbmRlbnQgZm9yIHdyYXBwZWQgYXJnc1xuXG4gICAgLy8gUGFyc2UgYW5kIGZvcm1hdCBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZVRvb2xBcmdzKGFyZ3NTdHIpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke3ByZWZpeC50cmltRW5kKCl9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudExpbmUgPSBwcmVmaXg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV0hO1xuICAgICAgY29uc3QgYXJnVGV4dCA9IGAke3RoZW1lLnVpLm11dGVkKGFyZy5rZXkgKyAnOicpfSAke3RoaXMuZm9ybWF0QXJnVmFsdWUoYXJnLmtleSwgYXJnLnZhbHVlKX1gO1xuICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaSA8IGFyZ3MubGVuZ3RoIC0gMSA/ICcsICcgOiAnJztcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhcmcgZml0cyBvbiBjdXJyZW50IGxpbmVcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgaWYgKHRoaXMuc3RyaXBBbnNpKHRlc3RMaW5lKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZSAhPT0gcHJlZml4KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBhcmd1bWVudHMgZnJvbSBzdHJpbmcgbGlrZToga2V5OiBcInZhbHVlXCIsIGtleTI6IHZhbHVlMlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xBcmdzKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IGFyZ3M6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBTaW1wbGUgcmVnZXggdG8gZXh0cmFjdCBrZXk6IHZhbHVlIHBhaXJzXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLCldKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBhcmdzLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhbiBhcmd1bWVudCB2YWx1ZSAodHJ1bmNhdGUgbG9uZyBzdHJpbmdzKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRBcmdWYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XG4gICAgY29uc3QgaXNRdW90ZWQgPSB2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpO1xuICAgIGNvbnN0IGlubmVyID0gaXNRdW90ZWQgPyB2YWx1ZS5zbGljZSgxLCAtMSkgOiB2YWx1ZTtcblxuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc2hvdWxkUHJlc2VydmUgPVxuICAgICAgbG93ZXJLZXkuaW5jbHVkZXMoJ3BhdGgnKSB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdmaWxlJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdxdWVyeScgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY29tbWFuZCcgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY21kJztcblxuICAgIC8vIFRydW5jYXRlIGxvbmcgdmFsdWVzIHdoZW4gbm90IGV4cGxpY2l0bHkgcHJlc2VydmluZ1xuICAgIGNvbnN0IG1heExlbiA9IDQwO1xuICAgIGNvbnN0IHRydW5jYXRlZCA9IHNob3VsZFByZXNlcnZlIHx8IGlubmVyLmxlbmd0aCA8PSBtYXhMZW4gPyBpbm5lciA6IGlubmVyLnNsaWNlKDAsIG1heExlbiAtIDMpICsgJy4uLic7XG5cbiAgICByZXR1cm4gaXNRdW90ZWQgPyBgXCIke3RydW5jYXRlZH1cImAgOiB0cnVuY2F0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCByZXN1bHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o6/ICBGb3VuZCAxMiBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBzdW1tYXJ5IGxpbmUgKGUuZy4sIFwiRm91bmQgWCBsaW5lc1wiKVxuICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oRm91bmQgXFxkKyAoPzpsaW5lcz98ZmlsZXM/fG1hdGNoZXM/KXxSZWFkIFxcZCsgbGluZXM/fFdyb3RlIFxcZCsgbGluZXM/fEVkaXRlZHxDcmVhdGVkfERlbGV0ZWQpL2kpO1xuICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH0gJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgcmVzdWx0cywgc2hvdyB0cnVuY2F0ZWQgcHJldmlld1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMpIHtcbiAgICAgIGNvbnN0IHByZXZpZXcgPSBsaW5lcy5zbGljZSgwLCAyKS5qb2luKCdcXG4nKTtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7cHJldmlld31cXG4gICR7dGhlbWUudWkubXV0ZWQoYC4uLiAke2xpbmVzLmxlbmd0aCAtIDJ9IG1vcmUgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpYCl9XFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgY2FsbDog4o+6IFtSZWFkXSBmaWxlLnRzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJnc1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxccyooPzpcXCgoLiopXFwpKT8kL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV0hO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXT8udHJpbSgpIHx8ICcnO1xuXG4gICAgLy8gVHJhY2sgdG9vbCBuYW1lIGZvciBwYWlyaW5nIHdpdGggcmVzdWx0XG4gICAgdGhpcy5sYXN0VG9vbE5hbWUgPSB0b29sTmFtZTtcblxuICAgIC8vIEdldCB0b29sLXNwZWNpZmljIGNvbG9yIChiYXNoPW9yYW5nZSwgcmVhZD1jeWFuLCB3cml0ZT1ncmVlbiwgZXRjLilcbiAgICBjb25zdCB0b29sQ29sb3IgPSBnZXRUb29sQ29sb3IodG9vbE5hbWUpO1xuICAgIGNvbnN0IGNvbG9yZWRUb29sTmFtZSA9IHRvb2xDb2xvcihgWyR7dG9vbE5hbWV9XWApO1xuXG4gICAgLy8gSWYgbm8gYXJncywganVzdCBzaG93IHRvb2wgbmFtZVxuICAgIGlmICghYXJnc1N0cikge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb2xvcmVkVG9vbE5hbWV9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuY29scyAtIDg7IC8vIExlYXZlIHJvb20gZm9yIG1hcmdpbnNcblxuICAgIC8vIFBhcnNlIGluZGl2aWR1YWwgcGFyYW1zXG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5wYXJzZVRvb2xQYXJhbXMoYXJnc1N0cik7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29sb3JlZFRvb2xOYW1lfSAke2FyZ3NTdHJ9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3JtYXQgcGFyYW1zIHdpdGggcHJvcGVyIHdyYXBwaW5nXG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQodG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgsIHRvb2xDb2xvcik7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBwYXJhbXMgZnJvbSBhcmdzIHN0cmluZ1xuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xQYXJhbXMoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgcGFyYW1zOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+ID0gW107XG4gICAgLy8gTWF0Y2gga2V5OiBcInZhbHVlXCIgb3Iga2V5OiB2YWx1ZSBwYXR0ZXJuc1xuICAgIGNvbnN0IHJlZ2V4ID0gLyhcXHcrKTpcXHMqKFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxbXixcXG5dKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBwYXJhbXMucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9vbCBwYXJhbXMgaW4gQ2xhdWRlIENvZGUgc3R5bGUgd2l0aCB3cmFwcGluZyAoZGVmYXVsdCBncmVlbiBjb2xvcilcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtcyhcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQodG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgsIHRoZW1lLnRvb2xDb2xvcnMuZGVmYXVsdCk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRvb2wgcGFyYW1zIHdpdGggY3VzdG9tIHRvb2wgY29sb3JcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlcixcbiAgICB0b29sQ29sb3I6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZ1xuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0b29sQ29sb3IoYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgY29sb3JlZFZhbHVlID0gdGhpcy5jb2xvclBhcmFtVmFsdWUocGFyYW0ua2V5LCBwYXJhbS52YWx1ZSk7XG4gICAgICBjb25zdCBwYXJhbVRleHQgPSBgJHtwYXJhbS5rZXl9OiAke2NvbG9yZWRWYWx1ZX1gO1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtID8gcGFyYW1UZXh0IDogYCwgJHtwYXJhbVRleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWRkaW5nIHRoaXMgcGFyYW0gd291bGQgZXhjZWVkIHdpZHRoXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgcGFyYW1TdHI7XG4gICAgICBjb25zdCBwbGFpbkxlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aCh0ZXN0TGluZSk7XG5cbiAgICAgIGlmIChwbGFpbkxlbmd0aCA+IG1heFdpZHRoICYmICFmaXJzdFBhcmFtKSB7XG4gICAgICAgIC8vIFN0YXJ0IG5ldyBsaW5lXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIHBhcmFtVGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IHBhcmFtU3RyO1xuICAgICAgfVxuICAgICAgZmlyc3RQYXJhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogQ29sb3IgY3JpdGljYWwgcGFyYW1ldGVyIHZhbHVlcyAocGF0aHMsIGNvbW1hbmRzKSBmb3IgcmVhZGFiaWxpdHkuXG4gICovXG4gIHByaXZhdGUgY29sb3JQYXJhbVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8IGxvd2VyS2V5ID09PSAnZmlsZScgfHwgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fCBsb3dlcktleSA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAobG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fCBsb3dlcktleSA9PT0gJ2NtZCcpIHtcbiAgICAgIHJldHVybiB0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQodmFsdWUpO1xuICAgIH1cbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICAvKipcbiAgICogRXh0cmFjdCBhIHNob3J0IHN1bW1hcnkgZnJvbSB0b29sIGFyZ3NcbiAgICovXG4gIHByaXZhdGUgZXh0cmFjdFRvb2xTdW1tYXJ5KHRvb2xOYW1lOiBzdHJpbmcsIGFyZ3NTdHI6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvb2wgPSB0b29sTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gRXh0cmFjdCBwYXRoL2ZpbGUgZm9yIGZpbGUgb3BlcmF0aW9uc1xuICAgIGlmIChbJ3JlYWQnLCAnd3JpdGUnLCAnZWRpdCcsICdnbG9iJywgJ2dyZXAnLCAnc2VhcmNoJ10uaW5jbHVkZXModG9vbCkpIHtcbiAgICAgIGNvbnN0IHBhdGhNYXRjaCA9IGFyZ3NTdHIubWF0Y2goLyg/OnBhdGh8ZmlsZV9wYXRofHBhdHRlcm4pOlxccypcIihbXlwiXSspXCIvKTtcbiAgICAgIGlmIChwYXRoTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgcGF0aCA9IHBhdGhNYXRjaFsxXSE7XG4gICAgICAgIHJldHVybiB0aGVtZS5maWxlPy5wYXRoID8gdGhlbWUuZmlsZS5wYXRoKHBhdGgpIDogdGhlbWUudWkubXV0ZWQocGF0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gRXh0cmFjdCBjb21tYW5kIGZvciBiYXNoXG4gICAgaWYgKHRvb2wgPT09ICdiYXNoJykge1xuICAgICAgY29uc3QgY21kTWF0Y2ggPSBhcmdzU3RyLm1hdGNoKC9jb21tYW5kOlxccypcIihbXlwiXSspXCIvKTtcbiAgICAgIGlmIChjbWRNYXRjaCkge1xuICAgICAgICBjb25zdCBjbWQgPSBjbWRNYXRjaFsxXSE7XG4gICAgICAgIHJldHVybiB0aGVtZS51aS5tdXRlZChjbWQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCByZXN1bHQ6IOKOvyAgRm91bmQgWCBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBTYW5pdGl6ZSBjb250ZW50IGZpcnN0IC0gZmlsdGVyIG91dCBnYXJiYWdlL3JlYXNvbmluZyBvdXRwdXQgdGhhdCBsZWFrZWQgdGhyb3VnaFxuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVUb29sUmVzdWx0Q29udGVudChjb250ZW50KTtcbiAgICBpZiAoIXNhbml0aXplZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChzYW5pdGl6ZWQpKSB7XG4gICAgICByZXR1cm4gJyc7IC8vIERvbid0IHJlbmRlciBnYXJiYWdlIHRvb2wgcmVzdWx0c1xuICAgIH1cblxuICAgIC8vIFBhcnNlIGNvbW1vbiByZXN1bHQgcGF0dGVybnMgZm9yIHN1bW1hcnlcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goLyhcXGQrKVxccypsaW5lcz8vaSk7XG4gICAgY29uc3QgZmlsZU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC8oXFxkKylcXHMqKD86ZmlsZXM/fG1hdGNoZXM/KS9pKTtcbiAgICBjb25zdCByZWFkTWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goL3JlYWQuKj8oXFxkKylcXHMqbGluZXM/L2kpO1xuXG4gICAgLy8gQ2hlY2sgaWYgY29udGVudCBjb250YWlucyBhIGZpbGUgcGF0aCBvciBjb21tYW5kIHRoYXQgc2hvdWxkIGJlIHByZXNlcnZlZFxuICAgIGNvbnN0IGhhc1BhdGggPSAvKD86XnxcXHMpKD86XFwvW1xcdy4vLV0rfFtcXHcuLy1dK1xcL1tcXHcuLy1dKykvLnRlc3Qoc2FuaXRpemVkKTtcbiAgICBjb25zdCBoYXNDb21tYW5kID0gL15cXHMqXFwkXFxzKy4rfGNvbW1hbmQ6L2kudGVzdChzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IGlzUGF0aE9yRGlyID0gL14oPzpGaWxlfERpcmVjdG9yeXxQYXRoKTpcXHMqL2kudGVzdChzYW5pdGl6ZWQpO1xuXG4gICAgbGV0IHN1bW1hcnk6IHN0cmluZztcbiAgICBsZXQgcHJlc2VydmVGdWxsID0gZmFsc2U7XG5cbiAgICBpZiAocmVhZE1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYFJlYWQgJHtyZWFkTWF0Y2hbMV19IGxpbmVzYDtcbiAgICB9IGVsc2UgaWYgKGxpbmVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2xpbmVNYXRjaFsxXX0gbGluZSR7bGluZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoZmlsZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7ZmlsZU1hdGNoWzFdfSBmaWxlJHtmaWxlTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChzYW5pdGl6ZWQubWF0Y2goL14oc3VjY2Vzc3xva3xkb25lfGNvbXBsZXRlZHx3cml0dGVufGVkaXRlZHxjcmVhdGVkKS9pKSkge1xuICAgICAgc3VtbWFyeSA9ICfinJMnO1xuICAgIH0gZWxzZSBpZiAoaXNQYXRoT3JEaXIgfHwgaGFzUGF0aCB8fCBoYXNDb21tYW5kKSB7XG4gICAgICAvLyBQcmVzZXJ2ZSBmdWxsIGNvbnRlbnQgZm9yIHBhdGhzLCBkaXJlY3RvcmllcywgYW5kIGNvbW1hbmRzXG4gICAgICAvLyBPbmx5IHNob3cgZmlyc3QgbGluZSBpZiBtdWx0aS1saW5lXG4gICAgICBjb25zdCBmaXJzdExpbmUgPSBzYW5pdGl6ZWQuc3BsaXQoJ1xcbicpWzBdIHx8IHNhbml0aXplZDtcbiAgICAgIHN1bW1hcnkgPSBmaXJzdExpbmU7XG4gICAgICBwcmVzZXJ2ZUZ1bGwgPSB0cnVlO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBFeHRyYWN0IG1lYW5pbmdmdWwgc3VtbWFyeSBmcm9tIGNvbnRlbnRcbiAgICAgIGxldCBzdW1tYXJ5VGV4dCA9IHNhbml0aXplZDtcblxuICAgICAgLy8gSGFuZGxlIFwiU3VtbWFyeTpcIiBwcmVmaXggZnJvbSB3ZWIgc2VhcmNoL2V4dHJhY3QgcmVzdWx0c1xuICAgICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC9eU3VtbWFyeTpcXHMqKC4rKS9pKTtcbiAgICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgICAgc3VtbWFyeVRleHQgPSBzdW1tYXJ5TWF0Y2hbMV0hO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3IgbXVsdGktbGluZSBjb250ZW50LCB1c2UgZmlyc3QgbWVhbmluZ2Z1bCBsaW5lXG4gICAgICBjb25zdCBmaXJzdExpbmUgPSBzdW1tYXJ5VGV4dC5zcGxpdCgnXFxuJylbMF0/LnRyaW0oKSB8fCBzdW1tYXJ5VGV4dDtcblxuICAgICAgLy8gVHJ5IHRvIGVuZCBhdCBhIHNlbnRlbmNlIGJvdW5kYXJ5IGZvciByZWFkYWJpbGl0eSAodXAgdG8gMTIwIGNoYXJzKVxuICAgICAgY29uc3QgbWF4TGVuID0gMTIwO1xuICAgICAgaWYgKGZpcnN0TGluZS5sZW5ndGggPiBtYXhMZW4pIHtcbiAgICAgICAgLy8gTG9vayBmb3Igc2VudGVuY2UgZW5kIHdpdGhpbiBsaW1pdFxuICAgICAgICBjb25zdCBzZW50ZW5jZUVuZCA9IGZpcnN0TGluZS5zbGljZSgwLCBtYXhMZW4pLnNlYXJjaCgvWy4hPztdXFxzfFsuIT87XSQvKTtcbiAgICAgICAgaWYgKHNlbnRlbmNlRW5kID4gMzApIHtcbiAgICAgICAgICBzdW1tYXJ5ID0gZmlyc3RMaW5lLnNsaWNlKDAsIHNlbnRlbmNlRW5kICsgMSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gTm8gZ29vZCBzZW50ZW5jZSBicmVhaywgdHJ1bmNhdGUgYXQgd29yZCBib3VuZGFyeVxuICAgICAgICAgIGNvbnN0IHRydW5jYXRlZCA9IGZpcnN0TGluZS5zbGljZSgwLCBtYXhMZW4pO1xuICAgICAgICAgIGNvbnN0IGxhc3RTcGFjZSA9IHRydW5jYXRlZC5sYXN0SW5kZXhPZignICcpO1xuICAgICAgICAgIHN1bW1hcnkgPSBsYXN0U3BhY2UgPiA2MCA/IHRydW5jYXRlZC5zbGljZSgwLCBsYXN0U3BhY2UpICsgJ+KApicgOiB0cnVuY2F0ZWQgKyAn4oCmJztcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjb2xsYXBzZWQgcmVzdWx0IGZvciBDdHJsK08gZXhwYW5zaW9uICh1c2Ugc2FuaXRpemVkIGNvbnRlbnQpXG4gICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5wdXNoKHtcbiAgICAgIHRvb2xOYW1lOiB0aGlzLmxhc3RUb29sTmFtZSB8fCAndG9vbCcsXG4gICAgICBjb250ZW50OiBzYW5pdGl6ZWQsXG4gICAgICBzdW1tYXJ5LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuXG4gICAgLy8gVHJpbSB0byBtYXggc2l6ZVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aCA+IHRoaXMubWF4Q29sbGFwc2VkUmVzdWx0cykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yZWRTdW1tYXJ5ID0gdGhpcy5jb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeSk7XG4gICAgLy8gT25seSBzaG93IGV4cGFuZCBoaW50IGlmIGNvbnRlbnQgaXMgYWN0dWFsbHkgY29sbGFwc2VkIChtdWx0aS1saW5lIG9yIHdhcyB0cnVuY2F0ZWQpXG4gICAgY29uc3QgaGFzTW9yZUNvbnRlbnQgPSBzYW5pdGl6ZWQuaW5jbHVkZXMoJ1xcbicpIHx8IHN1bW1hcnkuZW5kc1dpdGgoJ+KApicpIHx8ICghcHJlc2VydmVGdWxsICYmIHNhbml0aXplZC5sZW5ndGggPiBzdW1tYXJ5Lmxlbmd0aCk7XG4gICAgY29uc3QgZXhwYW5kSGludCA9IGhhc01vcmVDb250ZW50ID8gYCAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1gIDogJyc7XG4gICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb2xvcmVkU3VtbWFyeX0ke2V4cGFuZEhpbnR9XFxuYDtcbiAgfVxuXG4gIHByaXZhdGUgY29sb3JSZXN1bHRTdW1tYXJ5KHN1bW1hcnk6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFzdW1tYXJ5KSByZXR1cm4gc3VtbWFyeTtcbiAgICBjb25zdCBsb3dlciA9IHN1bW1hcnkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXIuaW5jbHVkZXMoJ2ZhaWwnKSB8fCBsb3dlci5pbmNsdWRlcygnZXJyb3InKSkge1xuICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHN1bW1hcnkpO1xuICAgIH1cbiAgICBpZiAoc3VtbWFyeS5zdGFydHNXaXRoKCfinJMnKSB8fCBsb3dlci5pbmNsdWRlcygndXBkYXRlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdjcmVhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3dyaXR0ZW4nKSkge1xuICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3Moc3VtbWFyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGVtZS5pbmZvKHN1bW1hcnkpO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgcmVzcG9uc2Ugd2l0aCBidWxsZXQgb24gZmlyc3QgbGluZVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0UmVzcG9uc2UoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIHRleHQgd2l0aCBhIHNpbmdsZSBidWxsZXQgb24gdGhlIGZpcnN0IGxpbmUgYW5kIHRpZHkgaW5kZW50YXRpb24gZm9yIHJlYWRhYmlsaXR5LlxuICAgKiBQcmV2ZW50cyBhd2t3YXJkIG1pZC13b3JkIHRlcm1pbmFsIHdyYXBwaW5nIGJ5IGhhbmRsaW5nIHRoZSBsYXlvdXQgb3Vyc2VsdmVzLlxuICAgKi9cbiAgcHJpdmF0ZSB3cmFwQnVsbGV0VGV4dChcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgb3B0aW9uczogeyBtYXhXaWR0aD86IG51bWJlcjsgbGFiZWw/OiBzdHJpbmc7IGxhYmVsQ29sb3I/OiAodmFsdWU6IHN0cmluZykgPT4gc3RyaW5nIH0gPSB7fVxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGNsZWFuZWQgPSBjb250ZW50LnJlcGxhY2UoL15b4o+64oCi4peLXVxccyovLCAnJykudHJpbUVuZCgpO1xuICAgIGlmICghY2xlYW5lZC50cmltKCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyBSZXNlcnZlIGEgbGl0dGxlIG1hcmdpbiB0byByZWR1Y2UgdGVybWluYWwgd3JhcCBqaXR0ZXJcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyMCwgTWF0aC5taW4ob3B0aW9ucy5tYXhXaWR0aCA/PyBhdmFpbGFibGVXaWR0aCAtIDIsIGF2YWlsYWJsZVdpZHRoKSk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gb3B0aW9ucy5sYWJlbFxuICAgICAgPyBgJHtvcHRpb25zLmxhYmVsQ29sb3IgPyBvcHRpb25zLmxhYmVsQ29sb3Iob3B0aW9ucy5sYWJlbCkgOiBvcHRpb25zLmxhYmVsfSR7dGhlbWUudWkubXV0ZWQoJyDCtyAnKX1gXG4gICAgICA6ICcnO1xuICAgIGNvbnN0IGJ1bGxldFByZWZpeCA9IGAke2J1bGxldH0gJHtsYWJlbFRleHR9YDtcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHRoaXMudmlzaWJsZUxlbmd0aChgJHtidWxsZXR9IGApKTtcblxuICAgIGNvbnN0IGxpbmVzID0gY2xlYW5lZC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBmaXJzdE5vbkVtcHR5ID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcmF3TGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgbGluZSA9IHJhd0xpbmUudHJpbSgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKCcnKTsgLy8gUHJlc2VydmUgaW50ZW50aW9uYWwgc3BhY2luZyBiZXR3ZWVuIHBhcmFncmFwaHNcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdvcmRzID0gbGluZS5zcGxpdCgvXFxzKy8pO1xuICAgICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgICBjb25zdCBwcmVmaXhMZW5ndGggPSB0aGlzLnZpc2libGVMZW5ndGgoZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudCk7XG4gICAgICAgIGlmIChwcmVmaXhMZW5ndGggKyB0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IG1heFdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdGhpbmtpbmcgYmxvY2sgd2l0aCBlbmhhbmNlZCB2aXN1YWwgZGVzaWduLlxuICAgKiBVc2VzIGEgZGlzdGluY3QgdmlzdWFsIHN0eWxlIHRvIGNsZWFybHkgc2VwYXJhdGUgdGhpbmtpbmcgZnJvbSByZXNwb25zZXMuXG4gICAqXG4gICAqIEluIHBsYWluIG91dHB1dCBtb2RlIHdlIGtlZXAgaXQgc2ltcGxlIGFuZCBpbmxpbmUgd2l0aCB0aGUgcmVzdCBvZiB0aGVcbiAgICogc3RyZWFtIHNvIHRyYW5zY3JpcHRzIHJlbWFpbiBlYXN5IHRvIHNjYW4uXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRoaW5raW5nQmxvY2soY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm4gJyc7XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpO1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KG5vcm1hbGl6ZWQsIHtcbiAgICAgIGxhYmVsOiAndGhpbmtpbmcnLFxuICAgICAgbGFiZWxDb2xvcjogdGhlbWUuc2Vjb25kYXJ5ID8/IHRoZW1lLnVpLm11dGVkLCAvLyBQdXJwbGUgZm9yIHRoaW5raW5nIChkaXN0aW5jdCBmcm9tIGJsdWUgdG9vbHMpXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHdyYXBUZXh0VG9XaWR0aCh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkgcmV0dXJuIFsnJ107XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICAgIGxldCBjdXJyZW50ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiB3aWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN0cmVhbWluZyBlbGFwc2VkIHRpbWUgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IDNtIDMwc1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIC8gMTAwMCk7XG4gICAgaWYgKGVsYXBzZWQgPCA1KSByZXR1cm4gbnVsbDsgLy8gRG9uJ3Qgc2hvdyBmb3IgdmVyeSBzaG9ydCBkdXJhdGlvbnNcbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihlbGFwc2VkIC8gNjApO1xuICAgIGNvbnN0IHNlY3MgPSBlbGFwc2VkICUgNjA7XG4gICAgaWYgKG1pbnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7bWluc31tICR7c2Vjc31zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3NlY3N9c2A7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBTaG93cyBhIHZpc3VhbCBzZXBhcmF0b3Igd2l0aCBcImhpc3RvcnlcIiBsYWJlbCBhbmQgY3RybCtvIGhpbnRcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMsIDgwKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBgICR7bGFiZWx9IGA7XG4gICAgY29uc3QgcGFkZGluZyA9IE1hdGgubWF4KDAsIG1heFdpZHRoIC0gbGFiZWxUZXh0Lmxlbmd0aCk7XG4gICAgY29uc3QgbGVmdFBhZCA9IE1hdGguZmxvb3IocGFkZGluZyAvIDIpO1xuICAgIGNvbnN0IHJpZ2h0UGFkID0gTWF0aC5jZWlsKHBhZGRpbmcgLyAyKTtcblxuICAgIC8vIENsYXVkZSBDb2RlIHN0eWxlOiDilZDilZAgaGlzdG9yeSDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiAgICBjb25zdCBzZXBhcmF0b3IgPSB0aGVtZS51aS5tdXRlZCgn4pWQJy5yZXBlYXQobGVmdFBhZCkgKyBsYWJlbFRleHQgKyAn4pWQJy5yZXBlYXQocmlnaHRQYWQpKTtcblxuICAgIHJldHVybiBgXFxuJHtzZXBhcmF0b3J9XFxuJHtjb250ZW50fVxcbmA7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAqIFRoaXMgZGlzcGxheXMgYSBjb2xsYXBzZWQgdmlldyB3aXRoIGV4cGFuc2lvbiBoaW50IChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICovXG4gIGFkZENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiB2b2lkIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRDb250ZW50ID0gdGhpcy5mb3JtYXRDb21wYWN0QmxvY2soY29udGVudCwgbGFiZWwpO1xuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogZm9ybWF0dGVkQ29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiB0cnVlLFxuICAgIH0pO1xuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgdGhlIG1vc3QgcmVjZW50IHRvb2wgcmVzdWx0IGlubGluZSAoQ3RybCtPIHN1cHBvcnQpLlxuICAgKiBQb3BzIGZyb20gdGhlIGNvbGxhcHNlZCByZXN1bHRzIHN0YWNrIGFuZCBkaXNwbGF5cyBmdWxsIGNvbnRlbnQuXG4gICAqL1xuICBleHBhbmRMYXN0VG9vbFJlc3VsdCgpOiBib29sZWFuIHtcbiAgICAvLyBGaXJzdCB0cnkgdGhlIG5ldyBzdGFjaywgZmFsbGJhY2sgdG8gb2xkIGxhc3RUb29sUmVzdWx0XG4gICAgY29uc3QgY29sbGFwc2VkID0gdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5wb3AoKTtcbiAgICBpZiAoIWNvbGxhcHNlZCAmJiAhdGhpcy5sYXN0VG9vbFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRlbnQgPSBjb2xsYXBzZWQ/LmNvbnRlbnQgfHwgdGhpcy5sYXN0VG9vbFJlc3VsdCB8fCAnJztcbiAgICBjb25zdCB0b29sTmFtZSA9IGNvbGxhcHNlZD8udG9vbE5hbWUgfHwgJ3Jlc3VsdCc7XG5cbiAgICAvLyBEZXRlcm1pbmUgaWYgdGhpcyBpcyBzdHJ1Y3R1cmVkIG91dHB1dCB0aGF0IHNob3VsZG4ndCBiZSB3b3JkLXdyYXBwZWRcbiAgICBjb25zdCBpc1N0cnVjdHVyZWQgPSB0aGlzLmlzU3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWUsIGNvbnRlbnQpO1xuXG4gICAgbGV0IHJlbmRlcmVkOiBzdHJpbmc7XG4gICAgaWYgKGlzU3RydWN0dXJlZCkge1xuICAgICAgLy8gUHJlc2VydmUgc3RydWN0dXJlZCBvdXRwdXQgKGdyZXAsIGJhc2gsIGNvZGUgb3V0cHV0KSAtIGp1c3QgaW5kZW50LCBkb24ndCB3cmFwXG4gICAgICByZW5kZXJlZCA9IHRoaXMuZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWUsIGNvbnRlbnQpO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBGb3JtYXQgcHJvc2UvdGV4dCB3aXRoIHRvb2wgbmFtZSBsYWJlbCBhbmQgd29yZCB3cmFwcGluZ1xuICAgICAgY29uc3QgbGFiZWwgPSBgJHt0b29sTmFtZX1gO1xuICAgICAgcmVuZGVyZWQgPSB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQsIHsgbGFiZWwsIGxhYmVsQ29sb3I6IHRoZW1lLmluZm8gfSk7XG4gICAgfVxuXG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiByZW5kZXJlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIC8vIENsZWFyIGxhc3RUb29sUmVzdWx0IGlmIHdlIHVzZWQgdGhlIHN0YWNrXG4gICAgaWYgKGNvbGxhcHNlZCkge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIENoZWNrIGlmIHRvb2wgb3V0cHV0IGlzIHN0cnVjdHVyZWQgKGNvZGUsIGdyZXAsIGZpbGUgbGlzdGluZ3MpIHRoYXQgc2hvdWxkbid0IGJlIHdvcmQtd3JhcHBlZC5cbiAgICovXG4gIHByaXZhdGUgaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCB0b29sID0gdG9vbE5hbWUudG9Mb3dlckNhc2UoKTtcbiAgICAvLyBUb29scyB0aGF0IHByb2R1Y2Ugc3RydWN0dXJlZCBvdXRwdXRcbiAgICBpZiAoWydiYXNoJywgJ2dyZXAnLCAncmVhZCcsICdnbG9iJywgJ2V4ZWN1dGVfYmFzaCcsICdzZWFyY2gnLCAnZmluZCddLmluY2x1ZGVzKHRvb2wpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gQ29udGVudCBwYXR0ZXJucyB0aGF0IGluZGljYXRlIHN0cnVjdHVyZWQgb3V0cHV0XG4gICAgLy8gLSBGaWxlIHBhdGhzIHdpdGggY29sb25zIChncmVwIG91dHB1dCk6IHNyYy9maWxlLnRzOjEyMzpcbiAgICAvLyAtIExpbmUgbnVtYmVyczogXCIgICAx4oaSXCIgb3IgXCIgIDQyOlwiXG4gICAgLy8gLSBDb2RlLWxpa2UgcGF0dGVybnNcbiAgICBpZiAoL15cXHMqW1xcdy4vXSs6XFxkK1s6XFxzXS8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGdyZXAtc3R5bGUgb3V0cHV0XG4gICAgaWYgKC9eXFxzKlxcZCtb4oaSOuKUgnxdXFxzLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gbGluZS1udW1iZXJlZCBvdXRwdXRcbiAgICBpZiAoL15b4pSC4pSc4pSU4pSA4pSM4pSQ4pSY4pSs4pS04pS84pWt4pWu4pWv4pWwXSsvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBib3ggZHJhd2luZ1xuICAgIGlmICgvXlxccypbJD5dXFxzK1xcdysvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBjb21tYW5kIHByb21wdCBvdXRwdXRcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN0cnVjdHVyZWQgdG9vbCBvdXRwdXQgcHJlc2VydmluZyBsaW5lIHN0cnVjdHVyZS5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWU6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGhlYWRlciA9IGDij7ogJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX0ke3RoZW1lLnVpLm11dGVkKCcgwrcgZXhwYW5kZWQnKX1cXG5gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICc7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpIC0gNDtcblxuICAgIGNvbnN0IGZvcm1hdHRlZExpbmVzID0gbGluZXMubWFwKGxpbmUgPT4ge1xuICAgICAgLy8gVHJ1bmNhdGUgb3Zlcmx5IGxvbmcgbGluZXMgaW5zdGVhZCBvZiB3cmFwcGluZyAocHJlc2VydmVzIHN0cnVjdHVyZSlcbiAgICAgIGlmIChsaW5lLmxlbmd0aCA+IG1heFdpZHRoKSB7XG4gICAgICAgIHJldHVybiBpbmRlbnQgKyBsaW5lLnNsaWNlKDAsIG1heFdpZHRoIC0gMSkgKyAn4oCmJztcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbmRlbnQgKyBsaW5lO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIGhlYWRlciArIGZvcm1hdHRlZExpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGNvdW50IG9mIGV4cGFuZGFibGUgY29sbGFwc2VkIHJlc3VsdHNcbiAgICovXG4gIGdldENvbGxhcHNlZFJlc3VsdENvdW50KCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMubGVuZ3RoO1xuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIGFsbCBjb2xsYXBzZWQgcmVzdWx0cyAoZS5nLiwgb24gbmV3IGNvbnZlcnNhdGlvbilcbiAgICovXG4gIGNsZWFyQ29sbGFwc2VkUmVzdWx0cygpOiB2b2lkIHtcbiAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzID0gW107XG4gICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IG51bGw7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gU3RhdHVzIC8gbW9kZSAtLS0tLS0tLS0tLS1cblxuICBzZXRNb2RlKG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnKTogdm9pZCB7XG4gICAgY29uc3Qgd2FzU3RyZWFtaW5nID0gdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuXG4gICAgLy8gVHJhY2sgc3RyZWFtaW5nIHN0YXJ0IHRpbWUgZm9yIGVsYXBzZWQgZGlzcGxheVxuICAgIGlmIChtb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhd2FzU3RyZWFtaW5nKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IDA7IC8vIFJlc2V0IHRva2VuIGNvdW50XG4gICAgICAvLyBDbGVhciBpbmxpbmUgcGFuZWwgd2hlbiBlbnRlcmluZyBzdHJlYW1pbmcgbW9kZSB0byBwcmV2ZW50IHN0YWxlIG1lbnVzXG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhcnRTcGlubmVyQW5pbWF0aW9uKCk7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnaWRsZScgJiYgd2FzU3RyZWFtaW5nKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSA9IG51bGw7XG4gICAgICB0aGlzLnN0b3BTcGlubmVyQW5pbWF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHdhc1N0cmVhbWluZyAmJiBtb2RlID09PSAnaWRsZScgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgIC8vIEZpbmlzaCBzdHJlYW1pbmcgb24gYSBmcmVzaCBsaW5lIHNvIHRoZSBuZXh0IHByb21wdC9ldmVudCBkb2Vzbid0IGNvbGxpZGVcbiAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIEFsd2F5cyByZW5kZXIgcHJvbXB0IHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnQgKHJpY2ggbW9kZSBvbmx5KVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGFuaW1hdGVkIHNwaW5uZXIgZm9yIHN0cmVhbWluZyBzdGF0dXNcbiAgICovXG4gIHByaXZhdGUgc3RhcnRTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkgcmV0dXJuOyAvLyBBbHJlYWR5IHJ1bm5pbmdcbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnNwaW5uZXJGcmFtZSA9ICh0aGlzLnNwaW5uZXJGcmFtZSArIDEpICUgc3Bpbm5lckZyYW1lcy5icmFpbGxlLmxlbmd0aDtcbiAgICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAodGhpcy5hY3Rpdml0eVN0YXJGcmFtZSArIDEpICUgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXMubGVuZ3RoO1xuICAgICAgLy8gVXBkYXRlIGVsYXBzZWQgdGltZSBjb2xvciBhbmltYXRpb24gKHNsb3dlciBjeWNsZSlcbiAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDMgPT09IDApIHtcbiAgICAgICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9ICh0aGlzLmVsYXBzZWRDb2xvckZyYW1lICsgMSkgJSB0aGlzLmVsYXBzZWRDb2xvckZyYW1lcy5sZW5ndGg7XG4gICAgICB9XG4gICAgICAvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIHNwaW5uZXIvc3RhciBmcmFtZVxuICAgICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSwgMTIwKTsgLy8gfjggRlBTIC0gcmVkdWNlZCBmcm9tIDgwbXMgdG8gbWluaW1pemUgZmxpY2tlcmluZyB3aGlsZSBrZWVwaW5nIGFuaW1hdGlvbiBzbW9vdGhcbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBhbmltYXRlZCBzcGlubmVyXG4gICAqL1xuICBwcml2YXRlIHN0b3BTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhY3Rpdml0eSBtZXNzYWdlIGRpc3BsYXllZCB3aXRoIGFuaW1hdGVkIHN0YXJcbiAgICogRXhhbXBsZTogXCJSdW1pbmF0aW5n4oCmXCIgc2hvd3MgYXMgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIlxuICAgKi9cbiAgc2V0QWN0aXZpdHkobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRva2VuIGNvdW50IGRpc3BsYXllZCBpbiB0aGUgYWN0aXZpdHkgbGluZVxuICAgKi9cbiAgdXBkYXRlU3RyZWFtaW5nVG9rZW5zKHRva2VuczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRva2VuIGNvdW50IGFzIGNvbXBhY3Qgc3RyaW5nIChlLmcuLCAxLjJrLCAyNGssIDEyOGspXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRva2VuQ291bnQodG9rZW5zOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0b2tlbnMgPCAxMDAwKSByZXR1cm4gU3RyaW5nKHRva2Vucyk7XG4gICAgaWYgKHRva2VucyA8IDEwMDAwKSByZXR1cm4gYCR7KHRva2VucyAvIDEwMDApLnRvRml4ZWQoMSl9a2A7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQodG9rZW5zIC8gMTAwMCl9a2A7XG4gIH1cblxuICBnZXRNb2RlKCk6ICdpZGxlJyB8ICdzdHJlYW1pbmcnIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0J1bmRsZSh7IG1haW46IG1lc3NhZ2UsIG92ZXJyaWRlOiBudWxsLCBzdHJlYW1pbmc6IG51bGwgfSk7XG4gIH1cblxuICB1cGRhdGVTdGF0dXNCdW5kbGUoXG4gICAgc3RhdHVzOiB7IG1haW4/OiBzdHJpbmcgfCBudWxsOyBvdmVycmlkZT86IHN0cmluZyB8IG51bGw7IHN0cmVhbWluZz86IHN0cmluZyB8IG51bGwgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHByZXZTdHJlYW1pbmcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZztcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBtYWluQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBvdmVycmlkZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgIGlmIChzdGF0dXMubWFpbiAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5tYWluICE9PSB0aGlzLnN0YXR1c01lc3NhZ2UpIHtcbiAgICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IHN0YXR1cy5tYWluO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBtYWluQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChzdGF0dXMub3ZlcnJpZGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMub3ZlcnJpZGUgIT09IHRoaXMuc3RhdHVzT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuc3RhdHVzT3ZlcnJpZGUgPSBzdGF0dXMub3ZlcnJpZGU7XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG92ZXJyaWRlQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nQ2hhbmdlZCA9IHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBwcmV2U3RyZWFtaW5nO1xuICAgIGlmIChzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChzdHJlYW1pbmdDaGFuZ2VkKSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGF0dXNTdHJlYW1pbmcgPSBzdGF0dXMuc3RyZWFtaW5nO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0ludHJvZHVjZSA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHByZXZTdHJlYW1pbmcgPT09IG51bGwgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IHN0cmVhbWluZ0NsZWFyZWQgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBzdGF0dXMuc3RyZWFtaW5nID09PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgb25seVN0cmVhbWluZ0NoYW5nZWQgPSBzdHJlYW1pbmdDaGFuZ2VkICYmICFtYWluQ2hhbmdlZCAmJiAhb3ZlcnJpZGVDaGFuZ2VkO1xuICAgIGNvbnN0IHNraXBTdHJlYW1pbmdSZW5kZXIgPVxuICAgICAgb25seVN0cmVhbWluZ0NoYW5nZWQgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhc3RyZWFtaW5nSW50cm9kdWNlICYmICFzdHJlYW1pbmdDbGVhcmVkO1xuXG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQgJiYgIXNraXBTdHJlYW1pbmdSZW5kZXI7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdGF0dXNNZXRhKFxuICAgIG1ldGE6IHtcbiAgICAgIG1vZGVsPzogc3RyaW5nO1xuICAgICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgICAgcHJvZmlsZT86IHN0cmluZztcbiAgICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICAgIHdyaXRlcz86IHN0cmluZztcbiAgICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gICAgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMuc3RhdHVzTWV0YSwgLi4ubWV0YSB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0dXNNZXRhKTtcbiAgICB0aGlzLnN0YXR1c01ldGEgPSBuZXh0O1xuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTW9kZVRvZ2dsZXMoc3RhdGU6IFBhcnRpYWw8TW9kZVRvZ2dsZVN0YXRlPik6IHZvaWQge1xuICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB7IC4uLnRoaXMudG9nZ2xlU3RhdGUsIC4uLnN0YXRlIH07XG4gICAgaWYgKFxuICAgICAgIXN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSAmJlxuICAgICAgIXN0YXRlLnRoaW5raW5nSG90a2V5ICYmXG4gICAgICAhc3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSAmJlxuICAgICAgIXN0YXRlLmF1dG9Db250aW51ZUhvdGtleSAmJlxuICAgICAgIXN0YXRlLmR1YWxSbEhvdGtleSAmJlxuICAgICAgIXN0YXRlLmRlYnVnSG90a2V5XG4gICAgKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgZGlzcGxheSBpbiB0aGUgVUkuXG4gICAqIENhbGxlZCBkdXJpbmcgZHVhbC1STCBtb2RlIHRvIHNob3cgYWN0aXZlIGFnZW50LCBtb2R1bGUvc3RlcCBwcm9ncmVzcywgYW5kIHdpbiBzdGF0aXN0aWNzLlxuICAgKi9cbiAgdXBkYXRlUkxTdGF0dXMoc3RhdHVzOiBQYXJ0aWFsPFJMQWdlbnRTdGF0dXM+KTogdm9pZCB7XG4gICAgY29uc3QgbmV4dCA9IHsgLi4udGhpcy5ybFN0YXR1cywgLi4uc3RhdHVzIH07XG4gICAgY29uc3QgY2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KG5leHQpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLnJsU3RhdHVzKTtcbiAgICB0aGlzLnJsU3RhdHVzID0gbmV4dDtcbiAgICBpZiAoY2hhbmdlZCkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgUkwgYWdlbnQgc3RhdHVzIChlLmcuLCB3aGVuIFJMIHJ1biBjb21wbGV0ZXMpLlxuICAgKi9cbiAgY2xlYXJSTFN0YXR1cygpOiB2b2lkIHtcbiAgICB0aGlzLnJsU3RhdHVzID0ge307XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY3VycmVudCBSTCBzdGF0dXMgZm9yIGV4dGVybmFsIGFjY2Vzcy5cbiAgICovXG4gIGdldFJMU3RhdHVzKCk6IFJlYWRvbmx5PFJMQWdlbnRTdGF0dXM+IHtcbiAgICByZXR1cm4gdGhpcy5ybFN0YXR1cztcbiAgfVxuXG4gIHNldElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSAobGluZXMgPz8gW10pLm1hcChsaW5lID0+IGxpbmUucmVwbGFjZSgvXFxzKyQvZywgJycpKTtcbiAgICBjb25zdCBoYXNDb250ZW50ID0gbm9ybWFsaXplZC5zb21lKChsaW5lKSA9PiBsaW5lLnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgICBpZiAoIWhhc0NvbnRlbnQpIHtcbiAgICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxpbWl0ZWQgPSB0aGlzLmxpbWl0SW5saW5lUGFuZWwobm9ybWFsaXplZCk7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGxpbWl0ZWQpID09PSBKU09OLnN0cmluZ2lmeSh0aGlzLmlubGluZVBhbmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlubGluZVBhbmVsID0gbGltaXRlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgc3VwcG9ydHNJbmxpbmVQYW5lbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGl2ZSAmJiAhdGhpcy5wbGFpbk1vZGU7XG4gIH1cblxuICBjbGVhcklubGluZVBhbmVsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHJldHVybjtcbiAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgbGltaXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF4TGluZXMgPSBNYXRoLm1heCg0LCBNYXRoLm1pbih0aGlzLm1heElubGluZVBhbmVsTGluZXMsIE1hdGgubWF4KDIsIHRoaXMucm93cyAtIDgpKSk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBtYXhMaW5lcykge1xuICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGxpbmVzLmxlbmd0aCAtIG1heExpbmVzO1xuICAgIGNvbnN0IGluZGljYXRvciA9IHRoZW1lLnVpLm11dGVkKGDigKYgJHtvdmVyZmxvd30gbW9yZSBsaW5lc2ApO1xuICAgIGNvbnN0IHRhaWxDb3VudCA9IE1hdGgubWF4KDEsIG1heExpbmVzIC0gMSk7XG4gICAgY29uc3QgdGFpbCA9IGxpbmVzLnNsaWNlKC10YWlsQ291bnQpO1xuICAgIHJldHVybiBbaW5kaWNhdG9yLCAuLi50YWlsXTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBQcm9tcHQgcmVuZGVyaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0KCk6IHZvaWQge1xuICAgIC8vIERvbid0IHJlbmRlciBpZiBkaXNwb3NlZFxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG5cbiAgICAvLyBUaHJvdHRsZSByZW5kZXJzIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAobm93IC0gdGhpcy5sYXN0UmVuZGVyVGltZSA8IHRoaXMucmVuZGVyVGhyb3R0bGVNcykge1xuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdSZW5kZXIpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIHRpbWVyIGZvciBjbGVhbnVwXG4gICAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVuZGVyID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5yZW5kZXJUaHJvdHRsZU1zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk6IHZvaWQge1xuICAgIC8vIERvbid0IHJlbmRlciBpZiBkaXNwb3NlZFxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG5cbiAgICB0aGlzLmxhc3RSZW5kZXJUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgbGluZSA9IGA+ICR7dGhpcy5idWZmZXJ9YDtcbiAgICAgIGlmICghdGhpcy5pc1Byb21wdEFjdGl2ZSAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKGBcXHIke0VTQy5DTEVBUl9MSU5FfSR7bGluZX1gKTtcbiAgICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7IC8vIHByb21wdCBlbmRzIG1pZC1saW5lIGJ5IGRlc2lnblxuICAgICAgdGhpcy5wcm9tcHRIZWlnaHQgPSAxO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGxvd1Byb21wdFJlbmRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJpY2ggaW5saW5lIG1vZGU6IHByb21wdCBmbG93cyBuYXR1cmFsbHkgd2l0aCBjb250ZW50XG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgdGhpcy5sYXN0UmVuZGVyV2lkdGggPSBtYXhXaWR0aDtcblxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmJ1aWxkT3ZlcmxheUxpbmVzKCk7XG4gICAgaWYgKCFvdmVybGF5LmxpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlcmVkTGluZXMgPSBvdmVybGF5LmxpbmVzLm1hcChsaW5lID0+IHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgaWYgKCFyZW5kZXJlZExpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb21wdEluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ob3ZlcmxheS5wcm9tcHRJbmRleCwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gcmVuZGVyZWRMaW5lcy5sZW5ndGg7XG5cbiAgICAvLyBCYXRjaCBhbGwgQU5TSSBvcGVyYXRpb25zIGludG8gYSBzaW5nbGUgd3JpdGUgdG8gcHJldmVudCBmbGlja2VyaW5nXG4gICAgLy8gVGhpcyBlbGltaW5hdGVzIHRoZSB2aXN1YWwgaml0dGVyIGNhdXNlZCBieSBtdWx0aXBsZSBzZXF1ZW50aWFsIHRlcm1pbmFsIHdyaXRlc1xuICAgIGNvbnN0IGJ1ZmZlcjogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEhpZGUgY3Vyc29yIGR1cmluZyByZW5kZXIgdG8gcHJldmVudCB2aXN1YWwgYXJ0aWZhY3RzXG4gICAgYnVmZmVyLnB1c2goJ1xceDFiWz8yNWwnKTtcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHByb21wdCBhbmQgaGFuZGxlIGhlaWdodCBjaGFuZ2VzXG4gICAgLy8gTm90ZTogV2UgY2hlY2sgbGFzdE92ZXJsYXlIZWlnaHQgPiAwIHRvIGtub3cgaWYgdGhlcmUncyBzb21ldGhpbmcgdG8gY2xlYXIsXG4gICAgLy8gYnV0IHdlIHVzZSBsYXN0T3ZlcmxheT8ucHJvbXB0SW5kZXggZm9yIGN1cnNvciBwb3NpdGlvbmluZyAoZGVmYXVsdGluZyB0byAwIGlmIGNsZWFyZWQpXG4gICAgaWYgKHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSAmJiB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID4gMCkge1xuICAgICAgLy8gTW92ZSB1cCBmcm9tIHByb21wdCByb3cgdG8gdG9wIG9mIG92ZXJsYXlcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCA/PyAwO1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske2xpbmVzVG9Ub3B9QWApO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBleGFjdGx5IHRoZSBvbGQgb3ZlcmxheSBsaW5lcywgdGhlbiBlcmFzZSB0byBlbmQgb2Ygc2NyZWVuXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7IGkrKykge1xuICAgICAgICBidWZmZXIucHVzaCgnXFxyJyk7XG4gICAgICAgIGJ1ZmZlci5wdXNoKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgICAgaWYgKGkgPCB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0IC0gMSkge1xuICAgICAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYW55dGhpbmcgYmVsb3cgdGhlIG9sZCBvdmVybGF5IChoYW5kbGVzIGVkZ2UgY2FzZXMpXG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbSicpO1xuXG4gICAgICAvLyBBZnRlciBjbGVhcmluZywgY3Vyc29yIGlzIGF0IGxhc3QgY2xlYXJlZCBsaW5lXG4gICAgICAvLyBNb3ZlIGJhY2sgdXAgdG8gdGhlIHRvcCB3aGVyZSBuZXcgb3ZlcmxheSBzaG91bGQgc3RhcnRcbiAgICAgIGNvbnN0IG1vdmVCYWNrVXAgPSB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0IC0gMTtcbiAgICAgIGlmIChtb3ZlQmFja1VwID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHttb3ZlQmFja1VwfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcml0ZSBwcm9tcHQgbGluZXMgKG5vIHRyYWlsaW5nIG5ld2xpbmUgb24gbGFzdCBsaW5lKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgYnVmZmVyLnB1c2goJ1xccicpO1xuICAgICAgYnVmZmVyLnB1c2goRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgYnVmZmVyLnB1c2gocmVuZGVyZWRMaW5lc1tpXSB8fCAnJyk7XG4gICAgICBpZiAoaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICBidWZmZXIucHVzaCgnXFxuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSWYgb2xkIG92ZXJsYXkgd2FzIHRhbGxlciwgY2xlYXIgYW55IHJlbWFpbmluZyBzdGFsZSBsaW5lcyBiZWxvd1xuICAgIC8vIGFuZCB1c2UgQ1NJIEogKGVyYXNlIGZyb20gY3Vyc29yIHRvIGVuZCBvZiBzY3JlZW4pIHRvIGNsZWFuIHVwXG4gICAgaWYgKHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiBoZWlnaHQpIHtcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXG4nKTsgLy8gTW92ZSB0byBsaW5lIGJlbG93IGxhc3QgY29udGVudFxuICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0onKTsgLy8gQ2xlYXIgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIHNjcmVlblxuICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0EnKTsgLy8gTW92ZSBiYWNrIHVwIHRvIGxhc3QgY29udGVudCBsaW5lXG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gY3Vyc29yIGF0IHByb21wdCBpbnB1dCBsaW5lXG4gICAgY29uc3QgcHJvbXB0Q29sID0gTWF0aC5taW4oTWF0aC5tYXgoMSwgMyArIHRoaXMuY3Vyc29yKSwgdGhpcy5jb2xzIHx8IDgwKTtcbiAgICAvLyBDdXJzb3IgaXMgbm93IGF0IHRoZSBsYXN0IGxpbmUuIE1vdmUgdXAgdG8gdGhlIHByb21wdCByb3cuXG4gICAgY29uc3QgbGluZXNUb01vdmVVcCA9IGhlaWdodCAtIDEgLSBwcm9tcHRJbmRleDtcbiAgICBpZiAobGluZXNUb01vdmVVcCA+IDApIHtcbiAgICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske2xpbmVzVG9Nb3ZlVXB9QWApO1xuICAgIH1cbiAgICBidWZmZXIucHVzaChgXFx4MWJbJHtwcm9tcHRDb2x9R2ApO1xuXG4gICAgLy8gU2hvdyBjdXJzb3IgYWdhaW4gYWZ0ZXIgcG9zaXRpb25pbmdcbiAgICBidWZmZXIucHVzaCgnXFx4MWJbPzI1aCcpO1xuXG4gICAgLy8gU2luZ2xlIGF0b21pYyB3cml0ZSB0byBwcmV2ZW50IGZsaWNrZXJpbmdcbiAgICB0aGlzLndyaXRlKGJ1ZmZlci5qb2luKCcnKSk7XG5cbiAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBwcm9tcHRDb2w7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IHRydWU7XG4gICAgdGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gdHJ1ZTtcbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMubGFzdE92ZXJsYXkgPSB7IGxpbmVzOiByZW5kZXJlZExpbmVzLCBwcm9tcHRJbmRleCB9O1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRPdmVybGF5TGluZXMoKTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIC8vIFNpbXBsZSBob3Jpem9udGFsIGRpdmlkZXIgLSBjbGVhbiBhbmQgcmVsaWFibGVcbiAgICBjb25zdCBkaXZpZGVyID0gdGhlbWUudWkubXV0ZWQoJ+KUgCcucmVwZWF0KG1heFdpZHRoKSk7XG5cbiAgICBjb25zdCBmYWxsYmFja0FjdGl2aXR5ID0gKCgpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nIHx8IHRoaXMuc3RhdHVzT3ZlcnJpZGUgfHwgdGhpcy5zdGF0dXNNZXNzYWdlO1xuICAgICAgaWYgKCFyYXcpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHRoaXMuc3RyaXBBbnNpKHJhdykucmVwbGFjZSgvXlvij7rigKJdXFxzKi8sICcnKS50cmltKCk7XG4gICAgICByZXR1cm4gY2xlYW5lZCB8fCBudWxsO1xuICAgIH0pKCk7XG5cbiAgICAvLyBBY3Rpdml0eSBsaW5lIChvbmx5IHdoZW4gc3RyZWFtaW5nKSAtIHNob3dzOiDil5AgV29ya2luZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMpXG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgKHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkpKSB7XG4gICAgICAvLyBDbGVhbiBzcGlubmVyIGFuaW1hdGlvbiB1c2luZyBicmFpbGxlIGRvdHMgKyBzaGltbWVyIGFjY2VudCBmb3IgYSByaWNoZXIgZmVlbFxuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIGNvbnN0IHN0YXJDaGFyID0gdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXNbdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aF0gPz8gJ+Kctic7XG4gICAgICBjb25zdCBzcGlubmVyRGVjb3JhdGVkID0gYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9JHt0aGVtZS5hY2NlbnQgPyB0aGVtZS5hY2NlbnQoc3RhckNoYXIpIDogc3RhckNoYXJ9YDtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aGlzLmZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTtcbiAgICAgIGNvbnN0IGdlbmVyaWNBY3Rpdml0aWVzID0gWydTdHJlYW1pbmcnLCAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZyddO1xuICAgICAgbGV0IGRpc3BsYXlBY3Rpdml0eSA9IHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkgfHwgJyc7XG4gICAgICBpZiAoZ2VuZXJpY0FjdGl2aXRpZXMuaW5jbHVkZXMoZGlzcGxheUFjdGl2aXR5KSAmJiBmYWxsYmFja0FjdGl2aXR5KSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHk7XG4gICAgICB9XG4gICAgICBpZiAoIWRpc3BsYXlBY3Rpdml0eS50cmltKCkpIHtcbiAgICAgICAgZGlzcGxheUFjdGl2aXR5ID0gZmFsbGJhY2tBY3Rpdml0eSB8fCAnV29ya2luZyc7XG4gICAgICB9XG4gICAgICBjb25zdCBuZWVkc0VsbGlwc2lzID0gIWRpc3BsYXlBY3Rpdml0eS50cmltRW5kKCkuZW5kc1dpdGgoJ+KApicpICYmICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCcuLi4nKTtcbiAgICAgIC8vIEZvcm1hdDog4qCLIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMW0gMTlzIMK3IOKGkTEuMmsgdG9rZW5zKVxuICAgICAgLy8gQnVpbGQgcGFydHMgd2l0aCBhbmltYXRlZCBlbGFwc2VkIHRpbWUgY29sb3JcbiAgICAgIGNvbnN0IGVsYXBzZWRDb2xvciA9IGNoYWxrLmhleCh0aGlzLmVsYXBzZWRDb2xvckZyYW1lc1t0aGlzLmVsYXBzZWRDb2xvckZyYW1lICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoXSA/PyAnI0Y1OUUwQicpO1xuICAgICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gWydlc2MgdG8gaW50ZXJydXB0J107XG4gICAgICBpZiAoZWxhcHNlZCkgcGFydHMucHVzaChlbGFwc2VkQ29sb3IoZWxhcHNlZCkpO1xuICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nVG9rZW5zID4gMCkge1xuICAgICAgICBwYXJ0cy5wdXNoKGDihpEke3RoaXMuZm9ybWF0VG9rZW5Db3VudCh0aGlzLnN0cmVhbWluZ1Rva2Vucyl9IHRva2Vuc2ApO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJlZml4ID0gYCR7c3Bpbm5lckRlY29yYXRlZH0gYDtcbiAgICAgIGNvbnN0IGFjdGl2aXR5VGV4dCA9IGAke2Rpc3BsYXlBY3Rpdml0eS50cmltKCl9JHtuZWVkc0VsbGlwc2lzID8gJ+KApicgOiAnJ31gO1xuICAgICAgY29uc3Qgc3VmZml4ID0gYCAke3RoZW1lLnVpLm11dGVkKCcoJyl9JHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSR7dGhlbWUudWkubXV0ZWQoJyknKX1gO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgZnVsbCBhY3Rpdml0eSBsaW5lIHdpdGggYW5pbWF0ZWQgY29sb3IgZm9yIGVsYXBzZWQgdGltZVxuICAgICAgY29uc3QgYWN0aXZpdHlMaW5lID0gYCR7cHJlZml4fSR7YWN0aXZpdHlUZXh0fSR7c3VmZml4fWA7XG5cbiAgICAgIC8vIEFsd2F5cyBzaG93IGZ1bGwgdGV4dCAtIHdyYXAgdG8gbXVsdGlwbGUgbGluZXMgaWYgbmVlZGVkXG4gICAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHRoaXMudmlzaWJsZUxlbmd0aChwcmVmaXgpKTtcbiAgICAgIGNvbnN0IHdyYXBwZWQgPSB0aGlzLndyYXBPdmVybGF5TGluZShhY3Rpdml0eUxpbmUsIG1heFdpZHRoLCBpbmRlbnQpO1xuICAgICAgbGluZXMucHVzaCguLi53cmFwcGVkKTtcbiAgICB9XG5cbiAgICAvLyBUb3AgZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbnB1dCBwcm9tcHQgbGluZVxuICAgIGNvbnN0IHByb21wdEluZGV4ID0gbGluZXMubGVuZ3RoO1xuICAgIGNvbnN0IGlucHV0TGluZSA9IHRoaXMuYnVpbGRJbnB1dExpbmUoKTtcbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCBieSBzcGxpdHRpbmcgb24gbmV3bGluZXNcbiAgICAvLyBGaWx0ZXIgb3V0IGVtcHR5IGxpbmVzIHRvIHByZXZlbnQgZHVwbGljYXRlIGRpdmlkZXIgYXBwZWFyYW5jZSBmcm9tIGxlYWRpbmcvdHJhaWxpbmcgbmV3bGluZXNcbiAgICBjb25zdCBpbnB1dExpbmVzID0gaW5wdXRMaW5lLnNwbGl0KCdcXG4nKS5maWx0ZXIoKGxpbmUsIGlkeCwgYXJyKSA9PiB7XG4gICAgICAvLyBLZWVwIG5vbi1lbXB0eSBsaW5lcywgYnV0IHByZXNlcnZlIHNpbmdsZSBlbXB0eSBsaW5lIGlmIGl0J3MgaW50ZW50aW9uYWwgKGUuZy4sIGJldHdlZW4gY29udGVudClcbiAgICAgIC8vIE9ubHkgZmlsdGVyIGxlYWRpbmcvdHJhaWxpbmcgZW1wdHkgbGluZXNcbiAgICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgLy8gRmlsdGVyIGlmIGl0J3MgdGhlIGZpcnN0IGxpbmUgKGxlYWRpbmcgZW1wdHkpIG9yIGxhc3QgbGluZSAodHJhaWxpbmcgZW1wdHkpXG4gICAgICAgIGlmIChpZHggPT09IDAgfHwgaWR4ID09PSBhcnIubGVuZ3RoIC0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgLy8gRW5zdXJlIGF0IGxlYXN0IG9uZSBsaW5lIGZvciB0aGUgcHJvbXB0XG4gICAgaWYgKGlucHV0TGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpbnB1dExpbmVzLnB1c2godGhlbWUucHJpbWFyeSgnPiAnKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnB1dExpbmVzKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gQm90dG9tIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5saW5lIHBhbmVsIChwaW5uZWQgc2Nyb2xsIGJveCBmb3IgbGl2ZSBvdXRwdXQvbWVudXMpXG4gICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBwYW5lbExpbmUgb2YgdGhpcy5pbmxpbmVQYW5lbCkge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7cGFuZWxMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0ZSBpbmxpbmUgY29udGVudCBmcm9tIHN1Z2dlc3Rpb25zL3RvZ2dsZXNcbiAgICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG4gICAgfVxuXG4gICAgLy8gU2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uc1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tpbmRleF0hO1xuICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleDtcbiAgICAgICAgY29uc3QgbWFya2VyID0gaXNBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCfilrgnKSA6IHRoZW1lLnVpLm11dGVkKCcgJyk7XG4gICAgICAgIGNvbnN0IGNtZFRleHQgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoc3VnZ2VzdGlvbi5jb21tYW5kKSA6IHRoZW1lLnVpLm11dGVkKHN1Z2dlc3Rpb24uY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gaXNBY3RpdmUgPyBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbik7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttYXJrZXJ9ICR7Y21kVGV4dH0g4oCUICR7ZGVzY1RleHR9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlbCBhbmQgY29udGV4dCBpbmZvXG4gICAgY29uc3QgbW9kZWxDb250ZXh0TGluZSA9IHRoaXMuYnVpbGRNb2RlbENvbnRleHRMaW5lKCk7XG4gICAgaWYgKG1vZGVsQ29udGV4dExpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttb2RlbENvbnRleHRMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gU3RhdHVzICsgbWV0YSBibG9jayAoaW5jbHVkZXMgZGlyL3ZlcnNpb24vdG9vbCBzdW1tYXJ5KVxuICAgIGNvbnN0IGNocm9tZUxpbmVzID0gdGhpcy5idWlsZENocm9tZUxpbmVzKCk7XG4gICAgaWYgKGNocm9tZUxpbmVzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBjaHJvbWVMaW5lIG9mIGNocm9tZUxpbmVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtjaHJvbWVMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kZSB0b2dnbGVzXG4gICAgY29uc3QgdG9nZ2xlTGluZXMgPSB0aGlzLmJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHRvZ2dsZUxpbmUgb2YgdG9nZ2xlTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RvZ2dsZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlZ2VuZExpbmVzID0gdGhpcy5idWlsZFRvZ2dsZUxlZ2VuZCgpO1xuICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgbGVnZW5kTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2xlZ2VuZH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHAgaGludFxuICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHt0aGVtZS51aS5tdXRlZCgnPyBmb3Igc2hvcnRjdXRzJyl9YCwgbWF4V2lkdGgpKTtcblxuICAgIHJldHVybiB7IGxpbmVzLCBwcm9tcHRJbmRleCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIG1vZGVsIG5hbWUgYW5kIGNvbnRleHQgdXNhZ2UgbGluZSB3aXRoIG1pbmkgcHJvZ3Jlc3MgYmFyXG4gICAqIEZvcm1hdDogZ3B0LTQgwrcg4paI4paI4paI4paI4paR4paRIDg1JSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkTW9kZWxDb250ZXh0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIE1vZGVsIG5hbWUgKHByb3ZpZGVyIC8gbW9kZWwgb3IganVzdCBtb2RlbClcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlciAmJiB0aGlzLnN0YXR1c01ldGEubW9kZWxcbiAgICAgID8gYCR7dGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyfSDCtyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLmluZm8obW9kZWwpKTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0IG1ldGVyIHdpdGggbWluaSBwcm9ncmVzcyBiYXIgKHNob3dzIHVzZWQgcGVyY2VudGFnZSwgbm90IHJlbWFpbmluZylcbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHVzZWQgPSBjbGFtcFBlcmNlbnRhZ2UodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIGNvbnN0IGJhcldpZHRoID0gNjtcbiAgICAgIGNvbnN0IGZpbGxlZCA9IE1hdGgucm91bmQoKHVzZWQgLyAxMDApICogYmFyV2lkdGgpO1xuICAgICAgY29uc3QgZW1wdHkgPSBNYXRoLm1heCgwLCBiYXJXaWR0aCAtIGZpbGxlZCk7XG4gICAgICAvLyBDb2xvciBiYXNlZCBvbiBob3cgZnVsbCB0aGUgY29udGV4dCBpcyAoZ3JlZW49bG93IHVzYWdlLCB5ZWxsb3c9bWVkaXVtLCByZWQ9aGlnaClcbiAgICAgIGNvbnN0IGJhckNvbG9yID0gZ2V0Q29udGV4dENvbG9yKHVzZWQsIHtcbiAgICAgICAgZXJyb3I6IHRoZW1lLmVycm9yLFxuICAgICAgICB3YXJuaW5nOiB0aGVtZS53YXJuaW5nLFxuICAgICAgICBpbmZvOiB0aGVtZS5pbmZvLFxuICAgICAgICBzdWNjZXNzOiB0aGVtZS5zdWNjZXNzLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBiYXIgPSBiYXJDb2xvcign4paIJy5yZXBlYXQoZmlsbGVkKSkgKyB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQoZW1wdHkpKTtcbiAgICAgIHBhcnRzLnB1c2goYCR7YmFyfSAke2JhckNvbG9yKGAke3VzZWR9JWApfSAke3RoZW1lLnVpLm11dGVkKCdjdHgnKX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgwrcgICcpKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgaW5saW5lIHRvZ2dsZSBjb250cm9scyAtIENsYXVkZSBDb2RlIHN0eWxlXG4gICAqIEZvcm1hdDog4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVxuICAgKiBSZXR1cm5zIHdyYXBwZWQgbGluZXMgdG8gZW5zdXJlIGFsbCB0b2dnbGVzIChpbmNsdWRpbmcgUkwpIGFyZSB2aXNpYmxlIGJlbG93IHRoZSBjaGF0IGJveC5cbiAgICovXG4gIC8qKlxuICAgKiBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzdGF0dXMgbGluZSB3aXRoIGNvbG9yLWNvZGVkIHN0YXRlcyBhbmQgaW50ZWdyYXRlZCBleHBsYW5hdGlvbnMuXG4gICAqIEVhY2ggdG9nZ2xlIGhhcyBhIGRpc3RpbmN0IGNvbG9yIGZvciBlYXN5IGlkZW50aWZpY2F0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZElubGluZVRvZ2dsZUxpbmUoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgYXBwcm92YWxNb2RlID0gdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsTW9kZSB8fCAnYXV0byc7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQnVpbGQgdW5pZmllZCB0b2dnbGUgc2VnbWVudHMgd2l0aCBESVNUSU5DVCBjb2xvcnMgZm9yIGVhY2ggdG9nZ2xlXG4gICAgY29uc3QgdG9nZ2xlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIDEuIFJMIG1vZGUgKENZQU4pIC0gbXVsdGktYWdlbnQgdnMgc2luZ2xlLXBhc3NcbiAgICBjb25zdCBybE9uID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkO1xuICAgIGNvbnN0IHJsSWNvbiA9IHJsT24gPyAn8J+klicgOiAn4pqhJztcbiAgICBjb25zdCBybFN0YXR1cyA9IHJsT24gPyB0aGVtZS5pbmZvKCdkdWFsJykgOiB0aGVtZS51aS5tdXRlZCgnc2luZ2xlJyk7XG4gICAgY29uc3QgcmxFeHBsYWluID0gcmxPbiA/ICdtdWx0aS1hZ2VudCcgOiAnb25lLXBhc3MnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtybEljb259ICR7cmxTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVEXScpfSAke3RoZW1lLnVpLm11dGVkKHJsRXhwbGFpbil9YCk7XG5cbiAgICAvLyAyLiBBdXRvLWNvbnRpbnVlIChNQUdFTlRBL1BVUlBMRSkgLSBrZWVwIGdvaW5nIHVudGlsIGRvbmVcbiAgICBjb25zdCBjb250SWNvbiA9IGF1dG9Db250aW51ZUFjdGl2ZSA/ICfwn5SEJyA6ICfij7gnO1xuICAgIGNvbnN0IGNvbnRTdGF0dXMgPSBhdXRvQ29udGludWVBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCdsb29wJykgOiB0aGVtZS51aS5tdXRlZCgnc3RvcCcpO1xuICAgIGNvbnN0IGNvbnRFeHBsYWluID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ3VudGlsIGRvbmUnIDogJ2VhY2ggcmVzcG9uc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtjb250SWNvbn0gJHtjb250U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylR10nKX0gJHt0aGVtZS51aS5tdXRlZChjb250RXhwbGFpbil9YCk7XG5cbiAgICAvLyAzLiBWZXJpZnkgKFlFTExPVykgLSBhdXRvLXRlc3RzIGFmdGVyIGVkaXRzXG4gICAgY29uc3QgdmVyaWZ5SWNvbiA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICfinJMnIDogJ+KXiyc7XG4gICAgY29uc3QgdmVyaWZ5U3RhdHVzID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gdGhlbWUud2FybmluZygndGVzdCcpIDogdGhlbWUudWkubXV0ZWQoJ3NraXAnKTtcbiAgICBjb25zdCB2ZXJpZnlFeHBsYWluID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2F1dG8tdGVzdCcgOiAnbm8gdGVzdHMnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt2ZXJpZnlJY29ufSAke3ZlcmlmeVN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpVZdJyl9ICR7dGhlbWUudWkubXV0ZWQodmVyaWZ5RXhwbGFpbil9YCk7XG5cbiAgICAvLyA0LiBBcHByb3ZhbHMgKEdSRUVOL09SQU5HRSkgLSBhdXRvIG9yIGFzayBmb3IgcGVybWlzc2lvblxuICAgIGNvbnN0IGFwcHJJY29uID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ/Cfm6EnIDogJ+KclCc7XG4gICAgY29uc3QgYXBwclN0YXR1cyA9IGFwcHJvdmFsTW9kZSA9PT0gJ2FwcHJvdmFsJyA/IHRoZW1lLndhcm5pbmcoJ2FzaycpIDogdGhlbWUuc3VjY2VzcygnYXV0bycpO1xuICAgIGNvbnN0IGFwcHJFeHBsYWluID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ2NvbmZpcm0gYWxsJyA6ICdhdXRvLWFwcHJvdmUnO1xuICAgIHRvZ2dsZXMucHVzaChgJHthcHBySWNvbn0gJHthcHByU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylQV0nKX0gJHt0aGVtZS51aS5tdXRlZChhcHByRXhwbGFpbil9YCk7XG5cbiAgICAvLyA1LiBUaGlua2luZyAoQkxVRSkgLSBiYWxhbmNlZCBvciBkZWVwIHJlYXNvbmluZ1xuICAgIGNvbnN0IHRoaW5raW5nSXNEZWVwID0gdGhpbmtpbmdMYWJlbCA9PT0gJ2V4dGVuZGVkJyB8fCB0aGlua2luZ0xhYmVsID09PSAnZGVlcCc7XG4gICAgY29uc3QgdGhpbmtJY29uID0gdGhpbmtpbmdJc0RlZXAgPyAn8J+noCcgOiAn8J+SrSc7XG4gICAgY29uc3QgdGhpbmtTdGF0dXMgPSB0aGlua2luZ0lzRGVlcCA/IHRoZW1lLmluZm8oJ2RlZXAnKSA6IHRoZW1lLnVpLm11dGVkKCdxdWljaycpO1xuICAgIGNvbnN0IHRoaW5rRXhwbGFpbiA9IHRoaW5raW5nSXNEZWVwID8gJ3Rob3JvdWdoJyA6ICdjb25jaXNlJztcbiAgICB0b2dnbGVzLnB1c2goYCR7dGhpbmtJY29ufSAke3RoaW5rU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbVEFCXScpfSAke3RoZW1lLnVpLm11dGVkKHRoaW5rRXhwbGFpbil9YCk7XG5cbiAgICAvLyA2LiBEZWJ1ZyBsb2dnaW5nIGluZGljYXRvciAoUkVEKSAtIHRvZ2dsZSBzaG93cyB3aGV0aGVyIGNvbnNvbGUgbG9nZ2luZyBpcyBlbmFibGVkXG4gICAgY29uc3QgZGVidWdBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmRlYnVnRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBkZWJ1Z0ljb24gPSBkZWJ1Z0FjdGl2ZSA/ICfwn5CeJyA6ICfwn5SNJztcbiAgICBjb25zdCBkZWJ1Z1N0YXR1cyA9IGRlYnVnQWN0aXZlID8gdGhlbWUud2FybmluZygnZGVidWcgb24nKSA6IHRoZW1lLnVpLm11dGVkKCdkZWJ1ZyBvZmYnKTtcbiAgICBjb25zdCBkZWJ1Z0V4cGxhaW4gPSBkZWJ1Z0FjdGl2ZSA/ICd2ZXJib3NlIGxvZ3MnIDogJ3NpbGVudCc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2RlYnVnSWNvbn0gJHtkZWJ1Z1N0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnWy9kZWJ1Z10nKX0gJHt0aGVtZS51aS5tdXRlZChkZWJ1Z0V4cGxhaW4pfWApO1xuXG4gICAgLy8gNy4gU2hvcnRjdXQgaGludFxuICAgIHRvZ2dsZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnPyBoZWxwJyl9YCk7XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMik7XG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHRvZ2dsZXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBMZWdlbmQgaXMgbm93IGludGVncmF0ZWQgaW50byBidWlsZElubGluZVRvZ2dsZUxpbmUgZm9yIHVuaWZpZWQgZGlzcGxheVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxlZ2VuZCgpOiBzdHJpbmdbXSB7XG4gICAgLy8gTGVnZW5kIGV4cGxhbmF0aW9ucyBub3cgaW50ZWdyYXRlZCBkaXJlY3RseSBpbnRvIHRvZ2dsZSBsaW5lXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENocm9tZUxpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3Qgc3RhdHVzTGluZXMgPSB0aGlzLmJ1aWxkU3RhdHVzQmxvY2sobWF4V2lkdGgpO1xuICAgIGNvbnN0IG1ldGFMaW5lcyA9IHRoaXMuYnVpbGRNZXRhQmxvY2sobWF4V2lkdGgpO1xuICAgIHJldHVybiBbLi4uc3RhdHVzTGluZXMsIC4uLm1ldGFMaW5lc107XG4gIH1cblxuICBwcml2YXRlIGFiYnJldmlhdGVQYXRoKHBhdGhWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBob21lID0gaG9tZWRpcigpO1xuICAgIGlmIChob21lICYmIHBhdGhWYWx1ZS5zdGFydHNXaXRoKGhvbWUpKSB7XG4gICAgICByZXR1cm4gcGF0aFZhbHVlLnJlcGxhY2UoaG9tZSwgJ34nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhWYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gdGhpcy5jb21wb3NlU3RhdHVzTGFiZWwoKTtcbiAgICBpZiAoIXN0YXR1c0xhYmVsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgYW5pbWF0ZWQgc3Bpbm5lciB3aGVuIHN0cmVhbWluZyBmb3IgZHluYW1pYyB2aXN1YWwgZmVlZGJhY2tcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3N0YXR1cycpfSAke3RoaXMuYXBwbHlUb25lKHN0YXR1c0xhYmVsLnRleHQsIHN0YXR1c0xhYmVsLnRvbmUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3J1bnRpbWUnKX0gJHt0aGVtZS51aS5tdXRlZCh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVXNlIGFuaW1hdGVkIGNvbnRleHQgbWV0ZXIgZm9yIHNtb290aCBjb2xvciB0cmFuc2l0aW9uc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIudXBkYXRlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuY29udGV4dE1ldGVyLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNZXRhQmxvY2sobWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdwcm9maWxlJywgdGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IC8gJHt0aGlzLnN0YXR1c01ldGEubW9kZWx9YFxuICAgICAgOiB0aGlzLnN0YXR1c01ldGEubW9kZWwgfHwgdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyO1xuICAgIGlmIChtb2RlbCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdtb2RlbCcsIG1vZGVsLCAnaW5mbycpKTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdkaXInLCB0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSksICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLndyaXRlcykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd3cml0ZXMnLCB0aGlzLnN0YXR1c01ldGEud3JpdGVzLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd0b29scycsIHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Nlc3Npb24nLCB0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS52ZXJzaW9uKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2J1aWxkJywgYHYke3RoaXMuc3RhdHVzTWV0YS52ZXJzaW9ufWAsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgUkwgYWdlbnQgc3RhdHVzIHdoZW4gZHVhbC1STCBtb2RlIGlzIGFjdGl2ZVxuICAgIGNvbnN0IHJsU2VnbWVudHMgPSB0aGlzLmJ1aWxkUkxTdGF0dXNTZWdtZW50cygpO1xuICAgIGlmIChybFNlZ21lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goLi4ucmxTZWdtZW50cyk7XG4gICAgfVxuXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIFJMIGFnZW50IHN0YXR1cyBzZWdtZW50cyBmb3IgZGlzcGxheSBkdXJpbmcgZHVhbC1STCBleGVjdXRpb24uXG4gICAqIFNob3dzOiB0b3VybmFtZW50IHNjb3JlYm9hcmQsIGFjdGl2ZSBhZ2VudCwgbW9kdWxlL3N0ZXAgcHJvZ3Jlc3MsIGFuZCBzY29yZXMuXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkUkxTdGF0dXNTZWdtZW50cygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcmwgPSB0aGlzLnJsU3RhdHVzO1xuXG4gICAgLy8gT25seSBzaG93IFJMIHN0YXR1cyB3aGVuIHRoZXJlJ3MgbWVhbmluZ2Z1bCBkYXRhXG4gICAgaWYgKCFybC5hY3RpdmVWYXJpYW50ICYmICFybC53aW5zICYmICFybC5jdXJyZW50TW9kdWxlKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgLy8gVG91cm5hbWVudCBzY29yZWJvYXJkIChhbHdheXMgc2hvdyB3aGVuIHdpbnMgZXhpc3QpXG4gICAgaWYgKHJsLndpbnMgJiYgKHJsLndpbnMucHJpbWFyeSA+IDAgfHwgcmwud2lucy5yZWZpbmVyID4gMCB8fCBybC53aW5zLnRpZXMgPiAwKSkge1xuICAgICAgY29uc3QgdG90YWxHYW1lcyA9IHJsLndpbnMucHJpbWFyeSArIHJsLndpbnMucmVmaW5lciArIHJsLndpbnMudGllcztcbiAgICAgIGNvbnN0IGxlYWRlciA9IHJsLndpbnMucHJpbWFyeSA+IHJsLndpbnMucmVmaW5lciA/ICdwcmltYXJ5JyA6XG4gICAgICAgICAgICAgICAgICAgICBybC53aW5zLnJlZmluZXIgPiBybC53aW5zLnByaW1hcnkgPyAncmVmaW5lcicgOiAndGllJztcblxuICAgICAgLy8gU2NvcmVib2FyZCB3aXRoIGNvbG9ycyBiYXNlZCBvbiBsZWFkZXJcbiAgICAgIGNvbnN0IHBDb2xvciA9IGxlYWRlciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuc3VjY2VzcyA6IHRoZW1lLmluZm87XG4gICAgICBjb25zdCByQ29sb3IgPSBsZWFkZXIgPT09ICdyZWZpbmVyJyA/IHRoZW1lLnN1Y2Nlc3MgOiB0aGVtZS53YXJuaW5nO1xuICAgICAgY29uc3QgcFNjb3JlID0gcENvbG9yKGAke3JsLndpbnMucHJpbWFyeX1gKTtcbiAgICAgIGNvbnN0IHJTY29yZSA9IHJDb2xvcihgJHtybC53aW5zLnJlZmluZXJ9YCk7XG5cbiAgICAgIC8vIFRyb3BoeSBmb3IgbGVhZGVyXG4gICAgICBjb25zdCB0cm9waHkgPSBsZWFkZXIgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8oJ/Cfj4YnKSA6XG4gICAgICAgICAgICAgICAgICAgICBsZWFkZXIgPT09ICdyZWZpbmVyJyA/IHRoZW1lLndhcm5pbmcoJ/Cfj4YnKSA6ICfimpbvuI8nO1xuXG4gICAgICAvLyBXaW4gc3RyZWFrIGluZGljYXRvclxuICAgICAgY29uc3Qgc3RyZWFrVGV4dCA9IHJsLnN0cmVhayAmJiBybC5zdHJlYWsgPiAxID8gdGhlbWUudWkubXV0ZWQoYCDwn5SlJHtybC5zdHJlYWt9YCkgOiAnJztcblxuICAgICAgc2VnbWVudHMucHVzaChgJHt0cm9waHl9JHtwU2NvcmV9JHt0aGVtZS51aS5tdXRlZCgnOicpfSR7clNjb3JlfSR7c3RyZWFrVGV4dH1gKTtcblxuICAgICAgLy8gUHJvZ3Jlc3MgYmFyIHNob3dpbmcgcmVsYXRpdmUgd2luc1xuICAgICAgaWYgKHRvdGFsR2FtZXMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGJhcldpZHRoID0gODtcbiAgICAgICAgY29uc3QgcEJhcnMgPSBNYXRoLnJvdW5kKChybC53aW5zLnByaW1hcnkgLyB0b3RhbEdhbWVzKSAqIGJhcldpZHRoKTtcbiAgICAgICAgY29uc3QgckJhcnMgPSBNYXRoLnJvdW5kKChybC53aW5zLnJlZmluZXIgLyB0b3RhbEdhbWVzKSAqIGJhcldpZHRoKTtcbiAgICAgICAgY29uc3QgdEJhcnMgPSBNYXRoLm1heCgwLCBiYXJXaWR0aCAtIHBCYXJzIC0gckJhcnMpO1xuICAgICAgICBjb25zdCBiYXIgPSB0aGVtZS5pbmZvKCfilognLnJlcGVhdChwQmFycykpICtcbiAgICAgICAgICAgICAgICAgICAgdGhlbWUudWkubXV0ZWQoJ+KWkScucmVwZWF0KHRCYXJzKSkgK1xuICAgICAgICAgICAgICAgICAgICB0aGVtZS53YXJuaW5nKCfilognLnJlcGVhdChyQmFycykpO1xuICAgICAgICBzZWdtZW50cy5wdXNoKGBbJHtiYXJ9XWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFjdGl2ZSB2YXJpYW50IGluZGljYXRvclxuICAgIGlmIChybC5hY3RpdmVWYXJpYW50KSB7XG4gICAgICBjb25zdCBpc1BhcmFsbGVsID0gcmwucGFyYWxsZWxFeGVjdXRpb247XG4gICAgICBpZiAoaXNQYXJhbGxlbCkge1xuICAgICAgICAvLyBCb3RoIHJ1bm5pbmcgaW4gcGFyYWxsZWxcbiAgICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKCfimqFQJyl9ICR7dGhlbWUudWkubXV0ZWQoJ+KIpScpfSAke3RoZW1lLndhcm5pbmcoJ+KaoVInKX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRJY29uID0gcmwuYWN0aXZlVmFyaWFudCA9PT0gJ3ByaW1hcnknID8gJ+KWticgOiAn4pa3JztcbiAgICAgICAgY29uc3QgdmFyaWFudExhYmVsID0gcmwuYWN0aXZlVmFyaWFudCA9PT0gJ3ByaW1hcnknID8gJ1AnIDogJ1InO1xuICAgICAgICBjb25zdCB2YXJpYW50Q29sb3IgPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvIDogdGhlbWUud2FybmluZztcbiAgICAgICAgc2VnbWVudHMucHVzaChgJHt2YXJpYW50SWNvbn0ke3ZhcmlhbnRDb2xvcih2YXJpYW50TGFiZWwpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExhc3Qgd2lubmVyIGluZGljYXRvclxuICAgIGlmIChybC5sYXN0V2lubmVyICYmIHJsLmxhc3RXaW5uZXIgIT09ICd0aWUnKSB7XG4gICAgICBjb25zdCB3aW5uZXJJY29uID0gcmwubGFzdFdpbm5lciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbygn4pyTUCcpIDogdGhlbWUud2FybmluZygn4pyTUicpO1xuICAgICAgc2VnbWVudHMucHVzaCh3aW5uZXJJY29uKTtcbiAgICB9IGVsc2UgaWYgKHJsLmxhc3RXaW5uZXIgPT09ICd0aWUnKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKCfiiYgnKSk7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudCBtb2R1bGUvc3RlcCAoY29tcGFjdClcbiAgICBpZiAocmwuY3VycmVudE1vZHVsZSB8fCBybC5jdXJyZW50U3RlcCkge1xuICAgICAgY29uc3Qgc3RlcFRleHQgPSBybC5jdXJyZW50U3RlcCB8fCBybC5jdXJyZW50TW9kdWxlIHx8ICcnO1xuICAgICAgaWYgKHN0ZXBUZXh0KSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQodGhpcy50cnVuY2F0ZU1pZGRsZShzdGVwVGV4dCwgMTUpKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvZ3Jlc3MgaW5kaWNhdG9yIChzdGVwcyBjb21wbGV0ZWQgLyB0b3RhbClcbiAgICBpZiAodHlwZW9mIHJsLnN0ZXBzQ29tcGxldGVkID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgcmwudG90YWxTdGVwcyA9PT0gJ251bWJlcicgJiYgcmwudG90YWxTdGVwcyA+IDApIHtcbiAgICAgIGNvbnN0IHBjdCA9IE1hdGgucm91bmQoKHJsLnN0ZXBzQ29tcGxldGVkIC8gcmwudG90YWxTdGVwcykgKiAxMDApO1xuICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZChgJHtwY3R9JWApKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJld2FyZCBzY29yZXMgKGNvbXBhY3QsIG9ubHkgZHVyaW5nIGFjdGl2ZSBjb21wYXJpc29uKVxuICAgIGlmIChybC5zY29yZXMgJiYgKHR5cGVvZiBybC5zY29yZXMucHJpbWFyeSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHJsLnNjb3Jlcy5yZWZpbmVyID09PSAnbnVtYmVyJykpIHtcbiAgICAgIGNvbnN0IHBTY29yZSA9IHR5cGVvZiBybC5zY29yZXMucHJpbWFyeSA9PT0gJ251bWJlcicgPyBybC5zY29yZXMucHJpbWFyeS50b0ZpeGVkKDIpIDogJy0nO1xuICAgICAgY29uc3QgclNjb3JlID0gdHlwZW9mIHJsLnNjb3Jlcy5yZWZpbmVyID09PSAnbnVtYmVyJyA/IHJsLnNjb3Jlcy5yZWZpbmVyLnRvRml4ZWQoMikgOiAnLSc7XG4gICAgICBjb25zdCBwVmFsID0gcmwuc2NvcmVzLnByaW1hcnkgPz8gMDtcbiAgICAgIGNvbnN0IHJWYWwgPSBybC5zY29yZXMucmVmaW5lciA/PyAwO1xuICAgICAgY29uc3QgcERpc3BsYXkgPSBwVmFsID4gclZhbCA/IHRoZW1lLnN1Y2Nlc3MocFNjb3JlKSA6IHRoZW1lLmluZm8ocFNjb3JlKTtcbiAgICAgIGNvbnN0IHJEaXNwbGF5ID0gclZhbCA+IHBWYWwgPyB0aGVtZS5zdWNjZXNzKHJTY29yZSkgOiB0aGVtZS53YXJuaW5nKHJTY29yZSk7XG4gICAgICBzZWdtZW50cy5wdXNoKGAke3BEaXNwbGF5fSR7dGhlbWUudWkubXV0ZWQoJy8nKX0ke3JEaXNwbGF5fWApO1xuICAgIH1cblxuICAgIC8vIEh1bWFuIGFjY3VyYWN5IGluZGljYXRvciAocmVsYXRpdmUgcmFua2luZyBxdWFsaXR5KVxuICAgIGlmIChybC5hY2N1cmFjeSAmJiAodHlwZW9mIHJsLmFjY3VyYWN5LnByaW1hcnkgPT09ICdudW1iZXInIHx8IHR5cGVvZiBybC5hY2N1cmFjeS5yZWZpbmVyID09PSAnbnVtYmVyJykpIHtcbiAgICAgIGNvbnN0IHBBY2MgPSBybC5hY2N1cmFjeS5wcmltYXJ5ICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKHJsLmFjY3VyYWN5LnByaW1hcnkgKiAxMDApIDogbnVsbDtcbiAgICAgIGNvbnN0IHJBY2MgPSBybC5hY2N1cmFjeS5yZWZpbmVyICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKHJsLmFjY3VyYWN5LnJlZmluZXIgKiAxMDApIDogbnVsbDtcbiAgICAgIGNvbnN0IHBEaXNwbGF5ID0gcEFjYyAhPT0gbnVsbCA/IHRoZW1lLmluZm8oYFAke3BBY2N9JWApIDogbnVsbDtcbiAgICAgIGNvbnN0IHJEaXNwbGF5ID0gckFjYyAhPT0gbnVsbCA/IHRoZW1lLndhcm5pbmcoYFIke3JBY2N9JWApIDogbnVsbDtcbiAgICAgIGNvbnN0IHBhcnRzID0gW3BEaXNwbGF5LCByRGlzcGxheV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4odGhlbWUudWkubXV0ZWQoJ3wnKSk7XG4gICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaChwYXJ0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRydW5jYXRlIGEgc3RyaW5nIGluIHRoZSBtaWRkbGUsIHNob3dpbmcgc3RhcnQgYW5kIGVuZCB3aXRoIGVsbGlwc2lzLlxuICAgKi9cbiAgcHJpdmF0ZSB0cnVuY2F0ZU1pZGRsZSh0ZXh0OiBzdHJpbmcsIG1heExlbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4TGVuKSByZXR1cm4gdGV4dDtcbiAgICBjb25zdCBrZWVwTGVuID0gTWF0aC5mbG9vcigobWF4TGVuIC0gMykgLyAyKTtcbiAgICByZXR1cm4gYCR7dGV4dC5zbGljZSgwLCBrZWVwTGVuKX0uLi4ke3RleHQuc2xpY2UoLWtlZXBMZW4pfWA7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udHJvbExpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b2dnbGVMaW5lID0gdGhpcy5idWlsZFRvZ2dsZUxpbmUoKTtcbiAgICBpZiAodG9nZ2xlTGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnbW9kZXMnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oC6Jyl9ICR7dG9nZ2xlTGluZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydGN1dExpbmUgPSB0aGlzLmJ1aWxkU2hvcnRjdXRMaW5lKCk7XG4gICAgaWYgKHNob3J0Y3V0TGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgna2V5cycpfSAgJHtzaG9ydGN1dExpbmV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgY29tcGFjdCB0b2dnbGUgbGluZSBsaWtlIENsYXVkZSBDb2RlOlxuICAgKiBcIuKPteKPtSBhY2NlcHQgZWRpdHMgb24gKHNoaWZ0K3RhYiB0byBjeWNsZSlcIlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENvbXBhY3RUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIC8vIFNob3cgdGhlIG1vc3QgcmVsZXZhbnQgbW9kZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZDtcblxuICAgIC8vIEVkaXQgbW9kZSBpbmRpY2F0b3JcbiAgICBjb25zdCBlZGl0SWNvbiA9ICfij7Xij7UnO1xuICAgIGNvbnN0IGVkaXRTdGF0ZSA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICdhcHByb3ZhbCByZXF1aXJlZCcgOiAnYWNjZXB0IGVkaXRzJztcbiAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKGVkaXRJY29uKX0gJHtlZGl0U3RhdGV9ICR7dGhlbWUuc3VjY2Vzcygnb24nKX1gKTtcblxuICAgIC8vIFRoaW5raW5nIG1vZGUgKGlmIGFjdGl2ZSlcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJycpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0aGlua2luZ0xhYmVsICYmIHRoaW5raW5nTGFiZWwgIT09ICdvZmYnKSB7XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCd0aGlua2luZycpfSAke3RoZW1lLmluZm8odGhpbmtpbmdMYWJlbCl9YCk7XG4gICAgfVxuXG4gICAgLy8gQ3ljbGUgaGludFxuICAgIGNvbnN0IGN5Y2xlSGludCA9IHRoZW1lLnVpLm11dGVkKCcoc2hpZnQrdGFiIHRvIGN5Y2xlKScpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0gJHtjeWNsZUhpbnR9YDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvZ2dsZXM6IEFycmF5PHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBvbjogYm9vbGVhbjtcbiAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgaG90a2V5Pzogc3RyaW5nIHwgbnVsbDtcbiAgICB9PiA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9nZ2xlID0gKGxhYmVsOiBzdHJpbmcsIG9uOiBib29sZWFuLCBob3RrZXk/OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSA9PiB7XG4gICAgICB0b2dnbGVzLnB1c2goeyBsYWJlbCwgb24sIGhvdGtleTogdGhpcy5mb3JtYXRIb3RrZXkoaG90a2V5KSwgdmFsdWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGF1dG9WZXJpZnlBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgY29uc3QgdmVyaWZ5VmFsdWUgPSBhdXRvVmVyaWZ5QWN0aXZlXG4gICAgICA/ICdhdXRvJ1xuICAgICAgOiB2ZXJpZmljYXRpb25BY3RpdmVcbiAgICAgICAgPyAnb24nXG4gICAgICAgIDogJ29mZic7XG5cbiAgICBhZGRUb2dnbGUoJ1ZlcmlmeScsIHZlcmlmaWNhdGlvbkFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXksIHZlcmlmeVZhbHVlKTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCBhcHByb3ZhbEFjdGl2ZSA9IGFwcHJvdmFsTW9kZSAhPT0gJ2F1dG8nO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBcHByb3ZhbHMnLFxuICAgICAgYXBwcm92YWxBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXksXG4gICAgICBhcHByb3ZhbE1vZGUgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdhc2snXG4gICAgKTtcblxuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0F1dG8tY29udGludWUnLFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlLFxuICAgICAgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXksXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUgPyAnYXV0by12ZXJpZnknIDogJ29mZidcbiAgICApO1xuXG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbFJhdyA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKTtcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID1cbiAgICAgIHRoaW5raW5nTGFiZWxSYXcudG9Mb3dlckNhc2UoKSA9PT0gJ2V4dGVuZGVkJyA/ICdkZWVwJyA6IHRoaW5raW5nTGFiZWxSYXcgfHwgJ2JhbGFuY2VkJztcbiAgICBjb25zdCB0aGlua2luZ0FjdGl2ZSA9IHRoaW5raW5nTGFiZWwubGVuZ3RoID4gMDtcbiAgICBhZGRUb2dnbGUoJ1RoaW5raW5nJywgdGhpbmtpbmdBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXksIHRoaW5raW5nTGFiZWwpO1xuXG4gICAgY29uc3QgZHVhbFJsQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IG1vZGVWYWx1ZSA9IGR1YWxSbEFjdGl2ZSA/ICdkdWFsLXJsLWNvbnQnIDogJ3NpbmdsZS1jb250JztcbiAgICBhZGRUb2dnbGUoJ01vZGUnLCBkdWFsUmxBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5LCBtb2RlVmFsdWUpO1xuXG4gICAgY29uc3QgYnVpbGRMaW5lID0gKGluY2x1ZGVIb3RrZXlzOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZVRleHQgPSB0b2dnbGUub24gPyB0aGVtZS5zdWNjZXNzKHRvZ2dsZS52YWx1ZSB8fCAnb24nKSA6IHRoZW1lLnVpLm11dGVkKHRvZ2dsZS52YWx1ZSB8fCAnb2ZmJyk7XG4gICAgICAgICAgY29uc3QgaG90a2V5VGV4dCA9XG4gICAgICAgICAgICBpbmNsdWRlSG90a2V5cyAmJiB0b2dnbGUuaG90a2V5ID8gdGhlbWUudWkubXV0ZWQoYCBbJHt0b2dnbGUuaG90a2V5fV1gKSA6ICcnO1xuICAgICAgICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChgJHt0b2dnbGUubGFiZWx9OmApfSAke3N0YXRlVGV4dH0ke2hvdGtleVRleHR9YDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgJykpO1xuICAgIH07XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgbGV0IGxpbmUgPSBidWlsZExpbmUodHJ1ZSk7XG5cbiAgICAvLyBSZWNvcmQgd2hpY2ggaG90a2V5cyBhcmUgYWN0dWFsbHkgc2hvd24gc28gdGhlIHNob3J0Y3V0IGxpbmUgY2FuIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUgPSBuZXcgU2V0KFxuICAgICAgdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiAodG9nZ2xlLmhvdGtleSA/IHRvZ2dsZS5ob3RrZXkgOiBudWxsKSlcbiAgICAgICAgLmZpbHRlcigoa2V5KToga2V5IGlzIHN0cmluZyA9PiBCb29sZWFuKGtleSkpXG4gICAgKTtcblxuICAgIC8vIElmIHRoZSBsaW5lIGlzIHRvbyB3aWRlLCBkcm9wIGhvdGtleSBoaW50cyB0byBwcmVzZXJ2ZSBhbGwgdG9nZ2xlIGxhYmVsc1xuICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobGluZSkgPiBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgICBsaW5lID0gYnVpbGRMaW5lKGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZS50cmltKCkgPyBsaW5lIDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTaG9ydGN1dExpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBhZGRIb3RrZXkgPSAobGFiZWw6IHN0cmluZywgY29tYm8/OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmZvcm1hdEhvdGtleShjb21ibyk7XG4gICAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuaGFzKG5vcm1hbGl6ZWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUuaW5mbyhub3JtYWxpemVkKX0gJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9YCk7XG4gICAgfTtcblxuICAgIC8vIENvcmUgY29udHJvbHNcbiAgICBhZGRIb3RrZXkoJ2ludGVycnVwdCcsICdDdHJsK0MnKTtcbiAgICBhZGRIb3RrZXkoJ2NsZWFyIGlucHV0JywgJ0N0cmwrVScpO1xuXG4gICAgLy8gRmVhdHVyZSB0b2dnbGVzIChvbmx5IGlmIGhvdGtleXMgYXJlIGRlZmluZWQpXG4gICAgYWRkSG90a2V5KCd2ZXJpZnknLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSk7XG4gICAgYWRkSG90a2V5KCdhdXRvLWNvbnRpbnVlJywgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgndGhpbmtpbmcnLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ21vZGUnLCB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEhvdGtleSk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgICcpKTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBidWlsZElucHV0TGluZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYFtwYXN0ZWQgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzfSBsaW5lcywgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfSBjaGFyc10gKEVudGVyL0N0cmwrTCBpbnNlcnQsIEJhY2tzcGFjZSBkaXNjYXJkKWA7XG4gICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX0ke3RoZW1lLnVpLm11dGVkKHN1bW1hcnkpfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIHVzZXMgc2ltcGxlICc+JyBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSB0aGVtZS5wcmltYXJ5KCc+ICcpO1xuICAgIGNvbnN0IHByb21wdFdpZHRoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHByb21wdCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbkluZGVudCA9ICcgICc7IC8vIDIgc3BhY2VzIGZvciBjb250aW51YXRpb24gbGluZXNcbiAgICBjb25zdCBjb250aW51YXRpb25XaWR0aCA9IGNvbnRpbnVhdGlvbkluZGVudC5sZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCAtIHNwbGl0IGJ1ZmZlciBvbiBuZXdsaW5lcyBmaXJzdFxuICAgIC8vIEluIHNlY3JldCBtb2RlLCBtYXNrIGFsbCBjaGFyYWN0ZXJzIHdpdGggYnVsbGV0c1xuICAgIGNvbnN0IHJhd0J1ZmZlciA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuc2VjcmV0TW9kZSA/ICfigKInLnJlcGVhdChyYXdCdWZmZXIubGVuZ3RoKSA6IHJhd0J1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lcyA9IG5vcm1hbGl6ZWQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gV3JhcCBlYWNoIGxvZ2ljYWwgbGluZSB0byBmaXQgdGVybWluYWwgd2lkdGgsIGV4cGFuZGluZyB2ZXJ0aWNhbGx5XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0b3RhbENoYXJzID0gMDtcbiAgICBsZXQgY3Vyc29yTGluZSA9IDA7XG4gICAgbGV0IGN1cnNvckNvbCA9IDA7XG4gICAgbGV0IGZvdW5kQ3Vyc29yID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBidWZmZXJMaW5lcy5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyTGluZXNbbGluZUluZGV4XSA/PyAnJztcbiAgICAgIGNvbnN0IGlzRmlyc3RMb2dpY2FsTGluZSA9IGxpbmVJbmRleCA9PT0gMDtcbiAgICAgIGNvbnN0IGxpbmVTdGFydENoYXIgPSB0b3RhbENoYXJzO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgYXZhaWxhYmxlIHdpZHRoIGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZVdpZHRoID0gbWF4V2lkdGggLSBwcm9tcHRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRMaW5lV2lkdGggPSBtYXhXaWR0aCAtIGNvbnRpbnVhdGlvbldpZHRoO1xuXG4gICAgICAvLyBXcmFwIHRoaXMgbG9naWNhbCBsaW5lIGludG8gZGlzcGxheSBsaW5lc1xuICAgICAgbGV0IHJlbWFpbmluZyA9IGxpbmU7XG4gICAgICBsZXQgaXNGaXJzdERpc3BsYXlMaW5lID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwIHx8IGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IGZpcnN0TGluZVdpZHRoIDogY29udExpbmVXaWR0aDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSByZW1haW5pbmcuc2xpY2UoMCwgYXZhaWxhYmxlV2lkdGgpO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc2xpY2UoYXZhaWxhYmxlV2lkdGgpO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBkaXNwbGF5IGxpbmVcbiAgICAgICAgbGV0IGRpc3BsYXlMaW5lOiBzdHJpbmc7XG4gICAgICAgIGlmIChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtwcm9tcHR9JHtjaHVua31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7Y29udGludWF0aW9uSW5kZW50fSR7Y2h1bmt9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtTdGFydCA9IGxpbmVTdGFydENoYXIgKyAobGluZS5sZW5ndGggLSByZW1haW5pbmcubGVuZ3RoIC0gY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBjaHVua0VuZCA9IGNodW5rU3RhcnQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IGNodW5rU3RhcnQgJiYgdGhpcy5jdXJzb3IgPD0gY2h1bmtFbmQpIHtcbiAgICAgICAgICAgIGN1cnNvckxpbmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5DaHVuayA9IHRoaXMuY3Vyc29yIC0gY2h1bmtTdGFydDtcbiAgICAgICAgICAgIGN1cnNvckNvbCA9ICgoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBwcm9tcHRXaWR0aCA6IGNvbnRpbnVhdGlvbldpZHRoKSArIG9mZnNldEluQ2h1bms7XG4gICAgICAgICAgICBmb3VuZEN1cnNvciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnB1c2goZGlzcGxheUxpbmUpO1xuICAgICAgICBpc0ZpcnN0RGlzcGxheUxpbmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiBub3RoaW5nIGxlZnQgYW5kIHRoaXMgd2FzIGFuIGVtcHR5IGxpbmUsIHdlIGFscmVhZHkgYWRkZWQgaXRcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPT09IDAgJiYgY2h1bmsubGVuZ3RoID09PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxDaGFycyArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgbmV3bGluZSBzZXBhcmF0b3JcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY3Vyc29yIGF0IHZlcnkgZW5kXG4gICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgY3Vyc29yTGluZSA9IE1hdGgubWF4KDAsIHJlc3VsdC5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY3Vyc29yQ29sID0gdGhpcy52aXNpYmxlTGVuZ3RoKGxhc3RMaW5lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY3Vyc29yIGhpZ2hsaWdodCB0byB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRhcmdldExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjb25zdCB2aXNpYmxlUGFydCA9IHRoaXMuc3RyaXBBbnNpKHRhcmdldExpbmUpO1xuICAgICAgY29uc3QgY3Vyc29yUG9zID0gTWF0aC5taW4oY3Vyc29yQ29sLCB2aXNpYmxlUGFydC5sZW5ndGgpO1xuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaW5lIHdpdGggY3Vyc29yIGhpZ2hsaWdodFxuICAgICAgY29uc3QgYmVmb3JlID0gdmlzaWJsZVBhcnQuc2xpY2UoMCwgY3Vyc29yUG9zKTtcbiAgICAgIGNvbnN0IGF0ID0gdmlzaWJsZVBhcnQuY2hhckF0KGN1cnNvclBvcykgfHwgJyAnO1xuICAgICAgY29uc3QgYWZ0ZXIgPSB2aXNpYmxlUGFydC5zbGljZShjdXJzb3JQb3MgKyAxKTtcblxuICAgICAgLy8gUHJlc2VydmUgdGhlIHByb21wdC9pbmRlbnQgc3R5bGluZ1xuICAgICAgY29uc3QgcHJlZml4ID0gY3Vyc29yTGluZSA9PT0gMCA/IHByb21wdCA6IGNvbnRpbnVhdGlvbkluZGVudDtcbiAgICAgIGNvbnN0IHRleHRQYXJ0ID0gY3Vyc29yTGluZSA9PT0gMCA/IGJlZm9yZS5zbGljZShwcm9tcHRXaWR0aCkgOiBiZWZvcmUuc2xpY2UoY29udGludWF0aW9uV2lkdGgpO1xuICAgICAgcmVzdWx0W2N1cnNvckxpbmVdID0gYCR7cHJlZml4fSR7dGV4dFBhcnR9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YDtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJzb3IgY29sdW1uIGZvciB0ZXJtaW5hbCBwb3NpdGlvbmluZ1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGN1cnNvckNvbCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZElucHV0V2luZG93KGF2YWlsYWJsZTogbnVtYmVyKTogeyB0ZXh0OiBzdHJpbmc7IGN1cnNvcjogbnVtYmVyIH0ge1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3QgY3Vyc29ySW5kZXggPSBNYXRoLm1pbih0aGlzLmN1cnNvciwgbm9ybWFsaXplZC5sZW5ndGgpO1xuXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQ7XG4gICAgaWYgKGN1cnNvckluZGV4IDwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBjdXJzb3JJbmRleDtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBjdXJzb3JJbmRleCAtIG9mZnNldCAtIGF2YWlsYWJsZSArIDE7XG4gICAgaWYgKG92ZXJmbG93ID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IG92ZXJmbG93O1xuICAgIH1cbiAgICBjb25zdCBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBub3JtYWxpemVkLmxlbmd0aCAtIGF2YWlsYWJsZSk7XG4gICAgaWYgKG9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgIH1cbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgY29uc3Qgd2luZG93ID0gbm9ybWFsaXplZC5zbGljZShvZmZzZXQsIG9mZnNldCArIGF2YWlsYWJsZSk7XG4gICAgY29uc3QgZGlzcGxheSA9IHdpbmRvdy5zcGxpdCgnJykubWFwKGNoYXIgPT4gKGNoYXIgPT09ICdcXG4nID8gTkVXTElORV9QTEFDRUhPTERFUiA6IGNoYXIpKS5qb2luKCcnKTtcbiAgICBjb25zdCBjdXJzb3JJbldpbmRvdyA9IE1hdGgubWluKGRpc3BsYXkubGVuZ3RoLCBNYXRoLm1heCgwLCBjdXJzb3JJbmRleCAtIG9mZnNldCkpO1xuXG4gICAgY29uc3QgYmVmb3JlID0gZGlzcGxheS5zbGljZSgwLCBjdXJzb3JJbldpbmRvdyk7XG4gICAgY29uc3QgYXQgPSBkaXNwbGF5LmNoYXJBdChjdXJzb3JJbldpbmRvdykgfHwgJyAnO1xuICAgIGNvbnN0IGFmdGVyID0gZGlzcGxheS5zbGljZShjdXJzb3JJbldpbmRvdyArIDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGAke2JlZm9yZX0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gLFxuICAgICAgY3Vyc29yOiBjdXJzb3JJbldpbmRvdyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgaW50byB0aGUgYnVmZmVyIHdpdGhvdXQgc3VibWl0dGluZyAoQ3RybCtMKS5cbiAgICogQWxsb3dzIHVzZXIgdG8gZWRpdCB0aGUgcGFzdGVkIGNvbnRlbnQgYmVmb3JlIHN1Ym1pc3Npb24uXG4gICAqL1xuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbGxhcHNlZFBhc3RlKSByZXR1cm47XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAvLyBQdXQgdGhlIHBhc3RlZCBjb250ZW50IGludG8gdGhlIGJ1ZmZlciBmb3IgZWRpdGluZ1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICB0aGlzLmN1cnNvciA9IHRleHQubGVuZ3RoO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGNvbGxhcHNlZCBwYXN0ZSBhbmQgc3VibWl0IGltbWVkaWF0ZWx5IChFbnRlcikuXG4gICAqIFVzZWQgd2hlbiB1c2VyIHdhbnRzIHRvIHNlbmQgdGhlIHBhc3RlZCBjb250ZW50IGFzLWlzLlxuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIC8vIENsZWFyIHRoZSBidWZmZXIgZmlyc3QgdG8gYXZvaWQgYW55IHZpc3VhbCBkdXBsaWNhdGlvblxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgLy8gU3VibWl0IHRoZSBwYXN0ZSBjb250ZW50IChkaXNwbGF5VXNlclByb21wdCBpcyBjYWxsZWQgd2l0aGluIHN1Ym1pdFRleHQgZm9yIG5vbi1zbGFzaCBjb21tYW5kcylcbiAgICB0aGlzLnN1Ym1pdFRleHQodGV4dCk7XG4gIH1cblxuICBjYXB0dXJlSW5wdXQob3B0aW9uczogeyBhbGxvd0VtcHR5PzogYm9vbGVhbjsgdHJpbT86IGJvb2xlYW47IHJlc2V0QnVmZmVyPzogYm9vbGVhbiB9ID0ge30pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBhbHJlYWR5IGluIHByb2dyZXNzJykpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnJlc2V0QnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0ge1xuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB0cmltOiBvcHRpb25zLnRyaW0gIT09IGZhbHNlLFxuICAgICAgICAgIGFsbG93RW1wdHk6IG9wdGlvbnMuYWxsb3dFbXB0eSA/PyBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbElucHV0Q2FwdHVyZShyZWFzb24/OiB1bmtub3duKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYXB0dXJlID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgdGhpcy5pbnB1dENhcHR1cmUgPSBudWxsO1xuICAgIGNhcHR1cmUucmVqZWN0Py4ocmVhc29uID8/IG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gIH1cblxuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JhcE92ZXJsYXlMaW5lKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaW5kZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnNwbGl0KC8oXFxzKykvKTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBuZXh0ID0gY3VycmVudCArIHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKG5leHQpID4gd2lkdGggJiYgY3VycmVudC50cmltKCkpIHtcbiAgICAgICAgLy8gRG9uJ3QgdHJ1bmNhdGUgLSBqdXN0IHB1c2ggdGhlIGxpbmUgYXMtaXMgKGl0IGZpdHMgd2l0aGluIHdpZHRoKVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudCA9IGluZGVudCArIHdvcmQudHJpbVN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudC50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudC50cmltRW5kKCkpO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGxpbmVzIHdlcmUgcHJvZHVjZWQsIHJldHVybiB0aGUgb3JpZ2luYWwgdGV4dCB3aXRob3V0IHRydW5jYXRpb25cbiAgICByZXR1cm4gbGluZXMubGVuZ3RoID8gbGluZXMgOiBbdGV4dF07XG4gIH1cblxuICBwcml2YXRlIHNhZmVXaWR0aCgpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLm91dHB1dC5pc1RUWSA/IHRoaXMuY29scyB8fCA4MCA6IDgwO1xuICAgIHJldHVybiBNYXRoLm1heCgxLCBjb2xzIC0gMSk7XG4gIH1cblxuICBwcml2YXRlIHZpc2libGVMZW5ndGgodmFsdWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RyaXBBbnNpKHZhbHVlKS5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHN0cmlwQW5zaSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXFx1MDAxQlxcW1swLT9dKlsgLS9dKltALX5dL2csICcnKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJ1bmNhdGVMaW5lKHZhbHVlOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgubWF4KDEsIHdpZHRoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGNvbnN0IHRva2VucyA9IHZhbHVlLnNwbGl0KC8oXFx4MWJcXFtbMC05O10qbSkvdSk7XG4gICAgbGV0IHZpc2libGUgPSAwO1xuICAgIGxldCB0cnVuY2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgaWYgKCF0b2tlbikgY29udGludWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKC9eXFx4MWJcXFtbMC05O10qbSQvdS50ZXN0KHRva2VuKSkge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZpc2libGUgPj0gbGltaXQpIHtcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCByZW1haW5pbmcgPSBsaW1pdCAtIHZpc2libGU7XG4gICAgICBpZiAodG9rZW4ubGVuZ3RoIDw9IHJlbWFpbmluZykge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIHZpc2libGUgKz0gdG9rZW4ubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2xpY2VMZW5ndGggPSBNYXRoLm1heCgwLCByZW1haW5pbmcgLSAxKTtcbiAgICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlc3VsdCArPSB0b2tlbi5zbGljZSgwLCBzbGljZUxlbmd0aCk7XG4gICAgICAgICAgdmlzaWJsZSArPSBzbGljZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gJ+KApic7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0cnVuY2F0ZWQgJiYgIXJlc3VsdC5lbmRzV2l0aChFU0MuUkVTRVQpKSB7XG4gICAgICByZXN1bHQgKz0gRVNDLlJFU0VUO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBnZXRCdWZmZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXI7XG4gIH1cblxuICBnZXRDdXJzb3IoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJzb3I7XG4gIH1cblxuICBzZXRCdWZmZXIodGV4dDogc3RyaW5nLCBjdXJzb3JQb3M/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmJ1ZmZlciA9IHRleHQ7XG4gICAgLy8gVmFsaWRhdGUgY3Vyc29yIHBvc2l0aW9uIHRvIHByZXZlbnQgb3V0LW9mLWJvdW5kcyBpc3N1ZXNcbiAgICBjb25zdCByZXF1ZXN0ZWRDdXJzb3IgPSBjdXJzb3JQb3MgPz8gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyZXF1ZXN0ZWRDdXJzb3IsIHRleHQubGVuZ3RoKSk7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldFNlY3JldE1vZGUoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuc2VjcmV0TW9kZSA9IGVuYWJsZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGNsZWFyQnVmZmVyKCk6IHZvaWQge1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRNb2RlU3RhdHVzKHN0YXR1czogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKHN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhIGNvbXBhY3Rpbmcgc3RhdHVzIHdpdGggYW5pbWF0ZWQgc3Bpbm5lciAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFVzZXMg4py7IGNoYXJhY3RlciB3aXRoIGFuaW1hdGlvbiB0byBpbmRpY2F0ZSBjb250ZXh0IGNvbXBhY3Rpb24gaW4gcHJvZ3Jlc3NcbiAgICovXG4gIHNob3dDb21wYWN0aW5nU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3Bpbm5lckZyYW1lKys7XG4gICAgICAgIC8vIEN5Y2xlIGFjdGl2aXR5IHBocmFzZSBldmVyeSB+NCBzZWNvbmRzICg1MCBmcmFtZXMgYXQgODBtcylcbiAgICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgNTAgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5UGhyYXNlSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfSwgODApO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGNvbXBhY3Rpbmcgc3RhdHVzIGFuZCBzdG9wIHNwaW5uZXIgYW5pbWF0aW9uXG4gICAqL1xuICBoaWRlQ29tcGFjdGluZ1N0YXR1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBlbWl0UHJvbXB0KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucHVzaFByb21wdEV2ZW50KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdXNlciBwcm9tcHQgaW1tZWRpYXRlbHkgaW4gc2Nyb2xsYmFjayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFdyaXRlcyBzeW5jaHJvbm91c2x5IHRvIGVuc3VyZSBpdCBhcHBlYXJzIE9OQ0UgaW4gc2Nyb2xsYmFjayBiZWZvcmUgc3RhdHVzIHVwZGF0ZXMuXG4gICAqIFRoZSBwcm9tcHQgaW5wdXQgYXJlYSB3aWxsIHRoZW4gZmxvYXQgYmVsb3cgdGhpcyBhbmQgYWxsIHN1YnNlcXVlbnQgZXZlbnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwbGF5VXNlclByb21wdCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuXG4gICAgLy8gUHJldmVudCBkdXBsaWNhdGUgcHJvbXB0IGRpc3BsYXkgd2l0aGluIDEuNSBzZWNvbmRzXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0UHJvbXB0RXZlbnQgJiYgdGhpcy5sYXN0UHJvbXB0RXZlbnQudGV4dCA9PT0gbm9ybWFsaXplZCAmJiBub3cgLSB0aGlzLmxhc3RQcm9tcHRFdmVudC5hdCA8IDE1MDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcblxuICAgIC8vIEFkZCB0byBldmVudCBxdWV1ZSBpbnN0ZWFkIG9mIHdyaXRpbmcgZGlyZWN0bHkgdG8gZW5zdXJlIHByb3BlciByZW5kZXJpbmdcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIExvdy1sZXZlbCBoZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHB1c2hQcm9tcHRFdmVudCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclByb21wdEFyZWEoKTogdm9pZCB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5sYXN0T3ZlcmxheT8ubGluZXMubGVuZ3RoID8/IHRoaXMucHJvbXB0SGVpZ2h0ID8/IDA7XG4gICAgaWYgKGhlaWdodCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ3Vyc29yIGlzIGF0IHByb21wdCByb3cuIE1vdmUgdXAgdG8gdG9wIG9mIG92ZXJsYXkgZmlyc3QuXG4gICAgaWYgKHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5LnByb21wdEluZGV4O1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGF0IHRvcCwgY2xlYXIgZWFjaCBsaW5lIGRvd253YXJkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGlmIChpIDwgaGVpZ2h0IC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBiYWNrIHRvIHRvcCAod2hlcmUgY29udGVudCBzaG91bGQgY29udGludWUgZnJvbSlcbiAgICBpZiAoaGVpZ2h0ID4gMSkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtoZWlnaHQgLSAxfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZSgnXFxyJyk7XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IDA7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm91dHB1dC5yb3dzIHx8IDI0O1xuICAgICAgdGhpcy5jb2xzID0gdGhpcy5vdXRwdXQuY29sdW1ucyB8fCA4MDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0EsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sV0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sZUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsWUFBQSxHQUFBUixPQUFBO0FBRzBCLFNBQUFJLHVCQUFBSyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBQUEsU0FBQVYsd0JBQUFVLENBQUEsRUFBQUcsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFkLHVCQUFBLFlBQUFBLENBQUFVLENBQUEsRUFBQUcsQ0FBQSxTQUFBQSxDQUFBLElBQUFILENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLFNBQUFELENBQUEsTUFBQU8sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBUixPQUFBLEVBQUFGLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVMsQ0FBQSxNQUFBRixDQUFBLEdBQUFKLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFFLENB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