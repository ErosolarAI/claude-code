94fae979418fb081adce6bdf4d07ff7d
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
var _uiConstants = require("./uiConstants.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences and special formatting from text to get clean plaintext */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    let sanitized = text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
    // Also remove partial bracketed paste markers that may have leaked (e.g., "[200~" without ESC)
    sanitized = sanitized.replace(/\[20[01]~/g, '');
    // Remove any stray escape character at start/end
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/^\x1b+|\x1b+$/g, '');

    // Strip special formatting characters for clean plaintext:
    // - Zero-width characters (ZWSP, ZWNJ, ZWJ, BOM/ZWNBSP)
    // - Word joiner, invisible separator, invisible times/plus
    // - Directional formatting (LRM, RLM, LRE, RLE, LRO, RLO, PDF, LRI, RLI, FSI, PDI)
    // - Object replacement character
    // - Soft hyphen
    // - Non-breaking space variants (NBSP, narrow NBSP, figure space, etc.)
    sanitized = sanitized.replace(/[\u200B-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\u00AD\uFFFC]/g, '');

    // Normalize various space characters to regular space
    // Includes: NBSP, en/em space, thin space, hair space, figure space, etc.
    sanitized = sanitized.replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g, ' ');

    // Remove control characters except tab, newline, carriage return
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g, '');
    return sanitized;
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  lastOverlayRendered = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }

    // Reset input and paste state to prevent stale state from previous session
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.collapsedPaste = null;
    this.pendingInsertBuffer = '';
    this.cancelPlainPasteCapture();
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      // Consume and sanitize pending buffer to prevent partial escape sequences leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      // Extract content after the start marker (discard any content before it - likely partial escapes)
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume and sanitize any pending insert buffer to prevent partial escapes leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      this.pasteBuffer = pending;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  captureCollapsedPaste(content, lineCount, wasTruncated) {
    const charDisplay = wasTruncated ? `${content.length}+` : `${content.length}`;
    this.collapsedPaste = {
      text: content,
      lines: lineCount,
      charDisplay,
      truncated: wasTruncated
    };
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.emitInputChange();
    const hint = `Paste captured: ${lineCount} line${lineCount === 1 ? '' : 's'}${wasTruncated ? ' (truncated)' : ''}. Enter to send, Ctrl+L to edit, Backspace to discard.`;
    this.updateStatusBundle({
      main: hint
    });
    this.renderPrompt();
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lineCount = content.split('\n').length;
      const wasTruncated = this.pasteBufferOverflow;
      if (lineCount > 1 || content.length > 200) {
        this.captureCollapsedPaste(content, lineCount, wasTruncated);
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }

    // Don't treat escape sequences (arrow keys, etc.) as paste
    // Escape sequences start with \x1b (ESC) and are used for cursor movement, etc.
    if (typeof str === 'string' && str.startsWith('\x1b')) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lineCount = content.split('\n').length;
    if (lineCount > 1 || content.length > 200) {
      this.captureCollapsedPaste(content, lineCount, wasTruncated);
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Sanitize input to remove special formatting characters
    const sanitized = this.sanitizePasteContent(text);
    if (!sanitized) return;
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + sanitized + this.buffer.slice(this.cursor);
    this.cursor += sanitized.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // Note: For prompt events, the overlay is already rendered in renderEvent()
        // via renderPromptOverlay(true). No need to render again here.
        if (event.type === 'prompt') {
          // Ensure prompt rendering is allowed for subsequent events
          if (this.output.isTTY) {
            this.allowPromptRender = true;
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        {
          // Streaming content is the model's response - pass through directly
          // IMPORTANT: Don't filter streaming chunks with isGarbageOutput because:
          // 1. Chunks arrive character-by-character or in small pieces
          // 2. Small chunks like "." or ":" are valid parts of sentences
          // 3. Filtering would break the streaming display
          // Only filter completely empty content
          if (!event.content) {
            return '';
          }
          return event.content;
        }
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;
    const trimmed = content.trim();

    // Very short content checks - catch leaked punctuation fragments like "." or ":"
    if (trimmed.length <= 3) {
      // Single punctuation marks or very short punctuation sequences are garbage
      if (/^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$]+$/.test(trimmed)) {
        return true;
      }
    }

    // Check if content is just punctuation on multiple lines (leaked reasoning)
    const lines = content.split('\n');
    const punctOnlyLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      return lineTrimmed.length > 0 && /^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$\s]+$/.test(lineTrimmed);
    });
    // If ALL non-empty lines are just punctuation, it's garbage
    const nonEmptyLines = lines.filter(l => l.trim().length > 0);
    if (nonEmptyLines.length > 0 && punctOnlyLines.length === nonEmptyLines.length) {
      return true;
    }

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: mostly punctuation/symbols - leaked reasoning fragments
    const meaningfulLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      if (!lineTrimmed) return false;
      // Line must have at least 30% alphanumeric content
      const alphaNum = (lineTrimmed.match(/[a-zA-Z0-9]/g) || []).length;
      return lineTrimmed.length > 0 && alphaNum / lineTrimmed.length >= 0.3;
    });
    // If less than 30% of lines are meaningful, it's garbage
    if (lines.length > 3 && meaningfulLines.length / lines.length < 0.3) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.4) {
      return true; // Less than 40% letters = likely garbage
    }
    return false;
  }

  /**
   * Sanitize tool result content to remove leaked reasoning/thinking output.
   * This filters out fragments that look like internal model output.
   */
  sanitizeToolResultContent(content) {
    if (!content) return '';

    // Split into lines and filter out garbage lines
    const lines = content.split('\n');
    const cleanLines = [];
    for (const line of lines) {
      const trimmed = line.trim();

      // Skip empty lines at start
      if (cleanLines.length === 0 && !trimmed) continue;

      // Skip lines that look like leaked reasoning fragments
      // Common patterns: single punctuation, markdown artifacts, emoji fragments
      if (/^[)\]}>*`'"]+$/.test(trimmed)) continue;
      if (/^[*_]{2,}$/.test(trimmed)) continue; // Just ** or __
      if (/^[|│┃]+$/.test(trimmed)) continue; // Just vertical bars
      if (/^[─━═]+$/.test(trimmed)) continue; // Just horizontal lines
      if (/^\.{2,}$/.test(trimmed)) continue; // Just dots
      if (/^[\s️]+$/.test(trimmed)) continue; // Just whitespace/emoji modifiers
      if (/^[:\s]+$/.test(trimmed)) continue; // Just colons/whitespace
      if (/^[,\s]+$/.test(trimmed)) continue; // Just commas/whitespace

      // Skip markdown bold/italic fragments that leaked
      if (/^\*{1,2}[^*]*\*{0,2}$/.test(trimmed) && trimmed.length < 10 && !/\w{3,}/.test(trimmed)) continue;

      // Skip lines that are just short fragments with high punctuation ratio
      const alphaInLine = (trimmed.match(/[a-zA-Z0-9]/g) || []).length;
      if (trimmed.length > 0 && trimmed.length < 20 && alphaInLine / trimmed.length < 0.3) continue;

      // Skip very short lines that are just punctuation or single chars (except numbers)
      if (trimmed.length <= 2 && !/^\d+$/.test(trimmed) && !/^[a-zA-Z]{2}$/.test(trimmed)) {
        // Allow specific short patterns like "OK", "0", "1" etc.
        if (!/^(?:ok|no|yes|\d+)$/i.test(trimmed)) continue;
      }

      // Skip lines that look like stray parentheses or brackets from reasoning
      if (/^[()[\]{}]+$/.test(trimmed)) continue;

      // Skip lines that look like markdown code fence artifacts
      if (/^```\s*$/.test(trimmed)) continue;
      cleanLines.push(line);
    }

    // Trim trailing empty lines
    while (cleanLines.length > 0 && !cleanLines[cleanLines.length - 1]?.trim()) {
      cleanLines.pop();
    }
    return cleanLines.join('\n').trim();
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.tool(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.tool(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "⏺ [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // Get tool-specific color (bash=orange, read=cyan, write=green, etc.)
    const toolColor = (0, _theme.getToolColor)(toolName);
    const coloredToolName = toolColor(`[${toolName}]`);

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${coloredToolName}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${coloredToolName} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParamsColored(toolName, params, maxWidth, toolColor);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping (default green color)
   */
  formatToolParams(toolName, params, maxWidth) {
    return this.formatToolParamsColored(toolName, params, maxWidth, _theme.theme.tool);
  }

  /**
   * Format tool params with custom tool color
   */
  formatToolParamsColored(toolName, params, maxWidth, toolColor) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${toolColor(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.tool(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Sanitize content first - filter out garbage/reasoning output that leaked through
    const sanitized = this.sanitizeToolResultContent(content);
    if (!sanitized || this.isGarbageOutput(sanitized)) {
      return ''; // Don't render garbage tool results
    }

    // Parse common result patterns for summary
    const lineMatch = sanitized.match(/(\d+)\s*lines?/i);
    const fileMatch = sanitized.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = sanitized.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(sanitized);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(sanitized);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(sanitized);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (sanitized.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = sanitized.split('\n')[0] || sanitized;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Extract meaningful summary from content
      let summaryText = sanitized;

      // Handle "Summary:" prefix from web search/extract results
      const summaryMatch = sanitized.match(/^Summary:\s*(.+)/i);
      if (summaryMatch) {
        summaryText = summaryMatch[1];
      }

      // For multi-line content, use first meaningful line
      const firstLine = summaryText.split('\n')[0]?.trim() || summaryText;

      // Try to end at a sentence boundary for readability (up to 120 chars)
      const maxLen = 120;
      if (firstLine.length > maxLen) {
        // Look for sentence end within limit
        const sentenceEnd = firstLine.slice(0, maxLen).search(/[.!?;]\s|[.!?;]$/);
        if (sentenceEnd > 30) {
          summary = firstLine.slice(0, sentenceEnd + 1);
        } else {
          // No good sentence break, truncate at word boundary
          const truncated = firstLine.slice(0, maxLen);
          const lastSpace = truncated.lastIndexOf(' ');
          summary = lastSpace > 60 ? truncated.slice(0, lastSpace) + '…' : truncated + '…';
        }
      } else {
        summary = firstLine;
      }
    }

    // Store collapsed result for Ctrl+O expansion (use sanitized content)
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content: sanitized,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = sanitized.includes('\n') || summary.endsWith('…') || !preserveFull && sanitized.length > summary.length;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.secondary ?? _theme.theme.ui.muted // Purple for thinking (distinct from blue tools)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Determine if this is structured output that shouldn't be word-wrapped
    const isStructured = this.isStructuredToolOutput(toolName, content);
    let rendered;
    if (isStructured) {
      // Preserve structured output (grep, bash, code output) - just indent, don't wrap
      rendered = this.formatStructuredToolOutput(toolName, content);
    } else {
      // Format prose/text with tool name label and word wrapping
      const label = `${toolName}`;
      rendered = this.wrapBulletText(content, {
        label,
        labelColor: _theme.theme.info
      });
    }
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Check if tool output is structured (code, grep, file listings) that shouldn't be word-wrapped.
   */
  isStructuredToolOutput(toolName, content) {
    const tool = toolName.toLowerCase();
    // Tools that produce structured output
    if (['bash', 'grep', 'read', 'glob', 'execute_bash', 'search', 'find'].includes(tool)) {
      return true;
    }
    // Content patterns that indicate structured output
    // - File paths with colons (grep output): src/file.ts:123:
    // - Line numbers: "   1→" or "  42:"
    // - Code-like patterns
    if (/^\s*[\w./]+:\d+[:\s]/.test(content)) return true; // grep-style output
    if (/^\s*\d+[→:│|]\s/.test(content)) return true; // line-numbered output
    if (/^[│├└─┌┐┘┬┴┼╭╮╯╰]+/.test(content)) return true; // box drawing
    if (/^\s*[$>]\s+\w+/.test(content)) return true; // command prompt output
    return false;
  }

  /**
   * Format structured tool output preserving line structure.
   */
  formatStructuredToolOutput(toolName, content) {
    const lines = content.split('\n');
    const header = `⏺ ${_theme.theme.info(toolName)}${_theme.theme.ui.muted(' · expanded')}\n`;
    const indent = '  ';
    const maxWidth = this.safeWidth() - 4;
    const formattedLines = lines.map(line => {
      // Truncate overly long lines instead of wrapping (preserves structure)
      if (line.length > maxWidth) {
        return indent + line.slice(0, maxWidth - 1) + '…';
      }
      return indent + line;
    });
    return header + formattedLines.join('\n') + '\n';
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 120); // ~8 FPS - reduced from 80ms to minimize flickering while keeping animation smooth
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    const overlayUnchanged = this.lastOverlayRendered && this.arraysEqual(this.lastOverlayRendered.lines, renderedLines) && this.lastOverlayRendered.promptIndex === promptIndex && this.lastOverlayRendered.promptCol === promptCol;

    // Fast path: overlay unchanged, avoid clearing/repainting to prevent flicker
    if (overlayUnchanged) {
      const buffer = [];
      buffer.push('\x1b[?25l');
      const linesToMoveUp = height - 1 - promptIndex;
      if (linesToMoveUp > 0) {
        buffer.push(`\x1b[${linesToMoveUp}A`);
      }
      buffer.push(`\x1b[${promptCol}G`);
      buffer.push('\x1b[?25h');
      this.write(buffer.join(''));
      this.isPromptActive = true;
      this.promptHeight = height;
      this.lastOverlayHeight = height;
      this.cursorVisibleColumn = promptCol;
      return;
    }

    // Batch all ANSI operations into a single write to prevent flickering
    // This eliminates the visual jitter caused by multiple sequential terminal writes
    const buffer = [];

    // Hide cursor during render to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }

      // Clear exactly the old overlay lines, then erase to end of screen
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        buffer.push('\r');
        buffer.push(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          buffer.push('\x1b[B');
        }
      }

      // Clear anything below the old overlay (handles edge cases)
      buffer.push('\x1b[J');

      // After clearing, cursor is at last cleared line
      // Move back up to the top where new overlay should start
      const moveBackUp = this.lastOverlayHeight - 1;
      if (moveBackUp > 0) {
        buffer.push(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      buffer.push(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        buffer.push('\n');
      }
    }

    // If old overlay was taller, clear any remaining stale lines below
    // and use CSI J (erase from cursor to end of screen) to clean up
    if (this.lastOverlayHeight > height) {
      buffer.push('\n'); // Move to line below last content
      buffer.push('\x1b[J'); // Clear from cursor to end of screen
      buffer.push('\x1b[A'); // Move back up to last content line
    }

    // Position cursor at prompt input line
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      buffer.push(`\x1b[${linesToMoveUp}A`);
    }
    buffer.push(`\x1b[${promptCol}G`);

    // Show cursor again after positioning
    buffer.push('\x1b[?25h');

    // Single atomic write to prevent flickering
    this.write(buffer.join(''));
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOverlayRendered = {
      lines: renderedLines,
      promptIndex,
      promptCol
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    // Filter out empty lines to prevent duplicate divider appearance from leading/trailing newlines
    const inputLines = inputLine.split('\n').filter((line, idx, arr) => {
      // Keep non-empty lines, but preserve single empty line if it's intentional (e.g., between content)
      // Only filter leading/trailing empty lines
      if (line.trim() === '') {
        // Filter if it's the first line (leading empty) or last line (trailing empty)
        if (idx === 0 || idx === arr.length - 1) return false;
      }
      return true;
    });
    // Ensure at least one line for the prompt
    if (inputLines.length === 0) {
      inputLines.push(_theme.theme.primary('> '));
    }
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('🏆') : leader === 'refiner' ? _theme.theme.warning('🏆') : '⚖️';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` 🔥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('█'.repeat(pBars)) + _theme.theme.ui.muted('░'.repeat(tBars)) + _theme.theme.warning('█'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('⚡P')} ${_theme.theme.ui.muted('∥')} ${_theme.theme.warning('⚡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? '▶' : '▷';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('✓P') : _theme.theme.warning('✓R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('≈'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }

    // Human accuracy indicator (relative ranking quality)
    if (rl.accuracy && (typeof rl.accuracy.primary === 'number' || typeof rl.accuracy.refiner === 'number')) {
      const pAcc = rl.accuracy.primary !== undefined ? Math.round(rl.accuracy.primary * 100) : null;
      const rAcc = rl.accuracy.refiner !== undefined ? Math.round(rl.accuracy.refiner * 100) : null;
      const pDisplay = pAcc !== null ? _theme.theme.info(`P${pAcc}%`) : null;
      const rDisplay = rAcc !== null ? _theme.theme.warning(`R${rAcc}%`) : null;
      const parts = [pDisplay, rDisplay].filter(Boolean).join(_theme.theme.ui.muted('|'));
      if (parts) {
        segments.push(parts);
      }
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  arraysEqual(a, b) {
    if (a.length !== b.length) return false;
    for (let i = 0; i < a.length; i++) {
      if (a[i] !== b[i]) return false;
    }
    return true;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.charDisplay} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately (Enter).
   * Used when user wants to send the pasted content as-is.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;

    // Prevent duplicate prompt display within 1.5 seconds
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl9kZWJ1Z0xvZ2dlciIsIl91aUNvbnN0YW50cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkVG9vbFJlc3VsdHMiLCJtYXhDb2xsYXBzZWRSZXN1bHRzIiwibGFzdFRvb2xOYW1lIiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJlbGFwc2VkQ29sb3JGcmFtZSIsImVsYXBzZWRDb2xvckZyYW1lcyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJybFN0YXR1cyIsImNsYW1wQ3Vyc29yIiwiTWF0aCIsIm1heCIsIm1pbiIsImxlbmd0aCIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJ0ZXh0IiwicGFzdGVCdWZmZXJPdmVyZmxvdyIsImN1cnJlbnQiLCJwYXN0ZUJ1ZmZlciIsInBsYWluUGFzdGVCdWZmZXIiLCJyZW1haW5pbmciLCJtYXhQYXN0ZUJ1ZmZlclNpemUiLCJ0b0FkZCIsInNsaWNlIiwic2FuaXRpemVQYXN0ZUNvbnRlbnQiLCJzYW5pdGl6ZWQiLCJyZXBsYWNlIiwiZm9ybWF0SG90a2V5IiwiY29tYm8iLCJ0cmltIiwidG9VcHBlckNhc2UiLCJsYXN0UHJvbXB0RXZlbnQiLCJwcm9tcHRIZWlnaHQiLCJsYXN0T3ZlcmxheUhlaWdodCIsImlubGluZVBhbmVsIiwiaGFzQ29udmVyc2F0aW9uQ29udGVudCIsImlzUHJvbXB0QWN0aXZlIiwiaW5wdXRSZW5kZXJPZmZzZXQiLCJwbGFpblBhc3RlSWRsZU1zIiwicGxhaW5QYXN0ZVdpbmRvd01zIiwicGxhaW5QYXN0ZVRyaWdnZXJDaGFycyIsInBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyIsImN1cnNvclZpc2libGVDb2x1bW4iLCJpbkJyYWNrZXRlZFBhc3RlIiwiaW5QbGFpblBhc3RlIiwicGxhaW5QYXN0ZVRpbWVyIiwicGFzdGVCdXJzdFdpbmRvd1N0YXJ0IiwicGFzdGVCdXJzdENoYXJDb3VudCIsInBsYWluUmVjZW50Q2h1bmtzIiwicGVuZGluZ0luc2VydEJ1ZmZlciIsInBlbmRpbmdJbnNlcnRUaW1lciIsInBlbmRpbmdJbnNlcnREZWxheU1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwibGFzdE92ZXJsYXlSZW5kZXJlZCIsImFsbG93UHJvbXB0UmVuZGVyIiwicHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkIiwic2VjcmV0TW9kZSIsInBlbmRpbmdSZW5kZXIiLCJsYXN0UmVuZGVyVGltZSIsInJlbmRlclRocm90dGxlTXMiLCJyZW5kZXJUaHJvdHRsZVRpbWVyIiwiZGlzcG9zZWQiLCJib3VuZFJlc2l6ZUhhbmRsZXIiLCJib3VuZEtleXByZXNzSGFuZGxlciIsImlucHV0Q2FwdHVyZSIsImNvbnN0cnVjdG9yIiwib3V0cHV0IiwicHJvY2VzcyIsInN0ZG91dCIsImlucHV0Iiwic3RkaW4iLCJfb3B0aW9ucyIsImludGVyYWN0aXZlIiwiQm9vbGVhbiIsImlzVFRZIiwiZW52IiwicGxhaW5Nb2RlIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJjb250ZXh0TWV0ZXIiLCJDb250ZXh0TWV0ZXIiLCJybCIsImNyZWF0ZUludGVyZmFjZSIsInRlcm1pbmFsIiwicHJvbXB0IiwidGFiU2l6ZSIsInNldFByb21wdCIsInVwZGF0ZVRlcm1pbmFsU2l6ZSIsInJlbmRlclByb21wdCIsIm9uIiwic2V0dXBJbnB1dEhhbmRsZXJzIiwiaW5pdGlhbGl6ZSIsImNhbmNlbFBsYWluUGFzdGVDYXB0dXJlIiwiY2xlYXJQcm9tcHRBcmVhIiwid3JpdGUiLCJjbGVhbnVwIiwiY2FuY2VsSW5wdXRDYXB0dXJlIiwiRXJyb3IiLCJjbGVhclRpbWVvdXQiLCJjbGVhckludGVydmFsIiwic3RvcCIsImRpc3Bvc2UiLCJkaXNwb3NlQW5pbWF0aW9ucyIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2xvc2UiLCJzZXRSYXdNb2RlIiwic3VzcGVuZFByb21wdFJlbmRlcmluZyIsInJlc3VtZVByb21wdFJlbmRlcmluZyIsInJlbmRlciIsImVtaXRLZXlwcmVzc0V2ZW50cyIsInN0ciIsImtleSIsImhhbmRsZUtleXByZXNzIiwiZW1pdElucHV0Q2hhbmdlIiwicGF5bG9hZCIsImVtaXQiLCJub3JtYWxpemVkS2V5IiwicGFyc2VFc2NhcGVTZXF1ZW5jZSIsImtleUZvclBhc3RlIiwic2VxdWVuY2UiLCJoYW5kbGVCcmFja2V0ZWRQYXN0ZSIsImhhbmRsZVBsYWluUGFzdGUiLCJtYWNPcHRpb25DaGFycyIsImxldHRlciIsImN0cmwiLCJuYW1lIiwiY2xlYXJCdWZmZXIiLCJpc0N0cmxTaGlmdCIsImxvd2VyTGV0dGVyIiwidG9Mb3dlckNhc2UiLCJ1cHBlckxldHRlciIsInNoaWZ0IiwibWV0YSIsInNlcSIsInRlc3QiLCJoYW5kbGVDdHJsU2hpZnRUb2dnbGUiLCJoYWRCdWZmZXIiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyIiwiY2xlYXJDb2xsYXBzZWRSZXN1bHRzIiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsInBvcyIsInVwZGF0ZVN1Z2dlc3Rpb25zIiwiZXhwYW5kQ29sbGFwc2VkUGFzdGUiLCJhcHBseVN1Z2dlc3Rpb24iLCJzdGFydHNXaXRoIiwic2FmZUluZGV4IiwiY29tbWFuZCIsInN1Ym1pdFRleHQiLCJuYXZpZ2F0ZVN1Z2dlc3Rpb25zIiwicXVldWVQZW5kaW5nSW5zZXJ0IiwibWF4V2lkdGgiLCJzYWZlV2lkdGgiLCJtYXAiLCJzZXRUaW1lb3V0IiwiY29tbWl0UGVuZGluZ0luc2VydCIsImluc2VydFRleHQiLCJjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlIiwiY29uc3VtZWQiLCJwYXN0ZVN0YXJ0TWFya2VyIiwicGFzdGVFbmRNYXJrZXIiLCJpbmNsdWRlcyIsInBlbmRpbmciLCJzdGFydElkeCIsImluZGV4T2YiLCJjb250ZW50IiwiZW5kSWR4IiwiY29tbWl0UGFzdGVCdWZmZXIiLCJjb250ZW50QmVmb3JlIiwiY2FwdHVyZUNvbGxhcHNlZFBhc3RlIiwibGluZUNvdW50Iiwid2FzVHJ1bmNhdGVkIiwiY2hhckRpc3BsYXkiLCJsaW5lcyIsInRydW5jYXRlZCIsImhpbnQiLCJ1cGRhdGVTdGF0dXNCdW5kbGUiLCJtYWluIiwic3BsaXQiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJzaG91bGRUcmltIiwib3B0aW9ucyIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsInJlc29sdmUiLCJub3JtYWxpemVkIiwiZGlzcGxheVVzZXJQcm9tcHQiLCJmaXJzdFNwYWNlIiwiaGFzQXJnVGV4dCIsImN1cnNvclNsaWNlIiwiY29tbWFuZFNsaWNlIiwiZmFsbGJhY2tTbGljZSIsInBhcnRpYWwiLCJ0cmltRW5kIiwicHJldmlvdXMiLCJjbWQiLCJpZHgiLCJmaW5kSW5kZXgiLCJzIiwic2V0QXZhaWxhYmxlQ29tbWFuZHMiLCJjb21tYW5kcyIsInN1Ym1pdCIsInNlbGVjdGVkIiwiZGlyZWN0aW9uIiwiY3VycmVudEluZGV4IiwibmV4dCIsImNsYW1wZWQiLCJhZGRFdmVudCIsInR5cGUiLCJsb2dEZWJ1ZyIsIm5vcm1hbGl6ZUV2ZW50VHlwZSIsImZvcm1hdHRlZCIsImZvcm1hdENvbnRlbnQiLCJyYXdUeXBlIiwidGltZXN0YW1wIiwiZXZlbnQiLCJpbnNlcnRJbmRleCIsInNwbGljZSIsInF1ZXVlTWljcm90YXNrIiwicHJvY2Vzc1F1ZXVlIiwicmVuZGVyUHJvbXB0T3ZlcmxheSIsImltbWVkaWF0ZSIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNvYWxlc2NlZCIsImNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzIiwicmVuZGVyRXZlbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZWxheSIsImlzTWVyZ2VhYmxlIiwidGFyZ2V0IiwiaXNDb21wYWN0ZWQiLCJuZWVkc1NlcGFyYXRvciIsImZsdXNoRXZlbnRzIiwidGltZW91dE1zIiwic3RhcnQiLCJmb3JtYXR0ZWRQbGFpbiIsInNpZ25hdHVyZSIsImxpbmUiLCJ0aGVtZSIsInByaW1hcnkiLCJpc0dhcmJhZ2VPdXRwdXQiLCJjdXJhdGVkIiwiY3VyYXRlUmVhc29uaW5nQ29udGVudCIsInNob3VsZFJlbmRlclRob3VnaHQiLCJmb3JtYXRUaGlua2luZ0Jsb2NrIiwiZm9ybWF0Q29tcGFjdFRvb2xDYWxsIiwiZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQiLCJ3cmFwQnVsbGV0VGV4dCIsImxhYmVsIiwibGFiZWxDb2xvciIsIndhcm5pbmciLCJpbmZvIiwiaXNFcnJvciIsInVuZGVmaW5lZCIsInRyaW1tZWQiLCJwdW5jdE9ubHlMaW5lcyIsImxpbmVUcmltbWVkIiwibm9uRW1wdHlMaW5lcyIsImwiLCJtZWFuaW5nZnVsTGluZXMiLCJhbHBoYU51bSIsIm1hdGNoIiwiYWxwaGFDb3VudCIsInRvdGFsQ291bnQiLCJzYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50IiwiY2xlYW5MaW5lcyIsImFscGhhSW5MaW5lIiwicG9wIiwibGltaXRlZCIsIm1heFNlZ21lbnRzIiwic2VnbWVudHMiLCJmbGF0TWFwIiwic2VlbiIsImRlZHVwZWQiLCJzZWdtZW50Iiwibm9ybWFsaXplZFNlZ21lbnQiLCJhZGQiLCJwcmlvcml0aXplZCIsInByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyIsImxpbWl0ZWRTZWxlY3Rpb24iLCJidWxsZXRlZCIsImVuc3VyZVJlYXNvbmluZ0J1bGxldCIsImxvb2tzU3RydWN0dXJlZFRob3VnaHQiLCJzY29yZWQiLCJpbmRleCIsInNjb3JlIiwicmVhc29uaW5nU2lnbmFsU2NvcmUiLCJoYXNTaWduYWwiLCJpdGVtIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJhY3Rpb25LZXl3b3JkcyIsImtleXdvcmQiLCJmb3JtYXRDbGF1ZGVDb2RlQmxvY2siLCJidWxsZXQiLCJyZXN1bHQiLCJsaW5lSWR4Iiwid29yZHMiLCJjdXJyZW50TGluZSIsIndvcmQiLCJwcmVmaXgiLCJ0cmltU3RhcnQiLCJmb3JtYXRUb29sQ2FsbCIsIm5hbWVNYXRjaCIsInRvb2wiLCJ0b29sTmFtZSIsImFyZ3NTdHIiLCJwcmVmaXhMZW4iLCJpbmRlbnQiLCJyZXBlYXQiLCJhcmdzIiwicGFyc2VUb29sQXJncyIsImFyZyIsImFyZ1RleHQiLCJ1aSIsIm11dGVkIiwiZm9ybWF0QXJnVmFsdWUiLCJ2YWx1ZSIsInNlcGFyYXRvciIsInRlc3RMaW5lIiwic3RyaXBBbnNpIiwicmVnZXgiLCJleGVjIiwiaXNRdW90ZWQiLCJpbm5lciIsImxvd2VyS2V5Iiwic2hvdWxkUHJlc2VydmUiLCJtYXhMZW4iLCJmb3JtYXRUb29sUmVzdWx0Iiwic3VtbWFyeU1hdGNoIiwicHJldmlldyIsInRvb2xDb2xvciIsImdldFRvb2xDb2xvciIsImNvbG9yZWRUb29sTmFtZSIsInBhcmFtcyIsInBhcnNlVG9vbFBhcmFtcyIsImZvcm1hdFRvb2xQYXJhbXNDb2xvcmVkIiwiZm9ybWF0VG9vbFBhcmFtcyIsImZpcnN0UGFyYW0iLCJwYXJhbSIsImNvbG9yZWRWYWx1ZSIsImNvbG9yUGFyYW1WYWx1ZSIsInBhcmFtVGV4dCIsInBhcmFtU3RyIiwicGxhaW5MZW5ndGgiLCJ2aXNpYmxlTGVuZ3RoIiwiZXh0cmFjdFRvb2xTdW1tYXJ5IiwicGF0aE1hdGNoIiwicGF0aCIsImZpbGUiLCJjbWRNYXRjaCIsImxpbmVNYXRjaCIsImZpbGVNYXRjaCIsInJlYWRNYXRjaCIsImhhc1BhdGgiLCJoYXNDb21tYW5kIiwiaXNQYXRoT3JEaXIiLCJzdW1tYXJ5IiwicHJlc2VydmVGdWxsIiwiZmlyc3RMaW5lIiwic3VtbWFyeVRleHQiLCJzZW50ZW5jZUVuZCIsInNlYXJjaCIsImxhc3RTcGFjZSIsImxhc3RJbmRleE9mIiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJoYXNNb3JlQ29udGVudCIsImV4cGFuZEhpbnQiLCJzdWNjZXNzIiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwiZmlyc3ROb25FbXB0eSIsInJhd0xpbmUiLCJjYW5kaWRhdGUiLCJwcmVmaXhMZW5ndGgiLCJzZWNvbmRhcnkiLCJ3cmFwVGV4dFRvV2lkdGgiLCJ3aWR0aCIsImZvcm1hdFN0cmVhbWluZ0VsYXBzZWQiLCJlbGFwc2VkIiwiZmxvb3IiLCJtaW5zIiwic2VjcyIsImZvcm1hdENvbXBhY3RCbG9jayIsInBhZGRpbmciLCJsZWZ0UGFkIiwicmlnaHRQYWQiLCJjZWlsIiwiYWRkQ29tcGFjdEJsb2NrIiwiZm9ybWF0dGVkQ29udGVudCIsImV4cGFuZExhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkIiwiaXNTdHJ1Y3R1cmVkIiwiaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsInJlbmRlcmVkIiwiZm9ybWF0U3RydWN0dXJlZFRvb2xPdXRwdXQiLCJoZWFkZXIiLCJmb3JtYXR0ZWRMaW5lcyIsImdldENvbGxhcHNlZFJlc3VsdENvdW50Iiwic2V0TW9kZSIsIndhc1N0cmVhbWluZyIsInN0YXJ0U3Bpbm5lckFuaW1hdGlvbiIsInN0b3BTcGlubmVyQW5pbWF0aW9uIiwic2V0SW50ZXJ2YWwiLCJzcGlubmVyRnJhbWVzIiwiYnJhaWxsZSIsInNldEFjdGl2aXR5IiwidXBkYXRlU3RyZWFtaW5nVG9rZW5zIiwidG9rZW5zIiwiZm9ybWF0VG9rZW5Db3VudCIsIlN0cmluZyIsInRvRml4ZWQiLCJyb3VuZCIsImdldE1vZGUiLCJ1cGRhdGVTdGF0dXMiLCJvdmVycmlkZSIsInN0cmVhbWluZyIsInN0YXR1cyIsInByZXZTdHJlYW1pbmciLCJjaGFuZ2VkIiwibWFpbkNoYW5nZWQiLCJvdmVycmlkZUNoYW5nZWQiLCJzdHJlYW1pbmdDaGFuZ2VkIiwic3RyZWFtaW5nSW50cm9kdWNlIiwic3RyZWFtaW5nQ2xlYXJlZCIsIm9ubHlTdHJlYW1pbmdDaGFuZ2VkIiwic2tpcFN0cmVhbWluZ1JlbmRlciIsInNob3VsZFJlbmRlciIsInVwZGF0ZVN0YXR1c01ldGEiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlTW9kZVRvZ2dsZXMiLCJzdGF0ZSIsInZlcmlmaWNhdGlvbkhvdGtleSIsInRoaW5raW5nSG90a2V5IiwiY3JpdGljYWxBcHByb3ZhbEhvdGtleSIsImF1dG9Db250aW51ZUhvdGtleSIsImR1YWxSbEhvdGtleSIsImRlYnVnSG90a2V5IiwiY2xlYXIiLCJ1cGRhdGVSTFN0YXR1cyIsImNsZWFyUkxTdGF0dXMiLCJnZXRSTFN0YXR1cyIsInNldElubGluZVBhbmVsIiwiaGFzQ29udGVudCIsImxpbWl0SW5saW5lUGFuZWwiLCJzdXBwb3J0c0lubGluZVBhbmVsIiwiY2xlYXJJbmxpbmVQYW5lbCIsIm1heExpbmVzIiwib3ZlcmZsb3ciLCJpbmRpY2F0b3IiLCJ0YWlsQ291bnQiLCJ0YWlsIiwib3ZlcmxheSIsImJ1aWxkT3ZlcmxheUxpbmVzIiwicmVuZGVyZWRMaW5lcyIsInRydW5jYXRlTGluZSIsInByb21wdEluZGV4IiwiaGVpZ2h0IiwicHJvbXB0Q29sIiwib3ZlcmxheVVuY2hhbmdlZCIsImFycmF5c0VxdWFsIiwibGluZXNUb01vdmVVcCIsImxpbmVzVG9Ub3AiLCJtb3ZlQmFja1VwIiwiZGl2aWRlciIsImZhbGxiYWNrQWN0aXZpdHkiLCJyYXciLCJzcGlubmVyQ2hhcnMiLCJzcGlubmVyQ2hhciIsInN0YXJDaGFyIiwic3Bpbm5lckRlY29yYXRlZCIsImFjY2VudCIsImdlbmVyaWNBY3Rpdml0aWVzIiwiZGlzcGxheUFjdGl2aXR5IiwibmVlZHNFbGxpcHNpcyIsImVsYXBzZWRDb2xvciIsImNoYWxrIiwiaGV4IiwicGFydHMiLCJhY3Rpdml0eVRleHQiLCJhY3Rpdml0eUxpbmUiLCJ3cmFwcGVkIiwid3JhcE92ZXJsYXlMaW5lIiwiaW5wdXRMaW5lIiwiYnVpbGRJbnB1dExpbmUiLCJpbnB1dExpbmVzIiwiYXJyIiwicGFuZWxMaW5lIiwic3VnZ2VzdGlvbiIsImlzQWN0aXZlIiwibWFya2VyIiwiY21kVGV4dCIsImRlc2NUZXh0IiwiZGVzY3JpcHRpb24iLCJtb2RlbENvbnRleHRMaW5lIiwiYnVpbGRNb2RlbENvbnRleHRMaW5lIiwiY2hyb21lTGluZXMiLCJidWlsZENocm9tZUxpbmVzIiwiY2hyb21lTGluZSIsInRvZ2dsZUxpbmVzIiwiYnVpbGRJbmxpbmVUb2dnbGVMaW5lIiwidG9nZ2xlTGluZSIsImxlZ2VuZExpbmVzIiwiYnVpbGRUb2dnbGVMZWdlbmQiLCJsZWdlbmQiLCJtb2RlbCIsInByb3ZpZGVyIiwiY29udGV4dFBlcmNlbnQiLCJ1c2VkIiwiY2xhbXBQZXJjZW50YWdlIiwiYmFyV2lkdGgiLCJmaWxsZWQiLCJlbXB0eSIsImJhckNvbG9yIiwiZ2V0Q29udGV4dENvbG9yIiwiYmFyIiwiYXV0b0NvbnRpbnVlQWN0aXZlIiwidmVyaWZpY2F0aW9uQWN0aXZlIiwiYXBwcm92YWxNb2RlIiwidGhpbmtpbmdMYWJlbCIsInRoaW5raW5nTW9kZUxhYmVsIiwidG9nZ2xlcyIsInJsT24iLCJybEljb24iLCJybEV4cGxhaW4iLCJjb250SWNvbiIsImNvbnRTdGF0dXMiLCJjb250RXhwbGFpbiIsInZlcmlmeUljb24iLCJ2ZXJpZnlTdGF0dXMiLCJ2ZXJpZnlFeHBsYWluIiwiYXBwckljb24iLCJhcHByU3RhdHVzIiwiYXBwckV4cGxhaW4iLCJ0aGlua2luZ0lzRGVlcCIsInRoaW5rSWNvbiIsInRoaW5rU3RhdHVzIiwidGhpbmtFeHBsYWluIiwiZGVidWdBY3RpdmUiLCJkZWJ1Z0ljb24iLCJkZWJ1Z1N0YXR1cyIsImRlYnVnRXhwbGFpbiIsIndyYXBTZWdtZW50cyIsInN0YXR1c0xpbmVzIiwiYnVpbGRTdGF0dXNCbG9jayIsIm1ldGFMaW5lcyIsImJ1aWxkTWV0YUJsb2NrIiwiYWJicmV2aWF0ZVBhdGgiLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwicHJvZmlsZSIsImZvcm1hdE1ldGFTZWdtZW50Iiwid29ya3NwYWNlIiwiZGlyZWN0b3J5Iiwid3JpdGVzIiwidG9vbFN1bW1hcnkiLCJzZXNzaW9uTGFiZWwiLCJ2ZXJzaW9uIiwicmxTZWdtZW50cyIsImJ1aWxkUkxTdGF0dXNTZWdtZW50cyIsImFjdGl2ZVZhcmlhbnQiLCJ3aW5zIiwiY3VycmVudE1vZHVsZSIsInJlZmluZXIiLCJ0aWVzIiwidG90YWxHYW1lcyIsImxlYWRlciIsInBDb2xvciIsInJDb2xvciIsInBTY29yZSIsInJTY29yZSIsInRyb3BoeSIsInN0cmVha1RleHQiLCJzdHJlYWsiLCJwQmFycyIsInJCYXJzIiwidEJhcnMiLCJpc1BhcmFsbGVsIiwicGFyYWxsZWxFeGVjdXRpb24iLCJ2YXJpYW50SWNvbiIsInZhcmlhbnRMYWJlbCIsInZhcmlhbnRDb2xvciIsImxhc3RXaW5uZXIiLCJ3aW5uZXJJY29uIiwiY3VycmVudFN0ZXAiLCJzdGVwVGV4dCIsInRydW5jYXRlTWlkZGxlIiwic3RlcHNDb21wbGV0ZWQiLCJ0b3RhbFN0ZXBzIiwicGN0Iiwic2NvcmVzIiwicFZhbCIsInJWYWwiLCJwRGlzcGxheSIsInJEaXNwbGF5IiwiYWNjdXJhY3kiLCJwQWNjIiwickFjYyIsImtlZXBMZW4iLCJzdGF0dXNlcyIsImNvbG9yaXplciIsImJ1aWxkQ29udHJvbExpbmVzIiwiYnVpbGRUb2dnbGVMaW5lIiwic2hvcnRjdXRMaW5lIiwiYnVpbGRTaG9ydGN1dExpbmUiLCJidWlsZENvbXBhY3RUb2dnbGVMaW5lIiwiZWRpdEljb24iLCJlZGl0U3RhdGUiLCJjeWNsZUhpbnQiLCJhZGRUb2dnbGUiLCJob3RrZXkiLCJhdXRvVmVyaWZ5QWN0aXZlIiwidmVyaWZ5VmFsdWUiLCJhcHByb3ZhbEFjdGl2ZSIsInRoaW5raW5nTGFiZWxSYXciLCJ0aGlua2luZ0FjdGl2ZSIsImR1YWxSbEFjdGl2ZSIsIm1vZGVWYWx1ZSIsImJ1aWxkTGluZSIsImluY2x1ZGVIb3RrZXlzIiwidG9nZ2xlIiwic3RhdGVUZXh0IiwiaG90a2V5VGV4dCIsImFkZEhvdGtleSIsInByb21wdFdpZHRoIiwiY29udGludWF0aW9uSW5kZW50IiwiY29udGludWF0aW9uV2lkdGgiLCJyYXdCdWZmZXIiLCJidWZmZXJMaW5lcyIsInRvdGFsQ2hhcnMiLCJjdXJzb3JMaW5lIiwiY3Vyc29yQ29sIiwiZm91bmRDdXJzb3IiLCJsaW5lSW5kZXgiLCJpc0ZpcnN0TG9naWNhbExpbmUiLCJsaW5lU3RhcnRDaGFyIiwiZmlyc3RMaW5lV2lkdGgiLCJjb250TGluZVdpZHRoIiwiaXNGaXJzdERpc3BsYXlMaW5lIiwiZGlzcGxheUxpbmUiLCJjaHVua1N0YXJ0IiwiY2h1bmtFbmQiLCJvZmZzZXRJbkNodW5rIiwibGFzdExpbmUiLCJ0YXJnZXRMaW5lIiwidmlzaWJsZVBhcnQiLCJjdXJzb3JQb3MiLCJiZWZvcmUiLCJjaGFyQXQiLCJhZnRlciIsInRleHRQYXJ0IiwiYnVpbGRJbnB1dFdpbmRvdyIsImF2YWlsYWJsZSIsImN1cnNvckluZGV4Iiwib2Zmc2V0IiwibWF4T2Zmc2V0Iiwid2luZG93IiwiZGlzcGxheSIsImNoYXIiLCJjdXJzb3JJbldpbmRvdyIsImNhcHR1cmVJbnB1dCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNldEJ1ZmZlciIsInJlYXNvbiIsImNhcHR1cmUiLCJsaW1pdCIsInZpc2libGUiLCJ0b2tlbiIsInNsaWNlTGVuZ3RoIiwiZ2V0QnVmZmVyIiwiZ2V0Q3Vyc29yIiwic2V0QnVmZmVyIiwicmVxdWVzdGVkQ3Vyc29yIiwic2V0U2VjcmV0TW9kZSIsImVuYWJsZWQiLCJzZXRNb2RlU3RhdHVzIiwic2hvd0NvbXBhY3RpbmdTdGF0dXMiLCJoaWRlQ29tcGFjdGluZ1N0YXR1cyIsImVtaXRQcm9tcHQiLCJwdXNoUHJvbXB0RXZlbnQiLCJtcyIsImRhdGEiLCJjb2x1bW5zIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlVuaWZpZWRVSVJlbmRlcmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pZmllZFVJUmVuZGVyZXIgLSBDbGF1ZGUgQ29kZSBzdHlsZSBtaW5pbWFsaXN0IHRlcm1pbmFsIFVJLlxuICpcbiAqIEdvYWxzOlxuICogLSBTaW5nbGUgZXZlbnQgcGlwZWxpbmUgZm9yIGV2ZXJ5dGhpbmcgKHByb21wdCDihpIgdGhvdWdodCDihpIgdG9vbC9idWlsZC90ZXN0IOKGkiByZXNwb25zZSkuXG4gKiAtIFBpbm5lZCBzdGF0dXMvbWV0YSBvbmx5IChuZXZlciBpbiBzY3JvbGxiYWNrKS5cbiAqIC0gU2Nyb2xsYmFjayBvbmx5IHNob3dzIGV2ZW50czsgbm8gZHVwbGljYXRlIHN0YXR1cyBsaWtlIFwiV29ya2luZyBvbiB5b3VyIHJlcXVlc3RcIiBvciBcIlJlYWR5IGZvciBwcm9tcHRzXCIuXG4gKiAtIFN0cmVhbWluZzogZmlyc3QgY2h1bmsgc2V0cyBhIG9uZS1saW5lIGJhbm5lcjsgcmVtYWluZGVyIHN0cmVhbXMgbmF0dXJhbGx5IChvcHRpb25hbCkuXG4gKiAtIENvbGxhcHNpYmxlLWxpa2Ugc3VtbWFyaWVzOiB3ZSBmb3JtYXQgYSBjb21wYWN0IGhlYWRpbmcgd2l0aCBhbiBlbGxpcHNpcyBpbmRpY2F0b3IsIGJ1dCBhdm9pZCBjdHJsK28gaGludHMuXG4gKi9cblxuaW1wb3J0ICogYXMgcmVhZGxpbmUgZnJvbSAnbm9kZTpyZWFkbGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgeyBob21lZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IHsgdGhlbWUsIHNwaW5uZXJGcmFtZXMsIGdldFRvb2xDb2xvciB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHsgbG9nRGVidWcgfSBmcm9tICcuLi91dGlscy9kZWJ1Z0xvZ2dlci5qcyc7XG5pbXBvcnQge1xuICBjbGFtcFBlcmNlbnRhZ2UsXG4gIGdldENvbnRleHRDb2xvcixcbn0gZnJvbSAnLi91aUNvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZFN1Z2dlc3Rpb24ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xufVxuXG50eXBlIENhbm9uaWNhbEV2ZW50VHlwZSA9ICdwcm9tcHQnIHwgJ3Rob3VnaHQnIHwgJ3N0cmVhbScgfCAndG9vbCcgfCAndG9vbC1yZXN1bHQnIHwgJ2J1aWxkJyB8ICd0ZXN0JyB8ICdyZXNwb25zZSc7XG5cbmV4cG9ydCB0eXBlIFJlbmRlcmVyRXZlbnRUeXBlID1cbiAgfCBDYW5vbmljYWxFdmVudFR5cGVcbiAgfCAncmF3J1xuICB8ICdiYW5uZXInXG4gIHwgJ2Vycm9yJ1xuICB8ICdzdHJlYW1pbmcnXG4gIHwgJ3Rvb2wtY2FsbCdcbiAgfCAndG9vbC1yZXN1bHQnO1xuXG50eXBlIFVJRXZlbnQgPSB7XG4gIHR5cGU6IENhbm9uaWNhbEV2ZW50VHlwZTtcbiAgcmF3VHlwZTogUmVuZGVyZXJFdmVudFR5cGU7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ29tcGFjdGVkPzogYm9vbGVhbjsgLy8gQ2xhdWRlIENvZGUgc3R5bGUgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2tcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zIHtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG50eXBlIElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgY3Vyc29yOiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgTW9kZVRvZ2dsZVN0YXRlIHtcbiAgdmVyaWZpY2F0aW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgdmVyaWZpY2F0aW9uSG90a2V5Pzogc3RyaW5nO1xuICBhdXRvQ29udGludWVFbmFibGVkPzogYm9vbGVhbjtcbiAgYXV0b0NvbnRpbnVlSG90a2V5Pzogc3RyaW5nO1xuICB0aGlua2luZ01vZGVMYWJlbD86IHN0cmluZyB8IG51bGw7XG4gIHRoaW5raW5nSG90a2V5Pzogc3RyaW5nO1xuICBjcml0aWNhbEFwcHJvdmFsTW9kZT86ICdhdXRvJyB8ICdhcHByb3ZhbCc7XG4gIGNyaXRpY2FsQXBwcm92YWxIb3RrZXk/OiBzdHJpbmc7XG4gIGR1YWxSbEVuYWJsZWQ/OiBib29sZWFuO1xuICBkdWFsUmxIb3RrZXk/OiBzdHJpbmc7XG4gIGRlYnVnRW5hYmxlZD86IGJvb2xlYW47XG4gIGRlYnVnSG90a2V5Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIHJlYWwtdGltZSBkaXNwbGF5IGR1cmluZyBkdWFsLVJMIG1vZGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUkxBZ2VudFN0YXR1cyB7XG4gIC8qKiBDdXJyZW50IGFjdGl2ZSB2YXJpYW50IGJlaW5nIGV4ZWN1dGVkICovXG4gIGFjdGl2ZVZhcmlhbnQ/OiAncHJpbWFyeScgfCAncmVmaW5lcicgfCBudWxsO1xuICAvKiogQ3VycmVudCBtb2R1bGUgYmVpbmcgcHJvY2Vzc2VkICovXG4gIGN1cnJlbnRNb2R1bGU/OiBzdHJpbmc7XG4gIC8qKiBDdXJyZW50IHN0ZXAgd2l0aGluIHRoZSBtb2R1bGUgKi9cbiAgY3VycmVudFN0ZXA/OiBzdHJpbmc7XG4gIC8qKiBXaW4gc3RhdGlzdGljcyBmb3IgcHJpbWFyeSB2cyByZWZpbmVyICovXG4gIHdpbnM/OiB7IHByaW1hcnk6IG51bWJlcjsgcmVmaW5lcjogbnVtYmVyOyB0aWVzOiBudW1iZXIgfTtcbiAgLyoqIEN1cnJlbnQgcmV3YXJkIHNjb3JlcyBpZiBhdmFpbGFibGUgKi9cbiAgc2NvcmVzPzogeyBwcmltYXJ5PzogbnVtYmVyOyByZWZpbmVyPzogbnVtYmVyIH07XG4gIC8qKiBIdW1hbi1hY2N1cmFjeSBzdHlsZSBzY29yZXMgKDAtMSkgKi9cbiAgYWNjdXJhY3k/OiB7IHByaW1hcnk/OiBudW1iZXI7IHJlZmluZXI/OiBudW1iZXIgfTtcbiAgLyoqIFdoZXRoZXIgdmFyaWFudHMgYXJlIHJ1bm5pbmcgaW4gcGFyYWxsZWwgKi9cbiAgcGFyYWxsZWxFeGVjdXRpb24/OiBib29sZWFuO1xuICAvKiogVG90YWwgc3RlcHMgY29tcGxldGVkICovXG4gIHN0ZXBzQ29tcGxldGVkPzogbnVtYmVyO1xuICAvKiogVG90YWwgc3RlcHMgdG8gcHJvY2VzcyAqL1xuICB0b3RhbFN0ZXBzPzogbnVtYmVyO1xuICAvKiogTGFzdCBzdGVwIHdpbm5lciBmb3IgY2VsZWJyYXRpb24gKi9cbiAgbGFzdFdpbm5lcj86ICdwcmltYXJ5JyB8ICdyZWZpbmVyJyB8ICd0aWUnIHwgbnVsbDtcbiAgLyoqIFN0cmVhayBjb3VudCBmb3IgY3VycmVudCBsZWFkZXIgKi9cbiAgc3RyZWFrPzogbnVtYmVyO1xufVxuXG5jb25zdCBFU0MgPSB7XG4gIEhJREVfQ1VSU09SOiAnXFx4MWJbPzI1bCcsXG4gIFNIT1dfQ1VSU09SOiAnXFx4MWJbPzI1aCcsXG4gIENMRUFSX1NDUkVFTjogJ1xceDFiWzJKJyxcbiAgQ0xFQVJfTElORTogJ1xceDFiWzJLJyxcbiAgSE9NRTogJ1xceDFiW0gnLFxuICBFTkFCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRoJyxcbiAgRElTQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGwnLFxuICBUTzogKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7cm93fTske2NvbH1IYCxcbiAgVE9fQ09MOiAoY29sOiBudW1iZXIpID0+IGBcXHgxYlske2NvbH1HYCxcbiAgRVJBU0VfRE9XTjogJ1xceDFiW0onLFxuICBSRVZFUlNFOiAnXFx4MWJbN20nLFxuICBSRVNFVDogJ1xceDFiWzBtJyxcbiAgLy8gU2Nyb2xsIHJlZ2lvbiBjb250cm9sIC0gQ1JJVElDQUwgZm9yIGZpeGVkIGJvdHRvbSBvdmVybGF5XG4gIFNFVF9TQ1JPTExfUkVHSU9OOiAodG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyKSA9PiBgXFx4MWJbJHt0b3B9OyR7Ym90dG9tfXJgLFxuICBSRVNFVF9TQ1JPTExfUkVHSU9OOiAnXFx4MWJbcicsXG4gIFNBVkVfQ1VSU09SOiAnXFx4MWJbcycsXG4gIFJFU1RPUkVfQ1VSU09SOiAnXFx4MWJbdScsXG59IGFzIGNvbnN0O1xuXG5jb25zdCBORVdMSU5FX1BMQUNFSE9MREVSID0gJ+KGtSc7XG5cbmV4cG9ydCBjbGFzcyBVbmlmaWVkVUlSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IHJsOiByZWFkbGluZS5JbnRlcmZhY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5Nb2RlOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IGludGVyYWN0aXZlOiBib29sZWFuO1xuXG4gIHByaXZhdGUgcm93cyA9IDI0O1xuICBwcml2YXRlIGNvbHMgPSA4MDtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyV2lkdGg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgZXZlbnRRdWV1ZTogVUlFdmVudFtdID0gW107XG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcblxuICBwcml2YXRlIGJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIGN1cnNvciA9IDA7XG4gIHByaXZhdGUgaGlzdG9yeTogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoaXN0b3J5SW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uczogeyBjb21tYW5kOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IGNhdGVnb3J5Pzogc3RyaW5nIH1bXSA9IFtdO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICBwcml2YXRlIGF2YWlsYWJsZUNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICBwcml2YXRlIGhvdGtleXNJblRvZ2dsZUxpbmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGNvbGxhcHNlZFBhc3RlOiB7IHRleHQ6IHN0cmluZzsgbGluZXM6IG51bWJlcjsgY2hhckRpc3BsYXk6IHN0cmluZzsgdHJ1bmNhdGVkOiBib29sZWFuIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnID0gJ2lkbGUnO1xuICBwcml2YXRlIGxhc3RUb29sUmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgLyoqIFN0YWNrIG9mIGNvbGxhcHNlZCB0b29sIHJlc3VsdHMgZm9yIEN0cmwrTyBleHBhbnNpb24gKi9cbiAgcHJpdmF0ZSBjb2xsYXBzZWRUb29sUmVzdWx0czogQXJyYXk8e1xuICAgIHRvb2xOYW1lOiBzdHJpbmc7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIHN1bW1hcnk6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgfT4gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDb2xsYXBzZWRSZXN1bHRzID0gNTA7XG4gIC8qKiBUcmFjayB0aGUgbGFzdCB0b29sIG5hbWUgZm9yIHBhaXJpbmcgd2l0aCByZXN1bHRzICovXG4gIHByaXZhdGUgbGFzdFRvb2xOYW1lOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c092ZXJyaWRlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNTdHJlYW1pbmc6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEFuaW1hdGVkIFVJIGNvbXBvbmVudHNcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTcGlubmVyOiBBbmltYXRlZFNwaW5uZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB0aGlua2luZ0luZGljYXRvcjogVGhpbmtpbmdJbmRpY2F0b3IgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb250ZXh0TWV0ZXI6IENvbnRleHRNZXRlcjtcbiAgcHJpdmF0ZSBzcGlubmVyRnJhbWUgPSAwO1xuICBwcml2YXRlIHNwaW5uZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhJbmxpbmVQYW5lbExpbmVzID0gMTI7XG5cbiAgLy8gQ29tcGFjdGluZyBzdGF0dXMgYW5pbWF0aW9uXG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UgPSAnJztcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzRnJhbWUgPSAwO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyA9IFsn4py7JywgJ+KcvCcsICfinLsnLCAn4py6J107XG5cbiAgLy8gQW5pbWF0ZWQgYWN0aXZpdHkgbGluZSAoZS5nLiwgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIilcbiAgcHJpdmF0ZSBhY3Rpdml0eU1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFjdGl2aXR5UGhyYXNlSW5kZXggPSAwO1xuICBwcml2YXRlIGFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBhY3Rpdml0eVN0YXJGcmFtZXMgPSBbJ+KcsycsICfinLQnLCAn4py1JywgJ+KcticsICfinLcnLCAn4py4J107XG4gIC8vIFRva2VuIGNvdW50IGR1cmluZyBzdHJlYW1pbmdcbiAgcHJpdmF0ZSBzdHJlYW1pbmdUb2tlbnMgPSAwO1xuICAvLyBFbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uXG4gIHByaXZhdGUgZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGVsYXBzZWRDb2xvckZyYW1lcyA9IFsnI0Y1OUUwQicsICcjRkJCRjI0JywgJyNGQ0QzNEQnLCAnI0ZERTY4QScsICcjRkNEMzREJywgJyNGQkJGMjQnXTtcbiAgLy8gVXNlci1mcmllbmRseSBhY3Rpdml0eSBwaHJhc2VzIChjbGVhbiwgcHJvZmVzc2lvbmFsKVxuICBwcml2YXRlIHJlYWRvbmx5IGZ1bkFjdGl2aXR5UGhyYXNlcyA9IFtcbiAgICAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZycsICdBbmFseXppbmcnLCAnV29ya2luZycsICdQcmVwYXJpbmcnLFxuICBdO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyA9IDg7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzID0gMTgwMDtcbiAgcHJpdmF0ZSByZWFkb25seSB0aG91Z2h0RGVkdXBXaW5kb3dNcyA9IDE1MDAwO1xuICBwcml2YXRlIGxhc3RDdXJhdGVkVGhvdWdodDogeyB0ZXh0OiBzdHJpbmc7IGF0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgc3RhdHVzTWV0YToge1xuICAgIG1vZGVsPzogc3RyaW5nO1xuICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gIH0gPSB7fTtcbiAgcHJpdmF0ZSB0b2dnbGVTdGF0ZTogTW9kZVRvZ2dsZVN0YXRlID0ge1xuICAgIHZlcmlmaWNhdGlvbkVuYWJsZWQ6IGZhbHNlLFxuICAgIGF1dG9Db250aW51ZUVuYWJsZWQ6IGZhbHNlLFxuICAgIGNyaXRpY2FsQXBwcm92YWxNb2RlOiAnYXV0bycsXG4gICAgZHVhbFJsRW5hYmxlZDogZmFsc2UsXG4gICAgZGVidWdFbmFibGVkOiBmYWxzZSxcbiAgfTtcblxuICAvKiogUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgZHVhbC1STCBtb2RlIGRpc3BsYXkgKi9cbiAgcHJpdmF0ZSBybFN0YXR1czogUkxBZ2VudFN0YXR1cyA9IHt9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIC8qKiBFbnN1cmUgY3Vyc29yIGlzIGFsd2F5cyB3aXRoaW4gdmFsaWQgYm91bmRzIGZvciB0aGUgY3VycmVudCBidWZmZXIgKi9cbiAgcHJpdmF0ZSBjbGFtcEN1cnNvcigpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuY3Vyc29yLCB0aGlzLmJ1ZmZlci5sZW5ndGgpKTtcbiAgfVxuXG4gIC8qKiBTYWZlbHkgYXBwZW5kIHRvIHBhc3RlIGJ1ZmZlciB3aXRoIHNpemUgbGltaXQgZW5mb3JjZW1lbnQgKi9cbiAgcHJpdmF0ZSBhcHBlbmRUb1Bhc3RlQnVmZmVyKGJ1ZmZlcjogJ3Bhc3RlJyB8ICdwbGFpblBhc3RlJywgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdykgcmV0dXJuOyAvLyBBbHJlYWR5IGF0IGxpbWl0XG4gICAgY29uc3QgY3VycmVudCA9IGJ1ZmZlciA9PT0gJ3Bhc3RlJyA/IHRoaXMucGFzdGVCdWZmZXIgOiB0aGlzLnBsYWluUGFzdGVCdWZmZXI7XG4gICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUgLSBjdXJyZW50Lmxlbmd0aDtcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvQWRkID0gdGV4dC5sZW5ndGggPD0gcmVtYWluaW5nID8gdGV4dCA6IHRleHQuc2xpY2UoMCwgcmVtYWluaW5nKTtcbiAgICBpZiAoYnVmZmVyID09PSAncGFzdGUnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfVxuICAgIGlmICh0b0FkZC5sZW5ndGggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogU3RyaXAgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIGFuZCBzcGVjaWFsIGZvcm1hdHRpbmcgZnJvbSB0ZXh0IHRvIGdldCBjbGVhbiBwbGFpbnRleHQgKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVBhc3RlQ29udGVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBhbGwgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIChDU0ksIE9TQywgZXRjLilcbiAgICAvLyBJbmNsdWRpbmcgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgKFxceDFiWzIwMH4gYW5kIFxceDFiWzIwMX4pIHdoaWNoIGVuZCB3aXRoIH5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGxldCBzYW5pdGl6ZWQgPSB0ZXh0LnJlcGxhY2UoL1xceDFiXFxbWzAtOTtdKltBLVphLXp+XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gICAgLy8gQWxzbyByZW1vdmUgcGFydGlhbCBicmFja2V0ZWQgcGFzdGUgbWFya2VycyB0aGF0IG1heSBoYXZlIGxlYWtlZCAoZS5nLiwgXCJbMjAwflwiIHdpdGhvdXQgRVNDKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXFsyMFswMV1+L2csICcnKTtcbiAgICAvLyBSZW1vdmUgYW55IHN0cmF5IGVzY2FwZSBjaGFyYWN0ZXIgYXQgc3RhcnQvZW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXlxceDFiK3xcXHgxYiskL2csICcnKTtcblxuICAgIC8vIFN0cmlwIHNwZWNpYWwgZm9ybWF0dGluZyBjaGFyYWN0ZXJzIGZvciBjbGVhbiBwbGFpbnRleHQ6XG4gICAgLy8gLSBaZXJvLXdpZHRoIGNoYXJhY3RlcnMgKFpXU1AsIFpXTkosIFpXSiwgQk9NL1pXTkJTUClcbiAgICAvLyAtIFdvcmQgam9pbmVyLCBpbnZpc2libGUgc2VwYXJhdG9yLCBpbnZpc2libGUgdGltZXMvcGx1c1xuICAgIC8vIC0gRGlyZWN0aW9uYWwgZm9ybWF0dGluZyAoTFJNLCBSTE0sIExSRSwgUkxFLCBMUk8sIFJMTywgUERGLCBMUkksIFJMSSwgRlNJLCBQREkpXG4gICAgLy8gLSBPYmplY3QgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgLy8gLSBTb2Z0IGh5cGhlblxuICAgIC8vIC0gTm9uLWJyZWFraW5nIHNwYWNlIHZhcmlhbnRzIChOQlNQLCBuYXJyb3cgTkJTUCwgZmlndXJlIHNwYWNlLCBldGMuKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MjAwQi1cXHUyMDBGXFx1MjAyOC1cXHUyMDJGXFx1MjA2MC1cXHUyMDZGXFx1RkVGRlxcdTAwQURcXHVGRkZDXS9nLCAnJyk7XG5cbiAgICAvLyBOb3JtYWxpemUgdmFyaW91cyBzcGFjZSBjaGFyYWN0ZXJzIHRvIHJlZ3VsYXIgc3BhY2VcbiAgICAvLyBJbmNsdWRlczogTkJTUCwgZW4vZW0gc3BhY2UsIHRoaW4gc3BhY2UsIGhhaXIgc3BhY2UsIGZpZ3VyZSBzcGFjZSwgZXRjLlxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MDBBMFxcdTIwMDAtXFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMF0vZywgJyAnKTtcblxuICAgIC8vIFJlbW92ZSBjb250cm9sIGNoYXJhY3RlcnMgZXhjZXB0IHRhYiwgbmV3bGluZSwgY2FycmlhZ2UgcmV0dXJuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvW1xceDAwLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4N0ZdL2csICcnKTtcblxuICAgIHJldHVybiBzYW5pdGl6ZWQ7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gMjQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gNjA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDI7IC8vIEd1YXJkIGZvciBzaG9ydCBmaXJzdCBsaW5lcyBpbiBwbGFpbiBwYXN0ZSBtb2RlXG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDgwOyAvLyBXYWl0IGJlZm9yZSBjb21taXR0aW5nIGNoYXJzIGFzIG5vcm1hbCBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGxhc3RPdmVybGF5UmVuZGVyZWQ6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyOyBwcm9tcHRDb2w6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICBwcml2YXRlIHByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IGZhbHNlO1xuICBwcml2YXRlIHNlY3JldE1vZGUgPSBmYWxzZTtcbiAgLy8gUmVuZGVyIHRocm90dGxpbmcgdG8gcHJldmVudCBleGNlc3NpdmUgcmVkcmF3cyBkdXJpbmcgcmFwaWQgaW5wdXRcbiAgcHJpdmF0ZSBwZW5kaW5nUmVuZGVyID0gZmFsc2U7XG4gIHByaXZhdGUgbGFzdFJlbmRlclRpbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHJlbmRlclRocm90dGxlTXMgPSAxNjsgLy8gfjYwZnBzIG1heFxuICBwcml2YXRlIHJlbmRlclRocm90dGxlVGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIC8vIERpc3Bvc2FsIHN0YXRlIHRvIHByZXZlbnQgb3BlcmF0aW9ucyBhZnRlciBjbGVhbnVwXG4gIHByaXZhdGUgZGlzcG9zZWQgPSBmYWxzZTtcbiAgLy8gQm91bmQgZXZlbnQgaGFuZGxlcnMgZm9yIHByb3BlciBjbGVhbnVwXG4gIHByaXZhdGUgYm91bmRSZXNpemVIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBib3VuZEtleXByZXNzSGFuZGxlcjogKChzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgaW5wdXRDYXB0dXJlOlxuICAgIHwge1xuICAgICAgICByZXNvbHZlOiAodmFsdWU6IHN0cmluZykgPT4gdm9pZDtcbiAgICAgICAgcmVqZWN0PzogKHJlYXNvbj86IHVua25vd24pID0+IHZvaWQ7XG4gICAgICAgIG9wdGlvbnM6IHsgdHJpbTogYm9vbGVhbjsgYWxsb3dFbXB0eTogYm9vbGVhbiB9O1xuICAgICAgfVxuICAgIHwgbnVsbCA9IG51bGw7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW0gPSBwcm9jZXNzLnN0ZG91dCxcbiAgICBpbnB1dDogTm9kZUpTLlJlYWRTdHJlYW0gPSBwcm9jZXNzLnN0ZGluLFxuICAgIF9vcHRpb25zPzogVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zXG4gICkge1xuICAgIHN1cGVyKCk7XG4gICAgdGhpcy5vdXRwdXQgPSBvdXRwdXQ7XG4gICAgdGhpcy5pbnB1dCA9IGlucHV0O1xuICAgIHRoaXMuaW50ZXJhY3RpdmUgPSBCb29sZWFuKHRoaXMub3V0cHV0LmlzVFRZICYmIHRoaXMuaW5wdXQuaXNUVFkgJiYgIXByb2Nlc3MuZW52WydDSSddKTtcbiAgICB0aGlzLnBsYWluTW9kZSA9IGlzUGxhaW5PdXRwdXRNb2RlKCkgfHwgIXRoaXMuaW50ZXJhY3RpdmU7XG5cbiAgICAvLyBJbml0aWFsaXplIGFuaW1hdGVkIGNvbXBvbmVudHNcbiAgICB0aGlzLmNvbnRleHRNZXRlciA9IG5ldyBDb250ZXh0TWV0ZXIoKTtcblxuICAgIHRoaXMucmwgPSByZWFkbGluZS5jcmVhdGVJbnRlcmZhY2Uoe1xuICAgICAgaW5wdXQ6IHRoaXMuaW5wdXQsXG4gICAgICBvdXRwdXQ6IHRoaXMub3V0cHV0LFxuICAgICAgdGVybWluYWw6IHRydWUsXG4gICAgICBwcm9tcHQ6ICcnLFxuICAgICAgdGFiU2l6ZTogMixcbiAgICB9KTtcbiAgICB0aGlzLnJsLnNldFByb21wdCgnJyk7XG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcblxuICAgIC8vIFVzZSBib3VuZCBoYW5kbGVycyBzbyB3ZSBjYW4gcmVtb3ZlIHRoZW0gb24gY2xlYW51cFxuICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5vdXRwdXQub24oJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcblxuICAgIHRoaXMuc2V0dXBJbnB1dEhhbmRsZXJzKCk7XG4gIH1cblxuICBpbml0aWFsaXplKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJlc2V0IGlucHV0IGFuZCBwYXN0ZSBzdGF0ZSB0byBwcmV2ZW50IHN0YWxlIHN0YXRlIGZyb20gcHJldmlvdXMgc2Vzc2lvblxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIElmIGFuIG92ZXJsYXkgd2FzIGFscmVhZHkgcmVuZGVyZWQgYmVmb3JlIGluaXRpYWxpemF0aW9uIChlLmcuLCBiYW5uZXIgZW1pdHRlZCBlYXJseSksXG4gICAgICAvLyBjbGVhciBpdCBzbyBpbml0aWFsaXplKCkgZG9lc24ndCBzdGFjayBhIHNlY29uZCBjb250cm9sIGJhciBpbiBzY3JvbGxiYWNrLlxuICAgICAgaWYgKHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShFU0MuRU5BQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUGxhaW4gbW9kZTogbWluaW1hbCBzZXR1cCwgc3RpbGwgcmVuZGVyIGEgc2ltcGxlIHByb21wdCBsaW5lXG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGNsZWFudXAoKTogdm9pZCB7XG4gICAgLy8gTWFyayBhcyBkaXNwb3NlZCBmaXJzdCB0byBwcmV2ZW50IGFueSBwZW5kaW5nIG9wZXJhdGlvbnNcbiAgICB0aGlzLmRpc3Bvc2VkID0gdHJ1ZTtcblxuICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignUmVuZGVyZXIgZGlzcG9zZWQnKSk7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuXG4gICAgLy8gQ2xlYXIgcmVuZGVyIHRocm90dGxlIHRpbWVyXG4gICAgaWYgKHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lcik7XG4gICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFN0b3AgYW55IHJ1bm5pbmcgYW5pbWF0aW9uc1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnN0cmVhbWluZ1NwaW5uZXIpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lci5zdG9wKCk7XG4gICAgICB0aGlzLnN0cmVhbWluZ1NwaW5uZXIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy50aGlua2luZ0luZGljYXRvcikge1xuICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvci5zdG9wKCk7XG4gICAgICB0aGlzLnRoaW5raW5nSW5kaWNhdG9yID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5jb250ZXh0TWV0ZXIuZGlzcG9zZSgpO1xuICAgIGRpc3Bvc2VBbmltYXRpb25zKCk7XG5cbiAgICAvLyBSZW1vdmUgZXZlbnQgbGlzdGVuZXJzIHRvIHByZXZlbnQgbWVtb3J5IGxlYWtzXG4gICAgaWYgKHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKSB7XG4gICAgICB0aGlzLm91dHB1dC5yZW1vdmVMaXN0ZW5lcigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuICAgICAgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcikge1xuICAgICAgdGhpcy5pbnB1dC5yZW1vdmVMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFJlbW92ZSBhbGwgRXZlbnRFbWl0dGVyIGxpc3RlbmVycyBmcm9tIHRoaXMgaW5zdGFuY2VcbiAgICB0aGlzLnJlbW92ZUFsbExpc3RlbmVycygpO1xuXG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gQ2xlYXIgdGhlIHByb21wdCBhcmVhIHNvIGl0IGRvZXNuJ3QgcmVtYWluIGluIHNjcm9sbGJhY2sgaGlzdG9yeVxuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgIH1cbiAgICBpZiAodGhpcy5pbnB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5pbnB1dC5zZXRSYXdNb2RlKGZhbHNlKTtcbiAgICB9XG4gICAgdGhpcy5ybC5jbG9zZSgpO1xuICAgIHRoaXMubGFzdE92ZXJsYXkgPSBudWxsO1xuXG4gICAgLy8gQ2xlYXIgZXZlbnQgcXVldWVcbiAgICB0aGlzLmV2ZW50UXVldWUgPSBbXTtcbiAgfVxuXG4gIHN1c3BlbmRQcm9tcHRSZW5kZXJpbmcoKTogdm9pZCB7XG4gICAgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSB0cnVlO1xuICB9XG5cbiAgcmVzdW1lUHJvbXB0UmVuZGVyaW5nKHJlbmRlcjogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgICBpZiAocmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBJbnB1dCBoYW5kbGluZyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHNldHVwSW5wdXRIYW5kbGVycygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5ybC5yZW1vdmVBbGxMaXN0ZW5lcnMoJ2xpbmUnKTtcbiAgICByZWFkbGluZS5lbWl0S2V5cHJlc3NFdmVudHModGhpcy5pbnB1dCwgdGhpcy5ybCk7XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZSh0cnVlKTtcbiAgICB9XG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXIgc28gd2UgY2FuIHJlbW92ZSBpdCBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IChzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpID0+IHtcbiAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmhhbmRsZUtleXByZXNzKHN0ciwga2V5KTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMuaW5wdXQub24oJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gIH1cblxuICBwcml2YXRlIGVtaXRJbnB1dENoYW5nZSgpOiB2b2lkIHtcbiAgICBjb25zdCBwYXlsb2FkOiBJbnB1dENoYW5nZUV2ZW50ID0ge1xuICAgICAgdGV4dDogdGhpcy5idWZmZXIsXG4gICAgICBjdXJzb3I6IHRoaXMuY3Vyc29yLFxuICAgIH07XG4gICAgdGhpcy5lbWl0KCdjaGFuZ2UnLCBwYXlsb2FkKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlS2V5cHJlc3Moc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogdm9pZCB7XG4gICAgLy8gTm9ybWFsaXplIG1pc3Npbmcga2V5IG1ldGFkYXRhIChjb21tb24gZm9yIHNvbWUgdGVybWluYWxzIGVtaXR0aW5nIHJhdyBlc2NhcGUgY29kZXMpXG4gICAgY29uc3Qgbm9ybWFsaXplZEtleSA9IGtleSA/PyB0aGlzLnBhcnNlRXNjYXBlU2VxdWVuY2Uoc3RyKTtcbiAgICBjb25zdCBrZXlGb3JQYXN0ZSA9IG5vcm1hbGl6ZWRLZXkgPz8gKHN0ciA/IHsgc2VxdWVuY2U6IHN0ciB9IGFzIHJlYWRsaW5lLktleSA6IGtleSk7XG5cbiAgICBpZiAodGhpcy5oYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHIsIGtleUZvclBhc3RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmhhbmRsZVBsYWluUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBtYWNPUyBPcHRpb24ra2V5IHByb2R1Y2VzIFVuaWNvZGUgY2hhcmFjdGVyczsgaGFuZGxlIHRoZW0gYmVmb3JlIGtleSBtZXRhZGF0YSBjaGVja3MuXG4gICAgY29uc3QgbWFjT3B0aW9uQ2hhcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnwqknOiAnZycsICAvLyBPcHRpb24rR1xuICAgICAgJ+KEoic6ICdnJywgIC8vIE9wdGlvbitTaGlmdCtHXG4gICAgICAnw6UnOiAnYScsICAvLyBPcHRpb24rQVxuICAgICAgJ8OFJzogJ2EnLCAgLy8gT3B0aW9uK1NoaWZ0K0FcbiAgICAgICfiiJonOiAndicsICAvLyBPcHRpb24rViAvIE9wdGlvbitTaGlmdCtWXG4gICAgICAn4oiCJzogJ2QnLCAgLy8gT3B0aW9uK0RcbiAgICAgICfDjic6ICdkJywgIC8vIE9wdGlvbitTaGlmdCtEIChjb21tb24gbWFjT1MgZW1pc3Npb24pXG4gICAgICAn4oiGJzogJ2QnLCAgLy8gQ29tbW9uIGFsdGVybmF0ZSBkZWx0YSBzeW1ib2xcbiAgICB9O1xuXG4gICAgaWYgKHN0ciAmJiBtYWNPcHRpb25DaGFyc1tzdHJdKSB7XG4gICAgICBjb25zdCBsZXR0ZXIgPSBtYWNPcHRpb25DaGFyc1tzdHJdO1xuICAgICAgLy8gQ2xlYXIgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBzbyB0aGUgc3ltYm9sIG5ldmVyIGxhbmRzIGluIHRoZSBwcm9tcHRcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgICAgc3dpdGNoIChsZXR0ZXIpIHtcbiAgICAgICAgY2FzZSAnYSc6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtY3JpdGljYWwtYXBwcm92YWwnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZyc6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdkJzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1kdWFsLXJsJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ3YnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLXZlcmlmeScpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghbm9ybWFsaXplZEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSAmJiBub3JtYWxpemVkS2V5LmN0cmwgJiYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2MnIHx8IG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2QnKSkge1xuICAgICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGNhbmNlbGxlZCcpKTtcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEZXRlY3QgQ3RybCtTaGlmdCBjb21iaW5hdGlvbnMgKGZhbGxiYWNrIGZvciBub24tbWFjT1Mgb3IgY29uZmlndXJlZCB0ZXJtaW5hbHMpXG4gICAgY29uc3QgaXNDdHJsU2hpZnQgPSAobGV0dGVyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IGxvd2VyTGV0dGVyID0gbGV0dGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB1cHBlckxldHRlciA9IGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAvLyBQYXR0ZXJuIDE6IFN0YW5kYXJkIHJlYWRsaW5lIHNoaWZ0IGZsYWcgKyBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkuc2hpZnQgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAyOiBTb21lIHRlcm1pbmFscyBzZW5kIHVwcGVyY2FzZSBuYW1lIHdpdGggY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09IHVwcGVyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDM6IE1ldGEvQWx0ICsgbGV0dGVyIChpVGVybTIgd2l0aCBcIk9wdGlvbiBzZW5kcyBNZXRhXCIpXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5tZXRhICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNDogUmF3IGVzY2FwZSBzZXF1ZW5jZSBjaGVjayBmb3IgeHRlcm0tc3R5bGUgbW9kaWZpZXJzXG4gICAgICBjb25zdCBzZXEgPSBzdHIgfHwgbm9ybWFsaXplZEtleS5zZXF1ZW5jZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoc2VxICYmIC9eXFx4MWJcXFtbMC05XSs7Nlt+QS1aXT8kLy50ZXN0KHNlcSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNTogRVNDICsgbGV0dGVyIChPcHRpb24gc2VuZHMgRVNDIHByZWZpeCBpbiBzb21lIGNvbmZpZ3MpXG4gICAgICBpZiAoc2VxICYmIHNlcSA9PT0gYFxceDFiJHtsb3dlckxldHRlcn1gKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGNvbnN0IGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSA9IChsZXR0ZXI6ICdhJyB8ICdnJyB8ICdkJyB8ICd2Jyk6IHZvaWQgPT4ge1xuICAgICAgLy8gRW5zdXJlIG5vIGJ1ZmZlcmVkIGNoYXJzIGxlYWsgaW50byB0aGUgcHJvbXB0XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICAgIGlmIChsZXR0ZXIgPT09ICdhJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdnJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ2QnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWR1YWwtcmwnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAndicpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdmVyaWZ5Jyk7XG4gICAgICB9XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH07XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2EnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdhJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdnJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnZycpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZCcpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2QnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ3YnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCd2Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdyJykge1xuICAgICAgdGhpcy5lbWl0KCdyZXN1bWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2MnKSB7XG4gICAgICAvLyBDdHJsK0MgYmVoYXZpb3I6XG4gICAgICAvLyAxLiBJZiBidWZmZXIgaGFzIHRleHQ6IGNsZWFyIGl0IGZpcnN0LCB0aGVuIG5vdGlmeSBzaGVsbFxuICAgICAgLy8gMi4gSWYgYnVmZmVyIGlzIGVtcHR5OiBsZXQgc2hlbGwgZGVjaWRlIHRvIHBhdXNlIEFJIG9yIHF1aXRcbiAgICAgIC8vXG4gICAgICAvLyBUaGUgSW50ZXJhY3RpdmVTaGVsbCBtYWludGFpbnMgYSBjb3VudGVyIHRvIHRyYWNrIEN0cmwrQyBwcmVzc2VzIGFuZCBkZWNpZGVzXG4gICAgICAvLyB3aGV0aGVyIHRvIHBhdXNlIEFJIG9yIGV4aXQgYmFzZWQgb24gcHJvY2Vzc2luZyBzdGF0ZS5cblxuICAgICAgY29uc3QgaGFkQnVmZmVyID0gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICAgIGlmIChoYWRCdWZmZXIpIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGlucHV0IGJ1ZmZlciBmaXJzdFxuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICAvLyBFbWl0IGN0cmxjIGV2ZW50IHdpdGggYnVmZmVyIHN0YXRlIHNvIHNoZWxsIGNhbiBoYW5kbGUgYXBwcm9wcmlhdGVseVxuICAgICAgdGhpcy5lbWl0KCdjdHJsYycsIHsgaGFkQnVmZmVyIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2QnKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnaW50ZXJydXB0Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndScpIHtcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0w6IENsZWFyIHNjcmVlbiB3aGlsZSBwcmVzZXJ2aW5nIGlucHV0XG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbCcpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBDbGVhciBzY3JlZW4gYW5kIHJlZHJhd1xuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xceDFiWzJKXFx4MWJbSCcpOyAvLyBDbGVhciBzY3JlZW4sIG1vdmUgdG8gdG9wXG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgICAgIHRoaXMuY2xlYXJDb2xsYXBzZWRSZXN1bHRzKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrTzogRXhwYW5kIGxhc3QgdG9vbCByZXN1bHRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdvJykge1xuICAgICAgdGhpcy5lbWl0KCdleHBhbmQtdG9vbC1yZXN1bHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0E6IE1vdmUgY3Vyc29yIHRvIHN0YXJ0IG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdhJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtFOiBNb3ZlIGN1cnNvciB0byBlbmQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2UnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtXOiBEZWxldGUgd29yZCBiYWNrd2FyZFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ3cnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIC8vIEZpbmQgc3RhcnQgb2YgcHJldmlvdXMgd29yZFxuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgdHJhaWxpbmcgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICAvLyBTa2lwIHdvcmQgY2hhcmFjdGVyc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCBwb3MpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrSzogRGVsZXRlIGZyb20gY3Vyc29yIHRvIGVuZCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnaycpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEhvbWU6IE1vdmUgY3Vyc29yIHRvIHN0YXJ0XG4gICAgaWYgKGtleS5uYW1lID09PSAnaG9tZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gMCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEVuZDogTW92ZSBjdXJzb3IgdG8gZW5kXG4gICAgaWYgKGtleS5uYW1lID09PSAnZW5kJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtMZWZ0OiBNb3ZlIGN1cnNvciBiYWNrIG9uZSB3b3JkXG4gICAgaWYgKGtleS5tZXRhICYmIGtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICAvLyBTa2lwIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSA9PT0gJyAnKSBwb3MtLTtcbiAgICAgICAgLy8gU2tpcCB3b3JkIGNoYXJhY3RlcnNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gIT09ICcgJykgcG9zLS07XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrUmlnaHQ6IE1vdmUgY3Vyc29yIGZvcndhcmQgb25lIHdvcmRcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgY3VycmVudCB3b3JkXG4gICAgICAgIHdoaWxlIChwb3MgPCB0aGlzLmJ1ZmZlci5sZW5ndGggJiYgdGhpcy5idWZmZXJbcG9zXSAhPT0gJyAnKSBwb3MrKztcbiAgICAgICAgLy8gU2tpcCBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuYnVmZmVyLmxlbmd0aCAmJiB0aGlzLmJ1ZmZlcltwb3NdID09PSAnICcpIHBvcysrO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K0JhY2tzcGFjZTogRGVsZXRlIHdvcmQgYmFja3dhcmQgKGFsdGVybmF0aXZlIHRvIEN0cmwrVylcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5uYW1lID09PSAncmV0dXJuJyB8fCBrZXkubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgZXhwYW5kIGFuZCBzdWJtaXQgaW4gb25lIGFjdGlvblxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBJZiBhIHNsYXNoIGNvbW1hbmQgc3VnZ2VzdGlvbiBpcyBoaWdobGlnaHRlZCwgcHJlc3NpbmcgRW50ZXIgc3VibWl0cyBpdCBpbW1lZGlhdGVseVxuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKHRydWUpKSByZXR1cm47XG4gICAgICAvLyBGYWxsYmFjazogaWYgYnVmZmVyIHN0YXJ0cyB3aXRoICcvJyBhbmQgc3VnZ2VzdGlvbnMgZXhpc3QsIHVzZSB0aGUgc2VsZWN0ZWQvZmlyc3Qgb25lXG4gICAgICBpZiAodGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XT8uY29tbWFuZCA/PyB0aGlzLmJ1ZmZlcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3VibWl0VGV4dCh0aGlzLmJ1ZmZlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IgLSAxKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcikgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvciArIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvcisrO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndXAnKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKC0xKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSBpbmRleCBpcyB3aXRoaW4gYm91bmRzIGJlZm9yZSBhY2Nlc3NpbmdcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDAgJiYgdGhpcy5oaXN0b3J5SW5kZXggPCB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkb3duJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygxKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeUluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDApIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2FmZXR5OiBpbnZhbGlkIHN0YXRlLCByZXNldFxuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd0YWInKSB7XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24oZmFsc2UpKSByZXR1cm47XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN0ciAmJiAhbm9ybWFsaXplZEtleS5jdHJsICYmICFub3JtYWxpemVkS2V5Lm1ldGEpIHtcbiAgICAgIC8vIERlZmVyIGluc2VydGlvbiB0byBhbGxvdyBwYXN0ZSBkZXRlY3Rpb24gd2luZG93IHRvIGNhdGNoIHJhcGlkIGlucHV0XG4gICAgICB0aGlzLnF1ZXVlUGVuZGluZ0luc2VydChzdHIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgaG9yaXpvbnRhbCBjdXJzb3IgcG9zaXRpb24gc3RheXMgd2l0aGluIHRoZSB2aXNpYmxlIGlucHV0IHdpbmRvdy5cbiAgICogUHJldmVudHMganVtcHMgd2hlbiB1c2luZyBsZWZ0L3JpZ2h0IGFycm93cyBvbiBsb25nIGxpbmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBlbnN1cmVDdXJzb3JWaXNpYmxlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAxMik7IC8vIG1hcmdpbiBmb3IgcHJvbXB0L3RvZ2dsZXMgYW5kIHBhZGRpbmdcbiAgICAvLyBJZiBjdXJzb3IgaXMgbGVmdCBvZiBjdXJyZW50IHdpbmRvdywgc2hpZnQgd2luZG93IGxlZnRcbiAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0KSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3I7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGN1cnNvciBpcyBiZXlvbmQgdmlzaWJsZSB3aW5kb3csIHNoaWZ0IHdpbmRvdyByaWdodFxuICAgIGlmICh0aGlzLmN1cnNvciAtIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPj0gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvciAtIG1heFdpZHRoICsgMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcmF3IGVzY2FwZSBzZXF1ZW5jZXMgd2hlbiByZWFkbGluZSBkb2Vzbid0IHBvcHVsYXRlIGtleSBtZXRhZGF0YS5cbiAgICogUHJldmVudHMgY29udHJvbCBjb2RlcyAoZS5nLiwgXltbMjAwfikgZnJvbSBsZWFraW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIHByaXZhdGUgcGFyc2VFc2NhcGVTZXF1ZW5jZShzZXF1ZW5jZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHJlYWRsaW5lLktleSB8IG51bGwge1xuICAgIGlmICghc2VxdWVuY2UpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgcmVhZGxpbmUuS2V5PiA9IHtcbiAgICAgICdcXHgxYltBJzogeyBuYW1lOiAndXAnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltCJzogeyBuYW1lOiAnZG93bicsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0MnOiB7IG5hbWU6ICdyaWdodCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0QnOiB7IG5hbWU6ICdsZWZ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbSCc6IHsgbmFtZTogJ2hvbWUnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltGJzogeyBuYW1lOiAnZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAwfic6IHsgbmFtZTogJ3Bhc3RlLXN0YXJ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAxfic6IHsgbmFtZTogJ3Bhc3RlLWVuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgIH07XG4gICAgcmV0dXJuIG1hcFtzZXF1ZW5jZV0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZSBjaGFyYWN0ZXJzIGZvciBkZWZlcnJlZCBpbnNlcnRpb24uIFRoaXMgcHJldmVudHMgdmlzdWFsIFwibGVha1wiIG9mXG4gICAqIHBhc3RlZCBjb250ZW50IGJ5IGhvbGRpbmcgY2hhcmFjdGVycyB1bnRpbCB3ZSdyZSBjb25maWRlbnQgaXQncyBub3QgYSBwYXN0ZS5cbiAgICovXG4gIHByaXZhdGUgcXVldWVQZW5kaW5nSW5zZXJ0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciArPSB0ZXh0O1xuXG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIGNvbW1pdCBhZnRlciBkZWxheSAtIGlmIHBhc3RlIGRldGVjdGlvbiB0cmlnZ2VycyBmaXJzdCwgaXQgd2lsbCBjb25zdW1lIHRoZSBidWZmZXJcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb21taXRQZW5kaW5nSW5zZXJ0KCk7XG4gICAgfSwgdGhpcy5wZW5kaW5nSW5zZXJ0RGVsYXlNcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IHBlbmRpbmcgY2hhcmFjdGVycyBhcyBub3JtYWwgaW5wdXQgKG5vdCBhIHBhc3RlKS5cbiAgICovXG4gIHByaXZhdGUgY29tbWl0UGVuZGluZ0luc2VydCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciAmJiAhdGhpcy5pblBsYWluUGFzdGUgJiYgIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcik7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGludG8gcGFzdGUgZGV0ZWN0aW9uIChwcmV2ZW50cyB2aXN1YWwgbGVhaykuXG4gICAqL1xuICBwcml2YXRlIGNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGNvbnN1bWVkID0gdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHJldHVybiBjb25zdW1lZDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlIHx8IHN0cjtcbiAgICBpZiAoc2VxdWVuY2UgPT09IEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFIHx8IHNlcXVlbmNlID09PSBFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjYXNlIHdoZXJlIHBhc3RlIG1hcmtlcnMgbWlnaHQgYmUgZW1iZWRkZWQgaW4gdGhlIHN0cmluZ1xuICAgIGNvbnN0IHBhc3RlU3RhcnRNYXJrZXIgPSAnXFx4MWJbMjAwfic7XG4gICAgY29uc3QgcGFzdGVFbmRNYXJrZXIgPSAnXFx4MWJbMjAxfic7XG5cbiAgICAvLyBDaGVjayBpZiBzdHIgY29udGFpbnMgcGFzdGUgc3RhcnQgbWFya2VyIChoYW5kbGVzIGNodW5rZWQgYXJyaXZhbClcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlU3RhcnRNYXJrZXIpKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBwZW5kaW5nIGJ1ZmZlciB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlIHNlcXVlbmNlcyBsZWFraW5nXG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKSk7XG4gICAgICAvLyBFeHRyYWN0IGNvbnRlbnQgYWZ0ZXIgdGhlIHN0YXJ0IG1hcmtlciAoZGlzY2FyZCBhbnkgY29udGVudCBiZWZvcmUgaXQgLSBsaWtlbHkgcGFydGlhbCBlc2NhcGVzKVxuICAgICAgY29uc3Qgc3RhcnRJZHggPSBzdHIuaW5kZXhPZihwYXN0ZVN0YXJ0TWFya2VyKTtcbiAgICAgIGxldCBjb250ZW50ID0gc3RyLnNsaWNlKHN0YXJ0SWR4ICsgcGFzdGVTdGFydE1hcmtlci5sZW5ndGgpO1xuICAgICAgLy8gQ2hlY2sgaWYgZW5kIG1hcmtlciBpcyBhbHNvIGluIHRoaXMgY2h1bmtcbiAgICAgIGlmIChjb250ZW50LmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgICBjb25zdCBlbmRJZHggPSBjb250ZW50LmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgICBjb250ZW50ID0gY29udGVudC5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZyArIGNvbnRlbnQ7XG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxdWVuY2UgPT09IHBhc3RlU3RhcnRNYXJrZXIpIHtcbiAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIGFuZCBzYW5pdGl6ZSBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHRvIHByZXZlbnQgcGFydGlhbCBlc2NhcGVzIGxlYWtpbmdcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nO1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgc3RyIGNvbnRhaW5zIHBhc3RlIGVuZCBtYXJrZXJcbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmluY2x1ZGVzKHBhc3RlRW5kTWFya2VyKSkge1xuICAgICAgY29uc3QgZW5kSWR4ID0gc3RyLmluZGV4T2YocGFzdGVFbmRNYXJrZXIpO1xuICAgICAgY29uc3QgY29udGVudEJlZm9yZSA9IHN0ci5zbGljZSgwLCBlbmRJZHgpO1xuICAgICAgaWYgKGNvbnRlbnRCZWZvcmUpIHtcbiAgICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIGNvbnRlbnRCZWZvcmUpO1xuICAgICAgfVxuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNlcXVlbmNlID09PSBwYXN0ZUVuZE1hcmtlcikge1xuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleT8ubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsICdcXG4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHRoaXMucGFzdGVCdWZmZXIuc2xpY2UoMCwgLTEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHN0cik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXF1ZW5jZSA9PT0gJ3N0cmluZycgJiYgc2VxdWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHNlcXVlbmNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY2FwdHVyZUNvbGxhcHNlZFBhc3RlKGNvbnRlbnQ6IHN0cmluZywgbGluZUNvdW50OiBudW1iZXIsIHdhc1RydW5jYXRlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIGNvbnN0IGNoYXJEaXNwbGF5ID0gd2FzVHJ1bmNhdGVkID8gYCR7Y29udGVudC5sZW5ndGh9K2AgOiBgJHtjb250ZW50Lmxlbmd0aH1gO1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgbGluZXM6IGxpbmVDb3VudCxcbiAgICAgIGNoYXJEaXNwbGF5LFxuICAgICAgdHJ1bmNhdGVkOiB3YXNUcnVuY2F0ZWQsXG4gICAgfTtcbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICBjb25zdCBoaW50ID0gYFBhc3RlIGNhcHR1cmVkOiAke2xpbmVDb3VudH0gbGluZSR7bGluZUNvdW50ID09PSAxID8gJycgOiAncyd9JHt3YXNUcnVuY2F0ZWQgPyAnICh0cnVuY2F0ZWQpJyA6ICcnfS4gRW50ZXIgdG8gc2VuZCwgQ3RybCtMIHRvIGVkaXQsIEJhY2tzcGFjZSB0byBkaXNjYXJkLmA7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCdW5kbGUoeyBtYWluOiBoaW50IH0pO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGNvbW1pdFBhc3RlQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSByZXR1cm47XG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGxpbmVDb3VudCA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpLmxlbmd0aDtcbiAgICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICAgIGlmIChsaW5lQ291bnQgPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICAgIHRoaXMuY2FwdHVyZUNvbGxhcHNlZFBhc3RlKGNvbnRlbnQsIGxpbmVDb3VudCwgd2FzVHJ1bmNhdGVkKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUGxhaW5QYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICAvLyBGYWxsYmFjayBwYXN0ZSBjYXB0dXJlIHdoZW4gYnJhY2tldGVkIHBhc3RlIGlzbid0IHN1cHBvcnRlZFxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwga2V5Py5jdHJsIHx8IGtleT8ubWV0YSkge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgdHJlYXQgZXNjYXBlIHNlcXVlbmNlcyAoYXJyb3cga2V5cywgZXRjLikgYXMgcGFzdGVcbiAgICAvLyBFc2NhcGUgc2VxdWVuY2VzIHN0YXJ0IHdpdGggXFx4MWIgKEVTQykgYW5kIGFyZSB1c2VkIGZvciBjdXJzb3IgbW92ZW1lbnQsIGV0Yy5cbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLnN0YXJ0c1dpdGgoJ1xceDFiJykpIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcXVlbmNlID0ga2V5Py5zZXF1ZW5jZSA/PyAnJztcbiAgICBjb25zdCBjaHVuayA9IHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwID8gc3RyIDogc2VxdWVuY2U7XG4gICAgaWYgKCFjaHVuaykge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGNodW5rLmxlbmd0aCwgbm93KTtcblxuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMucmVjb3JkUmVjZW50UGxhaW5DaHVuayhjaHVuaywgbm93KTtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVua011bHRpcGxlID0gY2h1bmsubGVuZ3RoID4gMTtcbiAgICBjb25zdCBoYXNOZXdsaW5lID0gL1tcXHJcXG5dLy50ZXN0KGNodW5rKTtcbiAgICBjb25zdCBidXJzdEFjdGl2ZSA9IHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gMCAmJiBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA8PSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICBjb25zdCBidXJzdFRyaWdnZXIgPSBidXJzdEFjdGl2ZSAmJiB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlVHJpZ2dlckNoYXJzO1xuICAgIGNvbnN0IGhhc1JlY2VudE5vbk5ld2xpbmUgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnNvbWUoZW50cnkgPT4gIS9eW1xcclxcbl0rJC8udGVzdChlbnRyeS50ZXh0KSk7XG4gICAgY29uc3QgZWFybHlOZXdsaW5lVHJpZ2dlciA9XG4gICAgICBoYXNOZXdsaW5lICYmXG4gICAgICBidXJzdEFjdGl2ZSAmJlxuICAgICAgaGFzUmVjZW50Tm9uTmV3bGluZSAmJlxuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzO1xuICAgIGNvbnN0IG5ld2xpbmVUcmlnZ2VyID0gaGFzTmV3bGluZSAmJiAodGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgZWFybHlOZXdsaW5lVHJpZ2dlcik7XG4gICAgY29uc3QgbG9va3NMaWtlUGFzdGUgPSB0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBuZXdsaW5lVHJpZ2dlcjtcblxuICAgIGlmICghbG9va3NMaWtlUGFzdGUpIHtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMuaW5QbGFpblBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGZpcnN0IC0gdGhpcyBpcyB0aGUgcHJpbWFyeSBzb3VyY2Ugbm93XG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5jb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCk7XG4gICAgICBjb25zdCByZWNsYWltZWQgPSB0aGlzLnJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgLy8gQ29tYmluZSBwZW5kaW5nIGJ1ZmZlciB3aXRoIGFueSByZWNsYWltZWQgY2h1bmtzXG4gICAgICBjb25zdCBjb21iaW5lZCA9IHBlbmRpbmcgKyByZWNsYWltZWQ7XG4gICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBSZW1vdmUgYW55IGNoYXJzIHRoYXQgbGVha2VkIGludG8gYnVmZmVyIChsZWdhY3kgcmVjbGFpbSBwYXRoKVxuICAgICAgICBpZiAocmVjbGFpbWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZW1vdmVDb3VudCA9IE1hdGgubWluKHRoaXMuYnVmZmVyLmxlbmd0aCwgcmVjbGFpbWVkLmxlbmd0aCk7XG4gICAgICAgICAgY29uc3Qgc3VmZml4ID0gdGhpcy5idWZmZXIuc2xpY2UoLXJlbW92ZUNvdW50KTtcbiAgICAgICAgICBpZiAocmVtb3ZlQ291bnQgPiAwICYmIHN1ZmZpeCA9PT0gcmVjbGFpbWVkLnNsaWNlKC1yZW1vdmVDb3VudCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5idWZmZXIubGVuZ3RoIC0gcmVtb3ZlQ291bnQpO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9IGNvbWJpbmVkLnNsaWNlKDAsIHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKTtcbiAgICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKSB7XG4gICAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGNvbWJpbmVkLmVuZHNXaXRoKGNodW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2h1bmtBbHJlYWR5Q2FwdHVyZWQpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGxhaW5QYXN0ZScsIGNodW5rKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhY2tQbGFpblBhc3RlQnVyc3QobGVuZ3RoOiBudW1iZXIsIG5vdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCB8fCBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zKSB7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IG5vdztcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCArPSBsZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk6IHZvaWQge1xuICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gMDtcbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIC8vIEFsc28gY2FuY2VsIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlclxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRSZWNlbnRQbGFpbkNodW5rKHRleHQ6IHN0cmluZywgYXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gYXQgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnB1c2goeyB0ZXh0LCBhdCB9KTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBwcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybjtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5tYXAoZW50cnkgPT4gZW50cnkudGV4dCkuam9pbignJyk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHJldHVybiBjb21iaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICB9XG4gICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZmluYWxpemVQbGFpblBhc3RlKCk7XG4gICAgfSwgdGhpcy5wbGFpblBhc3RlSWRsZU1zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluYWxpemVQbGFpblBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHJldHVybjtcblxuICAgIC8vIFNhbml0aXplIHRvIHJlbW92ZSBhbnkgaW5qZWN0ZWQgZXNjYXBlIHNlcXVlbmNlcywgdGhlbiBub3JtYWxpemUgbGluZSBlbmRpbmdzXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBsYWluUGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3QgbGluZUNvdW50ID0gY29udGVudC5zcGxpdCgnXFxuJykubGVuZ3RoO1xuICAgIGlmIChsaW5lQ291bnQgPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICB0aGlzLmNhcHR1cmVDb2xsYXBzZWRQYXN0ZShjb250ZW50LCBsaW5lQ291bnQsIHdhc1RydW5jYXRlZCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIC8vIERvbid0IGluc2VydCBkdXJpbmcgcGFzdGUgb3BlcmF0aW9ucyAtIGNvbnRlbnQgZ29lcyB0byBwYXN0ZSBidWZmZXJcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IHRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUgYW5kIHVzZXIgdHlwZXMsIGV4cGFuZCB0byBidWZmZXIgZmlyc3QgdGhlbiBpbnNlcnQgYXQgY3Vyc29yXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgIH1cbiAgICAvLyBTYW5pdGl6ZSBpbnB1dCB0byByZW1vdmUgc3BlY2lhbCBmb3JtYXR0aW5nIGNoYXJhY3RlcnNcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRleHQpO1xuICAgIGlmICghc2FuaXRpemVkKSByZXR1cm47XG4gICAgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZCBiZWZvcmUgc2xpY2luZ1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHNhbml0aXplZCArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICB0aGlzLmN1cnNvciArPSBzYW5pdGl6ZWQubGVuZ3RoO1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciByZW1haW5zIHZhbGlkIGFmdGVyIG1vZGlmaWNhdGlvblxuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgc3VibWl0IHRoYXQgaW5zdGVhZCBvZiB0aGUgYnVmZmVyIHRleHRcbiAgICAvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBzdWJtaXRUZXh0IGlzIGNhbGxlZCBwcm9ncmFtbWF0aWNhbGx5XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIGNvbnN0IHNob3VsZFRyaW0gPSB0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLnRyaW07XG4gICAgICBjb25zdCBub3JtYWxpemVkQ2FwdHVyZSA9IHNob3VsZFRyaW0gPyB0ZXh0LnRyaW0oKSA6IHRleHQ7XG4gICAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMuYWxsb3dFbXB0eSAmJiAhbm9ybWFsaXplZENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKG5vcm1hbGl6ZWRDYXB0dXJlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFkZCBzZWNyZXRzIG9yIHNsYXNoIGNvbW1hbmRzIHRvIGhpc3Rvcnkvc2Nyb2xsYmFja1xuICAgIGlmICghdGhpcy5zZWNyZXRNb2RlICYmICFub3JtYWxpemVkLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgdGhpcy5kaXNwbGF5VXNlclByb21wdChub3JtYWxpemVkKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNlY3JldE1vZGUpIHtcbiAgICAgIC8vIFN0aWxsIHRyYWNrIHNsYXNoIGNvbW1hbmRzIGluIGhpc3RvcnkgZm9yIGNvbnZlbmllbmNlXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICB0aGlzLmVtaXQoJ3F1ZXVlJywgbm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdCgnc3VibWl0Jywgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0U3BhY2UgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCcgJyk7XG4gICAgY29uc3QgaGFzQXJnVGV4dCA9IGZpcnN0U3BhY2UgPj0gMCAmJiAvXFxTLy50ZXN0KHRoaXMuYnVmZmVyLnNsaWNlKGZpcnN0U3BhY2UgKyAxKSk7XG4gICAgLy8gSGlkZSBzbGFzaCBzdWdnZXN0aW9ucyB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYXJndW1lbnRzXG4gICAgaWYgKGZpcnN0U3BhY2UgPj0gMCAmJiB0aGlzLmN1cnNvciA+IGZpcnN0U3BhY2UgJiYgaGFzQXJnVGV4dCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yU2xpY2UgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgY29uc3QgY29tbWFuZFNsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gY3Vyc29yU2xpY2Uuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiBjdXJzb3JTbGljZTtcbiAgICBjb25zdCBmYWxsYmFja1NsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gdGhpcy5idWZmZXIuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiB0aGlzLmJ1ZmZlcjtcbiAgICBjb25zdCBwYXJ0aWFsID0gKGNvbW1hbmRTbGljZS50cmltRW5kKCkgfHwgZmFsbGJhY2tTbGljZS50cmltRW5kKCkgfHwgJy8nKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnN1Z2dlc3Rpb25JbmRleF0/LmNvbW1hbmQ7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuYXZhaWxhYmxlQ29tbWFuZHNcbiAgICAgIC5maWx0ZXIoY21kID0+IGNtZC5jb21tYW5kLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYXJ0aWFsKSlcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc3VnZ2VzdGlvbnMuZmluZEluZGV4KHMgPT4gcy5jb21tYW5kID09PSBwcmV2aW91cyk7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGlkeCA+PSAwID8gaWR4IDogMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHNldEF2YWlsYWJsZUNvbW1hbmRzKGNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuYXZhaWxhYmxlQ29tbWFuZHMgPSBjb21tYW5kcztcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5U3VnZ2VzdGlvbihzdWJtaXQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgc3VnZ2VzdGlvbkluZGV4IGlzIHZhbGlkLCBkZWZhdWx0IHRvIGZpcnN0IGl0ZW1cbiAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogMDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XTtcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdWJtaXQpIHtcbiAgICAgIHRoaXMuc3VibWl0VGV4dChzZWxlY3RlZC5jb21tYW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWZmZXIgPSBgJHtzZWxlY3RlZC5jb21tYW5kfSBgO1xuICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVTdWdnZXN0aW9ucyhkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXNldCBpbmRleCBpZiBzdWdnZXN0aW9ucyB3ZXJlIGNsZWFyZWQgYnV0IGluZGV4IHdhc24ndFxuICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkluZGV4ICE9PSAtMSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3VycmVudCBpbmRleCBpcyB2YWxpZCBiZWZvcmUgY29tcHV0aW5nIG5leHRcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogLTE7XG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBjb25zdCBjbGFtcGVkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxLCBuZXh0KSk7XG4gICAgaWYgKGNsYW1wZWQgPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4ICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGNsYW1wZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBFdmVudCBxdWV1ZSAtLS0tLS0tLS0tLS1cblxuICBhZGRFdmVudCh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gYWRkRXZlbnQgY2FsbGVkOiB0eXBlPSR7dHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7Y29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplRXZlbnRUeXBlKHR5cGUpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIG5vcm1hbGl6ZWQgdHlwZT0ke25vcm1hbGl6ZWR9YCk7XG4gICAgaWYgKFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Byb21wdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdyZXNwb25zZScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0aG91Z2h0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3N0cmVhbScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ2J1aWxkJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rlc3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0Jykge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoe1xuICAgICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIGlmIChmb3JtYXR0ZWQpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZC5lbmRzV2l0aCgnXFxuJykgPyBmb3JtYXR0ZWQgOiBgJHtmb3JtYXR0ZWR9XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgY29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuXG4gICAgLy8gUHJpb3JpdHkgcXVldWU6IHByb21wdCBldmVudHMgYXJlIGluc2VydGVkIGF0IHRoZSBmcm9udCB0byBlbnN1cmUgaW1tZWRpYXRlIGRpc3BsYXlcbiAgICAvLyBUaGlzIGd1YXJhbnRlZXMgdXNlciBpbnB1dCBpcyBlY2hvZWQgYmVmb3JlIGFueSBhc3luYyBwcm9jZXNzaW5nIHJlc3BvbnNlc1xuICAgIGlmIChub3JtYWxpemVkID09PSAncHJvbXB0Jykge1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3Qgbm9uLXByb21wdCBldmVudCBhbmQgaW5zZXJ0IGJlZm9yZSBpdFxuICAgICAgLy8gVGhpcyBtYWludGFpbnMgcHJvbXB0IG9yZGVyIHdoaWxlIGdpdmluZyB0aGVtIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzXG4gICAgICBjb25zdCBpbnNlcnRJbmRleCA9IHRoaXMuZXZlbnRRdWV1ZS5maW5kSW5kZXgoZSA9PiBlLnR5cGUgIT09ICdwcm9tcHQnKTtcbiAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnNwbGljZShpbnNlcnRJbmRleCwgMCwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlLXJlbmRlciB0aGUgcHJvbXB0L2NvbnRyb2wgYmFyIGltbWVkaWF0ZWx5LlxuICAgKiBUaGlzIGtlZXBzIHRoZSBjaGF0IGJveCBwaW5uZWQgZHVyaW5nIGxvbmcgc3RyZWFtaW5nIHJ1bnMgaW5zdGVhZCBvZiB3YWl0aW5nXG4gICAqIGZvciB0aGUgZXZlbnQgcXVldWUgdG8gZHJhaW4gYmVmb3JlIHRoZSBwcm9tcHQgcmVhcHBlYXJzLlxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRPdmVybGF5KGltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlIHx8IHRoaXMuZGlzcG9zZWQgfHwgIXRoaXMub3V0cHV0LmlzVFRZIHx8IHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWV2ZW50KSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgY29hbGVzY2VkID0gdGhpcy5jb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJFdmVudChjb2FsZXNjZWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIE5ldmVyIGFsbG93IGEgcmVuZGVyaW5nIGZhaWx1cmUgdG8gc3RhbGwgdGhlIGV2ZW50IHF1ZXVlXG4gICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrOyAvLyBEb24ndCB0cnkgdG8gd3JpdGUgYWZ0ZXIgZGlzcG9zYWxcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJyA/IGVycm9yIDogJ1Vua25vd24gcmVuZGVyZXIgZXJyb3InO1xuICAgICAgICAgIHRoaXMub3V0cHV0LndyaXRlKGBcXG5bcmVuZGVyZXJdICR7bWVzc2FnZX1cXG5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGRpc3Bvc2VkIGJlZm9yZSBjb250aW51aW5nXG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhaztcblxuICAgICAgICAvLyBOb3RlOiBGb3IgcHJvbXB0IGV2ZW50cywgdGhlIG92ZXJsYXkgaXMgYWxyZWFkeSByZW5kZXJlZCBpbiByZW5kZXJFdmVudCgpXG4gICAgICAgIC8vIHZpYSByZW5kZXJQcm9tcHRPdmVybGF5KHRydWUpLiBObyBuZWVkIHRvIHJlbmRlciBhZ2FpbiBoZXJlLlxuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgICAgICAvLyBFbnN1cmUgcHJvbXB0IHJlbmRlcmluZyBpcyBhbGxvd2VkIGZvciBzdWJzZXF1ZW50IGV2ZW50c1xuICAgICAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vIGRlbGF5IGZvciBwcm9tcHQgZXZlbnRzIC0gcmVuZGVyIGltbWVkaWF0ZWx5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQUxXQVlTIHJlbmRlciBwcm9tcHQgYWZ0ZXIgcXVldWUgY29tcGxldGVzIHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBzdGF0dXMvdG9nZ2xlcyBzdGF5IHBpbm5lZCBhbmQgcmVzcG9uc2VzIGFyZSBmdWxseSByZW5kZXJlZFxuICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIGFkamFjZW50IHJlc3BvbnNlL3Rob3VnaHQgZXZlbnRzIGludG8gYSBzaW5nbGUgYmxvY2sgc28gY29udGludW91c1xuICAgKiBjaGF0IHRleHQgcmVuZGVycyB3aXRoIG9uZSBidWxsZXQgaW5zdGVhZCBvZiBvbmUgcGVyIGNodW5rLlxuICAgKi9cbiAgcHJpdmF0ZSBjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudDogVUlFdmVudCk6IFVJRXZlbnQge1xuICAgIGNvbnN0IGlzTWVyZ2VhYmxlID0gKHRhcmdldDogVUlFdmVudCB8IHVuZGVmaW5lZCk6IHRhcmdldCBpcyBVSUV2ZW50ID0+XG4gICAgICBCb29sZWFuKFxuICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAhdGFyZ2V0LmlzQ29tcGFjdGVkICYmXG4gICAgICAgICAgKCh0YXJnZXQudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Jlc3BvbnNlJykgfHxcbiAgICAgICAgICAgICh0YXJnZXQudHlwZSA9PT0gJ3Rob3VnaHQnICYmIHRhcmdldC5yYXdUeXBlID09PSAndGhvdWdodCcpKVxuICAgICAgKTtcblxuICAgIGlmICghaXNNZXJnZWFibGUoZXZlbnQpKSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmIGlzTWVyZ2VhYmxlKHRoaXMuZXZlbnRRdWV1ZVswXSkpIHtcbiAgICAgIGNvbnN0IG5leHQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKSE7XG4gICAgICBjb25zdCBuZWVkc1NlcGFyYXRvciA9XG4gICAgICAgIGV2ZW50LmNvbnRlbnQubGVuZ3RoID4gMCAmJiAhZXZlbnQuY29udGVudC5lbmRzV2l0aCgnXFxuJykgJiYgIW5leHQuY29udGVudC5zdGFydHNXaXRoKCdcXG4nKTtcbiAgICAgIGV2ZW50LmNvbnRlbnQgPSBuZWVkc1NlcGFyYXRvciA/IGAke2V2ZW50LmNvbnRlbnR9XFxuJHtuZXh0LmNvbnRlbnR9YCA6IGAke2V2ZW50LmNvbnRlbnR9JHtuZXh0LmNvbnRlbnR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggcGVuZGluZyByZW5kZXJlciBldmVudHMuXG4gICAqIFVzZWZ1bCBmb3Igc3RhcnR1cCBmbG93cyAoZS5nLiwgd2VsY29tZSBiYW5uZXIpIHRvIGd1YXJhbnRlZSB0aGUgc2Nyb2xsYmFjayBpcyBoeWRyYXRlZFxuICAgKiBiZWZvcmUgY29udGludWluZyB3aXRoIGFkZGl0aW9uYWwgVUkgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIGZsdXNoRXZlbnRzKHRpbWVvdXRNczogbnVtYmVyID0gMjUwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gS2ljayBvZmYgcHJvY2Vzc2luZyBpZiBpZGxlXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiAhdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSAmJiB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB3aGlsZSAoKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApICYmIERhdGUubm93KCkgLSBzdGFydCA8IHRpbWVvdXRNcykge1xuICAgICAgYXdhaXQgdGhpcy5kZWxheSg1KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJFdmVudChldmVudDogVUlFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIHJlbmRlckV2ZW50OiB0eXBlPSR7ZXZlbnQudHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7ZXZlbnQuY29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBsb2dEZWJ1ZygnW0RFQlVHIHJlbmRlcmVyXSBwbGFpbk1vZGUgLSB3cml0aW5nIGRpcmVjdGx5Jyk7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQbGFpbiA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgICBpZiAoZm9ybWF0dGVkUGxhaW4pIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZFBsYWluLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZFBsYWluIDogYCR7Zm9ybWF0dGVkUGxhaW59XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIGZvcm1hdHRlZCBsZW5ndGg9JHtmb3JtYXR0ZWQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICghZm9ybWF0dGVkKSByZXR1cm47XG5cbiAgICAvLyBBbGxvdyBwcm9tcHRzIGFuZCByZXNwb25zZXMgdG8gYWx3YXlzIHJlbmRlciAoZG9uJ3QgZGVkdXBsaWNhdGUpXG4gICAgLy8gT25seSBkZWR1cGxpY2F0ZSBzdHJlYW1pbmcgY29udGVudFxuICAgIGNvbnN0IHNpZ25hdHVyZSA9IGAke2V2ZW50LnJhd1R5cGV9OiR7ZXZlbnQuY29udGVudH1gO1xuICAgIGlmIChldmVudC50eXBlID09PSAnc3RyZWFtJyAmJiBzaWduYXR1cmUgPT09IHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdwcm9tcHQnKSB7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5ID0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBiZWZvcmUgd3JpdGluZyBuZXcgY29udGVudFxuICAgIGlmICh0aGlzLnByb21wdEhlaWdodCA+IDAgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdzdHJlYW0nICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lICYmIGZvcm1hdHRlZC50cmltKCkpIHtcbiAgICAgIC8vIEtlZXAgc2Nyb2xsYmFjayBvcmRlcmluZyBwcmVkaWN0YWJsZSB3aGVuIHByZXZpb3VzIG91dHB1dCBlbmRlZCBtaWQtbGluZVxuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZm9ybWF0dGVkKTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IHJlc3RvcmUgdGhlIHByb21wdCBvdmVybGF5IHNvIHRoZSBjaGF0IGJveCBzdGF5cyBwaW5uZWQgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVFdmVudFR5cGUodHlwZTogUmVuZGVyZXJFdmVudFR5cGUpOiBDYW5vbmljYWxFdmVudFR5cGUgfCBudWxsIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIHJldHVybiAncHJvbXB0JztcbiAgICAgIGNhc2UgJ3Rob3VnaHQnOlxuICAgICAgICByZXR1cm4gJ3Rob3VnaHQnO1xuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgIGNhc2UgJ3N0cmVhbWluZyc6XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIGNhc2UgJ3Rvb2wnOlxuICAgICAgY2FzZSAndG9vbC1jYWxsJzpcbiAgICAgICAgcmV0dXJuICd0b29sJztcbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0JzpcbiAgICAgICAgcmV0dXJuICd0b29sLXJlc3VsdCc7XG4gICAgICBjYXNlICdidWlsZCc6XG4gICAgICAgIHJldHVybiAnYnVpbGQnO1xuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiAndGVzdCc7XG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiAncmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KGV2ZW50OiBVSUV2ZW50KTogc3RyaW5nIHtcbiAgICAvLyBDb21wYWN0ZWQgYmxvY2tzIGFscmVhZHkgaGF2ZSBzZXBhcmF0b3IgYW5kIGZvcm1hdHRpbmdcbiAgICBpZiAoZXZlbnQuaXNDb21wYWN0ZWQpIHtcbiAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgIH1cblxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJykge1xuICAgICAgLy8gQmFubmVycyBkaXNwbGF5IHdpdGhvdXQgYnVsbGV0IHByZWZpeFxuICAgICAgY29uc3QgbGluZXMgPSBldmVudC5jb250ZW50LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSk7XG4gICAgICByZXR1cm4gYCR7bGluZXMuam9pbignXFxuJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBDb21wYWN0LCB1c2VyLWZyaWVuZGx5IGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIC8vIFVzZXIgcHJvbXB0IC0ganVzdCB0aGUgdGV4dCAocHJvbXB0IGJveCBoYW5kbGVzIHN0eWxpbmcpXG4gICAgICAgIHJldHVybiBgJHt0aGVtZS5wcmltYXJ5KCc+Jyl9ICR7ZXZlbnQuY29udGVudH1cXG5gO1xuXG4gICAgICBjYXNlICd0aG91Z2h0Jzoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cmF0ZWQgPSB0aGlzLmN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoZXZlbnQuY29udGVudCk7XG4gICAgICAgIGlmICghY3VyYXRlZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUmVuZGVyVGhvdWdodChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCA9IHtcbiAgICAgICAgICB0ZXh0OiBjdXJhdGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGhpbmtpbmdCbG9jayhjdXJhdGVkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndG9vbCc6IHtcbiAgICAgICAgLy8gQ29tcGFjdCB0b29sIGRpc3BsYXk6IOKaoVRvb2xOYW1lIOKGkiByZXN1bHRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LmNvbnRlbnQucmVwbGFjZSgvXlvij7rimpnil4tdXFxzKi8sICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sLXJlc3VsdCc6IHtcbiAgICAgICAgLy8gSW5saW5lIHJlc3VsdDog4pSU4pSAIHN1bW1hcnlcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoZXZlbnQuY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ2J1aWxkJywgbGFiZWxDb2xvcjogdGhlbWUud2FybmluZyB9KTtcblxuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGV2ZW50LmNvbnRlbnQsIHsgbGFiZWw6ICd0ZXN0JywgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcblxuICAgICAgY2FzZSAnc3RyZWFtJzoge1xuICAgICAgICAvLyBTdHJlYW1pbmcgY29udGVudCBpcyB0aGUgbW9kZWwncyByZXNwb25zZSAtIHBhc3MgdGhyb3VnaCBkaXJlY3RseVxuICAgICAgICAvLyBJTVBPUlRBTlQ6IERvbid0IGZpbHRlciBzdHJlYW1pbmcgY2h1bmtzIHdpdGggaXNHYXJiYWdlT3V0cHV0IGJlY2F1c2U6XG4gICAgICAgIC8vIDEuIENodW5rcyBhcnJpdmUgY2hhcmFjdGVyLWJ5LWNoYXJhY3RlciBvciBpbiBzbWFsbCBwaWVjZXNcbiAgICAgICAgLy8gMi4gU21hbGwgY2h1bmtzIGxpa2UgXCIuXCIgb3IgXCI6XCIgYXJlIHZhbGlkIHBhcnRzIG9mIHNlbnRlbmNlc1xuICAgICAgICAvLyAzLiBGaWx0ZXJpbmcgd291bGQgYnJlYWsgdGhlIHN0cmVhbWluZyBkaXNwbGF5XG4gICAgICAgIC8vIE9ubHkgZmlsdGVyIGNvbXBsZXRlbHkgZW1wdHkgY29udGVudFxuICAgICAgICBpZiAoIWV2ZW50LmNvbnRlbnQpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gUHJvZ3JhbW1hdGljIGZpbHRlcjogcmVqZWN0IGNvbnRlbnQgdGhhdCBsb29rcyBsaWtlIGludGVybmFsL2dhcmJhZ2Ugb3V0cHV0XG4gICAgICAgIGlmICh0aGlzLmlzR2FyYmFnZU91dHB1dChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhbiByZXNwb25zZSB3aXRob3V0IGV4Y2Vzc2l2ZSBidWxsZXRzLCB3cmFwcGVkIGZvciByZWFkYWJpbGl0eVxuICAgICAgICBjb25zdCBpc0Vycm9yID0gZXZlbnQucmF3VHlwZSA9PT0gJ2Vycm9yJztcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgaXNFcnJvciA/IHsgbGFiZWw6ICdlcnJvcicsIGxhYmVsQ29sb3I6IHRoZW1lLmVycm9yIH0gOiB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9ncmFtbWF0aWMgZ2FyYmFnZSBkZXRlY3Rpb24gLSBjaGVja3MgaWYgY29udGVudCBsb29rcyBsaWtlIGludGVybmFsL3N5c3RlbSBvdXRwdXRcbiAgICogdGhhdCBzaG91bGRuJ3QgYmUgc2hvd24gdG8gdXNlcnMuIFVzZXMgc3RydWN0dXJhbCBjaGVja3MsIG5vdCBwYXR0ZXJuIG1hdGNoaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBpc0dhcmJhZ2VPdXRwdXQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb250ZW50IHx8IGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICBjb25zdCB0cmltbWVkID0gY29udGVudC50cmltKCk7XG5cbiAgICAvLyBWZXJ5IHNob3J0IGNvbnRlbnQgY2hlY2tzIC0gY2F0Y2ggbGVha2VkIHB1bmN0dWF0aW9uIGZyYWdtZW50cyBsaWtlIFwiLlwiIG9yIFwiOlwiXG4gICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IDMpIHtcbiAgICAgIC8vIFNpbmdsZSBwdW5jdHVhdGlvbiBtYXJrcyBvciB2ZXJ5IHNob3J0IHB1bmN0dWF0aW9uIHNlcXVlbmNlcyBhcmUgZ2FyYmFnZVxuICAgICAgaWYgKC9eWy4sOjshPyojXFwtXz0rfFxcXFwvPD4oKXt9W1xcXWAnXCJ+XkAmJSRdKyQvLnRlc3QodHJpbW1lZCkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgY29udGVudCBpcyBqdXN0IHB1bmN0dWF0aW9uIG9uIG11bHRpcGxlIGxpbmVzIChsZWFrZWQgcmVhc29uaW5nKVxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcHVuY3RPbmx5TGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiB7XG4gICAgICBjb25zdCBsaW5lVHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgcmV0dXJuIGxpbmVUcmltbWVkLmxlbmd0aCA+IDAgJiYgL15bLiw6OyE/KiNcXC1fPSt8XFxcXC88Pigpe31bXFxdYCdcIn5eQCYlJFxcc10rJC8udGVzdChsaW5lVHJpbW1lZCk7XG4gICAgfSk7XG4gICAgLy8gSWYgQUxMIG5vbi1lbXB0eSBsaW5lcyBhcmUganVzdCBwdW5jdHVhdGlvbiwgaXQncyBnYXJiYWdlXG4gICAgY29uc3Qgbm9uRW1wdHlMaW5lcyA9IGxpbmVzLmZpbHRlcihsID0+IGwudHJpbSgpLmxlbmd0aCA+IDApO1xuICAgIGlmIChub25FbXB0eUxpbmVzLmxlbmd0aCA+IDAgJiYgcHVuY3RPbmx5TGluZXMubGVuZ3RoID09PSBub25FbXB0eUxpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogY29udGVudCBzdGFydGluZyB3aXRoIDwgdGhhdCBpc24ndCB2YWxpZCBtYXJrZG93bi9jb2RlXG4gICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgnPCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzxodHRwJykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPCEnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogY29udGFpbnMgXCJ0bz1mdW5jdGlvbnMuXCIgb3IgXCJ0bz10b29scy5cIiAoaW50ZXJuYWwgcm91dGluZylcbiAgICBpZiAoY29udGVudC5pbmNsdWRlcygndG89ZnVuY3Rpb25zLicpIHx8IGNvbnRlbnQuaW5jbHVkZXMoJ3RvPXRvb2xzLicpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBsb29rcyBsaWtlIGludGVybmFsIGluc3RydWN0aW9uIChxdW90ZWQgc3lzdGVtIHRleHQpXG4gICAgaWYgKGNvbnRlbnQuc3RhcnRzV2l0aCgnXCInKSAmJiBjb250ZW50LmluY2x1ZGVzKCdibG9jaycpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ3Rvb2wnKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogdmVyeSBzaG9ydCBjb250ZW50IHRoYXQncyBqdXN0IHRpbWluZyBpbmZvXG4gICAgaWYgKGNvbnRlbnQubGVuZ3RoIDwgMzAgJiYgL2VsYXBzZWR8c2Vjb25kcz98bXNcXGIvaS50ZXN0KGNvbnRlbnQpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBtb3N0bHkgcHVuY3R1YXRpb24vc3ltYm9scyAtIGxlYWtlZCByZWFzb25pbmcgZnJhZ21lbnRzXG4gICAgY29uc3QgbWVhbmluZ2Z1bExpbmVzID0gbGluZXMuZmlsdGVyKGxpbmUgPT4ge1xuICAgICAgY29uc3QgbGluZVRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcbiAgICAgIGlmICghbGluZVRyaW1tZWQpIHJldHVybiBmYWxzZTtcbiAgICAgIC8vIExpbmUgbXVzdCBoYXZlIGF0IGxlYXN0IDMwJSBhbHBoYW51bWVyaWMgY29udGVudFxuICAgICAgY29uc3QgYWxwaGFOdW0gPSAobGluZVRyaW1tZWQubWF0Y2goL1thLXpBLVowLTldL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgICByZXR1cm4gbGluZVRyaW1tZWQubGVuZ3RoID4gMCAmJiBhbHBoYU51bSAvIGxpbmVUcmltbWVkLmxlbmd0aCA+PSAwLjM7XG4gICAgfSk7XG4gICAgLy8gSWYgbGVzcyB0aGFuIDMwJSBvZiBsaW5lcyBhcmUgbWVhbmluZ2Z1bCwgaXQncyBnYXJiYWdlXG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMgJiYgbWVhbmluZ2Z1bExpbmVzLmxlbmd0aCAvIGxpbmVzLmxlbmd0aCA8IDAuMykge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogZ2liYmVyaXNoIC0gaGlnaCByYXRpbyBvZiBub24td29yZCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYWxwaGFDb3VudCA9IChjb250ZW50Lm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1xccy9nLCAnJykubGVuZ3RoO1xuICAgIGlmICh0b3RhbENvdW50ID4gMjAgJiYgYWxwaGFDb3VudCAvIHRvdGFsQ291bnQgPCAwLjQpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBMZXNzIHRoYW4gNDAlIGxldHRlcnMgPSBsaWtlbHkgZ2FyYmFnZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTYW5pdGl6ZSB0b29sIHJlc3VsdCBjb250ZW50IHRvIHJlbW92ZSBsZWFrZWQgcmVhc29uaW5nL3RoaW5raW5nIG91dHB1dC5cbiAgICogVGhpcyBmaWx0ZXJzIG91dCBmcmFnbWVudHMgdGhhdCBsb29rIGxpa2UgaW50ZXJuYWwgbW9kZWwgb3V0cHV0LlxuICAgKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm4gJyc7XG5cbiAgICAvLyBTcGxpdCBpbnRvIGxpbmVzIGFuZCBmaWx0ZXIgb3V0IGdhcmJhZ2UgbGluZXNcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IGNsZWFuTGluZXM6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IHRyaW1tZWQgPSBsaW5lLnRyaW0oKTtcblxuICAgICAgLy8gU2tpcCBlbXB0eSBsaW5lcyBhdCBzdGFydFxuICAgICAgaWYgKGNsZWFuTGluZXMubGVuZ3RoID09PSAwICYmICF0cmltbWVkKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBsZWFrZWQgcmVhc29uaW5nIGZyYWdtZW50c1xuICAgICAgLy8gQ29tbW9uIHBhdHRlcm5zOiBzaW5nbGUgcHVuY3R1YXRpb24sIG1hcmtkb3duIGFydGlmYWN0cywgZW1vamkgZnJhZ21lbnRzXG4gICAgICBpZiAoL15bKVxcXX0+KmAnXCJdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuICAgICAgaWYgKC9eWypfXXsyLH0kLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCAqKiBvciBfX1xuICAgICAgaWYgKC9eW3zilILilINdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IHZlcnRpY2FsIGJhcnNcbiAgICAgIGlmICgvXlvilIDilIHilZBdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGhvcml6b250YWwgbGluZXNcbiAgICAgIGlmICgvXlxcLnsyLH0kLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBkb3RzXG4gICAgICBpZiAoL15bXFxz77iPXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCB3aGl0ZXNwYWNlL2Vtb2ppIG1vZGlmaWVyc1xuICAgICAgaWYgKC9eWzpcXHNdKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGNvbG9ucy93aGl0ZXNwYWNlXG4gICAgICBpZiAoL15bLFxcc10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgY29tbWFzL3doaXRlc3BhY2VcblxuICAgICAgLy8gU2tpcCBtYXJrZG93biBib2xkL2l0YWxpYyBmcmFnbWVudHMgdGhhdCBsZWFrZWRcbiAgICAgIGlmICgvXlxcKnsxLDJ9W14qXSpcXCp7MCwyfSQvLnRlc3QodHJpbW1lZCkgJiYgdHJpbW1lZC5sZW5ndGggPCAxMCAmJiAhL1xcd3szLH0vLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgYXJlIGp1c3Qgc2hvcnQgZnJhZ21lbnRzIHdpdGggaGlnaCBwdW5jdHVhdGlvbiByYXRpb1xuICAgICAgY29uc3QgYWxwaGFJbkxpbmUgPSAodHJpbW1lZC5tYXRjaCgvW2EtekEtWjAtOV0vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIGlmICh0cmltbWVkLmxlbmd0aCA+IDAgJiYgdHJpbW1lZC5sZW5ndGggPCAyMCAmJiBhbHBoYUluTGluZSAvIHRyaW1tZWQubGVuZ3RoIDwgMC4zKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCB2ZXJ5IHNob3J0IGxpbmVzIHRoYXQgYXJlIGp1c3QgcHVuY3R1YXRpb24gb3Igc2luZ2xlIGNoYXJzIChleGNlcHQgbnVtYmVycylcbiAgICAgIGlmICh0cmltbWVkLmxlbmd0aCA8PSAyICYmICEvXlxcZCskLy50ZXN0KHRyaW1tZWQpICYmICEvXlthLXpBLVpdezJ9JC8udGVzdCh0cmltbWVkKSkge1xuICAgICAgICAvLyBBbGxvdyBzcGVjaWZpYyBzaG9ydCBwYXR0ZXJucyBsaWtlIFwiT0tcIiwgXCIwXCIsIFwiMVwiIGV0Yy5cbiAgICAgICAgaWYgKCEvXig/Om9rfG5vfHllc3xcXGQrKSQvaS50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBzdHJheSBwYXJlbnRoZXNlcyBvciBicmFja2V0cyBmcm9tIHJlYXNvbmluZ1xuICAgICAgaWYgKC9eWygpW1xcXXt9XSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTtcblxuICAgICAgLy8gU2tpcCBsaW5lcyB0aGF0IGxvb2sgbGlrZSBtYXJrZG93biBjb2RlIGZlbmNlIGFydGlmYWN0c1xuICAgICAgaWYgKC9eYGBgXFxzKiQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICBjbGVhbkxpbmVzLnB1c2gobGluZSk7XG4gICAgfVxuXG4gICAgLy8gVHJpbSB0cmFpbGluZyBlbXB0eSBsaW5lc1xuICAgIHdoaWxlIChjbGVhbkxpbmVzLmxlbmd0aCA+IDAgJiYgIWNsZWFuTGluZXNbY2xlYW5MaW5lcy5sZW5ndGggLSAxXT8udHJpbSgpKSB7XG4gICAgICBjbGVhbkxpbmVzLnBvcCgpO1xuICAgIH1cblxuICAgIHJldHVybiBjbGVhbkxpbmVzLmpvaW4oJ1xcbicpLnRyaW0oKTtcbiAgfVxuXG4gIHByaXZhdGUgY3VyYXRlUmVhc29uaW5nQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJykudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBsaW1pdGVkID1cbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID4gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnNcbiAgICAgICAgPyBub3JtYWxpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzKVxuICAgICAgICA6IG5vcm1hbGl6ZWQ7XG5cbiAgICBjb25zdCBtYXhTZWdtZW50cyA9IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzICogMztcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbWl0ZWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5mbGF0TWFwKGxpbmUgPT4gbGluZS5zcGxpdCgvKD88PVsuPyFdKVxccysvKSlcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL15b4oCiKuKPuuKXi1xcLVxcdTIwMjJdK1xccyovLCAnJykudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkZWR1cGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNlZ21lbnQgPSBzZWdtZW50LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWRTZWdtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKGtleSk7XG4gICAgICBkZWR1cGVkLnB1c2gobm9ybWFsaXplZFNlZ21lbnQpO1xuICAgICAgaWYgKGRlZHVwZWQubGVuZ3RoID49IG1heFNlZ21lbnRzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWR1cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpb3JpdGl6ZWQgPSB0aGlzLnByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhkZWR1cGVkKTtcbiAgICBpZiAocHJpb3JpdGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW1pdGVkU2VsZWN0aW9uID0gcHJpb3JpdGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMpO1xuICAgIGNvbnN0IGJ1bGxldGVkID0gbGltaXRlZFNlbGVjdGlvbi5tYXAobGluZSA9PiB0aGlzLmVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lKSk7XG5cbiAgICByZXR1cm4gYnVsbGV0ZWQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICgvXihb4oCiKuKPuuKXiy1dfFxcZCtbLildKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBg4oCiICR7bGluZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAvXihcXGQrWy4pXVxcc3xzdGVwXFxzKlxcZCt8cGxhblxcYnxuZXh0XFxifHRoZW5cXGJ8Z29hbFxcYikvaS50ZXN0KGxpbmUpIHx8XG4gICAgICAvXlstKuKAol1cXHMvLnRlc3QobGluZSkgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJy0+JykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJ+KGkicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCc6ICcpIHx8XG4gICAgICAvXFxiKHRlc3R8dmVyaWZ5fHZhbGlkYXRlfGNoZWNrfGJ1aWxkfHJ1bnxkZXBsb3l8ZGlmZnxsaW50fHR5cGUgP2NoZWNrfGZpeHxidWd8aXNzdWV8cmlza3xtaXRpZ2F0ZXxpbnZlc3RpZ2F0ZSlcXGIvaS50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKHNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlZCA9IHNlZ21lbnRzLm1hcCgodGV4dCwgaW5kZXgpID0+ICh7XG4gICAgICB0ZXh0LFxuICAgICAgaW5kZXgsXG4gICAgICBzY29yZTogdGhpcy5yZWFzb25pbmdTaWduYWxTY29yZSh0ZXh0KSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNTaWduYWwgPSBzY29yZWQuc29tZShpdGVtID0+IGl0ZW0uc2NvcmUgPiAwKTtcbiAgICBpZiAoIWhhc1NpZ25hbCkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIHNjb3JlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlZC5tYXAoaXRlbSA9PiBpdGVtLnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFzb25pbmdTaWduYWxTY29yZShsaW5lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5sb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAzO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbktleXdvcmRzID0gW1xuICAgICAgJ3Rvb2wnLCAnY29tbWFuZCcsICdzY3JpcHQnLCAnY29udGV4dCcsICdzdW1tYXInLCAncmlzaycsICdpc3N1ZScsXG4gICAgICAnaW52ZXN0aWdhdGUnLCAncm9vdCBjYXVzZScsICdyZW1lZGlhdCcsICdtaXRpZ2F0JywgJ2ZpeCcsICdwYXRjaCcsXG4gICAgICAndGVzdCcsICd2ZXJpZnknLCAndmFsaWRhdGUnLCAnY2hlY2snLCAnYnVpbGQnLCAnZGVwbG95JywgJ3J1bicsXG4gICAgICAnZGlmZicsICdsaW50JywgJ3R5cGVjaGVjaycsICdiZW5jaG1hcmsnLFxuICAgIF07XG4gICAgaWYgKGFjdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHNjb3JlICs9IDI7XG4gICAgfVxuXG4gICAgaWYgKC9bIzrihpJdfC0+Ly50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cblxuICAgIGlmICgvXihpKCd8IGEpbXxpIHdpbGx8bGV0IG1lfHN0YXJ0aW5nfG5vd3xva3xzdXJlKVxcYi9pLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMTIwKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVuZGVyVGhvdWdodChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQgJiYgdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dCA9PT0gbm9ybWFsaXplZCkge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyNCwgTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDQsIDExMCkpOyAvLyBSZXNwb25zaXZlIHRvIHRlcm1pbmFsIHdpZHRoXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBsaW5lSWR4ID0gMDsgbGluZUlkeCA8IGxpbmVzLmxlbmd0aDsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZUlkeF0hO1xuICAgICAgaWYgKCFsaW5lLnRyaW0oKSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JkLXdyYXAgZWFjaCBsaW5lXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoLyhcXHMrKS8pO1xuICAgICAgbGV0IGN1cnJlbnRMaW5lID0gJyc7XG5cbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBpZiAoKGN1cnJlbnRMaW5lICsgd29yZCkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgICAgLy8gRmlyc3QgbGluZSBvZiB0aGlzIHBhcmFncmFwaCBnZXRzIOKPuiwgcmVzdCBnZXQgaW5kZW50XG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IHdvcmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgY2FsbCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDij7ogW1NlYXJjaF0gcGF0dGVybjogXCJmb29cIiwgcGF0aDogXCJzcmNcIixcbiAgICogICAgICAgICAgICAgIG91dHB1dF9tb2RlOiBcImNvbnRlbnRcIiwgaGVhZF9saW1pdDogMzBcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbChgWyR7bmFtZU1hdGNoWzFdfV1gKX1cXG5gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXTtcbiAgICBjb25zdCBhcmdzU3RyID0gbWF0Y2hbMl0hO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzIC0gNCwgNTYpO1xuXG4gICAgLy8gRm9ybWF0OiDij7ogW1Rvb2xOYW1lXSBhcmdzLi4uXG4gICAgY29uc3QgcHJlZml4ID0gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgNTsgLy8gXCLij7ogW1Rvb2xOYW1lXSBcIiB2aXNpYmxlIGxlbmd0aFxuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQocHJlZml4TGVuICsgNCk7IC8vIEV4dHJhIGluZGVudCBmb3Igd3JhcHBlZCBhcmdzXG5cbiAgICAvLyBQYXJzZSBhbmQgZm9ybWF0IGFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlVG9vbEFyZ3MoYXJnc1N0cik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4LnRyaW1FbmQoKX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IHByZWZpeDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXJnID0gYXJnc1tpXSE7XG4gICAgICBjb25zdCBhcmdUZXh0ID0gYCR7dGhlbWUudWkubXV0ZWQoYXJnLmtleSArICc6Jyl9ICR7dGhpcy5mb3JtYXRBcmdWYWx1ZShhcmcua2V5LCBhcmcudmFsdWUpfWA7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBpIDwgYXJncy5sZW5ndGggLSAxID8gJywgJyA6ICcnO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGFyZyBmaXRzIG9uIGN1cnJlbnQgbGluZVxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICBpZiAodGhpcy5zdHJpcEFuc2kodGVzdExpbmUpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lICE9PSBwcmVmaXgpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIGFyZ3VtZW50cyBmcm9tIHN0cmluZyBsaWtlOiBrZXk6IFwidmFsdWVcIiwga2V5MjogdmFsdWUyXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbEFyZ3MoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgYXJnczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIFNpbXBsZSByZWdleCB0byBleHRyYWN0IGtleTogdmFsdWUgcGFpcnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sKV0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIGFyZ3MucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGFuIGFyZ3VtZW50IHZhbHVlICh0cnVuY2F0ZSBsb25nIHN0cmluZ3MpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdEFyZ1ZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcbiAgICBjb25zdCBpc1F1b3RlZCA9IHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJyk7XG4gICAgY29uc3QgaW5uZXIgPSBpc1F1b3RlZCA/IHZhbHVlLnNsaWNlKDEsIC0xKSA6IHZhbHVlO1xuXG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzaG91bGRQcmVzZXJ2ZSA9XG4gICAgICBsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3F1ZXJ5JyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjbWQnO1xuXG4gICAgLy8gVHJ1bmNhdGUgbG9uZyB2YWx1ZXMgd2hlbiBub3QgZXhwbGljaXRseSBwcmVzZXJ2aW5nXG4gICAgY29uc3QgbWF4TGVuID0gNDA7XG4gICAgY29uc3QgdHJ1bmNhdGVkID0gc2hvdWxkUHJlc2VydmUgfHwgaW5uZXIubGVuZ3RoIDw9IG1heExlbiA/IGlubmVyIDogaW5uZXIuc2xpY2UoMCwgbWF4TGVuIC0gMykgKyAnLi4uJztcblxuICAgIHJldHVybiBpc1F1b3RlZCA/IGBcIiR7dHJ1bmNhdGVkfVwiYCA6IHRydW5jYXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIHJlc3VsdCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDijr8gIEZvdW5kIDEyIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN1bW1hcnkgbGluZSAoZS5nLiwgXCJGb3VuZCBYIGxpbmVzXCIpXG4gICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gY29udGVudC5tYXRjaCgvXihGb3VuZCBcXGQrICg/OmxpbmVzP3xmaWxlcz98bWF0Y2hlcz8pfFJlYWQgXFxkKyBsaW5lcz98V3JvdGUgXFxkKyBsaW5lcz98RWRpdGVkfENyZWF0ZWR8RGVsZXRlZCkvaSk7XG4gICAgaWYgKHN1bW1hcnlNYXRjaCkge1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvciBvdGhlciByZXN1bHRzLCBzaG93IHRydW5jYXRlZCBwcmV2aWV3XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMykge1xuICAgICAgY29uc3QgcHJldmlldyA9IGxpbmVzLnNsaWNlKDAsIDIpLmpvaW4oJ1xcbicpO1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtwcmV2aWV3fVxcbiAgJHt0aGVtZS51aS5tdXRlZChgLi4uICR7bGluZXMubGVuZ3RoIC0gMn0gbW9yZSBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClgKX1cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCBjYWxsOiDij7ogW1JlYWRdIGZpbGUudHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmdzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFxzKig/OlxcKCguKilcXCkpPyQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXSE7XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdPy50cmltKCkgfHwgJyc7XG5cbiAgICAvLyBUcmFjayB0b29sIG5hbWUgZm9yIHBhaXJpbmcgd2l0aCByZXN1bHRcbiAgICB0aGlzLmxhc3RUb29sTmFtZSA9IHRvb2xOYW1lO1xuXG4gICAgLy8gR2V0IHRvb2wtc3BlY2lmaWMgY29sb3IgKGJhc2g9b3JhbmdlLCByZWFkPWN5YW4sIHdyaXRlPWdyZWVuLCBldGMuKVxuICAgIGNvbnN0IHRvb2xDb2xvciA9IGdldFRvb2xDb2xvcih0b29sTmFtZSk7XG4gICAgY29uc3QgY29sb3JlZFRvb2xOYW1lID0gdG9vbENvbG9yKGBbJHt0b29sTmFtZX1dYCk7XG5cbiAgICAvLyBJZiBubyBhcmdzLCBqdXN0IHNob3cgdG9vbCBuYW1lXG4gICAgaWYgKCFhcmdzU3RyKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbG9yZWRUb29sTmFtZX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5jb2xzIC0gODsgLy8gTGVhdmUgcm9vbSBmb3IgbWFyZ2luc1xuXG4gICAgLy8gUGFyc2UgaW5kaXZpZHVhbCBwYXJhbXNcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyKTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb2xvcmVkVG9vbE5hbWV9ICR7YXJnc1N0cn1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdG9vbENvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nIChkZWZhdWx0IGdyZWVuIGNvbG9yKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUGFyYW1zKFxuICAgIHRvb2xOYW1lOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+LFxuICAgIG1heFdpZHRoOiBudW1iZXJcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdGhlbWUudG9vbCk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRvb2wgcGFyYW1zIHdpdGggY3VzdG9tIHRvb2wgY29sb3JcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtc0NvbG9yZWQoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlcixcbiAgICB0b29sQ29sb3I6ICh0ZXh0OiBzdHJpbmcpID0+IHN0cmluZ1xuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0b29sQ29sb3IoYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgY29sb3JlZFZhbHVlID0gdGhpcy5jb2xvclBhcmFtVmFsdWUocGFyYW0ua2V5LCBwYXJhbS52YWx1ZSk7XG4gICAgICBjb25zdCBwYXJhbVRleHQgPSBgJHtwYXJhbS5rZXl9OiAke2NvbG9yZWRWYWx1ZX1gO1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtID8gcGFyYW1UZXh0IDogYCwgJHtwYXJhbVRleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWRkaW5nIHRoaXMgcGFyYW0gd291bGQgZXhjZWVkIHdpZHRoXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgcGFyYW1TdHI7XG4gICAgICBjb25zdCBwbGFpbkxlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aCh0ZXN0TGluZSk7XG5cbiAgICAgIGlmIChwbGFpbkxlbmd0aCA+IG1heFdpZHRoICYmICFmaXJzdFBhcmFtKSB7XG4gICAgICAgIC8vIFN0YXJ0IG5ldyBsaW5lXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIHBhcmFtVGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IHBhcmFtU3RyO1xuICAgICAgfVxuICAgICAgZmlyc3RQYXJhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogQ29sb3IgY3JpdGljYWwgcGFyYW1ldGVyIHZhbHVlcyAocGF0aHMsIGNvbW1hbmRzKSBmb3IgcmVhZGFiaWxpdHkuXG4gICovXG4gIHByaXZhdGUgY29sb3JQYXJhbVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8IGxvd2VyS2V5ID09PSAnZmlsZScgfHwgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fCBsb3dlcktleSA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAobG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fCBsb3dlcktleSA9PT0gJ2NtZCcpIHtcbiAgICAgIHJldHVybiB0aGVtZS50b29sKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgYSBzaG9ydCBzdW1tYXJ5IGZyb20gdG9vbCBhcmdzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUb29sU3VtbWFyeSh0b29sTmFtZTogc3RyaW5nLCBhcmdzU3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB0b29sID0gdG9vbE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIEV4dHJhY3QgcGF0aC9maWxlIGZvciBmaWxlIG9wZXJhdGlvbnNcbiAgICBpZiAoWydyZWFkJywgJ3dyaXRlJywgJ2VkaXQnLCAnZ2xvYicsICdncmVwJywgJ3NlYXJjaCddLmluY2x1ZGVzKHRvb2wpKSB7XG4gICAgICBjb25zdCBwYXRoTWF0Y2ggPSBhcmdzU3RyLm1hdGNoKC8oPzpwYXRofGZpbGVfcGF0aHxwYXR0ZXJuKTpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAocGF0aE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoTWF0Y2hbMV0hO1xuICAgICAgICByZXR1cm4gdGhlbWUuZmlsZT8ucGF0aCA/IHRoZW1lLmZpbGUucGF0aChwYXRoKSA6IHRoZW1lLnVpLm11dGVkKHBhdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgY29tbWFuZCBmb3IgYmFzaFxuICAgIGlmICh0b29sID09PSAnYmFzaCcpIHtcbiAgICAgIGNvbnN0IGNtZE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvY29tbWFuZDpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAoY21kTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgY21kID0gY21kTWF0Y2hbMV0hO1xuICAgICAgICByZXR1cm4gdGhlbWUudWkubXV0ZWQoY21kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgcmVzdWx0OiDijr8gIEZvdW5kIFggbGluZXMgKGN0cmwrbyB0byBleHBhbmQpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gU2FuaXRpemUgY29udGVudCBmaXJzdCAtIGZpbHRlciBvdXQgZ2FyYmFnZS9yZWFzb25pbmcgb3V0cHV0IHRoYXQgbGVha2VkIHRocm91Z2hcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplVG9vbFJlc3VsdENvbnRlbnQoY29udGVudCk7XG4gICAgaWYgKCFzYW5pdGl6ZWQgfHwgdGhpcy5pc0dhcmJhZ2VPdXRwdXQoc2FuaXRpemVkKSkge1xuICAgICAgcmV0dXJuICcnOyAvLyBEb24ndCByZW5kZXIgZ2FyYmFnZSB0b29sIHJlc3VsdHNcbiAgICB9XG5cbiAgICAvLyBQYXJzZSBjb21tb24gcmVzdWx0IHBhdHRlcm5zIGZvciBzdW1tYXJ5XG4gICAgY29uc3QgbGluZU1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC8oXFxkKylcXHMqbGluZXM/L2kpO1xuICAgIGNvbnN0IGZpbGVNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvKFxcZCspXFxzKig/OmZpbGVzP3xtYXRjaGVzPykvaSk7XG4gICAgY29uc3QgcmVhZE1hdGNoID0gc2FuaXRpemVkLm1hdGNoKC9yZWFkLio/KFxcZCspXFxzKmxpbmVzPy9pKTtcblxuICAgIC8vIENoZWNrIGlmIGNvbnRlbnQgY29udGFpbnMgYSBmaWxlIHBhdGggb3IgY29tbWFuZCB0aGF0IHNob3VsZCBiZSBwcmVzZXJ2ZWRcbiAgICBjb25zdCBoYXNQYXRoID0gLyg/Ol58XFxzKSg/OlxcL1tcXHcuLy1dK3xbXFx3Li8tXStcXC9bXFx3Li8tXSspLy50ZXN0KHNhbml0aXplZCk7XG4gICAgY29uc3QgaGFzQ29tbWFuZCA9IC9eXFxzKlxcJFxccysuK3xjb21tYW5kOi9pLnRlc3Qoc2FuaXRpemVkKTtcbiAgICBjb25zdCBpc1BhdGhPckRpciA9IC9eKD86RmlsZXxEaXJlY3Rvcnl8UGF0aCk6XFxzKi9pLnRlc3Qoc2FuaXRpemVkKTtcblxuICAgIGxldCBzdW1tYXJ5OiBzdHJpbmc7XG4gICAgbGV0IHByZXNlcnZlRnVsbCA9IGZhbHNlO1xuXG4gICAgaWYgKHJlYWRNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBSZWFkICR7cmVhZE1hdGNoWzFdfSBsaW5lc2A7XG4gICAgfSBlbHNlIGlmIChsaW5lTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgRm91bmQgJHtsaW5lTWF0Y2hbMV19IGxpbmUke2xpbmVNYXRjaFsxXSA9PT0gJzEnID8gJycgOiAncyd9YDtcbiAgICB9IGVsc2UgaWYgKGZpbGVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2ZpbGVNYXRjaFsxXX0gZmlsZSR7ZmlsZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoc2FuaXRpemVkLm1hdGNoKC9eKHN1Y2Nlc3N8b2t8ZG9uZXxjb21wbGV0ZWR8d3JpdHRlbnxlZGl0ZWR8Y3JlYXRlZCkvaSkpIHtcbiAgICAgIHN1bW1hcnkgPSAn4pyTJztcbiAgICB9IGVsc2UgaWYgKGlzUGF0aE9yRGlyIHx8IGhhc1BhdGggfHwgaGFzQ29tbWFuZCkge1xuICAgICAgLy8gUHJlc2VydmUgZnVsbCBjb250ZW50IGZvciBwYXRocywgZGlyZWN0b3JpZXMsIGFuZCBjb21tYW5kc1xuICAgICAgLy8gT25seSBzaG93IGZpcnN0IGxpbmUgaWYgbXVsdGktbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lID0gc2FuaXRpemVkLnNwbGl0KCdcXG4nKVswXSB8fCBzYW5pdGl6ZWQ7XG4gICAgICBzdW1tYXJ5ID0gZmlyc3RMaW5lO1xuICAgICAgcHJlc2VydmVGdWxsID0gdHJ1ZTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRXh0cmFjdCBtZWFuaW5nZnVsIHN1bW1hcnkgZnJvbSBjb250ZW50XG4gICAgICBsZXQgc3VtbWFyeVRleHQgPSBzYW5pdGl6ZWQ7XG5cbiAgICAgIC8vIEhhbmRsZSBcIlN1bW1hcnk6XCIgcHJlZml4IGZyb20gd2ViIHNlYXJjaC9leHRyYWN0IHJlc3VsdHNcbiAgICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvXlN1bW1hcnk6XFxzKiguKykvaSk7XG4gICAgICBpZiAoc3VtbWFyeU1hdGNoKSB7XG4gICAgICAgIHN1bW1hcnlUZXh0ID0gc3VtbWFyeU1hdGNoWzFdITtcbiAgICAgIH1cblxuICAgICAgLy8gRm9yIG11bHRpLWxpbmUgY29udGVudCwgdXNlIGZpcnN0IG1lYW5pbmdmdWwgbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lID0gc3VtbWFyeVRleHQuc3BsaXQoJ1xcbicpWzBdPy50cmltKCkgfHwgc3VtbWFyeVRleHQ7XG5cbiAgICAgIC8vIFRyeSB0byBlbmQgYXQgYSBzZW50ZW5jZSBib3VuZGFyeSBmb3IgcmVhZGFiaWxpdHkgKHVwIHRvIDEyMCBjaGFycylcbiAgICAgIGNvbnN0IG1heExlbiA9IDEyMDtcbiAgICAgIGlmIChmaXJzdExpbmUubGVuZ3RoID4gbWF4TGVuKSB7XG4gICAgICAgIC8vIExvb2sgZm9yIHNlbnRlbmNlIGVuZCB3aXRoaW4gbGltaXRcbiAgICAgICAgY29uc3Qgc2VudGVuY2VFbmQgPSBmaXJzdExpbmUuc2xpY2UoMCwgbWF4TGVuKS5zZWFyY2goL1suIT87XVxcc3xbLiE/O10kLyk7XG4gICAgICAgIGlmIChzZW50ZW5jZUVuZCA+IDMwKSB7XG4gICAgICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZS5zbGljZSgwLCBzZW50ZW5jZUVuZCArIDEpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIE5vIGdvb2Qgc2VudGVuY2UgYnJlYWssIHRydW5jYXRlIGF0IHdvcmQgYm91bmRhcnlcbiAgICAgICAgICBjb25zdCB0cnVuY2F0ZWQgPSBmaXJzdExpbmUuc2xpY2UoMCwgbWF4TGVuKTtcbiAgICAgICAgICBjb25zdCBsYXN0U3BhY2UgPSB0cnVuY2F0ZWQubGFzdEluZGV4T2YoJyAnKTtcbiAgICAgICAgICBzdW1tYXJ5ID0gbGFzdFNwYWNlID4gNjAgPyB0cnVuY2F0ZWQuc2xpY2UoMCwgbGFzdFNwYWNlKSArICfigKYnIDogdHJ1bmNhdGVkICsgJ+KApic7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN1bW1hcnkgPSBmaXJzdExpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgY29sbGFwc2VkIHJlc3VsdCBmb3IgQ3RybCtPIGV4cGFuc2lvbiAodXNlIHNhbml0aXplZCBjb250ZW50KVxuICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMucHVzaCh7XG4gICAgICB0b29sTmFtZTogdGhpcy5sYXN0VG9vbE5hbWUgfHwgJ3Rvb2wnLFxuICAgICAgY29udGVudDogc2FuaXRpemVkLFxuICAgICAgc3VtbWFyeSxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9KTtcblxuICAgIC8vIFRyaW0gdG8gbWF4IHNpemVcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5sZW5ndGggPiB0aGlzLm1heENvbGxhcHNlZFJlc3VsdHMpIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMuc2hpZnQoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvcmVkU3VtbWFyeSA9IHRoaXMuY29sb3JSZXN1bHRTdW1tYXJ5KHN1bW1hcnkpO1xuICAgIC8vIE9ubHkgc2hvdyBleHBhbmQgaGludCBpZiBjb250ZW50IGlzIGFjdHVhbGx5IGNvbGxhcHNlZCAobXVsdGktbGluZSBvciB3YXMgdHJ1bmNhdGVkKVxuICAgIGNvbnN0IGhhc01vcmVDb250ZW50ID0gc2FuaXRpemVkLmluY2x1ZGVzKCdcXG4nKSB8fCBzdW1tYXJ5LmVuZHNXaXRoKCfigKYnKSB8fCAoIXByZXNlcnZlRnVsbCAmJiBzYW5pdGl6ZWQubGVuZ3RoID4gc3VtbWFyeS5sZW5ndGgpO1xuICAgIGNvbnN0IGV4cGFuZEhpbnQgPSBoYXNNb3JlQ29udGVudCA/IGAgJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9YCA6ICcnO1xuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29sb3JlZFN1bW1hcnl9JHtleHBhbmRIaW50fVxcbmA7XG4gIH1cblxuICBwcml2YXRlIGNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghc3VtbWFyeSkgcmV0dXJuIHN1bW1hcnk7XG4gICAgY29uc3QgbG93ZXIgPSBzdW1tYXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdmYWlsJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5lcnJvcihzdW1tYXJ5KTtcbiAgICB9XG4gICAgaWYgKHN1bW1hcnkuc3RhcnRzV2l0aCgn4pyTJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3VwZGF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnY3JlYXRlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd3cml0dGVuJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5zdWNjZXNzKHN1bW1hcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhlbWUuaW5mbyhzdW1tYXJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHJlc3BvbnNlIHdpdGggYnVsbGV0IG9uIGZpcnN0IGxpbmVcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFJlc3BvbnNlKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcCB0ZXh0IHdpdGggYSBzaW5nbGUgYnVsbGV0IG9uIHRoZSBmaXJzdCBsaW5lIGFuZCB0aWR5IGluZGVudGF0aW9uIGZvciByZWFkYWJpbGl0eS5cbiAgICogUHJldmVudHMgYXdrd2FyZCBtaWQtd29yZCB0ZXJtaW5hbCB3cmFwcGluZyBieSBoYW5kbGluZyB0aGUgbGF5b3V0IG91cnNlbHZlcy5cbiAgICovXG4gIHByaXZhdGUgd3JhcEJ1bGxldFRleHQoXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgbWF4V2lkdGg/OiBudW1iZXI7IGxhYmVsPzogc3RyaW5nOyBsYWJlbENvbG9yPzogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB9ID0ge31cbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBjb25zdCBjbGVhbmVkID0gY29udGVudC5yZXBsYWNlKC9eW+KPuuKAouKXi11cXHMqLywgJycpLnRyaW1FbmQoKTtcbiAgICBpZiAoIWNsZWFuZWQudHJpbSgpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gUmVzZXJ2ZSBhIGxpdHRsZSBtYXJnaW4gdG8gcmVkdWNlIHRlcm1pbmFsIHdyYXAgaml0dGVyXG4gICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMjAsIE1hdGgubWluKG9wdGlvbnMubWF4V2lkdGggPz8gYXZhaWxhYmxlV2lkdGggLSAyLCBhdmFpbGFibGVXaWR0aCkpO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IG9wdGlvbnMubGFiZWxcbiAgICAgID8gYCR7b3B0aW9ucy5sYWJlbENvbG9yID8gb3B0aW9ucy5sYWJlbENvbG9yKG9wdGlvbnMubGFiZWwpIDogb3B0aW9ucy5sYWJlbH0ke3RoZW1lLnVpLm11dGVkKCcgwrcgJyl9YFxuICAgICAgOiAnJztcbiAgICBjb25zdCBidWxsZXRQcmVmaXggPSBgJHtidWxsZXR9ICR7bGFiZWxUZXh0fWA7XG4gICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgoYCR7YnVsbGV0fSBgKSk7XG5cbiAgICBjb25zdCBsaW5lcyA9IGNsZWFuZWQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgZmlyc3ROb25FbXB0eSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHJhd0xpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSByYXdMaW5lLnRyaW0oKTtcbiAgICAgIGlmICghbGluZSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7IC8vIFByZXNlcnZlIGludGVudGlvbmFsIHNwYWNpbmcgYmV0d2VlbiBwYXJhZ3JhcGhzXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoL1xccysvKTtcbiAgICAgIGxldCBjdXJyZW50ID0gJyc7XG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgICAgY29uc3QgcHJlZml4TGVuZ3RoID0gdGhpcy52aXNpYmxlTGVuZ3RoKGZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnQpO1xuICAgICAgICBpZiAocHJlZml4TGVuZ3RoICsgdGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiBtYXhXaWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRoaW5raW5nIGJsb2NrIHdpdGggZW5oYW5jZWQgdmlzdWFsIGRlc2lnbi5cbiAgICogVXNlcyBhIGRpc3RpbmN0IHZpc3VhbCBzdHlsZSB0byBjbGVhcmx5IHNlcGFyYXRlIHRoaW5raW5nIGZyb20gcmVzcG9uc2VzLlxuICAgKlxuICAgKiBJbiBwbGFpbiBvdXRwdXQgbW9kZSB3ZSBrZWVwIGl0IHNpbXBsZSBhbmQgaW5saW5lIHdpdGggdGhlIHJlc3Qgb2YgdGhlXG4gICAqIHN0cmVhbSBzbyB0cmFuc2NyaXB0cyByZW1haW4gZWFzeSB0byBzY2FuLlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUaGlua2luZ0Jsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkgcmV0dXJuICcnO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKTtcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChub3JtYWxpemVkLCB7XG4gICAgICBsYWJlbDogJ3RoaW5raW5nJyxcbiAgICAgIGxhYmVsQ29sb3I6IHRoZW1lLnNlY29uZGFyeSA/PyB0aGVtZS51aS5tdXRlZCwgLy8gUHVycGxlIGZvciB0aGlua2luZyAoZGlzdGluY3QgZnJvbSBibHVlIHRvb2xzKVxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB3cmFwVGV4dFRvV2lkdGgodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGlmICghdGV4dC50cmltKCkpIHJldHVybiBbJyddO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gd2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzdHJlYW1pbmcgZWxhcHNlZCB0aW1lIGluIENsYXVkZSBDb2RlIHN0eWxlOiAzbSAzMHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBlbGFwc2VkID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSAvIDEwMDApO1xuICAgIGlmIChlbGFwc2VkIDwgNSkgcmV0dXJuIG51bGw7IC8vIERvbid0IHNob3cgZm9yIHZlcnkgc2hvcnQgZHVyYXRpb25zXG4gICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gZWxhcHNlZCAlIDYwO1xuICAgIGlmIChtaW5zID4gMCkge1xuICAgICAgcmV0dXJuIGAke21pbnN9bSAke3NlY3N9c2A7XG4gICAgfVxuICAgIHJldHVybiBgJHtzZWNzfXNgO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogU2hvd3MgYSB2aXN1YWwgc2VwYXJhdG9yIHdpdGggXCJoaXN0b3J5XCIgbGFiZWwgYW5kIGN0cmwrbyBoaW50XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzLCA4MCk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gYCAke2xhYmVsfSBgO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLm1heCgwLCBtYXhXaWR0aCAtIGxhYmVsVGV4dC5sZW5ndGgpO1xuICAgIGNvbnN0IGxlZnRQYWQgPSBNYXRoLmZsb29yKHBhZGRpbmcgLyAyKTtcbiAgICBjb25zdCByaWdodFBhZCA9IE1hdGguY2VpbChwYWRkaW5nIC8gMik7XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBzdHlsZTog4pWQ4pWQIGhpc3Rvcnkg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJ+KVkCcucmVwZWF0KGxlZnRQYWQpICsgbGFiZWxUZXh0ICsgJ+KVkCcucmVwZWF0KHJpZ2h0UGFkKSk7XG5cbiAgICByZXR1cm4gYFxcbiR7c2VwYXJhdG9yfVxcbiR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIHRvIHRoZSBldmVudCBxdWV1ZVxuICAgKiBUaGlzIGRpc3BsYXlzIGEgY29sbGFwc2VkIHZpZXcgd2l0aCBleHBhbnNpb24gaGludCAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqL1xuICBhZGRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogdm9pZCB7XG4gICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IHRoaXMuZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQsIGxhYmVsKTtcbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IGZvcm1hdHRlZENvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHRoZSBtb3N0IHJlY2VudCB0b29sIHJlc3VsdCBpbmxpbmUgKEN0cmwrTyBzdXBwb3J0KS5cbiAgICogUG9wcyBmcm9tIHRoZSBjb2xsYXBzZWQgcmVzdWx0cyBzdGFjayBhbmQgZGlzcGxheXMgZnVsbCBjb250ZW50LlxuICAgKi9cbiAgZXhwYW5kTGFzdFRvb2xSZXN1bHQoKTogYm9vbGVhbiB7XG4gICAgLy8gRmlyc3QgdHJ5IHRoZSBuZXcgc3RhY2ssIGZhbGxiYWNrIHRvIG9sZCBsYXN0VG9vbFJlc3VsdFxuICAgIGNvbnN0IGNvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMucG9wKCk7XG4gICAgaWYgKCFjb2xsYXBzZWQgJiYgIXRoaXMubGFzdFRvb2xSZXN1bHQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gY29sbGFwc2VkPy5jb250ZW50IHx8IHRoaXMubGFzdFRvb2xSZXN1bHQgfHwgJyc7XG4gICAgY29uc3QgdG9vbE5hbWUgPSBjb2xsYXBzZWQ/LnRvb2xOYW1lIHx8ICdyZXN1bHQnO1xuXG4gICAgLy8gRGV0ZXJtaW5lIGlmIHRoaXMgaXMgc3RydWN0dXJlZCBvdXRwdXQgdGhhdCBzaG91bGRuJ3QgYmUgd29yZC13cmFwcGVkXG4gICAgY29uc3QgaXNTdHJ1Y3R1cmVkID0gdGhpcy5pc1N0cnVjdHVyZWRUb29sT3V0cHV0KHRvb2xOYW1lLCBjb250ZW50KTtcblxuICAgIGxldCByZW5kZXJlZDogc3RyaW5nO1xuICAgIGlmIChpc1N0cnVjdHVyZWQpIHtcbiAgICAgIC8vIFByZXNlcnZlIHN0cnVjdHVyZWQgb3V0cHV0IChncmVwLCBiYXNoLCBjb2RlIG91dHB1dCkgLSBqdXN0IGluZGVudCwgZG9uJ3Qgd3JhcFxuICAgICAgcmVuZGVyZWQgPSB0aGlzLmZvcm1hdFN0cnVjdHVyZWRUb29sT3V0cHV0KHRvb2xOYW1lLCBjb250ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gRm9ybWF0IHByb3NlL3RleHQgd2l0aCB0b29sIG5hbWUgbGFiZWwgYW5kIHdvcmQgd3JhcHBpbmdcbiAgICAgIGNvbnN0IGxhYmVsID0gYCR7dG9vbE5hbWV9YDtcbiAgICAgIHJlbmRlcmVkID0gdGhpcy53cmFwQnVsbGV0VGV4dChjb250ZW50LCB7IGxhYmVsLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuICAgIH1cblxuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogcmVuZGVyZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogZmFsc2UsXG4gICAgfSk7XG5cbiAgICAvLyBDbGVhciBsYXN0VG9vbFJlc3VsdCBpZiB3ZSB1c2VkIHRoZSBzdGFja1xuICAgIGlmIChjb2xsYXBzZWQpIHtcbiAgICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDaGVjayBpZiB0b29sIG91dHB1dCBpcyBzdHJ1Y3R1cmVkIChjb2RlLCBncmVwLCBmaWxlIGxpc3RpbmdzKSB0aGF0IHNob3VsZG4ndCBiZSB3b3JkLXdyYXBwZWQuXG4gICAqL1xuICBwcml2YXRlIGlzU3RydWN0dXJlZFRvb2xPdXRwdXQodG9vbE5hbWU6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG4gICAgLy8gVG9vbHMgdGhhdCBwcm9kdWNlIHN0cnVjdHVyZWQgb3V0cHV0XG4gICAgaWYgKFsnYmFzaCcsICdncmVwJywgJ3JlYWQnLCAnZ2xvYicsICdleGVjdXRlX2Jhc2gnLCAnc2VhcmNoJywgJ2ZpbmQnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8vIENvbnRlbnQgcGF0dGVybnMgdGhhdCBpbmRpY2F0ZSBzdHJ1Y3R1cmVkIG91dHB1dFxuICAgIC8vIC0gRmlsZSBwYXRocyB3aXRoIGNvbG9ucyAoZ3JlcCBvdXRwdXQpOiBzcmMvZmlsZS50czoxMjM6XG4gICAgLy8gLSBMaW5lIG51bWJlcnM6IFwiICAgMeKGklwiIG9yIFwiICA0MjpcIlxuICAgIC8vIC0gQ29kZS1saWtlIHBhdHRlcm5zXG4gICAgaWYgKC9eXFxzKltcXHcuL10rOlxcZCtbOlxcc10vLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBncmVwLXN0eWxlIG91dHB1dFxuICAgIGlmICgvXlxccypcXGQrW+KGkjrilIJ8XVxccy8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGxpbmUtbnVtYmVyZWQgb3V0cHV0XG4gICAgaWYgKC9eW+KUguKUnOKUlOKUgOKUjOKUkOKUmOKUrOKUtOKUvOKVreKVruKVr+KVsF0rLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gYm94IGRyYXdpbmdcbiAgICBpZiAoL15cXHMqWyQ+XVxccytcXHcrLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gY29tbWFuZCBwcm9tcHQgb3V0cHV0XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzdHJ1Y3R1cmVkIHRvb2wgb3V0cHV0IHByZXNlcnZpbmcgbGluZSBzdHJ1Y3R1cmUuXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFN0cnVjdHVyZWRUb29sT3V0cHV0KHRvb2xOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBoZWFkZXIgPSBg4o+6ICR7dGhlbWUuaW5mbyh0b29sTmFtZSl9JHt0aGVtZS51aS5tdXRlZCgnIMK3IGV4cGFuZGVkJyl9XFxuYDtcbiAgICBjb25zdCBpbmRlbnQgPSAnICAnO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKSAtIDQ7XG5cbiAgICBjb25zdCBmb3JtYXR0ZWRMaW5lcyA9IGxpbmVzLm1hcChsaW5lID0+IHtcbiAgICAgIC8vIFRydW5jYXRlIG92ZXJseSBsb25nIGxpbmVzIGluc3RlYWQgb2Ygd3JhcHBpbmcgKHByZXNlcnZlcyBzdHJ1Y3R1cmUpXG4gICAgICBpZiAobGluZS5sZW5ndGggPiBtYXhXaWR0aCkge1xuICAgICAgICByZXR1cm4gaW5kZW50ICsgbGluZS5zbGljZSgwLCBtYXhXaWR0aCAtIDEpICsgJ+KApic7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5kZW50ICsgbGluZTtcbiAgICB9KTtcblxuICAgIHJldHVybiBoZWFkZXIgKyBmb3JtYXR0ZWRMaW5lcy5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb3VudCBvZiBleHBhbmRhYmxlIGNvbGxhcHNlZCByZXN1bHRzXG4gICAqL1xuICBnZXRDb2xsYXBzZWRSZXN1bHRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY29sbGFwc2VkIHJlc3VsdHMgKGUuZy4sIG9uIG5ldyBjb252ZXJzYXRpb24pXG4gICAqL1xuICBjbGVhckNvbGxhcHNlZFJlc3VsdHMoKTogdm9pZCB7XG4gICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cyA9IFtdO1xuICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBudWxsO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFN0YXR1cyAvIG1vZGUgLS0tLS0tLS0tLS0tXG5cbiAgc2V0TW9kZShtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyk6IHZvaWQge1xuICAgIGNvbnN0IHdhc1N0cmVhbWluZyA9IHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgIC8vIFRyYWNrIHN0cmVhbWluZyBzdGFydCB0aW1lIGZvciBlbGFwc2VkIGRpc3BsYXlcbiAgICBpZiAobW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSAwOyAvLyBSZXNldCB0b2tlbiBjb3VudFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBBbHdheXMgcmVuZGVyIHByb21wdCB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50IChyaWNoIG1vZGUgb25seSlcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHRoZSBhbmltYXRlZCBzcGlubmVyIGZvciBzdHJlYW1pbmcgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHJldHVybjsgLy8gQWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5zcGlubmVyRnJhbWUgPSAodGhpcy5zcGlubmVyRnJhbWUgKyAxKSAlIHNwaW5uZXJGcmFtZXMuYnJhaWxsZS5sZW5ndGg7XG4gICAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gKHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgKyAxKSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aDtcbiAgICAgIC8vIFVwZGF0ZSBlbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uIChzbG93ZXIgY3ljbGUpXG4gICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSAzID09PSAwKSB7XG4gICAgICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAodGhpcy5lbGFwc2VkQ29sb3JGcmFtZSArIDEpICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgLy8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBzcGlubmVyL3N0YXIgZnJhbWVcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0sIDEyMCk7IC8vIH44IEZQUyAtIHJlZHVjZWQgZnJvbSA4MG1zIHRvIG1pbmltaXplIGZsaWNrZXJpbmcgd2hpbGUga2VlcGluZyBhbmltYXRpb24gc21vb3RoXG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0aGUgYW5pbWF0ZWQgc3Bpbm5lclxuICAgKi9cbiAgcHJpdmF0ZSBzdG9wU3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0aXZpdHkgbWVzc2FnZSBkaXNwbGF5ZWQgd2l0aCBhbmltYXRlZCBzdGFyXG4gICAqIEV4YW1wbGU6IFwiUnVtaW5hdGluZ+KAplwiIHNob3dzIGFzIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCJcbiAgICovXG4gIHNldEFjdGl2aXR5KG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b2tlbiBjb3VudCBkaXNwbGF5ZWQgaW4gdGhlIGFjdGl2aXR5IGxpbmVcbiAgICovXG4gIHVwZGF0ZVN0cmVhbWluZ1Rva2Vucyh0b2tlbnM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b2tlbiBjb3VudCBhcyBjb21wYWN0IHN0cmluZyAoZS5nLiwgMS4yaywgMjRrLCAxMjhrKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb2tlbkNvdW50KHRva2VuczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodG9rZW5zIDwgMTAwMCkgcmV0dXJuIFN0cmluZyh0b2tlbnMpO1xuICAgIGlmICh0b2tlbnMgPCAxMDAwMCkgcmV0dXJuIGAkeyh0b2tlbnMgLyAxMDAwKS50b0ZpeGVkKDEpfWtgO1xuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHRva2VucyAvIDEwMDApfWtgO1xuICB9XG5cbiAgZ2V0TW9kZSgpOiAnaWRsZScgfCAnc3RyZWFtaW5nJyB7XG4gICAgcmV0dXJuIHRoaXMubW9kZTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCdW5kbGUoeyBtYWluOiBtZXNzYWdlLCBvdmVycmlkZTogbnVsbCwgc3RyZWFtaW5nOiBudWxsIH0pO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzQnVuZGxlKFxuICAgIHN0YXR1czogeyBtYWluPzogc3RyaW5nIHwgbnVsbDsgb3ZlcnJpZGU/OiBzdHJpbmcgfCBudWxsOyBzdHJlYW1pbmc/OiBzdHJpbmcgfCBudWxsIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2U3RyZWFtaW5nID0gdGhpcy5zdGF0dXNTdHJlYW1pbmc7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgbWFpbkNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgb3ZlcnJpZGVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICBpZiAoc3RhdHVzLm1haW4gIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMubWFpbiAhPT0gdGhpcy5zdGF0dXNNZXNzYWdlKSB7XG4gICAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBzdGF0dXMubWFpbjtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgbWFpbkNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzLm92ZXJyaWRlICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm92ZXJyaWRlICE9PSB0aGlzLnN0YXR1c092ZXJyaWRlKSB7XG4gICAgICB0aGlzLnN0YXR1c092ZXJyaWRlID0gc3RhdHVzLm92ZXJyaWRlO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBvdmVycmlkZUNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0NoYW5nZWQgPSBzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gcHJldlN0cmVhbWluZztcbiAgICBpZiAoc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoc3RyZWFtaW5nQ2hhbmdlZCkge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdHVzU3RyZWFtaW5nID0gc3RhdHVzLnN0cmVhbWluZztcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdJbnRyb2R1Y2UgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBwcmV2U3RyZWFtaW5nID09PSBudWxsICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBzdHJlYW1pbmdDbGVhcmVkID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgc3RhdHVzLnN0cmVhbWluZyA9PT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IG9ubHlTdHJlYW1pbmdDaGFuZ2VkID0gc3RyZWFtaW5nQ2hhbmdlZCAmJiAhbWFpbkNoYW5nZWQgJiYgIW92ZXJyaWRlQ2hhbmdlZDtcbiAgICBjb25zdCBza2lwU3RyZWFtaW5nUmVuZGVyID1cbiAgICAgIG9ubHlTdHJlYW1pbmdDaGFuZ2VkICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXN0cmVhbWluZ0ludHJvZHVjZSAmJiAhc3RyZWFtaW5nQ2xlYXJlZDtcblxuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkICYmICFza2lwU3RyZWFtaW5nUmVuZGVyO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU3RhdHVzTWV0YShcbiAgICBtZXRhOiB7XG4gICAgICBtb2RlbD86IHN0cmluZztcbiAgICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgICAgdmVyc2lvbj86IHN0cmluZztcbiAgICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICAgIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnN0YXR1c01ldGEsIC4uLm1ldGEgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdHVzTWV0YSk7XG4gICAgdGhpcy5zdGF0dXNNZXRhID0gbmV4dDtcbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZDtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGVUb2dnbGVzKHN0YXRlOiBQYXJ0aWFsPE1vZGVUb2dnbGVTdGF0ZT4pOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZVN0YXRlID0geyAuLi50aGlzLnRvZ2dsZVN0YXRlLCAuLi5zdGF0ZSB9O1xuICAgIGlmIChcbiAgICAgICFzdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXkgJiZcbiAgICAgICFzdGF0ZS50aGlua2luZ0hvdGtleSAmJlxuICAgICAgIXN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5hdXRvQ29udGludWVIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kdWFsUmxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kZWJ1Z0hvdGtleVxuICAgICkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIGRpc3BsYXkgaW4gdGhlIFVJLlxuICAgKiBDYWxsZWQgZHVyaW5nIGR1YWwtUkwgbW9kZSB0byBzaG93IGFjdGl2ZSBhZ2VudCwgbW9kdWxlL3N0ZXAgcHJvZ3Jlc3MsIGFuZCB3aW4gc3RhdGlzdGljcy5cbiAgICovXG4gIHVwZGF0ZVJMU3RhdHVzKHN0YXR1czogUGFydGlhbDxSTEFnZW50U3RhdHVzPik6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMucmxTdGF0dXMsIC4uLnN0YXR1cyB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5ybFN0YXR1cyk7XG4gICAgdGhpcy5ybFN0YXR1cyA9IG5leHQ7XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIFJMIGFnZW50IHN0YXR1cyAoZS5nLiwgd2hlbiBSTCBydW4gY29tcGxldGVzKS5cbiAgICovXG4gIGNsZWFyUkxTdGF0dXMoKTogdm9pZCB7XG4gICAgdGhpcy5ybFN0YXR1cyA9IHt9O1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgUkwgc3RhdHVzIGZvciBleHRlcm5hbCBhY2Nlc3MuXG4gICAqL1xuICBnZXRSTFN0YXR1cygpOiBSZWFkb25seTxSTEFnZW50U3RhdHVzPiB7XG4gICAgcmV0dXJuIHRoaXMucmxTdGF0dXM7XG4gIH1cblxuICBzZXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gKGxpbmVzID8/IFtdKS5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL1xccyskL2csICcnKSk7XG4gICAgY29uc3QgaGFzQ29udGVudCA9IG5vcm1hbGl6ZWQuc29tZSgobGluZSkgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkID0gdGhpcy5saW1pdElubGluZVBhbmVsKG5vcm1hbGl6ZWQpO1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShsaW1pdGVkKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmxpbmVQYW5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IGxpbWl0ZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHN1cHBvcnRzSW5saW5lUGFuZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMucGxhaW5Nb2RlO1xuICB9XG5cbiAgY2xlYXJJbmxpbmVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSByZXR1cm47XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGxpbWl0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heExpbmVzID0gTWF0aC5tYXgoNCwgTWF0aC5taW4odGhpcy5tYXhJbmxpbmVQYW5lbExpbmVzLCBNYXRoLm1heCgyLCB0aGlzLnJvd3MgLSA4KSkpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPD0gbWF4TGluZXMpIHtcbiAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBsaW5lcy5sZW5ndGggLSBtYXhMaW5lcztcbiAgICBjb25zdCBpbmRpY2F0b3IgPSB0aGVtZS51aS5tdXRlZChg4oCmICR7b3ZlcmZsb3d9IG1vcmUgbGluZXNgKTtcbiAgICBjb25zdCB0YWlsQ291bnQgPSBNYXRoLm1heCgxLCBtYXhMaW5lcyAtIDEpO1xuICAgIGNvbnN0IHRhaWwgPSBsaW5lcy5zbGljZSgtdGFpbENvdW50KTtcbiAgICByZXR1cm4gW2luZGljYXRvciwgLi4udGFpbF07XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gUHJvbXB0IHJlbmRlcmluZyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHJlbmRlclByb21wdCgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgLy8gVGhyb3R0bGUgcmVuZGVycyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdFJlbmRlclRpbWUgPCB0aGlzLnJlbmRlclRocm90dGxlTXMpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVuZGVyKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IHRydWU7XG4gICAgICAgIC8vIFRyYWNrIHRoZSB0aW1lciBmb3IgY2xlYW51cFxuICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMucmVuZGVyVGhyb3R0bGVNcyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb21wdEltbWVkaWF0ZSgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBgPiAke3RoaXMuYnVmZmVyfWA7XG4gICAgICBpZiAoIXRoaXMuaXNQcm9tcHRBY3RpdmUgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShgXFxyJHtFU0MuQ0xFQVJfTElORX0ke2xpbmV9YCk7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlOyAvLyBwcm9tcHQgZW5kcyBtaWQtbGluZSBieSBkZXNpZ25cbiAgICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxsb3dQcm9tcHRSZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSaWNoIGlubGluZSBtb2RlOiBwcm9tcHQgZmxvd3MgbmF0dXJhbGx5IHdpdGggY29udGVudFxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIHRoaXMubGFzdFJlbmRlcldpZHRoID0gbWF4V2lkdGg7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5idWlsZE92ZXJsYXlMaW5lcygpO1xuICAgIGlmICghb3ZlcmxheS5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJlZExpbmVzID0gb3ZlcmxheS5saW5lcy5tYXAobGluZSA9PiB0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIGlmICghcmVuZGVyZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG92ZXJsYXkucHJvbXB0SW5kZXgsIHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVkTGluZXMubGVuZ3RoO1xuICAgIGNvbnN0IHByb21wdENvbCA9IE1hdGgubWluKE1hdGgubWF4KDEsIDMgKyB0aGlzLmN1cnNvciksIHRoaXMuY29scyB8fCA4MCk7XG5cbiAgICBjb25zdCBvdmVybGF5VW5jaGFuZ2VkID1cbiAgICAgIHRoaXMubGFzdE92ZXJsYXlSZW5kZXJlZCAmJlxuICAgICAgdGhpcy5hcnJheXNFcXVhbCh0aGlzLmxhc3RPdmVybGF5UmVuZGVyZWQubGluZXMsIHJlbmRlcmVkTGluZXMpICYmXG4gICAgICB0aGlzLmxhc3RPdmVybGF5UmVuZGVyZWQucHJvbXB0SW5kZXggPT09IHByb21wdEluZGV4ICYmXG4gICAgICB0aGlzLmxhc3RPdmVybGF5UmVuZGVyZWQucHJvbXB0Q29sID09PSBwcm9tcHRDb2w7XG5cbiAgICAvLyBGYXN0IHBhdGg6IG92ZXJsYXkgdW5jaGFuZ2VkLCBhdm9pZCBjbGVhcmluZy9yZXBhaW50aW5nIHRvIHByZXZlbnQgZmxpY2tlclxuICAgIGlmIChvdmVybGF5VW5jaGFuZ2VkKSB7XG4gICAgICBjb25zdCBidWZmZXI6IHN0cmluZ1tdID0gW107XG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbPzI1bCcpO1xuICAgICAgY29uc3QgbGluZXNUb01vdmVVcCA9IGhlaWdodCAtIDEgLSBwcm9tcHRJbmRleDtcbiAgICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtsaW5lc1RvTW92ZVVwfUFgKTtcbiAgICAgIH1cbiAgICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske3Byb21wdENvbH1HYCk7XG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbPzI1aCcpO1xuICAgICAgdGhpcy53cml0ZShidWZmZXIuam9pbignJykpO1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLnByb21wdEhlaWdodCA9IGhlaWdodDtcbiAgICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBwcm9tcHRDb2w7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQmF0Y2ggYWxsIEFOU0kgb3BlcmF0aW9ucyBpbnRvIGEgc2luZ2xlIHdyaXRlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuICAgIC8vIFRoaXMgZWxpbWluYXRlcyB0aGUgdmlzdWFsIGppdHRlciBjYXVzZWQgYnkgbXVsdGlwbGUgc2VxdWVudGlhbCB0ZXJtaW5hbCB3cml0ZXNcbiAgICBjb25zdCBidWZmZXI6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBIaWRlIGN1cnNvciBkdXJpbmcgcmVuZGVyIHRvIHByZXZlbnQgdmlzdWFsIGFydGlmYWN0c1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVsJyk7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyBwcm9tcHQgYW5kIGhhbmRsZSBoZWlnaHQgY2hhbmdlc1xuICAgIC8vIE5vdGU6IFdlIGNoZWNrIGxhc3RPdmVybGF5SGVpZ2h0ID4gMCB0byBrbm93IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIHRvIGNsZWFyLFxuICAgIC8vIGJ1dCB3ZSB1c2UgbGFzdE92ZXJsYXk/LnByb21wdEluZGV4IGZvciBjdXJzb3IgcG9zaXRpb25pbmcgKGRlZmF1bHRpbmcgdG8gMCBpZiBjbGVhcmVkKVxuICAgIGlmICh0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgJiYgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA+IDApIHtcbiAgICAgIC8vIE1vdmUgdXAgZnJvbSBwcm9tcHQgcm93IHRvIHRvcCBvZiBvdmVybGF5XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheT8ucHJvbXB0SW5kZXggPz8gMDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICBidWZmZXIucHVzaChgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgZXhhY3RseSB0aGUgb2xkIG92ZXJsYXkgbGluZXMsIHRoZW4gZXJhc2UgdG8gZW5kIG9mIHNjcmVlblxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0OyBpKyspIHtcbiAgICAgICAgYnVmZmVyLnB1c2goJ1xccicpO1xuICAgICAgICBidWZmZXIucHVzaChFU0MuQ0xFQVJfTElORSk7XG4gICAgICAgIGlmIChpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCAtIDEpIHtcbiAgICAgICAgICBidWZmZXIucHVzaCgnXFx4MWJbQicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGFueXRoaW5nIGJlbG93IHRoZSBvbGQgb3ZlcmxheSAoaGFuZGxlcyBlZGdlIGNhc2VzKVxuICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0onKTtcblxuICAgICAgLy8gQWZ0ZXIgY2xlYXJpbmcsIGN1cnNvciBpcyBhdCBsYXN0IGNsZWFyZWQgbGluZVxuICAgICAgLy8gTW92ZSBiYWNrIHVwIHRvIHRoZSB0b3Agd2hlcmUgbmV3IG92ZXJsYXkgc2hvdWxkIHN0YXJ0XG4gICAgICBjb25zdCBtb3ZlQmFja1VwID0gdGhpcy5sYXN0T3ZlcmxheUhlaWdodCAtIDE7XG4gICAgICBpZiAobW92ZUJhY2tVcCA+IDApIHtcbiAgICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bW92ZUJhY2tVcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgcHJvbXB0IGxpbmVzIChubyB0cmFpbGluZyBuZXdsaW5lIG9uIGxhc3QgbGluZSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcbiAgICAgIGJ1ZmZlci5wdXNoKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGJ1ZmZlci5wdXNoKHJlbmRlcmVkTGluZXNbaV0gfHwgJycpO1xuICAgICAgaWYgKGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgYnVmZmVyLnB1c2goJ1xcbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIG9sZCBvdmVybGF5IHdhcyB0YWxsZXIsIGNsZWFyIGFueSByZW1haW5pbmcgc3RhbGUgbGluZXMgYmVsb3dcbiAgICAvLyBhbmQgdXNlIENTSSBKIChlcmFzZSBmcm9tIGN1cnNvciB0byBlbmQgb2Ygc2NyZWVuKSB0byBjbGVhbiB1cFxuICAgIGlmICh0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID4gaGVpZ2h0KSB7XG4gICAgICBidWZmZXIucHVzaCgnXFxuJyk7IC8vIE1vdmUgdG8gbGluZSBiZWxvdyBsYXN0IGNvbnRlbnRcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltKJyk7IC8vIENsZWFyIGZyb20gY3Vyc29yIHRvIGVuZCBvZiBzY3JlZW5cbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltBJyk7IC8vIE1vdmUgYmFjayB1cCB0byBsYXN0IGNvbnRlbnQgbGluZVxuICAgIH1cblxuICAgIC8vIFBvc2l0aW9uIGN1cnNvciBhdCBwcm9tcHQgaW5wdXQgbGluZVxuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bGluZXNUb01vdmVVcH1BYCk7XG4gICAgfVxuICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske3Byb21wdENvbH1HYCk7XG5cbiAgICAvLyBTaG93IGN1cnNvciBhZ2FpbiBhZnRlciBwb3NpdGlvbmluZ1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVoJyk7XG5cbiAgICAvLyBTaW5nbGUgYXRvbWljIHdyaXRlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuICAgIHRoaXMud3JpdGUoYnVmZmVyLmpvaW4oJycpKTtcblxuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IHByb21wdENvbDtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICB0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgPSB0cnVlO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IHsgbGluZXM6IHJlbmRlcmVkTGluZXMsIHByb21wdEluZGV4IH07XG4gICAgdGhpcy5sYXN0T3ZlcmxheVJlbmRlcmVkID0geyBsaW5lczogcmVuZGVyZWRMaW5lcywgcHJvbXB0SW5kZXgsIHByb21wdENvbCB9O1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRPdmVybGF5TGluZXMoKTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIC8vIFNpbXBsZSBob3Jpem9udGFsIGRpdmlkZXIgLSBjbGVhbiBhbmQgcmVsaWFibGVcbiAgICBjb25zdCBkaXZpZGVyID0gdGhlbWUudWkubXV0ZWQoJ+KUgCcucmVwZWF0KG1heFdpZHRoKSk7XG5cbiAgICBjb25zdCBmYWxsYmFja0FjdGl2aXR5ID0gKCgpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nIHx8IHRoaXMuc3RhdHVzT3ZlcnJpZGUgfHwgdGhpcy5zdGF0dXNNZXNzYWdlO1xuICAgICAgaWYgKCFyYXcpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHRoaXMuc3RyaXBBbnNpKHJhdykucmVwbGFjZSgvXlvij7rigKJdXFxzKi8sICcnKS50cmltKCk7XG4gICAgICByZXR1cm4gY2xlYW5lZCB8fCBudWxsO1xuICAgIH0pKCk7XG5cbiAgICAvLyBBY3Rpdml0eSBsaW5lIChvbmx5IHdoZW4gc3RyZWFtaW5nKSAtIHNob3dzOiDil5AgV29ya2luZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMpXG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgKHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkpKSB7XG4gICAgICAvLyBDbGVhbiBzcGlubmVyIGFuaW1hdGlvbiB1c2luZyBicmFpbGxlIGRvdHMgKyBzaGltbWVyIGFjY2VudCBmb3IgYSByaWNoZXIgZmVlbFxuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIGNvbnN0IHN0YXJDaGFyID0gdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXNbdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aF0gPz8gJ+Kctic7XG4gICAgICBjb25zdCBzcGlubmVyRGVjb3JhdGVkID0gYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9JHt0aGVtZS5hY2NlbnQgPyB0aGVtZS5hY2NlbnQoc3RhckNoYXIpIDogc3RhckNoYXJ9YDtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aGlzLmZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTtcbiAgICAgIGNvbnN0IGdlbmVyaWNBY3Rpdml0aWVzID0gWydTdHJlYW1pbmcnLCAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZyddO1xuICAgICAgbGV0IGRpc3BsYXlBY3Rpdml0eSA9IHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkgfHwgJyc7XG4gICAgICBpZiAoZ2VuZXJpY0FjdGl2aXRpZXMuaW5jbHVkZXMoZGlzcGxheUFjdGl2aXR5KSAmJiBmYWxsYmFja0FjdGl2aXR5KSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHk7XG4gICAgICB9XG4gICAgICBpZiAoIWRpc3BsYXlBY3Rpdml0eS50cmltKCkpIHtcbiAgICAgICAgZGlzcGxheUFjdGl2aXR5ID0gZmFsbGJhY2tBY3Rpdml0eSB8fCAnV29ya2luZyc7XG4gICAgICB9XG4gICAgICBjb25zdCBuZWVkc0VsbGlwc2lzID0gIWRpc3BsYXlBY3Rpdml0eS50cmltRW5kKCkuZW5kc1dpdGgoJ+KApicpICYmICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCcuLi4nKTtcbiAgICAgIC8vIEZvcm1hdDog4qCLIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMW0gMTlzIMK3IOKGkTEuMmsgdG9rZW5zKVxuICAgICAgLy8gQnVpbGQgcGFydHMgd2l0aCBhbmltYXRlZCBlbGFwc2VkIHRpbWUgY29sb3JcbiAgICAgIGNvbnN0IGVsYXBzZWRDb2xvciA9IGNoYWxrLmhleCh0aGlzLmVsYXBzZWRDb2xvckZyYW1lc1t0aGlzLmVsYXBzZWRDb2xvckZyYW1lICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoXSA/PyAnI0Y1OUUwQicpO1xuICAgICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gWydlc2MgdG8gaW50ZXJydXB0J107XG4gICAgICBpZiAoZWxhcHNlZCkgcGFydHMucHVzaChlbGFwc2VkQ29sb3IoZWxhcHNlZCkpO1xuICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nVG9rZW5zID4gMCkge1xuICAgICAgICBwYXJ0cy5wdXNoKGDihpEke3RoaXMuZm9ybWF0VG9rZW5Db3VudCh0aGlzLnN0cmVhbWluZ1Rva2Vucyl9IHRva2Vuc2ApO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJlZml4ID0gYCR7c3Bpbm5lckRlY29yYXRlZH0gYDtcbiAgICAgIGNvbnN0IGFjdGl2aXR5VGV4dCA9IGAke2Rpc3BsYXlBY3Rpdml0eS50cmltKCl9JHtuZWVkc0VsbGlwc2lzID8gJ+KApicgOiAnJ31gO1xuICAgICAgY29uc3Qgc3VmZml4ID0gYCAke3RoZW1lLnVpLm11dGVkKCcoJyl9JHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSR7dGhlbWUudWkubXV0ZWQoJyknKX1gO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgZnVsbCBhY3Rpdml0eSBsaW5lIHdpdGggYW5pbWF0ZWQgY29sb3IgZm9yIGVsYXBzZWQgdGltZVxuICAgICAgY29uc3QgYWN0aXZpdHlMaW5lID0gYCR7cHJlZml4fSR7YWN0aXZpdHlUZXh0fSR7c3VmZml4fWA7XG5cbiAgICAgIC8vIEFsd2F5cyBzaG93IGZ1bGwgdGV4dCAtIHdyYXAgdG8gbXVsdGlwbGUgbGluZXMgaWYgbmVlZGVkXG4gICAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHRoaXMudmlzaWJsZUxlbmd0aChwcmVmaXgpKTtcbiAgICAgIGNvbnN0IHdyYXBwZWQgPSB0aGlzLndyYXBPdmVybGF5TGluZShhY3Rpdml0eUxpbmUsIG1heFdpZHRoLCBpbmRlbnQpO1xuICAgICAgbGluZXMucHVzaCguLi53cmFwcGVkKTtcbiAgICB9XG5cbiAgICAvLyBUb3AgZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbnB1dCBwcm9tcHQgbGluZVxuICAgIGNvbnN0IHByb21wdEluZGV4ID0gbGluZXMubGVuZ3RoO1xuICAgIGNvbnN0IGlucHV0TGluZSA9IHRoaXMuYnVpbGRJbnB1dExpbmUoKTtcbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCBieSBzcGxpdHRpbmcgb24gbmV3bGluZXNcbiAgICAvLyBGaWx0ZXIgb3V0IGVtcHR5IGxpbmVzIHRvIHByZXZlbnQgZHVwbGljYXRlIGRpdmlkZXIgYXBwZWFyYW5jZSBmcm9tIGxlYWRpbmcvdHJhaWxpbmcgbmV3bGluZXNcbiAgICBjb25zdCBpbnB1dExpbmVzID0gaW5wdXRMaW5lLnNwbGl0KCdcXG4nKS5maWx0ZXIoKGxpbmUsIGlkeCwgYXJyKSA9PiB7XG4gICAgICAvLyBLZWVwIG5vbi1lbXB0eSBsaW5lcywgYnV0IHByZXNlcnZlIHNpbmdsZSBlbXB0eSBsaW5lIGlmIGl0J3MgaW50ZW50aW9uYWwgKGUuZy4sIGJldHdlZW4gY29udGVudClcbiAgICAgIC8vIE9ubHkgZmlsdGVyIGxlYWRpbmcvdHJhaWxpbmcgZW1wdHkgbGluZXNcbiAgICAgIGlmIChsaW5lLnRyaW0oKSA9PT0gJycpIHtcbiAgICAgICAgLy8gRmlsdGVyIGlmIGl0J3MgdGhlIGZpcnN0IGxpbmUgKGxlYWRpbmcgZW1wdHkpIG9yIGxhc3QgbGluZSAodHJhaWxpbmcgZW1wdHkpXG4gICAgICAgIGlmIChpZHggPT09IDAgfHwgaWR4ID09PSBhcnIubGVuZ3RoIC0gMSkgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSk7XG4gICAgLy8gRW5zdXJlIGF0IGxlYXN0IG9uZSBsaW5lIGZvciB0aGUgcHJvbXB0XG4gICAgaWYgKGlucHV0TGluZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICBpbnB1dExpbmVzLnB1c2godGhlbWUucHJpbWFyeSgnPiAnKSk7XG4gICAgfVxuICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnB1dExpbmVzKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gQm90dG9tIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5saW5lIHBhbmVsIChwaW5uZWQgc2Nyb2xsIGJveCBmb3IgbGl2ZSBvdXRwdXQvbWVudXMpXG4gICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBwYW5lbExpbmUgb2YgdGhpcy5pbmxpbmVQYW5lbCkge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7cGFuZWxMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0ZSBpbmxpbmUgY29udGVudCBmcm9tIHN1Z2dlc3Rpb25zL3RvZ2dsZXNcbiAgICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG4gICAgfVxuXG4gICAgLy8gU2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uc1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tpbmRleF0hO1xuICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleDtcbiAgICAgICAgY29uc3QgbWFya2VyID0gaXNBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCfilrgnKSA6IHRoZW1lLnVpLm11dGVkKCcgJyk7XG4gICAgICAgIGNvbnN0IGNtZFRleHQgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoc3VnZ2VzdGlvbi5jb21tYW5kKSA6IHRoZW1lLnVpLm11dGVkKHN1Z2dlc3Rpb24uY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gaXNBY3RpdmUgPyBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbik7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttYXJrZXJ9ICR7Y21kVGV4dH0g4oCUICR7ZGVzY1RleHR9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlbCBhbmQgY29udGV4dCBpbmZvXG4gICAgY29uc3QgbW9kZWxDb250ZXh0TGluZSA9IHRoaXMuYnVpbGRNb2RlbENvbnRleHRMaW5lKCk7XG4gICAgaWYgKG1vZGVsQ29udGV4dExpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttb2RlbENvbnRleHRMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gU3RhdHVzICsgbWV0YSBibG9jayAoaW5jbHVkZXMgZGlyL3ZlcnNpb24vdG9vbCBzdW1tYXJ5KVxuICAgIGNvbnN0IGNocm9tZUxpbmVzID0gdGhpcy5idWlsZENocm9tZUxpbmVzKCk7XG4gICAgaWYgKGNocm9tZUxpbmVzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBjaHJvbWVMaW5lIG9mIGNocm9tZUxpbmVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtjaHJvbWVMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kZSB0b2dnbGVzXG4gICAgY29uc3QgdG9nZ2xlTGluZXMgPSB0aGlzLmJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHRvZ2dsZUxpbmUgb2YgdG9nZ2xlTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RvZ2dsZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlZ2VuZExpbmVzID0gdGhpcy5idWlsZFRvZ2dsZUxlZ2VuZCgpO1xuICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgbGVnZW5kTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2xlZ2VuZH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHAgaGludFxuICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHt0aGVtZS51aS5tdXRlZCgnPyBmb3Igc2hvcnRjdXRzJyl9YCwgbWF4V2lkdGgpKTtcblxuICAgIHJldHVybiB7IGxpbmVzLCBwcm9tcHRJbmRleCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIG1vZGVsIG5hbWUgYW5kIGNvbnRleHQgdXNhZ2UgbGluZSB3aXRoIG1pbmkgcHJvZ3Jlc3MgYmFyXG4gICAqIEZvcm1hdDogZ3B0LTQgwrcg4paI4paI4paI4paI4paR4paRIDg1JSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkTW9kZWxDb250ZXh0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIE1vZGVsIG5hbWUgKHByb3ZpZGVyIC8gbW9kZWwgb3IganVzdCBtb2RlbClcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlciAmJiB0aGlzLnN0YXR1c01ldGEubW9kZWxcbiAgICAgID8gYCR7dGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyfSDCtyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLmluZm8obW9kZWwpKTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0IG1ldGVyIHdpdGggbWluaSBwcm9ncmVzcyBiYXIgKHNob3dzIHVzZWQgcGVyY2VudGFnZSwgbm90IHJlbWFpbmluZylcbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHVzZWQgPSBjbGFtcFBlcmNlbnRhZ2UodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIGNvbnN0IGJhcldpZHRoID0gNjtcbiAgICAgIGNvbnN0IGZpbGxlZCA9IE1hdGgucm91bmQoKHVzZWQgLyAxMDApICogYmFyV2lkdGgpO1xuICAgICAgY29uc3QgZW1wdHkgPSBNYXRoLm1heCgwLCBiYXJXaWR0aCAtIGZpbGxlZCk7XG4gICAgICAvLyBDb2xvciBiYXNlZCBvbiBob3cgZnVsbCB0aGUgY29udGV4dCBpcyAoZ3JlZW49bG93IHVzYWdlLCB5ZWxsb3c9bWVkaXVtLCByZWQ9aGlnaClcbiAgICAgIGNvbnN0IGJhckNvbG9yID0gZ2V0Q29udGV4dENvbG9yKHVzZWQsIHtcbiAgICAgICAgZXJyb3I6IHRoZW1lLmVycm9yLFxuICAgICAgICB3YXJuaW5nOiB0aGVtZS53YXJuaW5nLFxuICAgICAgICBpbmZvOiB0aGVtZS5pbmZvLFxuICAgICAgICBzdWNjZXNzOiB0aGVtZS5zdWNjZXNzLFxuICAgICAgfSk7XG4gICAgICBjb25zdCBiYXIgPSBiYXJDb2xvcign4paIJy5yZXBlYXQoZmlsbGVkKSkgKyB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQoZW1wdHkpKTtcbiAgICAgIHBhcnRzLnB1c2goYCR7YmFyfSAke2JhckNvbG9yKGAke3VzZWR9JWApfSAke3RoZW1lLnVpLm11dGVkKCdjdHgnKX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgwrcgICcpKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgaW5saW5lIHRvZ2dsZSBjb250cm9scyAtIENsYXVkZSBDb2RlIHN0eWxlXG4gICAqIEZvcm1hdDog4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVxuICAgKiBSZXR1cm5zIHdyYXBwZWQgbGluZXMgdG8gZW5zdXJlIGFsbCB0b2dnbGVzIChpbmNsdWRpbmcgUkwpIGFyZSB2aXNpYmxlIGJlbG93IHRoZSBjaGF0IGJveC5cbiAgICovXG4gIC8qKlxuICAgKiBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzdGF0dXMgbGluZSB3aXRoIGNvbG9yLWNvZGVkIHN0YXRlcyBhbmQgaW50ZWdyYXRlZCBleHBsYW5hdGlvbnMuXG4gICAqIEVhY2ggdG9nZ2xlIGhhcyBhIGRpc3RpbmN0IGNvbG9yIGZvciBlYXN5IGlkZW50aWZpY2F0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZElubGluZVRvZ2dsZUxpbmUoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgYXBwcm92YWxNb2RlID0gdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsTW9kZSB8fCAnYXV0byc7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQnVpbGQgdW5pZmllZCB0b2dnbGUgc2VnbWVudHMgd2l0aCBESVNUSU5DVCBjb2xvcnMgZm9yIGVhY2ggdG9nZ2xlXG4gICAgY29uc3QgdG9nZ2xlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIDEuIFJMIG1vZGUgKENZQU4pIC0gbXVsdGktYWdlbnQgdnMgc2luZ2xlLXBhc3NcbiAgICBjb25zdCBybE9uID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkO1xuICAgIGNvbnN0IHJsSWNvbiA9IHJsT24gPyAn8J+klicgOiAn4pqhJztcbiAgICBjb25zdCBybFN0YXR1cyA9IHJsT24gPyB0aGVtZS5pbmZvKCdkdWFsJykgOiB0aGVtZS51aS5tdXRlZCgnc2luZ2xlJyk7XG4gICAgY29uc3QgcmxFeHBsYWluID0gcmxPbiA/ICdtdWx0aS1hZ2VudCcgOiAnb25lLXBhc3MnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtybEljb259ICR7cmxTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVEXScpfSAke3RoZW1lLnVpLm11dGVkKHJsRXhwbGFpbil9YCk7XG5cbiAgICAvLyAyLiBBdXRvLWNvbnRpbnVlIChNQUdFTlRBL1BVUlBMRSkgLSBrZWVwIGdvaW5nIHVudGlsIGRvbmVcbiAgICBjb25zdCBjb250SWNvbiA9IGF1dG9Db250aW51ZUFjdGl2ZSA/ICfwn5SEJyA6ICfij7gnO1xuICAgIGNvbnN0IGNvbnRTdGF0dXMgPSBhdXRvQ29udGludWVBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCdsb29wJykgOiB0aGVtZS51aS5tdXRlZCgnc3RvcCcpO1xuICAgIGNvbnN0IGNvbnRFeHBsYWluID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ3VudGlsIGRvbmUnIDogJ2VhY2ggcmVzcG9uc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtjb250SWNvbn0gJHtjb250U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylR10nKX0gJHt0aGVtZS51aS5tdXRlZChjb250RXhwbGFpbil9YCk7XG5cbiAgICAvLyAzLiBWZXJpZnkgKFlFTExPVykgLSBhdXRvLXRlc3RzIGFmdGVyIGVkaXRzXG4gICAgY29uc3QgdmVyaWZ5SWNvbiA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICfinJMnIDogJ+KXiyc7XG4gICAgY29uc3QgdmVyaWZ5U3RhdHVzID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gdGhlbWUud2FybmluZygndGVzdCcpIDogdGhlbWUudWkubXV0ZWQoJ3NraXAnKTtcbiAgICBjb25zdCB2ZXJpZnlFeHBsYWluID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2F1dG8tdGVzdCcgOiAnbm8gdGVzdHMnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt2ZXJpZnlJY29ufSAke3ZlcmlmeVN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpVZdJyl9ICR7dGhlbWUudWkubXV0ZWQodmVyaWZ5RXhwbGFpbil9YCk7XG5cbiAgICAvLyA0LiBBcHByb3ZhbHMgKEdSRUVOL09SQU5HRSkgLSBhdXRvIG9yIGFzayBmb3IgcGVybWlzc2lvblxuICAgIGNvbnN0IGFwcHJJY29uID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ/Cfm6EnIDogJ+KclCc7XG4gICAgY29uc3QgYXBwclN0YXR1cyA9IGFwcHJvdmFsTW9kZSA9PT0gJ2FwcHJvdmFsJyA/IHRoZW1lLndhcm5pbmcoJ2FzaycpIDogdGhlbWUuc3VjY2VzcygnYXV0bycpO1xuICAgIGNvbnN0IGFwcHJFeHBsYWluID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ2NvbmZpcm0gYWxsJyA6ICdhdXRvLWFwcHJvdmUnO1xuICAgIHRvZ2dsZXMucHVzaChgJHthcHBySWNvbn0gJHthcHByU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylQV0nKX0gJHt0aGVtZS51aS5tdXRlZChhcHByRXhwbGFpbil9YCk7XG5cbiAgICAvLyA1LiBUaGlua2luZyAoQkxVRSkgLSBiYWxhbmNlZCBvciBkZWVwIHJlYXNvbmluZ1xuICAgIGNvbnN0IHRoaW5raW5nSXNEZWVwID0gdGhpbmtpbmdMYWJlbCA9PT0gJ2V4dGVuZGVkJyB8fCB0aGlua2luZ0xhYmVsID09PSAnZGVlcCc7XG4gICAgY29uc3QgdGhpbmtJY29uID0gdGhpbmtpbmdJc0RlZXAgPyAn8J+noCcgOiAn8J+SrSc7XG4gICAgY29uc3QgdGhpbmtTdGF0dXMgPSB0aGlua2luZ0lzRGVlcCA/IHRoZW1lLmluZm8oJ2RlZXAnKSA6IHRoZW1lLnVpLm11dGVkKCdxdWljaycpO1xuICAgIGNvbnN0IHRoaW5rRXhwbGFpbiA9IHRoaW5raW5nSXNEZWVwID8gJ3Rob3JvdWdoJyA6ICdjb25jaXNlJztcbiAgICB0b2dnbGVzLnB1c2goYCR7dGhpbmtJY29ufSAke3RoaW5rU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbVEFCXScpfSAke3RoZW1lLnVpLm11dGVkKHRoaW5rRXhwbGFpbil9YCk7XG5cbiAgICAvLyA2LiBEZWJ1ZyBsb2dnaW5nIGluZGljYXRvciAoUkVEKSAtIHRvZ2dsZSBzaG93cyB3aGV0aGVyIGNvbnNvbGUgbG9nZ2luZyBpcyBlbmFibGVkXG4gICAgY29uc3QgZGVidWdBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmRlYnVnRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBkZWJ1Z0ljb24gPSBkZWJ1Z0FjdGl2ZSA/ICfwn5CeJyA6ICfwn5SNJztcbiAgICBjb25zdCBkZWJ1Z1N0YXR1cyA9IGRlYnVnQWN0aXZlID8gdGhlbWUud2FybmluZygnZGVidWcgb24nKSA6IHRoZW1lLnVpLm11dGVkKCdkZWJ1ZyBvZmYnKTtcbiAgICBjb25zdCBkZWJ1Z0V4cGxhaW4gPSBkZWJ1Z0FjdGl2ZSA/ICd2ZXJib3NlIGxvZ3MnIDogJ3NpbGVudCc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2RlYnVnSWNvbn0gJHtkZWJ1Z1N0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnWy9kZWJ1Z10nKX0gJHt0aGVtZS51aS5tdXRlZChkZWJ1Z0V4cGxhaW4pfWApO1xuXG4gICAgLy8gNy4gU2hvcnRjdXQgaGludFxuICAgIHRvZ2dsZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnPyBoZWxwJyl9YCk7XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMik7XG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHRvZ2dsZXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBMZWdlbmQgaXMgbm93IGludGVncmF0ZWQgaW50byBidWlsZElubGluZVRvZ2dsZUxpbmUgZm9yIHVuaWZpZWQgZGlzcGxheVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxlZ2VuZCgpOiBzdHJpbmdbXSB7XG4gICAgLy8gTGVnZW5kIGV4cGxhbmF0aW9ucyBub3cgaW50ZWdyYXRlZCBkaXJlY3RseSBpbnRvIHRvZ2dsZSBsaW5lXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENocm9tZUxpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3Qgc3RhdHVzTGluZXMgPSB0aGlzLmJ1aWxkU3RhdHVzQmxvY2sobWF4V2lkdGgpO1xuICAgIGNvbnN0IG1ldGFMaW5lcyA9IHRoaXMuYnVpbGRNZXRhQmxvY2sobWF4V2lkdGgpO1xuICAgIHJldHVybiBbLi4uc3RhdHVzTGluZXMsIC4uLm1ldGFMaW5lc107XG4gIH1cblxuICBwcml2YXRlIGFiYnJldmlhdGVQYXRoKHBhdGhWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBob21lID0gaG9tZWRpcigpO1xuICAgIGlmIChob21lICYmIHBhdGhWYWx1ZS5zdGFydHNXaXRoKGhvbWUpKSB7XG4gICAgICByZXR1cm4gcGF0aFZhbHVlLnJlcGxhY2UoaG9tZSwgJ34nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhWYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gdGhpcy5jb21wb3NlU3RhdHVzTGFiZWwoKTtcbiAgICBpZiAoIXN0YXR1c0xhYmVsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgYW5pbWF0ZWQgc3Bpbm5lciB3aGVuIHN0cmVhbWluZyBmb3IgZHluYW1pYyB2aXN1YWwgZmVlZGJhY2tcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3N0YXR1cycpfSAke3RoaXMuYXBwbHlUb25lKHN0YXR1c0xhYmVsLnRleHQsIHN0YXR1c0xhYmVsLnRvbmUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3J1bnRpbWUnKX0gJHt0aGVtZS51aS5tdXRlZCh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVXNlIGFuaW1hdGVkIGNvbnRleHQgbWV0ZXIgZm9yIHNtb290aCBjb2xvciB0cmFuc2l0aW9uc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIudXBkYXRlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuY29udGV4dE1ldGVyLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNZXRhQmxvY2sobWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdwcm9maWxlJywgdGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IC8gJHt0aGlzLnN0YXR1c01ldGEubW9kZWx9YFxuICAgICAgOiB0aGlzLnN0YXR1c01ldGEubW9kZWwgfHwgdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyO1xuICAgIGlmIChtb2RlbCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdtb2RlbCcsIG1vZGVsLCAnaW5mbycpKTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdkaXInLCB0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSksICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLndyaXRlcykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd3cml0ZXMnLCB0aGlzLnN0YXR1c01ldGEud3JpdGVzLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd0b29scycsIHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Nlc3Npb24nLCB0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS52ZXJzaW9uKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2J1aWxkJywgYHYke3RoaXMuc3RhdHVzTWV0YS52ZXJzaW9ufWAsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgUkwgYWdlbnQgc3RhdHVzIHdoZW4gZHVhbC1STCBtb2RlIGlzIGFjdGl2ZVxuICAgIGNvbnN0IHJsU2VnbWVudHMgPSB0aGlzLmJ1aWxkUkxTdGF0dXNTZWdtZW50cygpO1xuICAgIGlmIChybFNlZ21lbnRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goLi4ucmxTZWdtZW50cyk7XG4gICAgfVxuXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIFJMIGFnZW50IHN0YXR1cyBzZWdtZW50cyBmb3IgZGlzcGxheSBkdXJpbmcgZHVhbC1STCBleGVjdXRpb24uXG4gICAqIFNob3dzOiB0b3VybmFtZW50IHNjb3JlYm9hcmQsIGFjdGl2ZSBhZ2VudCwgbW9kdWxlL3N0ZXAgcHJvZ3Jlc3MsIGFuZCBzY29yZXMuXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkUkxTdGF0dXNTZWdtZW50cygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgcmwgPSB0aGlzLnJsU3RhdHVzO1xuXG4gICAgLy8gT25seSBzaG93IFJMIHN0YXR1cyB3aGVuIHRoZXJlJ3MgbWVhbmluZ2Z1bCBkYXRhXG4gICAgaWYgKCFybC5hY3RpdmVWYXJpYW50ICYmICFybC53aW5zICYmICFybC5jdXJyZW50TW9kdWxlKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgLy8gVG91cm5hbWVudCBzY29yZWJvYXJkIChhbHdheXMgc2hvdyB3aGVuIHdpbnMgZXhpc3QpXG4gICAgaWYgKHJsLndpbnMgJiYgKHJsLndpbnMucHJpbWFyeSA+IDAgfHwgcmwud2lucy5yZWZpbmVyID4gMCB8fCBybC53aW5zLnRpZXMgPiAwKSkge1xuICAgICAgY29uc3QgdG90YWxHYW1lcyA9IHJsLndpbnMucHJpbWFyeSArIHJsLndpbnMucmVmaW5lciArIHJsLndpbnMudGllcztcbiAgICAgIGNvbnN0IGxlYWRlciA9IHJsLndpbnMucHJpbWFyeSA+IHJsLndpbnMucmVmaW5lciA/ICdwcmltYXJ5JyA6XG4gICAgICAgICAgICAgICAgICAgICBybC53aW5zLnJlZmluZXIgPiBybC53aW5zLnByaW1hcnkgPyAncmVmaW5lcicgOiAndGllJztcblxuICAgICAgLy8gU2NvcmVib2FyZCB3aXRoIGNvbG9ycyBiYXNlZCBvbiBsZWFkZXJcbiAgICAgIGNvbnN0IHBDb2xvciA9IGxlYWRlciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuc3VjY2VzcyA6IHRoZW1lLmluZm87XG4gICAgICBjb25zdCByQ29sb3IgPSBsZWFkZXIgPT09ICdyZWZpbmVyJyA/IHRoZW1lLnN1Y2Nlc3MgOiB0aGVtZS53YXJuaW5nO1xuICAgICAgY29uc3QgcFNjb3JlID0gcENvbG9yKGAke3JsLndpbnMucHJpbWFyeX1gKTtcbiAgICAgIGNvbnN0IHJTY29yZSA9IHJDb2xvcihgJHtybC53aW5zLnJlZmluZXJ9YCk7XG5cbiAgICAgIC8vIFRyb3BoeSBmb3IgbGVhZGVyXG4gICAgICBjb25zdCB0cm9waHkgPSBsZWFkZXIgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8oJ/Cfj4YnKSA6XG4gICAgICAgICAgICAgICAgICAgICBsZWFkZXIgPT09ICdyZWZpbmVyJyA/IHRoZW1lLndhcm5pbmcoJ/Cfj4YnKSA6ICfimpbvuI8nO1xuXG4gICAgICAvLyBXaW4gc3RyZWFrIGluZGljYXRvclxuICAgICAgY29uc3Qgc3RyZWFrVGV4dCA9IHJsLnN0cmVhayAmJiBybC5zdHJlYWsgPiAxID8gdGhlbWUudWkubXV0ZWQoYCDwn5SlJHtybC5zdHJlYWt9YCkgOiAnJztcblxuICAgICAgc2VnbWVudHMucHVzaChgJHt0cm9waHl9JHtwU2NvcmV9JHt0aGVtZS51aS5tdXRlZCgnOicpfSR7clNjb3JlfSR7c3RyZWFrVGV4dH1gKTtcblxuICAgICAgLy8gUHJvZ3Jlc3MgYmFyIHNob3dpbmcgcmVsYXRpdmUgd2luc1xuICAgICAgaWYgKHRvdGFsR2FtZXMgPiAwKSB7XG4gICAgICAgIGNvbnN0IGJhcldpZHRoID0gODtcbiAgICAgICAgY29uc3QgcEJhcnMgPSBNYXRoLnJvdW5kKChybC53aW5zLnByaW1hcnkgLyB0b3RhbEdhbWVzKSAqIGJhcldpZHRoKTtcbiAgICAgICAgY29uc3QgckJhcnMgPSBNYXRoLnJvdW5kKChybC53aW5zLnJlZmluZXIgLyB0b3RhbEdhbWVzKSAqIGJhcldpZHRoKTtcbiAgICAgICAgY29uc3QgdEJhcnMgPSBNYXRoLm1heCgwLCBiYXJXaWR0aCAtIHBCYXJzIC0gckJhcnMpO1xuICAgICAgICBjb25zdCBiYXIgPSB0aGVtZS5pbmZvKCfilognLnJlcGVhdChwQmFycykpICtcbiAgICAgICAgICAgICAgICAgICAgdGhlbWUudWkubXV0ZWQoJ+KWkScucmVwZWF0KHRCYXJzKSkgK1xuICAgICAgICAgICAgICAgICAgICB0aGVtZS53YXJuaW5nKCfilognLnJlcGVhdChyQmFycykpO1xuICAgICAgICBzZWdtZW50cy5wdXNoKGBbJHtiYXJ9XWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFjdGl2ZSB2YXJpYW50IGluZGljYXRvclxuICAgIGlmIChybC5hY3RpdmVWYXJpYW50KSB7XG4gICAgICBjb25zdCBpc1BhcmFsbGVsID0gcmwucGFyYWxsZWxFeGVjdXRpb247XG4gICAgICBpZiAoaXNQYXJhbGxlbCkge1xuICAgICAgICAvLyBCb3RoIHJ1bm5pbmcgaW4gcGFyYWxsZWxcbiAgICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKCfimqFQJyl9ICR7dGhlbWUudWkubXV0ZWQoJ+KIpScpfSAke3RoZW1lLndhcm5pbmcoJ+KaoVInKX1gKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRJY29uID0gcmwuYWN0aXZlVmFyaWFudCA9PT0gJ3ByaW1hcnknID8gJ+KWticgOiAn4pa3JztcbiAgICAgICAgY29uc3QgdmFyaWFudExhYmVsID0gcmwuYWN0aXZlVmFyaWFudCA9PT0gJ3ByaW1hcnknID8gJ1AnIDogJ1InO1xuICAgICAgICBjb25zdCB2YXJpYW50Q29sb3IgPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvIDogdGhlbWUud2FybmluZztcbiAgICAgICAgc2VnbWVudHMucHVzaChgJHt2YXJpYW50SWNvbn0ke3ZhcmlhbnRDb2xvcih2YXJpYW50TGFiZWwpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIExhc3Qgd2lubmVyIGluZGljYXRvclxuICAgIGlmIChybC5sYXN0V2lubmVyICYmIHJsLmxhc3RXaW5uZXIgIT09ICd0aWUnKSB7XG4gICAgICBjb25zdCB3aW5uZXJJY29uID0gcmwubGFzdFdpbm5lciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbygn4pyTUCcpIDogdGhlbWUud2FybmluZygn4pyTUicpO1xuICAgICAgc2VnbWVudHMucHVzaCh3aW5uZXJJY29uKTtcbiAgICB9IGVsc2UgaWYgKHJsLmxhc3RXaW5uZXIgPT09ICd0aWUnKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKCfiiYgnKSk7XG4gICAgfVxuXG4gICAgLy8gQ3VycmVudCBtb2R1bGUvc3RlcCAoY29tcGFjdClcbiAgICBpZiAocmwuY3VycmVudE1vZHVsZSB8fCBybC5jdXJyZW50U3RlcCkge1xuICAgICAgY29uc3Qgc3RlcFRleHQgPSBybC5jdXJyZW50U3RlcCB8fCBybC5jdXJyZW50TW9kdWxlIHx8ICcnO1xuICAgICAgaWYgKHN0ZXBUZXh0KSB7XG4gICAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQodGhpcy50cnVuY2F0ZU1pZGRsZShzdGVwVGV4dCwgMTUpKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUHJvZ3Jlc3MgaW5kaWNhdG9yIChzdGVwcyBjb21wbGV0ZWQgLyB0b3RhbClcbiAgICBpZiAodHlwZW9mIHJsLnN0ZXBzQ29tcGxldGVkID09PSAnbnVtYmVyJyAmJiB0eXBlb2YgcmwudG90YWxTdGVwcyA9PT0gJ251bWJlcicgJiYgcmwudG90YWxTdGVwcyA+IDApIHtcbiAgICAgIGNvbnN0IHBjdCA9IE1hdGgucm91bmQoKHJsLnN0ZXBzQ29tcGxldGVkIC8gcmwudG90YWxTdGVwcykgKiAxMDApO1xuICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZChgJHtwY3R9JWApKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IHJld2FyZCBzY29yZXMgKGNvbXBhY3QsIG9ubHkgZHVyaW5nIGFjdGl2ZSBjb21wYXJpc29uKVxuICAgIGlmIChybC5zY29yZXMgJiYgKHR5cGVvZiBybC5zY29yZXMucHJpbWFyeSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHJsLnNjb3Jlcy5yZWZpbmVyID09PSAnbnVtYmVyJykpIHtcbiAgICAgIGNvbnN0IHBTY29yZSA9IHR5cGVvZiBybC5zY29yZXMucHJpbWFyeSA9PT0gJ251bWJlcicgPyBybC5zY29yZXMucHJpbWFyeS50b0ZpeGVkKDIpIDogJy0nO1xuICAgICAgY29uc3QgclNjb3JlID0gdHlwZW9mIHJsLnNjb3Jlcy5yZWZpbmVyID09PSAnbnVtYmVyJyA/IHJsLnNjb3Jlcy5yZWZpbmVyLnRvRml4ZWQoMikgOiAnLSc7XG4gICAgICBjb25zdCBwVmFsID0gcmwuc2NvcmVzLnByaW1hcnkgPz8gMDtcbiAgICAgIGNvbnN0IHJWYWwgPSBybC5zY29yZXMucmVmaW5lciA/PyAwO1xuICAgICAgY29uc3QgcERpc3BsYXkgPSBwVmFsID4gclZhbCA/IHRoZW1lLnN1Y2Nlc3MocFNjb3JlKSA6IHRoZW1lLmluZm8ocFNjb3JlKTtcbiAgICAgIGNvbnN0IHJEaXNwbGF5ID0gclZhbCA+IHBWYWwgPyB0aGVtZS5zdWNjZXNzKHJTY29yZSkgOiB0aGVtZS53YXJuaW5nKHJTY29yZSk7XG4gICAgICBzZWdtZW50cy5wdXNoKGAke3BEaXNwbGF5fSR7dGhlbWUudWkubXV0ZWQoJy8nKX0ke3JEaXNwbGF5fWApO1xuICAgIH1cblxuICAgIC8vIEh1bWFuIGFjY3VyYWN5IGluZGljYXRvciAocmVsYXRpdmUgcmFua2luZyBxdWFsaXR5KVxuICAgIGlmIChybC5hY2N1cmFjeSAmJiAodHlwZW9mIHJsLmFjY3VyYWN5LnByaW1hcnkgPT09ICdudW1iZXInIHx8IHR5cGVvZiBybC5hY2N1cmFjeS5yZWZpbmVyID09PSAnbnVtYmVyJykpIHtcbiAgICAgIGNvbnN0IHBBY2MgPSBybC5hY2N1cmFjeS5wcmltYXJ5ICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKHJsLmFjY3VyYWN5LnByaW1hcnkgKiAxMDApIDogbnVsbDtcbiAgICAgIGNvbnN0IHJBY2MgPSBybC5hY2N1cmFjeS5yZWZpbmVyICE9PSB1bmRlZmluZWQgPyBNYXRoLnJvdW5kKHJsLmFjY3VyYWN5LnJlZmluZXIgKiAxMDApIDogbnVsbDtcbiAgICAgIGNvbnN0IHBEaXNwbGF5ID0gcEFjYyAhPT0gbnVsbCA/IHRoZW1lLmluZm8oYFAke3BBY2N9JWApIDogbnVsbDtcbiAgICAgIGNvbnN0IHJEaXNwbGF5ID0gckFjYyAhPT0gbnVsbCA/IHRoZW1lLndhcm5pbmcoYFIke3JBY2N9JWApIDogbnVsbDtcbiAgICAgIGNvbnN0IHBhcnRzID0gW3BEaXNwbGF5LCByRGlzcGxheV0uZmlsdGVyKEJvb2xlYW4pLmpvaW4odGhlbWUudWkubXV0ZWQoJ3wnKSk7XG4gICAgICBpZiAocGFydHMpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaChwYXJ0cyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRydW5jYXRlIGEgc3RyaW5nIGluIHRoZSBtaWRkbGUsIHNob3dpbmcgc3RhcnQgYW5kIGVuZCB3aXRoIGVsbGlwc2lzLlxuICAgKi9cbiAgcHJpdmF0ZSB0cnVuY2F0ZU1pZGRsZSh0ZXh0OiBzdHJpbmcsIG1heExlbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4TGVuKSByZXR1cm4gdGV4dDtcbiAgICBjb25zdCBrZWVwTGVuID0gTWF0aC5mbG9vcigobWF4TGVuIC0gMykgLyAyKTtcbiAgICByZXR1cm4gYCR7dGV4dC5zbGljZSgwLCBrZWVwTGVuKX0uLi4ke3RleHQuc2xpY2UoLWtlZXBMZW4pfWA7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGFycmF5c0VxdWFsKGE6IHN0cmluZ1tdLCBiOiBzdHJpbmdbXSk6IGJvb2xlYW4ge1xuICAgIGlmIChhLmxlbmd0aCAhPT0gYi5sZW5ndGgpIHJldHVybiBmYWxzZTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGEubGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChhW2ldICE9PSBiW2ldKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENvbnRyb2xMaW5lcygpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdG9nZ2xlTGluZSA9IHRoaXMuYnVpbGRUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ21vZGVzJyl9ICR7dGhlbWUudWkubXV0ZWQoJ+KAuicpfSAke3RvZ2dsZUxpbmV9YCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc2hvcnRjdXRMaW5lID0gdGhpcy5idWlsZFNob3J0Y3V0TGluZSgpO1xuICAgIGlmIChzaG9ydGN1dExpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ2tleXMnKX0gICR7c2hvcnRjdXRMaW5lfWApO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBhIGNvbXBhY3QgdG9nZ2xlIGxpbmUgbGlrZSBDbGF1ZGUgQ29kZTpcbiAgICogXCLij7Xij7UgYWNjZXB0IGVkaXRzIG9uIChzaGlmdCt0YWIgdG8gY3ljbGUpXCJcbiAgICovXG4gIHByaXZhdGUgYnVpbGRDb21wYWN0VG9nZ2xlTGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICAvLyBTaG93IHRoZSBtb3N0IHJlbGV2YW50IG1vZGUgYmFzZWQgb24gY3VycmVudCBzdGF0ZVxuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCB8fCB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUVuYWJsZWQ7XG5cbiAgICAvLyBFZGl0IG1vZGUgaW5kaWNhdG9yXG4gICAgY29uc3QgZWRpdEljb24gPSAn4o+14o+1JztcbiAgICBjb25zdCBlZGl0U3RhdGUgPSB2ZXJpZmljYXRpb25BY3RpdmUgPyAnYXBwcm92YWwgcmVxdWlyZWQnIDogJ2FjY2VwdCBlZGl0cyc7XG4gICAgcGFydHMucHVzaChgJHt0aGVtZS51aS5tdXRlZChlZGl0SWNvbil9ICR7ZWRpdFN0YXRlfSAke3RoZW1lLnN1Y2Nlc3MoJ29uJyl9YCk7XG5cbiAgICAvLyBUaGlua2luZyBtb2RlIChpZiBhY3RpdmUpXG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICcnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAodGhpbmtpbmdMYWJlbCAmJiB0aGlua2luZ0xhYmVsICE9PSAnb2ZmJykge1xuICAgICAgcGFydHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgndGhpbmtpbmcnKX0gJHt0aGVtZS5pbmZvKHRoaW5raW5nTGFiZWwpfWApO1xuICAgIH1cblxuICAgIC8vIEN5Y2xlIGhpbnRcbiAgICBjb25zdCBjeWNsZUhpbnQgPSB0aGVtZS51aS5tdXRlZCgnKHNoaWZ0K3RhYiB0byBjeWNsZSknKTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHJldHVybiBgICAke3BhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyDCtyAnKSl9ICR7Y3ljbGVIaW50fWA7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB0b2dnbGVzOiBBcnJheTx7XG4gICAgICBsYWJlbDogc3RyaW5nO1xuICAgICAgb246IGJvb2xlYW47XG4gICAgICB2YWx1ZT86IHN0cmluZztcbiAgICAgIGhvdGtleT86IHN0cmluZyB8IG51bGw7XG4gICAgfT4gPSBbXTtcblxuICAgIGNvbnN0IGFkZFRvZ2dsZSA9IChsYWJlbDogc3RyaW5nLCBvbjogYm9vbGVhbiwgaG90a2V5Pzogc3RyaW5nLCB2YWx1ZT86IHN0cmluZykgPT4ge1xuICAgICAgdG9nZ2xlcy5wdXNoKHsgbGFiZWwsIG9uLCBob3RrZXk6IHRoaXMuZm9ybWF0SG90a2V5KGhvdGtleSksIHZhbHVlIH0pO1xuICAgIH07XG5cbiAgICBjb25zdCBhdXRvVmVyaWZ5QWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCB8fCBhdXRvVmVyaWZ5QWN0aXZlO1xuICAgIGNvbnN0IHZlcmlmeVZhbHVlID0gYXV0b1ZlcmlmeUFjdGl2ZVxuICAgICAgPyAnYXV0bydcbiAgICAgIDogdmVyaWZpY2F0aW9uQWN0aXZlXG4gICAgICAgID8gJ29uJ1xuICAgICAgICA6ICdvZmYnO1xuXG4gICAgYWRkVG9nZ2xlKCdWZXJpZnknLCB2ZXJpZmljYXRpb25BY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uSG90a2V5LCB2ZXJpZnlWYWx1ZSk7XG4gICAgY29uc3QgYXBwcm92YWxNb2RlID0gdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsTW9kZSB8fCAnYXV0byc7XG4gICAgY29uc3QgYXBwcm92YWxBY3RpdmUgPSBhcHByb3ZhbE1vZGUgIT09ICdhdXRvJztcbiAgICBhZGRUb2dnbGUoXG4gICAgICAnQXBwcm92YWxzJyxcbiAgICAgIGFwcHJvdmFsQWN0aXZlLFxuICAgICAgdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsSG90a2V5LFxuICAgICAgYXBwcm92YWxNb2RlID09PSAnYXV0bycgPyAnYXV0bycgOiAnYXNrJ1xuICAgICk7XG5cbiAgICBjb25zdCBhdXRvQ29udGludWVBY3RpdmUgPSBhdXRvVmVyaWZ5QWN0aXZlO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBdXRvLWNvbnRpbnVlJyxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5LFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlID8gJ2F1dG8tdmVyaWZ5JyA6ICdvZmYnXG4gICAgKTtcblxuICAgIGNvbnN0IHRoaW5raW5nTGFiZWxSYXcgPSAodGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ01vZGVMYWJlbCB8fCAnYmFsYW5jZWQnKS50cmltKCk7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9XG4gICAgICB0aGlua2luZ0xhYmVsUmF3LnRvTG93ZXJDYXNlKCkgPT09ICdleHRlbmRlZCcgPyAnZGVlcCcgOiB0aGlua2luZ0xhYmVsUmF3IHx8ICdiYWxhbmNlZCc7XG4gICAgY29uc3QgdGhpbmtpbmdBY3RpdmUgPSB0aGlua2luZ0xhYmVsLmxlbmd0aCA+IDA7XG4gICAgYWRkVG9nZ2xlKCdUaGlua2luZycsIHRoaW5raW5nQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5LCB0aGlua2luZ0xhYmVsKTtcblxuICAgIGNvbnN0IGR1YWxSbEFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBtb2RlVmFsdWUgPSBkdWFsUmxBY3RpdmUgPyAnZHVhbC1ybC1jb250JyA6ICdzaW5nbGUtY29udCc7XG4gICAgYWRkVG9nZ2xlKCdNb2RlJywgZHVhbFJsQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEhvdGtleSwgbW9kZVZhbHVlKTtcblxuICAgIGNvbnN0IGJ1aWxkTGluZSA9IChpbmNsdWRlSG90a2V5czogYm9vbGVhbik6IHN0cmluZyA9PiB7XG4gICAgICByZXR1cm4gdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiB7XG4gICAgICAgICAgY29uc3Qgc3RhdGVUZXh0ID0gdG9nZ2xlLm9uID8gdGhlbWUuc3VjY2Vzcyh0b2dnbGUudmFsdWUgfHwgJ29uJykgOiB0aGVtZS51aS5tdXRlZCh0b2dnbGUudmFsdWUgfHwgJ29mZicpO1xuICAgICAgICAgIGNvbnN0IGhvdGtleVRleHQgPVxuICAgICAgICAgICAgaW5jbHVkZUhvdGtleXMgJiYgdG9nZ2xlLmhvdGtleSA/IHRoZW1lLnVpLm11dGVkKGAgWyR7dG9nZ2xlLmhvdGtleX1dYCkgOiAnJztcbiAgICAgICAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQoYCR7dG9nZ2xlLmxhYmVsfTpgKX0gJHtzdGF0ZVRleHR9JHtob3RrZXlUZXh0fWA7XG4gICAgICAgIH0pXG4gICAgICAgIC5qb2luKHRoZW1lLnVpLm11dGVkKCcgICcpKTtcbiAgICB9O1xuXG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGxldCBsaW5lID0gYnVpbGRMaW5lKHRydWUpO1xuXG4gICAgLy8gUmVjb3JkIHdoaWNoIGhvdGtleXMgYXJlIGFjdHVhbGx5IHNob3duIHNvIHRoZSBzaG9ydGN1dCBsaW5lIGNhbiBhdm9pZCBkdXBsaWNhdGVzXG4gICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lID0gbmV3IFNldChcbiAgICAgIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4gKHRvZ2dsZS5ob3RrZXkgPyB0b2dnbGUuaG90a2V5IDogbnVsbCkpXG4gICAgICAgIC5maWx0ZXIoKGtleSk6IGtleSBpcyBzdHJpbmcgPT4gQm9vbGVhbihrZXkpKVxuICAgICk7XG5cbiAgICAvLyBJZiB0aGUgbGluZSBpcyB0b28gd2lkZSwgZHJvcCBob3RrZXkgaGludHMgdG8gcHJlc2VydmUgYWxsIHRvZ2dsZSBsYWJlbHNcbiAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGxpbmUpID4gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5jbGVhcigpO1xuICAgICAgbGluZSA9IGJ1aWxkTGluZShmYWxzZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmUudHJpbSgpID8gbGluZSA6IG51bGw7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkU2hvcnRjdXRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgY29uc3QgYWRkSG90a2V5ID0gKGxhYmVsOiBzdHJpbmcsIGNvbWJvPzogc3RyaW5nKSA9PiB7XG4gICAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5mb3JtYXRIb3RrZXkoY29tYm8pO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG4gICAgICBpZiAodGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmhhcyhub3JtYWxpemVkKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLmluZm8obm9ybWFsaXplZCl9ICR7dGhlbWUudWkubXV0ZWQobGFiZWwpfWApO1xuICAgIH07XG5cbiAgICAvLyBDb3JlIGNvbnRyb2xzXG4gICAgYWRkSG90a2V5KCdpbnRlcnJ1cHQnLCAnQ3RybCtDJyk7XG4gICAgYWRkSG90a2V5KCdjbGVhciBpbnB1dCcsICdDdHJsK1UnKTtcblxuICAgIC8vIEZlYXR1cmUgdG9nZ2xlcyAob25seSBpZiBob3RrZXlzIGFyZSBkZWZpbmVkKVxuICAgIGFkZEhvdGtleSgndmVyaWZ5JywgdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXkpO1xuICAgIGFkZEhvdGtleSgnYXV0by1jb250aW51ZScsIHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ3RoaW5raW5nJywgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSk7XG4gICAgYWRkSG90a2V5KCdtb2RlJywgdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxIb3RrZXkpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIHJldHVybiBwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgICAnKSk7XG4gIH1cblxuXG4gIHByaXZhdGUgYnVpbGRJbnB1dExpbmUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgY29uc3Qgc3VtbWFyeSA9IGBbcGFzdGVkICR7dGhpcy5jb2xsYXBzZWRQYXN0ZS5saW5lc30gbGluZXMsICR7dGhpcy5jb2xsYXBzZWRQYXN0ZS5jaGFyRGlzcGxheX0gY2hhcnNdIChFbnRlci9DdHJsK0wgaW5zZXJ0LCBCYWNrc3BhY2UgZGlzY2FyZClgO1xuICAgICAgcmV0dXJuIHRoaXMudHJ1bmNhdGVMaW5lKGAke3RoZW1lLnByaW1hcnkoJz4gJyl9JHt0aGVtZS51aS5tdXRlZChzdW1tYXJ5KX1gLCB0aGlzLnNhZmVXaWR0aCgpKTtcbiAgICB9XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSB1c2VzIHNpbXBsZSAnPicgcHJvbXB0XG4gICAgY29uc3QgcHJvbXB0ID0gdGhlbWUucHJpbWFyeSgnPiAnKTtcbiAgICBjb25zdCBwcm9tcHRXaWR0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChwcm9tcHQpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBjb250aW51YXRpb25JbmRlbnQgPSAnICAnOyAvLyAyIHNwYWNlcyBmb3IgY29udGludWF0aW9uIGxpbmVzXG4gICAgY29uc3QgY29udGludWF0aW9uV2lkdGggPSBjb250aW51YXRpb25JbmRlbnQubGVuZ3RoO1xuXG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgLSBzcGxpdCBidWZmZXIgb24gbmV3bGluZXMgZmlyc3RcbiAgICAvLyBJbiBzZWNyZXQgbW9kZSwgbWFzayBhbGwgY2hhcmFjdGVycyB3aXRoIGJ1bGxldHNcbiAgICBjb25zdCByYXdCdWZmZXIgPSB0aGlzLmJ1ZmZlci5yZXBsYWNlKC9cXHIvZywgJ1xcbicpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLnNlY3JldE1vZGUgPyAn4oCiJy5yZXBlYXQocmF3QnVmZmVyLmxlbmd0aCkgOiByYXdCdWZmZXI7XG4gICAgY29uc3QgYnVmZmVyTGluZXMgPSBub3JtYWxpemVkLnNwbGl0KCdcXG4nKTtcblxuICAgIC8vIFdyYXAgZWFjaCBsb2dpY2FsIGxpbmUgdG8gZml0IHRlcm1pbmFsIHdpZHRoLCBleHBhbmRpbmcgdmVydGljYWxseVxuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgdG90YWxDaGFycyA9IDA7XG4gICAgbGV0IGN1cnNvckxpbmUgPSAwO1xuICAgIGxldCBjdXJzb3JDb2wgPSAwO1xuICAgIGxldCBmb3VuZEN1cnNvciA9IGZhbHNlO1xuXG4gICAgZm9yIChsZXQgbGluZUluZGV4ID0gMDsgbGluZUluZGV4IDwgYnVmZmVyTGluZXMubGVuZ3RoOyBsaW5lSW5kZXgrKykge1xuICAgICAgY29uc3QgbGluZSA9IGJ1ZmZlckxpbmVzW2xpbmVJbmRleF0gPz8gJyc7XG4gICAgICBjb25zdCBpc0ZpcnN0TG9naWNhbExpbmUgPSBsaW5lSW5kZXggPT09IDA7XG4gICAgICBjb25zdCBsaW5lU3RhcnRDaGFyID0gdG90YWxDaGFycztcblxuICAgICAgLy8gRGV0ZXJtaW5lIGF2YWlsYWJsZSB3aWR0aCBmb3IgdGhpcyBsaW5lXG4gICAgICBjb25zdCBmaXJzdExpbmVXaWR0aCA9IG1heFdpZHRoIC0gcHJvbXB0V2lkdGg7XG4gICAgICBjb25zdCBjb250TGluZVdpZHRoID0gbWF4V2lkdGggLSBjb250aW51YXRpb25XaWR0aDtcblxuICAgICAgLy8gV3JhcCB0aGlzIGxvZ2ljYWwgbGluZSBpbnRvIGRpc3BsYXkgbGluZXNcbiAgICAgIGxldCByZW1haW5pbmcgPSBsaW5lO1xuICAgICAgbGV0IGlzRmlyc3REaXNwbGF5TGluZSA9IHRydWU7XG5cbiAgICAgIHdoaWxlIChyZW1haW5pbmcubGVuZ3RoID4gMCB8fCBpc0ZpcnN0RGlzcGxheUxpbmUpIHtcbiAgICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSAoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBmaXJzdExpbmVXaWR0aCA6IGNvbnRMaW5lV2lkdGg7XG4gICAgICAgIGNvbnN0IGNodW5rID0gcmVtYWluaW5nLnNsaWNlKDAsIGF2YWlsYWJsZVdpZHRoKTtcbiAgICAgICAgcmVtYWluaW5nID0gcmVtYWluaW5nLnNsaWNlKGF2YWlsYWJsZVdpZHRoKTtcblxuICAgICAgICAvLyBCdWlsZCB0aGUgZGlzcGxheSBsaW5lXG4gICAgICAgIGxldCBkaXNwbGF5TGluZTogc3RyaW5nO1xuICAgICAgICBpZiAoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7cHJvbXB0fSR7Y2h1bmt9YDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkaXNwbGF5TGluZSA9IGAke2NvbnRpbnVhdGlvbkluZGVudH0ke2NodW5rfWA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBUcmFjayBjdXJzb3IgcG9zaXRpb25cbiAgICAgICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgICAgIGNvbnN0IGNodW5rU3RhcnQgPSBsaW5lU3RhcnRDaGFyICsgKGxpbmUubGVuZ3RoIC0gcmVtYWluaW5nLmxlbmd0aCAtIGNodW5rLmxlbmd0aCk7XG4gICAgICAgICAgY29uc3QgY2h1bmtFbmQgPSBjaHVua1N0YXJ0ICsgY2h1bmsubGVuZ3RoO1xuICAgICAgICAgIGlmICh0aGlzLmN1cnNvciA+PSBjaHVua1N0YXJ0ICYmIHRoaXMuY3Vyc29yIDw9IGNodW5rRW5kKSB7XG4gICAgICAgICAgICBjdXJzb3JMaW5lID0gcmVzdWx0Lmxlbmd0aDtcbiAgICAgICAgICAgIGNvbnN0IG9mZnNldEluQ2h1bmsgPSB0aGlzLmN1cnNvciAtIGNodW5rU3RhcnQ7XG4gICAgICAgICAgICBjdXJzb3JDb2wgPSAoKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpID8gcHJvbXB0V2lkdGggOiBjb250aW51YXRpb25XaWR0aCkgKyBvZmZzZXRJbkNodW5rO1xuICAgICAgICAgICAgZm91bmRDdXJzb3IgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJlc3VsdC5wdXNoKGRpc3BsYXlMaW5lKTtcbiAgICAgICAgaXNGaXJzdERpc3BsYXlMaW5lID0gZmFsc2U7XG5cbiAgICAgICAgLy8gSWYgbm90aGluZyBsZWZ0IGFuZCB0aGlzIHdhcyBhbiBlbXB0eSBsaW5lLCB3ZSBhbHJlYWR5IGFkZGVkIGl0XG4gICAgICAgIGlmIChyZW1haW5pbmcubGVuZ3RoID09PSAwICYmIGNodW5rLmxlbmd0aCA9PT0gMCkgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIHRvdGFsQ2hhcnMgKz0gbGluZS5sZW5ndGggKyAxOyAvLyArMSBmb3IgdGhlIG5ld2xpbmUgc2VwYXJhdG9yXG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGN1cnNvciBhdCB2ZXJ5IGVuZFxuICAgIGlmICghZm91bmRDdXJzb3IpIHtcbiAgICAgIGN1cnNvckxpbmUgPSBNYXRoLm1heCgwLCByZXN1bHQubGVuZ3RoIC0gMSk7XG4gICAgICBjb25zdCBsYXN0TGluZSA9IHJlc3VsdFtjdXJzb3JMaW5lXSA/PyAnJztcbiAgICAgIGN1cnNvckNvbCA9IHRoaXMudmlzaWJsZUxlbmd0aChsYXN0TGluZSk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGN1cnNvciBoaWdobGlnaHQgdG8gdGhlIGFwcHJvcHJpYXRlIHBvc2l0aW9uXG4gICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCB0YXJnZXRMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY29uc3QgdmlzaWJsZVBhcnQgPSB0aGlzLnN0cmlwQW5zaSh0YXJnZXRMaW5lKTtcbiAgICAgIGNvbnN0IGN1cnNvclBvcyA9IE1hdGgubWluKGN1cnNvckNvbCwgdmlzaWJsZVBhcnQubGVuZ3RoKTtcblxuICAgICAgLy8gUmVidWlsZCB0aGUgbGluZSB3aXRoIGN1cnNvciBoaWdobGlnaHRcbiAgICAgIGNvbnN0IGJlZm9yZSA9IHZpc2libGVQYXJ0LnNsaWNlKDAsIGN1cnNvclBvcyk7XG4gICAgICBjb25zdCBhdCA9IHZpc2libGVQYXJ0LmNoYXJBdChjdXJzb3JQb3MpIHx8ICcgJztcbiAgICAgIGNvbnN0IGFmdGVyID0gdmlzaWJsZVBhcnQuc2xpY2UoY3Vyc29yUG9zICsgMSk7XG5cbiAgICAgIC8vIFByZXNlcnZlIHRoZSBwcm9tcHQvaW5kZW50IHN0eWxpbmdcbiAgICAgIGNvbnN0IHByZWZpeCA9IGN1cnNvckxpbmUgPT09IDAgPyBwcm9tcHQgOiBjb250aW51YXRpb25JbmRlbnQ7XG4gICAgICBjb25zdCB0ZXh0UGFydCA9IGN1cnNvckxpbmUgPT09IDAgPyBiZWZvcmUuc2xpY2UocHJvbXB0V2lkdGgpIDogYmVmb3JlLnNsaWNlKGNvbnRpbnVhdGlvbldpZHRoKTtcbiAgICAgIHJlc3VsdFtjdXJzb3JMaW5lXSA9IGAke3ByZWZpeH0ke3RleHRQYXJ0fSR7RVNDLlJFVkVSU0V9JHthdH0ke0VTQy5SRVNFVH0ke2FmdGVyfWA7XG4gICAgfVxuXG4gICAgLy8gU3RvcmUgY3Vyc29yIGNvbHVtbiBmb3IgdGVybWluYWwgcG9zaXRpb25pbmdcbiAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBjdXJzb3JDb2wgKyAxO1xuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRJbnB1dFdpbmRvdyhhdmFpbGFibGU6IG51bWJlcik6IHsgdGV4dDogc3RyaW5nOyBjdXJzb3I6IG51bWJlciB9IHtcbiAgICBpZiAoYXZhaWxhYmxlIDw9IDApIHtcbiAgICAgIHJldHVybiB7IHRleHQ6ICcnLCBjdXJzb3I6IDAgfTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmJ1ZmZlci5yZXBsYWNlKC9cXHIvZywgJ1xcbicpO1xuICAgIGNvbnN0IGN1cnNvckluZGV4ID0gTWF0aC5taW4odGhpcy5jdXJzb3IsIG5vcm1hbGl6ZWQubGVuZ3RoKTtcblxuICAgIGxldCBvZmZzZXQgPSB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0O1xuICAgIGlmIChjdXJzb3JJbmRleCA8IG9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gY3Vyc29ySW5kZXg7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJmbG93ID0gY3Vyc29ySW5kZXggLSBvZmZzZXQgLSBhdmFpbGFibGUgKyAxO1xuICAgIGlmIChvdmVyZmxvdyA+IDApIHtcbiAgICAgIG9mZnNldCArPSBvdmVyZmxvdztcbiAgICB9XG4gICAgY29uc3QgbWF4T2Zmc2V0ID0gTWF0aC5tYXgoMCwgbm9ybWFsaXplZC5sZW5ndGggLSBhdmFpbGFibGUpO1xuICAgIGlmIChvZmZzZXQgPiBtYXhPZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IG1heE9mZnNldDtcbiAgICB9XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IG9mZnNldDtcblxuICAgIGNvbnN0IHdpbmRvdyA9IG5vcm1hbGl6ZWQuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBhdmFpbGFibGUpO1xuICAgIGNvbnN0IGRpc3BsYXkgPSB3aW5kb3cuc3BsaXQoJycpLm1hcChjaGFyID0+IChjaGFyID09PSAnXFxuJyA/IE5FV0xJTkVfUExBQ0VIT0xERVIgOiBjaGFyKSkuam9pbignJyk7XG4gICAgY29uc3QgY3Vyc29ySW5XaW5kb3cgPSBNYXRoLm1pbihkaXNwbGF5Lmxlbmd0aCwgTWF0aC5tYXgoMCwgY3Vyc29ySW5kZXggLSBvZmZzZXQpKTtcblxuICAgIGNvbnN0IGJlZm9yZSA9IGRpc3BsYXkuc2xpY2UoMCwgY3Vyc29ySW5XaW5kb3cpO1xuICAgIGNvbnN0IGF0ID0gZGlzcGxheS5jaGFyQXQoY3Vyc29ySW5XaW5kb3cpIHx8ICcgJztcbiAgICBjb25zdCBhZnRlciA9IGRpc3BsYXkuc2xpY2UoY3Vyc29ySW5XaW5kb3cgKyAxKTtcblxuICAgIHJldHVybiB7XG4gICAgICB0ZXh0OiBgJHtiZWZvcmV9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YCxcbiAgICAgIGN1cnNvcjogY3Vyc29ySW5XaW5kb3csXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgY29sbGFwc2VkIHBhc3RlIGludG8gdGhlIGJ1ZmZlciB3aXRob3V0IHN1Ym1pdHRpbmcgKEN0cmwrTCkuXG4gICAqIEFsbG93cyB1c2VyIHRvIGVkaXQgdGhlIHBhc3RlZCBjb250ZW50IGJlZm9yZSBzdWJtaXNzaW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQ7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgLy8gUHV0IHRoZSBwYXN0ZWQgY29udGVudCBpbnRvIHRoZSBidWZmZXIgZm9yIGVkaXRpbmdcbiAgICB0aGlzLmJ1ZmZlciA9IHRleHQ7XG4gICAgdGhpcy5jdXJzb3IgPSB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgYW5kIHN1Ym1pdCBpbW1lZGlhdGVseSAoRW50ZXIpLlxuICAgKiBVc2VkIHdoZW4gdXNlciB3YW50cyB0byBzZW5kIHRoZSBwYXN0ZWQgY29udGVudCBhcy1pcy5cbiAgICovXG4gIHByaXZhdGUgZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbGxhcHNlZFBhc3RlKSByZXR1cm47XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAvLyBDbGVhciB0aGUgYnVmZmVyIGZpcnN0IHRvIGF2b2lkIGFueSB2aXN1YWwgZHVwbGljYXRpb25cbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIC8vIFN1Ym1pdCB0aGUgcGFzdGUgY29udGVudCAoZGlzcGxheVVzZXJQcm9tcHQgaXMgY2FsbGVkIHdpdGhpbiBzdWJtaXRUZXh0IGZvciBub24tc2xhc2ggY29tbWFuZHMpXG4gICAgdGhpcy5zdWJtaXRUZXh0KHRleHQpO1xuICB9XG5cbiAgY2FwdHVyZUlucHV0KG9wdGlvbnM6IHsgYWxsb3dFbXB0eT86IGJvb2xlYW47IHRyaW0/OiBib29sZWFuOyByZXNldEJ1ZmZlcj86IGJvb2xlYW4gfSA9IHt9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgYWxyZWFkeSBpbiBwcm9ncmVzcycpKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5yZXNldEJ1ZmZlcikge1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IHtcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgdHJpbTogb3B0aW9ucy50cmltICE9PSBmYWxzZSxcbiAgICAgICAgICBhbGxvd0VtcHR5OiBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxJbnB1dENhcHR1cmUocmVhc29uPzogdW5rbm93bik6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2FwdHVyZSA9IHRoaXMuaW5wdXRDYXB0dXJlO1xuICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICBjYXB0dXJlLnJlamVjdD8uKHJlYXNvbiA/PyBuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICB9XG5cblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyYXBPdmVybGF5TGluZSh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGluZGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5zcGxpdCgvKFxccyspLyk7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgbmV4dCA9IGN1cnJlbnQgKyB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChuZXh0KSA+IHdpZHRoICYmIGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICAgIC8vIERvbid0IHRydW5jYXRlIC0ganVzdCBwdXNoIHRoZSBsaW5lIGFzLWlzIChpdCBmaXRzIHdpdGhpbiB3aWR0aClcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50LnRyaW1FbmQoKSk7XG4gICAgICAgIGN1cnJlbnQgPSBpbmRlbnQgKyB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnQudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICAvLyBJZiBubyBsaW5lcyB3ZXJlIHByb2R1Y2VkLCByZXR1cm4gdGhlIG9yaWdpbmFsIHRleHQgd2l0aG91dCB0cnVuY2F0aW9uXG4gICAgcmV0dXJuIGxpbmVzLmxlbmd0aCA/IGxpbmVzIDogW3RleHRdO1xuICB9XG5cbiAgcHJpdmF0ZSBzYWZlV2lkdGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5vdXRwdXQuaXNUVFkgPyB0aGlzLmNvbHMgfHwgODAgOiA4MDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgY29scyAtIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSB2aXNpYmxlTGVuZ3RoKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAwO1xuICAgIHJldHVybiB0aGlzLnN0cmlwQW5zaSh2YWx1ZSkubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBzdHJpcEFuc2kodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xcdTAwMUJcXFtbMC0/XSpbIC0vXSpbQC1+XS9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIHRydW5jYXRlTGluZSh2YWx1ZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgY29uc3QgbGltaXQgPSBNYXRoLm1heCgxLCB3aWR0aCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBjb25zdCB0b2tlbnMgPSB2YWx1ZS5zcGxpdCgvKFxceDFiXFxbWzAtOTtdKm0pL3UpO1xuICAgIGxldCB2aXNpYmxlID0gMDtcbiAgICBsZXQgdHJ1bmNhdGVkID0gZmFsc2U7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICAgIGlmICghdG9rZW4pIGNvbnRpbnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmICgvXlxceDFiXFxbWzAtOTtdKm0kL3UudGVzdCh0b2tlbikpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2aXNpYmxlID49IGxpbWl0KSB7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVtYWluaW5nID0gbGltaXQgLSB2aXNpYmxlO1xuICAgICAgaWYgKHRva2VuLmxlbmd0aCA8PSByZW1haW5pbmcpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICB2aXNpYmxlICs9IHRva2VuLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNsaWNlTGVuZ3RoID0gTWF0aC5tYXgoMCwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHQgKz0gdG9rZW4uc2xpY2UoMCwgc2xpY2VMZW5ndGgpO1xuICAgICAgICAgIHZpc2libGUgKz0gc2xpY2VMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9ICfigKYnO1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHJ1bmNhdGVkICYmICFyZXN1bHQuZW5kc1dpdGgoRVNDLlJFU0VUKSkge1xuICAgICAgcmVzdWx0ICs9IEVTQy5SRVNFVDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0QnVmZmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICB9XG5cbiAgZ2V0Q3Vyc29yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3Vyc29yO1xuICB9XG5cbiAgc2V0QnVmZmVyKHRleHQ6IHN0cmluZywgY3Vyc29yUG9zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXIgPSB0ZXh0O1xuICAgIC8vIFZhbGlkYXRlIGN1cnNvciBwb3NpdGlvbiB0byBwcmV2ZW50IG91dC1vZi1ib3VuZHMgaXNzdWVzXG4gICAgY29uc3QgcmVxdWVzdGVkQ3Vyc29yID0gY3Vyc29yUG9zID8/IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmVxdWVzdGVkQ3Vyc29yLCB0ZXh0Lmxlbmd0aCkpO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRTZWNyZXRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnNlY3JldE1vZGUgPSBlbmFibGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhckJ1ZmZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0TW9kZVN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBjb21wYWN0aW5nIHN0YXR1cyB3aXRoIGFuaW1hdGVkIHNwaW5uZXIgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBVc2VzIOKcuyBjaGFyYWN0ZXIgd2l0aCBhbmltYXRpb24gdG8gaW5kaWNhdGUgY29udGV4dCBjb21wYWN0aW9uIGluIHByb2dyZXNzXG4gICAqL1xuICBzaG93Q29tcGFjdGluZ1N0YXR1cyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnNwaW5uZXJGcmFtZSsrO1xuICAgICAgICAvLyBDeWNsZSBhY3Rpdml0eSBwaHJhc2UgZXZlcnkgfjQgc2Vjb25kcyAoNTAgZnJhbWVzIGF0IDgwbXMpXG4gICAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDUwID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVBocmFzZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH0sIDgwKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBjb21wYWN0aW5nIHN0YXR1cyBhbmQgc3RvcCBzcGlubmVyIGFuaW1hdGlvblxuICAgKi9cbiAgaGlkZUNvbXBhY3RpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgZW1pdFByb21wdChjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnB1c2hQcm9tcHRFdmVudChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHVzZXIgcHJvbXB0IGltbWVkaWF0ZWx5IGluIHNjcm9sbGJhY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBXcml0ZXMgc3luY2hyb25vdXNseSB0byBlbnN1cmUgaXQgYXBwZWFycyBPTkNFIGluIHNjcm9sbGJhY2sgYmVmb3JlIHN0YXR1cyB1cGRhdGVzLlxuICAgKiBUaGUgcHJvbXB0IGlucHV0IGFyZWEgd2lsbCB0aGVuIGZsb2F0IGJlbG93IHRoaXMgYW5kIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgZGlzcGxheVVzZXJQcm9tcHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgIC8vIFByZXZlbnQgZHVwbGljYXRlIHByb21wdCBkaXNwbGF5IHdpdGhpbiAxLjUgc2Vjb25kc1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdFByb21wdEV2ZW50ICYmIHRoaXMubGFzdFByb21wdEV2ZW50LnRleHQgPT09IG5vcm1hbGl6ZWQgJiYgbm93IC0gdGhpcy5sYXN0UHJvbXB0RXZlbnQuYXQgPCAxNTAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubGFzdFByb21wdEV2ZW50ID0geyB0ZXh0OiBub3JtYWxpemVkLCBhdDogbm93IH07XG5cbiAgICAvLyBBZGQgdG8gZXZlbnQgcXVldWUgaW5zdGVhZCBvZiB3cml0aW5nIGRpcmVjdGx5IHRvIGVuc3VyZSBwcm9wZXIgcmVuZGVyaW5nXG4gICAgdGhpcy5hZGRFdmVudCgncHJvbXB0Jywgbm9ybWFsaXplZCk7XG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBMb3ctbGV2ZWwgaGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyaXRlKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMub3V0cHV0LndyaXRlKGRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSBwdXNoUHJvbXB0RXZlbnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0UHJvbXB0RXZlbnQgJiYgdGhpcy5sYXN0UHJvbXB0RXZlbnQudGV4dCA9PT0gbm9ybWFsaXplZCAmJiBub3cgLSB0aGlzLmxhc3RQcm9tcHRFdmVudC5hdCA8IDE1MDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJQcm9tcHRBcmVhKCk6IHZvaWQge1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMubGFzdE92ZXJsYXk/LmxpbmVzLmxlbmd0aCA/PyB0aGlzLnByb21wdEhlaWdodCA/PyAwO1xuICAgIGlmIChoZWlnaHQgPT09IDApIHJldHVybjtcblxuICAgIC8vIEN1cnNvciBpcyBhdCBwcm9tcHQgcm93LiBNb3ZlIHVwIHRvIHRvcCBvZiBvdmVybGF5IGZpcnN0LlxuICAgIGlmICh0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheS5wcm9tcHRJbmRleDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICB0aGlzLndyaXRlKGBcXHgxYlske2xpbmVzVG9Ub3B9QWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdyBhdCB0b3AsIGNsZWFyIGVhY2ggbGluZSBkb3dud2FyZFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICAgIHRoaXMud3JpdGUoJ1xccicpO1xuICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICBpZiAoaSA8IGhlaWdodCAtIDEpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFx4MWJbQicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vdmUgYmFjayB0byB0b3AgKHdoZXJlIGNvbnRlbnQgc2hvdWxkIGNvbnRpbnVlIGZyb20pXG4gICAgaWYgKGhlaWdodCA+IDEpIHtcbiAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7aGVpZ2h0IC0gMX1BYCk7XG4gICAgfVxuICAgIHRoaXMud3JpdGUoJ1xccicpO1xuXG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSAwO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVGVybWluYWxTaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5yb3dzID0gdGhpcy5vdXRwdXQucm93cyB8fCAyNDtcbiAgICAgIHRoaXMuY29scyA9IHRoaXMub3V0cHV0LmNvbHVtbnMgfHwgODA7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQVdBLElBQUFBLFFBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLE1BQUEsR0FBQUMsc0JBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFL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