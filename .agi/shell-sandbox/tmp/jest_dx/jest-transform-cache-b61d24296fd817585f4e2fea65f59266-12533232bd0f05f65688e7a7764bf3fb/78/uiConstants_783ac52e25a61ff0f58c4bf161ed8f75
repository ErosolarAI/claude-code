76ec8d8abb24083c7de334cad882e8f8
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UI_STRINGS = exports.TRUNCATE = exports.TOKEN_THRESHOLDS = exports.TIMING = exports.PROGRESS = exports.ELLIPSIS = exports.DISPLAY_LIMITS = exports.COVERAGE_THRESHOLDS = exports.CONTEXT_THRESHOLDS = void 0;
exports.calculatePercentage = calculatePercentage;
exports.calculateUsableWidth = calculateUsableWidth;
exports.clampPercentage = clampPercentage;
exports.formatDurationMs = formatDurationMs;
exports.formatElapsedSeconds = formatElapsedSeconds;
exports.getContextColor = getContextColor;
exports.getCoverageColor = getCoverageColor;
exports.getTokenColor = getTokenColor;
exports.moreIndicator = void 0;
exports.normalizeLineCount = normalizeLineCount;
exports.truncatePath = truncatePath;
exports.truncateString = truncateString;
/**
 * Centralized UI Constants
 *
 * Single source of truth for all magic numbers, thresholds, and display limits
 * used throughout the UI layer. Prevents inconsistencies and makes tuning easier.
 */

// ============================================================================
// TRUNCATION LIMITS
// ============================================================================

/**
 * Standard truncation lengths for different content types.
 * All values account for ellipsis character (‚Ä¶) which is 1 char.
 */
const TRUNCATE = exports.TRUNCATE = {
  /** Short paths in compact displays */
  SHORT_PATH: 40,
  /** Full paths in expanded displays */
  LONG_PATH: 80,
  /** Task/tool descriptions */
  DESCRIPTION: 50,
  /** Search queries and patterns */
  QUERY: 40,
  /** Pattern display in search results */
  PATTERN: 30,
  /** Preview lines in collapsed content */
  PREVIEW_LINE: 70,
  /** Error messages */
  ERROR_MESSAGE: 80,
  /** Command display */
  COMMAND: 100,
  /** Generic content truncation */
  DEFAULT: 40
};

/**
 * The ellipsis character to use for truncation.
 * Unicode ellipsis (‚Ä¶) is preferred over three dots (...) for consistency.
 */
const ELLIPSIS = exports.ELLIPSIS = '‚Ä¶';

/**
 * Format for showing additional hidden items.
 */
const moreIndicator = count => `+${count} more`;

// ============================================================================
// PROGRESS BAR CONFIGURATION
// ============================================================================
exports.moreIndicator = moreIndicator;
const PROGRESS = exports.PROGRESS = {
  /** Default width for progress bars */
  BAR_WIDTH: 20,
  /** Compact progress bar width */
  COMPACT_WIDTH: 15,
  /** Micro progress indicator width */
  MICRO_WIDTH: 10,
  /** Progress bar characters */
  CHARS: {
    filled: '‚ñà',
    empty: '‚ñë',
    partial: ['‚ñë', '‚ñí', '‚ñì', '‚ñà']
  }
};

// ============================================================================
// STATUS/HEALTH THRESHOLDS
// ============================================================================

/**
 * Color thresholds for context/memory usage indicators.
 * Values are percentages (0-100).
 */
const CONTEXT_THRESHOLDS = exports.CONTEXT_THRESHOLDS = {
  /** Critical - show error color */
  CRITICAL: 90,
  /** Warning - show warning color */
  WARNING: 70,
  /** Info - show info color */
  INFO: 50
  // Below INFO threshold shows success color
};

/**
 * Color thresholds for test coverage displays.
 */
const COVERAGE_THRESHOLDS = exports.COVERAGE_THRESHOLDS = {
  /** Good coverage - show success color */
  SUCCESS: 80,
  /** Acceptable coverage - show warning color */
  WARNING: 60
  // Below WARNING threshold shows error color
};

/**
 * Color thresholds for token usage displays.
 */
const TOKEN_THRESHOLDS = exports.TOKEN_THRESHOLDS = {
  /** High usage - show error color */
  HIGH: 90,
  /** Medium usage - show warning color */
  MEDIUM: 70
  // Below MEDIUM shows success color
};

// ============================================================================
// DISPLAY LIMITS
// ============================================================================

const DISPLAY_LIMITS = exports.DISPLAY_LIMITS = {
  /** Maximum lines to show in inline panels before collapsing */
  INLINE_PANEL_MAX_LINES: 64,
  /** Minimum usable width for content */
  MIN_WIDTH: 20,
  /** Default max width for thinking/reasoning blocks */
  MAX_THOUGHT_WIDTH: 72,
  /** Maximum tool arguments to display inline */
  MAX_INLINE_ARGS: 5,
  /** Maximum collapsed tool results to keep in memory */
  MAX_COLLAPSED_RESULTS: 50,
  /** Preview lines for expandable content */
  PREVIEW_LINES: 5,
  /** Preview lines for tool results */
  TOOL_RESULT_PREVIEW_LINES: 3,
  /** Maximum files to show in search results preview */
  SEARCH_PREVIEW_FILES: 4,
  /** Maximum matches to show in grep results preview */
  GREP_PREVIEW_MATCHES: 3,
  /** Maximum attack targets to display in real-time */
  MAX_ATTACK_TARGETS: 10,
  /** Maximum lines for security scan results */
  MAX_SECURITY_RESULTS: 100,
  /** Maximum ports to show in network scan summaries */
  MAX_SCAN_PORTS: 20,
  /** Maximum vulnerabilities to display in real-time */
  MAX_VULNERABILITIES: 25
};

// ============================================================================
// TIMING CONSTANTS
// ============================================================================

const TIMING = exports.TIMING = {
  /** Minimum duration (ms) to show elapsed time */
  MIN_SHOW_DURATION: 1000,
  /** Debounce delay for status updates (ms) */
  STATUS_DEBOUNCE: 100,
  /** Animation frame interval (ms) */
  ANIMATION_INTERVAL: 80,
  /** Spinner animation interval (ms) */
  SPINNER_INTERVAL: 100
};

// ============================================================================
// UI STRINGS
// ============================================================================

const UI_STRINGS = exports.UI_STRINGS = {
  /** Interrupt hint shown during long operations */
  INTERRUPT_HINT: 'esc to interrupt',
  /** Expand hint for collapsed content */
  EXPAND_HINT: 'ctrl+o to expand',
  /** No matches found */
  NO_MATCHES: 'No matches found',
  /** No output */
  NO_OUTPUT: 'No output',
  /** Loading indicator */
  LOADING: 'Loading‚Ä¶',
  /** Success indicator */
  SUCCESS: '‚úì',
  /** Failure indicator */
  FAILURE: '‚úó',
  /** Warning indicator */
  WARNING: '‚ö†',
  /** Info indicator */
  INFO: '‚Ñπ',
  /** Pending indicator */
  PENDING: '‚óã',
  /** Offensive security indicators */
  ATTACK_MODE: '‚öî ATTACK MODE',
  RECON_MODE: 'üïµÔ∏è RECON MODE',
  EXPLOIT_MODE: 'üí• EXPLOIT MODE',
  PERSISTENCE_MODE: 'üîó PERSISTENCE MODE',
  DESTRUCTION_MODE: 'üíÄ DESTRUCTION MODE',
  C2_MODE: 'üõ∞ C2 MODE',
  /** Security status indicators */
  TARGET_ACQUIRED: 'üéØ TARGET ACQUIRED',
  VULNERABILITY_FOUND: 'üîì VULNERABILITY FOUND',
  EXPLOIT_SUCCESS: 'üí£ EXPLOIT SUCCESS',
  PERSISTENCE_ESTABLISHED: 'üîí PERSISTENCE ESTABLISHED',
  DATA_EXFILTRATED: 'üì§ DATA EXFILTRATED',
  INFRASTRUCTURE_COMPROMISED: 'üèó INFRASTRUCTURE COMPROMISED',
  /** Attack phase indicators */
  PHASE_RECON: 'üïµÔ∏è Phase: Reconnaissance',
  PHASE_SCANNING: 'üì° Phase: Scanning',
  PHASE_EXPLOITATION: 'üí• Phase: Exploitation',
  PHASE_PERSISTENCE: 'üîó Phase: Persistence',
  PHASE_EXFILTRATION: 'üì§ Phase: Exfiltration',
  PHASE_DESTRUCTION: 'üíÄ Phase: Destruction',
  /** Real-time monitoring */
  MONITORING_ACTIVE: 'üëÅ MONITORING ACTIVE',
  TARGET_DOWN: 'üî¥ TARGET DOWN',
  TARGET_UP: 'üü¢ TARGET UP',
  SERVICE_DEGRADED: 'üü° SERVICE DEGRADED'
};

// ============================================================================
// UTILITY FUNCTIONS
// ============================================================================

/**
 * Safely truncate a string with ellipsis.
 * Handles edge cases and ensures consistent truncation.
 */
function truncateString(text, maxLength, ellipsis = ELLIPSIS) {
  if (!text || maxLength < 1) return '';
  if (text.length <= maxLength) return text;
  const truncateAt = Math.max(1, maxLength - ellipsis.length);
  return text.slice(0, truncateAt) + ellipsis;
}

/**
 * Truncate a file path, preserving the end (most relevant part).
 * Shows "‚Ä¶/path/to/file.ts" instead of "/very/long/pat‚Ä¶"
 */
function truncatePath(path, maxLength, ellipsis = ELLIPSIS) {
  if (!path || maxLength < 1) return '';
  if (path.length <= maxLength) return path;

  // Keep the end of the path (most relevant)
  const keepLength = Math.max(1, maxLength - ellipsis.length);
  return ellipsis + path.slice(-keepLength);
}

/**
 * Calculate percentage with bounds checking.
 * Always returns a value between 0 and 100.
 */
function calculatePercentage(current, total) {
  if (total <= 0 || !Number.isFinite(current) || !Number.isFinite(total)) {
    return 0;
  }
  return Math.min(100, Math.max(0, Math.round(current / total * 100)));
}

/**
 * Clamp a percentage value to valid range.
 */
function clampPercentage(value) {
  if (!Number.isFinite(value)) return 0;
  return Math.min(100, Math.max(0, value));
}

/**
 * Get color function based on context usage percentage.
 */
function getContextColor(percentage, colors) {
  const pct = clampPercentage(percentage);
  if (pct > CONTEXT_THRESHOLDS.CRITICAL) return colors.error;
  if (pct > CONTEXT_THRESHOLDS.WARNING) return colors.warning;
  if (pct > CONTEXT_THRESHOLDS.INFO) return colors.info;
  return colors.success;
}

/**
 * Get color function based on coverage percentage.
 */
function getCoverageColor(percentage, colors) {
  const pct = clampPercentage(percentage);
  if (pct >= COVERAGE_THRESHOLDS.SUCCESS) return colors.success;
  if (pct >= COVERAGE_THRESHOLDS.WARNING) return colors.warning;
  return colors.error;
}

/**
 * Get color function based on token usage percentage.
 */
function getTokenColor(percentage, colors) {
  const pct = clampPercentage(percentage);
  if (pct >= TOKEN_THRESHOLDS.HIGH) return colors.error;
  if (pct >= TOKEN_THRESHOLDS.MEDIUM) return colors.warning;
  return colors.success;
}

/**
 * Format duration in milliseconds to human-readable string.
 * Handles ms, seconds, minutes, and hours.
 */
function formatDurationMs(ms) {
  if (!Number.isFinite(ms) || ms < 0) return '0ms';
  if (ms < 1000) {
    return `${Math.round(ms)}ms`;
  }
  const seconds = Math.floor(ms / 1000);
  const minutes = Math.floor(seconds / 60);
  const hours = Math.floor(minutes / 60);
  if (hours > 0) {
    const remainingMinutes = minutes % 60;
    return `${hours}h ${remainingMinutes}m`;
  }
  if (minutes > 0) {
    const remainingSeconds = seconds % 60;
    return `${minutes}m ${remainingSeconds}s`;
  }
  return `${seconds}s`;
}

/**
 * Format elapsed time from seconds.
 */
function formatElapsedSeconds(seconds) {
  return formatDurationMs(seconds * 1000);
}

/**
 * Calculate usable width accounting for margins.
 */
function calculateUsableWidth(terminalWidth, margins = 4) {
  return Math.max(DISPLAY_LIMITS.MIN_WIDTH, terminalWidth - margins);
}

/**
 * Validate and normalize a line count.
 */
function normalizeLineCount(lines, defaultValue = 0) {
  if (!Number.isFinite(lines) || lines < 0) return defaultValue;
  return Math.floor(lines);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUUlVOQ0FURSIsImV4cG9ydHMiLCJTSE9SVF9QQVRIIiwiTE9OR19QQVRIIiwiREVTQ1JJUFRJT04iLCJRVUVSWSIsIlBBVFRFUk4iLCJQUkVWSUVXX0xJTkUiLCJFUlJPUl9NRVNTQUdFIiwiQ09NTUFORCIsIkRFRkFVTFQiLCJFTExJUFNJUyIsIm1vcmVJbmRpY2F0b3IiLCJjb3VudCIsIlBST0dSRVNTIiwiQkFSX1dJRFRIIiwiQ09NUEFDVF9XSURUSCIsIk1JQ1JPX1dJRFRIIiwiQ0hBUlMiLCJmaWxsZWQiLCJlbXB0eSIsInBhcnRpYWwiLCJDT05URVhUX1RIUkVTSE9MRFMiLCJDUklUSUNBTCIsIldBUk5JTkciLCJJTkZPIiwiQ09WRVJBR0VfVEhSRVNIT0xEUyIsIlNVQ0NFU1MiLCJUT0tFTl9USFJFU0hPTERTIiwiSElHSCIsIk1FRElVTSIsIkRJU1BMQVlfTElNSVRTIiwiSU5MSU5FX1BBTkVMX01BWF9MSU5FUyIsIk1JTl9XSURUSCIsIk1BWF9USE9VR0hUX1dJRFRIIiwiTUFYX0lOTElORV9BUkdTIiwiTUFYX0NPTExBUFNFRF9SRVNVTFRTIiwiUFJFVklFV19MSU5FUyIsIlRPT0xfUkVTVUxUX1BSRVZJRVdfTElORVMiLCJTRUFSQ0hfUFJFVklFV19GSUxFUyIsIkdSRVBfUFJFVklFV19NQVRDSEVTIiwiTUFYX0FUVEFDS19UQVJHRVRTIiwiTUFYX1NFQ1VSSVRZX1JFU1VMVFMiLCJNQVhfU0NBTl9QT1JUUyIsIk1BWF9WVUxORVJBQklMSVRJRVMiLCJUSU1JTkciLCJNSU5fU0hPV19EVVJBVElPTiIsIlNUQVRVU19ERUJPVU5DRSIsIkFOSU1BVElPTl9JTlRFUlZBTCIsIlNQSU5ORVJfSU5URVJWQUwiLCJVSV9TVFJJTkdTIiwiSU5URVJSVVBUX0hJTlQiLCJFWFBBTkRfSElOVCIsIk5PX01BVENIRVMiLCJOT19PVVRQVVQiLCJMT0FESU5HIiwiRkFJTFVSRSIsIlBFTkRJTkciLCJBVFRBQ0tfTU9ERSIsIlJFQ09OX01PREUiLCJFWFBMT0lUX01PREUiLCJQRVJTSVNURU5DRV9NT0RFIiwiREVTVFJVQ1RJT05fTU9ERSIsIkMyX01PREUiLCJUQVJHRVRfQUNRVUlSRUQiLCJWVUxORVJBQklMSVRZX0ZPVU5EIiwiRVhQTE9JVF9TVUNDRVNTIiwiUEVSU0lTVEVOQ0VfRVNUQUJMSVNIRUQiLCJEQVRBX0VYRklMVFJBVEVEIiwiSU5GUkFTVFJVQ1RVUkVfQ09NUFJPTUlTRUQiLCJQSEFTRV9SRUNPTiIsIlBIQVNFX1NDQU5OSU5HIiwiUEhBU0VfRVhQTE9JVEFUSU9OIiwiUEhBU0VfUEVSU0lTVEVOQ0UiLCJQSEFTRV9FWEZJTFRSQVRJT04iLCJQSEFTRV9ERVNUUlVDVElPTiIsIk1PTklUT1JJTkdfQUNUSVZFIiwiVEFSR0VUX0RPV04iLCJUQVJHRVRfVVAiLCJTRVJWSUNFX0RFR1JBREVEIiwidHJ1bmNhdGVTdHJpbmciLCJ0ZXh0IiwibWF4TGVuZ3RoIiwiZWxsaXBzaXMiLCJsZW5ndGgiLCJ0cnVuY2F0ZUF0IiwiTWF0aCIsIm1heCIsInNsaWNlIiwidHJ1bmNhdGVQYXRoIiwicGF0aCIsImtlZXBMZW5ndGgiLCJjYWxjdWxhdGVQZXJjZW50YWdlIiwiY3VycmVudCIsInRvdGFsIiwiTnVtYmVyIiwiaXNGaW5pdGUiLCJtaW4iLCJyb3VuZCIsImNsYW1wUGVyY2VudGFnZSIsInZhbHVlIiwiZ2V0Q29udGV4dENvbG9yIiwicGVyY2VudGFnZSIsImNvbG9ycyIsInBjdCIsImVycm9yIiwid2FybmluZyIsImluZm8iLCJzdWNjZXNzIiwiZ2V0Q292ZXJhZ2VDb2xvciIsImdldFRva2VuQ29sb3IiLCJmb3JtYXREdXJhdGlvbk1zIiwibXMiLCJzZWNvbmRzIiwiZmxvb3IiLCJtaW51dGVzIiwiaG91cnMiLCJyZW1haW5pbmdNaW51dGVzIiwicmVtYWluaW5nU2Vjb25kcyIsImZvcm1hdEVsYXBzZWRTZWNvbmRzIiwiY2FsY3VsYXRlVXNhYmxlV2lkdGgiLCJ0ZXJtaW5hbFdpZHRoIiwibWFyZ2lucyIsIm5vcm1hbGl6ZUxpbmVDb3VudCIsImxpbmVzIiwiZGVmYXVsdFZhbHVlIl0sInNvdXJjZXMiOlsidWlDb25zdGFudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDZW50cmFsaXplZCBVSSBDb25zdGFudHNcbiAqXG4gKiBTaW5nbGUgc291cmNlIG9mIHRydXRoIGZvciBhbGwgbWFnaWMgbnVtYmVycywgdGhyZXNob2xkcywgYW5kIGRpc3BsYXkgbGltaXRzXG4gKiB1c2VkIHRocm91Z2hvdXQgdGhlIFVJIGxheWVyLiBQcmV2ZW50cyBpbmNvbnNpc3RlbmNpZXMgYW5kIG1ha2VzIHR1bmluZyBlYXNpZXIuXG4gKi9cblxuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuLy8gVFJVTkNBVElPTiBMSU1JVFNcbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuLyoqXG4gKiBTdGFuZGFyZCB0cnVuY2F0aW9uIGxlbmd0aHMgZm9yIGRpZmZlcmVudCBjb250ZW50IHR5cGVzLlxuICogQWxsIHZhbHVlcyBhY2NvdW50IGZvciBlbGxpcHNpcyBjaGFyYWN0ZXIgKOKApikgd2hpY2ggaXMgMSBjaGFyLlxuICovXG5leHBvcnQgY29uc3QgVFJVTkNBVEUgPSB7XG4gIC8qKiBTaG9ydCBwYXRocyBpbiBjb21wYWN0IGRpc3BsYXlzICovXG4gIFNIT1JUX1BBVEg6IDQwLFxuICAvKiogRnVsbCBwYXRocyBpbiBleHBhbmRlZCBkaXNwbGF5cyAqL1xuICBMT05HX1BBVEg6IDgwLFxuICAvKiogVGFzay90b29sIGRlc2NyaXB0aW9ucyAqL1xuICBERVNDUklQVElPTjogNTAsXG4gIC8qKiBTZWFyY2ggcXVlcmllcyBhbmQgcGF0dGVybnMgKi9cbiAgUVVFUlk6IDQwLFxuICAvKiogUGF0dGVybiBkaXNwbGF5IGluIHNlYXJjaCByZXN1bHRzICovXG4gIFBBVFRFUk46IDMwLFxuICAvKiogUHJldmlldyBsaW5lcyBpbiBjb2xsYXBzZWQgY29udGVudCAqL1xuICBQUkVWSUVXX0xJTkU6IDcwLFxuICAvKiogRXJyb3IgbWVzc2FnZXMgKi9cbiAgRVJST1JfTUVTU0FHRTogODAsXG4gIC8qKiBDb21tYW5kIGRpc3BsYXkgKi9cbiAgQ09NTUFORDogMTAwLFxuICAvKiogR2VuZXJpYyBjb250ZW50IHRydW5jYXRpb24gKi9cbiAgREVGQVVMVDogNDAsXG59IGFzIGNvbnN0O1xuXG4vKipcbiAqIFRoZSBlbGxpcHNpcyBjaGFyYWN0ZXIgdG8gdXNlIGZvciB0cnVuY2F0aW9uLlxuICogVW5pY29kZSBlbGxpcHNpcyAo4oCmKSBpcyBwcmVmZXJyZWQgb3ZlciB0aHJlZSBkb3RzICguLi4pIGZvciBjb25zaXN0ZW5jeS5cbiAqL1xuZXhwb3J0IGNvbnN0IEVMTElQU0lTID0gJ+KApic7XG5cbi8qKlxuICogRm9ybWF0IGZvciBzaG93aW5nIGFkZGl0aW9uYWwgaGlkZGVuIGl0ZW1zLlxuICovXG5leHBvcnQgY29uc3QgbW9yZUluZGljYXRvciA9IChjb3VudDogbnVtYmVyKTogc3RyaW5nID0+IGArJHtjb3VudH0gbW9yZWA7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFBST0dSRVNTIEJBUiBDT05GSUdVUkFUSU9OXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBQUk9HUkVTUyA9IHtcbiAgLyoqIERlZmF1bHQgd2lkdGggZm9yIHByb2dyZXNzIGJhcnMgKi9cbiAgQkFSX1dJRFRIOiAyMCxcbiAgLyoqIENvbXBhY3QgcHJvZ3Jlc3MgYmFyIHdpZHRoICovXG4gIENPTVBBQ1RfV0lEVEg6IDE1LFxuICAvKiogTWljcm8gcHJvZ3Jlc3MgaW5kaWNhdG9yIHdpZHRoICovXG4gIE1JQ1JPX1dJRFRIOiAxMCxcbiAgLyoqIFByb2dyZXNzIGJhciBjaGFyYWN0ZXJzICovXG4gIENIQVJTOiB7XG4gICAgZmlsbGVkOiAn4paIJyxcbiAgICBlbXB0eTogJ+KWkScsXG4gICAgcGFydGlhbDogWyfilpEnLCAn4paSJywgJ+KWkycsICfilognXSxcbiAgfSxcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNUQVRVUy9IRUFMVEggVEhSRVNIT0xEU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIENvbG9yIHRocmVzaG9sZHMgZm9yIGNvbnRleHQvbWVtb3J5IHVzYWdlIGluZGljYXRvcnMuXG4gKiBWYWx1ZXMgYXJlIHBlcmNlbnRhZ2VzICgwLTEwMCkuXG4gKi9cbmV4cG9ydCBjb25zdCBDT05URVhUX1RIUkVTSE9MRFMgPSB7XG4gIC8qKiBDcml0aWNhbCAtIHNob3cgZXJyb3IgY29sb3IgKi9cbiAgQ1JJVElDQUw6IDkwLFxuICAvKiogV2FybmluZyAtIHNob3cgd2FybmluZyBjb2xvciAqL1xuICBXQVJOSU5HOiA3MCxcbiAgLyoqIEluZm8gLSBzaG93IGluZm8gY29sb3IgKi9cbiAgSU5GTzogNTAsXG4gIC8vIEJlbG93IElORk8gdGhyZXNob2xkIHNob3dzIHN1Y2Nlc3MgY29sb3Jcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogQ29sb3IgdGhyZXNob2xkcyBmb3IgdGVzdCBjb3ZlcmFnZSBkaXNwbGF5cy5cbiAqL1xuZXhwb3J0IGNvbnN0IENPVkVSQUdFX1RIUkVTSE9MRFMgPSB7XG4gIC8qKiBHb29kIGNvdmVyYWdlIC0gc2hvdyBzdWNjZXNzIGNvbG9yICovXG4gIFNVQ0NFU1M6IDgwLFxuICAvKiogQWNjZXB0YWJsZSBjb3ZlcmFnZSAtIHNob3cgd2FybmluZyBjb2xvciAqL1xuICBXQVJOSU5HOiA2MCxcbiAgLy8gQmVsb3cgV0FSTklORyB0aHJlc2hvbGQgc2hvd3MgZXJyb3IgY29sb3Jcbn0gYXMgY29uc3Q7XG5cbi8qKlxuICogQ29sb3IgdGhyZXNob2xkcyBmb3IgdG9rZW4gdXNhZ2UgZGlzcGxheXMuXG4gKi9cbmV4cG9ydCBjb25zdCBUT0tFTl9USFJFU0hPTERTID0ge1xuICAvKiogSGlnaCB1c2FnZSAtIHNob3cgZXJyb3IgY29sb3IgKi9cbiAgSElHSDogOTAsXG4gIC8qKiBNZWRpdW0gdXNhZ2UgLSBzaG93IHdhcm5pbmcgY29sb3IgKi9cbiAgTUVESVVNOiA3MCxcbiAgLy8gQmVsb3cgTUVESVVNIHNob3dzIHN1Y2Nlc3MgY29sb3Jcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIERJU1BMQVkgTElNSVRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBESVNQTEFZX0xJTUlUUyA9IHtcbiAgLyoqIE1heGltdW0gbGluZXMgdG8gc2hvdyBpbiBpbmxpbmUgcGFuZWxzIGJlZm9yZSBjb2xsYXBzaW5nICovXG4gIElOTElORV9QQU5FTF9NQVhfTElORVM6IDY0LFxuICAvKiogTWluaW11bSB1c2FibGUgd2lkdGggZm9yIGNvbnRlbnQgKi9cbiAgTUlOX1dJRFRIOiAyMCxcbiAgLyoqIERlZmF1bHQgbWF4IHdpZHRoIGZvciB0aGlua2luZy9yZWFzb25pbmcgYmxvY2tzICovXG4gIE1BWF9USE9VR0hUX1dJRFRIOiA3MixcbiAgLyoqIE1heGltdW0gdG9vbCBhcmd1bWVudHMgdG8gZGlzcGxheSBpbmxpbmUgKi9cbiAgTUFYX0lOTElORV9BUkdTOiA1LFxuICAvKiogTWF4aW11bSBjb2xsYXBzZWQgdG9vbCByZXN1bHRzIHRvIGtlZXAgaW4gbWVtb3J5ICovXG4gIE1BWF9DT0xMQVBTRURfUkVTVUxUUzogNTAsXG4gIC8qKiBQcmV2aWV3IGxpbmVzIGZvciBleHBhbmRhYmxlIGNvbnRlbnQgKi9cbiAgUFJFVklFV19MSU5FUzogNSxcbiAgLyoqIFByZXZpZXcgbGluZXMgZm9yIHRvb2wgcmVzdWx0cyAqL1xuICBUT09MX1JFU1VMVF9QUkVWSUVXX0xJTkVTOiAzLFxuICAvKiogTWF4aW11bSBmaWxlcyB0byBzaG93IGluIHNlYXJjaCByZXN1bHRzIHByZXZpZXcgKi9cbiAgU0VBUkNIX1BSRVZJRVdfRklMRVM6IDQsXG4gIC8qKiBNYXhpbXVtIG1hdGNoZXMgdG8gc2hvdyBpbiBncmVwIHJlc3VsdHMgcHJldmlldyAqL1xuICBHUkVQX1BSRVZJRVdfTUFUQ0hFUzogMyxcbiAgLyoqIE1heGltdW0gYXR0YWNrIHRhcmdldHMgdG8gZGlzcGxheSBpbiByZWFsLXRpbWUgKi9cbiAgTUFYX0FUVEFDS19UQVJHRVRTOiAxMCxcbiAgLyoqIE1heGltdW0gbGluZXMgZm9yIHNlY3VyaXR5IHNjYW4gcmVzdWx0cyAqL1xuICBNQVhfU0VDVVJJVFlfUkVTVUxUUzogMTAwLFxuICAvKiogTWF4aW11bSBwb3J0cyB0byBzaG93IGluIG5ldHdvcmsgc2NhbiBzdW1tYXJpZXMgKi9cbiAgTUFYX1NDQU5fUE9SVFM6IDIwLFxuICAvKiogTWF4aW11bSB2dWxuZXJhYmlsaXRpZXMgdG8gZGlzcGxheSBpbiByZWFsLXRpbWUgKi9cbiAgTUFYX1ZVTE5FUkFCSUxJVElFUzogMjUsXG59IGFzIGNvbnN0O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBUSU1JTkcgQ09OU1RBTlRTXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbmV4cG9ydCBjb25zdCBUSU1JTkcgPSB7XG4gIC8qKiBNaW5pbXVtIGR1cmF0aW9uIChtcykgdG8gc2hvdyBlbGFwc2VkIHRpbWUgKi9cbiAgTUlOX1NIT1dfRFVSQVRJT046IDEwMDAsXG4gIC8qKiBEZWJvdW5jZSBkZWxheSBmb3Igc3RhdHVzIHVwZGF0ZXMgKG1zKSAqL1xuICBTVEFUVVNfREVCT1VOQ0U6IDEwMCxcbiAgLyoqIEFuaW1hdGlvbiBmcmFtZSBpbnRlcnZhbCAobXMpICovXG4gIEFOSU1BVElPTl9JTlRFUlZBTDogODAsXG4gIC8qKiBTcGlubmVyIGFuaW1hdGlvbiBpbnRlcnZhbCAobXMpICovXG4gIFNQSU5ORVJfSU5URVJWQUw6IDEwMCxcbn0gYXMgY29uc3Q7XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFVJIFNUUklOR1Ncbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuZXhwb3J0IGNvbnN0IFVJX1NUUklOR1MgPSB7XG4gIC8qKiBJbnRlcnJ1cHQgaGludCBzaG93biBkdXJpbmcgbG9uZyBvcGVyYXRpb25zICovXG4gIElOVEVSUlVQVF9ISU5UOiAnZXNjIHRvIGludGVycnVwdCcsXG4gIC8qKiBFeHBhbmQgaGludCBmb3IgY29sbGFwc2VkIGNvbnRlbnQgKi9cbiAgRVhQQU5EX0hJTlQ6ICdjdHJsK28gdG8gZXhwYW5kJyxcbiAgLyoqIE5vIG1hdGNoZXMgZm91bmQgKi9cbiAgTk9fTUFUQ0hFUzogJ05vIG1hdGNoZXMgZm91bmQnLFxuICAvKiogTm8gb3V0cHV0ICovXG4gIE5PX09VVFBVVDogJ05vIG91dHB1dCcsXG4gIC8qKiBMb2FkaW5nIGluZGljYXRvciAqL1xuICBMT0FESU5HOiAnTG9hZGluZ+KApicsXG4gIC8qKiBTdWNjZXNzIGluZGljYXRvciAqL1xuICBTVUNDRVNTOiAn4pyTJyxcbiAgLyoqIEZhaWx1cmUgaW5kaWNhdG9yICovXG4gIEZBSUxVUkU6ICfinJcnLFxuICAvKiogV2FybmluZyBpbmRpY2F0b3IgKi9cbiAgV0FSTklORzogJ+KaoCcsXG4gIC8qKiBJbmZvIGluZGljYXRvciAqL1xuICBJTkZPOiAn4oS5JyxcbiAgLyoqIFBlbmRpbmcgaW5kaWNhdG9yICovXG4gIFBFTkRJTkc6ICfil4snLFxuICBcbiAgLyoqIE9mZmVuc2l2ZSBzZWN1cml0eSBpbmRpY2F0b3JzICovXG4gIEFUVEFDS19NT0RFOiAn4pqUIEFUVEFDSyBNT0RFJyxcbiAgUkVDT05fTU9ERTogJ/CflbXvuI8gUkVDT04gTU9ERScsXG4gIEVYUExPSVRfTU9ERTogJ/CfkqUgRVhQTE9JVCBNT0RFJyxcbiAgUEVSU0lTVEVOQ0VfTU9ERTogJ/CflJcgUEVSU0lTVEVOQ0UgTU9ERScsXG4gIERFU1RSVUNUSU9OX01PREU6ICfwn5KAIERFU1RSVUNUSU9OIE1PREUnLFxuICBDMl9NT0RFOiAn8J+bsCBDMiBNT0RFJyxcbiAgXG4gIC8qKiBTZWN1cml0eSBzdGF0dXMgaW5kaWNhdG9ycyAqL1xuICBUQVJHRVRfQUNRVUlSRUQ6ICfwn46vIFRBUkdFVCBBQ1FVSVJFRCcsXG4gIFZVTE5FUkFCSUxJVFlfRk9VTkQ6ICfwn5STIFZVTE5FUkFCSUxJVFkgRk9VTkQnLFxuICBFWFBMT0lUX1NVQ0NFU1M6ICfwn5KjIEVYUExPSVQgU1VDQ0VTUycsXG4gIFBFUlNJU1RFTkNFX0VTVEFCTElTSEVEOiAn8J+UkiBQRVJTSVNURU5DRSBFU1RBQkxJU0hFRCcsXG4gIERBVEFfRVhGSUxUUkFURUQ6ICfwn5OkIERBVEEgRVhGSUxUUkFURUQnLFxuICBJTkZSQVNUUlVDVFVSRV9DT01QUk9NSVNFRDogJ/Cfj5cgSU5GUkFTVFJVQ1RVUkUgQ09NUFJPTUlTRUQnLFxuICBcbiAgLyoqIEF0dGFjayBwaGFzZSBpbmRpY2F0b3JzICovXG4gIFBIQVNFX1JFQ09OOiAn8J+Vte+4jyBQaGFzZTogUmVjb25uYWlzc2FuY2UnLFxuICBQSEFTRV9TQ0FOTklORzogJ/Cfk6EgUGhhc2U6IFNjYW5uaW5nJyxcbiAgUEhBU0VfRVhQTE9JVEFUSU9OOiAn8J+SpSBQaGFzZTogRXhwbG9pdGF0aW9uJyxcbiAgUEhBU0VfUEVSU0lTVEVOQ0U6ICfwn5SXIFBoYXNlOiBQZXJzaXN0ZW5jZScsXG4gIFBIQVNFX0VYRklMVFJBVElPTjogJ/Cfk6QgUGhhc2U6IEV4ZmlsdHJhdGlvbicsXG4gIFBIQVNFX0RFU1RSVUNUSU9OOiAn8J+SgCBQaGFzZTogRGVzdHJ1Y3Rpb24nLFxuICBcbiAgLyoqIFJlYWwtdGltZSBtb25pdG9yaW5nICovXG4gIE1PTklUT1JJTkdfQUNUSVZFOiAn8J+RgSBNT05JVE9SSU5HIEFDVElWRScsXG4gIFRBUkdFVF9ET1dOOiAn8J+UtCBUQVJHRVQgRE9XTicsXG4gIFRBUkdFVF9VUDogJ/Cfn6IgVEFSR0VUIFVQJyxcbiAgU0VSVklDRV9ERUdSQURFRDogJ/Cfn6EgU0VSVklDRSBERUdSQURFRCcsXG59IGFzIGNvbnN0O1xuXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG4vLyBVVElMSVRZIEZVTkNUSU9OU1xuLy8gPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PVxuXG4vKipcbiAqIFNhZmVseSB0cnVuY2F0ZSBhIHN0cmluZyB3aXRoIGVsbGlwc2lzLlxuICogSGFuZGxlcyBlZGdlIGNhc2VzIGFuZCBlbnN1cmVzIGNvbnNpc3RlbnQgdHJ1bmNhdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHRydW5jYXRlU3RyaW5nKFxuICB0ZXh0OiBzdHJpbmcsXG4gIG1heExlbmd0aDogbnVtYmVyLFxuICBlbGxpcHNpczogc3RyaW5nID0gRUxMSVBTSVNcbik6IHN0cmluZyB7XG4gIGlmICghdGV4dCB8fCBtYXhMZW5ndGggPCAxKSByZXR1cm4gJyc7XG4gIGlmICh0ZXh0Lmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiB0ZXh0O1xuXG4gIGNvbnN0IHRydW5jYXRlQXQgPSBNYXRoLm1heCgxLCBtYXhMZW5ndGggLSBlbGxpcHNpcy5sZW5ndGgpO1xuICByZXR1cm4gdGV4dC5zbGljZSgwLCB0cnVuY2F0ZUF0KSArIGVsbGlwc2lzO1xufVxuXG4vKipcbiAqIFRydW5jYXRlIGEgZmlsZSBwYXRoLCBwcmVzZXJ2aW5nIHRoZSBlbmQgKG1vc3QgcmVsZXZhbnQgcGFydCkuXG4gKiBTaG93cyBcIuKApi9wYXRoL3RvL2ZpbGUudHNcIiBpbnN0ZWFkIG9mIFwiL3ZlcnkvbG9uZy9wYXTigKZcIlxuICovXG5leHBvcnQgZnVuY3Rpb24gdHJ1bmNhdGVQYXRoKFxuICBwYXRoOiBzdHJpbmcsXG4gIG1heExlbmd0aDogbnVtYmVyLFxuICBlbGxpcHNpczogc3RyaW5nID0gRUxMSVBTSVNcbik6IHN0cmluZyB7XG4gIGlmICghcGF0aCB8fCBtYXhMZW5ndGggPCAxKSByZXR1cm4gJyc7XG4gIGlmIChwYXRoLmxlbmd0aCA8PSBtYXhMZW5ndGgpIHJldHVybiBwYXRoO1xuXG4gIC8vIEtlZXAgdGhlIGVuZCBvZiB0aGUgcGF0aCAobW9zdCByZWxldmFudClcbiAgY29uc3Qga2VlcExlbmd0aCA9IE1hdGgubWF4KDEsIG1heExlbmd0aCAtIGVsbGlwc2lzLmxlbmd0aCk7XG4gIHJldHVybiBlbGxpcHNpcyArIHBhdGguc2xpY2UoLWtlZXBMZW5ndGgpO1xufVxuXG4vKipcbiAqIENhbGN1bGF0ZSBwZXJjZW50YWdlIHdpdGggYm91bmRzIGNoZWNraW5nLlxuICogQWx3YXlzIHJldHVybnMgYSB2YWx1ZSBiZXR3ZWVuIDAgYW5kIDEwMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZVBlcmNlbnRhZ2UoY3VycmVudDogbnVtYmVyLCB0b3RhbDogbnVtYmVyKTogbnVtYmVyIHtcbiAgaWYgKHRvdGFsIDw9IDAgfHwgIU51bWJlci5pc0Zpbml0ZShjdXJyZW50KSB8fCAhTnVtYmVyLmlzRmluaXRlKHRvdGFsKSkge1xuICAgIHJldHVybiAwO1xuICB9XG4gIHJldHVybiBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIE1hdGgucm91bmQoKGN1cnJlbnQgLyB0b3RhbCkgKiAxMDApKSk7XG59XG5cbi8qKlxuICogQ2xhbXAgYSBwZXJjZW50YWdlIHZhbHVlIHRvIHZhbGlkIHJhbmdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gY2xhbXBQZXJjZW50YWdlKHZhbHVlOiBudW1iZXIpOiBudW1iZXIge1xuICBpZiAoIU51bWJlci5pc0Zpbml0ZSh2YWx1ZSkpIHJldHVybiAwO1xuICByZXR1cm4gTWF0aC5taW4oMTAwLCBNYXRoLm1heCgwLCB2YWx1ZSkpO1xufVxuXG4vKipcbiAqIEdldCBjb2xvciBmdW5jdGlvbiBiYXNlZCBvbiBjb250ZXh0IHVzYWdlIHBlcmNlbnRhZ2UuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBnZXRDb250ZXh0Q29sb3I8VD4oXG4gIHBlcmNlbnRhZ2U6IG51bWJlcixcbiAgY29sb3JzOiB7IGVycm9yOiBUOyB3YXJuaW5nOiBUOyBpbmZvOiBUOyBzdWNjZXNzOiBUIH1cbik6IFQge1xuICBjb25zdCBwY3QgPSBjbGFtcFBlcmNlbnRhZ2UocGVyY2VudGFnZSk7XG4gIGlmIChwY3QgPiBDT05URVhUX1RIUkVTSE9MRFMuQ1JJVElDQUwpIHJldHVybiBjb2xvcnMuZXJyb3I7XG4gIGlmIChwY3QgPiBDT05URVhUX1RIUkVTSE9MRFMuV0FSTklORykgcmV0dXJuIGNvbG9ycy53YXJuaW5nO1xuICBpZiAocGN0ID4gQ09OVEVYVF9USFJFU0hPTERTLklORk8pIHJldHVybiBjb2xvcnMuaW5mbztcbiAgcmV0dXJuIGNvbG9ycy5zdWNjZXNzO1xufVxuXG4vKipcbiAqIEdldCBjb2xvciBmdW5jdGlvbiBiYXNlZCBvbiBjb3ZlcmFnZSBwZXJjZW50YWdlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q292ZXJhZ2VDb2xvcjxUPihcbiAgcGVyY2VudGFnZTogbnVtYmVyLFxuICBjb2xvcnM6IHsgc3VjY2VzczogVDsgd2FybmluZzogVDsgZXJyb3I6IFQgfVxuKTogVCB7XG4gIGNvbnN0IHBjdCA9IGNsYW1wUGVyY2VudGFnZShwZXJjZW50YWdlKTtcbiAgaWYgKHBjdCA+PSBDT1ZFUkFHRV9USFJFU0hPTERTLlNVQ0NFU1MpIHJldHVybiBjb2xvcnMuc3VjY2VzcztcbiAgaWYgKHBjdCA+PSBDT1ZFUkFHRV9USFJFU0hPTERTLldBUk5JTkcpIHJldHVybiBjb2xvcnMud2FybmluZztcbiAgcmV0dXJuIGNvbG9ycy5lcnJvcjtcbn1cblxuLyoqXG4gKiBHZXQgY29sb3IgZnVuY3Rpb24gYmFzZWQgb24gdG9rZW4gdXNhZ2UgcGVyY2VudGFnZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFRva2VuQ29sb3I8VD4oXG4gIHBlcmNlbnRhZ2U6IG51bWJlcixcbiAgY29sb3JzOiB7IGVycm9yOiBUOyB3YXJuaW5nOiBUOyBzdWNjZXNzOiBUIH1cbik6IFQge1xuICBjb25zdCBwY3QgPSBjbGFtcFBlcmNlbnRhZ2UocGVyY2VudGFnZSk7XG4gIGlmIChwY3QgPj0gVE9LRU5fVEhSRVNIT0xEUy5ISUdIKSByZXR1cm4gY29sb3JzLmVycm9yO1xuICBpZiAocGN0ID49IFRPS0VOX1RIUkVTSE9MRFMuTUVESVVNKSByZXR1cm4gY29sb3JzLndhcm5pbmc7XG4gIHJldHVybiBjb2xvcnMuc3VjY2Vzcztcbn1cblxuLyoqXG4gKiBGb3JtYXQgZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzIHRvIGh1bWFuLXJlYWRhYmxlIHN0cmluZy5cbiAqIEhhbmRsZXMgbXMsIHNlY29uZHMsIG1pbnV0ZXMsIGFuZCBob3Vycy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdER1cmF0aW9uTXMobXM6IG51bWJlcik6IHN0cmluZyB7XG4gIGlmICghTnVtYmVyLmlzRmluaXRlKG1zKSB8fCBtcyA8IDApIHJldHVybiAnMG1zJztcblxuICBpZiAobXMgPCAxMDAwKSB7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQobXMpfW1zYDtcbiAgfVxuXG4gIGNvbnN0IHNlY29uZHMgPSBNYXRoLmZsb29yKG1zIC8gMTAwMCk7XG4gIGNvbnN0IG1pbnV0ZXMgPSBNYXRoLmZsb29yKHNlY29uZHMgLyA2MCk7XG4gIGNvbnN0IGhvdXJzID0gTWF0aC5mbG9vcihtaW51dGVzIC8gNjApO1xuXG4gIGlmIChob3VycyA+IDApIHtcbiAgICBjb25zdCByZW1haW5pbmdNaW51dGVzID0gbWludXRlcyAlIDYwO1xuICAgIHJldHVybiBgJHtob3Vyc31oICR7cmVtYWluaW5nTWludXRlc31tYDtcbiAgfVxuXG4gIGlmIChtaW51dGVzID4gMCkge1xuICAgIGNvbnN0IHJlbWFpbmluZ1NlY29uZHMgPSBzZWNvbmRzICUgNjA7XG4gICAgcmV0dXJuIGAke21pbnV0ZXN9bSAke3JlbWFpbmluZ1NlY29uZHN9c2A7XG4gIH1cblxuICByZXR1cm4gYCR7c2Vjb25kc31zYDtcbn1cblxuLyoqXG4gKiBGb3JtYXQgZWxhcHNlZCB0aW1lIGZyb20gc2Vjb25kcy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGZvcm1hdEVsYXBzZWRTZWNvbmRzKHNlY29uZHM6IG51bWJlcik6IHN0cmluZyB7XG4gIHJldHVybiBmb3JtYXREdXJhdGlvbk1zKHNlY29uZHMgKiAxMDAwKTtcbn1cblxuLyoqXG4gKiBDYWxjdWxhdGUgdXNhYmxlIHdpZHRoIGFjY291bnRpbmcgZm9yIG1hcmdpbnMuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjYWxjdWxhdGVVc2FibGVXaWR0aChcbiAgdGVybWluYWxXaWR0aDogbnVtYmVyLFxuICBtYXJnaW5zOiBudW1iZXIgPSA0XG4pOiBudW1iZXIge1xuICByZXR1cm4gTWF0aC5tYXgoRElTUExBWV9MSU1JVFMuTUlOX1dJRFRILCB0ZXJtaW5hbFdpZHRoIC0gbWFyZ2lucyk7XG59XG5cbi8qKlxuICogVmFsaWRhdGUgYW5kIG5vcm1hbGl6ZSBhIGxpbmUgY291bnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBub3JtYWxpemVMaW5lQ291bnQobGluZXM6IG51bWJlciwgZGVmYXVsdFZhbHVlOiBudW1iZXIgPSAwKTogbnVtYmVyIHtcbiAgaWYgKCFOdW1iZXIuaXNGaW5pdGUobGluZXMpIHx8IGxpbmVzIDwgMCkgcmV0dXJuIGRlZmF1bHRWYWx1ZTtcbiAgcmV0dXJuIE1hdGguZmxvb3IobGluZXMpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sTUFBTUEsUUFBUSxHQUFBQyxPQUFBLENBQUFELFFBQUEsR0FBRztFQUN0QjtFQUNBRSxVQUFVLEVBQUUsRUFBRTtFQUNkO0VBQ0FDLFNBQVMsRUFBRSxFQUFFO0VBQ2I7RUFDQUMsV0FBVyxFQUFFLEVBQUU7RUFDZjtFQUNBQyxLQUFLLEVBQUUsRUFBRTtFQUNUO0VBQ0FDLE9BQU8sRUFBRSxFQUFFO0VBQ1g7RUFDQUMsWUFBWSxFQUFFLEVBQUU7RUFDaEI7RUFDQUMsYUFBYSxFQUFFLEVBQUU7RUFDakI7RUFDQUMsT0FBTyxFQUFFLEdBQUc7RUFDWjtFQUNBQyxPQUFPLEVBQUU7QUFDWCxDQUFVOztBQUVWO0FBQ0E7QUFDQTtBQUNBO0FBQ08sTUFBTUMsUUFBUSxHQUFBVixPQUFBLENBQUFVLFFBQUEsR0FBRyxHQUFHOztBQUUzQjtBQUNBO0FBQ0E7QUFDTyxNQUFNQyxhQUFhLEdBQUlDLEtBQWEsSUFBYSxJQUFJQSxLQUFLLE9BQU87O0FBRXhFO0FBQ0E7QUFDQTtBQUFBWixPQUFBLENBQUFXLGFBQUEsR0FBQUEsYUFBQTtBQUVPLE1BQU1FLFFBQVEsR0FBQWIsT0FBQSxDQUFBYSxRQUFBLEdBQUc7RUFDdEI7RUFDQUMsU0FBUyxFQUFFLEVBQUU7RUFDYjtFQUNBQyxhQUFhLEVBQUUsRUFBRTtFQUNqQjtFQUNBQyxXQUFXLEVBQUUsRUFBRTtFQUNmO0VBQ0FDLEtBQUssRUFBRTtJQUNMQyxNQUFNLEVBQUUsR0FBRztJQUNYQyxLQUFLLEVBQUUsR0FBRztJQUNWQyxPQUFPLEVBQUUsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHO0VBQzlCO0FBQ0YsQ0FBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDTyxNQUFNQyxrQkFBa0IsR0FBQXJCLE9BQUEsQ0FBQXFCLGtCQUFBLEdBQUc7RUFDaEM7RUFDQUMsUUFBUSxFQUFFLEVBQUU7RUFDWjtFQUNBQyxPQUFPLEVBQUUsRUFBRTtFQUNYO0VBQ0FDLElBQUksRUFBRTtFQUNOO0FBQ0YsQ0FBVTs7QUFFVjtBQUNBO0FBQ0E7QUFDTyxNQUFNQyxtQkFBbUIsR0FBQXpCLE9BQUEsQ0FBQXlCLG1CQUFBLEdBQUc7RUFDakM7RUFDQUMsT0FBTyxFQUFFLEVBQUU7RUFDWDtFQUNBSCxPQUFPLEVBQUU7RUFDVDtBQUNGLENBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ08sTUFBTUksZ0JBQWdCLEdBQUEzQixPQUFBLENBQUEyQixnQkFBQSxHQUFHO0VBQzlCO0VBQ0FDLElBQUksRUFBRSxFQUFFO0VBQ1I7RUFDQUMsTUFBTSxFQUFFO0VBQ1I7QUFDRixDQUFVOztBQUVWO0FBQ0E7QUFDQTs7QUFFTyxNQUFNQyxjQUFjLEdBQUE5QixPQUFBLENBQUE4QixjQUFBLEdBQUc7RUFDNUI7RUFDQUMsc0JBQXNCLEVBQUUsRUFBRTtFQUMxQjtFQUNBQyxTQUFTLEVBQUUsRUFBRTtFQUNiO0VBQ0FDLGlCQUFpQixFQUFFLEVBQUU7RUFDckI7RUFDQUMsZUFBZSxFQUFFLENBQUM7RUFDbEI7RUFDQUMscUJBQXFCLEVBQUUsRUFBRTtFQUN6QjtFQUNBQyxhQUFhLEVBQUUsQ0FBQztFQUNoQjtFQUNBQyx5QkFBeUIsRUFBRSxDQUFDO0VBQzVCO0VBQ0FDLG9CQUFvQixFQUFFLENBQUM7RUFDdkI7RUFDQUMsb0JBQW9CLEVBQUUsQ0FBQztFQUN2QjtFQUNBQyxrQkFBa0IsRUFBRSxFQUFFO0VBQ3RCO0VBQ0FDLG9CQUFvQixFQUFFLEdBQUc7RUFDekI7RUFDQUMsY0FBYyxFQUFFLEVBQUU7RUFDbEI7RUFDQUMsbUJBQW1CLEVBQUU7QUFDdkIsQ0FBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRU8sTUFBTUMsTUFBTSxHQUFBNUMsT0FBQSxDQUFBNEMsTUFBQSxHQUFHO0VBQ3BCO0VBQ0FDLGlCQUFpQixFQUFFLElBQUk7RUFDdkI7RUFDQUMsZUFBZSxFQUFFLEdBQUc7RUFDcEI7RUFDQUMsa0JBQWtCLEVBQUUsRUFBRTtFQUN0QjtFQUNBQyxnQkFBZ0IsRUFBRTtBQUNwQixDQUFVOztBQUVWO0FBQ0E7QUFDQTs7QUFFTyxNQUFNQyxVQUFVLEdBQUFqRCxPQUFBLENBQUFpRCxVQUFBLEdBQUc7RUFDeEI7RUFDQUMsY0FBYyxFQUFFLGtCQUFrQjtFQUNsQztFQUNBQyxXQUFXLEVBQUUsa0JBQWtCO0VBQy9CO0VBQ0FDLFVBQVUsRUFBRSxrQkFBa0I7RUFDOUI7RUFDQUMsU0FBUyxFQUFFLFdBQVc7RUFDdEI7RUFDQUMsT0FBTyxFQUFFLFVBQVU7RUFDbkI7RUFDQTVCLE9BQU8sRUFBRSxHQUFHO0VBQ1o7RUFDQTZCLE9BQU8sRUFBRSxHQUFHO0VBQ1o7RUFDQWhDLE9BQU8sRUFBRSxHQUFHO0VBQ1o7RUFDQUMsSUFBSSxFQUFFLEdBQUc7RUFDVDtFQUNBZ0MsT0FBTyxFQUFFLEdBQUc7RUFFWjtFQUNBQyxXQUFXLEVBQUUsZUFBZTtFQUM1QkMsVUFBVSxFQUFFLGdCQUFnQjtFQUM1QkMsWUFBWSxFQUFFLGlCQUFpQjtFQUMvQkMsZ0JBQWdCLEVBQUUscUJBQXFCO0VBQ3ZDQyxnQkFBZ0IsRUFBRSxxQkFBcUI7RUFDdkNDLE9BQU8sRUFBRSxZQUFZO0VBRXJCO0VBQ0FDLGVBQWUsRUFBRSxvQkFBb0I7RUFDckNDLG1CQUFtQixFQUFFLHdCQUF3QjtFQUM3Q0MsZUFBZSxFQUFFLG9CQUFvQjtFQUNyQ0MsdUJBQXVCLEVBQUUsNEJBQTRCO0VBQ3JEQyxnQkFBZ0IsRUFBRSxxQkFBcUI7RUFDdkNDLDBCQUEwQixFQUFFLCtCQUErQjtFQUUzRDtFQUNBQyxXQUFXLEVBQUUsMkJBQTJCO0VBQ3hDQyxjQUFjLEVBQUUsb0JBQW9CO0VBQ3BDQyxrQkFBa0IsRUFBRSx3QkFBd0I7RUFDNUNDLGlCQUFpQixFQUFFLHVCQUF1QjtFQUMxQ0Msa0JBQWtCLEVBQUUsd0JBQXdCO0VBQzVDQyxpQkFBaUIsRUFBRSx1QkFBdUI7RUFFMUM7RUFDQUMsaUJBQWlCLEVBQUUsc0JBQXNCO0VBQ3pDQyxXQUFXLEVBQUUsZ0JBQWdCO0VBQzdCQyxTQUFTLEVBQUUsY0FBYztFQUN6QkMsZ0JBQWdCLEVBQUU7QUFDcEIsQ0FBVTs7QUFFVjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxjQUFjQSxDQUM1QkMsSUFBWSxFQUNaQyxTQUFpQixFQUNqQkMsUUFBZ0IsR0FBR3hFLFFBQVEsRUFDbkI7RUFDUixJQUFJLENBQUNzRSxJQUFJLElBQUlDLFNBQVMsR0FBRyxDQUFDLEVBQUUsT0FBTyxFQUFFO0VBQ3JDLElBQUlELElBQUksQ0FBQ0csTUFBTSxJQUFJRixTQUFTLEVBQUUsT0FBT0QsSUFBSTtFQUV6QyxNQUFNSSxVQUFVLEdBQUdDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRUwsU0FBUyxHQUFHQyxRQUFRLENBQUNDLE1BQU0sQ0FBQztFQUMzRCxPQUFPSCxJQUFJLENBQUNPLEtBQUssQ0FBQyxDQUFDLEVBQUVILFVBQVUsQ0FBQyxHQUFHRixRQUFRO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ08sU0FBU00sWUFBWUEsQ0FDMUJDLElBQVksRUFDWlIsU0FBaUIsRUFDakJDLFFBQWdCLEdBQUd4RSxRQUFRLEVBQ25CO0VBQ1IsSUFBSSxDQUFDK0UsSUFBSSxJQUFJUixTQUFTLEdBQUcsQ0FBQyxFQUFFLE9BQU8sRUFBRTtFQUNyQyxJQUFJUSxJQUFJLENBQUNOLE1BQU0sSUFBSUYsU0FBUyxFQUFFLE9BQU9RLElBQUk7O0VBRXpDO0VBQ0EsTUFBTUMsVUFBVSxHQUFHTCxJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUVMLFNBQVMsR0FBR0MsUUFBUSxDQUFDQyxNQUFNLENBQUM7RUFDM0QsT0FBT0QsUUFBUSxHQUFHTyxJQUFJLENBQUNGLEtBQUssQ0FBQyxDQUFDRyxVQUFVLENBQUM7QUFDM0M7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxtQkFBbUJBLENBQUNDLE9BQWUsRUFBRUMsS0FBYSxFQUFVO0VBQzFFLElBQUlBLEtBQUssSUFBSSxDQUFDLElBQUksQ0FBQ0MsTUFBTSxDQUFDQyxRQUFRLENBQUNILE9BQU8sQ0FBQyxJQUFJLENBQUNFLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDRixLQUFLLENBQUMsRUFBRTtJQUN0RSxPQUFPLENBQUM7RUFDVjtFQUNBLE9BQU9SLElBQUksQ0FBQ1csR0FBRyxDQUFDLEdBQUcsRUFBRVgsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFRCxJQUFJLENBQUNZLEtBQUssQ0FBRUwsT0FBTyxHQUFHQyxLQUFLLEdBQUksR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN4RTs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTSyxlQUFlQSxDQUFDQyxLQUFhLEVBQVU7RUFDckQsSUFBSSxDQUFDTCxNQUFNLENBQUNDLFFBQVEsQ0FBQ0ksS0FBSyxDQUFDLEVBQUUsT0FBTyxDQUFDO0VBQ3JDLE9BQU9kLElBQUksQ0FBQ1csR0FBRyxDQUFDLEdBQUcsRUFBRVgsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFYSxLQUFLLENBQUMsQ0FBQztBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQyxlQUFlQSxDQUM3QkMsVUFBa0IsRUFDbEJDLE1BQXFELEVBQ2xEO0VBQ0gsTUFBTUMsR0FBRyxHQUFHTCxlQUFlLENBQUNHLFVBQVUsQ0FBQztFQUN2QyxJQUFJRSxHQUFHLEdBQUdsRixrQkFBa0IsQ0FBQ0MsUUFBUSxFQUFFLE9BQU9nRixNQUFNLENBQUNFLEtBQUs7RUFDMUQsSUFBSUQsR0FBRyxHQUFHbEYsa0JBQWtCLENBQUNFLE9BQU8sRUFBRSxPQUFPK0UsTUFBTSxDQUFDRyxPQUFPO0VBQzNELElBQUlGLEdBQUcsR0FBR2xGLGtCQUFrQixDQUFDRyxJQUFJLEVBQUUsT0FBTzhFLE1BQU0sQ0FBQ0ksSUFBSTtFQUNyRCxPQUFPSixNQUFNLENBQUNLLE9BQU87QUFDdkI7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU0MsZ0JBQWdCQSxDQUM5QlAsVUFBa0IsRUFDbEJDLE1BQTRDLEVBQ3pDO0VBQ0gsTUFBTUMsR0FBRyxHQUFHTCxlQUFlLENBQUNHLFVBQVUsQ0FBQztFQUN2QyxJQUFJRSxHQUFHLElBQUk5RSxtQkFBbUIsQ0FBQ0MsT0FBTyxFQUFFLE9BQU80RSxNQUFNLENBQUNLLE9BQU87RUFDN0QsSUFBSUosR0FBRyxJQUFJOUUsbUJBQW1CLENBQUNGLE9BQU8sRUFBRSxPQUFPK0UsTUFBTSxDQUFDRyxPQUFPO0VBQzdELE9BQU9ILE1BQU0sQ0FBQ0UsS0FBSztBQUNyQjs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTSyxhQUFhQSxDQUMzQlIsVUFBa0IsRUFDbEJDLE1BQTRDLEVBQ3pDO0VBQ0gsTUFBTUMsR0FBRyxHQUFHTCxlQUFlLENBQUNHLFVBQVUsQ0FBQztFQUN2QyxJQUFJRSxHQUFHLElBQUk1RSxnQkFBZ0IsQ0FBQ0MsSUFBSSxFQUFFLE9BQU8wRSxNQUFNLENBQUNFLEtBQUs7RUFDckQsSUFBSUQsR0FBRyxJQUFJNUUsZ0JBQWdCLENBQUNFLE1BQU0sRUFBRSxPQUFPeUUsTUFBTSxDQUFDRyxPQUFPO0VBQ3pELE9BQU9ILE1BQU0sQ0FBQ0ssT0FBTztBQUN2Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNHLGdCQUFnQkEsQ0FBQ0MsRUFBVSxFQUFVO0VBQ25ELElBQUksQ0FBQ2pCLE1BQU0sQ0FBQ0MsUUFBUSxDQUFDZ0IsRUFBRSxDQUFDLElBQUlBLEVBQUUsR0FBRyxDQUFDLEVBQUUsT0FBTyxLQUFLO0VBRWhELElBQUlBLEVBQUUsR0FBRyxJQUFJLEVBQUU7SUFDYixPQUFPLEdBQUcxQixJQUFJLENBQUNZLEtBQUssQ0FBQ2MsRUFBRSxDQUFDLElBQUk7RUFDOUI7RUFFQSxNQUFNQyxPQUFPLEdBQUczQixJQUFJLENBQUM0QixLQUFLLENBQUNGLEVBQUUsR0FBRyxJQUFJLENBQUM7RUFDckMsTUFBTUcsT0FBTyxHQUFHN0IsSUFBSSxDQUFDNEIsS0FBSyxDQUFDRCxPQUFPLEdBQUcsRUFBRSxDQUFDO0VBQ3hDLE1BQU1HLEtBQUssR0FBRzlCLElBQUksQ0FBQzRCLEtBQUssQ0FBQ0MsT0FBTyxHQUFHLEVBQUUsQ0FBQztFQUV0QyxJQUFJQyxLQUFLLEdBQUcsQ0FBQyxFQUFFO0lBQ2IsTUFBTUMsZ0JBQWdCLEdBQUdGLE9BQU8sR0FBRyxFQUFFO0lBQ3JDLE9BQU8sR0FBR0MsS0FBSyxLQUFLQyxnQkFBZ0IsR0FBRztFQUN6QztFQUVBLElBQUlGLE9BQU8sR0FBRyxDQUFDLEVBQUU7SUFDZixNQUFNRyxnQkFBZ0IsR0FBR0wsT0FBTyxHQUFHLEVBQUU7SUFDckMsT0FBTyxHQUFHRSxPQUFPLEtBQUtHLGdCQUFnQixHQUFHO0VBQzNDO0VBRUEsT0FBTyxHQUFHTCxPQUFPLEdBQUc7QUFDdEI7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU00sb0JBQW9CQSxDQUFDTixPQUFlLEVBQVU7RUFDNUQsT0FBT0YsZ0JBQWdCLENBQUNFLE9BQU8sR0FBRyxJQUFJLENBQUM7QUFDekM7O0FBRUE7QUFDQTtBQUNBO0FBQ08sU0FBU08sb0JBQW9CQSxDQUNsQ0MsYUFBcUIsRUFDckJDLE9BQWUsR0FBRyxDQUFDLEVBQ1g7RUFDUixPQUFPcEMsSUFBSSxDQUFDQyxHQUFHLENBQUN4RCxjQUFjLENBQUNFLFNBQVMsRUFBRXdGLGFBQWEsR0FBR0MsT0FBTyxDQUFDO0FBQ3BFOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLGtCQUFrQkEsQ0FBQ0MsS0FBYSxFQUFFQyxZQUFvQixHQUFHLENBQUMsRUFBVTtFQUNsRixJQUFJLENBQUM5QixNQUFNLENBQUNDLFFBQVEsQ0FBQzRCLEtBQUssQ0FBQyxJQUFJQSxLQUFLLEdBQUcsQ0FBQyxFQUFFLE9BQU9DLFlBQVk7RUFDN0QsT0FBT3ZDLElBQUksQ0FBQzRCLEtBQUssQ0FBQ1UsS0FBSyxDQUFDO0FBQzFCIiwiaWdub3JlTGlzdCI6W119