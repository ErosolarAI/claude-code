7adaf61f4dd640cba151a3250f6cb719
"use strict";

var _finalResponseFormatter = require("../src/core/finalResponseFormatter.ts");
describe('ensureNextSteps', () => {
  it('returns original content when Next steps already present', () => {
    const input = 'Work done.\n\nNext steps:\n- Ship it';
    const {
      output,
      appended
    } = (0, _finalResponseFormatter.ensureNextSteps)(input);
    expect(output).toBe(input);
    expect(appended).toBeNull();
  });
  it('appends a Next steps block when missing', () => {
    const input = 'Implemented the feature.';
    const {
      output,
      appended
    } = (0, _finalResponseFormatter.ensureNextSteps)(input);
    expect(output.startsWith(input)).toBe(true);
    expect(output).toContain('Next steps:');
    expect(output).toMatch(/- I can run checks/i);
    expect(appended).not.toBeNull();
  });
  it('handles empty content gracefully', () => {
    const {
      output,
      appended
    } = (0, _finalResponseFormatter.ensureNextSteps)('');
    expect(output).toBe('');
    expect(appended).toBeNull();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZmluYWxSZXNwb25zZUZvcm1hdHRlciIsInJlcXVpcmUiLCJkZXNjcmliZSIsIml0IiwiaW5wdXQiLCJvdXRwdXQiLCJhcHBlbmRlZCIsImVuc3VyZU5leHRTdGVwcyIsImV4cGVjdCIsInRvQmUiLCJ0b0JlTnVsbCIsInN0YXJ0c1dpdGgiLCJ0b0NvbnRhaW4iLCJ0b01hdGNoIiwibm90Il0sInNvdXJjZXMiOlsiZmluYWxSZXNwb25zZUZvcm1hdHRlci50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGVuc3VyZU5leHRTdGVwcyB9IGZyb20gJy4uL3NyYy9jb3JlL2ZpbmFsUmVzcG9uc2VGb3JtYXR0ZXIudHMnO1xuXG5kZXNjcmliZSgnZW5zdXJlTmV4dFN0ZXBzJywgKCkgPT4ge1xuICBpdCgncmV0dXJucyBvcmlnaW5hbCBjb250ZW50IHdoZW4gTmV4dCBzdGVwcyBhbHJlYWR5IHByZXNlbnQnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSAnV29yayBkb25lLlxcblxcbk5leHQgc3RlcHM6XFxuLSBTaGlwIGl0JztcbiAgICBjb25zdCB7IG91dHB1dCwgYXBwZW5kZWQgfSA9IGVuc3VyZU5leHRTdGVwcyhpbnB1dCk7XG5cbiAgICBleHBlY3Qob3V0cHV0KS50b0JlKGlucHV0KTtcbiAgICBleHBlY3QoYXBwZW5kZWQpLnRvQmVOdWxsKCk7XG4gIH0pO1xuXG4gIGl0KCdhcHBlbmRzIGEgTmV4dCBzdGVwcyBibG9jayB3aGVuIG1pc3NpbmcnLCAoKSA9PiB7XG4gICAgY29uc3QgaW5wdXQgPSAnSW1wbGVtZW50ZWQgdGhlIGZlYXR1cmUuJztcbiAgICBjb25zdCB7IG91dHB1dCwgYXBwZW5kZWQgfSA9IGVuc3VyZU5leHRTdGVwcyhpbnB1dCk7XG5cbiAgICBleHBlY3Qob3V0cHV0LnN0YXJ0c1dpdGgoaW5wdXQpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChvdXRwdXQpLnRvQ29udGFpbignTmV4dCBzdGVwczonKTtcbiAgICBleHBlY3Qob3V0cHV0KS50b01hdGNoKC8tIEkgY2FuIHJ1biBjaGVja3MvaSk7XG4gICAgZXhwZWN0KGFwcGVuZGVkKS5ub3QudG9CZU51bGwoKTtcbiAgfSk7XG5cbiAgaXQoJ2hhbmRsZXMgZW1wdHkgY29udGVudCBncmFjZWZ1bGx5JywgKCkgPT4ge1xuICAgIGNvbnN0IHsgb3V0cHV0LCBhcHBlbmRlZCB9ID0gZW5zdXJlTmV4dFN0ZXBzKCcnKTtcbiAgICBleHBlY3Qob3V0cHV0KS50b0JlKCcnKTtcbiAgICBleHBlY3QoYXBwZW5kZWQpLnRvQmVOdWxsKCk7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQUEsdUJBQUEsR0FBQUMsT0FBQTtBQUVBQyxRQUFRLENBQUMsaUJBQWlCLEVBQUUsTUFBTTtFQUNoQ0MsRUFBRSxDQUFDLDBEQUEwRCxFQUFFLE1BQU07SUFDbkUsTUFBTUMsS0FBSyxHQUFHLHNDQUFzQztJQUNwRCxNQUFNO01BQUVDLE1BQU07TUFBRUM7SUFBUyxDQUFDLEdBQUcsSUFBQUMsdUNBQWUsRUFBQ0gsS0FBSyxDQUFDO0lBRW5ESSxNQUFNLENBQUNILE1BQU0sQ0FBQyxDQUFDSSxJQUFJLENBQUNMLEtBQUssQ0FBQztJQUMxQkksTUFBTSxDQUFDRixRQUFRLENBQUMsQ0FBQ0ksUUFBUSxDQUFDLENBQUM7RUFDN0IsQ0FBQyxDQUFDO0VBRUZQLEVBQUUsQ0FBQyx5Q0FBeUMsRUFBRSxNQUFNO0lBQ2xELE1BQU1DLEtBQUssR0FBRywwQkFBMEI7SUFDeEMsTUFBTTtNQUFFQyxNQUFNO01BQUVDO0lBQVMsQ0FBQyxHQUFHLElBQUFDLHVDQUFlLEVBQUNILEtBQUssQ0FBQztJQUVuREksTUFBTSxDQUFDSCxNQUFNLENBQUNNLFVBQVUsQ0FBQ1AsS0FBSyxDQUFDLENBQUMsQ0FBQ0ssSUFBSSxDQUFDLElBQUksQ0FBQztJQUMzQ0QsTUFBTSxDQUFDSCxNQUFNLENBQUMsQ0FBQ08sU0FBUyxDQUFDLGFBQWEsQ0FBQztJQUN2Q0osTUFBTSxDQUFDSCxNQUFNLENBQUMsQ0FBQ1EsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0lBQzdDTCxNQUFNLENBQUNGLFFBQVEsQ0FBQyxDQUFDUSxHQUFHLENBQUNKLFFBQVEsQ0FBQyxDQUFDO0VBQ2pDLENBQUMsQ0FBQztFQUVGUCxFQUFFLENBQUMsa0NBQWtDLEVBQUUsTUFBTTtJQUMzQyxNQUFNO01BQUVFLE1BQU07TUFBRUM7SUFBUyxDQUFDLEdBQUcsSUFBQUMsdUNBQWUsRUFBQyxFQUFFLENBQUM7SUFDaERDLE1BQU0sQ0FBQ0gsTUFBTSxDQUFDLENBQUNJLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDdkJELE1BQU0sQ0FBQ0YsUUFBUSxDQUFDLENBQUNJLFFBQVEsQ0FBQyxDQUFDO0VBQzdCLENBQUMsQ0FBQztBQUNKLENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==