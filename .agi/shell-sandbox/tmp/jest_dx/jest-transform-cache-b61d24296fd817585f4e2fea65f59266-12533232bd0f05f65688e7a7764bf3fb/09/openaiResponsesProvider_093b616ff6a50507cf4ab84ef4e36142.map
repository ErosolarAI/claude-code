{"version":3,"names":["cov_1yk3zo82pf","actualCoverage","OpenAI","logDebug","REQUEST_CHAR_LIMIT","s","RECOVERABLE_ERROR_PATTERNS","isRecoverableError","error","f","Error","b","message","toLowerCase","errorName","name","errorCode","code","allText","some","pattern","includes","supportsReasoningParam","model","lowerModel","OpenAIResponsesProvider","constructor","options","clientConfig","apiKey","timeout","maxRetries","baseURL","client","id","providerId","reasoningEffort","undefined","textVerbosity","temperature","maxTokens","Math","max","sleep","ms","Promise","resolve","setTimeout","getBackoffDelay","attempt","baseDelay","maxDelay","delay","min","pow","random","executeWithRetry","operation","operationName","lastError","String","round","generate","messages","tools","boundedMessages","enforceRequestSizeLimit","request","input","mapMessages","length","map","mapTool","parallel_tool_calls","tool_choice","stream","max_output_tokens","reasoning","effort","text","verbosity","response","responses","create","handleProviderError","assertHasOutput","toolCalls","output","filter","isFunctionCall","mapToolCall","parseError","usage","mapUsage","type","content","extractTextContent","generateStream","functionCallsById","Map","event","JSON","stringify","delta","Object","keys","item","summary","summaryItem","set","callId","call_id","arguments","itemId","item_id","existing","get","pending","parsed","parse","toolCall","delete","truncated","trimmed","size","estimateMessageChars","removeIdx","findIndex","msg","role","idx","splice","unshift","total","Array","isArray","part","call","push","toolCallId","definition","description","parameters","properties","strict","primary","collectOutputText","aggregated","output_text","trim","refusal","collectRefusalText","chunks","isOutputMessage","block","join","isRefusal","inputTokens","input_tokens","outputTokens","output_tokens","totalTokens","total_tokens"],"sources":["openaiResponsesProvider.ts"],"sourcesContent":["import OpenAI from 'openai';\nimport type {\n  FunctionTool,\n  ResponseFunctionToolCall,\n  ResponseInput,\n  ResponseOutputItem,\n  ResponseOutputMessage,\n  ResponseOutputRefusal,\n  Response,\n  Tool,\n} from 'openai/resources/responses/responses.js';\nimport type {\n  ConversationMessage,\n  LLMProvider,\n  ProviderId,\n  ProviderResponse,\n  ProviderToolDefinition,\n  ToolCallRequest,\n  ProviderUsage,\n  ReasoningEffortLevel,\n  TextVerbosityLevel,\n  StreamChunk,\n} from '../core/types.js';\nimport { logDebug } from '../utils/debugLogger.js';\n\nconst REQUEST_CHAR_LIMIT = 800_000; // Hard cap to avoid provider 413 errors\n\n// ============================================================================\n// Error Recovery Constants\n// ============================================================================\n\nconst RECOVERABLE_ERROR_PATTERNS = [\n  'premature close',\n  'premature end',\n  'unexpected end',\n  'aborted',\n  'fetcherror',\n  'invalid response body',\n  'gunzip',\n  'decompress',\n  'econnreset',\n  'econnrefused',\n  'epipe',\n  'socket hang up',\n  'network',\n  'timeout',\n  'rate limit',\n  '429',\n  '500',\n  '502',\n  '503',\n  '504',\n] as const;\n\nfunction isRecoverableError(error: unknown): boolean {\n  if (!(error instanceof Error)) return false;\n  const message = error.message.toLowerCase();\n  const errorName = error.name?.toLowerCase() ?? '';\n  const errorCode = (error as { code?: string }).code?.toLowerCase() ?? '';\n  const allText = `${message} ${errorName} ${errorCode}`;\n  return RECOVERABLE_ERROR_PATTERNS.some(pattern => allText.includes(pattern));\n}\n\n// Stream event types for OpenAI Responses API\ninterface ResponseStreamEvent {\n  type: string;\n  delta?: string;\n  call_id?: string;\n  name?: string;\n  response?: Response;\n  // Extended types for reasoning content\n  item?: {\n    id?: string;\n    type?: string;\n    call_id?: string;\n    name?: string;\n    status?: string;\n  };\n  item_id?: string;\n  // Reasoning summary for GPT-5 models\n  summary?: Array<{\n    type: string;\n    text?: string;\n  }>;\n}\n\ninterface OpenAIProviderOptions {\n  apiKey: string;\n  model: string;\n  providerId?: ProviderId;\n  baseURL?: string;\n  reasoningEffort?: ReasoningEffortLevel;\n  textVerbosity?: TextVerbosityLevel;\n  /** Maximum retries for transient errors (default: 3) */\n  maxRetries?: number;\n  /** Request timeout in milliseconds (default: 120000) */\n  timeout?: number;\n  /** Optional temperature override */\n  temperature?: number;\n  /** Maximum completion tokens to request (default: 4096 to avoid runaway outputs) */\n  maxTokens?: number;\n}\n\ntype ResponsesCreateParams = Parameters<OpenAI['responses']['create']>[0];\ntype EnhancedResponsesCreateParams = ResponsesCreateParams & {\n  reasoning?: { effort: ReasoningEffortLevel };\n  text?: { verbosity: TextVerbosityLevel };\n  parallel_tool_calls?: boolean;\n  max_output_tokens?: number;\n  temperature?: number;\n};\ntype ResponsesCreateResult = Awaited<ReturnType<OpenAI['responses']['create']>>;\n\n/**\n * Check if a model supports reasoning parameters.\n * Only GPT-5.x models support the reasoning effort parameter.\n */\nfunction supportsReasoningParam(model: string): boolean {\n  const lowerModel = model.toLowerCase();\n  // Only GPT-5 and GPT-5.1 models support reasoning parameters\n  return lowerModel.includes('gpt-5');\n}\n\nexport class OpenAIResponsesProvider implements LLMProvider {\n  readonly id: ProviderId;\n  readonly model: string;\n  private readonly client: OpenAI;\n  private readonly reasoningEffort?: ReasoningEffortLevel;\n  private readonly textVerbosity?: TextVerbosityLevel;\n  private readonly maxRetries: number;\n  private readonly temperature?: number;\n  private readonly maxTokens: number;\n\n  constructor(options: OpenAIProviderOptions) {\n    const clientConfig: ConstructorParameters<typeof OpenAI>[0] = {\n      apiKey: options.apiKey,\n      timeout: options.timeout ?? 120000,\n      maxRetries: 0, // We handle retries ourselves\n    };\n\n    if (options.baseURL) {\n      clientConfig.baseURL = options.baseURL;\n    }\n\n    this.client = new OpenAI(clientConfig);\n    this.id = options.providerId ?? 'openai';\n    this.model = options.model;\n    // Only set reasoningEffort for models that support it\n    this.reasoningEffort = supportsReasoningParam(options.model) ? options.reasoningEffort : undefined;\n    this.textVerbosity = options.textVerbosity;\n    this.maxRetries = options.maxRetries ?? 3;\n    this.temperature = typeof options.temperature === 'number' ? options.temperature : undefined;\n    this.maxTokens = Math.max(1, options.maxTokens ?? 4096);\n  }\n\n  /**\n   * Sleep for a given number of milliseconds\n   */\n  private sleep(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  /**\n   * Calculate exponential backoff delay with jitter\n   */\n  private getBackoffDelay(attempt: number, baseDelay = 1000, maxDelay = 30000): number {\n    const delay = Math.min(baseDelay * Math.pow(2, attempt), maxDelay);\n    return delay + Math.random() * delay * 0.1;\n  }\n\n  /**\n   * Execute request with retry logic for transient errors\n   */\n  private async executeWithRetry<T>(\n    operation: () => Promise<T>,\n    operationName: string\n  ): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let attempt = 0; attempt <= this.maxRetries; attempt++) {\n      try {\n        return await operation();\n      } catch (error) {\n        lastError = error instanceof Error ? error : new Error(String(error));\n\n        if (isRecoverableError(error) && attempt < this.maxRetries) {\n          const delay = this.getBackoffDelay(attempt);\n          logDebug(\n            `[${this.id}] ${operationName} failed (attempt ${attempt + 1}/${this.maxRetries + 1}): ` +\n            `${lastError.message}. Retrying in ${Math.round(delay)}ms...`\n          );\n          await this.sleep(delay);\n          continue;\n        }\n\n        throw error;\n      }\n    }\n\n    throw lastError;\n  }\n\n  async generate(messages: ConversationMessage[], tools: ProviderToolDefinition[]): Promise<ProviderResponse> {\n    const { messages: boundedMessages } = enforceRequestSizeLimit(messages);\n\n    return this.executeWithRetry(async () => {\n      const request: EnhancedResponsesCreateParams = {\n        model: this.model,\n        input: mapMessages(boundedMessages),\n        tools: tools.length ? tools.map(mapTool) : undefined,\n      // Enable parallel tool calls for better efficiency\n      parallel_tool_calls: tools.length ? true : undefined,\n      // Force the model to actually emit tool calls instead of only narrating them\n      tool_choice: tools.length ? 'auto' : undefined,\n      stream: false,\n      temperature: this.temperature,\n      max_output_tokens: this.maxTokens,\n    };\n\n    if (this.reasoningEffort) {\n      request.reasoning = { effort: this.reasoningEffort };\n    }\n    if (this.textVerbosity) {\n      request.text = { verbosity: this.textVerbosity };\n    }\n\n    let response: ResponsesCreateResult;\n    try {\n      response = await this.client.responses.create(request);\n    } catch (error) {\n      this.handleProviderError(error);\n    }\n    assertHasOutput(response);\n\n      // Safely extract tool calls with error recovery\n      let toolCalls: ToolCallRequest[] = [];\n      try {\n        toolCalls = response.output.filter(isFunctionCall).map(mapToolCall);\n      } catch (parseError) {\n        logDebug(\n          `[${this.id}] Failed to parse tool calls, recovering: ` +\n          `${parseError instanceof Error ? parseError.message : String(parseError)}`\n        );\n      }\n\n      const usage = mapUsage(response.usage);\n      if (toolCalls.length > 0) {\n        return {\n          type: 'tool_calls',\n          toolCalls,\n          content: extractTextContent(response),\n          usage,\n        };\n      }\n\n      return {\n        type: 'message',\n        content: extractTextContent(response),\n        usage,\n      };\n    }, 'generate');\n  }\n\n  async *generateStream(\n    messages: ConversationMessage[],\n    tools: ProviderToolDefinition[]\n  ): AsyncIterableIterator<StreamChunk> {\n    const { messages: boundedMessages } = enforceRequestSizeLimit(messages);\n\n    const request: EnhancedResponsesCreateParams = {\n      model: this.model,\n      input: mapMessages(boundedMessages),\n      tools: tools.length ? tools.map(mapTool) : undefined,\n      // Enable parallel tool calls for better efficiency\n      parallel_tool_calls: tools.length ? true : undefined,\n      // Force the model to emit tool calls when tools are provided\n      tool_choice: tools.length ? 'auto' : undefined,\n      stream: true,\n      temperature: this.temperature,\n      max_output_tokens: this.maxTokens,\n    };\n\n    if (this.reasoningEffort) {\n      request.reasoning = { effort: this.reasoningEffort };\n    }\n    if (this.textVerbosity) {\n      request.text = { verbosity: this.textVerbosity };\n    }\n\n    let stream: AsyncIterable<ResponseStreamEvent>;\n    try {\n      logDebug('[DEBUG provider] Making API request to:', this.model);\n      stream = await this.client.responses.create(request) as AsyncIterable<ResponseStreamEvent>;\n      logDebug('[DEBUG provider] Got stream response');\n    } catch (error) {\n      logDebug('[DEBUG provider] API error:', error);\n      this.handleProviderError(error);\n    }\n\n    // Track function calls by item_id -> { call_id, name, arguments }\n    const functionCallsById = new Map<string, { callId: string; name: string; arguments: string }>();\n\n    try {\n      logDebug('[DEBUG provider] Starting to iterate stream');\n      for await (const event of stream) {\n        logDebug('[DEBUG provider] Stream event:', event.type);\n        switch (event.type) {\n          case 'response.output_text.delta':\n            logDebug('[DEBUG provider] output_text.delta - delta=', JSON.stringify(event.delta), 'event keys:', Object.keys(event));\n            if (event.delta) {\n              logDebug('[DEBUG provider] Yielding content delta:', event.delta.length, 'chars');\n              yield { type: 'content', content: event.delta };\n            } else {\n              logDebug('[DEBUG provider] NO delta in event!');\n            }\n            break;\n\n          // Handle reasoning content for GPT-5 models\n          // GPT-5 uses summarized thinking with 'reasoning' type items\n          case 'response.reasoning_summary_text.delta':\n            if (event.delta) {\n              yield { type: 'reasoning', content: event.delta };\n            }\n            break;\n\n          // Handle reasoning item completion with summary\n          case 'response.output_item.done': {\n            const item = event.item;\n            if (item?.type === 'reasoning' && event.summary) {\n              // Extract text from summary array\n              for (const summaryItem of event.summary) {\n                if (summaryItem.type === 'summary_text' && summaryItem.text) {\n                  yield { type: 'reasoning', content: summaryItem.text };\n                }\n              }\n            }\n            break;\n          }\n\n          // Capture function call metadata when it's added\n          case 'response.output_item.added': {\n            const item = event.item;\n            if (item?.type === 'function_call' && item.id) {\n              functionCallsById.set(item.id, {\n                callId: item.call_id ?? item.id,\n                name: item.name ?? '',\n                arguments: '',\n              });\n            }\n            break;\n          }\n\n          case 'response.function_call_arguments.delta': {\n            const itemId = event.item_id;\n            if (itemId) {\n              const existing = functionCallsById.get(itemId);\n              if (existing) {\n                existing.arguments += event.delta ?? '';\n              }\n            }\n            break;\n          }\n\n          case 'response.function_call_arguments.done': {\n            const itemId = event.item_id;\n            if (itemId) {\n              const pending = functionCallsById.get(itemId);\n              if (pending) {\n                let parsed: Record<string, unknown> = {};\n                try {\n                  parsed = JSON.parse(pending.arguments || '{}');\n                } catch {\n                  parsed = {};\n                }\n                yield {\n                  type: 'tool_call',\n                  toolCall: {\n                    id: pending.callId,\n                    name: pending.name,\n                    arguments: parsed,\n                  },\n                };\n                functionCallsById.delete(itemId);\n              }\n            }\n            break;\n          }\n\n          case 'response.done':\n          case 'response.completed':\n            if (event.response?.usage) {\n              const usage = mapUsage(event.response.usage);\n              if (usage) {\n                yield { type: 'usage', usage };\n              }\n            }\n            yield { type: 'done' };\n            break;\n        }\n      }\n    } catch (error) {\n      this.handleProviderError(error);\n    }\n  }\n\n  private handleProviderError(error: unknown): never {\n    if (error instanceof Error) {\n      throw error;\n    }\n    throw new Error(String(error));\n  }\n}\n\n/**\n * Enforce a hard request size limit to prevent provider 413 errors.\n * Drops the oldest non-system messages until the serialized size is under limit.\n */\nfunction enforceRequestSizeLimit(messages: ConversationMessage[]): { messages: ConversationMessage[]; truncated: boolean } {\n  let truncated = false;\n  const trimmed = [...messages];\n  let size = estimateMessageChars(trimmed);\n\n  while (size > REQUEST_CHAR_LIMIT && trimmed.length > 1) {\n    // Remove the oldest non-system message; if only systems remain, drop the second message\n    const removeIdx = trimmed.findIndex(msg => msg.role !== 'system');\n    const idx = removeIdx === -1 ? 1 : removeIdx;\n    trimmed.splice(idx, 1);\n    truncated = true;\n    size = estimateMessageChars(trimmed);\n  }\n\n  if (truncated) {\n    trimmed.unshift({\n      role: 'system',\n      content: '[Context trimmed to fit request size limit. Earlier turns were dropped to avoid provider rejection.]',\n    });\n  }\n\n  return { messages: trimmed, truncated };\n}\n\nfunction estimateMessageChars(messages: ConversationMessage[]): number {\n  let total = 0;\n  for (const msg of messages) {\n    if (typeof msg.content === 'string') {\n      total += msg.content.length;\n    } else if (Array.isArray(msg.content)) {\n      for (const part of msg.content as Array<unknown>) {\n        if (typeof part === 'string') {\n          total += part.length;\n        } else if (part && typeof part === 'object' && 'text' in (part as Record<string, unknown>)) {\n          const text = (part as { text?: string }).text ?? '';\n          total += typeof text === 'string' ? text.length : String(text).length;\n        } else {\n          total += JSON.stringify(part ?? '').length;\n        }\n      }\n    } else if (msg.content != null) {\n      total += JSON.stringify(msg.content).length;\n    }\n\n    const toolCalls = (msg as { toolCalls?: Array<{ name?: string; arguments?: unknown }> }).toolCalls;\n    if (Array.isArray(toolCalls)) {\n      for (const call of toolCalls) {\n        total += (call.name?.length ?? 0);\n        try {\n          total += JSON.stringify(call.arguments ?? {}).length;\n        } catch {\n          total += 100; // Fallback small cost\n        }\n      }\n    }\n  }\n  return total;\n}\n\nfunction mapMessages(messages: ConversationMessage[]): ResponseInput {\n  const input: ResponseInput = [];\n  for (const message of messages) {\n    switch (message.role) {\n      case 'system':\n      case 'user':\n      case 'assistant': {\n        input.push({\n          role: message.role,\n          content: message.content,\n          type: 'message',\n        });\n        if (message.role === 'assistant') {\n          for (const call of message.toolCalls ?? []) {\n            input.push({\n              type: 'function_call',\n              call_id: call.id,\n              name: call.name,\n              arguments: JSON.stringify(call.arguments ?? {}),\n            });\n          }\n        }\n        break;\n      }\n      case 'tool': {\n        input.push({\n          type: 'function_call_output',\n          call_id: message.toolCallId,\n          output: message.content,\n        });\n        break;\n      }\n      default:\n        break;\n    }\n  }\n  return input;\n}\n\nfunction mapTool(definition: ProviderToolDefinition): Tool {\n  return {\n    type: 'function',\n    name: definition.name,\n    description: definition.description,\n    parameters: (definition.parameters ?? {\n      type: 'object',\n      properties: {},\n    }) as FunctionTool['parameters'],\n    strict: false,\n  };\n}\n\nfunction extractTextContent(response: Response): string {\n  const primary = collectOutputText(response.output);\n  if (primary) {\n    return primary;\n  }\n\n  const aggregated = typeof response.output_text === 'string' ? response.output_text.trim() : '';\n  if (aggregated) {\n    return aggregated;\n  }\n\n  const refusal = collectRefusalText(response.output);\n  if (refusal) {\n    return refusal;\n  }\n\n  return '';\n}\n\nfunction collectOutputText(output: ResponseOutputItem[]): string {\n  const chunks: string[] = [];\n  for (const item of output) {\n    if (!isOutputMessage(item)) {\n      continue;\n    }\n    for (const block of item.content) {\n      if (block.type === 'output_text') {\n        chunks.push(block.text);\n      }\n    }\n  }\n  return chunks.join('\\n').trim();\n}\n\nfunction collectRefusalText(output: ResponseOutputItem[]): string {\n  for (const item of output) {\n    if (!isOutputMessage(item)) {\n      continue;\n    }\n    for (const block of item.content) {\n      if (isRefusal(block) && block.refusal?.trim()) {\n        return block.refusal.trim();\n      }\n    }\n  }\n  return '';\n}\n\nfunction mapToolCall(call: ResponseFunctionToolCall): ToolCallRequest {\n  let parsed: Record<string, unknown> = {};\n  try {\n    parsed = JSON.parse(call.arguments ?? '{}');\n  } catch {\n    parsed = {};\n  }\n\n  return {\n    id: call.call_id ?? call.id ?? '',\n    name: call.name,\n    arguments: parsed,\n  };\n}\n\nfunction mapUsage(usage?: Response['usage'] | null): ProviderUsage | undefined {\n  if (!usage) {\n    return undefined;\n  }\n  return {\n    inputTokens: usage.input_tokens,\n    outputTokens: usage.output_tokens,\n    totalTokens: usage.total_tokens,\n  };\n}\n\nfunction isFunctionCall(item: ResponseOutputItem): item is ResponseFunctionToolCall {\n  return item.type === 'function_call';\n}\n\nfunction isOutputMessage(item: ResponseOutputItem): item is ResponseOutputMessage {\n  return item.type === 'message';\n}\n\nfunction isRefusal(block: ResponseOutputMessage['content'][number]): block is ResponseOutputRefusal {\n  return block.type === 'refusal';\n}\n\nfunction assertHasOutput(response: ResponsesCreateResult): asserts response is Response {\n  if (!('output' in response)) {\n    throw new Error('Streaming responses are not supported in this runtime.');\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}