3c58ce3583a146944315a0f6be0b3a64
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.isPlainOutputMode = isPlainOutputMode;
exports.resetPlainOutputMode = resetPlainOutputMode;
exports.setPlainOutputMode = setPlainOutputMode;
/**
 * Output mode configuration for terminal UI
 *
 * Controls whether to use decorative box-drawing characters or plain text.
 * Plain mode outputs clipboard-friendly text without Unicode borders.
 * Automatically enabled in CI or non-interactive shells; override with AGI_PLAIN_OUTPUT=true.
 */

let _plainMode = null;

/**
 * Check if plain output mode is enabled.
 * Plain mode outputs text without box-drawing characters for clean clipboard copying.
 */
function isPlainOutputMode() {
  if (_plainMode !== null) {
    return _plainMode;
  }
  const envValue = process.env['AGI_PLAIN_OUTPUT'];
  if (envValue !== undefined) {
    const envEnabled = ['true', '1', 'yes', 'on'].includes(envValue.toLowerCase());
    if (envEnabled) {
      _plainMode = true;
      return _plainMode;
    }
  }
  const isTty = Boolean(process.stdout?.isTTY && process.stdin?.isTTY);
  const isCi = Boolean(process.env['CI']);

  // Default to plain logging in non-interactive/CI environments; rich UI only in TTY sessions.
  _plainMode = !isTty || isCi;
  return _plainMode;
}

/**
 * Override the plain output mode setting (useful for testing)
 */
function setPlainOutputMode(enabled) {
  _plainMode = enabled;
}

/**
 * Reset plain output mode to check environment variable again
 */
function resetPlainOutputMode() {
  _plainMode = null;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcGxhaW5Nb2RlIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJlbnZWYWx1ZSIsInByb2Nlc3MiLCJlbnYiLCJ1bmRlZmluZWQiLCJlbnZFbmFibGVkIiwiaW5jbHVkZXMiLCJ0b0xvd2VyQ2FzZSIsImlzVHR5IiwiQm9vbGVhbiIsInN0ZG91dCIsImlzVFRZIiwic3RkaW4iLCJpc0NpIiwic2V0UGxhaW5PdXRwdXRNb2RlIiwiZW5hYmxlZCIsInJlc2V0UGxhaW5PdXRwdXRNb2RlIl0sInNvdXJjZXMiOlsib3V0cHV0TW9kZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE91dHB1dCBtb2RlIGNvbmZpZ3VyYXRpb24gZm9yIHRlcm1pbmFsIFVJXG4gKlxuICogQ29udHJvbHMgd2hldGhlciB0byB1c2UgZGVjb3JhdGl2ZSBib3gtZHJhd2luZyBjaGFyYWN0ZXJzIG9yIHBsYWluIHRleHQuXG4gKiBQbGFpbiBtb2RlIG91dHB1dHMgY2xpcGJvYXJkLWZyaWVuZGx5IHRleHQgd2l0aG91dCBVbmljb2RlIGJvcmRlcnMuXG4gKiBBdXRvbWF0aWNhbGx5IGVuYWJsZWQgaW4gQ0kgb3Igbm9uLWludGVyYWN0aXZlIHNoZWxsczsgb3ZlcnJpZGUgd2l0aCBBR0lfUExBSU5fT1VUUFVUPXRydWUuXG4gKi9cblxubGV0IF9wbGFpbk1vZGU6IGJvb2xlYW4gfCBudWxsID0gbnVsbDtcblxuLyoqXG4gKiBDaGVjayBpZiBwbGFpbiBvdXRwdXQgbW9kZSBpcyBlbmFibGVkLlxuICogUGxhaW4gbW9kZSBvdXRwdXRzIHRleHQgd2l0aG91dCBib3gtZHJhd2luZyBjaGFyYWN0ZXJzIGZvciBjbGVhbiBjbGlwYm9hcmQgY29weWluZy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzUGxhaW5PdXRwdXRNb2RlKCk6IGJvb2xlYW4ge1xuICBpZiAoX3BsYWluTW9kZSAhPT0gbnVsbCkge1xuICAgIHJldHVybiBfcGxhaW5Nb2RlO1xuICB9XG5cbiAgY29uc3QgZW52VmFsdWUgPSBwcm9jZXNzLmVudlsnQUdJX1BMQUlOX09VVFBVVCddO1xuICBpZiAoZW52VmFsdWUgIT09IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IGVudkVuYWJsZWQgPSBbJ3RydWUnLCAnMScsICd5ZXMnLCAnb24nXS5pbmNsdWRlcyhlbnZWYWx1ZS50b0xvd2VyQ2FzZSgpKTtcbiAgICBpZiAoZW52RW5hYmxlZCkge1xuICAgICAgX3BsYWluTW9kZSA9IHRydWU7XG4gICAgICByZXR1cm4gX3BsYWluTW9kZTtcbiAgICB9XG4gIH1cblxuICBjb25zdCBpc1R0eSA9IEJvb2xlYW4ocHJvY2Vzcy5zdGRvdXQ/LmlzVFRZICYmIHByb2Nlc3Muc3RkaW4/LmlzVFRZKTtcbiAgY29uc3QgaXNDaSA9IEJvb2xlYW4ocHJvY2Vzcy5lbnZbJ0NJJ10pO1xuXG4gIC8vIERlZmF1bHQgdG8gcGxhaW4gbG9nZ2luZyBpbiBub24taW50ZXJhY3RpdmUvQ0kgZW52aXJvbm1lbnRzOyByaWNoIFVJIG9ubHkgaW4gVFRZIHNlc3Npb25zLlxuICBfcGxhaW5Nb2RlID0gIWlzVHR5IHx8IGlzQ2k7XG5cbiAgcmV0dXJuIF9wbGFpbk1vZGU7XG59XG5cbi8qKlxuICogT3ZlcnJpZGUgdGhlIHBsYWluIG91dHB1dCBtb2RlIHNldHRpbmcgKHVzZWZ1bCBmb3IgdGVzdGluZylcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNldFBsYWluT3V0cHV0TW9kZShlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gIF9wbGFpbk1vZGUgPSBlbmFibGVkO1xufVxuXG4vKipcbiAqIFJlc2V0IHBsYWluIG91dHB1dCBtb2RlIHRvIGNoZWNrIGVudmlyb25tZW50IHZhcmlhYmxlIGFnYWluXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiByZXNldFBsYWluT3V0cHV0TW9kZSgpOiB2b2lkIHtcbiAgX3BsYWluTW9kZSA9IG51bGw7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsSUFBSUEsVUFBMEIsR0FBRyxJQUFJOztBQUVyQztBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLGlCQUFpQkEsQ0FBQSxFQUFZO0VBQzNDLElBQUlELFVBQVUsS0FBSyxJQUFJLEVBQUU7SUFDdkIsT0FBT0EsVUFBVTtFQUNuQjtFQUVBLE1BQU1FLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsa0JBQWtCLENBQUM7RUFDaEQsSUFBSUYsUUFBUSxLQUFLRyxTQUFTLEVBQUU7SUFDMUIsTUFBTUMsVUFBVSxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUNDLFFBQVEsQ0FBQ0wsUUFBUSxDQUFDTSxXQUFXLENBQUMsQ0FBQyxDQUFDO0lBQzlFLElBQUlGLFVBQVUsRUFBRTtNQUNkTixVQUFVLEdBQUcsSUFBSTtNQUNqQixPQUFPQSxVQUFVO0lBQ25CO0VBQ0Y7RUFFQSxNQUFNUyxLQUFLLEdBQUdDLE9BQU8sQ0FBQ1AsT0FBTyxDQUFDUSxNQUFNLEVBQUVDLEtBQUssSUFBSVQsT0FBTyxDQUFDVSxLQUFLLEVBQUVELEtBQUssQ0FBQztFQUNwRSxNQUFNRSxJQUFJLEdBQUdKLE9BQU8sQ0FBQ1AsT0FBTyxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7O0VBRXZDO0VBQ0FKLFVBQVUsR0FBRyxDQUFDUyxLQUFLLElBQUlLLElBQUk7RUFFM0IsT0FBT2QsVUFBVTtBQUNuQjs7QUFFQTtBQUNBO0FBQ0E7QUFDTyxTQUFTZSxrQkFBa0JBLENBQUNDLE9BQWdCLEVBQVE7RUFDekRoQixVQUFVLEdBQUdnQixPQUFPO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVNDLG9CQUFvQkEsQ0FBQSxFQUFTO0VBQzNDakIsVUFBVSxHQUFHLElBQUk7QUFDbkIiLCJpZ25vcmVMaXN0IjpbXX0=