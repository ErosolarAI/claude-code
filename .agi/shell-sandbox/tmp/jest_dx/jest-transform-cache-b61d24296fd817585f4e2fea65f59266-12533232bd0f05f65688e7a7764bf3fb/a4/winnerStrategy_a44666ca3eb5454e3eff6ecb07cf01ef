8806d11f76c05f8c935e6c7d0044d10c
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resolveWinner = resolveWinner;
function resolveWinner(input, pickWinner) {
  const primary = input.variantResults.primary;
  const refiner = input.variantResults.refiner;
  if (input.tournamentOutcome?.ranked?.length) {
    const top = input.tournamentOutcome.ranked[0];
    const winnerVariant = top.candidateId === 'refiner' && refiner ? 'refiner' : 'primary';
    if (winnerVariant === 'primary') {
      primary.humanAccuracy = top.humanAccuracy;
    } else if (refiner) {
      refiner.humanAccuracy = top.humanAccuracy;
    }
    const winner = winnerVariant === 'refiner' && refiner ? refiner : primary;
    return {
      winner,
      winnerVariant
    };
  }
  return pickWinner(input.modeDefinition, primary, refiner);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZXNvbHZlV2lubmVyIiwiaW5wdXQiLCJwaWNrV2lubmVyIiwicHJpbWFyeSIsInZhcmlhbnRSZXN1bHRzIiwicmVmaW5lciIsInRvdXJuYW1lbnRPdXRjb21lIiwicmFua2VkIiwibGVuZ3RoIiwidG9wIiwid2lubmVyVmFyaWFudCIsImNhbmRpZGF0ZUlkIiwiaHVtYW5BY2N1cmFjeSIsIndpbm5lciIsIm1vZGVEZWZpbml0aW9uIl0sInNvdXJjZXMiOlsid2lubmVyU3RyYXRlZ3kudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBUb3VybmFtZW50T3V0Y29tZSB9IGZyb20gJy4vZHVhbFRvdXJuYW1lbnQuanMnO1xuaW1wb3J0IHR5cGUgeyBSZXBvVXBncmFkZU1vZGVEZWZpbml0aW9uLCBVcGdyYWRlU3RlcFJlc3VsdCwgVXBncmFkZVZhcmlhbnQgfSBmcm9tICcuL3JlcG9VcGdyYWRlT3JjaGVzdHJhdG9yLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBXaW5uZXJSZXNvbHV0aW9uSW5wdXQge1xuICBtb2RlRGVmaW5pdGlvbjogUmVwb1VwZ3JhZGVNb2RlRGVmaW5pdGlvbjtcbiAgdmFyaWFudFJlc3VsdHM6IFBhcnRpYWw8UmVjb3JkPFVwZ3JhZGVWYXJpYW50LCBVcGdyYWRlU3RlcFJlc3VsdD4+O1xuICB0b3VybmFtZW50T3V0Y29tZTogVG91cm5hbWVudE91dGNvbWUgfCBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gcmVzb2x2ZVdpbm5lcihcbiAgaW5wdXQ6IFdpbm5lclJlc29sdXRpb25JbnB1dCxcbiAgcGlja1dpbm5lcjogKGRlZmluaXRpb246IFJlcG9VcGdyYWRlTW9kZURlZmluaXRpb24sIHByaW1hcnk6IFVwZ3JhZGVTdGVwUmVzdWx0LCByZWZpbmVyPzogVXBncmFkZVN0ZXBSZXN1bHQpID0+IHtcbiAgICB3aW5uZXI6IFVwZ3JhZGVTdGVwUmVzdWx0O1xuICAgIHdpbm5lclZhcmlhbnQ6IFVwZ3JhZGVWYXJpYW50O1xuICB9XG4pOiB7IHdpbm5lcjogVXBncmFkZVN0ZXBSZXN1bHQ7IHdpbm5lclZhcmlhbnQ6IFVwZ3JhZGVWYXJpYW50IH0ge1xuICBjb25zdCBwcmltYXJ5ID0gaW5wdXQudmFyaWFudFJlc3VsdHMucHJpbWFyeSE7XG4gIGNvbnN0IHJlZmluZXIgPSBpbnB1dC52YXJpYW50UmVzdWx0cy5yZWZpbmVyO1xuXG4gIGlmIChpbnB1dC50b3VybmFtZW50T3V0Y29tZT8ucmFua2VkPy5sZW5ndGgpIHtcbiAgICBjb25zdCB0b3AgPSBpbnB1dC50b3VybmFtZW50T3V0Y29tZS5yYW5rZWRbMF0hO1xuICAgIGNvbnN0IHdpbm5lclZhcmlhbnQ6IFVwZ3JhZGVWYXJpYW50ID0gdG9wLmNhbmRpZGF0ZUlkID09PSAncmVmaW5lcicgJiYgcmVmaW5lciA/ICdyZWZpbmVyJyA6ICdwcmltYXJ5JztcbiAgICBpZiAod2lubmVyVmFyaWFudCA9PT0gJ3ByaW1hcnknKSB7XG4gICAgICBwcmltYXJ5Lmh1bWFuQWNjdXJhY3kgPSB0b3AuaHVtYW5BY2N1cmFjeTtcbiAgICB9IGVsc2UgaWYgKHJlZmluZXIpIHtcbiAgICAgIHJlZmluZXIuaHVtYW5BY2N1cmFjeSA9IHRvcC5odW1hbkFjY3VyYWN5O1xuICAgIH1cbiAgICBjb25zdCB3aW5uZXIgPSB3aW5uZXJWYXJpYW50ID09PSAncmVmaW5lcicgJiYgcmVmaW5lciA/IHJlZmluZXIgOiBwcmltYXJ5O1xuICAgIHJldHVybiB7IHdpbm5lciwgd2lubmVyVmFyaWFudCB9O1xuICB9XG5cbiAgcmV0dXJuIHBpY2tXaW5uZXIoaW5wdXQubW9kZURlZmluaXRpb24sIHByaW1hcnksIHJlZmluZXIpO1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFTTyxTQUFTQSxhQUFhQSxDQUMzQkMsS0FBNEIsRUFDNUJDLFVBR0MsRUFDNkQ7RUFDOUQsTUFBTUMsT0FBTyxHQUFHRixLQUFLLENBQUNHLGNBQWMsQ0FBQ0QsT0FBUTtFQUM3QyxNQUFNRSxPQUFPLEdBQUdKLEtBQUssQ0FBQ0csY0FBYyxDQUFDQyxPQUFPO0VBRTVDLElBQUlKLEtBQUssQ0FBQ0ssaUJBQWlCLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFO0lBQzNDLE1BQU1DLEdBQUcsR0FBR1IsS0FBSyxDQUFDSyxpQkFBaUIsQ0FBQ0MsTUFBTSxDQUFDLENBQUMsQ0FBRTtJQUM5QyxNQUFNRyxhQUE2QixHQUFHRCxHQUFHLENBQUNFLFdBQVcsS0FBSyxTQUFTLElBQUlOLE9BQU8sR0FBRyxTQUFTLEdBQUcsU0FBUztJQUN0RyxJQUFJSyxhQUFhLEtBQUssU0FBUyxFQUFFO01BQy9CUCxPQUFPLENBQUNTLGFBQWEsR0FBR0gsR0FBRyxDQUFDRyxhQUFhO0lBQzNDLENBQUMsTUFBTSxJQUFJUCxPQUFPLEVBQUU7TUFDbEJBLE9BQU8sQ0FBQ08sYUFBYSxHQUFHSCxHQUFHLENBQUNHLGFBQWE7SUFDM0M7SUFDQSxNQUFNQyxNQUFNLEdBQUdILGFBQWEsS0FBSyxTQUFTLElBQUlMLE9BQU8sR0FBR0EsT0FBTyxHQUFHRixPQUFPO0lBQ3pFLE9BQU87TUFBRVUsTUFBTTtNQUFFSDtJQUFjLENBQUM7RUFDbEM7RUFFQSxPQUFPUixVQUFVLENBQUNELEtBQUssQ0FBQ2EsY0FBYyxFQUFFWCxPQUFPLEVBQUVFLE9BQU8sQ0FBQztBQUMzRCIsImlnbm9yZUxpc3QiOltdfQ==