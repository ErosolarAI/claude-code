4986400451121ba1985f0565a9609aff
/* istanbul ignore next */
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resolveWinner = resolveWinner;
function cov_1qbxo8uy9b() {
  var path = "/Users/bo/GitHub/agi-core-CLI-coding/src/core/winnerStrategy.ts";
  var hash = "89990ebf5eebd5db990eafa0a9db0a59e114e3d2";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/bo/GitHub/agi-core-CLI-coding/src/core/winnerStrategy.ts",
    statementMap: {
      "0": {
        start: {
          line: 17,
          column: 18
        },
        end: {
          line: 17,
          column: 47
        }
      },
      "1": {
        start: {
          line: 18,
          column: 18
        },
        end: {
          line: 18,
          column: 46
        }
      },
      "2": {
        start: {
          line: 20,
          column: 2
        },
        end: {
          line: 30,
          column: 3
        }
      },
      "3": {
        start: {
          line: 21,
          column: 16
        },
        end: {
          line: 21,
          column: 50
        }
      },
      "4": {
        start: {
          line: 22,
          column: 42
        },
        end: {
          line: 22,
          column: 106
        }
      },
      "5": {
        start: {
          line: 23,
          column: 4
        },
        end: {
          line: 27,
          column: 5
        }
      },
      "6": {
        start: {
          line: 24,
          column: 6
        },
        end: {
          line: 24,
          column: 48
        }
      },
      "7": {
        start: {
          line: 25,
          column: 11
        },
        end: {
          line: 27,
          column: 5
        }
      },
      "8": {
        start: {
          line: 26,
          column: 6
        },
        end: {
          line: 26,
          column: 48
        }
      },
      "9": {
        start: {
          line: 28,
          column: 19
        },
        end: {
          line: 28,
          column: 77
        }
      },
      "10": {
        start: {
          line: 29,
          column: 4
        },
        end: {
          line: 29,
          column: 37
        }
      },
      "11": {
        start: {
          line: 32,
          column: 2
        },
        end: {
          line: 32,
          column: 60
        }
      }
    },
    fnMap: {
      "0": {
        name: "resolveWinner",
        decl: {
          start: {
            line: 10,
            column: 16
          },
          end: {
            line: 10,
            column: 29
          }
        },
        loc: {
          start: {
            line: 16,
            column: 64
          },
          end: {
            line: 33,
            column: 1
          }
        },
        line: 16
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 20,
            column: 2
          },
          end: {
            line: 30,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 20,
            column: 2
          },
          end: {
            line: 30,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 20
      },
      "1": {
        loc: {
          start: {
            line: 22,
            column: 42
          },
          end: {
            line: 22,
            column: 106
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 22,
            column: 85
          },
          end: {
            line: 22,
            column: 94
          }
        }, {
          start: {
            line: 22,
            column: 97
          },
          end: {
            line: 22,
            column: 106
          }
        }],
        line: 22
      },
      "2": {
        loc: {
          start: {
            line: 22,
            column: 42
          },
          end: {
            line: 22,
            column: 82
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 22,
            column: 42
          },
          end: {
            line: 22,
            column: 71
          }
        }, {
          start: {
            line: 22,
            column: 75
          },
          end: {
            line: 22,
            column: 82
          }
        }],
        line: 22
      },
      "3": {
        loc: {
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 23,
            column: 4
          },
          end: {
            line: 27,
            column: 5
          }
        }, {
          start: {
            line: 25,
            column: 11
          },
          end: {
            line: 27,
            column: 5
          }
        }],
        line: 23
      },
      "4": {
        loc: {
          start: {
            line: 25,
            column: 11
          },
          end: {
            line: 27,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 25,
            column: 11
          },
          end: {
            line: 27,
            column: 5
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 25
      },
      "5": {
        loc: {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 77
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 28,
            column: 60
          },
          end: {
            line: 28,
            column: 67
          }
        }, {
          start: {
            line: 28,
            column: 70
          },
          end: {
            line: 28,
            column: 77
          }
        }],
        line: 28
      },
      "6": {
        loc: {
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 57
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 28,
            column: 19
          },
          end: {
            line: 28,
            column: 46
          }
        }, {
          start: {
            line: 28,
            column: 50
          },
          end: {
            line: 28,
            column: 57
          }
        }],
        line: 28
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0
    },
    f: {
      "0": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "89990ebf5eebd5db990eafa0a9db0a59e114e3d2"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1qbxo8uy9b = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1qbxo8uy9b();
function resolveWinner(input, pickWinner) {
  /* istanbul ignore next */
  cov_1qbxo8uy9b().f[0]++;
  const primary =
  /* istanbul ignore next */
  (cov_1qbxo8uy9b().s[0]++, input.variantResults.primary);
  const refiner =
  /* istanbul ignore next */
  (cov_1qbxo8uy9b().s[1]++, input.variantResults.refiner);
  /* istanbul ignore next */
  cov_1qbxo8uy9b().s[2]++;
  if (input.tournamentOutcome?.ranked?.length) {
    /* istanbul ignore next */
    cov_1qbxo8uy9b().b[0][0]++;
    const top =
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().s[3]++, input.tournamentOutcome.ranked[0]);
    const winnerVariant =
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().s[4]++,
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[2][0]++, top.candidateId === 'refiner') &&
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[2][1]++, refiner) ?
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[1][0]++, 'refiner') :
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[1][1]++, 'primary'));
    /* istanbul ignore next */
    cov_1qbxo8uy9b().s[5]++;
    if (winnerVariant === 'primary') {
      /* istanbul ignore next */
      cov_1qbxo8uy9b().b[3][0]++;
      cov_1qbxo8uy9b().s[6]++;
      primary.humanAccuracy = top.humanAccuracy;
    } else {
      /* istanbul ignore next */
      cov_1qbxo8uy9b().b[3][1]++;
      cov_1qbxo8uy9b().s[7]++;
      if (refiner) {
        /* istanbul ignore next */
        cov_1qbxo8uy9b().b[4][0]++;
        cov_1qbxo8uy9b().s[8]++;
        refiner.humanAccuracy = top.humanAccuracy;
      } else
      /* istanbul ignore next */
      {
        cov_1qbxo8uy9b().b[4][1]++;
      }
    }
    const winner =
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().s[9]++,
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[6][0]++, winnerVariant === 'refiner') &&
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[6][1]++, refiner) ?
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[5][0]++, refiner) :
    /* istanbul ignore next */
    (cov_1qbxo8uy9b().b[5][1]++, primary));
    /* istanbul ignore next */
    cov_1qbxo8uy9b().s[10]++;
    return {
      winner,
      winnerVariant
    };
  } else
  /* istanbul ignore next */
  {
    cov_1qbxo8uy9b().b[0][1]++;
  }
  cov_1qbxo8uy9b().s[11]++;
  return pickWinner(input.modeDefinition, primary, refiner);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMXFieG84dXk5YiIsImFjdHVhbENvdmVyYWdlIiwicmVzb2x2ZVdpbm5lciIsImlucHV0IiwicGlja1dpbm5lciIsImYiLCJwcmltYXJ5IiwicyIsInZhcmlhbnRSZXN1bHRzIiwicmVmaW5lciIsInRvdXJuYW1lbnRPdXRjb21lIiwicmFua2VkIiwibGVuZ3RoIiwiYiIsInRvcCIsIndpbm5lclZhcmlhbnQiLCJjYW5kaWRhdGVJZCIsImh1bWFuQWNjdXJhY3kiLCJ3aW5uZXIiLCJtb2RlRGVmaW5pdGlvbiJdLCJzb3VyY2VzIjpbIndpbm5lclN0cmF0ZWd5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgVG91cm5hbWVudE91dGNvbWUgfSBmcm9tICcuL2R1YWxUb3VybmFtZW50LmpzJztcbmltcG9ydCB0eXBlIHsgUmVwb1VwZ3JhZGVNb2RlRGVmaW5pdGlvbiwgVXBncmFkZVN0ZXBSZXN1bHQsIFVwZ3JhZGVWYXJpYW50IH0gZnJvbSAnLi9yZXBvVXBncmFkZU9yY2hlc3RyYXRvci5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgV2lubmVyUmVzb2x1dGlvbklucHV0IHtcbiAgbW9kZURlZmluaXRpb246IFJlcG9VcGdyYWRlTW9kZURlZmluaXRpb247XG4gIHZhcmlhbnRSZXN1bHRzOiBQYXJ0aWFsPFJlY29yZDxVcGdyYWRlVmFyaWFudCwgVXBncmFkZVN0ZXBSZXN1bHQ+PjtcbiAgdG91cm5hbWVudE91dGNvbWU6IFRvdXJuYW1lbnRPdXRjb21lIHwgbnVsbDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlc29sdmVXaW5uZXIoXG4gIGlucHV0OiBXaW5uZXJSZXNvbHV0aW9uSW5wdXQsXG4gIHBpY2tXaW5uZXI6IChkZWZpbml0aW9uOiBSZXBvVXBncmFkZU1vZGVEZWZpbml0aW9uLCBwcmltYXJ5OiBVcGdyYWRlU3RlcFJlc3VsdCwgcmVmaW5lcj86IFVwZ3JhZGVTdGVwUmVzdWx0KSA9PiB7XG4gICAgd2lubmVyOiBVcGdyYWRlU3RlcFJlc3VsdDtcbiAgICB3aW5uZXJWYXJpYW50OiBVcGdyYWRlVmFyaWFudDtcbiAgfVxuKTogeyB3aW5uZXI6IFVwZ3JhZGVTdGVwUmVzdWx0OyB3aW5uZXJWYXJpYW50OiBVcGdyYWRlVmFyaWFudCB9IHtcbiAgY29uc3QgcHJpbWFyeSA9IGlucHV0LnZhcmlhbnRSZXN1bHRzLnByaW1hcnkhO1xuICBjb25zdCByZWZpbmVyID0gaW5wdXQudmFyaWFudFJlc3VsdHMucmVmaW5lcjtcblxuICBpZiAoaW5wdXQudG91cm5hbWVudE91dGNvbWU/LnJhbmtlZD8ubGVuZ3RoKSB7XG4gICAgY29uc3QgdG9wID0gaW5wdXQudG91cm5hbWVudE91dGNvbWUucmFua2VkWzBdITtcbiAgICBjb25zdCB3aW5uZXJWYXJpYW50OiBVcGdyYWRlVmFyaWFudCA9IHRvcC5jYW5kaWRhdGVJZCA9PT0gJ3JlZmluZXInICYmIHJlZmluZXIgPyAncmVmaW5lcicgOiAncHJpbWFyeSc7XG4gICAgaWYgKHdpbm5lclZhcmlhbnQgPT09ICdwcmltYXJ5Jykge1xuICAgICAgcHJpbWFyeS5odW1hbkFjY3VyYWN5ID0gdG9wLmh1bWFuQWNjdXJhY3k7XG4gICAgfSBlbHNlIGlmIChyZWZpbmVyKSB7XG4gICAgICByZWZpbmVyLmh1bWFuQWNjdXJhY3kgPSB0b3AuaHVtYW5BY2N1cmFjeTtcbiAgICB9XG4gICAgY29uc3Qgd2lubmVyID0gd2lubmVyVmFyaWFudCA9PT0gJ3JlZmluZXInICYmIHJlZmluZXIgPyByZWZpbmVyIDogcHJpbWFyeTtcbiAgICByZXR1cm4geyB3aW5uZXIsIHdpbm5lclZhcmlhbnQgfTtcbiAgfVxuXG4gIHJldHVybiBwaWNrV2lubmVyKGlucHV0Lm1vZGVEZWZpbml0aW9uLCBwcmltYXJ5LCByZWZpbmVyKTtcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFOTCxTQUFTRSxhQUFhQSxDQUMzQkMsS0FBNEIsRUFDNUJDLFVBR0MsRUFDNkQ7RUFBQTtFQUFBSixjQUFBLEdBQUFLLENBQUE7RUFDOUQsTUFBTUMsT0FBTztFQUFBO0VBQUEsQ0FBQU4sY0FBQSxHQUFBTyxDQUFBLE9BQUdKLEtBQUssQ0FBQ0ssY0FBYyxDQUFDRixPQUFPLENBQUM7RUFDN0MsTUFBTUcsT0FBTztFQUFBO0VBQUEsQ0FBQVQsY0FBQSxHQUFBTyxDQUFBLE9BQUdKLEtBQUssQ0FBQ0ssY0FBYyxDQUFDQyxPQUFPO0VBQUM7RUFBQVQsY0FBQSxHQUFBTyxDQUFBO0VBRTdDLElBQUlKLEtBQUssQ0FBQ08saUJBQWlCLEVBQUVDLE1BQU0sRUFBRUMsTUFBTSxFQUFFO0lBQUE7SUFBQVosY0FBQSxHQUFBYSxDQUFBO0lBQzNDLE1BQU1DLEdBQUc7SUFBQTtJQUFBLENBQUFkLGNBQUEsR0FBQU8sQ0FBQSxPQUFHSixLQUFLLENBQUNPLGlCQUFpQixDQUFDQyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDOUMsTUFBTUksYUFBNkI7SUFBQTtJQUFBLENBQUFmLGNBQUEsR0FBQU8sQ0FBQTtJQUFHO0lBQUEsQ0FBQVAsY0FBQSxHQUFBYSxDQUFBLFVBQUFDLEdBQUcsQ0FBQ0UsV0FBVyxLQUFLLFNBQVM7SUFBQTtJQUFBLENBQUFoQixjQUFBLEdBQUFhLENBQUEsVUFBSUosT0FBTztJQUFBO0lBQUEsQ0FBQVQsY0FBQSxHQUFBYSxDQUFBLFVBQUcsU0FBUztJQUFBO0lBQUEsQ0FBQWIsY0FBQSxHQUFBYSxDQUFBLFVBQUcsU0FBUztJQUFDO0lBQUFiLGNBQUEsR0FBQU8sQ0FBQTtJQUN2RyxJQUFJUSxhQUFhLEtBQUssU0FBUyxFQUFFO01BQUE7TUFBQWYsY0FBQSxHQUFBYSxDQUFBO01BQUFiLGNBQUEsR0FBQU8sQ0FBQTtNQUMvQkQsT0FBTyxDQUFDVyxhQUFhLEdBQUdILEdBQUcsQ0FBQ0csYUFBYTtJQUMzQyxDQUFDLE1BQU07TUFBQTtNQUFBakIsY0FBQSxHQUFBYSxDQUFBO01BQUFiLGNBQUEsR0FBQU8sQ0FBQTtNQUFBLElBQUlFLE9BQU8sRUFBRTtRQUFBO1FBQUFULGNBQUEsR0FBQWEsQ0FBQTtRQUFBYixjQUFBLEdBQUFPLENBQUE7UUFDbEJFLE9BQU8sQ0FBQ1EsYUFBYSxHQUFHSCxHQUFHLENBQUNHLGFBQWE7TUFDM0MsQ0FBQztNQUFBO01BQUE7UUFBQWpCLGNBQUEsR0FBQWEsQ0FBQTtNQUFBO0lBQUQ7SUFDQSxNQUFNSyxNQUFNO0lBQUE7SUFBQSxDQUFBbEIsY0FBQSxHQUFBTyxDQUFBO0lBQUc7SUFBQSxDQUFBUCxjQUFBLEdBQUFhLENBQUEsVUFBQUUsYUFBYSxLQUFLLFNBQVM7SUFBQTtJQUFBLENBQUFmLGNBQUEsR0FBQWEsQ0FBQSxVQUFJSixPQUFPO0lBQUE7SUFBQSxDQUFBVCxjQUFBLEdBQUFhLENBQUEsVUFBR0osT0FBTztJQUFBO0lBQUEsQ0FBQVQsY0FBQSxHQUFBYSxDQUFBLFVBQUdQLE9BQU87SUFBQztJQUFBTixjQUFBLEdBQUFPLENBQUE7SUFDMUUsT0FBTztNQUFFVyxNQUFNO01BQUVIO0lBQWMsQ0FBQztFQUNsQyxDQUFDO0VBQUE7RUFBQTtJQUFBZixjQUFBLEdBQUFhLENBQUE7RUFBQTtFQUFBYixjQUFBLEdBQUFPLENBQUE7RUFFRCxPQUFPSCxVQUFVLENBQUNELEtBQUssQ0FBQ2dCLGNBQWMsRUFBRWIsT0FBTyxFQUFFRyxPQUFPLENBQUM7QUFDM0QiLCJpZ25vcmVMaXN0IjpbXX0=