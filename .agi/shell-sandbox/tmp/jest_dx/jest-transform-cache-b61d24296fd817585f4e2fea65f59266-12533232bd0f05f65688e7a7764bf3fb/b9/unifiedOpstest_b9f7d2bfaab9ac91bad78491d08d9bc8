7e3ed5a5fdee5646adb11f7dcb5e5ba3
"use strict";

var _globals = require("@jest/globals");
var _nodeFs = require("node:fs");
var _nodeOs = require("node:os");
var _nodePath = require("node:path");
var _unifiedOps = require("../src/tools/unifiedOps.js");
let tmpDir;
(0, _globals.beforeEach)(() => {
  tmpDir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'unified-ops-'));
});
(0, _globals.afterEach)(() => {
  (0, _nodeFs.rmSync)(tmpDir, {
    recursive: true,
    force: true
  });
});
(0, _globals.describe)('UnifiedOps', () => {
  (0, _globals.it)('lists available tools', async () => {
    const [unified] = (0, _unifiedOps.createUnifiedOpsTools)(tmpDir);
    const output = await unified.handler({
      tool: 'list'
    });
    (0, _globals.expect)(output).toContain('Available tools:');
    (0, _globals.expect)(output).toContain('Bash');
    (0, _globals.expect)(output).toContain('GenerateTool');
    (0, _globals.expect)(output).toContain('HumanIntegration');
  });
  (0, _globals.it)('dispatches to GenerateTool', async () => {
    const [unified] = (0, _unifiedOps.createUnifiedOpsTools)(tmpDir);
    const result = await unified.handler({
      tool: 'GenerateTool',
      args: {
        name: 'SampleTool',
        description: 'Demo tool',
        intent: 'test'
      }
    });
    const parsed = JSON.parse(String(result));
    (0, _globals.expect)(parsed.name).toBe('SampleTool');
    (0, _globals.expect)(parsed.toolDefinition?.name).toBe('SampleTool');
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfbm9kZUZzIiwiX25vZGVPcyIsIl9ub2RlUGF0aCIsIl91bmlmaWVkT3BzIiwidG1wRGlyIiwiYmVmb3JlRWFjaCIsIm1rZHRlbXBTeW5jIiwiam9pbiIsInRtcGRpciIsImFmdGVyRWFjaCIsInJtU3luYyIsInJlY3Vyc2l2ZSIsImZvcmNlIiwiZGVzY3JpYmUiLCJpdCIsInVuaWZpZWQiLCJjcmVhdGVVbmlmaWVkT3BzVG9vbHMiLCJvdXRwdXQiLCJoYW5kbGVyIiwidG9vbCIsImV4cGVjdCIsInRvQ29udGFpbiIsInJlc3VsdCIsImFyZ3MiLCJuYW1lIiwiZGVzY3JpcHRpb24iLCJpbnRlbnQiLCJwYXJzZWQiLCJKU09OIiwicGFyc2UiLCJTdHJpbmciLCJ0b0JlIiwidG9vbERlZmluaXRpb24iXSwic291cmNlcyI6WyJ1bmlmaWVkT3BzLnRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZGVzY3JpYmUsIGl0LCBleHBlY3QsIGJlZm9yZUVhY2gsIGFmdGVyRWFjaCB9IGZyb20gJ0BqZXN0L2dsb2JhbHMnO1xuaW1wb3J0IHsgbWtkdGVtcFN5bmMsIHJtU3luYyB9IGZyb20gJ25vZGU6ZnMnO1xuaW1wb3J0IHsgdG1wZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IGNyZWF0ZVVuaWZpZWRPcHNUb29scyB9IGZyb20gJy4uL3NyYy90b29scy91bmlmaWVkT3BzLmpzJztcblxubGV0IHRtcERpcjogc3RyaW5nO1xuXG5iZWZvcmVFYWNoKCgpID0+IHtcbiAgdG1wRGlyID0gbWtkdGVtcFN5bmMoam9pbih0bXBkaXIoKSwgJ3VuaWZpZWQtb3BzLScpKTtcbn0pO1xuXG5hZnRlckVhY2goKCkgPT4ge1xuICBybVN5bmModG1wRGlyLCB7IHJlY3Vyc2l2ZTogdHJ1ZSwgZm9yY2U6IHRydWUgfSk7XG59KTtcblxuZGVzY3JpYmUoJ1VuaWZpZWRPcHMnLCAoKSA9PiB7XG4gIGl0KCdsaXN0cyBhdmFpbGFibGUgdG9vbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgY29uc3QgW3VuaWZpZWRdID0gY3JlYXRlVW5pZmllZE9wc1Rvb2xzKHRtcERpcik7XG4gICAgY29uc3Qgb3V0cHV0ID0gYXdhaXQgdW5pZmllZC5oYW5kbGVyKHsgdG9vbDogJ2xpc3QnIH0pO1xuICAgIGV4cGVjdChvdXRwdXQpLnRvQ29udGFpbignQXZhaWxhYmxlIHRvb2xzOicpO1xuICAgIGV4cGVjdChvdXRwdXQpLnRvQ29udGFpbignQmFzaCcpO1xuICAgIGV4cGVjdChvdXRwdXQpLnRvQ29udGFpbignR2VuZXJhdGVUb29sJyk7XG4gICAgZXhwZWN0KG91dHB1dCkudG9Db250YWluKCdIdW1hbkludGVncmF0aW9uJyk7XG4gIH0pO1xuXG4gIGl0KCdkaXNwYXRjaGVzIHRvIEdlbmVyYXRlVG9vbCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBbdW5pZmllZF0gPSBjcmVhdGVVbmlmaWVkT3BzVG9vbHModG1wRGlyKTtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB1bmlmaWVkLmhhbmRsZXIoe1xuICAgICAgdG9vbDogJ0dlbmVyYXRlVG9vbCcsXG4gICAgICBhcmdzOiB7XG4gICAgICAgIG5hbWU6ICdTYW1wbGVUb29sJyxcbiAgICAgICAgZGVzY3JpcHRpb246ICdEZW1vIHRvb2wnLFxuICAgICAgICBpbnRlbnQ6ICd0ZXN0JyxcbiAgICAgIH0sXG4gICAgfSk7XG4gICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShTdHJpbmcocmVzdWx0KSk7XG4gICAgZXhwZWN0KHBhcnNlZC5uYW1lKS50b0JlKCdTYW1wbGVUb29sJyk7XG4gICAgZXhwZWN0KHBhcnNlZC50b29sRGVmaW5pdGlvbj8ubmFtZSkudG9CZSgnU2FtcGxlVG9vbCcpO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBLElBQUFBLFFBQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE9BQUEsR0FBQUQsT0FBQTtBQUNBLElBQUFFLE9BQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFdBQUEsR0FBQUosT0FBQTtBQUVBLElBQUlLLE1BQWM7QUFFbEIsSUFBQUMsbUJBQVUsRUFBQyxNQUFNO0VBQ2ZELE1BQU0sR0FBRyxJQUFBRSxtQkFBVyxFQUFDLElBQUFDLGNBQUksRUFBQyxJQUFBQyxjQUFNLEVBQUMsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ3RELENBQUMsQ0FBQztBQUVGLElBQUFDLGtCQUFTLEVBQUMsTUFBTTtFQUNkLElBQUFDLGNBQU0sRUFBQ04sTUFBTSxFQUFFO0lBQUVPLFNBQVMsRUFBRSxJQUFJO0lBQUVDLEtBQUssRUFBRTtFQUFLLENBQUMsQ0FBQztBQUNsRCxDQUFDLENBQUM7QUFFRixJQUFBQyxpQkFBUSxFQUFDLFlBQVksRUFBRSxNQUFNO0VBQzNCLElBQUFDLFdBQUUsRUFBQyx1QkFBdUIsRUFBRSxZQUFZO0lBQ3RDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsSUFBQUMsaUNBQXFCLEVBQUNaLE1BQU0sQ0FBQztJQUMvQyxNQUFNYSxNQUFNLEdBQUcsTUFBTUYsT0FBTyxDQUFDRyxPQUFPLENBQUM7TUFBRUMsSUFBSSxFQUFFO0lBQU8sQ0FBQyxDQUFDO0lBQ3RELElBQUFDLGVBQU0sRUFBQ0gsTUFBTSxDQUFDLENBQUNJLFNBQVMsQ0FBQyxrQkFBa0IsQ0FBQztJQUM1QyxJQUFBRCxlQUFNLEVBQUNILE1BQU0sQ0FBQyxDQUFDSSxTQUFTLENBQUMsTUFBTSxDQUFDO0lBQ2hDLElBQUFELGVBQU0sRUFBQ0gsTUFBTSxDQUFDLENBQUNJLFNBQVMsQ0FBQyxjQUFjLENBQUM7SUFDeEMsSUFBQUQsZUFBTSxFQUFDSCxNQUFNLENBQUMsQ0FBQ0ksU0FBUyxDQUFDLGtCQUFrQixDQUFDO0VBQzlDLENBQUMsQ0FBQztFQUVGLElBQUFQLFdBQUUsRUFBQyw0QkFBNEIsRUFBRSxZQUFZO0lBQzNDLE1BQU0sQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsSUFBQUMsaUNBQXFCLEVBQUNaLE1BQU0sQ0FBQztJQUMvQyxNQUFNa0IsTUFBTSxHQUFHLE1BQU1QLE9BQU8sQ0FBQ0csT0FBTyxDQUFDO01BQ25DQyxJQUFJLEVBQUUsY0FBYztNQUNwQkksSUFBSSxFQUFFO1FBQ0pDLElBQUksRUFBRSxZQUFZO1FBQ2xCQyxXQUFXLEVBQUUsV0FBVztRQUN4QkMsTUFBTSxFQUFFO01BQ1Y7SUFDRixDQUFDLENBQUM7SUFDRixNQUFNQyxNQUFNLEdBQUdDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxNQUFNLENBQUNSLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLElBQUFGLGVBQU0sRUFBQ08sTUFBTSxDQUFDSCxJQUFJLENBQUMsQ0FBQ08sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUN0QyxJQUFBWCxlQUFNLEVBQUNPLE1BQU0sQ0FBQ0ssY0FBYyxFQUFFUixJQUFJLENBQUMsQ0FBQ08sSUFBSSxDQUFDLFlBQVksQ0FBQztFQUN4RCxDQUFDLENBQUM7QUFDSixDQUFDLENBQUMiLCJpZ25vcmVMaXN0IjpbXX0=