{"version":3,"names":["_finalResponseFormatter","require","describe","it","input","output","appended","ensureNextSteps","expect","toBe","toBeNull","startsWith","toContain","toMatch","not"],"sources":["finalResponseFormatter.test.ts"],"sourcesContent":["import { ensureNextSteps } from '../src/core/finalResponseFormatter.ts';\n\ndescribe('ensureNextSteps', () => {\n  it('returns original content when Next steps already present', () => {\n    const input = 'Work done.\\n\\nNext steps:\\n- Ship it';\n    const { output, appended } = ensureNextSteps(input);\n\n    expect(output).toBe(input);\n    expect(appended).toBeNull();\n  });\n\n  it('appends a Next steps block when missing', () => {\n    const input = 'Implemented the feature.';\n    const { output, appended } = ensureNextSteps(input);\n\n    expect(output.startsWith(input)).toBe(true);\n    expect(output).toContain('Next steps:');\n    expect(output).toMatch(/- I can run checks or prep a PR-style summary if needed/i);\n    expect(output).toMatch(/- Tell me if you want more changes or tests/i);\n    expect(appended).not.toBeNull();\n  });\n\n  it('handles empty content gracefully', () => {\n    const { output, appended } = ensureNextSteps('');\n    expect(output).toBe('');\n    expect(appended).toBeNull();\n  });\n});\n"],"mappings":";;AAAA,IAAAA,uBAAA,GAAAC,OAAA;AAEAC,QAAQ,CAAC,iBAAiB,EAAE,MAAM;EAChCC,EAAE,CAAC,0DAA0D,EAAE,MAAM;IACnE,MAAMC,KAAK,GAAG,sCAAsC;IACpD,MAAM;MAAEC,MAAM;MAAEC;IAAS,CAAC,GAAG,IAAAC,uCAAe,EAACH,KAAK,CAAC;IAEnDI,MAAM,CAACH,MAAM,CAAC,CAACI,IAAI,CAACL,KAAK,CAAC;IAC1BI,MAAM,CAACF,QAAQ,CAAC,CAACI,QAAQ,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEFP,EAAE,CAAC,yCAAyC,EAAE,MAAM;IAClD,MAAMC,KAAK,GAAG,0BAA0B;IACxC,MAAM;MAAEC,MAAM;MAAEC;IAAS,CAAC,GAAG,IAAAC,uCAAe,EAACH,KAAK,CAAC;IAEnDI,MAAM,CAACH,MAAM,CAACM,UAAU,CAACP,KAAK,CAAC,CAAC,CAACK,IAAI,CAAC,IAAI,CAAC;IAC3CD,MAAM,CAACH,MAAM,CAAC,CAACO,SAAS,CAAC,aAAa,CAAC;IACvCJ,MAAM,CAACH,MAAM,CAAC,CAACQ,OAAO,CAAC,0DAA0D,CAAC;IAClFL,MAAM,CAACH,MAAM,CAAC,CAACQ,OAAO,CAAC,8CAA8C,CAAC;IACtEL,MAAM,CAACF,QAAQ,CAAC,CAACQ,GAAG,CAACJ,QAAQ,CAAC,CAAC;EACjC,CAAC,CAAC;EAEFP,EAAE,CAAC,kCAAkC,EAAE,MAAM;IAC3C,MAAM;MAAEE,MAAM;MAAEC;IAAS,CAAC,GAAG,IAAAC,uCAAe,EAAC,EAAE,CAAC;IAChDC,MAAM,CAACH,MAAM,CAAC,CAACI,IAAI,CAAC,EAAE,CAAC;IACvBD,MAAM,CAACF,QAAQ,CAAC,CAACI,QAAQ,CAAC,CAAC;EAC7B,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}