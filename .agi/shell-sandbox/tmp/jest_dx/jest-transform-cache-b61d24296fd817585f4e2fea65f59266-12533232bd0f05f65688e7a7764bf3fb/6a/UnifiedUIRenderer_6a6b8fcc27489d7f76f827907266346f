c26c4ee74199d55cb0a01ff2859aa20a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _uiConstants = require("./uiConstants.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

/**
 * Attack operation status for real-time display during offensive security operations.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences and special formatting from text to get clean plaintext */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    let sanitized = text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
    // Also remove partial bracketed paste markers that may have leaked (e.g., "[200~" without ESC)
    sanitized = sanitized.replace(/\[20[01]~/g, '');
    // Remove any stray escape character at start/end
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/^\x1b+|\x1b+$/g, '');

    // Strip special formatting characters for clean plaintext:
    // - Zero-width characters (ZWSP, ZWNJ, ZWJ, BOM/ZWNBSP)
    // - Word joiner, invisible separator, invisible times/plus
    // - Directional formatting (LRM, RLM, LRE, RLE, LRO, RLO, PDF, LRI, RLI, FSI, PDI)
    // - Object replacement character
    // - Soft hyphen
    // - Non-breaking space variants (NBSP, narrow NBSP, figure space, etc.)
    sanitized = sanitized.replace(/[\u200B-\u200F\u2028-\u202F\u2060-\u206F\uFEFF\u00AD\uFFFC]/g, '');

    // Normalize various space characters to regular space
    // Includes: NBSP, en/em space, thin space, hair space, figure space, etc.
    sanitized = sanitized.replace(/[\u00A0\u2000-\u200A\u202F\u205F\u3000]/g, ' ');

    // Remove control characters except tab, newline, carriage return
    // eslint-disable-next-line no-control-regex
    sanitized = sanitized.replace(/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F]/g, '');
    return sanitized;
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }

    // Reset input and paste state to prevent stale state from previous session
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.collapsedPaste = null;
    this.pendingInsertBuffer = '';
    this.cancelPlainPasteCapture();
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      // Consume and sanitize pending buffer to prevent partial escape sequences leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      // Extract content after the start marker (discard any content before it - likely partial escapes)
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume and sanitize any pending insert buffer to prevent partial escapes leaking
      const pending = this.sanitizePasteContent(this.consumePendingInsertForPaste());
      this.pasteBuffer = pending;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }

    // Don't treat escape sequences (arrow keys, etc.) as paste
    // Escape sequences start with \x1b (ESC) and are used for cursor movement, etc.
    if (typeof str === 'string' && str.startsWith('\x1b')) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Sanitize input to remove special formatting characters
    const sanitized = this.sanitizePasteContent(text);
    if (!sanitized) return;
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + sanitized + this.buffer.slice(this.cursor);
    this.cursor += sanitized.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // Note: For prompt events, the overlay is already rendered in renderEvent()
        // via renderPromptOverlay(true). No need to render again here.
        if (event.type === 'prompt') {
          // Ensure prompt rendering is allowed for subsequent events
          if (this.output.isTTY) {
            this.allowPromptRender = true;
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    if (this.plainMode) {
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        {
          // Streaming content is the model's response - pass through directly
          // IMPORTANT: Don't filter streaming chunks with isGarbageOutput because:
          // 1. Chunks arrive character-by-character or in small pieces
          // 2. Small chunks like "." or ":" are valid parts of sentences
          // 3. Filtering would break the streaming display
          // Only filter completely empty content
          if (!event.content) {
            return '';
          }
          return event.content;
        }
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;
    const trimmed = content.trim();

    // Very short content checks - catch leaked punctuation fragments like "." or ":"
    if (trimmed.length <= 3) {
      // Single punctuation marks or very short punctuation sequences are garbage
      if (/^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$]+$/.test(trimmed)) {
        return true;
      }
    }

    // Check if content is just punctuation on multiple lines (leaked reasoning)
    const lines = content.split('\n');
    const punctOnlyLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      return lineTrimmed.length > 0 && /^[.,:;!?*#\-_=+|\\/<>(){}[\]`'"~^@&%$\s]+$/.test(lineTrimmed);
    });
    // If ALL non-empty lines are just punctuation, it's garbage
    const nonEmptyLines = lines.filter(l => l.trim().length > 0);
    if (nonEmptyLines.length > 0 && punctOnlyLines.length === nonEmptyLines.length) {
      return true;
    }

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: mostly punctuation/symbols - leaked reasoning fragments
    const meaningfulLines = lines.filter(line => {
      const lineTrimmed = line.trim();
      if (!lineTrimmed) return false;
      // Line must have at least 30% alphanumeric content
      const alphaNum = (lineTrimmed.match(/[a-zA-Z0-9]/g) || []).length;
      return lineTrimmed.length > 0 && alphaNum / lineTrimmed.length >= 0.3;
    });
    // If less than 30% of lines are meaningful, it's garbage
    if (lines.length > 3 && meaningfulLines.length / lines.length < 0.3) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.4) {
      return true; // Less than 40% letters = likely garbage
    }
    return false;
  }

  /**
   * Sanitize tool result content to remove leaked reasoning/thinking output.
   * This filters out fragments that look like internal model output.
   */
  sanitizeToolResultContent(content) {
    if (!content) return '';

    // Split into lines and filter out garbage lines
    const lines = content.split('\n');
    const cleanLines = [];
    for (const line of lines) {
      const trimmed = line.trim();

      // Skip empty lines at start
      if (cleanLines.length === 0 && !trimmed) continue;

      // Skip lines that look like leaked reasoning fragments
      // Common patterns: single punctuation, markdown artifacts, emoji fragments
      if (/^[)\]}>*`'"]+$/.test(trimmed)) continue;
      if (/^[*_]{2,}$/.test(trimmed)) continue; // Just ** or __
      if (/^[|│┃]+$/.test(trimmed)) continue; // Just vertical bars
      if (/^[─━═]+$/.test(trimmed)) continue; // Just horizontal lines
      if (/^\.{2,}$/.test(trimmed)) continue; // Just dots
      if (/^[\s️]+$/.test(trimmed)) continue; // Just whitespace/emoji modifiers
      if (/^[:\s]+$/.test(trimmed)) continue; // Just colons/whitespace
      if (/^[,\s]+$/.test(trimmed)) continue; // Just commas/whitespace

      // Skip markdown bold/italic fragments that leaked
      if (/^\*{1,2}[^*]*\*{0,2}$/.test(trimmed) && trimmed.length < 10 && !/\w{3,}/.test(trimmed)) continue;

      // Skip lines that are just short fragments with high punctuation ratio
      const alphaInLine = (trimmed.match(/[a-zA-Z0-9]/g) || []).length;
      if (trimmed.length > 0 && trimmed.length < 20 && alphaInLine / trimmed.length < 0.3) continue;

      // Skip very short lines that are just punctuation or single chars (except numbers)
      if (trimmed.length <= 2 && !/^\d+$/.test(trimmed) && !/^[a-zA-Z]{2}$/.test(trimmed)) {
        // Allow specific short patterns like "OK", "0", "1" etc.
        if (!/^(?:ok|no|yes|\d+)$/i.test(trimmed)) continue;
      }

      // Skip lines that look like stray parentheses or brackets from reasoning
      if (/^[()[\]{}]+$/.test(trimmed)) continue;

      // Skip lines that look like markdown code fence artifacts
      if (/^```\s*$/.test(trimmed)) continue;
      cleanLines.push(line);
    }

    // Trim trailing empty lines
    while (cleanLines.length > 0 && !cleanLines[cleanLines.length - 1]?.trim()) {
      cleanLines.pop();
    }
    return cleanLines.join('\n').trim();
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.toolColors.default(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.toolColors.default(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "⏺ [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // Get tool-specific color (bash=orange, read=cyan, write=green, etc.)
    const toolColor = (0, _theme.getToolColor)(toolName);
    const coloredToolName = toolColor(`[${toolName}]`);

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${coloredToolName}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${coloredToolName} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParamsColored(toolName, params, maxWidth, toolColor);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping (default green color)
   */
  formatToolParams(toolName, params, maxWidth) {
    return this.formatToolParamsColored(toolName, params, maxWidth, _theme.theme.toolColors.default);
  }

  /**
   * Format tool params with custom tool color
   */
  formatToolParamsColored(toolName, params, maxWidth, toolColor) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${toolColor(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.toolColors.default(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Sanitize content first - filter out garbage/reasoning output that leaked through
    const sanitized = this.sanitizeToolResultContent(content);
    if (!sanitized || this.isGarbageOutput(sanitized)) {
      return ''; // Don't render garbage tool results
    }

    // Parse common result patterns for summary
    const lineMatch = sanitized.match(/(\d+)\s*lines?/i);
    const fileMatch = sanitized.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = sanitized.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(sanitized);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(sanitized);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(sanitized);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (sanitized.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = sanitized.split('\n')[0] || sanitized;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Extract meaningful summary from content
      let summaryText = sanitized;

      // Handle "Summary:" prefix from web search/extract results
      const summaryMatch = sanitized.match(/^Summary:\s*(.+)/i);
      if (summaryMatch) {
        summaryText = summaryMatch[1];
      }

      // For multi-line content, use first meaningful line
      const firstLine = summaryText.split('\n')[0]?.trim() || summaryText;

      // Try to end at a sentence boundary for readability (up to 120 chars)
      const maxLen = 120;
      if (firstLine.length > maxLen) {
        // Look for sentence end within limit
        const sentenceEnd = firstLine.slice(0, maxLen).search(/[.!?;]\s|[.!?;]$/);
        if (sentenceEnd > 30) {
          summary = firstLine.slice(0, sentenceEnd + 1);
        } else {
          // No good sentence break, truncate at word boundary
          const truncated = firstLine.slice(0, maxLen);
          const lastSpace = truncated.lastIndexOf(' ');
          summary = lastSpace > 60 ? truncated.slice(0, lastSpace) + '…' : truncated + '…';
        }
      } else {
        summary = firstLine;
      }
    }

    // Store collapsed result for Ctrl+O expansion (use sanitized content)
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content: sanitized,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = sanitized.includes('\n') || summary.endsWith('…') || !preserveFull && sanitized.length > summary.length;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.secondary ?? _theme.theme.ui.muted // Purple for thinking (distinct from blue tools)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Determine if this is structured output that shouldn't be word-wrapped
    const isStructured = this.isStructuredToolOutput(toolName, content);
    let rendered;
    if (isStructured) {
      // Preserve structured output (grep, bash, code output) - just indent, don't wrap
      rendered = this.formatStructuredToolOutput(toolName, content);
    } else {
      // Format prose/text with tool name label and word wrapping
      const label = `${toolName}`;
      rendered = this.wrapBulletText(content, {
        label,
        labelColor: _theme.theme.info
      });
    }
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Check if tool output is structured (code, grep, file listings) that shouldn't be word-wrapped.
   */
  isStructuredToolOutput(toolName, content) {
    const tool = toolName.toLowerCase();
    // Tools that produce structured output
    if (['bash', 'grep', 'read', 'glob', 'execute_bash', 'search', 'find'].includes(tool)) {
      return true;
    }
    // Content patterns that indicate structured output
    // - File paths with colons (grep output): src/file.ts:123:
    // - Line numbers: "   1→" or "  42:"
    // - Code-like patterns
    if (/^\s*[\w./]+:\d+[:\s]/.test(content)) return true; // grep-style output
    if (/^\s*\d+[→:│|]\s/.test(content)) return true; // line-numbered output
    if (/^[│├└─┌┐┘┬┴┼╭╮╯╰]+/.test(content)) return true; // box drawing
    if (/^\s*[$>]\s+\w+/.test(content)) return true; // command prompt output
    return false;
  }

  /**
   * Format structured tool output preserving line structure.
   */
  formatStructuredToolOutput(toolName, content) {
    const lines = content.split('\n');
    const header = `⏺ ${_theme.theme.info(toolName)}${_theme.theme.ui.muted(' · expanded')}\n`;
    const indent = '  ';
    const maxWidth = this.safeWidth() - 4;
    const formattedLines = lines.map(line => {
      // Truncate overly long lines instead of wrapping (preserves structure)
      if (line.length > maxWidth) {
        return indent + line.slice(0, maxWidth - 1) + '…';
      }
      return indent + line;
    });
    return header + formattedLines.join('\n') + '\n';
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 120); // ~8 FPS - reduced from 80ms to minimize flickering while keeping animation smooth
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Batch all ANSI operations into a single write to prevent flickering
    // This eliminates the visual jitter caused by multiple sequential terminal writes
    const buffer = [];

    // Hide cursor during render to prevent visual artifacts
    buffer.push('\x1b[?25l');

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        buffer.push(`\x1b[${linesToTop}A`);
      }

      // Clear exactly the old overlay lines, then erase to end of screen
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        buffer.push('\r');
        buffer.push(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          buffer.push('\x1b[B');
        }
      }

      // Clear anything below the old overlay (handles edge cases)
      buffer.push('\x1b[J');

      // After clearing, cursor is at last cleared line
      // Move back up to the top where new overlay should start
      const moveBackUp = this.lastOverlayHeight - 1;
      if (moveBackUp > 0) {
        buffer.push(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      buffer.push('\r');
      buffer.push(ESC.CLEAR_LINE);
      buffer.push(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        buffer.push('\n');
      }
    }

    // If old overlay was taller, clear any remaining stale lines below
    // and use CSI J (erase from cursor to end of screen) to clean up
    if (this.lastOverlayHeight > height) {
      buffer.push('\n'); // Move to line below last content
      buffer.push('\x1b[J'); // Clear from cursor to end of screen
      buffer.push('\x1b[A'); // Move back up to last content line
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      buffer.push(`\x1b[${linesToMoveUp}A`);
    }
    buffer.push(`\x1b[${promptCol}G`);

    // Show cursor again after positioning
    buffer.push('\x1b[?25h');

    // Single atomic write to prevent flickering
    this.write(buffer.join(''));
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    // Filter out empty lines to prevent duplicate divider appearance from leading/trailing newlines
    const inputLines = inputLine.split('\n').filter((line, idx, arr) => {
      // Keep non-empty lines, but preserve single empty line if it's intentional (e.g., between content)
      // Only filter leading/trailing empty lines
      if (line.trim() === '') {
        // Filter if it's the first line (leading empty) or last line (trailing empty)
        if (idx === 0 || idx === arr.length - 1) return false;
      }
      return true;
    });
    // Ensure at least one line for the prompt
    if (inputLines.length === 0) {
      inputLines.push(_theme.theme.primary('> '));
    }
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('🏆') : leader === 'refiner' ? _theme.theme.warning('🏆') : '⚖️';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` 🔥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('█'.repeat(pBars)) + _theme.theme.ui.muted('░'.repeat(tBars)) + _theme.theme.warning('█'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('⚡P')} ${_theme.theme.ui.muted('∥')} ${_theme.theme.warning('⚡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? '▶' : '▷';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('✓P') : _theme.theme.warning('✓R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('≈'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }

    // Human accuracy indicator (relative ranking quality)
    if (rl.accuracy && (typeof rl.accuracy.primary === 'number' || typeof rl.accuracy.refiner === 'number')) {
      const pAcc = rl.accuracy.primary !== undefined ? Math.round(rl.accuracy.primary * 100) : null;
      const rAcc = rl.accuracy.refiner !== undefined ? Math.round(rl.accuracy.refiner * 100) : null;
      const pDisplay = pAcc !== null ? _theme.theme.info(`P${pAcc}%`) : null;
      const rDisplay = rAcc !== null ? _theme.theme.warning(`R${rAcc}%`) : null;
      const parts = [pDisplay, rDisplay].filter(Boolean).join(_theme.theme.ui.muted('|'));
      if (parts) {
        segments.push(parts);
      }
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately (Enter).
   * Used when user wants to send the pasted content as-is.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;

    // Prevent duplicate prompt display within 1.5 seconds
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl91aUNvbnN0YW50cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkVG9vbFJlc3VsdHMiLCJtYXhDb2xsYXBzZWRSZXN1bHRzIiwibGFzdFRvb2xOYW1lIiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJlbGFwc2VkQ29sb3JGcmFtZSIsImVsYXBzZWRDb2xvckZyYW1lcyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJybFN0YXR1cyIsImNsYW1wQ3Vyc29yIiwiTWF0aCIsIm1heCIsIm1pbiIsImxlbmd0aCIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJ0ZXh0IiwicGFzdGVCdWZmZXJPdmVyZmxvdyIsImN1cnJlbnQiLCJwYXN0ZUJ1ZmZlciIsInBsYWluUGFzdGVCdWZmZXIiLCJyZW1haW5pbmciLCJtYXhQYXN0ZUJ1ZmZlclNpemUiLCJ0b0FkZCIsInNsaWNlIiwic2FuaXRpemVQYXN0ZUNvbnRlbnQiLCJzYW5pdGl6ZWQiLCJyZXBsYWNlIiwiZm9ybWF0SG90a2V5IiwiY29tYm8iLCJ0cmltIiwidG9VcHBlckNhc2UiLCJsYXN0UHJvbXB0RXZlbnQiLCJwcm9tcHRIZWlnaHQiLCJsYXN0T3ZlcmxheUhlaWdodCIsImlubGluZVBhbmVsIiwiaGFzQ29udmVyc2F0aW9uQ29udGVudCIsImlzUHJvbXB0QWN0aXZlIiwiaW5wdXRSZW5kZXJPZmZzZXQiLCJwbGFpblBhc3RlSWRsZU1zIiwicGxhaW5QYXN0ZVdpbmRvd01zIiwicGxhaW5QYXN0ZVRyaWdnZXJDaGFycyIsInBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyIsImN1cnNvclZpc2libGVDb2x1bW4iLCJpbkJyYWNrZXRlZFBhc3RlIiwiaW5QbGFpblBhc3RlIiwicGxhaW5QYXN0ZVRpbWVyIiwicGFzdGVCdXJzdFdpbmRvd1N0YXJ0IiwicGFzdGVCdXJzdENoYXJDb3VudCIsInBsYWluUmVjZW50Q2h1bmtzIiwicGVuZGluZ0luc2VydEJ1ZmZlciIsInBlbmRpbmdJbnNlcnRUaW1lciIsInBlbmRpbmdJbnNlcnREZWxheU1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwiYWxsb3dQcm9tcHRSZW5kZXIiLCJwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQiLCJzZWNyZXRNb2RlIiwicGVuZGluZ1JlbmRlciIsImxhc3RSZW5kZXJUaW1lIiwicmVuZGVyVGhyb3R0bGVNcyIsInJlbmRlclRocm90dGxlVGltZXIiLCJkaXNwb3NlZCIsImJvdW5kUmVzaXplSGFuZGxlciIsImJvdW5kS2V5cHJlc3NIYW5kbGVyIiwiaW5wdXRDYXB0dXJlIiwiY29uc3RydWN0b3IiLCJvdXRwdXQiLCJwcm9jZXNzIiwic3Rkb3V0IiwiaW5wdXQiLCJzdGRpbiIsIl9vcHRpb25zIiwiaW50ZXJhY3RpdmUiLCJCb29sZWFuIiwiaXNUVFkiLCJlbnYiLCJwbGFpbk1vZGUiLCJpc1BsYWluT3V0cHV0TW9kZSIsImNvbnRleHRNZXRlciIsIkNvbnRleHRNZXRlciIsInJsIiwiY3JlYXRlSW50ZXJmYWNlIiwidGVybWluYWwiLCJwcm9tcHQiLCJ0YWJTaXplIiwic2V0UHJvbXB0IiwidXBkYXRlVGVybWluYWxTaXplIiwicmVuZGVyUHJvbXB0Iiwib24iLCJzZXR1cElucHV0SGFuZGxlcnMiLCJpbml0aWFsaXplIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiZGlzcG9zZSIsImRpc3Bvc2VBbmltYXRpb25zIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJjbG9zZSIsInNldFJhd01vZGUiLCJzdXNwZW5kUHJvbXB0UmVuZGVyaW5nIiwicmVzdW1lUHJvbXB0UmVuZGVyaW5nIiwicmVuZGVyIiwiZW1pdEtleXByZXNzRXZlbnRzIiwic3RyIiwia2V5IiwiaGFuZGxlS2V5cHJlc3MiLCJlbWl0SW5wdXRDaGFuZ2UiLCJwYXlsb2FkIiwiZW1pdCIsIm5vcm1hbGl6ZWRLZXkiLCJwYXJzZUVzY2FwZVNlcXVlbmNlIiwia2V5Rm9yUGFzdGUiLCJzZXF1ZW5jZSIsImhhbmRsZUJyYWNrZXRlZFBhc3RlIiwiaGFuZGxlUGxhaW5QYXN0ZSIsIm1hY09wdGlvbkNoYXJzIiwibGV0dGVyIiwiY3RybCIsIm5hbWUiLCJjbGVhckJ1ZmZlciIsImlzQ3RybFNoaWZ0IiwibG93ZXJMZXR0ZXIiLCJ0b0xvd2VyQ2FzZSIsInVwcGVyTGV0dGVyIiwic2hpZnQiLCJtZXRhIiwic2VxIiwidGVzdCIsImhhbmRsZUN0cmxTaGlmdFRvZ2dsZSIsImhhZEJ1ZmZlciIsImV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIiLCJjbGVhckNvbGxhcHNlZFJlc3VsdHMiLCJlbnN1cmVDdXJzb3JWaXNpYmxlIiwicG9zIiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZSIsImFwcGx5U3VnZ2VzdGlvbiIsInN0YXJ0c1dpdGgiLCJzYWZlSW5kZXgiLCJjb21tYW5kIiwic3VibWl0VGV4dCIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBhc3RlU3RhcnRNYXJrZXIiLCJwYXN0ZUVuZE1hcmtlciIsImluY2x1ZGVzIiwicGVuZGluZyIsInN0YXJ0SWR4IiwiaW5kZXhPZiIsImNvbnRlbnQiLCJlbmRJZHgiLCJjb21taXRQYXN0ZUJ1ZmZlciIsImNvbnRlbnRCZWZvcmUiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJzaG91bGRUcmltIiwib3B0aW9ucyIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsInJlc29sdmUiLCJub3JtYWxpemVkIiwiZGlzcGxheVVzZXJQcm9tcHQiLCJmaXJzdFNwYWNlIiwiaGFzQXJnVGV4dCIsImN1cnNvclNsaWNlIiwiY29tbWFuZFNsaWNlIiwiZmFsbGJhY2tTbGljZSIsInBhcnRpYWwiLCJ0cmltRW5kIiwicHJldmlvdXMiLCJjbWQiLCJpZHgiLCJmaW5kSW5kZXgiLCJzIiwic2V0QXZhaWxhYmxlQ29tbWFuZHMiLCJjb21tYW5kcyIsInN1Ym1pdCIsInNlbGVjdGVkIiwiZGlyZWN0aW9uIiwiY3VycmVudEluZGV4IiwibmV4dCIsImNsYW1wZWQiLCJhZGRFdmVudCIsInR5cGUiLCJub3JtYWxpemVFdmVudFR5cGUiLCJmb3JtYXR0ZWQiLCJmb3JtYXRDb250ZW50IiwicmF3VHlwZSIsInRpbWVzdGFtcCIsImV2ZW50IiwiaW5zZXJ0SW5kZXgiLCJzcGxpY2UiLCJxdWV1ZU1pY3JvdGFzayIsInByb2Nlc3NRdWV1ZSIsInJlbmRlclByb21wdE92ZXJsYXkiLCJpbW1lZGlhdGUiLCJyZW5kZXJQcm9tcHRJbW1lZGlhdGUiLCJjb2FsZXNjZWQiLCJjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyIsInJlbmRlckV2ZW50IiwiZXJyb3IiLCJtZXNzYWdlIiwiZGVsYXkiLCJpc01lcmdlYWJsZSIsInRhcmdldCIsImlzQ29tcGFjdGVkIiwibmVlZHNTZXBhcmF0b3IiLCJmbHVzaEV2ZW50cyIsInRpbWVvdXRNcyIsInN0YXJ0IiwiZm9ybWF0dGVkUGxhaW4iLCJzaWduYXR1cmUiLCJsaW5lIiwidGhlbWUiLCJwcmltYXJ5IiwiaXNHYXJiYWdlT3V0cHV0IiwiY3VyYXRlZCIsImN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQiLCJzaG91bGRSZW5kZXJUaG91Z2h0IiwiZm9ybWF0VGhpbmtpbmdCbG9jayIsImZvcm1hdENvbXBhY3RUb29sQ2FsbCIsImZvcm1hdENvbXBhY3RUb29sUmVzdWx0Iiwid3JhcEJ1bGxldFRleHQiLCJsYWJlbCIsImxhYmVsQ29sb3IiLCJ3YXJuaW5nIiwiaW5mbyIsImlzRXJyb3IiLCJ1bmRlZmluZWQiLCJ0cmltbWVkIiwicHVuY3RPbmx5TGluZXMiLCJsaW5lVHJpbW1lZCIsIm5vbkVtcHR5TGluZXMiLCJsIiwibWVhbmluZ2Z1bExpbmVzIiwiYWxwaGFOdW0iLCJtYXRjaCIsImFscGhhQ291bnQiLCJ0b3RhbENvdW50Iiwic2FuaXRpemVUb29sUmVzdWx0Q29udGVudCIsImNsZWFuTGluZXMiLCJhbHBoYUluTGluZSIsInBvcCIsImxpbWl0ZWQiLCJtYXhTZWdtZW50cyIsInNlZ21lbnRzIiwiZmxhdE1hcCIsInNlZW4iLCJkZWR1cGVkIiwic2VnbWVudCIsIm5vcm1hbGl6ZWRTZWdtZW50IiwiYWRkIiwicHJpb3JpdGl6ZWQiLCJwcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMiLCJsaW1pdGVkU2VsZWN0aW9uIiwiYnVsbGV0ZWQiLCJlbnN1cmVSZWFzb25pbmdCdWxsZXQiLCJsb29rc1N0cnVjdHVyZWRUaG91Z2h0Iiwic2NvcmVkIiwiaW5kZXgiLCJzY29yZSIsInJlYXNvbmluZ1NpZ25hbFNjb3JlIiwiaGFzU2lnbmFsIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImxvd2VyIiwiYWN0aW9uS2V5d29yZHMiLCJrZXl3b3JkIiwiZm9ybWF0Q2xhdWRlQ29kZUJsb2NrIiwiYnVsbGV0IiwicmVzdWx0IiwibGluZUlkeCIsIndvcmRzIiwiY3VycmVudExpbmUiLCJ3b3JkIiwicHJlZml4IiwidHJpbVN0YXJ0IiwiZm9ybWF0VG9vbENhbGwiLCJuYW1lTWF0Y2giLCJ0b29sQ29sb3JzIiwidG9vbE5hbWUiLCJhcmdzU3RyIiwicHJlZml4TGVuIiwiaW5kZW50IiwicmVwZWF0IiwiYXJncyIsInBhcnNlVG9vbEFyZ3MiLCJhcmciLCJhcmdUZXh0IiwidWkiLCJtdXRlZCIsImZvcm1hdEFyZ1ZhbHVlIiwidmFsdWUiLCJzZXBhcmF0b3IiLCJ0ZXN0TGluZSIsInN0cmlwQW5zaSIsInJlZ2V4IiwiZXhlYyIsImlzUXVvdGVkIiwiaW5uZXIiLCJsb3dlcktleSIsInNob3VsZFByZXNlcnZlIiwibWF4TGVuIiwidHJ1bmNhdGVkIiwiZm9ybWF0VG9vbFJlc3VsdCIsInN1bW1hcnlNYXRjaCIsInByZXZpZXciLCJ0b29sQ29sb3IiLCJnZXRUb29sQ29sb3IiLCJjb2xvcmVkVG9vbE5hbWUiLCJwYXJhbXMiLCJwYXJzZVRvb2xQYXJhbXMiLCJmb3JtYXRUb29sUGFyYW1zQ29sb3JlZCIsImZvcm1hdFRvb2xQYXJhbXMiLCJmaXJzdFBhcmFtIiwicGFyYW0iLCJjb2xvcmVkVmFsdWUiLCJjb2xvclBhcmFtVmFsdWUiLCJwYXJhbVRleHQiLCJwYXJhbVN0ciIsInBsYWluTGVuZ3RoIiwidmlzaWJsZUxlbmd0aCIsImV4dHJhY3RUb29sU3VtbWFyeSIsInRvb2wiLCJwYXRoTWF0Y2giLCJwYXRoIiwiZmlsZSIsImNtZE1hdGNoIiwibGluZU1hdGNoIiwiZmlsZU1hdGNoIiwicmVhZE1hdGNoIiwiaGFzUGF0aCIsImhhc0NvbW1hbmQiLCJpc1BhdGhPckRpciIsInN1bW1hcnkiLCJwcmVzZXJ2ZUZ1bGwiLCJmaXJzdExpbmUiLCJzdW1tYXJ5VGV4dCIsInNlbnRlbmNlRW5kIiwic2VhcmNoIiwibGFzdFNwYWNlIiwibGFzdEluZGV4T2YiLCJjb2xvcmVkU3VtbWFyeSIsImNvbG9yUmVzdWx0U3VtbWFyeSIsImhhc01vcmVDb250ZW50IiwiZXhwYW5kSGludCIsInN1Y2Nlc3MiLCJmb3JtYXRDb21wYWN0UmVzcG9uc2UiLCJjbGVhbmVkIiwiYXZhaWxhYmxlV2lkdGgiLCJsYWJlbFRleHQiLCJidWxsZXRQcmVmaXgiLCJmaXJzdE5vbkVtcHR5IiwicmF3TGluZSIsImNhbmRpZGF0ZSIsInByZWZpeExlbmd0aCIsInNlY29uZGFyeSIsIndyYXBUZXh0VG9XaWR0aCIsIndpZHRoIiwiZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCIsImVsYXBzZWQiLCJmbG9vciIsIm1pbnMiLCJzZWNzIiwiZm9ybWF0Q29tcGFjdEJsb2NrIiwicGFkZGluZyIsImxlZnRQYWQiLCJyaWdodFBhZCIsImNlaWwiLCJhZGRDb21wYWN0QmxvY2siLCJmb3JtYXR0ZWRDb250ZW50IiwiZXhwYW5kTGFzdFRvb2xSZXN1bHQiLCJjb2xsYXBzZWQiLCJpc1N0cnVjdHVyZWQiLCJpc1N0cnVjdHVyZWRUb29sT3V0cHV0IiwicmVuZGVyZWQiLCJmb3JtYXRTdHJ1Y3R1cmVkVG9vbE91dHB1dCIsImhlYWRlciIsImZvcm1hdHRlZExpbmVzIiwiZ2V0Q29sbGFwc2VkUmVzdWx0Q291bnQiLCJzZXRNb2RlIiwid2FzU3RyZWFtaW5nIiwic3RhcnRTcGlubmVyQW5pbWF0aW9uIiwic3RvcFNwaW5uZXJBbmltYXRpb24iLCJzZXRJbnRlcnZhbCIsInNwaW5uZXJGcmFtZXMiLCJicmFpbGxlIiwic2V0QWN0aXZpdHkiLCJ1cGRhdGVTdHJlYW1pbmdUb2tlbnMiLCJ0b2tlbnMiLCJmb3JtYXRUb2tlbkNvdW50IiwiU3RyaW5nIiwidG9GaXhlZCIsInJvdW5kIiwiZ2V0TW9kZSIsInVwZGF0ZVN0YXR1cyIsInVwZGF0ZVN0YXR1c0J1bmRsZSIsIm1haW4iLCJvdmVycmlkZSIsInN0cmVhbWluZyIsInN0YXR1cyIsInByZXZTdHJlYW1pbmciLCJjaGFuZ2VkIiwibWFpbkNoYW5nZWQiLCJvdmVycmlkZUNoYW5nZWQiLCJzdHJlYW1pbmdDaGFuZ2VkIiwic3RyZWFtaW5nSW50cm9kdWNlIiwic3RyZWFtaW5nQ2xlYXJlZCIsIm9ubHlTdHJlYW1pbmdDaGFuZ2VkIiwic2tpcFN0cmVhbWluZ1JlbmRlciIsInNob3VsZFJlbmRlciIsInVwZGF0ZVN0YXR1c01ldGEiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlTW9kZVRvZ2dsZXMiLCJzdGF0ZSIsInZlcmlmaWNhdGlvbkhvdGtleSIsInRoaW5raW5nSG90a2V5IiwiY3JpdGljYWxBcHByb3ZhbEhvdGtleSIsImF1dG9Db250aW51ZUhvdGtleSIsImR1YWxSbEhvdGtleSIsImRlYnVnSG90a2V5IiwiY2xlYXIiLCJ1cGRhdGVSTFN0YXR1cyIsImNsZWFyUkxTdGF0dXMiLCJnZXRSTFN0YXR1cyIsInNldElubGluZVBhbmVsIiwiaGFzQ29udGVudCIsImxpbWl0SW5saW5lUGFuZWwiLCJzdXBwb3J0c0lubGluZVBhbmVsIiwiY2xlYXJJbmxpbmVQYW5lbCIsIm1heExpbmVzIiwib3ZlcmZsb3ciLCJpbmRpY2F0b3IiLCJ0YWlsQ291bnQiLCJ0YWlsIiwib3ZlcmxheSIsImJ1aWxkT3ZlcmxheUxpbmVzIiwicmVuZGVyZWRMaW5lcyIsInRydW5jYXRlTGluZSIsInByb21wdEluZGV4IiwiaGVpZ2h0IiwibGluZXNUb1RvcCIsIm1vdmVCYWNrVXAiLCJwcm9tcHRDb2wiLCJsaW5lc1RvTW92ZVVwIiwiZGl2aWRlciIsImZhbGxiYWNrQWN0aXZpdHkiLCJyYXciLCJzcGlubmVyQ2hhcnMiLCJzcGlubmVyQ2hhciIsInN0YXJDaGFyIiwic3Bpbm5lckRlY29yYXRlZCIsImFjY2VudCIsImdlbmVyaWNBY3Rpdml0aWVzIiwiZGlzcGxheUFjdGl2aXR5IiwibmVlZHNFbGxpcHNpcyIsImVsYXBzZWRDb2xvciIsImNoYWxrIiwiaGV4IiwicGFydHMiLCJhY3Rpdml0eVRleHQiLCJhY3Rpdml0eUxpbmUiLCJ3cmFwcGVkIiwid3JhcE92ZXJsYXlMaW5lIiwiaW5wdXRMaW5lIiwiYnVpbGRJbnB1dExpbmUiLCJpbnB1dExpbmVzIiwiYXJyIiwicGFuZWxMaW5lIiwic3VnZ2VzdGlvbiIsImlzQWN0aXZlIiwibWFya2VyIiwiY21kVGV4dCIsImRlc2NUZXh0IiwiZGVzY3JpcHRpb24iLCJtb2RlbENvbnRleHRMaW5lIiwiYnVpbGRNb2RlbENvbnRleHRMaW5lIiwiY2hyb21lTGluZXMiLCJidWlsZENocm9tZUxpbmVzIiwiY2hyb21lTGluZSIsInRvZ2dsZUxpbmVzIiwiYnVpbGRJbmxpbmVUb2dnbGVMaW5lIiwidG9nZ2xlTGluZSIsImxlZ2VuZExpbmVzIiwiYnVpbGRUb2dnbGVMZWdlbmQiLCJsZWdlbmQiLCJtb2RlbCIsInByb3ZpZGVyIiwiY29udGV4dFBlcmNlbnQiLCJ1c2VkIiwiY2xhbXBQZXJjZW50YWdlIiwiYmFyV2lkdGgiLCJmaWxsZWQiLCJlbXB0eSIsImJhckNvbG9yIiwiZ2V0Q29udGV4dENvbG9yIiwiYmFyIiwiYXV0b0NvbnRpbnVlQWN0aXZlIiwidmVyaWZpY2F0aW9uQWN0aXZlIiwiYXBwcm92YWxNb2RlIiwidGhpbmtpbmdMYWJlbCIsInRoaW5raW5nTW9kZUxhYmVsIiwidG9nZ2xlcyIsInJsT24iLCJybEljb24iLCJybEV4cGxhaW4iLCJjb250SWNvbiIsImNvbnRTdGF0dXMiLCJjb250RXhwbGFpbiIsInZlcmlmeUljb24iLCJ2ZXJpZnlTdGF0dXMiLCJ2ZXJpZnlFeHBsYWluIiwiYXBwckljb24iLCJhcHByU3RhdHVzIiwiYXBwckV4cGxhaW4iLCJ0aGlua2luZ0lzRGVlcCIsInRoaW5rSWNvbiIsInRoaW5rU3RhdHVzIiwidGhpbmtFeHBsYWluIiwiZGVidWdBY3RpdmUiLCJkZWJ1Z0ljb24iLCJkZWJ1Z1N0YXR1cyIsImRlYnVnRXhwbGFpbiIsIndyYXBTZWdtZW50cyIsInN0YXR1c0xpbmVzIiwiYnVpbGRTdGF0dXNCbG9jayIsIm1ldGFMaW5lcyIsImJ1aWxkTWV0YUJsb2NrIiwiYWJicmV2aWF0ZVBhdGgiLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwicHJvZmlsZSIsImZvcm1hdE1ldGFTZWdtZW50Iiwid29ya3NwYWNlIiwiZGlyZWN0b3J5Iiwid3JpdGVzIiwidG9vbFN1bW1hcnkiLCJzZXNzaW9uTGFiZWwiLCJ2ZXJzaW9uIiwicmxTZWdtZW50cyIsImJ1aWxkUkxTdGF0dXNTZWdtZW50cyIsImFjdGl2ZVZhcmlhbnQiLCJ3aW5zIiwiY3VycmVudE1vZHVsZSIsInJlZmluZXIiLCJ0aWVzIiwidG90YWxHYW1lcyIsImxlYWRlciIsInBDb2xvciIsInJDb2xvciIsInBTY29yZSIsInJTY29yZSIsInRyb3BoeSIsInN0cmVha1RleHQiLCJzdHJlYWsiLCJwQmFycyIsInJCYXJzIiwidEJhcnMiLCJpc1BhcmFsbGVsIiwicGFyYWxsZWxFeGVjdXRpb24iLCJ2YXJpYW50SWNvbiIsInZhcmlhbnRMYWJlbCIsInZhcmlhbnRDb2xvciIsImxhc3RXaW5uZXIiLCJ3aW5uZXJJY29uIiwiY3VycmVudFN0ZXAiLCJzdGVwVGV4dCIsInRydW5jYXRlTWlkZGxlIiwic3RlcHNDb21wbGV0ZWQiLCJ0b3RhbFN0ZXBzIiwicGN0Iiwic2NvcmVzIiwicFZhbCIsInJWYWwiLCJwRGlzcGxheSIsInJEaXNwbGF5IiwiYWNjdXJhY3kiLCJwQWNjIiwickFjYyIsImtlZXBMZW4iLCJzdGF0dXNlcyIsImNvbG9yaXplciIsImJ1aWxkQ29udHJvbExpbmVzIiwiYnVpbGRUb2dnbGVMaW5lIiwic2hvcnRjdXRMaW5lIiwiYnVpbGRTaG9ydGN1dExpbmUiLCJidWlsZENvbXBhY3RUb2dnbGVMaW5lIiwiZWRpdEljb24iLCJlZGl0U3RhdGUiLCJjeWNsZUhpbnQiLCJhZGRUb2dnbGUiLCJob3RrZXkiLCJhdXRvVmVyaWZ5QWN0aXZlIiwidmVyaWZ5VmFsdWUiLCJhcHByb3ZhbEFjdGl2ZSIsInRoaW5raW5nTGFiZWxSYXciLCJ0aGlua2luZ0FjdGl2ZSIsImR1YWxSbEFjdGl2ZSIsIm1vZGVWYWx1ZSIsImJ1aWxkTGluZSIsImluY2x1ZGVIb3RrZXlzIiwidG9nZ2xlIiwic3RhdGVUZXh0IiwiaG90a2V5VGV4dCIsImFkZEhvdGtleSIsInByb21wdFdpZHRoIiwiY29udGludWF0aW9uSW5kZW50IiwiY29udGludWF0aW9uV2lkdGgiLCJyYXdCdWZmZXIiLCJidWZmZXJMaW5lcyIsInRvdGFsQ2hhcnMiLCJjdXJzb3JMaW5lIiwiY3Vyc29yQ29sIiwiZm91bmRDdXJzb3IiLCJsaW5lSW5kZXgiLCJpc0ZpcnN0TG9naWNhbExpbmUiLCJsaW5lU3RhcnRDaGFyIiwiZmlyc3RMaW5lV2lkdGgiLCJjb250TGluZVdpZHRoIiwiaXNGaXJzdERpc3BsYXlMaW5lIiwiZGlzcGxheUxpbmUiLCJjaHVua1N0YXJ0IiwiY2h1bmtFbmQiLCJvZmZzZXRJbkNodW5rIiwibGFzdExpbmUiLCJ0YXJnZXRMaW5lIiwidmlzaWJsZVBhcnQiLCJjdXJzb3JQb3MiLCJiZWZvcmUiLCJjaGFyQXQiLCJhZnRlciIsInRleHRQYXJ0IiwiYnVpbGRJbnB1dFdpbmRvdyIsImF2YWlsYWJsZSIsImN1cnNvckluZGV4Iiwib2Zmc2V0IiwibWF4T2Zmc2V0Iiwid2luZG93IiwiZGlzcGxheSIsImNoYXIiLCJjdXJzb3JJbldpbmRvdyIsImNhcHR1cmVJbnB1dCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNldEJ1ZmZlciIsInJlYXNvbiIsImNhcHR1cmUiLCJsaW1pdCIsInZpc2libGUiLCJ0b2tlbiIsInNsaWNlTGVuZ3RoIiwiZ2V0QnVmZmVyIiwiZ2V0Q3Vyc29yIiwic2V0QnVmZmVyIiwicmVxdWVzdGVkQ3Vyc29yIiwic2V0U2VjcmV0TW9kZSIsImVuYWJsZWQiLCJzZXRNb2RlU3RhdHVzIiwic2hvd0NvbXBhY3RpbmdTdGF0dXMiLCJoaWRlQ29tcGFjdGluZ1N0YXR1cyIsImVtaXRQcm9tcHQiLCJwdXNoUHJvbXB0RXZlbnQiLCJtcyIsImRhdGEiLCJjb2x1bW5zIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlVuaWZpZWRVSVJlbmRlcmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pZmllZFVJUmVuZGVyZXIgLSBDbGF1ZGUgQ29kZSBzdHlsZSBtaW5pbWFsaXN0IHRlcm1pbmFsIFVJLlxuICpcbiAqIEdvYWxzOlxuICogLSBTaW5nbGUgZXZlbnQgcGlwZWxpbmUgZm9yIGV2ZXJ5dGhpbmcgKHByb21wdCDihpIgdGhvdWdodCDihpIgdG9vbC9idWlsZC90ZXN0IOKGkiByZXNwb25zZSkuXG4gKiAtIFBpbm5lZCBzdGF0dXMvbWV0YSBvbmx5IChuZXZlciBpbiBzY3JvbGxiYWNrKS5cbiAqIC0gU2Nyb2xsYmFjayBvbmx5IHNob3dzIGV2ZW50czsgbm8gZHVwbGljYXRlIHN0YXR1cyBsaWtlIFwiV29ya2luZyBvbiB5b3VyIHJlcXVlc3RcIiBvciBcIlJlYWR5IGZvciBwcm9tcHRzXCIuXG4gKiAtIFN0cmVhbWluZzogZmlyc3QgY2h1bmsgc2V0cyBhIG9uZS1saW5lIGJhbm5lcjsgcmVtYWluZGVyIHN0cmVhbXMgbmF0dXJhbGx5IChvcHRpb25hbCkuXG4gKiAtIENvbGxhcHNpYmxlLWxpa2Ugc3VtbWFyaWVzOiB3ZSBmb3JtYXQgYSBjb21wYWN0IGhlYWRpbmcgd2l0aCBhbiBlbGxpcHNpcyBpbmRpY2F0b3IsIGJ1dCBhdm9pZCBjdHJsK28gaGludHMuXG4gKi9cblxuaW1wb3J0ICogYXMgcmVhZGxpbmUgZnJvbSAnbm9kZTpyZWFkbGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgeyBob21lZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgY2hhbGsgZnJvbSAnY2hhbGsnO1xuaW1wb3J0IHsgdGhlbWUsIHNwaW5uZXJGcmFtZXMsIGdldFRvb2xDb2xvciB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHtcbiAgY2xhbXBQZXJjZW50YWdlLFxuICBnZXRDb250ZXh0Q29sb3IsXG59IGZyb20gJy4vdWlDb25zdGFudHMuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmRTdWdnZXN0aW9uIHtcbiAgY29tbWFuZDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjYXRlZ29yeT86IHN0cmluZztcbn1cblxudHlwZSBDYW5vbmljYWxFdmVudFR5cGUgPSAncHJvbXB0JyB8ICd0aG91Z2h0JyB8ICdzdHJlYW0nIHwgJ3Rvb2wnIHwgJ3Rvb2wtcmVzdWx0JyB8ICdidWlsZCcgfCAndGVzdCcgfCAncmVzcG9uc2UnO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJlckV2ZW50VHlwZSA9XG4gIHwgQ2Fub25pY2FsRXZlbnRUeXBlXG4gIHwgJ3JhdydcbiAgfCAnYmFubmVyJ1xuICB8ICdlcnJvcidcbiAgfCAnc3RyZWFtaW5nJ1xuICB8ICd0b29sLWNhbGwnXG4gIHwgJ3Rvb2wtcmVzdWx0JztcblxudHlwZSBVSUV2ZW50ID0ge1xuICB0eXBlOiBDYW5vbmljYWxFdmVudFR5cGU7XG4gIHJhd1R5cGU6IFJlbmRlcmVyRXZlbnRUeXBlO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBpc0NvbXBhY3RlZD86IGJvb2xlYW47IC8vIENsYXVkZSBDb2RlIHN0eWxlIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9ucyB7XG4gIGRlYnVnPzogYm9vbGVhbjtcbn1cblxudHlwZSBJbnB1dENoYW5nZUV2ZW50ID0ge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGN1cnNvcjogbnVtYmVyO1xufTtcblxuaW50ZXJmYWNlIE1vZGVUb2dnbGVTdGF0ZSB7XG4gIHZlcmlmaWNhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG4gIHZlcmlmaWNhdGlvbkhvdGtleT86IHN0cmluZztcbiAgYXV0b0NvbnRpbnVlRW5hYmxlZD86IGJvb2xlYW47XG4gIGF1dG9Db250aW51ZUhvdGtleT86IHN0cmluZztcbiAgdGhpbmtpbmdNb2RlTGFiZWw/OiBzdHJpbmcgfCBudWxsO1xuICB0aGlua2luZ0hvdGtleT86IHN0cmluZztcbiAgY3JpdGljYWxBcHByb3ZhbE1vZGU/OiAnYXV0bycgfCAnYXBwcm92YWwnO1xuICBjcml0aWNhbEFwcHJvdmFsSG90a2V5Pzogc3RyaW5nO1xuICBkdWFsUmxFbmFibGVkPzogYm9vbGVhbjtcbiAgZHVhbFJsSG90a2V5Pzogc3RyaW5nO1xuICBkZWJ1Z0VuYWJsZWQ/OiBib29sZWFuO1xuICBkZWJ1Z0hvdGtleT86IHN0cmluZztcbn1cblxuLyoqXG4gKiBSTCBhZ2VudCBleGVjdXRpb24gc3RhdHVzIGZvciByZWFsLXRpbWUgZGlzcGxheSBkdXJpbmcgZHVhbC1STCBtb2RlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJMQWdlbnRTdGF0dXMge1xuICAvKiogQ3VycmVudCBhY3RpdmUgdmFyaWFudCBiZWluZyBleGVjdXRlZCAqL1xuICBhY3RpdmVWYXJpYW50PzogJ3ByaW1hcnknIHwgJ3JlZmluZXInIHwgbnVsbDtcbiAgLyoqIEN1cnJlbnQgbW9kdWxlIGJlaW5nIHByb2Nlc3NlZCAqL1xuICBjdXJyZW50TW9kdWxlPzogc3RyaW5nO1xuICAvKiogQ3VycmVudCBzdGVwIHdpdGhpbiB0aGUgbW9kdWxlICovXG4gIGN1cnJlbnRTdGVwPzogc3RyaW5nO1xuICAvKiogV2luIHN0YXRpc3RpY3MgZm9yIHByaW1hcnkgdnMgcmVmaW5lciAqL1xuICB3aW5zPzogeyBwcmltYXJ5OiBudW1iZXI7IHJlZmluZXI6IG51bWJlcjsgdGllczogbnVtYmVyIH07XG4gIC8qKiBDdXJyZW50IHJld2FyZCBzY29yZXMgaWYgYXZhaWxhYmxlICovXG4gIHNjb3Jlcz86IHsgcHJpbWFyeT86IG51bWJlcjsgcmVmaW5lcj86IG51bWJlciB9O1xuICAvKiogSHVtYW4tYWNjdXJhY3kgc3R5bGUgc2NvcmVzICgwLTEpICovXG4gIGFjY3VyYWN5PzogeyBwcmltYXJ5PzogbnVtYmVyOyByZWZpbmVyPzogbnVtYmVyIH07XG4gIC8qKiBXaGV0aGVyIHZhcmlhbnRzIGFyZSBydW5uaW5nIGluIHBhcmFsbGVsICovXG4gIHBhcmFsbGVsRXhlY3V0aW9uPzogYm9vbGVhbjtcbiAgLyoqIFRvdGFsIHN0ZXBzIGNvbXBsZXRlZCAqL1xuICBzdGVwc0NvbXBsZXRlZD86IG51bWJlcjtcbiAgLyoqIFRvdGFsIHN0ZXBzIHRvIHByb2Nlc3MgKi9cbiAgdG90YWxTdGVwcz86IG51bWJlcjtcbiAgLyoqIExhc3Qgc3RlcCB3aW5uZXIgZm9yIGNlbGVicmF0aW9uICovXG4gIGxhc3RXaW5uZXI/OiAncHJpbWFyeScgfCAncmVmaW5lcicgfCAndGllJyB8IG51bGw7XG4gIC8qKiBTdHJlYWsgY291bnQgZm9yIGN1cnJlbnQgbGVhZGVyICovXG4gIHN0cmVhaz86IG51bWJlcjtcbn1cblxuLyoqXG4gKiBBdHRhY2sgb3BlcmF0aW9uIHN0YXR1cyBmb3IgcmVhbC10aW1lIGRpc3BsYXkgZHVyaW5nIG9mZmVuc2l2ZSBzZWN1cml0eSBvcGVyYXRpb25zLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEF0dGFja1N0YXR1cyB7XG4gIC8qKiBDdXJyZW50IGF0dGFjayBwaGFzZSAqL1xuICBwaGFzZT86ICdyZWNvbicgfCAnc2Nhbm5pbmcnIHwgJ2V4cGxvaXRhdGlvbicgfCAncGVyc2lzdGVuY2UnIHwgJ2V4ZmlsdHJhdGlvbicgfCAnZGVzdHJ1Y3Rpb24nO1xuICAvKiogQ3VycmVudCB0YXJnZXQgYmVpbmcgYXR0YWNrZWQgKi9cbiAgY3VycmVudFRhcmdldD86IHN0cmluZztcbiAgLyoqIE51bWJlciBvZiB0YXJnZXRzIGFjcXVpcmVkICovXG4gIHRhcmdldHNBY3F1aXJlZD86IG51bWJlcjtcbiAgLyoqIE51bWJlciBvZiB2dWxuZXJhYmlsaXRpZXMgZm91bmQgKi9cbiAgdnVsbmVyYWJpbGl0aWVzRm91bmQ/OiBudW1iZXI7XG4gIC8qKiBOdW1iZXIgb2Ygc3VjY2Vzc2Z1bCBleHBsb2l0cyAqL1xuICBleHBsb2l0c1N1Y2Nlc3NmdWw/OiBudW1iZXI7XG4gIC8qKiBQZXJzaXN0ZW5jZSBtZWNoYW5pc21zIGVzdGFibGlzaGVkICovXG4gIHBlcnNpc3RlbmNlRXN0YWJsaXNoZWQ/OiBudW1iZXI7XG4gIC8qKiBEYXRhIGV4ZmlsdHJhdGVkIChNQikgKi9cbiAgZGF0YUV4ZmlsdHJhdGVkPzogbnVtYmVyO1xuICAvKiogSW5mcmFzdHJ1Y3R1cmUgY29tcHJvbWlzZWQgY291bnQgKi9cbiAgaW5mcmFzdHJ1Y3R1cmVDb21wcm9taXNlZD86IG51bWJlcjtcbiAgLyoqIFJlYWwtdGltZSBtb25pdG9yaW5nIGFjdGl2ZSAqL1xuICBtb25pdG9yaW5nQWN0aXZlPzogYm9vbGVhbjtcbiAgLyoqIEN1cnJlbnQgYXR0YWNrIG1vZGUgKi9cbiAgYXR0YWNrTW9kZT86ICdyZWNvbicgfCAnYXR0YWNrJyB8ICdleHBsb2l0JyB8ICdwZXJzaXN0ZW5jZScgfCAnYzInIHwgJ2Rlc3RydWN0aW9uJztcbiAgLyoqIEF0dGFjayBzdWNjZXNzIHJhdGUgcGVyY2VudGFnZSAqL1xuICBzdWNjZXNzUmF0ZT86IG51bWJlcjtcbiAgLyoqIExhc3QgYXR0YWNrIHJlc3VsdCAqL1xuICBsYXN0UmVzdWx0PzogJ3N1Y2Nlc3MnIHwgJ2ZhaWx1cmUnIHwgJ3BhcnRpYWwnO1xuICAvKiogQWN0aXZlIGF0dGFjayBtb2R1bGVzICovXG4gIGFjdGl2ZU1vZHVsZXM/OiBzdHJpbmdbXTtcbiAgLyoqIFRpbWUgc2luY2UgYXR0YWNrIHN0YXJ0ZWQgKi9cbiAgYXR0YWNrRHVyYXRpb24/OiBudW1iZXI7XG59XG5cbmNvbnN0IEVTQyA9IHtcbiAgSElERV9DVVJTT1I6ICdcXHgxYls/MjVsJyxcbiAgU0hPV19DVVJTT1I6ICdcXHgxYls/MjVoJyxcbiAgQ0xFQVJfU0NSRUVOOiAnXFx4MWJbMkonLFxuICBDTEVBUl9MSU5FOiAnXFx4MWJbMksnLFxuICBIT01FOiAnXFx4MWJbSCcsXG4gIEVOQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGgnLFxuICBESVNBQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0bCcsXG4gIFRPOiAocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtyb3d9OyR7Y29sfUhgLFxuICBUT19DT0w6IChjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7Y29sfUdgLFxuICBFUkFTRV9ET1dOOiAnXFx4MWJbSicsXG4gIFJFVkVSU0U6ICdcXHgxYls3bScsXG4gIFJFU0VUOiAnXFx4MWJbMG0nLFxuICAvLyBTY3JvbGwgcmVnaW9uIGNvbnRyb2wgLSBDUklUSUNBTCBmb3IgZml4ZWQgYm90dG9tIG92ZXJsYXlcbiAgU0VUX1NDUk9MTF9SRUdJT046ICh0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIpID0+IGBcXHgxYlske3RvcH07JHtib3R0b219cmAsXG4gIFJFU0VUX1NDUk9MTF9SRUdJT046ICdcXHgxYltyJyxcbiAgU0FWRV9DVVJTT1I6ICdcXHgxYltzJyxcbiAgUkVTVE9SRV9DVVJTT1I6ICdcXHgxYlt1Jyxcbn0gYXMgY29uc3Q7XG5cbmNvbnN0IE5FV0xJTkVfUExBQ0VIT0xERVIgPSAn4oa1JztcblxuZXhwb3J0IGNsYXNzIFVuaWZpZWRVSVJlbmRlcmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnB1dDogTm9kZUpTLlJlYWRTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgcmw6IHJlYWRsaW5lLkludGVyZmFjZTtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpbk1vZGU6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgaW50ZXJhY3RpdmU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSByb3dzID0gMjQ7XG4gIHByaXZhdGUgY29scyA9IDgwO1xuICBwcml2YXRlIGxhc3RSZW5kZXJXaWR0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBldmVudFF1ZXVlOiBVSUV2ZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBpc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgYnVmZmVyID0gJyc7XG4gIHByaXZhdGUgY3Vyc29yID0gMDtcbiAgcHJpdmF0ZSBoaXN0b3J5OiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhpc3RvcnlJbmRleCA9IC0xO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25zOiB7IGNvbW1hbmQ6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZzsgY2F0ZWdvcnk/OiBzdHJpbmcgfVtdID0gW107XG4gIHByaXZhdGUgc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIHByaXZhdGUgYXZhaWxhYmxlQ29tbWFuZHM6IHR5cGVvZiB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gIHByaXZhdGUgaG90a2V5c0luVG9nZ2xlTGluZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgY29sbGFwc2VkUGFzdGU6IHsgdGV4dDogc3RyaW5nOyBsaW5lczogbnVtYmVyOyBjaGFyczogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnID0gJ2lkbGUnO1xuICBwcml2YXRlIGxhc3RUb29sUmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgLyoqIFN0YWNrIG9mIGNvbGxhcHNlZCB0b29sIHJlc3VsdHMgZm9yIEN0cmwrTyBleHBhbnNpb24gKi9cbiAgcHJpdmF0ZSBjb2xsYXBzZWRUb29sUmVzdWx0czogQXJyYXk8e1xuICAgIHRvb2xOYW1lOiBzdHJpbmc7XG4gICAgY29udGVudDogc3RyaW5nO1xuICAgIHN1bW1hcnk6IHN0cmluZztcbiAgICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgfT4gPSBbXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDb2xsYXBzZWRSZXN1bHRzID0gNTA7XG4gIC8qKiBUcmFjayB0aGUgbGFzdCB0b29sIG5hbWUgZm9yIHBhaXJpbmcgd2l0aCByZXN1bHRzICovXG4gIHByaXZhdGUgbGFzdFRvb2xOYW1lOiBzdHJpbmcgPSAnJztcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c092ZXJyaWRlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNTdHJlYW1pbmc6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEFuaW1hdGVkIFVJIGNvbXBvbmVudHNcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTcGlubmVyOiBBbmltYXRlZFNwaW5uZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB0aGlua2luZ0luZGljYXRvcjogVGhpbmtpbmdJbmRpY2F0b3IgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb250ZXh0TWV0ZXI6IENvbnRleHRNZXRlcjtcbiAgcHJpdmF0ZSBzcGlubmVyRnJhbWUgPSAwO1xuICBwcml2YXRlIHNwaW5uZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhJbmxpbmVQYW5lbExpbmVzID0gMTI7XG5cbiAgLy8gQ29tcGFjdGluZyBzdGF0dXMgYW5pbWF0aW9uXG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UgPSAnJztcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzRnJhbWUgPSAwO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyA9IFsn4py7JywgJ+KcvCcsICfinLsnLCAn4py6J107XG5cbiAgLy8gQW5pbWF0ZWQgYWN0aXZpdHkgbGluZSAoZS5nLiwgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIilcbiAgcHJpdmF0ZSBhY3Rpdml0eU1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFjdGl2aXR5UGhyYXNlSW5kZXggPSAwO1xuICBwcml2YXRlIGFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBhY3Rpdml0eVN0YXJGcmFtZXMgPSBbJ+KcsycsICfinLQnLCAn4py1JywgJ+KcticsICfinLcnLCAn4py4J107XG4gIC8vIFRva2VuIGNvdW50IGR1cmluZyBzdHJlYW1pbmdcbiAgcHJpdmF0ZSBzdHJlYW1pbmdUb2tlbnMgPSAwO1xuICAvLyBFbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uXG4gIHByaXZhdGUgZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGVsYXBzZWRDb2xvckZyYW1lcyA9IFsnI0Y1OUUwQicsICcjRkJCRjI0JywgJyNGQ0QzNEQnLCAnI0ZERTY4QScsICcjRkNEMzREJywgJyNGQkJGMjQnXTtcbiAgLy8gVXNlci1mcmllbmRseSBhY3Rpdml0eSBwaHJhc2VzIChjbGVhbiwgcHJvZmVzc2lvbmFsKVxuICBwcml2YXRlIHJlYWRvbmx5IGZ1bkFjdGl2aXR5UGhyYXNlcyA9IFtcbiAgICAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZycsICdBbmFseXppbmcnLCAnV29ya2luZycsICdQcmVwYXJpbmcnLFxuICBdO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyA9IDg7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzID0gMTgwMDtcbiAgcHJpdmF0ZSByZWFkb25seSB0aG91Z2h0RGVkdXBXaW5kb3dNcyA9IDE1MDAwO1xuICBwcml2YXRlIGxhc3RDdXJhdGVkVGhvdWdodDogeyB0ZXh0OiBzdHJpbmc7IGF0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgc3RhdHVzTWV0YToge1xuICAgIG1vZGVsPzogc3RyaW5nO1xuICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gIH0gPSB7fTtcbiAgcHJpdmF0ZSB0b2dnbGVTdGF0ZTogTW9kZVRvZ2dsZVN0YXRlID0ge1xuICAgIHZlcmlmaWNhdGlvbkVuYWJsZWQ6IGZhbHNlLFxuICAgIGF1dG9Db250aW51ZUVuYWJsZWQ6IGZhbHNlLFxuICAgIGNyaXRpY2FsQXBwcm92YWxNb2RlOiAnYXV0bycsXG4gICAgZHVhbFJsRW5hYmxlZDogZmFsc2UsXG4gICAgZGVidWdFbmFibGVkOiBmYWxzZSxcbiAgfTtcblxuICAvKiogUkwgYWdlbnQgZXhlY3V0aW9uIHN0YXR1cyBmb3IgZHVhbC1STCBtb2RlIGRpc3BsYXkgKi9cbiAgcHJpdmF0ZSBybFN0YXR1czogUkxBZ2VudFN0YXR1cyA9IHt9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIC8qKiBFbnN1cmUgY3Vyc29yIGlzIGFsd2F5cyB3aXRoaW4gdmFsaWQgYm91bmRzIGZvciB0aGUgY3VycmVudCBidWZmZXIgKi9cbiAgcHJpdmF0ZSBjbGFtcEN1cnNvcigpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuY3Vyc29yLCB0aGlzLmJ1ZmZlci5sZW5ndGgpKTtcbiAgfVxuXG4gIC8qKiBTYWZlbHkgYXBwZW5kIHRvIHBhc3RlIGJ1ZmZlciB3aXRoIHNpemUgbGltaXQgZW5mb3JjZW1lbnQgKi9cbiAgcHJpdmF0ZSBhcHBlbmRUb1Bhc3RlQnVmZmVyKGJ1ZmZlcjogJ3Bhc3RlJyB8ICdwbGFpblBhc3RlJywgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdykgcmV0dXJuOyAvLyBBbHJlYWR5IGF0IGxpbWl0XG4gICAgY29uc3QgY3VycmVudCA9IGJ1ZmZlciA9PT0gJ3Bhc3RlJyA/IHRoaXMucGFzdGVCdWZmZXIgOiB0aGlzLnBsYWluUGFzdGVCdWZmZXI7XG4gICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUgLSBjdXJyZW50Lmxlbmd0aDtcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvQWRkID0gdGV4dC5sZW5ndGggPD0gcmVtYWluaW5nID8gdGV4dCA6IHRleHQuc2xpY2UoMCwgcmVtYWluaW5nKTtcbiAgICBpZiAoYnVmZmVyID09PSAncGFzdGUnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfVxuICAgIGlmICh0b0FkZC5sZW5ndGggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogU3RyaXAgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIGFuZCBzcGVjaWFsIGZvcm1hdHRpbmcgZnJvbSB0ZXh0IHRvIGdldCBjbGVhbiBwbGFpbnRleHQgKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVBhc3RlQ29udGVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBhbGwgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIChDU0ksIE9TQywgZXRjLilcbiAgICAvLyBJbmNsdWRpbmcgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgKFxceDFiWzIwMH4gYW5kIFxceDFiWzIwMX4pIHdoaWNoIGVuZCB3aXRoIH5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGxldCBzYW5pdGl6ZWQgPSB0ZXh0LnJlcGxhY2UoL1xceDFiXFxbWzAtOTtdKltBLVphLXp+XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gICAgLy8gQWxzbyByZW1vdmUgcGFydGlhbCBicmFja2V0ZWQgcGFzdGUgbWFya2VycyB0aGF0IG1heSBoYXZlIGxlYWtlZCAoZS5nLiwgXCJbMjAwflwiIHdpdGhvdXQgRVNDKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXFsyMFswMV1+L2csICcnKTtcbiAgICAvLyBSZW1vdmUgYW55IHN0cmF5IGVzY2FwZSBjaGFyYWN0ZXIgYXQgc3RhcnQvZW5kXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXlxceDFiK3xcXHgxYiskL2csICcnKTtcblxuICAgIC8vIFN0cmlwIHNwZWNpYWwgZm9ybWF0dGluZyBjaGFyYWN0ZXJzIGZvciBjbGVhbiBwbGFpbnRleHQ6XG4gICAgLy8gLSBaZXJvLXdpZHRoIGNoYXJhY3RlcnMgKFpXU1AsIFpXTkosIFpXSiwgQk9NL1pXTkJTUClcbiAgICAvLyAtIFdvcmQgam9pbmVyLCBpbnZpc2libGUgc2VwYXJhdG9yLCBpbnZpc2libGUgdGltZXMvcGx1c1xuICAgIC8vIC0gRGlyZWN0aW9uYWwgZm9ybWF0dGluZyAoTFJNLCBSTE0sIExSRSwgUkxFLCBMUk8sIFJMTywgUERGLCBMUkksIFJMSSwgRlNJLCBQREkpXG4gICAgLy8gLSBPYmplY3QgcmVwbGFjZW1lbnQgY2hhcmFjdGVyXG4gICAgLy8gLSBTb2Z0IGh5cGhlblxuICAgIC8vIC0gTm9uLWJyZWFraW5nIHNwYWNlIHZhcmlhbnRzIChOQlNQLCBuYXJyb3cgTkJTUCwgZmlndXJlIHNwYWNlLCBldGMuKVxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MjAwQi1cXHUyMDBGXFx1MjAyOC1cXHUyMDJGXFx1MjA2MC1cXHUyMDZGXFx1RkVGRlxcdTAwQURcXHVGRkZDXS9nLCAnJyk7XG5cbiAgICAvLyBOb3JtYWxpemUgdmFyaW91cyBzcGFjZSBjaGFyYWN0ZXJzIHRvIHJlZ3VsYXIgc3BhY2VcbiAgICAvLyBJbmNsdWRlczogTkJTUCwgZW4vZW0gc3BhY2UsIHRoaW4gc3BhY2UsIGhhaXIgc3BhY2UsIGZpZ3VyZSBzcGFjZSwgZXRjLlxuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKC9bXFx1MDBBMFxcdTIwMDAtXFx1MjAwQVxcdTIwMkZcXHUyMDVGXFx1MzAwMF0vZywgJyAnKTtcblxuICAgIC8vIFJlbW92ZSBjb250cm9sIGNoYXJhY3RlcnMgZXhjZXB0IHRhYiwgbmV3bGluZSwgY2FycmlhZ2UgcmV0dXJuXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvW1xceDAwLVxceDA4XFx4MEJcXHgwQ1xceDBFLVxceDFGXFx4N0ZdL2csICcnKTtcblxuICAgIHJldHVybiBzYW5pdGl6ZWQ7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gMjQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gNjA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDI7IC8vIEd1YXJkIGZvciBzaG9ydCBmaXJzdCBsaW5lcyBpbiBwbGFpbiBwYXN0ZSBtb2RlXG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDgwOyAvLyBXYWl0IGJlZm9yZSBjb21taXR0aW5nIGNoYXJzIGFzIG5vcm1hbCBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgcHJpdmF0ZSBwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWNyZXRNb2RlID0gZmFsc2U7XG4gIC8vIFJlbmRlciB0aHJvdHRsaW5nIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gIHByaXZhdGUgcGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJUaHJvdHRsZU1zID0gMTY7IC8vIH42MGZwcyBtYXhcbiAgcHJpdmF0ZSByZW5kZXJUaHJvdHRsZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyBEaXNwb3NhbCBzdGF0ZSB0byBwcmV2ZW50IG9wZXJhdGlvbnMgYWZ0ZXIgY2xlYW51cFxuICBwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG4gIC8vIEJvdW5kIGV2ZW50IGhhbmRsZXJzIGZvciBwcm9wZXIgY2xlYW51cFxuICBwcml2YXRlIGJvdW5kUmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRLZXlwcmVzc0hhbmRsZXI6ICgoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0Q2FwdHVyZTpcbiAgICB8IHtcbiAgICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIHJlamVjdD86IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgICAgICBvcHRpb25zOiB7IHRyaW06IGJvb2xlYW47IGFsbG93RW1wdHk6IGJvb2xlYW4gfTtcbiAgICAgIH1cbiAgICB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtID0gcHJvY2Vzcy5zdGRvdXQsXG4gICAgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtID0gcHJvY2Vzcy5zdGRpbixcbiAgICBfb3B0aW9ucz86IFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmludGVyYWN0aXZlID0gQm9vbGVhbih0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmlucHV0LmlzVFRZICYmICFwcm9jZXNzLmVudlsnQ0knXSk7XG4gICAgdGhpcy5wbGFpbk1vZGUgPSBpc1BsYWluT3V0cHV0TW9kZSgpIHx8ICF0aGlzLmludGVyYWN0aXZlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmltYXRlZCBjb21wb25lbnRzXG4gICAgdGhpcy5jb250ZXh0TWV0ZXIgPSBuZXcgQ29udGV4dE1ldGVyKCk7XG5cbiAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgIGlucHV0OiB0aGlzLmlucHV0LFxuICAgICAgb3V0cHV0OiB0aGlzLm91dHB1dCxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJvbXB0OiAnJyxcbiAgICAgIHRhYlNpemU6IDIsXG4gICAgfSk7XG4gICAgdGhpcy5ybC5zZXRQcm9tcHQoJycpO1xuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlcnMgc28gd2UgY2FuIHJlbW92ZSB0aGVtIG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub3V0cHV0Lm9uKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG5cbiAgICB0aGlzLnNldHVwSW5wdXRIYW5kbGVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSZXNldCBpbnB1dCBhbmQgcGFzdGUgc3RhdGUgdG8gcHJldmVudCBzdGFsZSBzdGF0ZSBmcm9tIHByZXZpb3VzIHNlc3Npb25cbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBJZiBhbiBvdmVybGF5IHdhcyBhbHJlYWR5IHJlbmRlcmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgYmFubmVyIGVtaXR0ZWQgZWFybHkpLFxuICAgICAgLy8gY2xlYXIgaXQgc28gaW5pdGlhbGl6ZSgpIGRvZXNuJ3Qgc3RhY2sgYSBzZWNvbmQgY29udHJvbCBiYXIgaW4gc2Nyb2xsYmFjay5cbiAgICAgIGlmICh0aGlzLmhhc1JlbmRlcmVkUHJvbXB0IHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYWluIG1vZGU6IG1pbmltYWwgc2V0dXAsIHN0aWxsIHJlbmRlciBhIHNpbXBsZSBwcm9tcHQgbGluZVxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIE1hcmsgYXMgZGlzcG9zZWQgZmlyc3QgdG8gcHJldmVudCBhbnkgcGVuZGluZyBvcGVyYXRpb25zXG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG5cbiAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ1JlbmRlcmVyIGRpc3Bvc2VkJykpO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIC8vIENsZWFyIHJlbmRlciB0aHJvdHRsZSB0aW1lclxuICAgIGlmICh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpO1xuICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdG9wIGFueSBydW5uaW5nIGFuaW1hdGlvbnNcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHJlYW1pbmdTcGlubmVyKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1NwaW5uZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudGhpbmtpbmdJbmRpY2F0b3IpIHtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dE1ldGVyLmRpc3Bvc2UoKTtcbiAgICBkaXNwb3NlQW5pbWF0aW9ucygpO1xuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgIGlmICh0aGlzLmJvdW5kUmVzaXplSGFuZGxlcikge1xuICAgICAgdGhpcy5vdXRwdXQucmVtb3ZlTGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpIHtcbiAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIEV2ZW50RW1pdHRlciBsaXN0ZW5lcnMgZnJvbSB0aGlzIGluc3RhbmNlXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5ybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBzbyBpdCBkb2Vzbid0IHJlbWFpbiBpbiBzY3JvbGxiYWNrIGhpc3RvcnlcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZShmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcblxuICAgIC8vIENsZWFyIGV2ZW50IHF1ZXVlXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XG4gIH1cblxuICBzdXNwZW5kUHJvbXB0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZVByb21wdFJlbmRlcmluZyhyZW5kZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gSW5wdXQgaGFuZGxpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmwucmVtb3ZlQWxsTGlzdGVuZXJzKCdsaW5lJyk7XG4gICAgcmVhZGxpbmUuZW1pdEtleXByZXNzRXZlbnRzKHRoaXMuaW5wdXQsIHRoaXMucmwpO1xuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuICAgIC8vIFVzZSBib3VuZCBoYW5kbGVyIHNvIHdlIGNhbiByZW1vdmUgaXQgb24gY2xlYW51cFxuICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSAoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlwcmVzcyhzdHIsIGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmlucHV0Lm9uKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbWl0SW5wdXRDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcGF5bG9hZDogSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgICAgIHRleHQ6IHRoaXMuYnVmZmVyLFxuICAgICAgY3Vyc29yOiB0aGlzLmN1cnNvcixcbiAgICB9O1xuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleXByZXNzKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IHZvaWQge1xuICAgIC8vIE5vcm1hbGl6ZSBtaXNzaW5nIGtleSBtZXRhZGF0YSAoY29tbW9uIGZvciBzb21lIHRlcm1pbmFscyBlbWl0dGluZyByYXcgZXNjYXBlIGNvZGVzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkgPz8gdGhpcy5wYXJzZUVzY2FwZVNlcXVlbmNlKHN0cik7XG4gICAgY29uc3Qga2V5Rm9yUGFzdGUgPSBub3JtYWxpemVkS2V5ID8/IChzdHIgPyB7IHNlcXVlbmNlOiBzdHIgfSBhcyByZWFkbGluZS5LZXkgOiBrZXkpO1xuXG4gICAgaWYgKHRoaXMuaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVQbGFpblBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbWFjT1MgT3B0aW9uK2tleSBwcm9kdWNlcyBVbmljb2RlIGNoYXJhY3RlcnM7IGhhbmRsZSB0aGVtIGJlZm9yZSBrZXkgbWV0YWRhdGEgY2hlY2tzLlxuICAgIGNvbnN0IG1hY09wdGlvbkNoYXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ8KpJzogJ2cnLCAgLy8gT3B0aW9uK0dcbiAgICAgICfihKInOiAnZycsICAvLyBPcHRpb24rU2hpZnQrR1xuICAgICAgJ8OlJzogJ2EnLCAgLy8gT3B0aW9uK0FcbiAgICAgICfDhSc6ICdhJywgIC8vIE9wdGlvbitTaGlmdCtBXG4gICAgICAn4oiaJzogJ3YnLCAgLy8gT3B0aW9uK1YgLyBPcHRpb24rU2hpZnQrVlxuICAgICAgJ+KIgic6ICdkJywgIC8vIE9wdGlvbitEXG4gICAgICAnw44nOiAnZCcsICAvLyBPcHRpb24rU2hpZnQrRCAoY29tbW9uIG1hY09TIGVtaXNzaW9uKVxuICAgICAgJ+KIhic6ICdkJywgIC8vIENvbW1vbiBhbHRlcm5hdGUgZGVsdGEgc3ltYm9sXG4gICAgfTtcblxuICAgIGlmIChzdHIgJiYgbWFjT3B0aW9uQ2hhcnNbc3RyXSkge1xuICAgICAgY29uc3QgbGV0dGVyID0gbWFjT3B0aW9uQ2hhcnNbc3RyXTtcbiAgICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIGluc2VydCBidWZmZXIgc28gdGhlIHN5bWJvbCBuZXZlciBsYW5kcyBpbiB0aGUgcHJvbXB0XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICAgIHN3aXRjaCAobGV0dGVyKSB7XG4gICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICd2JzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5vcm1hbGl6ZWRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUgJiYgbm9ybWFsaXplZEtleS5jdHJsICYmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJyB8fCBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkJykpIHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IEN0cmwrU2hpZnQgY29tYmluYXRpb25zIChmYWxsYmFjayBmb3Igbm9uLW1hY09TIG9yIGNvbmZpZ3VyZWQgdGVybWluYWxzKVxuICAgIGNvbnN0IGlzQ3RybFNoaWZ0ID0gKGxldHRlcjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBsb3dlckxldHRlciA9IGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdXBwZXJMZXR0ZXIgPSBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblxuICAgICAgLy8gUGF0dGVybiAxOiBTdGFuZGFyZCByZWFkbGluZSBzaGlmdCBmbGFnICsgY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5LnNoaWZ0ICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMjogU29tZSB0ZXJtaW5hbHMgc2VuZCB1cHBlcmNhc2UgbmFtZSB3aXRoIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSB1cHBlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAzOiBNZXRhL0FsdCArIGxldHRlciAoaVRlcm0yIHdpdGggXCJPcHRpb24gc2VuZHMgTWV0YVwiKVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubWV0YSAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDQ6IFJhdyBlc2NhcGUgc2VxdWVuY2UgY2hlY2sgZm9yIHh0ZXJtLXN0eWxlIG1vZGlmaWVyc1xuICAgICAgY29uc3Qgc2VxID0gc3RyIHx8IG5vcm1hbGl6ZWRLZXkuc2VxdWVuY2U7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKHNlcSAmJiAvXlxceDFiXFxbWzAtOV0rOzZbfkEtWl0/JC8udGVzdChzZXEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDU6IEVTQyArIGxldHRlciAoT3B0aW9uIHNlbmRzIEVTQyBwcmVmaXggaW4gc29tZSBjb25maWdzKVxuICAgICAgaWYgKHNlcSAmJiBzZXEgPT09IGBcXHgxYiR7bG93ZXJMZXR0ZXJ9YCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDdHJsU2hpZnRUb2dnbGUgPSAobGV0dGVyOiAnYScgfCAnZycgfCAnZCcgfCAndicpOiB2b2lkID0+IHtcbiAgICAgIC8vIEVuc3VyZSBubyBidWZmZXJlZCBjaGFycyBsZWFrIGludG8gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBpZiAobGV0dGVyID09PSAnYScpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtY3JpdGljYWwtYXBwcm92YWwnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZycpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdkJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1kdWFsLXJsJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ3YnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLXZlcmlmeScpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9O1xuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdhJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnYScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZycpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2QnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCd2JykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgndicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAncicpIHtcbiAgICAgIHRoaXMuZW1pdCgncmVzdW1lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJykge1xuICAgICAgLy8gQ3RybCtDIGJlaGF2aW9yOlxuICAgICAgLy8gMS4gSWYgYnVmZmVyIGhhcyB0ZXh0OiBjbGVhciBpdCBmaXJzdCwgdGhlbiBub3RpZnkgc2hlbGxcbiAgICAgIC8vIDIuIElmIGJ1ZmZlciBpcyBlbXB0eTogbGV0IHNoZWxsIGRlY2lkZSB0byBwYXVzZSBBSSBvciBxdWl0XG4gICAgICAvL1xuICAgICAgLy8gVGhlIEludGVyYWN0aXZlU2hlbGwgbWFpbnRhaW5zIGEgY291bnRlciB0byB0cmFjayBDdHJsK0MgcHJlc3NlcyBhbmQgZGVjaWRlc1xuICAgICAgLy8gd2hldGhlciB0byBwYXVzZSBBSSBvciBleGl0IGJhc2VkIG9uIHByb2Nlc3Npbmcgc3RhdGUuXG5cbiAgICAgIGNvbnN0IGhhZEJ1ZmZlciA9IHRoaXMuYnVmZmVyLmxlbmd0aCA+IDA7XG4gICAgICBpZiAoaGFkQnVmZmVyKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBpbnB1dCBidWZmZXIgZmlyc3RcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgLy8gRW1pdCBjdHJsYyBldmVudCB3aXRoIGJ1ZmZlciBzdGF0ZSBzbyBzaGVsbCBjYW4gaGFuZGxlIGFwcHJvcHJpYXRlbHlcbiAgICAgIHRoaXMuZW1pdCgnY3RybGMnLCB7IGhhZEJ1ZmZlciB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdkJykge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2ludGVycnVwdCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ3UnKSB7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtMOiBDbGVhciBzY3JlZW4gd2hpbGUgcHJlc2VydmluZyBpbnB1dFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2wnKSB7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gQ2xlYXIgc2NyZWVuIGFuZCByZWRyYXdcbiAgICAgIHRoaXMub3V0cHV0LndyaXRlKCdcXHgxYlsySlxceDFiW0gnKTsgLy8gQ2xlYXIgc2NyZWVuLCBtb3ZlIHRvIHRvcFxuICAgICAgdGhpcy5oYXNDb252ZXJzYXRpb25Db250ZW50ID0gZmFsc2U7XG4gICAgICB0aGlzLmNsZWFyQ29sbGFwc2VkUmVzdWx0cygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK086IEV4cGFuZCBsYXN0IHRvb2wgcmVzdWx0XG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbycpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXhwYW5kLXRvb2wtcmVzdWx0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtBOiBNb3ZlIGN1cnNvciB0byBzdGFydCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnYScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gMCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrRTogTW92ZSBjdXJzb3IgdG8gZW5kIG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdlJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrVzogRGVsZXRlIHdvcmQgYmFja3dhcmRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICd3Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICAvLyBGaW5kIHN0YXJ0IG9mIHByZXZpb3VzIHdvcmRcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICAvLyBTa2lwIHRyYWlsaW5nIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSA9PT0gJyAnKSBwb3MtLTtcbiAgICAgICAgLy8gU2tpcCB3b3JkIGNoYXJhY3RlcnNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gIT09ICcgJykgcG9zLS07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgcG9zKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0s6IERlbGV0ZSBmcm9tIGN1cnNvciB0byBlbmQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2snKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBIb21lOiBNb3ZlIGN1cnNvciB0byBzdGFydFxuICAgIGlmIChrZXkubmFtZSA9PT0gJ2hvbWUnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBFbmQ6IE1vdmUgY3Vyc29yIHRvIGVuZFxuICAgIGlmIChrZXkubmFtZSA9PT0gJ2VuZCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrTGVmdDogTW92ZSBjdXJzb3IgYmFjayBvbmUgd29yZFxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIC8vIFNraXAgd29yZCBjaGFyYWN0ZXJzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K1JpZ2h0OiBNb3ZlIGN1cnNvciBmb3J3YXJkIG9uZSB3b3JkXG4gICAgaWYgKGtleS5tZXRhICYmIGtleS5uYW1lID09PSAncmlnaHQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICAvLyBTa2lwIGN1cnJlbnQgd29yZFxuICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmIHRoaXMuYnVmZmVyW3Bvc10gIT09ICcgJykgcG9zKys7XG4gICAgICAgIC8vIFNraXAgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPCB0aGlzLmJ1ZmZlci5sZW5ndGggJiYgdGhpcy5idWZmZXJbcG9zXSA9PT0gJyAnKSBwb3MrKztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtCYWNrc3BhY2U6IERlbGV0ZSB3b3JkIGJhY2t3YXJkIChhbHRlcm5hdGl2ZSB0byBDdHJsK1cpXG4gICAgaWYgKGtleS5tZXRhICYmIGtleS5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCBwb3MpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvciA9IHBvcztcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkubmFtZSA9PT0gJ3JldHVybicgfHwga2V5Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGV4cGFuZCBhbmQgc3VibWl0IGluIG9uZSBhY3Rpb25cbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gSWYgYSBzbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb24gaXMgaGlnaGxpZ2h0ZWQsIHByZXNzaW5nIEVudGVyIHN1Ym1pdHMgaXQgaW1tZWRpYXRlbHlcbiAgICAgIGlmICh0aGlzLmFwcGx5U3VnZ2VzdGlvbih0cnVlKSkgcmV0dXJuO1xuICAgICAgLy8gRmFsbGJhY2s6IGlmIGJ1ZmZlciBzdGFydHMgd2l0aCAnLycgYW5kIHN1Z2dlc3Rpb25zIGV4aXN0LCB1c2UgdGhlIHNlbGVjdGVkL2ZpcnN0IG9uZVxuICAgICAgaWYgKHRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc2FmZUluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgICAgIDogMDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLnN1Z2dlc3Rpb25zW3NhZmVJbmRleF0/LmNvbW1hbmQgPz8gdGhpcy5idWZmZXI7XG4gICAgICB9XG4gICAgICB0aGlzLnN1Ym1pdFRleHQodGhpcy5idWZmZXIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yIC0gMSkgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZGVsZXRlJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IgKyAxKTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdsZWZ0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAncmlnaHQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5jdXJzb3IrKztcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3VwJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygtMSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeS5sZW5ndGggPiAwKSB7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IHRoaXMuaGlzdG9yeS5sZW5ndGggLSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID4gMCkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4LS07XG4gICAgICAgIH1cbiAgICAgICAgLy8gVmFsaWRhdGUgaW5kZXggaXMgd2l0aGluIGJvdW5kcyBiZWZvcmUgYWNjZXNzaW5nXG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSAwICYmIHRoaXMuaGlzdG9yeUluZGV4IDwgdGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwOyAvLyBSZXNldCByZW5kZXIgb2Zmc2V0IGZvciBuZXcgYnVmZmVyXG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnZG93bicpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoMSkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ICE9PSAtMSkge1xuICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCsrO1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gdGhpcy5oaXN0b3J5Lmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSAwKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFNhZmV0eTogaW52YWxpZCBzdGF0ZSwgcmVzZXRcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwOyAvLyBSZXNldCByZW5kZXIgb2Zmc2V0IGZvciBuZXcgYnVmZmVyXG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndGFiJykge1xuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKGZhbHNlKSkgcmV0dXJuO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChzdHIgJiYgIW5vcm1hbGl6ZWRLZXkuY3RybCAmJiAhbm9ybWFsaXplZEtleS5tZXRhKSB7XG4gICAgICAvLyBEZWZlciBpbnNlcnRpb24gdG8gYWxsb3cgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBjYXRjaCByYXBpZCBpbnB1dFxuICAgICAgdGhpcy5xdWV1ZVBlbmRpbmdJbnNlcnQoc3RyKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRW5zdXJlIGhvcml6b250YWwgY3Vyc29yIHBvc2l0aW9uIHN0YXlzIHdpdGhpbiB0aGUgdmlzaWJsZSBpbnB1dCB3aW5kb3cuXG4gICAqIFByZXZlbnRzIGp1bXBzIHdoZW4gdXNpbmcgbGVmdC9yaWdodCBhcnJvd3Mgb24gbG9uZyBsaW5lcy5cbiAgICovXG4gIHByaXZhdGUgZW5zdXJlQ3Vyc29yVmlzaWJsZSgpOiB2b2lkIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMTIpOyAvLyBtYXJnaW4gZm9yIHByb21wdC90b2dnbGVzIGFuZCBwYWRkaW5nXG4gICAgLy8gSWYgY3Vyc29yIGlzIGxlZnQgb2YgY3VycmVudCB3aW5kb3csIHNoaWZ0IHdpbmRvdyBsZWZ0XG4gICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5pbnB1dFJlbmRlck9mZnNldCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICAvLyBJZiBjdXJzb3IgaXMgYmV5b25kIHZpc2libGUgd2luZG93LCBzaGlmdCB3aW5kb3cgcmlnaHRcbiAgICBpZiAodGhpcy5jdXJzb3IgLSB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID49IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3IgLSBtYXhXaWR0aCArIDE7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHJhdyBlc2NhcGUgc2VxdWVuY2VzIHdoZW4gcmVhZGxpbmUgZG9lc24ndCBwb3B1bGF0ZSBrZXkgbWV0YWRhdGEuXG4gICAqIFByZXZlbnRzIGNvbnRyb2wgY29kZXMgKGUuZy4sIF5bWzIwMH4pIGZyb20gbGVha2luZyBpbnRvIHRoZSBidWZmZXIuXG4gICAqL1xuICBwcml2YXRlIHBhcnNlRXNjYXBlU2VxdWVuY2Uoc2VxdWVuY2U6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiByZWFkbGluZS5LZXkgfCBudWxsIHtcbiAgICBpZiAoIXNlcXVlbmNlKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBtYXA6IFJlY29yZDxzdHJpbmcsIHJlYWRsaW5lLktleT4gPSB7XG4gICAgICAnXFx4MWJbQSc6IHsgbmFtZTogJ3VwJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQic6IHsgbmFtZTogJ2Rvd24nLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltDJzogeyBuYW1lOiAncmlnaHQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltEJzogeyBuYW1lOiAnbGVmdCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0gnOiB7IG5hbWU6ICdob21lJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRic6IHsgbmFtZTogJ2VuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiWzIwMH4nOiB7IG5hbWU6ICdwYXN0ZS1zdGFydCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiWzIwMX4nOiB7IG5hbWU6ICdwYXN0ZS1lbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICB9O1xuICAgIHJldHVybiBtYXBbc2VxdWVuY2VdID8/IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogUXVldWUgY2hhcmFjdGVycyBmb3IgZGVmZXJyZWQgaW5zZXJ0aW9uLiBUaGlzIHByZXZlbnRzIHZpc3VhbCBcImxlYWtcIiBvZlxuICAgKiBwYXN0ZWQgY29udGVudCBieSBob2xkaW5nIGNoYXJhY3RlcnMgdW50aWwgd2UncmUgY29uZmlkZW50IGl0J3Mgbm90IGEgcGFzdGUuXG4gICAqL1xuICBwcml2YXRlIHF1ZXVlUGVuZGluZ0luc2VydCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgKz0gdGV4dDtcblxuICAgIC8vIENsZWFyIGFueSBleGlzdGluZyB0aW1lclxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTY2hlZHVsZSBjb21taXQgYWZ0ZXIgZGVsYXkgLSBpZiBwYXN0ZSBkZXRlY3Rpb24gdHJpZ2dlcnMgZmlyc3QsIGl0IHdpbGwgY29uc3VtZSB0aGUgYnVmZmVyXG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuY29tbWl0UGVuZGluZ0luc2VydCgpO1xuICAgIH0sIHRoaXMucGVuZGluZ0luc2VydERlbGF5TXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbW1pdCBwZW5kaW5nIGNoYXJhY3RlcnMgYXMgbm9ybWFsIGlucHV0IChub3QgYSBwYXN0ZSkuXG4gICAqL1xuICBwcml2YXRlIGNvbW1pdFBlbmRpbmdJbnNlcnQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgJiYgIXRoaXMuaW5QbGFpblBhc3RlICYmICF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgIHRoaXMuaW5zZXJ0VGV4dCh0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIpO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBpbnRvIHBhc3RlIGRldGVjdGlvbiAocHJldmVudHMgdmlzdWFsIGxlYWspLlxuICAgKi9cbiAgcHJpdmF0ZSBjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgICBjb25zdCBjb25zdW1lZCA9IHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcjtcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICByZXR1cm4gY29uc3VtZWQ7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUJyYWNrZXRlZFBhc3RlKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHNlcXVlbmNlID0ga2V5Py5zZXF1ZW5jZSB8fCBzdHI7XG4gICAgaWYgKHNlcXVlbmNlID09PSBFU0MuRU5BQkxFX0JSQUNLRVRFRF9QQVNURSB8fCBzZXF1ZW5jZSA9PT0gRVNDLkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY2FzZSB3aGVyZSBwYXN0ZSBtYXJrZXJzIG1pZ2h0IGJlIGVtYmVkZGVkIGluIHRoZSBzdHJpbmdcbiAgICBjb25zdCBwYXN0ZVN0YXJ0TWFya2VyID0gJ1xceDFiWzIwMH4nO1xuICAgIGNvbnN0IHBhc3RlRW5kTWFya2VyID0gJ1xceDFiWzIwMX4nO1xuXG4gICAgLy8gQ2hlY2sgaWYgc3RyIGNvbnRhaW5zIHBhc3RlIHN0YXJ0IG1hcmtlciAoaGFuZGxlcyBjaHVua2VkIGFycml2YWwpXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5pbmNsdWRlcyhwYXN0ZVN0YXJ0TWFya2VyKSkge1xuICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgICAgLy8gQ29uc3VtZSBhbmQgc2FuaXRpemUgcGVuZGluZyBidWZmZXIgdG8gcHJldmVudCBwYXJ0aWFsIGVzY2FwZSBzZXF1ZW5jZXMgbGVha2luZ1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5jb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCkpO1xuICAgICAgLy8gRXh0cmFjdCBjb250ZW50IGFmdGVyIHRoZSBzdGFydCBtYXJrZXIgKGRpc2NhcmQgYW55IGNvbnRlbnQgYmVmb3JlIGl0IC0gbGlrZWx5IHBhcnRpYWwgZXNjYXBlcylcbiAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gc3RyLmluZGV4T2YocGFzdGVTdGFydE1hcmtlcik7XG4gICAgICBsZXQgY29udGVudCA9IHN0ci5zbGljZShzdGFydElkeCArIHBhc3RlU3RhcnRNYXJrZXIubGVuZ3RoKTtcbiAgICAgIC8vIENoZWNrIGlmIGVuZCBtYXJrZXIgaXMgYWxzbyBpbiB0aGlzIGNodW5rXG4gICAgICBpZiAoY29udGVudC5pbmNsdWRlcyhwYXN0ZUVuZE1hcmtlcikpIHtcbiAgICAgICAgY29uc3QgZW5kSWR4ID0gY29udGVudC5pbmRleE9mKHBhc3RlRW5kTWFya2VyKTtcbiAgICAgICAgY29udGVudCA9IGNvbnRlbnQuc2xpY2UoMCwgZW5kSWR4KTtcbiAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmcgKyBjb250ZW50O1xuICAgICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmcgKyBjb250ZW50O1xuICAgICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgaWYgKHNlcXVlbmNlID09PSBwYXN0ZVN0YXJ0TWFya2VyKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBhbmQgc2FuaXRpemUgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciB0byBwcmV2ZW50IHBhcnRpYWwgZXNjYXBlcyBsZWFraW5nXG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKSk7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gcGVuZGluZztcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIENoZWNrIGlmIHN0ciBjb250YWlucyBwYXN0ZSBlbmQgbWFya2VyXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5pbmNsdWRlcyhwYXN0ZUVuZE1hcmtlcikpIHtcbiAgICAgIGNvbnN0IGVuZElkeCA9IHN0ci5pbmRleE9mKHBhc3RlRW5kTWFya2VyKTtcbiAgICAgIGNvbnN0IGNvbnRlbnRCZWZvcmUgPSBzdHIuc2xpY2UoMCwgZW5kSWR4KTtcbiAgICAgIGlmIChjb250ZW50QmVmb3JlKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBjb250ZW50QmVmb3JlKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChzZXF1ZW5jZSA9PT0gcGFzdGVFbmRNYXJrZXIpIHtcbiAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAncmV0dXJuJyB8fCBrZXk/Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCAnXFxuJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleT8ubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSB0aGlzLnBhc3RlQnVmZmVyLnNsaWNlKDAsIC0xKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzdHIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VxdWVuY2UgPT09ICdzdHJpbmcnICYmIHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzZXF1ZW5jZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNvbW1pdFBhc3RlQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSByZXR1cm47XG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgICBpZiAobGluZXMubGVuZ3RoID4gMSB8fCBjb250ZW50Lmxlbmd0aCA+IDIwMCkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksIC8vIEluZGljYXRlIHRydW5jYXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmluc2VydFRleHQoY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBsYWluUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgLy8gRmFsbGJhY2sgcGFzdGUgY2FwdHVyZSB3aGVuIGJyYWNrZXRlZCBwYXN0ZSBpc24ndCBzdXBwb3J0ZWRcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IGtleT8uY3RybCB8fCBrZXk/Lm1ldGEpIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIC8vIERvbid0IHRyZWF0IGVzY2FwZSBzZXF1ZW5jZXMgKGFycm93IGtleXMsIGV0Yy4pIGFzIHBhc3RlXG4gICAgLy8gRXNjYXBlIHNlcXVlbmNlcyBzdGFydCB3aXRoIFxceDFiIChFU0MpIGFuZCBhcmUgdXNlZCBmb3IgY3Vyc29yIG1vdmVtZW50LCBldGMuXG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5zdGFydHNXaXRoKCdcXHgxYicpKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgPz8gJyc7XG4gICAgY29uc3QgY2h1bmsgPSB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCA/IHN0ciA6IHNlcXVlbmNlO1xuICAgIGlmICghY2h1bmspIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy50cmFja1BsYWluUGFzdGVCdXJzdChjaHVuay5sZW5ndGgsIG5vdyk7XG5cbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLnJlY29yZFJlY2VudFBsYWluQ2h1bmsoY2h1bmssIG5vdyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmtNdWx0aXBsZSA9IGNodW5rLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaGFzTmV3bGluZSA9IC9bXFxyXFxuXS8udGVzdChjaHVuayk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgY29uc3QgYnVyc3RUcmlnZ2VyID0gYnVyc3RBY3RpdmUgJiYgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZVRyaWdnZXJDaGFycztcbiAgICBjb25zdCBoYXNSZWNlbnROb25OZXdsaW5lID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5zb21lKGVudHJ5ID0+ICEvXltcXHJcXG5dKyQvLnRlc3QoZW50cnkudGV4dCkpO1xuICAgIGNvbnN0IGVhcmx5TmV3bGluZVRyaWdnZXIgPVxuICAgICAgaGFzTmV3bGluZSAmJlxuICAgICAgYnVyc3RBY3RpdmUgJiZcbiAgICAgIGhhc1JlY2VudE5vbk5ld2xpbmUgJiZcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycztcbiAgICBjb25zdCBuZXdsaW5lVHJpZ2dlciA9IGhhc05ld2xpbmUgJiYgKHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IGVhcmx5TmV3bGluZVRyaWdnZXIpO1xuICAgIGNvbnN0IGxvb2tzTGlrZVBhc3RlID0gdGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgbmV3bGluZVRyaWdnZXI7XG5cbiAgICBpZiAoIWxvb2tzTGlrZVBhc3RlKSB7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBmaXJzdCAtIHRoaXMgaXMgdGhlIHByaW1hcnkgc291cmNlIG5vd1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgY29uc3QgcmVjbGFpbWVkID0gdGhpcy5yZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIC8vIENvbWJpbmUgcGVuZGluZyBidWZmZXIgd2l0aCBhbnkgcmVjbGFpbWVkIGNodW5rc1xuICAgICAgY29uc3QgY29tYmluZWQgPSBwZW5kaW5nICsgcmVjbGFpbWVkO1xuICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjaGFycyB0aGF0IGxlYWtlZCBpbnRvIGJ1ZmZlciAobGVnYWN5IHJlY2xhaW0gcGF0aClcbiAgICAgICAgaWYgKHJlY2xhaW1lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlQ291bnQgPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGgsIHJlY2xhaW1lZC5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IHN1ZmZpeCA9IHRoaXMuYnVmZmVyLnNsaWNlKC1yZW1vdmVDb3VudCk7XG4gICAgICAgICAgaWYgKHJlbW92ZUNvdW50ID4gMCAmJiBzdWZmaXggPT09IHJlY2xhaW1lZC5zbGljZSgtcmVtb3ZlQ291bnQpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuYnVmZmVyLmxlbmd0aCAtIHJlbW92ZUNvdW50KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgdGhpcy5idWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSBjb21iaW5lZC5zbGljZSgwLCB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSk7XG4gICAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBjb21iaW5lZC5lbmRzV2l0aChjaHVuayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNodW5rQWxyZWFkeUNhcHR1cmVkKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3BsYWluUGFzdGUnLCBjaHVuayk7XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGxlbmd0aDogbnVtYmVyLCBub3c6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgfHwgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcykge1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSBub3c7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgKz0gbGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFBsYWluUGFzdGVCdXJzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICAvLyBBbHNvIGNhbmNlbCBwZW5kaW5nIGluc2VydCBidWZmZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkUmVjZW50UGxhaW5DaHVuayh0ZXh0OiBzdHJpbmcsIGF0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IGF0IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcy5wdXNoKHsgdGV4dCwgYXQgfSk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybiAnJztcbiAgICBjb25zdCBjb21iaW5lZCA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MubWFwKGVudHJ5ID0+IGVudHJ5LnRleHQpLmpvaW4oJycpO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cblxuICBwcml2YXRlIHNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgfVxuICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmZpbmFsaXplUGxhaW5QYXN0ZSgpO1xuICAgIH0sIHRoaXMucGxhaW5QYXN0ZUlkbGVNcyk7XG4gIH1cblxuICBwcml2YXRlIGZpbmFsaXplUGxhaW5QYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSByZXR1cm47XG5cbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wbGFpblBhc3RlQnVmZmVyKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIC8vIERvbid0IGluc2VydCBkdXJpbmcgcGFzdGUgb3BlcmF0aW9ucyAtIGNvbnRlbnQgZ29lcyB0byBwYXN0ZSBidWZmZXJcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IHRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUgYW5kIHVzZXIgdHlwZXMsIGV4cGFuZCB0byBidWZmZXIgZmlyc3QgdGhlbiBpbnNlcnQgYXQgY3Vyc29yXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgIH1cbiAgICAvLyBTYW5pdGl6ZSBpbnB1dCB0byByZW1vdmUgc3BlY2lhbCBmb3JtYXR0aW5nIGNoYXJhY3RlcnNcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRleHQpO1xuICAgIGlmICghc2FuaXRpemVkKSByZXR1cm47XG4gICAgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZCBiZWZvcmUgc2xpY2luZ1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHNhbml0aXplZCArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICB0aGlzLmN1cnNvciArPSBzYW5pdGl6ZWQubGVuZ3RoO1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciByZW1haW5zIHZhbGlkIGFmdGVyIG1vZGlmaWNhdGlvblxuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgc3VibWl0IHRoYXQgaW5zdGVhZCBvZiB0aGUgYnVmZmVyIHRleHRcbiAgICAvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBzdWJtaXRUZXh0IGlzIGNhbGxlZCBwcm9ncmFtbWF0aWNhbGx5XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIGNvbnN0IHNob3VsZFRyaW0gPSB0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLnRyaW07XG4gICAgICBjb25zdCBub3JtYWxpemVkQ2FwdHVyZSA9IHNob3VsZFRyaW0gPyB0ZXh0LnRyaW0oKSA6IHRleHQ7XG4gICAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMuYWxsb3dFbXB0eSAmJiAhbm9ybWFsaXplZENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKG5vcm1hbGl6ZWRDYXB0dXJlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFkZCBzZWNyZXRzIG9yIHNsYXNoIGNvbW1hbmRzIHRvIGhpc3Rvcnkvc2Nyb2xsYmFja1xuICAgIGlmICghdGhpcy5zZWNyZXRNb2RlICYmICFub3JtYWxpemVkLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgdGhpcy5kaXNwbGF5VXNlclByb21wdChub3JtYWxpemVkKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNlY3JldE1vZGUpIHtcbiAgICAgIC8vIFN0aWxsIHRyYWNrIHNsYXNoIGNvbW1hbmRzIGluIGhpc3RvcnkgZm9yIGNvbnZlbmllbmNlXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICB0aGlzLmVtaXQoJ3F1ZXVlJywgbm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdCgnc3VibWl0Jywgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0U3BhY2UgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCcgJyk7XG4gICAgY29uc3QgaGFzQXJnVGV4dCA9IGZpcnN0U3BhY2UgPj0gMCAmJiAvXFxTLy50ZXN0KHRoaXMuYnVmZmVyLnNsaWNlKGZpcnN0U3BhY2UgKyAxKSk7XG4gICAgLy8gSGlkZSBzbGFzaCBzdWdnZXN0aW9ucyB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYXJndW1lbnRzXG4gICAgaWYgKGZpcnN0U3BhY2UgPj0gMCAmJiB0aGlzLmN1cnNvciA+IGZpcnN0U3BhY2UgJiYgaGFzQXJnVGV4dCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yU2xpY2UgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgY29uc3QgY29tbWFuZFNsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gY3Vyc29yU2xpY2Uuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiBjdXJzb3JTbGljZTtcbiAgICBjb25zdCBmYWxsYmFja1NsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gdGhpcy5idWZmZXIuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiB0aGlzLmJ1ZmZlcjtcbiAgICBjb25zdCBwYXJ0aWFsID0gKGNvbW1hbmRTbGljZS50cmltRW5kKCkgfHwgZmFsbGJhY2tTbGljZS50cmltRW5kKCkgfHwgJy8nKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnN1Z2dlc3Rpb25JbmRleF0/LmNvbW1hbmQ7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuYXZhaWxhYmxlQ29tbWFuZHNcbiAgICAgIC5maWx0ZXIoY21kID0+IGNtZC5jb21tYW5kLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYXJ0aWFsKSlcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc3VnZ2VzdGlvbnMuZmluZEluZGV4KHMgPT4gcy5jb21tYW5kID09PSBwcmV2aW91cyk7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGlkeCA+PSAwID8gaWR4IDogMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHNldEF2YWlsYWJsZUNvbW1hbmRzKGNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuYXZhaWxhYmxlQ29tbWFuZHMgPSBjb21tYW5kcztcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5U3VnZ2VzdGlvbihzdWJtaXQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgc3VnZ2VzdGlvbkluZGV4IGlzIHZhbGlkLCBkZWZhdWx0IHRvIGZpcnN0IGl0ZW1cbiAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogMDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XTtcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdWJtaXQpIHtcbiAgICAgIHRoaXMuc3VibWl0VGV4dChzZWxlY3RlZC5jb21tYW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWZmZXIgPSBgJHtzZWxlY3RlZC5jb21tYW5kfSBgO1xuICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVTdWdnZXN0aW9ucyhkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXNldCBpbmRleCBpZiBzdWdnZXN0aW9ucyB3ZXJlIGNsZWFyZWQgYnV0IGluZGV4IHdhc24ndFxuICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkluZGV4ICE9PSAtMSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3VycmVudCBpbmRleCBpcyB2YWxpZCBiZWZvcmUgY29tcHV0aW5nIG5leHRcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogLTE7XG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBjb25zdCBjbGFtcGVkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxLCBuZXh0KSk7XG4gICAgaWYgKGNsYW1wZWQgPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4ICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGNsYW1wZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBFdmVudCBxdWV1ZSAtLS0tLS0tLS0tLS1cblxuICBhZGRFdmVudCh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplRXZlbnRUeXBlKHR5cGUpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgIGlmIChcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAncmVzcG9uc2UnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGhvdWdodCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdzdHJlYW0nIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdidWlsZCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0ZXN0J1xuICAgICkge1xuICAgICAgdGhpcy5oYXNDb252ZXJzYXRpb25Db250ZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcpIHtcbiAgICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRDb250ZW50KHtcbiAgICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVkKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkIDogYCR7Zm9ybWF0dGVkfVxcbmA7XG4gICAgICAgIHRoaXMub3V0cHV0LndyaXRlKHRleHQpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdGV4dC5lbmRzV2l0aCgnXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIC8vIFByaW9yaXR5IHF1ZXVlOiBwcm9tcHQgZXZlbnRzIGFyZSBpbnNlcnRlZCBhdCB0aGUgZnJvbnQgdG8gZW5zdXJlIGltbWVkaWF0ZSBkaXNwbGF5XG4gICAgLy8gVGhpcyBndWFyYW50ZWVzIHVzZXIgaW5wdXQgaXMgZWNob2VkIGJlZm9yZSBhbnkgYXN5bmMgcHJvY2Vzc2luZyByZXNwb25zZXNcbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Byb21wdCcpIHtcbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IG5vbi1wcm9tcHQgZXZlbnQgYW5kIGluc2VydCBiZWZvcmUgaXRcbiAgICAgIC8vIFRoaXMgbWFpbnRhaW5zIHByb21wdCBvcmRlciB3aGlsZSBnaXZpbmcgdGhlbSBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50c1xuICAgICAgY29uc3QgaW5zZXJ0SW5kZXggPSB0aGlzLmV2ZW50UXVldWUuZmluZEluZGV4KGUgPT4gZS50eXBlICE9PSAncHJvbXB0Jyk7XG4gICAgICBpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1yZW5kZXIgdGhlIHByb21wdC9jb250cm9sIGJhciBpbW1lZGlhdGVseS5cbiAgICogVGhpcyBrZWVwcyB0aGUgY2hhdCBib3ggcGlubmVkIGR1cmluZyBsb25nIHN0cmVhbWluZyBydW5zIGluc3RlYWQgb2Ygd2FpdGluZ1xuICAgKiBmb3IgdGhlIGV2ZW50IHF1ZXVlIHRvIGRyYWluIGJlZm9yZSB0aGUgcHJvbXB0IHJlYXBwZWFycy5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0T3ZlcmxheShpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluTW9kZSB8fCB0aGlzLmRpc3Bvc2VkIHx8ICF0aGlzLm91dHB1dC5pc1RUWSB8fCB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKCFldmVudCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNvYWxlc2NlZCA9IHRoaXMuY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRXZlbnQoY29hbGVzY2VkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBOZXZlciBhbGxvdyBhIHJlbmRlcmluZyBmYWlsdXJlIHRvIHN0YWxsIHRoZSBldmVudCBxdWV1ZVxuICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhazsgLy8gRG9uJ3QgdHJ5IHRvIHdyaXRlIGFmdGVyIGRpc3Bvc2FsXG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6ICdVbmtub3duIHJlbmRlcmVyIGVycm9yJztcbiAgICAgICAgICB0aGlzLm91dHB1dC53cml0ZShgXFxuW3JlbmRlcmVyXSAke21lc3NhZ2V9XFxuYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBkaXNwb3NlZCBiZWZvcmUgY29udGludWluZ1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7XG5cbiAgICAgICAgLy8gTm90ZTogRm9yIHByb21wdCBldmVudHMsIHRoZSBvdmVybGF5IGlzIGFscmVhZHkgcmVuZGVyZWQgaW4gcmVuZGVyRXZlbnQoKVxuICAgICAgICAvLyB2aWEgcmVuZGVyUHJvbXB0T3ZlcmxheSh0cnVlKS4gTm8gbmVlZCB0byByZW5kZXIgYWdhaW4gaGVyZS5cbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwcm9tcHQnKSB7XG4gICAgICAgICAgLy8gRW5zdXJlIHByb21wdCByZW5kZXJpbmcgaXMgYWxsb3dlZCBmb3Igc3Vic2VxdWVudCBldmVudHNcbiAgICAgICAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBObyBkZWxheSBmb3IgcHJvbXB0IGV2ZW50cyAtIHJlbmRlciBpbW1lZGlhdGVseVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFMV0FZUyByZW5kZXIgcHJvbXB0IGFmdGVyIHF1ZXVlIGNvbXBsZXRlcyB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50XG4gICAgICAvLyBUaGlzIGVuc3VyZXMgc3RhdHVzL3RvZ2dsZXMgc3RheSBwaW5uZWQgYW5kIHJlc3BvbnNlcyBhcmUgZnVsbHkgcmVuZGVyZWRcbiAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSBhZGphY2VudCByZXNwb25zZS90aG91Z2h0IGV2ZW50cyBpbnRvIGEgc2luZ2xlIGJsb2NrIHNvIGNvbnRpbnVvdXNcbiAgICogY2hhdCB0ZXh0IHJlbmRlcnMgd2l0aCBvbmUgYnVsbGV0IGluc3RlYWQgb2Ygb25lIHBlciBjaHVuay5cbiAgICovXG4gIHByaXZhdGUgY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQ6IFVJRXZlbnQpOiBVSUV2ZW50IHtcbiAgICBjb25zdCBpc01lcmdlYWJsZSA9ICh0YXJnZXQ6IFVJRXZlbnQgfCB1bmRlZmluZWQpOiB0YXJnZXQgaXMgVUlFdmVudCA9PlxuICAgICAgQm9vbGVhbihcbiAgICAgICAgdGFyZ2V0ICYmXG4gICAgICAgICAgIXRhcmdldC5pc0NvbXBhY3RlZCAmJlxuICAgICAgICAgICgodGFyZ2V0LnR5cGUgPT09ICdyZXNwb25zZScgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICdyZXNwb25zZScpIHx8XG4gICAgICAgICAgICAodGFyZ2V0LnR5cGUgPT09ICd0aG91Z2h0JyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Rob3VnaHQnKSlcbiAgICAgICk7XG5cbiAgICBpZiAoIWlzTWVyZ2VhYmxlKGV2ZW50KSkge1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cblxuICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiBpc01lcmdlYWJsZSh0aGlzLmV2ZW50UXVldWVbMF0pKSB7XG4gICAgICBjb25zdCBuZXh0ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgY29uc3QgbmVlZHNTZXBhcmF0b3IgPVxuICAgICAgICBldmVudC5jb250ZW50Lmxlbmd0aCA+IDAgJiYgIWV2ZW50LmNvbnRlbnQuZW5kc1dpdGgoJ1xcbicpICYmICFuZXh0LmNvbnRlbnQuc3RhcnRzV2l0aCgnXFxuJyk7XG4gICAgICBldmVudC5jb250ZW50ID0gbmVlZHNTZXBhcmF0b3IgPyBgJHtldmVudC5jb250ZW50fVxcbiR7bmV4dC5jb250ZW50fWAgOiBgJHtldmVudC5jb250ZW50fSR7bmV4dC5jb250ZW50fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHBlbmRpbmcgcmVuZGVyZXIgZXZlbnRzLlxuICAgKiBVc2VmdWwgZm9yIHN0YXJ0dXAgZmxvd3MgKGUuZy4sIHdlbGNvbWUgYmFubmVyKSB0byBndWFyYW50ZWUgdGhlIHNjcm9sbGJhY2sgaXMgaHlkcmF0ZWRcbiAgICogYmVmb3JlIGNvbnRpbnVpbmcgd2l0aCBhZGRpdGlvbmFsIFVJIHVwZGF0ZXMuXG4gICAqL1xuICBhc3luYyBmbHVzaEV2ZW50cyh0aW1lb3V0TXM6IG51bWJlciA9IDI1MCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEtpY2sgb2ZmIHByb2Nlc3NpbmcgaWYgaWRsZVxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUgJiYgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKCh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSAmJiBEYXRlLm5vdygpIC0gc3RhcnQgPCB0aW1lb3V0TXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyRXZlbnQoZXZlbnQ6IFVJRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFBsYWluID0gdGhpcy5mb3JtYXRDb250ZW50KGV2ZW50KTtcbiAgICAgIGlmIChmb3JtYXR0ZWRQbGFpbikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkUGxhaW4uZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkUGxhaW4gOiBgJHtmb3JtYXR0ZWRQbGFpbn1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgaWYgKCFmb3JtYXR0ZWQpIHJldHVybjtcblxuICAgIC8vIEFsbG93IHByb21wdHMgYW5kIHJlc3BvbnNlcyB0byBhbHdheXMgcmVuZGVyIChkb24ndCBkZWR1cGxpY2F0ZSlcbiAgICAvLyBPbmx5IGRlZHVwbGljYXRlIHN0cmVhbWluZyBjb250ZW50XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYCR7ZXZlbnQucmF3VHlwZX06JHtldmVudC5jb250ZW50fWA7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzdHJlYW0nICYmIHNpZ25hdHVyZSA9PT0gdGhpcy5sYXN0UmVuZGVyZWRFdmVudEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3Byb21wdCcpIHtcbiAgICAgIHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkgPSBzaWduYXR1cmU7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIHByb21wdCBhcmVhIGJlZm9yZSB3cml0aW5nIG5ldyBjb250ZW50XG4gICAgaWYgKHRoaXMucHJvbXB0SGVpZ2h0ID4gMCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG5cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3N0cmVhbScgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgJiYgZm9ybWF0dGVkLnRyaW0oKSkge1xuICAgICAgLy8gS2VlcCBzY3JvbGxiYWNrIG9yZGVyaW5nIHByZWRpY3RhYmxlIHdoZW4gcHJldmlvdXMgb3V0cHV0IGVuZGVkIG1pZC1saW5lXG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFxuJyk7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLm91dHB1dC53cml0ZShmb3JtYXR0ZWQpO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpO1xuXG4gICAgLy8gSW1tZWRpYXRlbHkgcmVzdG9yZSB0aGUgcHJvbXB0IG92ZXJsYXkgc28gdGhlIGNoYXQgYm94IHN0YXlzIHBpbm5lZCBkdXJpbmcgc3RyZWFtaW5nXG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0T3ZlcmxheSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSk6IENhbm9uaWNhbEV2ZW50VHlwZSB8IG51bGwge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgcmV0dXJuICdwcm9tcHQnO1xuICAgICAgY2FzZSAndGhvdWdodCc6XG4gICAgICAgIHJldHVybiAndGhvdWdodCc7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgY2FzZSAnc3RyZWFtaW5nJzpcbiAgICAgICAgcmV0dXJuICdzdHJlYW0nO1xuICAgICAgY2FzZSAndG9vbCc6XG4gICAgICBjYXNlICd0b29sLWNhbGwnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wnO1xuICAgICAgY2FzZSAndG9vbC1yZXN1bHQnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wtcmVzdWx0JztcbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuICdidWlsZCc7XG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuICd0ZXN0JztcbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGNhc2UgJ2Jhbm5lcic6XG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgICByZXR1cm4gJ3Jlc3BvbnNlJztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoZXZlbnQ6IFVJRXZlbnQpOiBzdHJpbmcge1xuICAgIC8vIENvbXBhY3RlZCBibG9ja3MgYWxyZWFkeSBoYXZlIHNlcGFyYXRvciBhbmQgZm9ybWF0dGluZ1xuICAgIGlmIChldmVudC5pc0NvbXBhY3RlZCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnJhd1R5cGUgPT09ICdiYW5uZXInKSB7XG4gICAgICAvLyBCYW5uZXJzIGRpc3BsYXkgd2l0aG91dCBidWxsZXQgcHJlZml4XG4gICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbUVuZCgpKTtcbiAgICAgIHJldHVybiBgJHtsaW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIENvbXBhY3QsIHVzZXItZnJpZW5kbHkgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgLy8gVXNlciBwcm9tcHQgLSBqdXN0IHRoZSB0ZXh0IChwcm9tcHQgYm94IGhhbmRsZXMgc3R5bGluZylcbiAgICAgICAgcmV0dXJuIGAke3RoZW1lLnByaW1hcnkoJz4nKX0gJHtldmVudC5jb250ZW50fVxcbmA7XG5cbiAgICAgIGNhc2UgJ3Rob3VnaHQnOiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VyYXRlZCA9IHRoaXMuY3VyYXRlUmVhc29uaW5nQ29udGVudChldmVudC5jb250ZW50KTtcbiAgICAgICAgaWYgKCFjdXJhdGVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXJUaG91Z2h0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ID0ge1xuICAgICAgICAgIHRleHQ6IGN1cmF0ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaGlua2luZ0Jsb2NrKGN1cmF0ZWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sJzoge1xuICAgICAgICAvLyBDb21wYWN0IHRvb2wgZGlzcGxheTog4pqhVG9vbE5hbWUg4oaSIHJlc3VsdFxuICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnQuY29udGVudC5yZXBsYWNlKC9eW+KPuuKameKXi11cXHMqLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbENhbGwoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0Jzoge1xuICAgICAgICAvLyBJbmxpbmUgcmVzdWx0OiDilJTilIAgc3VtbWFyeVxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbFJlc3VsdChldmVudC5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYnVpbGQnOlxuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCB7IGxhYmVsOiAnYnVpbGQnLCBsYWJlbENvbG9yOiB0aGVtZS53YXJuaW5nIH0pO1xuXG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ3Rlc3QnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgICBjYXNlICdzdHJlYW0nOiB7XG4gICAgICAgIC8vIFN0cmVhbWluZyBjb250ZW50IGlzIHRoZSBtb2RlbCdzIHJlc3BvbnNlIC0gcGFzcyB0aHJvdWdoIGRpcmVjdGx5XG4gICAgICAgIC8vIElNUE9SVEFOVDogRG9uJ3QgZmlsdGVyIHN0cmVhbWluZyBjaHVua3Mgd2l0aCBpc0dhcmJhZ2VPdXRwdXQgYmVjYXVzZTpcbiAgICAgICAgLy8gMS4gQ2h1bmtzIGFycml2ZSBjaGFyYWN0ZXItYnktY2hhcmFjdGVyIG9yIGluIHNtYWxsIHBpZWNlc1xuICAgICAgICAvLyAyLiBTbWFsbCBjaHVua3MgbGlrZSBcIi5cIiBvciBcIjpcIiBhcmUgdmFsaWQgcGFydHMgb2Ygc2VudGVuY2VzXG4gICAgICAgIC8vIDMuIEZpbHRlcmluZyB3b3VsZCBicmVhayB0aGUgc3RyZWFtaW5nIGRpc3BsYXlcbiAgICAgICAgLy8gT25seSBmaWx0ZXIgY29tcGxldGVseSBlbXB0eSBjb250ZW50XG4gICAgICAgIGlmICghZXZlbnQuY29udGVudCkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZXZlbnQuY29udGVudDtcbiAgICAgIH1cblxuICAgICAgY2FzZSAncmVzcG9uc2UnOlxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHJlc3BvbnNlIHdpdGhvdXQgZXhjZXNzaXZlIGJ1bGxldHMsIHdyYXBwZWQgZm9yIHJlYWRhYmlsaXR5XG4gICAgICAgIGNvbnN0IGlzRXJyb3IgPSBldmVudC5yYXdUeXBlID09PSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCBpc0Vycm9yID8geyBsYWJlbDogJ2Vycm9yJywgbGFiZWxDb2xvcjogdGhlbWUuZXJyb3IgfSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpYyBnYXJiYWdlIGRldGVjdGlvbiAtIGNoZWNrcyBpZiBjb250ZW50IGxvb2tzIGxpa2UgaW50ZXJuYWwvc3lzdGVtIG91dHB1dFxuICAgKiB0aGF0IHNob3VsZG4ndCBiZSBzaG93biB0byB1c2Vycy4gVXNlcyBzdHJ1Y3R1cmFsIGNoZWNrcywgbm90IHBhdHRlcm4gbWF0Y2hpbmcuXG4gICAqL1xuICBwcml2YXRlIGlzR2FyYmFnZU91dHB1dChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIGNvbnN0IHRyaW1tZWQgPSBjb250ZW50LnRyaW0oKTtcblxuICAgIC8vIFZlcnkgc2hvcnQgY29udGVudCBjaGVja3MgLSBjYXRjaCBsZWFrZWQgcHVuY3R1YXRpb24gZnJhZ21lbnRzIGxpa2UgXCIuXCIgb3IgXCI6XCJcbiAgICBpZiAodHJpbW1lZC5sZW5ndGggPD0gMykge1xuICAgICAgLy8gU2luZ2xlIHB1bmN0dWF0aW9uIG1hcmtzIG9yIHZlcnkgc2hvcnQgcHVuY3R1YXRpb24gc2VxdWVuY2VzIGFyZSBnYXJiYWdlXG4gICAgICBpZiAoL15bLiw6OyE/KiNcXC1fPSt8XFxcXC88Pigpe31bXFxdYCdcIn5eQCYlJF0rJC8udGVzdCh0cmltbWVkKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBjb250ZW50IGlzIGp1c3QgcHVuY3R1YXRpb24gb24gbXVsdGlwbGUgbGluZXMgKGxlYWtlZCByZWFzb25pbmcpXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCBwdW5jdE9ubHlMaW5lcyA9IGxpbmVzLmZpbHRlcihsaW5lID0+IHtcbiAgICAgIGNvbnN0IGxpbmVUcmltbWVkID0gbGluZS50cmltKCk7XG4gICAgICByZXR1cm4gbGluZVRyaW1tZWQubGVuZ3RoID4gMCAmJiAvXlsuLDo7IT8qI1xcLV89K3xcXFxcLzw+KCl7fVtcXF1gJ1wifl5AJiUkXFxzXSskLy50ZXN0KGxpbmVUcmltbWVkKTtcbiAgICB9KTtcbiAgICAvLyBJZiBBTEwgbm9uLWVtcHR5IGxpbmVzIGFyZSBqdXN0IHB1bmN0dWF0aW9uLCBpdCdzIGdhcmJhZ2VcbiAgICBjb25zdCBub25FbXB0eUxpbmVzID0gbGluZXMuZmlsdGVyKGwgPT4gbC50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKG5vbkVtcHR5TGluZXMubGVuZ3RoID4gMCAmJiBwdW5jdE9ubHlMaW5lcy5sZW5ndGggPT09IG5vbkVtcHR5TGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250ZW50IHN0YXJ0aW5nIHdpdGggPCB0aGF0IGlzbid0IHZhbGlkIG1hcmtkb3duL2NvZGVcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCc8JykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPGh0dHAnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8IScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250YWlucyBcInRvPWZ1bmN0aW9ucy5cIiBvciBcInRvPXRvb2xzLlwiIChpbnRlcm5hbCByb3V0aW5nKVxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCd0bz1mdW5jdGlvbnMuJykgfHwgY29udGVudC5pbmNsdWRlcygndG89dG9vbHMuJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGxvb2tzIGxpa2UgaW50ZXJuYWwgaW5zdHJ1Y3Rpb24gKHF1b3RlZCBzeXN0ZW0gdGV4dClcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCdcIicpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ2Jsb2NrJykgJiYgY29udGVudC5pbmNsdWRlcygndG9vbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiB2ZXJ5IHNob3J0IGNvbnRlbnQgdGhhdCdzIGp1c3QgdGltaW5nIGluZm9cbiAgICBpZiAoY29udGVudC5sZW5ndGggPCAzMCAmJiAvZWxhcHNlZHxzZWNvbmRzP3xtc1xcYi9pLnRlc3QoY29udGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IG1vc3RseSBwdW5jdHVhdGlvbi9zeW1ib2xzIC0gbGVha2VkIHJlYXNvbmluZyBmcmFnbWVudHNcbiAgICBjb25zdCBtZWFuaW5nZnVsTGluZXMgPSBsaW5lcy5maWx0ZXIobGluZSA9PiB7XG4gICAgICBjb25zdCBsaW5lVHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuICAgICAgaWYgKCFsaW5lVHJpbW1lZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgLy8gTGluZSBtdXN0IGhhdmUgYXQgbGVhc3QgMzAlIGFscGhhbnVtZXJpYyBjb250ZW50XG4gICAgICBjb25zdCBhbHBoYU51bSA9IChsaW5lVHJpbW1lZC5tYXRjaCgvW2EtekEtWjAtOV0vZykgfHwgW10pLmxlbmd0aDtcbiAgICAgIHJldHVybiBsaW5lVHJpbW1lZC5sZW5ndGggPiAwICYmIGFscGhhTnVtIC8gbGluZVRyaW1tZWQubGVuZ3RoID49IDAuMztcbiAgICB9KTtcbiAgICAvLyBJZiBsZXNzIHRoYW4gMzAlIG9mIGxpbmVzIGFyZSBtZWFuaW5nZnVsLCBpdCdzIGdhcmJhZ2VcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMyAmJiBtZWFuaW5nZnVsTGluZXMubGVuZ3RoIC8gbGluZXMubGVuZ3RoIDwgMC4zKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBnaWJiZXJpc2ggLSBoaWdoIHJhdGlvIG9mIG5vbi13b3JkIGNoYXJhY3RlcnNcbiAgICBjb25zdCBhbHBoYUNvdW50ID0gKGNvbnRlbnQubWF0Y2goL1thLXpBLVpdL2cpIHx8IFtdKS5sZW5ndGg7XG4gICAgY29uc3QgdG90YWxDb3VudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzL2csICcnKS5sZW5ndGg7XG4gICAgaWYgKHRvdGFsQ291bnQgPiAyMCAmJiBhbHBoYUNvdW50IC8gdG90YWxDb3VudCA8IDAuNCkge1xuICAgICAgcmV0dXJuIHRydWU7IC8vIExlc3MgdGhhbiA0MCUgbGV0dGVycyA9IGxpa2VseSBnYXJiYWdlXG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLyoqXG4gICAqIFNhbml0aXplIHRvb2wgcmVzdWx0IGNvbnRlbnQgdG8gcmVtb3ZlIGxlYWtlZCByZWFzb25pbmcvdGhpbmtpbmcgb3V0cHV0LlxuICAgKiBUaGlzIGZpbHRlcnMgb3V0IGZyYWdtZW50cyB0aGF0IGxvb2sgbGlrZSBpbnRlcm5hbCBtb2RlbCBvdXRwdXQuXG4gICAqL1xuICBwcml2YXRlIHNhbml0aXplVG9vbFJlc3VsdENvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybiAnJztcblxuICAgIC8vIFNwbGl0IGludG8gbGluZXMgYW5kIGZpbHRlciBvdXQgZ2FyYmFnZSBsaW5lc1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgY2xlYW5MaW5lczogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgdHJpbW1lZCA9IGxpbmUudHJpbSgpO1xuXG4gICAgICAvLyBTa2lwIGVtcHR5IGxpbmVzIGF0IHN0YXJ0XG4gICAgICBpZiAoY2xlYW5MaW5lcy5sZW5ndGggPT09IDAgJiYgIXRyaW1tZWQpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIGxlYWtlZCByZWFzb25pbmcgZnJhZ21lbnRzXG4gICAgICAvLyBDb21tb24gcGF0dGVybnM6IHNpbmdsZSBwdW5jdHVhdGlvbiwgbWFya2Rvd24gYXJ0aWZhY3RzLCBlbW9qaSBmcmFnbWVudHNcbiAgICAgIGlmICgvXlspXFxdfT4qYCdcIl0rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG4gICAgICBpZiAoL15bKl9dezIsfSQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0ICoqIG9yIF9fXG4gICAgICBpZiAoL15bfOKUguKUg10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgdmVydGljYWwgYmFyc1xuICAgICAgaWYgKC9eW+KUgOKUgeKVkF0rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgaG9yaXpvbnRhbCBsaW5lc1xuICAgICAgaWYgKC9eXFwuezIsfSQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IGRvdHNcbiAgICAgIGlmICgvXltcXHPvuI9dKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlOyAvLyBKdXN0IHdoaXRlc3BhY2UvZW1vamkgbW9kaWZpZXJzXG4gICAgICBpZiAoL15bOlxcc10rJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7IC8vIEp1c3QgY29sb25zL3doaXRlc3BhY2VcbiAgICAgIGlmICgvXlssXFxzXSskLy50ZXN0KHRyaW1tZWQpKSBjb250aW51ZTsgLy8gSnVzdCBjb21tYXMvd2hpdGVzcGFjZVxuXG4gICAgICAvLyBTa2lwIG1hcmtkb3duIGJvbGQvaXRhbGljIGZyYWdtZW50cyB0aGF0IGxlYWtlZFxuICAgICAgaWYgKC9eXFwqezEsMn1bXipdKlxcKnswLDJ9JC8udGVzdCh0cmltbWVkKSAmJiB0cmltbWVkLmxlbmd0aCA8IDEwICYmICEvXFx3ezMsfS8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG5cbiAgICAgIC8vIFNraXAgbGluZXMgdGhhdCBhcmUganVzdCBzaG9ydCBmcmFnbWVudHMgd2l0aCBoaWdoIHB1bmN0dWF0aW9uIHJhdGlvXG4gICAgICBjb25zdCBhbHBoYUluTGluZSA9ICh0cmltbWVkLm1hdGNoKC9bYS16QS1aMC05XS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgICAgaWYgKHRyaW1tZWQubGVuZ3RoID4gMCAmJiB0cmltbWVkLmxlbmd0aCA8IDIwICYmIGFscGhhSW5MaW5lIC8gdHJpbW1lZC5sZW5ndGggPCAwLjMpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIHZlcnkgc2hvcnQgbGluZXMgdGhhdCBhcmUganVzdCBwdW5jdHVhdGlvbiBvciBzaW5nbGUgY2hhcnMgKGV4Y2VwdCBudW1iZXJzKVxuICAgICAgaWYgKHRyaW1tZWQubGVuZ3RoIDw9IDIgJiYgIS9eXFxkKyQvLnRlc3QodHJpbW1lZCkgJiYgIS9eW2EtekEtWl17Mn0kLy50ZXN0KHRyaW1tZWQpKSB7XG4gICAgICAgIC8vIEFsbG93IHNwZWNpZmljIHNob3J0IHBhdHRlcm5zIGxpa2UgXCJPS1wiLCBcIjBcIiwgXCIxXCIgZXRjLlxuICAgICAgICBpZiAoIS9eKD86b2t8bm98eWVzfFxcZCspJC9pLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIHN0cmF5IHBhcmVudGhlc2VzIG9yIGJyYWNrZXRzIGZyb20gcmVhc29uaW5nXG4gICAgICBpZiAoL15bKClbXFxde31dKyQvLnRlc3QodHJpbW1lZCkpIGNvbnRpbnVlO1xuXG4gICAgICAvLyBTa2lwIGxpbmVzIHRoYXQgbG9vayBsaWtlIG1hcmtkb3duIGNvZGUgZmVuY2UgYXJ0aWZhY3RzXG4gICAgICBpZiAoL15gYGBcXHMqJC8udGVzdCh0cmltbWVkKSkgY29udGludWU7XG5cbiAgICAgIGNsZWFuTGluZXMucHVzaChsaW5lKTtcbiAgICB9XG5cbiAgICAvLyBUcmltIHRyYWlsaW5nIGVtcHR5IGxpbmVzXG4gICAgd2hpbGUgKGNsZWFuTGluZXMubGVuZ3RoID4gMCAmJiAhY2xlYW5MaW5lc1tjbGVhbkxpbmVzLmxlbmd0aCAtIDFdPy50cmltKCkpIHtcbiAgICAgIGNsZWFuTGluZXMucG9wKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsZWFuTGluZXMuam9pbignXFxuJykudHJpbSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBjdXJhdGVSZWFzb25pbmdDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xcclxcbi9nLCAnXFxuJykucmVwbGFjZSgvXFxyL2csICdcXG4nKS50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IGxpbWl0ZWQgPVxuICAgICAgbm9ybWFsaXplZC5sZW5ndGggPiB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdDaGFyc1xuICAgICAgICA/IG5vcm1hbGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMpXG4gICAgICAgIDogbm9ybWFsaXplZDtcblxuICAgIGNvbnN0IG1heFNlZ21lbnRzID0gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgKiAzO1xuICAgIGNvbnN0IHNlZ21lbnRzID0gbGltaXRlZFxuICAgICAgLnNwbGl0KCdcXG4nKVxuICAgICAgLmZsYXRNYXAobGluZSA9PiBsaW5lLnNwbGl0KC8oPzw9Wy4/IV0pXFxzKy8pKVxuICAgICAgLm1hcChsaW5lID0+IGxpbmUucmVwbGFjZSgvXlvigKIq4o+64peLXFwtXFx1MjAyMl0rXFxzKi8sICcnKS50cmltKCkpXG4gICAgICAuZmlsdGVyKEJvb2xlYW4pO1xuXG4gICAgaWYgKHNlZ21lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VlbiA9IG5ldyBTZXQ8c3RyaW5nPigpO1xuICAgIGNvbnN0IGRlZHVwZWQ6IHN0cmluZ1tdID0gW107XG4gICAgZm9yIChjb25zdCBzZWdtZW50IG9mIHNlZ21lbnRzKSB7XG4gICAgICBjb25zdCBub3JtYWxpemVkU2VnbWVudCA9IHNlZ21lbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpO1xuICAgICAgY29uc3Qga2V5ID0gbm9ybWFsaXplZFNlZ21lbnQudG9Mb3dlckNhc2UoKTtcbiAgICAgIGlmIChzZWVuLmhhcyhrZXkpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgc2Vlbi5hZGQoa2V5KTtcbiAgICAgIGRlZHVwZWQucHVzaChub3JtYWxpemVkU2VnbWVudCk7XG4gICAgICBpZiAoZGVkdXBlZC5sZW5ndGggPj0gbWF4U2VnbWVudHMpIHtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGRlZHVwZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBwcmlvcml0aXplZCA9IHRoaXMucHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKGRlZHVwZWQpO1xuICAgIGlmIChwcmlvcml0aXplZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbWl0ZWRTZWxlY3Rpb24gPSBwcmlvcml0aXplZC5zbGljZSgwLCB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyk7XG4gICAgY29uc3QgYnVsbGV0ZWQgPSBsaW1pdGVkU2VsZWN0aW9uLm1hcChsaW5lID0+IHRoaXMuZW5zdXJlUmVhc29uaW5nQnVsbGV0KGxpbmUpKTtcblxuICAgIHJldHVybiBidWxsZXRlZC5qb2luKCdcXG4nKTtcbiAgfVxuXG4gIHByaXZhdGUgZW5zdXJlUmVhc29uaW5nQnVsbGV0KGxpbmU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKC9eKFvigKIq4o+64peLLV18XFxkK1suKV0pXFxzLy50ZXN0KGxpbmUpKSB7XG4gICAgICByZXR1cm4gbGluZTtcbiAgICB9XG4gICAgcmV0dXJuIGDigKIgJHtsaW5lfWA7XG4gIH1cblxuICBwcml2YXRlIGxvb2tzU3RydWN0dXJlZFRob3VnaHQobGluZTogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIChcbiAgICAgIC9eKFxcZCtbLildXFxzfHN0ZXBcXHMqXFxkK3xwbGFuXFxifG5leHRcXGJ8dGhlblxcYnxnb2FsXFxiKS9pLnRlc3QobGluZSkgfHxcbiAgICAgIC9eWy0q4oCiXVxccy8udGVzdChsaW5lKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygnLT4nKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygn4oaSJykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJzogJykgfHxcbiAgICAgIC9cXGIodGVzdHx2ZXJpZnl8dmFsaWRhdGV8Y2hlY2t8YnVpbGR8cnVufGRlcGxveXxkaWZmfGxpbnR8dHlwZSA/Y2hlY2t8Zml4fGJ1Z3xpc3N1ZXxyaXNrfG1pdGlnYXRlfGludmVzdGlnYXRlKVxcYi9pLnRlc3QobGluZSlcbiAgICApO1xuICB9XG5cbiAgcHJpdmF0ZSBwcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGlmICghc2VnbWVudHMubGVuZ3RoKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2NvcmVkID0gc2VnbWVudHMubWFwKCh0ZXh0LCBpbmRleCkgPT4gKHtcbiAgICAgIHRleHQsXG4gICAgICBpbmRleCxcbiAgICAgIHNjb3JlOiB0aGlzLnJlYXNvbmluZ1NpZ25hbFNjb3JlKHRleHQpLFxuICAgIH0pKTtcblxuICAgIGNvbnN0IGhhc1NpZ25hbCA9IHNjb3JlZC5zb21lKGl0ZW0gPT4gaXRlbS5zY29yZSA+IDApO1xuICAgIGlmICghaGFzU2lnbmFsKSB7XG4gICAgICByZXR1cm4gc2VnbWVudHM7XG4gICAgfVxuXG4gICAgc2NvcmVkLnNvcnQoKGEsIGIpID0+IHtcbiAgICAgIGlmIChiLnNjb3JlICE9PSBhLnNjb3JlKSByZXR1cm4gYi5zY29yZSAtIGEuc2NvcmU7XG4gICAgICByZXR1cm4gYS5pbmRleCAtIGIuaW5kZXg7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gc2NvcmVkLm1hcChpdGVtID0+IGl0ZW0udGV4dCk7XG4gIH1cblxuICBwcml2YXRlIHJlYXNvbmluZ1NpZ25hbFNjb3JlKGxpbmU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgbGV0IHNjb3JlID0gMDtcbiAgICBjb25zdCBsb3dlciA9IGxpbmUudG9Mb3dlckNhc2UoKTtcblxuICAgIGlmICh0aGlzLmxvb2tzU3RydWN0dXJlZFRob3VnaHQobGluZSkpIHtcbiAgICAgIHNjb3JlICs9IDM7XG4gICAgfVxuXG4gICAgY29uc3QgYWN0aW9uS2V5d29yZHMgPSBbXG4gICAgICAndG9vbCcsICdjb21tYW5kJywgJ3NjcmlwdCcsICdjb250ZXh0JywgJ3N1bW1hcicsICdyaXNrJywgJ2lzc3VlJyxcbiAgICAgICdpbnZlc3RpZ2F0ZScsICdyb290IGNhdXNlJywgJ3JlbWVkaWF0JywgJ21pdGlnYXQnLCAnZml4JywgJ3BhdGNoJyxcbiAgICAgICd0ZXN0JywgJ3ZlcmlmeScsICd2YWxpZGF0ZScsICdjaGVjaycsICdidWlsZCcsICdkZXBsb3knLCAncnVuJyxcbiAgICAgICdkaWZmJywgJ2xpbnQnLCAndHlwZWNoZWNrJywgJ2JlbmNobWFyaycsXG4gICAgXTtcbiAgICBpZiAoYWN0aW9uS2V5d29yZHMuc29tZShrZXl3b3JkID0+IGxvd2VyLmluY2x1ZGVzKGtleXdvcmQpKSkge1xuICAgICAgc2NvcmUgKz0gMjtcbiAgICB9XG5cbiAgICBpZiAoL1sjOuKGkl18LT4vLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlICs9IDE7XG4gICAgfVxuXG4gICAgaWYgKC9eKGkoJ3wgYSltfGkgd2lsbHxsZXQgbWV8c3RhcnRpbmd8bm93fG9rfHN1cmUpXFxiL2kudGVzdChsaW5lKSkge1xuICAgICAgc2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggPiAxMjApIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNjb3JlO1xuICB9XG5cbiAgcHJpdmF0ZSBzaG91bGRSZW5kZXJUaG91Z2h0KGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCAmJiB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC50ZXh0ID09PSBub3JtYWxpemVkKSB7XG4gICAgICBpZiAobm93IC0gdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQuYXQgPCB0aGlzLnRob3VnaHREZWR1cFdpbmRvd01zKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdGV4dCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTog4o+6IHByZWZpeCB3aXRoIHdyYXBwZWQgY29udGludWF0aW9uIGxpbmVzXG4gICAqIEV4YW1wbGU6XG4gICAqICAg4o+6IFRoZSBBSSByYW4gdG9vbHMgYnV0IGdhdmUgbm8gcmVzcG9uc2UuIE5lZWQgdG8gZml4XG4gICAqICAgICB0aGUgcmVzcG9uc2UgaGFuZGxpbmcuIExldCBtZSBjaGVjayB3aGVyZSB0aGUgQUknc1xuICAgKiAgICAgdGV4dCByZXNwb25zZSBzaG91bGQgYmUgZGlzcGxheWVkOlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDbGF1ZGVDb2RlQmxvY2soY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDI0LCBNYXRoLm1pbih0aGlzLnNhZmVXaWR0aCgpIC0gNCwgMTEwKSk7IC8vIFJlc3BvbnNpdmUgdG8gdGVybWluYWwgd2lkdGhcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcblxuICAgIGZvciAobGV0IGxpbmVJZHggPSAwOyBsaW5lSWR4IDwgbGluZXMubGVuZ3RoOyBsaW5lSWR4KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tsaW5lSWR4XSE7XG4gICAgICBpZiAoIWxpbmUudHJpbSgpKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKCcnKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFdvcmQtd3JhcCBlYWNoIGxpbmVcbiAgICAgIGNvbnN0IHdvcmRzID0gbGluZS5zcGxpdCgvKFxccyspLyk7XG4gICAgICBsZXQgY3VycmVudExpbmUgPSAnJztcblxuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGlmICgoY3VycmVudExpbmUgKyB3b3JkKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgICAgICAvLyBGaXJzdCBsaW5lIG9mIHRoaXMgcGFyYWdyYXBoIGdldHMg4o+6LCByZXN0IGdldCBpbmRlbnRcbiAgICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke3ByZWZpeH0ke2N1cnJlbnRMaW5lLnRyaW1FbmQoKX1gKTtcbiAgICAgICAgICBjdXJyZW50TGluZSA9IHdvcmQudHJpbVN0YXJ0KCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudExpbmUgKz0gd29yZDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdC5sZW5ndGggPT09IDAgJiYgbGluZUlkeCA9PT0gMCA/IGAke2J1bGxldH0gYCA6ICcgICc7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke3ByZWZpeH0ke2N1cnJlbnRMaW5lLnRyaW1FbmQoKX1gKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCBjYWxsIGluIENsYXVkZSBDb2RlIHN0eWxlOlxuICAgKiAgIOKPuiBbU2VhcmNoXSBwYXR0ZXJuOiBcImZvb1wiLCBwYXRoOiBcInNyY1wiLFxuICAgKiAgICAgICAgICAgICAgb3V0cHV0X21vZGU6IFwiY29udGVudFwiLCBoZWFkX2xpbWl0OiAzMFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJndW1lbnRzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFwoKC4qKVxcKSQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgLy8gU2ltcGxlIGZvcm1hdCB3aXRob3V0IGFyZ3NcbiAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oXFx3KykvKTtcbiAgICAgIGlmIChuYW1lTWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQoYFske25hbWVNYXRjaFsxXX1dYCl9XFxuYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV07XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdITtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scyAtIDQsIDU2KTtcblxuICAgIC8vIEZvcm1hdDog4o+6IFtUb29sTmFtZV0gYXJncy4uLlxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sQ29sb3JzLmRlZmF1bHQoYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgNTsgLy8gXCLij7ogW1Rvb2xOYW1lXSBcIiB2aXNpYmxlIGxlbmd0aFxuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQocHJlZml4TGVuICsgNCk7IC8vIEV4dHJhIGluZGVudCBmb3Igd3JhcHBlZCBhcmdzXG5cbiAgICAvLyBQYXJzZSBhbmQgZm9ybWF0IGFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlVG9vbEFyZ3MoYXJnc1N0cik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4LnRyaW1FbmQoKX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IHByZWZpeDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXJnID0gYXJnc1tpXSE7XG4gICAgICBjb25zdCBhcmdUZXh0ID0gYCR7dGhlbWUudWkubXV0ZWQoYXJnLmtleSArICc6Jyl9ICR7dGhpcy5mb3JtYXRBcmdWYWx1ZShhcmcua2V5LCBhcmcudmFsdWUpfWA7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBpIDwgYXJncy5sZW5ndGggLSAxID8gJywgJyA6ICcnO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGFyZyBmaXRzIG9uIGN1cnJlbnQgbGluZVxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICBpZiAodGhpcy5zdHJpcEFuc2kodGVzdExpbmUpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lICE9PSBwcmVmaXgpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIGFyZ3VtZW50cyBmcm9tIHN0cmluZyBsaWtlOiBrZXk6IFwidmFsdWVcIiwga2V5MjogdmFsdWUyXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbEFyZ3MoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgYXJnczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIFNpbXBsZSByZWdleCB0byBleHRyYWN0IGtleTogdmFsdWUgcGFpcnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sKV0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIGFyZ3MucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGFuIGFyZ3VtZW50IHZhbHVlICh0cnVuY2F0ZSBsb25nIHN0cmluZ3MpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdEFyZ1ZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcbiAgICBjb25zdCBpc1F1b3RlZCA9IHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJyk7XG4gICAgY29uc3QgaW5uZXIgPSBpc1F1b3RlZCA/IHZhbHVlLnNsaWNlKDEsIC0xKSA6IHZhbHVlO1xuXG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzaG91bGRQcmVzZXJ2ZSA9XG4gICAgICBsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3F1ZXJ5JyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjbWQnO1xuXG4gICAgLy8gVHJ1bmNhdGUgbG9uZyB2YWx1ZXMgd2hlbiBub3QgZXhwbGljaXRseSBwcmVzZXJ2aW5nXG4gICAgY29uc3QgbWF4TGVuID0gNDA7XG4gICAgY29uc3QgdHJ1bmNhdGVkID0gc2hvdWxkUHJlc2VydmUgfHwgaW5uZXIubGVuZ3RoIDw9IG1heExlbiA/IGlubmVyIDogaW5uZXIuc2xpY2UoMCwgbWF4TGVuIC0gMykgKyAnLi4uJztcblxuICAgIHJldHVybiBpc1F1b3RlZCA/IGBcIiR7dHJ1bmNhdGVkfVwiYCA6IHRydW5jYXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIHJlc3VsdCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDijr8gIEZvdW5kIDEyIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN1bW1hcnkgbGluZSAoZS5nLiwgXCJGb3VuZCBYIGxpbmVzXCIpXG4gICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gY29udGVudC5tYXRjaCgvXihGb3VuZCBcXGQrICg/OmxpbmVzP3xmaWxlcz98bWF0Y2hlcz8pfFJlYWQgXFxkKyBsaW5lcz98V3JvdGUgXFxkKyBsaW5lcz98RWRpdGVkfENyZWF0ZWR8RGVsZXRlZCkvaSk7XG4gICAgaWYgKHN1bW1hcnlNYXRjaCkge1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvciBvdGhlciByZXN1bHRzLCBzaG93IHRydW5jYXRlZCBwcmV2aWV3XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMykge1xuICAgICAgY29uc3QgcHJldmlldyA9IGxpbmVzLnNsaWNlKDAsIDIpLmpvaW4oJ1xcbicpO1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtwcmV2aWV3fVxcbiAgJHt0aGVtZS51aS5tdXRlZChgLi4uICR7bGluZXMubGVuZ3RoIC0gMn0gbW9yZSBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClgKX1cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCBjYWxsOiDij7ogW1JlYWRdIGZpbGUudHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmdzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFxzKig/OlxcKCguKilcXCkpPyQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXSE7XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdPy50cmltKCkgfHwgJyc7XG5cbiAgICAvLyBUcmFjayB0b29sIG5hbWUgZm9yIHBhaXJpbmcgd2l0aCByZXN1bHRcbiAgICB0aGlzLmxhc3RUb29sTmFtZSA9IHRvb2xOYW1lO1xuXG4gICAgLy8gR2V0IHRvb2wtc3BlY2lmaWMgY29sb3IgKGJhc2g9b3JhbmdlLCByZWFkPWN5YW4sIHdyaXRlPWdyZWVuLCBldGMuKVxuICAgIGNvbnN0IHRvb2xDb2xvciA9IGdldFRvb2xDb2xvcih0b29sTmFtZSk7XG4gICAgY29uc3QgY29sb3JlZFRvb2xOYW1lID0gdG9vbENvbG9yKGBbJHt0b29sTmFtZX1dYCk7XG5cbiAgICAvLyBJZiBubyBhcmdzLCBqdXN0IHNob3cgdG9vbCBuYW1lXG4gICAgaWYgKCFhcmdzU3RyKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbG9yZWRUb29sTmFtZX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5jb2xzIC0gODsgLy8gTGVhdmUgcm9vbSBmb3IgbWFyZ2luc1xuXG4gICAgLy8gUGFyc2UgaW5kaXZpZHVhbCBwYXJhbXNcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyKTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb2xvcmVkVG9vbE5hbWV9ICR7YXJnc1N0cn1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdG9vbENvbG9yKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nIChkZWZhdWx0IGdyZWVuIGNvbG9yKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUGFyYW1zKFxuICAgIHRvb2xOYW1lOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+LFxuICAgIG1heFdpZHRoOiBudW1iZXJcbiAgKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zQ29sb3JlZCh0b29sTmFtZSwgcGFyYW1zLCBtYXhXaWR0aCwgdGhlbWUudG9vbENvbG9ycy5kZWZhdWx0KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9vbCBwYXJhbXMgd2l0aCBjdXN0b20gdG9vbCBjb2xvclxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUGFyYW1zQ29sb3JlZChcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyLFxuICAgIHRvb2xDb2xvcjogKHRleHQ6IHN0cmluZykgPT4gc3RyaW5nXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgaW5kZW50ID0gJyAgICAgICAgJzsgLy8gOCBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvblxuXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gYCR7YnVsbGV0fSAke3Rvb2xDb2xvcihgWyR7dG9vbE5hbWV9XWApfSBgO1xuICAgIGxldCBmaXJzdFBhcmFtID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1zKSB7XG4gICAgICBjb25zdCBjb2xvcmVkVmFsdWUgPSB0aGlzLmNvbG9yUGFyYW1WYWx1ZShwYXJhbS5rZXksIHBhcmFtLnZhbHVlKTtcbiAgICAgIGNvbnN0IHBhcmFtVGV4dCA9IGAke3BhcmFtLmtleX06ICR7Y29sb3JlZFZhbHVlfWA7XG4gICAgICBjb25zdCBwYXJhbVN0ciA9IGZpcnN0UGFyYW0gPyBwYXJhbVRleHQgOiBgLCAke3BhcmFtVGV4dH1gO1xuXG4gICAgICAvLyBDaGVjayBpZiBhZGRpbmcgdGhpcyBwYXJhbSB3b3VsZCBleGNlZWQgd2lkdGhcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBwYXJhbVN0cjtcbiAgICAgIGNvbnN0IHBsYWluTGVuZ3RoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHRlc3RMaW5lKTtcblxuICAgICAgaWYgKHBsYWluTGVuZ3RoID4gbWF4V2lkdGggJiYgIWZpcnN0UGFyYW0pIHtcbiAgICAgICAgLy8gU3RhcnQgbmV3IGxpbmVcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG4gICAgICAgIGN1cnJlbnRMaW5lID0gaW5kZW50ICsgcGFyYW1UZXh0O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gcGFyYW1TdHI7XG4gICAgICB9XG4gICAgICBmaXJzdFBhcmFtID0gZmFsc2U7XG4gICAgfVxuXG4gICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xvciBjcml0aWNhbCBwYXJhbWV0ZXIgdmFsdWVzIChwYXRocywgY29tbWFuZHMpIGZvciByZWFkYWJpbGl0eS5cbiAgKi9cbiAgcHJpdmF0ZSBjb2xvclBhcmFtVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyS2V5LmluY2x1ZGVzKCdwYXRoJykgfHwgbG93ZXJLZXkgPT09ICdmaWxlJyB8fCBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8IGxvd2VyS2V5ID09PSAncXVlcnknKSB7XG4gICAgICByZXR1cm4gdGhlbWUud2FybmluZyh2YWx1ZSk7XG4gICAgfVxuICAgIGlmIChsb3dlcktleSA9PT0gJ2NvbW1hbmQnIHx8IGxvd2VyS2V5ID09PSAnY21kJykge1xuICAgICAgcmV0dXJuIHRoZW1lLnRvb2xDb2xvcnMuZGVmYXVsdCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgc2hvcnQgc3VtbWFyeSBmcm9tIHRvb2wgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFN1bW1hcnkodG9vbE5hbWU6IHN0cmluZywgYXJnc1N0cjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHBhdGgvZmlsZSBmb3IgZmlsZSBvcGVyYXRpb25zXG4gICAgaWYgKFsncmVhZCcsICd3cml0ZScsICdlZGl0JywgJ2dsb2InLCAnZ3JlcCcsICdzZWFyY2gnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgY29uc3QgcGF0aE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvKD86cGF0aHxmaWxlX3BhdGh8cGF0dGVybik6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKHBhdGhNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXRoID0gcGF0aE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLmZpbGU/LnBhdGggPyB0aGVtZS5maWxlLnBhdGgocGF0aCkgOiB0aGVtZS51aS5tdXRlZChwYXRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvbW1hbmQgZm9yIGJhc2hcbiAgICBpZiAodG9vbCA9PT0gJ2Jhc2gnKSB7XG4gICAgICBjb25zdCBjbWRNYXRjaCA9IGFyZ3NTdHIubWF0Y2goL2NvbW1hbmQ6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKGNtZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNtZE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKGNtZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIHJlc3VsdDog4o6/ICBGb3VuZCBYIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFNhbml0aXplIGNvbnRlbnQgZmlyc3QgLSBmaWx0ZXIgb3V0IGdhcmJhZ2UvcmVhc29uaW5nIG91dHB1dCB0aGF0IGxlYWtlZCB0aHJvdWdoXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVRvb2xSZXN1bHRDb250ZW50KGNvbnRlbnQpO1xuICAgIGlmICghc2FuaXRpemVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KHNhbml0aXplZCkpIHtcbiAgICAgIHJldHVybiAnJzsgLy8gRG9uJ3QgcmVuZGVyIGdhcmJhZ2UgdG9vbCByZXN1bHRzXG4gICAgfVxuXG4gICAgLy8gUGFyc2UgY29tbW9uIHJlc3VsdCBwYXR0ZXJucyBmb3Igc3VtbWFyeVxuICAgIGNvbnN0IGxpbmVNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvKFxcZCspXFxzKmxpbmVzPy9pKTtcbiAgICBjb25zdCBmaWxlTWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goLyhcXGQrKVxccyooPzpmaWxlcz98bWF0Y2hlcz8pL2kpO1xuICAgIGNvbnN0IHJlYWRNYXRjaCA9IHNhbml0aXplZC5tYXRjaCgvcmVhZC4qPyhcXGQrKVxccypsaW5lcz8vaSk7XG5cbiAgICAvLyBDaGVjayBpZiBjb250ZW50IGNvbnRhaW5zIGEgZmlsZSBwYXRoIG9yIGNvbW1hbmQgdGhhdCBzaG91bGQgYmUgcHJlc2VydmVkXG4gICAgY29uc3QgaGFzUGF0aCA9IC8oPzpefFxccykoPzpcXC9bXFx3Li8tXSt8W1xcdy4vLV0rXFwvW1xcdy4vLV0rKS8udGVzdChzYW5pdGl6ZWQpO1xuICAgIGNvbnN0IGhhc0NvbW1hbmQgPSAvXlxccypcXCRcXHMrLit8Y29tbWFuZDovaS50ZXN0KHNhbml0aXplZCk7XG4gICAgY29uc3QgaXNQYXRoT3JEaXIgPSAvXig/OkZpbGV8RGlyZWN0b3J5fFBhdGgpOlxccyovaS50ZXN0KHNhbml0aXplZCk7XG5cbiAgICBsZXQgc3VtbWFyeTogc3RyaW5nO1xuICAgIGxldCBwcmVzZXJ2ZUZ1bGwgPSBmYWxzZTtcblxuICAgIGlmIChyZWFkTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgUmVhZCAke3JlYWRNYXRjaFsxXX0gbGluZXNgO1xuICAgIH0gZWxzZSBpZiAobGluZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7bGluZU1hdGNoWzFdfSBsaW5lJHtsaW5lTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChmaWxlTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgRm91bmQgJHtmaWxlTWF0Y2hbMV19IGZpbGUke2ZpbGVNYXRjaFsxXSA9PT0gJzEnID8gJycgOiAncyd9YDtcbiAgICB9IGVsc2UgaWYgKHNhbml0aXplZC5tYXRjaCgvXihzdWNjZXNzfG9rfGRvbmV8Y29tcGxldGVkfHdyaXR0ZW58ZWRpdGVkfGNyZWF0ZWQpL2kpKSB7XG4gICAgICBzdW1tYXJ5ID0gJ+Kckyc7XG4gICAgfSBlbHNlIGlmIChpc1BhdGhPckRpciB8fCBoYXNQYXRoIHx8IGhhc0NvbW1hbmQpIHtcbiAgICAgIC8vIFByZXNlcnZlIGZ1bGwgY29udGVudCBmb3IgcGF0aHMsIGRpcmVjdG9yaWVzLCBhbmQgY29tbWFuZHNcbiAgICAgIC8vIE9ubHkgc2hvdyBmaXJzdCBsaW5lIGlmIG11bHRpLWxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZSA9IHNhbml0aXplZC5zcGxpdCgnXFxuJylbMF0gfHwgc2FuaXRpemVkO1xuICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZTtcbiAgICAgIHByZXNlcnZlRnVsbCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEV4dHJhY3QgbWVhbmluZ2Z1bCBzdW1tYXJ5IGZyb20gY29udGVudFxuICAgICAgbGV0IHN1bW1hcnlUZXh0ID0gc2FuaXRpemVkO1xuXG4gICAgICAvLyBIYW5kbGUgXCJTdW1tYXJ5OlwiIHByZWZpeCBmcm9tIHdlYiBzZWFyY2gvZXh0cmFjdCByZXN1bHRzXG4gICAgICBjb25zdCBzdW1tYXJ5TWF0Y2ggPSBzYW5pdGl6ZWQubWF0Y2goL15TdW1tYXJ5OlxccyooLispL2kpO1xuICAgICAgaWYgKHN1bW1hcnlNYXRjaCkge1xuICAgICAgICBzdW1tYXJ5VGV4dCA9IHN1bW1hcnlNYXRjaFsxXSE7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvciBtdWx0aS1saW5lIGNvbnRlbnQsIHVzZSBmaXJzdCBtZWFuaW5nZnVsIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZSA9IHN1bW1hcnlUZXh0LnNwbGl0KCdcXG4nKVswXT8udHJpbSgpIHx8IHN1bW1hcnlUZXh0O1xuXG4gICAgICAvLyBUcnkgdG8gZW5kIGF0IGEgc2VudGVuY2UgYm91bmRhcnkgZm9yIHJlYWRhYmlsaXR5ICh1cCB0byAxMjAgY2hhcnMpXG4gICAgICBjb25zdCBtYXhMZW4gPSAxMjA7XG4gICAgICBpZiAoZmlyc3RMaW5lLmxlbmd0aCA+IG1heExlbikge1xuICAgICAgICAvLyBMb29rIGZvciBzZW50ZW5jZSBlbmQgd2l0aGluIGxpbWl0XG4gICAgICAgIGNvbnN0IHNlbnRlbmNlRW5kID0gZmlyc3RMaW5lLnNsaWNlKDAsIG1heExlbikuc2VhcmNoKC9bLiE/O11cXHN8Wy4hPztdJC8pO1xuICAgICAgICBpZiAoc2VudGVuY2VFbmQgPiAzMCkge1xuICAgICAgICAgIHN1bW1hcnkgPSBmaXJzdExpbmUuc2xpY2UoMCwgc2VudGVuY2VFbmQgKyAxKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBObyBnb29kIHNlbnRlbmNlIGJyZWFrLCB0cnVuY2F0ZSBhdCB3b3JkIGJvdW5kYXJ5XG4gICAgICAgICAgY29uc3QgdHJ1bmNhdGVkID0gZmlyc3RMaW5lLnNsaWNlKDAsIG1heExlbik7XG4gICAgICAgICAgY29uc3QgbGFzdFNwYWNlID0gdHJ1bmNhdGVkLmxhc3RJbmRleE9mKCcgJyk7XG4gICAgICAgICAgc3VtbWFyeSA9IGxhc3RTcGFjZSA+IDYwID8gdHJ1bmNhdGVkLnNsaWNlKDAsIGxhc3RTcGFjZSkgKyAn4oCmJyA6IHRydW5jYXRlZCArICfigKYnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdW1tYXJ5ID0gZmlyc3RMaW5lO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFN0b3JlIGNvbGxhcHNlZCByZXN1bHQgZm9yIEN0cmwrTyBleHBhbnNpb24gKHVzZSBzYW5pdGl6ZWQgY29udGVudClcbiAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnB1c2goe1xuICAgICAgdG9vbE5hbWU6IHRoaXMubGFzdFRvb2xOYW1lIHx8ICd0b29sJyxcbiAgICAgIGNvbnRlbnQ6IHNhbml0aXplZCxcbiAgICAgIHN1bW1hcnksXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfSk7XG5cbiAgICAvLyBUcmltIHRvIG1heCBzaXplXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMubGVuZ3RoID4gdGhpcy5tYXhDb2xsYXBzZWRSZXN1bHRzKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnNoaWZ0KCk7XG4gICAgfVxuXG4gICAgY29uc3QgY29sb3JlZFN1bW1hcnkgPSB0aGlzLmNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5KTtcbiAgICAvLyBPbmx5IHNob3cgZXhwYW5kIGhpbnQgaWYgY29udGVudCBpcyBhY3R1YWxseSBjb2xsYXBzZWQgKG11bHRpLWxpbmUgb3Igd2FzIHRydW5jYXRlZClcbiAgICBjb25zdCBoYXNNb3JlQ29udGVudCA9IHNhbml0aXplZC5pbmNsdWRlcygnXFxuJykgfHwgc3VtbWFyeS5lbmRzV2l0aCgn4oCmJykgfHwgKCFwcmVzZXJ2ZUZ1bGwgJiYgc2FuaXRpemVkLmxlbmd0aCA+IHN1bW1hcnkubGVuZ3RoKTtcbiAgICBjb25zdCBleHBhbmRIaW50ID0gaGFzTW9yZUNvbnRlbnQgPyBgICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfWAgOiAnJztcbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbG9yZWRTdW1tYXJ5fSR7ZXhwYW5kSGludH1cXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBjb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXN1bW1hcnkpIHJldHVybiBzdW1tYXJ5O1xuICAgIGNvbnN0IGxvd2VyID0gc3VtbWFyeS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZmFpbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuZXJyb3Ioc3VtbWFyeSk7XG4gICAgfVxuICAgIGlmIChzdW1tYXJ5LnN0YXJ0c1dpdGgoJ+KckycpIHx8IGxvd2VyLmluY2x1ZGVzKCd1cGRhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2NyZWF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnd3JpdHRlbicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuc3VjY2VzcyhzdW1tYXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoZW1lLmluZm8oc3VtbWFyeSk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCByZXNwb25zZSB3aXRoIGJ1bGxldCBvbiBmaXJzdCBsaW5lXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXAgdGV4dCB3aXRoIGEgc2luZ2xlIGJ1bGxldCBvbiB0aGUgZmlyc3QgbGluZSBhbmQgdGlkeSBpbmRlbnRhdGlvbiBmb3IgcmVhZGFiaWxpdHkuXG4gICAqIFByZXZlbnRzIGF3a3dhcmQgbWlkLXdvcmQgdGVybWluYWwgd3JhcHBpbmcgYnkgaGFuZGxpbmcgdGhlIGxheW91dCBvdXJzZWx2ZXMuXG4gICAqL1xuICBwcml2YXRlIHdyYXBCdWxsZXRUZXh0KFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IG1heFdpZHRoPzogbnVtYmVyOyBsYWJlbD86IHN0cmluZzsgbGFiZWxDb2xvcj86ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgfSA9IHt9XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgY2xlYW5lZCA9IGNvbnRlbnQucmVwbGFjZSgvXlvij7rigKLil4tdXFxzKi8sICcnKS50cmltRW5kKCk7XG4gICAgaWYgKCFjbGVhbmVkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIFJlc2VydmUgYSBsaXR0bGUgbWFyZ2luIHRvIHJlZHVjZSB0ZXJtaW5hbCB3cmFwIGppdHRlclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDIwLCBNYXRoLm1pbihvcHRpb25zLm1heFdpZHRoID8/IGF2YWlsYWJsZVdpZHRoIC0gMiwgYXZhaWxhYmxlV2lkdGgpKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBvcHRpb25zLmxhYmVsXG4gICAgICA/IGAke29wdGlvbnMubGFiZWxDb2xvciA/IG9wdGlvbnMubGFiZWxDb2xvcihvcHRpb25zLmxhYmVsKSA6IG9wdGlvbnMubGFiZWx9JHt0aGVtZS51aS5tdXRlZCgnIMK3ICcpfWBcbiAgICAgIDogJyc7XG4gICAgY29uc3QgYnVsbGV0UHJlZml4ID0gYCR7YnVsbGV0fSAke2xhYmVsVGV4dH1gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKGAke2J1bGxldH0gYCkpO1xuXG4gICAgY29uc3QgbGluZXMgPSBjbGVhbmVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGZpcnN0Tm9uRW1wdHkgPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCByYXdMaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBsaW5lID0gcmF3TGluZS50cmltKCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpOyAvLyBQcmVzZXJ2ZSBpbnRlbnRpb25hbCBzcGFjaW5nIGJldHdlZW4gcGFyYWdyYXBoc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC9cXHMrLyk7XG4gICAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICAgIGNvbnN0IHByZWZpeExlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50KTtcbiAgICAgICAgaWYgKHByZWZpeExlbmd0aCArIHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gbWF4V2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGlua2luZyBibG9jayB3aXRoIGVuaGFuY2VkIHZpc3VhbCBkZXNpZ24uXG4gICAqIFVzZXMgYSBkaXN0aW5jdCB2aXN1YWwgc3R5bGUgdG8gY2xlYXJseSBzZXBhcmF0ZSB0aGlua2luZyBmcm9tIHJlc3BvbnNlcy5cbiAgICpcbiAgICogSW4gcGxhaW4gb3V0cHV0IG1vZGUgd2Uga2VlcCBpdCBzaW1wbGUgYW5kIGlubGluZSB3aXRoIHRoZSByZXN0IG9mIHRoZVxuICAgKiBzdHJlYW0gc28gdHJhbnNjcmlwdHMgcmVtYWluIGVhc3kgdG8gc2Nhbi5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VGhpbmtpbmdCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQobm9ybWFsaXplZCwge1xuICAgICAgbGFiZWw6ICd0aGlua2luZycsXG4gICAgICBsYWJlbENvbG9yOiB0aGVtZS5zZWNvbmRhcnkgPz8gdGhlbWUudWkubXV0ZWQsIC8vIFB1cnBsZSBmb3IgdGhpbmtpbmcgKGRpc3RpbmN0IGZyb20gYmx1ZSB0b29scylcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgd3JhcFRleHRUb1dpZHRoKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm4gWycnXTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IHdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3RyZWFtaW5nIGVsYXBzZWQgdGltZSBpbiBDbGF1ZGUgQ29kZSBzdHlsZTogM20gMzBzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgLyAxMDAwKTtcbiAgICBpZiAoZWxhcHNlZCA8IDUpIHJldHVybiBudWxsOyAvLyBEb24ndCBzaG93IGZvciB2ZXJ5IHNob3J0IGR1cmF0aW9uc1xuICAgIGNvbnN0IG1pbnMgPSBNYXRoLmZsb29yKGVsYXBzZWQgLyA2MCk7XG4gICAgY29uc3Qgc2VjcyA9IGVsYXBzZWQgJSA2MDtcbiAgICBpZiAobWlucyA+IDApIHtcbiAgICAgIHJldHVybiBgJHttaW5zfW0gJHtzZWNzfXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7c2Vjc31zYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFNob3dzIGEgdmlzdWFsIHNlcGFyYXRvciB3aXRoIFwiaGlzdG9yeVwiIGxhYmVsIGFuZCBjdHJsK28gaGludFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scywgODApO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IGAgJHtsYWJlbH0gYDtcbiAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5tYXgoMCwgbWF4V2lkdGggLSBsYWJlbFRleHQubGVuZ3RoKTtcbiAgICBjb25zdCBsZWZ0UGFkID0gTWF0aC5mbG9vcihwYWRkaW5nIC8gMik7XG4gICAgY29uc3QgcmlnaHRQYWQgPSBNYXRoLmNlaWwocGFkZGluZyAvIDIpO1xuXG4gICAgLy8gQ2xhdWRlIENvZGUgc3R5bGU6IOKVkOKVkCBoaXN0b3J5IOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCfilZAnLnJlcGVhdChsZWZ0UGFkKSArIGxhYmVsVGV4dCArICfilZAnLnJlcGVhdChyaWdodFBhZCkpO1xuXG4gICAgcmV0dXJuIGBcXG4ke3NlcGFyYXRvcn1cXG4ke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayB0byB0aGUgZXZlbnQgcXVldWVcbiAgICogVGhpcyBkaXNwbGF5cyBhIGNvbGxhcHNlZCB2aWV3IHdpdGggZXhwYW5zaW9uIGhpbnQgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKi9cbiAgYWRkQ29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSB0aGlzLmZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50LCBsYWJlbCk7XG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiBmb3JtYXR0ZWRDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgaXNDb21wYWN0ZWQ6IHRydWUsXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCB0aGUgbW9zdCByZWNlbnQgdG9vbCByZXN1bHQgaW5saW5lIChDdHJsK08gc3VwcG9ydCkuXG4gICAqIFBvcHMgZnJvbSB0aGUgY29sbGFwc2VkIHJlc3VsdHMgc3RhY2sgYW5kIGRpc3BsYXlzIGZ1bGwgY29udGVudC5cbiAgICovXG4gIGV4cGFuZExhc3RUb29sUmVzdWx0KCk6IGJvb2xlYW4ge1xuICAgIC8vIEZpcnN0IHRyeSB0aGUgbmV3IHN0YWNrLCBmYWxsYmFjayB0byBvbGQgbGFzdFRvb2xSZXN1bHRcbiAgICBjb25zdCBjb2xsYXBzZWQgPSB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnBvcCgpO1xuICAgIGlmICghY29sbGFwc2VkICYmICF0aGlzLmxhc3RUb29sUmVzdWx0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3QgY29udGVudCA9IGNvbGxhcHNlZD8uY29udGVudCB8fCB0aGlzLmxhc3RUb29sUmVzdWx0IHx8ICcnO1xuICAgIGNvbnN0IHRvb2xOYW1lID0gY29sbGFwc2VkPy50b29sTmFtZSB8fCAncmVzdWx0JztcblxuICAgIC8vIERldGVybWluZSBpZiB0aGlzIGlzIHN0cnVjdHVyZWQgb3V0cHV0IHRoYXQgc2hvdWxkbid0IGJlIHdvcmQtd3JhcHBlZFxuICAgIGNvbnN0IGlzU3RydWN0dXJlZCA9IHRoaXMuaXNTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZSwgY29udGVudCk7XG5cbiAgICBsZXQgcmVuZGVyZWQ6IHN0cmluZztcbiAgICBpZiAoaXNTdHJ1Y3R1cmVkKSB7XG4gICAgICAvLyBQcmVzZXJ2ZSBzdHJ1Y3R1cmVkIG91dHB1dCAoZ3JlcCwgYmFzaCwgY29kZSBvdXRwdXQpIC0ganVzdCBpbmRlbnQsIGRvbid0IHdyYXBcbiAgICAgIHJlbmRlcmVkID0gdGhpcy5mb3JtYXRTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZSwgY29udGVudCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEZvcm1hdCBwcm9zZS90ZXh0IHdpdGggdG9vbCBuYW1lIGxhYmVsIGFuZCB3b3JkIHdyYXBwaW5nXG4gICAgICBjb25zdCBsYWJlbCA9IGAke3Rvb2xOYW1lfWA7XG4gICAgICByZW5kZXJlZCA9IHRoaXMud3JhcEJ1bGxldFRleHQoY29udGVudCwgeyBsYWJlbCwgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcbiAgICB9XG5cbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IHJlbmRlcmVkLFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgaXNDb21wYWN0ZWQ6IGZhbHNlLFxuICAgIH0pO1xuXG4gICAgLy8gQ2xlYXIgbGFzdFRvb2xSZXN1bHQgaWYgd2UgdXNlZCB0aGUgc3RhY2tcbiAgICBpZiAoY29sbGFwc2VkKSB7XG4gICAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdG9vbCBvdXRwdXQgaXMgc3RydWN0dXJlZCAoY29kZSwgZ3JlcCwgZmlsZSBsaXN0aW5ncykgdGhhdCBzaG91bGRuJ3QgYmUgd29yZC13cmFwcGVkLlxuICAgKi9cbiAgcHJpdmF0ZSBpc1N0cnVjdHVyZWRUb29sT3V0cHV0KHRvb2xOYW1lOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHRvb2wgPSB0b29sTmFtZS50b0xvd2VyQ2FzZSgpO1xuICAgIC8vIFRvb2xzIHRoYXQgcHJvZHVjZSBzdHJ1Y3R1cmVkIG91dHB1dFxuICAgIGlmIChbJ2Jhc2gnLCAnZ3JlcCcsICdyZWFkJywgJ2dsb2InLCAnZXhlY3V0ZV9iYXNoJywgJ3NlYXJjaCcsICdmaW5kJ10uaW5jbHVkZXModG9vbCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvLyBDb250ZW50IHBhdHRlcm5zIHRoYXQgaW5kaWNhdGUgc3RydWN0dXJlZCBvdXRwdXRcbiAgICAvLyAtIEZpbGUgcGF0aHMgd2l0aCBjb2xvbnMgKGdyZXAgb3V0cHV0KTogc3JjL2ZpbGUudHM6MTIzOlxuICAgIC8vIC0gTGluZSBudW1iZXJzOiBcIiAgIDHihpJcIiBvciBcIiAgNDI6XCJcbiAgICAvLyAtIENvZGUtbGlrZSBwYXR0ZXJuc1xuICAgIGlmICgvXlxccypbXFx3Li9dKzpcXGQrWzpcXHNdLy50ZXN0KGNvbnRlbnQpKSByZXR1cm4gdHJ1ZTsgLy8gZ3JlcC1zdHlsZSBvdXRwdXRcbiAgICBpZiAoL15cXHMqXFxkK1vihpI64pSCfF1cXHMvLnRlc3QoY29udGVudCkpIHJldHVybiB0cnVlOyAvLyBsaW5lLW51bWJlcmVkIG91dHB1dFxuICAgIGlmICgvXlvilILilJzilJTilIDilIzilJDilJjilKzilLTilLzila3ila7ila/ilbBdKy8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGJveCBkcmF3aW5nXG4gICAgaWYgKC9eXFxzKlskPl1cXHMrXFx3Ky8udGVzdChjb250ZW50KSkgcmV0dXJuIHRydWU7IC8vIGNvbW1hbmQgcHJvbXB0IG91dHB1dFxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3RydWN0dXJlZCB0b29sIG91dHB1dCBwcmVzZXJ2aW5nIGxpbmUgc3RydWN0dXJlLlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTdHJ1Y3R1cmVkVG9vbE91dHB1dCh0b29sTmFtZTogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgaGVhZGVyID0gYOKPuiAke3RoZW1lLmluZm8odG9vbE5hbWUpfSR7dGhlbWUudWkubXV0ZWQoJyDCtyBleHBhbmRlZCcpfVxcbmA7XG4gICAgY29uc3QgaW5kZW50ID0gJyAgJztcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCkgLSA0O1xuXG4gICAgY29uc3QgZm9ybWF0dGVkTGluZXMgPSBsaW5lcy5tYXAobGluZSA9PiB7XG4gICAgICAvLyBUcnVuY2F0ZSBvdmVybHkgbG9uZyBsaW5lcyBpbnN0ZWFkIG9mIHdyYXBwaW5nIChwcmVzZXJ2ZXMgc3RydWN0dXJlKVxuICAgICAgaWYgKGxpbmUubGVuZ3RoID4gbWF4V2lkdGgpIHtcbiAgICAgICAgcmV0dXJuIGluZGVudCArIGxpbmUuc2xpY2UoMCwgbWF4V2lkdGggLSAxKSArICfigKYnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGluZGVudCArIGxpbmU7XG4gICAgfSk7XG5cbiAgICByZXR1cm4gaGVhZGVyICsgZm9ybWF0dGVkTGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXQgY291bnQgb2YgZXhwYW5kYWJsZSBjb2xsYXBzZWQgcmVzdWx0c1xuICAgKi9cbiAgZ2V0Q29sbGFwc2VkUmVzdWx0Q291bnQoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5sZW5ndGg7XG4gIH1cblxuICAvKipcbiAgICogQ2xlYXIgYWxsIGNvbGxhcHNlZCByZXN1bHRzIChlLmcuLCBvbiBuZXcgY29udmVyc2F0aW9uKVxuICAgKi9cbiAgY2xlYXJDb2xsYXBzZWRSZXN1bHRzKCk6IHZvaWQge1xuICAgIHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMgPSBbXTtcbiAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gbnVsbDtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBTdGF0dXMgLyBtb2RlIC0tLS0tLS0tLS0tLVxuXG4gIHNldE1vZGUobW9kZTogJ2lkbGUnIHwgJ3N0cmVhbWluZycpOiB2b2lkIHtcbiAgICBjb25zdCB3YXNTdHJlYW1pbmcgPSB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIHRoaXMubW9kZSA9IG1vZGU7XG5cbiAgICAvLyBUcmFjayBzdHJlYW1pbmcgc3RhcnQgdGltZSBmb3IgZWxhcHNlZCBkaXNwbGF5XG4gICAgaWYgKG1vZGUgPT09ICdzdHJlYW1pbmcnICYmICF3YXNTdHJlYW1pbmcpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lID0gRGF0ZS5ub3coKTtcbiAgICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gMDsgLy8gUmVzZXQgdG9rZW4gY291bnRcbiAgICAgIC8vIENsZWFyIGlubGluZSBwYW5lbCB3aGVuIGVudGVyaW5nIHN0cmVhbWluZyBtb2RlIHRvIHByZXZlbnQgc3RhbGUgbWVudXNcbiAgICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGFydFNwaW5uZXJBbmltYXRpb24oKTtcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09ICdpZGxlJyAmJiB3YXNTdHJlYW1pbmcpIHtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lID0gbnVsbDtcbiAgICAgIHRoaXMuc3RvcFNwaW5uZXJBbmltYXRpb24oKTtcbiAgICB9XG5cbiAgICBpZiAod2FzU3RyZWFtaW5nICYmIG1vZGUgPT09ICdpZGxlJyAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSkge1xuICAgICAgLy8gRmluaXNoIHN0cmVhbWluZyBvbiBhIGZyZXNoIGxpbmUgc28gdGhlIG5leHQgcHJvbXB0L2V2ZW50IGRvZXNuJ3QgY29sbGlkZVxuICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gQWx3YXlzIHJlbmRlciBwcm9tcHQgdG8ga2VlcCBib3R0b20gVUkgcGVyc2lzdGVudCAocmljaCBtb2RlIG9ubHkpXG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTdGFydCB0aGUgYW5pbWF0ZWQgc3Bpbm5lciBmb3Igc3RyZWFtaW5nIHN0YXR1c1xuICAgKi9cbiAgcHJpdmF0ZSBzdGFydFNwaW5uZXJBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSByZXR1cm47IC8vIEFscmVhZHkgcnVubmluZ1xuICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gKHRoaXMuc3Bpbm5lckZyYW1lICsgMSkgJSBzcGlubmVyRnJhbWVzLmJyYWlsbGUubGVuZ3RoO1xuICAgICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9ICh0aGlzLmFjdGl2aXR5U3RhckZyYW1lICsgMSkgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGg7XG4gICAgICAvLyBVcGRhdGUgZWxhcHNlZCB0aW1lIGNvbG9yIGFuaW1hdGlvbiAoc2xvd2VyIGN5Y2xlKVxuICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgMyA9PT0gMCkge1xuICAgICAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gKHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgKyAxKSAlIHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzLmxlbmd0aDtcbiAgICAgIH1cbiAgICAgIC8vIFJlLXJlbmRlciB0byBzaG93IHVwZGF0ZWQgc3Bpbm5lci9zdGFyIGZyYW1lXG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9LCAxMjApOyAvLyB+OCBGUFMgLSByZWR1Y2VkIGZyb20gODBtcyB0byBtaW5pbWl6ZSBmbGlja2VyaW5nIHdoaWxlIGtlZXBpbmcgYW5pbWF0aW9uIHNtb290aFxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGFuaW1hdGVkIHNwaW5uZXJcbiAgICovXG4gIHByaXZhdGUgc3RvcFNwaW5uZXJBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLmVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFjdGl2aXR5IG1lc3NhZ2UgZGlzcGxheWVkIHdpdGggYW5pbWF0ZWQgc3RhclxuICAgKiBFeGFtcGxlOiBcIlJ1bWluYXRpbmfigKZcIiBzaG93cyBhcyBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiXG4gICAqL1xuICBzZXRBY3Rpdml0eShtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdG9rZW4gY291bnQgZGlzcGxheWVkIGluIHRoZSBhY3Rpdml0eSBsaW5lXG4gICAqL1xuICB1cGRhdGVTdHJlYW1pbmdUb2tlbnModG9rZW5zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IHRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9rZW4gY291bnQgYXMgY29tcGFjdCBzdHJpbmcgKGUuZy4sIDEuMmssIDI0aywgMTI4aylcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9rZW5Db3VudCh0b2tlbnM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHRva2VucyA8IDEwMDApIHJldHVybiBTdHJpbmcodG9rZW5zKTtcbiAgICBpZiAodG9rZW5zIDwgMTAwMDApIHJldHVybiBgJHsodG9rZW5zIC8gMTAwMCkudG9GaXhlZCgxKX1rYDtcbiAgICByZXR1cm4gYCR7TWF0aC5yb3VuZCh0b2tlbnMgLyAxMDAwKX1rYDtcbiAgfVxuXG4gIGdldE1vZGUoKTogJ2lkbGUnIHwgJ3N0cmVhbWluZycge1xuICAgIHJldHVybiB0aGlzLm1vZGU7XG4gIH1cblxuICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzQnVuZGxlKHsgbWFpbjogbWVzc2FnZSwgb3ZlcnJpZGU6IG51bGwsIHN0cmVhbWluZzogbnVsbCB9KTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c0J1bmRsZShcbiAgICBzdGF0dXM6IHsgbWFpbj86IHN0cmluZyB8IG51bGw7IG92ZXJyaWRlPzogc3RyaW5nIHwgbnVsbDsgc3RyZWFtaW5nPzogc3RyaW5nIHwgbnVsbCB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcHJldlN0cmVhbWluZyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nO1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG1haW5DaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG92ZXJyaWRlQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKHN0YXR1cy5tYWluICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm1haW4gIT09IHRoaXMuc3RhdHVzTWVzc2FnZSkge1xuICAgICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gc3RhdHVzLm1haW47XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG1haW5DaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cy5vdmVycmlkZSAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5vdmVycmlkZSAhPT0gdGhpcy5zdGF0dXNPdmVycmlkZSkge1xuICAgICAgdGhpcy5zdGF0dXNPdmVycmlkZSA9IHN0YXR1cy5vdmVycmlkZTtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgb3ZlcnJpZGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdDaGFuZ2VkID0gc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IHByZXZTdHJlYW1pbmc7XG4gICAgaWYgKHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHN0cmVhbWluZ0NoYW5nZWQpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXR1c1N0cmVhbWluZyA9IHN0YXR1cy5zdHJlYW1pbmc7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nSW50cm9kdWNlID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgcHJldlN0cmVhbWluZyA9PT0gbnVsbCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgc3RyZWFtaW5nQ2xlYXJlZCA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHN0YXR1cy5zdHJlYW1pbmcgPT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBvbmx5U3RyZWFtaW5nQ2hhbmdlZCA9IHN0cmVhbWluZ0NoYW5nZWQgJiYgIW1haW5DaGFuZ2VkICYmICFvdmVycmlkZUNoYW5nZWQ7XG4gICAgY29uc3Qgc2tpcFN0cmVhbWluZ1JlbmRlciA9XG4gICAgICBvbmx5U3RyZWFtaW5nQ2hhbmdlZCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICFzdHJlYW1pbmdJbnRyb2R1Y2UgJiYgIXN0cmVhbWluZ0NsZWFyZWQ7XG5cbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZCAmJiAhc2tpcFN0cmVhbWluZ1JlbmRlcjtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c01ldGEoXG4gICAgbWV0YToge1xuICAgICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgICAgd3JpdGVzPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgICB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbmV4dCA9IHsgLi4udGhpcy5zdGF0dXNNZXRhLCAuLi5tZXRhIH07XG4gICAgY29uc3QgY2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KG5leHQpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXR1c01ldGEpO1xuICAgIHRoaXMuc3RhdHVzTWV0YSA9IG5leHQ7XG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQ7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVNb2RlVG9nZ2xlcyhzdGF0ZTogUGFydGlhbDxNb2RlVG9nZ2xlU3RhdGU+KTogdm9pZCB7XG4gICAgdGhpcy50b2dnbGVTdGF0ZSA9IHsgLi4udGhpcy50b2dnbGVTdGF0ZSwgLi4uc3RhdGUgfTtcbiAgICBpZiAoXG4gICAgICAhc3RhdGUudmVyaWZpY2F0aW9uSG90a2V5ICYmXG4gICAgICAhc3RhdGUudGhpbmtpbmdIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5jcml0aWNhbEFwcHJvdmFsSG90a2V5ICYmXG4gICAgICAhc3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5ICYmXG4gICAgICAhc3RhdGUuZHVhbFJsSG90a2V5ICYmXG4gICAgICAhc3RhdGUuZGVidWdIb3RrZXlcbiAgICApIHtcbiAgICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSBSTCBhZ2VudCBleGVjdXRpb24gc3RhdHVzIGZvciBkaXNwbGF5IGluIHRoZSBVSS5cbiAgICogQ2FsbGVkIGR1cmluZyBkdWFsLVJMIG1vZGUgdG8gc2hvdyBhY3RpdmUgYWdlbnQsIG1vZHVsZS9zdGVwIHByb2dyZXNzLCBhbmQgd2luIHN0YXRpc3RpY3MuXG4gICAqL1xuICB1cGRhdGVSTFN0YXR1cyhzdGF0dXM6IFBhcnRpYWw8UkxBZ2VudFN0YXR1cz4pOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnJsU3RhdHVzLCAuLi5zdGF0dXMgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMucmxTdGF0dXMpO1xuICAgIHRoaXMucmxTdGF0dXMgPSBuZXh0O1xuICAgIGlmIChjaGFuZ2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBSTCBhZ2VudCBzdGF0dXMgKGUuZy4sIHdoZW4gUkwgcnVuIGNvbXBsZXRlcykuXG4gICAqL1xuICBjbGVhclJMU3RhdHVzKCk6IHZvaWQge1xuICAgIHRoaXMucmxTdGF0dXMgPSB7fTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjdXJyZW50IFJMIHN0YXR1cyBmb3IgZXh0ZXJuYWwgYWNjZXNzLlxuICAgKi9cbiAgZ2V0UkxTdGF0dXMoKTogUmVhZG9ubHk8UkxBZ2VudFN0YXR1cz4ge1xuICAgIHJldHVybiB0aGlzLnJsU3RhdHVzO1xuICB9XG5cbiAgc2V0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IChsaW5lcyA/PyBbXSkubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC9cXHMrJC9nLCAnJykpO1xuICAgIGNvbnN0IGhhc0NvbnRlbnQgPSBub3JtYWxpemVkLnNvbWUoKGxpbmUpID0+IGxpbmUudHJpbSgpLmxlbmd0aCA+IDApO1xuICAgIGlmICghaGFzQ29udGVudCkge1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGltaXRlZCA9IHRoaXMubGltaXRJbmxpbmVQYW5lbChub3JtYWxpemVkKTtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkobGltaXRlZCkgPT09IEpTT04uc3RyaW5naWZ5KHRoaXMuaW5saW5lUGFuZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaW5saW5lUGFuZWwgPSBsaW1pdGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBzdXBwb3J0c0lubGluZVBhbmVsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLnBsYWluTW9kZTtcbiAgfVxuXG4gIGNsZWFySW5saW5lUGFuZWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlubGluZVBhbmVsLmxlbmd0aCkgcmV0dXJuO1xuICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsaW1pdElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhMaW5lcyA9IE1hdGgubWF4KDQsIE1hdGgubWluKHRoaXMubWF4SW5saW5lUGFuZWxMaW5lcywgTWF0aC5tYXgoMiwgdGhpcy5yb3dzIC0gOCkpKTtcbiAgICBpZiAobGluZXMubGVuZ3RoIDw9IG1heExpbmVzKSB7XG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJmbG93ID0gbGluZXMubGVuZ3RoIC0gbWF4TGluZXM7XG4gICAgY29uc3QgaW5kaWNhdG9yID0gdGhlbWUudWkubXV0ZWQoYOKApiAke292ZXJmbG93fSBtb3JlIGxpbmVzYCk7XG4gICAgY29uc3QgdGFpbENvdW50ID0gTWF0aC5tYXgoMSwgbWF4TGluZXMgLSAxKTtcbiAgICBjb25zdCB0YWlsID0gbGluZXMuc2xpY2UoLXRhaWxDb3VudCk7XG4gICAgcmV0dXJuIFtpbmRpY2F0b3IsIC4uLnRhaWxdO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFByb21wdCByZW5kZXJpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHQoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHJldHVybjtcblxuICAgIC8vIFRocm90dGxlIHJlbmRlcnMgdG8gcHJldmVudCBleGNlc3NpdmUgcmVkcmF3cyBkdXJpbmcgcmFwaWQgaW5wdXRcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSB0aGlzLmxhc3RSZW5kZXJUaW1lIDwgdGhpcy5yZW5kZXJUaHJvdHRsZU1zKSB7XG4gICAgICBpZiAoIXRoaXMucGVuZGluZ1JlbmRlcikge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSB0cnVlO1xuICAgICAgICAvLyBUcmFjayB0aGUgdGltZXIgZm9yIGNsZWFudXBcbiAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLnJlbmRlclRocm90dGxlTXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHJldHVybjtcblxuICAgIHRoaXMubGFzdFJlbmRlclRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkKSB7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBsaW5lID0gYD4gJHt0aGlzLmJ1ZmZlcn1gO1xuICAgICAgaWYgKCF0aGlzLmlzUHJvbXB0QWN0aXZlICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoYFxcciR7RVNDLkNMRUFSX0xJTkV9JHtsaW5lfWApO1xuICAgICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IHRydWU7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmYWxzZTsgLy8gcHJvbXB0IGVuZHMgbWlkLWxpbmUgYnkgZGVzaWduXG4gICAgICB0aGlzLnByb21wdEhlaWdodCA9IDE7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsbG93UHJvbXB0UmVuZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmljaCBpbmxpbmUgbW9kZTogcHJvbXB0IGZsb3dzIG5hdHVyYWxseSB3aXRoIGNvbnRlbnRcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICB0aGlzLmxhc3RSZW5kZXJXaWR0aCA9IG1heFdpZHRoO1xuXG4gICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYnVpbGRPdmVybGF5TGluZXMoKTtcbiAgICBpZiAoIW92ZXJsYXkubGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyZWRMaW5lcyA9IG92ZXJsYXkubGluZXMubWFwKGxpbmUgPT4gdGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICBpZiAoIXJlbmRlcmVkTGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihvdmVybGF5LnByb21wdEluZGV4LCByZW5kZXJlZExpbmVzLmxlbmd0aCAtIDEpKTtcbiAgICBjb25zdCBoZWlnaHQgPSByZW5kZXJlZExpbmVzLmxlbmd0aDtcblxuICAgIC8vIEJhdGNoIGFsbCBBTlNJIG9wZXJhdGlvbnMgaW50byBhIHNpbmdsZSB3cml0ZSB0byBwcmV2ZW50IGZsaWNrZXJpbmdcbiAgICAvLyBUaGlzIGVsaW1pbmF0ZXMgdGhlIHZpc3VhbCBqaXR0ZXIgY2F1c2VkIGJ5IG11bHRpcGxlIHNlcXVlbnRpYWwgdGVybWluYWwgd3JpdGVzXG4gICAgY29uc3QgYnVmZmVyOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gSGlkZSBjdXJzb3IgZHVyaW5nIHJlbmRlciB0byBwcmV2ZW50IHZpc3VhbCBhcnRpZmFjdHNcbiAgICBidWZmZXIucHVzaCgnXFx4MWJbPzI1bCcpO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcHJvbXB0IGFuZCBoYW5kbGUgaGVpZ2h0IGNoYW5nZXNcbiAgICAvLyBOb3RlOiBXZSBjaGVjayBsYXN0T3ZlcmxheUhlaWdodCA+IDAgdG8ga25vdyBpZiB0aGVyZSdzIHNvbWV0aGluZyB0byBjbGVhcixcbiAgICAvLyBidXQgd2UgdXNlIGxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCBmb3IgY3Vyc29yIHBvc2l0aW9uaW5nIChkZWZhdWx0aW5nIHRvIDAgaWYgY2xlYXJlZClcbiAgICBpZiAodGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ICYmIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiAwKSB7XG4gICAgICAvLyBNb3ZlIHVwIGZyb20gcHJvbXB0IHJvdyB0byB0b3Agb2Ygb3ZlcmxheVxuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXk/LnByb21wdEluZGV4ID8/IDA7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGV4YWN0bHkgdGhlIG9sZCBvdmVybGF5IGxpbmVzLCB0aGVuIGVyYXNlIHRvIGVuZCBvZiBzY3JlZW5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodDsgaSsrKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKCdcXHInKTtcbiAgICAgICAgYnVmZmVyLnB1c2goRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgICBpZiAoaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgLSAxKSB7XG4gICAgICAgICAgYnVmZmVyLnB1c2goJ1xceDFiW0InKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBhbnl0aGluZyBiZWxvdyB0aGUgb2xkIG92ZXJsYXkgKGhhbmRsZXMgZWRnZSBjYXNlcylcbiAgICAgIGJ1ZmZlci5wdXNoKCdcXHgxYltKJyk7XG5cbiAgICAgIC8vIEFmdGVyIGNsZWFyaW5nLCBjdXJzb3IgaXMgYXQgbGFzdCBjbGVhcmVkIGxpbmVcbiAgICAgIC8vIE1vdmUgYmFjayB1cCB0byB0aGUgdG9wIHdoZXJlIG5ldyBvdmVybGF5IHNob3VsZCBzdGFydFxuICAgICAgY29uc3QgbW92ZUJhY2tVcCA9IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgLSAxO1xuICAgICAgaWYgKG1vdmVCYWNrVXAgPiAwKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske21vdmVCYWNrVXB9QWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdyaXRlIHByb21wdCBsaW5lcyAobm8gdHJhaWxpbmcgbmV3bGluZSBvbiBsYXN0IGxpbmUpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICBidWZmZXIucHVzaCgnXFxyJyk7XG4gICAgICBidWZmZXIucHVzaChFU0MuQ0xFQVJfTElORSk7XG4gICAgICBidWZmZXIucHVzaChyZW5kZXJlZExpbmVzW2ldIHx8ICcnKTtcbiAgICAgIGlmIChpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIGJ1ZmZlci5wdXNoKCdcXG4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiBvbGQgb3ZlcmxheSB3YXMgdGFsbGVyLCBjbGVhciBhbnkgcmVtYWluaW5nIHN0YWxlIGxpbmVzIGJlbG93XG4gICAgLy8gYW5kIHVzZSBDU0kgSiAoZXJhc2UgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIHNjcmVlbikgdG8gY2xlYW4gdXBcbiAgICBpZiAodGhpcy5sYXN0T3ZlcmxheUhlaWdodCA+IGhlaWdodCkge1xuICAgICAgYnVmZmVyLnB1c2goJ1xcbicpOyAvLyBNb3ZlIHRvIGxpbmUgYmVsb3cgbGFzdCBjb250ZW50XG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbSicpOyAvLyBDbGVhciBmcm9tIGN1cnNvciB0byBlbmQgb2Ygc2NyZWVuXG4gICAgICBidWZmZXIucHVzaCgnXFx4MWJbQScpOyAvLyBNb3ZlIGJhY2sgdXAgdG8gbGFzdCBjb250ZW50IGxpbmVcbiAgICB9XG5cbiAgICAvLyBQb3NpdGlvbiBjdXJzb3IgYXQgcHJvbXB0IGlucHV0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRDb2wgPSBNYXRoLm1pbihNYXRoLm1heCgxLCAzICsgdGhpcy5jdXJzb3IpLCB0aGlzLmNvbHMgfHwgODApO1xuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgYnVmZmVyLnB1c2goYFxceDFiWyR7bGluZXNUb01vdmVVcH1BYCk7XG4gICAgfVxuICAgIGJ1ZmZlci5wdXNoKGBcXHgxYlske3Byb21wdENvbH1HYCk7XG5cbiAgICAvLyBTaG93IGN1cnNvciBhZ2FpbiBhZnRlciBwb3NpdGlvbmluZ1xuICAgIGJ1ZmZlci5wdXNoKCdcXHgxYls/MjVoJyk7XG5cbiAgICAvLyBTaW5nbGUgYXRvbWljIHdyaXRlIHRvIHByZXZlbnQgZmxpY2tlcmluZ1xuICAgIHRoaXMud3JpdGUoYnVmZmVyLmpvaW4oJycpKTtcblxuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IHByb21wdENvbDtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICB0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgPSB0cnVlO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IHsgbGluZXM6IHJlbmRlcmVkTGluZXMsIHByb21wdEluZGV4IH07XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE92ZXJsYXlMaW5lcygpOiB7IGxpbmVzOiBzdHJpbmdbXTsgcHJvbXB0SW5kZXg6IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgLy8gU2ltcGxlIGhvcml6b250YWwgZGl2aWRlciAtIGNsZWFuIGFuZCByZWxpYWJsZVxuICAgIGNvbnN0IGRpdmlkZXIgPSB0aGVtZS51aS5tdXRlZCgn4pSAJy5yZXBlYXQobWF4V2lkdGgpKTtcblxuICAgIGNvbnN0IGZhbGxiYWNrQWN0aXZpdHkgPSAoKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gdGhpcy5zdGF0dXNTdHJlYW1pbmcgfHwgdGhpcy5zdGF0dXNPdmVycmlkZSB8fCB0aGlzLnN0YXR1c01lc3NhZ2U7XG4gICAgICBpZiAoIXJhdykgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCBjbGVhbmVkID0gdGhpcy5zdHJpcEFuc2kocmF3KS5yZXBsYWNlKC9eW+KPuuKAol1cXHMqLywgJycpLnRyaW0oKTtcbiAgICAgIHJldHVybiBjbGVhbmVkIHx8IG51bGw7XG4gICAgfSkoKTtcblxuICAgIC8vIEFjdGl2aXR5IGxpbmUgKG9ubHkgd2hlbiBzdHJlYW1pbmcpIC0gc2hvd3M6IOKXkCBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cylcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAodGhpcy5hY3Rpdml0eU1lc3NhZ2UgfHwgZmFsbGJhY2tBY3Rpdml0eSkpIHtcbiAgICAgIC8vIENsZWFuIHNwaW5uZXIgYW5pbWF0aW9uIHVzaW5nIGJyYWlsbGUgZG90cyArIHNoaW1tZXIgYWNjZW50IGZvciBhIHJpY2hlciBmZWVsXG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgY29uc3Qgc3RhckNoYXIgPSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lc1t0aGlzLmFjdGl2aXR5U3RhckZyYW1lICUgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXMubGVuZ3RoXSA/PyAn4py2JztcbiAgICAgIGNvbnN0IHNwaW5uZXJEZWNvcmF0ZWQgPSBgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0ke3RoZW1lLmFjY2VudCA/IHRoZW1lLmFjY2VudChzdGFyQ2hhcikgOiBzdGFyQ2hhcn1gO1xuICAgICAgY29uc3QgZWxhcHNlZCA9IHRoaXMuZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpO1xuICAgICAgY29uc3QgZ2VuZXJpY0FjdGl2aXRpZXMgPSBbJ1N0cmVhbWluZycsICdUaGlua2luZycsICdQcm9jZXNzaW5nJ107XG4gICAgICBsZXQgZGlzcGxheUFjdGl2aXR5ID0gdGhpcy5hY3Rpdml0eU1lc3NhZ2UgfHwgZmFsbGJhY2tBY3Rpdml0eSB8fCAnJztcbiAgICAgIGlmIChnZW5lcmljQWN0aXZpdGllcy5pbmNsdWRlcyhkaXNwbGF5QWN0aXZpdHkpICYmIGZhbGxiYWNrQWN0aXZpdHkpIHtcbiAgICAgICAgZGlzcGxheUFjdGl2aXR5ID0gZmFsbGJhY2tBY3Rpdml0eTtcbiAgICAgIH1cbiAgICAgIGlmICghZGlzcGxheUFjdGl2aXR5LnRyaW0oKSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5IHx8ICdXb3JraW5nJztcbiAgICAgIH1cbiAgICAgIGNvbnN0IG5lZWRzRWxsaXBzaXMgPSAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgn4oCmJykgJiYgIWRpc3BsYXlBY3Rpdml0eS50cmltRW5kKCkuZW5kc1dpdGgoJy4uLicpO1xuICAgICAgLy8gRm9ybWF0OiDioIsgV29ya2luZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAxbSAxOXMgwrcg4oaRMS4yayB0b2tlbnMpXG4gICAgICAvLyBCdWlsZCBwYXJ0cyB3aXRoIGFuaW1hdGVkIGVsYXBzZWQgdGltZSBjb2xvclxuICAgICAgY29uc3QgZWxhcHNlZENvbG9yID0gY2hhbGsuaGV4KHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzW3RoaXMuZWxhcHNlZENvbG9yRnJhbWUgJSB0aGlzLmVsYXBzZWRDb2xvckZyYW1lcy5sZW5ndGhdID8/ICcjRjU5RTBCJyk7XG4gICAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbJ2VzYyB0byBpbnRlcnJ1cHQnXTtcbiAgICAgIGlmIChlbGFwc2VkKSBwYXJ0cy5wdXNoKGVsYXBzZWRDb2xvcihlbGFwc2VkKSk7XG4gICAgICBpZiAodGhpcy5zdHJlYW1pbmdUb2tlbnMgPiAwKSB7XG4gICAgICAgIHBhcnRzLnB1c2goYOKGkSR7dGhpcy5mb3JtYXRUb2tlbkNvdW50KHRoaXMuc3RyZWFtaW5nVG9rZW5zKX0gdG9rZW5zYCk7XG4gICAgICB9XG4gICAgICBjb25zdCBwcmVmaXggPSBgJHtzcGlubmVyRGVjb3JhdGVkfSBgO1xuICAgICAgY29uc3QgYWN0aXZpdHlUZXh0ID0gYCR7ZGlzcGxheUFjdGl2aXR5LnRyaW0oKX0ke25lZWRzRWxsaXBzaXMgPyAn4oCmJyA6ICcnfWA7XG4gICAgICBjb25zdCBzdWZmaXggPSBgICR7dGhlbWUudWkubXV0ZWQoJygnKX0ke3BhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyDCtyAnKSl9JHt0aGVtZS51aS5tdXRlZCgnKScpfWA7XG5cbiAgICAgIC8vIEJ1aWxkIHRoZSBmdWxsIGFjdGl2aXR5IGxpbmUgd2l0aCBhbmltYXRlZCBjb2xvciBmb3IgZWxhcHNlZCB0aW1lXG4gICAgICBjb25zdCBhY3Rpdml0eUxpbmUgPSBgJHtwcmVmaXh9JHthY3Rpdml0eVRleHR9JHtzdWZmaXh9YDtcblxuICAgICAgLy8gQWx3YXlzIHNob3cgZnVsbCB0ZXh0IC0gd3JhcCB0byBtdWx0aXBsZSBsaW5lcyBpZiBuZWVkZWRcbiAgICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKHByZWZpeCkpO1xuICAgICAgY29uc3Qgd3JhcHBlZCA9IHRoaXMud3JhcE92ZXJsYXlMaW5lKGFjdGl2aXR5TGluZSwgbWF4V2lkdGgsIGluZGVudCk7XG4gICAgICBsaW5lcy5wdXNoKC4uLndyYXBwZWQpO1xuICAgIH1cblxuICAgIC8vIFRvcCBkaXZpZGVyXG4gICAgbGluZXMucHVzaChkaXZpZGVyKTtcblxuICAgIC8vIElucHV0IHByb21wdCBsaW5lXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBsaW5lcy5sZW5ndGg7XG4gICAgY29uc3QgaW5wdXRMaW5lID0gdGhpcy5idWlsZElucHV0TGluZSgpO1xuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IGJ5IHNwbGl0dGluZyBvbiBuZXdsaW5lc1xuICAgIC8vIEZpbHRlciBvdXQgZW1wdHkgbGluZXMgdG8gcHJldmVudCBkdXBsaWNhdGUgZGl2aWRlciBhcHBlYXJhbmNlIGZyb20gbGVhZGluZy90cmFpbGluZyBuZXdsaW5lc1xuICAgIGNvbnN0IGlucHV0TGluZXMgPSBpbnB1dExpbmUuc3BsaXQoJ1xcbicpLmZpbHRlcigobGluZSwgaWR4LCBhcnIpID0+IHtcbiAgICAgIC8vIEtlZXAgbm9uLWVtcHR5IGxpbmVzLCBidXQgcHJlc2VydmUgc2luZ2xlIGVtcHR5IGxpbmUgaWYgaXQncyBpbnRlbnRpb25hbCAoZS5nLiwgYmV0d2VlbiBjb250ZW50KVxuICAgICAgLy8gT25seSBmaWx0ZXIgbGVhZGluZy90cmFpbGluZyBlbXB0eSBsaW5lc1xuICAgICAgaWYgKGxpbmUudHJpbSgpID09PSAnJykge1xuICAgICAgICAvLyBGaWx0ZXIgaWYgaXQncyB0aGUgZmlyc3QgbGluZSAobGVhZGluZyBlbXB0eSkgb3IgbGFzdCBsaW5lICh0cmFpbGluZyBlbXB0eSlcbiAgICAgICAgaWYgKGlkeCA9PT0gMCB8fCBpZHggPT09IGFyci5sZW5ndGggLSAxKSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9KTtcbiAgICAvLyBFbnN1cmUgYXQgbGVhc3Qgb25lIGxpbmUgZm9yIHRoZSBwcm9tcHRcbiAgICBpZiAoaW5wdXRMaW5lcy5sZW5ndGggPT09IDApIHtcbiAgICAgIGlucHV0TGluZXMucHVzaCh0aGVtZS5wcmltYXJ5KCc+ICcpKTtcbiAgICB9XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGlucHV0TGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBCb3R0b20gZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbmxpbmUgcGFuZWwgKHBpbm5lZCBzY3JvbGwgYm94IGZvciBsaXZlIG91dHB1dC9tZW51cylcbiAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhbmVsTGluZSBvZiB0aGlzLmlubGluZVBhbmVsKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtwYW5lbExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRlIGlubGluZSBjb250ZW50IGZyb20gc3VnZ2VzdGlvbnMvdG9nZ2xlc1xuICAgICAgbGluZXMucHVzaChkaXZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyBTbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb25zXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW2luZGV4XSE7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaW5kZXggPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4O1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ+KWuCcpIDogdGhlbWUudWkubXV0ZWQoJyAnKTtcbiAgICAgICAgY29uc3QgY21kVGV4dCA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeShzdWdnZXN0aW9uLmNvbW1hbmQpIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5jb21tYW5kKTtcbiAgICAgICAgY29uc3QgZGVzY1RleHQgPSBpc0FjdGl2ZSA/IHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24gOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21hcmtlcn0gJHtjbWRUZXh0fSDigJQgJHtkZXNjVGV4dH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vZGVsIGFuZCBjb250ZXh0IGluZm9cbiAgICBjb25zdCBtb2RlbENvbnRleHRMaW5lID0gdGhpcy5idWlsZE1vZGVsQ29udGV4dExpbmUoKTtcbiAgICBpZiAobW9kZWxDb250ZXh0TGluZSkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21vZGVsQ29udGV4dExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBTdGF0dXMgKyBtZXRhIGJsb2NrIChpbmNsdWRlcyBkaXIvdmVyc2lvbi90b29sIHN1bW1hcnkpXG4gICAgY29uc3QgY2hyb21lTGluZXMgPSB0aGlzLmJ1aWxkQ2hyb21lTGluZXMoKTtcbiAgICBpZiAoY2hyb21lTGluZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGNocm9tZUxpbmUgb2YgY2hyb21lTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2Nocm9tZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlIHRvZ2dsZXNcbiAgICBjb25zdCB0b2dnbGVMaW5lcyA9IHRoaXMuYnVpbGRJbmxpbmVUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgdG9nZ2xlTGluZSBvZiB0b2dnbGVMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7dG9nZ2xlTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVnZW5kTGluZXMgPSB0aGlzLmJ1aWxkVG9nZ2xlTGVnZW5kKCk7XG4gICAgICBmb3IgKGNvbnN0IGxlZ2VuZCBvZiBsZWdlbmRMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7bGVnZW5kfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGVscCBoaW50XG4gICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RoZW1lLnVpLm11dGVkKCc/IGZvciBzaG9ydGN1dHMnKX1gLCBtYXhXaWR0aCkpO1xuXG4gICAgcmV0dXJuIHsgbGluZXMsIHByb21wdEluZGV4IH07XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbW9kZWwgbmFtZSBhbmQgY29udGV4dCB1c2FnZSBsaW5lIHdpdGggbWluaSBwcm9ncmVzcyBiYXJcbiAgICogRm9ybWF0OiBncHQtNCDCtyDilojilojilojilojilpHilpEgODUlIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYnVpbGRNb2RlbENvbnRleHRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gTW9kZWwgbmFtZSAocHJvdmlkZXIgLyBtb2RlbCBvciBqdXN0IG1vZGVsKVxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IMK3ICR7dGhpcy5zdGF0dXNNZXRhLm1vZGVsfWBcbiAgICAgIDogdGhpcy5zdGF0dXNNZXRhLm1vZGVsIHx8IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlcjtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuaW5mbyhtb2RlbCkpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWV0ZXIgd2l0aCBtaW5pIHByb2dyZXNzIGJhciAoc2hvd3MgdXNlZCBwZXJjZW50YWdlLCBub3QgcmVtYWluaW5nKVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdXNlZCA9IGNsYW1wUGVyY2VudGFnZSh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQpO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSA2O1xuICAgICAgY29uc3QgZmlsbGVkID0gTWF0aC5yb3VuZCgodXNlZCAvIDEwMCkgKiBiYXJXaWR0aCk7XG4gICAgICBjb25zdCBlbXB0eSA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gZmlsbGVkKTtcbiAgICAgIC8vIENvbG9yIGJhc2VkIG9uIGhvdyBmdWxsIHRoZSBjb250ZXh0IGlzIChncmVlbj1sb3cgdXNhZ2UsIHllbGxvdz1tZWRpdW0sIHJlZD1oaWdoKVxuICAgICAgY29uc3QgYmFyQ29sb3IgPSBnZXRDb250ZXh0Q29sb3IodXNlZCwge1xuICAgICAgICBlcnJvcjogdGhlbWUuZXJyb3IsXG4gICAgICAgIHdhcm5pbmc6IHRoZW1lLndhcm5pbmcsXG4gICAgICAgIGluZm86IHRoZW1lLmluZm8sXG4gICAgICAgIHN1Y2Nlc3M6IHRoZW1lLnN1Y2Nlc3MsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJhciA9IGJhckNvbG9yKCfilognLnJlcGVhdChmaWxsZWQpKSArIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdChlbXB0eSkpO1xuICAgICAgcGFydHMucHVzaChgJHtiYXJ9ICR7YmFyQ29sb3IoYCR7dXNlZH0lYCl9ICR7dGhlbWUudWkubXV0ZWQoJ2N0eCcpfWApO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICDCtyAgJykpIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBpbmxpbmUgdG9nZ2xlIGNvbnRyb2xzIC0gQ2xhdWRlIENvZGUgc3R5bGVcbiAgICogRm9ybWF0OiDij7Xij7UgYWNjZXB0IGVkaXRzIG9uIChzaGlmdCt0YWIgdG8gY3ljbGUpXG4gICAqIFJldHVybnMgd3JhcHBlZCBsaW5lcyB0byBlbnN1cmUgYWxsIHRvZ2dsZXMgKGluY2x1ZGluZyBSTCkgYXJlIHZpc2libGUgYmVsb3cgdGhlIGNoYXQgYm94LlxuICAgKi9cbiAgLyoqXG4gICAqIEJ1aWxkIHVuaWZpZWQgdG9nZ2xlIHN0YXR1cyBsaW5lIHdpdGggY29sb3ItY29kZWQgc3RhdGVzIGFuZCBpbnRlZ3JhdGVkIGV4cGxhbmF0aW9ucy5cbiAgICogRWFjaCB0b2dnbGUgaGFzIGEgZGlzdGluY3QgY29sb3IgZm9yIGVhc3kgaWRlbnRpZmljYXRpb24uXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzZWdtZW50cyB3aXRoIERJU1RJTkNUIGNvbG9ycyBmb3IgZWFjaCB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gMS4gUkwgbW9kZSAoQ1lBTikgLSBtdWx0aS1hZ2VudCB2cyBzaW5nbGUtcGFzc1xuICAgIGNvbnN0IHJsT24gPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQ7XG4gICAgY29uc3QgcmxJY29uID0gcmxPbiA/ICfwn6SWJyA6ICfimqEnO1xuICAgIGNvbnN0IHJsU3RhdHVzID0gcmxPbiA/IHRoZW1lLmluZm8oJ2R1YWwnKSA6IHRoZW1lLnVpLm11dGVkKCdzaW5nbGUnKTtcbiAgICBjb25zdCBybEV4cGxhaW4gPSBybE9uID8gJ211bHRpLWFnZW50JyA6ICdvbmUtcGFzcyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3JsSWNvbn0gJHtybFN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpURdJyl9ICR7dGhlbWUudWkubXV0ZWQocmxFeHBsYWluKX1gKTtcblxuICAgIC8vIDIuIEF1dG8tY29udGludWUgKE1BR0VOVEEvUFVSUExFKSAtIGtlZXAgZ29pbmcgdW50aWwgZG9uZVxuICAgIGNvbnN0IGNvbnRJY29uID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ/CflIQnIDogJ+KPuCc7XG4gICAgY29uc3QgY29udFN0YXR1cyA9IGF1dG9Db250aW51ZUFjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ2xvb3AnKSA6IHRoZW1lLnVpLm11dGVkKCdzdG9wJyk7XG4gICAgY29uc3QgY29udEV4cGxhaW4gPSBhdXRvQ29udGludWVBY3RpdmUgPyAndW50aWwgZG9uZScgOiAnZWFjaCByZXNwb25zZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2NvbnRJY29ufSAke2NvbnRTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVHXScpfSAke3RoZW1lLnVpLm11dGVkKGNvbnRFeHBsYWluKX1gKTtcblxuICAgIC8vIDMuIFZlcmlmeSAoWUVMTE9XKSAtIGF1dG8tdGVzdHMgYWZ0ZXIgZWRpdHNcbiAgICBjb25zdCB2ZXJpZnlJY29uID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ+KckycgOiAn4peLJztcbiAgICBjb25zdCB2ZXJpZnlTdGF0dXMgPSB2ZXJpZmljYXRpb25BY3RpdmUgPyB0aGVtZS53YXJuaW5nKCd0ZXN0JykgOiB0aGVtZS51aS5tdXRlZCgnc2tpcCcpO1xuICAgIGNvbnN0IHZlcmlmeUV4cGxhaW4gPSB2ZXJpZmljYXRpb25BY3RpdmUgPyAnYXV0by10ZXN0JyA6ICdubyB0ZXN0cyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3ZlcmlmeUljb259ICR7dmVyaWZ5U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylVl0nKX0gJHt0aGVtZS51aS5tdXRlZCh2ZXJpZnlFeHBsYWluKX1gKTtcblxuICAgIC8vIDQuIEFwcHJvdmFscyAoR1JFRU4vT1JBTkdFKSAtIGF1dG8gb3IgYXNrIGZvciBwZXJtaXNzaW9uXG4gICAgY29uc3QgYXBwckljb24gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAn8J+boScgOiAn4pyUJztcbiAgICBjb25zdCBhcHByU3RhdHVzID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gdGhlbWUud2FybmluZygnYXNrJykgOiB0aGVtZS5zdWNjZXNzKCdhdXRvJyk7XG4gICAgY29uc3QgYXBwckV4cGxhaW4gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAnY29uZmlybSBhbGwnIDogJ2F1dG8tYXBwcm92ZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2FwcHJJY29ufSAke2FwcHJTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVBXScpfSAke3RoZW1lLnVpLm11dGVkKGFwcHJFeHBsYWluKX1gKTtcblxuICAgIC8vIDUuIFRoaW5raW5nIChCTFVFKSAtIGJhbGFuY2VkIG9yIGRlZXAgcmVhc29uaW5nXG4gICAgY29uc3QgdGhpbmtpbmdJc0RlZXAgPSB0aGlua2luZ0xhYmVsID09PSAnZXh0ZW5kZWQnIHx8IHRoaW5raW5nTGFiZWwgPT09ICdkZWVwJztcbiAgICBjb25zdCB0aGlua0ljb24gPSB0aGlua2luZ0lzRGVlcCA/ICfwn6egJyA6ICfwn5KtJztcbiAgICBjb25zdCB0aGlua1N0YXR1cyA9IHRoaW5raW5nSXNEZWVwID8gdGhlbWUuaW5mbygnZGVlcCcpIDogdGhlbWUudWkubXV0ZWQoJ3F1aWNrJyk7XG4gICAgY29uc3QgdGhpbmtFeHBsYWluID0gdGhpbmtpbmdJc0RlZXAgPyAndGhvcm91Z2gnIDogJ2NvbmNpc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt0aGlua0ljb259ICR7dGhpbmtTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1tUQUJdJyl9ICR7dGhlbWUudWkubXV0ZWQodGhpbmtFeHBsYWluKX1gKTtcblxuICAgIC8vIDYuIERlYnVnIGxvZ2dpbmcgaW5kaWNhdG9yIChSRUQpIC0gdG9nZ2xlIHNob3dzIHdoZXRoZXIgY29uc29sZSBsb2dnaW5nIGlzIGVuYWJsZWRcbiAgICBjb25zdCBkZWJ1Z0FjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuZGVidWdFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IGRlYnVnSWNvbiA9IGRlYnVnQWN0aXZlID8gJ/CfkJ4nIDogJ/CflI0nO1xuICAgIGNvbnN0IGRlYnVnU3RhdHVzID0gZGVidWdBY3RpdmUgPyB0aGVtZS53YXJuaW5nKCdkZWJ1ZyBvbicpIDogdGhlbWUudWkubXV0ZWQoJ2RlYnVnIG9mZicpO1xuICAgIGNvbnN0IGRlYnVnRXhwbGFpbiA9IGRlYnVnQWN0aXZlID8gJ3ZlcmJvc2UgbG9ncycgOiAnc2lsZW50JztcbiAgICB0b2dnbGVzLnB1c2goYCR7ZGVidWdJY29ufSAke2RlYnVnU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbL2RlYnVnXScpfSAke3RoZW1lLnVpLm11dGVkKGRlYnVnRXhwbGFpbil9YCk7XG5cbiAgICAvLyA3LiBTaG9ydGN1dCBoaW50XG4gICAgdG9nZ2xlcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCc/IGhlbHAnKX1gKTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAyKTtcbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHModG9nZ2xlcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIExlZ2VuZCBpcyBub3cgaW50ZWdyYXRlZCBpbnRvIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSBmb3IgdW5pZmllZCBkaXNwbGF5XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGVnZW5kKCk6IHN0cmluZ1tdIHtcbiAgICAvLyBMZWdlbmQgZXhwbGFuYXRpb25zIG5vdyBpbnRlZ3JhdGVkIGRpcmVjdGx5IGludG8gdG9nZ2xlIGxpbmVcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ2hyb21lTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBzdGF0dXNMaW5lcyA9IHRoaXMuYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aCk7XG4gICAgY29uc3QgbWV0YUxpbmVzID0gdGhpcy5idWlsZE1ldGFCbG9jayhtYXhXaWR0aCk7XG4gICAgcmV0dXJuIFsuLi5zdGF0dXNMaW5lcywgLi4ubWV0YUxpbmVzXTtcbiAgfVxuXG4gIHByaXZhdGUgYWJicmV2aWF0ZVBhdGgocGF0aFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvbWUgPSBob21lZGlyKCk7XG4gICAgaWYgKGhvbWUgJiYgcGF0aFZhbHVlLnN0YXJ0c1dpdGgoaG9tZSkpIHtcbiAgICAgIHJldHVybiBwYXRoVmFsdWUucmVwbGFjZShob21lLCAnficpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFN0YXR1c0Jsb2NrKG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3RhdHVzTGFiZWwgPSB0aGlzLmNvbXBvc2VTdGF0dXNMYWJlbCgpO1xuICAgIGlmICghc3RhdHVzTGFiZWwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEFkZCBhbmltYXRlZCBzcGlubmVyIHdoZW4gc3RyZWFtaW5nIGZvciBkeW5hbWljIHZpc3VhbCBmZWVkYmFja1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0gJHt0aGlzLmFwcGx5VG9uZShzdGF0dXNMYWJlbC50ZXh0LCBzdGF0dXNMYWJlbC50b25lKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnc3RhdHVzJyl9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSkge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgncnVudGltZScpfSAke3RoZW1lLnVpLm11dGVkKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW5pbWF0ZWQgY29udGV4dCBtZXRlciBmb3Igc21vb3RoIGNvbG9yIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLmNvbnRleHRNZXRlci51cGRhdGUodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5jb250ZXh0TWV0ZXIucmVuZGVyKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1ldGFCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Byb2ZpbGUnLCB0aGlzLnN0YXR1c01ldGEucHJvZmlsZSwgJ2luZm8nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXIgJiYgdGhpcy5zdGF0dXNNZXRhLm1vZGVsXG4gICAgICA/IGAke3RoaXMuc3RhdHVzTWV0YS5wcm92aWRlcn0gLyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ21vZGVsJywgbW9kZWwsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2RpcicsIHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEud3JpdGVzKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3dyaXRlcycsIHRoaXMuc3RhdHVzTWV0YS53cml0ZXMsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5KSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Rvb2xzJywgdGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5LCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnc2Vzc2lvbicsIHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnZlcnNpb24pIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnYnVpbGQnLCBgdiR7dGhpcy5zdGF0dXNNZXRhLnZlcnNpb259YCwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBSTCBhZ2VudCBzdGF0dXMgd2hlbiBkdWFsLVJMIG1vZGUgaXMgYWN0aXZlXG4gICAgY29uc3QgcmxTZWdtZW50cyA9IHRoaXMuYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk7XG4gICAgaWYgKHJsU2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCguLi5ybFNlZ21lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgUkwgYWdlbnQgc3RhdHVzIHNlZ21lbnRzIGZvciBkaXNwbGF5IGR1cmluZyBkdWFsLVJMIGV4ZWN1dGlvbi5cbiAgICogU2hvd3M6IHRvdXJuYW1lbnQgc2NvcmVib2FyZCwgYWN0aXZlIGFnZW50LCBtb2R1bGUvc3RlcCBwcm9ncmVzcywgYW5kIHNjb3Jlcy5cbiAgICovXG4gIHByaXZhdGUgYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBybCA9IHRoaXMucmxTdGF0dXM7XG5cbiAgICAvLyBPbmx5IHNob3cgUkwgc3RhdHVzIHdoZW4gdGhlcmUncyBtZWFuaW5nZnVsIGRhdGFcbiAgICBpZiAoIXJsLmFjdGl2ZVZhcmlhbnQgJiYgIXJsLndpbnMgJiYgIXJsLmN1cnJlbnRNb2R1bGUpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICAvLyBUb3VybmFtZW50IHNjb3JlYm9hcmQgKGFsd2F5cyBzaG93IHdoZW4gd2lucyBleGlzdClcbiAgICBpZiAocmwud2lucyAmJiAocmwud2lucy5wcmltYXJ5ID4gMCB8fCBybC53aW5zLnJlZmluZXIgPiAwIHx8IHJsLndpbnMudGllcyA+IDApKSB7XG4gICAgICBjb25zdCB0b3RhbEdhbWVzID0gcmwud2lucy5wcmltYXJ5ICsgcmwud2lucy5yZWZpbmVyICsgcmwud2lucy50aWVzO1xuICAgICAgY29uc3QgbGVhZGVyID0gcmwud2lucy5wcmltYXJ5ID4gcmwud2lucy5yZWZpbmVyID8gJ3ByaW1hcnknIDpcbiAgICAgICAgICAgICAgICAgICAgIHJsLndpbnMucmVmaW5lciA+IHJsLndpbnMucHJpbWFyeSA/ICdyZWZpbmVyJyA6ICd0aWUnO1xuXG4gICAgICAvLyBTY29yZWJvYXJkIHdpdGggY29sb3JzIGJhc2VkIG9uIGxlYWRlclxuICAgICAgY29uc3QgcENvbG9yID0gbGVhZGVyID09PSAncHJpbWFyeScgPyB0aGVtZS5zdWNjZXNzIDogdGhlbWUuaW5mbztcbiAgICAgIGNvbnN0IHJDb2xvciA9IGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUuc3VjY2VzcyA6IHRoZW1lLndhcm5pbmc7XG4gICAgICBjb25zdCBwU2NvcmUgPSBwQ29sb3IoYCR7cmwud2lucy5wcmltYXJ5fWApO1xuICAgICAgY29uc3QgclNjb3JlID0gckNvbG9yKGAke3JsLndpbnMucmVmaW5lcn1gKTtcblxuICAgICAgLy8gVHJvcGh5IGZvciBsZWFkZXJcbiAgICAgIGNvbnN0IHRyb3BoeSA9IGxlYWRlciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbygn8J+PhicpIDpcbiAgICAgICAgICAgICAgICAgICAgIGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUud2FybmluZygn8J+PhicpIDogJ+Kalu+4jyc7XG5cbiAgICAgIC8vIFdpbiBzdHJlYWsgaW5kaWNhdG9yXG4gICAgICBjb25zdCBzdHJlYWtUZXh0ID0gcmwuc3RyZWFrICYmIHJsLnN0cmVhayA+IDEgPyB0aGVtZS51aS5tdXRlZChgIPCflKUke3JsLnN0cmVha31gKSA6ICcnO1xuXG4gICAgICBzZWdtZW50cy5wdXNoKGAke3Ryb3BoeX0ke3BTY29yZX0ke3RoZW1lLnVpLm11dGVkKCc6Jyl9JHtyU2NvcmV9JHtzdHJlYWtUZXh0fWApO1xuXG4gICAgICAvLyBQcm9ncmVzcyBiYXIgc2hvd2luZyByZWxhdGl2ZSB3aW5zXG4gICAgICBpZiAodG90YWxHYW1lcyA+IDApIHtcbiAgICAgICAgY29uc3QgYmFyV2lkdGggPSA4O1xuICAgICAgICBjb25zdCBwQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucHJpbWFyeSAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCByQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucmVmaW5lciAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCB0QmFycyA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gcEJhcnMgLSByQmFycyk7XG4gICAgICAgIGNvbnN0IGJhciA9IHRoZW1lLmluZm8oJ+KWiCcucmVwZWF0KHBCYXJzKSkgK1xuICAgICAgICAgICAgICAgICAgICB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQodEJhcnMpKSArXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lLndhcm5pbmcoJ+KWiCcucmVwZWF0KHJCYXJzKSk7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goYFske2Jhcn1dYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWN0aXZlIHZhcmlhbnQgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmFjdGl2ZVZhcmlhbnQpIHtcbiAgICAgIGNvbnN0IGlzUGFyYWxsZWwgPSBybC5wYXJhbGxlbEV4ZWN1dGlvbjtcbiAgICAgIGlmIChpc1BhcmFsbGVsKSB7XG4gICAgICAgIC8vIEJvdGggcnVubmluZyBpbiBwYXJhbGxlbFxuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3RoZW1lLmluZm8oJ+KaoVAnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oilJyl9ICR7dGhlbWUud2FybmluZygn4pqhUicpfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFyaWFudEljb24gPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAn4pa2JyA6ICfilrcnO1xuICAgICAgICBjb25zdCB2YXJpYW50TGFiZWwgPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAnUCcgOiAnUic7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRDb2xvciA9IHJsLmFjdGl2ZVZhcmlhbnQgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8gOiB0aGVtZS53YXJuaW5nO1xuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3ZhcmlhbnRJY29ufSR7dmFyaWFudENvbG9yKHZhcmlhbnRMYWJlbCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTGFzdCB3aW5uZXIgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmxhc3RXaW5uZXIgJiYgcmwubGFzdFdpbm5lciAhPT0gJ3RpZScpIHtcbiAgICAgIGNvbnN0IHdpbm5lckljb24gPSBybC5sYXN0V2lubmVyID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvKCfinJNQJykgOiB0aGVtZS53YXJuaW5nKCfinJNSJyk7XG4gICAgICBzZWdtZW50cy5wdXNoKHdpbm5lckljb24pO1xuICAgIH0gZWxzZSBpZiAocmwubGFzdFdpbm5lciA9PT0gJ3RpZScpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQoJ+KJiCcpKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IG1vZHVsZS9zdGVwIChjb21wYWN0KVxuICAgIGlmIChybC5jdXJyZW50TW9kdWxlIHx8IHJsLmN1cnJlbnRTdGVwKSB7XG4gICAgICBjb25zdCBzdGVwVGV4dCA9IHJsLmN1cnJlbnRTdGVwIHx8IHJsLmN1cnJlbnRNb2R1bGUgfHwgJyc7XG4gICAgICBpZiAoc3RlcFRleHQpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZCh0aGlzLnRydW5jYXRlTWlkZGxlKHN0ZXBUZXh0LCAxNSkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcm9ncmVzcyBpbmRpY2F0b3IgKHN0ZXBzIGNvbXBsZXRlZCAvIHRvdGFsKVxuICAgIGlmICh0eXBlb2Ygcmwuc3RlcHNDb21wbGV0ZWQgPT09ICdudW1iZXInICYmIHR5cGVvZiBybC50b3RhbFN0ZXBzID09PSAnbnVtYmVyJyAmJiBybC50b3RhbFN0ZXBzID4gMCkge1xuICAgICAgY29uc3QgcGN0ID0gTWF0aC5yb3VuZCgocmwuc3RlcHNDb21wbGV0ZWQgLyBybC50b3RhbFN0ZXBzKSAqIDEwMCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKGAke3BjdH0lYCkpO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgcmV3YXJkIHNjb3JlcyAoY29tcGFjdCwgb25seSBkdXJpbmcgYWN0aXZlIGNvbXBhcmlzb24pXG4gICAgaWYgKHJsLnNjb3JlcyAmJiAodHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInKSkge1xuICAgICAgY29uc3QgcFNjb3JlID0gdHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyA/IHJsLnNjb3Jlcy5wcmltYXJ5LnRvRml4ZWQoMikgOiAnLSc7XG4gICAgICBjb25zdCByU2NvcmUgPSB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInID8gcmwuc2NvcmVzLnJlZmluZXIudG9GaXhlZCgyKSA6ICctJztcbiAgICAgIGNvbnN0IHBWYWwgPSBybC5zY29yZXMucHJpbWFyeSA/PyAwO1xuICAgICAgY29uc3QgclZhbCA9IHJsLnNjb3Jlcy5yZWZpbmVyID8/IDA7XG4gICAgICBjb25zdCBwRGlzcGxheSA9IHBWYWwgPiByVmFsID8gdGhlbWUuc3VjY2VzcyhwU2NvcmUpIDogdGhlbWUuaW5mbyhwU2NvcmUpO1xuICAgICAgY29uc3QgckRpc3BsYXkgPSByVmFsID4gcFZhbCA/IHRoZW1lLnN1Y2Nlc3MoclNjb3JlKSA6IHRoZW1lLndhcm5pbmcoclNjb3JlKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7cERpc3BsYXl9JHt0aGVtZS51aS5tdXRlZCgnLycpfSR7ckRpc3BsYXl9YCk7XG4gICAgfVxuXG4gICAgLy8gSHVtYW4gYWNjdXJhY3kgaW5kaWNhdG9yIChyZWxhdGl2ZSByYW5raW5nIHF1YWxpdHkpXG4gICAgaWYgKHJsLmFjY3VyYWN5ICYmICh0eXBlb2YgcmwuYWNjdXJhY3kucHJpbWFyeSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHJsLmFjY3VyYWN5LnJlZmluZXIgPT09ICdudW1iZXInKSkge1xuICAgICAgY29uc3QgcEFjYyA9IHJsLmFjY3VyYWN5LnByaW1hcnkgIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQocmwuYWNjdXJhY3kucHJpbWFyeSAqIDEwMCkgOiBudWxsO1xuICAgICAgY29uc3QgckFjYyA9IHJsLmFjY3VyYWN5LnJlZmluZXIgIT09IHVuZGVmaW5lZCA/IE1hdGgucm91bmQocmwuYWNjdXJhY3kucmVmaW5lciAqIDEwMCkgOiBudWxsO1xuICAgICAgY29uc3QgcERpc3BsYXkgPSBwQWNjICE9PSBudWxsID8gdGhlbWUuaW5mbyhgUCR7cEFjY30lYCkgOiBudWxsO1xuICAgICAgY29uc3QgckRpc3BsYXkgPSByQWNjICE9PSBudWxsID8gdGhlbWUud2FybmluZyhgUiR7ckFjY30lYCkgOiBudWxsO1xuICAgICAgY29uc3QgcGFydHMgPSBbcERpc3BsYXksIHJEaXNwbGF5XS5maWx0ZXIoQm9vbGVhbikuam9pbih0aGVtZS51aS5tdXRlZCgnfCcpKTtcbiAgICAgIGlmIChwYXJ0cykge1xuICAgICAgICBzZWdtZW50cy5wdXNoKHBhcnRzKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc2VnbWVudHM7XG4gIH1cblxuICAvKipcbiAgICogVHJ1bmNhdGUgYSBzdHJpbmcgaW4gdGhlIG1pZGRsZSwgc2hvd2luZyBzdGFydCBhbmQgZW5kIHdpdGggZWxsaXBzaXMuXG4gICAqL1xuICBwcml2YXRlIHRydW5jYXRlTWlkZGxlKHRleHQ6IHN0cmluZywgbWF4TGVuOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0ZXh0Lmxlbmd0aCA8PSBtYXhMZW4pIHJldHVybiB0ZXh0O1xuICAgIGNvbnN0IGtlZXBMZW4gPSBNYXRoLmZsb29yKChtYXhMZW4gLSAzKSAvIDIpO1xuICAgIHJldHVybiBgJHt0ZXh0LnNsaWNlKDAsIGtlZXBMZW4pfS4uLiR7dGV4dC5zbGljZSgta2VlcExlbil9YDtcbiAgfVxuXG4gIHByaXZhdGUgY29tcG9zZVN0YXR1c0xhYmVsKCk6IHsgdGV4dDogc3RyaW5nOyB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIH0gfCBudWxsIHtcbiAgICBjb25zdCBzdGF0dXNlcyA9IFt0aGlzLnN0YXR1c1N0cmVhbWluZywgdGhpcy5zdGF0dXNPdmVycmlkZSwgdGhpcy5zdGF0dXNNZXNzYWdlXS5maWx0ZXIoXG4gICAgICAodmFsdWUsIGluZGV4LCBhcnIpOiB2YWx1ZSBpcyBzdHJpbmcgPT4gQm9vbGVhbih2YWx1ZSkgJiYgYXJyLmluZGV4T2YodmFsdWUpID09PSBpbmRleFxuICAgICk7XG4gICAgY29uc3QgdGV4dCA9IHN0YXR1c2VzLmxlbmd0aCA+IDAgPyBzdGF0dXNlcy5qb2luKCcgLyAnKSA6ICdSZWFkeSBmb3IgcHJvbXB0cyc7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9IG5vcm1hbGl6ZWQuaW5jbHVkZXMoJ3JlYWR5JykgPyAnc3VjY2VzcycgOiAnaW5mbyc7XG4gICAgcmV0dXJuIHsgdGV4dCwgdG9uZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRNZXRhU2VnbWVudChcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgdG9uZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdtdXRlZCdcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xvcml6ZXIgPVxuICAgICAgdG9uZSA9PT0gJ3N1Y2Nlc3MnXG4gICAgICAgID8gdGhlbWUuc3VjY2Vzc1xuICAgICAgICA6IHRvbmUgPT09ICd3YXJuJ1xuICAgICAgICAgID8gdGhlbWUud2FybmluZ1xuICAgICAgICAgIDogdG9uZSA9PT0gJ2Vycm9yJ1xuICAgICAgICAgICAgPyB0aGVtZS5lcnJvclxuICAgICAgICAgICAgOiB0b25lID09PSAnbXV0ZWQnXG4gICAgICAgICAgICAgID8gdGhlbWUudWkubXV0ZWRcbiAgICAgICAgICAgICAgOiB0aGVtZS5pbmZvO1xuICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9ICR7Y29sb3JpemVyKHZhbHVlKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVRvbmUodGV4dDogc3RyaW5nLCB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRvbmUpIHtcbiAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgICByZXR1cm4gdGhlbWUuc3VjY2Vzcyh0ZXh0KTtcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICByZXR1cm4gdGhlbWUud2FybmluZyh0ZXh0KTtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHRleHQpO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhlbWUuaW5mbyh0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10sIG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJyAgfCAgJyk7XG5cbiAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHNlZ21lbnQudHJpbSgpO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSBjb250aW51ZTtcbiAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy50cnVuY2F0ZUxpbmUobm9ybWFsaXplZCwgbWF4V2lkdGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGAke2N1cnJlbnR9JHtzZXBhcmF0b3J9JHtub3JtYWxpemVkfWA7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShjdXJyZW50LCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRDb250cm9sTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHRvZ2dsZUxpbmUgPSB0aGlzLmJ1aWxkVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdtb2RlcycpfSAke3RoZW1lLnVpLm11dGVkKCfigLonKX0gJHt0b2dnbGVMaW5lfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3J0Y3V0TGluZSA9IHRoaXMuYnVpbGRTaG9ydGN1dExpbmUoKTtcbiAgICBpZiAoc2hvcnRjdXRMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdrZXlzJyl9ICAke3Nob3J0Y3V0TGluZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgYSBjb21wYWN0IHRvZ2dsZSBsaW5lIGxpa2UgQ2xhdWRlIENvZGU6XG4gICAqIFwi4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVwiXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkQ29tcGFjdFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8gU2hvdyB0aGUgbW9zdCByZWxldmFudCBtb2RlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkO1xuXG4gICAgLy8gRWRpdCBtb2RlIGluZGljYXRvclxuICAgIGNvbnN0IGVkaXRJY29uID0gJ+KPteKPtSc7XG4gICAgY29uc3QgZWRpdFN0YXRlID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2FwcHJvdmFsIHJlcXVpcmVkJyA6ICdhY2NlcHQgZWRpdHMnO1xuICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoZWRpdEljb24pfSAke2VkaXRTdGF0ZX0gJHt0aGVtZS5zdWNjZXNzKCdvbicpfWApO1xuXG4gICAgLy8gVGhpbmtpbmcgbW9kZSAoaWYgYWN0aXZlKVxuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPSAodGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ01vZGVMYWJlbCB8fCAnJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHRoaW5raW5nTGFiZWwgJiYgdGhpbmtpbmdMYWJlbCAhPT0gJ29mZicpIHtcbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3RoaW5raW5nJyl9ICR7dGhlbWUuaW5mbyh0aGlua2luZ0xhYmVsKX1gKTtcbiAgICB9XG5cbiAgICAvLyBDeWNsZSBoaW50XG4gICAgY29uc3QgY3ljbGVIaW50ID0gdGhlbWUudWkubXV0ZWQoJyhzaGlmdCt0YWIgdG8gY3ljbGUpJyk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSAke2N5Y2xlSGludH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9nZ2xlczogQXJyYXk8e1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIG9uOiBib29sZWFuO1xuICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICBob3RrZXk/OiBzdHJpbmcgfCBudWxsO1xuICAgIH0+ID0gW107XG5cbiAgICBjb25zdCBhZGRUb2dnbGUgPSAobGFiZWw6IHN0cmluZywgb246IGJvb2xlYW4sIGhvdGtleT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpID0+IHtcbiAgICAgIHRvZ2dsZXMucHVzaCh7IGxhYmVsLCBvbiwgaG90a2V5OiB0aGlzLmZvcm1hdEhvdGtleShob3RrZXkpLCB2YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgYXV0b1ZlcmlmeUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBjb25zdCB2ZXJpZnlWYWx1ZSA9IGF1dG9WZXJpZnlBY3RpdmVcbiAgICAgID8gJ2F1dG8nXG4gICAgICA6IHZlcmlmaWNhdGlvbkFjdGl2ZVxuICAgICAgICA/ICdvbidcbiAgICAgICAgOiAnb2ZmJztcblxuICAgIGFkZFRvZ2dsZSgnVmVyaWZ5JywgdmVyaWZpY2F0aW9uQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSwgdmVyaWZ5VmFsdWUpO1xuICAgIGNvbnN0IGFwcHJvdmFsTW9kZSA9IHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbE1vZGUgfHwgJ2F1dG8nO1xuICAgIGNvbnN0IGFwcHJvdmFsQWN0aXZlID0gYXBwcm92YWxNb2RlICE9PSAnYXV0byc7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0FwcHJvdmFscycsXG4gICAgICBhcHByb3ZhbEFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSxcbiAgICAgIGFwcHJvdmFsTW9kZSA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ2FzaydcbiAgICApO1xuXG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBhZGRUb2dnbGUoXG4gICAgICAnQXV0by1jb250aW51ZScsXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSA/ICdhdXRvLXZlcmlmeScgOiAnb2ZmJ1xuICAgICk7XG5cbiAgICBjb25zdCB0aGlua2luZ0xhYmVsUmF3ID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpO1xuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPVxuICAgICAgdGhpbmtpbmdMYWJlbFJhdy50b0xvd2VyQ2FzZSgpID09PSAnZXh0ZW5kZWQnID8gJ2RlZXAnIDogdGhpbmtpbmdMYWJlbFJhdyB8fCAnYmFsYW5jZWQnO1xuICAgIGNvbnN0IHRoaW5raW5nQWN0aXZlID0gdGhpbmtpbmdMYWJlbC5sZW5ndGggPiAwO1xuICAgIGFkZFRvZ2dsZSgnVGhpbmtpbmcnLCB0aGlua2luZ0FjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSwgdGhpbmtpbmdMYWJlbCk7XG5cbiAgICBjb25zdCBkdWFsUmxBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgbW9kZVZhbHVlID0gZHVhbFJsQWN0aXZlID8gJ2R1YWwtcmwtY29udCcgOiAnc2luZ2xlLWNvbnQnO1xuICAgIGFkZFRvZ2dsZSgnTW9kZScsIGR1YWxSbEFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxIb3RrZXksIG1vZGVWYWx1ZSk7XG5cbiAgICBjb25zdCBidWlsZExpbmUgPSAoaW5jbHVkZUhvdGtleXM6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlVGV4dCA9IHRvZ2dsZS5vbiA/IHRoZW1lLnN1Y2Nlc3ModG9nZ2xlLnZhbHVlIHx8ICdvbicpIDogdGhlbWUudWkubXV0ZWQodG9nZ2xlLnZhbHVlIHx8ICdvZmYnKTtcbiAgICAgICAgICBjb25zdCBob3RrZXlUZXh0ID1cbiAgICAgICAgICAgIGluY2x1ZGVIb3RrZXlzICYmIHRvZ2dsZS5ob3RrZXkgPyB0aGVtZS51aS5tdXRlZChgIFske3RvZ2dsZS5ob3RrZXl9XWApIDogJyc7XG4gICAgICAgICAgcmV0dXJuIGAke3RoZW1lLnVpLm11dGVkKGAke3RvZ2dsZS5sYWJlbH06YCl9ICR7c3RhdGVUZXh0fSR7aG90a2V5VGV4dH1gO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbih0aGVtZS51aS5tdXRlZCgnICAnKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBsZXQgbGluZSA9IGJ1aWxkTGluZSh0cnVlKTtcblxuICAgIC8vIFJlY29yZCB3aGljaCBob3RrZXlzIGFyZSBhY3R1YWxseSBzaG93biBzbyB0aGUgc2hvcnRjdXQgbGluZSBjYW4gYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZSA9IG5ldyBTZXQoXG4gICAgICB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+ICh0b2dnbGUuaG90a2V5ID8gdG9nZ2xlLmhvdGtleSA6IG51bGwpKVxuICAgICAgICAuZmlsdGVyKChrZXkpOiBrZXkgaXMgc3RyaW5nID0+IEJvb2xlYW4oa2V5KSlcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIGxpbmUgaXMgdG9vIHdpZGUsIGRyb3AgaG90a2V5IGhpbnRzIHRvIHByZXNlcnZlIGFsbCB0b2dnbGUgbGFiZWxzXG4gICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChsaW5lKSA+IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICAgIGxpbmUgPSBidWlsZExpbmUoZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lLnRyaW0oKSA/IGxpbmUgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNob3J0Y3V0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IGFkZEhvdGtleSA9IChsYWJlbDogc3RyaW5nLCBjb21ibz86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuZm9ybWF0SG90a2V5KGNvbWJvKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5oYXMobm9ybWFsaXplZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChgJHt0aGVtZS5pbmZvKG5vcm1hbGl6ZWQpfSAke3RoZW1lLnVpLm11dGVkKGxhYmVsKX1gKTtcbiAgICB9O1xuXG4gICAgLy8gQ29yZSBjb250cm9sc1xuICAgIGFkZEhvdGtleSgnaW50ZXJydXB0JywgJ0N0cmwrQycpO1xuICAgIGFkZEhvdGtleSgnY2xlYXIgaW5wdXQnLCAnQ3RybCtVJyk7XG5cbiAgICAvLyBGZWF0dXJlIHRvZ2dsZXMgKG9ubHkgaWYgaG90a2V5cyBhcmUgZGVmaW5lZClcbiAgICBhZGRIb3RrZXkoJ3ZlcmlmeScsIHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ2F1dG8tY29udGludWUnLCB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSk7XG4gICAgYWRkSG90a2V5KCd0aGlua2luZycsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgnbW9kZScsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5KTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICAgJykpO1xuICB9XG5cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRMaW5lKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBgW3Bhc3RlZCAke3RoaXMuY29sbGFwc2VkUGFzdGUubGluZXN9IGxpbmVzLCAke3RoaXMuY29sbGFwc2VkUGFzdGUuY2hhcnN9IGNoYXJzXSAoRW50ZXIvQ3RybCtMIGluc2VydCwgQmFja3NwYWNlIGRpc2NhcmQpYDtcbiAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfSR7dGhlbWUudWkubXV0ZWQoc3VtbWFyeSl9YCwgdGhpcy5zYWZlV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgLy8gQ2xhdWRlIENvZGUgdXNlcyBzaW1wbGUgJz4nIHByb21wdFxuICAgIGNvbnN0IHByb21wdCA9IHRoZW1lLnByaW1hcnkoJz4gJyk7XG4gICAgY29uc3QgcHJvbXB0V2lkdGggPSB0aGlzLnZpc2libGVMZW5ndGgocHJvbXB0KTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3QgY29udGludWF0aW9uSW5kZW50ID0gJyAgJzsgLy8gMiBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbldpZHRoID0gY29udGludWF0aW9uSW5kZW50Lmxlbmd0aDtcblxuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IC0gc3BsaXQgYnVmZmVyIG9uIG5ld2xpbmVzIGZpcnN0XG4gICAgLy8gSW4gc2VjcmV0IG1vZGUsIG1hc2sgYWxsIGNoYXJhY3RlcnMgd2l0aCBidWxsZXRzXG4gICAgY29uc3QgcmF3QnVmZmVyID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5zZWNyZXRNb2RlID8gJ+KAoicucmVwZWF0KHJhd0J1ZmZlci5sZW5ndGgpIDogcmF3QnVmZmVyO1xuICAgIGNvbnN0IGJ1ZmZlckxpbmVzID0gbm9ybWFsaXplZC5zcGxpdCgnXFxuJyk7XG5cbiAgICAvLyBXcmFwIGVhY2ggbG9naWNhbCBsaW5lIHRvIGZpdCB0ZXJtaW5hbCB3aWR0aCwgZXhwYW5kaW5nIHZlcnRpY2FsbHlcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IHRvdGFsQ2hhcnMgPSAwO1xuICAgIGxldCBjdXJzb3JMaW5lID0gMDtcbiAgICBsZXQgY3Vyc29yQ29sID0gMDtcbiAgICBsZXQgZm91bmRDdXJzb3IgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGxpbmVJbmRleCA9IDA7IGxpbmVJbmRleCA8IGJ1ZmZlckxpbmVzLmxlbmd0aDsgbGluZUluZGV4KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXJMaW5lc1tsaW5lSW5kZXhdID8/ICcnO1xuICAgICAgY29uc3QgaXNGaXJzdExvZ2ljYWxMaW5lID0gbGluZUluZGV4ID09PSAwO1xuICAgICAgY29uc3QgbGluZVN0YXJ0Q2hhciA9IHRvdGFsQ2hhcnM7XG5cbiAgICAgIC8vIERldGVybWluZSBhdmFpbGFibGUgd2lkdGggZm9yIHRoaXMgbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lV2lkdGggPSBtYXhXaWR0aCAtIHByb21wdFdpZHRoO1xuICAgICAgY29uc3QgY29udExpbmVXaWR0aCA9IG1heFdpZHRoIC0gY29udGludWF0aW9uV2lkdGg7XG5cbiAgICAgIC8vIFdyYXAgdGhpcyBsb2dpY2FsIGxpbmUgaW50byBkaXNwbGF5IGxpbmVzXG4gICAgICBsZXQgcmVtYWluaW5nID0gbGluZTtcbiAgICAgIGxldCBpc0ZpcnN0RGlzcGxheUxpbmUgPSB0cnVlO1xuXG4gICAgICB3aGlsZSAocmVtYWluaW5nLmxlbmd0aCA+IDAgfHwgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpID8gZmlyc3RMaW5lV2lkdGggOiBjb250TGluZVdpZHRoO1xuICAgICAgICBjb25zdCBjaHVuayA9IHJlbWFpbmluZy5zbGljZSgwLCBhdmFpbGFibGVXaWR0aCk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zbGljZShhdmFpbGFibGVXaWR0aCk7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIGRpc3BsYXkgbGluZVxuICAgICAgICBsZXQgZGlzcGxheUxpbmU6IHN0cmluZztcbiAgICAgICAgaWYgKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpIHtcbiAgICAgICAgICBkaXNwbGF5TGluZSA9IGAke3Byb21wdH0ke2NodW5rfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtjb250aW51YXRpb25JbmRlbnR9JHtjaHVua31gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJhY2sgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGlmICghZm91bmRDdXJzb3IpIHtcbiAgICAgICAgICBjb25zdCBjaHVua1N0YXJ0ID0gbGluZVN0YXJ0Q2hhciArIChsaW5lLmxlbmd0aCAtIHJlbWFpbmluZy5sZW5ndGggLSBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IGNodW5rRW5kID0gY2h1bmtTdGFydCArIGNodW5rLmxlbmd0aDtcbiAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgPj0gY2h1bmtTdGFydCAmJiB0aGlzLmN1cnNvciA8PSBjaHVua0VuZCkge1xuICAgICAgICAgICAgY3Vyc29yTGluZSA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRJbkNodW5rID0gdGhpcy5jdXJzb3IgLSBjaHVua1N0YXJ0O1xuICAgICAgICAgICAgY3Vyc29yQ29sID0gKChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IHByb21wdFdpZHRoIDogY29udGludWF0aW9uV2lkdGgpICsgb2Zmc2V0SW5DaHVuaztcbiAgICAgICAgICAgIGZvdW5kQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQucHVzaChkaXNwbGF5TGluZSk7XG4gICAgICAgIGlzRmlyc3REaXNwbGF5TGluZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIG5vdGhpbmcgbGVmdCBhbmQgdGhpcyB3YXMgYW4gZW1wdHkgbGluZSwgd2UgYWxyZWFkeSBhZGRlZCBpdFxuICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0b3RhbENoYXJzICs9IGxpbmUubGVuZ3RoICsgMTsgLy8gKzEgZm9yIHRoZSBuZXdsaW5lIHNlcGFyYXRvclxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjdXJzb3IgYXQgdmVyeSBlbmRcbiAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICBjdXJzb3JMaW5lID0gTWF0aC5tYXgoMCwgcmVzdWx0Lmxlbmd0aCAtIDEpO1xuICAgICAgY29uc3QgbGFzdExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjdXJzb3JDb2wgPSB0aGlzLnZpc2libGVMZW5ndGgobGFzdExpbmUpO1xuICAgIH1cblxuICAgIC8vIEFkZCBjdXJzb3IgaGlnaGxpZ2h0IHRvIHRoZSBhcHByb3ByaWF0ZSBwb3NpdGlvblxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFyZ2V0TGluZSA9IHJlc3VsdFtjdXJzb3JMaW5lXSA/PyAnJztcbiAgICAgIGNvbnN0IHZpc2libGVQYXJ0ID0gdGhpcy5zdHJpcEFuc2kodGFyZ2V0TGluZSk7XG4gICAgICBjb25zdCBjdXJzb3JQb3MgPSBNYXRoLm1pbihjdXJzb3JDb2wsIHZpc2libGVQYXJ0Lmxlbmd0aCk7XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpbmUgd2l0aCBjdXJzb3IgaGlnaGxpZ2h0XG4gICAgICBjb25zdCBiZWZvcmUgPSB2aXNpYmxlUGFydC5zbGljZSgwLCBjdXJzb3JQb3MpO1xuICAgICAgY29uc3QgYXQgPSB2aXNpYmxlUGFydC5jaGFyQXQoY3Vyc29yUG9zKSB8fCAnICc7XG4gICAgICBjb25zdCBhZnRlciA9IHZpc2libGVQYXJ0LnNsaWNlKGN1cnNvclBvcyArIDEpO1xuXG4gICAgICAvLyBQcmVzZXJ2ZSB0aGUgcHJvbXB0L2luZGVudCBzdHlsaW5nXG4gICAgICBjb25zdCBwcmVmaXggPSBjdXJzb3JMaW5lID09PSAwID8gcHJvbXB0IDogY29udGludWF0aW9uSW5kZW50O1xuICAgICAgY29uc3QgdGV4dFBhcnQgPSBjdXJzb3JMaW5lID09PSAwID8gYmVmb3JlLnNsaWNlKHByb21wdFdpZHRoKSA6IGJlZm9yZS5zbGljZShjb250aW51YXRpb25XaWR0aCk7XG4gICAgICByZXN1bHRbY3Vyc29yTGluZV0gPSBgJHtwcmVmaXh9JHt0ZXh0UGFydH0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIGN1cnNvciBjb2x1bW4gZm9yIHRlcm1pbmFsIHBvc2l0aW9uaW5nXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gY3Vyc29yQ29sICsgMTtcblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRXaW5kb3coYXZhaWxhYmxlOiBudW1iZXIpOiB7IHRleHQ6IHN0cmluZzsgY3Vyc29yOiBudW1iZXIgfSB7XG4gICAgaWYgKGF2YWlsYWJsZSA8PSAwKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHJldHVybiB7IHRleHQ6ICcnLCBjdXJzb3I6IDAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBjdXJzb3JJbmRleCA9IE1hdGgubWluKHRoaXMuY3Vyc29yLCBub3JtYWxpemVkLmxlbmd0aCk7XG5cbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5pbnB1dFJlbmRlck9mZnNldDtcbiAgICBpZiAoY3Vyc29ySW5kZXggPCBvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IGN1cnNvckluZGV4O1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGN1cnNvckluZGV4IC0gb2Zmc2V0IC0gYXZhaWxhYmxlICsgMTtcbiAgICBpZiAob3ZlcmZsb3cgPiAwKSB7XG4gICAgICBvZmZzZXQgKz0gb3ZlcmZsb3c7XG4gICAgfVxuICAgIGNvbnN0IG1heE9mZnNldCA9IE1hdGgubWF4KDAsIG5vcm1hbGl6ZWQubGVuZ3RoIC0gYXZhaWxhYmxlKTtcbiAgICBpZiAob2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBtYXhPZmZzZXQ7XG4gICAgfVxuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSBvZmZzZXQ7XG5cbiAgICBjb25zdCB3aW5kb3cgPSBub3JtYWxpemVkLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgYXZhaWxhYmxlKTtcbiAgICBjb25zdCBkaXNwbGF5ID0gd2luZG93LnNwbGl0KCcnKS5tYXAoY2hhciA9PiAoY2hhciA9PT0gJ1xcbicgPyBORVdMSU5FX1BMQUNFSE9MREVSIDogY2hhcikpLmpvaW4oJycpO1xuICAgIGNvbnN0IGN1cnNvckluV2luZG93ID0gTWF0aC5taW4oZGlzcGxheS5sZW5ndGgsIE1hdGgubWF4KDAsIGN1cnNvckluZGV4IC0gb2Zmc2V0KSk7XG5cbiAgICBjb25zdCBiZWZvcmUgPSBkaXNwbGF5LnNsaWNlKDAsIGN1cnNvckluV2luZG93KTtcbiAgICBjb25zdCBhdCA9IGRpc3BsYXkuY2hhckF0KGN1cnNvckluV2luZG93KSB8fCAnICc7XG4gICAgY29uc3QgYWZ0ZXIgPSBkaXNwbGF5LnNsaWNlKGN1cnNvckluV2luZG93ICsgMSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogYCR7YmVmb3JlfSR7RVNDLlJFVkVSU0V9JHthdH0ke0VTQy5SRVNFVH0ke2FmdGVyfWAsXG4gICAgICBjdXJzb3I6IGN1cnNvckluV2luZG93LFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGNvbGxhcHNlZCBwYXN0ZSBpbnRvIHRoZSBidWZmZXIgd2l0aG91dCBzdWJtaXR0aW5nIChDdHJsK0wpLlxuICAgKiBBbGxvd3MgdXNlciB0byBlZGl0IHRoZSBwYXN0ZWQgY29udGVudCBiZWZvcmUgc3VibWlzc2lvbi5cbiAgICovXG4gIHByaXZhdGUgZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIC8vIFB1dCB0aGUgcGFzdGVkIGNvbnRlbnQgaW50byB0aGUgYnVmZmVyIGZvciBlZGl0aW5nXG4gICAgdGhpcy5idWZmZXIgPSB0ZXh0O1xuICAgIHRoaXMuY3Vyc29yID0gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgY29sbGFwc2VkIHBhc3RlIGFuZCBzdWJtaXQgaW1tZWRpYXRlbHkgKEVudGVyKS5cbiAgICogVXNlZCB3aGVuIHVzZXIgd2FudHMgdG8gc2VuZCB0aGUgcGFzdGVkIGNvbnRlbnQgYXMtaXMuXG4gICAqL1xuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQ7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgLy8gQ2xlYXIgdGhlIGJ1ZmZlciBmaXJzdCB0byBhdm9pZCBhbnkgdmlzdWFsIGR1cGxpY2F0aW9uXG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAvLyBTdWJtaXQgdGhlIHBhc3RlIGNvbnRlbnQgKGRpc3BsYXlVc2VyUHJvbXB0IGlzIGNhbGxlZCB3aXRoaW4gc3VibWl0VGV4dCBmb3Igbm9uLXNsYXNoIGNvbW1hbmRzKVxuICAgIHRoaXMuc3VibWl0VGV4dCh0ZXh0KTtcbiAgfVxuXG4gIGNhcHR1cmVJbnB1dChvcHRpb25zOiB7IGFsbG93RW1wdHk/OiBib29sZWFuOyB0cmltPzogYm9vbGVhbjsgcmVzZXRCdWZmZXI/OiBib29sZWFuIH0gPSB7fSk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGFscmVhZHkgaW4gcHJvZ3Jlc3MnKSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdGlvbnMucmVzZXRCdWZmZXIpIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlPHN0cmluZz4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy5pbnB1dENhcHR1cmUgPSB7XG4gICAgICAgIHJlc29sdmUsXG4gICAgICAgIHJlamVjdCxcbiAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgIHRyaW06IG9wdGlvbnMudHJpbSAhPT0gZmFsc2UsXG4gICAgICAgICAgYWxsb3dFbXB0eTogb3B0aW9ucy5hbGxvd0VtcHR5ID8/IGZhbHNlLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsSW5wdXRDYXB0dXJlKHJlYXNvbj86IHVua25vd24pOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGNhcHR1cmUgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgY2FwdHVyZS5yZWplY3Q/LihyZWFzb24gPz8gbmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGNhbmNlbGxlZCcpKTtcbiAgfVxuXG5cbiAgLy8gLS0tLS0tLS0tLS0tIEhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSB3cmFwT3ZlcmxheUxpbmUodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyLCBpbmRlbnQ6IHN0cmluZyk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQuc3BsaXQoLyhcXHMrKS8pO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgIGNvbnN0IG5leHQgPSBjdXJyZW50ICsgd29yZDtcbiAgICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobmV4dCkgPiB3aWR0aCAmJiBjdXJyZW50LnRyaW0oKSkge1xuICAgICAgICAvLyBEb24ndCB0cnVuY2F0ZSAtIGp1c3QgcHVzaCB0aGUgbGluZSBhcy1pcyAoaXQgZml0cyB3aXRoaW4gd2lkdGgpXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudC50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50ID0gaW5kZW50ICsgd29yZC50cmltU3RhcnQoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBuZXh0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50LnRyaW0oKSkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50LnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgLy8gSWYgbm8gbGluZXMgd2VyZSBwcm9kdWNlZCwgcmV0dXJuIHRoZSBvcmlnaW5hbCB0ZXh0IHdpdGhvdXQgdHJ1bmNhdGlvblxuICAgIHJldHVybiBsaW5lcy5sZW5ndGggPyBsaW5lcyA6IFt0ZXh0XTtcbiAgfVxuXG4gIHByaXZhdGUgc2FmZVdpZHRoKCk6IG51bWJlciB7XG4gICAgY29uc3QgY29scyA9IHRoaXMub3V0cHV0LmlzVFRZID8gdGhpcy5jb2xzIHx8IDgwIDogODA7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEsIGNvbHMgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgdmlzaWJsZUxlbmd0aCh2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gMDtcbiAgICByZXR1cm4gdGhpcy5zdHJpcEFuc2kodmFsdWUpLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgc3RyaXBBbnNpKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXHUwMDFCXFxbWzAtP10qWyAtL10qW0Atfl0vZywgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cnVuY2F0ZUxpbmUodmFsdWU6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5tYXgoMSwgd2lkdGgpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgY29uc3QgdG9rZW5zID0gdmFsdWUuc3BsaXQoLyhcXHgxYlxcW1swLTk7XSptKS91KTtcbiAgICBsZXQgdmlzaWJsZSA9IDA7XG4gICAgbGV0IHRydW5jYXRlZCA9IGZhbHNlO1xuICAgIGxldCByZXN1bHQgPSAnJztcblxuICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICBpZiAoIXRva2VuKSBjb250aW51ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoL15cXHgxYlxcW1swLTk7XSptJC91LnRlc3QodG9rZW4pKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodmlzaWJsZSA+PSBsaW1pdCkge1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGxpbWl0IC0gdmlzaWJsZTtcbiAgICAgIGlmICh0b2tlbi5sZW5ndGggPD0gcmVtYWluaW5nKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgdmlzaWJsZSArPSB0b2tlbi5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzbGljZUxlbmd0aCA9IE1hdGgubWF4KDAsIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICBpZiAoc2xpY2VMZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHRva2VuLnNsaWNlKDAsIHNsaWNlTGVuZ3RoKTtcbiAgICAgICAgICB2aXNpYmxlICs9IHNsaWNlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCArPSAn4oCmJztcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRydW5jYXRlZCAmJiAhcmVzdWx0LmVuZHNXaXRoKEVTQy5SRVNFVCkpIHtcbiAgICAgIHJlc3VsdCArPSBFU0MuUkVTRVQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGdldEJ1ZmZlcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcjtcbiAgfVxuXG4gIGdldEN1cnNvcigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnNvcjtcbiAgfVxuXG4gIHNldEJ1ZmZlcih0ZXh0OiBzdHJpbmcsIGN1cnNvclBvcz86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICAvLyBWYWxpZGF0ZSBjdXJzb3IgcG9zaXRpb24gdG8gcHJldmVudCBvdXQtb2YtYm91bmRzIGlzc3Vlc1xuICAgIGNvbnN0IHJlcXVlc3RlZEN1cnNvciA9IGN1cnNvclBvcyA/PyB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJlcXVlc3RlZEN1cnNvciwgdGV4dC5sZW5ndGgpKTtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0U2VjcmV0TW9kZShlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5zZWNyZXRNb2RlID0gZW5hYmxlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYXJCdWZmZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldE1vZGVTdGF0dXMoc3RhdHVzOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgY29tcGFjdGluZyBzdGF0dXMgd2l0aCBhbmltYXRlZCBzcGlubmVyIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogVXNlcyDinLsgY2hhcmFjdGVyIHdpdGggYW5pbWF0aW9uIHRvIGluZGljYXRlIGNvbnRleHQgY29tcGFjdGlvbiBpbiBwcm9ncmVzc1xuICAgKi9cbiAgc2hvd0NvbXBhY3RpbmdTdGF0dXMobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdGhpcy5zcGlubmVyRnJhbWUrKztcbiAgICAgICAgLy8gQ3ljbGUgYWN0aXZpdHkgcGhyYXNlIGV2ZXJ5IH40IHNlY29uZHMgKDUwIGZyYW1lcyBhdCA4MG1zKVxuICAgICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSA1MCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuYWN0aXZpdHlQaHJhc2VJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9LCA4MCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgY29tcGFjdGluZyBzdGF0dXMgYW5kIHN0b3Agc3Bpbm5lciBhbmltYXRpb25cbiAgICovXG4gIGhpZGVDb21wYWN0aW5nU3RhdHVzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGVtaXRQcm9tcHQoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wdXNoUHJvbXB0RXZlbnQoY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSB1c2VyIHByb21wdCBpbW1lZGlhdGVseSBpbiBzY3JvbGxiYWNrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogV3JpdGVzIHN5bmNocm9ub3VzbHkgdG8gZW5zdXJlIGl0IGFwcGVhcnMgT05DRSBpbiBzY3JvbGxiYWNrIGJlZm9yZSBzdGF0dXMgdXBkYXRlcy5cbiAgICogVGhlIHByb21wdCBpbnB1dCBhcmVhIHdpbGwgdGhlbiBmbG9hdCBiZWxvdyB0aGlzIGFuZCBhbGwgc3Vic2VxdWVudCBldmVudHMuXG4gICAqL1xuICBwcml2YXRlIGRpc3BsYXlVc2VyUHJvbXB0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG5cbiAgICAvLyBQcmV2ZW50IGR1cGxpY2F0ZSBwcm9tcHQgZGlzcGxheSB3aXRoaW4gMS41IHNlY29uZHNcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuXG4gICAgLy8gQWRkIHRvIGV2ZW50IHF1ZXVlIGluc3RlYWQgb2Ygd3JpdGluZyBkaXJlY3RseSB0byBlbnN1cmUgcHJvcGVyIHJlbmRlcmluZ1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gTG93LWxldmVsIGhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm91dHB1dC53cml0ZShkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgcHVzaFByb21wdEV2ZW50KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdFByb21wdEV2ZW50ICYmIHRoaXMubGFzdFByb21wdEV2ZW50LnRleHQgPT09IG5vcm1hbGl6ZWQgJiYgbm93IC0gdGhpcy5sYXN0UHJvbXB0RXZlbnQuYXQgPCAxNTAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubGFzdFByb21wdEV2ZW50ID0geyB0ZXh0OiBub3JtYWxpemVkLCBhdDogbm93IH07XG4gICAgdGhpcy5hZGRFdmVudCgncHJvbXB0Jywgbm9ybWFsaXplZCk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyUHJvbXB0QXJlYSgpOiB2b2lkIHtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmxhc3RPdmVybGF5Py5saW5lcy5sZW5ndGggPz8gdGhpcy5wcm9tcHRIZWlnaHQgPz8gMDtcbiAgICBpZiAoaGVpZ2h0ID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBDdXJzb3IgaXMgYXQgcHJvbXB0IHJvdy4gTW92ZSB1cCB0byB0b3Agb2Ygb3ZlcmxheSBmaXJzdC5cbiAgICBpZiAodGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXkucHJvbXB0SW5kZXg7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3cgYXQgdG9wLCBjbGVhciBlYWNoIGxpbmUgZG93bndhcmRcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgaWYgKGkgPCBoZWlnaHQgLSAxKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xceDFiW0InKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wICh3aGVyZSBjb250ZW50IHNob3VsZCBjb250aW51ZSBmcm9tKVxuICAgIGlmIChoZWlnaHQgPiAxKSB7XG4gICAgICB0aGlzLndyaXRlKGBcXHgxYlske2hlaWdodCAtIDF9QWApO1xuICAgIH1cbiAgICB0aGlzLndyaXRlKCdcXHInKTtcblxuICAgIHRoaXMubGFzdE92ZXJsYXkgPSBudWxsO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMucm93cyA9IHRoaXMub3V0cHV0LnJvd3MgfHwgMjQ7XG4gICAgICB0aGlzLmNvbHMgPSB0aGlzLm91dHB1dC5jb2x1bW5zIHx8IDgwO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFXQSxJQUFBQSxRQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9B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