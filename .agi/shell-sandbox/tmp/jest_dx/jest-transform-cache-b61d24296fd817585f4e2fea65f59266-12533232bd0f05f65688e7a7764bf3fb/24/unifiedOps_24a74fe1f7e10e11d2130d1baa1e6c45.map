{"version":3,"names":["_fileTools","require","_editTools","_bashTools","_searchTools","_webTools","_humanOpsTools","_generatorTools","buildToolMap","workingDir","toolSets","createFileTools","createEditTools","createBashTools","createSearchTools","createWebTools","createHumanOpsTools","createGeneratorTools","map","list","suite","tool","name","push","description","createUnifiedOpsTools","toolNames","item","unified","parameters","type","properties","join","args","required","additionalProperties","handler","toolName","trim","entries","entry","target","toolArgs","Array","isArray","result","error","message","Error","String"],"sources":["unifiedOps.ts"],"sourcesContent":["import type { ToolDefinition } from '../core/toolRuntime.js';\nimport { createFileTools } from './fileTools.js';\nimport { createEditTools } from './editTools.js';\nimport { createBashTools } from './bashTools.js';\nimport { createSearchTools } from './searchTools.js';\nimport { createWebTools } from './webTools.js';\nimport { createHumanOpsTools } from './humanOpsTools.js';\nimport { createGeneratorTools } from './generatorTools.js';\n\ntype ToolMap = Record<string, ToolDefinition>;\n\nfunction buildToolMap(workingDir: string): { map: ToolMap; list: Array<{ name: string; description: string }> } {\n  const toolSets = [\n    createFileTools(workingDir),\n    createEditTools(workingDir),\n    createBashTools(workingDir),\n    createSearchTools(workingDir),\n    createWebTools(),\n    createHumanOpsTools(),\n    createGeneratorTools(),\n  ];\n\n  const map: ToolMap = {};\n  const list: Array<{ name: string; description: string }> = [];\n\n  for (const suite of toolSets) {\n    for (const tool of suite) {\n      if (!tool?.name) continue;\n      // Prefer first occurrence to avoid surprising overrides\n      if (map[tool.name]) continue;\n      map[tool.name] = tool;\n      list.push({ name: tool.name, description: tool.description || '' });\n    }\n  }\n\n  return { map, list };\n}\n\n/**\n * UnifiedOps - a single entry point that routes to any core tool by name.\n * Useful for agents that want a stable meta-tool interface or to mix flows\n * (e.g., human-ops + generator + bash/search) without juggling suites.\n */\nexport function createUnifiedOpsTools(workingDir: string): ToolDefinition[] {\n  const { map, list } = buildToolMap(workingDir);\n  const toolNames = list.map((item) => item.name);\n\n  const unified: ToolDefinition = {\n    name: 'UnifiedOps',\n    description:\n      'Meta-tool that dispatches to any core tool by name (filesystem, edit, bash, search, web, human-ops, generator). Use tool=\"list\" to see available tools.',\n    parameters: {\n      type: 'object',\n      properties: {\n        tool: {\n          type: 'string',\n          description: `Tool to run (${toolNames.join(', ')} or \"list\").`,\n        },\n        args: {\n          type: 'object',\n          description: 'Arguments for the chosen tool (matches the tool schema).',\n        },\n      },\n      required: ['tool'],\n      additionalProperties: false,\n    },\n    handler: async (args) => {\n      const toolName = typeof args['tool'] === 'string' ? args['tool'].trim() : '';\n      if (!toolName) {\n        return 'Error: tool is required. Use tool=\"list\" to see options.';\n      }\n\n      if (toolName === 'list') {\n        const entries = list.map((entry) => `- ${entry.name}: ${entry.description || ''}`).join('\\n');\n        return `Available tools:\\n${entries}`;\n      }\n\n      const target = map[toolName];\n      if (!target) {\n        return `Error: unknown tool \"${toolName}\". Use tool=\"list\" to see available tools.`;\n      }\n\n      const toolArgs =\n        args['args'] && typeof args['args'] === 'object' && !Array.isArray(args['args'])\n          ? (args['args'] as Record<string, unknown>)\n          : {};\n\n      try {\n        const result = await target.handler(toolArgs);\n        return result;\n      } catch (error) {\n        const message = error instanceof Error ? error.message : String(error);\n        return `UnifiedOps error running \"${toolName}\": ${message}`;\n      }\n    },\n  };\n\n  return [unified];\n}\n"],"mappings":"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","ignoreList":[]}