2d0860ac6727cf224fb6513762bf1b6d
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.TypeGuards = exports.ToolArgumentValidationError = void 0;
exports.coerceToolArguments = coerceToolArguments;
exports.validateToolArguments = validateToolArguments;
/* eslint-disable @typescript-eslint/no-namespace */

/**
 * Enhanced validation error with structured error information
 */
class ToolArgumentValidationError extends Error {
  constructor(toolName, issues) {
    super(formatMessage(toolName, issues));
    this.name = 'ToolArgumentValidationError';
    this.issues = issues;
    this.toolName = toolName;
  }
}

/**
 * Runtime type guards for tool argument validation
 */
exports.ToolArgumentValidationError = ToolArgumentValidationError;
let TypeGuards = exports.TypeGuards = void 0;
(function (_TypeGuards) {
  function isString(value) {
    return typeof value === 'string';
  }
  _TypeGuards.isString = isString;
  function isNumber(value) {
    return typeof value === 'number' && !Number.isNaN(value);
  }
  _TypeGuards.isNumber = isNumber;
  function isBoolean(value) {
    return typeof value === 'boolean';
  }
  _TypeGuards.isBoolean = isBoolean;
  function isArray(value) {
    return Array.isArray(value);
  }
  _TypeGuards.isArray = isArray;
  function isObject(value) {
    return typeof value === 'object' && value !== null && !Array.isArray(value);
  }
  _TypeGuards.isObject = isObject;
  function isNotNull(value) {
    return value !== undefined && value !== null;
  }
  _TypeGuards.isNotNull = isNotNull;
  function isEnum(value, enumValues) {
    return TypeGuards.isString(value) && enumValues.includes(value);
  }
  _TypeGuards.isEnum = isEnum;
})(TypeGuards || (exports.TypeGuards = TypeGuards = {}));
/**
 * Coerce loosely-typed tool arguments into their declared schema types.
 * This makes tools resilient to providers that emit boolean/number values as strings.
 */
function coerceToolArguments(schema, args) {
  if (!schema || schema.type !== 'object' || !schema.properties) {
    return args;
  }
  const coerced = {
    ...args
  };
  for (const [key, definition] of Object.entries(schema.properties)) {
    if (!Object.hasOwn(args, key)) {
      continue;
    }
    const value = args[key];
    if (value === undefined || value === null) {
      continue;
    }
    switch (definition.type) {
      case 'boolean':
        {
          const normalized = coerceBoolean(value);
          coerced[key] = normalized;
          break;
        }
      case 'number':
        {
          const normalized = coerceNumber(value);
          coerced[key] = normalized;
          break;
        }
      default:
        break;
    }
  }
  return coerced;
}
function coerceBoolean(value) {
  if (typeof value === 'boolean') {
    return value;
  }
  if (typeof value === 'number') {
    if (value === 1) return true;
    if (value === 0) return false;
  }
  if (typeof value === 'string') {
    const trimmed = value.trim().toLowerCase();
    if (trimmed === 'true' || trimmed === '1') return true;
    if (trimmed === 'false' || trimmed === '0') return false;
  }
  return value;
}
function coerceNumber(value) {
  if (typeof value === 'number') {
    // Reject NaN, Infinity, and -Infinity
    if (!Number.isFinite(value)) {
      return value; // Return as-is to fail validation
    }
    return value;
  }
  if (typeof value === 'string' && value.trim().length > 0) {
    const parsed = Number(value);
    // Only accept finite numbers
    if (Number.isFinite(parsed)) {
      return parsed;
    }
  }
  return value;
}
function validateToolArguments(toolName, schema, args) {
  if (!schema || schema.type !== 'object') {
    return;
  }
  const errors = [];
  const properties = schema.properties ?? {};
  const required = Array.isArray(schema.required) ? schema.required : [];
  for (const property of required) {
    if (!hasArgument(args, property)) {
      errors.push(`Missing required property "${property}".`);
    }
  }
  for (const [key, value] of Object.entries(args)) {
    const definition = properties[key];
    if (!definition) {
      // Silently ignore unknown properties - models sometimes hallucinate extra params
      // This is more lenient than strict JSON schema validation but prevents errors
      // when models pass extra parameters that don't affect tool behavior
      continue;
    }
    validateSchemaProperty(definition, value, key, errors);
  }
  if (errors.length) {
    throw new ToolArgumentValidationError(toolName, errors);
  }
}
function validateSchemaProperty(definition, value, path, errors) {
  switch (definition.type) {
    case 'string':
      {
        if (typeof value !== 'string') {
          errors.push(`Argument "${path}" must be a string.`);
          return;
        }
        if (definition.enum && !definition.enum.includes(value)) {
          errors.push(`Argument "${path}" must be one of: ${definition.enum.map(entry => `"${entry}"`).join(', ')}.`);
        }
        if (typeof definition.minLength === 'number' && value.length < definition.minLength) {
          errors.push(`Argument "${path}" must be at least ${definition.minLength} character${definition.minLength === 1 ? '' : 's'} long.`);
        }
        return;
      }
    case 'number':
      {
        if (typeof value !== 'number' || !Number.isFinite(value)) {
          errors.push(`Argument "${path}" must be a finite number.`);
          return;
        }
        // Validate minimum constraint
        if (typeof definition.minimum === 'number' && value < definition.minimum) {
          errors.push(`Argument "${path}" must be at least ${definition.minimum}.`);
        }
        // Validate maximum constraint
        if (typeof definition.maximum === 'number' && value > definition.maximum) {
          errors.push(`Argument "${path}" must be at most ${definition.maximum}.`);
        }
        return;
      }
    case 'boolean':
      {
        if (typeof value !== 'boolean') {
          errors.push(`Argument "${path}" must be a boolean.`);
        }
        return;
      }
    case 'array':
      {
        if (!Array.isArray(value)) {
          errors.push(`Argument "${path}" must be an array.`);
          return;
        }
        validateArrayItems(definition, value, path, errors);
        return;
      }
    default:
      return;
  }
}
function validateArrayItems(definition, value, path, errors) {
  const itemSchema = definition.items;
  if (!itemSchema) {
    return;
  }
  for (let index = 0; index < value.length; index += 1) {
    const entry = value[index];
    validateSchemaProperty(itemSchema, entry, `${path}[${index}]`, errors);
  }
}
function hasArgument(args, key) {
  if (!Object.hasOwn(args, key)) {
    return false;
  }
  const value = args[key];
  return value !== undefined && value !== null;
}
function formatMessage(toolName, issues) {
  const detail = issues.join(' ');
  return `Invalid arguments for "${toolName}": ${detail}`;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJUb29sQXJndW1lbnRWYWxpZGF0aW9uRXJyb3IiLCJFcnJvciIsImNvbnN0cnVjdG9yIiwidG9vbE5hbWUiLCJpc3N1ZXMiLCJmb3JtYXRNZXNzYWdlIiwibmFtZSIsImV4cG9ydHMiLCJUeXBlR3VhcmRzIiwiX1R5cGVHdWFyZHMiLCJpc1N0cmluZyIsInZhbHVlIiwiaXNOdW1iZXIiLCJOdW1iZXIiLCJpc05hTiIsImlzQm9vbGVhbiIsImlzQXJyYXkiLCJBcnJheSIsImlzT2JqZWN0IiwiaXNOb3ROdWxsIiwidW5kZWZpbmVkIiwiaXNFbnVtIiwiZW51bVZhbHVlcyIsImluY2x1ZGVzIiwiY29lcmNlVG9vbEFyZ3VtZW50cyIsInNjaGVtYSIsImFyZ3MiLCJ0eXBlIiwicHJvcGVydGllcyIsImNvZXJjZWQiLCJrZXkiLCJkZWZpbml0aW9uIiwiT2JqZWN0IiwiZW50cmllcyIsImhhc093biIsIm5vcm1hbGl6ZWQiLCJjb2VyY2VCb29sZWFuIiwiY29lcmNlTnVtYmVyIiwidHJpbW1lZCIsInRyaW0iLCJ0b0xvd2VyQ2FzZSIsImlzRmluaXRlIiwibGVuZ3RoIiwicGFyc2VkIiwidmFsaWRhdGVUb29sQXJndW1lbnRzIiwiZXJyb3JzIiwicmVxdWlyZWQiLCJwcm9wZXJ0eSIsImhhc0FyZ3VtZW50IiwicHVzaCIsInZhbGlkYXRlU2NoZW1hUHJvcGVydHkiLCJwYXRoIiwiZW51bSIsIm1hcCIsImVudHJ5Iiwiam9pbiIsIm1pbkxlbmd0aCIsIm1pbmltdW0iLCJtYXhpbXVtIiwidmFsaWRhdGVBcnJheUl0ZW1zIiwiaXRlbVNjaGVtYSIsIml0ZW1zIiwiaW5kZXgiLCJkZXRhaWwiXSwic291cmNlcyI6WyJzY2hlbWFWYWxpZGF0b3IudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyogZXNsaW50LWRpc2FibGUgQHR5cGVzY3JpcHQtZXNsaW50L25vLW5hbWVzcGFjZSAqL1xuaW1wb3J0IHR5cGUgeyBKU09OU2NoZW1hQXJyYXksIEpTT05TY2hlbWFPYmplY3QsIEpTT05TY2hlbWFQcm9wZXJ0eSB9IGZyb20gJy4vdHlwZXMuanMnO1xuXG4vKipcbiAqIEVuaGFuY2VkIHZhbGlkYXRpb24gZXJyb3Igd2l0aCBzdHJ1Y3R1cmVkIGVycm9yIGluZm9ybWF0aW9uXG4gKi9cbmV4cG9ydCBjbGFzcyBUb29sQXJndW1lbnRWYWxpZGF0aW9uRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIHJlYWRvbmx5IGlzc3VlczogcmVhZG9ubHkgc3RyaW5nW107XG4gIHJlYWRvbmx5IHRvb2xOYW1lOiBzdHJpbmc7XG4gIFxuICBjb25zdHJ1Y3Rvcih0b29sTmFtZTogc3RyaW5nLCBpc3N1ZXM6IHN0cmluZ1tdKSB7XG4gICAgc3VwZXIoZm9ybWF0TWVzc2FnZSh0b29sTmFtZSwgaXNzdWVzKSk7XG4gICAgdGhpcy5uYW1lID0gJ1Rvb2xBcmd1bWVudFZhbGlkYXRpb25FcnJvcic7XG4gICAgdGhpcy5pc3N1ZXMgPSBpc3N1ZXM7XG4gICAgdGhpcy50b29sTmFtZSA9IHRvb2xOYW1lO1xuICB9XG59XG5cbi8qKlxuICogUnVudGltZSB0eXBlIGd1YXJkcyBmb3IgdG9vbCBhcmd1bWVudCB2YWxpZGF0aW9uXG4gKi9cbmV4cG9ydCBuYW1lc3BhY2UgVHlwZUd1YXJkcyB7XG4gIC8qKlxuICAgKiBUeXBlIGd1YXJkIGZvciBzdHJpbmcgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNTdHJpbmcodmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBzdHJpbmcge1xuICAgIHJldHVybiB0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIG51bWJlciB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc051bWJlcih2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIG51bWJlciB7XG4gICAgcmV0dXJuIHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgJiYgIU51bWJlci5pc05hTih2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3IgYm9vbGVhbiB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc0Jvb2xlYW4odmFsdWU6IHVua25vd24pOiB2YWx1ZSBpcyBib29sZWFuIHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbic7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3IgYXJyYXkgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNBcnJheSh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIHVua25vd25bXSB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkodmFsdWUpO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIG9iamVjdCB2YWx1ZXNcbiAgICovXG4gIGV4cG9ydCBmdW5jdGlvbiBpc09iamVjdCh2YWx1ZTogdW5rbm93bik6IHZhbHVlIGlzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgICByZXR1cm4gdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAhPT0gbnVsbCAmJiAhQXJyYXkuaXNBcnJheSh2YWx1ZSk7XG4gIH1cblxuICAvKipcbiAgICogVHlwZSBndWFyZCBmb3Igbm9uLW51bGwgdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNOb3ROdWxsKHZhbHVlOiB1bmtub3duKTogdmFsdWUgaXMgTm9uTnVsbGFibGU8dW5rbm93bj4ge1xuICAgIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFR5cGUgZ3VhcmQgZm9yIGVudW0gdmFsdWVzXG4gICAqL1xuICBleHBvcnQgZnVuY3Rpb24gaXNFbnVtPFQgZXh0ZW5kcyBzdHJpbmc+KHZhbHVlOiB1bmtub3duLCBlbnVtVmFsdWVzOiByZWFkb25seSBUW10pOiB2YWx1ZSBpcyBUIHtcbiAgICByZXR1cm4gVHlwZUd1YXJkcy5pc1N0cmluZyh2YWx1ZSkgJiYgZW51bVZhbHVlcy5pbmNsdWRlcyh2YWx1ZSBhcyBUKTtcbiAgfVxufVxuXG4vKipcbiAqIENvZXJjZSBsb29zZWx5LXR5cGVkIHRvb2wgYXJndW1lbnRzIGludG8gdGhlaXIgZGVjbGFyZWQgc2NoZW1hIHR5cGVzLlxuICogVGhpcyBtYWtlcyB0b29scyByZXNpbGllbnQgdG8gcHJvdmlkZXJzIHRoYXQgZW1pdCBib29sZWFuL251bWJlciB2YWx1ZXMgYXMgc3RyaW5ncy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNvZXJjZVRvb2xBcmd1bWVudHMoXG4gIHNjaGVtYTogSlNPTlNjaGVtYU9iamVjdCB8IHVuZGVmaW5lZCxcbiAgYXJnczogUmVjb3JkPHN0cmluZywgdW5rbm93bj5cbik6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgaWYgKCFzY2hlbWEgfHwgc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnIHx8ICFzY2hlbWEucHJvcGVydGllcykge1xuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgY29uc3QgY29lcmNlZDogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gPSB7IC4uLmFyZ3MgfTtcblxuICBmb3IgKGNvbnN0IFtrZXksIGRlZmluaXRpb25dIG9mIE9iamVjdC5lbnRyaWVzKHNjaGVtYS5wcm9wZXJ0aWVzKSkge1xuICAgIGlmICghT2JqZWN0Lmhhc093bihhcmdzLCBrZXkpKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgdmFsdWUgPSBhcmdzW2tleV07XG4gICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwgdmFsdWUgPT09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZGVmaW5pdGlvbi50eXBlKSB7XG4gICAgICBjYXNlICdib29sZWFuJzoge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG4gICAgICAgIGNvZXJjZWRba2V5XSA9IG5vcm1hbGl6ZWQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbnVtYmVyJzoge1xuICAgICAgICBjb25zdCBub3JtYWxpemVkID0gY29lcmNlTnVtYmVyKHZhbHVlKTtcbiAgICAgICAgY29lcmNlZFtrZXldID0gbm9ybWFsaXplZDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBkZWZhdWx0OlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICByZXR1cm4gY29lcmNlZDtcbn1cblxuZnVuY3Rpb24gY29lcmNlQm9vbGVhbih2YWx1ZTogdW5rbm93bik6IHVua25vd24ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodmFsdWUgPT09IDEpIHJldHVybiB0cnVlO1xuICAgIGlmICh2YWx1ZSA9PT0gMCkgcmV0dXJuIGZhbHNlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSB7XG4gICAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0cmltbWVkID09PSAndHJ1ZScgfHwgdHJpbW1lZCA9PT0gJzEnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAodHJpbW1lZCA9PT0gJ2ZhbHNlJyB8fCB0cmltbWVkID09PSAnMCcpIHJldHVybiBmYWxzZTtcbiAgfVxuICByZXR1cm4gdmFsdWU7XG59XG5cbmZ1bmN0aW9uIGNvZXJjZU51bWJlcih2YWx1ZTogdW5rbm93bik6IHVua25vd24ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIC8vIFJlamVjdCBOYU4sIEluZmluaXR5LCBhbmQgLUluZmluaXR5XG4gICAgaWYgKCFOdW1iZXIuaXNGaW5pdGUodmFsdWUpKSB7XG4gICAgICByZXR1cm4gdmFsdWU7IC8vIFJldHVybiBhcy1pcyB0byBmYWlsIHZhbGlkYXRpb25cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnICYmIHZhbHVlLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3QgcGFyc2VkID0gTnVtYmVyKHZhbHVlKTtcbiAgICAvLyBPbmx5IGFjY2VwdCBmaW5pdGUgbnVtYmVyc1xuICAgIGlmIChOdW1iZXIuaXNGaW5pdGUocGFyc2VkKSkge1xuICAgICAgcmV0dXJuIHBhcnNlZDtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGVUb29sQXJndW1lbnRzKFxuICB0b29sTmFtZTogc3RyaW5nLFxuICBzY2hlbWE6IEpTT05TY2hlbWFPYmplY3QgfCB1bmRlZmluZWQsXG4gIGFyZ3M6IFJlY29yZDxzdHJpbmcsIHVua25vd24+XG4pOiB2b2lkIHtcbiAgaWYgKCFzY2hlbWEgfHwgc2NoZW1hLnR5cGUgIT09ICdvYmplY3QnKSB7XG4gICAgcmV0dXJuO1xuICB9XG5cbiAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuICBjb25zdCBwcm9wZXJ0aWVzID0gc2NoZW1hLnByb3BlcnRpZXMgPz8ge307XG4gIGNvbnN0IHJlcXVpcmVkID0gQXJyYXkuaXNBcnJheShzY2hlbWEucmVxdWlyZWQpID8gc2NoZW1hLnJlcXVpcmVkIDogW107XG5cbiAgZm9yIChjb25zdCBwcm9wZXJ0eSBvZiByZXF1aXJlZCkge1xuICAgIGlmICghaGFzQXJndW1lbnQoYXJncywgcHJvcGVydHkpKSB7XG4gICAgICBlcnJvcnMucHVzaChgTWlzc2luZyByZXF1aXJlZCBwcm9wZXJ0eSBcIiR7cHJvcGVydHl9XCIuYCk7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgT2JqZWN0LmVudHJpZXMoYXJncykpIHtcbiAgICBjb25zdCBkZWZpbml0aW9uID0gcHJvcGVydGllc1trZXldO1xuICAgIGlmICghZGVmaW5pdGlvbikge1xuICAgICAgLy8gU2lsZW50bHkgaWdub3JlIHVua25vd24gcHJvcGVydGllcyAtIG1vZGVscyBzb21ldGltZXMgaGFsbHVjaW5hdGUgZXh0cmEgcGFyYW1zXG4gICAgICAvLyBUaGlzIGlzIG1vcmUgbGVuaWVudCB0aGFuIHN0cmljdCBKU09OIHNjaGVtYSB2YWxpZGF0aW9uIGJ1dCBwcmV2ZW50cyBlcnJvcnNcbiAgICAgIC8vIHdoZW4gbW9kZWxzIHBhc3MgZXh0cmEgcGFyYW1ldGVycyB0aGF0IGRvbid0IGFmZmVjdCB0b29sIGJlaGF2aW9yXG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgdmFsaWRhdGVTY2hlbWFQcm9wZXJ0eShkZWZpbml0aW9uLCB2YWx1ZSwga2V5LCBlcnJvcnMpO1xuICB9XG5cbiAgaWYgKGVycm9ycy5sZW5ndGgpIHtcbiAgICB0aHJvdyBuZXcgVG9vbEFyZ3VtZW50VmFsaWRhdGlvbkVycm9yKHRvb2xOYW1lLCBlcnJvcnMpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHZhbGlkYXRlU2NoZW1hUHJvcGVydHkoXG4gIGRlZmluaXRpb246IEpTT05TY2hlbWFQcm9wZXJ0eSxcbiAgdmFsdWU6IHVua25vd24sXG4gIHBhdGg6IHN0cmluZyxcbiAgZXJyb3JzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIHN3aXRjaCAoZGVmaW5pdGlvbi50eXBlKSB7XG4gICAgY2FzZSAnc3RyaW5nJzoge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgYSBzdHJpbmcuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChkZWZpbml0aW9uLmVudW0gJiYgIWRlZmluaXRpb24uZW51bS5pbmNsdWRlcyh2YWx1ZSkpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgb25lIG9mOiAke2RlZmluaXRpb24uZW51bS5tYXAoKGVudHJ5KSA9PiBgXCIke2VudHJ5fVwiYCkuam9pbignLCAnKX0uYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1pbkxlbmd0aCA9PT0gJ251bWJlcicgJiYgdmFsdWUubGVuZ3RoIDwgZGVmaW5pdGlvbi5taW5MZW5ndGgpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgYEFyZ3VtZW50IFwiJHtwYXRofVwiIG11c3QgYmUgYXQgbGVhc3QgJHtkZWZpbml0aW9uLm1pbkxlbmd0aH0gY2hhcmFjdGVyJHtcbiAgICAgICAgICAgIGRlZmluaXRpb24ubWluTGVuZ3RoID09PSAxID8gJycgOiAncydcbiAgICAgICAgICB9IGxvbmcuYFxuICAgICAgICApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYXNlICdudW1iZXInOiB7XG4gICAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzRmluaXRlKHZhbHVlKSkge1xuICAgICAgICBlcnJvcnMucHVzaChgQXJndW1lbnQgXCIke3BhdGh9XCIgbXVzdCBiZSBhIGZpbml0ZSBudW1iZXIuYCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIFZhbGlkYXRlIG1pbmltdW0gY29uc3RyYWludFxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1pbmltdW0gPT09ICdudW1iZXInICYmIHZhbHVlIDwgZGVmaW5pdGlvbi5taW5pbXVtKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGF0IGxlYXN0ICR7ZGVmaW5pdGlvbi5taW5pbXVtfS5gKTtcbiAgICAgIH1cbiAgICAgIC8vIFZhbGlkYXRlIG1heGltdW0gY29uc3RyYWludFxuICAgICAgaWYgKHR5cGVvZiBkZWZpbml0aW9uLm1heGltdW0gPT09ICdudW1iZXInICYmIHZhbHVlID4gZGVmaW5pdGlvbi5tYXhpbXVtKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGF0IG1vc3QgJHtkZWZpbml0aW9uLm1heGltdW19LmApO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjYXNlICdib29sZWFuJzoge1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGEgYm9vbGVhbi5gKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY2FzZSAnYXJyYXknOiB7XG4gICAgICBpZiAoIUFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKGBBcmd1bWVudCBcIiR7cGF0aH1cIiBtdXN0IGJlIGFuIGFycmF5LmApO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICB2YWxpZGF0ZUFycmF5SXRlbXMoZGVmaW5pdGlvbiwgdmFsdWUsIHBhdGgsIGVycm9ycyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm47XG4gIH1cbn1cblxuZnVuY3Rpb24gdmFsaWRhdGVBcnJheUl0ZW1zKFxuICBkZWZpbml0aW9uOiBKU09OU2NoZW1hQXJyYXksXG4gIHZhbHVlOiB1bmtub3duW10sXG4gIHBhdGg6IHN0cmluZyxcbiAgZXJyb3JzOiBzdHJpbmdbXVxuKTogdm9pZCB7XG4gIGNvbnN0IGl0ZW1TY2hlbWEgPSBkZWZpbml0aW9uLml0ZW1zO1xuICBpZiAoIWl0ZW1TY2hlbWEpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgdmFsdWUubGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgY29uc3QgZW50cnkgPSB2YWx1ZVtpbmRleF07XG4gICAgdmFsaWRhdGVTY2hlbWFQcm9wZXJ0eShpdGVtU2NoZW1hLCBlbnRyeSwgYCR7cGF0aH1bJHtpbmRleH1dYCwgZXJyb3JzKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBoYXNBcmd1bWVudChhcmdzOiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiwga2V5OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFPYmplY3QuaGFzT3duKGFyZ3MsIGtleSkpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cbiAgY29uc3QgdmFsdWUgPSBhcmdzW2tleV07XG4gIHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkICYmIHZhbHVlICE9PSBudWxsO1xufVxuXG5mdW5jdGlvbiBmb3JtYXRNZXNzYWdlKHRvb2xOYW1lOiBzdHJpbmcsIGlzc3Vlczogc3RyaW5nW10pOiBzdHJpbmcge1xuICBjb25zdCBkZXRhaWwgPSBpc3N1ZXMuam9pbignICcpO1xuICByZXR1cm4gYEludmFsaWQgYXJndW1lbnRzIGZvciBcIiR7dG9vbE5hbWV9XCI6ICR7ZGV0YWlsfWA7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7O0FBR0E7QUFDQTtBQUNBO0FBQ08sTUFBTUEsMkJBQTJCLFNBQVNDLEtBQUssQ0FBQztFQUlyREMsV0FBV0EsQ0FBQ0MsUUFBZ0IsRUFBRUMsTUFBZ0IsRUFBRTtJQUM5QyxLQUFLLENBQUNDLGFBQWEsQ0FBQ0YsUUFBUSxFQUFFQyxNQUFNLENBQUMsQ0FBQztJQUN0QyxJQUFJLENBQUNFLElBQUksR0FBRyw2QkFBNkI7SUFDekMsSUFBSSxDQUFDRixNQUFNLEdBQUdBLE1BQU07SUFDcEIsSUFBSSxDQUFDRCxRQUFRLEdBQUdBLFFBQVE7RUFDMUI7QUFDRjs7QUFFQTtBQUNBO0FBQ0E7QUFGQUksT0FBQSxDQUFBUCwyQkFBQSxHQUFBQSwyQkFBQTtBQUFBLElBR2lCUSxVQUFVLEdBQUFELE9BQUEsQ0FBQUMsVUFBQTtBQUFBLFdBQUFDLFdBQUE7RUFJbEIsU0FBU0MsUUFBUUEsQ0FBQ0MsS0FBYyxFQUFtQjtJQUN4RCxPQUFPLE9BQU9BLEtB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