{"version":3,"names":["cov_16wu6oam7l","actualCoverage","analyzeBashFlow","command","f","warnings","s","normalized","toLowerCase","trim","b","gitStatusMatches","match","length","push","code","message","suggestion","severity","includes","hasVersionStep","test","hasBuildOrTests","hasGitPush"],"sources":["bashCommandGuidance.ts"],"sourcesContent":["/**\n * Centralized guidance for bash command flows.\n * Keeps publish/git heuristics in one place so bash tooling stays concise.\n */\n\nexport type BashFlowSeverity = 'info' | 'warning' | 'critical';\n\nexport interface BashFlowWarning {\n  readonly code: string;\n  readonly message: string;\n  readonly suggestion?: string;\n  readonly severity?: BashFlowSeverity;\n}\n\n/**\n * Analyze a bash command for common workflow gaps (publish, git efficiency).\n */\nexport function analyzeBashFlow(command: string): BashFlowWarning[] {\n  const warnings: BashFlowWarning[] = [];\n  const normalized = command.toLowerCase();\n\n  if (!normalized.trim()) {\n    return warnings;\n  }\n\n  // Git efficiency: avoid repeated status calls in a single command chain.\n  const gitStatusMatches = normalized.match(/git status/g);\n  if (gitStatusMatches && gitStatusMatches.length > 1) {\n    warnings.push({\n      code: 'GIT_REDUNDANT_STATUS',\n      message: 'Multiple git status calls detected in one command',\n      suggestion: 'Combine git operations: git add -A && git commit -m \"msg\" && git push',\n      severity: 'info',\n    });\n  }\n\n  // Publish flow completeness for npm-style commands.\n  if (normalized.includes('npm publish')) {\n    const hasVersionStep = /\\b(?:npm|pnpm|yarn)\\s+version\\b/.test(normalized);\n    const hasBuildOrTests = /\\b(?:npm|pnpm|yarn)\\s+(?:run\\s+)?(build|test|lint|prepare)\\b/.test(normalized);\n    const hasGitPush = /\\bgit\\s+push\\b/.test(normalized);\n\n    if (!(hasVersionStep && hasBuildOrTests && hasGitPush)) {\n      warnings.push({\n        code: 'NPM_INCOMPLETE_WORKFLOW',\n        message: 'npm publish detected without a complete release flow',\n        suggestion: 'Include version bump, build/tests, and git push or use npm_publish to automate the full release',\n        severity: 'warning',\n      });\n    }\n  }\n\n  return warnings;\n}\n"],"mappings":"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","ignoreList":[]}