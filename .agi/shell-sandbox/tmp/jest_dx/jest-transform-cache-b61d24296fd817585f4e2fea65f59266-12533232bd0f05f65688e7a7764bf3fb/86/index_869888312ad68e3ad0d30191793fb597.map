{"version":3,"names":["cov_1g1g6grrma","actualCoverage","theme","icons","spinnerFrames","progressChars","boxChars","formatBanner","formatUserPrompt","USER_PROMPT_PREFIX","formatToolCall","formatMessage","formatError","formatErrorList","formatShortcutsHelp","PromptController","UnifiedUIRenderer","Display","display"],"sources":["index.ts"],"sourcesContent":["/**\n * UI Layer - Erosolar CLI User Interface System\n *\n * Architecture Overview:\n * ═══════════════════════════════════════════════════════════════════════════════\n *\n * The UI layer is organized into clear abstraction levels:\n *\n * Layer 1 - Core Primitives (lowest level):\n * ─────────────────────────────────────────────────────────────────────────────\n * - theme.ts: Color palette, semantic colors, text styling\n * - layout.ts: Terminal measurements, box drawing, padding\n * - richText.ts: Markdown parsing and formatting\n *\n * Layer 2 - Specialized Renderers:\n * ─────────────────────────────────────────────────────────────────────────────\n * - codeHighlighter.ts: Syntax highlighting for code blocks\n * - textHighlighter.ts: Search/match highlighting\n * - errorFormatter.ts: Error message formatting and display\n * - toolDisplay.ts: Tool invocation and result rendering\n *\n * Layer 3 - Components:\n * ─────────────────────────────────────────────────────────────────────────────\n * - animatedStatus.ts: Animated spinners and progress indicators\n * - inPlaceUpdater.ts: In-place terminal updates (same-line rewrites)\n * - shortcutsHelp.ts: Keyboard shortcuts display\n * - designSystem.ts: Reusable UI component definitions\n *\n * Layer 4 - Controllers:\n * ─────────────────────────────────────────────────────────────────────────────\n * - PromptController.ts: User input handling and command line interface\n * - UnifiedUIController.ts: Central UI state and event coordination\n *\n * Layer 5 - High-Level Renderers:\n * ─────────────────────────────────────────────────────────────────────────────\n * - UnifiedUIRenderer.ts: Main rendering engine, composes all layers\n * - display.ts: Legacy display functions (being migrated to UnifiedUIRenderer)\n *\n * Layer 6 - Integration:\n * ─────────────────────────────────────────────────────────────────────────────\n * - ShellUIAdapter.ts: Bridges shell and UI systems\n * - outputMode.ts: Output format selection (interactive/JSON/plain)\n * - globalWriteLock.ts: Prevents concurrent terminal writes\n *\n *\n * Usage Guidelines:\n * ═══════════════════════════════════════════════════════════════════════════════\n *\n * 1. For theme colors: import { theme } from './theme.js';\n * 2. For formatted output: import { UnifiedUIRenderer } from './UnifiedUIRenderer.js';\n * 3. For shell integration: import { ShellUIAdapter } from './ShellUIAdapter.js';\n * 4. For user input: import { PromptController } from './PromptController.js';\n *\n *\n * Module Relationships:\n * ═══════════════════════════════════════════════════════════════════════════════\n *\n *                        ┌────────────────────────┐\n *                        │    ShellUIAdapter      │\n *                        │   (Integration Layer)  │\n *                        └───────────┬────────────┘\n *                                    │\n *           ┌────────────────────────┼────────────────────────┐\n *           │                        │                        │\n *           ▼                        ▼                        ▼\n * ┌─────────────────┐    ┌─────────────────┐    ┌─────────────────┐\n * │PromptController │    │UnifiedUIRenderer│    │UnifiedUIControl │\n * │  (Input)        │    │  (Output)       │    │  (State)        │\n * └────────┬────────┘    └────────┬────────┘    └────────┬────────┘\n *          │                      │                      │\n *          │           ┌──────────┴──────────┐          │\n *          │           ▼                     ▼          │\n *          │  ┌────────────────┐   ┌────────────────┐  │\n *          │  │ codeHighlight  │   │  toolDisplay   │  │\n *          │  │ errorFormatter │   │ animatedStatus │  │\n *          │  └────────────────┘   └────────────────┘  │\n *          │           │                     │          │\n *          └───────────┴─────────┬───────────┴──────────┘\n *                                ▼\n *                    ┌─────────────────────┐\n *                    │   theme / layout    │\n *                    │   (Core Primitives) │\n *                    └─────────────────────┘\n *\n */\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 1 - Core Primitives\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport {\n  theme,\n  icons,\n  spinnerFrames,\n  progressChars,\n  boxChars,\n  formatBanner,\n  formatUserPrompt,\n  USER_PROMPT_PREFIX,\n  formatToolCall,\n  formatMessage,\n} from './theme.js';\n\nexport * from './layout.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 2 - Specialized Renderers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './codeHighlighter.js';\nexport * from './textHighlighter.js';\nexport {\n  formatError,\n  formatErrorList,\n  type ErrorInfo,\n  type ErrorFormatOptions,\n} from './errorFormatter.js';\nexport * from './toolDisplay.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 3 - Components\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './animatedStatus.js';\nexport * from './inPlaceUpdater.js';\nexport { formatShortcutsHelp } from './shortcutsHelp.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 4 - Controllers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport { PromptController } from './PromptController.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 5 - High-Level Renderers\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport { UnifiedUIRenderer } from './UnifiedUIRenderer.js';\nexport { Display, display, type DisplayMessageMetadata } from './display.js';\n\n// ═══════════════════════════════════════════════════════════════════════════════\n// Layer 6 - Integration\n// ═══════════════════════════════════════════════════════════════════════════════\n\nexport * from './outputMode.js';\nexport * from './globalWriteLock.js';\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;IAeY;IAAAA,cAAA,YAAAA,CAAA;MAAA,OAAAC,cAAA;IAAA;EAAA;EAAA,OAAAA,cAAA;AAAA;AAAAD,cAAA;AAfZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,SACEE,KAAK,EACLC,KAAK,EACLC,aAAa,EACbC,aAAa,EACbC,QAAQ,EACRC,YAAY,EACZC,gBAAgB,EAChBC,kBAAkB,EAClBC,cAAc,EACdC,aAAa,QACR,YAAY;AAEnB,cAAc,aAAa;;AAE3B;AACA;AACA;;AAEA,cAAc,sBAAsB;AACpC,cAAc,sBAAsB;AACpC,SACEC,WAAW,EACXC,eAAe,QAGV,qBAAqB;AAC5B,cAAc,kBAAkB;;AAEhC;AACA;AACA;;AAEA,cAAc,qBAAqB;AACnC,cAAc,qBAAqB;AACnC,SAASC,mBAAmB,QAAQ,oBAAoB;;AAExD;AACA;AACA;;AAEA,SAASC,gBAAgB,QAAQ,uBAAuB;;AAExD;AACA;AACA;;AAEA,SAASC,iBAAiB,QAAQ,wBAAwB;AAC1D,SAASC,OAAO,EAAEC,OAAO,QAAqC,cAAc;;AAE5E;AACA;AACA;;AAEA,cAAc,iBAAiB;AAC/B,cAAc,sBAAsB","ignoreList":[]}