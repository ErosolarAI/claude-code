{"version":3,"names":["ErrorSeverity","exports","ErrorCategory","StructuredError","Error","constructor","details","message","name","severity","category","suggestions","originalInput","metadata","timestamp","recoverable","captureStackTrace","toDisplayString","parts","toUpperCase","push","length","suggestion","action","example","autoFixable","join","toJSON","map","s","stack","tryAutoFix","autoFix","result","fixed","DangerousOperationError","operation","reason","safeAlternative","CRITICAL","DANGEROUS","undefined","Date","toISOString","BlockedOperationError","policy","allowedAlternatives","alt","ERROR","BLOCKED","ContextOverflowError","actual","limit","unit","truncatable","percentage","Math","round","truncate","CONTEXT_OVERFLOW","ResourceLimitError","resource","reducible","safeValue","floor","RESOURCE","ValidationError","field","code","VALIDATION","toStructuredError","error","String","detectErrorCategory","detectErrorSeverity","GenericStructuredError","lower","toLowerCase","includes","INVALID","PERMISSION","TIMEOUT","NETWORK","NOT_FOUND","UNKNOWN","WARNING"],"sources":["errorTypes.ts"],"sourcesContent":["/**\n * Comprehensive Error Classification System\n *\n * Provides structured error handling with:\n * - Error categorization (dangerous, blocked, invalid, etc.)\n * - Severity levels (critical, error, warning, info)\n * - Auto-fixing suggestions\n * - Recovery strategies\n */\n\nexport enum ErrorSeverity {\n  CRITICAL = 'critical',  // System-level failure, cannot continue\n  ERROR = 'error',        // Operation failed, but system stable\n  WARNING = 'warning',    // Risky but allowed\n  INFO = 'info',          // Informational only\n}\n\nexport enum ErrorCategory {\n  DANGEROUS = 'dangerous',      // Operation could harm system\n  BLOCKED = 'blocked',          // Explicitly forbidden by policy\n  INVALID = 'invalid',          // Malformed input/arguments\n  PERMISSION = 'permission',    // Authorization issue\n  RESOURCE = 'resource',        // Resource limit exceeded\n  NETWORK = 'network',          // Network/connectivity issue\n  TIMEOUT = 'timeout',          // Operation timed out\n  VALIDATION = 'validation',    // Schema/type validation failed\n  CONTEXT_OVERFLOW = 'context_overflow', // Token/context limit exceeded\n  NOT_FOUND = 'not_found',      // Resource doesn't exist\n  UNKNOWN = 'unknown',          // Unclassified error\n}\n\n// Enhanced discriminated union for error suggestions\nexport type ErrorSuggestion =\n  | {\n      readonly action: string;\n      readonly example?: string;\n      readonly autoFixable: true;\n      readonly autoFix: () => unknown;\n    }\n  | {\n      readonly action: string;\n      readonly example?: string;\n      readonly autoFixable: false;\n    };\n\n// Enhanced discriminated union for structured error details\nexport type StructuredErrorDetails = {\n  readonly severity: ErrorSeverity;\n  readonly category: ErrorCategory;\n  readonly message: string;\n  readonly originalInput?: string;\n  readonly suggestions: readonly ErrorSuggestion[];\n  readonly metadata?: Readonly<Record<string, unknown>>;\n  readonly timestamp: string;\n  readonly recoverable: boolean;\n};\n\n/**\n * Base class for all structured errors\n */\nexport abstract class StructuredError extends Error {\n  public readonly severity: ErrorSeverity;\n  public readonly category: ErrorCategory;\n  public readonly suggestions: ErrorSuggestion[];\n  public readonly originalInput?: string;\n  public readonly metadata?: Record<string, unknown>;\n  public readonly timestamp: string;\n  public readonly recoverable: boolean;\n\n  constructor(details: StructuredErrorDetails) {\n    super(details.message);\n    this.name = this.constructor.name;\n    this.severity = details.severity;\n    this.category = details.category;\n    this.suggestions = [...details.suggestions]; // Copy to mutable array\n    this.originalInput = details.originalInput;\n    this.metadata = details.metadata;\n    this.timestamp = details.timestamp;\n    this.recoverable = details.recoverable;\n\n    // Maintain proper stack trace\n    Error.captureStackTrace(this, this.constructor);\n  }\n\n  /**\n * Format error for display with suggestions\n */\n  toDisplayString(): string {\n    const parts: string[] = [\n      `[${this.severity.toUpperCase()}] ${this.message}`,\n    ];\n\n    if (this.originalInput) {\n      parts.push(`  Input: ${this.originalInput}`);\n    }\n\n    if (this.suggestions.length > 0) {\n      parts.push('\\nSuggestions:');\n      for (const suggestion of this.suggestions) {\n        parts.push(`  â€¢ ${suggestion.action}`);\n        if (suggestion.example) {\n          parts.push(`    Example: ${suggestion.example}`);\n        }\n        if (suggestion.autoFixable) {\n          parts.push(`    [Auto-fixable]`);\n        }\n      }\n    }\n\n    return parts.join('\\n');\n  }\n\n  /**\n * Convert to JSON for logging/telemetry\n */\n  toJSON(): Record<string, unknown> {\n    return {\n      name: this.name,\n      severity: this.severity,\n      category: this.category,\n      message: this.message,\n      originalInput: this.originalInput,\n      suggestions: this.suggestions.map(s => ({\n        action: s.action,\n        example: s.example,\n        autoFixable: s.autoFixable,\n      })),\n      metadata: this.metadata,\n      timestamp: this.timestamp,\n      recoverable: this.recoverable,\n      stack: this.stack,\n    };\n  }\n\n  /**\n * Try to auto-fix the error if possible\n */\n  tryAutoFix(): { fixed: boolean; result?: any } {\n    for (const suggestion of this.suggestions) {\n      if (suggestion.autoFixable && suggestion.autoFix) {\n        try {\n          const result = suggestion.autoFix();\n          return { fixed: true, result };\n        } catch {\n          // Continue to next suggestion\n        }\n      }\n    }\n    return { fixed: false };\n  }\n}\n\n/**\n * Dangerous operation error - operation could harm the system\n */\nexport class DangerousOperationError extends StructuredError {\n  constructor(\n    operation: string,\n    reason: string,\n    safeAlternative?: string\n  ) {\n    const suggestions: ErrorSuggestion[] = [];\n\n    if (safeAlternative) {\n      suggestions.push({\n        action: `Use safer alternative: ${safeAlternative}`,\n        example: safeAlternative,\n        autoFixable: true,\n        autoFix: () => safeAlternative,\n      });\n    } else {\n      suggestions.push({\n        action: 'Review operation for safety before retrying',\n        autoFixable: false,\n      });\n    }\n\n    super({\n      severity: ErrorSeverity.CRITICAL,\n      category: ErrorCategory.DANGEROUS,\n      message: `Dangerous operation blocked: ${operation}. Reason: ${reason}`,\n      originalInput: operation,\n      suggestions,\n      recoverable: safeAlternative !== undefined,\n      timestamp: new Date().toISOString(),\n    });\n  }\n}\n\n/**\n * Blocked operation error - explicitly forbidden by policy\n */\nexport class BlockedOperationError extends StructuredError {\n  constructor(\n    operation: string,\n    policy: string,\n    allowedAlternatives?: string[]\n  ) {\n    const suggestions: ErrorSuggestion[] = [];\n\n    if (allowedAlternatives && allowedAlternatives.length > 0) {\n      for (const alt of allowedAlternatives) {\n        suggestions.push({\n          action: `Try allowed alternative: ${alt}`,\n          example: alt,\n          autoFixable: true,\n          autoFix: () => alt,\n        });\n      }\n    } else {\n      suggestions.push({\n        action: 'This operation is not permitted by policy',\n        autoFixable: false,\n      });\n    }\n\n    super({\n      severity: ErrorSeverity.ERROR,\n      category: ErrorCategory.BLOCKED,\n      message: `Operation blocked by policy \"${policy}\": ${operation}`,\n      originalInput: operation,\n      suggestions,\n      recoverable: allowedAlternatives !== undefined && allowedAlternatives.length > 0,\n      timestamp: new Date().toISOString(),\n      metadata: { policy, allowedAlternatives },\n    });\n  }\n}\n\n/**\n * Context overflow error - token/character limits exceeded\n */\nexport class ContextOverflowError extends StructuredError {\n  constructor(\n    actual: number,\n    limit: number,\n    unit: 'tokens' | 'chars' | 'lines' = 'tokens',\n    truncatable: boolean = true\n  ) {\n    const percentage = limit > 0 ? Math.round((actual / limit) * 100) : 0;\n    const suggestions: ErrorSuggestion[] = [];\n\n    if (truncatable) {\n      suggestions.push({\n        action: `Auto-truncate to ${limit} ${unit}`,\n        example: `Content will be reduced from ${actual} to ${limit} ${unit}`,\n        autoFixable: true,\n        autoFix: () => ({ truncate: true, limit }),\n      });\n    }\n\n    suggestions.push({\n      action: `Reduce scope to use less than ${limit} ${unit}`,\n      autoFixable: false,\n    });\n\n    super({\n      severity: ErrorSeverity.CRITICAL,\n      category: ErrorCategory.CONTEXT_OVERFLOW,\n      message: `Context overflow: ${actual} ${unit} exceeds limit of ${limit} ${unit} (${percentage}%)`,\n      suggestions,\n      recoverable: truncatable,\n      timestamp: new Date().toISOString(),\n      metadata: { actual, limit, unit, percentage },\n    });\n  }\n}\n\n/**\n * Resource error - limits exceeded\n */\nexport class ResourceLimitError extends StructuredError {\n  constructor(\n    resource: string,\n    actual: number,\n    limit: number,\n    reducible: boolean = true\n  ) {\n    const suggestions: ErrorSuggestion[] = [];\n\n    if (reducible) {\n      const safeValue = Math.floor(limit * 0.8); // 80% of limit\n      suggestions.push({\n        action: `Reduce ${resource} to ${safeValue} (80% of limit)`,\n        example: `Set ${resource}=${safeValue}`,\n        autoFixable: true,\n        autoFix: () => safeValue,\n      });\n    }\n\n    super({\n      severity: ErrorSeverity.ERROR,\n      category: ErrorCategory.RESOURCE,\n      message: `Resource limit exceeded: ${resource} is ${actual}, maximum is ${limit}`,\n      suggestions,\n      recoverable: reducible,\n      timestamp: new Date().toISOString(),\n      metadata: { resource, actual, limit },\n    });\n  }\n}\n\n/**\n * Validation error - input/schema validation failed\n */\nexport class ValidationError extends StructuredError {\n  constructor(field: string, code: string, message: string) {\n    super({\n      severity: ErrorSeverity.ERROR,\n      category: ErrorCategory.VALIDATION,\n      message: `Validation failed for ${field}: ${code}. ${message}`,\n      originalInput: code,\n      suggestions: [\n        {\n          action: `Fix the field \"${field}\" to satisfy validation`,\n          example: `${field}: <provide valid value>`,\n          autoFixable: false,\n        },\n      ],\n      recoverable: false,\n      timestamp: new Date().toISOString(),\n      metadata: { field, code },\n    });\n  }\n}\n\n/**\n * Format any error as a structured error\n */\nexport function toStructuredError(error: unknown): StructuredError {\n  // Already structured\n  if (error instanceof StructuredError) {\n    return error;\n  }\n\n  // Convert standard errors\n  const message = error instanceof Error ? error.message : String(error);\n\n  // Detect error category from message\n  const category = detectErrorCategory(message);\n  const severity = detectErrorSeverity(category);\n\n  class GenericStructuredError extends StructuredError {}\n\n  return new GenericStructuredError({\n    severity,\n    category,\n    message,\n    suggestions: [],\n    recoverable: false,\n    timestamp: new Date().toISOString(),\n  });\n}\n\n/**\n * Detect error category from error message\n */\nfunction detectErrorCategory(message: string): ErrorCategory {\n  const lower = message.toLowerCase();\n\n  if (lower.includes('dangerous') || lower.includes('unsafe') || lower.includes('harmful')) {\n    return ErrorCategory.DANGEROUS;\n  }\n  if (lower.includes('blocked') || lower.includes('forbidden') || lower.includes('not allowed')) {\n    return ErrorCategory.BLOCKED;\n  }\n  if (lower.includes('invalid') || lower.includes('malformed')) {\n    return ErrorCategory.INVALID;\n  }\n  if (lower.includes('permission') || lower.includes('unauthorized') || lower.includes('access denied')) {\n    return ErrorCategory.PERMISSION;\n  }\n  if (lower.includes('limit') || lower.includes('exceeded') || lower.includes('too large')) {\n    return ErrorCategory.RESOURCE;\n  }\n  if (lower.includes('timeout') || lower.includes('timed out')) {\n    return ErrorCategory.TIMEOUT;\n  }\n  if (lower.includes('network') || lower.includes('connection')) {\n    return ErrorCategory.NETWORK;\n  }\n  if (lower.includes('validation') || lower.includes('schema')) {\n    return ErrorCategory.VALIDATION;\n  }\n  if (lower.includes('context') || lower.includes('token') || lower.includes('overflow')) {\n    return ErrorCategory.CONTEXT_OVERFLOW;\n  }\n  if (lower.includes('not found') || lower.includes('does not exist')) {\n    return ErrorCategory.NOT_FOUND;\n  }\n\n  return ErrorCategory.UNKNOWN;\n}\n\n/**\n * Determine severity from category\n */\nfunction detectErrorSeverity(category: ErrorCategory): ErrorSeverity {\n  switch (category) {\n    case ErrorCategory.DANGEROUS:\n    case ErrorCategory.CONTEXT_OVERFLOW:\n      return ErrorSeverity.CRITICAL;\n\n    case ErrorCategory.BLOCKED:\n    case ErrorCategory.PERMISSION:\n    case ErrorCategory.VALIDATION:\n    case ErrorCategory.INVALID:\n    case ErrorCategory.RESOURCE:\n      return ErrorSeverity.ERROR;\n\n    case ErrorCategory.TIMEOUT:\n    case ErrorCategory.NETWORK:\n    case ErrorCategory.NOT_FOUND:\n      return ErrorSeverity.WARNING;\n\n    default:\n      return ErrorSeverity.ERROR;\n  }\n}\n"],"mappings":"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","ignoreList":[]}