{"version":3,"names":["cov_86oiikdgj","actualCoverage","DEFAULT_HUMAN_REWARD_WEIGHTS","exports","s","alpha","beta","gamma","runDualTournament","task","candidates","options","b","f","maxCandidates","boundedCandidates","slice","Math","max","length","solo","correctness","scoreCorrectness","metrics","quality","scoreQuality","preferSmallerDiff","learned","scoreLearnedSignals","signals","aggregateScore","combineReward","rewardWeights","ranked","candidateId","id","humanAccuracy","rank","correctnessScore","qualityScore","learnedScore","evaluatorScore","pairwise","evaluatorBreakdown","evaluatorWeights","Map","evaluator","evaluators","eloWeight","elo","set","weight","aggregatedEvaluatorScores","aggregateEvaluatorScores","map","candidate","rewardScore","get","clamp","sort","a","forEach","entry","idx","computeHumanAccuracy","execution","executionSuccess","tests","testsPassed","failures","testsFailed","toolSuccess","toolSuccesses","min","score","staticAnalysis","codeQuality","complexityComponent","complexityDelta","blastRadius","diffSize","dependencyPenalty","dependenciesAdded","warningPenalty","warnings","rewardModel","rewardModelScore","human","humanPreference","self","selfAssessment","base","blendedHuman","withSelf","weights","weighted","total","aggregated","twoCandidateFastPath","candidateIds","c","other","scoresByEvaluator","evaluatorScores","has","evaluatorId","push","notes","size","fallback","totalBordaWeight","rawScores","entries","filter","_","rest","bordaPoints","higher","lower","i","j","points","value","Number","isNaN","rankIndex","maxIndex","relative"],"sources":["dualTournament.ts"],"sourcesContent":["/**\n * Dual Tournament Engine\n *\n * Shared scoring/ranking utilities used by dual tournaments in both /upgrade and /attack flows.\n * Encodes policy vs evaluator tournaments with human-like reward heuristics and multi-evaluator\n * aggregation to approximate human code review preferences.\n */\n\nexport type PolicyId = string;\n\nexport interface TournamentPolicy {\n  id: PolicyId;\n  label?: string;\n  kind?: 'primary' | 'refiner' | 'checkpoint' | 'attack';\n  elo?: number;\n}\n\nexport interface TournamentEvaluator {\n  id: string;\n  label?: string;\n  /** Weight used when combining evaluator rankings (can be influenced by historical ELO). */\n  weight?: number;\n  kind?: 'hard' | 'soft' | 'hybrid';\n  elo?: number;\n}\n\nexport interface TournamentTask {\n  id: string;\n  goal: string;\n  repoSnapshot?: string;\n  tests?: string[];\n  constraints?: string[];\n  metadata?: Record<string, unknown>;\n}\n\nexport interface CandidateMetrics {\n  executionSuccess?: number; // 0-1\n  testsPassed?: number; // 0-1\n  testsFailed?: number; // count\n  staticAnalysis?: number; // 0-1\n  codeQuality?: number; // 0-1\n  blastRadius?: number; // 0-1 (smaller diff => higher)\n  diffSize?: number; // lines changed\n  complexityDelta?: number; // negative better\n  dependenciesAdded?: number; // count\n  speedBonus?: number; // 0-1\n  toolSuccesses?: number; // count\n  toolFailures?: number; // count\n  warnings?: number; // count\n}\n\nexport interface CandidateSignals {\n  /** Learned reward model / preference score (0-1) */\n  rewardModelScore?: number;\n  /** Self-assessed confidence from the agent (0-1) */\n  selfAssessment?: number;\n  /** Optional human preference label (0-1) */\n  humanPreference?: number;\n}\n\nexport interface EvaluatorScore {\n  evaluatorId: string;\n  score: number;\n  weight?: number;\n  notes?: string;\n}\n\ntype CandidateEvaluatorScore = EvaluatorScore & { candidateId: string };\n\nexport interface TournamentCandidate {\n  id: string;\n  policyId: PolicyId;\n  patchSummary?: string;\n  diffSummary?: string;\n  metrics?: CandidateMetrics;\n  signals?: CandidateSignals;\n  evaluatorScores?: EvaluatorScore[];\n  rawOutput?: string;\n}\n\nexport interface HumanRewardWeights {\n  /** Correctness weight */\n  alpha: number;\n  /** Code quality / robustness weight */\n  beta: number;\n  /** Learned reward / human preference weight */\n  gamma: number;\n}\n\nexport const DEFAULT_HUMAN_REWARD_WEIGHTS: HumanRewardWeights = {\n  alpha: 0.6,\n  beta: 0.25,\n  gamma: 0.15,\n};\n\nexport interface RankedCandidate {\n  candidateId: string;\n  aggregateScore: number;\n  /** Relative human-like accuracy (1 = best rank, 0 = worst rank) */\n  humanAccuracy: number;\n  rank: number;\n  correctnessScore: number;\n  qualityScore: number;\n  learnedScore: number;\n  evaluatorScore: number;\n}\n\nexport type PairwiseWins = Record<string, Record<string, number>>;\n\nexport interface TournamentOutcome {\n  task: TournamentTask;\n  ranked: RankedCandidate[];\n  pairwise: PairwiseWins;\n  evaluatorBreakdown: Record<string, EvaluatorScore[]>;\n}\n\nexport interface TournamentOptions {\n  rewardWeights?: HumanRewardWeights;\n  evaluators?: TournamentEvaluator[];\n  /** When true, prefer smaller diffs by default if diffSize is provided */\n  preferSmallerDiff?: boolean;\n  /** Maximum candidates to evaluate (caps O(n^2) work) */\n  maxCandidates?: number;\n}\n\n/**\n  * Run a dual tournament over candidate patches/agents, combining hard metrics,\n  * human-like reward heuristics, and evaluator rankings.\n  */\nexport function runDualTournament(\n  task: TournamentTask,\n  candidates: TournamentCandidate[],\n  options: TournamentOptions = {}\n): TournamentOutcome {\n  const maxCandidates = options.maxCandidates ?? 8;\n  const boundedCandidates = candidates.slice(0, Math.max(1, maxCandidates));\n\n  // Fast path: single candidate - avoid unnecessary aggregation work\n  if (boundedCandidates.length === 1) {\n    const solo = boundedCandidates[0]!;\n    const correctness = scoreCorrectness(solo.metrics);\n    const quality = scoreQuality(solo.metrics, options.preferSmallerDiff ?? true);\n    const learned = scoreLearnedSignals(solo.signals);\n    const aggregateScore = combineReward(correctness, quality, learned, options.rewardWeights ?? DEFAULT_HUMAN_REWARD_WEIGHTS);\n\n    const ranked: RankedCandidate[] = [{\n      candidateId: solo.id,\n      aggregateScore,\n      humanAccuracy: 1,\n      rank: 1,\n      correctnessScore: correctness,\n      qualityScore: quality,\n      learnedScore: learned,\n      evaluatorScore: aggregateScore,\n    }];\n\n    return {\n      task,\n      ranked,\n      pairwise: {},\n      evaluatorBreakdown: {},\n    };\n  }\n\n  const rewardWeights = options.rewardWeights ?? DEFAULT_HUMAN_REWARD_WEIGHTS;\n  const evaluatorWeights = new Map<string, number>();\n  for (const evaluator of options.evaluators ?? []) {\n    const eloWeight = evaluator.elo ? 1 + Math.max(0, (evaluator.elo - 1200) / 2400) : 1;\n    evaluatorWeights.set(evaluator.id, (evaluator.weight ?? 1) * eloWeight);\n  }\n\n  // Compute evaluator aggregates and pairwise wins first (needed for composite score)\n  const { aggregatedEvaluatorScores, pairwise, evaluatorBreakdown } = aggregateEvaluatorScores(\n    boundedCandidates,\n    evaluatorWeights\n  );\n\n  const ranked: RankedCandidate[] = boundedCandidates.map((candidate) => {\n    const correctness = scoreCorrectness(candidate.metrics);\n    const quality = scoreQuality(candidate.metrics, options.preferSmallerDiff ?? true);\n    const learned = scoreLearnedSignals(candidate.signals);\n    const rewardScore = combineReward(correctness, quality, learned, rewardWeights);\n    const evaluatorScore = aggregatedEvaluatorScores.get(candidate.id) ?? rewardScore;\n\n    // Combine human-like reward with evaluator aggregate (relative preference)\n    const aggregateScore = clamp(0.55 * rewardScore + 0.45 * evaluatorScore);\n\n    return {\n      candidateId: candidate.id,\n      aggregateScore,\n      humanAccuracy: 0,\n      rank: 0, // set after sorting\n      correctnessScore: correctness,\n      qualityScore: quality,\n      learnedScore: learned,\n      evaluatorScore,\n    };\n  });\n\n  ranked.sort((a, b) => b.aggregateScore - a.aggregateScore);\n  ranked.forEach((entry, idx) => {\n    entry.rank = idx + 1;\n    entry.humanAccuracy = computeHumanAccuracy(idx, ranked.length);\n  });\n\n  return {\n    task,\n    ranked,\n    pairwise,\n    evaluatorBreakdown,\n  };\n}\n\n// ════════════════════════════════════════════════════════════════════════════\n// Internal scoring helpers\n// ════════════════════════════════════════════════════════════════════════════\n\nfunction scoreCorrectness(metrics?: CandidateMetrics): number {\n  if (!metrics) return 0.5;\n\n  const execution = metrics.executionSuccess ?? 0;\n  const tests = metrics.testsPassed ?? 0;\n  const failures = metrics.testsFailed ?? 0;\n  const toolSuccess = metrics.toolSuccesses ? Math.min(1, metrics.toolSuccesses / 3) : 0;\n\n  let score = execution * 0.35 + tests * 0.45 + toolSuccess * 0.2;\n  if (failures > 0) {\n    score -= Math.min(0.35, failures * 0.1);\n  }\n\n  return clamp(score);\n}\n\nfunction scoreQuality(metrics?: CandidateMetrics, preferSmallerDiff = true): number {\n  if (!metrics) return 0.5;\n\n  const staticAnalysis = metrics.staticAnalysis ?? 0.5;\n  const codeQuality = metrics.codeQuality ?? 0.5;\n  const complexityComponent =\n    typeof metrics.complexityDelta === 'number'\n      ? metrics.complexityDelta < 0\n        ? 0.7\n        : 0.45\n      : 0.55;\n\n  const blastRadius =\n    metrics.blastRadius ??\n    (preferSmallerDiff && metrics.diffSize ? 1 - clamp(metrics.diffSize / 500) : 0.55);\n\n  const dependencyPenalty = metrics.dependenciesAdded ? Math.min(0.3, metrics.dependenciesAdded * 0.05) : 0;\n  const warningPenalty = metrics.warnings ? Math.min(0.2, metrics.warnings * 0.05) : 0;\n\n  let score = staticAnalysis * 0.35 + codeQuality * 0.25 + blastRadius * 0.25 + complexityComponent * 0.15;\n  score -= dependencyPenalty + warningPenalty;\n\n  return clamp(score);\n}\n\nfunction scoreLearnedSignals(signals?: CandidateSignals): number {\n  if (!signals) return 0.5;\n\n  const rewardModel = signals.rewardModelScore;\n  const human = signals.humanPreference;\n  const self = signals.selfAssessment;\n\n  const base = typeof rewardModel === 'number' ? rewardModel : 0.5;\n  const blendedHuman = typeof human === 'number' ? (base + human) / 2 : base;\n  const withSelf = typeof self === 'number' ? 0.7 * blendedHuman + 0.3 * self : blendedHuman;\n\n  return clamp(withSelf);\n}\n\nfunction combineReward(\n  correctness: number,\n  quality: number,\n  learned: number,\n  weights: HumanRewardWeights\n): number {\n  const weighted =\n    weights.alpha * correctness +\n    weights.beta * quality +\n    weights.gamma * learned;\n  const total = weights.alpha + weights.beta + weights.gamma;\n  return total > 0 ? clamp(weighted / total) : clamp(weighted);\n}\n\nfunction aggregateEvaluatorScores(\n  candidates: TournamentCandidate[],\n  evaluatorWeights: Map<string, number>\n): {\n  aggregatedEvaluatorScores: Map<string, number>;\n  pairwise: PairwiseWins;\n  evaluatorBreakdown: Record<string, EvaluatorScore[]>;\n} {\n  const pairwise: PairwiseWins = {};\n  const aggregated = new Map<string, number>();\n  const evaluatorBreakdown: Record<string, EvaluatorScore[]> = {};\n\n  if (candidates.length === 0) {\n    return { aggregatedEvaluatorScores: aggregated, pairwise, evaluatorBreakdown };\n  }\n\n  // Pre-size for small tournaments to avoid unnecessary O(n^2) when not needed\n  const twoCandidateFastPath = candidates.length <= 2;\n\n  const candidateIds = candidates.map((c) => c.id);\n  for (const id of candidateIds) {\n    pairwise[id] = {};\n    for (const other of candidateIds) {\n      if (id !== other) pairwise[id][other] = 0;\n    }\n  }\n\n  // Collect scores per evaluator\n  const scoresByEvaluator = new Map<string, CandidateEvaluatorScore[]>();\n  for (const candidate of candidates) {\n    for (const score of candidate.evaluatorScores ?? []) {\n      if (!scoresByEvaluator.has(score.evaluatorId)) {\n        scoresByEvaluator.set(score.evaluatorId, []);\n      }\n      scoresByEvaluator.get(score.evaluatorId)!.push({\n        evaluatorId: score.evaluatorId,\n        score: clamp(score.score),\n        weight: score.weight,\n        notes: score.notes,\n        candidateId: candidate.id,\n      });\n    }\n  }\n\n  // If no evaluator scores provided, fall back to neutral rankings\n  if (scoresByEvaluator.size === 0) {\n    const fallback: CandidateEvaluatorScore[] = [];\n    for (const candidate of candidates) {\n      fallback.push({\n        evaluatorId: 'reward-fallback',\n        score: 0.5,\n        weight: 1,\n        candidateId: candidate.id,\n      });\n    }\n    scoresByEvaluator.set('reward-fallback', fallback);\n  }\n\n  let totalBordaWeight = 0;\n\n  for (const [evaluatorId, rawScores] of scoresByEvaluator.entries()) {\n    const weight = evaluatorWeights.get(evaluatorId) ?? 1;\n    totalBordaWeight += weight * Math.max(1, candidates.length - 1);\n\n    // Sort descending by score to assign ranks (Borda)\n    const ranked = rawScores\n      .filter((entry) => typeof entry.score === 'number')\n      .sort((a, b) => (b.score ?? 0) - (a.score ?? 0));\n\n    evaluatorBreakdown[evaluatorId] = ranked.map(({ candidateId: _, ...rest }) => rest as EvaluatorScore);\n\n    ranked.forEach((entry, idx) => {\n      const candidateId = (entry as unknown as { candidateId: string }).candidateId;\n      const bordaPoints = (candidates.length - idx - 1) * weight;\n      aggregated.set(candidateId, (aggregated.get(candidateId) ?? 0) + bordaPoints);\n    });\n\n    // Pairwise wins for this evaluator (lightweight path for <=2 candidates)\n    if (twoCandidateFastPath && ranked.length === 2) {\n      const higher = ranked[0] as unknown as { candidateId: string; score: number };\n      const lower = ranked[1] as unknown as { candidateId: string; score: number };\n      if (higher.score === lower.score) {\n        pairwise[higher.candidateId][lower.candidateId] += weight * 0.5;\n        pairwise[lower.candidateId][higher.candidateId] += weight * 0.5;\n      } else {\n        pairwise[higher.candidateId][lower.candidateId] += weight;\n      }\n    } else {\n      for (let i = 0; i < ranked.length; i++) {\n        for (let j = i + 1; j < ranked.length; j++) {\n          const higher = ranked[i] as unknown as { candidateId: string; score: number };\n          const lower = ranked[j] as unknown as { candidateId: string; score: number };\n          if (higher.score === lower.score) {\n            pairwise[higher.candidateId][lower.candidateId] += weight * 0.5;\n            pairwise[lower.candidateId][higher.candidateId] += weight * 0.5;\n          } else {\n            pairwise[higher.candidateId][lower.candidateId] += weight;\n          }\n        }\n      }\n    }\n  }\n\n  // Normalize aggregated Borda scores into [0,1]\n  if (totalBordaWeight > 0) {\n    for (const [candidateId, points] of aggregated.entries()) {\n      aggregated.set(candidateId, clamp(points / totalBordaWeight));\n    }\n  }\n\n  // Ensure every candidate has an entry\n  for (const candidateId of candidateIds) {\n    if (!aggregated.has(candidateId)) {\n      aggregated.set(candidateId, 0.5);\n    }\n  }\n\n  return { aggregatedEvaluatorScores: aggregated, pairwise, evaluatorBreakdown };\n}\n\nfunction clamp(value: number, min = 0, max = 1): number {\n  if (Number.isNaN(value)) return min;\n  return Math.max(min, Math.min(max, value));\n}\n\nfunction computeHumanAccuracy(rankIndex: number, total: number): number {\n  if (total <= 1) return 1;\n  const maxIndex = Math.max(1, total - 1);\n  const relative = 1 - rankIndex / maxIndex;\n  return clamp(relative);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}