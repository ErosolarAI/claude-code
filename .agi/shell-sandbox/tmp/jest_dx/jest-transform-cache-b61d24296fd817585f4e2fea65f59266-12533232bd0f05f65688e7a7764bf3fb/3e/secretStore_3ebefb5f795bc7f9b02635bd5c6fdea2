3653f2762955296903c7be1cb70a1f9e
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.MissingSecretError = void 0;
exports.ensureSecretForProvider = ensureSecretForProvider;
exports.getSecretDefinition = getSecretDefinition;
exports.getSecretDefinitionForProvider = getSecretDefinitionForProvider;
exports.getSecretValue = getSecretValue;
exports.listSecretDefinitions = listSecretDefinitions;
exports.loadAllSecrets = loadAllSecrets;
exports.maskSecret = maskSecret;
exports.safeErrorMessage = safeErrorMessage;
exports.sanitizeError = sanitizeError;
exports.sanitizeErrorMessage = sanitizeErrorMessage;
exports.setSecretValue = setSecretValue;
var _nodeFs = require("node:fs");
var _nodeOs = require("node:os");
var _nodePath = require("node:path");
const SECRET_DEFINITIONS = [{
  id: 'OPENAI_API_KEY',
  label: 'OpenAI API Key',
  description: 'Required to run OpenAI GPT and AGI Code models.',
  envVar: 'OPENAI_API_KEY',
  providers: ['openai']
}, {
  id: 'ANTHROPIC_API_KEY',
  label: 'Anthropic API Key',
  description: 'Required to run Anthropic Sonnet, Opus, or Haiku models.',
  envVar: 'ANTHROPIC_API_KEY',
  providers: ['anthropic']
}, {
  id: 'DEEPSEEK_API_KEY',
  label: 'DeepSeek API Key',
  description: 'Required to run DeepSeek Reasoner or Chat models.',
  envVar: 'DEEPSEEK_API_KEY',
  providers: ['deepseek']
}, {
  id: 'XAI_API_KEY',
  label: 'xAI API Key',
  description: 'Required to run Grok models from xAI.',
  envVar: 'XAI_API_KEY',
  providers: ['xai']
}, {
  id: 'GEMINI_API_KEY',
  label: 'Google Gemini API Key',
  description: 'Required to run Gemini 2.5 Pro or Flash models.',
  envVar: 'GEMINI_API_KEY',
  providers: ['google']
}, {
  id: 'TAVILY_API_KEY',
  label: 'Tavily API Key',
  description: 'Required: WebSearch and WebExtract provider. Get yours at https://tavily.com',
  envVar: 'TAVILY_API_KEY',
  providers: []
}, {
  id: 'SMTP_USER',
  label: 'Email Address',
  description: 'Your email address for sending emails (e.g., you@gmail.com).',
  envVar: 'SMTP_USER',
  providers: []
}, {
  id: 'SMTP_PASSWORD',
  label: 'Email App Password',
  description: 'App password for your email (NOT your regular password). For Gmail: https://myaccount.google.com/apppasswords',
  envVar: 'SMTP_PASSWORD',
  providers: []
}, {
  id: 'SMTP_PROVIDER',
  label: 'Email Provider',
  description: 'Email provider: gmail, outlook, yahoo, icloud, zoho (default: gmail).',
  envVar: 'SMTP_PROVIDER',
  providers: []
}, {
  id: 'SMTP_FROM_NAME',
  label: 'Email Display Name',
  description: 'Optional: Display name shown in sent emails (e.g., "John Doe").',
  envVar: 'SMTP_FROM_NAME',
  providers: []
}, {
  id: 'SMTP_HOST',
  label: 'Custom SMTP Host',
  description: 'Optional: Custom SMTP server hostname (only for non-standard providers).',
  envVar: 'SMTP_HOST',
  providers: []
}, {
  id: 'SMTP_PORT',
  label: 'Custom SMTP Port',
  description: 'Optional: Custom SMTP port (only for non-standard providers, default: 587).',
  envVar: 'SMTP_PORT',
  providers: []
}];
const envAgiHome = process.env['AGI_HOME'];
const SECRET_DIR = envAgiHome ? (0, _nodePath.resolve)(envAgiHome) : (0, _nodePath.join)((0, _nodeOs.homedir)(), '.agi');
const SECRET_FILE = (0, _nodePath.join)(SECRET_DIR, 'secrets.json');
class MissingSecretError extends Error {
  constructor(secret) {
    super(`${secret.label} is not configured.`);
    this.secret = secret;
    this.name = 'MissingSecretError';
  }
}
exports.MissingSecretError = MissingSecretError;
function listSecretDefinitions() {
  return [...SECRET_DEFINITIONS];
}
function getSecretDefinition(id) {
  return SECRET_DEFINITIONS.find(entry => entry.id === id) ?? null;
}
function getSecretValue(id) {
  const envValue = sanitize(process.env[id]);
  if (envValue) {
    return envValue;
  }
  const store = readSecretStore();
  const storedValue = sanitize(store[id]);
  if (!storedValue) {
    return null;
  }
  process.env[id] = storedValue;
  return storedValue;
}

/**
 * Load all stored secrets into process.env at startup.
 * This ensures secrets are available before any provider checks.
 *
 * IMPORTANT: Stored secrets always take precedence over environment variables
 * for provider API keys. This ensures keys set via /secrets are used even if
 * the user has old/stale keys exported in their shell environment.
 */
function loadAllSecrets() {
  const store = readSecretStore();
  for (const definition of SECRET_DEFINITIONS) {
    const storedValue = sanitize(store[definition.id]);
    if (storedValue) {
      // Always use stored value for API keys to ensure /secrets takes precedence
      // over potentially stale environment variables
      process.env[definition.id] = storedValue;
    }
  }

  // Sync GEMINI_API_KEY and GOOGLE_API_KEY for Google SDK compatibility
  // The Google SDK checks both vars and warns if both are set
  // We standardize on GEMINI_API_KEY as the canonical key
  syncGoogleApiKeys();
}

/**
 * Sync GEMINI_API_KEY and GOOGLE_API_KEY environment variables.
 * The Google SDK prefers GOOGLE_API_KEY if both are set, but we use GEMINI_API_KEY
 * as the canonical stored key. This function ensures consistency.
 */
function syncGoogleApiKeys() {
  const geminiKey = process.env['GEMINI_API_KEY'];
  const googleKey = process.env['GOOGLE_API_KEY'];
  if (geminiKey && !googleKey) {
    // Only GEMINI_API_KEY set - also set GOOGLE_API_KEY to avoid SDK confusion
    process.env['GOOGLE_API_KEY'] = geminiKey;
  } else if (googleKey && !geminiKey) {
    // Only GOOGLE_API_KEY set (from env export) - copy to GEMINI_API_KEY
    process.env['GEMINI_API_KEY'] = googleKey;
  } else if (geminiKey && googleKey && geminiKey !== googleKey) {
    // Both set with different values - prefer GEMINI_API_KEY (the stored one)
    // and sync GOOGLE_API_KEY to match
    process.env['GOOGLE_API_KEY'] = geminiKey;
  }
  // If both are set and equal, no action needed
}
function setSecretValue(id, rawValue) {
  const value = sanitize(rawValue);
  if (!value) {
    throw new Error('Secret value cannot be blank.');
  }
  const store = readSecretStore();
  store[id] = value;
  writeSecretStore(store);
  process.env[id] = value;

  // If setting GEMINI_API_KEY, also sync GOOGLE_API_KEY for SDK compatibility
  if (id === 'GEMINI_API_KEY') {
    process.env['GOOGLE_API_KEY'] = value;
  }
}
function maskSecret(value) {
  if (!value) {
    return '';
  }
  if (value.length <= 4) {
    return '*'.repeat(value.length);
  }
  const suffix = value.slice(-4);
  const prefix = '*'.repeat(Math.max(0, value.length - 4));
  return `${prefix}${suffix}`;
}
function ensureSecretForProvider(provider) {
  const definition = findDefinitionForProvider(provider);
  const value = getSecretValue(definition.id);
  if (!value) {
    throw new MissingSecretError(definition);
  }
  process.env[definition.envVar] = value;
  return value;
}
function getSecretDefinitionForProvider(provider) {
  return SECRET_DEFINITIONS.find(entry => entry.providers.includes(provider)) ?? null;
}
function readSecretStore() {
  if (!(0, _nodeFs.existsSync)(SECRET_FILE)) {
    return {};
  }
  try {
    const content = (0, _nodeFs.readFileSync)(SECRET_FILE, 'utf8');
    const parsed = JSON.parse(content);
    if (parsed && typeof parsed === 'object') {
      return parsed;
    }
  } catch {
    return {};
  }
  return {};
}
function writeSecretStore(store) {
  const directory = (0, _nodePath.dirname)(SECRET_FILE);
  (0, _nodeFs.mkdirSync)(directory, {
    recursive: true
  });
  const payload = JSON.stringify(store, null, 2);
  (0, _nodeFs.writeFileSync)(SECRET_FILE, `${payload}
`);
}
function findDefinitionForProvider(provider) {
  const definition = getSecretDefinitionForProvider(provider);
  if (!definition) {
    throw new Error(`No secret configuration for provider "${provider}".`);
  }
  return definition;
}
function sanitize(value) {
  if (typeof value !== 'string') {
    return null;
  }
  const trimmed = value.trim();
  return trimmed.length ? trimmed : null;
}

// ============================================================================
// Secret Sanitization for Error Messages
// ============================================================================

/**
 * Known API key patterns to detect and sanitize in error messages.
 * These patterns match common API key formats from various providers.
 */
const API_KEY_PATTERNS = [
// Anthropic API keys: sk-ant-api03-...
/sk-ant-api\d{2}-[A-Za-z0-9_-]{20,}/g,
// OpenAI API keys: sk-proj-... or sk-...
/sk-(?:proj-)?[A-Za-z0-9_-]{20,}/g,
// Generic Bearer tokens in headers
/Bearer\s+[A-Za-z0-9_.-]{20,}/gi,
// x-api-key header values
/x-api-key['":\s]+[A-Za-z0-9_.-]{20,}/gi,
// API keys in URLs (key=value pattern)
/[?&](?:key|api_key|apiKey|api-key|token|access_token)=([A-Za-z0-9_.-]{16,})/gi,
// DeepSeek keys
/sk-[a-f0-9]{32,}/gi,
// xAI/Grok keys
/xai-[A-Za-z0-9_-]{20,}/gi,
// Google/Gemini API keys (AIza...)
/AIza[A-Za-z0-9_-]{30,}/g,
// Generic long alphanumeric tokens that look like API keys
/(?:api[_-]?key|token|secret|password|credential)['"]?\s*[:=]\s*['"]?([A-Za-z0-9_.-]{20,})['"]?/gi];

/**
 * Sanitize error messages to remove potential API keys and secrets.
 * This prevents accidental token leakage in logs, error reports, and console output.
 *
 * @param message - The error message or string to sanitize
 * @returns The sanitized string with secrets replaced by [REDACTED]
 */
function sanitizeErrorMessage(message) {
  if (!message || typeof message !== 'string') {
    return message;
  }
  let sanitized = message;

  // Apply all API key patterns
  for (const pattern of API_KEY_PATTERNS) {
    // Reset lastIndex for global patterns
    pattern.lastIndex = 0;
    sanitized = sanitized.replace(pattern, match => {
      // For patterns with capture groups, try to preserve context
      if (match.includes('=') || match.includes(':')) {
        const separator = match.includes('=') ? '=' : ':';
        const parts = match.split(separator);
        if (parts.length === 2) {
          return `${parts[0]}${separator}[REDACTED]`;
        }
      }
      return '[REDACTED]';
    });
  }

  // Additionally sanitize any env var values that are currently loaded
  sanitized = sanitizeAgainstLoadedSecrets(sanitized);
  return sanitized;
}

/**
 * Sanitize a string against currently loaded secret values.
 * This catches any secrets that might not match the pattern-based detection.
 */
function sanitizeAgainstLoadedSecrets(message) {
  const secretNames = ['OPENAI_API_KEY', 'ANTHROPIC_API_KEY', 'DEEPSEEK_API_KEY', 'XAI_API_KEY', 'GEMINI_API_KEY', 'TAVILY_API_KEY', 'SMTP_PASSWORD'];
  let sanitized = message;
  for (const name of secretNames) {
    const value = process.env[name];
    if (value && value.length >= 8) {
      // Only sanitize if the value appears in the message
      // Use a case-sensitive exact match to avoid false positives
      if (sanitized.includes(value)) {
        sanitized = sanitized.split(value).join('[REDACTED]');
      }
    }
  }
  return sanitized;
}

/**
 * Sanitize an Error object's message and stack trace.
 * Returns a new error message string with secrets removed.
 */
function sanitizeError(error) {
  const message = sanitizeErrorMessage(error.message);
  const stack = error.stack ? sanitizeErrorMessage(error.stack) : '';
  if (stack && stack !== message) {
    return `${message}\n${stack}`;
  }
  return message;
}

/**
 * Create a safe error message from an unknown error value.
 * Ensures no secrets are leaked regardless of error type.
 */
function safeErrorMessage(error) {
  if (error instanceof Error) {
    return sanitizeErrorMessage(error.message);
  }
  if (typeof error === 'string') {
    return sanitizeErrorMessage(error);
  }
  return 'Unknown error occurred';
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9ub2RlT3MiLCJfbm9kZVBhdGgiLCJTRUNSRVRfREVGSU5JVElPTlMiLCJpZCIsImxhYmVsIiwiZGVzY3JpcHRpb24iLCJlbnZWYXIiLCJwcm92aWRlcnMiLCJlbnZBZ2lIb21lIiwicHJvY2VzcyIsImVudiIsIlNFQ1JFVF9ESVIiLCJyZXNvbHZlIiwiam9pbiIsImhvbWVkaXIiLCJTRUNSRVRfRklMRSIsIk1pc3NpbmdTZWNyZXRFcnJvciIsIkVycm9yIiwiY29uc3RydWN0b3IiLCJzZWNyZXQiLCJuYW1lIiwiZXhwb3J0cyIsImxpc3RTZWNyZXREZWZpbml0aW9ucyIsImdldFNlY3JldERlZmluaXRpb24iLCJmaW5kIiwiZW50cnkiLCJnZXRTZWNyZXRWYWx1ZSIsImVudlZhbHVlIiwic2FuaXRpemUiLCJzdG9yZSIsInJlYWRTZWNyZXRTdG9yZSIsInN0b3JlZFZhbHVlIiwibG9hZEFsbFNlY3JldHMiLCJkZWZpbml0aW9uIiwic3luY0dvb2dsZUFwaUtleXMiLCJnZW1pbmlLZXkiLCJnb29nbGVLZXkiLCJzZXRTZWNyZXRWYWx1ZSIsInJhd1ZhbHVlIiwidmFsdWUiLCJ3cml0ZVNlY3JldFN0b3JlIiwibWFza1NlY3JldCIsImxlbmd0aCIsInJlcGVhdCIsInN1ZmZpeCIsInNsaWNlIiwicHJlZml4IiwiTWF0aCIsIm1heCIsImVuc3VyZVNlY3JldEZvclByb3ZpZGVyIiwicHJvdmlkZXIiLCJmaW5kRGVmaW5pdGlvbkZvclByb3ZpZGVyIiwiZ2V0U2VjcmV0RGVmaW5pdGlvbkZvclByb3ZpZGVyIiwiaW5jbHVkZXMiLCJleGlzdHNTeW5jIiwiY29udGVudCIsInJlYWRGaWxlU3luYyIsInBhcnNlZCIsIkpTT04iLCJwYXJzZSIsImRpcmVjdG9yeSIsImRpcm5hbWUiLCJta2RpclN5bmMiLCJyZWN1cnNpdmUiLCJwYXlsb2FkIiwic3RyaW5naWZ5Iiwid3JpdGVGaWxlU3luYyIsInRyaW1tZWQiLCJ0cmltIiwiQVBJX0tFWV9QQVRURVJOUyIsInNhbml0aXplRXJyb3JNZXNzYWdlIiwibWVzc2FnZSIsInNhbml0aXplZCIsInBhdHRlcm4iLCJsYXN0SW5kZXgiLCJyZXBsYWNlIiwibWF0Y2giLCJzZXBhcmF0b3IiLCJwYXJ0cyIsInNwbGl0Iiwic2FuaXRpemVBZ2FpbnN0TG9hZGVkU2VjcmV0cyIsInNlY3JldE5hbWVzIiwic2FuaXRpemVFcnJvciIsImVycm9yIiwic3RhY2siLCJzYWZlRXJyb3JNZXNzYWdlIl0sInNvdXJjZXMiOlsic2VjcmV0U3RvcmUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgZXhpc3RzU3luYywgbWtkaXJTeW5jLCByZWFkRmlsZVN5bmMsIHdyaXRlRmlsZVN5bmMgfSBmcm9tICdub2RlOmZzJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdub2RlOm9zJztcbmltcG9ydCB7IGRpcm5hbWUsIGpvaW4sIHJlc29sdmUgfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHR5cGUgeyBQcm92aWRlcklkIH0gZnJvbSAnLi90eXBlcy5qcyc7XG5cbmV4cG9ydCB0eXBlIFNlY3JldE5hbWUgPVxuICB8ICdPUEVOQUlfQVBJX0tFWSdcbiAgfCAnQU5USFJPUElDX0FQSV9LRVknXG4gIHwgJ0RFRVBTRUVLX0FQSV9LRVknXG4gIHwgJ1hBSV9BUElfS0VZJ1xuICB8ICdHRU1JTklfQVBJX0tFWSdcbiAgfCAnVEFWSUxZX0FQSV9LRVknXG4gIHwgJ1NNVFBfVVNFUidcbiAgfCAnU01UUF9QQVNTV09SRCdcbiAgfCAnU01UUF9QUk9WSURFUidcbiAgfCAnU01UUF9GUk9NX05BTUUnXG4gIHwgJ1NNVFBfSE9TVCdcbiAgfCAnU01UUF9QT1JUJztcblxuZXhwb3J0IGludGVyZmFjZSBTZWNyZXREZWZpbml0aW9uIHtcbiAgaWQ6IFNlY3JldE5hbWU7XG4gIGxhYmVsOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGVudlZhcjogU2VjcmV0TmFtZTtcbiAgcHJvdmlkZXJzOiBQcm92aWRlcklkW107XG59XG5cbmludGVyZmFjZSBTZWNyZXRTdG9yZURhdGEge1xuICBba2V5OiBzdHJpbmddOiBzdHJpbmcgfCB1bmRlZmluZWQ7XG59XG5cbmNvbnN0IFNFQ1JFVF9ERUZJTklUSU9OUzogU2VjcmV0RGVmaW5pdGlvbltdID0gW1xuICB7XG4gICAgaWQ6ICdPUEVOQUlfQVBJX0tFWScsXG4gICAgbGFiZWw6ICdPcGVuQUkgQVBJIEtleScsXG4gICAgZGVzY3JpcHRpb246ICdSZXF1aXJlZCB0byBydW4gT3BlbkFJIEdQVCBhbmQgQUdJIENvZGUgbW9kZWxzLicsXG4gICAgZW52VmFyOiAnT1BFTkFJX0FQSV9LRVknLFxuICAgIHByb3ZpZGVyczogWydvcGVuYWknXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnQU5USFJPUElDX0FQSV9LRVknLFxuICAgIGxhYmVsOiAnQW50aHJvcGljIEFQSSBLZXknLFxuICAgIGRlc2NyaXB0aW9uOiAnUmVxdWlyZWQgdG8gcnVuIEFudGhyb3BpYyBTb25uZXQsIE9wdXMsIG9yIEhhaWt1IG1vZGVscy4nLFxuICAgIGVudlZhcjogJ0FOVEhST1BJQ19BUElfS0VZJyxcbiAgICBwcm92aWRlcnM6IFsnYW50aHJvcGljJ10sXG4gIH0sXG4gIHtcbiAgICBpZDogJ0RFRVBTRUVLX0FQSV9LRVknLFxuICAgIGxhYmVsOiAnRGVlcFNlZWsgQVBJIEtleScsXG4gICAgZGVzY3JpcHRpb246ICdSZXF1aXJlZCB0byBydW4gRGVlcFNlZWsgUmVhc29uZXIgb3IgQ2hhdCBtb2RlbHMuJyxcbiAgICBlbnZWYXI6ICdERUVQU0VFS19BUElfS0VZJyxcbiAgICBwcm92aWRlcnM6IFsnZGVlcHNlZWsnXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnWEFJX0FQSV9LRVknLFxuICAgIGxhYmVsOiAneEFJIEFQSSBLZXknLFxuICAgIGRlc2NyaXB0aW9uOiAnUmVxdWlyZWQgdG8gcnVuIEdyb2sgbW9kZWxzIGZyb20geEFJLicsXG4gICAgZW52VmFyOiAnWEFJX0FQSV9LRVknLFxuICAgIHByb3ZpZGVyczogWyd4YWknXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnR0VNSU5JX0FQSV9LRVknLFxuICAgIGxhYmVsOiAnR29vZ2xlIEdlbWluaSBBUEkgS2V5JyxcbiAgICBkZXNjcmlwdGlvbjogJ1JlcXVpcmVkIHRvIHJ1biBHZW1pbmkgMi41IFBybyBvciBGbGFzaCBtb2RlbHMuJyxcbiAgICBlbnZWYXI6ICdHRU1JTklfQVBJX0tFWScsXG4gICAgcHJvdmlkZXJzOiBbJ2dvb2dsZSddLFxuICB9LFxuICB7XG4gICAgaWQ6ICdUQVZJTFlfQVBJX0tFWScsXG4gICAgbGFiZWw6ICdUYXZpbHkgQVBJIEtleScsXG4gICAgZGVzY3JpcHRpb246ICdSZXF1aXJlZDogV2ViU2VhcmNoIGFuZCBXZWJFeHRyYWN0IHByb3ZpZGVyLiBHZXQgeW91cnMgYXQgaHR0cHM6Ly90YXZpbHkuY29tJyxcbiAgICBlbnZWYXI6ICdUQVZJTFlfQVBJX0tFWScsXG4gICAgcHJvdmlkZXJzOiBbXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnU01UUF9VU0VSJyxcbiAgICBsYWJlbDogJ0VtYWlsIEFkZHJlc3MnLFxuICAgIGRlc2NyaXB0aW9uOiAnWW91ciBlbWFpbCBhZGRyZXNzIGZvciBzZW5kaW5nIGVtYWlscyAoZS5nLiwgeW91QGdtYWlsLmNvbSkuJyxcbiAgICBlbnZWYXI6ICdTTVRQX1VTRVInLFxuICAgIHByb3ZpZGVyczogW10sXG4gIH0sXG4gIHtcbiAgICBpZDogJ1NNVFBfUEFTU1dPUkQnLFxuICAgIGxhYmVsOiAnRW1haWwgQXBwIFBhc3N3b3JkJyxcbiAgICBkZXNjcmlwdGlvbjogJ0FwcCBwYXNzd29yZCBmb3IgeW91ciBlbWFpbCAoTk9UIHlvdXIgcmVndWxhciBwYXNzd29yZCkuIEZvciBHbWFpbDogaHR0cHM6Ly9teWFjY291bnQuZ29vZ2xlLmNvbS9hcHBwYXNzd29yZHMnLFxuICAgIGVudlZhcjogJ1NNVFBfUEFTU1dPUkQnLFxuICAgIHByb3ZpZGVyczogW10sXG4gIH0sXG4gIHtcbiAgICBpZDogJ1NNVFBfUFJPVklERVInLFxuICAgIGxhYmVsOiAnRW1haWwgUHJvdmlkZXInLFxuICAgIGRlc2NyaXB0aW9uOiAnRW1haWwgcHJvdmlkZXI6IGdtYWlsLCBvdXRsb29rLCB5YWhvbywgaWNsb3VkLCB6b2hvIChkZWZhdWx0OiBnbWFpbCkuJyxcbiAgICBlbnZWYXI6ICdTTVRQX1BST1ZJREVSJyxcbiAgICBwcm92aWRlcnM6IFtdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdTTVRQX0ZST01fTkFNRScsXG4gICAgbGFiZWw6ICdFbWFpbCBEaXNwbGF5IE5hbWUnLFxuICAgIGRlc2NyaXB0aW9uOiAnT3B0aW9uYWw6IERpc3BsYXkgbmFtZSBzaG93biBpbiBzZW50IGVtYWlscyAoZS5nLiwgXCJKb2huIERvZVwiKS4nLFxuICAgIGVudlZhcjogJ1NNVFBfRlJPTV9OQU1FJyxcbiAgICBwcm92aWRlcnM6IFtdLFxuICB9LFxuICB7XG4gICAgaWQ6ICdTTVRQX0hPU1QnLFxuICAgIGxhYmVsOiAnQ3VzdG9tIFNNVFAgSG9zdCcsXG4gICAgZGVzY3JpcHRpb246ICdPcHRpb25hbDogQ3VzdG9tIFNNVFAgc2VydmVyIGhvc3RuYW1lIChvbmx5IGZvciBub24tc3RhbmRhcmQgcHJvdmlkZXJzKS4nLFxuICAgIGVudlZhcjogJ1NNVFBfSE9TVCcsXG4gICAgcHJvdmlkZXJzOiBbXSxcbiAgfSxcbiAge1xuICAgIGlkOiAnU01UUF9QT1JUJyxcbiAgICBsYWJlbDogJ0N1c3RvbSBTTVRQIFBvcnQnLFxuICAgIGRlc2NyaXB0aW9uOiAnT3B0aW9uYWw6IEN1c3RvbSBTTVRQIHBvcnQgKG9ubHkgZm9yIG5vbi1zdGFuZGFyZCBwcm92aWRlcnMsIGRlZmF1bHQ6IDU4NykuJyxcbiAgICBlbnZWYXI6ICdTTVRQX1BPUlQnLFxuICAgIHByb3ZpZGVyczogW10sXG4gIH0sXG5dO1xuXG5jb25zdCBlbnZBZ2lIb21lID0gcHJvY2Vzcy5lbnZbJ0FHSV9IT01FJ107XG5jb25zdCBTRUNSRVRfRElSID0gZW52QWdpSG9tZSA/IHJlc29sdmUoZW52QWdpSG9tZSkgOiBqb2luKGhvbWVkaXIoKSwgJy5hZ2knKTtcbmNvbnN0IFNFQ1JFVF9GSUxFID0gam9pbihTRUNSRVRfRElSLCAnc2VjcmV0cy5qc29uJyk7XG5cbmV4cG9ydCBjbGFzcyBNaXNzaW5nU2VjcmV0RXJyb3IgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyByZWFkb25seSBzZWNyZXQ6IFNlY3JldERlZmluaXRpb24pIHtcbiAgICBzdXBlcihgJHtzZWNyZXQubGFiZWx9IGlzIG5vdCBjb25maWd1cmVkLmApO1xuICAgIHRoaXMubmFtZSA9ICdNaXNzaW5nU2VjcmV0RXJyb3InO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0U2VjcmV0RGVmaW5pdGlvbnMoKTogU2VjcmV0RGVmaW5pdGlvbltdIHtcbiAgcmV0dXJuIFsuLi5TRUNSRVRfREVGSU5JVElPTlNdO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VjcmV0RGVmaW5pdGlvbihpZDogU2VjcmV0TmFtZSk6IFNlY3JldERlZmluaXRpb24gfCBudWxsIHtcbiAgcmV0dXJuIFNFQ1JFVF9ERUZJTklUSU9OUy5maW5kKChlbnRyeSkgPT4gZW50cnkuaWQgPT09IGlkKSA/PyBudWxsO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VjcmV0VmFsdWUoaWQ6IFNlY3JldE5hbWUpOiBzdHJpbmcgfCBudWxsIHtcbiAgY29uc3QgZW52VmFsdWUgPSBzYW5pdGl6ZShwcm9jZXNzLmVudltpZF0pO1xuICBpZiAoZW52VmFsdWUpIHtcbiAgICByZXR1cm4gZW52VmFsdWU7XG4gIH1cblxuICBjb25zdCBzdG9yZSA9IHJlYWRTZWNyZXRTdG9yZSgpO1xuICBjb25zdCBzdG9yZWRWYWx1ZSA9IHNhbml0aXplKHN0b3JlW2lkXSk7XG4gIGlmICghc3RvcmVkVmFsdWUpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIHByb2Nlc3MuZW52W2lkXSA9IHN0b3JlZFZhbHVlO1xuICByZXR1cm4gc3RvcmVkVmFsdWU7XG59XG5cbi8qKlxuICogTG9hZCBhbGwgc3RvcmVkIHNlY3JldHMgaW50byBwcm9jZXNzLmVudiBhdCBzdGFydHVwLlxuICogVGhpcyBlbnN1cmVzIHNlY3JldHMgYXJlIGF2YWlsYWJsZSBiZWZvcmUgYW55IHByb3ZpZGVyIGNoZWNrcy5cbiAqXG4gKiBJTVBPUlRBTlQ6IFN0b3JlZCBzZWNyZXRzIGFsd2F5cyB0YWtlIHByZWNlZGVuY2Ugb3ZlciBlbnZpcm9ubWVudCB2YXJpYWJsZXNcbiAqIGZvciBwcm92aWRlciBBUEkga2V5cy4gVGhpcyBlbnN1cmVzIGtleXMgc2V0IHZpYSAvc2VjcmV0cyBhcmUgdXNlZCBldmVuIGlmXG4gKiB0aGUgdXNlciBoYXMgb2xkL3N0YWxlIGtleXMgZXhwb3J0ZWQgaW4gdGhlaXIgc2hlbGwgZW52aXJvbm1lbnQuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBsb2FkQWxsU2VjcmV0cygpOiB2b2lkIHtcbiAgY29uc3Qgc3RvcmUgPSByZWFkU2VjcmV0U3RvcmUoKTtcbiAgZm9yIChjb25zdCBkZWZpbml0aW9uIG9mIFNFQ1JFVF9ERUZJTklUSU9OUykge1xuICAgIGNvbnN0IHN0b3JlZFZhbHVlID0gc2FuaXRpemUoc3RvcmVbZGVmaW5pdGlvbi5pZF0pO1xuICAgIGlmIChzdG9yZWRWYWx1ZSkge1xuICAgICAgLy8gQWx3YXlzIHVzZSBzdG9yZWQgdmFsdWUgZm9yIEFQSSBrZXlzIHRvIGVuc3VyZSAvc2VjcmV0cyB0YWtlcyBwcmVjZWRlbmNlXG4gICAgICAvLyBvdmVyIHBvdGVudGlhbGx5IHN0YWxlIGVudmlyb25tZW50IHZhcmlhYmxlc1xuICAgICAgcHJvY2Vzcy5lbnZbZGVmaW5pdGlvbi5pZF0gPSBzdG9yZWRWYWx1ZTtcbiAgICB9XG4gIH1cblxuICAvLyBTeW5jIEdFTUlOSV9BUElfS0VZIGFuZCBHT09HTEVfQVBJX0tFWSBmb3IgR29vZ2xlIFNESyBjb21wYXRpYmlsaXR5XG4gIC8vIFRoZSBHb29nbGUgU0RLIGNoZWNrcyBib3RoIHZhcnMgYW5kIHdhcm5zIGlmIGJvdGggYXJlIHNldFxuICAvLyBXZSBzdGFuZGFyZGl6ZSBvbiBHRU1JTklfQVBJX0tFWSBhcyB0aGUgY2Fub25pY2FsIGtleVxuICBzeW5jR29vZ2xlQXBpS2V5cygpO1xufVxuXG4vKipcbiAqIFN5bmMgR0VNSU5JX0FQSV9LRVkgYW5kIEdPT0dMRV9BUElfS0VZIGVudmlyb25tZW50IHZhcmlhYmxlcy5cbiAqIFRoZSBHb29nbGUgU0RLIHByZWZlcnMgR09PR0xFX0FQSV9LRVkgaWYgYm90aCBhcmUgc2V0LCBidXQgd2UgdXNlIEdFTUlOSV9BUElfS0VZXG4gKiBhcyB0aGUgY2Fub25pY2FsIHN0b3JlZCBrZXkuIFRoaXMgZnVuY3Rpb24gZW5zdXJlcyBjb25zaXN0ZW5jeS5cbiAqL1xuZnVuY3Rpb24gc3luY0dvb2dsZUFwaUtleXMoKTogdm9pZCB7XG4gIGNvbnN0IGdlbWluaUtleSA9IHByb2Nlc3MuZW52WydHRU1JTklfQVBJX0tFWSddO1xuICBjb25zdCBnb29nbGVLZXkgPSBwcm9jZXNzLmVudlsnR09PR0xFX0FQSV9LRVknXTtcblxuICBpZiAoZ2VtaW5pS2V5ICYmICFnb29nbGVLZXkpIHtcbiAgICAvLyBPbmx5IEdFTUlOSV9BUElfS0VZIHNldCAtIGFsc28gc2V0IEdPT0dMRV9BUElfS0VZIHRvIGF2b2lkIFNESyBjb25mdXNpb25cbiAgICBwcm9jZXNzLmVudlsnR09PR0xFX0FQSV9LRVknXSA9IGdlbWluaUtleTtcbiAgfSBlbHNlIGlmIChnb29nbGVLZXkgJiYgIWdlbWluaUtleSkge1xuICAgIC8vIE9ubHkgR09PR0xFX0FQSV9LRVkgc2V0IChmcm9tIGVudiBleHBvcnQpIC0gY29weSB0byBHRU1JTklfQVBJX0tFWVxuICAgIHByb2Nlc3MuZW52WydHRU1JTklfQVBJX0tFWSddID0gZ29vZ2xlS2V5O1xuICB9IGVsc2UgaWYgKGdlbWluaUtleSAmJiBnb29nbGVLZXkgJiYgZ2VtaW5pS2V5ICE9PSBnb29nbGVLZXkpIHtcbiAgICAvLyBCb3RoIHNldCB3aXRoIGRpZmZlcmVudCB2YWx1ZXMgLSBwcmVmZXIgR0VNSU5JX0FQSV9LRVkgKHRoZSBzdG9yZWQgb25lKVxuICAgIC8vIGFuZCBzeW5jIEdPT0dMRV9BUElfS0VZIHRvIG1hdGNoXG4gICAgcHJvY2Vzcy5lbnZbJ0dPT0dMRV9BUElfS0VZJ10gPSBnZW1pbmlLZXk7XG4gIH1cbiAgLy8gSWYgYm90aCBhcmUgc2V0IGFuZCBlcXVhbCwgbm8gYWN0aW9uIG5lZWRlZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2VjcmV0VmFsdWUoaWQ6IFNlY3JldE5hbWUsIHJhd1ZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgY29uc3QgdmFsdWUgPSBzYW5pdGl6ZShyYXdWYWx1ZSk7XG4gIGlmICghdmFsdWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ1NlY3JldCB2YWx1ZSBjYW5ub3QgYmUgYmxhbmsuJyk7XG4gIH1cblxuICBjb25zdCBzdG9yZSA9IHJlYWRTZWNyZXRTdG9yZSgpO1xuICBzdG9yZVtpZF0gPSB2YWx1ZTtcbiAgd3JpdGVTZWNyZXRTdG9yZShzdG9yZSk7XG4gIHByb2Nlc3MuZW52W2lkXSA9IHZhbHVlO1xuXG4gIC8vIElmIHNldHRpbmcgR0VNSU5JX0FQSV9LRVksIGFsc28gc3luYyBHT09HTEVfQVBJX0tFWSBmb3IgU0RLIGNvbXBhdGliaWxpdHlcbiAgaWYgKGlkID09PSAnR0VNSU5JX0FQSV9LRVknKSB7XG4gICAgcHJvY2Vzcy5lbnZbJ0dPT0dMRV9BUElfS0VZJ10gPSB2YWx1ZTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gbWFza1NlY3JldCh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgaWYgKCF2YWx1ZSkge1xuICAgIHJldHVybiAnJztcbiAgfVxuICBpZiAodmFsdWUubGVuZ3RoIDw9IDQpIHtcbiAgICByZXR1cm4gJyonLnJlcGVhdCh2YWx1ZS5sZW5ndGgpO1xuICB9XG4gIGNvbnN0IHN1ZmZpeCA9IHZhbHVlLnNsaWNlKC00KTtcbiAgY29uc3QgcHJlZml4ID0gJyonLnJlcGVhdChNYXRoLm1heCgwLCB2YWx1ZS5sZW5ndGggLSA0KSk7XG4gIHJldHVybiBgJHtwcmVmaXh9JHtzdWZmaXh9YDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZVNlY3JldEZvclByb3ZpZGVyKHByb3ZpZGVyOiBQcm92aWRlcklkKTogc3RyaW5nIHtcbiAgY29uc3QgZGVmaW5pdGlvbiA9IGZpbmREZWZpbml0aW9uRm9yUHJvdmlkZXIocHJvdmlkZXIpO1xuICBjb25zdCB2YWx1ZSA9IGdldFNlY3JldFZhbHVlKGRlZmluaXRpb24uaWQpO1xuICBpZiAoIXZhbHVlKSB7XG4gICAgdGhyb3cgbmV3IE1pc3NpbmdTZWNyZXRFcnJvcihkZWZpbml0aW9uKTtcbiAgfVxuICBwcm9jZXNzLmVudltkZWZpbml0aW9uLmVudlZhcl0gPSB2YWx1ZTtcbiAgcmV0dXJuIHZhbHVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0U2VjcmV0RGVmaW5pdGlvbkZvclByb3ZpZGVyKHByb3ZpZGVyOiBQcm92aWRlcklkKTogU2VjcmV0RGVmaW5pdGlvbiB8IG51bGwge1xuICByZXR1cm4gU0VDUkVUX0RFRklOSVRJT05TLmZpbmQoKGVudHJ5KSA9PiBlbnRyeS5wcm92aWRlcnMuaW5jbHVkZXMocHJvdmlkZXIpKSA/PyBudWxsO1xufVxuXG5mdW5jdGlvbiByZWFkU2VjcmV0U3RvcmUoKTogU2VjcmV0U3RvcmVEYXRhIHtcbiAgaWYgKCFleGlzdHNTeW5jKFNFQ1JFVF9GSUxFKSkge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgY29udGVudCA9IHJlYWRGaWxlU3luYyhTRUNSRVRfRklMRSwgJ3V0ZjgnKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKGNvbnRlbnQpO1xuICAgIGlmIChwYXJzZWQgJiYgdHlwZW9mIHBhcnNlZCA9PT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiBwYXJzZWQgYXMgU2VjcmV0U3RvcmVEYXRhO1xuICAgIH1cbiAgfSBjYXRjaCB7XG4gICAgcmV0dXJuIHt9O1xuICB9XG4gIHJldHVybiB7fTtcbn1cblxuZnVuY3Rpb24gd3JpdGVTZWNyZXRTdG9yZShzdG9yZTogU2VjcmV0U3RvcmVEYXRhKTogdm9pZCB7XG4gIGNvbnN0IGRpcmVjdG9yeSA9IGRpcm5hbWUoU0VDUkVUX0ZJTEUpO1xuICBta2RpclN5bmMoZGlyZWN0b3J5LCB7IHJlY3Vyc2l2ZTogdHJ1ZSB9KTtcbiAgY29uc3QgcGF5bG9hZCA9IEpTT04uc3RyaW5naWZ5KHN0b3JlLCBudWxsLCAyKTtcbiAgd3JpdGVGaWxlU3luYyhTRUNSRVRfRklMRSwgYCR7cGF5bG9hZH1cbmApO1xufVxuXG5mdW5jdGlvbiBmaW5kRGVmaW5pdGlvbkZvclByb3ZpZGVyKHByb3ZpZGVyOiBQcm92aWRlcklkKTogU2VjcmV0RGVmaW5pdGlvbiB7XG4gIGNvbnN0IGRlZmluaXRpb24gPSBnZXRTZWNyZXREZWZpbml0aW9uRm9yUHJvdmlkZXIocHJvdmlkZXIpO1xuICBpZiAoIWRlZmluaXRpb24pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHNlY3JldCBjb25maWd1cmF0aW9uIGZvciBwcm92aWRlciBcIiR7cHJvdmlkZXJ9XCIuYCk7XG4gIH1cbiAgcmV0dXJuIGRlZmluaXRpb247XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplKHZhbHVlOiB1bmtub3duKTogc3RyaW5nIHwgbnVsbCB7XG4gIGlmICh0eXBlb2YgdmFsdWUgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgY29uc3QgdHJpbW1lZCA9IHZhbHVlLnRyaW0oKTtcbiAgcmV0dXJuIHRyaW1tZWQubGVuZ3RoID8gdHJpbW1lZCA6IG51bGw7XG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIFNlY3JldCBTYW5pdGl6YXRpb24gZm9yIEVycm9yIE1lc3NhZ2VzXG4vLyA9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbi8qKlxuICogS25vd24gQVBJIGtleSBwYXR0ZXJucyB0byBkZXRlY3QgYW5kIHNhbml0aXplIGluIGVycm9yIG1lc3NhZ2VzLlxuICogVGhlc2UgcGF0dGVybnMgbWF0Y2ggY29tbW9uIEFQSSBrZXkgZm9ybWF0cyBmcm9tIHZhcmlvdXMgcHJvdmlkZXJzLlxuICovXG5jb25zdCBBUElfS0VZX1BBVFRFUk5TOiBSZWdFeHBbXSA9IFtcbiAgLy8gQW50aHJvcGljIEFQSSBrZXlzOiBzay1hbnQtYXBpMDMtLi4uXG4gIC9zay1hbnQtYXBpXFxkezJ9LVtBLVphLXowLTlfLV17MjAsfS9nLFxuICAvLyBPcGVuQUkgQVBJIGtleXM6IHNrLXByb2otLi4uIG9yIHNrLS4uLlxuICAvc2stKD86cHJvai0pP1tBLVphLXowLTlfLV17MjAsfS9nLFxuICAvLyBHZW5lcmljIEJlYXJlciB0b2tlbnMgaW4gaGVhZGVyc1xuICAvQmVhcmVyXFxzK1tBLVphLXowLTlfLi1dezIwLH0vZ2ksXG4gIC8vIHgtYXBpLWtleSBoZWFkZXIgdmFsdWVzXG4gIC94LWFwaS1rZXlbJ1wiOlxcc10rW0EtWmEtejAtOV8uLV17MjAsfS9naSxcbiAgLy8gQVBJIGtleXMgaW4gVVJMcyAoa2V5PXZhbHVlIHBhdHRlcm4pXG4gIC9bPyZdKD86a2V5fGFwaV9rZXl8YXBpS2V5fGFwaS1rZXl8dG9rZW58YWNjZXNzX3Rva2VuKT0oW0EtWmEtejAtOV8uLV17MTYsfSkvZ2ksXG4gIC8vIERlZXBTZWVrIGtleXNcbiAgL3NrLVthLWYwLTldezMyLH0vZ2ksXG4gIC8vIHhBSS9Hcm9rIGtleXNcbiAgL3hhaS1bQS1aYS16MC05Xy1dezIwLH0vZ2ksXG4gIC8vIEdvb2dsZS9HZW1pbmkgQVBJIGtleXMgKEFJemEuLi4pXG4gIC9BSXphW0EtWmEtejAtOV8tXXszMCx9L2csXG4gIC8vIEdlbmVyaWMgbG9uZyBhbHBoYW51bWVyaWMgdG9rZW5zIHRoYXQgbG9vayBsaWtlIEFQSSBrZXlzXG4gIC8oPzphcGlbXy1dP2tleXx0b2tlbnxzZWNyZXR8cGFzc3dvcmR8Y3JlZGVudGlhbClbJ1wiXT9cXHMqWzo9XVxccypbJ1wiXT8oW0EtWmEtejAtOV8uLV17MjAsfSlbJ1wiXT8vZ2ksXG5dO1xuXG4vKipcbiAqIFNhbml0aXplIGVycm9yIG1lc3NhZ2VzIHRvIHJlbW92ZSBwb3RlbnRpYWwgQVBJIGtleXMgYW5kIHNlY3JldHMuXG4gKiBUaGlzIHByZXZlbnRzIGFjY2lkZW50YWwgdG9rZW4gbGVha2FnZSBpbiBsb2dzLCBlcnJvciByZXBvcnRzLCBhbmQgY29uc29sZSBvdXRwdXQuXG4gKlxuICogQHBhcmFtIG1lc3NhZ2UgLSBUaGUgZXJyb3IgbWVzc2FnZSBvciBzdHJpbmcgdG8gc2FuaXRpemVcbiAqIEByZXR1cm5zIFRoZSBzYW5pdGl6ZWQgc3RyaW5nIHdpdGggc2VjcmV0cyByZXBsYWNlZCBieSBbUkVEQUNURURdXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYW5pdGl6ZUVycm9yTWVzc2FnZShtZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xuICBpZiAoIW1lc3NhZ2UgfHwgdHlwZW9mIG1lc3NhZ2UgIT09ICdzdHJpbmcnKSB7XG4gICAgcmV0dXJuIG1lc3NhZ2U7XG4gIH1cblxuICBsZXQgc2FuaXRpemVkID0gbWVzc2FnZTtcblxuICAvLyBBcHBseSBhbGwgQVBJIGtleSBwYXR0ZXJuc1xuICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgQVBJX0tFWV9QQVRURVJOUykge1xuICAgIC8vIFJlc2V0IGxhc3RJbmRleCBmb3IgZ2xvYmFsIHBhdHRlcm5zXG4gICAgcGF0dGVybi5sYXN0SW5kZXggPSAwO1xuICAgIHNhbml0aXplZCA9IHNhbml0aXplZC5yZXBsYWNlKHBhdHRlcm4sIChtYXRjaCkgPT4ge1xuICAgICAgLy8gRm9yIHBhdHRlcm5zIHdpdGggY2FwdHVyZSBncm91cHMsIHRyeSB0byBwcmVzZXJ2ZSBjb250ZXh0XG4gICAgICBpZiAobWF0Y2guaW5jbHVkZXMoJz0nKSB8fCBtYXRjaC5pbmNsdWRlcygnOicpKSB7XG4gICAgICAgIGNvbnN0IHNlcGFyYXRvciA9IG1hdGNoLmluY2x1ZGVzKCc9JykgPyAnPScgOiAnOic7XG4gICAgICAgIGNvbnN0IHBhcnRzID0gbWF0Y2guc3BsaXQoc2VwYXJhdG9yKTtcbiAgICAgICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMikge1xuICAgICAgICAgIHJldHVybiBgJHtwYXJ0c1swXX0ke3NlcGFyYXRvcn1bUkVEQUNURURdYDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgcmV0dXJuICdbUkVEQUNURURdJztcbiAgICB9KTtcbiAgfVxuXG4gIC8vIEFkZGl0aW9uYWxseSBzYW5pdGl6ZSBhbnkgZW52IHZhciB2YWx1ZXMgdGhhdCBhcmUgY3VycmVudGx5IGxvYWRlZFxuICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZUFnYWluc3RMb2FkZWRTZWNyZXRzKHNhbml0aXplZCk7XG5cbiAgcmV0dXJuIHNhbml0aXplZDtcbn1cblxuLyoqXG4gKiBTYW5pdGl6ZSBhIHN0cmluZyBhZ2FpbnN0IGN1cnJlbnRseSBsb2FkZWQgc2VjcmV0IHZhbHVlcy5cbiAqIFRoaXMgY2F0Y2hlcyBhbnkgc2VjcmV0cyB0aGF0IG1pZ2h0IG5vdCBtYXRjaCB0aGUgcGF0dGVybi1iYXNlZCBkZXRlY3Rpb24uXG4gKi9cbmZ1bmN0aW9uIHNhbml0aXplQWdhaW5zdExvYWRlZFNlY3JldHMobWVzc2FnZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgY29uc3Qgc2VjcmV0TmFtZXM6IFNlY3JldE5hbWVbXSA9IFtcbiAgICAnT1BFTkFJX0FQSV9LRVknLFxuICAgICdBTlRIUk9QSUNfQVBJX0tFWScsXG4gICAgJ0RFRVBTRUVLX0FQSV9LRVknLFxuICAgICdYQUlfQVBJX0tFWScsXG4gICAgJ0dFTUlOSV9BUElfS0VZJyxcbiAgICAnVEFWSUxZX0FQSV9LRVknLFxuICAgICdTTVRQX1BBU1NXT1JEJyxcbiAgXTtcblxuICBsZXQgc2FuaXRpemVkID0gbWVzc2FnZTtcblxuICBmb3IgKGNvbnN0IG5hbWUgb2Ygc2VjcmV0TmFtZXMpIHtcbiAgICBjb25zdCB2YWx1ZSA9IHByb2Nlc3MuZW52W25hbWVdO1xuICAgIGlmICh2YWx1ZSAmJiB2YWx1ZS5sZW5ndGggPj0gOCkge1xuICAgICAgLy8gT25seSBzYW5pdGl6ZSBpZiB0aGUgdmFsdWUgYXBwZWFycyBpbiB0aGUgbWVzc2FnZVxuICAgICAgLy8gVXNlIGEgY2FzZS1zZW5zaXRpdmUgZXhhY3QgbWF0Y2ggdG8gYXZvaWQgZmFsc2UgcG9zaXRpdmVzXG4gICAgICBpZiAoc2FuaXRpemVkLmluY2x1ZGVzKHZhbHVlKSkge1xuICAgICAgICBzYW5pdGl6ZWQgPSBzYW5pdGl6ZWQuc3BsaXQodmFsdWUpLmpvaW4oJ1tSRURBQ1RFRF0nKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICByZXR1cm4gc2FuaXRpemVkO1xufVxuXG4vKipcbiAqIFNhbml0aXplIGFuIEVycm9yIG9iamVjdCdzIG1lc3NhZ2UgYW5kIHN0YWNrIHRyYWNlLlxuICogUmV0dXJucyBhIG5ldyBlcnJvciBtZXNzYWdlIHN0cmluZyB3aXRoIHNlY3JldHMgcmVtb3ZlZC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIHNhbml0aXplRXJyb3IoZXJyb3I6IEVycm9yKTogc3RyaW5nIHtcbiAgY29uc3QgbWVzc2FnZSA9IHNhbml0aXplRXJyb3JNZXNzYWdlKGVycm9yLm1lc3NhZ2UpO1xuICBjb25zdCBzdGFjayA9IGVycm9yLnN0YWNrID8gc2FuaXRpemVFcnJvck1lc3NhZ2UoZXJyb3Iuc3RhY2spIDogJyc7XG5cbiAgaWYgKHN0YWNrICYmIHN0YWNrICE9PSBtZXNzYWdlKSB7XG4gICAgcmV0dXJuIGAke21lc3NhZ2V9XFxuJHtzdGFja31gO1xuICB9XG4gIHJldHVybiBtZXNzYWdlO1xufVxuXG4vKipcbiAqIENyZWF0ZSBhIHNhZmUgZXJyb3IgbWVzc2FnZSBmcm9tIGFuIHVua25vd24gZXJyb3IgdmFsdWUuXG4gKiBFbnN1cmVzIG5vIHNlY3JldHMgYXJlIGxlYWtlZCByZWdhcmRsZXNzIG9mIGVycm9yIHR5cGUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBzYWZlRXJyb3JNZXNzYWdlKGVycm9yOiB1bmtub3duKTogc3RyaW5nIHtcbiAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICByZXR1cm4gc2FuaXRpemVFcnJvck1lc3NhZ2UoZXJyb3IubWVzc2FnZSk7XG4gIH1cbiAgaWYgKHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gc2FuaXRpemVFcnJvck1lc3NhZ2UoZXJyb3IpO1xuICB9XG4gIHJldHVybiAnVW5rbm93biBlcnJvciBvY2N1cnJlZCc7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsSUFBQUEsT0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsT0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBRixPQUFBO0FBNkJBLE1BQU1HLGtCQUFzQyxHQUFHLENBQzdDO0VBQ0VDLEVBQUUsRUFBRSxnQkFBZ0I7RUFDcEJDLEtBQUssRUFBRSxnQkFBZ0I7RUFDdkJDLFdBQVcsRUFBRSxpREFBaUQ7RUFDOURDLE1BQU0sRUFBRSxnQkFBZ0I7RUFDeEJDLFNBQVMsRUFBRSxDQUFDLFFBQVE7QUFDdEIsQ0FBQyxFQUNEO0VBQ0VKLEVBQUUsRUFBRSxtQkFBbUI7RUFDdkJDLEtBQUssRUFBRSxtQkFBbUI7RUFDMUJDLFdBQVcsRUFBRSwwREFBMEQ7RUFDdkVDLE1BQU0sRUFBRSxtQkFBbUI7RUFDM0JDLFNBQVMsRUFBRSxDQUFDLFdBQVc7QUFDekIsQ0FBQyxFQUNEO0VBQ0VKLEVBQUUsRUFBRSxrQkFBa0I7RUFDdEJDLEtBQUssRUFBRSxrQkFBa0I7RUFDekJDLFdBQVcsRUFBRSxtREFBbUQ7RUFDaEVDLE1BQU0sRUFBRSxrQkFBa0I7RUFDMUJDLFNBQVMsRUFBRSxDQUFD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