{"version":3,"names":["cov_1le2me12v6","actualCoverage","dirname","resolve","fileURLToPath","registerAgentProfile","hasAgentProfile","getAgentProfile","buildAgentRulebookPrompt","loadAgentRulebook","getAgentProfileManifest","PACKAGE_ROOT","s","import","meta","url","PROFILE_MANIFEST","DEFAULT_PROFILES","profiles","map","entry","f","normalizeProfileFromManifest","profile","name","b","resolveProfileConfig","workspaceContext","blueprint","envPrefix","toEnvPrefix","modelEnv","process","env","modelLocked","trim","length","model","defaultModel","systemPrompt","defaultSystemPrompt","providerEnv","providerLocked","isProviderValue","provider","defaultProvider","rulebook","loadRulebookMetadata","contextBlock","resolved","label","temperature","maxTokens","toUpperCase","replace","value","rulebookRef","manifest","inline","root","file","version","contractVersion","description","fallback","buildDefaultSystemPrompt","systemPromptConfig","manifestVersion","manifestContractVersion","promptConfig","type","content","template","rulebookPrompt","replacements","profile_name","rendered","_match","token","key","toLowerCase","test","merged","suffix","error","message","Error","String"],"sources":["config.ts"],"sourcesContent":["import { dirname, resolve } from 'node:path';\nimport { fileURLToPath } from 'node:url';\nimport type { AgentProfileEntry, AgentProfileManifest } from './contracts/v1/agentProfileManifest.js';\nimport type { ProviderId } from './core/types.js';\nimport {\n  registerAgentProfile,\n  hasAgentProfile,\n  getAgentProfile,\n  type AgentProfileBlueprint,\n  type ProfileName,\n} from './core/agentProfiles.js';\nimport { buildAgentRulebookPrompt, loadAgentRulebook } from './core/agentRulebook.js';\nimport { getAgentProfileManifest } from './core/agentProfileManifest.js';\n\nexport type { ProfileName } from './core/agentProfiles.js';\n\nexport interface ResolvedProfileConfig {\n  profile: ProfileName;\n  label: string;\n  provider: ProviderId;\n  model: string;\n  systemPrompt: string;\n  temperature?: number;\n  maxTokens?: number;\n  modelLocked: boolean;\n  providerLocked: boolean;\n  rulebook: ProfileRulebookMetadata | null;\n}\n\nexport interface ProfileRulebookMetadata {\n  profile: ProfileName;\n  label: string;\n  version: string;\n  contractVersion: string;\n  description?: string;\n  file: string;\n}\n\nconst PACKAGE_ROOT = resolve(dirname(fileURLToPath(import.meta.url)), '..');\n\nconst PROFILE_MANIFEST = getAgentProfileManifest();\n\nconst DEFAULT_PROFILES: AgentProfileBlueprint[] = PROFILE_MANIFEST.profiles.map((entry) =>\n  normalizeProfileFromManifest(entry, PROFILE_MANIFEST, PACKAGE_ROOT)\n);\n\nfor (const profile of DEFAULT_PROFILES) {\n  if (!hasAgentProfile(profile.name)) {\n    registerAgentProfile(profile);\n  }\n}\n\nexport function resolveProfileConfig(profile: ProfileName, workspaceContext: string | null): ResolvedProfileConfig {\n  const blueprint = getAgentProfile(profile);\n\n  const envPrefix = toEnvPrefix(blueprint.name);\n\n  const modelEnv = process.env[`${envPrefix}_MODEL`];\n  const modelLocked = typeof modelEnv === 'string' && modelEnv.trim().length > 0;\n  const model = modelLocked ? modelEnv!.trim() : blueprint.defaultModel;\n\n  const systemPrompt = process.env[`${envPrefix}_SYSTEM_PROMPT`] ?? blueprint.defaultSystemPrompt;\n\n  const providerEnv = process.env[`${envPrefix}_PROVIDER`];\n  const providerLocked = isProviderValue(providerEnv);\n  const provider = providerLocked ? providerEnv!.trim() : blueprint.defaultProvider;\n  const rulebook = loadRulebookMetadata(blueprint);\n\n  const contextBlock = workspaceContext?.trim()\n    ? `\\n\\nWorkspace context (auto-detected):\\n${workspaceContext.trim()}`\n    : '';\n\n  const resolved: ResolvedProfileConfig = {\n    profile,\n    label: blueprint.label,\n    provider,\n    model,\n    systemPrompt: `${systemPrompt.trim()}${contextBlock}`,\n    modelLocked,\n    providerLocked,\n    rulebook,\n  };\n\n  if (typeof blueprint.temperature === 'number') {\n    resolved.temperature = blueprint.temperature;\n  }\n  if (typeof blueprint.maxTokens === 'number') {\n    resolved.maxTokens = blueprint.maxTokens;\n  }\n\n  return resolved;\n}\n\nfunction toEnvPrefix(profile: ProfileName): string {\n  return profile\n    .trim()\n    .toUpperCase()\n    .replace(/[^A-Z0-9]/g, '_');\n}\n\nfunction isProviderValue(value: unknown): value is ProviderId {\n  return typeof value === 'string' && value.trim().length > 0;\n}\n\nfunction loadRulebookMetadata(profile: AgentProfileBlueprint): ProfileRulebookMetadata | null {\n  try {\n    // Check if rulebook is inline\n    const rulebookRef = profile.rulebook as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n    const manifest = rulebookRef.inline\n      ? loadAgentRulebook(profile.name, { inline: rulebookRef.inline })\n      : loadAgentRulebook(profile.name, {\n          root: PACKAGE_ROOT,\n          file: rulebookRef.file,\n        });\n\n    return {\n      profile: manifest.profile,\n      label: manifest.label ?? manifest.profile,\n      version: manifest.version,\n      contractVersion: manifest.contractVersion,\n      description: manifest.description ?? profile.rulebook.description,\n      file: rulebookRef.file ?? '[inline]',\n    };\n  } catch {\n    if (!profile.rulebook) {\n      return null;\n    }\n\n    const rulebookRef = profile.rulebook as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n    const fallback: ProfileRulebookMetadata = {\n      profile: profile.name,\n      label: profile.label,\n      version: rulebookRef.version ?? 'unknown',\n      contractVersion: rulebookRef.contractVersion ?? 'unknown',\n      description: rulebookRef.description,\n      file: rulebookRef.file ?? '[inline]',\n    };\n\n    return fallback;\n  }\n}\n\nfunction normalizeProfileFromManifest(\n  entry: AgentProfileEntry,\n  manifest: AgentProfileManifest,\n  root: string\n): AgentProfileBlueprint {\n  const defaultSystemPrompt = buildDefaultSystemPrompt(entry, root);\n\n  return {\n    name: entry.name,\n    label: entry.label,\n    description: entry.description,\n    defaultProvider: entry.defaultProvider,\n    defaultModel: entry.defaultModel,\n    systemPromptConfig: entry.systemPrompt,\n    defaultSystemPrompt,\n    temperature: entry.temperature,\n    maxTokens: entry.maxTokens,\n    rulebook: entry.rulebook,\n    manifestVersion: manifest.version,\n    manifestContractVersion: manifest.contractVersion,\n  };\n}\n\nfunction buildDefaultSystemPrompt(entry: AgentProfileEntry, root: string): string {\n  try {\n    const promptConfig = entry.systemPrompt;\n    if (promptConfig.type === 'literal') {\n      return promptConfig.content.trim();\n    }\n\n    const template = promptConfig.template?.trim() || '{{rulebook}}';\n    // Check if rulebook is inline\n    const rulebookRef = entry.rulebook as any; // eslint-disable-line @typescript-eslint/no-explicit-any\n    const rulebookPrompt = rulebookRef.inline\n      ? buildAgentRulebookPrompt(entry.name, { inline: rulebookRef.inline }).trim()\n      : buildAgentRulebookPrompt(entry.name, { root, file: rulebookRef.file }).trim();\n    const replacements: Record<string, string> = {\n      rulebook: rulebookPrompt,\n      profile: entry.label || entry.name,\n      profile_name: entry.name,\n    };\n\n    const rendered = template.replace(\n      /\\{\\{\\s*(rulebook|profile|profile_name)\\s*\\}\\}/gi,\n      (_match, token: string) => {\n        const key = token.toLowerCase() as keyof typeof replacements;\n        return replacements[key] ?? '';\n      }\n    );\n\n    if (/\\{\\{\\s*rulebook\\s*\\}\\}/i.test(template)) {\n      return rendered.trim();\n    }\n\n    const merged = rendered.trim();\n    const suffix = merged ? `\\n\\n${rulebookPrompt}` : rulebookPrompt;\n    return `${merged}${suffix}`.trim();\n  } catch (error) {\n    const message = error instanceof Error ? error.message : String(error);\n    throw new Error(`Failed to build system prompt for profile \"${entry.name}\": ${message}`);\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}