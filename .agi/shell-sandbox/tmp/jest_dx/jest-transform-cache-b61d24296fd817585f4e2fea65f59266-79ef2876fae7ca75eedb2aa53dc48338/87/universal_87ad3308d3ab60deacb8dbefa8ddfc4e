9da611e52e669713a154deeb19dd0dd2
/* istanbul ignore next */
function cov_1hg4a95uby() {
  var path = "/Users/bo/GitHub/agi-core-CLI-coding/src/runtime/universal.ts";
  var hash = "d4e8f3fe066ec219e05e8cd09d6698f1449609a7";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "/Users/bo/GitHub/agi-core-CLI-coding/src/runtime/universal.ts",
    statementMap: {
      "0": {
        start: {
          line: 23,
          column: 14
        },
        end: {
          line: 23,
          column: 67
        }
      },
      "1": {
        start: {
          line: 24,
          column: 15
        },
        end: {
          line: 30,
          column: 4
        }
      },
      "2": {
        start: {
          line: 32,
          column: 28
        },
        end: {
          line: 32,
          column: 59
        }
      },
      "3": {
        start: {
          line: 34,
          column: 2
        },
        end: {
          line: 36,
          column: 3
        }
      },
      "4": {
        start: {
          line: 35,
          column: 4
        },
        end: {
          line: 35,
          column: 46
        }
      },
      "5": {
        start: {
          line: 38,
          column: 18
        },
        end: {
          line: 38,
          column: 41
        }
      },
      "6": {
        start: {
          line: 40,
          column: 2
        },
        end: {
          line: 43,
          column: 4
        }
      }
    },
    fnMap: {
      "0": {
        name: "createUniversalRuntime",
        decl: {
          start: {
            line: 20,
            column: 22
          },
          end: {
            line: 20,
            column: 44
          }
        },
        loc: {
          start: {
            line: 22,
            column: 29
          },
          end: {
            line: 44,
            column: 1
          }
        },
        line: 22
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 23,
            column: 14
          },
          end: {
            line: 23,
            column: 67
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 23,
            column: 28
          },
          end: {
            line: 23,
            column: 46
          }
        }, {
          start: {
            line: 23,
            column: 49
          },
          end: {
            line: 23,
            column: 67
          }
        }],
        line: 23
      },
      "1": {
        loc: {
          start: {
            line: 32,
            column: 28
          },
          end: {
            line: 32,
            column: 59
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 32,
            column: 28
          },
          end: {
            line: 32,
            column: 53
          }
        }, {
          start: {
            line: 32,
            column: 57
          },
          end: {
            line: 32,
            column: 59
          }
        }],
        line: 32
      },
      "2": {
        loc: {
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 34,
            column: 2
          },
          end: {
            line: 36,
            column: 3
          }
        }, {
          start: {
            line: undefined,
            column: undefined
          },
          end: {
            line: undefined,
            column: undefined
          }
        }],
        line: 34
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0
    },
    f: {
      "0": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0]
    },
    _coverageSchema: "1a1c01bbd47fc00a2c39e90264f33305004495a9",
    hash: "d4e8f3fe066ec219e05e8cd09d6698f1449609a7"
  };
  var coverage = global[gcv] || (global[gcv] = {});
  if (!coverage[path] || coverage[path].hash !== hash) {
    coverage[path] = coverageData;
  }
  var actualCoverage = coverage[path];
  {
    // @ts-ignore
    cov_1hg4a95uby = function () {
      return actualCoverage;
    };
  }
  return actualCoverage;
}
cov_1hg4a95uby();
import { AgentHost } from './agentHost.js';
export async function createUniversalRuntime(options) {
  /* istanbul ignore next */
  cov_1hg4a95uby().f[0]++;
  const env =
  /* istanbul ignore next */
  (cov_1hg4a95uby().s[0]++, options.env ?
  /* istanbul ignore next */
  (cov_1hg4a95uby().b[0][0]++, {
    ...options.env
  }) :
  /* istanbul ignore next */
  (cov_1hg4a95uby().b[0][1]++, {
    ...process.env
  }));
  const host =
  /* istanbul ignore next */
  (cov_1hg4a95uby().s[1]++, new AgentHost({
    profile: options.profile,
    workspaceContext: options.workspaceContext,
    workingDir: options.workingDir,
    toolObserver: options.toolObserver,
    env
  }));
  const additionalModules =
  /* istanbul ignore next */
  (cov_1hg4a95uby().s[2]++,
  /* istanbul ignore next */
  (cov_1hg4a95uby().b[1][0]++, options.additionalModules) ??
  /* istanbul ignore next */
  (cov_1hg4a95uby().b[1][1]++, []));
  /* istanbul ignore next */
  cov_1hg4a95uby().s[3]++;
  if (additionalModules.length) {
    /* istanbul ignore next */
    cov_1hg4a95uby().b[2][0]++;
    cov_1hg4a95uby().s[4]++;
    await host.loadModules(additionalModules);
  } else
  /* istanbul ignore next */
  {
    cov_1hg4a95uby().b[2][1]++;
  }
  const session =
  /* istanbul ignore next */
  (cov_1hg4a95uby().s[5]++, await host.getSession());
  /* istanbul ignore next */
  cov_1hg4a95uby().s[6]++;
  return {
    host,
    session
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWhnNGE5NXVieSIsImFjdHVhbENvdmVyYWdlIiwiQWdlbnRIb3N0IiwiY3JlYXRlVW5pdmVyc2FsUnVudGltZSIsIm9wdGlvbnMiLCJmIiwiZW52IiwicyIsImIiLCJwcm9jZXNzIiwiaG9zdCIsInByb2ZpbGUiLCJ3b3Jrc3BhY2VDb250ZXh0Iiwid29ya2luZ0RpciIsInRvb2xPYnNlcnZlciIsImFkZGl0aW9uYWxNb2R1bGVzIiwibGVuZ3RoIiwibG9hZE1vZHVsZXMiLCJzZXNzaW9uIiwiZ2V0U2Vzc2lvbiJdLCJzb3VyY2VzIjpbInVuaXZlcnNhbC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZ2VudEhvc3QsIHR5cGUgQ2FwYWJpbGl0eU1vZHVsZSB9IGZyb20gJy4vYWdlbnRIb3N0LmpzJztcbmltcG9ydCB7IEFnZW50U2Vzc2lvbiB9IGZyb20gJy4vYWdlbnRTZXNzaW9uLmpzJztcbmltcG9ydCB0eXBlIHsgUHJvZmlsZU5hbWUgfSBmcm9tICcuLi9jb25maWcuanMnO1xuaW1wb3J0IHR5cGUgeyBUb29sUnVudGltZU9ic2VydmVyIH0gZnJvbSAnLi4vY29yZS90b29sUnVudGltZS5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pdmVyc2FsUnVudGltZU9wdGlvbnMge1xuICBwcm9maWxlOiBQcm9maWxlTmFtZTtcbiAgd29ya3NwYWNlQ29udGV4dDogc3RyaW5nIHwgbnVsbDtcbiAgd29ya2luZ0Rpcjogc3RyaW5nO1xuICB0b29sT2JzZXJ2ZXI/OiBUb29sUnVudGltZU9ic2VydmVyO1xuICBlbnY/OiBOb2RlSlMuUHJvY2Vzc0VudjtcbiAgYWRkaXRpb25hbE1vZHVsZXM/OiBDYXBhYmlsaXR5TW9kdWxlW107XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pdmVyc2FsUnVudGltZSB7XG4gIGhvc3Q6IEFnZW50SG9zdDtcbiAgc2Vzc2lvbjogQWdlbnRTZXNzaW9uO1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlVW5pdmVyc2FsUnVudGltZShcbiAgb3B0aW9uczogVW5pdmVyc2FsUnVudGltZU9wdGlvbnNcbik6IFByb21pc2U8VW5pdmVyc2FsUnVudGltZT4ge1xuICBjb25zdCBlbnYgPSBvcHRpb25zLmVudiA/IHsgLi4ub3B0aW9ucy5lbnYgfSA6IHsgLi4ucHJvY2Vzcy5lbnYgfTtcbiAgY29uc3QgaG9zdCA9IG5ldyBBZ2VudEhvc3Qoe1xuICAgIHByb2ZpbGU6IG9wdGlvbnMucHJvZmlsZSxcbiAgICB3b3Jrc3BhY2VDb250ZXh0OiBvcHRpb25zLndvcmtzcGFjZUNvbnRleHQsXG4gICAgd29ya2luZ0Rpcjogb3B0aW9ucy53b3JraW5nRGlyLFxuICAgIHRvb2xPYnNlcnZlcjogb3B0aW9ucy50b29sT2JzZXJ2ZXIsXG4gICAgZW52LFxuICB9KTtcblxuICBjb25zdCBhZGRpdGlvbmFsTW9kdWxlcyA9IG9wdGlvbnMuYWRkaXRpb25hbE1vZHVsZXMgPz8gW107XG5cbiAgaWYgKGFkZGl0aW9uYWxNb2R1bGVzLmxlbmd0aCkge1xuICAgIGF3YWl0IGhvc3QubG9hZE1vZHVsZXMoYWRkaXRpb25hbE1vZHVsZXMpO1xuICB9XG5cbiAgY29uc3Qgc2Vzc2lvbiA9IGF3YWl0IGhvc3QuZ2V0U2Vzc2lvbigpO1xuXG4gIHJldHVybiB7XG4gICAgaG9zdCxcbiAgICBzZXNzaW9uLFxuICB9O1xufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztJQWVZO0lBQUFBLGNBQUEsWUFBQUEsQ0FBQTtNQUFBLE9BQUFDLGNBQUE7SUFBQTtFQUFBO0VBQUEsT0FBQUEsY0FBQTtBQUFBO0FBQUFELGNBQUE7QUFmWixTQUFTRSxTQUFTLFFBQStCLGdCQUFnQjtBQW1CakUsT0FBTyxlQUFlQyxzQkFBc0JBLENBQzFDQyxPQUFnQyxFQUNMO0VBQUE7RUFBQUosY0FBQSxHQUFBSyxDQUFBO0VBQzNCLE1BQU1DLEdBQUc7RUFBQTtFQUFBLENBQUFOLGNBQUEsR0FBQU8sQ0FBQSxPQUFHSCxPQUFPLENBQUNFLEdBQUc7RUFBQTtFQUFBLENBQUFOLGNBQUEsR0FBQVEsQ0FBQSxVQUFHO0lBQUUsR0FBR0osT0FBTyxDQUFDRTtFQUFJLENBQUM7RUFBQTtFQUFBLENBQUFOLGNBQUEsR0FBQVEsQ0FBQSxVQUFHO0lBQUUsR0FBR0MsT0FBTyxDQUFDSDtFQUFJLENBQUM7RUFDakUsTUFBTUksSUFBSTtFQUFBO0VBQUEsQ0FBQVYsY0FBQSxHQUFBTyxDQUFBLE9BQUcsSUFBSUwsU0FBUyxDQUFDO0lBQ3pCUyxPQUFPLEVBQUVQLE9BQU8sQ0FBQ08sT0FBTztJQUN4QkMsZ0JBQWdCLEVBQUVSLE9BQU8sQ0FBQ1EsZ0JBQWdCO0lBQzFDQyxVQUFVLEVBQUVULE9BQU8sQ0FBQ1MsVUFBVTtJQUM5QkMsWUFBWSxFQUFFVixPQUFPLENBQUNVLFlBQVk7SUFDbENSO0VBQ0YsQ0FBQyxDQUFDO0VBRUYsTUFBTVMsaUJBQWlCO0VBQUE7RUFBQSxDQUFBZixjQUFBLEdBQUFPLENBQUE7RUFBRztFQUFBLENBQUFQLGNBQUEsR0FBQVEsQ0FBQSxVQUFBSixPQUFPLENBQUNXLGlCQUFpQjtFQUFBO0VBQUEsQ0FBQWYsY0FBQSxHQUFBUSxDQUFBLFVBQUksRUFBRTtFQUFDO0VBQUFSLGNBQUEsR0FBQU8sQ0FBQTtFQUUxRCxJQUFJUSxpQkFBaUIsQ0FBQ0MsTUFBTSxFQUFFO0lBQUE7SUFBQWhCLGNBQUEsR0FBQVEsQ0FBQTtJQUFBUixjQUFBLEdBQUFPLENBQUE7SUFDNUIsTUFBTUcsSUFBSSxDQUFDTyxXQUFXLENBQUNGLGlCQUFpQixDQUFDO0VBQzNDLENBQUM7RUFBQTtFQUFBO0lBQUFmLGNBQUEsR0FBQVEsQ0FBQTtFQUFBO0VBRUQsTUFBTVUsT0FBTztFQUFBO0VBQUEsQ0FBQWxCLGNBQUEsR0FBQU8sQ0FBQSxPQUFHLE1BQU1HLElBQUksQ0FBQ1MsVUFBVSxDQUFDLENBQUM7RUFBQztFQUFBbkIsY0FBQSxHQUFBTyxDQUFBO0VBRXhDLE9BQU87SUFDTEcsSUFBSTtJQUNKUTtFQUNGLENBQUM7QUFDSCIsImlnbm9yZUxpc3QiOltdfQ==