{"version":3,"names":["_plainMode","isPlainOutputMode","envValue","process","env","undefined","envEnabled","includes","toLowerCase","isTty","Boolean","stdout","isTTY","stdin","isCi","setPlainOutputMode","enabled","resetPlainOutputMode"],"sources":["outputMode.ts"],"sourcesContent":["/**\n * Output mode configuration for terminal UI\n *\n * Controls whether to use decorative box-drawing characters or plain text.\n * Plain mode outputs clipboard-friendly text without Unicode borders.\n * Automatically enabled in CI or non-interactive shells; override with EROSOLAR_PLAIN_OUTPUT=true.\n */\n\nlet _plainMode: boolean | null = null;\n\n/**\n * Check if plain output mode is enabled.\n * Plain mode outputs text without box-drawing characters for clean clipboard copying.\n */\nexport function isPlainOutputMode(): boolean {\n  if (_plainMode !== null) {\n    return _plainMode;\n  }\n\n  const envValue = process.env['EROSOLAR_PLAIN_OUTPUT'];\n  if (envValue !== undefined) {\n    const envEnabled = ['true', '1', 'yes', 'on'].includes(envValue.toLowerCase());\n    if (envEnabled) {\n      _plainMode = true;\n      return _plainMode;\n    }\n  }\n\n  const isTty = Boolean(process.stdout?.isTTY && process.stdin?.isTTY);\n  const isCi = Boolean(process.env['CI']);\n\n  // Default to plain logging in non-interactive/CI environments; rich UI only in TTY sessions.\n  _plainMode = !isTty || isCi;\n\n  return _plainMode;\n}\n\n/**\n * Override the plain output mode setting (useful for testing)\n */\nexport function setPlainOutputMode(enabled: boolean): void {\n  _plainMode = enabled;\n}\n\n/**\n * Reset plain output mode to check environment variable again\n */\nexport function resetPlainOutputMode(): void {\n  _plainMode = null;\n}\n"],"mappings":";;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,UAA0B,GAAG,IAAI;;AAErC;AACA;AACA;AACA;AACO,SAASC,iBAAiBA,CAAA,EAAY;EAC3C,IAAID,UAAU,KAAK,IAAI,EAAE;IACvB,OAAOA,UAAU;EACnB;EAEA,MAAME,QAAQ,GAAGC,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAC;EACrD,IAAIF,QAAQ,KAAKG,SAAS,EAAE;IAC1B,MAAMC,UAAU,GAAG,CAAC,MAAM,EAAE,GAAG,EAAE,KAAK,EAAE,IAAI,CAAC,CAACC,QAAQ,CAACL,QAAQ,CAACM,WAAW,CAAC,CAAC,CAAC;IAC9E,IAAIF,UAAU,EAAE;MACdN,UAAU,GAAG,IAAI;MACjB,OAAOA,UAAU;IACnB;EACF;EAEA,MAAMS,KAAK,GAAGC,OAAO,CAACP,OAAO,CAACQ,MAAM,EAAEC,KAAK,IAAIT,OAAO,CAACU,KAAK,EAAED,KAAK,CAAC;EACpE,MAAME,IAAI,GAAGJ,OAAO,CAACP,OAAO,CAACC,GAAG,CAAC,IAAI,CAAC,CAAC;;EAEvC;EACAJ,UAAU,GAAG,CAACS,KAAK,IAAIK,IAAI;EAE3B,OAAOd,UAAU;AACnB;;AAEA;AACA;AACA;AACO,SAASe,kBAAkBA,CAACC,OAAgB,EAAQ;EACzDhB,UAAU,GAAGgB,OAAO;AACtB;;AAEA;AACA;AACA;AACO,SAASC,oBAAoBA,CAAA,EAAS;EAC3CjB,UAAU,GAAG,IAAI;AACnB","ignoreList":[]}