e3f51da88cfa643828981ef856d36eef
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences from text to prevent injection */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    return text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      const pending = this.consumePendingInsertForPaste();
      // Extract content after the start marker
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume any pending insert buffer to prevent leak
      const pending = this.consumePendingInsertForPaste();
      this.pasteBuffer = pending; // Include any chars that arrived before bracketed paste started
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
    }
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // For prompt events, ensure the overlay is rendered immediately
        // This guarantees prompts are visible before async processing continues
        if (event.type === 'prompt') {
          if (this.output.isTTY) {
            this.allowPromptRender = true;
            this.renderPrompt();
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        return event.content;
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.5) {
      return true; // Less than 50% letters = likely garbage
    }
    return false;
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.tool(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.tool(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "⏺ [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${_theme.theme.tool(`[${toolName}]`)}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${_theme.theme.tool(`[${toolName}]`)} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParams(toolName, params, maxWidth);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping
   */
  formatToolParams(toolName, params, maxWidth) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${_theme.theme.tool(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.tool(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Parse common result patterns for summary
    const lineMatch = content.match(/(\d+)\s*lines?/i);
    const fileMatch = content.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = content.match(/read.*?(\d+)\s*lines?/i);
    let summary;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (content.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else {
      // Use content directly, truncated if needed
      summary = content.length > 40 ? content.slice(0, 37) + '…' : content;
    }
    const coloredSummary = this.colorResultSummary(summary);
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.info ?? (value => value)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   */
  expandLastToolResult() {
    if (!this.lastToolResult) {
      return false;
    }
    const rendered = this.wrapBulletText(this.lastToolResult, {
      label: 'tool',
      labelColor: _theme.theme.info
    });
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 80); // ~12 FPS for smooth spinner animation
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }

      // Clear all previous lines
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        this.write('\r');
        this.write(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          this.write('\x1b[B');
        }
      }

      // If new height is greater, we need to add blank lines
      const extraLines = height - this.lastOverlayHeight;
      if (extraLines > 0) {
        for (let i = 0; i < extraLines; i++) {
          this.write('\n');
        }
      }

      // Move back to top of where overlay should start
      const moveBackUp = Math.max(0, height - 1);
      if (moveBackUp > 0) {
        this.write(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      this.write(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        this.write('\n');
      }
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      this.write(`\x1b[${linesToMoveUp}A`);
    }
    this.write(`\x1b[${promptCol}G`);
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    const inputLines = inputLine.split('\n');
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = Math.min(100, Math.max(0, this.statusMeta.contextPercent));
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = barWidth - filled;
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = used < 50 ? _theme.theme.success : used < 80 ? _theme.theme.warning : _theme.theme.error;
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Display the pasted content in chat, then submit
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;
    const now = Date.now();
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl9kZWJ1Z0xvZ2dlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0Iiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJlbGFwc2VkQ29sb3JGcmFtZSIsImVsYXBzZWRDb2xvckZyYW1lcyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJjbGFtcEN1cnNvciIsIk1hdGgiLCJtYXgiLCJtaW4iLCJsZW5ndGgiLCJhcHBlbmRUb1Bhc3RlQnVmZmVyIiwidGV4dCIsInBhc3RlQnVmZmVyT3ZlcmZsb3ciLCJjdXJyZW50IiwicGFzdGVCdWZmZXIiLCJwbGFpblBhc3RlQnVmZmVyIiwicmVtYWluaW5nIiwibWF4UGFzdGVCdWZmZXJTaXplIiwidG9BZGQiLCJzbGljZSIsInNhbml0aXplUGFzdGVDb250ZW50IiwicmVwbGFjZSIsImZvcm1hdEhvdGtleSIsImNvbWJvIiwidHJpbSIsInRvVXBwZXJDYXNlIiwibGFzdFByb21wdEV2ZW50IiwicHJvbXB0SGVpZ2h0IiwibGFzdE92ZXJsYXlIZWlnaHQiLCJpbmxpbmVQYW5lbCIsImhhc0NvbnZlcnNhdGlvbkNvbnRlbnQiLCJpc1Byb21wdEFjdGl2ZSIsImlucHV0UmVuZGVyT2Zmc2V0IiwicGxhaW5QYXN0ZUlkbGVNcyIsInBsYWluUGFzdGVXaW5kb3dNcyIsInBsYWluUGFzdGVUcmlnZ2VyQ2hhcnMiLCJwbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnMiLCJjdXJzb3JWaXNpYmxlQ29sdW1uIiwiaW5CcmFja2V0ZWRQYXN0ZSIsImluUGxhaW5QYXN0ZSIsInBsYWluUGFzdGVUaW1lciIsInBhc3RlQnVyc3RXaW5kb3dTdGFydCIsInBhc3RlQnVyc3RDaGFyQ291bnQiLCJwbGFpblJlY2VudENodW5rcyIsInBlbmRpbmdJbnNlcnRCdWZmZXIiLCJwZW5kaW5nSW5zZXJ0VGltZXIiLCJwZW5kaW5nSW5zZXJ0RGVsYXlNcyIsImxhc3RSZW5kZXJlZEV2ZW50S2V5IiwibGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUiLCJoYXNSZW5kZXJlZFByb21wdCIsImhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkiLCJsYXN0T3ZlcmxheSIsImFsbG93UHJvbXB0UmVuZGVyIiwicHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkIiwic2VjcmV0TW9kZSIsInBlbmRpbmdSZW5kZXIiLCJsYXN0UmVuZGVyVGltZSIsInJlbmRlclRocm90dGxlTXMiLCJyZW5kZXJUaHJvdHRsZVRpbWVyIiwiZGlzcG9zZWQiLCJib3VuZFJlc2l6ZUhhbmRsZXIiLCJib3VuZEtleXByZXNzSGFuZGxlciIsImlucHV0Q2FwdHVyZSIsImNvbnN0cnVjdG9yIiwib3V0cHV0IiwicHJvY2VzcyIsInN0ZG91dCIsImlucHV0Iiwic3RkaW4iLCJfb3B0aW9ucyIsImludGVyYWN0aXZlIiwiQm9vbGVhbiIsImlzVFRZIiwiZW52IiwicGxhaW5Nb2RlIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJjb250ZXh0TWV0ZXIiLCJDb250ZXh0TWV0ZXIiLCJybCIsImNyZWF0ZUludGVyZmFjZSIsInRlcm1pbmFsIiwicHJvbXB0IiwidGFiU2l6ZSIsInNldFByb21wdCIsInVwZGF0ZVRlcm1pbmFsU2l6ZSIsInJlbmRlclByb21wdCIsIm9uIiwic2V0dXBJbnB1dEhhbmRsZXJzIiwiaW5pdGlhbGl6ZSIsImNsZWFyUHJvbXB0QXJlYSIsIndyaXRlIiwiY2xlYW51cCIsImNhbmNlbElucHV0Q2FwdHVyZSIsIkVycm9yIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclRpbWVvdXQiLCJjbGVhckludGVydmFsIiwic3RvcCIsImRpc3Bvc2UiLCJkaXNwb3NlQW5pbWF0aW9ucyIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2xvc2UiLCJzZXRSYXdNb2RlIiwic3VzcGVuZFByb21wdFJlbmRlcmluZyIsInJlc3VtZVByb21wdFJlbmRlcmluZyIsInJlbmRlciIsImVtaXRLZXlwcmVzc0V2ZW50cyIsInN0ciIsImtleSIsImhhbmRsZUtleXByZXNzIiwiZW1pdElucHV0Q2hhbmdlIiwicGF5bG9hZCIsImVtaXQiLCJub3JtYWxpemVkS2V5IiwicGFyc2VFc2NhcGVTZXF1ZW5jZSIsImtleUZvclBhc3RlIiwic2VxdWVuY2UiLCJoYW5kbGVCcmFja2V0ZWRQYXN0ZSIsImhhbmRsZVBsYWluUGFzdGUiLCJtYWNPcHRpb25DaGFycyIsImxldHRlciIsImN0cmwiLCJuYW1lIiwiY2xlYXJCdWZmZXIiLCJpc0N0cmxTaGlmdCIsImxvd2VyTGV0dGVyIiwidG9Mb3dlckNhc2UiLCJ1cHBlckxldHRlciIsInNoaWZ0IiwibWV0YSIsInNlcSIsInRlc3QiLCJoYW5kbGVDdHJsU2hpZnRUb2dnbGUiLCJoYWRCdWZmZXIiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZSIsImFwcGx5U3VnZ2VzdGlvbiIsInN0YXJ0c1dpdGgiLCJzYWZlSW5kZXgiLCJjb21tYW5kIiwic3VibWl0VGV4dCIsInVwZGF0ZVN1Z2dlc3Rpb25zIiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBhc3RlU3RhcnRNYXJrZXIiLCJwYXN0ZUVuZE1hcmtlciIsImluY2x1ZGVzIiwicGVuZGluZyIsInN0YXJ0SWR4IiwiaW5kZXhPZiIsImNvbnRlbnQiLCJlbmRJZHgiLCJjb21taXRQYXN0ZUJ1ZmZlciIsImNvbnRlbnRCZWZvcmUiLCJzYW5pdGl6ZWQiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJzaG91bGRUcmltIiwib3B0aW9ucyIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsInJlc29sdmUiLCJub3JtYWxpemVkIiwiZGlzcGxheVVzZXJQcm9tcHQiLCJmaXJzdFNwYWNlIiwiaGFzQXJnVGV4dCIsImN1cnNvclNsaWNlIiwiY29tbWFuZFNsaWNlIiwiZmFsbGJhY2tTbGljZSIsInBhcnRpYWwiLCJ0cmltRW5kIiwicHJldmlvdXMiLCJjbWQiLCJpZHgiLCJmaW5kSW5kZXgiLCJzIiwic2V0QXZhaWxhYmxlQ29tbWFuZHMiLCJjb21tYW5kcyIsInN1Ym1pdCIsInNlbGVjdGVkIiwiZGlyZWN0aW9uIiwiY3VycmVudEluZGV4IiwibmV4dCIsImNsYW1wZWQiLCJhZGRFdmVudCIsInR5cGUiLCJsb2dEZWJ1ZyIsIm5vcm1hbGl6ZUV2ZW50VHlwZSIsImZvcm1hdHRlZCIsImZvcm1hdENvbnRlbnQiLCJyYXdUeXBlIiwidGltZXN0YW1wIiwiZXZlbnQiLCJpbnNlcnRJbmRleCIsInNwbGljZSIsInF1ZXVlTWljcm90YXNrIiwicHJvY2Vzc1F1ZXVlIiwicmVuZGVyUHJvbXB0T3ZlcmxheSIsImltbWVkaWF0ZSIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNvYWxlc2NlZCIsImNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzIiwicmVuZGVyRXZlbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZWxheSIsImlzTWVyZ2VhYmxlIiwidGFyZ2V0IiwiaXNDb21wYWN0ZWQiLCJuZWVkc1NlcGFyYXRvciIsImZsdXNoRXZlbnRzIiwidGltZW91dE1zIiwic3RhcnQiLCJmb3JtYXR0ZWRQbGFpbiIsInNpZ25hdHVyZSIsImxpbmUiLCJ0aGVtZSIsInByaW1hcnkiLCJpc0dhcmJhZ2VPdXRwdXQiLCJjdXJhdGVkIiwiY3VyYXRlUmVhc29uaW5nQ29udGVudCIsInNob3VsZFJlbmRlclRob3VnaHQiLCJmb3JtYXRUaGlua2luZ0Jsb2NrIiwiZm9ybWF0Q29tcGFjdFRvb2xDYWxsIiwiZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQiLCJ3cmFwQnVsbGV0VGV4dCIsImxhYmVsIiwibGFiZWxDb2xvciIsIndhcm5pbmciLCJpbmZvIiwiaXNFcnJvciIsInVuZGVmaW5lZCIsImFscGhhQ291bnQiLCJtYXRjaCIsInRvdGFsQ291bnQiLCJsaW1pdGVkIiwibWF4U2VnbWVudHMiLCJzZWdtZW50cyIsImZsYXRNYXAiLCJzZWVuIiwiZGVkdXBlZCIsInNlZ21lbnQiLCJub3JtYWxpemVkU2VnbWVudCIsImFkZCIsInByaW9yaXRpemVkIiwicHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzIiwibGltaXRlZFNlbGVjdGlvbiIsImJ1bGxldGVkIiwiZW5zdXJlUmVhc29uaW5nQnVsbGV0IiwibG9va3NTdHJ1Y3R1cmVkVGhvdWdodCIsInNjb3JlZCIsImluZGV4Iiwic2NvcmUiLCJyZWFzb25pbmdTaWduYWxTY29yZSIsImhhc1NpZ25hbCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJsb3dlciIsImFjdGlvbktleXdvcmRzIiwia2V5d29yZCIsImZvcm1hdENsYXVkZUNvZGVCbG9jayIsImJ1bGxldCIsInJlc3VsdCIsImxpbmVJZHgiLCJ3b3JkcyIsImN1cnJlbnRMaW5lIiwid29yZCIsInByZWZpeCIsInRyaW1TdGFydCIsImZvcm1hdFRvb2xDYWxsIiwibmFtZU1hdGNoIiwidG9vbCIsInRvb2xOYW1lIiwiYXJnc1N0ciIsInByZWZpeExlbiIsImluZGVudCIsInJlcGVhdCIsImFyZ3MiLCJwYXJzZVRvb2xBcmdzIiwiYXJnIiwiYXJnVGV4dCIsInVpIiwibXV0ZWQiLCJmb3JtYXRBcmdWYWx1ZSIsInZhbHVlIiwic2VwYXJhdG9yIiwidGVzdExpbmUiLCJzdHJpcEFuc2kiLCJyZWdleCIsImV4ZWMiLCJpc1F1b3RlZCIsImlubmVyIiwibG93ZXJLZXkiLCJzaG91bGRQcmVzZXJ2ZSIsIm1heExlbiIsInRydW5jYXRlZCIsImZvcm1hdFRvb2xSZXN1bHQiLCJzdW1tYXJ5TWF0Y2giLCJwcmV2aWV3IiwicGFyYW1zIiwicGFyc2VUb29sUGFyYW1zIiwiZm9ybWF0VG9vbFBhcmFtcyIsImZpcnN0UGFyYW0iLCJwYXJhbSIsImNvbG9yZWRWYWx1ZSIsImNvbG9yUGFyYW1WYWx1ZSIsInBhcmFtVGV4dCIsInBhcmFtU3RyIiwicGxhaW5MZW5ndGgiLCJ2aXNpYmxlTGVuZ3RoIiwiZXh0cmFjdFRvb2xTdW1tYXJ5IiwicGF0aE1hdGNoIiwicGF0aCIsImZpbGUiLCJjbWRNYXRjaCIsImxpbmVNYXRjaCIsImZpbGVNYXRjaCIsInJlYWRNYXRjaCIsInN1bW1hcnkiLCJjb2xvcmVkU3VtbWFyeSIsImNvbG9yUmVzdWx0U3VtbWFyeSIsInN1Y2Nlc3MiLCJmb3JtYXRDb21wYWN0UmVzcG9uc2UiLCJjbGVhbmVkIiwiYXZhaWxhYmxlV2lkdGgiLCJsYWJlbFRleHQiLCJidWxsZXRQcmVmaXgiLCJmaXJzdE5vbkVtcHR5IiwicmF3TGluZSIsImNhbmRpZGF0ZSIsInByZWZpeExlbmd0aCIsIndyYXBUZXh0VG9XaWR0aCIsIndpZHRoIiwiZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCIsImVsYXBzZWQiLCJmbG9vciIsIm1pbnMiLCJzZWNzIiwiZm9ybWF0Q29tcGFjdEJsb2NrIiwicGFkZGluZyIsImxlZnRQYWQiLCJyaWdodFBhZCIsImNlaWwiLCJhZGRDb21wYWN0QmxvY2siLCJmb3JtYXR0ZWRDb250ZW50IiwiZXhwYW5kTGFzdFRvb2xSZXN1bHQiLCJyZW5kZXJlZCIsInNldE1vZGUiLCJ3YXNTdHJlYW1pbmciLCJzdGFydFNwaW5uZXJBbmltYXRpb24iLCJzdG9wU3Bpbm5lckFuaW1hdGlvbiIsInNldEludGVydmFsIiwic3Bpbm5lckZyYW1lcyIsImJyYWlsbGUiLCJzZXRBY3Rpdml0eSIsInVwZGF0ZVN0cmVhbWluZ1Rva2VucyIsInRva2VucyIsImZvcm1hdFRva2VuQ291bnQiLCJTdHJpbmciLCJ0b0ZpeGVkIiwicm91bmQiLCJnZXRNb2RlIiwidXBkYXRlU3RhdHVzIiwidXBkYXRlU3RhdHVzQnVuZGxlIiwibWFpbiIsIm92ZXJyaWRlIiwic3RyZWFtaW5nIiwic3RhdHVzIiwicHJldlN0cmVhbWluZyIsImNoYW5nZWQiLCJtYWluQ2hhbmdlZCIsIm92ZXJyaWRlQ2hhbmdlZCIsInN0cmVhbWluZ0NoYW5nZWQiLCJzdHJlYW1pbmdJbnRyb2R1Y2UiLCJzdHJlYW1pbmdDbGVhcmVkIiwib25seVN0cmVhbWluZ0NoYW5nZWQiLCJza2lwU3RyZWFtaW5nUmVuZGVyIiwic2hvdWxkUmVuZGVyIiwidXBkYXRlU3RhdHVzTWV0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVNb2RlVG9nZ2xlcyIsInN0YXRlIiwidmVyaWZpY2F0aW9uSG90a2V5IiwidGhpbmtpbmdIb3RrZXkiLCJjcml0aWNhbEFwcHJvdmFsSG90a2V5IiwiYXV0b0NvbnRpbnVlSG90a2V5IiwiZHVhbFJsSG90a2V5IiwiZGVidWdIb3RrZXkiLCJjbGVhciIsInNldElubGluZVBhbmVsIiwiaGFzQ29udGVudCIsImxpbWl0SW5saW5lUGFuZWwiLCJzdXBwb3J0c0lubGluZVBhbmVsIiwiY2xlYXJJbmxpbmVQYW5lbCIsIm1heExpbmVzIiwib3ZlcmZsb3ciLCJpbmRpY2F0b3IiLCJ0YWlsQ291bnQiLCJ0YWlsIiwib3ZlcmxheSIsImJ1aWxkT3ZlcmxheUxpbmVzIiwicmVuZGVyZWRMaW5lcyIsInRydW5jYXRlTGluZSIsInByb21wdEluZGV4IiwiaGVpZ2h0IiwibGluZXNUb1RvcCIsImV4dHJhTGluZXMiLCJtb3ZlQmFja1VwIiwicHJvbXB0Q29sIiwibGluZXNUb01vdmVVcCIsImRpdmlkZXIiLCJmYWxsYmFja0FjdGl2aXR5IiwicmF3Iiwic3Bpbm5lckNoYXJzIiwic3Bpbm5lckNoYXIiLCJzdGFyQ2hhciIsInNwaW5uZXJEZWNvcmF0ZWQiLCJhY2NlbnQiLCJnZW5lcmljQWN0aXZpdGllcyIsImRpc3BsYXlBY3Rpdml0eSIsIm5lZWRzRWxsaXBzaXMiLCJlbGFwc2VkQ29sb3IiLCJjaGFsayIsImhleCIsInBhcnRzIiwiYWN0aXZpdHlUZXh0IiwiYWN0aXZpdHlMaW5lIiwid3JhcHBlZCIsIndyYXBPdmVybGF5TGluZSIsImlucHV0TGluZSIsImJ1aWxkSW5wdXRMaW5lIiwiaW5wdXRMaW5lcyIsInBhbmVsTGluZSIsInN1Z2dlc3Rpb24iLCJpc0FjdGl2ZSIsIm1hcmtlciIsImNtZFRleHQiLCJkZXNjVGV4dCIsImRlc2NyaXB0aW9uIiwibW9kZWxDb250ZXh0TGluZSIsImJ1aWxkTW9kZWxDb250ZXh0TGluZSIsImNocm9tZUxpbmVzIiwiYnVpbGRDaHJvbWVMaW5lcyIsImNocm9tZUxpbmUiLCJ0b2dnbGVMaW5lcyIsImJ1aWxkSW5saW5lVG9nZ2xlTGluZSIsInRvZ2dsZUxpbmUiLCJsZWdlbmRMaW5lcyIsImJ1aWxkVG9nZ2xlTGVnZW5kIiwibGVnZW5kIiwibW9kZWwiLCJwcm92aWRlciIsImNvbnRleHRQZXJjZW50IiwidXNlZCIsImJhcldpZHRoIiwiZmlsbGVkIiwiZW1wdHkiLCJiYXJDb2xvciIsImJhciIsImF1dG9Db250aW51ZUFjdGl2ZSIsInZlcmlmaWNhdGlvbkFjdGl2ZSIsImFwcHJvdmFsTW9kZSIsInRoaW5raW5nTGFiZWwiLCJ0aGlua2luZ01vZGVMYWJlbCIsInRvZ2dsZXMiLCJybE9uIiwicmxJY29uIiwicmxTdGF0dXMiLCJybEV4cGxhaW4iLCJjb250SWNvbiIsImNvbnRTdGF0dXMiLCJjb250RXhwbGFpbiIsInZlcmlmeUljb24iLCJ2ZXJpZnlTdGF0dXMiLCJ2ZXJpZnlFeHBsYWluIiwiYXBwckljb24iLCJhcHByU3RhdHVzIiwiYXBwckV4cGxhaW4iLCJ0aGlua2luZ0lzRGVlcCIsInRoaW5rSWNvbiIsInRoaW5rU3RhdHVzIiwidGhpbmtFeHBsYWluIiwiZGVidWdBY3RpdmUiLCJkZWJ1Z0ljb24iLCJkZWJ1Z1N0YXR1cyIsImRlYnVnRXhwbGFpbiIsIndyYXBTZWdtZW50cyIsInN0YXR1c0xpbmVzIiwiYnVpbGRTdGF0dXNCbG9jayIsIm1ldGFMaW5lcyIsImJ1aWxkTWV0YUJsb2NrIiwiYWJicmV2aWF0ZVBhdGgiLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwicHJvZmlsZSIsImZvcm1hdE1ldGFTZWdtZW50Iiwid29ya3NwYWNlIiwiZGlyZWN0b3J5Iiwid3JpdGVzIiwidG9vbFN1bW1hcnkiLCJzZXNzaW9uTGFiZWwiLCJ2ZXJzaW9uIiwic3RhdHVzZXMiLCJhcnIiLCJjb2xvcml6ZXIiLCJidWlsZENvbnRyb2xMaW5lcyIsImJ1aWxkVG9nZ2xlTGluZSIsInNob3J0Y3V0TGluZSIsImJ1aWxkU2hvcnRjdXRMaW5lIiwiYnVpbGRDb21wYWN0VG9nZ2xlTGluZSIsImVkaXRJY29uIiwiZWRpdFN0YXRlIiwiY3ljbGVIaW50IiwiYWRkVG9nZ2xlIiwiaG90a2V5IiwiYXV0b1ZlcmlmeUFjdGl2ZSIsInZlcmlmeVZhbHVlIiwiYXBwcm92YWxBY3RpdmUiLCJ0aGlua2luZ0xhYmVsUmF3IiwidGhpbmtpbmdBY3RpdmUiLCJkdWFsUmxBY3RpdmUiLCJtb2RlVmFsdWUiLCJidWlsZExpbmUiLCJpbmNsdWRlSG90a2V5cyIsInRvZ2dsZSIsInN0YXRlVGV4dCIsImhvdGtleVRleHQiLCJhZGRIb3RrZXkiLCJwcm9tcHRXaWR0aCIsImNvbnRpbnVhdGlvbkluZGVudCIsImNvbnRpbnVhdGlvbldpZHRoIiwicmF3QnVmZmVyIiwiYnVmZmVyTGluZXMiLCJ0b3RhbENoYXJzIiwiY3Vyc29yTGluZSIsImN1cnNvckNvbCIsImZvdW5kQ3Vyc29yIiwibGluZUluZGV4IiwiaXNGaXJzdExvZ2ljYWxMaW5lIiwibGluZVN0YXJ0Q2hhciIsImZpcnN0TGluZVdpZHRoIiwiY29udExpbmVXaWR0aCIsImlzRmlyc3REaXNwbGF5TGluZSIsImRpc3BsYXlMaW5lIiwiY2h1bmtTdGFydCIsImNodW5rRW5kIiwib2Zmc2V0SW5DaHVuayIsImxhc3RMaW5lIiwidGFyZ2V0TGluZSIsInZpc2libGVQYXJ0IiwiY3Vyc29yUG9zIiwiYmVmb3JlIiwiY2hhckF0IiwiYWZ0ZXIiLCJ0ZXh0UGFydCIsImJ1aWxkSW5wdXRXaW5kb3ciLCJhdmFpbGFibGUiLCJjdXJzb3JJbmRleCIsIm9mZnNldCIsIm1heE9mZnNldCIsIndpbmRvdyIsImRpc3BsYXkiLCJjaGFyIiwiY3Vyc29ySW5XaW5kb3ciLCJjYXB0dXJlSW5wdXQiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzZXRCdWZmZXIiLCJyZWFzb24iLCJjYXB0dXJlIiwibGltaXQiLCJ2aXNpYmxlIiwidG9rZW4iLCJzbGljZUxlbmd0aCIsImdldEJ1ZmZlciIsImdldEN1cnNvciIsInNldEJ1ZmZlciIsInJlcXVlc3RlZEN1cnNvciIsInNldFNlY3JldE1vZGUiLCJlbmFibGVkIiwic2V0TW9kZVN0YXR1cyIsInNob3dDb21wYWN0aW5nU3RhdHVzIiwiaGlkZUNvbXBhY3RpbmdTdGF0dXMiLCJlbWl0UHJvbXB0IiwicHVzaFByb21wdEV2ZW50IiwibXMiLCJkYXRhIiwiY29sdW1ucyIsImV4cG9ydHMiXSwic291cmNlcyI6WyJVbmlmaWVkVUlSZW5kZXJlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaWZpZWRVSVJlbmRlcmVyIC0gQ2xhdWRlIENvZGUgc3R5bGUgbWluaW1hbGlzdCB0ZXJtaW5hbCBVSS5cbiAqXG4gKiBHb2FsczpcbiAqIC0gU2luZ2xlIGV2ZW50IHBpcGVsaW5lIGZvciBldmVyeXRoaW5nIChwcm9tcHQg4oaSIHRob3VnaHQg4oaSIHRvb2wvYnVpbGQvdGVzdCDihpIgcmVzcG9uc2UpLlxuICogLSBQaW5uZWQgc3RhdHVzL21ldGEgb25seSAobmV2ZXIgaW4gc2Nyb2xsYmFjaykuXG4gKiAtIFNjcm9sbGJhY2sgb25seSBzaG93cyBldmVudHM7IG5vIGR1cGxpY2F0ZSBzdGF0dXMgbGlrZSBcIldvcmtpbmcgb24geW91ciByZXF1ZXN0XCIgb3IgXCJSZWFkeSBmb3IgcHJvbXB0c1wiLlxuICogLSBTdHJlYW1pbmc6IGZpcnN0IGNodW5rIHNldHMgYSBvbmUtbGluZSBiYW5uZXI7IHJlbWFpbmRlciBzdHJlYW1zIG5hdHVyYWxseSAob3B0aW9uYWwpLlxuICogLSBDb2xsYXBzaWJsZS1saWtlIHN1bW1hcmllczogd2UgZm9ybWF0IGEgY29tcGFjdCBoZWFkaW5nIHdpdGggYW4gZWxsaXBzaXMgaW5kaWNhdG9yLCBidXQgYXZvaWQgY3RybCtvIGhpbnRzLlxuICovXG5cbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gJ25vZGU6cmVhZGxpbmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnbm9kZTpldmVudHMnO1xuaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IGNoYWxrIGZyb20gJ2NoYWxrJztcbmltcG9ydCB7IHRoZW1lLCBzcGlubmVyRnJhbWVzIH0gZnJvbSAnLi90aGVtZS5qcyc7XG5pbXBvcnQgeyBpc1BsYWluT3V0cHV0TW9kZSB9IGZyb20gJy4vb3V0cHV0TW9kZS5qcyc7XG5pbXBvcnQgeyBBbmltYXRlZFNwaW5uZXIsIFRoaW5raW5nSW5kaWNhdG9yLCBDb250ZXh0TWV0ZXIsIGRpc3Bvc2VBbmltYXRpb25zIH0gZnJvbSAnLi9hbmltYXRlZFN0YXR1cy5qcyc7XG5pbXBvcnQgeyBsb2dEZWJ1ZyB9IGZyb20gJy4uL3V0aWxzL2RlYnVnTG9nZ2VyLmpzJztcblxuZXhwb3J0IGludGVyZmFjZSBDb21tYW5kU3VnZ2VzdGlvbiB7XG4gIGNvbW1hbmQ6IHN0cmluZztcbiAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgY2F0ZWdvcnk/OiBzdHJpbmc7XG59XG5cbnR5cGUgQ2Fub25pY2FsRXZlbnRUeXBlID0gJ3Byb21wdCcgfCAndGhvdWdodCcgfCAnc3RyZWFtJyB8ICd0b29sJyB8ICd0b29sLXJlc3VsdCcgfCAnYnVpbGQnIHwgJ3Rlc3QnIHwgJ3Jlc3BvbnNlJztcblxuZXhwb3J0IHR5cGUgUmVuZGVyZXJFdmVudFR5cGUgPVxuICB8IENhbm9uaWNhbEV2ZW50VHlwZVxuICB8ICdyYXcnXG4gIHwgJ2Jhbm5lcidcbiAgfCAnZXJyb3InXG4gIHwgJ3N0cmVhbWluZydcbiAgfCAndG9vbC1jYWxsJ1xuICB8ICd0b29sLXJlc3VsdCc7XG5cbnR5cGUgVUlFdmVudCA9IHtcbiAgdHlwZTogQ2Fub25pY2FsRXZlbnRUeXBlO1xuICByYXdUeXBlOiBSZW5kZXJlckV2ZW50VHlwZTtcbiAgY29udGVudDogc3RyaW5nO1xuICB0aW1lc3RhbXA6IG51bWJlcjtcbiAgaXNDb21wYWN0ZWQ/OiBib29sZWFuOyAvLyBDbGF1ZGUgQ29kZSBzdHlsZSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9ja1xufTtcblxuZXhwb3J0IGludGVyZmFjZSBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnMge1xuICBkZWJ1Zz86IGJvb2xlYW47XG59XG5cbnR5cGUgSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgdGV4dDogc3RyaW5nO1xuICBjdXJzb3I6IG51bWJlcjtcbn07XG5cbmludGVyZmFjZSBNb2RlVG9nZ2xlU3RhdGUge1xuICB2ZXJpZmljYXRpb25FbmFibGVkOiBib29sZWFuO1xuICB2ZXJpZmljYXRpb25Ib3RrZXk/OiBzdHJpbmc7XG4gIGF1dG9Db250aW51ZUVuYWJsZWQ/OiBib29sZWFuO1xuICBhdXRvQ29udGludWVIb3RrZXk/OiBzdHJpbmc7XG4gIHRoaW5raW5nTW9kZUxhYmVsPzogc3RyaW5nIHwgbnVsbDtcbiAgdGhpbmtpbmdIb3RrZXk/OiBzdHJpbmc7XG4gIGNyaXRpY2FsQXBwcm92YWxNb2RlPzogJ2F1dG8nIHwgJ2FwcHJvdmFsJztcbiAgY3JpdGljYWxBcHByb3ZhbEhvdGtleT86IHN0cmluZztcbiAgZHVhbFJsRW5hYmxlZD86IGJvb2xlYW47XG4gIGR1YWxSbEhvdGtleT86IHN0cmluZztcbiAgZGVidWdFbmFibGVkPzogYm9vbGVhbjtcbiAgZGVidWdIb3RrZXk/OiBzdHJpbmc7XG59XG5cbmNvbnN0IEVTQyA9IHtcbiAgSElERV9DVVJTT1I6ICdcXHgxYls/MjVsJyxcbiAgU0hPV19DVVJTT1I6ICdcXHgxYls/MjVoJyxcbiAgQ0xFQVJfU0NSRUVOOiAnXFx4MWJbMkonLFxuICBDTEVBUl9MSU5FOiAnXFx4MWJbMksnLFxuICBIT01FOiAnXFx4MWJbSCcsXG4gIEVOQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGgnLFxuICBESVNBQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0bCcsXG4gIFRPOiAocm93OiBudW1iZXIsIGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtyb3d9OyR7Y29sfUhgLFxuICBUT19DT0w6IChjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7Y29sfUdgLFxuICBFUkFTRV9ET1dOOiAnXFx4MWJbSicsXG4gIFJFVkVSU0U6ICdcXHgxYls3bScsXG4gIFJFU0VUOiAnXFx4MWJbMG0nLFxuICAvLyBTY3JvbGwgcmVnaW9uIGNvbnRyb2wgLSBDUklUSUNBTCBmb3IgZml4ZWQgYm90dG9tIG92ZXJsYXlcbiAgU0VUX1NDUk9MTF9SRUdJT046ICh0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIpID0+IGBcXHgxYlske3RvcH07JHtib3R0b219cmAsXG4gIFJFU0VUX1NDUk9MTF9SRUdJT046ICdcXHgxYltyJyxcbiAgU0FWRV9DVVJTT1I6ICdcXHgxYltzJyxcbiAgUkVTVE9SRV9DVVJTT1I6ICdcXHgxYlt1Jyxcbn0gYXMgY29uc3Q7XG5cbmNvbnN0IE5FV0xJTkVfUExBQ0VIT0xERVIgPSAn4oa1JztcblxuZXhwb3J0IGNsYXNzIFVuaWZpZWRVSVJlbmRlcmVyIGV4dGVuZHMgRXZlbnRFbWl0dGVyIHtcbiAgcHJpdmF0ZSByZWFkb25seSBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnB1dDogTm9kZUpTLlJlYWRTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgcmw6IHJlYWRsaW5lLkludGVyZmFjZTtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpbk1vZGU6IGJvb2xlYW47XG4gIHByaXZhdGUgcmVhZG9ubHkgaW50ZXJhY3RpdmU6IGJvb2xlYW47XG5cbiAgcHJpdmF0ZSByb3dzID0gMjQ7XG4gIHByaXZhdGUgY29scyA9IDgwO1xuICBwcml2YXRlIGxhc3RSZW5kZXJXaWR0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBldmVudFF1ZXVlOiBVSUV2ZW50W10gPSBbXTtcbiAgcHJpdmF0ZSBpc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuXG4gIHByaXZhdGUgYnVmZmVyID0gJyc7XG4gIHByaXZhdGUgY3Vyc29yID0gMDtcbiAgcHJpdmF0ZSBoaXN0b3J5OiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhpc3RvcnlJbmRleCA9IC0xO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25zOiB7IGNvbW1hbmQ6IHN0cmluZzsgZGVzY3JpcHRpb246IHN0cmluZzsgY2F0ZWdvcnk/OiBzdHJpbmcgfVtdID0gW107XG4gIHByaXZhdGUgc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIHByaXZhdGUgYXZhaWxhYmxlQ29tbWFuZHM6IHR5cGVvZiB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gIHByaXZhdGUgaG90a2V5c0luVG9nZ2xlTGluZTogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCk7XG4gIHByaXZhdGUgY29sbGFwc2VkUGFzdGU6IHsgdGV4dDogc3RyaW5nOyBsaW5lczogbnVtYmVyOyBjaGFyczogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnID0gJ2lkbGUnO1xuICBwcml2YXRlIGxhc3RUb29sUmVzdWx0OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c092ZXJyaWRlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNTdHJlYW1pbmc6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEFuaW1hdGVkIFVJIGNvbXBvbmVudHNcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTcGlubmVyOiBBbmltYXRlZFNwaW5uZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB0aGlua2luZ0luZGljYXRvcjogVGhpbmtpbmdJbmRpY2F0b3IgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb250ZXh0TWV0ZXI6IENvbnRleHRNZXRlcjtcbiAgcHJpdmF0ZSBzcGlubmVyRnJhbWUgPSAwO1xuICBwcml2YXRlIHNwaW5uZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhJbmxpbmVQYW5lbExpbmVzID0gMTI7XG5cbiAgLy8gQ29tcGFjdGluZyBzdGF0dXMgYW5pbWF0aW9uXG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UgPSAnJztcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzRnJhbWUgPSAwO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyA9IFsn4py7JywgJ+KcvCcsICfinLsnLCAn4py6J107XG5cbiAgLy8gQW5pbWF0ZWQgYWN0aXZpdHkgbGluZSAoZS5nLiwgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIilcbiAgcHJpdmF0ZSBhY3Rpdml0eU1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFjdGl2aXR5UGhyYXNlSW5kZXggPSAwO1xuICBwcml2YXRlIGFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBhY3Rpdml0eVN0YXJGcmFtZXMgPSBbJ+KcsycsICfinLQnLCAn4py1JywgJ+KcticsICfinLcnLCAn4py4J107XG4gIC8vIFRva2VuIGNvdW50IGR1cmluZyBzdHJlYW1pbmdcbiAgcHJpdmF0ZSBzdHJlYW1pbmdUb2tlbnMgPSAwO1xuICAvLyBFbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uXG4gIHByaXZhdGUgZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGVsYXBzZWRDb2xvckZyYW1lcyA9IFsnI0Y1OUUwQicsICcjRkJCRjI0JywgJyNGQ0QzNEQnLCAnI0ZERTY4QScsICcjRkNEMzREJywgJyNGQkJGMjQnXTtcbiAgLy8gVXNlci1mcmllbmRseSBhY3Rpdml0eSBwaHJhc2VzIChjbGVhbiwgcHJvZmVzc2lvbmFsKVxuICBwcml2YXRlIHJlYWRvbmx5IGZ1bkFjdGl2aXR5UGhyYXNlcyA9IFtcbiAgICAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZycsICdBbmFseXppbmcnLCAnV29ya2luZycsICdQcmVwYXJpbmcnLFxuICBdO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyA9IDg7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzID0gMTgwMDtcbiAgcHJpdmF0ZSByZWFkb25seSB0aG91Z2h0RGVkdXBXaW5kb3dNcyA9IDE1MDAwO1xuICBwcml2YXRlIGxhc3RDdXJhdGVkVGhvdWdodDogeyB0ZXh0OiBzdHJpbmc7IGF0OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgc3RhdHVzTWV0YToge1xuICAgIG1vZGVsPzogc3RyaW5nO1xuICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gIH0gPSB7fTtcbiAgcHJpdmF0ZSB0b2dnbGVTdGF0ZTogTW9kZVRvZ2dsZVN0YXRlID0ge1xuICAgIHZlcmlmaWNhdGlvbkVuYWJsZWQ6IGZhbHNlLFxuICAgIGF1dG9Db250aW51ZUVuYWJsZWQ6IGZhbHNlLFxuICAgIGNyaXRpY2FsQXBwcm92YWxNb2RlOiAnYXV0bycsXG4gICAgZHVhbFJsRW5hYmxlZDogZmFsc2UsXG4gICAgZGVidWdFbmFibGVkOiBmYWxzZSxcbiAgfTtcblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICAvKiogRW5zdXJlIGN1cnNvciBpcyBhbHdheXMgd2l0aGluIHZhbGlkIGJvdW5kcyBmb3IgdGhlIGN1cnJlbnQgYnVmZmVyICovXG4gIHByaXZhdGUgY2xhbXBDdXJzb3IoKTogdm9pZCB7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLmN1cnNvciwgdGhpcy5idWZmZXIubGVuZ3RoKSk7XG4gIH1cblxuICAvKiogU2FmZWx5IGFwcGVuZCB0byBwYXN0ZSBidWZmZXIgd2l0aCBzaXplIGxpbWl0IGVuZm9yY2VtZW50ICovXG4gIHByaXZhdGUgYXBwZW5kVG9QYXN0ZUJ1ZmZlcihidWZmZXI6ICdwYXN0ZScgfCAncGxhaW5QYXN0ZScsIHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cpIHJldHVybjsgLy8gQWxyZWFkeSBhdCBsaW1pdFxuICAgIGNvbnN0IGN1cnJlbnQgPSBidWZmZXIgPT09ICdwYXN0ZScgPyB0aGlzLnBhc3RlQnVmZmVyIDogdGhpcy5wbGFpblBhc3RlQnVmZmVyO1xuICAgIGNvbnN0IHJlbWFpbmluZyA9IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplIC0gY3VycmVudC5sZW5ndGg7XG4gICAgaWYgKHJlbWFpbmluZyA8PSAwKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCB0b0FkZCA9IHRleHQubGVuZ3RoIDw9IHJlbWFpbmluZyA/IHRleHQgOiB0ZXh0LnNsaWNlKDAsIHJlbWFpbmluZyk7XG4gICAgaWYgKGJ1ZmZlciA9PT0gJ3Bhc3RlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH1cbiAgICBpZiAodG9BZGQubGVuZ3RoIDwgdGV4dC5sZW5ndGgpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgfVxuICB9XG5cbiAgLyoqIFN0cmlwIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyBmcm9tIHRleHQgdG8gcHJldmVudCBpbmplY3Rpb24gKi9cbiAgcHJpdmF0ZSBzYW5pdGl6ZVBhc3RlQ29udGVudCh0ZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBhbGwgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIChDU0ksIE9TQywgZXRjLilcbiAgICAvLyBJbmNsdWRpbmcgYnJhY2tldGVkIHBhc3RlIG1hcmtlcnMgKFxceDFiWzIwMH4gYW5kIFxceDFiWzIwMX4pIHdoaWNoIGVuZCB3aXRoIH5cbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1xceDFiXFxbWzAtOTtdKltBLVphLXp+XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gMjQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gNjA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDI7IC8vIEd1YXJkIGZvciBzaG9ydCBmaXJzdCBsaW5lcyBpbiBwbGFpbiBwYXN0ZSBtb2RlXG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDgwOyAvLyBXYWl0IGJlZm9yZSBjb21taXR0aW5nIGNoYXJzIGFzIG5vcm1hbCBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgcHJpdmF0ZSBwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWNyZXRNb2RlID0gZmFsc2U7XG4gIC8vIFJlbmRlciB0aHJvdHRsaW5nIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gIHByaXZhdGUgcGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJUaHJvdHRsZU1zID0gMTY7IC8vIH42MGZwcyBtYXhcbiAgcHJpdmF0ZSByZW5kZXJUaHJvdHRsZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyBEaXNwb3NhbCBzdGF0ZSB0byBwcmV2ZW50IG9wZXJhdGlvbnMgYWZ0ZXIgY2xlYW51cFxuICBwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG4gIC8vIEJvdW5kIGV2ZW50IGhhbmRsZXJzIGZvciBwcm9wZXIgY2xlYW51cFxuICBwcml2YXRlIGJvdW5kUmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRLZXlwcmVzc0hhbmRsZXI6ICgoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0Q2FwdHVyZTpcbiAgICB8IHtcbiAgICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIHJlamVjdD86IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgICAgICBvcHRpb25zOiB7IHRyaW06IGJvb2xlYW47IGFsbG93RW1wdHk6IGJvb2xlYW4gfTtcbiAgICAgIH1cbiAgICB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtID0gcHJvY2Vzcy5zdGRvdXQsXG4gICAgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtID0gcHJvY2Vzcy5zdGRpbixcbiAgICBfb3B0aW9ucz86IFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmludGVyYWN0aXZlID0gQm9vbGVhbih0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmlucHV0LmlzVFRZICYmICFwcm9jZXNzLmVudlsnQ0knXSk7XG4gICAgdGhpcy5wbGFpbk1vZGUgPSBpc1BsYWluT3V0cHV0TW9kZSgpIHx8ICF0aGlzLmludGVyYWN0aXZlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmltYXRlZCBjb21wb25lbnRzXG4gICAgdGhpcy5jb250ZXh0TWV0ZXIgPSBuZXcgQ29udGV4dE1ldGVyKCk7XG5cbiAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgIGlucHV0OiB0aGlzLmlucHV0LFxuICAgICAgb3V0cHV0OiB0aGlzLm91dHB1dCxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJvbXB0OiAnJyxcbiAgICAgIHRhYlNpemU6IDIsXG4gICAgfSk7XG4gICAgdGhpcy5ybC5zZXRQcm9tcHQoJycpO1xuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlcnMgc28gd2UgY2FuIHJlbW92ZSB0aGVtIG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub3V0cHV0Lm9uKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG5cbiAgICB0aGlzLnNldHVwSW5wdXRIYW5kbGVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBJZiBhbiBvdmVybGF5IHdhcyBhbHJlYWR5IHJlbmRlcmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgYmFubmVyIGVtaXR0ZWQgZWFybHkpLFxuICAgICAgLy8gY2xlYXIgaXQgc28gaW5pdGlhbGl6ZSgpIGRvZXNuJ3Qgc3RhY2sgYSBzZWNvbmQgY29udHJvbCBiYXIgaW4gc2Nyb2xsYmFjay5cbiAgICAgIGlmICh0aGlzLmhhc1JlbmRlcmVkUHJvbXB0IHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYWluIG1vZGU6IG1pbmltYWwgc2V0dXAsIHN0aWxsIHJlbmRlciBhIHNpbXBsZSBwcm9tcHQgbGluZVxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIE1hcmsgYXMgZGlzcG9zZWQgZmlyc3QgdG8gcHJldmVudCBhbnkgcGVuZGluZyBvcGVyYXRpb25zXG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG5cbiAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ1JlbmRlcmVyIGRpc3Bvc2VkJykpO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIC8vIENsZWFyIHJlbmRlciB0aHJvdHRsZSB0aW1lclxuICAgIGlmICh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpO1xuICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdG9wIGFueSBydW5uaW5nIGFuaW1hdGlvbnNcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHJlYW1pbmdTcGlubmVyKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1NwaW5uZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudGhpbmtpbmdJbmRpY2F0b3IpIHtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dE1ldGVyLmRpc3Bvc2UoKTtcbiAgICBkaXNwb3NlQW5pbWF0aW9ucygpO1xuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgIGlmICh0aGlzLmJvdW5kUmVzaXplSGFuZGxlcikge1xuICAgICAgdGhpcy5vdXRwdXQucmVtb3ZlTGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpIHtcbiAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIEV2ZW50RW1pdHRlciBsaXN0ZW5lcnMgZnJvbSB0aGlzIGluc3RhbmNlXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5ybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBzbyBpdCBkb2Vzbid0IHJlbWFpbiBpbiBzY3JvbGxiYWNrIGhpc3RvcnlcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZShmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcblxuICAgIC8vIENsZWFyIGV2ZW50IHF1ZXVlXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XG4gIH1cblxuICBzdXNwZW5kUHJvbXB0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZVByb21wdFJlbmRlcmluZyhyZW5kZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gSW5wdXQgaGFuZGxpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmwucmVtb3ZlQWxsTGlzdGVuZXJzKCdsaW5lJyk7XG4gICAgcmVhZGxpbmUuZW1pdEtleXByZXNzRXZlbnRzKHRoaXMuaW5wdXQsIHRoaXMucmwpO1xuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuICAgIC8vIFVzZSBib3VuZCBoYW5kbGVyIHNvIHdlIGNhbiByZW1vdmUgaXQgb24gY2xlYW51cFxuICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSAoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlwcmVzcyhzdHIsIGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmlucHV0Lm9uKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbWl0SW5wdXRDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcGF5bG9hZDogSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgICAgIHRleHQ6IHRoaXMuYnVmZmVyLFxuICAgICAgY3Vyc29yOiB0aGlzLmN1cnNvcixcbiAgICB9O1xuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleXByZXNzKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IHZvaWQge1xuICAgIC8vIE5vcm1hbGl6ZSBtaXNzaW5nIGtleSBtZXRhZGF0YSAoY29tbW9uIGZvciBzb21lIHRlcm1pbmFscyBlbWl0dGluZyByYXcgZXNjYXBlIGNvZGVzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkgPz8gdGhpcy5wYXJzZUVzY2FwZVNlcXVlbmNlKHN0cik7XG4gICAgY29uc3Qga2V5Rm9yUGFzdGUgPSBub3JtYWxpemVkS2V5ID8/IChzdHIgPyB7IHNlcXVlbmNlOiBzdHIgfSBhcyByZWFkbGluZS5LZXkgOiBrZXkpO1xuXG4gICAgaWYgKHRoaXMuaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVQbGFpblBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbWFjT1MgT3B0aW9uK2tleSBwcm9kdWNlcyBVbmljb2RlIGNoYXJhY3RlcnM7IGhhbmRsZSB0aGVtIGJlZm9yZSBrZXkgbWV0YWRhdGEgY2hlY2tzLlxuICAgIGNvbnN0IG1hY09wdGlvbkNoYXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ8KpJzogJ2cnLCAgLy8gT3B0aW9uK0dcbiAgICAgICfihKInOiAnZycsICAvLyBPcHRpb24rU2hpZnQrR1xuICAgICAgJ8OlJzogJ2EnLCAgLy8gT3B0aW9uK0FcbiAgICAgICfDhSc6ICdhJywgIC8vIE9wdGlvbitTaGlmdCtBXG4gICAgICAn4oiaJzogJ3YnLCAgLy8gT3B0aW9uK1YgLyBPcHRpb24rU2hpZnQrVlxuICAgICAgJ+KIgic6ICdkJywgIC8vIE9wdGlvbitEXG4gICAgICAnw44nOiAnZCcsICAvLyBPcHRpb24rU2hpZnQrRCAoY29tbW9uIG1hY09TIGVtaXNzaW9uKVxuICAgICAgJ+KIhic6ICdkJywgIC8vIENvbW1vbiBhbHRlcm5hdGUgZGVsdGEgc3ltYm9sXG4gICAgfTtcblxuICAgIGlmIChzdHIgJiYgbWFjT3B0aW9uQ2hhcnNbc3RyXSkge1xuICAgICAgY29uc3QgbGV0dGVyID0gbWFjT3B0aW9uQ2hhcnNbc3RyXTtcbiAgICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIGluc2VydCBidWZmZXIgc28gdGhlIHN5bWJvbCBuZXZlciBsYW5kcyBpbiB0aGUgcHJvbXB0XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICAgIHN3aXRjaCAobGV0dGVyKSB7XG4gICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICd2JzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5vcm1hbGl6ZWRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUgJiYgbm9ybWFsaXplZEtleS5jdHJsICYmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJyB8fCBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkJykpIHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IEN0cmwrU2hpZnQgY29tYmluYXRpb25zIChmYWxsYmFjayBmb3Igbm9uLW1hY09TIG9yIGNvbmZpZ3VyZWQgdGVybWluYWxzKVxuICAgIGNvbnN0IGlzQ3RybFNoaWZ0ID0gKGxldHRlcjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBsb3dlckxldHRlciA9IGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdXBwZXJMZXR0ZXIgPSBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblxuICAgICAgLy8gUGF0dGVybiAxOiBTdGFuZGFyZCByZWFkbGluZSBzaGlmdCBmbGFnICsgY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5LnNoaWZ0ICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMjogU29tZSB0ZXJtaW5hbHMgc2VuZCB1cHBlcmNhc2UgbmFtZSB3aXRoIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSB1cHBlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAzOiBNZXRhL0FsdCArIGxldHRlciAoaVRlcm0yIHdpdGggXCJPcHRpb24gc2VuZHMgTWV0YVwiKVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubWV0YSAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDQ6IFJhdyBlc2NhcGUgc2VxdWVuY2UgY2hlY2sgZm9yIHh0ZXJtLXN0eWxlIG1vZGlmaWVyc1xuICAgICAgY29uc3Qgc2VxID0gc3RyIHx8IG5vcm1hbGl6ZWRLZXkuc2VxdWVuY2U7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKHNlcSAmJiAvXlxceDFiXFxbWzAtOV0rOzZbfkEtWl0/JC8udGVzdChzZXEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDU6IEVTQyArIGxldHRlciAoT3B0aW9uIHNlbmRzIEVTQyBwcmVmaXggaW4gc29tZSBjb25maWdzKVxuICAgICAgaWYgKHNlcSAmJiBzZXEgPT09IGBcXHgxYiR7bG93ZXJMZXR0ZXJ9YCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDdHJsU2hpZnRUb2dnbGUgPSAobGV0dGVyOiAnYScgfCAnZycgfCAnZCcgfCAndicpOiB2b2lkID0+IHtcbiAgICAgIC8vIEVuc3VyZSBubyBidWZmZXJlZCBjaGFycyBsZWFrIGludG8gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBpZiAobGV0dGVyID09PSAnYScpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtY3JpdGljYWwtYXBwcm92YWwnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZycpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdkJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1kdWFsLXJsJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ3YnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLXZlcmlmeScpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9O1xuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdhJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnYScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZycpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2QnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCd2JykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgndicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAncicpIHtcbiAgICAgIHRoaXMuZW1pdCgncmVzdW1lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJykge1xuICAgICAgLy8gQ3RybCtDIGJlaGF2aW9yOlxuICAgICAgLy8gMS4gSWYgYnVmZmVyIGhhcyB0ZXh0OiBjbGVhciBpdCBmaXJzdCwgdGhlbiBub3RpZnkgc2hlbGxcbiAgICAgIC8vIDIuIElmIGJ1ZmZlciBpcyBlbXB0eTogbGV0IHNoZWxsIGRlY2lkZSB0byBwYXVzZSBBSSBvciBxdWl0XG4gICAgICAvL1xuICAgICAgLy8gVGhlIEludGVyYWN0aXZlU2hlbGwgbWFpbnRhaW5zIGEgY291bnRlciB0byB0cmFjayBDdHJsK0MgcHJlc3NlcyBhbmQgZGVjaWRlc1xuICAgICAgLy8gd2hldGhlciB0byBwYXVzZSBBSSBvciBleGl0IGJhc2VkIG9uIHByb2Nlc3Npbmcgc3RhdGUuXG5cbiAgICAgIGNvbnN0IGhhZEJ1ZmZlciA9IHRoaXMuYnVmZmVyLmxlbmd0aCA+IDA7XG4gICAgICBpZiAoaGFkQnVmZmVyKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBpbnB1dCBidWZmZXIgZmlyc3RcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgLy8gRW1pdCBjdHJsYyBldmVudCB3aXRoIGJ1ZmZlciBzdGF0ZSBzbyBzaGVsbCBjYW4gaGFuZGxlIGFwcHJvcHJpYXRlbHlcbiAgICAgIHRoaXMuZW1pdCgnY3RybGMnLCB7IGhhZEJ1ZmZlciB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdkJykge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2ludGVycnVwdCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ3UnKSB7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbCcpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN0cmwrTzogRXhwYW5kIGxhc3QgdG9vbCByZXN1bHRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdvJykge1xuICAgICAgdGhpcy5lbWl0KCdleHBhbmQtdG9vbC1yZXN1bHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleS5uYW1lID09PSAnZW50ZXInKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgYW5kIHN1Ym1pdCBpbiBvbmUgYWN0aW9uXG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIElmIGEgc2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uIGlzIGhpZ2hsaWdodGVkLCBwcmVzc2luZyBFbnRlciBzdWJtaXRzIGl0IGltbWVkaWF0ZWx5XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24odHJ1ZSkpIHJldHVybjtcbiAgICAgIC8vIEZhbGxiYWNrOiBpZiBidWZmZXIgc3RhcnRzIHdpdGggJy8nIGFuZCBzdWdnZXN0aW9ucyBleGlzdCwgdXNlIHRoZSBzZWxlY3RlZC9maXJzdCBvbmVcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdPy5jb21tYW5kID8/IHRoaXMuYnVmZmVyO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJtaXRUZXh0KHRoaXMuYnVmZmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvciAtIDEpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd1cCcpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoLTEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+IDApIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIGluZGV4IGlzIHdpdGhpbiBib3VuZHMgYmVmb3JlIGFjY2Vzc2luZ1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCAmJiB0aGlzLmhpc3RvcnlJbmRleCA8IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2Rvd24nKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTYWZldHk6IGludmFsaWQgc3RhdGUsIHJlc2V0XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3RhYicpIHtcbiAgICAgIGlmICh0aGlzLmFwcGx5U3VnZ2VzdGlvbihmYWxzZSkpIHJldHVybjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3RyICYmICFub3JtYWxpemVkS2V5LmN0cmwgJiYgIW5vcm1hbGl6ZWRLZXkubWV0YSkge1xuICAgICAgLy8gRGVmZXIgaW5zZXJ0aW9uIHRvIGFsbG93IHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gY2F0Y2ggcmFwaWQgaW5wdXRcbiAgICAgIHRoaXMucXVldWVQZW5kaW5nSW5zZXJ0KHN0cik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBob3Jpem9udGFsIGN1cnNvciBwb3NpdGlvbiBzdGF5cyB3aXRoaW4gdGhlIHZpc2libGUgaW5wdXQgd2luZG93LlxuICAgKiBQcmV2ZW50cyBqdW1wcyB3aGVuIHVzaW5nIGxlZnQvcmlnaHQgYXJyb3dzIG9uIGxvbmcgbGluZXMuXG4gICAqL1xuICBwcml2YXRlIGVuc3VyZUN1cnNvclZpc2libGUoKTogdm9pZCB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgxMCwgdGhpcy5zYWZlV2lkdGgoKSAtIDEyKTsgLy8gbWFyZ2luIGZvciBwcm9tcHQvdG9nZ2xlcyBhbmQgcGFkZGluZ1xuICAgIC8vIElmIGN1cnNvciBpcyBsZWZ0IG9mIGN1cnJlbnQgd2luZG93LCBzaGlmdCB3aW5kb3cgbGVmdFxuICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvcjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgY3Vyc29yIGlzIGJleW9uZCB2aXNpYmxlIHdpbmRvdywgc2hpZnQgd2luZG93IHJpZ2h0XG4gICAgaWYgKHRoaXMuY3Vyc29yIC0gdGhpcy5pbnB1dFJlbmRlck9mZnNldCA+PSBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yIC0gbWF4V2lkdGggKyAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSByYXcgZXNjYXBlIHNlcXVlbmNlcyB3aGVuIHJlYWRsaW5lIGRvZXNuJ3QgcG9wdWxhdGUga2V5IG1ldGFkYXRhLlxuICAgKiBQcmV2ZW50cyBjb250cm9sIGNvZGVzIChlLmcuLCBeW1syMDB+KSBmcm9tIGxlYWtpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVzY2FwZVNlcXVlbmNlKHNlcXVlbmNlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogcmVhZGxpbmUuS2V5IHwgbnVsbCB7XG4gICAgaWYgKCFzZXF1ZW5jZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCByZWFkbGluZS5LZXk+ID0ge1xuICAgICAgJ1xceDFiW0EnOiB7IG5hbWU6ICd1cCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0InOiB7IG5hbWU6ICdkb3duJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQyc6IHsgbmFtZTogJ3JpZ2h0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRCc6IHsgbmFtZTogJ2xlZnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltIJzogeyBuYW1lOiAnaG9tZScsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0YnOiB7IG5hbWU6ICdlbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDB+JzogeyBuYW1lOiAncGFzdGUtc3RhcnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDF+JzogeyBuYW1lOiAncGFzdGUtZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgfTtcbiAgICByZXR1cm4gbWFwW3NlcXVlbmNlXSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlIGNoYXJhY3RlcnMgZm9yIGRlZmVycmVkIGluc2VydGlvbi4gVGhpcyBwcmV2ZW50cyB2aXN1YWwgXCJsZWFrXCIgb2ZcbiAgICogcGFzdGVkIGNvbnRlbnQgYnkgaG9sZGluZyBjaGFyYWN0ZXJzIHVudGlsIHdlJ3JlIGNvbmZpZGVudCBpdCdzIG5vdCBhIHBhc3RlLlxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVBlbmRpbmdJbnNlcnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICs9IHRleHQ7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2NoZWR1bGUgY29tbWl0IGFmdGVyIGRlbGF5IC0gaWYgcGFzdGUgZGV0ZWN0aW9uIHRyaWdnZXJzIGZpcnN0LCBpdCB3aWxsIGNvbnN1bWUgdGhlIGJ1ZmZlclxuICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbW1pdFBlbmRpbmdJbnNlcnQoKTtcbiAgICB9LCB0aGlzLnBlbmRpbmdJbnNlcnREZWxheU1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgcGVuZGluZyBjaGFyYWN0ZXJzIGFzIG5vcm1hbCBpbnB1dCAobm90IGEgcGFzdGUpLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRQZW5kaW5nSW5zZXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICYmICF0aGlzLmluUGxhaW5QYXN0ZSAmJiAhdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICB0aGlzLmluc2VydFRleHQodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgaW50byBwYXN0ZSBkZXRlY3Rpb24gKHByZXZlbnRzIHZpc3VhbCBsZWFrKS5cbiAgICovXG4gIHByaXZhdGUgY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZWQgPSB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXI7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgcmV0dXJuIGNvbnN1bWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgfHwgc3RyO1xuICAgIGlmIChzZXF1ZW5jZSA9PT0gRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUgfHwgc2VxdWVuY2UgPT09IEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcGFzdGUgbWFya2VycyBtaWdodCBiZSBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nXG4gICAgY29uc3QgcGFzdGVTdGFydE1hcmtlciA9ICdcXHgxYlsyMDB+JztcbiAgICBjb25zdCBwYXN0ZUVuZE1hcmtlciA9ICdcXHgxYlsyMDF+JztcblxuICAgIC8vIENoZWNrIGlmIHN0ciBjb250YWlucyBwYXN0ZSBzdGFydCBtYXJrZXIgKGhhbmRsZXMgY2h1bmtlZCBhcnJpdmFsKVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuaW5jbHVkZXMocGFzdGVTdGFydE1hcmtlcikpIHtcbiAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIC8vIEV4dHJhY3QgY29udGVudCBhZnRlciB0aGUgc3RhcnQgbWFya2VyXG4gICAgICBjb25zdCBzdGFydElkeCA9IHN0ci5pbmRleE9mKHBhc3RlU3RhcnRNYXJrZXIpO1xuICAgICAgbGV0IGNvbnRlbnQgPSBzdHIuc2xpY2Uoc3RhcnRJZHggKyBwYXN0ZVN0YXJ0TWFya2VyLmxlbmd0aCk7XG4gICAgICAvLyBDaGVjayBpZiBlbmQgbWFya2VyIGlzIGFsc28gaW4gdGhpcyBjaHVua1xuICAgICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMocGFzdGVFbmRNYXJrZXIpKSB7XG4gICAgICAgIGNvbnN0IGVuZElkeCA9IGNvbnRlbnQuaW5kZXhPZihwYXN0ZUVuZE1hcmtlcik7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDAsIGVuZElkeCk7XG4gICAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nICsgY29udGVudDtcbiAgICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nICsgY29udGVudDtcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChzZXF1ZW5jZSA9PT0gcGFzdGVTdGFydE1hcmtlcikge1xuICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciB0byBwcmV2ZW50IGxlYWtcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nOyAvLyBJbmNsdWRlIGFueSBjaGFycyB0aGF0IGFycml2ZWQgYmVmb3JlIGJyYWNrZXRlZCBwYXN0ZSBzdGFydGVkXG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBzdHIgY29udGFpbnMgcGFzdGUgZW5kIG1hcmtlclxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuaW5jbHVkZXMocGFzdGVFbmRNYXJrZXIpKSB7XG4gICAgICBjb25zdCBlbmRJZHggPSBzdHIuaW5kZXhPZihwYXN0ZUVuZE1hcmtlcik7XG4gICAgICBjb25zdCBjb250ZW50QmVmb3JlID0gc3RyLnNsaWNlKDAsIGVuZElkeCk7XG4gICAgICBpZiAoY29udGVudEJlZm9yZSkge1xuICAgICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgY29udGVudEJlZm9yZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxdWVuY2UgPT09IHBhc3RlRW5kTWFya2VyKSB7XG4gICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleT8ubmFtZSA9PT0gJ3JldHVybicgfHwga2V5Py5uYW1lID09PSAnZW50ZXInKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgJ1xcbicpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gdGhpcy5wYXN0ZUJ1ZmZlci5zbGljZSgwLCAtMSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgc3RyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlcXVlbmNlID09PSAnc3RyaW5nJyAmJiBzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgc2VxdWVuY2UpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21taXRQYXN0ZUJ1ZmZlcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkgcmV0dXJuO1xuICAgIC8vIFNhbml0aXplIHRvIHJlbW92ZSBhbnkgaW5qZWN0ZWQgZXNjYXBlIHNlcXVlbmNlcywgdGhlbiBub3JtYWxpemUgbGluZSBlbmRpbmdzXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBhc3RlQnVmZmVyKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgICAgY2hhcnM6IGNvbnRlbnQubGVuZ3RoICsgKHdhc1RydW5jYXRlZCA/ICcrJyBhcyB1bmtub3duIGFzIG51bWJlciA6IDApLCAvLyBJbmRpY2F0ZSB0cnVuY2F0aW9uXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQbGFpblBhc3RlKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IGJvb2xlYW4ge1xuICAgIC8vIEZhbGxiYWNrIHBhc3RlIGNhcHR1cmUgd2hlbiBicmFja2V0ZWQgcGFzdGUgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgaWYgKHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSB8fCBrZXk/LmN0cmwgfHwga2V5Py5tZXRhKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgPz8gJyc7XG4gICAgY29uc3QgY2h1bmsgPSB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCA/IHN0ciA6IHNlcXVlbmNlO1xuICAgIGlmICghY2h1bmspIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy50cmFja1BsYWluUGFzdGVCdXJzdChjaHVuay5sZW5ndGgsIG5vdyk7XG5cbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLnJlY29yZFJlY2VudFBsYWluQ2h1bmsoY2h1bmssIG5vdyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmtNdWx0aXBsZSA9IGNodW5rLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaGFzTmV3bGluZSA9IC9bXFxyXFxuXS8udGVzdChjaHVuayk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgY29uc3QgYnVyc3RUcmlnZ2VyID0gYnVyc3RBY3RpdmUgJiYgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZVRyaWdnZXJDaGFycztcbiAgICBjb25zdCBoYXNSZWNlbnROb25OZXdsaW5lID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5zb21lKGVudHJ5ID0+ICEvXltcXHJcXG5dKyQvLnRlc3QoZW50cnkudGV4dCkpO1xuICAgIGNvbnN0IGVhcmx5TmV3bGluZVRyaWdnZXIgPVxuICAgICAgaGFzTmV3bGluZSAmJlxuICAgICAgYnVyc3RBY3RpdmUgJiZcbiAgICAgIGhhc1JlY2VudE5vbk5ld2xpbmUgJiZcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycztcbiAgICBjb25zdCBuZXdsaW5lVHJpZ2dlciA9IGhhc05ld2xpbmUgJiYgKHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IGVhcmx5TmV3bGluZVRyaWdnZXIpO1xuICAgIGNvbnN0IGxvb2tzTGlrZVBhc3RlID0gdGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgbmV3bGluZVRyaWdnZXI7XG5cbiAgICBpZiAoIWxvb2tzTGlrZVBhc3RlKSB7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBmaXJzdCAtIHRoaXMgaXMgdGhlIHByaW1hcnkgc291cmNlIG5vd1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgY29uc3QgcmVjbGFpbWVkID0gdGhpcy5yZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIC8vIENvbWJpbmUgcGVuZGluZyBidWZmZXIgd2l0aCBhbnkgcmVjbGFpbWVkIGNodW5rc1xuICAgICAgY29uc3QgY29tYmluZWQgPSBwZW5kaW5nICsgcmVjbGFpbWVkO1xuICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjaGFycyB0aGF0IGxlYWtlZCBpbnRvIGJ1ZmZlciAobGVnYWN5IHJlY2xhaW0gcGF0aClcbiAgICAgICAgaWYgKHJlY2xhaW1lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlQ291bnQgPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGgsIHJlY2xhaW1lZC5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IHN1ZmZpeCA9IHRoaXMuYnVmZmVyLnNsaWNlKC1yZW1vdmVDb3VudCk7XG4gICAgICAgICAgaWYgKHJlbW92ZUNvdW50ID4gMCAmJiBzdWZmaXggPT09IHJlY2xhaW1lZC5zbGljZSgtcmVtb3ZlQ291bnQpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuYnVmZmVyLmxlbmd0aCAtIHJlbW92ZUNvdW50KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgdGhpcy5idWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSBjb21iaW5lZC5zbGljZSgwLCB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSk7XG4gICAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBjb21iaW5lZC5lbmRzV2l0aChjaHVuayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNodW5rQWxyZWFkeUNhcHR1cmVkKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3BsYWluUGFzdGUnLCBjaHVuayk7XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGxlbmd0aDogbnVtYmVyLCBub3c6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgfHwgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcykge1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSBub3c7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgKz0gbGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFBsYWluUGFzdGVCdXJzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICAvLyBBbHNvIGNhbmNlbCBwZW5kaW5nIGluc2VydCBidWZmZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkUmVjZW50UGxhaW5DaHVuayh0ZXh0OiBzdHJpbmcsIGF0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IGF0IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcy5wdXNoKHsgdGV4dCwgYXQgfSk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybiAnJztcbiAgICBjb25zdCBjb21iaW5lZCA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MubWFwKGVudHJ5ID0+IGVudHJ5LnRleHQpLmpvaW4oJycpO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cblxuICBwcml2YXRlIHNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgfVxuICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmZpbmFsaXplUGxhaW5QYXN0ZSgpO1xuICAgIH0sIHRoaXMucGxhaW5QYXN0ZUlkbGVNcyk7XG4gIH1cblxuICBwcml2YXRlIGZpbmFsaXplUGxhaW5QYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSByZXR1cm47XG5cbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wbGFpblBhc3RlQnVmZmVyKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIC8vIERvbid0IGluc2VydCBkdXJpbmcgcGFzdGUgb3BlcmF0aW9ucyAtIGNvbnRlbnQgZ29lcyB0byBwYXN0ZSBidWZmZXJcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IHRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBjdXJzb3IgaXMgdmFsaWQgYmVmb3JlIHNsaWNpbmdcbiAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7XG4gICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcikgKyB0ZXh0ICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgIHRoaXMuY3Vyc29yICs9IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciByZW1haW5zIHZhbGlkIGFmdGVyIG1vZGlmaWNhdGlvblxuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgc3VibWl0IHRoYXQgaW5zdGVhZCBvZiB0aGUgYnVmZmVyIHRleHRcbiAgICAvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBzdWJtaXRUZXh0IGlzIGNhbGxlZCBwcm9ncmFtbWF0aWNhbGx5XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIGNvbnN0IHNob3VsZFRyaW0gPSB0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLnRyaW07XG4gICAgICBjb25zdCBub3JtYWxpemVkQ2FwdHVyZSA9IHNob3VsZFRyaW0gPyB0ZXh0LnRyaW0oKSA6IHRleHQ7XG4gICAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMuYWxsb3dFbXB0eSAmJiAhbm9ybWFsaXplZENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKG5vcm1hbGl6ZWRDYXB0dXJlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFkZCBzZWNyZXRzIG9yIHNsYXNoIGNvbW1hbmRzIHRvIGhpc3Rvcnkvc2Nyb2xsYmFja1xuICAgIGlmICghdGhpcy5zZWNyZXRNb2RlICYmICFub3JtYWxpemVkLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgdGhpcy5kaXNwbGF5VXNlclByb21wdChub3JtYWxpemVkKTtcbiAgICB9IGVsc2UgaWYgKCF0aGlzLnNlY3JldE1vZGUpIHtcbiAgICAgIC8vIFN0aWxsIHRyYWNrIHNsYXNoIGNvbW1hbmRzIGluIGhpc3RvcnkgZm9yIGNvbnZlbmllbmNlXG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICB0aGlzLmVtaXQoJ3F1ZXVlJywgbm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdCgnc3VibWl0Jywgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0U3BhY2UgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCcgJyk7XG4gICAgY29uc3QgaGFzQXJnVGV4dCA9IGZpcnN0U3BhY2UgPj0gMCAmJiAvXFxTLy50ZXN0KHRoaXMuYnVmZmVyLnNsaWNlKGZpcnN0U3BhY2UgKyAxKSk7XG4gICAgLy8gSGlkZSBzbGFzaCBzdWdnZXN0aW9ucyB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYXJndW1lbnRzXG4gICAgaWYgKGZpcnN0U3BhY2UgPj0gMCAmJiB0aGlzLmN1cnNvciA+IGZpcnN0U3BhY2UgJiYgaGFzQXJnVGV4dCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yU2xpY2UgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgY29uc3QgY29tbWFuZFNsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gY3Vyc29yU2xpY2Uuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiBjdXJzb3JTbGljZTtcbiAgICBjb25zdCBmYWxsYmFja1NsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gdGhpcy5idWZmZXIuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiB0aGlzLmJ1ZmZlcjtcbiAgICBjb25zdCBwYXJ0aWFsID0gKGNvbW1hbmRTbGljZS50cmltRW5kKCkgfHwgZmFsbGJhY2tTbGljZS50cmltRW5kKCkgfHwgJy8nKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnN1Z2dlc3Rpb25JbmRleF0/LmNvbW1hbmQ7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuYXZhaWxhYmxlQ29tbWFuZHNcbiAgICAgIC5maWx0ZXIoY21kID0+IGNtZC5jb21tYW5kLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYXJ0aWFsKSlcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc3VnZ2VzdGlvbnMuZmluZEluZGV4KHMgPT4gcy5jb21tYW5kID09PSBwcmV2aW91cyk7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGlkeCA+PSAwID8gaWR4IDogMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHNldEF2YWlsYWJsZUNvbW1hbmRzKGNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuYXZhaWxhYmxlQ29tbWFuZHMgPSBjb21tYW5kcztcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5U3VnZ2VzdGlvbihzdWJtaXQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgc3VnZ2VzdGlvbkluZGV4IGlzIHZhbGlkLCBkZWZhdWx0IHRvIGZpcnN0IGl0ZW1cbiAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogMDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XTtcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdWJtaXQpIHtcbiAgICAgIHRoaXMuc3VibWl0VGV4dChzZWxlY3RlZC5jb21tYW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWZmZXIgPSBgJHtzZWxlY3RlZC5jb21tYW5kfSBgO1xuICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVTdWdnZXN0aW9ucyhkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXNldCBpbmRleCBpZiBzdWdnZXN0aW9ucyB3ZXJlIGNsZWFyZWQgYnV0IGluZGV4IHdhc24ndFxuICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkluZGV4ICE9PSAtMSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3VycmVudCBpbmRleCBpcyB2YWxpZCBiZWZvcmUgY29tcHV0aW5nIG5leHRcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogLTE7XG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBjb25zdCBjbGFtcGVkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxLCBuZXh0KSk7XG4gICAgaWYgKGNsYW1wZWQgPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4ICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGNsYW1wZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBFdmVudCBxdWV1ZSAtLS0tLS0tLS0tLS1cblxuICBhZGRFdmVudCh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gYWRkRXZlbnQgY2FsbGVkOiB0eXBlPSR7dHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7Y29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplRXZlbnRUeXBlKHR5cGUpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIG5vcm1hbGl6ZWQgdHlwZT0ke25vcm1hbGl6ZWR9YCk7XG4gICAgaWYgKFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Byb21wdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdyZXNwb25zZScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0aG91Z2h0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3N0cmVhbScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ2J1aWxkJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rlc3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0Jykge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoe1xuICAgICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgICBjb250ZW50LFxuICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICB9KTtcbiAgICAgIGlmIChmb3JtYXR0ZWQpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZC5lbmRzV2l0aCgnXFxuJykgPyBmb3JtYXR0ZWQgOiBgJHtmb3JtYXR0ZWR9XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBldmVudCA9IHtcbiAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICByYXdUeXBlOiB0eXBlLFxuICAgICAgY29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICB9O1xuXG4gICAgLy8gUHJpb3JpdHkgcXVldWU6IHByb21wdCBldmVudHMgYXJlIGluc2VydGVkIGF0IHRoZSBmcm9udCB0byBlbnN1cmUgaW1tZWRpYXRlIGRpc3BsYXlcbiAgICAvLyBUaGlzIGd1YXJhbnRlZXMgdXNlciBpbnB1dCBpcyBlY2hvZWQgYmVmb3JlIGFueSBhc3luYyBwcm9jZXNzaW5nIHJlc3BvbnNlc1xuICAgIGlmIChub3JtYWxpemVkID09PSAncHJvbXB0Jykge1xuICAgICAgLy8gRmluZCB0aGUgZmlyc3Qgbm9uLXByb21wdCBldmVudCBhbmQgaW5zZXJ0IGJlZm9yZSBpdFxuICAgICAgLy8gVGhpcyBtYWludGFpbnMgcHJvbXB0IG9yZGVyIHdoaWxlIGdpdmluZyB0aGVtIHByaW9yaXR5IG92ZXIgb3RoZXIgZXZlbnRzXG4gICAgICBjb25zdCBpbnNlcnRJbmRleCA9IHRoaXMuZXZlbnRRdWV1ZS5maW5kSW5kZXgoZSA9PiBlLnR5cGUgIT09ICdwcm9tcHQnKTtcbiAgICAgIGlmIChpbnNlcnRJbmRleCA9PT0gLTEpIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5ldmVudFF1ZXVlLnNwbGljZShpbnNlcnRJbmRleCwgMCwgZXZlbnQpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICBxdWV1ZU1pY3JvdGFzaygoKSA9PiB7XG4gICAgICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlLXJlbmRlciB0aGUgcHJvbXB0L2NvbnRyb2wgYmFyIGltbWVkaWF0ZWx5LlxuICAgKiBUaGlzIGtlZXBzIHRoZSBjaGF0IGJveCBwaW5uZWQgZHVyaW5nIGxvbmcgc3RyZWFtaW5nIHJ1bnMgaW5zdGVhZCBvZiB3YWl0aW5nXG4gICAqIGZvciB0aGUgZXZlbnQgcXVldWUgdG8gZHJhaW4gYmVmb3JlIHRoZSBwcm9tcHQgcmVhcHBlYXJzLlxuICAgKi9cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRPdmVybGF5KGltbWVkaWF0ZTogYm9vbGVhbiA9IGZhbHNlKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlIHx8IHRoaXMuZGlzcG9zZWQgfHwgIXRoaXMub3V0cHV0LmlzVFRZIHx8IHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgIGlmIChpbW1lZGlhdGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHByb2Nlc3NRdWV1ZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBpZiAodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG4gICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IHRydWU7XG4gICAgdHJ5IHtcbiAgICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICBjb25zdCBldmVudCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpO1xuICAgICAgICBpZiAoIWV2ZW50KSBjb250aW51ZTtcbiAgICAgICAgY29uc3QgY29hbGVzY2VkID0gdGhpcy5jb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudCk7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5yZW5kZXJFdmVudChjb2FsZXNjZWQpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIC8vIE5ldmVyIGFsbG93IGEgcmVuZGVyaW5nIGZhaWx1cmUgdG8gc3RhbGwgdGhlIGV2ZW50IHF1ZXVlXG4gICAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrOyAvLyBEb24ndCB0cnkgdG8gd3JpdGUgYWZ0ZXIgZGlzcG9zYWxcbiAgICAgICAgICBjb25zdCBtZXNzYWdlID1cbiAgICAgICAgICAgIGVycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogdHlwZW9mIGVycm9yID09PSAnc3RyaW5nJyA/IGVycm9yIDogJ1Vua25vd24gcmVuZGVyZXIgZXJyb3InO1xuICAgICAgICAgIHRoaXMub3V0cHV0LndyaXRlKGBcXG5bcmVuZGVyZXJdICR7bWVzc2FnZX1cXG5gKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoZWNrIGRpc3Bvc2VkIGJlZm9yZSBjb250aW51aW5nXG4gICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhaztcblxuICAgICAgICAvLyBGb3IgcHJvbXB0IGV2ZW50cywgZW5zdXJlIHRoZSBvdmVybGF5IGlzIHJlbmRlcmVkIGltbWVkaWF0ZWx5XG4gICAgICAgIC8vIFRoaXMgZ3VhcmFudGVlcyBwcm9tcHRzIGFyZSB2aXNpYmxlIGJlZm9yZSBhc3luYyBwcm9jZXNzaW5nIGNvbnRpbnVlc1xuICAgICAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3Byb21wdCcpIHtcbiAgICAgICAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gTm8gZGVsYXkgZm9yIHByb21wdCBldmVudHMgLSByZW5kZXIgaW1tZWRpYXRlbHlcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhd2FpdCB0aGlzLmRlbGF5KDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICAvLyBBTFdBWVMgcmVuZGVyIHByb21wdCBhZnRlciBxdWV1ZSBjb21wbGV0ZXMgdG8ga2VlcCBib3R0b20gVUkgcGVyc2lzdGVudFxuICAgICAgLy8gVGhpcyBlbnN1cmVzIHN0YXR1cy90b2dnbGVzIHN0YXkgcGlubmVkIGFuZCByZXNwb25zZXMgYXJlIGZ1bGx5IHJlbmRlcmVkXG4gICAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogTWVyZ2UgYWRqYWNlbnQgcmVzcG9uc2UvdGhvdWdodCBldmVudHMgaW50byBhIHNpbmdsZSBibG9jayBzbyBjb250aW51b3VzXG4gICAqIGNoYXQgdGV4dCByZW5kZXJzIHdpdGggb25lIGJ1bGxldCBpbnN0ZWFkIG9mIG9uZSBwZXIgY2h1bmsuXG4gICAqL1xuICBwcml2YXRlIGNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50OiBVSUV2ZW50KTogVUlFdmVudCB7XG4gICAgY29uc3QgaXNNZXJnZWFibGUgPSAodGFyZ2V0OiBVSUV2ZW50IHwgdW5kZWZpbmVkKTogdGFyZ2V0IGlzIFVJRXZlbnQgPT5cbiAgICAgIEJvb2xlYW4oXG4gICAgICAgIHRhcmdldCAmJlxuICAgICAgICAgICF0YXJnZXQuaXNDb21wYWN0ZWQgJiZcbiAgICAgICAgICAoKHRhcmdldC50eXBlID09PSAncmVzcG9uc2UnICYmIHRhcmdldC5yYXdUeXBlID09PSAncmVzcG9uc2UnKSB8fFxuICAgICAgICAgICAgKHRhcmdldC50eXBlID09PSAndGhvdWdodCcgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICd0aG91Z2h0JykpXG4gICAgICApO1xuXG4gICAgaWYgKCFpc01lcmdlYWJsZShldmVudCkpIHtcbiAgICAgIHJldHVybiBldmVudDtcbiAgICB9XG5cbiAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgaXNNZXJnZWFibGUodGhpcy5ldmVudFF1ZXVlWzBdKSkge1xuICAgICAgY29uc3QgbmV4dCA9IHRoaXMuZXZlbnRRdWV1ZS5zaGlmdCgpITtcbiAgICAgIGNvbnN0IG5lZWRzU2VwYXJhdG9yID1cbiAgICAgICAgZXZlbnQuY29udGVudC5sZW5ndGggPiAwICYmICFldmVudC5jb250ZW50LmVuZHNXaXRoKCdcXG4nKSAmJiAhbmV4dC5jb250ZW50LnN0YXJ0c1dpdGgoJ1xcbicpO1xuICAgICAgZXZlbnQuY29udGVudCA9IG5lZWRzU2VwYXJhdG9yID8gYCR7ZXZlbnQuY29udGVudH1cXG4ke25leHQuY29udGVudH1gIDogYCR7ZXZlbnQuY29udGVudH0ke25leHQuY29udGVudH1gO1xuICAgIH1cblxuICAgIHJldHVybiBldmVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGbHVzaCBwZW5kaW5nIHJlbmRlcmVyIGV2ZW50cy5cbiAgICogVXNlZnVsIGZvciBzdGFydHVwIGZsb3dzIChlLmcuLCB3ZWxjb21lIGJhbm5lcikgdG8gZ3VhcmFudGVlIHRoZSBzY3JvbGxiYWNrIGlzIGh5ZHJhdGVkXG4gICAqIGJlZm9yZSBjb250aW51aW5nIHdpdGggYWRkaXRpb25hbCBVSSB1cGRhdGVzLlxuICAgKi9cbiAgYXN5bmMgZmx1c2hFdmVudHModGltZW91dE1zOiBudW1iZXIgPSAyNTApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICAvLyBLaWNrIG9mZiBwcm9jZXNzaW5nIGlmIGlkbGVcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlICYmIHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RhcnQgPSBEYXRlLm5vdygpO1xuICAgIHdoaWxlICgodGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSB8fCB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkgJiYgRGF0ZS5ub3coKSAtIHN0YXJ0IDwgdGltZW91dE1zKSB7XG4gICAgICBhd2FpdCB0aGlzLmRlbGF5KDUpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJlbmRlckV2ZW50KGV2ZW50OiBVSUV2ZW50KTogUHJvbWlzZTx2b2lkPiB7XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gcmVuZGVyRXZlbnQ6IHR5cGU9JHtldmVudC50eXBlfSwgY29udGVudCBsZW5ndGg9JHtldmVudC5jb250ZW50Py5sZW5ndGggfHwgMH1gKTtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGxvZ0RlYnVnKCdbREVCVUcgcmVuZGVyZXJdIHBsYWluTW9kZSAtIHdyaXRpbmcgZGlyZWN0bHknKTtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZFBsYWluID0gdGhpcy5mb3JtYXRDb250ZW50KGV2ZW50KTtcbiAgICAgIGlmIChmb3JtYXR0ZWRQbGFpbikge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkUGxhaW4uZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkUGxhaW4gOiBgJHtmb3JtYXR0ZWRQbGFpbn1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gZm9ybWF0dGVkIGxlbmd0aD0ke2Zvcm1hdHRlZD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKCFmb3JtYXR0ZWQpIHJldHVybjtcblxuICAgIC8vIEFsbG93IHByb21wdHMgYW5kIHJlc3BvbnNlcyB0byBhbHdheXMgcmVuZGVyIChkb24ndCBkZWR1cGxpY2F0ZSlcbiAgICAvLyBPbmx5IGRlZHVwbGljYXRlIHN0cmVhbWluZyBjb250ZW50XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gYCR7ZXZlbnQucmF3VHlwZX06JHtldmVudC5jb250ZW50fWA7XG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdzdHJlYW0nICYmIHNpZ25hdHVyZSA9PT0gdGhpcy5sYXN0UmVuZGVyZWRFdmVudEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3Byb21wdCcpIHtcbiAgICAgIHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkgPSBzaWduYXR1cmU7XG4gICAgfVxuXG4gICAgLy8gQ2xlYXIgdGhlIHByb21wdCBhcmVhIGJlZm9yZSB3cml0aW5nIG5ldyBjb250ZW50XG4gICAgaWYgKHRoaXMucHJvbXB0SGVpZ2h0ID4gMCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgIH1cbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG5cbiAgICBpZiAoZXZlbnQudHlwZSAhPT0gJ3N0cmVhbScgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgJiYgZm9ybWF0dGVkLnRyaW0oKSkge1xuICAgICAgLy8gS2VlcCBzY3JvbGxiYWNrIG9yZGVyaW5nIHByZWRpY3RhYmxlIHdoZW4gcHJldmlvdXMgb3V0cHV0IGVuZGVkIG1pZC1saW5lXG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFxuJyk7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLm91dHB1dC53cml0ZShmb3JtYXR0ZWQpO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpO1xuXG4gICAgLy8gSW1tZWRpYXRlbHkgcmVzdG9yZSB0aGUgcHJvbXB0IG92ZXJsYXkgc28gdGhlIGNoYXQgYm94IHN0YXlzIHBpbm5lZCBkdXJpbmcgc3RyZWFtaW5nXG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0T3ZlcmxheSh0cnVlKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSk6IENhbm9uaWNhbEV2ZW50VHlwZSB8IG51bGwge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgcmV0dXJuICdwcm9tcHQnO1xuICAgICAgY2FzZSAndGhvdWdodCc6XG4gICAgICAgIHJldHVybiAndGhvdWdodCc7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgY2FzZSAnc3RyZWFtaW5nJzpcbiAgICAgICAgcmV0dXJuICdzdHJlYW0nO1xuICAgICAgY2FzZSAndG9vbCc6XG4gICAgICBjYXNlICd0b29sLWNhbGwnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wnO1xuICAgICAgY2FzZSAndG9vbC1yZXN1bHQnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wtcmVzdWx0JztcbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuICdidWlsZCc7XG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuICd0ZXN0JztcbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGNhc2UgJ2Jhbm5lcic6XG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgICByZXR1cm4gJ3Jlc3BvbnNlJztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoZXZlbnQ6IFVJRXZlbnQpOiBzdHJpbmcge1xuICAgIC8vIENvbXBhY3RlZCBibG9ja3MgYWxyZWFkeSBoYXZlIHNlcGFyYXRvciBhbmQgZm9ybWF0dGluZ1xuICAgIGlmIChldmVudC5pc0NvbXBhY3RlZCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnJhd1R5cGUgPT09ICdiYW5uZXInKSB7XG4gICAgICAvLyBCYW5uZXJzIGRpc3BsYXkgd2l0aG91dCBidWxsZXQgcHJlZml4XG4gICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbUVuZCgpKTtcbiAgICAgIHJldHVybiBgJHtsaW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIENvbXBhY3QsIHVzZXItZnJpZW5kbHkgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgLy8gVXNlciBwcm9tcHQgLSBqdXN0IHRoZSB0ZXh0IChwcm9tcHQgYm94IGhhbmRsZXMgc3R5bGluZylcbiAgICAgICAgcmV0dXJuIGAke3RoZW1lLnByaW1hcnkoJz4nKX0gJHtldmVudC5jb250ZW50fVxcbmA7XG5cbiAgICAgIGNhc2UgJ3Rob3VnaHQnOiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VyYXRlZCA9IHRoaXMuY3VyYXRlUmVhc29uaW5nQ29udGVudChldmVudC5jb250ZW50KTtcbiAgICAgICAgaWYgKCFjdXJhdGVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXJUaG91Z2h0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ID0ge1xuICAgICAgICAgIHRleHQ6IGN1cmF0ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaGlua2luZ0Jsb2NrKGN1cmF0ZWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sJzoge1xuICAgICAgICAvLyBDb21wYWN0IHRvb2wgZGlzcGxheTog4pqhVG9vbE5hbWUg4oaSIHJlc3VsdFxuICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnQuY29udGVudC5yZXBsYWNlKC9eW+KPuuKameKXi11cXHMqLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbENhbGwoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0Jzoge1xuICAgICAgICAvLyBJbmxpbmUgcmVzdWx0OiDilJTilIAgc3VtbWFyeVxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbFJlc3VsdChldmVudC5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYnVpbGQnOlxuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCB7IGxhYmVsOiAnYnVpbGQnLCBsYWJlbENvbG9yOiB0aGVtZS53YXJuaW5nIH0pO1xuXG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ3Rlc3QnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICByZXR1cm4gZXZlbnQuY29udGVudDtcblxuICAgICAgY2FzZSAncmVzcG9uc2UnOlxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHJlc3BvbnNlIHdpdGhvdXQgZXhjZXNzaXZlIGJ1bGxldHMsIHdyYXBwZWQgZm9yIHJlYWRhYmlsaXR5XG4gICAgICAgIGNvbnN0IGlzRXJyb3IgPSBldmVudC5yYXdUeXBlID09PSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCBpc0Vycm9yID8geyBsYWJlbDogJ2Vycm9yJywgbGFiZWxDb2xvcjogdGhlbWUuZXJyb3IgfSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpYyBnYXJiYWdlIGRldGVjdGlvbiAtIGNoZWNrcyBpZiBjb250ZW50IGxvb2tzIGxpa2UgaW50ZXJuYWwvc3lzdGVtIG91dHB1dFxuICAgKiB0aGF0IHNob3VsZG4ndCBiZSBzaG93biB0byB1c2Vycy4gVXNlcyBzdHJ1Y3R1cmFsIGNoZWNrcywgbm90IHBhdHRlcm4gbWF0Y2hpbmcuXG4gICAqL1xuICBwcml2YXRlIGlzR2FyYmFnZU91dHB1dChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRlbnQgc3RhcnRpbmcgd2l0aCA8IHRoYXQgaXNuJ3QgdmFsaWQgbWFya2Rvd24vY29kZVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJzwnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8aHR0cCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzwhJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRhaW5zIFwidG89ZnVuY3Rpb25zLlwiIG9yIFwidG89dG9vbHMuXCIgKGludGVybmFsIHJvdXRpbmcpXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ3RvPWZ1bmN0aW9ucy4nKSB8fCBjb250ZW50LmluY2x1ZGVzKCd0bz10b29scy4nKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogbG9va3MgbGlrZSBpbnRlcm5hbCBpbnN0cnVjdGlvbiAocXVvdGVkIHN5c3RlbSB0ZXh0KVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJ1wiJykgJiYgY29udGVudC5pbmNsdWRlcygnYmxvY2snKSAmJiBjb250ZW50LmluY2x1ZGVzKCd0b29sJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IHZlcnkgc2hvcnQgY29udGVudCB0aGF0J3MganVzdCB0aW1pbmcgaW5mb1xuICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IDMwICYmIC9lbGFwc2VkfHNlY29uZHM/fG1zXFxiL2kudGVzdChjb250ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogZ2liYmVyaXNoIC0gaGlnaCByYXRpbyBvZiBub24td29yZCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYWxwaGFDb3VudCA9IChjb250ZW50Lm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1xccy9nLCAnJykubGVuZ3RoO1xuICAgIGlmICh0b3RhbENvdW50ID4gMjAgJiYgYWxwaGFDb3VudCAvIHRvdGFsQ291bnQgPCAwLjUpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBMZXNzIHRoYW4gNTAlIGxldHRlcnMgPSBsaWtlbHkgZ2FyYmFnZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgY3VyYXRlUmVhc29uaW5nQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJykudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBsaW1pdGVkID1cbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID4gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnNcbiAgICAgICAgPyBub3JtYWxpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzKVxuICAgICAgICA6IG5vcm1hbGl6ZWQ7XG5cbiAgICBjb25zdCBtYXhTZWdtZW50cyA9IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzICogMztcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbWl0ZWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5mbGF0TWFwKGxpbmUgPT4gbGluZS5zcGxpdCgvKD88PVsuPyFdKVxccysvKSlcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL15b4oCiKuKPuuKXi1xcLVxcdTIwMjJdK1xccyovLCAnJykudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkZWR1cGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNlZ21lbnQgPSBzZWdtZW50LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWRTZWdtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKGtleSk7XG4gICAgICBkZWR1cGVkLnB1c2gobm9ybWFsaXplZFNlZ21lbnQpO1xuICAgICAgaWYgKGRlZHVwZWQubGVuZ3RoID49IG1heFNlZ21lbnRzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWR1cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpb3JpdGl6ZWQgPSB0aGlzLnByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhkZWR1cGVkKTtcbiAgICBpZiAocHJpb3JpdGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW1pdGVkU2VsZWN0aW9uID0gcHJpb3JpdGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMpO1xuICAgIGNvbnN0IGJ1bGxldGVkID0gbGltaXRlZFNlbGVjdGlvbi5tYXAobGluZSA9PiB0aGlzLmVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lKSk7XG5cbiAgICByZXR1cm4gYnVsbGV0ZWQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICgvXihb4oCiKuKPuuKXiy1dfFxcZCtbLildKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBg4oCiICR7bGluZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAvXihcXGQrWy4pXVxcc3xzdGVwXFxzKlxcZCt8cGxhblxcYnxuZXh0XFxifHRoZW5cXGJ8Z29hbFxcYikvaS50ZXN0KGxpbmUpIHx8XG4gICAgICAvXlstKuKAol1cXHMvLnRlc3QobGluZSkgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJy0+JykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJ+KGkicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCc6ICcpIHx8XG4gICAgICAvXFxiKHRlc3R8dmVyaWZ5fHZhbGlkYXRlfGNoZWNrfGJ1aWxkfHJ1bnxkZXBsb3l8ZGlmZnxsaW50fHR5cGUgP2NoZWNrfGZpeHxidWd8aXNzdWV8cmlza3xtaXRpZ2F0ZXxpbnZlc3RpZ2F0ZSlcXGIvaS50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKHNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlZCA9IHNlZ21lbnRzLm1hcCgodGV4dCwgaW5kZXgpID0+ICh7XG4gICAgICB0ZXh0LFxuICAgICAgaW5kZXgsXG4gICAgICBzY29yZTogdGhpcy5yZWFzb25pbmdTaWduYWxTY29yZSh0ZXh0KSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNTaWduYWwgPSBzY29yZWQuc29tZShpdGVtID0+IGl0ZW0uc2NvcmUgPiAwKTtcbiAgICBpZiAoIWhhc1NpZ25hbCkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIHNjb3JlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlZC5tYXAoaXRlbSA9PiBpdGVtLnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFzb25pbmdTaWduYWxTY29yZShsaW5lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5sb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAzO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbktleXdvcmRzID0gW1xuICAgICAgJ3Rvb2wnLCAnY29tbWFuZCcsICdzY3JpcHQnLCAnY29udGV4dCcsICdzdW1tYXInLCAncmlzaycsICdpc3N1ZScsXG4gICAgICAnaW52ZXN0aWdhdGUnLCAncm9vdCBjYXVzZScsICdyZW1lZGlhdCcsICdtaXRpZ2F0JywgJ2ZpeCcsICdwYXRjaCcsXG4gICAgICAndGVzdCcsICd2ZXJpZnknLCAndmFsaWRhdGUnLCAnY2hlY2snLCAnYnVpbGQnLCAnZGVwbG95JywgJ3J1bicsXG4gICAgICAnZGlmZicsICdsaW50JywgJ3R5cGVjaGVjaycsICdiZW5jaG1hcmsnLFxuICAgIF07XG4gICAgaWYgKGFjdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHNjb3JlICs9IDI7XG4gICAgfVxuXG4gICAgaWYgKC9bIzrihpJdfC0+Ly50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cblxuICAgIGlmICgvXihpKCd8IGEpbXxpIHdpbGx8bGV0IG1lfHN0YXJ0aW5nfG5vd3xva3xzdXJlKVxcYi9pLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMTIwKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVuZGVyVGhvdWdodChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQgJiYgdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dCA9PT0gbm9ybWFsaXplZCkge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyNCwgTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDQsIDExMCkpOyAvLyBSZXNwb25zaXZlIHRvIHRlcm1pbmFsIHdpZHRoXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBsaW5lSWR4ID0gMDsgbGluZUlkeCA8IGxpbmVzLmxlbmd0aDsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZUlkeF0hO1xuICAgICAgaWYgKCFsaW5lLnRyaW0oKSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JkLXdyYXAgZWFjaCBsaW5lXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoLyhcXHMrKS8pO1xuICAgICAgbGV0IGN1cnJlbnRMaW5lID0gJyc7XG5cbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBpZiAoKGN1cnJlbnRMaW5lICsgd29yZCkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgICAgLy8gRmlyc3QgbGluZSBvZiB0aGlzIHBhcmFncmFwaCBnZXRzIOKPuiwgcmVzdCBnZXQgaW5kZW50XG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IHdvcmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgY2FsbCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDij7ogW1NlYXJjaF0gcGF0dGVybjogXCJmb29cIiwgcGF0aDogXCJzcmNcIixcbiAgICogICAgICAgICAgICAgIG91dHB1dF9tb2RlOiBcImNvbnRlbnRcIiwgaGVhZF9saW1pdDogMzBcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbChgWyR7bmFtZU1hdGNoWzFdfV1gKX1cXG5gO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXTtcbiAgICBjb25zdCBhcmdzU3RyID0gbWF0Y2hbMl0hO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzIC0gNCwgNTYpO1xuXG4gICAgLy8gRm9ybWF0OiDij7ogW1Rvb2xOYW1lXSBhcmdzLi4uXG4gICAgY29uc3QgcHJlZml4ID0gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgNTsgLy8gXCLij7ogW1Rvb2xOYW1lXSBcIiB2aXNpYmxlIGxlbmd0aFxuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQocHJlZml4TGVuICsgNCk7IC8vIEV4dHJhIGluZGVudCBmb3Igd3JhcHBlZCBhcmdzXG5cbiAgICAvLyBQYXJzZSBhbmQgZm9ybWF0IGFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlVG9vbEFyZ3MoYXJnc1N0cik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4LnRyaW1FbmQoKX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IHByZWZpeDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXJnID0gYXJnc1tpXSE7XG4gICAgICBjb25zdCBhcmdUZXh0ID0gYCR7dGhlbWUudWkubXV0ZWQoYXJnLmtleSArICc6Jyl9ICR7dGhpcy5mb3JtYXRBcmdWYWx1ZShhcmcua2V5LCBhcmcudmFsdWUpfWA7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBpIDwgYXJncy5sZW5ndGggLSAxID8gJywgJyA6ICcnO1xuXG4gICAgICAvLyBDaGVjayBpZiB0aGlzIGFyZyBmaXRzIG9uIGN1cnJlbnQgbGluZVxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICBpZiAodGhpcy5zdHJpcEFuc2kodGVzdExpbmUpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lICE9PSBwcmVmaXgpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIGFyZ3VtZW50cyBmcm9tIHN0cmluZyBsaWtlOiBrZXk6IFwidmFsdWVcIiwga2V5MjogdmFsdWUyXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbEFyZ3MoYXJnc1N0cjogc3RyaW5nKTogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiB7XG4gICAgY29uc3QgYXJnczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIFNpbXBsZSByZWdleCB0byBleHRyYWN0IGtleTogdmFsdWUgcGFpcnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sKV0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIGFyZ3MucHVzaCh7IGtleTogbWF0Y2hbMV0hLCB2YWx1ZTogbWF0Y2hbMl0hLnRyaW0oKSB9KTtcbiAgICB9XG4gICAgcmV0dXJuIGFyZ3M7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGFuIGFyZ3VtZW50IHZhbHVlICh0cnVuY2F0ZSBsb25nIHN0cmluZ3MpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdEFyZ1ZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcbiAgICBjb25zdCBpc1F1b3RlZCA9IHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJyk7XG4gICAgY29uc3QgaW5uZXIgPSBpc1F1b3RlZCA/IHZhbHVlLnNsaWNlKDEsIC0xKSA6IHZhbHVlO1xuXG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBzaG91bGRQcmVzZXJ2ZSA9XG4gICAgICBsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3BhdHRlcm4nIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ3F1ZXJ5JyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdjbWQnO1xuXG4gICAgLy8gVHJ1bmNhdGUgbG9uZyB2YWx1ZXMgd2hlbiBub3QgZXhwbGljaXRseSBwcmVzZXJ2aW5nXG4gICAgY29uc3QgbWF4TGVuID0gNDA7XG4gICAgY29uc3QgdHJ1bmNhdGVkID0gc2hvdWxkUHJlc2VydmUgfHwgaW5uZXIubGVuZ3RoIDw9IG1heExlbiA/IGlubmVyIDogaW5uZXIuc2xpY2UoMCwgbWF4TGVuIC0gMykgKyAnLi4uJztcblxuICAgIHJldHVybiBpc1F1b3RlZCA/IGBcIiR7dHJ1bmNhdGVkfVwiYCA6IHRydW5jYXRlZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIHJlc3VsdCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDijr8gIEZvdW5kIDEyIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gQ2hlY2sgaWYgdGhpcyBpcyBhIHN1bW1hcnkgbGluZSAoZS5nLiwgXCJGb3VuZCBYIGxpbmVzXCIpXG4gICAgY29uc3Qgc3VtbWFyeU1hdGNoID0gY29udGVudC5tYXRjaCgvXihGb3VuZCBcXGQrICg/OmxpbmVzP3xmaWxlcz98bWF0Y2hlcz8pfFJlYWQgXFxkKyBsaW5lcz98V3JvdGUgXFxkKyBsaW5lcz98RWRpdGVkfENyZWF0ZWR8RGVsZXRlZCkvaSk7XG4gICAgaWYgKHN1bW1hcnlNYXRjaCkge1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvciBvdGhlciByZXN1bHRzLCBzaG93IHRydW5jYXRlZCBwcmV2aWV3XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMykge1xuICAgICAgY29uc3QgcHJldmlldyA9IGxpbmVzLnNsaWNlKDAsIDIpLmpvaW4oJ1xcbicpO1xuICAgICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtwcmV2aWV3fVxcbiAgJHt0aGVtZS51aS5tdXRlZChgLi4uICR7bGluZXMubGVuZ3RoIC0gMn0gbW9yZSBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClgKX1cXG5gO1xuICAgIH1cblxuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgdG9vbCBjYWxsOiDij7ogW1JlYWRdIGZpbGUudHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmdzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFxzKig/OlxcKCguKilcXCkpPyQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXSE7XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdPy50cmltKCkgfHwgJyc7XG5cbiAgICAvLyBJZiBubyBhcmdzLCBqdXN0IHNob3cgdG9vbCBuYW1lXG4gICAgaWYgKCFhcmdzU3RyKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske3Rvb2xOYW1lfV1gKX1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5jb2xzIC0gODsgLy8gTGVhdmUgcm9vbSBmb3IgbWFyZ2luc1xuXG4gICAgLy8gUGFyc2UgaW5kaXZpZHVhbCBwYXJhbXNcbiAgICBjb25zdCBwYXJhbXMgPSB0aGlzLnBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyKTtcbiAgICBpZiAocGFyYW1zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS50b29sKGBbJHt0b29sTmFtZX1dYCl9ICR7YXJnc1N0cn1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zKHRvb2xOYW1lLCBwYXJhbXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xQYXJhbXMoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlclxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sKGBbJHt0b29sTmFtZX1dYCl9IGA7XG4gICAgbGV0IGZpcnN0UGFyYW0gPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCBwYXJhbSBvZiBwYXJhbXMpIHtcbiAgICAgIGNvbnN0IGNvbG9yZWRWYWx1ZSA9IHRoaXMuY29sb3JQYXJhbVZhbHVlKHBhcmFtLmtleSwgcGFyYW0udmFsdWUpO1xuICAgICAgY29uc3QgcGFyYW1UZXh0ID0gYCR7cGFyYW0ua2V5fTogJHtjb2xvcmVkVmFsdWV9YDtcbiAgICAgIGNvbnN0IHBhcmFtU3RyID0gZmlyc3RQYXJhbSA/IHBhcmFtVGV4dCA6IGAsICR7cGFyYW1UZXh0fWA7XG5cbiAgICAgIC8vIENoZWNrIGlmIGFkZGluZyB0aGlzIHBhcmFtIHdvdWxkIGV4Y2VlZCB3aWR0aFxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIHBhcmFtU3RyO1xuICAgICAgY29uc3QgcGxhaW5MZW5ndGggPSB0aGlzLnZpc2libGVMZW5ndGgodGVzdExpbmUpO1xuXG4gICAgICBpZiAocGxhaW5MZW5ndGggPiBtYXhXaWR0aCAmJiAhZmlyc3RQYXJhbSkge1xuICAgICAgICAvLyBTdGFydCBuZXcgbGluZVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBwYXJhbVRleHQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBwYXJhbVN0cjtcbiAgICAgIH1cbiAgICAgIGZpcnN0UGFyYW0gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbG9yIGNyaXRpY2FsIHBhcmFtZXRlciB2YWx1ZXMgKHBhdGhzLCBjb21tYW5kcykgZm9yIHJlYWRhYmlsaXR5LlxuICAqL1xuICBwcml2YXRlIGNvbG9yUGFyYW1WYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJLZXkuaW5jbHVkZXMoJ3BhdGgnKSB8fCBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8IGxvd2VyS2V5ID09PSAncGF0dGVybicgfHwgbG93ZXJLZXkgPT09ICdxdWVyeScpIHtcbiAgICAgIHJldHVybiB0aGVtZS53YXJuaW5nKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGxvd2VyS2V5ID09PSAnY29tbWFuZCcgfHwgbG93ZXJLZXkgPT09ICdjbWQnKSB7XG4gICAgICByZXR1cm4gdGhlbWUudG9vbCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgc2hvcnQgc3VtbWFyeSBmcm9tIHRvb2wgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFN1bW1hcnkodG9vbE5hbWU6IHN0cmluZywgYXJnc1N0cjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHBhdGgvZmlsZSBmb3IgZmlsZSBvcGVyYXRpb25zXG4gICAgaWYgKFsncmVhZCcsICd3cml0ZScsICdlZGl0JywgJ2dsb2InLCAnZ3JlcCcsICdzZWFyY2gnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgY29uc3QgcGF0aE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvKD86cGF0aHxmaWxlX3BhdGh8cGF0dGVybik6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKHBhdGhNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXRoID0gcGF0aE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLmZpbGU/LnBhdGggPyB0aGVtZS5maWxlLnBhdGgocGF0aCkgOiB0aGVtZS51aS5tdXRlZChwYXRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvbW1hbmQgZm9yIGJhc2hcbiAgICBpZiAodG9vbCA9PT0gJ2Jhc2gnKSB7XG4gICAgICBjb25zdCBjbWRNYXRjaCA9IGFyZ3NTdHIubWF0Y2goL2NvbW1hbmQ6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKGNtZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNtZE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKGNtZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIHJlc3VsdDog4o6/ICBGb3VuZCBYIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFBhcnNlIGNvbW1vbiByZXN1bHQgcGF0dGVybnMgZm9yIHN1bW1hcnlcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC8oXFxkKylcXHMqbGluZXM/L2kpO1xuICAgIGNvbnN0IGZpbGVNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKVxccyooPzpmaWxlcz98bWF0Y2hlcz8pL2kpO1xuICAgIGNvbnN0IHJlYWRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL3JlYWQuKj8oXFxkKylcXHMqbGluZXM/L2kpO1xuXG4gICAgbGV0IHN1bW1hcnk6IHN0cmluZztcbiAgICBpZiAocmVhZE1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYFJlYWQgJHtyZWFkTWF0Y2hbMV19IGxpbmVzYDtcbiAgICB9IGVsc2UgaWYgKGxpbmVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2xpbmVNYXRjaFsxXX0gbGluZSR7bGluZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoZmlsZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7ZmlsZU1hdGNoWzFdfSBmaWxlJHtmaWxlTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChjb250ZW50Lm1hdGNoKC9eKHN1Y2Nlc3N8b2t8ZG9uZXxjb21wbGV0ZWR8d3JpdHRlbnxlZGl0ZWR8Y3JlYXRlZCkvaSkpIHtcbiAgICAgIHN1bW1hcnkgPSAn4pyTJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGNvbnRlbnQgZGlyZWN0bHksIHRydW5jYXRlZCBpZiBuZWVkZWRcbiAgICAgIHN1bW1hcnkgPSBjb250ZW50Lmxlbmd0aCA+IDQwID8gY29udGVudC5zbGljZSgwLCAzNykgKyAn4oCmJyA6IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgY29sb3JlZFN1bW1hcnkgPSB0aGlzLmNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5KTtcbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbG9yZWRTdW1tYXJ5fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBjb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXN1bW1hcnkpIHJldHVybiBzdW1tYXJ5O1xuICAgIGNvbnN0IGxvd2VyID0gc3VtbWFyeS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZmFpbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuZXJyb3Ioc3VtbWFyeSk7XG4gICAgfVxuICAgIGlmIChzdW1tYXJ5LnN0YXJ0c1dpdGgoJ+KckycpIHx8IGxvd2VyLmluY2x1ZGVzKCd1cGRhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2NyZWF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnd3JpdHRlbicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuc3VjY2VzcyhzdW1tYXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoZW1lLmluZm8oc3VtbWFyeSk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCByZXNwb25zZSB3aXRoIGJ1bGxldCBvbiBmaXJzdCBsaW5lXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXAgdGV4dCB3aXRoIGEgc2luZ2xlIGJ1bGxldCBvbiB0aGUgZmlyc3QgbGluZSBhbmQgdGlkeSBpbmRlbnRhdGlvbiBmb3IgcmVhZGFiaWxpdHkuXG4gICAqIFByZXZlbnRzIGF3a3dhcmQgbWlkLXdvcmQgdGVybWluYWwgd3JhcHBpbmcgYnkgaGFuZGxpbmcgdGhlIGxheW91dCBvdXJzZWx2ZXMuXG4gICAqL1xuICBwcml2YXRlIHdyYXBCdWxsZXRUZXh0KFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IG1heFdpZHRoPzogbnVtYmVyOyBsYWJlbD86IHN0cmluZzsgbGFiZWxDb2xvcj86ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgfSA9IHt9XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgY2xlYW5lZCA9IGNvbnRlbnQucmVwbGFjZSgvXlvij7rigKLil4tdXFxzKi8sICcnKS50cmltRW5kKCk7XG4gICAgaWYgKCFjbGVhbmVkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIFJlc2VydmUgYSBsaXR0bGUgbWFyZ2luIHRvIHJlZHVjZSB0ZXJtaW5hbCB3cmFwIGppdHRlclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDIwLCBNYXRoLm1pbihvcHRpb25zLm1heFdpZHRoID8/IGF2YWlsYWJsZVdpZHRoIC0gMiwgYXZhaWxhYmxlV2lkdGgpKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBvcHRpb25zLmxhYmVsXG4gICAgICA/IGAke29wdGlvbnMubGFiZWxDb2xvciA/IG9wdGlvbnMubGFiZWxDb2xvcihvcHRpb25zLmxhYmVsKSA6IG9wdGlvbnMubGFiZWx9JHt0aGVtZS51aS5tdXRlZCgnIMK3ICcpfWBcbiAgICAgIDogJyc7XG4gICAgY29uc3QgYnVsbGV0UHJlZml4ID0gYCR7YnVsbGV0fSAke2xhYmVsVGV4dH1gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKGAke2J1bGxldH0gYCkpO1xuXG4gICAgY29uc3QgbGluZXMgPSBjbGVhbmVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGZpcnN0Tm9uRW1wdHkgPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCByYXdMaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBsaW5lID0gcmF3TGluZS50cmltKCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpOyAvLyBQcmVzZXJ2ZSBpbnRlbnRpb25hbCBzcGFjaW5nIGJldHdlZW4gcGFyYWdyYXBoc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC9cXHMrLyk7XG4gICAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICAgIGNvbnN0IHByZWZpeExlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50KTtcbiAgICAgICAgaWYgKHByZWZpeExlbmd0aCArIHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gbWF4V2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGlua2luZyBibG9jayB3aXRoIGVuaGFuY2VkIHZpc3VhbCBkZXNpZ24uXG4gICAqIFVzZXMgYSBkaXN0aW5jdCB2aXN1YWwgc3R5bGUgdG8gY2xlYXJseSBzZXBhcmF0ZSB0aGlua2luZyBmcm9tIHJlc3BvbnNlcy5cbiAgICpcbiAgICogSW4gcGxhaW4gb3V0cHV0IG1vZGUgd2Uga2VlcCBpdCBzaW1wbGUgYW5kIGlubGluZSB3aXRoIHRoZSByZXN0IG9mIHRoZVxuICAgKiBzdHJlYW0gc28gdHJhbnNjcmlwdHMgcmVtYWluIGVhc3kgdG8gc2Nhbi5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VGhpbmtpbmdCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQobm9ybWFsaXplZCwge1xuICAgICAgbGFiZWw6ICd0aGlua2luZycsXG4gICAgICBsYWJlbENvbG9yOiB0aGVtZS5pbmZvID8/ICgodmFsdWU6IHN0cmluZykgPT4gdmFsdWUpLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB3cmFwVGV4dFRvV2lkdGgodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGlmICghdGV4dC50cmltKCkpIHJldHVybiBbJyddO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gd2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzdHJlYW1pbmcgZWxhcHNlZCB0aW1lIGluIENsYXVkZSBDb2RlIHN0eWxlOiAzbSAzMHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBlbGFwc2VkID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSAvIDEwMDApO1xuICAgIGlmIChlbGFwc2VkIDwgNSkgcmV0dXJuIG51bGw7IC8vIERvbid0IHNob3cgZm9yIHZlcnkgc2hvcnQgZHVyYXRpb25zXG4gICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gZWxhcHNlZCAlIDYwO1xuICAgIGlmIChtaW5zID4gMCkge1xuICAgICAgcmV0dXJuIGAke21pbnN9bSAke3NlY3N9c2A7XG4gICAgfVxuICAgIHJldHVybiBgJHtzZWNzfXNgO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogU2hvd3MgYSB2aXN1YWwgc2VwYXJhdG9yIHdpdGggXCJoaXN0b3J5XCIgbGFiZWwgYW5kIGN0cmwrbyBoaW50XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzLCA4MCk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gYCAke2xhYmVsfSBgO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLm1heCgwLCBtYXhXaWR0aCAtIGxhYmVsVGV4dC5sZW5ndGgpO1xuICAgIGNvbnN0IGxlZnRQYWQgPSBNYXRoLmZsb29yKHBhZGRpbmcgLyAyKTtcbiAgICBjb25zdCByaWdodFBhZCA9IE1hdGguY2VpbChwYWRkaW5nIC8gMik7XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBzdHlsZTog4pWQ4pWQIGhpc3Rvcnkg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJ+KVkCcucmVwZWF0KGxlZnRQYWQpICsgbGFiZWxUZXh0ICsgJ+KVkCcucmVwZWF0KHJpZ2h0UGFkKSk7XG5cbiAgICByZXR1cm4gYFxcbiR7c2VwYXJhdG9yfVxcbiR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIHRvIHRoZSBldmVudCBxdWV1ZVxuICAgKiBUaGlzIGRpc3BsYXlzIGEgY29sbGFwc2VkIHZpZXcgd2l0aCBleHBhbnNpb24gaGludCAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqL1xuICBhZGRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogdm9pZCB7XG4gICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IHRoaXMuZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQsIGxhYmVsKTtcbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IGZvcm1hdHRlZENvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHRoZSBtb3N0IHJlY2VudCB0b29sIHJlc3VsdCBpbmxpbmUgKEN0cmwrTyBzdXBwb3J0KS5cbiAgICovXG4gIGV4cGFuZExhc3RUb29sUmVzdWx0KCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5sYXN0VG9vbFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZW5kZXJlZCA9IHRoaXMud3JhcEJ1bGxldFRleHQodGhpcy5sYXN0VG9vbFJlc3VsdCwgeyBsYWJlbDogJ3Rvb2wnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogcmVuZGVyZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFN0YXR1cyAvIG1vZGUgLS0tLS0tLS0tLS0tXG5cbiAgc2V0TW9kZShtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyk6IHZvaWQge1xuICAgIGNvbnN0IHdhc1N0cmVhbWluZyA9IHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgIC8vIFRyYWNrIHN0cmVhbWluZyBzdGFydCB0aW1lIGZvciBlbGFwc2VkIGRpc3BsYXlcbiAgICBpZiAobW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSAwOyAvLyBSZXNldCB0b2tlbiBjb3VudFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBBbHdheXMgcmVuZGVyIHByb21wdCB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50IChyaWNoIG1vZGUgb25seSlcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHRoZSBhbmltYXRlZCBzcGlubmVyIGZvciBzdHJlYW1pbmcgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHJldHVybjsgLy8gQWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5zcGlubmVyRnJhbWUgPSAodGhpcy5zcGlubmVyRnJhbWUgKyAxKSAlIHNwaW5uZXJGcmFtZXMuYnJhaWxsZS5sZW5ndGg7XG4gICAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gKHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgKyAxKSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aDtcbiAgICAgIC8vIFVwZGF0ZSBlbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uIChzbG93ZXIgY3ljbGUpXG4gICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSAzID09PSAwKSB7XG4gICAgICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAodGhpcy5lbGFwc2VkQ29sb3JGcmFtZSArIDEpICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgLy8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBzcGlubmVyL3N0YXIgZnJhbWVcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0sIDgwKTsgLy8gfjEyIEZQUyBmb3Igc21vb3RoIHNwaW5uZXIgYW5pbWF0aW9uXG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0aGUgYW5pbWF0ZWQgc3Bpbm5lclxuICAgKi9cbiAgcHJpdmF0ZSBzdG9wU3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0aXZpdHkgbWVzc2FnZSBkaXNwbGF5ZWQgd2l0aCBhbmltYXRlZCBzdGFyXG4gICAqIEV4YW1wbGU6IFwiUnVtaW5hdGluZ+KAplwiIHNob3dzIGFzIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCJcbiAgICovXG4gIHNldEFjdGl2aXR5KG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b2tlbiBjb3VudCBkaXNwbGF5ZWQgaW4gdGhlIGFjdGl2aXR5IGxpbmVcbiAgICovXG4gIHVwZGF0ZVN0cmVhbWluZ1Rva2Vucyh0b2tlbnM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b2tlbiBjb3VudCBhcyBjb21wYWN0IHN0cmluZyAoZS5nLiwgMS4yaywgMjRrLCAxMjhrKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb2tlbkNvdW50KHRva2VuczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodG9rZW5zIDwgMTAwMCkgcmV0dXJuIFN0cmluZyh0b2tlbnMpO1xuICAgIGlmICh0b2tlbnMgPCAxMDAwMCkgcmV0dXJuIGAkeyh0b2tlbnMgLyAxMDAwKS50b0ZpeGVkKDEpfWtgO1xuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHRva2VucyAvIDEwMDApfWtgO1xuICB9XG5cbiAgZ2V0TW9kZSgpOiAnaWRsZScgfCAnc3RyZWFtaW5nJyB7XG4gICAgcmV0dXJuIHRoaXMubW9kZTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCdW5kbGUoeyBtYWluOiBtZXNzYWdlLCBvdmVycmlkZTogbnVsbCwgc3RyZWFtaW5nOiBudWxsIH0pO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzQnVuZGxlKFxuICAgIHN0YXR1czogeyBtYWluPzogc3RyaW5nIHwgbnVsbDsgb3ZlcnJpZGU/OiBzdHJpbmcgfCBudWxsOyBzdHJlYW1pbmc/OiBzdHJpbmcgfCBudWxsIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2U3RyZWFtaW5nID0gdGhpcy5zdGF0dXNTdHJlYW1pbmc7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgbWFpbkNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgb3ZlcnJpZGVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICBpZiAoc3RhdHVzLm1haW4gIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMubWFpbiAhPT0gdGhpcy5zdGF0dXNNZXNzYWdlKSB7XG4gICAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBzdGF0dXMubWFpbjtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgbWFpbkNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzLm92ZXJyaWRlICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm92ZXJyaWRlICE9PSB0aGlzLnN0YXR1c092ZXJyaWRlKSB7XG4gICAgICB0aGlzLnN0YXR1c092ZXJyaWRlID0gc3RhdHVzLm92ZXJyaWRlO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBvdmVycmlkZUNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0NoYW5nZWQgPSBzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gcHJldlN0cmVhbWluZztcbiAgICBpZiAoc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoc3RyZWFtaW5nQ2hhbmdlZCkge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdHVzU3RyZWFtaW5nID0gc3RhdHVzLnN0cmVhbWluZztcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdJbnRyb2R1Y2UgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBwcmV2U3RyZWFtaW5nID09PSBudWxsICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBzdHJlYW1pbmdDbGVhcmVkID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgc3RhdHVzLnN0cmVhbWluZyA9PT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IG9ubHlTdHJlYW1pbmdDaGFuZ2VkID0gc3RyZWFtaW5nQ2hhbmdlZCAmJiAhbWFpbkNoYW5nZWQgJiYgIW92ZXJyaWRlQ2hhbmdlZDtcbiAgICBjb25zdCBza2lwU3RyZWFtaW5nUmVuZGVyID1cbiAgICAgIG9ubHlTdHJlYW1pbmdDaGFuZ2VkICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXN0cmVhbWluZ0ludHJvZHVjZSAmJiAhc3RyZWFtaW5nQ2xlYXJlZDtcblxuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkICYmICFza2lwU3RyZWFtaW5nUmVuZGVyO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU3RhdHVzTWV0YShcbiAgICBtZXRhOiB7XG4gICAgICBtb2RlbD86IHN0cmluZztcbiAgICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgICAgdmVyc2lvbj86IHN0cmluZztcbiAgICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICAgIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnN0YXR1c01ldGEsIC4uLm1ldGEgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdHVzTWV0YSk7XG4gICAgdGhpcy5zdGF0dXNNZXRhID0gbmV4dDtcbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZDtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGVUb2dnbGVzKHN0YXRlOiBQYXJ0aWFsPE1vZGVUb2dnbGVTdGF0ZT4pOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZVN0YXRlID0geyAuLi50aGlzLnRvZ2dsZVN0YXRlLCAuLi5zdGF0ZSB9O1xuICAgIGlmIChcbiAgICAgICFzdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXkgJiZcbiAgICAgICFzdGF0ZS50aGlua2luZ0hvdGtleSAmJlxuICAgICAgIXN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5hdXRvQ29udGludWVIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kdWFsUmxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kZWJ1Z0hvdGtleVxuICAgICkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBzZXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gKGxpbmVzID8/IFtdKS5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL1xccyskL2csICcnKSk7XG4gICAgY29uc3QgaGFzQ29udGVudCA9IG5vcm1hbGl6ZWQuc29tZSgobGluZSkgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkID0gdGhpcy5saW1pdElubGluZVBhbmVsKG5vcm1hbGl6ZWQpO1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShsaW1pdGVkKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmxpbmVQYW5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IGxpbWl0ZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHN1cHBvcnRzSW5saW5lUGFuZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMucGxhaW5Nb2RlO1xuICB9XG5cbiAgY2xlYXJJbmxpbmVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSByZXR1cm47XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGxpbWl0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heExpbmVzID0gTWF0aC5tYXgoNCwgTWF0aC5taW4odGhpcy5tYXhJbmxpbmVQYW5lbExpbmVzLCBNYXRoLm1heCgyLCB0aGlzLnJvd3MgLSA4KSkpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPD0gbWF4TGluZXMpIHtcbiAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBsaW5lcy5sZW5ndGggLSBtYXhMaW5lcztcbiAgICBjb25zdCBpbmRpY2F0b3IgPSB0aGVtZS51aS5tdXRlZChg4oCmICR7b3ZlcmZsb3d9IG1vcmUgbGluZXNgKTtcbiAgICBjb25zdCB0YWlsQ291bnQgPSBNYXRoLm1heCgxLCBtYXhMaW5lcyAtIDEpO1xuICAgIGNvbnN0IHRhaWwgPSBsaW5lcy5zbGljZSgtdGFpbENvdW50KTtcbiAgICByZXR1cm4gW2luZGljYXRvciwgLi4udGFpbF07XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gUHJvbXB0IHJlbmRlcmluZyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHJlbmRlclByb21wdCgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgLy8gVGhyb3R0bGUgcmVuZGVycyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdFJlbmRlclRpbWUgPCB0aGlzLnJlbmRlclRocm90dGxlTXMpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVuZGVyKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IHRydWU7XG4gICAgICAgIC8vIFRyYWNrIHRoZSB0aW1lciBmb3IgY2xlYW51cFxuICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMucmVuZGVyVGhyb3R0bGVNcyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb21wdEltbWVkaWF0ZSgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBgPiAke3RoaXMuYnVmZmVyfWA7XG4gICAgICBpZiAoIXRoaXMuaXNQcm9tcHRBY3RpdmUgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShgXFxyJHtFU0MuQ0xFQVJfTElORX0ke2xpbmV9YCk7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlOyAvLyBwcm9tcHQgZW5kcyBtaWQtbGluZSBieSBkZXNpZ25cbiAgICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxsb3dQcm9tcHRSZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSaWNoIGlubGluZSBtb2RlOiBwcm9tcHQgZmxvd3MgbmF0dXJhbGx5IHdpdGggY29udGVudFxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIHRoaXMubGFzdFJlbmRlcldpZHRoID0gbWF4V2lkdGg7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5idWlsZE92ZXJsYXlMaW5lcygpO1xuICAgIGlmICghb3ZlcmxheS5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJlZExpbmVzID0gb3ZlcmxheS5saW5lcy5tYXAobGluZSA9PiB0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIGlmICghcmVuZGVyZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG92ZXJsYXkucHJvbXB0SW5kZXgsIHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVkTGluZXMubGVuZ3RoO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcHJvbXB0IGFuZCBoYW5kbGUgaGVpZ2h0IGNoYW5nZXNcbiAgICAvLyBOb3RlOiBXZSBjaGVjayBsYXN0T3ZlcmxheUhlaWdodCA+IDAgdG8ga25vdyBpZiB0aGVyZSdzIHNvbWV0aGluZyB0byBjbGVhcixcbiAgICAvLyBidXQgd2UgdXNlIGxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCBmb3IgY3Vyc29yIHBvc2l0aW9uaW5nIChkZWZhdWx0aW5nIHRvIDAgaWYgY2xlYXJlZClcbiAgICBpZiAodGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ICYmIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiAwKSB7XG4gICAgICAvLyBNb3ZlIHVwIGZyb20gcHJvbXB0IHJvdyB0byB0b3Agb2Ygb3ZlcmxheVxuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXk/LnByb21wdEluZGV4ID8/IDA7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYWxsIHByZXZpb3VzIGxpbmVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7IGkrKykge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICAgIGlmIChpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCAtIDEpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbmV3IGhlaWdodCBpcyBncmVhdGVyLCB3ZSBuZWVkIHRvIGFkZCBibGFuayBsaW5lc1xuICAgICAgY29uc3QgZXh0cmFMaW5lcyA9IGhlaWdodCAtIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7XG4gICAgICBpZiAoZXh0cmFMaW5lcyA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHRyYUxpbmVzOyBpKyspIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wIG9mIHdoZXJlIG92ZXJsYXkgc2hvdWxkIHN0YXJ0XG4gICAgICBjb25zdCBtb3ZlQmFja1VwID0gTWF0aC5tYXgoMCwgaGVpZ2h0IC0gMSk7XG4gICAgICBpZiAobW92ZUJhY2tVcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHttb3ZlQmFja1VwfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcml0ZSBwcm9tcHQgbGluZXMgKG5vIHRyYWlsaW5nIG5ld2xpbmUgb24gbGFzdCBsaW5lKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIHRoaXMud3JpdGUocmVuZGVyZWRMaW5lc1tpXSB8fCAnJyk7XG4gICAgICBpZiAoaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQb3NpdGlvbiBjdXJzb3IgYXQgcHJvbXB0IGlucHV0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRDb2wgPSBNYXRoLm1pbihNYXRoLm1heCgxLCAzICsgdGhpcy5jdXJzb3IpLCB0aGlzLmNvbHMgfHwgODApO1xuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvTW92ZVVwfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZShgXFx4MWJbJHtwcm9tcHRDb2x9R2ApO1xuXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gcHJvbXB0Q29sO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgIHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IHRydWU7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0geyBsaW5lczogcmVuZGVyZWRMaW5lcywgcHJvbXB0SW5kZXggfTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkT3ZlcmxheUxpbmVzKCk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICAvLyBTaW1wbGUgaG9yaXpvbnRhbCBkaXZpZGVyIC0gY2xlYW4gYW5kIHJlbGlhYmxlXG4gICAgY29uc3QgZGl2aWRlciA9IHRoZW1lLnVpLm11dGVkKCfilIAnLnJlcGVhdChtYXhXaWR0aCkpO1xuXG4gICAgY29uc3QgZmFsbGJhY2tBY3Rpdml0eSA9ICgoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZyB8fCB0aGlzLnN0YXR1c092ZXJyaWRlIHx8IHRoaXMuc3RhdHVzTWVzc2FnZTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSB0aGlzLnN0cmlwQW5zaShyYXcpLnJlcGxhY2UoL15b4o+64oCiXVxccyovLCAnJykudHJpbSgpO1xuICAgICAgcmV0dXJuIGNsZWFuZWQgfHwgbnVsbDtcbiAgICB9KSgpO1xuXG4gICAgLy8gQWN0aXZpdHkgbGluZSAob25seSB3aGVuIHN0cmVhbWluZykgLSBzaG93czog4peQIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzKVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICh0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5KSkge1xuICAgICAgLy8gQ2xlYW4gc3Bpbm5lciBhbmltYXRpb24gdXNpbmcgYnJhaWxsZSBkb3RzICsgc2hpbW1lciBhY2NlbnQgZm9yIGEgcmljaGVyIGZlZWxcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFycyA9IHNwaW5uZXJGcmFtZXMuYnJhaWxsZTtcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFyID0gc3Bpbm5lckNoYXJzW3RoaXMuc3Bpbm5lckZyYW1lICUgc3Bpbm5lckNoYXJzLmxlbmd0aF0gPz8gJ+Kgiyc7XG4gICAgICBjb25zdCBzdGFyQ2hhciA9IHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzW3RoaXMuYWN0aXZpdHlTdGFyRnJhbWUgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGhdID8/ICfinLYnO1xuICAgICAgY29uc3Qgc3Bpbm5lckRlY29yYXRlZCA9IGAke3RoZW1lLmluZm8oc3Bpbm5lckNoYXIpfSR7dGhlbWUuYWNjZW50ID8gdGhlbWUuYWNjZW50KHN0YXJDaGFyKSA6IHN0YXJDaGFyfWA7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy5mb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk7XG4gICAgICBjb25zdCBnZW5lcmljQWN0aXZpdGllcyA9IFsnU3RyZWFtaW5nJywgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnXTtcbiAgICAgIGxldCBkaXNwbGF5QWN0aXZpdHkgPSB0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5IHx8ICcnO1xuICAgICAgaWYgKGdlbmVyaWNBY3Rpdml0aWVzLmluY2x1ZGVzKGRpc3BsYXlBY3Rpdml0eSkgJiYgZmFsbGJhY2tBY3Rpdml0eSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5O1xuICAgICAgfVxuICAgICAgaWYgKCFkaXNwbGF5QWN0aXZpdHkudHJpbSgpKSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHkgfHwgJ1dvcmtpbmcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVlZHNFbGxpcHNpcyA9ICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCfigKYnKSAmJiAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgnLi4uJyk7XG4gICAgICAvLyBGb3JtYXQ6IOKgiyBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDFtIDE5cyDCtyDihpExLjJrIHRva2VucylcbiAgICAgIC8vIEJ1aWxkIHBhcnRzIHdpdGggYW5pbWF0ZWQgZWxhcHNlZCB0aW1lIGNvbG9yXG4gICAgICBjb25zdCBlbGFwc2VkQ29sb3IgPSBjaGFsay5oZXgodGhpcy5lbGFwc2VkQ29sb3JGcmFtZXNbdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSAlIHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzLmxlbmd0aF0gPz8gJyNGNTlFMEInKTtcbiAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFsnZXNjIHRvIGludGVycnVwdCddO1xuICAgICAgaWYgKGVsYXBzZWQpIHBhcnRzLnB1c2goZWxhcHNlZENvbG9yKGVsYXBzZWQpKTtcbiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1Rva2VucyA+IDApIHtcbiAgICAgICAgcGFydHMucHVzaChg4oaRJHt0aGlzLmZvcm1hdFRva2VuQ291bnQodGhpcy5zdHJlYW1pbmdUb2tlbnMpfSB0b2tlbnNgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZWZpeCA9IGAke3NwaW5uZXJEZWNvcmF0ZWR9IGA7XG4gICAgICBjb25zdCBhY3Rpdml0eVRleHQgPSBgJHtkaXNwbGF5QWN0aXZpdHkudHJpbSgpfSR7bmVlZHNFbGxpcHNpcyA/ICfigKYnIDogJyd9YDtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IGAgJHt0aGVtZS51aS5tdXRlZCgnKCcpfSR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0ke3RoZW1lLnVpLm11dGVkKCcpJyl9YDtcblxuICAgICAgLy8gQnVpbGQgdGhlIGZ1bGwgYWN0aXZpdHkgbGluZSB3aXRoIGFuaW1hdGVkIGNvbG9yIGZvciBlbGFwc2VkIHRpbWVcbiAgICAgIGNvbnN0IGFjdGl2aXR5TGluZSA9IGAke3ByZWZpeH0ke2FjdGl2aXR5VGV4dH0ke3N1ZmZpeH1gO1xuXG4gICAgICAvLyBBbHdheXMgc2hvdyBmdWxsIHRleHQgLSB3cmFwIHRvIG11bHRpcGxlIGxpbmVzIGlmIG5lZWRlZFxuICAgICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgocHJlZml4KSk7XG4gICAgICBjb25zdCB3cmFwcGVkID0gdGhpcy53cmFwT3ZlcmxheUxpbmUoYWN0aXZpdHlMaW5lLCBtYXhXaWR0aCwgaW5kZW50KTtcbiAgICAgIGxpbmVzLnB1c2goLi4ud3JhcHBlZCk7XG4gICAgfVxuXG4gICAgLy8gVG9wIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvbXB0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IGxpbmVzLmxlbmd0aDtcbiAgICBjb25zdCBpbnB1dExpbmUgPSB0aGlzLmJ1aWxkSW5wdXRMaW5lKCk7XG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgYnkgc3BsaXR0aW5nIG9uIG5ld2xpbmVzXG4gICAgY29uc3QgaW5wdXRMaW5lcyA9IGlucHV0TGluZS5zcGxpdCgnXFxuJyk7XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGlucHV0TGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBCb3R0b20gZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbmxpbmUgcGFuZWwgKHBpbm5lZCBzY3JvbGwgYm94IGZvciBsaXZlIG91dHB1dC9tZW51cylcbiAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhbmVsTGluZSBvZiB0aGlzLmlubGluZVBhbmVsKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtwYW5lbExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRlIGlubGluZSBjb250ZW50IGZyb20gc3VnZ2VzdGlvbnMvdG9nZ2xlc1xuICAgICAgbGluZXMucHVzaChkaXZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyBTbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb25zXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW2luZGV4XSE7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaW5kZXggPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4O1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ+KWuCcpIDogdGhlbWUudWkubXV0ZWQoJyAnKTtcbiAgICAgICAgY29uc3QgY21kVGV4dCA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeShzdWdnZXN0aW9uLmNvbW1hbmQpIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5jb21tYW5kKTtcbiAgICAgICAgY29uc3QgZGVzY1RleHQgPSBpc0FjdGl2ZSA/IHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24gOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21hcmtlcn0gJHtjbWRUZXh0fSDigJQgJHtkZXNjVGV4dH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vZGVsIGFuZCBjb250ZXh0IGluZm9cbiAgICBjb25zdCBtb2RlbENvbnRleHRMaW5lID0gdGhpcy5idWlsZE1vZGVsQ29udGV4dExpbmUoKTtcbiAgICBpZiAobW9kZWxDb250ZXh0TGluZSkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21vZGVsQ29udGV4dExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBTdGF0dXMgKyBtZXRhIGJsb2NrIChpbmNsdWRlcyBkaXIvdmVyc2lvbi90b29sIHN1bW1hcnkpXG4gICAgY29uc3QgY2hyb21lTGluZXMgPSB0aGlzLmJ1aWxkQ2hyb21lTGluZXMoKTtcbiAgICBpZiAoY2hyb21lTGluZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGNocm9tZUxpbmUgb2YgY2hyb21lTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2Nocm9tZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlIHRvZ2dsZXNcbiAgICBjb25zdCB0b2dnbGVMaW5lcyA9IHRoaXMuYnVpbGRJbmxpbmVUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgdG9nZ2xlTGluZSBvZiB0b2dnbGVMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7dG9nZ2xlTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVnZW5kTGluZXMgPSB0aGlzLmJ1aWxkVG9nZ2xlTGVnZW5kKCk7XG4gICAgICBmb3IgKGNvbnN0IGxlZ2VuZCBvZiBsZWdlbmRMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7bGVnZW5kfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGVscCBoaW50XG4gICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RoZW1lLnVpLm11dGVkKCc/IGZvciBzaG9ydGN1dHMnKX1gLCBtYXhXaWR0aCkpO1xuXG4gICAgcmV0dXJuIHsgbGluZXMsIHByb21wdEluZGV4IH07XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbW9kZWwgbmFtZSBhbmQgY29udGV4dCB1c2FnZSBsaW5lIHdpdGggbWluaSBwcm9ncmVzcyBiYXJcbiAgICogRm9ybWF0OiBncHQtNCDCtyDilojilojilojilojilpHilpEgODUlIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYnVpbGRNb2RlbENvbnRleHRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gTW9kZWwgbmFtZSAocHJvdmlkZXIgLyBtb2RlbCBvciBqdXN0IG1vZGVsKVxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IMK3ICR7dGhpcy5zdGF0dXNNZXRhLm1vZGVsfWBcbiAgICAgIDogdGhpcy5zdGF0dXNNZXRhLm1vZGVsIHx8IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlcjtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuaW5mbyhtb2RlbCkpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWV0ZXIgd2l0aCBtaW5pIHByb2dyZXNzIGJhciAoc2hvd3MgdXNlZCBwZXJjZW50YWdlLCBub3QgcmVtYWluaW5nKVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdXNlZCA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgdGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KSk7XG4gICAgICBjb25zdCBiYXJXaWR0aCA9IDY7XG4gICAgICBjb25zdCBmaWxsZWQgPSBNYXRoLnJvdW5kKCh1c2VkIC8gMTAwKSAqIGJhcldpZHRoKTtcbiAgICAgIGNvbnN0IGVtcHR5ID0gYmFyV2lkdGggLSBmaWxsZWQ7XG4gICAgICAvLyBDb2xvciBiYXNlZCBvbiBob3cgZnVsbCB0aGUgY29udGV4dCBpcyAoZ3JlZW49bG93IHVzYWdlLCB5ZWxsb3c9bWVkaXVtLCByZWQ9aGlnaClcbiAgICAgIGNvbnN0IGJhckNvbG9yID0gdXNlZCA8IDUwID8gdGhlbWUuc3VjY2VzcyA6IHVzZWQgPCA4MCA/IHRoZW1lLndhcm5pbmcgOiB0aGVtZS5lcnJvcjtcbiAgICAgIGNvbnN0IGJhciA9IGJhckNvbG9yKCfilognLnJlcGVhdChmaWxsZWQpKSArIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdChlbXB0eSkpO1xuICAgICAgcGFydHMucHVzaChgJHtiYXJ9ICR7YmFyQ29sb3IoYCR7dXNlZH0lYCl9ICR7dGhlbWUudWkubXV0ZWQoJ2N0eCcpfWApO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICDCtyAgJykpIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBpbmxpbmUgdG9nZ2xlIGNvbnRyb2xzIC0gQ2xhdWRlIENvZGUgc3R5bGVcbiAgICogRm9ybWF0OiDij7Xij7UgYWNjZXB0IGVkaXRzIG9uIChzaGlmdCt0YWIgdG8gY3ljbGUpXG4gICAqIFJldHVybnMgd3JhcHBlZCBsaW5lcyB0byBlbnN1cmUgYWxsIHRvZ2dsZXMgKGluY2x1ZGluZyBSTCkgYXJlIHZpc2libGUgYmVsb3cgdGhlIGNoYXQgYm94LlxuICAgKi9cbiAgLyoqXG4gICAqIEJ1aWxkIHVuaWZpZWQgdG9nZ2xlIHN0YXR1cyBsaW5lIHdpdGggY29sb3ItY29kZWQgc3RhdGVzIGFuZCBpbnRlZ3JhdGVkIGV4cGxhbmF0aW9ucy5cbiAgICogRWFjaCB0b2dnbGUgaGFzIGEgZGlzdGluY3QgY29sb3IgZm9yIGVhc3kgaWRlbnRpZmljYXRpb24uXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzZWdtZW50cyB3aXRoIERJU1RJTkNUIGNvbG9ycyBmb3IgZWFjaCB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gMS4gUkwgbW9kZSAoQ1lBTikgLSBtdWx0aS1hZ2VudCB2cyBzaW5nbGUtcGFzc1xuICAgIGNvbnN0IHJsT24gPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQ7XG4gICAgY29uc3QgcmxJY29uID0gcmxPbiA/ICfwn6SWJyA6ICfimqEnO1xuICAgIGNvbnN0IHJsU3RhdHVzID0gcmxPbiA/IHRoZW1lLmluZm8oJ2R1YWwnKSA6IHRoZW1lLnVpLm11dGVkKCdzaW5nbGUnKTtcbiAgICBjb25zdCBybEV4cGxhaW4gPSBybE9uID8gJ211bHRpLWFnZW50JyA6ICdvbmUtcGFzcyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3JsSWNvbn0gJHtybFN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpURdJyl9ICR7dGhlbWUudWkubXV0ZWQocmxFeHBsYWluKX1gKTtcblxuICAgIC8vIDIuIEF1dG8tY29udGludWUgKE1BR0VOVEEvUFVSUExFKSAtIGtlZXAgZ29pbmcgdW50aWwgZG9uZVxuICAgIGNvbnN0IGNvbnRJY29uID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ/CflIQnIDogJ+KPuCc7XG4gICAgY29uc3QgY29udFN0YXR1cyA9IGF1dG9Db250aW51ZUFjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ2xvb3AnKSA6IHRoZW1lLnVpLm11dGVkKCdzdG9wJyk7XG4gICAgY29uc3QgY29udEV4cGxhaW4gPSBhdXRvQ29udGludWVBY3RpdmUgPyAndW50aWwgZG9uZScgOiAnZWFjaCByZXNwb25zZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2NvbnRJY29ufSAke2NvbnRTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVHXScpfSAke3RoZW1lLnVpLm11dGVkKGNvbnRFeHBsYWluKX1gKTtcblxuICAgIC8vIDMuIFZlcmlmeSAoWUVMTE9XKSAtIGF1dG8tdGVzdHMgYWZ0ZXIgZWRpdHNcbiAgICBjb25zdCB2ZXJpZnlJY29uID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ+KckycgOiAn4peLJztcbiAgICBjb25zdCB2ZXJpZnlTdGF0dXMgPSB2ZXJpZmljYXRpb25BY3RpdmUgPyB0aGVtZS53YXJuaW5nKCd0ZXN0JykgOiB0aGVtZS51aS5tdXRlZCgnc2tpcCcpO1xuICAgIGNvbnN0IHZlcmlmeUV4cGxhaW4gPSB2ZXJpZmljYXRpb25BY3RpdmUgPyAnYXV0by10ZXN0JyA6ICdubyB0ZXN0cyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3ZlcmlmeUljb259ICR7dmVyaWZ5U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylVl0nKX0gJHt0aGVtZS51aS5tdXRlZCh2ZXJpZnlFeHBsYWluKX1gKTtcblxuICAgIC8vIDQuIEFwcHJvdmFscyAoR1JFRU4vT1JBTkdFKSAtIGF1dG8gb3IgYXNrIGZvciBwZXJtaXNzaW9uXG4gICAgY29uc3QgYXBwckljb24gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAn8J+boScgOiAn4pyUJztcbiAgICBjb25zdCBhcHByU3RhdHVzID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gdGhlbWUud2FybmluZygnYXNrJykgOiB0aGVtZS5zdWNjZXNzKCdhdXRvJyk7XG4gICAgY29uc3QgYXBwckV4cGxhaW4gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAnY29uZmlybSBhbGwnIDogJ2F1dG8tYXBwcm92ZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2FwcHJJY29ufSAke2FwcHJTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVBXScpfSAke3RoZW1lLnVpLm11dGVkKGFwcHJFeHBsYWluKX1gKTtcblxuICAgIC8vIDUuIFRoaW5raW5nIChCTFVFKSAtIGJhbGFuY2VkIG9yIGRlZXAgcmVhc29uaW5nXG4gICAgY29uc3QgdGhpbmtpbmdJc0RlZXAgPSB0aGlua2luZ0xhYmVsID09PSAnZXh0ZW5kZWQnIHx8IHRoaW5raW5nTGFiZWwgPT09ICdkZWVwJztcbiAgICBjb25zdCB0aGlua0ljb24gPSB0aGlua2luZ0lzRGVlcCA/ICfwn6egJyA6ICfwn5KtJztcbiAgICBjb25zdCB0aGlua1N0YXR1cyA9IHRoaW5raW5nSXNEZWVwID8gdGhlbWUuaW5mbygnZGVlcCcpIDogdGhlbWUudWkubXV0ZWQoJ3F1aWNrJyk7XG4gICAgY29uc3QgdGhpbmtFeHBsYWluID0gdGhpbmtpbmdJc0RlZXAgPyAndGhvcm91Z2gnIDogJ2NvbmNpc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt0aGlua0ljb259ICR7dGhpbmtTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1tUQUJdJyl9ICR7dGhlbWUudWkubXV0ZWQodGhpbmtFeHBsYWluKX1gKTtcblxuICAgIC8vIDYuIERlYnVnIGxvZ2dpbmcgaW5kaWNhdG9yIChSRUQpIC0gdG9nZ2xlIHNob3dzIHdoZXRoZXIgY29uc29sZSBsb2dnaW5nIGlzIGVuYWJsZWRcbiAgICBjb25zdCBkZWJ1Z0FjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuZGVidWdFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IGRlYnVnSWNvbiA9IGRlYnVnQWN0aXZlID8gJ/CfkJ4nIDogJ/CflI0nO1xuICAgIGNvbnN0IGRlYnVnU3RhdHVzID0gZGVidWdBY3RpdmUgPyB0aGVtZS53YXJuaW5nKCdkZWJ1ZyBvbicpIDogdGhlbWUudWkubXV0ZWQoJ2RlYnVnIG9mZicpO1xuICAgIGNvbnN0IGRlYnVnRXhwbGFpbiA9IGRlYnVnQWN0aXZlID8gJ3ZlcmJvc2UgbG9ncycgOiAnc2lsZW50JztcbiAgICB0b2dnbGVzLnB1c2goYCR7ZGVidWdJY29ufSAke2RlYnVnU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbL2RlYnVnXScpfSAke3RoZW1lLnVpLm11dGVkKGRlYnVnRXhwbGFpbil9YCk7XG5cbiAgICAvLyA3LiBTaG9ydGN1dCBoaW50XG4gICAgdG9nZ2xlcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCc/IGhlbHAnKX1gKTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAyKTtcbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHModG9nZ2xlcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIExlZ2VuZCBpcyBub3cgaW50ZWdyYXRlZCBpbnRvIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSBmb3IgdW5pZmllZCBkaXNwbGF5XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGVnZW5kKCk6IHN0cmluZ1tdIHtcbiAgICAvLyBMZWdlbmQgZXhwbGFuYXRpb25zIG5vdyBpbnRlZ3JhdGVkIGRpcmVjdGx5IGludG8gdG9nZ2xlIGxpbmVcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ2hyb21lTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBzdGF0dXNMaW5lcyA9IHRoaXMuYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aCk7XG4gICAgY29uc3QgbWV0YUxpbmVzID0gdGhpcy5idWlsZE1ldGFCbG9jayhtYXhXaWR0aCk7XG4gICAgcmV0dXJuIFsuLi5zdGF0dXNMaW5lcywgLi4ubWV0YUxpbmVzXTtcbiAgfVxuXG4gIHByaXZhdGUgYWJicmV2aWF0ZVBhdGgocGF0aFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvbWUgPSBob21lZGlyKCk7XG4gICAgaWYgKGhvbWUgJiYgcGF0aFZhbHVlLnN0YXJ0c1dpdGgoaG9tZSkpIHtcbiAgICAgIHJldHVybiBwYXRoVmFsdWUucmVwbGFjZShob21lLCAnficpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFN0YXR1c0Jsb2NrKG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3RhdHVzTGFiZWwgPSB0aGlzLmNvbXBvc2VTdGF0dXNMYWJlbCgpO1xuICAgIGlmICghc3RhdHVzTGFiZWwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEFkZCBhbmltYXRlZCBzcGlubmVyIHdoZW4gc3RyZWFtaW5nIGZvciBkeW5hbWljIHZpc3VhbCBmZWVkYmFja1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0gJHt0aGlzLmFwcGx5VG9uZShzdGF0dXNMYWJlbC50ZXh0LCBzdGF0dXNMYWJlbC50b25lKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnc3RhdHVzJyl9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSkge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgncnVudGltZScpfSAke3RoZW1lLnVpLm11dGVkKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW5pbWF0ZWQgY29udGV4dCBtZXRlciBmb3Igc21vb3RoIGNvbG9yIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLmNvbnRleHRNZXRlci51cGRhdGUodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5jb250ZXh0TWV0ZXIucmVuZGVyKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1ldGFCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Byb2ZpbGUnLCB0aGlzLnN0YXR1c01ldGEucHJvZmlsZSwgJ2luZm8nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXIgJiYgdGhpcy5zdGF0dXNNZXRhLm1vZGVsXG4gICAgICA/IGAke3RoaXMuc3RhdHVzTWV0YS5wcm92aWRlcn0gLyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ21vZGVsJywgbW9kZWwsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2RpcicsIHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEud3JpdGVzKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3dyaXRlcycsIHRoaXMuc3RhdHVzTWV0YS53cml0ZXMsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5KSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Rvb2xzJywgdGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5LCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnc2Vzc2lvbicsIHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnZlcnNpb24pIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnYnVpbGQnLCBgdiR7dGhpcy5zdGF0dXNNZXRhLnZlcnNpb259YCwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgY29tcG9zZVN0YXR1c0xhYmVsKCk6IHsgdGV4dDogc3RyaW5nOyB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIH0gfCBudWxsIHtcbiAgICBjb25zdCBzdGF0dXNlcyA9IFt0aGlzLnN0YXR1c1N0cmVhbWluZywgdGhpcy5zdGF0dXNPdmVycmlkZSwgdGhpcy5zdGF0dXNNZXNzYWdlXS5maWx0ZXIoXG4gICAgICAodmFsdWUsIGluZGV4LCBhcnIpOiB2YWx1ZSBpcyBzdHJpbmcgPT4gQm9vbGVhbih2YWx1ZSkgJiYgYXJyLmluZGV4T2YodmFsdWUpID09PSBpbmRleFxuICAgICk7XG4gICAgY29uc3QgdGV4dCA9IHN0YXR1c2VzLmxlbmd0aCA+IDAgPyBzdGF0dXNlcy5qb2luKCcgLyAnKSA6ICdSZWFkeSBmb3IgcHJvbXB0cyc7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9IG5vcm1hbGl6ZWQuaW5jbHVkZXMoJ3JlYWR5JykgPyAnc3VjY2VzcycgOiAnaW5mbyc7XG4gICAgcmV0dXJuIHsgdGV4dCwgdG9uZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRNZXRhU2VnbWVudChcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgdG9uZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdtdXRlZCdcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xvcml6ZXIgPVxuICAgICAgdG9uZSA9PT0gJ3N1Y2Nlc3MnXG4gICAgICAgID8gdGhlbWUuc3VjY2Vzc1xuICAgICAgICA6IHRvbmUgPT09ICd3YXJuJ1xuICAgICAgICAgID8gdGhlbWUud2FybmluZ1xuICAgICAgICAgIDogdG9uZSA9PT0gJ2Vycm9yJ1xuICAgICAgICAgICAgPyB0aGVtZS5lcnJvclxuICAgICAgICAgICAgOiB0b25lID09PSAnbXV0ZWQnXG4gICAgICAgICAgICAgID8gdGhlbWUudWkubXV0ZWRcbiAgICAgICAgICAgICAgOiB0aGVtZS5pbmZvO1xuICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9ICR7Y29sb3JpemVyKHZhbHVlKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVRvbmUodGV4dDogc3RyaW5nLCB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRvbmUpIHtcbiAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgICByZXR1cm4gdGhlbWUuc3VjY2Vzcyh0ZXh0KTtcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICByZXR1cm4gdGhlbWUud2FybmluZyh0ZXh0KTtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHRleHQpO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhlbWUuaW5mbyh0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10sIG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJyAgfCAgJyk7XG5cbiAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHNlZ21lbnQudHJpbSgpO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSBjb250aW51ZTtcbiAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy50cnVuY2F0ZUxpbmUobm9ybWFsaXplZCwgbWF4V2lkdGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGAke2N1cnJlbnR9JHtzZXBhcmF0b3J9JHtub3JtYWxpemVkfWA7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShjdXJyZW50LCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRDb250cm9sTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHRvZ2dsZUxpbmUgPSB0aGlzLmJ1aWxkVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdtb2RlcycpfSAke3RoZW1lLnVpLm11dGVkKCfigLonKX0gJHt0b2dnbGVMaW5lfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3J0Y3V0TGluZSA9IHRoaXMuYnVpbGRTaG9ydGN1dExpbmUoKTtcbiAgICBpZiAoc2hvcnRjdXRMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdrZXlzJyl9ICAke3Nob3J0Y3V0TGluZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgYSBjb21wYWN0IHRvZ2dsZSBsaW5lIGxpa2UgQ2xhdWRlIENvZGU6XG4gICAqIFwi4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVwiXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkQ29tcGFjdFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8gU2hvdyB0aGUgbW9zdCByZWxldmFudCBtb2RlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkO1xuXG4gICAgLy8gRWRpdCBtb2RlIGluZGljYXRvclxuICAgIGNvbnN0IGVkaXRJY29uID0gJ+KPteKPtSc7XG4gICAgY29uc3QgZWRpdFN0YXRlID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2FwcHJvdmFsIHJlcXVpcmVkJyA6ICdhY2NlcHQgZWRpdHMnO1xuICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoZWRpdEljb24pfSAke2VkaXRTdGF0ZX0gJHt0aGVtZS5zdWNjZXNzKCdvbicpfWApO1xuXG4gICAgLy8gVGhpbmtpbmcgbW9kZSAoaWYgYWN0aXZlKVxuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPSAodGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ01vZGVMYWJlbCB8fCAnJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHRoaW5raW5nTGFiZWwgJiYgdGhpbmtpbmdMYWJlbCAhPT0gJ29mZicpIHtcbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3RoaW5raW5nJyl9ICR7dGhlbWUuaW5mbyh0aGlua2luZ0xhYmVsKX1gKTtcbiAgICB9XG5cbiAgICAvLyBDeWNsZSBoaW50XG4gICAgY29uc3QgY3ljbGVIaW50ID0gdGhlbWUudWkubXV0ZWQoJyhzaGlmdCt0YWIgdG8gY3ljbGUpJyk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSAke2N5Y2xlSGludH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9nZ2xlczogQXJyYXk8e1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIG9uOiBib29sZWFuO1xuICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICBob3RrZXk/OiBzdHJpbmcgfCBudWxsO1xuICAgIH0+ID0gW107XG5cbiAgICBjb25zdCBhZGRUb2dnbGUgPSAobGFiZWw6IHN0cmluZywgb246IGJvb2xlYW4sIGhvdGtleT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpID0+IHtcbiAgICAgIHRvZ2dsZXMucHVzaCh7IGxhYmVsLCBvbiwgaG90a2V5OiB0aGlzLmZvcm1hdEhvdGtleShob3RrZXkpLCB2YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgYXV0b1ZlcmlmeUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBjb25zdCB2ZXJpZnlWYWx1ZSA9IGF1dG9WZXJpZnlBY3RpdmVcbiAgICAgID8gJ2F1dG8nXG4gICAgICA6IHZlcmlmaWNhdGlvbkFjdGl2ZVxuICAgICAgICA/ICdvbidcbiAgICAgICAgOiAnb2ZmJztcblxuICAgIGFkZFRvZ2dsZSgnVmVyaWZ5JywgdmVyaWZpY2F0aW9uQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSwgdmVyaWZ5VmFsdWUpO1xuICAgIGNvbnN0IGFwcHJvdmFsTW9kZSA9IHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbE1vZGUgfHwgJ2F1dG8nO1xuICAgIGNvbnN0IGFwcHJvdmFsQWN0aXZlID0gYXBwcm92YWxNb2RlICE9PSAnYXV0byc7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0FwcHJvdmFscycsXG4gICAgICBhcHByb3ZhbEFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSxcbiAgICAgIGFwcHJvdmFsTW9kZSA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ2FzaydcbiAgICApO1xuXG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBhZGRUb2dnbGUoXG4gICAgICAnQXV0by1jb250aW51ZScsXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSA/ICdhdXRvLXZlcmlmeScgOiAnb2ZmJ1xuICAgICk7XG5cbiAgICBjb25zdCB0aGlua2luZ0xhYmVsUmF3ID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpO1xuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPVxuICAgICAgdGhpbmtpbmdMYWJlbFJhdy50b0xvd2VyQ2FzZSgpID09PSAnZXh0ZW5kZWQnID8gJ2RlZXAnIDogdGhpbmtpbmdMYWJlbFJhdyB8fCAnYmFsYW5jZWQnO1xuICAgIGNvbnN0IHRoaW5raW5nQWN0aXZlID0gdGhpbmtpbmdMYWJlbC5sZW5ndGggPiAwO1xuICAgIGFkZFRvZ2dsZSgnVGhpbmtpbmcnLCB0aGlua2luZ0FjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSwgdGhpbmtpbmdMYWJlbCk7XG5cbiAgICBjb25zdCBkdWFsUmxBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgbW9kZVZhbHVlID0gZHVhbFJsQWN0aXZlID8gJ2R1YWwtcmwtY29udCcgOiAnc2luZ2xlLWNvbnQnO1xuICAgIGFkZFRvZ2dsZSgnTW9kZScsIGR1YWxSbEFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxIb3RrZXksIG1vZGVWYWx1ZSk7XG5cbiAgICBjb25zdCBidWlsZExpbmUgPSAoaW5jbHVkZUhvdGtleXM6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlVGV4dCA9IHRvZ2dsZS5vbiA/IHRoZW1lLnN1Y2Nlc3ModG9nZ2xlLnZhbHVlIHx8ICdvbicpIDogdGhlbWUudWkubXV0ZWQodG9nZ2xlLnZhbHVlIHx8ICdvZmYnKTtcbiAgICAgICAgICBjb25zdCBob3RrZXlUZXh0ID1cbiAgICAgICAgICAgIGluY2x1ZGVIb3RrZXlzICYmIHRvZ2dsZS5ob3RrZXkgPyB0aGVtZS51aS5tdXRlZChgIFske3RvZ2dsZS5ob3RrZXl9XWApIDogJyc7XG4gICAgICAgICAgcmV0dXJuIGAke3RoZW1lLnVpLm11dGVkKGAke3RvZ2dsZS5sYWJlbH06YCl9ICR7c3RhdGVUZXh0fSR7aG90a2V5VGV4dH1gO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbih0aGVtZS51aS5tdXRlZCgnICAnKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBsZXQgbGluZSA9IGJ1aWxkTGluZSh0cnVlKTtcblxuICAgIC8vIFJlY29yZCB3aGljaCBob3RrZXlzIGFyZSBhY3R1YWxseSBzaG93biBzbyB0aGUgc2hvcnRjdXQgbGluZSBjYW4gYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZSA9IG5ldyBTZXQoXG4gICAgICB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+ICh0b2dnbGUuaG90a2V5ID8gdG9nZ2xlLmhvdGtleSA6IG51bGwpKVxuICAgICAgICAuZmlsdGVyKChrZXkpOiBrZXkgaXMgc3RyaW5nID0+IEJvb2xlYW4oa2V5KSlcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIGxpbmUgaXMgdG9vIHdpZGUsIGRyb3AgaG90a2V5IGhpbnRzIHRvIHByZXNlcnZlIGFsbCB0b2dnbGUgbGFiZWxzXG4gICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChsaW5lKSA+IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICAgIGxpbmUgPSBidWlsZExpbmUoZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lLnRyaW0oKSA/IGxpbmUgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNob3J0Y3V0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IGFkZEhvdGtleSA9IChsYWJlbDogc3RyaW5nLCBjb21ibz86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuZm9ybWF0SG90a2V5KGNvbWJvKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5oYXMobm9ybWFsaXplZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChgJHt0aGVtZS5pbmZvKG5vcm1hbGl6ZWQpfSAke3RoZW1lLnVpLm11dGVkKGxhYmVsKX1gKTtcbiAgICB9O1xuXG4gICAgLy8gQ29yZSBjb250cm9sc1xuICAgIGFkZEhvdGtleSgnaW50ZXJydXB0JywgJ0N0cmwrQycpO1xuICAgIGFkZEhvdGtleSgnY2xlYXIgaW5wdXQnLCAnQ3RybCtVJyk7XG5cbiAgICAvLyBGZWF0dXJlIHRvZ2dsZXMgKG9ubHkgaWYgaG90a2V5cyBhcmUgZGVmaW5lZClcbiAgICBhZGRIb3RrZXkoJ3ZlcmlmeScsIHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ2F1dG8tY29udGludWUnLCB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSk7XG4gICAgYWRkSG90a2V5KCd0aGlua2luZycsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgnbW9kZScsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5KTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICAgJykpO1xuICB9XG5cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRMaW5lKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBgW3Bhc3RlZCAke3RoaXMuY29sbGFwc2VkUGFzdGUubGluZXN9IGxpbmVzLCAke3RoaXMuY29sbGFwc2VkUGFzdGUuY2hhcnN9IGNoYXJzXSAoRW50ZXIvQ3RybCtMIGluc2VydCwgQmFja3NwYWNlIGRpc2NhcmQpYDtcbiAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfSR7dGhlbWUudWkubXV0ZWQoc3VtbWFyeSl9YCwgdGhpcy5zYWZlV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgLy8gQ2xhdWRlIENvZGUgdXNlcyBzaW1wbGUgJz4nIHByb21wdFxuICAgIGNvbnN0IHByb21wdCA9IHRoZW1lLnByaW1hcnkoJz4gJyk7XG4gICAgY29uc3QgcHJvbXB0V2lkdGggPSB0aGlzLnZpc2libGVMZW5ndGgocHJvbXB0KTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3QgY29udGludWF0aW9uSW5kZW50ID0gJyAgJzsgLy8gMiBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbldpZHRoID0gY29udGludWF0aW9uSW5kZW50Lmxlbmd0aDtcblxuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IC0gc3BsaXQgYnVmZmVyIG9uIG5ld2xpbmVzIGZpcnN0XG4gICAgLy8gSW4gc2VjcmV0IG1vZGUsIG1hc2sgYWxsIGNoYXJhY3RlcnMgd2l0aCBidWxsZXRzXG4gICAgY29uc3QgcmF3QnVmZmVyID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5zZWNyZXRNb2RlID8gJ+KAoicucmVwZWF0KHJhd0J1ZmZlci5sZW5ndGgpIDogcmF3QnVmZmVyO1xuICAgIGNvbnN0IGJ1ZmZlckxpbmVzID0gbm9ybWFsaXplZC5zcGxpdCgnXFxuJyk7XG5cbiAgICAvLyBXcmFwIGVhY2ggbG9naWNhbCBsaW5lIHRvIGZpdCB0ZXJtaW5hbCB3aWR0aCwgZXhwYW5kaW5nIHZlcnRpY2FsbHlcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IHRvdGFsQ2hhcnMgPSAwO1xuICAgIGxldCBjdXJzb3JMaW5lID0gMDtcbiAgICBsZXQgY3Vyc29yQ29sID0gMDtcbiAgICBsZXQgZm91bmRDdXJzb3IgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGxpbmVJbmRleCA9IDA7IGxpbmVJbmRleCA8IGJ1ZmZlckxpbmVzLmxlbmd0aDsgbGluZUluZGV4KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXJMaW5lc1tsaW5lSW5kZXhdID8/ICcnO1xuICAgICAgY29uc3QgaXNGaXJzdExvZ2ljYWxMaW5lID0gbGluZUluZGV4ID09PSAwO1xuICAgICAgY29uc3QgbGluZVN0YXJ0Q2hhciA9IHRvdGFsQ2hhcnM7XG5cbiAgICAgIC8vIERldGVybWluZSBhdmFpbGFibGUgd2lkdGggZm9yIHRoaXMgbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lV2lkdGggPSBtYXhXaWR0aCAtIHByb21wdFdpZHRoO1xuICAgICAgY29uc3QgY29udExpbmVXaWR0aCA9IG1heFdpZHRoIC0gY29udGludWF0aW9uV2lkdGg7XG5cbiAgICAgIC8vIFdyYXAgdGhpcyBsb2dpY2FsIGxpbmUgaW50byBkaXNwbGF5IGxpbmVzXG4gICAgICBsZXQgcmVtYWluaW5nID0gbGluZTtcbiAgICAgIGxldCBpc0ZpcnN0RGlzcGxheUxpbmUgPSB0cnVlO1xuXG4gICAgICB3aGlsZSAocmVtYWluaW5nLmxlbmd0aCA+IDAgfHwgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpID8gZmlyc3RMaW5lV2lkdGggOiBjb250TGluZVdpZHRoO1xuICAgICAgICBjb25zdCBjaHVuayA9IHJlbWFpbmluZy5zbGljZSgwLCBhdmFpbGFibGVXaWR0aCk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zbGljZShhdmFpbGFibGVXaWR0aCk7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIGRpc3BsYXkgbGluZVxuICAgICAgICBsZXQgZGlzcGxheUxpbmU6IHN0cmluZztcbiAgICAgICAgaWYgKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpIHtcbiAgICAgICAgICBkaXNwbGF5TGluZSA9IGAke3Byb21wdH0ke2NodW5rfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtjb250aW51YXRpb25JbmRlbnR9JHtjaHVua31gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJhY2sgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGlmICghZm91bmRDdXJzb3IpIHtcbiAgICAgICAgICBjb25zdCBjaHVua1N0YXJ0ID0gbGluZVN0YXJ0Q2hhciArIChsaW5lLmxlbmd0aCAtIHJlbWFpbmluZy5sZW5ndGggLSBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IGNodW5rRW5kID0gY2h1bmtTdGFydCArIGNodW5rLmxlbmd0aDtcbiAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgPj0gY2h1bmtTdGFydCAmJiB0aGlzLmN1cnNvciA8PSBjaHVua0VuZCkge1xuICAgICAgICAgICAgY3Vyc29yTGluZSA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRJbkNodW5rID0gdGhpcy5jdXJzb3IgLSBjaHVua1N0YXJ0O1xuICAgICAgICAgICAgY3Vyc29yQ29sID0gKChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IHByb21wdFdpZHRoIDogY29udGludWF0aW9uV2lkdGgpICsgb2Zmc2V0SW5DaHVuaztcbiAgICAgICAgICAgIGZvdW5kQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQucHVzaChkaXNwbGF5TGluZSk7XG4gICAgICAgIGlzRmlyc3REaXNwbGF5TGluZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIG5vdGhpbmcgbGVmdCBhbmQgdGhpcyB3YXMgYW4gZW1wdHkgbGluZSwgd2UgYWxyZWFkeSBhZGRlZCBpdFxuICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0b3RhbENoYXJzICs9IGxpbmUubGVuZ3RoICsgMTsgLy8gKzEgZm9yIHRoZSBuZXdsaW5lIHNlcGFyYXRvclxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjdXJzb3IgYXQgdmVyeSBlbmRcbiAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICBjdXJzb3JMaW5lID0gTWF0aC5tYXgoMCwgcmVzdWx0Lmxlbmd0aCAtIDEpO1xuICAgICAgY29uc3QgbGFzdExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjdXJzb3JDb2wgPSB0aGlzLnZpc2libGVMZW5ndGgobGFzdExpbmUpO1xuICAgIH1cblxuICAgIC8vIEFkZCBjdXJzb3IgaGlnaGxpZ2h0IHRvIHRoZSBhcHByb3ByaWF0ZSBwb3NpdGlvblxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFyZ2V0TGluZSA9IHJlc3VsdFtjdXJzb3JMaW5lXSA/PyAnJztcbiAgICAgIGNvbnN0IHZpc2libGVQYXJ0ID0gdGhpcy5zdHJpcEFuc2kodGFyZ2V0TGluZSk7XG4gICAgICBjb25zdCBjdXJzb3JQb3MgPSBNYXRoLm1pbihjdXJzb3JDb2wsIHZpc2libGVQYXJ0Lmxlbmd0aCk7XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpbmUgd2l0aCBjdXJzb3IgaGlnaGxpZ2h0XG4gICAgICBjb25zdCBiZWZvcmUgPSB2aXNpYmxlUGFydC5zbGljZSgwLCBjdXJzb3JQb3MpO1xuICAgICAgY29uc3QgYXQgPSB2aXNpYmxlUGFydC5jaGFyQXQoY3Vyc29yUG9zKSB8fCAnICc7XG4gICAgICBjb25zdCBhZnRlciA9IHZpc2libGVQYXJ0LnNsaWNlKGN1cnNvclBvcyArIDEpO1xuXG4gICAgICAvLyBQcmVzZXJ2ZSB0aGUgcHJvbXB0L2luZGVudCBzdHlsaW5nXG4gICAgICBjb25zdCBwcmVmaXggPSBjdXJzb3JMaW5lID09PSAwID8gcHJvbXB0IDogY29udGludWF0aW9uSW5kZW50O1xuICAgICAgY29uc3QgdGV4dFBhcnQgPSBjdXJzb3JMaW5lID09PSAwID8gYmVmb3JlLnNsaWNlKHByb21wdFdpZHRoKSA6IGJlZm9yZS5zbGljZShjb250aW51YXRpb25XaWR0aCk7XG4gICAgICByZXN1bHRbY3Vyc29yTGluZV0gPSBgJHtwcmVmaXh9JHt0ZXh0UGFydH0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIGN1cnNvciBjb2x1bW4gZm9yIHRlcm1pbmFsIHBvc2l0aW9uaW5nXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gY3Vyc29yQ29sICsgMTtcblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRXaW5kb3coYXZhaWxhYmxlOiBudW1iZXIpOiB7IHRleHQ6IHN0cmluZzsgY3Vyc29yOiBudW1iZXIgfSB7XG4gICAgaWYgKGF2YWlsYWJsZSA8PSAwKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHJldHVybiB7IHRleHQ6ICcnLCBjdXJzb3I6IDAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBjdXJzb3JJbmRleCA9IE1hdGgubWluKHRoaXMuY3Vyc29yLCBub3JtYWxpemVkLmxlbmd0aCk7XG5cbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5pbnB1dFJlbmRlck9mZnNldDtcbiAgICBpZiAoY3Vyc29ySW5kZXggPCBvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IGN1cnNvckluZGV4O1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGN1cnNvckluZGV4IC0gb2Zmc2V0IC0gYXZhaWxhYmxlICsgMTtcbiAgICBpZiAob3ZlcmZsb3cgPiAwKSB7XG4gICAgICBvZmZzZXQgKz0gb3ZlcmZsb3c7XG4gICAgfVxuICAgIGNvbnN0IG1heE9mZnNldCA9IE1hdGgubWF4KDAsIG5vcm1hbGl6ZWQubGVuZ3RoIC0gYXZhaWxhYmxlKTtcbiAgICBpZiAob2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBtYXhPZmZzZXQ7XG4gICAgfVxuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSBvZmZzZXQ7XG5cbiAgICBjb25zdCB3aW5kb3cgPSBub3JtYWxpemVkLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgYXZhaWxhYmxlKTtcbiAgICBjb25zdCBkaXNwbGF5ID0gd2luZG93LnNwbGl0KCcnKS5tYXAoY2hhciA9PiAoY2hhciA9PT0gJ1xcbicgPyBORVdMSU5FX1BMQUNFSE9MREVSIDogY2hhcikpLmpvaW4oJycpO1xuICAgIGNvbnN0IGN1cnNvckluV2luZG93ID0gTWF0aC5taW4oZGlzcGxheS5sZW5ndGgsIE1hdGgubWF4KDAsIGN1cnNvckluZGV4IC0gb2Zmc2V0KSk7XG5cbiAgICBjb25zdCBiZWZvcmUgPSBkaXNwbGF5LnNsaWNlKDAsIGN1cnNvckluV2luZG93KTtcbiAgICBjb25zdCBhdCA9IGRpc3BsYXkuY2hhckF0KGN1cnNvckluV2luZG93KSB8fCAnICc7XG4gICAgY29uc3QgYWZ0ZXIgPSBkaXNwbGF5LnNsaWNlKGN1cnNvckluV2luZG93ICsgMSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogYCR7YmVmb3JlfSR7RVNDLlJFVkVSU0V9JHthdH0ke0VTQy5SRVNFVH0ke2FmdGVyfWAsXG4gICAgICBjdXJzb3I6IGN1cnNvckluV2luZG93LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIGNvbnN0IHRleHQgPSB0aGlzLmNvbGxhcHNlZFBhc3RlLnRleHQ7XG4gICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgLy8gRGlzcGxheSB0aGUgcGFzdGVkIGNvbnRlbnQgaW4gY2hhdCwgdGhlbiBzdWJtaXRcbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIC8vIFN1Ym1pdCB0aGUgcGFzdGUgY29udGVudCAoZGlzcGxheVVzZXJQcm9tcHQgaXMgY2FsbGVkIHdpdGhpbiBzdWJtaXRUZXh0IGZvciBub24tc2xhc2ggY29tbWFuZHMpXG4gICAgdGhpcy5zdWJtaXRUZXh0KHRleHQpO1xuICB9XG5cbiAgY2FwdHVyZUlucHV0KG9wdGlvbnM6IHsgYWxsb3dFbXB0eT86IGJvb2xlYW47IHRyaW0/OiBib29sZWFuOyByZXNldEJ1ZmZlcj86IGJvb2xlYW4gfSA9IHt9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgYWxyZWFkeSBpbiBwcm9ncmVzcycpKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5yZXNldEJ1ZmZlcikge1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IHtcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgdHJpbTogb3B0aW9ucy50cmltICE9PSBmYWxzZSxcbiAgICAgICAgICBhbGxvd0VtcHR5OiBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxJbnB1dENhcHR1cmUocmVhc29uPzogdW5rbm93bik6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2FwdHVyZSA9IHRoaXMuaW5wdXRDYXB0dXJlO1xuICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICBjYXB0dXJlLnJlamVjdD8uKHJlYXNvbiA/PyBuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICB9XG5cblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyYXBPdmVybGF5TGluZSh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGluZGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5zcGxpdCgvKFxccyspLyk7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgbmV4dCA9IGN1cnJlbnQgKyB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChuZXh0KSA+IHdpZHRoICYmIGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICAgIC8vIERvbid0IHRydW5jYXRlIC0ganVzdCBwdXNoIHRoZSBsaW5lIGFzLWlzIChpdCBmaXRzIHdpdGhpbiB3aWR0aClcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50LnRyaW1FbmQoKSk7XG4gICAgICAgIGN1cnJlbnQgPSBpbmRlbnQgKyB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnQudHJpbUVuZCgpKTtcbiAgICB9XG5cbiAgICAvLyBJZiBubyBsaW5lcyB3ZXJlIHByb2R1Y2VkLCByZXR1cm4gdGhlIG9yaWdpbmFsIHRleHQgd2l0aG91dCB0cnVuY2F0aW9uXG4gICAgcmV0dXJuIGxpbmVzLmxlbmd0aCA/IGxpbmVzIDogW3RleHRdO1xuICB9XG5cbiAgcHJpdmF0ZSBzYWZlV2lkdGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5vdXRwdXQuaXNUVFkgPyB0aGlzLmNvbHMgfHwgODAgOiA4MDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgY29scyAtIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSB2aXNpYmxlTGVuZ3RoKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAwO1xuICAgIHJldHVybiB0aGlzLnN0cmlwQW5zaSh2YWx1ZSkubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBzdHJpcEFuc2kodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xcdTAwMUJcXFtbMC0/XSpbIC0vXSpbQC1+XS9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIHRydW5jYXRlTGluZSh2YWx1ZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgY29uc3QgbGltaXQgPSBNYXRoLm1heCgxLCB3aWR0aCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBjb25zdCB0b2tlbnMgPSB2YWx1ZS5zcGxpdCgvKFxceDFiXFxbWzAtOTtdKm0pL3UpO1xuICAgIGxldCB2aXNpYmxlID0gMDtcbiAgICBsZXQgdHJ1bmNhdGVkID0gZmFsc2U7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICAgIGlmICghdG9rZW4pIGNvbnRpbnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmICgvXlxceDFiXFxbWzAtOTtdKm0kL3UudGVzdCh0b2tlbikpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2aXNpYmxlID49IGxpbWl0KSB7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVtYWluaW5nID0gbGltaXQgLSB2aXNpYmxlO1xuICAgICAgaWYgKHRva2VuLmxlbmd0aCA8PSByZW1haW5pbmcpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICB2aXNpYmxlICs9IHRva2VuLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNsaWNlTGVuZ3RoID0gTWF0aC5tYXgoMCwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHQgKz0gdG9rZW4uc2xpY2UoMCwgc2xpY2VMZW5ndGgpO1xuICAgICAgICAgIHZpc2libGUgKz0gc2xpY2VMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9ICfigKYnO1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHJ1bmNhdGVkICYmICFyZXN1bHQuZW5kc1dpdGgoRVNDLlJFU0VUKSkge1xuICAgICAgcmVzdWx0ICs9IEVTQy5SRVNFVDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0QnVmZmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICB9XG5cbiAgZ2V0Q3Vyc29yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3Vyc29yO1xuICB9XG5cbiAgc2V0QnVmZmVyKHRleHQ6IHN0cmluZywgY3Vyc29yUG9zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXIgPSB0ZXh0O1xuICAgIC8vIFZhbGlkYXRlIGN1cnNvciBwb3NpdGlvbiB0byBwcmV2ZW50IG91dC1vZi1ib3VuZHMgaXNzdWVzXG4gICAgY29uc3QgcmVxdWVzdGVkQ3Vyc29yID0gY3Vyc29yUG9zID8/IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmVxdWVzdGVkQ3Vyc29yLCB0ZXh0Lmxlbmd0aCkpO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRTZWNyZXRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnNlY3JldE1vZGUgPSBlbmFibGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhckJ1ZmZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0TW9kZVN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBjb21wYWN0aW5nIHN0YXR1cyB3aXRoIGFuaW1hdGVkIHNwaW5uZXIgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBVc2VzIOKcuyBjaGFyYWN0ZXIgd2l0aCBhbmltYXRpb24gdG8gaW5kaWNhdGUgY29udGV4dCBjb21wYWN0aW9uIGluIHByb2dyZXNzXG4gICAqL1xuICBzaG93Q29tcGFjdGluZ1N0YXR1cyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnNwaW5uZXJGcmFtZSsrO1xuICAgICAgICAvLyBDeWNsZSBhY3Rpdml0eSBwaHJhc2UgZXZlcnkgfjQgc2Vjb25kcyAoNTAgZnJhbWVzIGF0IDgwbXMpXG4gICAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDUwID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVBocmFzZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH0sIDgwKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBjb21wYWN0aW5nIHN0YXR1cyBhbmQgc3RvcCBzcGlubmVyIGFuaW1hdGlvblxuICAgKi9cbiAgaGlkZUNvbXBhY3RpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgZW1pdFByb21wdChjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnB1c2hQcm9tcHRFdmVudChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHVzZXIgcHJvbXB0IGltbWVkaWF0ZWx5IGluIHNjcm9sbGJhY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBXcml0ZXMgc3luY2hyb25vdXNseSB0byBlbnN1cmUgaXQgYXBwZWFycyBPTkNFIGluIHNjcm9sbGJhY2sgYmVmb3JlIHN0YXR1cyB1cGRhdGVzLlxuICAgKiBUaGUgcHJvbXB0IGlucHV0IGFyZWEgd2lsbCB0aGVuIGZsb2F0IGJlbG93IHRoaXMgYW5kIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgZGlzcGxheVVzZXJQcm9tcHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcblxuICAgIC8vIEFkZCB0byBldmVudCBxdWV1ZSBpbnN0ZWFkIG9mIHdyaXRpbmcgZGlyZWN0bHkgdG8gZW5zdXJlIHByb3BlciByZW5kZXJpbmdcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIExvdy1sZXZlbCBoZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHB1c2hQcm9tcHRFdmVudCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclByb21wdEFyZWEoKTogdm9pZCB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5sYXN0T3ZlcmxheT8ubGluZXMubGVuZ3RoID8/IHRoaXMucHJvbXB0SGVpZ2h0ID8/IDA7XG4gICAgaWYgKGhlaWdodCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ3Vyc29yIGlzIGF0IHByb21wdCByb3cuIE1vdmUgdXAgdG8gdG9wIG9mIG92ZXJsYXkgZmlyc3QuXG4gICAgaWYgKHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5LnByb21wdEluZGV4O1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGF0IHRvcCwgY2xlYXIgZWFjaCBsaW5lIGRvd253YXJkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGlmIChpIDwgaGVpZ2h0IC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBiYWNrIHRvIHRvcCAod2hlcmUgY29udGVudCBzaG91bGQgY29udGludWUgZnJvbSlcbiAgICBpZiAoaGVpZ2h0ID4gMSkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtoZWlnaHQgLSAxfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZSgnXFxyJyk7XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IDA7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm91dHB1dC5yb3dzIHx8IDI0O1xuICAgICAgdGhpcy5jb2xzID0gdGhpcy5vdXRwdXQuY29sdW1ucyB8fCA4MDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0EsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBQyxzQkFBQSxDQUFBSixPQUFBO0FBQ0EsSUFBQUssTUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sV0FBQSxHQUFBTixPQUFBO0FBQ0EsSUFBQU8sZUFBQSxHQUFBUCxPQUFBO0FBQ0EsSUFBQVEsWUFBQSxHQUFBUixPQUFBO0FBQW1ELFNBQUFJLHVCQUFBSyxDQUFBLFdBQUFBLENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLEdBQUFELENBQUEsS0FBQUUsT0FBQSxFQUFBRixDQUFBO0FBQUEsU0FBQVYsd0JBQUFVLENBQUEsRUFBQUcsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFkLHVCQUFBLFlBQUFBLENBQUFVLENBQUEsRUFBQUcsQ0FBQSxTQUFBQSxDQUFBLElBQUFILENBQUEsSUFBQUEsQ0FBQSxDQUFBQyxVQUFBLFNBQUFELENBQUEsTUFBQU8sQ0FBQSxFQUFBQyxDQUFBLEVBQUFDLENBQUEsS0FBQUMsU0FBQSxRQUFBUixPQUFBLEVBQUFGLENBQUEsaUJBQUFBLENBQUEsdUJBQUFBLENBQUEseUJBQUFBLENBQUEsU0FBQVMsQ0FBQSxNQUFBRixDQUFBLEdBQUFKLENBQUEsR0FBQUcsQ0FBQSxHQUFBRCxDQUFBLFFBQUFFLENBQUEsQ0FBQUksR0FBQSxDQUFBWCxDQUFBLFVBQUFPLENBQUEsQ0FBQUssR0FBQSxDQUFBWixDQUFBLEdBQUFPLENBQUEsQ0FBQU0sR0FBQSxDQUFBYixDQUFBLEVBQUFTLENBQUEsZ0JBQUFOLENBQUEsSUFBQUgsQ0FBQSxnQkFBQUcsQ0FBQSxPQUFBVyxjQUFBLENBQUFDLElBQUEsQ0FBQWYsQ0FBQSxFQUFBRyxDQUFBLE9BQUFLLENBQUEsSUFBQUQsQ0FBQSxHQUFBUyxNQUFBLENBQUFDLGNBQUEsS0FBQUQsTUFBQSxDQUFBRSx3QkFBQSxDQUFBbEIsQ0FBQSxFQUFBRyxDQUFBLE9BQUFLLENBQUEsQ0FBQUksR0FBQSxJQUFBSixDQUFBLENBQUFLLEdBQUEsSUFBQU4sQ0FBQSxDQUFBRSxDQUFBLEVBQUFOLENBQUEsRUFBQUssQ0FBQSxJQUFBQyxDQUFBLENBQUFOLENBQUEsSUFBQUgsQ0FBQSxDQUFBRyxDQUFBLFdBQUFNLENBQUEsS0FBQVQsQ0FBQSxFQUFBRyxDQUFBO0FBbEJuRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUE0REEsTUFBTWdCLEdBQUcsR0FBRztFQUNWQyxXQUFXLEVBQUUsV0FBVztFQUN4QkMsV0FBVyxFQUFFLFdBQVc7RUFDeEJDLFlBQVksRUFBRSxTQUFTO0VBQ3ZCQyxVQUFVLEVBQUUsU0FBUztFQUNyQkMsSUFBSSxFQUFFLFFBQVE7RUFDZEMsc0JBQXNCLEVBQUUsYUFBYTtFQUNyQ0MsdUJBQXVCLEVBQUUsYUFBYTtFQUN0Q0MsRUFBRSxFQUFFQSxDQUFDQyxHQUFXLEVBQUVDLEdBQVcsS0FBSyxRQUFRRCxHQUFHLElBQUlDLEdBQUcsR0FBRztFQUN2REMsTUFBTSxFQUFHRCxHQUFXLElBQUssUUFBUUEsR0FBRyxHQUFHO0VBQ3ZDRSxVQUFVLEVBQUUsUUFBUTtFQUNwQkMsT0FBTyxFQUFFLFNBQVM7RUFDbEJDLEtBQUssRUFBRSxTQUFTO0VBQ2hCO0VBQ0FDLGlCQUFpQixFQUFFQSxDQUFDQyxHQUFXLEVBQUVDLE1BQWMsS0FBSyxRQUFRRCxHQUFHLElBQUlDLE1BQU0sR0FBRztFQUM1RUMsbUJBQW1CLEVBQUUsUUFBUTtFQUM3QkMsV0FBVyxFQUFFLFFBQVE7RUFDckJDLGNBQWMsRUFBRTtBQUNsQixDQUFVO0FBRVYsTUFBTUMsbUJBQW1CLEdBQUcsR0FBRztBQUV4QixNQUFNQyxpQkFBaUIsU0FBU0Msd0JBQVksQ0FBQztFQU8xQ0MsSUFBSSxHQUFHLEVBQUU7RUFDVEMsSUFBSSxHQUFHLEVBQUU7RUFDVEMsZUFBZSxHQUFrQixJQUFJO0VBRXJDQyxVQUFVLEdBQWMsRUFBRTtFQUMxQkMsaUJBQWlCLEdBQUcsS0FBSztFQUV6QkMsTUFBTSxHQUFHLEVBQUU7RUFDWEMsTUFBTSxHQUFHLENBQUM7RUFDVkMsT0FBTyxHQUFhLEVBQUU7RUFDdEJDLFlBQVksR0FBRyxDQUFDLENBQUM7RUFDakJDLFdBQVcsR0FBa0UsRUFBRTtFQUMvRUMsZUFBZSxHQUFHLENBQUMsQ0FBQztFQUNwQkMsaUJBQWlCLEdBQTRCLEVBQUU7RUFDL0NDLG1CQUFtQixHQUFnQixJQUFJQyxHQUFHLENBQUMsQ0FBQztFQUM1Q0MsY0FBYyxHQUEwRCxJQUFJO0VBRTVFQyxJQUFJLEdBQXlCLE1BQU07RUFDbkNDLGNBQWMsR0FBa0IsSUFBSTtFQUNwQ0Msa0JBQWtCLEdBQWtCLElBQUk7RUFDeENDLGFBQWEsR0FBa0IsSUFBSTtFQUNuQ0MsY0FBYyxHQUFrQixJQUFJO0VBQ3BDQyxlQUFlLEdBQWtCLElBQUk7O0VBRTdDO0VBQ1FDLGdCQUFnQixHQUEyQixJQUFJO0VBQy9DQyxpQkFBaUIsR0FBNkIsSUFBSTtFQUVsREMsWUFBWSxHQUFHLENBQUM7RUFDaEJDLGVBQWUsR0FBMEIsSUFBSTtFQUNwQ0MsbUJBQW1CLEdBQUcsRUFBRTs7RUFFekM7RUFDUUMsdUJBQXVCLEdBQUcsRUFBRTtFQUM1QkMscUJBQXFCLEdBQUcsQ0FBQztFQUN6QkMsd0JBQXdCLEdBQTBCLElBQUk7RUFDN0NDLHVCQUF1QixHQUFHLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDOztFQUUvRDtFQUNRQyxlQUFlLEdBQWtCLElBQUk7RUFDckNDLG1CQUFtQixHQUFHLENBQUM7RUFDdkJDLGlCQUFpQixHQUFHLENBQUM7RUFDWkMsa0JBQWtCLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQztFQUNwRTtFQUNRQyxlQUFlLEdBQUcsQ0FBQztFQUMzQjtFQUNRQyxpQkFBaUIsR0FBRyxDQUFDO0VBQ1pDLGtCQUFrQixHQUFHLENBQUMsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLFNBQVMsRUFBRSxTQUFTLENBQUM7RUFDeEc7RUFDaUJDLGtCQUFrQixHQUFHLENBQ3BDLFVBQVUsRUFBRSxZQUFZLEVBQUUsV0FBVyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQzlEO0VBQ2dCQyx3QkFBd0IsR0FBRyxDQUFDO0VBQzVCQyx3QkFBd0IsR0FBRyxJQUFJO0VBQy9CQyxvQkFBb0IsR0FBRyxLQUFLO0VBQ3JDQyxrQkFBa0IsR0FBd0MsSUFBSTtFQUU5REMsVUFBVSxHQWNkLENBQUMsQ0FBQztFQUNFQyxXQUFXLEdBQW9CO0lBQ3JDQyxtQkFBbUIsRUFBRSxLQUFLO0lBQzFCQyxtQkFBbUIsRUFBRSxLQUFLO0lBQzFCQyxvQkFBb0IsRUFBRSxNQUFNO0lBQzVCQyxhQUFhLEVBQUUsS0FBSztJQUNwQkMsWUFBWSxFQUFFO0VBQ2hCLENBQUM7O0VBRUQ7O0VBRUE7RUFDUUMsV0FBV0EsQ0FBQSxFQUFTO0lBQzFCLElBQUksQ0FBQzNDLE1BQU0sR0FBRzRDLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRUQsSUFBSSxDQUFDRSxHQUFHLENBQUMsSUFBSSxDQUFDOUMsTUFBTSxFQUFFLElBQUksQ0FBQ0QsTUFBTSxDQUFDZ0QsTUFBTSxDQUFDLENBQUM7RUFDdEU7O0VBRUE7RUFDUUMsbUJBQW1CQSxDQUFDakQsTUFBOEIsRUFBRWtELElBQVksRUFBUTtJQUM5RSxJQUFJLElBQUksQ0FBQ0MsbUJBQW1CLEVBQUUsT0FBTyxDQUFDO0lBQ3RDLE1BQU1DLE9BQU8sR0FBR3BELE1BQU0sS0FBSyxPQUFPLEdBQUcsSUFBSSxDQUFDcUQsV0FBVyxHQUFHLElBQUksQ0FBQ0MsZ0JBQWdCO0lBQzdFLE1BQU1DLFNBQVMsR0FBRyxJQUFJLENBQUNDLGtCQUFrQixHQUFHSixPQUFPLENBQUNKLE1BQU07SUFDMUQsSUFBSU8sU0FBUyxJQUFJLENBQUMsRUFBRTtNQUNsQixJQUFJLENBQUNKLG1CQUFtQixHQUFHLElBQUk7TUFDL0I7SUFDRjtJQUNBLE1BQU1NLEtBQUssR0FBR1AsSUFBSSxDQUFDRixNQUFNLElBQUlPLFNBQVMsR0FBR0wsSUFBSSxHQUFHQSxJQUFJLENBQUNRLEtBQUssQ0FBQyxDQUFDLEVBQUVILFNBQVMsQ0FBQztJQUN4RSxJQUFJdkQsTUFBTSxLQUFLLE9BQU8sRUFBRTtNQUN0QixJQUFJLENBQUNxRCxXQUFXLElBQUlJLEtBQUs7SUFDM0IsQ0FBQyxNQUFNO01BQ0wsSUFBSSxDQUFDSCxnQkFBZ0IsSUFBSUcsS0FBSztJQUNoQztJQUNBLElBQUlBLEtBQUssQ0FBQ1QsTUFBTSxHQUFHRSxJQUFJLENBQUNGLE1BQU0sRUFBRTtNQUM5QixJQUFJLENBQUNHLG1CQUFtQixHQUFHLElBQUk7SUFDakM7RUFDRjs7RUFFQTtFQUNRUSxvQkFBb0JBLENBQUNULElBQVksRUFBVTtJQUNqRDtJQUNBO0lBQ0E7SUFDQSxPQUFPQSxJQUFJLENBQUNVLE9BQU8sQ0FBQywyRUFBMkUsRUFBRSxFQUFFLENBQUM7RUFDdEc7RUFFUUMsWUFBWUEsQ0FBQ0MsS0FBYyxFQUFpQjtJQUNsRCxJQUFJLENBQUNBLEtBQUssRUFBRUMsSUFBSSxDQUFDLENBQUMsRUFBRSxPQUFPLElBQUk7SUFDL0IsT0FBT0QsS0FBSyxDQUFDQyxJQUFJLENBQUMsQ0FBQyxDQUFDQyxXQUFXLENBQUMsQ0FBQztFQUNuQztFQUVRQyxlQUFlLEdBQXdDLElBQUk7RUFFM0RDLFlBQVksR0FBRyxDQUFDO0VBQ2hCQyxpQkFBaUIsR0FBRyxDQUFDO0VBQ3JCQyxXQUFXLEdBQWEsRUFBRTtFQUMxQkMsc0JBQXNCLEdBQUcsS0FBSztFQUM5QkMsY0FBYyxHQUFHLEtBQUs7RUFDdEJDLGlCQUFpQixHQUFHLENBQUM7RUFDWkMsZ0JBQWdCLEdBQUcsRUFBRTtFQUNyQkMsa0JBQWtCLEdBQUcsRUFBRTtFQUN2QkMsc0JBQXNCLEdBQUcsRUFBRTtFQUMzQkMsMkJBQTJCLEdBQUcsQ0FBQyxDQUFDLENBQUM7RUFDbEQ7RUFDaUJuQixrQkFBa0IsR0FBRyxFQUFFLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO0VBQ2hETCxtQkFBbUIsR0FBRyxLQUFLLENBQUMsQ0FBQztFQUM3QnlCLG1CQUFtQixHQUFHLENBQUM7RUFDdkJDLGdCQUFnQixHQUFHLEtBQUs7RUFDeEJ4QixXQUFXLEdBQUcsRUFBRTtFQUNoQnlCLFlBQVksR0FBRyxLQUFLO0VBQ3BCeEIsZ0JBQWdCLEdBQUcsRUFBRTtFQUNyQnlCLGVBQWUsR0FBMEIsSUFBSTtFQUM3Q0MscUJBQXFCLEdBQUcsQ0FBQztFQUN6QkMsbUJBQW1CLEdBQUcsQ0FBQztFQUN2QkMsaUJBQWlCLEdBQXdDLEVBQUU7RUFDbkU7RUFDUUMsbUJBQW1CLEdBQUcsRUFBRTtFQUN4QkMsa0JBQWtCLEdBQTBCLElBQUk7RUFDdkNDLG9CQUFvQixHQUFHLEVBQUUsQ0FBQyxDQUFDO0VBQ3BDQyxvQkFBb0IsR0FBa0IsSUFBSTtFQUMxQ0MsMEJBQTBCLEdBQUcsSUFBSTtFQUNqQ0MsaUJBQWlCLEdBQUcsS0FBSztFQUN6QkMsc0JBQXNCLEdBQUcsS0FBSyxDQUFDLENBQUU7RUFDakNDLFdBQVcsR0FBb0QsSUFBSTtFQUNuRUMsaUJBQWlCLEdBQUcsSUFBSTtFQUN4QkMsd0JBQXdCLEdBQUcsS0FBSztFQUNoQ0MsVUFBVSxHQUFHLEtBQUs7RUFDMUI7RUFDUUMsYUFBYSxHQUFHLEtBQUs7RUFDckJDLGNBQWMsR0FBRyxDQUFDO0VBQ1RDLGdCQUFnQixHQUFHLEVBQUUsQ0FBQyxDQUFDO0VBQ2hDQyxtQkFBbUIsR0FBMEIsSUFBSTtFQUN6RDtFQUNRQyxRQUFRLEdBQUcsS0FBSztFQUN4QjtFQUNRQyxrQkFBa0IsR0FBd0IsSUFBSTtFQUM5Q0Msb0JBQW9CLEdBQXNELElBQUk7RUFDOUVDLFlBQVksR0FNVCxJQUFJO0VBRWZDLFdBQVdBLENBQ1RDLE1BQTBCLEdBQUdDLE9BQU8sQ0FBQ0MsTUFBTSxFQUMzQ0MsS0FBd0IsR0FBR0YsT0FBTyxDQUFDRyxLQUFLLEVBQ3hDQyxRQUFtQyxFQUNuQztJQUNBLEtBQUssQ0FBQyxDQUFDO0lBQ1AsSUFBSSxDQUFDTCxNQUFNLEdBQUdBLE1BQU07SUFDcEIsSUFBSSxDQUFDRyxLQUFLLEdBQUdBLEtBQUs7SUFDbEIsSUFBSSxDQUFDRyxXQUFXLEdBQUdDLE9BQU8sQ0FBQyxJQUFJLENBQUNQLE1BQU0sQ0FBQ1EsS0FBSyxJQUFJLElBQUksQ0FBQ0wsS0FBSyxDQUFDSyxLQUFLLElBQUksQ0FBQ1AsT0FBTyxDQUFDUSxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDdkYsSUFBSSxDQUFDQyxTQUFTLEdBQUcsSUFBQUMsNkJBQWlCLEVBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDTCxXQUFXOztJQUV6RDtJQUNBLElBQUksQ0FBQ00sWUFBWSxHQUFHLElBQUlDLDRCQUFZLENBQUMsQ0FBQztJQUV0QyxJQUFJLENBQUNDLEVBQUUsR0FBR2hMLFFBQVEsQ0FBQ2lMLGVBQWUsQ0FBQztNQUNqQ1osS0FBSyxFQUFFLElBQUksQ0FBQ0EsS0FBSztNQUNqQkgsTUFBTSxFQUFFLElBQUksQ0FBQ0EsTUFBTTtNQUNuQmdCLFFBQVEsRUFBRSxJQUFJO01BQ2RDLE1BQU0sRUFBRSxFQUFFO01BQ1ZDLE9BQU8sRUFBRTtJQUNYLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQ0osRUFBRSxDQUFDSyxTQUFTLENBQUMsRUFBRSxDQUFDO0lBQ3JCLElBQUksQ0FBQ0Msa0JBQWtCLENBQUMsQ0FBQzs7SUFFekI7SUFDQSxJQUFJLENBQUN4QixrQkFBa0IsR0FBRyxNQUFNO01BQzlCLElBQUksQ0FBQyxJQUFJLENBQUNjLFNBQVMsSUFBSSxDQUFDLElBQUksQ0FBQ2YsUUFBUSxFQUFFO1FBQ3JDLElBQUksQ0FBQ3lCLGtCQUFrQixDQUFDLENBQUM7UUFDekIsSUFBSSxDQUFDQyxZQUFZLENBQUMsQ0FBQztNQUNyQjtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUNyQixNQUFNLENBQUNzQixFQUFFLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQzFCLGtCQUFrQixDQUFDO0lBRWpELElBQUksQ0FBQzJCLGtCQUFrQixDQUFDLENBQUM7RUFDM0I7RUFFQUMsVUFBVUEsQ0FBQSxFQUFTO0lBQ2pCLElBQUksQ0FBQyxJQUFJLENBQUNsQixXQUFXLEVBQUU7TUFDckI7SUFDRjtJQUVBLElBQUksQ0FBQyxJQUFJLENBQUNJLFNBQVMsRUFBRTtNQUNuQjtNQUNBO01BQ0EsSUFBSSxJQUFJLENBQUN6QixpQkFBaUIsSUFBSSxJQUFJLENBQUNFLFdBQVcsRUFBRTtRQUM5QyxJQUFJLENBQUNzQyxlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBLElBQUksQ0FBQ0MsS0FBSyxDQUFDOUosR0FBRyxDQUFDTSxzQkFBc0IsQ0FBQztNQUN0QyxJQUFJLENBQUNrSixrQkFBa0IsQ0FBQyxDQUFDO01BQ3pCLElBQUksQ0FBQ25DLGlCQUFpQixHQUFHLEtBQUs7TUFDOUIsSUFBSSxDQUFDRCwwQkFBMEIsR0FBRyxJQUFJO01BQ3RDLElBQUksQ0FBQzBDLEtBQUssQ0FBQzlKLEdBQUcsQ0FBQ0UsV0FBVyxDQUFDO01BQzNCO0lBQ0Y7O0lBRUE7SUFDQSxJQUFJLENBQUNzSixrQkFBa0IsQ0FBQyxDQUFDO0lBQ3pCLElBQUksQ0FBQ25DLGlCQUFpQixHQUFHLEtBQUs7SUFDOUIsSUFBSSxDQUFDRCwwQkFBMEIsR0FBRyxJQUFJO0lBQ3RDLElBQUksQ0FBQ3FDLFlBQVksQ0FBQyxDQUFDO0VBQ3JCO0VBRUFNLE9BQU9BLENBQUEsRUFBUztJQUNkO0lBQ0EsSUFBSSxDQUFDaEMsUUFBUSxHQUFHLElBQUk7SUFFcEIsSUFBSSxDQUFDaUMsa0JBQWtCLENBQUMsSUFBSUMsS0FBSyxDQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDdkQsSUFBSSxDQUFDQyx1QkFBdUIsQ0FBQyxDQUFDOztJQUU5QjtJQUNBLElBQUksSUFBSSxDQUFDcEMsbUJBQW1CLEVBQUU7TUFDNUJxQyxZQUFZLENBQUMsSUFBSSxDQUFDckMsbUJBQW1CLENBQUM7TUFDdEMsSUFBSSxDQUFDQSxtQkFBbUIsR0FBRyxJQUFJO0lBQ2pDOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUM5RSxlQUFlLEVBQUU7TUFDeEJvSCxhQUFhLENBQUMsSUFBSSxDQUFDcEgsZUFBZSxDQUFDO01BQ25DLElBQUksQ0FBQ0EsZUFBZSxHQUFHLElBQUk7SUFDN0I7SUFDQSxJQUFJLElBQUksQ0FBQ0gsZ0JBQWdCLEVBQUU7TUFDekIsSUFBSSxDQUFDQSxnQkFBZ0IsQ0FBQ3dILElBQUksQ0FBQyxDQUFDO01BQzVCLElBQUksQ0FBQ3hILGdCQUFnQixHQUFHLElBQUk7SUFDOUI7SUFDQSxJQUFJLElBQUksQ0FBQ0MsaUJBQWlCLEVBQUU7TUFDMUIsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQ3VILElBQUksQ0FBQyxDQUFDO01BQzdCLElBQUksQ0FBQ3ZILGlCQUFpQixHQUFHLElBQUk7SUFDL0I7SUFDQSxJQUFJLENBQUNrRyxZQUFZLENBQUNzQixPQUFPLENBQUMsQ0FBQztJQUMzQixJQUFBQyxpQ0FBaUIsRUFBQyxDQUFDOztJQUVuQjtJQUNBLElBQUksSUFBSSxDQUFDdkMsa0JBQWtCLEVBQUU7TUFDM0IsSUFBSSxDQUFDSSxNQUFNLENBQUNvQyxjQUFjLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQ3hDLGtCQUFrQixDQUFDO01BQzdELElBQUksQ0FBQ0Esa0JBQWtCLEdBQUcsSUFBSTtJQUNoQztJQUNBLElBQUksSUFBSSxDQUFDQyxvQkFBb0IsRUFBRTtNQUM3QixJQUFJLENBQUNNLEtBQUssQ0FBQ2lDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDdkMsb0JBQW9CLENBQUM7TUFDaEUsSUFBSSxDQUFDQSxvQkFBb0IsR0FBRyxJQUFJO0lBQ2xDOztJQUVBO0lBQ0EsSUFBSSxDQUFDd0Msa0JBQWtCLENBQUMsQ0FBQztJQUV6QixJQUFJLENBQUMsSUFBSSxDQUFDL0IsV0FBVyxFQUFFO01BQ3JCLElBQUksQ0FBQ1EsRUFBRSxDQUFDd0IsS0FBSyxDQUFDLENBQUM7TUFDZjtJQUNGO0lBRUEsSUFBSSxDQUFDLElBQUksQ0FBQzVCLFNBQVMsRUFBRTtNQUNuQjtNQUNBLElBQUksQ0FBQ2UsZUFBZSxDQUFDLENBQUM7TUFDdEIsSUFBSSxDQUFDQyxLQUFLLENBQUM5SixHQUFHLENBQUNPLHVCQUF1QixDQUFDO01BQ3ZDLElBQUksQ0FBQ3VKLEtBQUssQ0FBQzlKLEdBQUcsQ0FBQ0UsV0FBVyxDQUFDO01BQzNCLElBQUksQ0FBQzRKLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDbEI7SUFDQSxJQUFJLElBQUksQ0FBQ3ZCLEtBQUssQ0FBQ0ssS0FBSyxFQUFFO01BQ3BCLElBQUksQ0FBQ0wsS0FBSyxDQUFDb0MsVUFBVSxDQUFDLEtBQUssQ0FBQztJQUM5QjtJQUNBLElBQUksQ0FBQ3pCLEVBQUUsQ0FBQ3dCLEtBQUssQ0FBQyxDQUFDO0lBQ2YsSUFBSSxDQUFDbkQsV0FBVyxHQUFHLElBQUk7O0lBRXZCO0lBQ0EsSUFBSSxDQUFDNUYsVUFBVSxHQUFHLEVBQUU7RUFDdEI7RUFFQWlKLHNCQUFzQkEsQ0FBQSxFQUFTO0lBQzdCLElBQUksQ0FBQ25ELHdCQUF3QixHQUFHLElBQUk7RUFDdEM7RUFFQW9ELHFCQUFxQkEsQ0FBQ0MsTUFBZSxHQUFHLEtBQUssRUFBUTtJQUNuRCxJQUFJLENBQUNyRCx3QkFBd0IsR0FBRyxLQUFLO0lBQ3JDLElBQUlxRCxNQUFNLEVBQUU7TUFDVixJQUFJLENBQUNyQixZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGOztFQUVBOztFQUVRRSxrQkFBa0JBLENBQUEsRUFBUztJQUNqQyxJQUFJLENBQUMsSUFBSSxDQUFDakIsV0FBVyxFQUFFO01BQ3JCO0lBQ0Y7SUFDQSxJQUFJLENBQUNRLEVBQUUsQ0FBQ3VCLGtCQUFrQixDQUFDLE1BQU0sQ0FBQztJQUNsQ3ZNLFFBQVEsQ0FBQzZNLGtCQUFrQixDQUFDLElBQUksQ0FBQ3hDLEtBQUssRUFBRSxJQUFJLENBQUNXLEVBQUUsQ0FBQztJQUNoRCxJQUFJLElBQUksQ0FBQ1gsS0FBSyxDQUFDSyxLQUFLLEVBQUU7TUFDcEIsSUFBSSxDQUFDTCxLQUFLLENBQUNvQyxVQUFVLENBQUMsSUFBSSxDQUFDO0lBQzdCO0lBQ0E7SUFDQSxJQUFJLENBQUMxQyxvQkFBb0IsR0FBRyxDQUFDK0MsR0FBVyxFQUFFQyxHQUFpQixLQUFLO01BQzlELElBQUksQ0FBQyxJQUFJLENBQUNsRCxRQUFRLEVBQUU7UUFDbEIsSUFBSSxDQUFDbUQsY0FBYyxDQUFDRixHQUFHLEVBQUVDLEdBQUcsQ0FBQztNQUMvQjtJQUNGLENBQUM7SUFDRCxJQUFJLENBQUMxQyxLQUFLLENBQUNtQixFQUFFLENBQUMsVUFBVSxFQUFFLElBQUksQ0FBQ3pCLG9CQUFvQixDQUFDO0VBQ3REO0VBRVFrRCxlQUFlQSxDQUFBLEVBQVM7SUFDOUIsTUFBTUMsT0FBeUIsR0FBRztNQUNoQ3JHLElBQUksRUFBRSxJQUFJLENBQUNsRCxNQUFNO01BQ2pCQyxNQUFNLEVBQUUsSUFBSSxDQUFDQTtJQUNmLENBQUM7SUFDRCxJQUFJLENBQUN1SixJQUFJLENBQUMsUUFBUSxFQUFFRCxPQUFPLENBQUM7RUFDOUI7RUFFUUYsY0FBY0EsQ0FBQ0YsR0FBVyxFQUFFQyxHQUFpQixFQUFRO0lBQzNEO0lBQ0EsTUFBTUssYUFBYSxHQUFHTCxHQUFHLElBQUksSUFBSSxDQUFDTSxtQkFBbUIsQ0FBQ1AsR0FBRyxDQUFDO0lBQzFELE1BQU1RLFdBQVcsR0FBR0YsYUFBYSxLQUFLTixHQUFHLEdBQUc7TUFBRVMsUUFBUSxFQUFFVDtJQUFJLENBQUMsR0FBbUJDLEdBQUcsQ0FBQztJQUVwRixJQUFJLElBQUksQ0FBQ1Msb0JBQW9CLENBQUNWLEdBQUcsRUFBRVEsV0FBVyxDQUFDLEVBQUU7TUFDL0M7SUFDRjtJQUVBLElBQUksSUFBSSxDQUFDRyxnQkFBZ0IsQ0FBQ1gsR0FBRyxFQUFFUSxXQUFXLENBQUMsRUFBRTtNQUMzQztJQUNGOztJQUVBO0lBQ0EsTUFBTUksY0FBc0MsR0FBRztNQUM3QyxHQUFHLEVBQUUsR0FBRztNQUFHO01BQ1gsR0FBRyxFQUFFLEdBQUc7TUFBRztNQUNYLEdBQUcsRUFBRSxHQUFHO01BQUc7TUFDWCxHQUFHLEVBQUUsR0FBRztNQUFHO01BQ1gsR0FBRyxFQUFFLEdBQUc7TUFBRztNQUNYLEdBQUcsRUFBRSxHQUFHO01BQUc7TUFDWCxHQUFHLEVBQUUsR0FBRztNQUFHO01BQ1gsR0FBRyxFQUFFLEdBQUcsQ0FBRztJQUNiLENBQUM7SUFFRCxJQUFJWixHQUFHLElBQUlZLGNBQWMsQ0FBQ1osR0FBRyxDQUFDLEVBQUU7TUFDOUIsTUFBTWEsTUFBTSxHQUFHRCxjQUFjLENBQUNaLEdBQUcsQ0FBQztNQUNsQztNQUNBLElBQUksQ0FBQ2hFLG1CQUFtQixHQUFHLEVBQUU7TUFDN0IsUUFBUTZFLE1BQU07UUFDWixLQUFLLEdBQUc7VUFDTixJQUFJLENBQUNSLElBQUksQ0FBQywwQkFBMEIsQ0FBQztVQUNyQyxJQUFJLENBQUM1QixZQUFZLENBQUMsQ0FBQztVQUNuQjtRQUNGLEtBQUssR0FBRztVQUNOLElBQUksQ0FBQzRCLElBQUksQ0FBQyxzQkFBc0IsQ0FBQztVQUNqQyxJQUFJLENBQUM1QixZQUFZLENBQUMsQ0FBQztVQUNuQjtRQUNGLEtBQUssR0FBRztVQUNOLElBQUksQ0FBQzRCLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztVQUMzQixJQUFJLENBQUM1QixZQUFZLENBQUMsQ0FBQztVQUNuQjtRQUNGLEtBQUssR0FBRztVQUNOLElBQUksQ0FBQzRCLElBQUksQ0FBQyxlQUFlLENBQUM7VUFDMUIsSUFBSSxDQUFDNUIsWUFBWSxDQUFDLENBQUM7VUFDbkI7UUFDRjtVQUNFO01BQ0o7SUFDRjtJQUVBLElBQUksQ0FBQzZCLGFBQWEsRUFBRTtNQUNsQjtJQUNGO0lBRUEsSUFBSSxJQUFJLENBQUNwRCxZQUFZLElBQUlvRCxhQUFhLENBQUNRLElBQUksS0FBS1IsYUFBYSxDQUFDUyxJQUFJLEtBQUssR0FBRyxJQUFJVCxhQUFhLENBQUNTLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtNQUN6RyxJQUFJLENBQUMvQixrQkFBa0IsQ0FBQyxJQUFJQyxLQUFLLENBQUMseUJBQXlCLENBQUMsQ0FBQztNQUM3RCxJQUFJLENBQUMrQixXQUFXLENBQUMsQ0FBQztNQUNsQjtJQUNGOztJQUVBO0lBQ0EsTUFBTUMsV0FBVyxHQUFJSixNQUFjLElBQWM7TUFDL0MsTUFBTUssV0FBVyxHQUFHTCxNQUFNLENBQUNNLFdBQVcsQ0FBQyxDQUFDO01BQ3hDLE1BQU1DLFdBQVcsR0FBR1AsTUFBTSxDQUFDaEcsV0FBVyxDQUFDLENBQUM7O01BRXhDO01BQ0EsSUFBSXlGLGFBQWEsQ0FBQ1EsSUFBSSxJQUFJUixhQUFhLENBQUNlLEtBQUssSUFBSWYsYUFBYSxDQUFDUyxJQUFJLEVBQUVJLFdBQVcsQ0FBQyxDQUFDLEtBQUtELFdBQVcsRUFBRTtRQUNsRyxPQUFPLElBQUk7TUFDYjs7TUFFQTtNQUNBLElBQUlaLGFBQWEsQ0FBQ1EsSUFBSSxJQUFJUixhQUFhLENBQUNTLElBQUksS0FBS0ssV0FBVyxFQUFFO1FBQzVELE9BQU8sSUFBSTtNQUNiOztNQUVBO01BQ0EsSUFBSWQsYUFBYSxDQUFDZ0IsSUFBSSxJQUFJaEIsYUFBYSxDQUFDUyxJQUFJLEVBQUVJLFdBQVcsQ0FBQyxDQUFDLEtBQUtELFdBQVcsRUFBRTtRQUMzRSxPQUFPLElBQUk7TUFDYjs7TUFFQTtNQUNBLE1BQU1LLEdBQUcsR0FBR3ZCLEdBQUcsSUFBSU0sYUFBYSxDQUFDRyxRQUFRO01BQ3pDO01BQ0EsSUFBSWMsR0FBRyxJQUFJLHlCQUF5QixDQUFDQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxFQUFFO1FBQzlDLE9BQU8sSUFBSTtNQUNiOztNQUVBO01BQ0EsSUFBSUEsR0FBRyxJQUFJQSxHQUFHLEtBQUssT0FBT0wsV0FBVyxFQUFFLEVBQUU7UUFDdkMsT0FBTyxJQUFJO01BQ2I7TUFFQSxPQUFPLEtBQUs7SUFDZCxDQUFDO0lBRUQsTUFBTU8scUJBQXFCLEdBQUlaLE1BQTZCLElBQVc7TUFDckU7TUFDQSxJQUFJLENBQUM3RSxtQkFBbUIsR0FBRyxFQUFFO01BQzdCLElBQUk2RSxNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ2xCLElBQUksQ0FBQ1IsSUFBSSxDQUFDLDBCQUEwQixDQUFDO01BQ3ZDLENBQUMsTUFBTSxJQUFJUSxNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQ1IsSUFBSSxDQUFDLHNCQUFzQixDQUFDO01BQ25DLENBQUMsTUFBTSxJQUFJUSxNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQ1IsSUFBSSxDQUFDLGdCQUFnQixDQUFDO01BQzdCLENBQUMsTUFBTSxJQUFJUSxNQUFNLEtBQUssR0FBRyxFQUFFO1FBQ3pCLElBQUksQ0FBQ1IsSUFBSSxDQUFDLGVBQWUsQ0FBQztNQUM1QjtNQUNBLElBQUksQ0FBQzVCLFlBQVksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUFJd0MsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFO01BQ3BCUSxxQkFBcUIsQ0FBQyxHQUFHLENBQUM7TUFDMUI7SUFDRjtJQUVBLElBQUlSLFdBQVcsQ0FBQyxHQUFHLENBQUMsRUFBRTtNQUNwQlEscUJBQXFCLENBQUMsR0FBRyxDQUFDO01BQzFCO0lBQ0Y7SUFFQSxJQUFJUixXQUFXLENBQUMsR0FBRyxDQUFDLEVBQUU7TUFDcEJRLHFCQUFxQixDQUFDLEdBQUcsQ0FBQztNQUMxQjtJQUNGO0lBRUEsSUFBSVIsV0FBVyxDQUFDLEdBQUcsQ0FBQyxFQUFFO01BQ3BCUSxxQkFBcUIsQ0FBQyxHQUFHLENBQUM7TUFDMUI7SUFDRjtJQUVBLElBQUluQixhQUFhLENBQUNRLElBQUksSUFBSVIsYUFBYSxDQUFDUyxJQUFJLEVBQUVJLFdBQVcsQ0FBQyxDQUFDLEtBQUssR0FBRyxFQUFFO01BQ25FLElBQUksQ0FBQ2QsSUFBSSxDQUFDLFFBQVEsQ0FBQztNQUNuQjtJQUNGO0lBRUEsSUFBSUMsYUFBYSxDQUFDUSxJQUFJLElBQUlSLGFBQWEsQ0FBQ1MsSUFBSSxLQUFLLEdBQUcsRUFBRTtNQUNwRDtNQUNBO01BQ0E7TUFDQTtNQUNBO01BQ0E7O01BRUEsTUFBTVcsU0FBUyxHQUFHLElBQUksQ0FBQzdLLE1BQU0sQ0FBQ2dELE1BQU0sR0FBRyxDQUFDO01BQ3hDLElBQUk2SCxTQUFTLEVBQUU7UUFDYjtRQUNBLElBQUksQ0FBQzdLLE1BQU0sR0FBRyxFQUFFO1FBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7UUFDZixJQUFJLENBQUMySCxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO01BQ0EsSUFBSSxDQUFDRSxJQUFJLENBQUMsT0FBTyxFQUFFO1FBQUVxQjtNQUFVLENBQUMsQ0FBQztNQUNqQztJQUNGO0lBRUEsSUFBSXpCLEdBQUcsQ0FBQ2EsSUFBSSxJQUFJYixHQUFHLENBQUNjLElBQUksS0FBSyxHQUFHLEVBQUU7TUFDaEMsSUFBSSxJQUFJLENBQUNsSyxNQUFNLENBQUNnRCxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQzVCLElBQUksQ0FBQ3dHLElBQUksQ0FBQyxXQUFXLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSUosR0FBRyxDQUFDYSxJQUFJLElBQUliLEdBQUcsQ0FBQ2MsSUFBSSxLQUFLLEdBQUcsRUFBRTtNQUNoQyxJQUFJLENBQUNDLFdBQVcsQ0FBQyxDQUFDO01BQ2xCO0lBQ0Y7SUFFQSxJQUFJZixHQUFHLENBQUNhLElBQUksSUFBSWIsR0FBRyxDQUFDYyxJQUFJLEtBQUssR0FBRyxFQUFFO01BQ2hDLElBQUksSUFBSSxDQUFDekosY0FBYyxFQUFFO1FBQ3ZCLElBQUksQ0FBQ3FLLG9CQUFvQixDQUFDLENBQUM7UUFDM0I7TUFDRjtJQUNGOztJQUVBO0lBQ0EsSUFBSTFCLEdBQUcsQ0FBQ2EsSUFBSSxJQUFJYixHQUFHLENBQUNjLElBQUksS0FBSyxHQUFHLEVBQUU7TUFDaEMsSUFBSSxDQUFDVixJQUFJLENBQUMsb0JBQW9CLENBQUM7TUFDL0I7SUFDRjtJQUVBLElBQUlKLEdBQUcsQ0FBQ2MsSUFBSSxLQUFLLFFBQVEsSUFBSWQsR0FBRyxDQUFDYyxJQUFJLEtBQUssT0FBTyxFQUFFO01BQ2pEO01BQ0EsSUFBSSxJQUFJLENBQUN6SixjQUFjLEVBQUU7UUFDdkIsSUFBSSxDQUFDcUssb0JBQW9CLENBQUMsQ0FBQztRQUMzQjtNQUNGO01BQ0E7TUFDQSxJQUFJLElBQUksQ0FBQ0MsZUFBZSxDQUFDLElBQUksQ0FBQyxFQUFFO01BQ2hDO01BQ0EsSUFBSSxJQUFJLENBQUMvSyxNQUFNLENBQUNnTCxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDNUssV0FBVyxDQUFDNEMsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUM5RCxNQUFNaUksU0FBUyxHQUFHLElBQUksQ0FBQzVLLGVBQWUsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDQSxlQUFlLEdBQUcsSUFBSSxDQUFDRCxXQUFXLENBQUM0QyxNQUFNLEdBQ3pGLElBQUksQ0FBQzNDLGVBQWUsR0FDcEIsQ0FBQztRQUNMLElBQUksQ0FBQ0wsTUFBTSxHQUFHLElBQUksQ0FBQ0ksV0FBVyxDQUFDNkssU0FBUyxDQUFDLEVBQUVDLE9BQU8sSUFBSSxJQUFJLENBQUNsTCxNQUFNO01BQ25FO01BQ0EsSUFBSSxDQUFDbUwsVUFBVSxDQUFDLElBQUksQ0FBQ25MLE1BQU0sQ0FBQztNQUM1QjtJQUNGO0lBRUEsSUFBSXlKLGFBQWEsQ0FBQ1MsSUFBSSxLQUFLLFdBQVcsRUFBRTtNQUN0QyxJQUFJLElBQUksQ0FBQ3pKLGNBQWMsRUFBRTtRQUN2QixJQUFJLENBQUNBLGNBQWMsR0FBRyxJQUFJO1FBQzFCLElBQUksQ0FBQ21ILFlBQVksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQzBCLGVBQWUsQ0FBQyxDQUFDO1FBQ3RCO01BQ0Y7TUFDQSxJQUFJLElBQUksQ0FBQ3JKLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDbkIsSUFBSSxDQUFDRCxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUMwRCxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ3pELE1BQU0sR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQzBELEtBQUssQ0FBQyxJQUFJLENBQUN6RCxNQUFNLENBQUM7UUFDcEYsSUFBSSxDQUFDQSxNQUFNLEVBQUU7UUFDYixJQUFJLENBQUNtTCxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQ3hELFlBQVksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQzBCLGVBQWUsQ0FBQyxDQUFDO01BQ3hCO01BQ0E7SUFDRjtJQUVBLElBQUlHLGFBQWEsQ0FBQ1MsSUFBSSxLQUFLLFFBQVEsRUFBRTtNQUNuQyxJQUFJLElBQUksQ0FBQ2pLLE1BQU0sR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQ2dELE1BQU0sRUFBRTtRQUNwQyxJQUFJLENBQUNoRCxNQUFNLEdBQUcsSUFBSSxDQUFDQSxNQUFNLENBQUMwRCxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ3pELE1BQU0sQ0FBQyxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDMEQsS0FBSyxDQUFDLElBQUksQ0FBQ3pELE1BQU0sR0FBRyxDQUFDLENBQUM7UUFDcEYsSUFBSSxDQUFDbUwsaUJBQWlCLENBQUMsQ0FBQztRQUN4QixJQUFJLENBQUN4RCxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7SUFFQSxJQUFJRyxhQUFhLENBQUNTLElBQUksS0FBSyxNQUFNLEVBQUU7TUFDakMsSUFBSSxJQUFJLENBQUNqSyxNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ25CLElBQUksQ0FBQ0EsTUFBTSxFQUFFO1FBQ2IsSUFBSSxDQUFDb0wsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUN6RCxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7SUFFQSxJQUFJRyxhQUFhLENBQUNTLElBQUksS0FBSyxPQUFPLEVBQUU7TUFDbEMsSUFBSSxJQUFJLENBQUNqSyxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUNnRCxNQUFNLEVBQUU7UUFDcEMsSUFBSSxDQUFDL0MsTUFBTSxFQUFFO1FBQ2IsSUFBSSxDQUFDb0wsbUJBQW1CLENBQUMsQ0FBQztRQUMxQixJQUFJLENBQUN6RCxZQUFZLENBQUMsQ0FBQztRQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztNQUN4QjtNQUNBO0lBQ0Y7SUFFQSxJQUFJRyxhQUFhLENBQUNTLElBQUksS0FBSyxJQUFJLEVBQUU7TUFDL0IsSUFBSSxJQUFJLENBQUNvQixtQkFBbUIsQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFO1FBQ2hDO01BQ0Y7TUFDQSxJQUFJLElBQUksQ0FBQ3BMLE9BQU8sQ0FBQzhDLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDM0IsSUFBSSxJQUFJLENBQUM3QyxZQUFZLEtBQUssQ0FBQyxDQUFDLEVBQUU7VUFDNUIsSUFBSSxDQUFDQSxZQUFZLEdBQUcsSUFBSSxDQUFDRCxPQUFPLENBQUM4QyxNQUFNLEdBQUcsQ0FBQztRQUM3QyxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUM3QyxZQUFZLEdBQUcsQ0FBQyxFQUFFO1VBQ2hDLElBQUksQ0FBQ0EsWUFBWSxFQUFFO1FBQ3JCO1FBQ0E7UUFDQSxJQUFJLElBQUksQ0FBQ0EsWUFBWSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUNBLFlBQVksR0FBRyxJQUFJLENBQUNELE9BQU8sQ0FBQzhDLE1BQU0sRUFBRTtVQUNyRSxJQUFJLENBQUNoRCxNQUFNLEdBQUcsSUFBSSxDQUFDRSxPQUFPLENBQUMsSUFBSSxDQUFDQyxZQUFZLENBQUMsSUFBSSxFQUFFO1FBQ3JELENBQUMsTUFBTTtVQUNMLElBQUksQ0FBQ0EsWUFBWSxHQUFHLENBQUMsQ0FBQztVQUN0QixJQUFJLENBQUNILE1BQU0sR0FBRyxFQUFFO1FBQ2xCO1FBQ0EsSUFBSSxDQUFDQyxNQUFNLEdBQUcsSUFBSSxDQUFDRCxNQUFNLENBQUNnRCxNQUFNO1FBQ2hDLElBQUksQ0FBQ3VCLGlCQUFpQixHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQzVCLElBQUksQ0FBQzZHLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDeEQsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7TUFDeEI7TUFDQTtJQUNGO0lBRUEsSUFBSUcsYUFBYSxDQUFDUyxJQUFJLEtBQUssTUFBTSxFQUFFO01BQ2pDLElBQUksSUFBSSxDQUFDb0IsbUJBQW1CLENBQUMsQ0FBQyxDQUFDLEVBQUU7UUFDL0I7TUFDRjtNQUNBLElBQUksSUFBSSxDQUFDbkwsWUFBWSxLQUFLLENBQUMsQ0FBQyxFQUFFO1FBQzVCLElBQUksQ0FBQ0EsWUFBWSxFQUFFO1FBQ25CLElBQUksSUFBSSxDQUFDQSxZQUFZLElBQUksSUFBSSxDQUFDRCxPQUFPLENBQUM4QyxNQUFNLEVBQUU7VUFDNUMsSUFBSSxDQUFDN0MsWUFBWSxHQUFHLENBQUMsQ0FBQztVQUN0QixJQUFJLENBQUNILE1BQU0sR0FBRyxFQUFFO1FBQ2xCLENBQUMsTUFBTSxJQUFJLElBQUksQ0FBQ0csWUFBWSxJQUFJLENBQUMsRUFBRTtVQUNqQyxJQUFJLENBQUNILE1BQU0sR0FBRyxJQUFJLENBQUNFLE9BQU8sQ0FBQyxJQUFJLENBQUNDLFlBQVksQ0FBQyxJQUFJLEVBQUU7UUFDckQsQ0FBQyxNQUFNO1VBQ0w7VUFDQSxJQUFJLENBQUNBLFlBQVksR0FBRyxDQUFDLENBQUM7VUFDdEIsSUFBSSxDQUFDSCxNQUFNLEdBQUcsRUFBRTtRQUNsQjtRQUNBLElBQUksQ0FBQ0MsTUFBTSxHQUFHLElBQUksQ0FBQ0QsTUFBTSxDQUFDZ0QsTUFBTTtRQUNoQyxJQUFJLENBQUN1QixpQkFBaUIsR0FBRyxDQUFDLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUM2RyxpQkFBaUIsQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQ3hELFlBQVksQ0FBQyxDQUFDO1FBQ25CLElBQUksQ0FBQzBCLGVBQWUsQ0FBQyxDQUFDO01BQ3hCO01BQ0E7SUFDRjtJQUVBLElBQUlHLGFBQWEsQ0FBQ1MsSUFBSSxLQUFLLEtBQUssRUFBRTtNQUNoQyxJQUFJLElBQUksQ0FBQ2EsZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFO01BQ2pDO0lBQ0Y7SUFFQSxJQUFJNUIsR0FBRyxJQUFJLENBQUNNLGFBQWEsQ0FBQ1EsSUFBSSxJQUFJLENBQUNSLGFBQWEsQ0FBQ2dCLElBQUksRUFBRTtNQUNyRDtNQUNBLElBQUksQ0FBQ2Msa0JBQWtCLENBQUNwQyxHQUFHLENBQUM7SUFDOUI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVa0MsbUJBQW1CQSxDQUFBLEVBQVM7SUFDbEMsTUFBTUcsUUFBUSxHQUFHM0ksSUFBSSxDQUFDQyxHQUFHLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQzJJLFNBQVMsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUN0RDtJQUNBLElBQUksSUFBSSxDQUFDeEwsTUFBTSxHQUFHLElBQUksQ0FBQ3NFLGlCQUFpQixFQUFFO01BQ3hDLElBQUksQ0FBQ0EsaUJBQWlCLEdBQUcsSUFBSSxDQUFDdEUsTUFBTTtNQUNwQztJQUNGO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ0EsTUFBTSxHQUFHLElBQUksQ0FBQ3NFLGlCQUFpQixJQUFJaUgsUUFBUSxFQUFFO01BQ3BELElBQUksQ0FBQ2pILGlCQUFpQixHQUFHLElBQUksQ0FBQ3RFLE1BQU0sR0FBR3VMLFFBQVEsR0FBRyxDQUFDO0lBQ3JEO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVTlCLG1CQUFtQkEsQ0FBQ0UsUUFBbUMsRUFBdUI7SUFDcEYsSUFBSSxDQUFDQSxRQUFRLEVBQUUsT0FBTyxJQUFJO0lBQzFCLE1BQU04QixHQUFpQyxHQUFHO01BQ3hDLFFBQVEsRUFBRTtRQUFFeEIsSUFBSSxFQUFFLElBQUk7UUFBRU47TUFBUyxDQUFpQjtNQUNsRCxRQUFRLEVBQUU7UUFBRU0sSUFBSSxFQUFFLE1BQU07UUFBRU47TUFBUyxDQUFpQjtNQUNwRCxRQUFRLEVBQUU7UUFBRU0sSUFBSSxFQUFFLE9BQU87UUFBRU47TUFBUyxDQUFpQjtNQUNyRCxRQUFRLEVBQUU7UUFBRU0sSUFBSSxFQUFFLE1BQU07UUFBRU47TUFBUyxDQUFpQjtNQUNwRCxRQUFRLEVBQUU7UUFBRU0sSUFBSSxFQUFFLE1BQU07UUFBRU47TUFBUyxDQUFpQjtNQUNwRCxRQUFRLEVBQUU7UUFBRU0sSUFBSSxFQUFFLEtBQUs7UUFBRU47TUFBUyxDQUFpQjtNQUNuRCxXQUFXLEVBQUU7UUFBRU0sSUFBSSxFQUFFLGFBQWE7UUFBRU47TUFBUyxDQUFpQjtNQUM5RCxXQUFXLEVBQUU7UUFBRU0sSUFBSSxFQUFFLFdBQVc7UUFBRU47TUFBUztJQUM3QyxDQUFDO0lBQ0QsT0FBTzhCLEdBQUcsQ0FBQzlCLFFBQVEsQ0FBQyxJQUFJLElBQUk7RUFDOUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVTJCLGtCQUFrQkEsQ0FBQ3JJLElBQVksRUFBUTtJQUM3QyxJQUFJLENBQUNpQyxtQkFBbUIsSUFBSWpDLElBQUk7O0lBRWhDO0lBQ0EsSUFBSSxJQUFJLENBQUNrQyxrQkFBa0IsRUFBRTtNQUMzQmtELFlBQVksQ0FBQyxJQUFJLENBQUNsRCxrQkFBa0IsQ0FBQztNQUNyQyxJQUFJLENBQUNBLGtCQUFrQixHQUFHLElBQUk7SUFDaEM7O0lBRUE7SUFDQSxJQUFJLENBQUNBLGtCQUFrQixHQUFHdUcsVUFBVSxDQUFDLE1BQU07TUFDekMsSUFBSSxDQUFDQyxtQkFBbUIsQ0FBQyxDQUFDO0lBQzVCLENBQUMsRUFBRSxJQUFJLENBQUN2RyxvQkFBb0IsQ0FBQztFQUMvQjs7RUFFQTtBQUNGO0FBQ0E7RUFDVXVHLG1CQUFtQkEsQ0FBQSxFQUFTO0lBQ2xDLElBQUksSUFBSSxDQUFDeEcsa0JBQWtCLEVBQUU7TUFDM0JrRCxZQUFZLENBQUMsSUFBSSxDQUFDbEQsa0JBQWtCLENBQUM7TUFDckMsSUFBSSxDQUFDQSxrQkFBa0IsR0FBRyxJQUFJO0lBQ2hDO0lBRUEsSUFBSSxJQUFJLENBQUNELG1CQUFtQixJQUFJLENBQUMsSUFBSSxDQUFDTCxZQUFZLElBQUksQ0FBQyxJQUFJLENBQUNELGdCQUFnQixFQUFFO01BQzVFLElBQUksQ0FBQ2dILFVBQVUsQ0FBQyxJQUFJLENBQUMxRyxtQkFBbUIsQ0FBQztJQUMzQztJQUNBLElBQUksQ0FBQ0EsbUJBQW1CLEdBQUcsRUFBRTtFQUMvQjs7RUFFQTtBQUNGO0FBQ0E7RUFDVTJHLDRCQUE0QkEsQ0FBQSxFQUFXO0lBQzdDLElBQUksSUFBSSxDQUFDMUcsa0JBQWtCLEVBQUU7TUFDM0JrRCxZQUFZLENBQUMsSUFBSSxDQUFDbEQsa0JBQWtCLENBQUM7TUFDckMsSUFBSSxDQUFDQSxrQkFBa0IsR0FBRyxJQUFJO0lBQ2hDO0lBQ0EsTUFBTTJHLFFBQVEsR0FBRyxJQUFJLENBQUM1RyxtQkFBbUI7SUFDekMsSUFBSSxDQUFDQSxtQkFBbUIsR0FBRyxFQUFFO0lBQzdCLE9BQU80RyxRQUFRO0VBQ2pCO0VBRVFsQyxvQkFBb0JBLENBQUNWLEdBQVcsRUFBRUMsR0FBaUIsRUFBVztJQUNwRSxNQUFNUSxRQUFRLEdBQUdSLEdBQUcsRUFBRVEsUUFBUSxJQUFJVCxHQUFHO0lBQ3JDLElBQUlTLFFBQVEsS0FBS3pMLEdBQUcsQ0FBQ00sc0JBQXNCLElBQUltTCxRQUFRLEtBQUt6TCxHQUFHLENBQUNPLHVCQUF1QixFQUFFO01BQ3ZGLE9BQU8sSUFBSTtJQUNiOztJQUVBO0lBQ0EsTUFBTXNOLGdCQUFnQixHQUFHLFdBQVc7SUFDcEMsTUFBTUMsY0FBYyxHQUFHLFdBQVc7O0lBRWxDO0lBQ0EsSUFBSSxPQUFPOUMsR0FBRyxLQUFLLFFBQVEsSUFBSUEsR0FBRyxDQUFDK0MsUUFBUSxDQUFDRixnQkFBZ0IsQ0FBQyxFQUFFO01BQzdELElBQUksQ0FBQ25ILGdCQUFnQixHQUFHLElBQUk7TUFDNUIsSUFBSSxDQUFDMUIsbUJBQW1CLEdBQUcsS0FBSztNQUNoQyxNQUFNZ0osT0FBTyxHQUFHLElBQUksQ0FBQ0wsNEJBQTRCLENBQUMsQ0FBQztNQUNuRDtNQUNBLE1BQU1NLFFBQVEsR0FBR2pELEdBQUcsQ0FBQ2tELE9BQU8sQ0FBQ0wsZ0JBQWdCLENBQUM7TUFDOUMsSUFBSU0sT0FBTyxHQUFHbkQsR0FBRyxDQUFDekYsS0FBSyxDQUFDMEksUUFBUSxHQUFHSixnQkFBZ0IsQ0FBQ2hKLE1BQU0sQ0FBQztNQUMzRDtNQUNBLElBQUlzSixPQUFPLENBQUNKLFFBQVEsQ0FBQ0QsY0FBYyxDQUFDLEVBQUU7UUFDcEMsTUFBTU0sTUFBTSxHQUFHRCxPQUFPLENBQUNELE9BQU8sQ0FBQ0osY0FBYyxDQUFDO1FBQzlDSyxPQUFPLEdBQUdBLE9BQU8sQ0FBQzVJLEtBQUssQ0FBQyxDQUFDLEVBQUU2SSxNQUFNLENBQUM7UUFDbEMsSUFBSSxDQUFDbEosV0FBVyxHQUFHOEksT0FBTyxHQUFHRyxPQUFPO1FBQ3BDLElBQUksQ0FBQ0UsaUJBQWlCLENBQUMsQ0FBQztRQUN4QixPQUFPLElBQUk7TUFDYjtNQUNBLElBQUksQ0FBQ25KLFdBQVcsR0FBRzhJLE9BQU8sR0FBR0csT0FBTztNQUNwQyxJQUFJLENBQUNqRSx1QkFBdUIsQ0FBQyxDQUFDO01BQzlCLE9BQU8sSUFBSTtJQUNiO0lBRUEsSUFBSXVCLFFBQVEsS0FBS29DLGdCQUFnQixFQUFFO01BQ2pDLElBQUksQ0FBQ25ILGdCQUFnQixHQUFHLElBQUk7TUFDNUIsSUFBSSxDQUFDMUIsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLENBQUM7TUFDbEM7TUFDQSxNQUFNZ0osT0FBTyxHQUFHLElBQUksQ0FBQ0wsNEJBQTRCLENBQUMsQ0FBQztNQUNuRCxJQUFJLENBQUN6SSxXQUFXLEdBQUc4SSxPQUFPLENBQUMsQ0FBQztNQUM1QixJQUFJLENBQUM5RCx1QkFBdUIsQ0FBQyxDQUFDO01BQzlCLE9BQU8sSUFBSTtJQUNiO0lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ3hELGdCQUFnQixFQUFFO01BQzFCLE9BQU8sS0FBSztJQUNkOztJQUVBO0lBQ0EsSUFBSSxPQUFPc0UsR0FBRyxLQUFLLFFBQVEsSUFBSUEsR0FBRyxDQUFDK0MsUUFBUSxDQUFDRCxjQUFjLENBQUMsRUFBRTtNQUMzRCxNQUFNTSxNQUFNLEdBQUdwRCxHQUFHLENBQUNrRCxPQUFPLENBQUNKLGNBQWMsQ0FBQztNQUMxQyxNQUFNUSxhQUFhLEdBQUd0RCxHQUFHLENBQUN6RixLQUFLLENBQUMsQ0FBQyxFQUFFNkksTUFBTSxDQUFDO01BQzFDLElBQUlFLGFBQWEsRUFBRTtRQUNqQixJQUFJLENBQUN4SixtQkFBbUIsQ0FBQyxPQUFPLEVBQUV3SixhQUFhLENBQUM7TUFDbEQ7TUFDQSxJQUFJLENBQUNELGlCQUFpQixDQUFDLENBQUM7TUFDeEIsT0FBTyxJQUFJO0lBQ2I7SUFFQSxJQUFJNUMsUUFBUSxLQUFLcUMsY0FBYyxFQUFFO01BQy9CLElBQUksQ0FBQ08saUJBQWlCLENBQUMsQ0FBQztNQUN4QixPQUFPLElBQUk7SUFDYjtJQUNBLElBQUlwRCxHQUFHLEVBQUVjLElBQUksS0FBSyxRQUFRLElBQUlkLEdBQUcsRUFBRWMsSUFBSSxLQUFLLE9BQU8sRUFBRTtNQUNuRCxJQUFJLENBQUNqSCxtQkFBbUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDO01BQ3ZDLE9BQU8sSUFBSTtJQUNiO0lBQ0EsSUFBSW1HLEdBQUcsRUFBRWMsSUFBSSxLQUFLLFdBQVcsRUFBRTtNQUM3QixJQUFJLENBQUM3RyxXQUFXLEdBQUcsSUFBSSxDQUFDQSxXQUFXLENBQUNLLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7TUFDaEQsT0FBTyxJQUFJO0lBQ2I7SUFDQSxJQUFJLE9BQU95RixHQUFHLEtBQUssUUFBUSxJQUFJQSxHQUFHLENBQUNuRyxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQzdDLElBQUksQ0FBQ0MsbUJBQW1CLENBQUMsT0FBTyxFQUFFa0csR0FBRyxDQUFDO01BQ3RDLE9BQU8sSUFBSTtJQUNiO0lBQ0EsSUFBSSxPQUFPUyxRQUFRLEtBQUssUUFBUSxJQUFJQSxRQUFRLENBQUM1RyxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3ZELElBQUksQ0FBQ0MsbUJBQW1CLENBQUMsT0FBTyxFQUFFMkcsUUFBUSxDQUFDO01BQzNDLE9BQU8sSUFBSTtJQUNiO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7RUFFUTRDLGlCQUFpQkEsQ0FBQSxFQUFTO0lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUMzSCxnQkFBZ0IsRUFBRTtJQUM1QjtJQUNBLE1BQU02SCxTQUFTLEdBQUcsSUFBSSxDQUFDL0ksb0JBQW9CLENBQUMsSUFBSSxDQUFDTixXQUFXLENBQUM7SUFDN0QsTUFBTWlKLE9BQU8sR0FBR0ksU0FBUyxDQUFDOUksT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDakQsSUFBSTBJLE9BQU8sRUFBRTtNQUNYLE1BQU1LLEtBQUssR0FBR0wsT0FBTyxDQUFDTSxLQUFLLENBQUMsSUFBSSxDQUFDO01BQ2pDLE1BQU1DLFlBQVksR0FBRyxJQUFJLENBQUMxSixtQkFBbUI7TUFDN0MsSUFBSXdKLEtBQUssQ0FBQzNKLE1BQU0sR0FBRyxDQUFDLElBQUlzSixPQUFPLENBQUN0SixNQUFNLEdBQUcsR0FBRyxFQUFFO1FBQzVDLElBQUksQ0FBQ3ZDLGNBQWMsR0FBRztVQUNwQnlDLElBQUksRUFBRW9KLE9BQU87VUFDYkssS0FBSyxFQUFFQSxLQUFLLENBQUMzSixNQUFNO1VBQ25COEosS0FBSyxFQUFFUixPQUFPLENBQUN0SixNQUFNLElBQUk2SixZQUFZLEdBQUcsR0FBRyxHQUF3QixDQUFDLENBQUMsQ0FBRTtRQUN6RSxDQUFDO1FBQ0QsSUFBSSxDQUFDN00sTUFBTSxHQUFHLEVBQUU7UUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztRQUNmLElBQUksQ0FBQ21MLGlCQUFpQixDQUFDLENBQUM7UUFDeEIsSUFBSSxDQUFDeEQsWUFBWSxDQUFDLENBQUM7UUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7TUFDeEIsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDdUMsVUFBVSxDQUFDUyxPQUFPLENBQUM7TUFDMUI7SUFDRjtJQUNBLElBQUksQ0FBQ3pILGdCQUFnQixHQUFHLEtBQUs7SUFDN0IsSUFBSSxDQUFDeEIsV0FBVyxHQUFHLEVBQUU7SUFDckIsSUFBSSxDQUFDRixtQkFBbUIsR0FBRyxLQUFLO0lBQ2hDLElBQUksQ0FBQ2tGLHVCQUF1QixDQUFDLENBQUM7RUFDaEM7RUFFUXlCLGdCQUFnQkEsQ0FBQ1gsR0FBVyxFQUFFQyxHQUFpQixFQUFXO0lBQ2hFO0lBQ0EsSUFBSSxJQUFJLENBQUN2RSxnQkFBZ0IsSUFBSXVFLEdBQUcsRUFBRWEsSUFBSSxJQUFJYixHQUFHLEVBQUVxQixJQUFJLEVBQUU7TUFDbkQsSUFBSSxDQUFDc0Msb0JBQW9CLENBQUMsQ0FBQztNQUMzQixJQUFJLENBQUNDLHNCQUFzQixDQUFDLENBQUM7TUFDN0IsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxNQUFNcEQsUUFBUSxHQUFHUixHQUFHLEVBQUVRLFFBQVEsSUFBSSxFQUFFO0lBQ3BDLE1BQU1xRCxLQUFLLEdBQUcsT0FBTzlELEdBQUcsS0FBSyxRQUFRLElBQUlBLEdBQUcsQ0FBQ25HLE1BQU0sR0FBRyxDQUFDLEdBQUdtRyxHQUFHLEdBQUdTLFFBQVE7SUFDeEUsSUFBSSxDQUFDcUQsS0FBSyxFQUFFO01BQ1YsSUFBSSxDQUFDRixvQkFBb0IsQ0FBQyxDQUFDO01BQzNCLElBQUksQ0FBQ0Msc0JBQXNCLENBQUMsQ0FBQztNQUM3QixPQUFPLEtBQUs7SUFDZDtJQUVBLE1BQU1FLEdBQUcsR0FBR0MsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN0QixJQUFJLENBQUNFLG9CQUFvQixDQUFDSCxLQUFLLENBQUNqSyxNQUFNLEVBQUVrSyxHQUFHLENBQUM7SUFFNUMsSUFBSSxDQUFDLElBQUksQ0FBQ3BJLFlBQVksRUFBRTtNQUN0QixJQUFJLENBQUN1SSxzQkFBc0IsQ0FBQ0osS0FBSyxFQUFFQyxHQUFHLENBQUM7SUFDekM7SUFFQSxNQUFNSSxhQUFhLEdBQUdMLEtBQUssQ0FBQ2pLLE1BQU0sR0FBRyxDQUFDO0lBQ3RDLE1BQU11SyxVQUFVLEdBQUcsUUFBUSxDQUFDNUMsSUFBSSxDQUFDc0MsS0FBSyxDQUFDO0lBQ3ZDLE1BQU1PLFdBQVcsR0FBRyxJQUFJLENBQUN4SSxxQkFBcUIsR0FBRyxDQUFDLElBQUlrSSxHQUFHLEdBQUcsSUFBSSxDQUFDbEkscUJBQXFCLElBQUksSUFBSSxDQUFDUCxrQkFBa0I7SUFDakgsTUFBTWdKLFlBQVksR0FBR0QsV0FBVyxJQUFJLElBQUksQ0FBQ3ZJLG1CQUFtQixJQUFJLElBQUksQ0FBQ1Asc0JBQXNCO0lBQzNGLE1BQU1nSixtQkFBbUIsR0FBRyxJQUFJLENBQUN4SSxpQkFBaUIsQ0FBQ3lJLElBQUksQ0FBQ0MsS0FBSyxJQUFJLENBQUMsV0FBVyxDQUFDakQsSUFBSSxDQUFDaUQsS0FBSyxDQUFDMUssSUFBSSxDQUFDLENBQUM7SUFDL0YsTUFBTTJLLG1CQUFtQixHQUN2Qk4sVUFBVSxJQUNWQyxXQUFXLElBQ1hFLG1CQUFtQixJQUNuQixJQUFJLENBQUN6SSxtQkFBbUIsSUFBSSxJQUFJLENBQUNOLDJCQUEyQjtJQUM5RCxNQUFNbUosY0FBYyxHQUFHUCxVQUFVLEtBQUssSUFBSSxDQUFDekksWUFBWSxJQUFJd0ksYUFBYSxJQUFJRyxZQUFZLElBQUlJLG1CQUFtQixDQUFDO0lBQ2hILE1BQU1FLGNBQWMsR0FBRyxJQUFJLENBQUNqSixZQUFZLElBQUl3SSxhQUFhLElBQUlHLFlBQVksSUFBSUssY0FBYztJQUUzRixJQUFJLENBQUNDLGNBQWMsRUFBRTtNQUNuQixJQUFJLENBQUNmLHNCQUFzQixDQUFDLENBQUM7TUFDN0IsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxJQUFJZ0Isb0JBQW9CLEdBQUcsS0FBSztJQUNoQyxJQUFJLENBQUMsSUFBSSxDQUFDbEosWUFBWSxFQUFFO01BQ3RCLElBQUksQ0FBQ0EsWUFBWSxHQUFHLElBQUk7TUFDeEIsSUFBSSxDQUFDM0IsbUJBQW1CLEdBQUcsS0FBSyxDQUFDLENBQUM7TUFDbEM7TUFDQSxNQUFNZ0osT0FBTyxHQUFHLElBQUksQ0FBQ0wsNEJBQTRCLENBQUMsQ0FBQztNQUNuRCxNQUFNbUMsU0FBUyxHQUFHLElBQUksQ0FBQ0Msd0JBQXdCLENBQUMsQ0FBQztNQUNqRDtNQUNBLE1BQU1DLFFBQVEsR0FBR2hDLE9BQU8sR0FBRzhCLFNBQVM7TUFDcEMsSUFBSUUsUUFBUSxDQUFDbkwsTUFBTSxHQUFHLENBQUMsRUFBRTtRQUN2QjtRQUNBLElBQUlpTCxTQUFTLENBQUNqTCxNQUFNLEdBQUcsQ0FBQyxFQUFFO1VBQ3hCLE1BQU1vTCxXQUFXLEdBQUd2TCxJQUFJLENBQUNFLEdBQUcsQ0FBQyxJQUFJLENBQUMvQyxNQUFNLENBQUNnRCxNQUFNLEVBQUVpTCxTQUFTLENBQUNqTCxNQUFNLENBQUM7VUFDbEUsTUFBTXFMLE1BQU0sR0FBRyxJQUFJLENBQUNyTyxNQUFNLENBQUMwRCxLQUFLLENBQUMsQ0FBQzBLLFdBQVcsQ0FBQztVQUM5QyxJQUFJQSxXQUFXLEdBQUcsQ0FBQyxJQUFJQyxNQUFNLEtBQUtKLFNBQVMsQ0FBQ3ZLLEtBQUssQ0FBQyxDQUFDMEssV0FBVyxDQUFDLEVBQUU7WUFDL0QsSUFBSSxDQUFDcE8sTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDMEQsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUMxRCxNQUFNLENBQUNnRCxNQUFNLEdBQUdvTCxXQUFXLENBQUM7WUFDcEUsSUFBSSxDQUFDbk8sTUFBTSxHQUFHNEMsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQzlDLE1BQU0sQ0FBQ2dELE1BQU0sQ0FBQztZQUM3QyxJQUFJLENBQUNKLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQztVQUN0QjtRQUNGO1FBQ0EsSUFBSSxDQUFDVSxnQkFBZ0IsR0FBRzZLLFFBQVEsQ0FBQ3pLLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDRixrQkFBa0IsQ0FBQztRQUNsRSxJQUFJMkssUUFBUSxDQUFDbkwsTUFBTSxHQUFHLElBQUksQ0FBQ1Esa0JBQWtCLEVBQUU7VUFDN0MsSUFBSSxDQUFDTCxtQkFBbUIsR0FBRyxJQUFJO1FBQ2pDO1FBQ0E2SyxvQkFBb0IsR0FBR0csUUFBUSxDQUFDRyxRQUFRLENBQUNyQixLQUFLLENBQUM7TUFDakQsQ0FBQyxNQUFNO1FBQ0wsSUFBSSxDQUFDM0osZ0JBQWdCLEdBQUcsRUFBRTtNQUM1QjtJQUNGO0lBRUEsSUFBSSxDQUFDMEssb0JBQW9CLEVBQUU7TUFDekIsSUFBSSxDQUFDL0ssbUJBQW1CLENBQUMsWUFBWSxFQUFFZ0ssS0FBSyxDQUFDO0lBQy9DO0lBQ0EsSUFBSSxDQUFDc0Isd0JBQXdCLENBQUMsQ0FBQztJQUMvQixPQUFPLElBQUk7RUFDYjtFQUVRbkIsb0JBQW9CQSxDQUFDcEssTUFBYyxFQUFFa0ssR0FBVyxFQUFRO0lBQzlELElBQUksQ0FBQyxJQUFJLENBQUNsSSxxQkFBcUIsSUFBSWtJLEdBQUcsR0FBRyxJQUFJLENBQUNsSSxxQkFBcUIsR0FBRyxJQUFJLENBQUNQLGtCQUFrQixFQUFFO01BQzdGLElBQUksQ0FBQ08scUJBQXFCLEdBQUdrSSxHQUFHO01BQ2hDLElBQUksQ0FBQ2pJLG1CQUFtQixHQUFHLENBQUM7SUFDOUI7SUFDQSxJQUFJLENBQUNBLG1CQUFtQixJQUFJakMsTUFBTTtFQUNwQztFQUVRK0osb0JBQW9CQSxDQUFBLEVBQVM7SUFDbkMsSUFBSSxDQUFDL0gscUJBQXFCLEdBQUcsQ0FBQztJQUM5QixJQUFJLENBQUNDLG1CQUFtQixHQUFHLENBQUM7RUFDOUI7RUFFUW9ELHVCQUF1QkEsQ0FBQSxFQUFTO0lBQ3RDLElBQUksSUFBSSxDQUFDdEQsZUFBZSxFQUFFO01BQ3hCdUQsWUFBWSxDQUFDLElBQUksQ0FBQ3ZELGVBQWUsQ0FBQztNQUNsQyxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJO0lBQzdCO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ0ssa0JBQWtCLEVBQUU7TUFDM0JrRCxZQUFZLENBQUMsSUFBSSxDQUFDbEQsa0JBQWtCLENBQUM7TUFDckMsSUFBSSxDQUFDQSxrQkFBa0IsR0FBRyxJQUFJO0lBQ2hDO0lBQ0EsSUFBSSxDQUFDRCxtQkFBbUIsR0FBRyxFQUFFO0lBQzdCLElBQUksQ0FBQ0wsWUFBWSxHQUFHLEtBQUs7SUFDekIsSUFBSSxDQUFDeEIsZ0JBQWdCLEdBQUcsRUFBRTtJQUMxQixJQUFJLENBQUM0QixpQkFBaUIsR0FBRyxFQUFFO0lBQzNCLElBQUksQ0FBQzZILG9CQUFvQixDQUFDLENBQUM7RUFDN0I7RUFFUU0sc0JBQXNCQSxDQUFDbkssSUFBWSxFQUFFc0wsRUFBVSxFQUFRO0lBQzdELE1BQU1DLFdBQVcsR0FBR0QsRUFBRSxHQUFHLElBQUksQ0FBQy9KLGtCQUFrQjtJQUNoRCxJQUFJLENBQUNTLGlCQUFpQixDQUFDd0osSUFBSSxDQUFDO01BQUV4TCxJQUFJO01BQUVzTDtJQUFHLENBQUMsQ0FBQztJQUN6QyxJQUFJLENBQUN0SixpQkFBaUIsR0FBRyxJQUFJLENBQUNBLGlCQUFpQixDQUFDeUosTUFBTSxDQUFDZixLQUFLLElBQUlBLEtBQUssQ0FBQ1ksRUFBRSxJQUFJQyxXQUFXLENBQUM7RUFDMUY7RUFFUXpCLHNCQUFzQkEsQ0FBQSxFQUFTO0lBQ3JDLElBQUksQ0FBQyxJQUFJLENBQUM5SCxpQkFBaUIsQ0FBQ2xDLE1BQU0sRUFBRTtJQUNwQyxNQUFNa0ssR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLE1BQU11QixXQUFXLEdBQUd2QixHQUFHLEdBQUcsSUFBSSxDQUFDekksa0JBQWtCO0lBQ2pELElBQUksQ0FBQ1MsaUJBQWlCLEdBQUcsSUFBSSxDQUFDQSxpQkFBaUIsQ0FBQ3lKLE1BQU0sQ0FBQ2YsS0FBSyxJQUFJQSxLQUFLLENBQUNZLEVBQUUsSUFBSUMsV0FBVyxDQUFDO0VBQzFGO0VBRVFQLHdCQUF3QkEsQ0FBQSxFQUFXO0lBQ3pDLElBQUksQ0FBQyxJQUFJLENBQUNoSixpQkFBaUIsQ0FBQ2xDLE1BQU0sRUFBRSxPQUFPLEVBQUU7SUFDN0MsTUFBTW1MLFFBQVEsR0FBRyxJQUFJLENBQUNqSixpQkFBaUIsQ0FBQ3dHLEdBQUcsQ0FBQ2tDLEtBQUssSUFBSUEsS0FBSyxDQUFDMUssSUFBSSxDQUFDLENBQUMwTCxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ3pFLElBQUksQ0FBQzFKLGlCQUFpQixHQUFHLEVBQUU7SUFDM0IsT0FBT2lKLFFBQVE7RUFDakI7RUFFUUksd0JBQXdCQSxDQUFBLEVBQVM7SUFDdkMsSUFBSSxJQUFJLENBQUN4SixlQUFlLEVBQUU7TUFDeEJ1RCxZQUFZLENBQUMsSUFBSSxDQUFDdkQsZUFBZSxDQUFDO0lBQ3BDO0lBQ0EsSUFBSSxDQUFDQSxlQUFlLEdBQUc0RyxVQUFVLENBQUMsTUFBTTtNQUN0QyxJQUFJLENBQUNrRCxrQkFBa0IsQ0FBQyxDQUFDO0lBQzNCLENBQUMsRUFBRSxJQUFJLENBQUNySyxnQkFBZ0IsQ0FBQztFQUMzQjtFQUVRcUssa0JBQWtCQSxDQUFBLEVBQVM7SUFDakMsSUFBSSxDQUFDLElBQUksQ0FBQy9KLFlBQVksRUFBRTs7SUFFeEI7SUFDQSxNQUFNNEgsU0FBUyxHQUFHLElBQUksQ0FBQy9JLG9CQUFvQixDQUFDLElBQUksQ0FBQ0wsZ0JBQWdCLENBQUM7SUFDbEUsTUFBTWdKLE9BQU8sR0FBR0ksU0FBUyxDQUFDOUksT0FBTyxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7SUFDakQsTUFBTWlKLFlBQVksR0FBRyxJQUFJLENBQUMxSixtQkFBbUI7SUFDN0MsSUFBSSxDQUFDMkIsWUFBWSxHQUFHLEtBQUs7SUFDekIsSUFBSSxDQUFDeEIsZ0JBQWdCLEdBQUcsRUFBRTtJQUMxQixJQUFJLENBQUM0QixpQkFBaUIsR0FBRyxFQUFFO0lBQzNCLElBQUksQ0FBQzZILG9CQUFvQixDQUFDLENBQUM7SUFDM0IsSUFBSSxDQUFDNUosbUJBQW1CLEdBQUcsS0FBSztJQUNoQyxJQUFJLElBQUksQ0FBQzRCLGVBQWUsRUFBRTtNQUN4QnVELFlBQVksQ0FBQyxJQUFJLENBQUN2RCxlQUFlLENBQUM7TUFDbEMsSUFBSSxDQUFDQSxlQUFlLEdBQUcsSUFBSTtJQUM3QjtJQUVBLElBQUksQ0FBQ3VILE9BQU8sRUFBRTtJQUNkLE1BQU1LLEtBQUssR0FBR0wsT0FBTyxDQUFDTSxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pDLElBQUlELEtBQUssQ0FBQzNKLE1BQU0sR0FBRyxDQUFDLElBQUlzSixPQUFPLENBQUN0SixNQUFNLEdBQUcsR0FBRyxFQUFFO01BQzVDLElBQUksQ0FBQ3ZDLGNBQWMsR0FBRztRQUNwQnlDLElBQUksRUFBRW9KLE9BQU87UUFDYkssS0FBSyxFQUFFQSxLQUFLLENBQUMzSixNQUFNO1FBQ25COEosS0FBSyxFQUFFUixPQUFPLENBQUN0SixNQUFNLElBQUk2SixZQUFZLEdBQUcsR0FBRyxHQUF3QixDQUFDO01BQ3RFLENBQUM7TUFDRCxJQUFJLENBQUM3TSxNQUFNLEdBQUcsRUFBRTtNQUNoQixJQUFJLENBQUNDLE1BQU0sR0FBRyxDQUFDO01BQ2YsSUFBSSxDQUFDbUwsaUJBQWlCLENBQUMsQ0FBQztNQUN4QixJQUFJLENBQUN4RCxZQUFZLENBQUMsQ0FBQztNQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztNQUN0QjtJQUNGO0lBRUEsSUFBSSxDQUFDdUMsVUFBVSxDQUFDUyxPQUFPLENBQUM7RUFDMUI7RUFFUVQsVUFBVUEsQ0FBQzNJLElBQVksRUFBUTtJQUNyQyxJQUFJLENBQUNBLElBQUksRUFBRTtJQUNYO0lBQ0EsSUFBSSxJQUFJLENBQUMyQixnQkFBZ0IsSUFBSSxJQUFJLENBQUNDLFlBQVksRUFBRTtNQUM5QztJQUNGO0lBQ0EsSUFBSSxJQUFJLENBQUNyRSxjQUFjLEVBQUU7TUFDdkIsSUFBSSxDQUFDcUssb0JBQW9CLENBQUMsQ0FBQztJQUM3QjtJQUNBO0lBQ0EsSUFBSSxDQUFDbEksV0FBVyxDQUFDLENBQUM7SUFDbEIsSUFBSSxDQUFDNUMsTUFBTSxHQUFHLElBQUksQ0FBQ0EsTUFBTSxDQUFDMEQsS0FBSyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUN6RCxNQUFNLENBQUMsR0FBR2lELElBQUksR0FBRyxJQUFJLENBQUNsRCxNQUFNLENBQUMwRCxLQUFLLENBQUMsSUFBSSxDQUFDekQsTUFBTSxDQUFDO0lBQ3ZGLElBQUksQ0FBQ0EsTUFBTSxJQUFJaUQsSUFBSSxDQUFDRixNQUFNO0lBQzFCLElBQUksQ0FBQ0osV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDO0lBQ3BCLElBQUksQ0FBQ3dJLGlCQUFpQixDQUFDLENBQUM7SUFDeEIsSUFBSSxDQUFDeEQsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFUTZCLFVBQVVBLENBQUNqSSxJQUFZLEVBQVE7SUFDckM7SUFDQTtJQUNBLElBQUksSUFBSSxDQUFDekMsY0FBYyxFQUFFO01BQ3ZCLElBQUksQ0FBQ3FLLG9CQUFvQixDQUFDLENBQUM7TUFDM0I7SUFDRjtJQUVBLElBQUksSUFBSSxDQUFDekUsWUFBWSxFQUFFO01BQ3JCLE1BQU15SSxVQUFVLEdBQUcsSUFBSSxDQUFDekksWUFBWSxDQUFDMEksT0FBTyxDQUFDaEwsSUFBSTtNQUNqRCxNQUFNaUwsaUJBQWlCLEdBQUdGLFVBQVUsR0FBRzVMLElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUMsR0FBR2IsSUFBSTtNQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDbUQsWUFBWSxDQUFDMEksT0FBTyxDQUFDRSxVQUFVLElBQUksQ0FBQ0QsaUJBQWlCLEVBQUU7UUFDL0QsSUFBSSxDQUFDcEgsWUFBWSxDQUFDLENBQUM7UUFDbkI7TUFDRjtNQUNBLE1BQU1zSCxRQUFRLEdBQUcsSUFBSSxDQUFDN0ksWUFBWTtNQUNsQyxJQUFJLENBQUNBLFlBQVksR0FBRyxJQUFJO01BQ3hCLElBQUksQ0FBQ3JHLE1BQU0sR0FBRyxFQUFFO01BQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7TUFDZixJQUFJLENBQUNzRSxpQkFBaUIsR0FBRyxDQUFDO01BQzFCLElBQUksQ0FBQzRLLGdCQUFnQixDQUFDLENBQUM7TUFDdkIsSUFBSSxDQUFDdkgsWUFBWSxDQUFDLENBQUM7TUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7TUFDdEI0RixRQUFRLENBQUNFLE9BQU8sQ0FBQ0osaUJBQWlCLENBQUM7TUFDbkM7SUFDRjtJQUVBLE1BQU1LLFVBQVUsR0FBR25NLElBQUksQ0FBQ2EsSUFBSSxDQUFDLENBQUM7SUFDOUIsSUFBSSxDQUFDc0wsVUFBVSxFQUFFO01BQ2YsSUFBSSxDQUFDekgsWUFBWSxDQUFDLENBQUM7TUFDbkI7SUFDRjs7SUFFQTtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUMvQixVQUFVLElBQUksQ0FBQ3dKLFVBQVUsQ0FBQ3JFLFVBQVUsQ0FBQyxHQUFHLENBQUMsRUFBRTtNQUNuRCxJQUFJLENBQUM5SyxPQUFPLENBQUN3TyxJQUFJLENBQUNXLFVBQVUsQ0FBQztNQUM3QixJQUFJLENBQUNsUCxZQUFZLEdBQUcsQ0FBQyxDQUFDO01BQ3RCLElBQUksQ0FBQ21QLGlCQUFpQixDQUFDRCxVQUFVLENBQUM7SUFDcEMsQ0FBQyxNQUFNLElBQUksQ0FBQyxJQUFJLENBQUN4SixVQUFVLEVBQUU7TUFDM0I7TUFDQSxJQUFJLENBQUMzRixPQUFPLENBQUN3TyxJQUFJLENBQUNXLFVBQVUsQ0FBQztNQUM3QixJQUFJLENBQUNsUCxZQUFZLEdBQUcsQ0FBQyxDQUFDO0lBQ3hCO0lBQ0EsSUFBSSxJQUFJLENBQUNPLElBQUksS0FBSyxXQUFXLEVBQUU7TUFDN0IsSUFBSSxDQUFDOEksSUFBSSxDQUFDLE9BQU8sRUFBRTZGLFVBQVUsQ0FBQztJQUNoQyxDQUFDLE1BQU07TUFDTCxJQUFJLENBQUM3RixJQUFJLENBQUMsUUFBUSxFQUFFNkYsVUFBVSxDQUFDO0lBQ2pDO0lBQ0EsSUFBSSxDQUFDclAsTUFBTSxHQUFHLEVBQUU7SUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztJQUNmLElBQUksQ0FBQ2tQLGdCQUFnQixDQUFDLENBQUM7SUFDdkIsSUFBSSxDQUFDdkgsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFUThCLGlCQUFpQkEsQ0FBQSxFQUFTO0lBQ2hDLElBQUksQ0FBQyxJQUFJLENBQUNwTCxNQUFNLENBQUNnTCxVQUFVLENBQUMsR0FBRyxDQUFDLEVBQUU7TUFDaEMsSUFBSSxDQUFDbUUsZ0JBQWdCLENBQUMsQ0FBQztNQUN2QjtJQUNGO0lBRUEsTUFBTUksVUFBVSxHQUFHLElBQUksQ0FBQ3ZQLE1BQU0sQ0FBQ3FNLE9BQU8sQ0FBQyxHQUFHLENBQUM7SUFDM0MsTUFBTW1ELFVBQVUsR0FBR0QsVUFBVSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUM1RSxJQUFJLENBQUMsSUFBSSxDQUFDM0ssTUFBTSxDQUFDMEQsS0FBSyxDQUFDNkwsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ2xGO0lBQ0EsSUFBSUEsVUFBVSxJQUFJLENBQUMsSUFBSSxJQUFJLENBQUN0UCxNQUFNLEdBQUdzUCxVQUFVLElBQUlDLFVBQVUsRUFBRTtNQUM3RCxJQUFJLENBQUNMLGdCQUFnQixDQUFDLENBQUM7TUFDdkI7SUFDRjtJQUVBLE1BQU1NLFdBQVcsR0FBRyxJQUFJLENBQUN6UCxNQUFNLENBQUMwRCxLQUFLLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ3pELE1BQU0sQ0FBQztJQUNyRCxNQUFNeVAsWUFBWSxHQUFHSCxVQUFVLElBQUksQ0FBQyxHQUFHRSxXQUFXLENBQUMvTCxLQUFLLENBQUMsQ0FBQyxFQUFFNkwsVUFBVSxDQUFDLEdBQUdFLFdBQVc7SUFDckYsTUFBTUUsYUFBYSxHQUFHSixVQUFVLElBQUksQ0FBQyxHQUFHLElBQUksQ0FBQ3ZQLE1BQU0sQ0FBQzBELEtBQUssQ0FBQyxDQUFDLEVBQUU2TCxVQUFVLENBQUMsR0FBRyxJQUFJLENBQUN2UCxNQUFNO0lBQ3RGLE1BQU00UCxPQUFPLEdBQUcsQ0FBQ0YsWUFBWSxDQUFDRyxPQUFPLENBQUMsQ0FBQyxJQUFJRixhQUFhLENBQUNFLE9BQU8sQ0FBQyxDQUFDLElBQUksR0FBRyxFQUFFdkYsV0FBVyxDQUFDLENBQUM7SUFDeEYsTUFBTXdGLFFBQVEsR0FBRyxJQUFJLENBQUMxUCxXQUFXLENBQUMsSUFBSSxDQUFDQyxlQUFlLENBQUMsRUFBRTZLLE9BQU87SUFDaEUsSUFBSSxDQUFDOUssV0FBVyxHQUFHLElBQUksQ0FBQ0UsaUJBQWlCLENBQ3RDcU8sTUFBTSxDQUFDb0IsR0FBRyxJQUFJQSxHQUFHLENBQUM3RSxPQUFPLENBQUNaLFdBQVcsQ0FBQyxDQUFDLENBQUNVLFVBQVUsQ0FBQzRFLE9BQU8sQ0FBQyxDQUFDLENBQzVEbE0sS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7SUFDZCxJQUFJLElBQUksQ0FBQ3RELFdBQVcsQ0FBQzRDLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDakMsSUFBSSxDQUFDbU0sZ0JBQWdCLENBQUMsQ0FBQztNQUN2QjtJQUNGO0lBQ0EsSUFBSVcsUUFBUSxFQUFFO01BQ1osTUFBTUUsR0FBRyxHQUFHLElBQUksQ0FBQzVQLFdBQVcsQ0FBQzZQLFNBQVMsQ0FBQ0MsQ0FBQyxJQUFJQSxDQUFDLENBQUNoRixPQUFPLEtBQUs0RSxRQUFRLENBQUM7TUFDbkUsSUFBSSxDQUFDelAsZUFBZSxHQUFHMlAsR0FBRyxJQUFJLENBQUMsR0FBR0EsR0FBRyxHQUFHLENBQUM7SUFDM0MsQ0FBQyxNQUFNO01BQ0wsSUFBSSxDQUFDM1AsZUFBZSxHQUFHLENBQUM7SUFDMUI7RUFDRjtFQUVBOFAsb0JBQW9CQSxDQUFDQyxRQUFpQyxFQUFRO0lBQzVELElBQUksQ0FBQzlQLGlCQUFpQixHQUFHOFAsUUFBUTtJQUNqQyxJQUFJLENBQUNoRixpQkFBaUIsQ0FBQyxDQUFDO0VBQzFCO0VBRVFMLGVBQWVBLENBQUNzRixNQUFlLEVBQVc7SUFDaEQsSUFBSSxDQUFDLElBQUksQ0FBQ3JRLE1BQU0sQ0FBQ2dMLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUM1SyxXQUFXLENBQUM0QyxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ2pFLE9BQU8sS0FBSztJQUNkO0lBQ0E7SUFDQSxNQUFNaUksU0FBUyxHQUFHLElBQUksQ0FBQzVLLGVBQWUsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDQSxlQUFlLEdBQUcsSUFBSSxDQUFDRCxXQUFXLENBQUM0QyxNQUFNLEdBQ3pGLElBQUksQ0FBQzNDLGVBQWUsR0FDcEIsQ0FBQztJQUNMLE1BQU1pUSxRQUFRLEdBQUcsSUFBSSxDQUFDbFEsV0FBVyxDQUFDNkssU0FBUyxDQUFDO0lBQzVDLElBQUksQ0FBQ3FGLFFBQVEsRUFBRTtNQUNiLE9BQU8sS0FBSztJQUNkO0lBQ0EsSUFBSUQsTUFBTSxFQUFFO01BQ1YsSUFBSSxDQUFDbEYsVUFBVSxDQUFDbUYsUUFBUSxDQUFDcEYsT0FBTyxDQUFDO0lBQ25DLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ2xMLE1BQU0sR0FBRyxHQUFHc1EsUUFBUSxDQUFDcEYsT0FBTyxHQUFHO01BQ3BDLElBQUksQ0FBQ2pMLE1BQU0sR0FBRyxJQUFJLENBQUNELE1BQU0sQ0FBQ2dELE1BQU07TUFDaEMsSUFBSSxDQUFDbU0sZ0JBQWdCLENBQUMsQ0FBQztNQUN2QixJQUFJLENBQUN2SCxZQUFZLENBQUMsQ0FBQztNQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztJQUN4QjtJQUNBLE9BQU8sSUFBSTtFQUNiO0VBRVE2RixnQkFBZ0JBLENBQUEsRUFBUztJQUMvQixJQUFJLENBQUMvTyxXQUFXLEdBQUcsRUFBRTtJQUNyQixJQUFJLENBQUNDLGVBQWUsR0FBRyxDQUFDLENBQUM7RUFDM0I7RUFFUWlMLG1CQUFtQkEsQ0FBQ2lGLFNBQWlCLEVBQVc7SUFDdEQsSUFBSSxDQUFDLElBQUksQ0FBQ3ZRLE1BQU0sQ0FBQ2dMLFVBQVUsQ0FBQyxHQUFHLENBQUMsSUFBSSxJQUFJLENBQUM1SyxXQUFXLENBQUM0QyxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ2pFO01BQ0EsSUFBSSxJQUFJLENBQUMzQyxlQUFlLEtBQUssQ0FBQyxDQUFDLElBQUksSUFBSSxDQUFDRCxXQUFXLENBQUM0QyxNQUFNLEtBQUssQ0FBQyxFQUFFO1FBQ2hFLElBQUksQ0FBQzNDLGVBQWUsR0FBRyxDQUFDLENBQUM7TUFDM0I7TUFDQSxPQUFPLEtBQUs7SUFDZDtJQUNBO0lBQ0EsTUFBTW1RLFlBQVksR0FBRyxJQUFJLENBQUNuUSxlQUFlLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQ0EsZUFBZSxHQUFHLElBQUksQ0FBQ0QsV0FBVyxDQUFDNEMsTUFBTSxHQUM1RixJQUFJLENBQUMzQyxlQUFlLEdBQ3BCLENBQUMsQ0FBQztJQUNOLE1BQU1vUSxJQUFJLEdBQUdELFlBQVksR0FBR0QsU0FBUztJQUNyQyxNQUFNRyxPQUFPLEdBQUc3TixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUVELElBQUksQ0FBQ0UsR0FBRyxDQUFDLElBQUksQ0FBQzNDLFdBQVcsQ0FBQzRDLE1BQU0sR0FBRyxDQUFDLEVBQUV5TixJQUFJLENBQUMsQ0FBQztJQUN4RSxJQUFJQyxPQUFPLEtBQUssSUFBSSxDQUFDclEsZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZSxJQUFJLENBQUMsRUFBRTtNQUNqRSxPQUFPLElBQUk7SUFDYjtJQUNBLElBQUksQ0FBQ0EsZUFBZSxHQUFHcVEsT0FBTztJQUM5QixJQUFJLENBQUM5SSxZQUFZLENBQUMsQ0FBQztJQUNuQixPQUFPLElBQUk7RUFDYjs7RUFFQTs7RUFFQStJLFFBQVFBLENBQUNDLElBQXVCLEVBQUV0RSxPQUFlLEVBQVE7SUFDdkQsSUFBQXVFLHFCQUFRLEVBQUMsMENBQTBDRCxJQUFJLG9CQUFvQnRFLE9BQU8sRUFBRXRKLE1BQU0sSUFBSSxDQUFDLEVBQUUsQ0FBQztJQUNsRyxJQUFJLENBQUNzSixPQUFPLEVBQUU7SUFDZCxNQUFNK0MsVUFBVSxHQUFHLElBQUksQ0FBQ3lCLGtCQUFrQixDQUFDRixJQUFJLENBQUM7SUFDaEQsSUFBSSxDQUFDdkIsVUFBVSxFQUFFO0lBQ2pCLElBQUF3QixxQkFBUSxFQUFDLG9DQUFvQ3hCLFVBQVUsRUFBRSxDQUFDO0lBQzFELElBQ0VBLFVBQVUsS0FBSyxRQUFRLElBQ3ZCQSxVQUFVLEtBQUssVUFBVSxJQUN6QkEsVUFBVSxLQUFLLFNBQVMsSUFDeEJBLFVBQVUsS0FBSyxRQUFRLElBQ3ZCQSxVQUFVLEtBQUssTUFBTSxJQUNyQkEsVUFBVSxLQUFLLGFBQWEsSUFDNUJBLFVBQVUsS0FBSyxPQUFPLElBQ3RCQSxVQUFVLEtBQUssTUFBTSxFQUNyQjtNQUNBLElBQUksQ0FBQ2hMLHNCQUFzQixHQUFHLElBQUk7SUFDcEM7SUFDQSxJQUFJZ0wsVUFBVSxLQUFLLGFBQWEsRUFBRTtNQUNoQyxJQUFJLENBQUMxTyxjQUFjLEdBQUcyTCxPQUFPO0lBQy9CO0lBRUEsSUFBSSxJQUFJLENBQUNyRixTQUFTLEVBQUU7TUFDbEIsTUFBTThKLFNBQVMsR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQztRQUNuQ0osSUFBSSxFQUFFdkIsVUFBVTtRQUNoQjRCLE9BQU8sRUFBRUwsSUFBSTtRQUNidEUsT0FBTztRQUNQNEUsU0FBUyxFQUFFL0QsSUFBSSxDQUFDRCxHQUFHLENBQUM7TUFDdEIsQ0FBQyxDQUFDO01BQ0YsSUFBSTZELFNBQVMsRUFBRTtRQUNiLE1BQU03TixJQUFJLEdBQUc2TixTQUFTLENBQUN6QyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUd5QyxTQUFTLEdBQUcsR0FBR0EsU0FBUyxJQUFJO1FBQ3BFLElBQUksQ0FBQ3hLLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQy9FLElBQUksQ0FBQztRQUN2QixJQUFJLENBQUNxQywwQkFBMEIsR0FBR3JDLElBQUksQ0FBQ29MLFFBQVEsQ0FBQyxJQUFJLENBQUM7TUFDdkQ7TUFDQTtJQUNGO0lBRUEsTUFBTTZDLEtBQUssR0FBRztNQUNaUCxJQUFJLEVBQUV2QixVQUFVO01BQ2hCNEIsT0FBTyxFQUFFTCxJQUFJO01BQ2J0RSxPQUFPO01BQ1A0RSxTQUFTLEVBQUUvRCxJQUFJLENBQUNELEdBQUcsQ0FBQztJQUN0QixDQUFDOztJQUVEO0lBQ0E7SUFDQSxJQUFJbUMsVUFBVSxLQUFLLFFBQVEsRUFBRTtNQUMzQjtNQUNBO01BQ0EsTUFBTStCLFdBQVcsR0FBRyxJQUFJLENBQUN0UixVQUFVLENBQUNtUSxTQUFTLENBQUNqVCxDQUFDLElBQUlBLENBQUMsQ0FBQzRULElBQUksS0FBSyxRQUFRLENBQUM7TUFDdkUsSUFBSVEsV0FBVyxLQUFLLENBQUMsQ0FBQyxFQUFFO1FBQ3RCLElBQUksQ0FBQ3RSLFVBQVUsQ0FBQzRPLElBQUksQ0FBQ3lDLEtBQUssQ0FBQztNQUM3QixDQUFDLE1BQU07UUFDTCxJQUFJLENBQUNyUixVQUFVLENBQUN1UixNQUFNLENBQUNELFdBQVcsRUFBRSxDQUFDLEVBQUVELEtBQUssQ0FBQztNQUMvQztJQUNGLENBQUMsTUFBTTtNQUNMLElBQUksQ0FBQ3JSLFVBQVUsQ0FBQzRPLElBQUksQ0FBQ3lDLEtBQUssQ0FBQztJQUM3QjtJQUVBLElBQUksQ0FBQyxJQUFJLENBQUNwUixpQkFBaUIsRUFBRTtNQUMzQnVSLGNBQWMsQ0FBQyxNQUFNO1FBQ25CLElBQUksQ0FBQyxJQUFJLENBQUN2UixpQkFBaUIsRUFBRTtVQUMzQixLQUFLLElBQUksQ0FBQ3dSLFlBQVksQ0FBQyxDQUFDO1FBQzFCO01BQ0YsQ0FBQyxDQUFDO0lBQ0o7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ1VDLG1CQUFtQkEsQ0FBQ0MsU0FBa0IsR0FBRyxLQUFLLEVBQVE7SUFDNUQsSUFBSSxJQUFJLENBQUN4SyxTQUFTLElBQUksSUFBSSxDQUFDZixRQUFRLElBQUksQ0FBQyxJQUFJLENBQUNLLE1BQU0sQ0FBQ1EsS0FBSyxJQUFJLElBQUksQ0FBQ25CLHdCQUF3QixFQUFFO01BQzFGO0lBQ0Y7SUFDQSxJQUFJLENBQUNELGlCQUFpQixHQUFHLElBQUk7SUFDN0IsSUFBSThMLFNBQVMsRUFBRTtNQUNiLElBQUksQ0FBQ0MscUJBQXFCLENBQUMsQ0FBQztNQUM1QjtJQUNGO0lBQ0EsSUFBSSxDQUFDOUosWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFQSxNQUFjMkosWUFBWUEsQ0FBQSxFQUFrQjtJQUMxQyxJQUFJLElBQUksQ0FBQ3hSLGlCQUFpQixJQUFJLElBQUksQ0FBQ21HLFFBQVEsRUFBRTtJQUM3QyxJQUFJLENBQUNuRyxpQkFBaUIsR0FBRyxJQUFJO0lBQzdCLElBQUk7TUFDRixPQUFPLElBQUksQ0FBQ0QsVUFBVSxDQUFDa0QsTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQ2tELFFBQVEsRUFBRTtRQUNuRCxNQUFNaUwsS0FBSyxHQUFHLElBQUksQ0FBQ3JSLFVBQVUsQ0FBQzBLLEtBQUssQ0FBQyxDQUFDO1FBQ3JDLElBQUksQ0FBQzJHLEtBQUssRUFBRTtRQUNaLE1BQU1RLFNBQVMsR0FBRyxJQUFJLENBQUNDLDBCQUEwQixDQUFDVCxLQUFLLENBQUM7UUFDeEQsSUFBSTtVQUNGLE1BQU0sSUFBSSxDQUFDVSxXQUFXLENBQUNGLFNBQVMsQ0FBQztRQUNuQyxDQUFDLENBQUMsT0FBT0csS0FBSyxFQUFFO1VBQ2Q7VUFDQSxJQUFJLElBQUksQ0FBQzVMLFFBQVEsRUFBRSxNQUFNLENBQUM7VUFDMUIsTUFBTTZMLE9BQU8sR0FDWEQsS0FBSyxZQUFZMUosS0FBSyxHQUFHMEosS0FBSyxDQUFDQyxPQUFPLEdBQUcsT0FBT0QsS0FBSyxLQUFLLFFBQVEsR0FBR0EsS0FBSyxHQUFHLHdCQUF3QjtVQUN2RyxJQUFJLENBQUN2TCxNQUFNLENBQUMwQixLQUFLLENBQUMsZ0JBQWdCOEosT0FBTyxJQUFJLENBQUM7UUFDaEQ7O1FBRUE7UUFDQSxJQUFJLElBQUksQ0FBQzdMLFFBQVEsRUFBRTs7UUFFbkI7UUFDQTtRQUNBLElBQUlpTCxLQUFLLENBQUNQLElBQUksS0FBSyxRQUFRLEVBQUU7VUFDM0IsSUFBSSxJQUFJLENBQUNySyxNQUFNLENBQUNRLEtBQUssRUFBRTtZQUNyQixJQUFJLENBQUNwQixpQkFBaUIsR0FBRyxJQUFJO1lBQzdCLElBQUksQ0FBQ2lDLFlBQVksQ0FBQyxDQUFDO1VBQ3JCO1VBQ0E7UUFDRixDQUFDLE1BQU07VUFDTCxNQUFNLElBQUksQ0FBQ29LLEtBQUssQ0FBQyxDQUFDLENBQUM7UUFDckI7TUFDRjtNQUNBO01BQ0E7TUFDQSxJQUFJLElBQUksQ0FBQ3pMLE1BQU0sQ0FBQ1EsS0FBSyxJQUFJLENBQUMsSUFBSSxDQUFDYixRQUFRLEVBQUU7UUFDdkMsSUFBSSxDQUFDUCxpQkFBaUIsR0FBRyxJQUFJO1FBQzdCLElBQUksQ0FBQ2lDLFlBQVksQ0FBQyxDQUFDO01BQ3JCO0lBQ0YsQ0FBQyxTQUFTO01BQ1IsSUFBSSxDQUFDN0gsaUJBQWlCLEdBQUcsS0FBSztJQUNoQztFQUNGOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1U2UiwwQkFBMEJBLENBQUNULEtBQWMsRUFBVztJQUMxRCxNQUFNYyxXQUFXLEdBQUlDLE1BQTJCLElBQzlDcEwsT0FBTyxDQUNMb0wsTUFBTSxJQUNKLENBQUNBLE1BQU0sQ0FBQ0MsV0FBVyxLQUNqQkQsTUFBTSxDQUFDdEIsSUFBSSxLQUFLLFVBQVUsSUFBSXNCLE1BQU0sQ0FBQ2pCLE9BQU8sS0FBSyxVQUFVLElBQzFEaUIsTUFBTSxDQUFDdEIsSUFBSSxLQUFLLFNBQVMsSUFBSXNCLE1BQU0sQ0FBQ2pCLE9BQU8sS0FBSyxTQUFVLENBQ2pFLENBQUM7SUFFSCxJQUFJLENBQUNnQixXQUFXLENBQUNkLEtBQUssQ0FBQyxFQUFFO01BQ3ZCLE9BQU9BLEtBQUs7SUFDZDtJQUVBLE9BQU8sSUFBSSxDQUFDclIsVUFBVSxDQUFDa0QsTUFBTSxHQUFHLENBQUMsSUFBSWlQLFdBQVcsQ0FBQyxJQUFJLENBQUNuUyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRTtNQUNwRSxNQUFNMlEsSUFBSSxHQUFHLElBQUksQ0FBQzNRLFVBQVUsQ0FBQzBLLEtBQUssQ0FBQyxDQUFFO01BQ3JDLE1BQU00SCxjQUFjLEdBQ2xCakIsS0FBSyxDQUFDN0UsT0FBTyxDQUFDdEosTUFBTSxHQUFHLENBQUMsSUFBSSxDQUFDbU8sS0FBSyxDQUFDN0UsT0FBTyxDQUFDZ0MsUUFBUSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUNtQyxJQUFJLENBQUNuRSxPQUFPLENBQUN0QixVQUFVLENBQUMsSUFBSSxDQUFDO01BQzdGbUcsS0FBSyxDQUFDN0UsT0FBTyxHQUFHOEYsY0FBYyxHQUFHLEdBQUdqQixLQUFLLENBQUM3RSxPQUFPLEtBQUttRSxJQUFJLENBQUNuRSxPQUFPLEVBQUUsR0FBRyxHQUFHNkUsS0FBSyxDQUFDN0UsT0FBTyxHQUFHbUUsSUFBSSxDQUFDbkUsT0FBTyxFQUFFO0lBQzFHO0lBRUEsT0FBTzZFLEtBQUs7RUFDZDs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0VBQ0UsTUFBTWtCLFdBQVdBLENBQUNDLFNBQWlCLEdBQUcsR0FBRyxFQUFpQjtJQUN4RDtJQUNBLElBQUksQ0FBQyxJQUFJLENBQUNyTCxTQUFTLElBQUksQ0FBQyxJQUFJLENBQUNsSCxpQkFBaUIsSUFBSSxJQUFJLENBQUNELFVBQVUsQ0FBQ2tELE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDNUUsS0FBSyxJQUFJLENBQUN1TyxZQUFZLENBQUMsQ0FBQztJQUMxQjtJQUVBLE1BQU1nQixLQUFLLEdBQUdwRixJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3hCLE9BQU8sQ0FBQyxJQUFJLENBQUNuTixpQkFBaUIsSUFBSSxJQUFJLENBQUNELFVBQVUsQ0FBQ2tELE1BQU0sR0FBRyxDQUFDLEtBQUttSyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDLEdBQUdxRixLQUFLLEdBQUdELFNBQVMsRUFBRTtNQUMvRixNQUFNLElBQUksQ0FBQ04sS0FBSyxDQUFDLENBQUMsQ0FBQztJQUNyQjtJQUVBLElBQUksQ0FBQyxJQUFJLENBQUMvSyxTQUFTLElBQUksSUFBSSxDQUFDVixNQUFNLENBQUNRLEtBQUssRUFBRTtNQUN4QyxJQUFJLENBQUNwQixpQkFBaUIsR0FBRyxJQUFJO01BQzdCLElBQUksQ0FBQ2lDLFlBQVksQ0FBQyxDQUFDO0lBQ3JCO0VBQ0Y7RUFFQSxNQUFjaUssV0FBV0EsQ0FBQ1YsS0FBYyxFQUFpQjtJQUN2RCxJQUFBTixxQkFBUSxFQUFDLHNDQUFzQ00sS0FBSyxDQUFDUCxJQUFJLG9CQUFvQk8sS0FBSyxDQUFDN0UsT0FBTyxFQUFFdEosTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQzFHLElBQUksSUFBSSxDQUFDaUUsU0FBUyxFQUFFO01BQ2xCLElBQUE0SixxQkFBUSxFQUFDLCtDQUErQyxDQUFDO01BQ3pELE1BQU0yQixjQUFjLEdBQUcsSUFBSSxDQUFDeEIsYUFBYSxDQUFDRyxLQUFLLENBQUM7TUFDaEQsSUFBSXFCLGNBQWMsRUFBRTtRQUNsQixNQUFNdFAsSUFBSSxHQUFHc1AsY0FBYyxDQUFDbEUsUUFBUSxDQUFDLElBQUksQ0FBQyxHQUFHa0UsY0FBYyxHQUFHLEdBQUdBLGNBQWMsSUFBSTtRQUNuRixJQUFJLENBQUNqTSxNQUFNLENBQUMwQixLQUFLLENBQUMvRSxJQUFJLENBQUM7UUFDdkIsSUFBSSxDQUFDcUMsMEJBQTBCLEdBQUdyQyxJQUFJLENBQUNvTCxRQUFRLENBQUMsSUFBSSxDQUFDO01BQ3ZEO01BQ0E7SUFDRjtJQUVBLE1BQU15QyxTQUFTLEdBQUcsSUFBSSxDQUFDQyxhQUFhLENBQUNHLEtBQUssQ0FBQztJQUMzQyxJQUFBTixxQkFBUSxFQUFDLHFDQUFxQ0UsU0FBUyxFQUFFL04sTUFBTSxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ3ZFLElBQUksQ0FBQytOLFNBQVMsRUFBRTs7SUFFaEI7SUFDQTtJQUNBLE1BQU0wQixTQUFTLEdBQUcsR0FBR3RCLEtBQUssQ0FBQ0YsT0FBTyxJQUFJRSxLQUFLLENBQUM3RSxPQUFPLEVBQUU7SUFDckQsSUFBSTZFLEtBQUssQ0FBQ1AsSUFBSSxLQUFLLFFBQVEsSUFBSTZCLFNBQVMsS0FBSyxJQUFJLENBQUNuTixvQkFBb0IsRUFBRTtNQUN0RTtJQUNGO0lBQ0EsSUFBSTZMLEtBQUssQ0FBQ1AsSUFBSSxLQUFLLFFBQVEsRUFBRTtNQUMzQixJQUFJLENBQUN0TCxvQkFBb0IsR0FBR21OLFNBQVM7SUFDdkM7O0lBRUE7SUFDQSxJQUFJLElBQUksQ0FBQ3ZPLFlBQVksR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDd0IsV0FBVyxFQUFFO01BQzdDLElBQUksQ0FBQ3NDLGVBQWUsQ0FBQyxDQUFDO0lBQ3hCO0lBQ0EsSUFBSSxDQUFDMUQsY0FBYyxHQUFHLEtBQUs7SUFFM0IsSUFBSTZNLEtBQUssQ0FBQ1AsSUFBSSxLQUFLLFFBQVEsSUFBSSxDQUFDLElBQUksQ0FBQ3JMLDBCQUEwQixJQUFJd0wsU0FBUyxDQUFDaE4sSUFBSSxDQUFDLENBQUMsRUFBRTtNQUNuRjtNQUNBLElBQUksQ0FBQ3dDLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQyxJQUFJLENBQUM7TUFDdkIsSUFBSSxDQUFDMUMsMEJBQTBCLEdBQUcsSUFBSTtJQUN4QztJQUVBLElBQUksQ0FBQ2dCLE1BQU0sQ0FBQzBCLEtBQUssQ0FBQzhJLFNBQVMsQ0FBQztJQUM1QixJQUFJLENBQUN4TCwwQkFBMEIsR0FBR3dMLFNBQVMsQ0FBQ3pDLFFBQVEsQ0FBQyxJQUFJLENBQUM7O0lBRTFEO0lBQ0EsSUFBSSxJQUFJLENBQUMvSCxNQUFNLENBQUNRLEtBQUssSUFBSSxJQUFJLENBQUNGLFdBQVcsSUFBSSxDQUFDLElBQUksQ0FBQ1gsUUFBUSxFQUFFO01BQzNELElBQUksQ0FBQ3NMLG1CQUFtQixDQUFDLElBQUksQ0FBQztJQUNoQztFQUNGO0VBRVFWLGtCQUFrQkEsQ0FBQ0YsSUFBdUIsRUFBNkI7SUFDN0UsUUFBUUEsSUFBSTtNQUNWLEtBQUssUUFBUTtRQUNYLE9BQU8sUUFBUTtNQUNqQixLQUFLLFNBQVM7UUFDWixPQUFPLFNBQVM7TUFDbEIsS0FBSyxRQUFRO01BQ2IsS0FBSyxXQUFXO1FBQ2QsT0FBTyxRQUFRO01BQ2pCLEtBQUssTUFBTTtNQUNYLEtBQUssV0FBVztRQUNkLE9BQU8sTUFBTTtNQUNmLEtBQUssYUFBYTtRQUNoQixPQUFPLGFBQWE7TUFDdEIsS0FBSyxPQUFPO1FBQ1YsT0FBTyxPQUFPO01BQ2hCLEtBQUssTUFBTTtRQUNULE9BQU8sTUFBTTtNQUNmLEtBQUssVUFBVTtNQUNmLEtBQUssUUFBUTtNQUNiLEtBQUssS0FBSztRQUNSLE9BQU8sVUFBVTtNQUNuQixLQUFLLE9BQU87UUFDVixPQUFPLFVBQVU7TUFDbkI7UUFDRSxPQUFPLElBQUk7SUFDZjtFQUNGO0VBRVFJLGFBQWFBLENBQUNHLEtBQWMsRUFBVTtJQUM1QztJQUNBLElBQUlBLEtBQUssQ0FBQ2dCLFdBQVcsRUFBRTtNQUNyQixPQUFPaEIsS0FBSyxDQUFDN0UsT0FBTztJQUN0QjtJQUVBLElBQUk2RSxLQUFLLENBQUNGLE9BQU8sS0FBSyxRQUFRLEVBQUU7TUFDOUI7TUFDQSxNQUFNdEUsS0FBSyxHQUFHd0UsS0FBSyxDQUFDN0UsT0FBTyxDQUFDTSxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUNsQixHQUFHLENBQUNnSCxJQUFJLElBQUlBLElBQUksQ0FBQzdDLE9BQU8sQ0FBQyxDQUFDLENBQUM7TUFDbkUsT0FBTyxHQUFHbEQsS0FBSyxDQUFDaUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJO0lBQ2hDOztJQUVBO0lBQ0EsUUFBUXVDLEtBQUssQ0FBQ1AsSUFBSTtNQUNoQixLQUFLLFFBQVE7UUFDWDtRQUNBLE9BQU8sR0FBRytCLFlBQUssQ0FBQ0MsT0FBTyxDQUFDLEdBQUcsQ0FBQyxJQUFJekIsS0FBSyxDQUFDN0UsT0FBTyxJQUFJO01BRW5ELEtBQUssU0FBUztRQUFFO1VBQ2Q7VUFDQSxJQUFJLElBQUksQ0FBQ3VHLGVBQWUsQ0FBQzFCLEtBQUssQ0FBQzdFLE9BQU8sQ0FBQyxFQUFFO1lBQ3ZDLE9BQU8sRUFBRTtVQUNYO1VBQ0EsTUFBTXdHLE9BQU8sR0FBRyxJQUFJLENBQUNDLHNCQUFzQixDQUFDNUIsS0FBSyxDQUFDN0UsT0FBTyxDQUFDO1VBQzFELElBQUksQ0FBQ3dHLE9BQU8sSUFBSSxJQUFJLENBQUNELGVBQWUsQ0FBQ0MsT0FBTyxDQUFDLEVBQUU7WUFDN0MsT0FBTyxFQUFFO1VBQ1g7VUFDQSxJQUFJLENBQUMsSUFBSSxDQUFDRSxtQkFBbUIsQ0FBQ0YsT0FBTyxDQUFDLEVBQUU7WUFDdEMsT0FBTyxFQUFFO1VBQ1g7VUFDQSxJQUFJLENBQUMxUSxrQkFBa0IsR0FBRztZQUN4QmMsSUFBSSxFQUFFNFAsT0FBTyxDQUFDbFAsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FBQ3VHLFdBQVcsQ0FBQyxDQUFDO1lBQ3ZEa0UsRUFBRSxFQUFFckIsSUFBSSxDQUFDRCxHQUFHLENBQUM7VUFDZixDQUFDO1VBQ0QsT0FBTyxJQUFJLENBQUMrRixtQkFBbUIsQ0FBQ0gsT0FBTyxDQUFDO1FBQzFDO01BRUEsS0FBSyxNQUFNO1FBQUU7VUFDWDtVQUNBLE1BQU14RyxPQUFPLEdBQUc2RSxLQUFLLENBQUM3RSxPQUFPLENBQUMxSSxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQztVQUN0RCxPQUFPLElBQUksQ0FBQ3NQLHFCQUFxQixDQUFDNUcsT0FBTyxDQUFDO1FBQzVDO01BRUEsS0FBSyxhQUFhO1FBQUU7VUFDbEI7VUFDQSxPQUFPLElBQUksQ0FBQzZHLHVCQUF1QixDQUFDaEMsS0FBSyxDQUFDN0UsT0FBTyxDQUFDO1FBQ3BEO01BRUEsS0FBSyxPQUFPO1FBQ1YsT0FBTyxJQUFJLENBQUM4RyxjQUFjLENBQUNqQyxLQUFLLENBQUM3RSxPQUFPLEVBQUU7VUFBRStHLEtBQUssRUFBRSxPQUFPO1VBQUVDLFVBQVUsRUFBRVgsWUFBSyxDQUFDWTtRQUFRLENBQUMsQ0FBQztNQUUxRixLQUFLLE1BQU07UUFDVCxPQUFPLElBQUksQ0FBQ0gsY0FBYyxDQUFDakMsS0FBSyxDQUFDN0UsT0FBTyxFQUFFO1VBQUUrRyxLQUFLLEVBQUUsTUFBTTtVQUFFQyxVQUFVLEVBQUVYLFlBQUssQ0FBQ2E7UUFBSyxDQUFDLENBQUM7TUFFdEYsS0FBSyxRQUFRO1FBQ1gsT0FBT3JDLEtBQUssQ0FBQzdFLE9BQU87TUFFdEIsS0FBSyxVQUFVO01BQ2Y7UUFBUztVQUNQO1VBQ0EsSUFBSSxJQUFJLENBQUN1RyxlQUFlLENBQUMxQixLQUFLLENBQUM3RSxPQUFPLENBQUMsRUFBRTtZQUN2QyxPQUFPLEVBQUU7VUFDWDtVQUNBO1VBQ0EsTUFBTW1ILE9BQU8sR0FBR3RDLEtBQUssQ0FBQ0YsT0FBTyxLQUFLLE9BQU87VUFDekMsT0FBTyxJQUFJLENBQUNtQyxjQUFjLENBQUNqQyxLQUFLLENBQUM3RSxPQUFPLEVBQUVtSCxPQUFPLEdBQUc7WUFBRUosS0FBSyxFQUFFLE9BQU87WUFBRUMsVUFBVSxFQUFFWCxZQUFLLENBQUNiO1VBQU0sQ0FBQyxHQUFHNEIsU0FBUyxDQUFDO1FBQzlHO0lBQ0Y7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVYixlQUFlQSxDQUFDdkcsT0FBZSxFQUFXO0lBQ2hELElBQUksQ0FBQ0EsT0FBTyxJQUFJQSxPQUFPLENBQUN2SSxJQUFJLENBQUMsQ0FBQyxDQUFDZixNQUFNLEtBQUssQ0FBQyxFQUFFLE9BQU8sSUFBSTs7SUFFeEQ7SUFDQSxJQUFJc0osT0FBTyxDQUFDdEIsVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUNzQixPQUFPLENBQUN0QixVQUFVLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQ3NCLE9BQU8sQ0FBQ3RCLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBRTtNQUN4RixPQUFPLElBQUk7SUFDYjs7SUFFQTtJQUNBLElBQUlzQixPQUFPLENBQUNKLFFBQVEsQ0FBQyxlQUFlLENBQUMsSUFBSUksT0FBTyxDQUFDSixRQUFRLENBQUMsV0FBVyxDQUFDLEVBQUU7TUFDdEUsT0FBTyxJQUFJO0lBQ2I7O0lBRUE7SUFDQSxJQUFJSSxPQUFPLENBQUN0QixVQUFVLENBQUMsR0FBRyxDQUFDLElBQUlzQixPQUFPLENBQUNKLFFBQVEsQ0FBQyxPQUFPLENBQUMsSUFBSUksT0FBTyxDQUFDSixRQUFRLENBQUMsTUFBTSxDQUFDLEVBQUU7TUFDcEYsT0FBTyxJQUFJO0lBQ2I7O0lBRUE7SUFDQSxJQUFJSSxPQUFPLENBQUN0SixNQUFNLEdBQUcsRUFBRSxJQUFJLHdCQUF3QixDQUFDMkgsSUFBSSxDQUFDMkIsT0FBTyxDQUFDLEVBQUU7TUFDakUsT0FBTyxJQUFJO0lBQ2I7O0lBRUE7SUFDQSxNQUFNcUgsVUFBVSxHQUFHLENBQUNySCxPQUFPLENBQUNzSCxLQUFLLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxFQUFFNVEsTUFBTTtJQUM1RCxNQUFNNlEsVUFBVSxHQUFHdkgsT0FBTyxDQUFDMUksT0FBTyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQ1osTUFBTTtJQUNwRCxJQUFJNlEsVUFBVSxHQUFHLEVBQUUsSUFBSUYsVUFBVSxHQUFHRSxVQUFVLEdBQUcsR0FBRyxFQUFFO01BQ3BELE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDZjtJQUVBLE9BQU8sS0FBSztFQUNkO0VBRVFkLHNCQUFzQkEsQ0FBQ3pHLE9BQWUsRUFBaUI7SUFDN0QsTUFBTStDLFVBQVUsR0FBRy9DLE9BQU8sQ0FBQzFJLE9BQU8sQ0FBQyxPQUFPLEVBQUUsSUFBSSxDQUFDLENBQUNBLE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDO0lBQzdFLElBQUksQ0FBQ3NMLFVBQVUsRUFBRSxPQUFPLElBQUk7SUFFNUIsTUFBTXlFLE9BQU8sR0FDWHpFLFVBQVUsQ0FBQ3JNLE1BQU0sR0FBRyxJQUFJLENBQUNkLHdCQUF3QixHQUM3Q21OLFVBQVUsQ0FBQzNMLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDeEIsd0JBQXdCLENBQUMsR0FDbERtTixVQUFVO0lBRWhCLE1BQU0wRSxXQUFXLEdBQUcsSUFBSSxDQUFDOVIsd0JBQXdCLEdBQUcsQ0FBQztJQUNyRCxNQUFNK1IsUUFBUSxHQUFHRixPQUFPLENBQ3JCbEgsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUNYcUgsT0FBTyxDQUFDdkIsSUFBSSxJQUFJQSxJQUFJLENBQUM5RixLQUFLLENBQUMsZUFBZSxDQUFDLENBQUMsQ0FDNUNsQixHQUFHLENBQUNnSCxJQUFJLElBQUlBLElBQUksQ0FBQzlPLE9BQU8sQ0FBQyxxQkFBcUIsRUFBRSxFQUFFLENBQUMsQ0FBQ0csSUFBSSxDQUFDLENBQUMsQ0FBQyxDQUMzRDRLLE1BQU0sQ0FBQzdILE9BQU8sQ0FBQztJQUVsQixJQUFJa04sUUFBUSxDQUFDaFIsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN6QixPQUFPLElBQUk7SUFDYjtJQUVBLE1BQU1rUixJQUFJLEdBQUcsSUFBSTFULEdBQUcsQ0FBUyxDQUFDO0lBQzlCLE1BQU0yVCxPQUFpQixHQUFHLEVBQUU7SUFDNUIsS0FBSyxNQUFNQyxPQUFPLElBQUlKLFFBQVEsRUFBRTtNQUM5QixNQUFNSyxpQkFBaUIsR0FBR0QsT0FBTyxDQUFDeFEsT0FBTyxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUM7TUFDdEQsTUFBTXdGLEdBQUcsR0FBR2lMLGlCQUFpQixDQUFDL0osV0FBVyxDQUFDLENBQUM7TUFDM0MsSUFBSTRKLElBQUksQ0FBQ3ZXLEdBQUcsQ0FBQ3lMLEdBQUcsQ0FBQyxFQUFFO1FBQ2pCO01BQ0Y7TUFDQThLLElBQUksQ0FBQ0ksR0FBRyxDQUFDbEwsR0FBRyxDQUFDO01BQ2IrSyxPQUFPLENBQUN6RixJQUFJLENBQUMyRixpQkFBaUIsQ0FBQztNQUMvQixJQUFJRixPQUFPLENBQUNuUixNQUFNLElBQUkrUSxXQUFXLEVBQUU7UUFDakM7TUFDRjtJQUNGO0lBRUEsSUFBSUksT0FBTyxDQUFDblIsTUFBTSxLQUFLLENBQUMsRUFBRTtNQUN4QixPQUFPLElBQUk7SUFDYjtJQUVBLE1BQU11UixXQUFXLEdBQUcsSUFBSSxDQUFDQywyQkFBMkIsQ0FBQ0wsT0FBTyxDQUFDO0lBQzdELElBQUlJLFdBQVcsQ0FBQ3ZSLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDNUIsT0FBTyxJQUFJO0lBQ2I7SUFFQSxNQUFNeVIsZ0JBQWdCLEdBQUdGLFdBQVcsQ0FBQzdRLEtBQUssQ0FBQyxDQUFDLEVBQUUsSUFBSSxDQUFDekIsd0JBQXdCLENBQUM7SUFDNUUsTUFBTXlTLFFBQVEsR0FBR0QsZ0JBQWdCLENBQUMvSSxHQUFHLENBQUNnSCxJQUFJLElBQUksSUFBSSxDQUFDaUMscUJBQXFCLENBQUNqQyxJQUFJLENBQUMsQ0FBQztJQUUvRSxPQUFPZ0MsUUFBUSxDQUFDOUYsSUFBSSxDQUFDLElBQUksQ0FBQztFQUM1QjtFQUVRK0YscUJBQXFCQSxDQUFDakMsSUFBWSxFQUFVO0lBQ2xELElBQUksc0JBQXNCLENBQUMvSCxJQUFJLENBQUMrSCxJQUFJLENBQUMsRUFBRTtNQUNyQyxPQUFPQSxJQUFJO0lBQ2I7SUFDQSxPQUFPLEtBQUtBLElBQUksRUFBRTtFQUNwQjtFQUVRa0Msc0JBQXNCQSxDQUFDbEMsSUFBWSxFQUFXO0lBQ3BELE9BQ0Usc0RBQXNELENBQUMvSCxJQUFJLENBQUMrSCxJQUFJLENBQUMsSUFDakUsVUFBVSxDQUFDL0gsSUFBSSxDQUFDK0gsSUFBSSxDQUFDLElBQ3JCQSxJQUFJLENBQUN4RyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQ25Cd0csSUFBSSxDQUFDeEcsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUNsQndHLElBQUksQ0FBQ3hHLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFDbkIsa0hBQWtILENBQUN2QixJQUFJLENBQUMrSCxJQUFJLENBQUM7RUFFakk7RUFFUThCLDJCQUEyQkEsQ0FBQ1IsUUFBa0IsRUFBWTtJQUNoRSxJQUFJLENBQUNBLFFBQVEsQ0FBQ2hSLE1BQU0sRUFBRTtNQUNwQixPQUFPLEVBQUU7SUFDWDtJQUVBLE1BQU02UixNQUFNLEdBQUdiLFFBQVEsQ0FBQ3RJLEdBQUcsQ0FBQyxDQUFDeEksSUFBSSxFQUFFNFIsS0FBSyxNQUFNO01BQzVDNVIsSUFBSTtNQUNKNFIsS0FBSztNQUNMQyxLQUFLLEVBQUUsSUFBSSxDQUFDQyxvQkFBb0IsQ0FBQzlSLElBQUk7SUFDdkMsQ0FBQyxDQUFDLENBQUM7SUFFSCxNQUFNK1IsU0FBUyxHQUFHSixNQUFNLENBQUNsSCxJQUFJLENBQUN1SCxJQUFJLElBQUlBLElBQUksQ0FBQ0gsS0FBSyxHQUFHLENBQUMsQ0FBQztJQUNyRCxJQUFJLENBQUNFLFNBQVMsRUFBRTtNQUNkLE9BQU9qQixRQUFRO0lBQ2pCO0lBRUFhLE1BQU0sQ0FBQ00sSUFBSSxDQUFDLENBQUNDLENBQUMsRUFBRUMsQ0FBQyxLQUFLO01BQ3BCLElBQUlBLENBQUMsQ0FBQ04sS0FBSyxLQUFLSyxDQUFDLENBQUNMLEtBQUssRUFBRSxPQUFPTSxDQUFDLENBQUNOLEtBQUssR0FBR0ssQ0FBQyxDQUFDTCxLQUFLO01BQ2pELE9BQU9LLENBQUMsQ0FBQ04sS0FBSyxHQUFHTyxDQUFDLENBQUNQLEtBQUs7SUFDMUIsQ0FBQyxDQUFDO0lBRUYsT0FBT0QsTUFBTSxDQUFDbkosR0FBRyxDQUFDd0osSUFBSSxJQUFJQSxJQUFJLENBQUNoUyxJQUFJLENBQUM7RUFDdEM7RUFFUThSLG9CQUFvQkEsQ0FBQ3RDLElBQVksRUFBVTtJQUNqRCxJQUFJcUMsS0FBSyxHQUFHLENBQUM7SUFDYixNQUFNTyxLQUFLLEdBQUc1QyxJQUFJLENBQUNwSSxXQUFXLENBQUMsQ0FBQztJQUVoQyxJQUFJLElBQUksQ0FBQ3NLLHNCQUFzQixDQUFDbEMsSUFBSSxDQUFDLEVBQUU7TUFDckNxQyxLQUFLLElBQUksQ0FBQztJQUNaO0lBRUEsTUFBTVEsY0FBYyxHQUFHLENBQ3JCLE1BQU0sRUFBRSxTQUFTLEVBQUUsUUFBUSxFQUFFLFNBQVMsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFLE9BQU8sRUFDakUsYUFBYSxFQUFFLFlBQVksRUFBRSxVQUFVLEVBQUUsU0FBUyxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQ2xFLE1BQU0sRUFBRSxRQUFRLEVBQUUsVUFBVSxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsUUFBUSxFQUFFLEtBQUssRUFDL0QsTUFBTSxFQUFFLE1BQU0sRUFBRSxXQUFXLEVBQUUsV0FBVyxDQUN6QztJQUNELElBQUlBLGNBQWMsQ0FBQzVILElBQUksQ0FBQzZILE9BQU8sSUFBSUYsS0FBSyxDQUFDcEosUUFBUSxDQUFDc0osT0FBTyxDQUFDLENBQUMsRUFBRTtNQUMzRFQsS0FBSyxJQUFJLENBQUM7SUFDWjtJQUVBLElBQUksVUFBVSxDQUFDcEssSUFBSSxDQUFDK0gsSUFBSSxDQUFDLEVBQUU7TUFDekJxQyxLQUFLLElBQUksQ0FBQztJQUNaO0lBRUEsSUFBSSxtREFBbUQsQ0FBQ3BLLElBQUksQ0FBQytILElBQUksQ0FBQyxFQUFFO01BQ2xFcUMsS0FBSyxJQUFJLENBQUM7SUFDWjtJQUVBLElBQUlyQyxJQUFJLENBQUMxUCxNQUFNLEdBQUcsR0FBRyxFQUFFO01BQ3JCK1IsS0FBSyxJQUFJLENBQUM7SUFDWjtJQUVBLE9BQU9BLEtBQUs7RUFDZDtFQUVRL0IsbUJBQW1CQSxDQUFDMUcsT0FBZSxFQUFXO0lBQ3BELE1BQU0rQyxVQUFVLEdBQUcvQyxPQUFPLENBQUMxSSxPQUFPLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDRyxJQUFJLENBQUMsQ0FBQyxDQUFDdUcsV0FBVyxDQUFDLENBQUM7SUFDcEUsSUFBSSxDQUFDK0UsVUFBVSxFQUFFO01BQ2YsT0FBTyxLQUFLO0lBQ2Q7SUFFQSxNQUFNbkMsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLElBQUksSUFBSSxDQUFDOUssa0JBQWtCLElBQUksSUFBSSxDQUFDQSxrQkFBa0IsQ0FBQ2MsSUFBSSxLQUFLbU0sVUFBVSxFQUFFO01BQzFFLElBQUluQyxHQUFHLEdBQUcsSUFBSSxDQUFDOUssa0JBQWtCLENBQUNvTSxFQUFFLEdBQUcsSUFBSSxDQUFDck0sb0JBQW9CLEVBQUU7UUFDaEUsT0FBTyxLQUFLO01BQ2Q7SUFDRjtJQUVBLE9BQU8sSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0VBQ1VzVCxxQkFBcUJBLENBQUNuSixPQUFlLEVBQVU7SUFDckQsTUFBTW9KLE1BQU0sR0FBRyxHQUFHO0lBQ2xCLE1BQU1sSyxRQUFRLEdBQUczSSxJQUFJLENBQUNDLEdBQUcsQ0FBQyxFQUFFLEVBQUVELElBQUksQ0FBQ0UsR0FBRyxDQUFDLElBQUksQ0FBQzBJLFNBQVMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUNwRSxNQUFNa0IsS0FBSyxHQUFHTCxPQUFPLENBQUNNLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFDakMsTUFBTStJLE1BQWdCLEdBQUcsRUFBRTtJQUUzQixLQUFLLElBQUlDLE9BQU8sR0FBRyxDQUFDLEVBQUVBLE9BQU8sR0FBR2pKLEtBQUssQ0FBQzNKLE1BQU0sRUFBRTRTLE9BQU8sRUFBRSxFQUFFO01BQ3ZELE1BQU1sRCxJQUFJLEdBQUcvRixLQUFLLENBQUNpSixPQUFPLENBQUU7TUFDNUIsSUFBSSxDQUFDbEQsSUFBSSxDQUFDM08sSUFBSSxDQUFDLENBQUMsRUFBRTtRQUNoQjRSLE1BQU0sQ0FBQ2pILElBQUksQ0FBQyxFQUFFLENBQUM7UUFDZjtNQUNGOztNQUVBO01BQ0EsTUFBTW1ILEtBQUssR0FBR25ELElBQUksQ0FBQzlGLEtBQUssQ0FBQyxPQUFPLENBQUM7TUFDakMsSUFBSWtKLFdBQVcsR0FBRyxFQUFFO01BRXBCLEtBQUssTUFBTUMsSUFBSSxJQUFJRixLQUFLLEVBQUU7UUFDeEIsSUFBSSxDQUFDQyxXQUFXLEdBQUdDLElBQUksRUFBRS9TLE1BQU0sR0FBR3dJLFFBQVEsSUFBSXNLLFdBQVcsQ0FBQy9SLElBQUksQ0FBQyxDQUFDLEVBQUU7VUFDaEU7VUFDQSxNQUFNaVMsTUFBTSxHQUFHTCxNQUFNLENBQUMzUyxNQUFNLEtBQUssQ0FBQyxJQUFJNFMsT0FBTyxLQUFLLENBQUMsR0FBRyxHQUFHRixNQUFNLEdBQUcsR0FBRyxJQUFJO1VBQ3pFQyxNQUFNLENBQUNqSCxJQUFJLENBQUMsR0FBR3NILE1BQU0sR0FBR0YsV0FBVyxDQUFDakcsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDO1VBQ2hEaUcsV0FBVyxHQUFHQyxJQUFJLENBQUNFLFNBQVMsQ0FBQyxDQUFDO1FBQ2hDLENBQUMsTUFBTTtVQUNMSCxXQUFXLElBQUlDLElBQUk7UUFDckI7TUFDRjtNQUVBLElBQUlELFdBQVcsQ0FBQy9SLElBQUksQ0FBQyxDQUFDLEVBQUU7UUFDdEIsTUFBTWlTLE1BQU0sR0FBR0wsTUFBTSxDQUFDM1MsTUFBTSxLQUFLLENBQUMsSUFBSTRTLE9BQU8sS0FBSyxDQUFDLEdBQUcsR0FBR0YsTUFBTSxHQUFHLEdBQUcsSUFBSTtRQUN6RUMsTUFBTSxDQUFDakgsSUFBSSxDQUFDLEdBQUdzSCxNQUFNLEdBQUdGLFdBQVcsQ0FBQ2pHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQztNQUNsRDtJQUNGO0lBRUEsT0FBTzhGLE1BQU0sQ0FBQy9HLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJO0VBQ2pDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVXNILGNBQWNBLENBQUM1SixPQUFlLEVBQVU7SUFDOUMsTUFBTW9KLE1BQU0sR0FBRyxHQUFHO0lBQ2xCO0lBQ0EsTUFBTTlCLEtBQUssR0FBR3RILE9BQU8sQ0FBQ3NILEtBQUssQ0FBQyxrQkFBa0IsQ0FBQztJQUMvQyxJQUFJLENBQUNBLEtBQUssRUFBRTtNQUNWO01BQ0EsTUFBTXVDLFNBQVMsR0FBRzdKLE9BQU8sQ0FBQ3NILEtBQUssQ0FBQyxRQUFRLENBQUM7TUFDekMsSUFBSXVDLFNBQVMsRUFBRTtRQUNiLE9BQU8sR0FBR1QsTUFBTSxJQUFJL0MsWUFBSyxDQUFDeUQsSUFBSSxDQUFDLElBQUlELFNBQVMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLElBQUk7TUFDekQ7TUFDQSxPQUFPLEdBQUdULE1BQU0sSUFBSXBKLE9BQU8sSUFBSTtJQUNqQztJQUVBLE1BQU0rSixRQUFRLEdBQUd6QyxLQUFLLENBQUMsQ0FBQyxDQUFDO0lBQ3pCLE1BQU0wQyxPQUFPLEdBQUcxQyxLQUFLLENBQUMsQ0FBQyxDQUFFO0lBQ3pCLE1BQU1wSSxRQUFRLEdBQUczSSxJQUFJLENBQUNFLEdBQUcsQ0FBQyxJQUFJLENBQUNuRCxJQUFJLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQzs7SUFFNUM7SUFDQSxNQUFNb1csTUFBTSxHQUFHLEdBQUdOLE1BQU0sSUFBSS9DLFlBQUssQ0FBQ3lELElBQUksQ0FBQyxJQUFJQyxRQUFRLEdBQUcsQ0FBQyxHQUFHO0lBQzFELE1BQU1FLFNBQVMsR0FBR0YsUUFBUSxDQUFFclQsTUFBTSxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3hDLE1BQU13VCxNQUFNLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUNGLFNBQVMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDOztJQUUxQztJQUNBLE1BQU1HLElBQUksR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQ0wsT0FBTyxDQUFDO0lBQ3hDLElBQUlJLElBQUksQ0FBQzFULE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDckIsT0FBTyxHQUFHZ1QsTUFBTSxDQUFDbkcsT0FBTyxDQUFDLENBQUMsSUFBSTtJQUNoQztJQUVBLE1BQU1sRCxLQUFlLEdBQUcsRUFBRTtJQUMxQixJQUFJbUosV0FBVyxHQUFHRSxNQUFNO0lBRXhCLEtBQUssSUFBSXhZLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR2taLElBQUksQ0FBQzFULE1BQU0sRUFBRXhGLENBQUMsRUFBRSxFQUFFO01BQ3BDLE1BQU1vWixHQUFHLEdBQUdGLElBQUksQ0FBQ2xaLENBQUMsQ0FBRTtNQUNwQixNQUFNcVosT0FBTyxHQUFHLEdBQUdsRSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQ0gsR0FBRyxDQUFDeE4sR0FBRyxHQUFHLEdBQUcsQ0FBQyxJQUFJLElBQUksQ0FBQzROLGNBQWMsQ0FBQ0osR0FBRyxDQUFDeE4sR0FBRyxFQUFFd04sR0FBRyxDQUFDSyxLQUFLLENBQUMsRUFBRTtNQUM3RixNQUFNQyxTQUFTLEdBQUcxWixDQUFDLEdBQUdrWixJQUFJLENBQUMxVCxNQUFNLEdBQUcsQ0FBQyxHQUFHLElBQUksR0FBRyxFQUFFOztNQUVqRDtNQUNBLE1BQU1tVSxRQUFRLEdBQUdyQixXQUFXLEdBQUdlLE9BQU8sR0FBR0ssU0FBUztNQUNsRCxJQUFJLElBQUksQ0FBQ0UsU0FBUyxDQUFDRCxRQUFRLENBQUMsQ0FBQ25VLE1BQU0sR0FBR3dJLFFBQVEsSUFBSXNLLFdBQVcsS0FBS0UsTUFBTSxFQUFFO1FBQ3hFckosS0FBSyxDQUFDK0IsSUFBSSxDQUFDb0gsV0FBVyxDQUFDakcsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNqQ2lHLFdBQVcsR0FBR1UsTUFBTSxHQUFHSyxPQUFPLEdBQUdLLFNBQVM7TUFDNUMsQ0FBQyxNQUFNO1FBQ0xwQixXQUFXLElBQUllLE9BQU8sR0FBR0ssU0FBUztNQUNwQztJQUNGO0lBRUEsSUFBSXBCLFdBQVcsQ0FBQy9SLElBQUksQ0FBQyxDQUFDLEVBQUU7TUFDdEI0SSxLQUFLLENBQUMrQixJQUFJLENBQUNvSCxXQUFXLENBQUNqRyxPQUFPLENBQUMsQ0FBQyxDQUFDO0lBQ25DO0lBRUEsT0FBT2xELEtBQUssQ0FBQ2lDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxJQUFJO0VBQ2hDOztFQUVBO0FBQ0Y7QUFDQTtFQUNVK0gsYUFBYUEsQ0FBQ0wsT0FBZSxFQUF5QztJQUM1RSxNQUFNSSxJQUEyQyxHQUFHLEVBQUU7SUFDdEQ7SUFDQSxNQUFNVyxLQUFLLEdBQUcsc0NBQXNDO0lBQ3BELElBQUl6RCxLQUFLO0lBQ1QsT0FBTyxDQUFDQSxLQUFLLEdBQUd5RCxLQUFLLENBQUNDLElBQUksQ0FBQ2hCLE9BQU8sQ0FBQyxNQUFNLElBQUksRUFBRTtNQUM3Q0ksSUFBSSxDQUFDaEksSUFBSSxDQUFDO1FBQUV0RixHQUFHLEVBQUV3SyxLQUFLLENBQUMsQ0FBQyxDQUFFO1FBQUVxRCxLQUFLLEVBQUVyRCxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUU3UCxJQUFJLENBQUM7TUFBRSxDQUFDLENBQUM7SUFDeEQ7SUFDQSxPQUFPMlMsSUFBSTtFQUNiOztFQUVBO0FBQ0Y7QUFDQTtFQUNVTSxjQUFjQSxDQUFDNU4sR0FBVyxFQUFFNk4sS0FBYSxFQUFVO0lBQ3pEO0lBQ0EsTUFBTU0sUUFBUSxHQUFHTixLQUFLLENBQUNqTSxVQUFVLENBQUMsR0FBRyxDQUFDLElBQUlpTSxLQUFLLENBQUMzSSxRQUFRLENBQUMsR0FBRyxDQUFDO0lBQzdELE1BQU1rSixLQUFLLEdBQUdELFFBQVEsR0FBR04sS0FBSyxDQUFDdlQsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxHQUFHdVQsS0FBSztJQUVuRCxNQUFNUSxRQUFRLEdBQUdyTyxHQUFHLENBQUNrQixXQUFXLENBQUMsQ0FBQztJQUNsQyxNQUFNb04sY0FBYyxHQUNsQkQsUUFBUSxDQUFDdkwsUUFBUSxDQUFDLE1BQU0sQ0FBQyxJQUN6QnVMLFFBQVEsS0FBSyxNQUFNLElBQ25CQSxRQUFRLEtBQUssU0FBUyxJQUN0QkEsUUFBUSxLQUFLLE9BQU8sSUFDcEJBLFFBQVEsS0FBSyxTQUFTLElBQ3RCQSxRQUFRLEtBQUssS0FBSzs7SUFFcEI7SUFDQSxNQUFNRSxNQUFNLEdBQUcsRUFBRTtJQUNqQixNQUFNQyxTQUFTLEdBQUdGLGNBQWMsSUFBSUYsS0FBSyxDQUFDeFUsTUFBTSxJQUFJMlUsTUFBTSxHQUFHSCxLQUFLLEdBQUdBLEtBQUssQ0FBQzlULEtBQUssQ0FBQyxDQUFDLEVBQUVpVSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsS0FBSztJQUV2RyxPQUFPSixRQUFRLEdBQUcsSUFBSUssU0FBUyxHQUFHLEdBQUdBLFNBQVM7RUFDaEQ7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVUMsZ0JBQWdCQSxDQUFDdkwsT0FBZSxFQUFVO0lBQ2hEO0lBQ0EsTUFBTXdMLFlBQVksR0FBR3hMLE9BQU8sQ0FBQ3NILEtBQUssQ0FBQyxrR0FBa0csQ0FBQztJQUN0SSxJQUFJa0UsWUFBWSxFQUFFO01BQ2hCLE9BQU8sS0FBS25GLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxLQUFLekssT0FBTyxJQUFJcUcsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsb0JBQW9CLENBQUMsSUFBSTtJQUN6Rjs7SUFFQTtJQUNBLE1BQU1wSyxLQUFLLEdBQUdMLE9BQU8sQ0FBQ00sS0FBSyxDQUFDLElBQUksQ0FBQztJQUNqQyxJQUFJRCxLQUFLLENBQUMzSixNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3BCLE1BQU0rVSxPQUFPLEdBQUdwTCxLQUFLLENBQUNqSixLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDa0wsSUFBSSxDQUFDLElBQUksQ0FBQztNQUM1QyxPQUFPLEtBQUsrRCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBS2dCLE9BQU8sT0FBT3BGLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU9wSyxLQUFLLENBQUMzSixNQUFNLEdBQUcsQ0FBQyxnQ0FBZ0MsQ0FBQyxJQUFJO0lBQy9IO0lBRUEsT0FBTyxLQUFLMlAsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLEtBQUt6SyxPQUFPLElBQUk7RUFDakQ7O0VBRUE7QUFDRjtBQUNBO0VBQ1U0RyxxQkFBcUJBLENBQUM1RyxPQUFlLEVBQVU7SUFDckQsTUFBTW9KLE1BQU0sR0FBRyxHQUFHO0lBQ2xCO0lBQ0EsTUFBTTlCLEtBQUssR0FBR3RILE9BQU8sQ0FBQ3NILEtBQUssQ0FBQywwQkFBMEIsQ0FBQztJQUN2RCxJQUFJLENBQUNBLEtBQUssRUFBRTtNQUNWLE9BQU8sR0FBRzhCLE1BQU0sSUFBSXBKLE9BQU8sSUFBSTtJQUNqQztJQUVBLE1BQU0rSixRQUFRLEdBQUd6QyxLQUFLLENBQUMsQ0FBQyxDQUFFO0lBQzFCLE1BQU0wQyxPQUFPLEdBQUcxQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUU3UCxJQUFJLENBQUMsQ0FBQyxJQUFJLEVBQUU7O0lBRXRDO0lBQ0EsSUFBSSxDQUFDdVMsT0FBTyxFQUFFO01BQ1osT0FBTyxHQUFHWixNQUFNLElBQUkvQyxZQUFLLENBQUN5RCxJQUFJLENBQUMsSUFBSUMsUUFBUSxHQUFHLENBQUMsSUFBSTtJQUNyRDtJQUVBLE1BQU03SyxRQUFRLEdBQUcsSUFBSSxDQUFDNUwsSUFBSSxHQUFHLENBQUMsQ0FBQyxDQUFDOztJQUVoQztJQUNBLE1BQU1vWSxNQUFNLEdBQUcsSUFBSSxDQUFDQyxlQUFlLENBQUMzQixPQUFPLENBQUM7SUFDNUMsSUFBSTBCLE1BQU0sQ0FBQ2hWLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDdkIsT0FBTyxHQUFHMFMsTUFBTSxJQUFJL0MsWUFBSyxDQUFDeUQsSUFBSSxDQUFDLElBQUlDLFFBQVEsR0FBRyxDQUFDLElBQUlDLE9BQU8sSUFBSTtJQUNoRTs7SUFFQTtJQUNBLE9BQU8sSUFBSSxDQUFDNEIsZ0JBQWdCLENBQUM3QixRQUFRLEVBQUUyQixNQUFNLEVBQUV4TSxRQUFRLENBQUM7RUFDMUQ7O0VBRUE7QUFDRjtBQUNBO0VBQ1V5TSxlQUFlQSxDQUFDM0IsT0FBZSxFQUF5QztJQUM5RSxNQUFNMEIsTUFBNkMsR0FBRyxFQUFFO0lBQ3hEO0lBQ0EsTUFBTVgsS0FBSyxHQUFHLHVDQUF1QztJQUNyRCxJQUFJekQsS0FBSztJQUNULE9BQU8sQ0FBQ0EsS0FBSyxHQUFHeUQsS0FBSyxDQUFDQyxJQUFJLENBQUNoQixPQUFPLENBQUMsTUFBTSxJQUFJLEVBQUU7TUFDN0MwQixNQUFNLENBQUN0SixJQUFJLENBQUM7UUFBRXRGLEdBQUcsRUFBRXdLLEtBQUssQ0FBQyxDQUFDLENBQUU7UUFBRXFELEtBQUssRUFBRXJELEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBRTdQLElBQUksQ0FBQztNQUFFLENBQUMsQ0FBQztJQUMxRDtJQUNBLE9BQU9pVSxNQUFNO0VBQ2Y7O0VBRUE7QUFDRjtBQUNBO0VBQ1VFLGdCQUFnQkEsQ0FDdEI3QixRQUFnQixFQUNoQjJCLE1BQTZDLEVBQzdDeE0sUUFBZ0IsRUFDUjtJQUNSLE1BQU1rSyxNQUFNLEdBQUcsR0FBRztJQUNsQixNQUFNL0ksS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTTZKLE1BQU0sR0FBRyxVQUFVLENBQUMsQ0FBQzs7SUFFM0IsSUFBSVYsV0FBVyxHQUFHLEdBQUdKLE1BQU0sSUFBSS9DLFlBQUssQ0FBQ3lELElBQUksQ0FBQyxJQUFJQyxRQUFRLEdBQUcsQ0FBQyxHQUFHO0lBQzdELElBQUk4QixVQUFVLEdBQUcsSUFBSTtJQUVyQixLQUFLLE1BQU1DLEtBQUssSUFBSUosTUFBTSxFQUFFO01BQzFCLE1BQU1LLFlBQVksR0FBRyxJQUFJLENBQUNDLGVBQWUsQ0FBQ0YsS0FBSyxDQUFDaFAsR0FBRyxFQUFFZ1AsS0FBSyxDQUFDbkIsS0FBSyxDQUFDO01BQ2pFLE1BQU1zQixTQUFTLEdBQUcsR0FBR0gsS0FBSyxDQUFDaFAsR0FBRyxLQUFLaVAsWUFBWSxFQUFFO01BQ2pELE1BQU1HLFFBQVEsR0FBR0wsVUFBVSxHQUFHSSxTQUFTLEdBQUcsS0FBS0EsU0FBUyxFQUFFOztNQUUxRDtNQUNBLE1BQU1wQixRQUFRLEdBQUdyQixXQUFXLEdBQUcwQyxRQUFRO01BQ3ZDLE1BQU1DLFdBQVcsR0FBRyxJQUFJLENBQUNDLGFBQWEsQ0FBQ3ZCLFFBQVEsQ0FBQztNQUVoRCxJQUFJc0IsV0FBVyxHQUFHak4sUUFBUSxJQUFJLENBQUMyTSxVQUFVLEVBQUU7UUFDekM7UUFDQXhMLEtBQUssQ0FBQytCLElBQUksQ0FBQ29ILFdBQVcsQ0FBQztRQUN2QkEsV0FBVyxHQUFHVSxNQUFNLEdBQUcrQixTQUFTO01BQ2xDLENBQUMsTUFBTTtRQUNMekMsV0FBVyxJQUFJMEMsUUFBUTtNQUN6QjtNQUNBTCxVQUFVLEdBQUcsS0FBSztJQUNwQjtJQUVBeEwsS0FBSyxDQUFDK0IsSUFBSSxDQUFDb0gsV0FBVyxDQUFDO0lBRXZCLE9BQU9uSixLQUFLLENBQUNpQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSTtFQUNoQzs7RUFFQTtBQUNGO0FBQ0E7RUFDVTBKLGVBQWVBLENBQUNsUCxHQUFXLEVBQUU2TixLQUFhLEVBQVU7SUFDMUQsTUFBTVEsUUFBUSxHQUFHck8sR0FBRyxDQUFDa0IsV0FBVyxDQUFDLENBQUM7SUFDbEMsSUFBSW1OLFFBQVEsQ0FBQ3ZMLFFBQVEsQ0FBQyxNQUFNLENBQUMsSUFBSXVMLFFBQVEsS0FBSyxNQUFNLElBQUlBLFFBQVEsS0FBSyxTQUFTLElBQUlBLFFBQVEsS0FBSyxPQUFPLEVBQUU7TUFDdEcsT0FBTzlFLFlBQUssQ0FBQ1ksT0FBTyxDQUFDMEQsS0FBSyxDQUFDO0lBQzdCO0lBQ0EsSUFBSVEsUUFBUSxLQUFLLFNBQVMsSUFBSUEsUUFBUSxLQUFLLEtBQUssRUFBRTtNQUNoRCxPQUFPOUUsWUFBSyxDQUFDeUQsSUFBSSxDQUFDYSxLQUFLLENBQUM7SUFDMUI7SUFDQSxPQUFPQSxLQUFLO0VBQ2Q7O0VBRUE7QUFDRjtBQUNBO0VBQ1UwQixrQkFBa0JBLENBQUN0QyxRQUFnQixFQUFFQyxPQUFlLEVBQWlCO0lBQzNFLE1BQU1GLElBQUksR0FBR0MsUUFBUSxDQUFDL0wsV0FBVyxDQUFDLENBQUM7O0lBRW5DO0lBQ0EsSUFBSSxDQUFDLE1BQU0sRUFBRSxPQUFPLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxNQUFNLEVBQUUsUUFBUSxDQUFDLENBQUM0QixRQUFRLENBQUNrSyxJQUFJLENBQUMsRUFBRTtNQUN0RSxNQUFNd0MsU0FBUyxHQUFHdEMsT0FBTyxDQUFDMUMsS0FBSyxDQUFDLHlDQUF5QyxDQUFDO01BQzFFLElBQUlnRixTQUFTLEVBQUU7UUFDYixNQUFNQyxJQUFJLEdBQUdELFNBQVMsQ0FBQyxDQUFDLENBQUU7UUFDMUIsT0FBT2pHLFlBQUssQ0FBQ21HLElBQUksRUFBRUQsSUFBSSxHQUFHbEcsWUFBSyxDQUFDbUcsSUFBSSxDQUFDRCxJQUFJLENBQUNBLElBQUksQ0FBQyxHQUFHbEcsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUM4QixJQUFJLENBQUM7TUFDeEU7SUFDRjs7SUFFQTtJQUNBLElBQUl6QyxJQUFJLEtBQUssTUFBTSxFQUFFO01BQ25CLE1BQU0yQyxRQUFRLEdBQUd6QyxPQUFPLENBQUMxQyxLQUFLLENBQUMsc0JBQXNCLENBQUM7TUFDdEQsSUFBSW1GLFFBQVEsRUFBRTtRQUNaLE1BQU1oSixHQUFHLEdBQUdnSixRQUFRLENBQUMsQ0FBQyxDQUFFO1FBQ3hCLE9BQU9wRyxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQ2hILEdBQUcsQ0FBQztNQUM1QjtJQUNGO0lBRUEsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7QUFDRjtBQUNBO0VBQ1VvRCx1QkFBdUJBLENBQUM3RyxPQUFlLEVBQVU7SUFDdkQ7SUFDQSxNQUFNME0sU0FBUyxHQUFHMU0sT0FBTyxDQUFDc0gsS0FBSyxDQUFDLGlCQUFpQixDQUFDO0lBQ2xELE1BQU1xRixTQUFTLEdBQUczTSxPQUFPLENBQUNzSCxLQUFLLENBQUMsOEJBQThCLENBQUM7SUFDL0QsTUFBTXNGLFNBQVMsR0FBRzVNLE9BQU8sQ0FBQ3NILEtBQUssQ0FBQyx3QkFBd0IsQ0FBQztJQUV6RCxJQUFJdUYsT0FBZTtJQUNuQixJQUFJRCxTQUFTLEVBQUU7TUFDYkMsT0FBTyxHQUFHLFFBQVFELFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFBUTtJQUN4QyxDQUFDLE1BQU0sSUFBSUYsU0FBUyxFQUFFO01BQ3BCRyxPQUFPLEdBQUcsU0FBU0gsU0FBUyxDQUFDLENBQUMsQ0FBQyxRQUFRQSxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssR0FBRyxHQUFHLEVBQUUsR0FBRyxHQUFHLEVBQUU7SUFDMUUsQ0FBQyxNQUFNLElBQUlDLFNBQVMsRUFBRTtNQUNwQkUsT0FBTyxHQUFHLFNBQVNGLFNBQVMsQ0FBQyxDQUFDLENBQUMsUUFBUUEsU0FBUyxDQUFDLENBQUMsQ0FBQyxLQUFLLEdBQUcsR0FBRyxFQUFFLEdBQUcsR0FBRyxFQUFFO0lBQzFFLENBQUMsTUFBTSxJQUFJM00sT0FBTyxDQUFDc0gsS0FBSyxDQUFDLHNEQUFzRCxDQUFDLEVBQUU7TUFDaEZ1RixPQUFPLEdBQUcsR0FBRztJQUNmLENBQUMsTUFBTTtNQUNMO01BQ0FBLE9BQU8sR0FBRzdNLE9BQU8sQ0FBQ3RKLE1BQU0sR0FBRyxFQUFFLEdBQUdzSixPQUFPLENBQUM1SSxLQUFLLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxHQUFHLEdBQUcsR0FBRzRJLE9BQU87SUFDdEU7SUFFQSxNQUFNOE0sY0FBYyxHQUFHLElBQUksQ0FBQ0Msa0JBQWtCLENBQUNGLE9BQU8sQ0FBQztJQUN2RCxPQUFPLEtBQUt4RyxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUMsS0FBS3FDLGNBQWMsSUFBSXpHLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLG9CQUFvQixDQUFDLElBQUk7RUFDaEc7RUFFUXNDLGtCQUFrQkEsQ0FBQ0YsT0FBZSxFQUFVO0lBQ2xELElBQUksQ0FBQ0EsT0FBTyxFQUFFLE9BQU9BLE9BQU87SUFDNUIsTUFBTTdELEtBQUssR0FBRzZELE9BQU8sQ0FBQzdPLFdBQVcsQ0FBQyxDQUFDO0lBQ25DLElBQUlnTCxLQUFLLENBQUNwSixRQUFRLENBQUMsTUFBTSxDQUFDLElBQUlvSixLQUFLLENBQUNwSixRQUFRLENBQUMsT0FBTyxDQUFDLEVBQUU7TUFDckQsT0FBT3lHLFlBQUssQ0FBQ2IsS0FBSyxDQUFDcUgsT0FBTyxDQUFDO0lBQzdCO0lBQ0EsSUFBSUEsT0FBTyxDQUFDbk8sVUFBVSxDQUFDLEdBQUcsQ0FBQyxJQUFJc0ssS0FBSyxDQUFDcEosUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJb0osS0FBSyxDQUFDcEosUUFBUSxDQUFDLFNBQVMsQ0FBQyxJQUFJb0osS0FBSyxDQUFDcEosUUFBUSxDQUFDLFNBQVMsQ0FBQyxFQUFFO01BQ2xILE9BQU95RyxZQUFLLENBQUMyRyxPQUFPLENBQUNILE9BQU8sQ0FBQztJQUMvQjtJQUNBLE9BQU94RyxZQUFLLENBQUNhLElBQUksQ0FBQzJGLE9BQU8sQ0FBQztFQUM1Qjs7RUFFQTtBQUNGO0FBQ0E7RUFDVUkscUJBQXFCQSxDQUFDak4sT0FBZSxFQUFVO0lBQ3JELE9BQU8sSUFBSSxDQUFDOEcsY0FBYyxDQUFDOUcsT0FBTyxDQUFDO0VBQ3JDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1U4RyxjQUFjQSxDQUNwQjlHLE9BQWUsRUFDZnlDLE9BQXNGLEdBQUcsQ0FBQyxDQUFDLEVBQ25GO0lBQ1IsTUFBTTJHLE1BQU0sR0FBRyxHQUFHO0lBQ2xCLE1BQU04RCxPQUFPLEdBQUdsTixPQUFPLENBQUMxSSxPQUFPLENBQUMsV0FBVyxFQUFFLEVBQUUsQ0FBQyxDQUFDaU0sT0FBTyxDQUFDLENBQUM7SUFDMUQsSUFBSSxDQUFDMkosT0FBTyxDQUFDelYsSUFBSSxDQUFDLENBQUMsRUFBRTtNQUNuQixPQUFPLEVBQUU7SUFDWDs7SUFFQTtJQUNBLE1BQU0wVixjQUFjLEdBQUcsSUFBSSxDQUFDaE8sU0FBUyxDQUFDLENBQUM7SUFDdkMsTUFBTUQsUUFBUSxHQUFHM0ksSUFBSSxDQUFDQyxHQUFHLENBQUMsRUFBRSxFQUFFRCxJQUFJLENBQUNFLEdBQUcsQ0FBQ2dNLE9BQU8sQ0FBQ3ZELFFBQVEsSUFBSWlPLGNBQWMsR0FBRyxDQUFDLEVBQUVBLGNBQWMsQ0FBQyxDQUFDO0lBQy9GLE1BQU1DLFNBQVMsR0FBRzNLLE9BQU8sQ0FBQ3NFLEtBQUssR0FDM0IsR0FBR3RFLE9BQU8sQ0FBQ3VFLFVBQVUsR0FBR3ZFLE9BQU8sQ0FBQ3VFLFVBQVUsQ0FBQ3ZFLE9BQU8sQ0FBQ3NFLEtBQUssQ0FBQyxHQUFHdEUsT0FBTyxDQUFDc0UsS0FBSyxHQUFHVixZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLLENBQUMsRUFBRSxHQUNuRyxFQUFFO0lBQ04sTUFBTTRDLFlBQVksR0FBRyxHQUFHakUsTUFBTSxJQUFJZ0UsU0FBUyxFQUFFO0lBQzdDLE1BQU1sRCxNQUFNLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDaUMsYUFBYSxDQUFDLEdBQUdoRCxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBRTNELE1BQU0vSSxLQUFLLEdBQUc2TSxPQUFPLENBQUM1TSxLQUFLLENBQUMsSUFBSSxDQUFDO0lBQ2pDLE1BQU0rSSxNQUFnQixHQUFHLEVBQUU7SUFDM0IsSUFBSWlFLGFBQWEsR0FBRyxJQUFJO0lBRXhCLEtBQUssTUFBTUMsT0FBTyxJQUFJbE4sS0FBSyxFQUFFO01BQzNCLE1BQU0rRixJQUFJLEdBQUdtSCxPQUFPLENBQUM5VixJQUFJLENBQUMsQ0FBQztNQUMzQixJQUFJLENBQUMyTyxJQUFJLEVBQUU7UUFDVGlELE1BQU0sQ0FBQ2pILElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ2pCO01BQ0Y7TUFFQSxNQUFNbUgsS0FBSyxHQUFHbkQsSUFBSSxDQUFDOUYsS0FBSyxDQUFDLEtBQUssQ0FBQztNQUMvQixJQUFJeEosT0FBTyxHQUFHLEVBQUU7TUFDaEIsS0FBSyxNQUFNMlMsSUFBSSxJQUFJRixLQUFLLEVBQUU7UUFDeEIsTUFBTWlFLFNBQVMsR0FBRzFXLE9BQU8sR0FBRyxHQUFHQSxPQUFPLElBQUkyUyxJQUFJLEVBQUUsR0FBR0EsSUFBSTtRQUN2RCxNQUFNZ0UsWUFBWSxHQUFHLElBQUksQ0FBQ3JCLGFBQWEsQ0FBQ2tCLGFBQWEsR0FBR0QsWUFBWSxHQUFHbkQsTUFBTSxDQUFDO1FBQzlFLElBQUl1RCxZQUFZLEdBQUcsSUFBSSxDQUFDckIsYUFBYSxDQUFDb0IsU0FBUyxDQUFDLEdBQUd0TyxRQUFRLElBQUlwSSxPQUFPLEVBQUU7VUFDdEV1UyxNQUFNLENBQUNqSCxJQUFJLENBQUMsR0FBR2tMLGFBQWEsR0FBR0QsWUFBWSxHQUFHbkQsTUFBTSxHQUFHcFQsT0FBTyxFQUFFLENBQUM7VUFDakVBLE9BQU8sR0FBRzJTLElBQUk7VUFDZDZELGFBQWEsR0FBRyxLQUFLO1FBQ3ZCLENBQUMsTUFBTTtVQUNMeFcsT0FBTyxHQUFHMFcsU0FBUztRQUNyQjtNQUNGO01BRUEsSUFBSTFXLE9BQU8sRUFBRTtRQUNYdVMsTUFBTSxDQUFDakgsSUFBSSxDQUFDLEdBQUdrTCxhQUFhLEdBQUdELFlBQVksR0FBR25ELE1BQU0sR0FBR3BULE9BQU8sRUFBRSxDQUFDO1FBQ2pFd1csYUFBYSxHQUFHLEtBQUs7TUFDdkI7SUFDRjtJQUVBLE9BQU9qRSxNQUFNLENBQUMvRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsSUFBSTtFQUNqQzs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtFQUNVcUUsbUJBQW1CQSxDQUFDM0csT0FBZSxFQUFVO0lBQ25ELElBQUksQ0FBQ0EsT0FBTyxDQUFDdkksSUFBSSxDQUFDLENBQUMsRUFBRSxPQUFPLEVBQUU7SUFFOUIsTUFBTXNMLFVBQVUsR0FBRy9DLE9BQU8sQ0FBQzFJLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQUNHLElBQUksQ0FBQyxDQUFDO0lBQ3RELE9BQU8sSUFBSSxDQUFDcVAsY0FBYyxDQUFDL0QsVUFBVSxFQUFFO01BQ3JDZ0UsS0FBSyxFQUFFLFVBQVU7TUFDakJDLFVBQVUsRUFBRVgsWUFBSyxDQUFDYSxJQUFJLEtBQU15RCxLQUFhLElBQUtBLEtBQUs7SUFDckQsQ0FBQyxDQUFDO0VBQ0o7RUFFUStDLGVBQWVBLENBQUM5VyxJQUFZLEVBQUUrVyxLQUFhLEVBQVk7SUFDN0QsSUFBSSxDQUFDL1csSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxFQUFFLENBQUM7SUFDN0IsTUFBTTRJLEtBQWUsR0FBRyxFQUFFO0lBQzFCLE1BQU1rSixLQUFLLEdBQUczUyxJQUFJLENBQUNhLElBQUksQ0FBQyxDQUFDLENBQUM2SSxLQUFLLENBQUMsS0FBSyxDQUFDO0lBQ3RDLElBQUl4SixPQUFPLEdBQUcsRUFBRTtJQUVoQixLQUFLLE1BQU0yUyxJQUFJLElBQUlGLEtBQUssRUFBRTtNQUN4QixNQUFNaUUsU0FBUyxHQUFHMVcsT0FBTyxHQUFHLEdBQUdBLE9BQU8sSUFBSTJTLElBQUksRUFBRSxHQUFHQSxJQUFJO01BQ3ZELElBQUksSUFBSSxDQUFDMkMsYUFBYSxDQUFDb0IsU0FBUyxDQUFDLEdBQUdHLEtBQUssSUFBSTdXLE9BQU8sRUFBRTtRQUNwRHVKLEtBQUssQ0FBQytCLElBQUksQ0FBQ3RMLE9BQU8sQ0FBQztRQUNuQkEsT0FBTyxHQUFHMlMsSUFBSTtNQUNoQixDQUFDLE1BQU07UUFDTDNTLE9BQU8sR0FBRzBXLFNBQVM7TUFDckI7SUFDRjtJQUVBLElBQUkxVyxPQUFPLEVBQUU7TUFDWHVKLEtBQUssQ0FBQytCLElBQUksQ0FBQ3RMLE9BQU8sQ0FBQztJQUNyQjtJQUVBLE9BQU91SixLQUFLO0VBQ2Q7O0VBRUE7QUFDRjtBQUNBO0VBQ1V1TixzQkFBc0JBLENBQUEsRUFBa0I7SUFDOUMsSUFBSSxDQUFDLElBQUksQ0FBQ3RaLGtCQUFrQixFQUFFLE9BQU8sSUFBSTtJQUN6QyxNQUFNdVosT0FBTyxHQUFHdFgsSUFBSSxDQUFDdVgsS0FBSyxDQUFDLENBQUNqTixJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDdE0sa0JBQWtCLElBQUksSUFBSSxDQUFDO0lBQ3pFLElBQUl1WixPQUFPLEdBQUcsQ0FBQyxFQUFFLE9BQU8sSUFBSSxDQUFDLENBQUM7SUFDOUIsTUFBTUUsSUFBSSxHQUFHeFgsSUFBSSxDQUFDdVgsS0FBSyxDQUFDRCxPQUFPLEdBQUcsRUFBRSxDQUFDO0lBQ3JDLE1BQU1HLElBQUksR0FBR0gsT0FBTyxHQUFHLEVBQUU7SUFDekIsSUFBSUUsSUFBSSxHQUFHLENBQUMsRUFBRTtNQUNaLE9BQU8sR0FBR0EsSUFBSSxLQUFLQyxJQUFJLEdBQUc7SUFDNUI7SUFDQSxPQUFPLEdBQUdBLElBQUksR0FBRztFQUNuQjs7RUFFQTtBQUNGO0FBQ0E7QUFDQTtFQUNVQyxrQkFBa0JBLENBQUNqTyxPQUFlLEVBQUUrRyxLQUFhLEdBQUcsU0FBUyxFQUFVO0lBQzdFLE1BQU03SCxRQUFRLEdBQUczSSxJQUFJLENBQUNFLEdBQUcsQ0FBQyxJQUFJLENBQUNuRCxJQUFJLEVBQUUsRUFBRSxDQUFDO0lBQ3hDLE1BQU04WixTQUFTLEdBQUcsSUFBSXJHLEtBQUssR0FBRztJQUM5QixNQUFNbUgsT0FBTyxHQUFHM1gsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFMEksUUFBUSxHQUFHa08sU0FBUyxDQUFDMVcsTUFBTSxDQUFDO0lBQ3hELE1BQU15WCxPQUFPLEdBQUc1WCxJQUFJLENBQUN1WCxLQUFLLENBQUNJLE9BQU8sR0FBRyxDQUFDLENBQUM7SUFDdkMsTUFBTUUsUUFBUSxHQUFHN1gsSUFBSSxDQUFDOFgsSUFBSSxDQUFDSCxPQUFPLEdBQUcsQ0FBQyxDQUFDOztJQUV2QztJQUNBLE1BQU10RCxTQUFTLEdBQUd2RSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUNOLE1BQU0sQ0FBQ2dFLE9BQU8sQ0FBQyxHQUFHZixTQUFTLEdBQUcsR0FBRyxDQUFDakQsTUFBTSxDQUFDaUUsUUFBUSxDQUFDLENBQUM7SUFFeEYsT0FBTyxLQUFLeEQsU0FBUyxLQUFLNUssT0FBTyxJQUFJO0VBQ3ZDOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ0VzTyxlQUFlQSxDQUFDdE8sT0FBZSxFQUFFK0csS0FBYSxHQUFHLFNBQVMsRUFBUTtJQUNoRSxNQUFNd0gsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDTixrQkFBa0IsQ0FBQ2pPLE9BQU8sRUFBRStHLEtBQUssQ0FBQztJQUNoRSxJQUFJLENBQUN2VCxVQUFVLENBQUM0TyxJQUFJLENBQUM7TUFDbkJrQyxJQUFJLEVBQUUsVUFBVTtNQUNoQkssT0FBTyxFQUFFLFVBQVU7TUFDbkIzRSxPQUFPLEVBQUV1TyxnQkFBZ0I7TUFDekIzSixTQUFTLEVBQUUvRCxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO01BQ3JCaUYsV0FBVyxFQUFFO0lBQ2YsQ0FBQyxDQUFDO0lBQ0YsSUFBSSxDQUFDLElBQUksQ0FBQ3BTLGlCQUFpQixFQUFFO01BQzNCLEtBQUssSUFBSSxDQUFDd1IsWUFBWSxDQUFDLENBQUM7SUFDMUI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7RUFDRXVKLG9CQUFvQkEsQ0FBQSxFQUFZO0lBQzlCLElBQUksQ0FBQyxJQUFJLENBQUNuYSxjQUFjLEVBQUU7TUFDeEIsT0FBTyxLQUFLO0lBQ2Q7SUFDQSxNQUFNb2EsUUFBUSxHQUFHLElBQUksQ0FBQzNILGNBQWMsQ0FBQyxJQUFJLENBQUN6UyxjQUFjLEVBQUU7TUFBRTBTLEtBQUssRUFBRSxNQUFNO01BQUVDLFVBQVUsRUFBRVgsWUFBSyxDQUFDYTtJQUFLLENBQUMsQ0FBQztJQUNwRyxJQUFJLENBQUMxVCxVQUFVLENBQUM0TyxJQUFJLENBQUM7TUFDbkJrQyxJQUFJLEVBQUUsVUFBVTtNQUNoQkssT0FBTyxFQUFFLFVBQVU7TUFDbkIzRSxPQUFPLEVBQUV5TyxRQUFRO01BQ2pCN0osU0FBUyxFQUFFL0QsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztNQUNyQmlGLFdBQVcsRUFBRTtJQUNmLENBQUMsQ0FBQztJQUNGLElBQUksQ0FBQyxJQUFJLENBQUNwUyxpQkFBaUIsRUFBRTtNQUMzQixLQUFLLElBQUksQ0FBQ3dSLFlBQVksQ0FBQyxDQUFDO0lBQzFCO0lBQ0EsT0FBTyxJQUFJO0VBQ2I7O0VBRUE7O0VBRUF5SixPQUFPQSxDQUFDdGEsSUFBMEIsRUFBUTtJQUN4QyxNQUFNdWEsWUFBWSxHQUFHLElBQUksQ0FBQ3ZhLElBQUksS0FBSyxXQUFXO0lBQzlDLElBQUksQ0FBQ0EsSUFBSSxHQUFHQSxJQUFJOztJQUVoQjtJQUNBLElBQUlBLElBQUksS0FBSyxXQUFXLElBQUksQ0FBQ3VhLFlBQVksRUFBRTtNQUN6QyxJQUFJLENBQUNyYSxrQkFBa0IsR0FBR3VNLElBQUksQ0FBQ0QsR0FBRyxDQUFDLENBQUM7TUFDcEMsSUFBSSxDQUFDckwsZUFBZSxHQUFHLENBQUMsQ0FBQyxDQUFDO01BQzFCO01BQ0EsSUFBSSxJQUFJLENBQUN1QyxXQUFXLENBQUNwQixNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQy9CLElBQUksQ0FBQ29CLFdBQVcsR0FBRyxFQUFFO01BQ3ZCO01BQ0EsSUFBSSxDQUFDOFcscUJBQXFCLENBQUMsQ0FBQztJQUM5QixDQUFDLE1BQU0sSUFBSXhhLElBQUksS0FBSyxNQUFNLElBQUl1YSxZQUFZLEVBQUU7TUFDMUMsSUFBSSxDQUFDcmEsa0JBQWtCLEdBQUcsSUFBSTtNQUM5QixJQUFJLENBQUN1YSxvQkFBb0IsQ0FBQyxDQUFDO0lBQzdCO0lBRUEsSUFBSUYsWUFBWSxJQUFJdmEsSUFBSSxLQUFLLE1BQU0sSUFBSSxDQUFDLElBQUksQ0FBQzZFLDBCQUEwQixFQUFFO01BQ3ZFO01BQ0EsSUFBSSxDQUFDMEMsS0FBSyxDQUFDLElBQUksQ0FBQztNQUNoQixJQUFJLENBQUMxQywwQkFBMEIsR0FBRyxJQUFJO0lBQ3hDO0lBQ0EsSUFBSSxDQUFDLElBQUksQ0FBQzBCLFNBQVMsRUFBRTtNQUNuQjtNQUNBLElBQUksQ0FBQ1csWUFBWSxDQUFDLENBQUM7SUFDckI7RUFDRjs7RUFFQTtBQUNGO0FBQ0E7RUFDVXNULHFCQUFxQkEsQ0FBQSxFQUFTO0lBQ3BDLElBQUksSUFBSSxDQUFDL1osZUFBZSxFQUFFLE9BQU8sQ0FBQztJQUNsQyxJQUFJLENBQUNELFlBQVksR0FBRyxDQUFDO0lBQ3JCLElBQUksQ0FBQ1MsaUJBQWlCLEdBQUcsQ0FBQztJQUMxQixJQUFJLENBQUNHLGlCQUFpQixHQUFHLENBQUM7SUFDMUIsSUFBSSxDQUFDWCxlQUFlLEdBQUdpYSxXQUFXLENBQUMsTUFBTTtNQUN2QyxJQUFJLENBQUNsYSxZQUFZLEdBQUcsQ0FBQyxJQUFJLENBQUNBLFlBQVksR0FBRyxDQUFDLElBQUltYSxvQkFBYSxDQUFDQyxPQUFPLENBQUN0WSxNQUFNO01BQzFFLElBQUksQ0FBQ3JCLGlCQUFpQixHQUFHLENBQUMsSUFBSSxDQUFDQSxpQkFBaUIsR0FBRyxDQUFDLElBQUksSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ29CLE1BQU07TUFDdEY7TUFDQSxJQUFJLElBQUksQ0FBQzlCLFlBQVksR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFO1FBQy9CLElBQUksQ0FBQ1ksaUJBQWlCLEdBQUcsQ0FBQyxJQUFJLENBQUNBLGlCQUFpQixHQUFHLENBQUMsSUFBSSxJQUFJLENBQUNDLGtCQUFrQixDQUFDaUIsTUFBTTtNQUN4RjtNQUNBO01BQ0EsSUFBSSxDQUFDLElBQUksQ0FBQ2lFLFNBQVMsSUFBSSxJQUFJLENBQUN2RyxJQUFJLEtBQUssV0FBVyxFQUFFO1FBQ2hELElBQUksQ0FBQ2tILFlBQVksQ0FBQyxDQUFDO01BQ3JCO0lBQ0YsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFDLENBQUM7RUFDVjs7RUFFQTtBQUNGO0FBQ0E7RUFDVXVULG9CQUFvQkEsQ0FBQSxFQUFTO0lBQ25DLElBQUksSUFBSSxDQUFDaGEsZUFBZSxFQUFFO01BQ3hCb0gsYUFBYSxDQUFDLElBQUksQ0FBQ3BILGVBQWUsQ0FBQztNQUNuQyxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJO0lBQzdCO0lBQ0EsSUFBSSxDQUFDRCxZQUFZLEdBQUcsQ0FBQztJQUNyQixJQUFJLENBQUNTLGlCQUFpQixHQUFHLENBQUM7SUFDMUIsSUFBSSxDQUFDRixlQUFlLEdBQUcsSUFBSTtJQUMzQixJQUFJLENBQUNLLGlCQUFpQixHQUFHLENBQUM7RUFDNUI7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDRXlaLFdBQVdBLENBQUN4SixPQUFzQixFQUFRO0lBQ3hDLElBQUksQ0FBQ3RRLGVBQWUsR0FBR3NRLE9BQU87SUFDOUIsSUFBSSxDQUFDLElBQUksQ0FBQzlLLFNBQVMsRUFBRTtNQUNuQixJQUFJLENBQUNXLFlBQVksQ0FBQyxDQUFDO0lBQ3JCO0VBQ0Y7O0VBRUE7QUFDRjtBQUNBO0VBQ0U0VCxxQkFBcUJBLENBQUNDLE1BQWMsRUFBUTtJQUMxQyxJQUFJLENBQUM1WixlQUFlLEdBQUc0WixNQUFNO0VBQy9COztFQUVBO0FBQ0Y7QUFDQTtFQUNVQyxnQkFBZ0JBLENBQUNELE1BQWMsRUFBVTtJQUMvQyxJQUFJQSxNQUFNLEdBQUcsSUFBSSxFQUFFLE9BQU9FLE1BQU0sQ0FBQ0YsTUFBTSxDQUFDO0lBQ3hDLElBQUlBLE1BQU0sR0FBRyxLQUFLLEVBQUUsT0FBTyxHQUFHLENBQUNBLE1BQU0sR0FBRyxJQUFJLEVBQUVHLE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRztJQUMzRCxPQUFPLEdBQUcvWSxJQUFJLENBQUNnWixLQUFLLENBQUNKLE1BQU0sR0FBRyxJQUFJLENBQUMsR0FBRztFQUN4QztFQUVBSyxPQUFPQSxDQUFBLEVBQXlCO0lBQzlCLE9BQU8sSUFBSSxDQUFDcGIsSUFBSTtFQUNsQjtFQUVBcWIsWUFBWUEsQ0FBQ2hLLE9BQXNCLEVBQVE7SUFDekMsSUFBSSxDQUFDaUssa0JBQWtCLENBQUM7TUFBRUMsSUFBSSxFQUFFbEssT0FBTztNQUFFbUssUUFBUSxFQUFFLElBQUk7TUFBRUMsU0FBUyxFQUFFO0lBQUssQ0FBQyxDQUFDO0VBQzdFO0VBRUFILGtCQUFrQkEsQ0FDaEJJLE1BQXFGLEVBQ3JGck4sT0FBNkIsR0FBRyxDQUFDLENBQUMsRUFDNUI7SUFDTixNQUFNc04sYUFBYSxHQUFHLElBQUksQ0FBQ3RiLGVBQWU7SUFDMUMsSUFBSXViLE9BQU8sR0FBRyxLQUFLO0lBQ25CLElBQUlDLFdBQVcsR0FBRyxLQUFLO0lBQ3ZCLElBQUlDLGVBQWUsR0FBRyxLQUFLO0lBRTNCLElBQUlKLE1BQU0sQ0FBQ0gsSUFBSSxLQUFLdkksU0FBUyxJQUFJMEksTUFBTSxDQUFDSCxJQUFJLEtBQUssSUFBSSxDQUFDcGIsYUFBYSxFQUFFO01BQ25FLElBQUksQ0FBQ0EsYUFBYSxHQUFHdWIsTUFBTSxDQUFDSCxJQUFJO01BQ2hDSyxPQUFPLEdBQUcsSUFBSTtNQUNkQyxXQUFXLEdBQUcsSUFBSTtJQUNwQjtJQUNBLElBQUlILE1BQU0sQ0FBQ0YsUUFBUSxLQUFLeEksU0FBUyxJQUFJMEksTUFBTSxDQUFDRixRQUFRLEtBQUssSUFBSSxDQUFDcGIsY0FBYyxFQUFFO01BQzVFLElBQUksQ0FBQ0EsY0FBYyxHQUFHc2IsTUFBTSxDQUFDRixRQUFRO01BQ3JDSSxPQUFPLEdBQUcsSUFBSTtNQUNkRSxlQUFlLEdBQUcsSUFBSTtJQUN4QjtJQUVBLE1BQU1DLGdCQUFnQixHQUFHTCxNQUFNLENBQUNELFNBQVMsS0FBS3pJLFNBQVMsSUFBSTBJLE1BQU0sQ0FBQ0QsU0FBUyxLQUFLRSxhQUFhO0lBQzdGLElBQUlELE1BQU0sQ0FBQ0QsU0FBUyxLQUFLekksU0FBUyxFQUFFO01BQ2xDLElBQUkrSSxnQkFBZ0IsRUFBRTtRQUNwQkgsT0FBTyxHQUFHLElBQUk7TUFDaEI7TUFDQSxJQUFJLENBQUN2YixlQUFlLEdBQUdxYixNQUFNLENBQUNELFNBQVM7SUFDekM7SUFFQSxNQUFNTyxrQkFBa0IsR0FDdEJELGdCQUFnQixJQUFJSixhQUFhLEtBQUssSUFBSSxJQUFJRCxNQUFNLENBQUNELFNBQVMsS0FBSyxJQUFJLElBQUksSUFBSSxDQUFDemIsSUFBSSxLQUFLLFdBQVc7SUFDdEcsTUFBTWljLGdCQUFnQixHQUNwQkYsZ0JBQWdCLElBQUlMLE1BQU0sQ0FBQ0QsU0FBUyxLQUFLLElBQUksSUFBSSxJQUFJLENBQUN6YixJQUFJLEtBQUssV0FBVztJQUM1RSxNQUFNa2Msb0JBQW9CLEdBQUdILGdCQUFnQixJQUFJLENBQUNGLFdBQVcsSUFBSSxDQUFDQyxlQUFlO0lBQ2pGLE1BQU1LLG1CQUFtQixHQUN2QkQsb0JBQW9CLElBQUksSUFBSSxDQUFDbGMsSUFBSSxLQUFLLFdBQVcsSUFBSSxDQUFDZ2Msa0JBQWtCLElBQUksQ0FBQ0MsZ0JBQWdCO0lBRS9GLE1BQU1HLFlBQVksR0FBRy9OLE9BQU8sQ0FBQzlGLE1BQU0sS0FBSyxLQUFLLElBQUlxVCxPQUFPLElBQUksQ0FBQ08sbUJBQW1CO0lBQ2hGLElBQUlDLFlBQVksRUFBRTtNQUNoQixJQUFJLENBQUNsVixZQUFZLENBQUMsQ0FBQztJQUNyQjtFQUNGO0VBRUFtVixnQkFBZ0JBLENBQ2R0UyxJQWNDLEVBQ0RzRSxPQUE2QixHQUFHLENBQUMsQ0FBQyxFQUM1QjtJQUNOLE1BQU0wQixJQUFJLEdBQUc7TUFBRSxHQUFHLElBQUksQ0FBQ3BPLFVBQVU7TUFBRSxHQUFHb0k7SUFBSyxDQUFDO0lBQzVDLE1BQU02UixPQUFPLEdBQUdVLElBQUksQ0FBQ0MsU0FBUyxDQUFDeE0sSUFBSSxDQUFDLEtBQUt1TSxJQUFJLENBQUNDLFNBQVMsQ0FBQyxJQUFJLENBQUM1YSxVQUFVLENBQUM7SUFDeEUsSUFBSSxDQUFDQSxVQUFVLEdBQUdvTyxJQUFJO0lBQ3RCLE1BQU1xTSxZQUFZLEdBQUcvTixPQUFPLENBQUM5RixNQUFNLEtBQUssS0FBSyxJQUFJcVQsT0FBTztJQUN4RCxJQUFJUSxZQUFZLEVBQUU7TUFDaEIsSUFBSSxDQUFDbFYsWUFBWSxDQUFDLENBQUM7SUFDckI7RUFDRjtFQUVBc1YsaUJBQWlCQSxDQUFDQyxLQUErQixFQUFRO0lBQ3ZELElBQUksQ0FBQzdhLFdBQVcsR0FBRztNQUFFLEdBQUcsSUFBSSxDQUFDQSxXQUFXO01BQUUsR0FBRzZhO0lBQU0sQ0FBQztJQUNwRCxJQUNFLENBQUNBLEtBQUssQ0FBQ0Msa0JBQWtCLElBQ3pCLENBQUNELEtBQUssQ0FBQ0UsY0FBYyxJQUNyQixDQUFDRixLQUFLLENBQUNHLHNCQUFzQixJQUM3QixDQUFDSCxLQUFLLENBQUNJLGtCQUFrQixJQUN6QixDQUFDSixLQUFLLENBQUNLLFlBQVksSUFDbkIsQ0FBQ0wsS0FBSyxDQUFDTSxXQUFXLEVBQ2xCO01BQ0EsSUFBSSxDQUFDbGQsbUJBQW1CLENBQUNtZCxLQUFLLENBQUMsQ0FBQztJQUNsQztJQUNBLElBQUksQ0FBQzlWLFlBQVksQ0FBQyxDQUFDO0VBQ3JCO0VBRUErVixjQUFjQSxDQUFDaFIsS0FBZSxFQUFRO0lBQ3BDLE1BQU0wQyxVQUFVLEdBQUcsQ0FBQzFDLEtBQUssSUFBSSxFQUFFLEVBQUVqQixHQUFHLENBQUNnSCxJQUFJLElBQUlBLElBQUksQ0FBQzlPLE9BQU8sQ0FBQyxPQUFPLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdkUsTUFBTWdhLFVBQVUsR0FBR3ZPLFVBQVUsQ0FBQzFCLElBQUksQ0FBRStFLElBQUksSUFBS0EsSUFBSSxDQUFDM08sSUFBSSxDQUFDLENBQUMsQ0FBQ2YsTUFBTSxHQUFHLENBQUMsQ0FBQztJQUNwRSxJQUFJLENBQUM0YSxVQUFVLEVBQUU7TUFDZixJQUFJLElBQUksQ0FBQ3haLFdBQVcsQ0FBQ3BCLE1BQU0sRUFBRTtRQUMzQixJQUFJLENBQUNvQixXQUFXLEdBQUcsRUFBRTtRQUNyQixJQUFJLENBQUN3RCxZQUFZLENBQUMsQ0FBQztNQUNyQjtNQUNBO0lBQ0Y7SUFDQSxNQUFNa00sT0FBTyxHQUFHLElBQUksQ0FBQytKLGdCQUFnQixDQUFDeE8sVUFBVSxDQUFDO0lBQ2pELElBQUkyTixJQUFJLENBQUNDLFNBQVMsQ0FBQ25KLE9BQU8sQ0FBQyxLQUFLa0osSUFBSSxDQUFDQyxTQUFTLENBQUMsSUFBSSxDQUFDN1ksV0FBVyxDQUFDLEVBQUU7TUFDaEU7SUFDRjtJQUNBLElBQUksQ0FBQ0EsV0FBVyxHQUFHMFAsT0FBTztJQUMxQixJQUFJLENBQUNsTSxZQUFZLENBQUMsQ0FBQztFQUNyQjtFQUVBa1csbUJBQW1CQSxDQUFBLEVBQVk7SUFDN0IsT0FBTyxJQUFJLENBQUNqWCxXQUFXLElBQUksQ0FBQyxJQUFJLENBQUNJLFNBQVM7RUFDNUM7RUFFQThXLGdCQUFnQkEsQ0FBQSxFQUFTO0lBQ3ZCLElBQUksQ0FBQyxJQUFJLENBQUMzWixXQUFXLENBQUNwQixNQUFNLEVBQUU7SUFDOUIsSUFBSSxDQUFDb0IsV0FBVyxHQUFHLEVBQUU7SUFDckIsSUFBSSxDQUFDd0QsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFUWlXLGdCQUFnQkEsQ0FBQ2xSLEtBQWUsRUFBWTtJQUNsRCxNQUFNcVIsUUFBUSxHQUFHbmIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFRCxJQUFJLENBQUNFLEdBQUcsQ0FBQyxJQUFJLENBQUMzQixtQkFBbUIsRUFBRXlCLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRSxJQUFJLENBQUNuRCxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUM1RixJQUFJZ04sS0FBSyxDQUFDM0osTUFBTSxJQUFJZ2IsUUFBUSxFQUFFO01BQzVCLE9BQU9yUixLQUFLO0lBQ2Q7SUFDQSxNQUFNc1IsUUFBUSxHQUFHdFIsS0FBSyxDQUFDM0osTUFBTSxHQUFHZ2IsUUFBUTtJQUN4QyxNQUFNRSxTQUFTLEdBQUd2TCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLa0gsUUFBUSxhQUFhLENBQUM7SUFDNUQsTUFBTUUsU0FBUyxHQUFHdGIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFa2IsUUFBUSxHQUFHLENBQUMsQ0FBQztJQUMzQyxNQUFNSSxJQUFJLEdBQUd6UixLQUFLLENBQUNqSixLQUFLLENBQUMsQ0FBQ3lhLFNBQVMsQ0FBQztJQUNwQyxPQUFPLENBQUNELFNBQVMsRUFBRSxHQUFHRSxJQUFJLENBQUM7RUFDN0I7O0VBRUE7O0VBRVF4VyxZQUFZQSxDQUFBLEVBQVM7SUFDM0I7SUFDQSxJQUFJLElBQUksQ0FBQzFCLFFBQVEsRUFBRTs7SUFFbkI7SUFDQSxNQUFNZ0gsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLElBQUlBLEdBQUcsR0FBRyxJQUFJLENBQUNuSCxjQUFjLEdBQUcsSUFBSSxDQUFDQyxnQkFBZ0IsRUFBRTtNQUNyRCxJQUFJLENBQUMsSUFBSSxDQUFDRixhQUFhLEVBQUU7UUFDdkIsSUFBSSxDQUFDQSxhQUFhLEdBQUcsSUFBSTtRQUN6QjtRQUNBLElBQUksQ0FBQ0csbUJBQW1CLEdBQUcwRixVQUFVLENBQUMsTUFBTTtVQUMxQyxJQUFJLENBQUMxRixtQkFBbUIsR0FBRyxJQUFJO1VBQy9CLElBQUksQ0FBQ0gsYUFBYSxHQUFHLEtBQUs7VUFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQ0ksUUFBUSxFQUFFO1lBQ2xCLElBQUksQ0FBQ3dMLHFCQUFxQixDQUFDLENBQUM7VUFDOUI7UUFDRixDQUFDLEVBQUUsSUFBSSxDQUFDMUwsZ0JBQWdCLENBQUM7TUFDM0I7TUFDQTtJQUNGO0lBQ0EsSUFBSSxDQUFDMEwscUJBQXFCLENBQUMsQ0FBQztFQUM5QjtFQUVRQSxxQkFBcUJBLENBQUEsRUFBUztJQUNwQztJQUNBLElBQUksSUFBSSxDQUFDeEwsUUFBUSxFQUFFO0lBRW5CLElBQUksQ0FBQ0gsY0FBYyxHQUFHb0gsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUVoQyxJQUFJLENBQUMsSUFBSSxDQUFDckcsV0FBVyxFQUFFO01BQ3JCLElBQUksQ0FBQ3ZDLGNBQWMsR0FBRyxLQUFLO01BQzNCO0lBQ0Y7SUFFQSxJQUFJLElBQUksQ0FBQ3NCLHdCQUF3QixFQUFFO01BQ2pDLElBQUksQ0FBQ3RCLGNBQWMsR0FBRyxLQUFLO01BQzNCO0lBQ0Y7SUFFQSxJQUFJLElBQUksQ0FBQzJDLFNBQVMsRUFBRTtNQUNsQixNQUFNeUwsSUFBSSxHQUFHLEtBQUssSUFBSSxDQUFDMVMsTUFBTSxFQUFFO01BQy9CLElBQUksQ0FBQyxJQUFJLENBQUNzRSxjQUFjLElBQUksQ0FBQyxJQUFJLENBQUNpQiwwQkFBMEIsRUFBRTtRQUM1RCxJQUFJLENBQUMwQyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQ2hCLElBQUksQ0FBQzFDLDBCQUEwQixHQUFHLElBQUk7TUFDeEM7TUFDQSxJQUFJLENBQUMwQyxLQUFLLENBQUMsS0FBSzlKLEdBQUcsQ0FBQ0ksVUFBVSxHQUFHbVUsSUFBSSxFQUFFLENBQUM7TUFDeEMsSUFBSSxDQUFDOU4sbUJBQW1CLEdBQUc4TixJQUFJLENBQUMxUCxNQUFNLEdBQUcsQ0FBQztNQUMxQyxJQUFJLENBQUN3QyxpQkFBaUIsR0FBRyxJQUFJO01BQzdCLElBQUksQ0FBQ2xCLGNBQWMsR0FBRyxJQUFJO01BQzFCLElBQUksQ0FBQ2lCLDBCQUEwQixHQUFHLEtBQUssQ0FBQyxDQUFDO01BQ3pDLElBQUksQ0FBQ3JCLFlBQVksR0FBRyxDQUFDO01BQ3JCO0lBQ0Y7SUFFQSxJQUFJLENBQUMsSUFBSSxDQUFDeUIsaUJBQWlCLEVBQUU7TUFDM0I7SUFDRjs7SUFFQTtJQUNBLElBQUksQ0FBQ2dDLGtCQUFrQixDQUFDLENBQUM7SUFDekIsTUFBTTZELFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLElBQUksQ0FBQzVMLGVBQWUsR0FBRzJMLFFBQVE7SUFFL0IsTUFBTTZTLE9BQU8sR0FBRyxJQUFJLENBQUNDLGlCQUFpQixDQUFDLENBQUM7SUFDeEMsSUFBSSxDQUFDRCxPQUFPLENBQUMxUixLQUFLLENBQUMzSixNQUFNLEVBQUU7TUFDekI7SUFDRjtJQUVBLE1BQU11YixhQUFhLEdBQUdGLE9BQU8sQ0FBQzFSLEtBQUssQ0FBQ2pCLEdBQUcsQ0FBQ2dILElBQUksSUFBSSxJQUFJLENBQUM4TCxZQUFZLENBQUM5TCxJQUFJLEVBQUVsSCxRQUFRLENBQUMsQ0FBQztJQUNsRixJQUFJLENBQUMrUyxhQUFhLENBQUN2YixNQUFNLEVBQUU7TUFDekI7SUFDRjtJQUVBLE1BQU15YixXQUFXLEdBQUc1YixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUVELElBQUksQ0FBQ0UsR0FBRyxDQUFDc2IsT0FBTyxDQUFDSSxXQUFXLEVBQUVGLGFBQWEsQ0FBQ3ZiLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUN4RixNQUFNMGIsTUFBTSxHQUFHSCxhQUFhLENBQUN2YixNQUFNOztJQUVuQztJQUNBO0lBQ0E7SUFDQSxJQUFJLElBQUksQ0FBQ3lDLHNCQUFzQixJQUFJLElBQUksQ0FBQ3RCLGlCQUFpQixHQUFHLENBQUMsRUFBRTtNQUM3RDtNQUNBLE1BQU13YSxVQUFVLEdBQUcsSUFBSSxDQUFDalosV0FBVyxFQUFFK1ksV0FBVyxJQUFJLENBQUM7TUFDckQsSUFBSUUsVUFBVSxHQUFHLENBQUMsRUFBRTtRQUNsQixJQUFJLENBQUMxVyxLQUFLLENBQUMsUUFBUTBXLFVBQVUsR0FBRyxDQUFDO01BQ25DOztNQUVBO01BQ0EsS0FBSyxJQUFJbmhCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBRyxJQUFJLENBQUMyRyxpQkFBaUIsRUFBRTNHLENBQUMsRUFBRSxFQUFFO1FBQy9DLElBQUksQ0FBQ3lLLEtBQUssQ0FBQyxJQUFJLENBQUM7UUFDaEIsSUFBSSxDQUFDQSxLQUFLLENBQUM5SixHQUFHLENBQUNJLFVBQVUsQ0FBQztRQUMxQixJQUFJZixDQUFDLEdBQUcsSUFBSSxDQUFDMkcsaUJBQWlCLEdBQUcsQ0FBQyxFQUFFO1VBQ2xDLElBQUksQ0FBQzhELEtBQUssQ0FBQyxRQUFRLENBQUM7UUFDdEI7TUFDRjs7TUFFQTtNQUNBLE1BQU0yVyxVQUFVLEdBQUdGLE1BQU0sR0FBRyxJQUFJLENBQUN2YSxpQkFBaUI7TUFDbEQsSUFBSXlhLFVBQVUsR0FBRyxDQUFDLEVBQUU7UUFDbEIsS0FBSyxJQUFJcGhCLENBQUMsR0FBRyxDQUFDLEVBQUVBLENBQUMsR0FBR29oQixVQUFVLEVBQUVwaEIsQ0FBQyxFQUFFLEVBQUU7VUFDbkMsSUFBSSxDQUFDeUssS0FBSyxDQUFDLElBQUksQ0FBQztRQUNsQjtNQUNGOztNQUVBO01BQ0EsTUFBTTRXLFVBQVUsR0FBR2hjLElBQUksQ0FBQ0MsR0FBRyxDQUFDLENBQUMsRUFBRTRiLE1BQU0sR0FBRyxDQUFDLENBQUM7TUFDMUMsSUFBSUcsVUFBVSxHQUFHLENBQUMsRUFBRTtRQUNsQixJQUFJLENBQUM1VyxLQUFLLENBQUMsUUFBUTRXLFVBQVUsR0FBRyxDQUFDO01BQ25DO0lBQ0Y7O0lBRUE7SUFDQSxLQUFLLElBQUlyaEIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHK2dCLGFBQWEsQ0FBQ3ZiLE1BQU0sRUFBRXhGLENBQUMsRUFBRSxFQUFFO01BQzdDLElBQUksQ0FBQ3lLLEtBQUssQ0FBQyxJQUFJLENBQUM7TUFDaEIsSUFBSSxDQUFDQSxLQUFLLENBQUM5SixHQUFHLENBQUNJLFVBQVUsQ0FBQztNQUMxQixJQUFJLENBQUMwSixLQUFLLENBQUNzVyxhQUFhLENBQUMvZ0IsQ0FBQyxDQUFDLElBQUksRUFBRSxDQUFDO01BQ2xDLElBQUlBLENBQUMsR0FBRytnQixhQUFhLENBQUN2YixNQUFNLEdBQUcsQ0FBQyxFQUFFO1FBQ2hDLElBQUksQ0FBQ2lGLEtBQUssQ0FBQyxJQUFJLENBQUM7TUFDbEI7SUFDRjs7SUFFQTtJQUNBLE1BQU02VyxTQUFTLEdBQUdqYyxJQUFJLENBQUNFLEdBQUcsQ0FBQ0YsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLENBQUM3QyxNQUFNLENBQUMsRUFBRSxJQUFJLENBQUNMLElBQUksSUFBSSxFQUFFLENBQUM7SUFDekU7SUFDQSxNQUFNbWYsYUFBYSxHQUFHTCxNQUFNLEdBQUcsQ0FBQyxHQUFHRCxXQUFXO0lBQzlDLElBQUlNLGFBQWEsR0FBRyxDQUFDLEVBQUU7TUFDckIsSUFBSSxDQUFDOVcsS0FBSyxDQUFDLFFBQVE4VyxhQUFhLEdBQUcsQ0FBQztJQUN0QztJQUNBLElBQUksQ0FBQzlXLEtBQUssQ0FBQyxRQUFRNlcsU0FBUyxHQUFHLENBQUM7SUFFaEMsSUFBSSxDQUFDbGEsbUJBQW1CLEdBQUdrYSxTQUFTO0lBQ3BDLElBQUksQ0FBQ3RaLGlCQUFpQixHQUFHLElBQUk7SUFDN0IsSUFBSSxDQUFDQyxzQkFBc0IsR0FBRyxJQUFJO0lBQ2xDLElBQUksQ0FBQ25CLGNBQWMsR0FBRyxJQUFJO0lBQzFCLElBQUksQ0FBQ0gsaUJBQWlCLEdBQUd1YSxNQUFNO0lBQy9CLElBQUksQ0FBQ2haLFdBQVcsR0FBRztNQUFFaUgsS0FBSyxFQUFFNFIsYUFBYTtNQUFFRTtJQUFZLENBQUM7SUFDeEQsSUFBSSxDQUFDbFosMEJBQTBCLEdBQUcsS0FBSztJQUN2QyxJQUFJLENBQUNyQixZQUFZLEdBQUd3YSxNQUFNO0VBQzVCO0VBRVFKLGlCQUFpQkEsQ0FBQSxFQUE2QztJQUNwRSxNQUFNM1IsS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTW5CLFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDO0lBQ0EsTUFBTXVULE9BQU8sR0FBR3JNLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQ04sTUFBTSxDQUFDakwsUUFBUSxDQUFDLENBQUM7SUFFcEQsTUFBTXlULGdCQUFnQixHQUFHLENBQUMsTUFBTTtNQUM5QixNQUFNQyxHQUFHLEdBQUcsSUFBSSxDQUFDbmUsZUFBZSxJQUFJLElBQUksQ0FBQ0QsY0FBYyxJQUFJLElBQUksQ0FBQ0QsYUFBYTtNQUM3RSxJQUFJLENBQUNxZSxHQUFHLEVBQUUsT0FBTyxJQUFJO01BQ3JCLE1BQU0xRixPQUFPLEdBQUcsSUFBSSxDQUFDcEMsU0FBUyxDQUFDOEgsR0FBRyxDQUFDLENBQUN0YixPQUFPLENBQUMsVUFBVSxFQUFFLEVBQUUsQ0FBQyxDQUFDRyxJQUFJLENBQUMsQ0FBQztNQUNsRSxPQUFPeVYsT0FBTyxJQUFJLElBQUk7SUFDeEIsQ0FBQyxFQUFFLENBQUM7O0lBRUo7SUFDQSxJQUFJLElBQUksQ0FBQzlZLElBQUksS0FBSyxXQUFXLEtBQUssSUFBSSxDQUFDZSxlQUFlLElBQUl3ZCxnQkFBZ0IsQ0FBQyxFQUFFO01BQzNFO01BQ0EsTUFBTUUsWUFBWSxHQUFHOUQsb0JBQWEsQ0FBQ0MsT0FBTztNQUMxQyxNQUFNOEQsV0FBVyxHQUFHRCxZQUFZLENBQUMsSUFBSSxDQUFDamUsWUFBWSxHQUFHaWUsWUFBWSxDQUFDbmMsTUFBTSxDQUFDLElBQUksR0FBRztNQUNoRixNQUFNcWMsUUFBUSxHQUFHLElBQUksQ0FBQ3pkLGtCQUFrQixDQUFDLElBQUksQ0FBQ0QsaUJBQWlCLEdBQUcsSUFBSSxDQUFDQyxrQkFBa0IsQ0FBQ29CLE1BQU0sQ0FBQyxJQUFJLEdBQUc7TUFDeEcsTUFBTXNjLGdCQUFnQixHQUFHLEdBQUczTSxZQUFLLENBQUNhLElBQUksQ0FBQzRMLFdBQVcsQ0FBQyxHQUFHek0sWUFBSyxDQUFDNE0sTUFBTSxHQUFHNU0sWUFBSyxDQUFDNE0sTUFBTSxDQUFDRixRQUFRLENBQUMsR0FBR0EsUUFBUSxFQUFFO01BQ3hHLE1BQU1sRixPQUFPLEdBQUcsSUFBSSxDQUFDRCxzQkFBc0IsQ0FBQyxDQUFDO01BQzdDLE1BQU1zRixpQkFBaUIsR0FBRyxDQUFDLFdBQVcsRUFBRSxVQUFVLEVBQUUsWUFBWSxDQUFDO01BQ2pFLElBQUlDLGVBQWUsR0FBRyxJQUFJLENBQUNoZSxlQUFlLElBQUl3ZCxnQkFBZ0IsSUFBSSxFQUFFO01BQ3BFLElBQUlPLGlCQUFpQixDQUFDdFQsUUFBUSxDQUFDdVQsZUFBZSxDQUFDLElBQUlSLGdCQUFnQixFQUFFO1FBQ25FUSxlQUFlLEdBQUdSLGdCQUFnQjtNQUNwQztNQUNBLElBQUksQ0FBQ1EsZUFBZSxDQUFDMWIsSUFBSSxDQUFDLENBQUMsRUFBRTtRQUMzQjBiLGVBQWUsR0FBR1IsZ0JBQWdCLElBQUksU0FBUztNQUNqRDtNQUNBLE1BQU1TLGFBQWEsR0FBRyxDQUFDRCxlQUFlLENBQUM1UCxPQUFPLENBQUMsQ0FBQyxDQUFDdkIsUUFBUSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUNtUixlQUFlLENBQUM1UCxPQUFPLENBQUMsQ0FBQyxDQUFDdkIsUUFBUSxDQUFDLEtBQUssQ0FBQztNQUM1RztNQUNBO01BQ0EsTUFBTXFSLFlBQVksR0FBR0MsY0FBSyxDQUFDQyxHQUFHLENBQUMsSUFBSSxDQUFDOWQsa0JBQWtCLENBQUMsSUFBSSxDQUFDRCxpQkFBaUIsR0FBRyxJQUFJLENBQUNDLGtCQUFrQixDQUFDaUIsTUFBTSxDQUFDLElBQUksU0FBUyxDQUFDO01BQzdILE1BQU04YyxLQUFlLEdBQUcsQ0FBQyxrQkFBa0IsQ0FBQztNQUM1QyxJQUFJM0YsT0FBTyxFQUFFMkYsS0FBSyxDQUFDcFIsSUFBSSxDQUFDaVIsWUFBWSxDQUFDeEYsT0FBTyxDQUFDLENBQUM7TUFDOUMsSUFBSSxJQUFJLENBQUN0WSxlQUFlLEdBQUcsQ0FBQyxFQUFFO1FBQzVCaWUsS0FBSyxDQUFDcFIsSUFBSSxDQUFDLElBQUksSUFBSSxDQUFDZ04sZ0JBQWdCLENBQUMsSUFBSSxDQUFDN1osZUFBZSxDQUFDLFNBQVMsQ0FBQztNQUN0RTtNQUNBLE1BQU1tVSxNQUFNLEdBQUcsR0FBR3NKLGdCQUFnQixHQUFHO01BQ3JDLE1BQU1TLFlBQVksR0FBRyxHQUFHTixlQUFlLENBQUMxYixJQUFJLENBQUMsQ0FBQyxHQUFHMmIsYUFBYSxHQUFHLEdBQUcsR0FBRyxFQUFFLEVBQUU7TUFDM0UsTUFBTXJSLE1BQU0sR0FBRyxJQUFJc0UsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLEdBQUcrSSxLQUFLLENBQUNsUixJQUFJLENBQUMrRCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxHQUFHcEUsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDLEVBQUU7O01BRWxHO01BQ0EsTUFBTWlKLFlBQVksR0FBRyxHQUFHaEssTUFBTSxHQUFHK0osWUFBWSxHQUFHMVIsTUFBTSxFQUFFOztNQUV4RDtNQUNBLE1BQU1tSSxNQUFNLEdBQUcsR0FBRyxDQUFDQyxNQUFNLENBQUMsSUFBSSxDQUFDaUMsYUFBYSxDQUFDMUMsTUFBTSxDQUFDLENBQUM7TUFDckQsTUFBTWlLLE9BQU8sR0FBRyxJQUFJLENBQUNDLGVBQWUsQ0FBQ0YsWUFBWSxFQUFFeFUsUUFBUSxFQUFFZ0wsTUFBTSxDQUFDO01BQ3BFN0osS0FBSyxDQUFDK0IsSUFBSSxDQUFDLEdBQUd1UixPQUFPLENBQUM7SUFDeEI7O0lBRUE7SUFDQXRULEtBQUssQ0FBQytCLElBQUksQ0FBQ3NRLE9BQU8sQ0FBQzs7SUFFbkI7SUFDQSxNQUFNUCxXQUFXLEdBQUc5UixLQUFLLENBQUMzSixNQUFNO0lBQ2hDLE1BQU1tZCxTQUFTLEdBQUcsSUFBSSxDQUFDQyxjQUFjLENBQUMsQ0FBQztJQUN2QztJQUNBLE1BQU1DLFVBQVUsR0FBR0YsU0FBUyxDQUFDdlQsS0FBSyxDQUFDLElBQUksQ0FBQztJQUN4QyxLQUFLLE1BQU04RixJQUFJLElBQUkyTixVQUFVLEVBQUU7TUFDN0IxVCxLQUFLLENBQUMrQixJQUFJLENBQUMsSUFBSSxDQUFDOFAsWUFBWSxDQUFDOUwsSUFBSSxFQUFFbEgsUUFBUSxDQUFDLENBQUM7SUFDL0M7O0lBRUE7SUFDQW1CLEtBQUssQ0FBQytCLElBQUksQ0FBQ3NRLE9BQU8sQ0FBQzs7SUFFbkI7SUFDQSxJQUFJLElBQUksQ0FBQzVhLFdBQVcsQ0FBQ3BCLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDL0IsS0FBSyxNQUFNc2QsU0FBUyxJQUFJLElBQUksQ0FBQ2xjLFdBQVcsRUFBRTtRQUN4Q3VJLEtBQUssQ0FBQytCLElBQUksQ0FBQyxJQUFJLENBQUM4UCxZQUFZLENBQUMsS0FBSzhCLFNBQVMsRUFBRSxFQUFFOVUsUUFBUSxDQUFDLENBQUM7TUFDM0Q7TUFDQTtNQUNBbUIsS0FBSyxDQUFDK0IsSUFBSSxDQUFDc1EsT0FBTyxDQUFDO0lBQ3JCOztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUM1ZSxXQUFXLENBQUM0QyxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQy9CLEtBQUssSUFBSThSLEtBQUssR0FBRyxDQUFDLEVBQUVBLEtBQUssR0FBRyxJQUFJLENBQUMxVSxXQUFXLENBQUM0QyxNQUFNLEVBQUU4UixLQUFLLEVBQUUsRUFBRTtRQUM1RCxNQUFNeUwsVUFBVSxHQUFHLElBQUksQ0FBQ25nQixXQUFXLENBQUMwVSxLQUFLLENBQUU7UUFDM0MsTUFBTTBMLFFBQVEsR0FBRzFMLEtBQUssS0FBSyxJQUFJLENBQUN6VSxlQUFlO1FBQy9DLE1BQU1vZ0IsTUFBTSxHQUFHRCxRQUFRLEdBQUc3TixZQUFLLENBQUNDLE9BQU8sQ0FBQyxHQUFHLENBQUMsR0FBR0QsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsR0FBRyxDQUFDO1FBQ2xFLE1BQU0ySixPQUFPLEdBQUdGLFFBQVEsR0FBRzdOLFlBQUssQ0FBQ0MsT0FBTyxDQUFDMk4sVUFBVSxDQUFDclYsT0FBTyxDQUFDLEdBQUd5SCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQ3dKLFVBQVUsQ0FBQ3JWLE9BQU8sQ0FBQztRQUNqRyxNQUFNeVYsUUFBUSxHQUFHSCxRQUFRLEdBQUdELFVBQVUsQ0FBQ0ssV0FBVyxHQUFHak8sWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUN3SixVQUFVLENBQUNLLFdBQVcsQ0FBQztRQUMzRmpVLEtBQUssQ0FBQytCLElBQUksQ0FBQyxJQUFJLENBQUM4UCxZQUFZLENBQUMsS0FBS2lDLE1BQU0sSUFBSUMsT0FBTyxNQUFNQyxRQUFRLEVBQUUsRUFBRW5WLFFBQVEsQ0FBQyxDQUFDO01BQ2pGO0lBQ0Y7O0lBRUE7SUFDQSxNQUFNcVYsZ0JBQWdCLEdBQUcsSUFBSSxDQUFDQyxxQkFBcUIsQ0FBQyxDQUFDO0lBQ3JELElBQUlELGdCQUFnQixFQUFFO01BQ3BCbFUsS0FBSyxDQUFDK0IsSUFBSSxDQUFDLElBQUksQ0FBQzhQLFlBQVksQ0FBQyxLQUFLcUMsZ0JBQWdCLEVBQUUsRUFBRXJWLFFBQVEsQ0FBQyxDQUFDO0lBQ2xFOztJQUVBO0lBQ0EsTUFBTXVWLFdBQVcsR0FBRyxJQUFJLENBQUNDLGdCQUFnQixDQUFDLENBQUM7SUFDM0MsSUFBSUQsV0FBVyxDQUFDL2QsTUFBTSxFQUFFO01BQ3RCLEtBQUssTUFBTWllLFVBQVUsSUFBSUYsV0FBVyxFQUFFO1FBQ3BDcFUsS0FBSyxDQUFDK0IsSUFBSSxDQUFDLElBQUksQ0FBQzhQLFlBQVksQ0FBQyxLQUFLeUMsVUFBVSxFQUFFLEVBQUV6VixRQUFRLENBQUMsQ0FBQztNQUM1RDtJQUNGOztJQUVBO0lBQ0EsTUFBTTBWLFdBQVcsR0FBRyxJQUFJLENBQUNDLHFCQUFxQixDQUFDLENBQUM7SUFDaEQsSUFBSUQsV0FBVyxDQUFDbGUsTUFBTSxHQUFHLENBQUMsRUFBRTtNQUMxQixLQUFLLE1BQU1vZSxVQUFVLElBQUlGLFdBQVcsRUFBRTtRQUNwQ3ZVLEtBQUssQ0FBQytCLElBQUksQ0FBQyxJQUFJLENBQUM4UCxZQUFZLENBQUMsS0FBSzRDLFVBQVUsRUFBRSxFQUFFNVYsUUFBUSxDQUFDLENBQUM7TUFDNUQ7TUFDQSxNQUFNNlYsV0FBVyxHQUFHLElBQUksQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztNQUM1QyxLQUFLLE1BQU1DLE1BQU0sSUFBSUYsV0FBVyxFQUFFO1FBQ2hDMVUsS0FBSyxDQUFDK0IsSUFBSSxDQUFDLElBQUksQ0FBQzhQLFlBQVksQ0FBQyxLQUFLK0MsTUFBTSxFQUFFLEVBQUUvVixRQUFRLENBQUMsQ0FBQztNQUN4RDtJQUNGOztJQUVBO0lBQ0FtQixLQUFLLENBQUMrQixJQUFJLENBQUMsSUFBSSxDQUFDOFAsWUFBWSxDQUFDLEtBQUs3TCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxpQkFBaUIsQ0FBQyxFQUFFLEVBQUV2TCxRQUFRLENBQUMsQ0FBQztJQUVqRixPQUFPO01BQUVtQixLQUFLO01BQUU4UjtJQUFZLENBQUM7RUFDL0I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDVXFDLHFCQUFxQkEsQ0FBQSxFQUFrQjtJQUM3QyxNQUFNaEIsS0FBZSxHQUFHLEVBQUU7O0lBRTFCO0lBQ0EsTUFBTTBCLEtBQUssR0FBRyxJQUFJLENBQUNuZixVQUFVLENBQUNvZixRQUFRLElBQUksSUFBSSxDQUFDcGYsVUFBVSxDQUFDbWYsS0FBSyxHQUMzRCxHQUFHLElBQUksQ0FBQ25mLFVBQVUsQ0FBQ29mLFFBQVEsTUFBTSxJQUFJLENBQUNwZixVQUFVLENBQUNtZixLQUFLLEVBQUUsR0FDeEQsSUFBSSxDQUFDbmYsVUFBVSxDQUFDbWYsS0FBSyxJQUFJLElBQUksQ0FBQ25mLFVBQVUsQ0FBQ29mLFFBQVE7SUFDckQsSUFBSUQsS0FBSyxFQUFFO01BQ1QxQixLQUFLLENBQUNwUixJQUFJLENBQUNpRSxZQUFLLENBQUNhLElBQUksQ0FBQ2dPLEtBQUssQ0FBQyxDQUFDO0lBQy9COztJQUVBO0lBQ0EsSUFBSSxJQUFJLENBQUNuZixVQUFVLENBQUNxZixjQUFjLEtBQUtoTyxTQUFTLEVBQUU7TUFDaEQsTUFBTWlPLElBQUksR0FBRzllLElBQUksQ0FBQ0UsR0FBRyxDQUFDLEdBQUcsRUFBRUYsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFLElBQUksQ0FBQ1QsVUFBVSxDQUFDcWYsY0FBYyxDQUFDLENBQUM7TUFDdkUsTUFBTUUsUUFBUSxHQUFHLENBQUM7TUFDbEIsTUFBTUMsTUFBTSxHQUFHaGYsSUFBSSxDQUFDZ1osS0FBSyxDQUFFOEYsSUFBSSxHQUFHLEdBQUcsR0FBSUMsUUFBUSxDQUFDO01BQ2xELE1BQU1FLEtBQUssR0FBR0YsUUFBUSxHQUFHQyxNQUFNO01BQy9CO01BQ0EsTUFBTUUsUUFBUSxHQUFHSixJQUFJLEdBQUcsRUFBRSxHQUFHaFAsWUFBSyxDQUFDMkcsT0FBTyxHQUFHcUksSUFBSSxHQUFHLEVBQUUsR0FBR2hQLFlBQUssQ0FBQ1ksT0FBTyxHQUFHWixZQUFLLENBQUNiLEtBQUs7TUFDcEYsTUFBTWtRLEdBQUcsR0FBR0QsUUFBUSxDQUFDLEdBQUcsQ0FBQ3RMLE1BQU0sQ0FBQ29MLE1BQU0sQ0FBQyxDQUFDLEdBQUdsUCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHLENBQUNOLE1BQU0sQ0FBQ3FMLEtBQUssQ0FBQyxDQUFDO01BQzVFaEMsS0FBSyxDQUFDcFIsSUFBSSxDQUFDLEdBQUdzVCxHQUFHLElBQUlELFFBQVEsQ0FBQyxHQUFHSixJQUFJLEdBQUcsQ0FBQyxJQUFJaFAsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztJQUN2RTtJQUVBLE9BQU8rSSxLQUFLLENBQUM5YyxNQUFNLEdBQUcsQ0FBQyxHQUFHOGMsS0FBSyxDQUFDbFIsSUFBSSxDQUFDK0QsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxJQUFJO0VBQ3RFOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDRTtBQUNGO0FBQ0E7QUFDQTtFQUNVb0sscUJBQXFCQSxDQUFBLEVBQWE7SUFDeEMsTUFBTWMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDM2YsV0FBVyxDQUFDRSxtQkFBbUIsSUFBSSxLQUFLO0lBQ3hFLE1BQU0wZixrQkFBa0IsR0FBRyxJQUFJLENBQUM1ZixXQUFXLENBQUNDLG1CQUFtQixJQUFJLEtBQUs7SUFDeEUsTUFBTTRmLFlBQVksR0FBRyxJQUFJLENBQUM3ZixXQUFXLENBQUNHLG9CQUFvQixJQUFJLE1BQU07SUFDcEUsTUFBTTJmLGFBQWEsR0FBRyxDQUFDLElBQUksQ0FBQzlmLFdBQVcsQ0FBQytmLGlCQUFpQixJQUFJLFVBQVUsRUFBRXRlLElBQUksQ0FBQyxDQUFDLENBQUN1RyxXQUFXLENBQUMsQ0FBQzs7SUFFN0Y7SUFDQSxNQUFNZ1ksT0FBaUIsR0FBRyxFQUFFOztJQUU1QjtJQUNBLE1BQU1DLElBQUksR0FBRyxJQUFJLENBQUNqZ0IsV0FBVyxDQUFDSSxhQUFhO0lBQzNDLE1BQU04ZixNQUFNLEdBQUdELElBQUksR0FBRyxJQUFJLEdBQUcsR0FBRztJQUNoQyxNQUFNRSxRQUFRLEdBQUdGLElBQUksR0FBRzVQLFlBQUssQ0FBQ2EsSUFBSSxDQUFDLE1BQU0sQ0FBQyxHQUFHYixZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxRQUFRLENBQUM7SUFDckUsTUFBTTJMLFNBQVMsR0FBR0gsSUFBSSxHQUFHLGFBQWEsR0FBRyxVQUFVO0lBQ25ERCxPQUFPLENBQUM1VCxJQUFJLENBQUMsR0FBRzhULE1BQU0sSUFBSUMsUUFBUSxJQUFJOVAsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUlwRSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQzJMLFNBQVMsQ0FBQyxFQUFFLENBQUM7O0lBRTVGO0lBQ0EsTUFBTUMsUUFBUSxHQUFHVixrQkFBa0IsR0FBRyxJQUFJLEdBQUcsR0FBRztJQUNoRCxNQUFNVyxVQUFVLEdBQUdYLGtCQUFrQixHQUFHdFAsWUFBSyxDQUFDQyxPQUFPLENBQUMsTUFBTSxDQUFDLEdBQUdELFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE1BQU0sQ0FBQztJQUN0RixNQUFNOEwsV0FBVyxHQUFHWixrQkFBa0IsR0FBRyxZQUFZLEdBQUcsZUFBZTtJQUN2RUssT0FBTyxDQUFDNVQsSUFBSSxDQUFDLEdBQUdpVSxRQUFRLElBQUlDLFVBQVUsSUFBSWpRLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE1BQU0sQ0FBQyxJQUFJcEUsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUM4TCxXQUFXLENBQUMsRUFBRSxDQUFDOztJQUVsRztJQUNBLE1BQU1DLFVBQVUsR0FBR1osa0JBQWtCLEdBQUcsR0FBRyxHQUFHLEdBQUc7SUFDakQsTUFBTWEsWUFBWSxHQUFHYixrQkFBa0IsR0FBR3ZQLFlBQUssQ0FBQ1ksT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHWixZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxNQUFNLENBQUM7SUFDeEYsTUFBTWlNLGFBQWEsR0FBR2Qsa0JBQWtCLEdBQUcsV0FBVyxHQUFHLFVBQVU7SUFDbkVJLE9BQU8sQ0FBQzVULElBQUksQ0FBQyxHQUFHb1UsVUFBVSxJQUFJQyxZQUFZLElBQUlwUSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSXBFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDaU0sYUFBYSxDQUFDLEVBQUUsQ0FBQzs7SUFFeEc7SUFDQSxNQUFNQyxRQUFRLEdBQUdkLFlBQVksS0FBSyxVQUFVLEdBQUcsSUFBSSxHQUFHLEdBQUc7SUFDekQsTUFBTWUsVUFBVSxHQUFHZixZQUFZLEtBQUssVUFBVSxHQUFHeFAsWUFBSyxDQUFDWSxPQUFPLENBQUMsS0FBSyxDQUFDLEdBQUdaLFlBQUssQ0FBQzJHLE9BQU8sQ0FBQyxNQUFNLENBQUM7SUFDN0YsTUFBTTZKLFdBQVcsR0FBR2hCLFlBQVksS0FBSyxVQUFVLEdBQUcsYUFBYSxHQUFHLGNBQWM7SUFDaEZHLE9BQU8sQ0FBQzVULElBQUksQ0FBQyxHQUFHdVUsUUFBUSxJQUFJQyxVQUFVLElBQUl2USxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxNQUFNLENBQUMsSUFBSXBFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDb00sV0FBVyxDQUFDLEVBQUUsQ0FBQzs7SUFFbEc7SUFDQSxNQUFNQyxjQUFjLEdBQUdoQixhQUFhLEtBQUssVUFBVSxJQUFJQSxhQUFhLEtBQUssTUFBTTtJQUMvRSxNQUFNaUIsU0FBUyxHQUFHRCxjQUFjLEdBQUcsSUFBSSxHQUFHLElBQUk7SUFDOUMsTUFBTUUsV0FBVyxHQUFHRixjQUFjLEdBQUd6USxZQUFLLENBQUNhLElBQUksQ0FBQyxNQUFNLENBQUMsR0FBR2IsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ2pGLE1BQU13TSxZQUFZLEdBQUdILGNBQWMsR0FBRyxVQUFVLEdBQUcsU0FBUztJQUM1RGQsT0FBTyxDQUFDNVQsSUFBSSxDQUFDLEdBQUcyVSxTQUFTLElBQUlDLFdBQVcsSUFBSTNRLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU8sQ0FBQyxJQUFJcEUsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUN3TSxZQUFZLENBQUMsRUFBRSxDQUFDOztJQUV0RztJQUNBLE1BQU1DLFdBQVcsR0FBRyxJQUFJLENBQUNsaEIsV0FBVyxDQUFDSyxZQUFZLElBQUksS0FBSztJQUMxRCxNQUFNOGdCLFNBQVMsR0FBR0QsV0FBVyxHQUFHLElBQUksR0FBRyxJQUFJO0lBQzNDLE1BQU1FLFdBQVcsR0FBR0YsV0FBVyxHQUFHN1EsWUFBSyxDQUFDWSxPQUFPLENBQUMsVUFBVSxDQUFDLEdBQUdaLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFdBQVcsQ0FBQztJQUN6RixNQUFNNE0sWUFBWSxHQUFHSCxXQUFXLEdBQUcsY0FBYyxHQUFHLFFBQVE7SUFDNURsQixPQUFPLENBQUM1VCxJQUFJLENBQUMsR0FBRytVLFNBQVMsSUFBSUMsV0FBVyxJQUFJL1EsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUlwRSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQzRNLFlBQVksQ0FBQyxFQUFFLENBQUM7O0lBRXpHO0lBQ0FyQixPQUFPLENBQUM1VCxJQUFJLENBQUMsR0FBR2lFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFFBQVEsQ0FBQyxFQUFFLENBQUM7SUFFM0MsTUFBTXZMLFFBQVEsR0FBRzNJLElBQUksQ0FBQ0MsR0FBRyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMySSxTQUFTLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUNuRCxPQUFPLElBQUksQ0FBQ21ZLFlBQVksQ0FBQ3RCLE9BQU8sRUFBRTlXLFFBQVEsQ0FBQztFQUM3Qzs7RUFFQTtBQUNGO0FBQ0E7RUFDVThWLGlCQUFpQkEsQ0FBQSxFQUFhO0lBQ3BDO0lBQ0EsT0FBTyxFQUFFO0VBQ1g7RUFFUU4sZ0JBQWdCQSxDQUFBLEVBQWE7SUFDbkMsTUFBTXhWLFFBQVEsR0FBRyxJQUFJLENBQUNDLFNBQVMsQ0FBQyxDQUFDO0lBQ2pDLE1BQU1vWSxXQUFXLEdBQUcsSUFBSSxDQUFDQyxnQkFBZ0IsQ0FBQ3RZLFFBQVEsQ0FBQztJQUNuRCxNQUFNdVksU0FBUyxHQUFHLElBQUksQ0FBQ0MsY0FBYyxDQUFDeFksUUFBUSxDQUFDO0lBQy9DLE9BQU8sQ0FBQyxHQUFHcVksV0FBVyxFQUFFLEdBQUdFLFNBQVMsQ0FBQztFQUN2QztFQUVRRSxjQUFjQSxDQUFDQyxTQUFpQixFQUFVO0lBQ2hELE1BQU1DLElBQUksR0FBRyxJQUFBQyxlQUFPLEVBQUMsQ0FBQztJQUN0QixJQUFJRCxJQUFJLElBQUlELFNBQVMsQ0FBQ2xaLFVBQVUsQ0FBQ21aLElBQUksQ0FBQyxFQUFFO01BQ3RDLE9BQU9ELFNBQVMsQ0FBQ3RnQixPQUFPLENBQUN1Z0IsSUFBSSxFQUFFLEdBQUcsQ0FBQztJQUNyQztJQUNBLE9BQU9ELFNBQVM7RUFDbEI7RUFFUUosZ0JBQWdCQSxDQUFDdFksUUFBZ0IsRUFBWTtJQUNuRCxNQUFNNlksV0FBVyxHQUFHLElBQUksQ0FBQ0Msa0JBQWtCLENBQUMsQ0FBQztJQUM3QyxJQUFJLENBQUNELFdBQVcsRUFBRTtNQUNoQixPQUFPLEVBQUU7SUFDWDtJQUVBLE1BQU1yUSxRQUFrQixHQUFHLEVBQUU7O0lBRTdCO0lBQ0EsSUFBSSxJQUFJLENBQUN0VCxJQUFJLEtBQUssV0FBVyxFQUFFO01BQzdCLE1BQU15ZSxZQUFZLEdBQUc5RCxvQkFBYSxDQUFDQyxPQUFPO01BQzFDLE1BQU04RCxXQUFXLEdBQUdELFlBQVksQ0FBQyxJQUFJLENBQUNqZSxZQUFZLEdBQUdpZSxZQUFZLENBQUNuYyxNQUFNLENBQUMsSUFBSSxHQUFHO01BQ2hGZ1IsUUFBUSxDQUFDdEYsSUFBSSxDQUFDLEdBQUdpRSxZQUFLLENBQUNhLElBQUksQ0FBQzRMLFdBQVcsQ0FBQyxJQUFJLElBQUksQ0FBQ21GLFNBQVMsQ0FBQ0YsV0FBVyxDQUFDbmhCLElBQUksRUFBRW1oQixXQUFXLENBQUNHLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDbkcsQ0FBQyxNQUFNO01BQ0x4USxRQUFRLENBQUN0RixJQUFJLENBQUMsR0FBR2lFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLFFBQVEsQ0FBQyxJQUFJLElBQUksQ0FBQ3dOLFNBQVMsQ0FBQ0YsV0FBVyxDQUFDbmhCLElBQUksRUFBRW1oQixXQUFXLENBQUNHLElBQUksQ0FBQyxFQUFFLENBQUM7SUFDcEc7SUFFQSxJQUFJLElBQUksQ0FBQ25pQixVQUFVLENBQUNvaUIsV0FBVyxFQUFFO01BQy9CelEsUUFBUSxDQUFDdEYsSUFBSSxDQUFDLEdBQUdpRSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxTQUFTLENBQUMsSUFBSXBFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLElBQUksQ0FBQzFVLFVBQVUsQ0FBQ29pQixXQUFXLENBQUMsRUFBRSxDQUFDO0lBQzlGO0lBRUEsSUFBSSxJQUFJLENBQUNwaUIsVUFBVSxDQUFDcWYsY0FBYyxLQUFLaE8sU0FBUyxFQUFFO01BQ2hEO01BQ0EsSUFBSSxDQUFDdk0sWUFBWSxDQUFDdWQsTUFBTSxDQUFDLElBQUksQ0FBQ3JpQixVQUFVLENBQUNxZixjQUFjLENBQUM7TUFDeEQxTixRQUFRLENBQUN0RixJQUFJLENBQUMsSUFBSSxDQUFDdkgsWUFBWSxDQUFDOEIsTUFBTSxDQUFDLENBQUMsQ0FBQztJQUMzQztJQUVBLE9BQU8sSUFBSSxDQUFDMmEsWUFBWSxDQUFDNVAsUUFBUSxFQUFFeEksUUFBUSxDQUFDO0VBQzlDO0VBRVF3WSxjQUFjQSxDQUFDeFksUUFBZ0IsRUFBWTtJQUNqRCxNQUFNd0ksUUFBa0IsR0FBRyxFQUFFO0lBRTdCLElBQUksSUFBSSxDQUFDM1IsVUFBVSxDQUFDc2lCLE9BQU8sRUFBRTtNQUMzQjNRLFFBQVEsQ0FBQ3RGLElBQUksQ0FBQyxJQUFJLENBQUNrVyxpQkFBaUIsQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFDdmlCLFVBQVUsQ0FBQ3NpQixPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDbkY7SUFFQSxNQUFNbkQsS0FBSyxHQUFHLElBQUksQ0FBQ25mLFVBQVUsQ0FBQ29mLFFBQVEsSUFBSSxJQUFJLENBQUNwZixVQUFVLENBQUNtZixLQUFLLEdBQzNELEdBQUcsSUFBSSxDQUFDbmYsVUFBVSxDQUFDb2YsUUFBUSxNQUFNLElBQUksQ0FBQ3BmLFVBQVUsQ0FBQ21mLEtBQUssRUFBRSxHQUN4RCxJQUFJLENBQUNuZixVQUFVLENBQUNtZixLQUFLLElBQUksSUFBSSxDQUFDbmYsVUFBVSxDQUFDb2YsUUFBUTtJQUNyRCxJQUFJRCxLQUFLLEVBQUU7TUFDVHhOLFFBQVEsQ0FBQ3RGLElBQUksQ0FBQyxJQUFJLENBQUNrVyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUVwRCxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7SUFDL0Q7SUFFQSxNQUFNcUQsU0FBUyxHQUFHLElBQUksQ0FBQ3hpQixVQUFVLENBQUN3aUIsU0FBUyxJQUFJLElBQUksQ0FBQ3hpQixVQUFVLENBQUN5aUIsU0FBUztJQUN4RSxJQUFJRCxTQUFTLEVBQUU7TUFDYjdRLFFBQVEsQ0FBQ3RGLElBQUksQ0FBQyxJQUFJLENBQUNrVyxpQkFBaUIsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDWCxjQUFjLENBQUNZLFNBQVMsQ0FBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3ZGO0lBRUEsSUFBSSxJQUFJLENBQUN4aUIsVUFBVSxDQUFDMGlCLE1BQU0sRUFBRTtNQUMxQi9RLFFBQVEsQ0FBQ3RGLElBQUksQ0FBQyxJQUFJLENBQUNrVyxpQkFBaUIsQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDdmlCLFVBQVUsQ0FBQzBpQixNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUM7SUFDbEY7SUFFQSxJQUFJLElBQUksQ0FBQzFpQixVQUFVLENBQUMyaUIsV0FBVyxFQUFFO01BQy9CaFIsUUFBUSxDQUFDdEYsSUFBSSxDQUFDLElBQUksQ0FBQ2tXLGlCQUFpQixDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUN2aUIsVUFBVSxDQUFDMmlCLFdBQVcsRUFBRSxPQUFPLENBQUMsQ0FBQztJQUN0RjtJQUVBLElBQUksSUFBSSxDQUFDM2lCLFVBQVUsQ0FBQzRpQixZQUFZLEVBQUU7TUFDaENqUixRQUFRLENBQUN0RixJQUFJLENBQUMsSUFBSSxDQUFDa1csaUJBQWlCLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQ3ZpQixVQUFVLENBQUM0aUIsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3pGO0lBRUEsSUFBSSxJQUFJLENBQUM1aUIsVUFBVSxDQUFDNmlCLE9BQU8sRUFBRTtNQUMzQmxSLFFBQVEsQ0FBQ3RGLElBQUksQ0FBQyxJQUFJLENBQUNrVyxpQkFBaUIsQ0FBQyxPQUFPLEVBQUUsSUFBSSxJQUFJLENBQUN2aUIsVUFBVSxDQUFDNmlCLE9BQU8sRUFBRSxFQUFFLE9BQU8sQ0FBQyxDQUFDO0lBQ3hGO0lBRUEsSUFBSWxSLFFBQVEsQ0FBQ2hSLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDekIsT0FBTyxFQUFFO0lBQ1g7SUFFQSxPQUFPLElBQUksQ0FBQzRnQixZQUFZLENBQUM1UCxRQUFRLEVBQUV4SSxRQUFRLENBQUM7RUFDOUM7RUFFUThZLGtCQUFrQkEsQ0FBQSxFQUF5RTtJQUNqRyxNQUFNYSxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUNwa0IsZUFBZSxFQUFFLElBQUksQ0FBQ0QsY0FBYyxFQUFFLElBQUksQ0FBQ0QsYUFBYSxDQUFDLENBQUM4TixNQUFNLENBQ3JGLENBQUNzSSxLQUFLLEVBQUVuQyxLQUFLLEVBQUVzUSxHQUFHLEtBQXNCdGUsT0FBTyxDQUFDbVEsS0FBSyxDQUFDLElBQUltTyxHQUFHLENBQUMvWSxPQUFPLENBQUM0SyxLQUFLLENBQUMsS0FBS25DLEtBQ25GLENBQUM7SUFDRCxNQUFNNVIsSUFBSSxHQUFHaWlCLFFBQVEsQ0FBQ25pQixNQUFNLEdBQUcsQ0FBQyxHQUFHbWlCLFFBQVEsQ0FBQ3ZXLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxtQkFBbUI7SUFDN0UsSUFBSSxDQUFDMUwsSUFBSSxDQUFDYSxJQUFJLENBQUMsQ0FBQyxFQUFFO01BQ2hCLE9BQU8sSUFBSTtJQUNiO0lBQ0EsTUFBTXNMLFVBQVUsR0FBR25NLElBQUksQ0FBQ29ILFdBQVcsQ0FBQyxDQUFDO0lBQ3JDLE1BQU1rYSxJQUEyQyxHQUFHblYsVUFBVSxDQUFDbkQsUUFBUSxDQUFDLE9BQU8sQ0FBQyxHQUFHLFNBQVMsR0FBRyxNQUFNO0lBQ3JHLE9BQU87TUFBRWhKLElBQUk7TUFBRXNoQjtJQUFLLENBQUM7RUFDdkI7RUFFUUksaUJBQWlCQSxDQUN2QnZSLEtBQWEsRUFDYjRELEtBQWEsRUFDYnVOLElBQXFELEVBQzdDO0lBQ1IsTUFBTWEsU0FBUyxHQUNiYixJQUFJLEtBQUssU0FBUyxHQUNkN1IsWUFBSyxDQUFDMkcsT0FBTyxHQUNia0wsSUFBSSxLQUFLLE1BQU0sR0FDYjdSLFlBQUssQ0FBQ1ksT0FBTyxHQUNiaVIsSUFBSSxLQUFLLE9BQU8sR0FDZDdSLFlBQUssQ0FBQ2IsS0FBSyxHQUNYMFMsSUFBSSxLQUFLLE9BQU8sR0FDZDdSLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxHQUNkcEUsWUFBSyxDQUFDYSxJQUFJO0lBQ3RCLE9BQU8sR0FBR2IsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMxRCxLQUFLLENBQUMsSUFBSWdTLFNBQVMsQ0FBQ3BPLEtBQUssQ0FBQyxFQUFFO0VBQ3ZEO0VBRVFzTixTQUFTQSxDQUFDcmhCLElBQVksRUFBRXNoQixJQUEyQyxFQUFVO0lBQ25GLFFBQVFBLElBQUk7TUFDVixLQUFLLFNBQVM7UUFDWixPQUFPN1IsWUFBSyxDQUFDMkcsT0FBTyxDQUFDcFcsSUFBSSxDQUFDO01BQzVCLEtBQUssTUFBTTtRQUNULE9BQU95UCxZQUFLLENBQUNZLE9BQU8sQ0FBQ3JRLElBQUksQ0FBQztNQUM1QixLQUFLLE9BQU87UUFDVixPQUFPeVAsWUFBSyxDQUFDYixLQUFLLENBQUM1TyxJQUFJLENBQUM7TUFDMUIsS0FBSyxNQUFNO01BQ1g7UUFDRSxPQUFPeVAsWUFBSyxDQUFDYSxJQUFJLENBQUN0USxJQUFJLENBQUM7SUFDM0I7RUFDRjtFQUVRMGdCLFlBQVlBLENBQUM1UCxRQUFrQixFQUFFeEksUUFBZ0IsRUFBWTtJQUNuRSxNQUFNbUIsS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTXVLLFNBQVMsR0FBR3ZFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE9BQU8sQ0FBQztJQUV6QyxJQUFJM1QsT0FBTyxHQUFHLEVBQUU7SUFDaEIsS0FBSyxNQUFNZ1IsT0FBTyxJQUFJSixRQUFRLEVBQUU7TUFDOUIsTUFBTTNFLFVBQVUsR0FBRytFLE9BQU8sQ0FBQ3JRLElBQUksQ0FBQyxDQUFDO01BQ2pDLElBQUksQ0FBQ3NMLFVBQVUsRUFBRTtNQUNqQixJQUFJLENBQUNqTSxPQUFPLEVBQUU7UUFDWkEsT0FBTyxHQUFHLElBQUksQ0FBQ29iLFlBQVksQ0FBQ25QLFVBQVUsRUFBRTdELFFBQVEsQ0FBQztRQUNqRDtNQUNGO01BQ0EsTUFBTXNPLFNBQVMsR0FBRyxHQUFHMVcsT0FBTyxHQUFHOFQsU0FBUyxHQUFHN0gsVUFBVSxFQUFFO01BQ3ZELElBQUksSUFBSSxDQUFDcUosYUFBYSxDQUFDb0IsU0FBUyxDQUFDLElBQUl0TyxRQUFRLEVBQUU7UUFDN0NwSSxPQUFPLEdBQUcwVyxTQUFTO01BQ3JCLENBQUMsTUFBTTtRQUNMbk4sS0FBSyxDQUFDK0IsSUFBSSxDQUFDLElBQUksQ0FBQzhQLFlBQVksQ0FBQ3BiLE9BQU8sRUFBRW9JLFFBQVEsQ0FBQyxDQUFDO1FBQ2hEcEksT0FBTyxHQUFHLElBQUksQ0FBQ29iLFlBQVksQ0FBQ25QLFVBQVUsRUFBRTdELFFBQVEsQ0FBQztNQUNuRDtJQUNGO0lBRUEsSUFBSXBJLE9BQU8sRUFBRTtNQUNYdUosS0FBSyxDQUFDK0IsSUFBSSxDQUFDLElBQUksQ0FBQzhQLFlBQVksQ0FBQ3BiLE9BQU8sRUFBRW9JLFFBQVEsQ0FBQyxDQUFDO0lBQ2xEO0lBRUEsT0FBT21CLEtBQUs7RUFDZDtFQUVRMlksaUJBQWlCQSxDQUFBLEVBQWE7SUFDcEMsTUFBTTNZLEtBQWUsR0FBRyxFQUFFO0lBQzFCLE1BQU15VSxVQUFVLEdBQUcsSUFBSSxDQUFDbUUsZUFBZSxDQUFDLENBQUM7SUFDekMsSUFBSW5FLFVBQVUsRUFBRTtNQUNkelUsS0FBSyxDQUFDK0IsSUFBSSxDQUFDLEdBQUdpRSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxPQUFPLENBQUMsSUFBSXBFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEdBQUcsQ0FBQyxJQUFJcUssVUFBVSxFQUFFLENBQUM7SUFDL0U7SUFFQSxNQUFNb0UsWUFBWSxHQUFHLElBQUksQ0FBQ0MsaUJBQWlCLENBQUMsQ0FBQztJQUM3QyxJQUFJRCxZQUFZLEVBQUU7TUFDaEI3WSxLQUFLLENBQUMrQixJQUFJLENBQUMsR0FBR2lFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLeU8sWUFBWSxFQUFFLENBQUM7SUFDMUQ7SUFFQSxPQUFPN1ksS0FBSztFQUNkOztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0VBQ1UrWSxzQkFBc0JBLENBQUEsRUFBa0I7SUFDOUM7SUFDQSxNQUFNNUYsS0FBZSxHQUFHLEVBQUU7SUFDMUIsTUFBTW9DLGtCQUFrQixHQUFHLElBQUksQ0FBQzVmLFdBQVcsQ0FBQ0MsbUJBQW1CLElBQUksSUFBSSxDQUFDRCxXQUFXLENBQUNFLG1CQUFtQjs7SUFFdkc7SUFDQSxNQUFNbWpCLFFBQVEsR0FBRyxJQUFJO0lBQ3JCLE1BQU1DLFNBQVMsR0FBRzFELGtCQUFrQixHQUFHLG1CQUFtQixHQUFHLGNBQWM7SUFDM0VwQyxLQUFLLENBQUNwUixJQUFJLENBQUMsR0FBR2lFLFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDNE8sUUFBUSxDQUFDLElBQUlDLFNBQVMsSUFBSWpULFlBQUssQ0FBQzJHLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDOztJQUU3RTtJQUNBLE1BQU04SSxhQUFhLEdBQUcsQ0FBQyxJQUFJLENBQUM5ZixXQUFXLENBQUMrZixpQkFBaUIsSUFBSSxFQUFFLEVBQUV0ZSxJQUFJLENBQUMsQ0FBQyxDQUFDdUcsV0FBVyxDQUFDLENBQUM7SUFDckYsSUFBSThYLGFBQWEsSUFBSUEsYUFBYSxLQUFLLEtBQUssRUFBRTtNQUM1Q3RDLEtBQUssQ0FBQ3BSLElBQUksQ0FBQyxHQUFHaUUsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsVUFBVSxDQUFDLElBQUlwRSxZQUFLLENBQUNhLElBQUksQ0FBQzRPLGFBQWEsQ0FBQyxFQUFFLENBQUM7SUFDMUU7O0lBRUE7SUFDQSxNQUFNeUQsU0FBUyxHQUFHbFQsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsc0JBQXNCLENBQUM7SUFFeEQsSUFBSStJLEtBQUssQ0FBQzljLE1BQU0sS0FBSyxDQUFDLEVBQUU7TUFDdEIsT0FBTyxJQUFJO0lBQ2I7SUFFQSxPQUFPLEtBQUs4YyxLQUFLLENBQUNsUixJQUFJLENBQUMrRCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxLQUFLLENBQUMsQ0FBQyxJQUFJOE8sU0FBUyxFQUFFO0VBQzlEO0VBRVFOLGVBQWVBLENBQUEsRUFBa0I7SUFDdkMsTUFBTWpELE9BS0osR0FBRyxFQUFFO0lBRVAsTUFBTXdELFNBQVMsR0FBR0EsQ0FBQ3pTLEtBQWEsRUFBRXhMLEVBQVcsRUFBRWtlLE1BQWUsRUFBRTlPLEtBQWMsS0FBSztNQUNqRnFMLE9BQU8sQ0FBQzVULElBQUksQ0FBQztRQUFFMkUsS0FBSztRQUFFeEwsRUFBRTtRQUFFa2UsTUFBTSxFQUFFLElBQUksQ0FBQ2xpQixZQUFZLENBQUNraUIsTUFBTSxDQUFDO1FBQUU5TztNQUFNLENBQUMsQ0FBQztJQUN2RSxDQUFDO0lBRUQsTUFBTStPLGdCQUFnQixHQUFHLElBQUksQ0FBQzFqQixXQUFXLENBQUNFLG1CQUFtQixJQUFJLEtBQUs7SUFDdEUsTUFBTTBmLGtCQUFrQixHQUFHLElBQUksQ0FBQzVmLFdBQVcsQ0FBQ0MsbUJBQW1CLElBQUl5akIsZ0JBQWdCO0lBQ25GLE1BQU1DLFdBQVcsR0FBR0QsZ0JBQWdCLEdBQ2hDLE1BQU0sR0FDTjlELGtCQUFrQixHQUNoQixJQUFJLEdBQ0osS0FBSztJQUVYNEQsU0FBUyxDQUFDLFFBQVEsRUFBRTVELGtCQUFrQixFQUFFLElBQUksQ0FBQzVmLFdBQVcsQ0FBQzhhLGtCQUFrQixFQUFFNkksV0FBVyxDQUFDO0lBQ3pGLE1BQU05RCxZQUFZLEdBQUcsSUFBSSxDQUFDN2YsV0FBVyxDQUFDRyxvQkFBb0IsSUFBSSxNQUFNO0lBQ3BFLE1BQU15akIsY0FBYyxHQUFHL0QsWUFBWSxLQUFLLE1BQU07SUFDOUMyRCxTQUFTLENBQ1AsV0FBVyxFQUNYSSxjQUFjLEVBQ2QsSUFBSSxDQUFDNWpCLFdBQVcsQ0FBQ2diLHNCQUFzQixFQUN2QzZFLFlBQVksS0FBSyxNQUFNLEdBQUcsTUFBTSxHQUFHLEtBQ3JDLENBQUM7SUFFRCxNQUFNRixrQkFBa0IsR0FBRytELGdCQUFnQjtJQUMzQ0YsU0FBUyxDQUNQLGVBQWUsRUFDZjdELGtCQUFrQixFQUNsQixJQUFJLENBQUMzZixXQUFXLENBQUNpYixrQkFBa0IsRUFDbkMwRSxrQkFBa0IsR0FBRyxhQUFhLEdBQUcsS0FDdkMsQ0FBQztJQUVELE1BQU1rRSxnQkFBZ0IsR0FBRyxDQUFDLElBQUksQ0FBQzdqQixXQUFXLENBQUMrZixpQkFBaUIsSUFBSSxVQUFVLEVBQUV0ZSxJQUFJLENBQUMsQ0FBQztJQUNsRixNQUFNcWUsYUFBYSxHQUNqQitELGdCQUFnQixDQUFDN2IsV0FBVyxDQUFDLENBQUMsS0FBSyxVQUFVLEdBQUcsTUFBTSxHQUFHNmIsZ0JBQWdCLElBQUksVUFBVTtJQUN6RixNQUFNQyxjQUFjLEdBQUdoRSxhQUFhLENBQUNwZixNQUFNLEdBQUcsQ0FBQztJQUMvQzhpQixTQUFTLENBQUMsVUFBVSxFQUFFTSxjQUFjLEVBQUUsSUFBSSxDQUFDOWpCLFdBQVcsQ0FBQythLGNBQWMsRUFBRStFLGFBQWEsQ0FBQztJQUVyRixNQUFNaUUsWUFBWSxHQUFHLElBQUksQ0FBQy9qQixXQUFXLENBQUNJLGFBQWEsSUFBSSxLQUFLO0lBQzVELE1BQU00akIsU0FBUyxHQUFHRCxZQUFZLEdBQUcsY0FBYyxHQUFHLGFBQWE7SUFDL0RQLFNBQVMsQ0FBQyxNQUFNLEVBQUVPLFlBQVksRUFBRSxJQUFJLENBQUMvakIsV0FBVyxDQUFDa2IsWUFBWSxFQUFFOEksU0FBUyxDQUFDO0lBRXpFLE1BQU1DLFNBQVMsR0FBSUMsY0FBdUIsSUFBYTtNQUNyRCxPQUFPbEUsT0FBTyxDQUNYNVcsR0FBRyxDQUFDK2EsTUFBTSxJQUFJO1FBQ2IsTUFBTUMsU0FBUyxHQUFHRCxNQUFNLENBQUM1ZSxFQUFFLEdBQUc4SyxZQUFLLENBQUMyRyxPQUFPLENBQUNtTixNQUFNLENBQUN4UCxLQUFLLElBQUksSUFBSSxDQUFDLEdBQUd0RSxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQzBQLE1BQU0sQ0FBQ3hQLEtBQUssSUFBSSxLQUFLLENBQUM7UUFDekcsTUFBTTBQLFVBQVUsR0FDZEgsY0FBYyxJQUFJQyxNQUFNLENBQUNWLE1BQU0sR0FBR3BULFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUswUCxNQUFNLENBQUNWLE1BQU0sR0FBRyxDQUFDLEdBQUcsRUFBRTtRQUM5RSxPQUFPLEdBQUdwVCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQyxHQUFHMFAsTUFBTSxDQUFDcFQsS0FBSyxHQUFHLENBQUMsSUFBSXFULFNBQVMsR0FBR0MsVUFBVSxFQUFFO01BQzFFLENBQUMsQ0FBQyxDQUNEL1gsSUFBSSxDQUFDK0QsWUFBSyxDQUFDbUUsRUFBRSxDQUFDQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVELE1BQU12TCxRQUFRLEdBQUcsSUFBSSxDQUFDQyxTQUFTLENBQUMsQ0FBQztJQUNqQyxJQUFJaUgsSUFBSSxHQUFHNlQsU0FBUyxDQUFDLElBQUksQ0FBQzs7SUFFMUI7SUFDQSxJQUFJLENBQUNobUIsbUJBQW1CLEdBQUcsSUFBSUMsR0FBRyxDQUNoQzhoQixPQUFPLENBQ0o1VyxHQUFHLENBQUMrYSxNQUFNLElBQUtBLE1BQU0sQ0FBQ1YsTUFBTSxHQUFHVSxNQUFNLENBQUNWLE1BQU0sR0FBRyxJQUFLLENBQUMsQ0FDckRwWCxNQUFNLENBQUV2RixHQUFHLElBQW9CdEMsT0FBTyxDQUFDc0MsR0FBRyxDQUFDLENBQ2hELENBQUM7O0lBRUQ7SUFDQSxJQUFJLElBQUksQ0FBQ3NQLGFBQWEsQ0FBQ2hHLElBQUksQ0FBQyxHQUFHbEgsUUFBUSxFQUFFO01BQ3ZDLElBQUksQ0FBQ2pMLG1CQUFtQixDQUFDbWQsS0FBSyxDQUFDLENBQUM7TUFDaENoTCxJQUFJLEdBQUc2VCxTQUFTLENBQUMsS0FBSyxDQUFDO0lBQ3pCO0lBRUEsT0FBTzdULElBQUksQ0FBQzNPLElBQUksQ0FBQyxDQUFDLEdBQUcyTyxJQUFJLEdBQUcsSUFBSTtFQUNsQztFQUVRK1MsaUJBQWlCQSxDQUFBLEVBQWtCO0lBQ3pDLE1BQU0zRixLQUFlLEdBQUcsRUFBRTtJQUUxQixNQUFNOEcsU0FBUyxHQUFHQSxDQUFDdlQsS0FBYSxFQUFFdlAsS0FBYyxLQUFLO01BQ25ELE1BQU11TCxVQUFVLEdBQUcsSUFBSSxDQUFDeEwsWUFBWSxDQUFDQyxLQUFLLENBQUM7TUFDM0MsSUFBSSxDQUFDdUwsVUFBVSxFQUFFO01BQ2pCLElBQUksSUFBSSxDQUFDOU8sbUJBQW1CLENBQUM1QyxHQUFHLENBQUMwUixVQUFVLENBQUMsRUFBRTtRQUM1QztNQUNGO01BQ0F5USxLQUFLLENBQUNwUixJQUFJLENBQUMsR0FBR2lFLFlBQUssQ0FBQ2EsSUFBSSxDQUFDbkUsVUFBVSxDQUFDLElBQUlzRCxZQUFLLENBQUNtRSxFQUFFLENBQUNDLEtBQUssQ0FBQzFELEtBQUssQ0FBQyxFQUFFLENBQUM7SUFDbEUsQ0FBQzs7SUFFRDtJQUNBdVQsU0FBUyxDQUFDLFdBQVcsRUFBRSxRQUFRLENBQUM7SUFDaENBLFNBQVMsQ0FBQyxhQUFhLEVBQUUsUUFBUSxDQUFDOztJQUVsQztJQUNBQSxTQUFTLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQ3RrQixXQUFXLENBQUM4YSxrQkFBa0IsQ0FBQztJQUN4RHdKLFNBQVMsQ0FBQyxlQUFlLEVBQUUsSUFBSSxDQUFDdGtCLFdBQVcsQ0FBQ2liLGtCQUFrQixDQUFDO0lBQy9EcUosU0FBUyxDQUFDLFVBQVUsRUFBRSxJQUFJLENBQUN0a0IsV0FBVyxDQUFDK2EsY0FBYyxDQUFDO0lBQ3REdUosU0FBUyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUN0a0IsV0FBVyxDQUFDa2IsWUFBWSxDQUFDO0lBRWhELElBQUlzQyxLQUFLLENBQUM5YyxNQUFNLEtBQUssQ0FBQyxFQUFFO01BQ3RCLE9BQU8sSUFBSTtJQUNiO0lBQ0EsT0FBTzhjLEtBQUssQ0FBQ2xSLElBQUksQ0FBQytELFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDLEtBQUssQ0FBQyxDQUFDO0VBQzFDO0VBR1FxSixjQUFjQSxDQUFBLEVBQVc7SUFDL0IsSUFBSSxJQUFJLENBQUMzZixjQUFjLEVBQUU7TUFDdkIsTUFBTTBZLE9BQU8sR0FBRyxXQUFXLElBQUksQ0FBQzFZLGNBQWMsQ0FBQ2tNLEtBQUssV0FBVyxJQUFJLENBQUNsTSxjQUFjLENBQUNxTSxLQUFLLGtEQUFrRDtNQUMxSSxPQUFPLElBQUksQ0FBQzBSLFlBQVksQ0FBQyxHQUFHN0wsWUFBSyxDQUFDQyxPQUFPLENBQUMsSUFBSSxDQUFDLEdBQUdELFlBQUssQ0FBQ21FLEVBQUUsQ0FBQ0MsS0FBSyxDQUFDb0MsT0FBTyxDQUFDLEVBQUUsRUFBRSxJQUFJLENBQUMxTixTQUFTLENBQUMsQ0FBQyxDQUFDO0lBQ2hHOztJQUVBO0lBQ0EsTUFBTWpFLE1BQU0sR0FBR21MLFlBQUssQ0FBQ0MsT0FBTyxDQUFDLElBQUksQ0FBQztJQUNsQyxNQUFNaVUsV0FBVyxHQUFHLElBQUksQ0FBQ25PLGFBQWEsQ0FBQ2xSLE1BQU0sQ0FBQztJQUM5QyxNQUFNZ0UsUUFBUSxHQUFHLElBQUksQ0FBQ0MsU0FBUyxDQUFDLENBQUM7SUFDakMsTUFBTXFiLGtCQUFrQixHQUFHLElBQUksQ0FBQyxDQUFDO0lBQ2pDLE1BQU1DLGlCQUFpQixHQUFHRCxrQkFBa0IsQ0FBQzlqQixNQUFNOztJQUVuRDtJQUNBO0lBQ0EsTUFBTWdrQixTQUFTLEdBQUcsSUFBSSxDQUFDaG5CLE1BQU0sQ0FBQzRELE9BQU8sQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDO0lBQ2xELE1BQU15TCxVQUFVLEdBQUcsSUFBSSxDQUFDeEosVUFBVSxHQUFHLEdBQUcsQ0FBQzRRLE1BQU0sQ0FBQ3VRLFNBQVMsQ0FBQ2hrQixNQUFNLENBQUMsR0FBR2drQixTQUFTO0lBQzdFLE1BQU1DLFdBQVcsR0FBRzVYLFVBQVUsQ0FBQ3pDLEtBQUssQ0FBQyxJQUFJLENBQUM7O0lBRTFDO0lBQ0EsTUFBTStJLE1BQWdCLEdBQUcsRUFBRTtJQUMzQixJQUFJdVIsVUFBVSxHQUFHLENBQUM7SUFDbEIsSUFBSUMsVUFBVSxHQUFHLENBQUM7SUFDbEIsSUFBSUMsU0FBUyxHQUFHLENBQUM7SUFDakIsSUFBSUMsV0FBVyxHQUFHLEtBQUs7SUFFdkIsS0FBSyxJQUFJQyxTQUFTLEdBQUcsQ0FBQyxFQUFFQSxTQUFTLEdBQUdMLFdBQVcsQ0FBQ2prQixNQUFNLEVBQUVza0IsU0FBUyxFQUFFLEVBQUU7TUFDbkUsTUFBTTVVLElBQUksR0FBR3VVLFdBQVcsQ0FBQ0ssU0FBUyxDQUFDLElBQUksRUFBRTtNQUN6QyxNQUFNQyxrQkFBa0IsR0FBR0QsU0FBUyxLQUFLLENBQUM7TUFDMUMsTUFBTUUsYUFBYSxHQUFHTixVQUFVOztNQUVoQztNQUNBLE1BQU1PLGNBQWMsR0FBR2pjLFFBQVEsR0FBR3FiLFdBQVc7TUFDN0MsTUFBTWEsYUFBYSxHQUFHbGMsUUFBUSxHQUFHdWIsaUJBQWlCOztNQUVsRDtNQUNBLElBQUl4akIsU0FBUyxHQUFHbVAsSUFBSTtNQUNwQixJQUFJaVYsa0JBQWtCLEdBQUcsSUFBSTtNQUU3QixPQUFPcGtCLFNBQVMsQ0FBQ1AsTUFBTSxHQUFHLENBQUMsSUFBSTJrQixrQkFBa0IsRUFBRTtRQUNqRCxNQUFNbE8sY0FBYyxHQUFJOE4sa0JBQWtCLElBQUlJLGtCQUFrQixHQUFJRixjQUFjLEdBQUdDLGFBQWE7UUFDbEcsTUFBTXphLEtBQUssR0FBRzFKLFNBQVMsQ0FBQ0csS0FBSyxDQUFDLENBQUMsRUFBRStWLGNBQWMsQ0FBQztRQUNoRGxXLFNBQVMsR0FBR0EsU0FBUyxDQUFDRyxLQUFLLENBQUMrVixjQUFjLENBQUM7O1FBRTNDO1FBQ0EsSUFBSW1PLFdBQW1CO1FBQ3ZCLElBQUlMLGtCQUFrQixJQUFJSSxrQkFBa0IsRUFBRTtVQUM1Q0MsV0FBVyxHQUFHLEdBQUdwZ0IsTUFBTSxHQUFHeUYsS0FBSyxFQUFFO1FBQ25DLENBQUMsTUFBTTtVQUNMMmEsV0FBVyxHQUFHLEdBQUdkLGtCQUFrQixHQUFHN1osS0FBSyxFQUFFO1FBQy9DOztRQUVBO1FBQ0EsSUFBSSxDQUFDb2EsV0FBVyxFQUFFO1VBQ2hCLE1BQU1RLFVBQVUsR0FBR0wsYUFBYSxJQUFJOVUsSUFBSSxDQUFDMVAsTUFBTSxHQUFHTyxTQUFTLENBQUNQLE1BQU0sR0FBR2lLLEtBQUssQ0FBQ2pLLE1BQU0sQ0FBQztVQUNsRixNQUFNOGtCLFFBQVEsR0FBR0QsVUFBVSxHQUFHNWEsS0FBSyxDQUFDakssTUFBTTtVQUMxQyxJQUFJLElBQUksQ0FBQy9DLE1BQU0sSUFBSTRuQixVQUFVLElBQUksSUFBSSxDQUFDNW5CLE1BQU0sSUFBSTZuQixRQUFRLEVBQUU7WUFDeERYLFVBQVUsR0FBR3hSLE1BQU0sQ0FBQzNTLE1BQU07WUFDMUIsTUFBTStrQixhQUFhLEdBQUcsSUFBSSxDQUFDOW5CLE1BQU0sR0FBRzRuQixVQUFVO1lBQzlDVCxTQUFTLEdBQUcsQ0FBRUcsa0JBQWtCLElBQUlJLGtCQUFrQixHQUFJZCxXQUFXLEdBQUdFLGlCQUFpQixJQUFJZ0IsYUFBYTtZQUMxR1YsV0FBVyxHQUFHLElBQUk7VUFDcEI7UUFDRjtRQUVBMVIsTUFBTSxDQUFDakgsSUFBSSxDQUFDa1osV0FBVyxDQUFDO1FBQ3hCRCxrQkFBa0IsR0FBRyxLQUFLOztRQUUxQjtRQUNBLElBQUlwa0IsU0FBUyxDQUFDUCxNQUFNLEtBQUssQ0FBQyxJQUFJaUssS0FBSyxDQUFDakssTUFBTSxLQUFLLENBQUMsRUFBRTtNQUNwRDtNQUVBa2tCLFVBQVUsSUFBSXhVLElBQUksQ0FBQzFQLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztJQUNqQzs7SUFFQTtJQUNBLElBQUksQ0FBQ3FrQixXQUFXLEVBQUU7TUFDaEJGLFVBQVUsR0FBR3RrQixJQUFJLENBQUNDLEdBQUcsQ0FBQyxDQUFDLEVBQUU2UyxNQUFNLENBQUMzUyxNQUFNLEdBQUcsQ0FBQyxDQUFDO01BQzNDLE1BQU1nbEIsUUFBUSxHQUFHclMsTUFBTSxDQUFDd1IsVUFBVSxDQUFDLElBQUksRUFBRTtNQUN6Q0MsU0FBUyxHQUFHLElBQUksQ0FBQzFPLGFBQWEsQ0FBQ3NQLFFBQVEsQ0FBQztJQUMxQzs7SUFFQTtJQUNBLElBQUlyUyxNQUFNLENBQUMzUyxNQUFNLEdBQUcsQ0FBQyxFQUFFO01BQ3JCLE1BQU1pbEIsVUFBVSxHQUFHdFMsTUFBTSxDQUFDd1IsVUFBVSxDQUFDLElBQUksRUFBRTtNQUMzQyxNQUFNZSxXQUFXLEdBQUcsSUFBSSxDQUFDOVEsU0FBUyxDQUFDNlEsVUFBVSxDQUFDO01BQzlDLE1BQU1FLFNBQVMsR0FBR3RsQixJQUFJLENBQUNFLEdBQUcsQ0FBQ3FrQixTQUFTLEVBQUVjLFdBQVcsQ0FBQ2xsQixNQUFNLENBQUM7O01BRXpEO01BQ0EsTUFBTW9sQixNQUFNLEdBQUdGLFdBQVcsQ0FBQ3hrQixLQUFLLENBQUMsQ0FBQyxFQUFFeWtCLFNBQVMsQ0FBQztNQUM5QyxNQUFNM1osRUFBRSxHQUFHMFosV0FBVyxDQUFDRyxNQUFNLENBQUNGLFNBQVMsQ0FBQyxJQUFJLEdBQUc7TUFDL0MsTUFBTUcsS0FBSyxHQUFHSixXQUFXLENBQUN4a0IsS0FBSyxDQUFDeWtCLFNBQVMsR0FBRyxDQUFDLENBQUM7O01BRTlDO01BQ0EsTUFBTW5TLE1BQU0sR0FBR21SLFVBQVUsS0FBSyxDQUFDLEdBQUczZixNQUFNLEdBQUdzZixrQkFBa0I7TUFDN0QsTUFBTXlCLFFBQVEsR0FBR3BCLFVBQVUsS0FBSyxDQUFDLEdBQUdpQixNQUFNLENBQUMxa0IsS0FBSyxDQUFDbWpCLFdBQVcsQ0FBQyxHQUFHdUIsTUFBTSxDQUFDMWtCLEtBQUssQ0FBQ3FqQixpQkFBaUIsQ0FBQztNQUMvRnBSLE1BQU0sQ0FBQ3dSLFVBQVUsQ0FBQyxHQUFHLEdBQUduUixNQUFNLEdBQUd1UyxRQUFRLEdBQUdwcUIsR0FBRyxDQUFDYSxPQUFPLEdBQUd3UCxFQUFFLEdBQUdyUSxHQUFHLENBQUNjLEtBQUssR0FBR3FwQixLQUFLLEVBQUU7SUFDcEY7O0lBRUE7SUFDQSxJQUFJLENBQUMxakIsbUJBQW1CLEdBQUd3aUIsU0FBUyxHQUFHLENBQUM7SUFFeEMsT0FBT3pSLE1BQU0sQ0FBQy9HLElBQUksQ0FBQyxJQUFJLENBQUM7RUFDMUI7RUFFUTRaLGdCQUFnQkEsQ0FBQ0MsU0FBaUIsRUFBb0M7SUFDNUUsSUFBSUEsU0FBUyxJQUFJLENBQUMsRUFBRTtNQUNsQixPQUFPO1FBQUV2bEIsSUFBSSxFQUFFLEVBQUU7UUFBRWpELE1BQU0sRUFBRTtNQUFFLENBQUM7SUFDaEM7SUFFQSxJQUFJLElBQUksQ0FBQ1EsY0FBYyxFQUFFO01BQ3ZCLE9BQU87UUFBRXlDLElBQUksRUFBRSxFQUFFO1FBQUVqRCxNQUFNLEVBQUU7TUFBRSxDQUFDO0lBQ2hDO0lBRUEsTUFBTW9QLFVBQVUsR0FBRyxJQUFJLENBQUNyUCxNQUFNLENBQUM0RCxPQUFPLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQztJQUNuRCxNQUFNOGtCLFdBQVcsR0FBRzdsQixJQUFJLENBQUNFLEdBQUcsQ0FBQyxJQUFJLENBQUM5QyxNQUFNLEVBQUVvUCxVQUFVLENBQUNyTSxNQUFNLENBQUM7SUFFNUQsSUFBSTJsQixNQUFNLEdBQUcsSUFBSSxDQUFDcGtCLGlCQUFpQjtJQUNuQyxJQUFJbWtCLFdBQVcsR0FBR0MsTUFBTSxFQUFFO01BQ3hCQSxNQUFNLEdBQUdELFdBQVc7SUFDdEI7SUFDQSxNQUFNekssUUFBUSxHQUFHeUssV0FBVyxHQUFHQyxNQUFNLEdBQUdGLFNBQVMsR0FBRyxDQUFDO0lBQ3JELElBQUl4SyxRQUFRLEdBQUcsQ0FBQyxFQUFFO01BQ2hCMEssTUFBTSxJQUFJMUssUUFBUTtJQUNwQjtJQUNBLE1BQU0ySyxTQUFTLEdBQUcvbEIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFdU0sVUFBVSxDQUFDck0sTUFBTSxHQUFHeWxCLFNBQVMsQ0FBQztJQUM1RCxJQUFJRSxNQUFNLEdBQUdDLFNBQVMsRUFBRTtNQUN0QkQsTUFBTSxHQUFHQyxTQUFTO0lBQ3BCO0lBQ0EsSUFBSSxDQUFDcmtCLGlCQUFpQixHQUFHb2tCLE1BQU07SUFFL0IsTUFBTUUsTUFBTSxHQUFHeFosVUFBVSxDQUFDM0wsS0FBSyxDQUFDaWxCLE1BQU0sRUFBRUEsTUFBTSxHQUFHRixTQUFTLENBQUM7SUFDM0QsTUFBTUssT0FBTyxHQUFHRCxNQUFNLENBQUNqYyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUNsQixHQUFHLENBQUNxZCxJQUFJLElBQUtBLElBQUksS0FBSyxJQUFJLEdBQUd2cEIsbUJBQW1CLEdBQUd1cEIsSUFBSyxDQUFDLENBQUNuYSxJQUFJLENBQUMsRUFBRSxDQUFDO0lBQ25HLE1BQU1vYSxjQUFjLEdBQUdubUIsSUFBSSxDQUFDRSxHQUFHLENBQUMrbEIsT0FBTyxDQUFDOWxCLE1BQU0sRUFBRUgsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFNGxCLFdBQVcsR0FBR0MsTUFBTSxDQUFDLENBQUM7SUFFbEYsTUFBTVAsTUFBTSxHQUFHVSxPQUFPLENBQUNwbEIsS0FBSyxDQUFDLENBQUMsRUFBRXNsQixjQUFjLENBQUM7SUFDL0MsTUFBTXhhLEVBQUUsR0FBR3NhLE9BQU8sQ0FBQ1QsTUFBTSxDQUFDVyxjQUFjLENBQUMsSUFBSSxHQUFHO0lBQ2hELE1BQU1WLEtBQUssR0FBR1EsT0FBTyxDQUFDcGxCLEtBQUssQ0FBQ3NsQixjQUFjLEdBQUcsQ0FBQyxDQUFDO0lBRS9DLE9BQU87TUFDTDlsQixJQUFJLEVBQUUsR0FBR2tsQixNQUFNLEdBQUdqcUIsR0FBRyxDQUFDYSxPQUFPLEdBQUd3UCxFQUFFLEdBQUdyUSxHQUFHLENBQUNjLEtBQUssR0FBR3FwQixLQUFLLEVBQUU7TUFDeERyb0IsTUFBTSxFQUFFK29CO0lBQ1YsQ0FBQztFQUNIO0VBRVFsZSxvQkFBb0JBLENBQUEsRUFBUztJQUNuQyxJQUFJLENBQUMsSUFBSSxDQUFDckssY0FBYyxFQUFFO0lBQzFCLE1BQU15QyxJQUFJLEdBQUcsSUFBSSxDQUFDekMsY0FBYyxDQUFDeUMsSUFBSTtJQUNyQyxJQUFJLENBQUN6QyxjQUFjLEdBQUcsSUFBSTtJQUMxQjtJQUNBLElBQUksQ0FBQ1QsTUFBTSxHQUFHLEVBQUU7SUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztJQUNmLElBQUksQ0FBQ21MLGlCQUFpQixDQUFDLENBQUM7SUFDeEIsSUFBSSxDQUFDeEQsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7SUFDdEI7SUFDQSxJQUFJLENBQUM2QixVQUFVLENBQUNqSSxJQUFJLENBQUM7RUFDdkI7RUFFQStsQixZQUFZQSxDQUFDbGEsT0FBd0UsR0FBRyxDQUFDLENBQUMsRUFBbUI7SUFDM0csSUFBSSxJQUFJLENBQUMxSSxZQUFZLEVBQUU7TUFDckIsT0FBTzZpQixPQUFPLENBQUNDLE1BQU0sQ0FBQyxJQUFJL2dCLEtBQUssQ0FBQyxtQ0FBbUMsQ0FBQyxDQUFDO0lBQ3ZFO0lBRUEsSUFBSTJHLE9BQU8sQ0FBQ3FhLFdBQVcsRUFBRTtNQUN2QixJQUFJLENBQUNwcEIsTUFBTSxHQUFHLEVBQUU7TUFDaEIsSUFBSSxDQUFDQyxNQUFNLEdBQUcsQ0FBQztNQUNmLElBQUksQ0FBQ3NFLGlCQUFpQixHQUFHLENBQUM7TUFDMUIsSUFBSSxDQUFDNEssZ0JBQWdCLENBQUMsQ0FBQztNQUN2QixJQUFJLENBQUN2SCxZQUFZLENBQUMsQ0FBQztNQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztJQUN4QjtJQUVBLE9BQU8sSUFBSTRmLE9BQU8sQ0FBUyxDQUFDOVosT0FBTyxFQUFFK1osTUFBTSxLQUFLO01BQzlDLElBQUksQ0FBQzlpQixZQUFZLEdBQUc7UUFDbEIrSSxPQUFPO1FBQ1ArWixNQUFNO1FBQ05wYSxPQUFPLEVBQUU7VUFDUGhMLElBQUksRUFBRWdMLE9BQU8sQ0FBQ2hMLElBQUksS0FBSyxLQUFLO1VBQzVCa0wsVUFBVSxFQUFFRixPQUFPLENBQUNFLFVBQVUsSUFBSTtRQUNwQztNQUNGLENBQUM7SUFDSCxDQUFDLENBQUM7RUFDSjtFQUVROUcsa0JBQWtCQSxDQUFDa2hCLE1BQWdCLEVBQVE7SUFDakQsSUFBSSxDQUFDLElBQUksQ0FBQ2hqQixZQUFZLEVBQUU7TUFDdEI7SUFDRjtJQUNBLE1BQU1pakIsT0FBTyxHQUFHLElBQUksQ0FBQ2pqQixZQUFZO0lBQ2pDLElBQUksQ0FBQ0EsWUFBWSxHQUFHLElBQUk7SUFDeEJpakIsT0FBTyxDQUFDSCxNQUFNLEdBQUdFLE1BQU0sSUFBSSxJQUFJamhCLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO0VBQ2xFOztFQUdBOztFQUVROFgsZUFBZUEsQ0FBQ2hkLElBQVksRUFBRStXLEtBQWEsRUFBRXpELE1BQWMsRUFBWTtJQUM3RSxNQUFNWCxLQUFLLEdBQUczUyxJQUFJLENBQUMwSixLQUFLLENBQUMsT0FBTyxDQUFDO0lBQ2pDLE1BQU1ELEtBQWUsR0FBRyxFQUFFO0lBQzFCLElBQUl2SixPQUFPLEdBQUcsRUFBRTtJQUVoQixLQUFLLE1BQU0yUyxJQUFJLElBQUlGLEtBQUssRUFBRTtNQUN4QixNQUFNcEYsSUFBSSxHQUFHck4sT0FBTyxHQUFHMlMsSUFBSTtNQUMzQixJQUFJLElBQUksQ0FBQzJDLGFBQWEsQ0FBQ2pJLElBQUksQ0FBQyxHQUFHd0osS0FBSyxJQUFJN1csT0FBTyxDQUFDVyxJQUFJLENBQUMsQ0FBQyxFQUFFO1FBQ3REO1FBQ0E0SSxLQUFLLENBQUMrQixJQUFJLENBQUN0TCxPQUFPLENBQUN5TSxPQUFPLENBQUMsQ0FBQyxDQUFDO1FBQzdCek0sT0FBTyxHQUFHb1QsTUFBTSxHQUFHVCxJQUFJLENBQUNFLFNBQVMsQ0FBQyxDQUFDO01BQ3JDLENBQUMsTUFBTTtRQUNMN1MsT0FBTyxHQUFHcU4sSUFBSTtNQUNoQjtJQUNGO0lBRUEsSUFBSXJOLE9BQU8sQ0FBQ1csSUFBSSxDQUFDLENBQUMsRUFBRTtNQUNsQjRJLEtBQUssQ0FBQytCLElBQUksQ0FBQ3RMLE9BQU8sQ0FBQ3lNLE9BQU8sQ0FBQyxDQUFDLENBQUM7SUFDL0I7O0lBRUE7SUFDQSxPQUFPbEQsS0FBSyxDQUFDM0osTUFBTSxHQUFHMkosS0FBSyxHQUFHLENBQUN6SixJQUFJLENBQUM7RUFDdEM7RUFFUXVJLFNBQVNBLENBQUEsRUFBVztJQUMxQixNQUFNN0wsSUFBSSxHQUFHLElBQUksQ0FBQzJHLE1BQU0sQ0FBQ1EsS0FBSyxHQUFHLElBQUksQ0FBQ25ILElBQUksSUFBSSxFQUFFLEdBQUcsRUFBRTtJQUNyRCxPQUFPaUQsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFbEQsSUFBSSxHQUFHLENBQUMsQ0FBQztFQUM5QjtFQUVROFksYUFBYUEsQ0FBQ3pCLEtBQWEsRUFBVTtJQUMzQyxJQUFJLENBQUNBLEtBQUssRUFBRSxPQUFPLENBQUM7SUFDcEIsT0FBTyxJQUFJLENBQUNHLFNBQVMsQ0FBQ0gsS0FBSyxDQUFDLENBQUNqVSxNQUFNO0VBQ3JDO0VBRVFvVSxTQUFTQSxDQUFDSCxLQUFhLEVBQVU7SUFDdkMsSUFBSSxDQUFDQSxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQ3JCO0lBQ0EsT0FBT0EsS0FBSyxDQUFDclQsT0FBTyxDQUFDLDRCQUE0QixFQUFFLEVBQUUsQ0FBQztFQUN4RDtFQUVRNGEsWUFBWUEsQ0FBQ3ZILEtBQWEsRUFBRWdELEtBQWEsRUFBVTtJQUN6RCxJQUFJLENBQUNoRCxLQUFLLEVBQUUsT0FBTyxFQUFFO0lBQ3JCLE1BQU1zUyxLQUFLLEdBQUcxbUIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFbVgsS0FBSyxDQUFDO0lBQ2hDO0lBQ0EsTUFBTXdCLE1BQU0sR0FBR3hFLEtBQUssQ0FBQ3JLLEtBQUssQ0FBQyxtQkFBbUIsQ0FBQztJQUMvQyxJQUFJNGMsT0FBTyxHQUFHLENBQUM7SUFDZixJQUFJNVIsU0FBUyxHQUFHLEtBQUs7SUFDckIsSUFBSWpDLE1BQU0sR0FBRyxFQUFFO0lBRWYsS0FBSyxNQUFNOFQsS0FBSyxJQUFJaE8sTUFBTSxFQUFFO01BQzFCLElBQUksQ0FBQ2dPLEtBQUssRUFBRTtNQUNaO01BQ0EsSUFBSSxtQkFBbUIsQ0FBQzllLElBQUksQ0FBQzhlLEtBQUssQ0FBQyxFQUFFO1FBQ25DOVQsTUFBTSxJQUFJOFQsS0FBSztRQUNmO01BQ0Y7TUFDQSxJQUFJRCxPQUFPLElBQUlELEtBQUssRUFBRTtRQUNwQjNSLFNBQVMsR0FBRyxJQUFJO1FBQ2hCO01BQ0Y7TUFDQSxNQUFNclUsU0FBUyxHQUFHZ21CLEtBQUssR0FBR0MsT0FBTztNQUNqQyxJQUFJQyxLQUFLLENBQUN6bUIsTUFBTSxJQUFJTyxTQUFTLEVBQUU7UUFDN0JvUyxNQUFNLElBQUk4VCxLQUFLO1FBQ2ZELE9BQU8sSUFBSUMsS0FBSyxDQUFDem1CLE1BQU07TUFDekIsQ0FBQyxNQUFNO1FBQ0wsTUFBTTBtQixXQUFXLEdBQUc3bUIsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFUyxTQUFTLEdBQUcsQ0FBQyxDQUFDO1FBQzlDLElBQUltbUIsV0FBVyxHQUFHLENBQUMsRUFBRTtVQUNuQi9ULE1BQU0sSUFBSThULEtBQUssQ0FBQy9sQixLQUFLLENBQUMsQ0FBQyxFQUFFZ21CLFdBQVcsQ0FBQztVQUNyQ0YsT0FBTyxJQUFJRSxXQUFXO1FBQ3hCO1FBQ0EvVCxNQUFNLElBQUksR0FBRztRQUNiaUMsU0FBUyxHQUFHLElBQUk7UUFDaEI7TUFDRjtJQUNGO0lBRUEsSUFBSUEsU0FBUyxJQUFJLENBQUNqQyxNQUFNLENBQUNySCxRQUFRLENBQUNuUSxHQUFHLENBQUNjLEtBQUssQ0FBQyxFQUFFO01BQzVDMFcsTUFBTSxJQUFJeFgsR0FBRyxDQUFDYyxLQUFLO0lBQ3JCO0lBRUEsT0FBTzBXLE1BQU07RUFDZjtFQUVBZ1UsU0FBU0EsQ0FBQSxFQUFXO0lBQ2xCLE9BQU8sSUFBSSxDQUFDM3BCLE1BQU07RUFDcEI7RUFFQTRwQixTQUFTQSxDQUFBLEVBQVc7SUFDbEIsT0FBTyxJQUFJLENBQUMzcEIsTUFBTTtFQUNwQjtFQUVBNHBCLFNBQVNBLENBQUMzbUIsSUFBWSxFQUFFaWxCLFNBQWtCLEVBQVE7SUFDaEQsSUFBSSxDQUFDbm9CLE1BQU0sR0FBR2tELElBQUk7SUFDbEI7SUFDQSxNQUFNNG1CLGVBQWUsR0FBRzNCLFNBQVMsSUFBSWpsQixJQUFJLENBQUNGLE1BQU07SUFDaEQsSUFBSSxDQUFDL0MsTUFBTSxHQUFHNEMsSUFBSSxDQUFDQyxHQUFHLENBQUMsQ0FBQyxFQUFFRCxJQUFJLENBQUNFLEdBQUcsQ0FBQyttQixlQUFlLEVBQUU1bUIsSUFBSSxDQUFDRixNQUFNLENBQUMsQ0FBQztJQUNqRSxJQUFJLENBQUN1QixpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQzZHLGlCQUFpQixDQUFDLENBQUM7SUFDeEIsSUFBSSxDQUFDeEQsWUFBWSxDQUFDLENBQUM7SUFDbkIsSUFBSSxDQUFDMEIsZUFBZSxDQUFDLENBQUM7RUFDeEI7RUFFQXlnQixhQUFhQSxDQUFDQyxPQUFnQixFQUFRO0lBQ3BDLElBQUksQ0FBQ25rQixVQUFVLEdBQUdta0IsT0FBTztJQUN6QixJQUFJLENBQUNwaUIsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFQXVDLFdBQVdBLENBQUEsRUFBUztJQUNsQixJQUFJLENBQUM5Qix1QkFBdUIsQ0FBQyxDQUFDO0lBQzlCLElBQUksQ0FBQ3JJLE1BQU0sR0FBRyxFQUFFO0lBQ2hCLElBQUksQ0FBQ0MsTUFBTSxHQUFHLENBQUM7SUFDZixJQUFJLENBQUNzRSxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ25FLFdBQVcsR0FBRyxFQUFFO0lBQ3JCLElBQUksQ0FBQ0MsZUFBZSxHQUFHLENBQUMsQ0FBQztJQUN6QixJQUFJLENBQUN1SCxZQUFZLENBQUMsQ0FBQztJQUNuQixJQUFJLENBQUMwQixlQUFlLENBQUMsQ0FBQztFQUN4QjtFQUVBMmdCLGFBQWFBLENBQUM3TixNQUFxQixFQUFRO0lBQ3pDLElBQUksQ0FBQ0wsWUFBWSxDQUFDSyxNQUFNLENBQUM7RUFDM0I7O0VBRUE7QUFDRjtBQUNBO0FBQ0E7RUFDRThOLG9CQUFvQkEsQ0FBQ25ZLE9BQWUsRUFBUTtJQUMxQyxJQUFJLENBQUNsUixhQUFhLEdBQUdrUixPQUFPO0lBQzVCLElBQUksQ0FBQyxJQUFJLENBQUM1USxlQUFlLEVBQUU7TUFDekIsSUFBSSxDQUFDQSxlQUFlLEdBQUdpYSxXQUFXLENBQUMsTUFBTTtRQUN2QyxJQUFJLENBQUNsYSxZQUFZLEVBQUU7UUFDbkI7UUFDQSxJQUFJLElBQUksQ0FBQ0EsWUFBWSxHQUFHLEVBQUUsS0FBSyxDQUFDLEVBQUU7VUFDaEMsSUFBSSxDQUFDUSxtQkFBbUIsRUFBRTtRQUM1QjtRQUNBLElBQUksQ0FBQ2tHLFlBQVksQ0FBQyxDQUFDO01BQ3JCLENBQUMsRUFBRSxFQUFFLENBQUM7SUFDUjtJQUNBLElBQUksQ0FBQ0EsWUFBWSxDQUFDLENBQUM7RUFDckI7O0VBRUE7QUFDRjtBQUNBO0VBQ0V1aUIsb0JBQW9CQSxDQUFBLEVBQVM7SUFDM0IsSUFBSSxJQUFJLENBQUNocEIsZUFBZSxFQUFFO01BQ3hCb0gsYUFBYSxDQUFDLElBQUksQ0FBQ3BILGVBQWUsQ0FBQztNQUNuQyxJQUFJLENBQUNBLGVBQWUsR0FBRyxJQUFJO0lBQzdCO0lBQ0EsSUFBSSxDQUFDTixhQUFhLEdBQUcsSUFBSTtJQUN6QixJQUFJLENBQUMrRyxZQUFZLENBQUMsQ0FBQztFQUNyQjtFQUVBd2lCLFVBQVVBLENBQUM5ZCxPQUFlLEVBQVE7SUFDaEMsSUFBSSxDQUFDK2QsZUFBZSxDQUFDL2QsT0FBTyxDQUFDO0VBQy9COztFQUVBO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7RUFDVWdELGlCQUFpQkEsQ0FBQ3BNLElBQVksRUFBUTtJQUM1QyxNQUFNbU0sVUFBVSxHQUFHbk0sSUFBSSxFQUFFYSxJQUFJLENBQUMsQ0FBQztJQUMvQixJQUFJLENBQUNzTCxVQUFVLEVBQUU7SUFFakIsTUFBTW5DLEdBQUcsR0FBR0MsSUFBSSxDQUFDRCxHQUFHLENBQUMsQ0FBQztJQUN0QixJQUFJLENBQUNqSixlQUFlLEdBQUc7TUFBRWYsSUFBSSxFQUFFbU0sVUFBVTtNQUFFYixFQUFFLEVBQUV0QjtJQUFJLENBQUM7O0lBRXBEO0lBQ0EsSUFBSSxDQUFDeUQsUUFBUSxDQUFDLFFBQVEsRUFBRXRCLFVBQVUsQ0FBQztFQUNyQztFQUVBcEcsTUFBTUEsQ0FBQSxFQUFTO0lBQ2IsSUFBSSxDQUFDckIsWUFBWSxDQUFDLENBQUM7RUFDckI7RUFFUW9LLEtBQUtBLENBQUNzWSxFQUFVLEVBQWlCO0lBQ3ZDLE9BQU8sSUFBSXBCLE9BQU8sQ0FBQzlaLE9BQU8sSUFBSXpELFVBQVUsQ0FBQ3lELE9BQU8sRUFBRWtiLEVBQUUsQ0FBQyxDQUFDO0VBQ3hEOztFQUVBOztFQUVRcmlCLEtBQUtBLENBQUNzaUIsSUFBWSxFQUFRO0lBQ2hDLElBQUksQ0FBQ2hrQixNQUFNLENBQUMwQixLQUFLLENBQUNzaUIsSUFBSSxDQUFDO0VBQ3pCO0VBRVFGLGVBQWVBLENBQUNubkIsSUFBWSxFQUFRO0lBQzFDLE1BQU1tTSxVQUFVLEdBQUduTSxJQUFJLEVBQUVhLElBQUksQ0FBQyxDQUFDO0lBQy9CLElBQUksQ0FBQ3NMLFVBQVUsRUFBRTtNQUNmO0lBQ0Y7SUFDQSxNQUFNbkMsR0FBRyxHQUFHQyxJQUFJLENBQUNELEdBQUcsQ0FBQyxDQUFDO0lBQ3RCLElBQUksSUFBSSxDQUFDakosZUFBZSxJQUFJLElBQUksQ0FBQ0EsZUFBZSxDQUFDZixJQUFJLEtBQUttTSxVQUFVLElBQUluQyxHQUFHLEdBQUcsSUFBSSxDQUFDakosZUFBZSxDQUFDdUssRUFBRSxHQUFHLElBQUksRUFBRTtNQUM1RztJQUNGO0lBQ0EsSUFBSSxDQUFDdkssZUFBZSxHQUFHO01BQUVmLElBQUksRUFBRW1NLFVBQVU7TUFBRWIsRUFBRSxFQUFFdEI7SUFBSSxDQUFDO0lBQ3BELElBQUksQ0FBQ3lELFFBQVEsQ0FBQyxRQUFRLEVBQUV0QixVQUFVLENBQUM7RUFDckM7RUFFUXJILGVBQWVBLENBQUEsRUFBUztJQUM5QixNQUFNMFcsTUFBTSxHQUFHLElBQUksQ0FBQ2haLFdBQVcsRUFBRWlILEtBQUssQ0FBQzNKLE1BQU0sSUFBSSxJQUFJLENBQUNrQixZQUFZLElBQUksQ0FBQztJQUN2RSxJQUFJd2EsTUFBTSxLQUFLLENBQUMsRUFBRTs7SUFFbEI7SUFDQSxJQUFJLElBQUksQ0FBQ2haLFdBQVcsRUFBRTtNQUNwQixNQUFNaVosVUFBVSxHQUFHLElBQUksQ0FBQ2paLFdBQVcsQ0FBQytZLFdBQVc7TUFDL0MsSUFBSUUsVUFBVSxHQUFHLENBQUMsRUFBRTtRQUNsQixJQUFJLENBQUMxVyxLQUFLLENBQUMsUUFBUTBXLFVBQVUsR0FBRyxDQUFDO01BQ25DO0lBQ0Y7O0lBRUE7SUFDQSxLQUFLLElBQUluaEIsQ0FBQyxHQUFHLENBQUMsRUFBRUEsQ0FBQyxHQUFHa2hCLE1BQU0sRUFBRWxoQixDQUFDLEVBQUUsRUFBRTtNQUMvQixJQUFJLENBQUN5SyxLQUFLLENBQUMsSUFBSSxDQUFDO01BQ2hCLElBQUksQ0FBQ0EsS0FBSyxDQUFDOUosR0FBRyxDQUFDSSxVQUFVLENBQUM7TUFDMUIsSUFBSWYsQ0FBQyxHQUFHa2hCLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDbEIsSUFBSSxDQUFDelcsS0FBSyxDQUFDLFFBQVEsQ0FBQztNQUN0QjtJQUNGOztJQUVBO0lBQ0EsSUFBSXlXLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDZCxJQUFJLENBQUN6VyxLQUFLLENBQUMsUUFBUXlXLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQztJQUNuQztJQUNBLElBQUksQ0FBQ3pXLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFFaEIsSUFBSSxDQUFDdkMsV0FBVyxHQUFHLElBQUk7SUFDdkIsSUFBSSxDQUFDeEIsWUFBWSxHQUFHLENBQUM7SUFDckIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0csY0FBYyxHQUFHLEtBQUs7RUFDN0I7RUFFUXFELGtCQUFrQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksSUFBSSxDQUFDcEIsTUFBTSxDQUFDUSxLQUFLLEVBQUU7TUFDckIsSUFBSSxDQUFDcEgsSUFBSSxHQUFHLElBQUksQ0FBQzRHLE1BQU0sQ0FBQzVHLElBQUksSUFBSSxFQUFFO01BQ2xDLElBQUksQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQzJHLE1BQU0sQ0FBQ2lrQixPQUFPLElBQUksRUFBRTtJQUN2QztFQUNGO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBaHJCLGlCQUFBLEdBQUFBLGlCQUFBIiwiaWdub3JlTGlzdCI6W119