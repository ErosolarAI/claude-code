{"version":3,"names":["_agentSchemaLoader","require","describe","beforeEach","clearSchemaCache","it","schemas","getAgentSchemas","expect","toBeDefined","contractVersion","toBe","version","Array","isArray","providers","models","profiles","getProviders","length","toBeGreaterThan","openaiProvider","find","p","id","label","provider","getProvider","unknownProvider","toBeUndefined","getModels","hasGpt4o","some","m","openaiModels","getModelsByProvider","every","emptyModels","model","getModel","unknownModel","getProfiles","hasCodeProfile","name","profile","getProfile","unknownProfile","slashCommands","getSlashCommands","capabilities","getCapabilities","isValidProvider","isValidModel","isValidProfile"],"sources":["agentSchemaLoader.test.ts"],"sourcesContent":["/**\n * Tests for centralized agent schema loader\n */\n\nimport { \n  getAgentSchemas, \n  getProviders, \n  getProvider,\n  getModels,\n  getModelsByProvider,\n  getModel,\n  getProfiles,\n  getProfile,\n  getSlashCommands,\n  getCapabilities,\n  clearSchemaCache,\n  isValidProvider,\n  isValidModel,\n  isValidProfile\n} from '../src/core/agentSchemaLoader.js';\n\ndescribe('agentSchemaLoader', () => {\n  beforeEach(() => {\n    // Clear cache before each test\n    clearSchemaCache();\n  });\n\n  it('should load agent schemas', () => {\n    const schemas = getAgentSchemas();\n    expect(schemas).toBeDefined();\n    expect(schemas.contractVersion).toBe('1.0.0');\n    expect(schemas.version).toBeDefined();\n    expect(Array.isArray(schemas.providers)).toBe(true);\n    expect(Array.isArray(schemas.models)).toBe(true);\n    expect(Array.isArray(schemas.profiles)).toBe(true);\n  });\n\n  it('should get providers list', () => {\n    const providers = getProviders();\n    expect(Array.isArray(providers)).toBe(true);\n    expect(providers.length).toBeGreaterThan(0);\n    \n    const openaiProvider = providers.find(p => p.id === 'openai');\n    expect(openaiProvider).toBeDefined();\n    expect(openaiProvider?.label).toBe('OpenAI');\n  });\n\n  it('should get specific provider', () => {\n    const provider = getProvider('anthropic');\n    expect(provider).toBeDefined();\n    expect(provider?.id).toBe('anthropic');\n    expect(provider?.label).toBe('Anthropic');\n    \n    const unknownProvider = getProvider('unknown' as any);\n    expect(unknownProvider).toBeUndefined();\n  });\n\n  it('should get models asynchronously', async () => {\n    const models = await getModels();\n    expect(Array.isArray(models)).toBe(true);\n    expect(models.length).toBeGreaterThan(0);\n    \n    const hasGpt4o = models.some(m => m.id === 'gpt-4o');\n    expect(hasGpt4o).toBe(true);\n  });\n\n  it('should get models by provider asynchronously', async () => {\n    const openaiModels = await getModelsByProvider('openai');\n    expect(Array.isArray(openaiModels)).toBe(true);\n    expect(openaiModels.length).toBeGreaterThan(0);\n    expect(openaiModels.every(m => m.provider === 'openai')).toBe(true);\n    \n    const emptyModels = await getModelsByProvider('unknown' as any);\n    expect(Array.isArray(emptyModels)).toBe(true);\n    expect(emptyModels.length).toBe(0);\n  });\n\n  it('should get specific model asynchronously', async () => {\n    const model = await getModel('gpt-4o');\n    expect(model).toBeDefined();\n    expect(model?.id).toBe('gpt-4o');\n    expect(model?.provider).toBe('openai');\n    \n    const unknownModel = await getModel('unknown-model');\n    expect(unknownModel).toBeUndefined();\n  });\n\n  it('should get profiles list', () => {\n    const profiles = getProfiles();\n    expect(Array.isArray(profiles)).toBe(true);\n    expect(profiles.length).toBeGreaterThan(0);\n    \n    const hasCodeProfile = profiles.some(p => p.name === 'agi-code');\n    expect(hasCodeProfile).toBe(true);\n  });\n\n  it('should get specific profile', () => {\n    const profile = getProfile('agi-code');\n    expect(profile).toBeDefined();\n    expect(profile?.name).toBe('agi-code');\n    \n    const unknownProfile = getProfile('unknown-profile');\n    expect(unknownProfile).toBeUndefined();\n  });\n\n  it('should get slash commands', () => {\n    const slashCommands = getSlashCommands();\n    expect(Array.isArray(slashCommands)).toBe(true);\n  });\n\n  it('should get capabilities', () => {\n    const capabilities = getCapabilities();\n    expect(Array.isArray(capabilities)).toBe(true);\n  });\n\n  it('should validate provider IDs', () => {\n    expect(isValidProvider('openai')).toBe(true);\n    expect(isValidProvider('anthropic')).toBe(true);\n    expect(isValidProvider('unknown')).toBe(false);\n  });\n\n  it('should validate model IDs asynchronously', async () => {\n    expect(await isValidModel('gpt-4o')).toBe(true);\n    expect(await isValidModel('unknown-model')).toBe(false);\n  });\n\n  it('should validate profile names', () => {\n    expect(isValidProfile('agi-code')).toBe(true);\n    expect(isValidProfile('unknown-profile')).toBe(false);\n  });\n});"],"mappings":"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","ignoreList":[]}