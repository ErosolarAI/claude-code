{"version":3,"names":["cov_2oml3m1efl","actualCoverage","theme","icons","spinnerFrames","progressChars","getTerminalColumns","measure","stripAnsi","InPlaceUpdater","regions","s","Map","currentSpinnerFrame","spinnerInterval","activeSpinnerId","constructor","stream","b","process","stdout","f","isTTY","cursorUp","lines","write","cursorDown","cursorToLineStart","clearToEndOfLine","clearLine","saveCursor","restoreCursor","hideCursor","showCursor","createRegion","id","initialContent","content","Array","isArray","line","set","startLine","lineCount","length","lastUpdate","Date","now","updateRegion","newContent","region","get","i","Math","max","deleteRegion","delete","updateLine","finalizeLine","formatProgressBar","current","total","options","width","showPercentage","showCount","label","style","percentage","min","round","filled","empty","bar","formatBrailleBar","repeat","progress","parts","push","ui","muted","join","ratio","fullBlocks","floor","remainder","partials","partialIndex","updateProgress","regionId","startSpinner","stopSpinner","frames","renderSpinner","setInterval","updateSpinner","_label","finalMessage","success","clearInterval","icon","error","frame","info","createStreamingRegion","maxLines","truncate","preserveLastLine","emptyLines","fill","newLines","split","shift","displayLines","unshift","termWidth","truncatedLines","map","l","visible","slice","finalizeStreamingRegion","summary","showToolProgress","toolName","message","pct","circle","tool","showFileProgress","operation","filePath","opIcons","read","edit","shortPath","truncatePath","file","path","completeFileOperation","stats","details","undefined","additions","removals","maxLen","filter","Boolean","filename","hasTTY","dispose","clear","inPlaceUpdater","updateInPlace","showProgress","finishProgress"],"sources":["inPlaceUpdater.ts"],"sourcesContent":["/**\n * InPlaceUpdater - Dynamic in-place terminal updates\n *\n * Enables tool results to update in place without creating new lines.\n * Features:\n * - Cursor management for overwriting previous output\n * - Multi-line update support\n * - Progress bar animations\n * - Streaming content updates\n * - TTY detection and fallback\n */\n\nimport { theme, icons, spinnerFrames, progressChars } from './theme.js';\nimport { getTerminalColumns, measure, stripAnsi } from './layout.js';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface UpdateRegion {\n  id: string;\n  startLine: number;\n  lineCount: number;\n  content: string[];\n  lastUpdate: number;\n}\n\nexport interface ProgressBarOptions {\n  width?: number;\n  showPercentage?: boolean;\n  showCount?: boolean;\n  label?: string;\n  style?: 'bar' | 'braille' | 'dots';\n}\n\nexport interface SpinnerOptions {\n  style?: keyof typeof spinnerFrames;\n  label?: string;\n}\n\nexport interface StreamingUpdateOptions {\n  maxLines?: number;\n  truncate?: boolean;\n  preserveLastLine?: boolean;\n}\n\n// ============================================================================\n// IN-PLACE UPDATER\n// ============================================================================\n\nexport class InPlaceUpdater {\n  private readonly stream: NodeJS.WriteStream;\n  private regions: Map<string, UpdateRegion> = new Map();\n  private currentSpinnerFrame = 0;\n  private spinnerInterval: ReturnType<typeof setInterval> | null = null;\n  private activeSpinnerId: string | null = null;\n  private isTTY: boolean;\n\n  constructor(stream: NodeJS.WriteStream = process.stdout) {\n    this.stream = stream;\n    this.isTTY = stream.isTTY === true;\n  }\n\n  // --------------------------------------------------------------------------\n  // CURSOR CONTROL\n  // --------------------------------------------------------------------------\n\n  /**\n   * Move cursor up N lines\n   */\n  private cursorUp(lines: number): void {\n    if (this.isTTY && lines > 0) {\n      this.stream.write(`\\x1b[${lines}A`);\n    }\n  }\n\n  /**\n   * Move cursor down N lines\n   */\n  private cursorDown(lines: number): void {\n    if (this.isTTY && lines > 0) {\n      this.stream.write(`\\x1b[${lines}B`);\n    }\n  }\n\n  /**\n   * Move cursor to beginning of line\n   */\n  private cursorToLineStart(): void {\n    if (this.isTTY) {\n      this.stream.write('\\r');\n    }\n  }\n\n  /**\n   * Clear from cursor to end of line\n   */\n  private clearToEndOfLine(): void {\n    if (this.isTTY) {\n      this.stream.write('\\x1b[K');\n    }\n  }\n\n  /**\n   * Clear entire line\n   */\n  private clearLine(): void {\n    if (this.isTTY) {\n      this.stream.write('\\r\\x1b[K');\n    }\n  }\n\n  /**\n   * Save cursor position\n   */\n  private saveCursor(): void {\n    if (this.isTTY) {\n      this.stream.write('\\x1b[s');\n    }\n  }\n\n  /**\n   * Restore cursor position\n   */\n  private restoreCursor(): void {\n    if (this.isTTY) {\n      this.stream.write('\\x1b[u');\n    }\n  }\n\n  /**\n   * Hide cursor\n   */\n  hideCursor(): void {\n    if (this.isTTY) {\n      this.stream.write('\\x1b[?25l');\n    }\n  }\n\n  /**\n   * Show cursor\n   */\n  showCursor(): void {\n    if (this.isTTY) {\n      this.stream.write('\\x1b[?25h');\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  // IN-PLACE UPDATES\n  // --------------------------------------------------------------------------\n\n  /**\n   * Create an updateable region\n   */\n  createRegion(id: string, initialContent: string | string[]): void {\n    const content = Array.isArray(initialContent) ? initialContent : [initialContent];\n\n    // Write initial content\n    for (const line of content) {\n      this.stream.write(`${line}\\n`);\n    }\n\n    this.regions.set(id, {\n      id,\n      startLine: 0, // We don't track absolute position, only relative\n      lineCount: content.length,\n      content,\n      lastUpdate: Date.now(),\n    });\n  }\n\n  /**\n   * Update a region in place\n   */\n  updateRegion(id: string, newContent: string | string[]): void {\n    const region = this.regions.get(id);\n    if (!region) return;\n\n    const content = Array.isArray(newContent) ? newContent : [newContent];\n\n    if (this.isTTY) {\n      // Move cursor up to the start of the region\n      this.cursorUp(region.lineCount);\n\n      // Write new content, clearing each line\n      for (let i = 0; i < Math.max(content.length, region.lineCount); i++) {\n        this.clearLine();\n        if (i < content.length) {\n          this.stream.write(`${content[i]}\\n`);\n        } else {\n          this.stream.write('\\n'); // Clear extra lines\n        }\n      }\n\n      // If new content is shorter, we need to move cursor down\n      if (content.length < region.lineCount) {\n        // We're already at the right position\n      }\n    } else {\n      // Non-TTY fallback: just print new content\n      for (const line of content) {\n        this.stream.write(`${line}\\n`);\n      }\n    }\n\n    // Update region metadata\n    region.content = content;\n    region.lineCount = content.length;\n    region.lastUpdate = Date.now();\n  }\n\n  /**\n   * Delete a region\n   */\n  deleteRegion(id: string): void {\n    const region = this.regions.get(id);\n    if (!region) return;\n\n    if (this.isTTY) {\n      // Move up and clear all lines\n      this.cursorUp(region.lineCount);\n      for (let i = 0; i < region.lineCount; i++) {\n        this.clearLine();\n        if (i < region.lineCount - 1) {\n          this.cursorDown(1);\n        }\n      }\n      // Move back up to where the region started\n      this.cursorUp(region.lineCount - 1);\n    }\n\n    this.regions.delete(id);\n  }\n\n  /**\n   * Update a single line in place (most common use case)\n   */\n  updateLine(content: string): void {\n    if (this.isTTY) {\n      this.cursorToLineStart();\n      this.clearToEndOfLine();\n      this.stream.write(content);\n    } else {\n      this.stream.write(`${content}\\n`);\n    }\n  }\n\n  /**\n   * Finalize a line update (add newline)\n   */\n  finalizeLine(content?: string): void {\n    if (content) {\n      this.updateLine(content);\n    }\n    this.stream.write('\\n');\n  }\n\n  // --------------------------------------------------------------------------\n  // PROGRESS BAR\n  // --------------------------------------------------------------------------\n\n  /**\n   * Create a progress bar string\n   */\n  formatProgressBar(\n    current: number,\n    total: number,\n    options: ProgressBarOptions = {}\n  ): string {\n    const {\n      width = 20,\n      showPercentage = true,\n      showCount = false,\n      label,\n      style = 'bar',\n    } = options;\n\n    const percentage = Math.min(100, Math.max(0, Math.round((current / total) * 100)));\n    const filled = Math.round((current / total) * width);\n    const empty = width - filled;\n\n    let bar: string;\n    switch (style) {\n      case 'braille':\n        bar = this.formatBrailleBar(current, total, width);\n        break;\n      case 'dots':\n        bar = '●'.repeat(filled) + '○'.repeat(empty);\n        break;\n      case 'bar':\n      default:\n        bar = theme.progress.bar(progressChars.filled.repeat(filled)) +\n              theme.progress.empty(progressChars.empty.repeat(empty));\n    }\n\n    const parts: string[] = [];\n\n    if (label) {\n      parts.push(theme.ui.muted(label));\n    }\n\n    parts.push(`[${bar}]`);\n\n    if (showPercentage) {\n      parts.push(theme.progress.percentage(`${percentage}%`));\n    }\n\n    if (showCount) {\n      parts.push(theme.ui.muted(`(${current}/${total})`));\n    }\n\n    return parts.join(' ');\n  }\n\n  /**\n   * Create a smooth braille-based progress bar\n   */\n  private formatBrailleBar(current: number, total: number, width: number): string {\n    const ratio = current / total;\n    const fullBlocks = Math.floor(ratio * width);\n    const remainder = (ratio * width) - fullBlocks;\n\n    // Braille patterns for partial fill (0/8 to 8/8)\n    const partials = [' ', '⡀', '⡄', '⡆', '⡇', '⣇', '⣧', '⣷', '⣿'];\n    const partialIndex = Math.floor(remainder * 8);\n\n    let bar = '⣿'.repeat(fullBlocks);\n    if (fullBlocks < width) {\n      bar += partials[partialIndex];\n      bar += ' '.repeat(width - fullBlocks - 1);\n    }\n\n    return theme.progress.bar(bar);\n  }\n\n  /**\n   * Update a progress bar in place\n   */\n  updateProgress(\n    regionId: string,\n    current: number,\n    total: number,\n    options: ProgressBarOptions = {}\n  ): void {\n    const bar = this.formatProgressBar(current, total, options);\n    this.updateLine(bar);\n  }\n\n  // --------------------------------------------------------------------------\n  // SPINNER\n  // --------------------------------------------------------------------------\n\n  /**\n   * Start a spinner\n   */\n  startSpinner(id: string, label: string, options: SpinnerOptions = {}): void {\n    if (this.spinnerInterval) {\n      this.stopSpinner();\n    }\n\n    this.activeSpinnerId = id;\n    const style = options.style || 'circle';\n    const frames = spinnerFrames[style];\n\n    // Initial render\n    this.renderSpinner(frames, label);\n\n    // Start animation\n    this.spinnerInterval = setInterval(() => {\n      this.currentSpinnerFrame = (this.currentSpinnerFrame + 1) % frames.length;\n      this.renderSpinner(frames, label);\n    }, 80);\n  }\n\n  /**\n   * Update spinner label\n   */\n  updateSpinner(_label: string): void {\n    if (!this.spinnerInterval) return;\n    // The next frame will pick up the new label\n    // For immediate update, we'd need to store the current frames\n  }\n\n  /**\n   * Stop spinner and show final message\n   */\n  stopSpinner(finalMessage?: string, success: boolean = true): void {\n    if (this.spinnerInterval) {\n      clearInterval(this.spinnerInterval);\n      this.spinnerInterval = null;\n    }\n\n    if (finalMessage) {\n      const icon = success ? theme.success(icons.success) : theme.error(icons.error);\n      this.finalizeLine(`${icon} ${finalMessage}`);\n    } else {\n      this.finalizeLine();\n    }\n\n    this.activeSpinnerId = null;\n    this.currentSpinnerFrame = 0;\n  }\n\n  /**\n   * Render current spinner frame\n   */\n  private renderSpinner(frames: readonly string[], label: string): void {\n    const frame = theme.info(frames[this.currentSpinnerFrame]);\n    this.updateLine(`${frame} ${label}`);\n  }\n\n  // --------------------------------------------------------------------------\n  // STREAMING UPDATES\n  // --------------------------------------------------------------------------\n\n  /**\n   * Create a streaming update region that shows the last N lines\n   */\n  createStreamingRegion(\n    id: string,\n    options: StreamingUpdateOptions = {}\n  ): (content: string) => void {\n    const { maxLines = 5, truncate = true, preserveLastLine = true } = options;\n    const lines: string[] = [];\n\n    // Create initial empty region\n    const emptyLines = Array(maxLines).fill('');\n    this.createRegion(id, emptyLines);\n\n    // Return updater function\n    return (content: string) => {\n      // Add new content (may contain newlines)\n      const newLines = content.split('\\n');\n      for (const line of newLines) {\n        if (line || !preserveLastLine) {\n          lines.push(line);\n        }\n      }\n\n      // Keep only last maxLines\n      while (lines.length > maxLines) {\n        lines.shift();\n      }\n\n      // Pad to maxLines for consistent region size\n      const displayLines = [...lines];\n      while (displayLines.length < maxLines) {\n        displayLines.unshift('');\n      }\n\n      // Truncate lines if needed\n      const termWidth = getTerminalColumns() - 2;\n      const truncatedLines = truncate\n        ? displayLines.map(l => {\n            const visible = measure(l);\n            if (visible > termWidth) {\n              return `${stripAnsi(l).slice(0, termWidth - 3)  }...`;\n            }\n            return l;\n          })\n        : displayLines;\n\n      this.updateRegion(id, truncatedLines);\n    };\n  }\n\n  /**\n   * Finalize streaming region with summary\n   */\n  finalizeStreamingRegion(id: string, summary?: string): void {\n    this.deleteRegion(id);\n    if (summary) {\n      this.stream.write(`${summary}\\n`);\n    }\n  }\n\n  // --------------------------------------------------------------------------\n  // COMPOUND DISPLAYS\n  // --------------------------------------------------------------------------\n\n  /**\n   * Show tool execution with in-place progress\n   */\n  showToolProgress(\n    toolName: string,\n    message: string,\n    progress?: { current: number; total: number }\n  ): void {\n    const parts: string[] = [];\n\n    // Spinner or progress icon\n    if (progress) {\n      const pct = Math.round((progress.current / progress.total) * 100);\n      parts.push(theme.info(`${pct}%`));\n    } else {\n      const frame = spinnerFrames.circle[this.currentSpinnerFrame];\n      parts.push(theme.info(frame));\n    }\n\n    // Tool name\n    parts.push(theme.tool(toolName));\n\n    // Message\n    parts.push(message);\n\n    // Progress bar if applicable\n    if (progress) {\n      const bar = this.formatProgressBar(progress.current, progress.total, {\n        width: 15,\n        showPercentage: false,\n      });\n      parts.push(bar);\n    }\n\n    this.updateLine(parts.join(' '));\n  }\n\n  /**\n   * Show file operation progress\n   */\n  showFileProgress(\n    operation: 'read' | 'write' | 'edit',\n    filePath: string,\n    progress?: { current: number; total: number }\n  ): void {\n    const opIcons = {\n      read: icons.read,\n      write: icons.write,\n      edit: icons.edit,\n    };\n\n    const shortPath = this.truncatePath(filePath, 40);\n    const parts: string[] = [\n      theme.info(opIcons[operation] || icons.file),\n      theme.file.path(shortPath),\n    ];\n\n    if (progress) {\n      parts.push(this.formatProgressBar(progress.current, progress.total, {\n        width: 12,\n        showPercentage: true,\n      }));\n    }\n\n    this.updateLine(parts.join(' '));\n  }\n\n  /**\n   * Complete file operation with summary\n   */\n  completeFileOperation(\n    operation: 'read' | 'write' | 'edit',\n    filePath: string,\n    stats?: { lines?: number; additions?: number; removals?: number }\n  ): void {\n    const shortPath = this.truncatePath(filePath, 40);\n    const parts: string[] = [\n      theme.success(icons.success),\n      theme.file.path(shortPath),\n    ];\n\n    if (stats) {\n      const details: string[] = [];\n      if (stats.lines !== undefined) {\n        details.push(`${stats.lines} lines`);\n      }\n      if (stats.additions !== undefined && stats.additions > 0) {\n        details.push(theme.file.additions(`+${stats.additions}`));\n      }\n      if (stats.removals !== undefined && stats.removals > 0) {\n        details.push(theme.file.removals(`-${stats.removals}`));\n      }\n      if (details.length > 0) {\n        parts.push(theme.ui.muted(`(${details.join(', ')})`));\n      }\n    }\n\n    this.finalizeLine(parts.join(' '));\n  }\n\n  // --------------------------------------------------------------------------\n  // UTILITIES\n  // --------------------------------------------------------------------------\n\n  private truncatePath(path: string, maxLen: number): string {\n    if (path.length <= maxLen) return path;\n\n    const parts = path.split('/').filter(Boolean);\n    if (parts.length <= 2) {\n      return `${path.slice(0, maxLen - 3)}...`;\n    }\n\n    const filename = parts[parts.length - 1] || '';\n    if (filename.length <= maxLen - 4) {\n      return `.../${filename}`;\n    }\n\n    return `${filename.slice(0, maxLen - 3)}...`;\n  }\n\n  /**\n   * Check if TTY is available\n   */\n  get hasTTY(): boolean {\n    return this.isTTY;\n  }\n\n  /**\n   * Cleanup resources\n   */\n  dispose(): void {\n    this.stopSpinner();\n    this.showCursor();\n    this.regions.clear();\n  }\n}\n\n// ============================================================================\n// SINGLETON INSTANCE\n// ============================================================================\n\nexport const inPlaceUpdater = new InPlaceUpdater();\n\n// ============================================================================\n// CONVENIENCE FUNCTIONS\n// ============================================================================\n\n/**\n * Quick in-place line update\n */\nexport function updateInPlace(content: string): void {\n  inPlaceUpdater.updateLine(content);\n}\n\n/**\n * Quick progress bar\n */\nexport function showProgress(\n  current: number,\n  total: number,\n  label?: string\n): void {\n  const bar = inPlaceUpdater.formatProgressBar(current, total, {\n    label,\n    showPercentage: true,\n    width: 25,\n  });\n  inPlaceUpdater.updateLine(bar);\n}\n\n/**\n * Finalize progress with result\n */\nexport function finishProgress(message: string, success: boolean = true): void {\n  const icon = success ? theme.success(icons.success) : theme.error(icons.error);\n  inPlaceUpdater.finalizeLine(`${icon} ${message}`);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}