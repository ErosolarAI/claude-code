d59c6ab57b6bfca14e4fb2f25c962f92
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences from text to prevent injection */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // eslint-disable-next-line no-control-regex
    return text.replace(/\x1b\[[0-9;]*[A-Za-z]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // macOS Option+key produces Unicode characters, detect them directly:
    // Option+G = © (copyright), Option+A = å, Option+V = √, Option+D = ∂
    const macOptionChars = {
      '©': 'g',
      // Option+G
      'å': 'a',
      // Option+A
      '√': 'v',
      // Option+V
      '∂': 'd' // Option+D
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
        return;
      }
      if (letter === 'g') {
        this.emit('toggle-auto-continue');
        return;
      }
      if (letter === 'd') {
        this.emit('toggle-dual-rl');
        return;
      }
      if (letter === 'v') {
        this.emit('toggle-verify');
        return;
      }
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    if (isCtrlShift('a')) {
      this.emit('toggle-critical-approval');
      return;
    }
    if (isCtrlShift('g')) {
      this.emit('toggle-auto-continue');
      return;
    }
    if (isCtrlShift('d')) {
      this.emit('toggle-dual-rl');
      return;
    }
    if (isCtrlShift('v')) {
      this.emit('toggle-verify');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      // No need for a second Enter press - user expects paste + Enter to submit
      if (this.collapsedPaste) {
        const pastedText = this.collapsedPaste.text;
        this.collapsedPaste = null;
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
        // Submit the pasted text directly and add to history
        this.emit('submit', pastedText);
        if (pastedText.trim()) {
          this.history.push(pastedText.trim());
          this.historyIndex = -1;
        }
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }
    if (sequence === '\x1b[200~') {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume any pending insert buffer to prevent leak
      const pending = this.consumePendingInsertForPaste();
      this.pasteBuffer = pending; // Include any chars that arrived before bracketed paste started
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }
    if (sequence === '\x1b[201~') {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    if (this.inPlainPaste) {
      return;
    }
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
    }
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      const pastedText = this.collapsedPaste.text;
      this.collapsedPaste = null;
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      this.emit('submit', pastedText);
      if (pastedText.trim()) {
        this.history.push(pastedText.trim());
        this.historyIndex = -1;
      }
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets to history or display them in scrollback
    if (!this.secretMode) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // For prompt events, ensure the overlay is rendered immediately
        // This guarantees prompts are visible before async processing continues
        if (event.type === 'prompt') {
          if (this.output.isTTY) {
            this.allowPromptRender = true;
            this.renderPrompt();
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        return event.content;
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.5) {
      return true; // Less than 50% letters = likely garbage
    }
    return false;
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.min(this.cols - 4, 56); // Leave room for prefix and margins
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ Search(pattern: "foo", path: "src",
   *           output_mode: "content", head_limit: 30)
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.info(nameMatch[1])}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ ToolName(args...)
    const prefix = `${bullet} ${_theme.theme.info(toolName)}(`;
    const prefixLen = toolName.length + 3; // "⏺ ToolName(" visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix})\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : ')';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;

    // Truncate long values
    const maxLen = 40;
    const truncated = inner.length > maxLen ? inner.slice(0, maxLen - 3) + '...' : inner;
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ Read → file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${_theme.theme.info(toolName)}\n`;
    }

    // Format full params in Claude Code style with line wrapping
    // For long args, wrap them nicely with continuation indent
    const prefix = `${bullet} ${_theme.theme.info(toolName)}(`;
    const suffix = ')';
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${prefix}${argsStr}${suffix}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParams(toolName, params, maxWidth);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping
   */
  formatToolParams(toolName, params, maxWidth) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${_theme.theme.info(toolName)}(`;
    let firstParam = true;
    for (const param of params) {
      const paramStr = firstParam ? `${param.key}: ${param.value}` : `, ${param.key}: ${param.value}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      // eslint-disable-next-line no-control-regex
      const plainLength = testLine.replace(/\x1b\[[0-9;]*m/g, '').length;
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + `${param.key}: ${param.value}`;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    currentLine += ')';
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        // Shorten long paths
        const short = path.length > 30 ? '…' + path.slice(-28) : path;
        return _theme.theme.ui.muted(short);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        const short = cmd.length > 40 ? cmd.slice(0, 37) + '…' : cmd;
        return _theme.theme.ui.muted(short);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Parse common result patterns for summary
    const lineMatch = content.match(/(\d+)\s*lines?/i);
    const fileMatch = content.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = content.match(/read.*?(\d+)\s*lines?/i);
    let summary;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (content.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else {
      // Use content directly, truncated if needed
      summary = content.length > 40 ? content.slice(0, 37) + '…' : content;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${summary} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.info ?? (value => value)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 80); // ~12 FPS for smooth spinner animation
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }

      // Clear all previous lines
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        this.write('\r');
        this.write(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          this.write('\x1b[B');
        }
      }

      // If new height is greater, we need to add blank lines
      const extraLines = height - this.lastOverlayHeight;
      if (extraLines > 0) {
        for (let i = 0; i < extraLines; i++) {
          this.write('\n');
        }
      }

      // Move back to top of where overlay should start
      const moveBackUp = Math.max(0, height - 1);
      if (moveBackUp > 0) {
        this.write(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      this.write(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        this.write('\n');
      }
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      this.write(`\x1b[${linesToMoveUp}A`);
    }
    this.write(`\x1b[${promptCol}G`);
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots (smoother, more professional)
      const spinnerChars = ['⠋', '⠙', '⠹', '⠸', '⠼', '⠴', '⠦', '⠧', '⠇', '⠏'];
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsed);
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const activityLine = `${_theme.theme.info(spinnerChar)} ${displayActivity.trim()}${needsEllipsis ? '…' : ''} ${_theme.theme.ui.muted(`(${parts.join(' · ')})`)}`;
      lines.push(this.truncateLine(activityLine, maxWidth));
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    const inputLines = inputLine.split('\n');
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = Math.min(100, Math.max(0, this.statusMeta.contextPercent));
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = barWidth - filled;
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = used < 50 ? _theme.theme.success : used < 80 ? _theme.theme.warning : _theme.theme.error;
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    this.buffer = this.collapsedPaste.text;
    this.cursor = this.buffer.length;
    this.collapsedPaste = null;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;
    const now = Date.now();
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl90aGVtZSIsIl9vdXRwdXRNb2RlIiwiX2FuaW1hdGVkU3RhdHVzIiwiX2RlYnVnTG9nZ2VyIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRVNDIiwiSElERV9DVVJTT1IiLCJTSE9XX0NVUlNPUiIsIkNMRUFSX1NDUkVFTiIsIkNMRUFSX0xJTkUiLCJIT01FIiwiRU5BQkxFX0JSQUNLRVRFRF9QQVNURSIsIkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFIiwiVE8iLCJyb3ciLCJjb2wiLCJUT19DT0wiLCJFUkFTRV9ET1dOIiwiUkVWRVJTRSIsIlJFU0VUIiwiU0VUX1NDUk9MTF9SRUdJT04iLCJ0b3AiLCJib3R0b20iLCJSRVNFVF9TQ1JPTExfUkVHSU9OIiwiU0FWRV9DVVJTT1IiLCJSRVNUT1JFX0NVUlNPUiIsIk5FV0xJTkVfUExBQ0VIT0xERVIiLCJVbmlmaWVkVUlSZW5kZXJlciIsIkV2ZW50RW1pdHRlciIsInJvd3MiLCJjb2xzIiwibGFzdFJlbmRlcldpZHRoIiwiZXZlbnRRdWV1ZSIsImlzUHJvY2Vzc2luZ1F1ZXVlIiwiYnVmZmVyIiwiY3Vyc29yIiwiaGlzdG9yeSIsImhpc3RvcnlJbmRleCIsInN1Z2dlc3Rpb25zIiwic3VnZ2VzdGlvbkluZGV4IiwiYXZhaWxhYmxlQ29tbWFuZHMiLCJob3RrZXlzSW5Ub2dnbGVMaW5lIiwiU2V0IiwiY29sbGFwc2VkUGFzdGUiLCJtb2RlIiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJmdW5BY3Rpdml0eVBocmFzZXMiLCJtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMiLCJtYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMiLCJ0aG91Z2h0RGVkdXBXaW5kb3dNcyIsImxhc3RDdXJhdGVkVGhvdWdodCIsInN0YXR1c01ldGEiLCJ0b2dnbGVTdGF0ZSIsInZlcmlmaWNhdGlvbkVuYWJsZWQiLCJhdXRvQ29udGludWVFbmFibGVkIiwiY3JpdGljYWxBcHByb3ZhbE1vZGUiLCJkdWFsUmxFbmFibGVkIiwiZGVidWdFbmFibGVkIiwiY2xhbXBDdXJzb3IiLCJNYXRoIiwibWF4IiwibWluIiwibGVuZ3RoIiwiYXBwZW5kVG9QYXN0ZUJ1ZmZlciIsInRleHQiLCJwYXN0ZUJ1ZmZlck92ZXJmbG93IiwiY3VycmVudCIsInBhc3RlQnVmZmVyIiwicGxhaW5QYXN0ZUJ1ZmZlciIsInJlbWFpbmluZyIsIm1heFBhc3RlQnVmZmVyU2l6ZSIsInRvQWRkIiwic2xpY2UiLCJzYW5pdGl6ZVBhc3RlQ29udGVudCIsInJlcGxhY2UiLCJmb3JtYXRIb3RrZXkiLCJjb21ibyIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsImxhc3RQcm9tcHRFdmVudCIsInByb21wdEhlaWdodCIsImxhc3RPdmVybGF5SGVpZ2h0IiwiaW5saW5lUGFuZWwiLCJoYXNDb252ZXJzYXRpb25Db250ZW50IiwiaXNQcm9tcHRBY3RpdmUiLCJpbnB1dFJlbmRlck9mZnNldCIsInBsYWluUGFzdGVJZGxlTXMiLCJwbGFpblBhc3RlV2luZG93TXMiLCJwbGFpblBhc3RlVHJpZ2dlckNoYXJzIiwicGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzIiwiY3Vyc29yVmlzaWJsZUNvbHVtbiIsImluQnJhY2tldGVkUGFzdGUiLCJpblBsYWluUGFzdGUiLCJwbGFpblBhc3RlVGltZXIiLCJwYXN0ZUJ1cnN0V2luZG93U3RhcnQiLCJwYXN0ZUJ1cnN0Q2hhckNvdW50IiwicGxhaW5SZWNlbnRDaHVua3MiLCJwZW5kaW5nSW5zZXJ0QnVmZmVyIiwicGVuZGluZ0luc2VydFRpbWVyIiwicGVuZGluZ0luc2VydERlbGF5TXMiLCJsYXN0UmVuZGVyZWRFdmVudEtleSIsImxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lIiwiaGFzUmVuZGVyZWRQcm9tcHQiLCJoYXNFdmVyUmVuZGVyZWRPdmVybGF5IiwibGFzdE92ZXJsYXkiLCJhbGxvd1Byb21wdFJlbmRlciIsInByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCIsInNlY3JldE1vZGUiLCJwZW5kaW5nUmVuZGVyIiwibGFzdFJlbmRlclRpbWUiLCJyZW5kZXJUaHJvdHRsZU1zIiwicmVuZGVyVGhyb3R0bGVUaW1lciIsImRpc3Bvc2VkIiwiYm91bmRSZXNpemVIYW5kbGVyIiwiYm91bmRLZXlwcmVzc0hhbmRsZXIiLCJpbnB1dENhcHR1cmUiLCJjb25zdHJ1Y3RvciIsIm91dHB1dCIsInByb2Nlc3MiLCJzdGRvdXQiLCJpbnB1dCIsInN0ZGluIiwiX29wdGlvbnMiLCJpbnRlcmFjdGl2ZSIsIkJvb2xlYW4iLCJpc1RUWSIsImVudiIsInBsYWluTW9kZSIsImlzUGxhaW5PdXRwdXRNb2RlIiwiY29udGV4dE1ldGVyIiwiQ29udGV4dE1ldGVyIiwicmwiLCJjcmVhdGVJbnRlcmZhY2UiLCJ0ZXJtaW5hbCIsInByb21wdCIsInRhYlNpemUiLCJzZXRQcm9tcHQiLCJ1cGRhdGVUZXJtaW5hbFNpemUiLCJyZW5kZXJQcm9tcHQiLCJvbiIsInNldHVwSW5wdXRIYW5kbGVycyIsImluaXRpYWxpemUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNhbmNlbFBsYWluUGFzdGVDYXB0dXJlIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsInN0b3AiLCJkaXNwb3NlIiwiZGlzcG9zZUFuaW1hdGlvbnMiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImNsb3NlIiwic2V0UmF3TW9kZSIsInN1c3BlbmRQcm9tcHRSZW5kZXJpbmciLCJyZXN1bWVQcm9tcHRSZW5kZXJpbmciLCJyZW5kZXIiLCJlbWl0S2V5cHJlc3NFdmVudHMiLCJzdHIiLCJrZXkiLCJoYW5kbGVLZXlwcmVzcyIsImVtaXRJbnB1dENoYW5nZSIsInBheWxvYWQiLCJlbWl0Iiwibm9ybWFsaXplZEtleSIsInBhcnNlRXNjYXBlU2VxdWVuY2UiLCJrZXlGb3JQYXN0ZSIsInNlcXVlbmNlIiwiaGFuZGxlQnJhY2tldGVkUGFzdGUiLCJoYW5kbGVQbGFpblBhc3RlIiwiY3RybCIsIm5hbWUiLCJjbGVhckJ1ZmZlciIsIm1hY09wdGlvbkNoYXJzIiwibGV0dGVyIiwiaXNDdHJsU2hpZnQiLCJsb3dlckxldHRlciIsInRvTG93ZXJDYXNlIiwidXBwZXJMZXR0ZXIiLCJzaGlmdCIsIm1ldGEiLCJzZXEiLCJ0ZXN0IiwiaGFkQnVmZmVyIiwiZXhwYW5kQ29sbGFwc2VkUGFzdGUiLCJwYXN0ZWRUZXh0IiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJwdXNoIiwiYXBwbHlTdWdnZXN0aW9uIiwic3RhcnRzV2l0aCIsInNhZmVJbmRleCIsImNvbW1hbmQiLCJzdWJtaXRUZXh0IiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBlbmRpbmciLCJjb21taXRQYXN0ZUJ1ZmZlciIsInNhbml0aXplZCIsImNvbnRlbnQiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwiZmlsdGVyIiwiam9pbiIsImZpbmFsaXplUGxhaW5QYXN0ZSIsInNob3VsZFRyaW0iLCJvcHRpb25zIiwibm9ybWFsaXplZENhcHR1cmUiLCJhbGxvd0VtcHR5IiwicmVzb2x2ZXIiLCJyZXNldFN1Z2dlc3Rpb25zIiwicmVzb2x2ZSIsIm5vcm1hbGl6ZWQiLCJkaXNwbGF5VXNlclByb21wdCIsImZpcnN0U3BhY2UiLCJpbmRleE9mIiwiaGFzQXJnVGV4dCIsImN1cnNvclNsaWNlIiwiY29tbWFuZFNsaWNlIiwiZmFsbGJhY2tTbGljZSIsInBhcnRpYWwiLCJ0cmltRW5kIiwicHJldmlvdXMiLCJjbWQiLCJpZHgiLCJmaW5kSW5kZXgiLCJzIiwic2V0QXZhaWxhYmxlQ29tbWFuZHMiLCJjb21tYW5kcyIsInN1Ym1pdCIsInNlbGVjdGVkIiwiZGlyZWN0aW9uIiwiY3VycmVudEluZGV4IiwibmV4dCIsImNsYW1wZWQiLCJhZGRFdmVudCIsInR5cGUiLCJsb2dEZWJ1ZyIsIm5vcm1hbGl6ZUV2ZW50VHlwZSIsImZvcm1hdHRlZCIsImZvcm1hdENvbnRlbnQiLCJyYXdUeXBlIiwidGltZXN0YW1wIiwiZXZlbnQiLCJpbnNlcnRJbmRleCIsInNwbGljZSIsInF1ZXVlTWljcm90YXNrIiwicHJvY2Vzc1F1ZXVlIiwicmVuZGVyUHJvbXB0T3ZlcmxheSIsImltbWVkaWF0ZSIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNvYWxlc2NlZCIsImNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzIiwicmVuZGVyRXZlbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZWxheSIsImlzTWVyZ2VhYmxlIiwidGFyZ2V0IiwiaXNDb21wYWN0ZWQiLCJuZWVkc1NlcGFyYXRvciIsImZsdXNoRXZlbnRzIiwidGltZW91dE1zIiwic3RhcnQiLCJmb3JtYXR0ZWRQbGFpbiIsInNpZ25hdHVyZSIsImxpbmUiLCJ0aGVtZSIsInByaW1hcnkiLCJpc0dhcmJhZ2VPdXRwdXQiLCJjdXJhdGVkIiwiY3VyYXRlUmVhc29uaW5nQ29udGVudCIsInNob3VsZFJlbmRlclRob3VnaHQiLCJmb3JtYXRUaGlua2luZ0Jsb2NrIiwiZm9ybWF0Q29tcGFjdFRvb2xDYWxsIiwiZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQiLCJ3cmFwQnVsbGV0VGV4dCIsImxhYmVsIiwibGFiZWxDb2xvciIsIndhcm5pbmciLCJpbmZvIiwiaXNFcnJvciIsInVuZGVmaW5lZCIsImluY2x1ZGVzIiwiYWxwaGFDb3VudCIsIm1hdGNoIiwidG90YWxDb3VudCIsImxpbWl0ZWQiLCJtYXhTZWdtZW50cyIsInNlZ21lbnRzIiwiZmxhdE1hcCIsInNlZW4iLCJkZWR1cGVkIiwic2VnbWVudCIsIm5vcm1hbGl6ZWRTZWdtZW50IiwiYWRkIiwicHJpb3JpdGl6ZWQiLCJwcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMiLCJsaW1pdGVkU2VsZWN0aW9uIiwiYnVsbGV0ZWQiLCJlbnN1cmVSZWFzb25pbmdCdWxsZXQiLCJsb29rc1N0cnVjdHVyZWRUaG91Z2h0Iiwic2NvcmVkIiwiaW5kZXgiLCJzY29yZSIsInJlYXNvbmluZ1NpZ25hbFNjb3JlIiwiaGFzU2lnbmFsIiwiaXRlbSIsInNvcnQiLCJhIiwiYiIsImxvd2VyIiwiYWN0aW9uS2V5d29yZHMiLCJrZXl3b3JkIiwiZm9ybWF0Q2xhdWRlQ29kZUJsb2NrIiwiYnVsbGV0IiwicmVzdWx0IiwibGluZUlkeCIsIndvcmRzIiwiY3VycmVudExpbmUiLCJ3b3JkIiwicHJlZml4IiwidHJpbVN0YXJ0IiwiZm9ybWF0VG9vbENhbGwiLCJuYW1lTWF0Y2giLCJ0b29sTmFtZSIsImFyZ3NTdHIiLCJwcmVmaXhMZW4iLCJpbmRlbnQiLCJyZXBlYXQiLCJhcmdzIiwicGFyc2VUb29sQXJncyIsImFyZyIsImFyZ1RleHQiLCJ1aSIsIm11dGVkIiwiZm9ybWF0QXJnVmFsdWUiLCJ2YWx1ZSIsInNlcGFyYXRvciIsInRlc3RMaW5lIiwic3RyaXBBbnNpIiwicmVnZXgiLCJleGVjIiwiaXNRdW90ZWQiLCJpbm5lciIsIm1heExlbiIsInRydW5jYXRlZCIsImZvcm1hdFRvb2xSZXN1bHQiLCJzdW1tYXJ5TWF0Y2giLCJwcmV2aWV3IiwicGFyYW1zIiwicGFyc2VUb29sUGFyYW1zIiwiZm9ybWF0VG9vbFBhcmFtcyIsImZpcnN0UGFyYW0iLCJwYXJhbSIsInBhcmFtU3RyIiwicGxhaW5MZW5ndGgiLCJleHRyYWN0VG9vbFN1bW1hcnkiLCJ0b29sIiwicGF0aE1hdGNoIiwicGF0aCIsInNob3J0IiwiY21kTWF0Y2giLCJsaW5lTWF0Y2giLCJmaWxlTWF0Y2giLCJyZWFkTWF0Y2giLCJzdW1tYXJ5IiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwidmlzaWJsZUxlbmd0aCIsImZpcnN0Tm9uRW1wdHkiLCJyYXdMaW5lIiwiY2FuZGlkYXRlIiwicHJlZml4TGVuZ3RoIiwid3JhcFRleHRUb1dpZHRoIiwid2lkdGgiLCJmb3JtYXRTdHJlYW1pbmdFbGFwc2VkIiwiZWxhcHNlZCIsImZsb29yIiwibWlucyIsInNlY3MiLCJmb3JtYXRDb21wYWN0QmxvY2siLCJwYWRkaW5nIiwibGVmdFBhZCIsInJpZ2h0UGFkIiwiY2VpbCIsImFkZENvbXBhY3RCbG9jayIsImZvcm1hdHRlZENvbnRlbnQiLCJzZXRNb2RlIiwid2FzU3RyZWFtaW5nIiwic3RhcnRTcGlubmVyQW5pbWF0aW9uIiwic3RvcFNwaW5uZXJBbmltYXRpb24iLCJzZXRJbnRlcnZhbCIsInNwaW5uZXJGcmFtZXMiLCJicmFpbGxlIiwic2V0QWN0aXZpdHkiLCJ1cGRhdGVTdHJlYW1pbmdUb2tlbnMiLCJ0b2tlbnMiLCJmb3JtYXRUb2tlbkNvdW50IiwiU3RyaW5nIiwidG9GaXhlZCIsInJvdW5kIiwiZ2V0TW9kZSIsInVwZGF0ZVN0YXR1cyIsInVwZGF0ZVN0YXR1c0J1bmRsZSIsIm1haW4iLCJvdmVycmlkZSIsInN0cmVhbWluZyIsInN0YXR1cyIsInByZXZTdHJlYW1pbmciLCJjaGFuZ2VkIiwibWFpbkNoYW5nZWQiLCJvdmVycmlkZUNoYW5nZWQiLCJzdHJlYW1pbmdDaGFuZ2VkIiwic3RyZWFtaW5nSW50cm9kdWNlIiwic3RyZWFtaW5nQ2xlYXJlZCIsIm9ubHlTdHJlYW1pbmdDaGFuZ2VkIiwic2tpcFN0cmVhbWluZ1JlbmRlciIsInNob3VsZFJlbmRlciIsInVwZGF0ZVN0YXR1c01ldGEiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlTW9kZVRvZ2dsZXMiLCJzdGF0ZSIsInZlcmlmaWNhdGlvbkhvdGtleSIsInRoaW5raW5nSG90a2V5IiwiY3JpdGljYWxBcHByb3ZhbEhvdGtleSIsImF1dG9Db250aW51ZUhvdGtleSIsImR1YWxSbEhvdGtleSIsImRlYnVnSG90a2V5IiwiY2xlYXIiLCJzZXRJbmxpbmVQYW5lbCIsImhhc0NvbnRlbnQiLCJsaW1pdElubGluZVBhbmVsIiwic3VwcG9ydHNJbmxpbmVQYW5lbCIsImNsZWFySW5saW5lUGFuZWwiLCJtYXhMaW5lcyIsIm92ZXJmbG93IiwiaW5kaWNhdG9yIiwidGFpbENvdW50IiwidGFpbCIsIm92ZXJsYXkiLCJidWlsZE92ZXJsYXlMaW5lcyIsInJlbmRlcmVkTGluZXMiLCJ0cnVuY2F0ZUxpbmUiLCJwcm9tcHRJbmRleCIsImhlaWdodCIsImxpbmVzVG9Ub3AiLCJleHRyYUxpbmVzIiwibW92ZUJhY2tVcCIsInByb21wdENvbCIsImxpbmVzVG9Nb3ZlVXAiLCJkaXZpZGVyIiwiZmFsbGJhY2tBY3Rpdml0eSIsInJhdyIsInNwaW5uZXJDaGFycyIsInNwaW5uZXJDaGFyIiwiZ2VuZXJpY0FjdGl2aXRpZXMiLCJkaXNwbGF5QWN0aXZpdHkiLCJuZWVkc0VsbGlwc2lzIiwicGFydHMiLCJhY3Rpdml0eUxpbmUiLCJpbnB1dExpbmUiLCJidWlsZElucHV0TGluZSIsImlucHV0TGluZXMiLCJwYW5lbExpbmUiLCJzdWdnZXN0aW9uIiwiaXNBY3RpdmUiLCJtYXJrZXIiLCJjbWRUZXh0IiwiZGVzY1RleHQiLCJkZXNjcmlwdGlvbiIsIm1vZGVsQ29udGV4dExpbmUiLCJidWlsZE1vZGVsQ29udGV4dExpbmUiLCJjaHJvbWVMaW5lcyIsImJ1aWxkQ2hyb21lTGluZXMiLCJjaHJvbWVMaW5lIiwidG9nZ2xlTGluZXMiLCJidWlsZElubGluZVRvZ2dsZUxpbmUiLCJ0b2dnbGVMaW5lIiwibGVnZW5kTGluZXMiLCJidWlsZFRvZ2dsZUxlZ2VuZCIsImxlZ2VuZCIsIm1vZGVsIiwicHJvdmlkZXIiLCJjb250ZXh0UGVyY2VudCIsInVzZWQiLCJiYXJXaWR0aCIsImZpbGxlZCIsImVtcHR5IiwiYmFyQ29sb3IiLCJzdWNjZXNzIiwiYmFyIiwiYXV0b0NvbnRpbnVlQWN0aXZlIiwidmVyaWZpY2F0aW9uQWN0aXZlIiwiYXBwcm92YWxNb2RlIiwidGhpbmtpbmdMYWJlbCIsInRoaW5raW5nTW9kZUxhYmVsIiwidG9nZ2xlcyIsInJsT24iLCJybEljb24iLCJybFN0YXR1cyIsInJsRXhwbGFpbiIsImNvbnRJY29uIiwiY29udFN0YXR1cyIsImNvbnRFeHBsYWluIiwidmVyaWZ5SWNvbiIsInZlcmlmeVN0YXR1cyIsInZlcmlmeUV4cGxhaW4iLCJhcHBySWNvbiIsImFwcHJTdGF0dXMiLCJhcHByRXhwbGFpbiIsInRoaW5raW5nSXNEZWVwIiwidGhpbmtJY29uIiwidGhpbmtTdGF0dXMiLCJ0aGlua0V4cGxhaW4iLCJkZWJ1Z0FjdGl2ZSIsImRlYnVnSWNvbiIsImRlYnVnU3RhdHVzIiwiZGVidWdFeHBsYWluIiwid3JhcFNlZ21lbnRzIiwic3RhdHVzTGluZXMiLCJidWlsZFN0YXR1c0Jsb2NrIiwibWV0YUxpbmVzIiwiYnVpbGRNZXRhQmxvY2siLCJhYmJyZXZpYXRlUGF0aCIsInBhdGhWYWx1ZSIsImhvbWUiLCJob21lZGlyIiwic3RhdHVzTGFiZWwiLCJjb21wb3NlU3RhdHVzTGFiZWwiLCJhcHBseVRvbmUiLCJ0b25lIiwic2Vzc2lvblRpbWUiLCJ1cGRhdGUiLCJwcm9maWxlIiwiZm9ybWF0TWV0YVNlZ21lbnQiLCJ3b3Jrc3BhY2UiLCJkaXJlY3RvcnkiLCJ3cml0ZXMiLCJ0b29sU3VtbWFyeSIsInNlc3Npb25MYWJlbCIsInZlcnNpb24iLCJzdGF0dXNlcyIsImFyciIsImNvbG9yaXplciIsImJ1aWxkQ29udHJvbExpbmVzIiwiYnVpbGRUb2dnbGVMaW5lIiwic2hvcnRjdXRMaW5lIiwiYnVpbGRTaG9ydGN1dExpbmUiLCJidWlsZENvbXBhY3RUb2dnbGVMaW5lIiwiZWRpdEljb24iLCJlZGl0U3RhdGUiLCJjeWNsZUhpbnQiLCJhZGRUb2dnbGUiLCJob3RrZXkiLCJhdXRvVmVyaWZ5QWN0aXZlIiwidmVyaWZ5VmFsdWUiLCJhcHByb3ZhbEFjdGl2ZSIsInRoaW5raW5nTGFiZWxSYXciLCJ0aGlua2luZ0FjdGl2ZSIsImR1YWxSbEFjdGl2ZSIsIm1vZGVWYWx1ZSIsImJ1aWxkTGluZSIsImluY2x1ZGVIb3RrZXlzIiwidG9nZ2xlIiwic3RhdGVUZXh0IiwiaG90a2V5VGV4dCIsImFkZEhvdGtleSIsInByb21wdFdpZHRoIiwiY29udGludWF0aW9uSW5kZW50IiwiY29udGludWF0aW9uV2lkdGgiLCJyYXdCdWZmZXIiLCJidWZmZXJMaW5lcyIsInRvdGFsQ2hhcnMiLCJjdXJzb3JMaW5lIiwiY3Vyc29yQ29sIiwiZm91bmRDdXJzb3IiLCJsaW5lSW5kZXgiLCJpc0ZpcnN0TG9naWNhbExpbmUiLCJsaW5lU3RhcnRDaGFyIiwiZmlyc3RMaW5lV2lkdGgiLCJjb250TGluZVdpZHRoIiwiaXNGaXJzdERpc3BsYXlMaW5lIiwiZGlzcGxheUxpbmUiLCJjaHVua1N0YXJ0IiwiY2h1bmtFbmQiLCJvZmZzZXRJbkNodW5rIiwibGFzdExpbmUiLCJ0YXJnZXRMaW5lIiwidmlzaWJsZVBhcnQiLCJjdXJzb3JQb3MiLCJiZWZvcmUiLCJjaGFyQXQiLCJhZnRlciIsInRleHRQYXJ0IiwiYnVpbGRJbnB1dFdpbmRvdyIsImF2YWlsYWJsZSIsImN1cnNvckluZGV4Iiwib2Zmc2V0IiwibWF4T2Zmc2V0Iiwid2luZG93IiwiZGlzcGxheSIsImNoYXIiLCJjdXJzb3JJbldpbmRvdyIsImNhcHR1cmVJbnB1dCIsIlByb21pc2UiLCJyZWplY3QiLCJyZXNldEJ1ZmZlciIsInJlYXNvbiIsImNhcHR1cmUiLCJsaW1pdCIsInZpc2libGUiLCJ0b2tlbiIsInNsaWNlTGVuZ3RoIiwiZ2V0QnVmZmVyIiwiZ2V0Q3Vyc29yIiwic2V0QnVmZmVyIiwicmVxdWVzdGVkQ3Vyc29yIiwic2V0U2VjcmV0TW9kZSIsImVuYWJsZWQiLCJzZXRNb2RlU3RhdHVzIiwic2hvd0NvbXBhY3RpbmdTdGF0dXMiLCJoaWRlQ29tcGFjdGluZ1N0YXR1cyIsImVtaXRQcm9tcHQiLCJwdXNoUHJvbXB0RXZlbnQiLCJtcyIsImRhdGEiLCJjb2x1bW5zIiwiZXhwb3J0cyJdLCJzb3VyY2VzIjpbIlVuaWZpZWRVSVJlbmRlcmVyLnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogVW5pZmllZFVJUmVuZGVyZXIgLSBDbGF1ZGUgQ29kZSBzdHlsZSBtaW5pbWFsaXN0IHRlcm1pbmFsIFVJLlxuICpcbiAqIEdvYWxzOlxuICogLSBTaW5nbGUgZXZlbnQgcGlwZWxpbmUgZm9yIGV2ZXJ5dGhpbmcgKHByb21wdCDihpIgdGhvdWdodCDihpIgdG9vbC9idWlsZC90ZXN0IOKGkiByZXNwb25zZSkuXG4gKiAtIFBpbm5lZCBzdGF0dXMvbWV0YSBvbmx5IChuZXZlciBpbiBzY3JvbGxiYWNrKS5cbiAqIC0gU2Nyb2xsYmFjayBvbmx5IHNob3dzIGV2ZW50czsgbm8gZHVwbGljYXRlIHN0YXR1cyBsaWtlIFwiV29ya2luZyBvbiB5b3VyIHJlcXVlc3RcIiBvciBcIlJlYWR5IGZvciBwcm9tcHRzXCIuXG4gKiAtIFN0cmVhbWluZzogZmlyc3QgY2h1bmsgc2V0cyBhIG9uZS1saW5lIGJhbm5lcjsgcmVtYWluZGVyIHN0cmVhbXMgbmF0dXJhbGx5IChvcHRpb25hbCkuXG4gKiAtIENvbGxhcHNpYmxlLWxpa2Ugc3VtbWFyaWVzOiB3ZSBmb3JtYXQgYSBjb21wYWN0IGhlYWRpbmcgd2l0aCBhbiBlbGxpcHNpcyBpbmRpY2F0b3IsIGJ1dCBhdm9pZCBjdHJsK28gaGludHMuXG4gKi9cblxuaW1wb3J0ICogYXMgcmVhZGxpbmUgZnJvbSAnbm9kZTpyZWFkbGluZSc7XG5pbXBvcnQgeyBFdmVudEVtaXR0ZXIgfSBmcm9tICdub2RlOmV2ZW50cyc7XG5pbXBvcnQgeyBob21lZGlyIH0gZnJvbSAnbm9kZTpvcyc7XG5pbXBvcnQgeyB0aGVtZSwgc3Bpbm5lckZyYW1lcyB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHsgbG9nRGVidWcgfSBmcm9tICcuLi91dGlscy9kZWJ1Z0xvZ2dlci5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZFN1Z2dlc3Rpb24ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xufVxuXG50eXBlIENhbm9uaWNhbEV2ZW50VHlwZSA9ICdwcm9tcHQnIHwgJ3Rob3VnaHQnIHwgJ3N0cmVhbScgfCAndG9vbCcgfCAndG9vbC1yZXN1bHQnIHwgJ2J1aWxkJyB8ICd0ZXN0JyB8ICdyZXNwb25zZSc7XG5cbmV4cG9ydCB0eXBlIFJlbmRlcmVyRXZlbnRUeXBlID1cbiAgfCBDYW5vbmljYWxFdmVudFR5cGVcbiAgfCAncmF3J1xuICB8ICdiYW5uZXInXG4gIHwgJ2Vycm9yJ1xuICB8ICdzdHJlYW1pbmcnXG4gIHwgJ3Rvb2wtY2FsbCdcbiAgfCAndG9vbC1yZXN1bHQnO1xuXG50eXBlIFVJRXZlbnQgPSB7XG4gIHR5cGU6IENhbm9uaWNhbEV2ZW50VHlwZTtcbiAgcmF3VHlwZTogUmVuZGVyZXJFdmVudFR5cGU7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ29tcGFjdGVkPzogYm9vbGVhbjsgLy8gQ2xhdWRlIENvZGUgc3R5bGUgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2tcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zIHtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG50eXBlIElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgY3Vyc29yOiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgTW9kZVRvZ2dsZVN0YXRlIHtcbiAgdmVyaWZpY2F0aW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgdmVyaWZpY2F0aW9uSG90a2V5Pzogc3RyaW5nO1xuICBhdXRvQ29udGludWVFbmFibGVkPzogYm9vbGVhbjtcbiAgYXV0b0NvbnRpbnVlSG90a2V5Pzogc3RyaW5nO1xuICB0aGlua2luZ01vZGVMYWJlbD86IHN0cmluZyB8IG51bGw7XG4gIHRoaW5raW5nSG90a2V5Pzogc3RyaW5nO1xuICBjcml0aWNhbEFwcHJvdmFsTW9kZT86ICdhdXRvJyB8ICdhcHByb3ZhbCc7XG4gIGNyaXRpY2FsQXBwcm92YWxIb3RrZXk/OiBzdHJpbmc7XG4gIGR1YWxSbEVuYWJsZWQ/OiBib29sZWFuO1xuICBkdWFsUmxIb3RrZXk/OiBzdHJpbmc7XG4gIGRlYnVnRW5hYmxlZD86IGJvb2xlYW47XG4gIGRlYnVnSG90a2V5Pzogc3RyaW5nO1xufVxuXG5jb25zdCBFU0MgPSB7XG4gIEhJREVfQ1VSU09SOiAnXFx4MWJbPzI1bCcsXG4gIFNIT1dfQ1VSU09SOiAnXFx4MWJbPzI1aCcsXG4gIENMRUFSX1NDUkVFTjogJ1xceDFiWzJKJyxcbiAgQ0xFQVJfTElORTogJ1xceDFiWzJLJyxcbiAgSE9NRTogJ1xceDFiW0gnLFxuICBFTkFCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRoJyxcbiAgRElTQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGwnLFxuICBUTzogKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7cm93fTske2NvbH1IYCxcbiAgVE9fQ09MOiAoY29sOiBudW1iZXIpID0+IGBcXHgxYlske2NvbH1HYCxcbiAgRVJBU0VfRE9XTjogJ1xceDFiW0onLFxuICBSRVZFUlNFOiAnXFx4MWJbN20nLFxuICBSRVNFVDogJ1xceDFiWzBtJyxcbiAgLy8gU2Nyb2xsIHJlZ2lvbiBjb250cm9sIC0gQ1JJVElDQUwgZm9yIGZpeGVkIGJvdHRvbSBvdmVybGF5XG4gIFNFVF9TQ1JPTExfUkVHSU9OOiAodG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyKSA9PiBgXFx4MWJbJHt0b3B9OyR7Ym90dG9tfXJgLFxuICBSRVNFVF9TQ1JPTExfUkVHSU9OOiAnXFx4MWJbcicsXG4gIFNBVkVfQ1VSU09SOiAnXFx4MWJbcycsXG4gIFJFU1RPUkVfQ1VSU09SOiAnXFx4MWJbdScsXG59IGFzIGNvbnN0O1xuXG5jb25zdCBORVdMSU5FX1BMQUNFSE9MREVSID0gJ+KGtSc7XG5cbmV4cG9ydCBjbGFzcyBVbmlmaWVkVUlSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IHJsOiByZWFkbGluZS5JbnRlcmZhY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5Nb2RlOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IGludGVyYWN0aXZlOiBib29sZWFuO1xuXG4gIHByaXZhdGUgcm93cyA9IDI0O1xuICBwcml2YXRlIGNvbHMgPSA4MDtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyV2lkdGg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgZXZlbnRRdWV1ZTogVUlFdmVudFtdID0gW107XG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcblxuICBwcml2YXRlIGJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIGN1cnNvciA9IDA7XG4gIHByaXZhdGUgaGlzdG9yeTogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoaXN0b3J5SW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uczogeyBjb21tYW5kOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IGNhdGVnb3J5Pzogc3RyaW5nIH1bXSA9IFtdO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICBwcml2YXRlIGF2YWlsYWJsZUNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICBwcml2YXRlIGhvdGtleXNJblRvZ2dsZUxpbmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGNvbGxhcHNlZFBhc3RlOiB7IHRleHQ6IHN0cmluZzsgbGluZXM6IG51bWJlcjsgY2hhcnM6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyA9ICdpZGxlJztcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTdGFydFRpbWU6IG51bWJlciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c01lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c092ZXJyaWRlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNTdHJlYW1pbmc6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuXG4gIC8vIEFuaW1hdGVkIFVJIGNvbXBvbmVudHNcbiAgcHJpdmF0ZSBzdHJlYW1pbmdTcGlubmVyOiBBbmltYXRlZFNwaW5uZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSB0aGlua2luZ0luZGljYXRvcjogVGhpbmtpbmdJbmRpY2F0b3IgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBjb250ZXh0TWV0ZXI6IENvbnRleHRNZXRlcjtcbiAgcHJpdmF0ZSBzcGlubmVyRnJhbWUgPSAwO1xuICBwcml2YXRlIHNwaW5uZXJJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhJbmxpbmVQYW5lbExpbmVzID0gMTI7XG5cbiAgLy8gQ29tcGFjdGluZyBzdGF0dXMgYW5pbWF0aW9uXG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UgPSAnJztcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzRnJhbWUgPSAwO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNJbnRlcnZhbDogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyA9IFsn4py7JywgJ+KcvCcsICfinLsnLCAn4py6J107XG5cbiAgLy8gQW5pbWF0ZWQgYWN0aXZpdHkgbGluZSAoZS5nLiwgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIilcbiAgcHJpdmF0ZSBhY3Rpdml0eU1lc3NhZ2U6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFjdGl2aXR5UGhyYXNlSW5kZXggPSAwO1xuICBwcml2YXRlIGFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBhY3Rpdml0eVN0YXJGcmFtZXMgPSBbJ+KcsycsICfinLQnLCAn4py1JywgJ+KcticsICfinLcnLCAn4py4J107XG4gIC8vIFRva2VuIGNvdW50IGR1cmluZyBzdHJlYW1pbmdcbiAgcHJpdmF0ZSBzdHJlYW1pbmdUb2tlbnMgPSAwO1xuICAvLyBVc2VyLWZyaWVuZGx5IGFjdGl2aXR5IHBocmFzZXMgKGNsZWFuLCBwcm9mZXNzaW9uYWwpXG4gIHByaXZhdGUgcmVhZG9ubHkgZnVuQWN0aXZpdHlQaHJhc2VzID0gW1xuICAgICdUaGlua2luZycsICdQcm9jZXNzaW5nJywgJ0FuYWx5emluZycsICdXb3JraW5nJywgJ1ByZXBhcmluZycsXG4gIF07XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzID0gODtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMgPSAxODAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHRob3VnaHREZWR1cFdpbmRvd01zID0gMTUwMDA7XG4gIHByaXZhdGUgbGFzdEN1cmF0ZWRUaG91Z2h0OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBzdGF0dXNNZXRhOiB7XG4gICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgcHJvZmlsZT86IHN0cmluZztcbiAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgIHdyaXRlcz86IHN0cmluZztcbiAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgdmVyc2lvbj86IHN0cmluZztcbiAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgfSA9IHt9O1xuICBwcml2YXRlIHRvZ2dsZVN0YXRlOiBNb2RlVG9nZ2xlU3RhdGUgPSB7XG4gICAgdmVyaWZpY2F0aW9uRW5hYmxlZDogZmFsc2UsXG4gICAgYXV0b0NvbnRpbnVlRW5hYmxlZDogZmFsc2UsXG4gICAgY3JpdGljYWxBcHByb3ZhbE1vZGU6ICdhdXRvJyxcbiAgICBkdWFsUmxFbmFibGVkOiBmYWxzZSxcbiAgICBkZWJ1Z0VuYWJsZWQ6IGZhbHNlLFxuICB9O1xuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIC8qKiBFbnN1cmUgY3Vyc29yIGlzIGFsd2F5cyB3aXRoaW4gdmFsaWQgYm91bmRzIGZvciB0aGUgY3VycmVudCBidWZmZXIgKi9cbiAgcHJpdmF0ZSBjbGFtcEN1cnNvcigpOiB2b2lkIHtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuY3Vyc29yLCB0aGlzLmJ1ZmZlci5sZW5ndGgpKTtcbiAgfVxuXG4gIC8qKiBTYWZlbHkgYXBwZW5kIHRvIHBhc3RlIGJ1ZmZlciB3aXRoIHNpemUgbGltaXQgZW5mb3JjZW1lbnQgKi9cbiAgcHJpdmF0ZSBhcHBlbmRUb1Bhc3RlQnVmZmVyKGJ1ZmZlcjogJ3Bhc3RlJyB8ICdwbGFpblBhc3RlJywgdGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdykgcmV0dXJuOyAvLyBBbHJlYWR5IGF0IGxpbWl0XG4gICAgY29uc3QgY3VycmVudCA9IGJ1ZmZlciA9PT0gJ3Bhc3RlJyA/IHRoaXMucGFzdGVCdWZmZXIgOiB0aGlzLnBsYWluUGFzdGVCdWZmZXI7XG4gICAgY29uc3QgcmVtYWluaW5nID0gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUgLSBjdXJyZW50Lmxlbmd0aDtcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHRvQWRkID0gdGV4dC5sZW5ndGggPD0gcmVtYWluaW5nID8gdGV4dCA6IHRleHQuc2xpY2UoMCwgcmVtYWluaW5nKTtcbiAgICBpZiAoYnVmZmVyID09PSAncGFzdGUnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyICs9IHRvQWRkO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfVxuICAgIGlmICh0b0FkZC5sZW5ndGggPCB0ZXh0Lmxlbmd0aCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICAvKiogU3RyaXAgQU5TSSBlc2NhcGUgc2VxdWVuY2VzIGZyb20gdGV4dCB0byBwcmV2ZW50IGluamVjdGlvbiAqL1xuICBwcml2YXRlIHNhbml0aXplUGFzdGVDb250ZW50KHRleHQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUmVtb3ZlIGFsbCBBTlNJIGVzY2FwZSBzZXF1ZW5jZXMgKENTSSwgT1NDLCBldGMuKVxuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgcmV0dXJuIHRleHQucmVwbGFjZSgvXFx4MWJcXFtbMC05O10qW0EtWmEtel18XFx4MWJcXF1bXlxceDA3XSpcXHgwN3xcXHgxYltQWF5fXVteXFx4MWJdKlxceDFiXFxcXHxcXHgxYi4vZywgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRIb3RrZXkoY29tYm8/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWNvbWJvPy50cmltKCkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBjb21iby50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgbGFzdFByb21wdEV2ZW50OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBwcm9tcHRIZWlnaHQgPSAwO1xuICBwcml2YXRlIGxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgcHJpdmF0ZSBpbmxpbmVQYW5lbDogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoYXNDb252ZXJzYXRpb25Db250ZW50ID0gZmFsc2U7XG4gIHByaXZhdGUgaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZUlkbGVNcyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVXaW5kb3dNcyA9IDYwO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVUcmlnZ2VyQ2hhcnMgPSAyNDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnMgPSAyOyAvLyBHdWFyZCBmb3Igc2hvcnQgZmlyc3QgbGluZXMgaW4gcGxhaW4gcGFzdGUgbW9kZVxuICAvLyBQYXN0ZSBidWZmZXIgbGltaXRzIHRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb25cbiAgcHJpdmF0ZSByZWFkb25seSBtYXhQYXN0ZUJ1ZmZlclNpemUgPSAxMCAqIDEwMjQgKiAxMDI0OyAvLyAxME1CIG1heCBwYXN0ZSBzaXplXG4gIHByaXZhdGUgcGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBUcmFjayBpZiBwYXN0ZSB3YXMgdHJ1bmNhdGVkXG4gIHByaXZhdGUgY3Vyc29yVmlzaWJsZUNvbHVtbiA9IDE7XG4gIHByaXZhdGUgaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICBwcml2YXRlIHBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBsYWluUGFzdGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICBwcml2YXRlIHBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICBwcml2YXRlIHBsYWluUmVjZW50Q2h1bmtzOiBBcnJheTx7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9PiA9IFtdO1xuICAvLyBQZW5kaW5nIGluc2VydCBidWZmZXI6IGhvbGRzIGNoYXJhY3RlcnMgZHVyaW5nIHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gcHJldmVudCB2aXN1YWwgbGVha1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBwZW5kaW5nSW5zZXJ0VGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGVuZGluZ0luc2VydERlbGF5TXMgPSA4MDsgLy8gV2FpdCBiZWZvcmUgY29tbWl0dGluZyBjaGFycyBhcyBub3JtYWwgaW5wdXRcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRFdmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICBwcml2YXRlIGhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gIHByaXZhdGUgaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IGZhbHNlOyAgLy8gVHJhY2sgaWYgd2UndmUgZXZlciByZW5kZXJlZCBmb3IgaW5saW5lIGNsZWFyaW5nXG4gIHByaXZhdGUgbGFzdE92ZXJsYXk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gIHByaXZhdGUgcHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gIHByaXZhdGUgc2VjcmV0TW9kZSA9IGZhbHNlO1xuICAvLyBSZW5kZXIgdGhyb3R0bGluZyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICBwcml2YXRlIHBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyVGltZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyVGhyb3R0bGVNcyA9IDE2OyAvLyB+NjBmcHMgbWF4XG4gIHByaXZhdGUgcmVuZGVyVGhyb3R0bGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgLy8gRGlzcG9zYWwgc3RhdGUgdG8gcHJldmVudCBvcGVyYXRpb25zIGFmdGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBkaXNwb3NlZCA9IGZhbHNlO1xuICAvLyBCb3VuZCBldmVudCBoYW5kbGVycyBmb3IgcHJvcGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBib3VuZFJlc2l6ZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kS2V5cHJlc3NIYW5kbGVyOiAoKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dENhcHR1cmU6XG4gICAgfCB7XG4gICAgICAgIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgICByZWplY3Q/OiAocmVhc29uPzogdW5rbm93bikgPT4gdm9pZDtcbiAgICAgICAgb3B0aW9uczogeyB0cmltOiBib29sZWFuOyBhbGxvd0VtcHR5OiBib29sZWFuIH07XG4gICAgICB9XG4gICAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbSA9IHByb2Nlc3Muc3Rkb3V0LFxuICAgIGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbSA9IHByb2Nlc3Muc3RkaW4sXG4gICAgX29wdGlvbnM/OiBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5pbnRlcmFjdGl2ZSA9IEJvb2xlYW4odGhpcy5vdXRwdXQuaXNUVFkgJiYgdGhpcy5pbnB1dC5pc1RUWSAmJiAhcHJvY2Vzcy5lbnZbJ0NJJ10pO1xuICAgIHRoaXMucGxhaW5Nb2RlID0gaXNQbGFpbk91dHB1dE1vZGUoKSB8fCAhdGhpcy5pbnRlcmFjdGl2ZTtcblxuICAgIC8vIEluaXRpYWxpemUgYW5pbWF0ZWQgY29tcG9uZW50c1xuICAgIHRoaXMuY29udGV4dE1ldGVyID0gbmV3IENvbnRleHRNZXRlcigpO1xuXG4gICAgdGhpcy5ybCA9IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gICAgICBpbnB1dDogdGhpcy5pbnB1dCxcbiAgICAgIG91dHB1dDogdGhpcy5vdXRwdXQsXG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIHByb21wdDogJycsXG4gICAgICB0YWJTaXplOiAyLFxuICAgIH0pO1xuICAgIHRoaXMucmwuc2V0UHJvbXB0KCcnKTtcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXJzIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm91dHB1dC5vbigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuXG4gICAgdGhpcy5zZXR1cElucHV0SGFuZGxlcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gSWYgYW4gb3ZlcmxheSB3YXMgYWxyZWFkeSByZW5kZXJlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gKGUuZy4sIGJhbm5lciBlbWl0dGVkIGVhcmx5KSxcbiAgICAgIC8vIGNsZWFyIGl0IHNvIGluaXRpYWxpemUoKSBkb2Vzbid0IHN0YWNrIGEgc2Vjb25kIGNvbnRyb2wgYmFyIGluIHNjcm9sbGJhY2suXG4gICAgICBpZiAodGhpcy5oYXNSZW5kZXJlZFByb21wdCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQbGFpbiBtb2RlOiBtaW5pbWFsIHNldHVwLCBzdGlsbCByZW5kZXIgYSBzaW1wbGUgcHJvbXB0IGxpbmVcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkIGZpcnN0IHRvIHByZXZlbnQgYW55IHBlbmRpbmcgb3BlcmF0aW9uc1xuICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdSZW5kZXJlciBkaXNwb3NlZCcpKTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG5cbiAgICAvLyBDbGVhciByZW5kZXIgdGhyb3R0bGUgdGltZXJcbiAgICBpZiAodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKTtcbiAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU3RvcCBhbnkgcnVubmluZyBhbmltYXRpb25zXG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RyZWFtaW5nU3Bpbm5lcikge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnRoaW5raW5nSW5kaWNhdG9yKSB7XG4gICAgICB0aGlzLnRoaW5raW5nSW5kaWNhdG9yLnN0b3AoKTtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3IgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHRNZXRlci5kaXNwb3NlKCk7XG4gICAgZGlzcG9zZUFuaW1hdGlvbnMoKTtcblxuICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICBpZiAodGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMub3V0cHV0LnJlbW92ZUxpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKSB7XG4gICAgICB0aGlzLmlucHV0LnJlbW92ZUxpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBFdmVudEVtaXR0ZXIgbGlzdGVuZXJzIGZyb20gdGhpcyBpbnN0YW5jZVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgc28gaXQgZG9lc24ndCByZW1haW4gaW4gc2Nyb2xsYmFjayBoaXN0b3J5XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgdGhpcy53cml0ZShFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUoZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IG51bGw7XG5cbiAgICAvLyBDbGVhciBldmVudCBxdWV1ZVxuICAgIHRoaXMuZXZlbnRRdWV1ZSA9IFtdO1xuICB9XG5cbiAgc3VzcGVuZFByb21wdFJlbmRlcmluZygpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IHRydWU7XG4gIH1cblxuICByZXN1bWVQcm9tcHRSZW5kZXJpbmcocmVuZGVyOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IGZhbHNlO1xuICAgIGlmIChyZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIElucHV0IGhhbmRsaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgc2V0dXBJbnB1dEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJsLnJlbW92ZUFsbExpc3RlbmVycygnbGluZScpO1xuICAgIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyh0aGlzLmlucHV0LCB0aGlzLnJsKTtcbiAgICBpZiAodGhpcy5pbnB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5pbnB1dC5zZXRSYXdNb2RlKHRydWUpO1xuICAgIH1cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5cHJlc3Moc3RyLCBrZXkpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5pbnB1dC5vbigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgZW1pdElucHV0Q2hhbmdlKCk6IHZvaWQge1xuICAgIGNvbnN0IHBheWxvYWQ6IElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gICAgICB0ZXh0OiB0aGlzLmJ1ZmZlcixcbiAgICAgIGN1cnNvcjogdGhpcy5jdXJzb3IsXG4gICAgfTtcbiAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIHBheWxvYWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlwcmVzcyhzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiB2b2lkIHtcbiAgICAvLyBOb3JtYWxpemUgbWlzc2luZyBrZXkgbWV0YWRhdGEgKGNvbW1vbiBmb3Igc29tZSB0ZXJtaW5hbHMgZW1pdHRpbmcgcmF3IGVzY2FwZSBjb2RlcylcbiAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5ID8/IHRoaXMucGFyc2VFc2NhcGVTZXF1ZW5jZShzdHIpO1xuICAgIGNvbnN0IGtleUZvclBhc3RlID0gbm9ybWFsaXplZEtleSA/PyAoc3RyID8geyBzZXF1ZW5jZTogc3RyIH0gYXMgcmVhZGxpbmUuS2V5IDoga2V5KTtcblxuICAgIGlmICh0aGlzLmhhbmRsZUJyYWNrZXRlZFBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFuZGxlUGxhaW5QYXN0ZShzdHIsIGtleUZvclBhc3RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghbm9ybWFsaXplZEtleSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSAmJiBub3JtYWxpemVkS2V5LmN0cmwgJiYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2MnIHx8IG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2QnKSkge1xuICAgICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdJbnB1dCBjYXB0dXJlIGNhbmNlbGxlZCcpKTtcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBtYWNPUyBPcHRpb24ra2V5IHByb2R1Y2VzIFVuaWNvZGUgY2hhcmFjdGVycywgZGV0ZWN0IHRoZW0gZGlyZWN0bHk6XG4gICAgLy8gT3B0aW9uK0cgPSDCqSAoY29weXJpZ2h0KSwgT3B0aW9uK0EgPSDDpSwgT3B0aW9uK1YgPSDiiJosIE9wdGlvbitEID0g4oiCXG4gICAgY29uc3QgbWFjT3B0aW9uQ2hhcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7XG4gICAgICAnwqknOiAnZycsICAvLyBPcHRpb24rR1xuICAgICAgJ8OlJzogJ2EnLCAgLy8gT3B0aW9uK0FcbiAgICAgICfiiJonOiAndicsICAvLyBPcHRpb24rVlxuICAgICAgJ+KIgic6ICdkJywgIC8vIE9wdGlvbitEXG4gICAgfTtcblxuICAgIGlmIChzdHIgJiYgbWFjT3B0aW9uQ2hhcnNbc3RyXSkge1xuICAgICAgY29uc3QgbGV0dGVyID0gbWFjT3B0aW9uQ2hhcnNbc3RyXTtcbiAgICAgIGlmIChsZXR0ZXIgPT09ICdhJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobGV0dGVyID09PSAnZycpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobGV0dGVyID09PSAnZCcpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAobGV0dGVyID09PSAndicpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdmVyaWZ5Jyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBEZXRlY3QgQ3RybCtTaGlmdCBjb21iaW5hdGlvbnMgKGZhbGxiYWNrIGZvciBub24tbWFjT1Mgb3IgY29uZmlndXJlZCB0ZXJtaW5hbHMpXG4gICAgY29uc3QgaXNDdHJsU2hpZnQgPSAobGV0dGVyOiBzdHJpbmcpOiBib29sZWFuID0+IHtcbiAgICAgIGNvbnN0IGxvd2VyTGV0dGVyID0gbGV0dGVyLnRvTG93ZXJDYXNlKCk7XG4gICAgICBjb25zdCB1cHBlckxldHRlciA9IGxldHRlci50b1VwcGVyQ2FzZSgpO1xuXG4gICAgICAvLyBQYXR0ZXJuIDE6IFN0YW5kYXJkIHJlYWRsaW5lIHNoaWZ0IGZsYWcgKyBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkuc2hpZnQgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAyOiBTb21lIHRlcm1pbmFscyBzZW5kIHVwcGVyY2FzZSBuYW1lIHdpdGggY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09IHVwcGVyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDM6IE1ldGEvQWx0ICsgbGV0dGVyIChpVGVybTIgd2l0aCBcIk9wdGlvbiBzZW5kcyBNZXRhXCIpXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5tZXRhICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNDogUmF3IGVzY2FwZSBzZXF1ZW5jZSBjaGVjayBmb3IgeHRlcm0tc3R5bGUgbW9kaWZpZXJzXG4gICAgICBjb25zdCBzZXEgPSBzdHIgfHwgbm9ybWFsaXplZEtleS5zZXF1ZW5jZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoc2VxICYmIC9eXFx4MWJcXFtbMC05XSs7Nlt+QS1aXT8kLy50ZXN0KHNlcSkpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gNTogRVNDICsgbGV0dGVyIChPcHRpb24gc2VuZHMgRVNDIHByZWZpeCBpbiBzb21lIGNvbmZpZ3MpXG4gICAgICBpZiAoc2VxICYmIHNlcSA9PT0gYFxceDFiJHtsb3dlckxldHRlcn1gKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfTtcblxuICAgIGlmIChpc0N0cmxTaGlmdCgnYScpKSB7XG4gICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZycpKSB7XG4gICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdkJykpIHtcbiAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWR1YWwtcmwnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ3YnKSkge1xuICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdmVyaWZ5Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09ICdyJykge1xuICAgICAgdGhpcy5lbWl0KCdyZXN1bWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2MnKSB7XG4gICAgICAvLyBDdHJsK0MgYmVoYXZpb3I6XG4gICAgICAvLyAxLiBJZiBidWZmZXIgaGFzIHRleHQ6IGNsZWFyIGl0IGZpcnN0LCB0aGVuIG5vdGlmeSBzaGVsbFxuICAgICAgLy8gMi4gSWYgYnVmZmVyIGlzIGVtcHR5OiBsZXQgc2hlbGwgZGVjaWRlIHRvIHBhdXNlIEFJIG9yIHF1aXRcbiAgICAgIC8vXG4gICAgICAvLyBUaGUgSW50ZXJhY3RpdmVTaGVsbCBtYWludGFpbnMgYSBjb3VudGVyIHRvIHRyYWNrIEN0cmwrQyBwcmVzc2VzIGFuZCBkZWNpZGVzXG4gICAgICAvLyB3aGV0aGVyIHRvIHBhdXNlIEFJIG9yIGV4aXQgYmFzZWQgb24gcHJvY2Vzc2luZyBzdGF0ZS5cblxuICAgICAgY29uc3QgaGFkQnVmZmVyID0gdGhpcy5idWZmZXIubGVuZ3RoID4gMDtcbiAgICAgIGlmIChoYWRCdWZmZXIpIHtcbiAgICAgICAgLy8gQ2xlYXIgdGhlIGlucHV0IGJ1ZmZlciBmaXJzdFxuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICAvLyBFbWl0IGN0cmxjIGV2ZW50IHdpdGggYnVmZmVyIHN0YXRlIHNvIHNoZWxsIGNhbiBoYW5kbGUgYXBwcm9wcmlhdGVseVxuICAgICAgdGhpcy5lbWl0KCdjdHJsYycsIHsgaGFkQnVmZmVyIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2QnKSB7XG4gICAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuZW1pdCgnaW50ZXJydXB0Jyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndScpIHtcbiAgICAgIHRoaXMuY2xlYXJCdWZmZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdsJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQ3RybCtPOiBFeHBhbmQgbGFzdCB0b29sIHJlc3VsdFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ28nKSB7XG4gICAgICB0aGlzLmVtaXQoJ2V4cGFuZC10b29sLXJlc3VsdCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkubmFtZSA9PT0gJ3JldHVybicgfHwga2V5Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIGV4cGFuZCBhbmQgc3VibWl0IGluIG9uZSBhY3Rpb25cbiAgICAgIC8vIE5vIG5lZWQgZm9yIGEgc2Vjb25kIEVudGVyIHByZXNzIC0gdXNlciBleHBlY3RzIHBhc3RlICsgRW50ZXIgdG8gc3VibWl0XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICBjb25zdCBwYXN0ZWRUZXh0ID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIC8vIFN1Ym1pdCB0aGUgcGFzdGVkIHRleHQgZGlyZWN0bHkgYW5kIGFkZCB0byBoaXN0b3J5XG4gICAgICAgIHRoaXMuZW1pdCgnc3VibWl0JywgcGFzdGVkVGV4dCk7XG4gICAgICAgIGlmIChwYXN0ZWRUZXh0LnRyaW0oKSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHBhc3RlZFRleHQudHJpbSgpKTtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIElmIGEgc2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uIGlzIGhpZ2hsaWdodGVkLCBwcmVzc2luZyBFbnRlciBzdWJtaXRzIGl0IGltbWVkaWF0ZWx5XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24odHJ1ZSkpIHJldHVybjtcbiAgICAgIC8vIEZhbGxiYWNrOiBpZiBidWZmZXIgc3RhcnRzIHdpdGggJy8nIGFuZCBzdWdnZXN0aW9ucyBleGlzdCwgdXNlIHRoZSBzZWxlY3RlZC9maXJzdCBvbmVcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdPy5jb21tYW5kID8/IHRoaXMuYnVmZmVyO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJtaXRUZXh0KHRoaXMuYnVmZmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvciAtIDEpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd1cCcpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoLTEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+IDApIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIGluZGV4IGlzIHdpdGhpbiBib3VuZHMgYmVmb3JlIGFjY2Vzc2luZ1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCAmJiB0aGlzLmhpc3RvcnlJbmRleCA8IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2Rvd24nKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTYWZldHk6IGludmFsaWQgc3RhdGUsIHJlc2V0XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3RhYicpIHtcbiAgICAgIGlmICh0aGlzLmFwcGx5U3VnZ2VzdGlvbihmYWxzZSkpIHJldHVybjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3RyICYmICFub3JtYWxpemVkS2V5LmN0cmwgJiYgIW5vcm1hbGl6ZWRLZXkubWV0YSkge1xuICAgICAgLy8gRGVmZXIgaW5zZXJ0aW9uIHRvIGFsbG93IHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gY2F0Y2ggcmFwaWQgaW5wdXRcbiAgICAgIHRoaXMucXVldWVQZW5kaW5nSW5zZXJ0KHN0cik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBob3Jpem9udGFsIGN1cnNvciBwb3NpdGlvbiBzdGF5cyB3aXRoaW4gdGhlIHZpc2libGUgaW5wdXQgd2luZG93LlxuICAgKiBQcmV2ZW50cyBqdW1wcyB3aGVuIHVzaW5nIGxlZnQvcmlnaHQgYXJyb3dzIG9uIGxvbmcgbGluZXMuXG4gICAqL1xuICBwcml2YXRlIGVuc3VyZUN1cnNvclZpc2libGUoKTogdm9pZCB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgxMCwgdGhpcy5zYWZlV2lkdGgoKSAtIDEyKTsgLy8gbWFyZ2luIGZvciBwcm9tcHQvdG9nZ2xlcyBhbmQgcGFkZGluZ1xuICAgIC8vIElmIGN1cnNvciBpcyBsZWZ0IG9mIGN1cnJlbnQgd2luZG93LCBzaGlmdCB3aW5kb3cgbGVmdFxuICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvcjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgY3Vyc29yIGlzIGJleW9uZCB2aXNpYmxlIHdpbmRvdywgc2hpZnQgd2luZG93IHJpZ2h0XG4gICAgaWYgKHRoaXMuY3Vyc29yIC0gdGhpcy5pbnB1dFJlbmRlck9mZnNldCA+PSBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yIC0gbWF4V2lkdGggKyAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSByYXcgZXNjYXBlIHNlcXVlbmNlcyB3aGVuIHJlYWRsaW5lIGRvZXNuJ3QgcG9wdWxhdGUga2V5IG1ldGFkYXRhLlxuICAgKiBQcmV2ZW50cyBjb250cm9sIGNvZGVzIChlLmcuLCBeW1syMDB+KSBmcm9tIGxlYWtpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVzY2FwZVNlcXVlbmNlKHNlcXVlbmNlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogcmVhZGxpbmUuS2V5IHwgbnVsbCB7XG4gICAgaWYgKCFzZXF1ZW5jZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCByZWFkbGluZS5LZXk+ID0ge1xuICAgICAgJ1xceDFiW0EnOiB7IG5hbWU6ICd1cCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0InOiB7IG5hbWU6ICdkb3duJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQyc6IHsgbmFtZTogJ3JpZ2h0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRCc6IHsgbmFtZTogJ2xlZnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltIJzogeyBuYW1lOiAnaG9tZScsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0YnOiB7IG5hbWU6ICdlbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDB+JzogeyBuYW1lOiAncGFzdGUtc3RhcnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDF+JzogeyBuYW1lOiAncGFzdGUtZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgfTtcbiAgICByZXR1cm4gbWFwW3NlcXVlbmNlXSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlIGNoYXJhY3RlcnMgZm9yIGRlZmVycmVkIGluc2VydGlvbi4gVGhpcyBwcmV2ZW50cyB2aXN1YWwgXCJsZWFrXCIgb2ZcbiAgICogcGFzdGVkIGNvbnRlbnQgYnkgaG9sZGluZyBjaGFyYWN0ZXJzIHVudGlsIHdlJ3JlIGNvbmZpZGVudCBpdCdzIG5vdCBhIHBhc3RlLlxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVBlbmRpbmdJbnNlcnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICs9IHRleHQ7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2NoZWR1bGUgY29tbWl0IGFmdGVyIGRlbGF5IC0gaWYgcGFzdGUgZGV0ZWN0aW9uIHRyaWdnZXJzIGZpcnN0LCBpdCB3aWxsIGNvbnN1bWUgdGhlIGJ1ZmZlclxuICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbW1pdFBlbmRpbmdJbnNlcnQoKTtcbiAgICB9LCB0aGlzLnBlbmRpbmdJbnNlcnREZWxheU1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgcGVuZGluZyBjaGFyYWN0ZXJzIGFzIG5vcm1hbCBpbnB1dCAobm90IGEgcGFzdGUpLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRQZW5kaW5nSW5zZXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICYmICF0aGlzLmluUGxhaW5QYXN0ZSAmJiAhdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICB0aGlzLmluc2VydFRleHQodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgaW50byBwYXN0ZSBkZXRlY3Rpb24gKHByZXZlbnRzIHZpc3VhbCBsZWFrKS5cbiAgICovXG4gIHByaXZhdGUgY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZWQgPSB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXI7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgcmV0dXJuIGNvbnN1bWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgfHwgc3RyO1xuICAgIGlmIChzZXF1ZW5jZSA9PT0gRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUgfHwgc2VxdWVuY2UgPT09IEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChzZXF1ZW5jZSA9PT0gJ1xceDFiWzIwMH4nKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHRvIHByZXZlbnQgbGVha1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmc7IC8vIEluY2x1ZGUgYW55IGNoYXJzIHRoYXQgYXJyaXZlZCBiZWZvcmUgYnJhY2tldGVkIHBhc3RlIHN0YXJ0ZWRcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc2VxdWVuY2UgPT09ICdcXHgxYlsyMDF+Jykge1xuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleT8ubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsICdcXG4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHRoaXMucGFzdGVCdWZmZXIuc2xpY2UoMCwgLTEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHN0cik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXF1ZW5jZSA9PT0gJ3N0cmluZycgJiYgc2VxdWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHNlcXVlbmNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY29tbWl0UGFzdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHJldHVybjtcbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wYXN0ZUJ1ZmZlcik7XG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSwgLy8gSW5kaWNhdGUgdHJ1bmNhdGlvblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUGxhaW5QYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICAvLyBGYWxsYmFjayBwYXN0ZSBjYXB0dXJlIHdoZW4gYnJhY2tldGVkIHBhc3RlIGlzbid0IHN1cHBvcnRlZFxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwga2V5Py5jdHJsIHx8IGtleT8ubWV0YSkge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlID8/ICcnO1xuICAgIGNvbnN0IGNodW5rID0gdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDAgPyBzdHIgOiBzZXF1ZW5jZTtcbiAgICBpZiAoIWNodW5rKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMudHJhY2tQbGFpblBhc3RlQnVyc3QoY2h1bmsubGVuZ3RoLCBub3cpO1xuXG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5yZWNvcmRSZWNlbnRQbGFpbkNodW5rKGNodW5rLCBub3cpO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rTXVsdGlwbGUgPSBjaHVuay5sZW5ndGggPiAxO1xuICAgIGNvbnN0IGhhc05ld2xpbmUgPSAvW1xcclxcbl0vLnRlc3QoY2h1bmspO1xuICAgIGNvbnN0IGJ1cnN0QWN0aXZlID0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiAwICYmIG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IDw9IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIGNvbnN0IGJ1cnN0VHJpZ2dlciA9IGJ1cnN0QWN0aXZlICYmIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVUcmlnZ2VyQ2hhcnM7XG4gICAgY29uc3QgaGFzUmVjZW50Tm9uTmV3bGluZSA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3Muc29tZShlbnRyeSA9PiAhL15bXFxyXFxuXSskLy50ZXN0KGVudHJ5LnRleHQpKTtcbiAgICBjb25zdCBlYXJseU5ld2xpbmVUcmlnZ2VyID1cbiAgICAgIGhhc05ld2xpbmUgJiZcbiAgICAgIGJ1cnN0QWN0aXZlICYmXG4gICAgICBoYXNSZWNlbnROb25OZXdsaW5lICYmXG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnM7XG4gICAgY29uc3QgbmV3bGluZVRyaWdnZXIgPSBoYXNOZXdsaW5lICYmICh0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBlYXJseU5ld2xpbmVUcmlnZ2VyKTtcbiAgICBjb25zdCBsb29rc0xpa2VQYXN0ZSA9IHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IG5ld2xpbmVUcmlnZ2VyO1xuXG4gICAgaWYgKCFsb29rc0xpa2VQYXN0ZSkge1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNodW5rQWxyZWFkeUNhcHR1cmVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5pblBsYWluUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgZmlyc3QgLSB0aGlzIGlzIHRoZSBwcmltYXJ5IHNvdXJjZSBub3dcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIGNvbnN0IHJlY2xhaW1lZCA9IHRoaXMucmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICAvLyBDb21iaW5lIHBlbmRpbmcgYnVmZmVyIHdpdGggYW55IHJlY2xhaW1lZCBjaHVua3NcbiAgICAgIGNvbnN0IGNvbWJpbmVkID0gcGVuZGluZyArIHJlY2xhaW1lZDtcbiAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgY2hhcnMgdGhhdCBsZWFrZWQgaW50byBidWZmZXIgKGxlZ2FjeSByZWNsYWltIHBhdGgpXG4gICAgICAgIGlmIChyZWNsYWltZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlbW92ZUNvdW50ID0gTWF0aC5taW4odGhpcy5idWZmZXIubGVuZ3RoLCByZWNsYWltZWQubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBzdWZmaXggPSB0aGlzLmJ1ZmZlci5zbGljZSgtcmVtb3ZlQ291bnQpO1xuICAgICAgICAgIGlmIChyZW1vdmVDb3VudCA+IDAgJiYgc3VmZml4ID09PSByZWNsYWltZWQuc2xpY2UoLXJlbW92ZUNvdW50KSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmJ1ZmZlci5sZW5ndGggLSByZW1vdmVDb3VudCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIHRoaXMuYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgaXMgdmFsaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gY29tYmluZWQuc2xpY2UoMCwgdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpO1xuICAgICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpIHtcbiAgICAgICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNodW5rQWxyZWFkeUNhcHR1cmVkID0gY29tYmluZWQuZW5kc1dpdGgoY2h1bmspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaHVua0FscmVhZHlDYXB0dXJlZCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwbGFpblBhc3RlJywgY2h1bmspO1xuICAgIH1cbiAgICB0aGlzLnNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFja1BsYWluUGFzdGVCdXJzdChsZW5ndGg6IG51bWJlciwgbm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IHx8IG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gdGhpcy5wbGFpblBhc3RlV2luZG93TXMpIHtcbiAgICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gbm93O1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgICB9XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ICs9IGxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRQbGFpblBhc3RlQnVyc3QoKTogdm9pZCB7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgLy8gQWxzbyBjYW5jZWwgcGVuZGluZyBpbnNlcnQgYnVmZmVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gIH1cblxuICBwcml2YXRlIHJlY29yZFJlY2VudFBsYWluQ2h1bmsodGV4dDogc3RyaW5nLCBhdDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBhdCAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MucHVzaCh7IHRleHQsIGF0IH0pO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHBydW5lUmVjZW50UGxhaW5DaHVua3MoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm4gJyc7XG4gICAgY29uc3QgY29tYmluZWQgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLm1hcChlbnRyeSA9PiBlbnRyeS50ZXh0KS5qb2luKCcnKTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgcmV0dXJuIGNvbWJpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgIH1cbiAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5maW5hbGl6ZVBsYWluUGFzdGUoKTtcbiAgICB9LCB0aGlzLnBsYWluUGFzdGVJZGxlTXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5hbGl6ZVBsYWluUGFzdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkgcmV0dXJuO1xuXG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcik7XG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksXG4gICAgICB9O1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICBpZiAodGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZCBiZWZvcmUgc2xpY2luZ1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRleHQgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgdGhpcy5jdXJzb3IgKz0gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIHJlbWFpbnMgdmFsaWQgYWZ0ZXIgbW9kaWZpY2F0aW9uXG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3VibWl0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBzdWJtaXQgdGhhdCBpbnN0ZWFkIG9mIHRoZSBidWZmZXIgdGV4dFxuICAgIC8vIFRoaXMgaGFuZGxlcyBlZGdlIGNhc2VzIHdoZXJlIHN1Ym1pdFRleHQgaXMgY2FsbGVkIHByb2dyYW1tYXRpY2FsbHlcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgY29uc3QgcGFzdGVkVGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgdGhpcy5lbWl0KCdzdWJtaXQnLCBwYXN0ZWRUZXh0KTtcbiAgICAgIGlmIChwYXN0ZWRUZXh0LnRyaW0oKSkge1xuICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChwYXN0ZWRUZXh0LnRyaW0oKSk7XG4gICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICBjb25zdCBzaG91bGRUcmltID0gdGhpcy5pbnB1dENhcHR1cmUub3B0aW9ucy50cmltO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZENhcHR1cmUgPSBzaG91bGRUcmltID8gdGV4dC50cmltKCkgOiB0ZXh0O1xuICAgICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLmFsbG93RW1wdHkgJiYgIW5vcm1hbGl6ZWRDYXB0dXJlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmVzb2x2ZXIucmVzb2x2ZShub3JtYWxpemVkQ2FwdHVyZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBhZGQgc2VjcmV0cyB0byBoaXN0b3J5IG9yIGRpc3BsYXkgdGhlbSBpbiBzY3JvbGxiYWNrXG4gICAgaWYgKCF0aGlzLnNlY3JldE1vZGUpIHtcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5vcm1hbGl6ZWQpO1xuICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgIHRoaXMuZGlzcGxheVVzZXJQcm9tcHQobm9ybWFsaXplZCk7XG4gICAgfVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICB0aGlzLmVtaXQoJ3F1ZXVlJywgbm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZW1pdCgnc3VibWl0Jywgbm9ybWFsaXplZCk7XG4gICAgfVxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlU3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGZpcnN0U3BhY2UgPSB0aGlzLmJ1ZmZlci5pbmRleE9mKCcgJyk7XG4gICAgY29uc3QgaGFzQXJnVGV4dCA9IGZpcnN0U3BhY2UgPj0gMCAmJiAvXFxTLy50ZXN0KHRoaXMuYnVmZmVyLnNsaWNlKGZpcnN0U3BhY2UgKyAxKSk7XG4gICAgLy8gSGlkZSBzbGFzaCBzdWdnZXN0aW9ucyB3aGVuIHRoZSB1c2VyIGlzIGVkaXRpbmcgYXJndW1lbnRzXG4gICAgaWYgKGZpcnN0U3BhY2UgPj0gMCAmJiB0aGlzLmN1cnNvciA+IGZpcnN0U3BhY2UgJiYgaGFzQXJnVGV4dCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yU2xpY2UgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcik7XG4gICAgY29uc3QgY29tbWFuZFNsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gY3Vyc29yU2xpY2Uuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiBjdXJzb3JTbGljZTtcbiAgICBjb25zdCBmYWxsYmFja1NsaWNlID0gZmlyc3RTcGFjZSA+PSAwID8gdGhpcy5idWZmZXIuc2xpY2UoMCwgZmlyc3RTcGFjZSkgOiB0aGlzLmJ1ZmZlcjtcbiAgICBjb25zdCBwYXJ0aWFsID0gKGNvbW1hbmRTbGljZS50cmltRW5kKCkgfHwgZmFsbGJhY2tTbGljZS50cmltRW5kKCkgfHwgJy8nKS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHByZXZpb3VzID0gdGhpcy5zdWdnZXN0aW9uc1t0aGlzLnN1Z2dlc3Rpb25JbmRleF0/LmNvbW1hbmQ7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IHRoaXMuYXZhaWxhYmxlQ29tbWFuZHNcbiAgICAgIC5maWx0ZXIoY21kID0+IGNtZC5jb21tYW5kLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aChwYXJ0aWFsKSlcbiAgICAgIC5zbGljZSgwLCA1KTtcbiAgICBpZiAodGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAocHJldmlvdXMpIHtcbiAgICAgIGNvbnN0IGlkeCA9IHRoaXMuc3VnZ2VzdGlvbnMuZmluZEluZGV4KHMgPT4gcy5jb21tYW5kID09PSBwcmV2aW91cyk7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGlkeCA+PSAwID8gaWR4IDogMDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAwO1xuICAgIH1cbiAgfVxuXG4gIHNldEF2YWlsYWJsZUNvbW1hbmRzKGNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyk6IHZvaWQge1xuICAgIHRoaXMuYXZhaWxhYmxlQ29tbWFuZHMgPSBjb21tYW5kcztcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gIH1cblxuICBwcml2YXRlIGFwcGx5U3VnZ2VzdGlvbihzdWJtaXQ6IGJvb2xlYW4pOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgc3VnZ2VzdGlvbkluZGV4IGlzIHZhbGlkLCBkZWZhdWx0IHRvIGZpcnN0IGl0ZW1cbiAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogMDtcbiAgICBjb25zdCBzZWxlY3RlZCA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XTtcbiAgICBpZiAoIXNlbGVjdGVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGlmIChzdWJtaXQpIHtcbiAgICAgIHRoaXMuc3VibWl0VGV4dChzZWxlY3RlZC5jb21tYW5kKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWZmZXIgPSBgJHtzZWxlY3RlZC5jb21tYW5kfSBgO1xuICAgICAgdGhpcy5jdXJzb3IgPSB0aGlzLmJ1ZmZlci5sZW5ndGg7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgfVxuXG4gIHByaXZhdGUgbmF2aWdhdGVTdWdnZXN0aW9ucyhkaXJlY3Rpb246IG51bWJlcik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAvLyBSZXNldCBpbmRleCBpZiBzdWdnZXN0aW9ucyB3ZXJlIGNsZWFyZWQgYnV0IGluZGV4IHdhc24ndFxuICAgICAgaWYgKHRoaXMuc3VnZ2VzdGlvbkluZGV4ICE9PSAtMSAmJiB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3VycmVudCBpbmRleCBpcyB2YWxpZCBiZWZvcmUgY29tcHV0aW5nIG5leHRcbiAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgIDogLTE7XG4gICAgY29uc3QgbmV4dCA9IGN1cnJlbnRJbmRleCArIGRpcmVjdGlvbjtcbiAgICBjb25zdCBjbGFtcGVkID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggLSAxLCBuZXh0KSk7XG4gICAgaWYgKGNsYW1wZWQgPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4ICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDApIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IGNsYW1wZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBFdmVudCBxdWV1ZSAtLS0tLS0tLS0tLS1cblxuICBhZGRFdmVudCh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSwgY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gYWRkRXZlbnQgY2FsbGVkOiB0eXBlPSR7dHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7Y29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMubm9ybWFsaXplRXZlbnRUeXBlKHR5cGUpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIG5vcm1hbGl6ZWQgdHlwZT0ke25vcm1hbGl6ZWR9YCk7XG4gICAgaWYgKFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Byb21wdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdyZXNwb25zZScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0aG91Z2h0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3N0cmVhbScgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wtcmVzdWx0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ2J1aWxkJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rlc3QnXG4gICAgKSB7XG4gICAgICB0aGlzLmhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudCh7XG4gICAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgaWYgKGZvcm1hdHRlZCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZCA6IGAke2Zvcm1hdHRlZH1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICAvLyBQcmlvcml0eSBxdWV1ZTogcHJvbXB0IGV2ZW50cyBhcmUgaW5zZXJ0ZWQgYXQgdGhlIGZyb250IHRvIGVuc3VyZSBpbW1lZGlhdGUgZGlzcGxheVxuICAgIC8vIFRoaXMgZ3VhcmFudGVlcyB1c2VyIGlucHV0IGlzIGVjaG9lZCBiZWZvcmUgYW55IGFzeW5jIHByb2Nlc3NpbmcgcmVzcG9uc2VzXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnKSB7XG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBub24tcHJvbXB0IGV2ZW50IGFuZCBpbnNlcnQgYmVmb3JlIGl0XG4gICAgICAvLyBUaGlzIG1haW50YWlucyBwcm9tcHQgb3JkZXIgd2hpbGUgZ2l2aW5nIHRoZW0gcHJpb3JpdHkgb3ZlciBvdGhlciBldmVudHNcbiAgICAgIGNvbnN0IGluc2VydEluZGV4ID0gdGhpcy5ldmVudFF1ZXVlLmZpbmRJbmRleChlID0+IGUudHlwZSAhPT0gJ3Byb21wdCcpO1xuICAgICAgaWYgKGluc2VydEluZGV4ID09PSAtMSkge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUuc3BsaWNlKGluc2VydEluZGV4LCAwLCBldmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtcmVuZGVyIHRoZSBwcm9tcHQvY29udHJvbCBiYXIgaW1tZWRpYXRlbHkuXG4gICAqIFRoaXMga2VlcHMgdGhlIGNoYXQgYm94IHBpbm5lZCBkdXJpbmcgbG9uZyBzdHJlYW1pbmcgcnVucyBpbnN0ZWFkIG9mIHdhaXRpbmdcbiAgICogZm9yIHRoZSBldmVudCBxdWV1ZSB0byBkcmFpbiBiZWZvcmUgdGhlIHByb21wdCByZWFwcGVhcnMuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclByb21wdE92ZXJsYXkoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUgfHwgdGhpcy5kaXNwb3NlZCB8fCAhdGhpcy5vdXRwdXQuaXNUVFkgfHwgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1F1ZXVlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZGlzcG9zZWQpIHJldHVybjtcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghZXZlbnQpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBjb2FsZXNjZWQgPSB0aGlzLmNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckV2ZW50KGNvYWxlc2NlZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYSByZW5kZXJpbmcgZmFpbHVyZSB0byBzdGFsbCB0aGUgZXZlbnQgcXVldWVcbiAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7IC8vIERvbid0IHRyeSB0byB3cml0ZSBhZnRlciBkaXNwb3NhbFxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnID8gZXJyb3IgOiAnVW5rbm93biByZW5kZXJlciBlcnJvcic7XG4gICAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUoYFxcbltyZW5kZXJlcl0gJHttZXNzYWdlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZGlzcG9zZWQgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrO1xuXG4gICAgICAgIC8vIEZvciBwcm9tcHQgZXZlbnRzLCBlbnN1cmUgdGhlIG92ZXJsYXkgaXMgcmVuZGVyZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgLy8gVGhpcyBndWFyYW50ZWVzIHByb21wdHMgYXJlIHZpc2libGUgYmVmb3JlIGFzeW5jIHByb2Nlc3NpbmcgY29udGludWVzXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBObyBkZWxheSBmb3IgcHJvbXB0IGV2ZW50cyAtIHJlbmRlciBpbW1lZGlhdGVseVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFMV0FZUyByZW5kZXIgcHJvbXB0IGFmdGVyIHF1ZXVlIGNvbXBsZXRlcyB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50XG4gICAgICAvLyBUaGlzIGVuc3VyZXMgc3RhdHVzL3RvZ2dsZXMgc3RheSBwaW5uZWQgYW5kIHJlc3BvbnNlcyBhcmUgZnVsbHkgcmVuZGVyZWRcbiAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSBhZGphY2VudCByZXNwb25zZS90aG91Z2h0IGV2ZW50cyBpbnRvIGEgc2luZ2xlIGJsb2NrIHNvIGNvbnRpbnVvdXNcbiAgICogY2hhdCB0ZXh0IHJlbmRlcnMgd2l0aCBvbmUgYnVsbGV0IGluc3RlYWQgb2Ygb25lIHBlciBjaHVuay5cbiAgICovXG4gIHByaXZhdGUgY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQ6IFVJRXZlbnQpOiBVSUV2ZW50IHtcbiAgICBjb25zdCBpc01lcmdlYWJsZSA9ICh0YXJnZXQ6IFVJRXZlbnQgfCB1bmRlZmluZWQpOiB0YXJnZXQgaXMgVUlFdmVudCA9PlxuICAgICAgQm9vbGVhbihcbiAgICAgICAgdGFyZ2V0ICYmXG4gICAgICAgICAgIXRhcmdldC5pc0NvbXBhY3RlZCAmJlxuICAgICAgICAgICgodGFyZ2V0LnR5cGUgPT09ICdyZXNwb25zZScgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICdyZXNwb25zZScpIHx8XG4gICAgICAgICAgICAodGFyZ2V0LnR5cGUgPT09ICd0aG91Z2h0JyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Rob3VnaHQnKSlcbiAgICAgICk7XG5cbiAgICBpZiAoIWlzTWVyZ2VhYmxlKGV2ZW50KSkge1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cblxuICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiBpc01lcmdlYWJsZSh0aGlzLmV2ZW50UXVldWVbMF0pKSB7XG4gICAgICBjb25zdCBuZXh0ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgY29uc3QgbmVlZHNTZXBhcmF0b3IgPVxuICAgICAgICBldmVudC5jb250ZW50Lmxlbmd0aCA+IDAgJiYgIWV2ZW50LmNvbnRlbnQuZW5kc1dpdGgoJ1xcbicpICYmICFuZXh0LmNvbnRlbnQuc3RhcnRzV2l0aCgnXFxuJyk7XG4gICAgICBldmVudC5jb250ZW50ID0gbmVlZHNTZXBhcmF0b3IgPyBgJHtldmVudC5jb250ZW50fVxcbiR7bmV4dC5jb250ZW50fWAgOiBgJHtldmVudC5jb250ZW50fSR7bmV4dC5jb250ZW50fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHBlbmRpbmcgcmVuZGVyZXIgZXZlbnRzLlxuICAgKiBVc2VmdWwgZm9yIHN0YXJ0dXAgZmxvd3MgKGUuZy4sIHdlbGNvbWUgYmFubmVyKSB0byBndWFyYW50ZWUgdGhlIHNjcm9sbGJhY2sgaXMgaHlkcmF0ZWRcbiAgICogYmVmb3JlIGNvbnRpbnVpbmcgd2l0aCBhZGRpdGlvbmFsIFVJIHVwZGF0ZXMuXG4gICAqL1xuICBhc3luYyBmbHVzaEV2ZW50cyh0aW1lb3V0TXM6IG51bWJlciA9IDI1MCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEtpY2sgb2ZmIHByb2Nlc3NpbmcgaWYgaWRsZVxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUgJiYgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKCh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSAmJiBEYXRlLm5vdygpIC0gc3RhcnQgPCB0aW1lb3V0TXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyRXZlbnQoZXZlbnQ6IFVJRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSByZW5kZXJFdmVudDogdHlwZT0ke2V2ZW50LnR5cGV9LCBjb250ZW50IGxlbmd0aD0ke2V2ZW50LmNvbnRlbnQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgbG9nRGVidWcoJ1tERUJVRyByZW5kZXJlcl0gcGxhaW5Nb2RlIC0gd3JpdGluZyBkaXJlY3RseScpO1xuICAgICAgY29uc3QgZm9ybWF0dGVkUGxhaW4gPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgICAgaWYgKGZvcm1hdHRlZFBsYWluKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZWRQbGFpbi5lbmRzV2l0aCgnXFxuJykgPyBmb3JtYXR0ZWRQbGFpbiA6IGAke2Zvcm1hdHRlZFBsYWlufVxcbmA7XG4gICAgICAgIHRoaXMub3V0cHV0LndyaXRlKHRleHQpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdGV4dC5lbmRzV2l0aCgnXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRDb250ZW50KGV2ZW50KTtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSBmb3JtYXR0ZWQgbGVuZ3RoPSR7Zm9ybWF0dGVkPy5sZW5ndGggfHwgMH1gKTtcbiAgICBpZiAoIWZvcm1hdHRlZCkgcmV0dXJuO1xuXG4gICAgLy8gQWxsb3cgcHJvbXB0cyBhbmQgcmVzcG9uc2VzIHRvIGFsd2F5cyByZW5kZXIgKGRvbid0IGRlZHVwbGljYXRlKVxuICAgIC8vIE9ubHkgZGVkdXBsaWNhdGUgc3RyZWFtaW5nIGNvbnRlbnRcbiAgICBjb25zdCBzaWduYXR1cmUgPSBgJHtldmVudC5yYXdUeXBlfToke2V2ZW50LmNvbnRlbnR9YDtcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3N0cmVhbScgJiYgc2lnbmF0dXJlID09PSB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlICE9PSAncHJvbXB0Jykge1xuICAgICAgdGhpcy5sYXN0UmVuZGVyZWRFdmVudEtleSA9IHNpZ25hdHVyZTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgYmVmb3JlIHdyaXRpbmcgbmV3IGNvbnRlbnRcbiAgICBpZiAodGhpcy5wcm9tcHRIZWlnaHQgPiAwIHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgfVxuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcblxuICAgIGlmIChldmVudC50eXBlICE9PSAnc3RyZWFtJyAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSAmJiBmb3JtYXR0ZWQudHJpbSgpKSB7XG4gICAgICAvLyBLZWVwIHNjcm9sbGJhY2sgb3JkZXJpbmcgcHJlZGljdGFibGUgd2hlbiBwcmV2aW91cyBvdXRwdXQgZW5kZWQgbWlkLWxpbmVcbiAgICAgIHRoaXMub3V0cHV0LndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMub3V0cHV0LndyaXRlKGZvcm1hdHRlZCk7XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZvcm1hdHRlZC5lbmRzV2l0aCgnXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSk6IENhbm9uaWNhbEV2ZW50VHlwZSB8IG51bGwge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgcmV0dXJuICdwcm9tcHQnO1xuICAgICAgY2FzZSAndGhvdWdodCc6XG4gICAgICAgIHJldHVybiAndGhvdWdodCc7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgY2FzZSAnc3RyZWFtaW5nJzpcbiAgICAgICAgcmV0dXJuICdzdHJlYW0nO1xuICAgICAgY2FzZSAndG9vbCc6XG4gICAgICBjYXNlICd0b29sLWNhbGwnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wnO1xuICAgICAgY2FzZSAndG9vbC1yZXN1bHQnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wtcmVzdWx0JztcbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuICdidWlsZCc7XG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuICd0ZXN0JztcbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGNhc2UgJ2Jhbm5lcic6XG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgICByZXR1cm4gJ3Jlc3BvbnNlJztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoZXZlbnQ6IFVJRXZlbnQpOiBzdHJpbmcge1xuICAgIC8vIENvbXBhY3RlZCBibG9ja3MgYWxyZWFkeSBoYXZlIHNlcGFyYXRvciBhbmQgZm9ybWF0dGluZ1xuICAgIGlmIChldmVudC5pc0NvbXBhY3RlZCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnJhd1R5cGUgPT09ICdiYW5uZXInKSB7XG4gICAgICAvLyBCYW5uZXJzIGRpc3BsYXkgd2l0aG91dCBidWxsZXQgcHJlZml4XG4gICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbUVuZCgpKTtcbiAgICAgIHJldHVybiBgJHtsaW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIENvbXBhY3QsIHVzZXItZnJpZW5kbHkgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgLy8gVXNlciBwcm9tcHQgLSBqdXN0IHRoZSB0ZXh0IChwcm9tcHQgYm94IGhhbmRsZXMgc3R5bGluZylcbiAgICAgICAgcmV0dXJuIGAke3RoZW1lLnByaW1hcnkoJz4nKX0gJHtldmVudC5jb250ZW50fVxcbmA7XG5cbiAgICAgIGNhc2UgJ3Rob3VnaHQnOiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VyYXRlZCA9IHRoaXMuY3VyYXRlUmVhc29uaW5nQ29udGVudChldmVudC5jb250ZW50KTtcbiAgICAgICAgaWYgKCFjdXJhdGVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXJUaG91Z2h0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ID0ge1xuICAgICAgICAgIHRleHQ6IGN1cmF0ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaGlua2luZ0Jsb2NrKGN1cmF0ZWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sJzoge1xuICAgICAgICAvLyBDb21wYWN0IHRvb2wgZGlzcGxheTog4pqhVG9vbE5hbWUg4oaSIHJlc3VsdFxuICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnQuY29udGVudC5yZXBsYWNlKC9eW+KPuuKameKXi11cXHMqLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbENhbGwoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0Jzoge1xuICAgICAgICAvLyBJbmxpbmUgcmVzdWx0OiDilJTilIAgc3VtbWFyeVxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbFJlc3VsdChldmVudC5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYnVpbGQnOlxuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCB7IGxhYmVsOiAnYnVpbGQnLCBsYWJlbENvbG9yOiB0aGVtZS53YXJuaW5nIH0pO1xuXG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ3Rlc3QnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICByZXR1cm4gZXZlbnQuY29udGVudDtcblxuICAgICAgY2FzZSAncmVzcG9uc2UnOlxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHJlc3BvbnNlIHdpdGhvdXQgZXhjZXNzaXZlIGJ1bGxldHMsIHdyYXBwZWQgZm9yIHJlYWRhYmlsaXR5XG4gICAgICAgIGNvbnN0IGlzRXJyb3IgPSBldmVudC5yYXdUeXBlID09PSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCBpc0Vycm9yID8geyBsYWJlbDogJ2Vycm9yJywgbGFiZWxDb2xvcjogdGhlbWUuZXJyb3IgfSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpYyBnYXJiYWdlIGRldGVjdGlvbiAtIGNoZWNrcyBpZiBjb250ZW50IGxvb2tzIGxpa2UgaW50ZXJuYWwvc3lzdGVtIG91dHB1dFxuICAgKiB0aGF0IHNob3VsZG4ndCBiZSBzaG93biB0byB1c2Vycy4gVXNlcyBzdHJ1Y3R1cmFsIGNoZWNrcywgbm90IHBhdHRlcm4gbWF0Y2hpbmcuXG4gICAqL1xuICBwcml2YXRlIGlzR2FyYmFnZU91dHB1dChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRlbnQgc3RhcnRpbmcgd2l0aCA8IHRoYXQgaXNuJ3QgdmFsaWQgbWFya2Rvd24vY29kZVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJzwnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8aHR0cCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzwhJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRhaW5zIFwidG89ZnVuY3Rpb25zLlwiIG9yIFwidG89dG9vbHMuXCIgKGludGVybmFsIHJvdXRpbmcpXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ3RvPWZ1bmN0aW9ucy4nKSB8fCBjb250ZW50LmluY2x1ZGVzKCd0bz10b29scy4nKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogbG9va3MgbGlrZSBpbnRlcm5hbCBpbnN0cnVjdGlvbiAocXVvdGVkIHN5c3RlbSB0ZXh0KVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJ1wiJykgJiYgY29udGVudC5pbmNsdWRlcygnYmxvY2snKSAmJiBjb250ZW50LmluY2x1ZGVzKCd0b29sJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IHZlcnkgc2hvcnQgY29udGVudCB0aGF0J3MganVzdCB0aW1pbmcgaW5mb1xuICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IDMwICYmIC9lbGFwc2VkfHNlY29uZHM/fG1zXFxiL2kudGVzdChjb250ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogZ2liYmVyaXNoIC0gaGlnaCByYXRpbyBvZiBub24td29yZCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYWxwaGFDb3VudCA9IChjb250ZW50Lm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1xccy9nLCAnJykubGVuZ3RoO1xuICAgIGlmICh0b3RhbENvdW50ID4gMjAgJiYgYWxwaGFDb3VudCAvIHRvdGFsQ291bnQgPCAwLjUpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBMZXNzIHRoYW4gNTAlIGxldHRlcnMgPSBsaWtlbHkgZ2FyYmFnZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgY3VyYXRlUmVhc29uaW5nQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJykudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBsaW1pdGVkID1cbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID4gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnNcbiAgICAgICAgPyBub3JtYWxpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzKVxuICAgICAgICA6IG5vcm1hbGl6ZWQ7XG5cbiAgICBjb25zdCBtYXhTZWdtZW50cyA9IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzICogMztcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbWl0ZWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5mbGF0TWFwKGxpbmUgPT4gbGluZS5zcGxpdCgvKD88PVsuPyFdKVxccysvKSlcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL15b4oCiKuKPuuKXi1xcLVxcdTIwMjJdK1xccyovLCAnJykudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkZWR1cGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNlZ21lbnQgPSBzZWdtZW50LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWRTZWdtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKGtleSk7XG4gICAgICBkZWR1cGVkLnB1c2gobm9ybWFsaXplZFNlZ21lbnQpO1xuICAgICAgaWYgKGRlZHVwZWQubGVuZ3RoID49IG1heFNlZ21lbnRzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWR1cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpb3JpdGl6ZWQgPSB0aGlzLnByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhkZWR1cGVkKTtcbiAgICBpZiAocHJpb3JpdGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW1pdGVkU2VsZWN0aW9uID0gcHJpb3JpdGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMpO1xuICAgIGNvbnN0IGJ1bGxldGVkID0gbGltaXRlZFNlbGVjdGlvbi5tYXAobGluZSA9PiB0aGlzLmVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lKSk7XG5cbiAgICByZXR1cm4gYnVsbGV0ZWQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICgvXihb4oCiKuKPuuKXiy1dfFxcZCtbLildKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBg4oCiICR7bGluZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAvXihcXGQrWy4pXVxcc3xzdGVwXFxzKlxcZCt8cGxhblxcYnxuZXh0XFxifHRoZW5cXGJ8Z29hbFxcYikvaS50ZXN0KGxpbmUpIHx8XG4gICAgICAvXlstKuKAol1cXHMvLnRlc3QobGluZSkgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJy0+JykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJ+KGkicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCc6ICcpIHx8XG4gICAgICAvXFxiKHRlc3R8dmVyaWZ5fHZhbGlkYXRlfGNoZWNrfGJ1aWxkfHJ1bnxkZXBsb3l8ZGlmZnxsaW50fHR5cGUgP2NoZWNrfGZpeHxidWd8aXNzdWV8cmlza3xtaXRpZ2F0ZXxpbnZlc3RpZ2F0ZSlcXGIvaS50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKHNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlZCA9IHNlZ21lbnRzLm1hcCgodGV4dCwgaW5kZXgpID0+ICh7XG4gICAgICB0ZXh0LFxuICAgICAgaW5kZXgsXG4gICAgICBzY29yZTogdGhpcy5yZWFzb25pbmdTaWduYWxTY29yZSh0ZXh0KSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNTaWduYWwgPSBzY29yZWQuc29tZShpdGVtID0+IGl0ZW0uc2NvcmUgPiAwKTtcbiAgICBpZiAoIWhhc1NpZ25hbCkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIHNjb3JlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlZC5tYXAoaXRlbSA9PiBpdGVtLnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFzb25pbmdTaWduYWxTY29yZShsaW5lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5sb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAzO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbktleXdvcmRzID0gW1xuICAgICAgJ3Rvb2wnLCAnY29tbWFuZCcsICdzY3JpcHQnLCAnY29udGV4dCcsICdzdW1tYXInLCAncmlzaycsICdpc3N1ZScsXG4gICAgICAnaW52ZXN0aWdhdGUnLCAncm9vdCBjYXVzZScsICdyZW1lZGlhdCcsICdtaXRpZ2F0JywgJ2ZpeCcsICdwYXRjaCcsXG4gICAgICAndGVzdCcsICd2ZXJpZnknLCAndmFsaWRhdGUnLCAnY2hlY2snLCAnYnVpbGQnLCAnZGVwbG95JywgJ3J1bicsXG4gICAgICAnZGlmZicsICdsaW50JywgJ3R5cGVjaGVjaycsICdiZW5jaG1hcmsnLFxuICAgIF07XG4gICAgaWYgKGFjdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHNjb3JlICs9IDI7XG4gICAgfVxuXG4gICAgaWYgKC9bIzrihpJdfC0+Ly50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cblxuICAgIGlmICgvXihpKCd8IGEpbXxpIHdpbGx8bGV0IG1lfHN0YXJ0aW5nfG5vd3xva3xzdXJlKVxcYi9pLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMTIwKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVuZGVyVGhvdWdodChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQgJiYgdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dCA9PT0gbm9ybWFsaXplZCkge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSA0LCA1Nik7IC8vIExlYXZlIHJvb20gZm9yIHByZWZpeCBhbmQgbWFyZ2luc1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgbGluZUlkeCA9IDA7IGxpbmVJZHggPCBsaW5lcy5sZW5ndGg7IGxpbmVJZHgrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2xpbmVJZHhdITtcbiAgICAgIGlmICghbGluZS50cmltKCkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gV29yZC13cmFwIGVhY2ggbGluZVxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC8oXFxzKykvKTtcbiAgICAgIGxldCBjdXJyZW50TGluZSA9ICcnO1xuXG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgaWYgKChjdXJyZW50TGluZSArIHdvcmQpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICAgIC8vIEZpcnN0IGxpbmUgb2YgdGhpcyBwYXJhZ3JhcGggZ2V0cyDij7osIHJlc3QgZ2V0IGluZGVudFxuICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdC5sZW5ndGggPT09IDAgJiYgbGluZUlkeCA9PT0gMCA/IGAke2J1bGxldH0gYCA6ICcgICc7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgICAgIGN1cnJlbnRMaW5lID0gd29yZC50cmltU3RhcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50TGluZSArPSB3b3JkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIGNhbGwgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o+6IFNlYXJjaChwYXR0ZXJuOiBcImZvb1wiLCBwYXRoOiBcInNyY1wiLFxuICAgKiAgICAgICAgICAgb3V0cHV0X21vZGU6IFwiY29udGVudFwiLCBoZWFkX2xpbWl0OiAzMClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUuaW5mbyhuYW1lTWF0Y2hbMV0pfVxcbmA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbnRlbnR9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sTmFtZSA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXSE7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSA0LCA1Nik7XG5cbiAgICAvLyBGb3JtYXQ6IOKPuiBUb29sTmFtZShhcmdzLi4uKVxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX0oYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgMzsgLy8gXCLij7ogVG9vbE5hbWUoXCIgdmlzaWJsZSBsZW5ndGhcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHByZWZpeExlbiArIDQpOyAvLyBFeHRyYSBpbmRlbnQgZm9yIHdyYXBwZWQgYXJnc1xuXG4gICAgLy8gUGFyc2UgYW5kIGZvcm1hdCBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZVRvb2xBcmdzKGFyZ3NTdHIpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke3ByZWZpeH0pXFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudExpbmUgPSBwcmVmaXg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV0hO1xuICAgICAgY29uc3QgYXJnVGV4dCA9IGAke3RoZW1lLnVpLm11dGVkKGFyZy5rZXkgKyAnOicpfSAke3RoaXMuZm9ybWF0QXJnVmFsdWUoYXJnLnZhbHVlKX1gO1xuICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaSA8IGFyZ3MubGVuZ3RoIC0gMSA/ICcsICcgOiAnKSc7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgYXJnIGZpdHMgb24gY3VycmVudCBsaW5lXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIGlmICh0aGlzLnN0cmlwQW5zaSh0ZXN0TGluZSkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUgIT09IHByZWZpeCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgICAgIGN1cnJlbnRMaW5lID0gaW5kZW50ICsgYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRvb2wgYXJndW1lbnRzIGZyb20gc3RyaW5nIGxpa2U6IGtleTogXCJ2YWx1ZVwiLCBrZXkyOiB2YWx1ZTJcbiAgICovXG4gIHByaXZhdGUgcGFyc2VUb29sQXJncyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBhcmdzOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+ID0gW107XG4gICAgLy8gU2ltcGxlIHJlZ2V4IHRvIGV4dHJhY3Qga2V5OiB2YWx1ZSBwYWlyc1xuICAgIGNvbnN0IHJlZ2V4ID0gLyhcXHcrKTpcXHMqKFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxbXiwpXSspL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGFyZ3NTdHIpKSAhPT0gbnVsbCkge1xuICAgICAgYXJncy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYW4gYXJndW1lbnQgdmFsdWUgKHRydW5jYXRlIGxvbmcgc3RyaW5ncylcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0QXJnVmFsdWUodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XG4gICAgY29uc3QgaXNRdW90ZWQgPSB2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpO1xuICAgIGNvbnN0IGlubmVyID0gaXNRdW90ZWQgPyB2YWx1ZS5zbGljZSgxLCAtMSkgOiB2YWx1ZTtcblxuICAgIC8vIFRydW5jYXRlIGxvbmcgdmFsdWVzXG4gICAgY29uc3QgbWF4TGVuID0gNDA7XG4gICAgY29uc3QgdHJ1bmNhdGVkID0gaW5uZXIubGVuZ3RoID4gbWF4TGVuID8gaW5uZXIuc2xpY2UoMCwgbWF4TGVuIC0gMykgKyAnLi4uJyA6IGlubmVyO1xuXG4gICAgcmV0dXJuIGlzUXVvdGVkID8gYFwiJHt0cnVuY2F0ZWR9XCJgIDogdHJ1bmNhdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgcmVzdWx0IGluIENsYXVkZSBDb2RlIHN0eWxlOlxuICAgKiAgIOKOvyAgRm91bmQgMTIgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xSZXN1bHQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgc3VtbWFyeSBsaW5lIChlLmcuLCBcIkZvdW5kIFggbGluZXNcIilcbiAgICBjb25zdCBzdW1tYXJ5TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKEZvdW5kIFxcZCsgKD86bGluZXM/fGZpbGVzP3xtYXRjaGVzPyl8UmVhZCBcXGQrIGxpbmVzP3xXcm90ZSBcXGQrIGxpbmVzP3xFZGl0ZWR8Q3JlYXRlZHxEZWxldGVkKS9pKTtcbiAgICBpZiAoc3VtbWFyeU1hdGNoKSB7XG4gICAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9ICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfVxcbmA7XG4gICAgfVxuXG4gICAgLy8gRm9yIG90aGVyIHJlc3VsdHMsIHNob3cgdHJ1bmNhdGVkIHByZXZpZXdcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPiAzKSB7XG4gICAgICBjb25zdCBwcmV2aWV3ID0gbGluZXMuc2xpY2UoMCwgMikuam9pbignXFxuJyk7XG4gICAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke3ByZXZpZXd9XFxuICAke3RoZW1lLnVpLm11dGVkKGAuLi4gJHtsaW5lcy5sZW5ndGggLSAyfSBtb3JlIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKWApfVxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fVxcbmA7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIGNhbGw6IOKPuiBSZWFkIOKGkiBmaWxlLnRzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJnc1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxccyooPzpcXCgoLiopXFwpKT8kL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV0hO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXT8udHJpbSgpIHx8ICcnO1xuXG4gICAgLy8gSWYgbm8gYXJncywganVzdCBzaG93IHRvb2wgbmFtZVxuICAgIGlmICghYXJnc1N0cikge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBmdWxsIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIGxpbmUgd3JhcHBpbmdcbiAgICAvLyBGb3IgbG9uZyBhcmdzLCB3cmFwIHRoZW0gbmljZWx5IHdpdGggY29udGludWF0aW9uIGluZGVudFxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX0oYDtcbiAgICBjb25zdCBzdWZmaXggPSAnKSc7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLmNvbHMgLSA4OyAvLyBMZWF2ZSByb29tIGZvciBtYXJnaW5zXG5cbiAgICAvLyBQYXJzZSBpbmRpdmlkdWFsIHBhcmFtc1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucGFyc2VUb29sUGFyYW1zKGFyZ3NTdHIpO1xuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4fSR7YXJnc1N0cn0ke3N1ZmZpeH1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zKHRvb2xOYW1lLCBwYXJhbXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xQYXJhbXMoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlclxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0aGVtZS5pbmZvKHRvb2xOYW1lKX0oYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtXG4gICAgICAgID8gYCR7cGFyYW0ua2V5fTogJHtwYXJhbS52YWx1ZX1gXG4gICAgICAgIDogYCwgJHtwYXJhbS5rZXl9OiAke3BhcmFtLnZhbHVlfWA7XG5cbiAgICAgIC8vIENoZWNrIGlmIGFkZGluZyB0aGlzIHBhcmFtIHdvdWxkIGV4Y2VlZCB3aWR0aFxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIHBhcmFtU3RyO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGNvbnN0IHBsYWluTGVuZ3RoID0gdGVzdExpbmUucmVwbGFjZSgvXFx4MWJcXFtbMC05O10qbS9nLCAnJykubGVuZ3RoO1xuXG4gICAgICBpZiAocGxhaW5MZW5ndGggPiBtYXhXaWR0aCAmJiAhZmlyc3RQYXJhbSkge1xuICAgICAgICAvLyBTdGFydCBuZXcgbGluZVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBgJHtwYXJhbS5rZXl9OiAke3BhcmFtLnZhbHVlfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBwYXJhbVN0cjtcbiAgICAgIH1cbiAgICAgIGZpcnN0UGFyYW0gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjdXJyZW50TGluZSArPSAnKSc7XG4gICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgc2hvcnQgc3VtbWFyeSBmcm9tIHRvb2wgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFN1bW1hcnkodG9vbE5hbWU6IHN0cmluZywgYXJnc1N0cjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHBhdGgvZmlsZSBmb3IgZmlsZSBvcGVyYXRpb25zXG4gICAgaWYgKFsncmVhZCcsICd3cml0ZScsICdlZGl0JywgJ2dsb2InLCAnZ3JlcCcsICdzZWFyY2gnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgY29uc3QgcGF0aE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvKD86cGF0aHxmaWxlX3BhdGh8cGF0dGVybik6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKHBhdGhNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXRoID0gcGF0aE1hdGNoWzFdITtcbiAgICAgICAgLy8gU2hvcnRlbiBsb25nIHBhdGhzXG4gICAgICAgIGNvbnN0IHNob3J0ID0gcGF0aC5sZW5ndGggPiAzMCA/ICfigKYnICsgcGF0aC5zbGljZSgtMjgpIDogcGF0aDtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKHNob3J0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvbW1hbmQgZm9yIGJhc2hcbiAgICBpZiAodG9vbCA9PT0gJ2Jhc2gnKSB7XG4gICAgICBjb25zdCBjbWRNYXRjaCA9IGFyZ3NTdHIubWF0Y2goL2NvbW1hbmQ6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKGNtZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNtZE1hdGNoWzFdITtcbiAgICAgICAgY29uc3Qgc2hvcnQgPSBjbWQubGVuZ3RoID4gNDAgPyBjbWQuc2xpY2UoMCwgMzcpICsgJ+KApicgOiBjbWQ7XG4gICAgICAgIHJldHVybiB0aGVtZS51aS5tdXRlZChzaG9ydCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIHJlc3VsdDog4o6/ICBGb3VuZCBYIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFBhcnNlIGNvbW1vbiByZXN1bHQgcGF0dGVybnMgZm9yIHN1bW1hcnlcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC8oXFxkKylcXHMqbGluZXM/L2kpO1xuICAgIGNvbnN0IGZpbGVNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKVxccyooPzpmaWxlcz98bWF0Y2hlcz8pL2kpO1xuICAgIGNvbnN0IHJlYWRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL3JlYWQuKj8oXFxkKylcXHMqbGluZXM/L2kpO1xuXG4gICAgbGV0IHN1bW1hcnk6IHN0cmluZztcbiAgICBpZiAocmVhZE1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYFJlYWQgJHtyZWFkTWF0Y2hbMV19IGxpbmVzYDtcbiAgICB9IGVsc2UgaWYgKGxpbmVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2xpbmVNYXRjaFsxXX0gbGluZSR7bGluZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoZmlsZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7ZmlsZU1hdGNoWzFdfSBmaWxlJHtmaWxlTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChjb250ZW50Lm1hdGNoKC9eKHN1Y2Nlc3N8b2t8ZG9uZXxjb21wbGV0ZWR8d3JpdHRlbnxlZGl0ZWR8Y3JlYXRlZCkvaSkpIHtcbiAgICAgIHN1bW1hcnkgPSAn4pyTJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGNvbnRlbnQgZGlyZWN0bHksIHRydW5jYXRlZCBpZiBuZWVkZWRcbiAgICAgIHN1bW1hcnkgPSBjb250ZW50Lmxlbmd0aCA+IDQwID8gY29udGVudC5zbGljZSgwLCAzNykgKyAn4oCmJyA6IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtzdW1tYXJ5fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgcmVzcG9uc2Ugd2l0aCBidWxsZXQgb24gZmlyc3QgbGluZVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0UmVzcG9uc2UoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBXcmFwIHRleHQgd2l0aCBhIHNpbmdsZSBidWxsZXQgb24gdGhlIGZpcnN0IGxpbmUgYW5kIHRpZHkgaW5kZW50YXRpb24gZm9yIHJlYWRhYmlsaXR5LlxuICAgKiBQcmV2ZW50cyBhd2t3YXJkIG1pZC13b3JkIHRlcm1pbmFsIHdyYXBwaW5nIGJ5IGhhbmRsaW5nIHRoZSBsYXlvdXQgb3Vyc2VsdmVzLlxuICAgKi9cbiAgcHJpdmF0ZSB3cmFwQnVsbGV0VGV4dChcbiAgICBjb250ZW50OiBzdHJpbmcsXG4gICAgb3B0aW9uczogeyBtYXhXaWR0aD86IG51bWJlcjsgbGFiZWw/OiBzdHJpbmc7IGxhYmVsQ29sb3I/OiAodmFsdWU6IHN0cmluZykgPT4gc3RyaW5nIH0gPSB7fVxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGNsZWFuZWQgPSBjb250ZW50LnJlcGxhY2UoL15b4o+64oCi4peLXVxccyovLCAnJykudHJpbUVuZCgpO1xuICAgIGlmICghY2xlYW5lZC50cmltKCkpIHtcbiAgICAgIHJldHVybiAnJztcbiAgICB9XG5cbiAgICAvLyBSZXNlcnZlIGEgbGl0dGxlIG1hcmdpbiB0byByZWR1Y2UgdGVybWluYWwgd3JhcCBqaXR0ZXJcbiAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyMCwgTWF0aC5taW4ob3B0aW9ucy5tYXhXaWR0aCA/PyBhdmFpbGFibGVXaWR0aCAtIDIsIGF2YWlsYWJsZVdpZHRoKSk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gb3B0aW9ucy5sYWJlbFxuICAgICAgPyBgJHtvcHRpb25zLmxhYmVsQ29sb3IgPyBvcHRpb25zLmxhYmVsQ29sb3Iob3B0aW9ucy5sYWJlbCkgOiBvcHRpb25zLmxhYmVsfSR7dGhlbWUudWkubXV0ZWQoJyDCtyAnKX1gXG4gICAgICA6ICcnO1xuICAgIGNvbnN0IGJ1bGxldFByZWZpeCA9IGAke2J1bGxldH0gJHtsYWJlbFRleHR9YDtcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHRoaXMudmlzaWJsZUxlbmd0aChgJHtidWxsZXR9IGApKTtcblxuICAgIGNvbnN0IGxpbmVzID0gY2xlYW5lZC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBmaXJzdE5vbkVtcHR5ID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcmF3TGluZSBvZiBsaW5lcykge1xuICAgICAgY29uc3QgbGluZSA9IHJhd0xpbmUudHJpbSgpO1xuICAgICAgaWYgKCFsaW5lKSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKCcnKTsgLy8gUHJlc2VydmUgaW50ZW50aW9uYWwgc3BhY2luZyBiZXR3ZWVuIHBhcmFncmFwaHNcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHdvcmRzID0gbGluZS5zcGxpdCgvXFxzKy8pO1xuICAgICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgICBjb25zdCBwcmVmaXhMZW5ndGggPSB0aGlzLnZpc2libGVMZW5ndGgoZmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudCk7XG4gICAgICAgIGlmIChwcmVmaXhMZW5ndGggKyB0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IG1heFdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoY3VycmVudCkge1xuICAgICAgICByZXN1bHQucHVzaChgJHtmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50fSR7Y3VycmVudH1gKTtcbiAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdGhpbmtpbmcgYmxvY2sgd2l0aCBlbmhhbmNlZCB2aXN1YWwgZGVzaWduLlxuICAgKiBVc2VzIGEgZGlzdGluY3QgdmlzdWFsIHN0eWxlIHRvIGNsZWFybHkgc2VwYXJhdGUgdGhpbmtpbmcgZnJvbSByZXNwb25zZXMuXG4gICAqXG4gICAqIEluIHBsYWluIG91dHB1dCBtb2RlIHdlIGtlZXAgaXQgc2ltcGxlIGFuZCBpbmxpbmUgd2l0aCB0aGUgcmVzdCBvZiB0aGVcbiAgICogc3RyZWFtIHNvIHRyYW5zY3JpcHRzIHJlbWFpbiBlYXN5IHRvIHNjYW4uXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRoaW5raW5nQmxvY2soY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIWNvbnRlbnQudHJpbSgpKSByZXR1cm4gJyc7XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpO1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KG5vcm1hbGl6ZWQsIHtcbiAgICAgIGxhYmVsOiAndGhpbmtpbmcnLFxuICAgICAgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyA/PyAoKHZhbHVlOiBzdHJpbmcpID0+IHZhbHVlKSxcbiAgICB9KTtcbiAgfVxuXG4gIHByaXZhdGUgd3JhcFRleHRUb1dpZHRoKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXRleHQudHJpbSgpKSByZXR1cm4gWycnXTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB3b3JkcyA9IHRleHQudHJpbSgpLnNwbGl0KC9cXHMrLyk7XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgoY2FuZGlkYXRlKSA+IHdpZHRoICYmIGN1cnJlbnQpIHtcbiAgICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChjdXJyZW50KSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgc3RyZWFtaW5nIGVsYXBzZWQgdGltZSBpbiBDbGF1ZGUgQ29kZSBzdHlsZTogM20gMzBzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCF0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgZWxhcHNlZCA9IE1hdGguZmxvb3IoKERhdGUubm93KCkgLSB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSkgLyAxMDAwKTtcbiAgICBpZiAoZWxhcHNlZCA8IDUpIHJldHVybiBudWxsOyAvLyBEb24ndCBzaG93IGZvciB2ZXJ5IHNob3J0IGR1cmF0aW9uc1xuICAgIGNvbnN0IG1pbnMgPSBNYXRoLmZsb29yKGVsYXBzZWQgLyA2MCk7XG4gICAgY29uc3Qgc2VjcyA9IGVsYXBzZWQgJSA2MDtcbiAgICBpZiAobWlucyA+IDApIHtcbiAgICAgIHJldHVybiBgJHttaW5zfW0gJHtzZWNzfXNgO1xuICAgIH1cbiAgICByZXR1cm4gYCR7c2Vjc31zYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFNob3dzIGEgdmlzdWFsIHNlcGFyYXRvciB3aXRoIFwiaGlzdG9yeVwiIGxhYmVsIGFuZCBjdHJsK28gaGludFxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogc3RyaW5nIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scywgODApO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IGAgJHtsYWJlbH0gYDtcbiAgICBjb25zdCBwYWRkaW5nID0gTWF0aC5tYXgoMCwgbWF4V2lkdGggLSBsYWJlbFRleHQubGVuZ3RoKTtcbiAgICBjb25zdCBsZWZ0UGFkID0gTWF0aC5mbG9vcihwYWRkaW5nIC8gMik7XG4gICAgY29uc3QgcmlnaHRQYWQgPSBNYXRoLmNlaWwocGFkZGluZyAvIDIpO1xuXG4gICAgLy8gQ2xhdWRlIENvZGUgc3R5bGU6IOKVkOKVkCBoaXN0b3J5IOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkOKVkFxuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCfilZAnLnJlcGVhdChsZWZ0UGFkKSArIGxhYmVsVGV4dCArICfilZAnLnJlcGVhdChyaWdodFBhZCkpO1xuXG4gICAgcmV0dXJuIGBcXG4ke3NlcGFyYXRvcn1cXG4ke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGQgYSBjb21wYWN0IGNvbnZlcnNhdGlvbiBibG9jayB0byB0aGUgZXZlbnQgcXVldWVcbiAgICogVGhpcyBkaXNwbGF5cyBhIGNvbGxhcHNlZCB2aWV3IHdpdGggZXhwYW5zaW9uIGhpbnQgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKi9cbiAgYWRkQ29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHZvaWQge1xuICAgIGNvbnN0IGZvcm1hdHRlZENvbnRlbnQgPSB0aGlzLmZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50LCBsYWJlbCk7XG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiBmb3JtYXR0ZWRDb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgaXNDb21wYWN0ZWQ6IHRydWUsXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFN0YXR1cyAvIG1vZGUgLS0tLS0tLS0tLS0tXG5cbiAgc2V0TW9kZShtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyk6IHZvaWQge1xuICAgIGNvbnN0IHdhc1N0cmVhbWluZyA9IHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgIC8vIFRyYWNrIHN0cmVhbWluZyBzdGFydCB0aW1lIGZvciBlbGFwc2VkIGRpc3BsYXlcbiAgICBpZiAobW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSAwOyAvLyBSZXNldCB0b2tlbiBjb3VudFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBBbHdheXMgcmVuZGVyIHByb21wdCB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50IChyaWNoIG1vZGUgb25seSlcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHRoZSBhbmltYXRlZCBzcGlubmVyIGZvciBzdHJlYW1pbmcgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHJldHVybjsgLy8gQWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5zcGlubmVyRnJhbWUgPSAodGhpcy5zcGlubmVyRnJhbWUgKyAxKSAlIHNwaW5uZXJGcmFtZXMuYnJhaWxsZS5sZW5ndGg7XG4gICAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gKHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgKyAxKSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aDtcbiAgICAgIC8vIFJlLXJlbmRlciB0byBzaG93IHVwZGF0ZWQgc3Bpbm5lci9zdGFyIGZyYW1lXG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9LCA4MCk7IC8vIH4xMiBGUFMgZm9yIHNtb290aCBzcGlubmVyIGFuaW1hdGlvblxuICB9XG5cbiAgLyoqXG4gICAqIFN0b3AgdGhlIGFuaW1hdGVkIHNwaW5uZXJcbiAgICovXG4gIHByaXZhdGUgc3RvcFNwaW5uZXJBbmltYXRpb24oKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGFjdGl2aXR5IG1lc3NhZ2UgZGlzcGxheWVkIHdpdGggYW5pbWF0ZWQgc3RhclxuICAgKiBFeGFtcGxlOiBcIlJ1bWluYXRpbmfigKZcIiBzaG93cyBhcyBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiXG4gICAqL1xuICBzZXRBY3Rpdml0eShtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFVwZGF0ZSB0aGUgdG9rZW4gY291bnQgZGlzcGxheWVkIGluIHRoZSBhY3Rpdml0eSBsaW5lXG4gICAqL1xuICB1cGRhdGVTdHJlYW1pbmdUb2tlbnModG9rZW5zOiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IHRva2VucztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgdG9rZW4gY291bnQgYXMgY29tcGFjdCBzdHJpbmcgKGUuZy4sIDEuMmssIDI0aywgMTI4aylcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9rZW5Db3VudCh0b2tlbnM6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKHRva2VucyA8IDEwMDApIHJldHVybiBTdHJpbmcodG9rZW5zKTtcbiAgICBpZiAodG9rZW5zIDwgMTAwMDApIHJldHVybiBgJHsodG9rZW5zIC8gMTAwMCkudG9GaXhlZCgxKX1rYDtcbiAgICByZXR1cm4gYCR7TWF0aC5yb3VuZCh0b2tlbnMgLyAxMDAwKX1rYDtcbiAgfVxuXG4gIGdldE1vZGUoKTogJ2lkbGUnIHwgJ3N0cmVhbWluZycge1xuICAgIHJldHVybiB0aGlzLm1vZGU7XG4gIH1cblxuICB1cGRhdGVTdGF0dXMobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzQnVuZGxlKHsgbWFpbjogbWVzc2FnZSwgb3ZlcnJpZGU6IG51bGwsIHN0cmVhbWluZzogbnVsbCB9KTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c0J1bmRsZShcbiAgICBzdGF0dXM6IHsgbWFpbj86IHN0cmluZyB8IG51bGw7IG92ZXJyaWRlPzogc3RyaW5nIHwgbnVsbDsgc3RyZWFtaW5nPzogc3RyaW5nIHwgbnVsbCB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgcHJldlN0cmVhbWluZyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nO1xuICAgIGxldCBjaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG1haW5DaGFuZ2VkID0gZmFsc2U7XG4gICAgbGV0IG92ZXJyaWRlQ2hhbmdlZCA9IGZhbHNlO1xuXG4gICAgaWYgKHN0YXR1cy5tYWluICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm1haW4gIT09IHRoaXMuc3RhdHVzTWVzc2FnZSkge1xuICAgICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gc3RhdHVzLm1haW47XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG1haW5DaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHN0YXR1cy5vdmVycmlkZSAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5vdmVycmlkZSAhPT0gdGhpcy5zdGF0dXNPdmVycmlkZSkge1xuICAgICAgdGhpcy5zdGF0dXNPdmVycmlkZSA9IHN0YXR1cy5vdmVycmlkZTtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgb3ZlcnJpZGVDaGFuZ2VkID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdDaGFuZ2VkID0gc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IHByZXZTdHJlYW1pbmc7XG4gICAgaWYgKHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCkge1xuICAgICAgaWYgKHN0cmVhbWluZ0NoYW5nZWQpIHtcbiAgICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXR1c1N0cmVhbWluZyA9IHN0YXR1cy5zdHJlYW1pbmc7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nSW50cm9kdWNlID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgcHJldlN0cmVhbWluZyA9PT0gbnVsbCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgc3RyZWFtaW5nQ2xlYXJlZCA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHN0YXR1cy5zdHJlYW1pbmcgPT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBvbmx5U3RyZWFtaW5nQ2hhbmdlZCA9IHN0cmVhbWluZ0NoYW5nZWQgJiYgIW1haW5DaGFuZ2VkICYmICFvdmVycmlkZUNoYW5nZWQ7XG4gICAgY29uc3Qgc2tpcFN0cmVhbWluZ1JlbmRlciA9XG4gICAgICBvbmx5U3RyZWFtaW5nQ2hhbmdlZCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICFzdHJlYW1pbmdJbnRyb2R1Y2UgJiYgIXN0cmVhbWluZ0NsZWFyZWQ7XG5cbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZCAmJiAhc2tpcFN0cmVhbWluZ1JlbmRlcjtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZVN0YXR1c01ldGEoXG4gICAgbWV0YToge1xuICAgICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICAgIHNlc3Npb25UaW1lPzogc3RyaW5nO1xuICAgICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgICAgd29ya3NwYWNlPzogc3RyaW5nO1xuICAgICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgICAgd3JpdGVzPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvbkxhYmVsPzogc3RyaW5nO1xuICAgICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICAgIHZlcnNpb24/OiBzdHJpbmc7XG4gICAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgICB9LFxuICAgIG9wdGlvbnM6IHsgcmVuZGVyPzogYm9vbGVhbiB9ID0ge31cbiAgKTogdm9pZCB7XG4gICAgY29uc3QgbmV4dCA9IHsgLi4udGhpcy5zdGF0dXNNZXRhLCAuLi5tZXRhIH07XG4gICAgY29uc3QgY2hhbmdlZCA9IEpTT04uc3RyaW5naWZ5KG5leHQpICE9PSBKU09OLnN0cmluZ2lmeSh0aGlzLnN0YXR1c01ldGEpO1xuICAgIHRoaXMuc3RhdHVzTWV0YSA9IG5leHQ7XG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQ7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVNb2RlVG9nZ2xlcyhzdGF0ZTogUGFydGlhbDxNb2RlVG9nZ2xlU3RhdGU+KTogdm9pZCB7XG4gICAgdGhpcy50b2dnbGVTdGF0ZSA9IHsgLi4udGhpcy50b2dnbGVTdGF0ZSwgLi4uc3RhdGUgfTtcbiAgICBpZiAoXG4gICAgICAhc3RhdGUudmVyaWZpY2F0aW9uSG90a2V5ICYmXG4gICAgICAhc3RhdGUudGhpbmtpbmdIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5jcml0aWNhbEFwcHJvdmFsSG90a2V5ICYmXG4gICAgICAhc3RhdGUuYXV0b0NvbnRpbnVlSG90a2V5ICYmXG4gICAgICAhc3RhdGUuZHVhbFJsSG90a2V5ICYmXG4gICAgICAhc3RhdGUuZGVidWdIb3RrZXlcbiAgICApIHtcbiAgICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5jbGVhcigpO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgc2V0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IChsaW5lcyA/PyBbXSkubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC9cXHMrJC9nLCAnJykpO1xuICAgIGNvbnN0IGhhc0NvbnRlbnQgPSBub3JtYWxpemVkLnNvbWUoKGxpbmUpID0+IGxpbmUudHJpbSgpLmxlbmd0aCA+IDApO1xuICAgIGlmICghaGFzQ29udGVudCkge1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgbGltaXRlZCA9IHRoaXMubGltaXRJbmxpbmVQYW5lbChub3JtYWxpemVkKTtcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkobGltaXRlZCkgPT09IEpTT04uc3RyaW5naWZ5KHRoaXMuaW5saW5lUGFuZWwpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuaW5saW5lUGFuZWwgPSBsaW1pdGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBzdXBwb3J0c0lubGluZVBhbmVsKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLnBsYWluTW9kZTtcbiAgfVxuXG4gIGNsZWFySW5saW5lUGFuZWwoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlubGluZVBhbmVsLmxlbmd0aCkgcmV0dXJuO1xuICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsaW1pdElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhMaW5lcyA9IE1hdGgubWF4KDQsIE1hdGgubWluKHRoaXMubWF4SW5saW5lUGFuZWxMaW5lcywgTWF0aC5tYXgoMiwgdGhpcy5yb3dzIC0gOCkpKTtcbiAgICBpZiAobGluZXMubGVuZ3RoIDw9IG1heExpbmVzKSB7XG4gICAgICByZXR1cm4gbGluZXM7XG4gICAgfVxuICAgIGNvbnN0IG92ZXJmbG93ID0gbGluZXMubGVuZ3RoIC0gbWF4TGluZXM7XG4gICAgY29uc3QgaW5kaWNhdG9yID0gdGhlbWUudWkubXV0ZWQoYOKApiAke292ZXJmbG93fSBtb3JlIGxpbmVzYCk7XG4gICAgY29uc3QgdGFpbENvdW50ID0gTWF0aC5tYXgoMSwgbWF4TGluZXMgLSAxKTtcbiAgICBjb25zdCB0YWlsID0gbGluZXMuc2xpY2UoLXRhaWxDb3VudCk7XG4gICAgcmV0dXJuIFtpbmRpY2F0b3IsIC4uLnRhaWxdO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFByb21wdCByZW5kZXJpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHQoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHJldHVybjtcblxuICAgIC8vIFRocm90dGxlIHJlbmRlcnMgdG8gcHJldmVudCBleGNlc3NpdmUgcmVkcmF3cyBkdXJpbmcgcmFwaWQgaW5wdXRcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmIChub3cgLSB0aGlzLmxhc3RSZW5kZXJUaW1lIDwgdGhpcy5yZW5kZXJUaHJvdHRsZU1zKSB7XG4gICAgICBpZiAoIXRoaXMucGVuZGluZ1JlbmRlcikge1xuICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSB0cnVlO1xuICAgICAgICAvLyBUcmFjayB0aGUgdGltZXIgZm9yIGNsZWFudXBcbiAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICAgICAgICB0aGlzLnBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgICAgICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9LCB0aGlzLnJlbmRlclRocm90dGxlTXMpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTogdm9pZCB7XG4gICAgLy8gRG9uJ3QgcmVuZGVyIGlmIGRpc3Bvc2VkXG4gICAgaWYgKHRoaXMuZGlzcG9zZWQpIHJldHVybjtcblxuICAgIHRoaXMubGFzdFJlbmRlclRpbWUgPSBEYXRlLm5vdygpO1xuXG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkKSB7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBjb25zdCBsaW5lID0gYD4gJHt0aGlzLmJ1ZmZlcn1gO1xuICAgICAgaWYgKCF0aGlzLmlzUHJvbXB0QWN0aXZlICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoYFxcciR7RVNDLkNMRUFSX0xJTkV9JHtsaW5lfWApO1xuICAgICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gbGluZS5sZW5ndGggKyAxO1xuICAgICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IHRydWU7XG4gICAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gdHJ1ZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmYWxzZTsgLy8gcHJvbXB0IGVuZHMgbWlkLWxpbmUgYnkgZGVzaWduXG4gICAgICB0aGlzLnByb21wdEhlaWdodCA9IDE7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmFsbG93UHJvbXB0UmVuZGVyKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gUmljaCBpbmxpbmUgbW9kZTogcHJvbXB0IGZsb3dzIG5hdHVyYWxseSB3aXRoIGNvbnRlbnRcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICB0aGlzLmxhc3RSZW5kZXJXaWR0aCA9IG1heFdpZHRoO1xuXG4gICAgY29uc3Qgb3ZlcmxheSA9IHRoaXMuYnVpbGRPdmVybGF5TGluZXMoKTtcbiAgICBpZiAoIW92ZXJsYXkubGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcmVuZGVyZWRMaW5lcyA9IG92ZXJsYXkubGluZXMubWFwKGxpbmUgPT4gdGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICBpZiAoIXJlbmRlcmVkTGluZXMubGVuZ3RoKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBNYXRoLm1heCgwLCBNYXRoLm1pbihvdmVybGF5LnByb21wdEluZGV4LCByZW5kZXJlZExpbmVzLmxlbmd0aCAtIDEpKTtcbiAgICBjb25zdCBoZWlnaHQgPSByZW5kZXJlZExpbmVzLmxlbmd0aDtcblxuICAgIC8vIENsZWFyIHByZXZpb3VzIHByb21wdCBhbmQgaGFuZGxlIGhlaWdodCBjaGFuZ2VzXG4gICAgLy8gTm90ZTogV2UgY2hlY2sgbGFzdE92ZXJsYXlIZWlnaHQgPiAwIHRvIGtub3cgaWYgdGhlcmUncyBzb21ldGhpbmcgdG8gY2xlYXIsXG4gICAgLy8gYnV0IHdlIHVzZSBsYXN0T3ZlcmxheT8ucHJvbXB0SW5kZXggZm9yIGN1cnNvciBwb3NpdGlvbmluZyAoZGVmYXVsdGluZyB0byAwIGlmIGNsZWFyZWQpXG4gICAgaWYgKHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSAmJiB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID4gMCkge1xuICAgICAgLy8gTW92ZSB1cCBmcm9tIHByb21wdCByb3cgdG8gdG9wIG9mIG92ZXJsYXlcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCA/PyAwO1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENsZWFyIGFsbCBwcmV2aW91cyBsaW5lc1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0OyBpKyspIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICAgIHRoaXMud3JpdGUoRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgICBpZiAoaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgLSAxKSB7XG4gICAgICAgICAgdGhpcy53cml0ZSgnXFx4MWJbQicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIElmIG5ldyBoZWlnaHQgaXMgZ3JlYXRlciwgd2UgbmVlZCB0byBhZGQgYmxhbmsgbGluZXNcbiAgICAgIGNvbnN0IGV4dHJhTGluZXMgPSBoZWlnaHQgLSB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0O1xuICAgICAgaWYgKGV4dHJhTGluZXMgPiAwKSB7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZXh0cmFMaW5lczsgaSsrKSB7XG4gICAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gTW92ZSBiYWNrIHRvIHRvcCBvZiB3aGVyZSBvdmVybGF5IHNob3VsZCBzdGFydFxuICAgICAgY29uc3QgbW92ZUJhY2tVcCA9IE1hdGgubWF4KDAsIGhlaWdodCAtIDEpO1xuICAgICAgaWYgKG1vdmVCYWNrVXAgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bW92ZUJhY2tVcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgcHJvbXB0IGxpbmVzIChubyB0cmFpbGluZyBuZXdsaW5lIG9uIGxhc3QgbGluZSlcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHRoaXMud3JpdGUoJ1xccicpO1xuICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICB0aGlzLndyaXRlKHJlbmRlcmVkTGluZXNbaV0gfHwgJycpO1xuICAgICAgaWYgKGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUG9zaXRpb24gY3Vyc29yIGF0IHByb21wdCBpbnB1dCBsaW5lXG4gICAgY29uc3QgcHJvbXB0Q29sID0gTWF0aC5taW4oTWF0aC5tYXgoMSwgMyArIHRoaXMuY3Vyc29yKSwgdGhpcy5jb2xzIHx8IDgwKTtcbiAgICAvLyBDdXJzb3IgaXMgbm93IGF0IHRoZSBsYXN0IGxpbmUuIE1vdmUgdXAgdG8gdGhlIHByb21wdCByb3cuXG4gICAgY29uc3QgbGluZXNUb01vdmVVcCA9IGhlaWdodCAtIDEgLSBwcm9tcHRJbmRleDtcbiAgICBpZiAobGluZXNUb01vdmVVcCA+IDApIHtcbiAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb01vdmVVcH1BYCk7XG4gICAgfVxuICAgIHRoaXMud3JpdGUoYFxceDFiWyR7cHJvbXB0Q29sfUdgKTtcblxuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IHByb21wdENvbDtcbiAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICB0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgPSB0cnVlO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSBoZWlnaHQ7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IHsgbGluZXM6IHJlbmRlcmVkTGluZXMsIHByb21wdEluZGV4IH07XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gaGVpZ2h0O1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE92ZXJsYXlMaW5lcygpOiB7IGxpbmVzOiBzdHJpbmdbXTsgcHJvbXB0SW5kZXg6IG51bWJlciB9IHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgLy8gU2ltcGxlIGhvcml6b250YWwgZGl2aWRlciAtIGNsZWFuIGFuZCByZWxpYWJsZVxuICAgIGNvbnN0IGRpdmlkZXIgPSB0aGVtZS51aS5tdXRlZCgn4pSAJy5yZXBlYXQobWF4V2lkdGgpKTtcblxuICAgIGNvbnN0IGZhbGxiYWNrQWN0aXZpdHkgPSAoKCkgPT4ge1xuICAgICAgY29uc3QgcmF3ID0gdGhpcy5zdGF0dXNTdHJlYW1pbmcgfHwgdGhpcy5zdGF0dXNPdmVycmlkZSB8fCB0aGlzLnN0YXR1c01lc3NhZ2U7XG4gICAgICBpZiAoIXJhdykgcmV0dXJuIG51bGw7XG4gICAgICBjb25zdCBjbGVhbmVkID0gdGhpcy5zdHJpcEFuc2kocmF3KS5yZXBsYWNlKC9eW+KPuuKAol1cXHMqLywgJycpLnRyaW0oKTtcbiAgICAgIHJldHVybiBjbGVhbmVkIHx8IG51bGw7XG4gICAgfSkoKTtcblxuICAgIC8vIEFjdGl2aXR5IGxpbmUgKG9ubHkgd2hlbiBzdHJlYW1pbmcpIC0gc2hvd3M6IOKXkCBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cylcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAodGhpcy5hY3Rpdml0eU1lc3NhZ2UgfHwgZmFsbGJhY2tBY3Rpdml0eSkpIHtcbiAgICAgIC8vIENsZWFuIHNwaW5uZXIgYW5pbWF0aW9uIHVzaW5nIGJyYWlsbGUgZG90cyAoc21vb3RoZXIsIG1vcmUgcHJvZmVzc2lvbmFsKVxuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gWyfioIsnLCAn4qCZJywgJ+KguScsICfioLgnLCAn4qC8JywgJ+KgtCcsICfioKYnLCAn4qCnJywgJ+KghycsICfioI8nXTtcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFyID0gc3Bpbm5lckNoYXJzW3RoaXMuc3Bpbm5lckZyYW1lICUgc3Bpbm5lckNoYXJzLmxlbmd0aF0gPz8gJ+Kgiyc7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy5mb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk7XG4gICAgICBjb25zdCBnZW5lcmljQWN0aXZpdGllcyA9IFsnU3RyZWFtaW5nJywgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnXTtcbiAgICAgIGxldCBkaXNwbGF5QWN0aXZpdHkgPSB0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5IHx8ICcnO1xuICAgICAgaWYgKGdlbmVyaWNBY3Rpdml0aWVzLmluY2x1ZGVzKGRpc3BsYXlBY3Rpdml0eSkgJiYgZmFsbGJhY2tBY3Rpdml0eSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5O1xuICAgICAgfVxuICAgICAgaWYgKCFkaXNwbGF5QWN0aXZpdHkudHJpbSgpKSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHkgfHwgJ1dvcmtpbmcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVlZHNFbGxpcHNpcyA9ICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCfigKYnKSAmJiAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgnLi4uJyk7XG4gICAgICAvLyBGb3JtYXQ6IOKgiyBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDFtIDE5cyDCtyDihpExLjJrIHRva2VucylcbiAgICAgIGNvbnN0IHBhcnRzID0gWydlc2MgdG8gaW50ZXJydXB0J107XG4gICAgICBpZiAoZWxhcHNlZCkgcGFydHMucHVzaChlbGFwc2VkKTtcbiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1Rva2VucyA+IDApIHtcbiAgICAgICAgcGFydHMucHVzaChg4oaRJHt0aGlzLmZvcm1hdFRva2VuQ291bnQodGhpcy5zdHJlYW1pbmdUb2tlbnMpfSB0b2tlbnNgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGFjdGl2aXR5TGluZSA9IGAke3RoZW1lLmluZm8oc3Bpbm5lckNoYXIpfSAke2Rpc3BsYXlBY3Rpdml0eS50cmltKCl9JHtuZWVkc0VsbGlwc2lzID8gJ+KApicgOiAnJ30gJHt0aGVtZS51aS5tdXRlZChgKCR7cGFydHMuam9pbignIMK3ICcpfSlgKX1gO1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShhY3Rpdml0eUxpbmUsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gVG9wIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvbXB0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IGxpbmVzLmxlbmd0aDtcbiAgICBjb25zdCBpbnB1dExpbmUgPSB0aGlzLmJ1aWxkSW5wdXRMaW5lKCk7XG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgYnkgc3BsaXR0aW5nIG9uIG5ld2xpbmVzXG4gICAgY29uc3QgaW5wdXRMaW5lcyA9IGlucHV0TGluZS5zcGxpdCgnXFxuJyk7XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGlucHV0TGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBCb3R0b20gZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbmxpbmUgcGFuZWwgKHBpbm5lZCBzY3JvbGwgYm94IGZvciBsaXZlIG91dHB1dC9tZW51cylcbiAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhbmVsTGluZSBvZiB0aGlzLmlubGluZVBhbmVsKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtwYW5lbExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRlIGlubGluZSBjb250ZW50IGZyb20gc3VnZ2VzdGlvbnMvdG9nZ2xlc1xuICAgICAgbGluZXMucHVzaChkaXZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyBTbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb25zXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW2luZGV4XSE7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaW5kZXggPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4O1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ+KWuCcpIDogdGhlbWUudWkubXV0ZWQoJyAnKTtcbiAgICAgICAgY29uc3QgY21kVGV4dCA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeShzdWdnZXN0aW9uLmNvbW1hbmQpIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5jb21tYW5kKTtcbiAgICAgICAgY29uc3QgZGVzY1RleHQgPSBpc0FjdGl2ZSA/IHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24gOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21hcmtlcn0gJHtjbWRUZXh0fSDigJQgJHtkZXNjVGV4dH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vZGVsIGFuZCBjb250ZXh0IGluZm9cbiAgICBjb25zdCBtb2RlbENvbnRleHRMaW5lID0gdGhpcy5idWlsZE1vZGVsQ29udGV4dExpbmUoKTtcbiAgICBpZiAobW9kZWxDb250ZXh0TGluZSkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21vZGVsQ29udGV4dExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBTdGF0dXMgKyBtZXRhIGJsb2NrIChpbmNsdWRlcyBkaXIvdmVyc2lvbi90b29sIHN1bW1hcnkpXG4gICAgY29uc3QgY2hyb21lTGluZXMgPSB0aGlzLmJ1aWxkQ2hyb21lTGluZXMoKTtcbiAgICBpZiAoY2hyb21lTGluZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGNocm9tZUxpbmUgb2YgY2hyb21lTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2Nocm9tZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlIHRvZ2dsZXNcbiAgICBjb25zdCB0b2dnbGVMaW5lcyA9IHRoaXMuYnVpbGRJbmxpbmVUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgdG9nZ2xlTGluZSBvZiB0b2dnbGVMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7dG9nZ2xlTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVnZW5kTGluZXMgPSB0aGlzLmJ1aWxkVG9nZ2xlTGVnZW5kKCk7XG4gICAgICBmb3IgKGNvbnN0IGxlZ2VuZCBvZiBsZWdlbmRMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7bGVnZW5kfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGVscCBoaW50XG4gICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RoZW1lLnVpLm11dGVkKCc/IGZvciBzaG9ydGN1dHMnKX1gLCBtYXhXaWR0aCkpO1xuXG4gICAgcmV0dXJuIHsgbGluZXMsIHByb21wdEluZGV4IH07XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbW9kZWwgbmFtZSBhbmQgY29udGV4dCB1c2FnZSBsaW5lIHdpdGggbWluaSBwcm9ncmVzcyBiYXJcbiAgICogRm9ybWF0OiBncHQtNCDCtyDilojilojilojilojilpHilpEgODUlIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYnVpbGRNb2RlbENvbnRleHRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gTW9kZWwgbmFtZSAocHJvdmlkZXIgLyBtb2RlbCBvciBqdXN0IG1vZGVsKVxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IMK3ICR7dGhpcy5zdGF0dXNNZXRhLm1vZGVsfWBcbiAgICAgIDogdGhpcy5zdGF0dXNNZXRhLm1vZGVsIHx8IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlcjtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuaW5mbyhtb2RlbCkpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWV0ZXIgd2l0aCBtaW5pIHByb2dyZXNzIGJhciAoc2hvd3MgdXNlZCBwZXJjZW50YWdlLCBub3QgcmVtYWluaW5nKVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdXNlZCA9IE1hdGgubWluKDEwMCwgTWF0aC5tYXgoMCwgdGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KSk7XG4gICAgICBjb25zdCBiYXJXaWR0aCA9IDY7XG4gICAgICBjb25zdCBmaWxsZWQgPSBNYXRoLnJvdW5kKCh1c2VkIC8gMTAwKSAqIGJhcldpZHRoKTtcbiAgICAgIGNvbnN0IGVtcHR5ID0gYmFyV2lkdGggLSBmaWxsZWQ7XG4gICAgICAvLyBDb2xvciBiYXNlZCBvbiBob3cgZnVsbCB0aGUgY29udGV4dCBpcyAoZ3JlZW49bG93IHVzYWdlLCB5ZWxsb3c9bWVkaXVtLCByZWQ9aGlnaClcbiAgICAgIGNvbnN0IGJhckNvbG9yID0gdXNlZCA8IDUwID8gdGhlbWUuc3VjY2VzcyA6IHVzZWQgPCA4MCA/IHRoZW1lLndhcm5pbmcgOiB0aGVtZS5lcnJvcjtcbiAgICAgIGNvbnN0IGJhciA9IGJhckNvbG9yKCfilognLnJlcGVhdChmaWxsZWQpKSArIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdChlbXB0eSkpO1xuICAgICAgcGFydHMucHVzaChgJHtiYXJ9ICR7YmFyQ29sb3IoYCR7dXNlZH0lYCl9ICR7dGhlbWUudWkubXV0ZWQoJ2N0eCcpfWApO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICDCtyAgJykpIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBpbmxpbmUgdG9nZ2xlIGNvbnRyb2xzIC0gQ2xhdWRlIENvZGUgc3R5bGVcbiAgICogRm9ybWF0OiDij7Xij7UgYWNjZXB0IGVkaXRzIG9uIChzaGlmdCt0YWIgdG8gY3ljbGUpXG4gICAqIFJldHVybnMgd3JhcHBlZCBsaW5lcyB0byBlbnN1cmUgYWxsIHRvZ2dsZXMgKGluY2x1ZGluZyBSTCkgYXJlIHZpc2libGUgYmVsb3cgdGhlIGNoYXQgYm94LlxuICAgKi9cbiAgLyoqXG4gICAqIEJ1aWxkIHVuaWZpZWQgdG9nZ2xlIHN0YXR1cyBsaW5lIHdpdGggY29sb3ItY29kZWQgc3RhdGVzIGFuZCBpbnRlZ3JhdGVkIGV4cGxhbmF0aW9ucy5cbiAgICogRWFjaCB0b2dnbGUgaGFzIGEgZGlzdGluY3QgY29sb3IgZm9yIGVhc3kgaWRlbnRpZmljYXRpb24uXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzZWdtZW50cyB3aXRoIERJU1RJTkNUIGNvbG9ycyBmb3IgZWFjaCB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gMS4gUkwgbW9kZSAoQ1lBTikgLSBtdWx0aS1hZ2VudCB2cyBzaW5nbGUtcGFzc1xuICAgIGNvbnN0IHJsT24gPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQ7XG4gICAgY29uc3QgcmxJY29uID0gcmxPbiA/ICfwn6SWJyA6ICfimqEnO1xuICAgIGNvbnN0IHJsU3RhdHVzID0gcmxPbiA/IHRoZW1lLmluZm8oJ2R1YWwnKSA6IHRoZW1lLnVpLm11dGVkKCdzaW5nbGUnKTtcbiAgICBjb25zdCBybEV4cGxhaW4gPSBybE9uID8gJ211bHRpLWFnZW50JyA6ICdvbmUtcGFzcyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3JsSWNvbn0gJHtybFN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpURdJyl9ICR7dGhlbWUudWkubXV0ZWQocmxFeHBsYWluKX1gKTtcblxuICAgIC8vIDIuIEF1dG8tY29udGludWUgKE1BR0VOVEEvUFVSUExFKSAtIGtlZXAgZ29pbmcgdW50aWwgZG9uZVxuICAgIGNvbnN0IGNvbnRJY29uID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ/CflIQnIDogJ+KPuCc7XG4gICAgY29uc3QgY29udFN0YXR1cyA9IGF1dG9Db250aW51ZUFjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ2xvb3AnKSA6IHRoZW1lLnVpLm11dGVkKCdzdG9wJyk7XG4gICAgY29uc3QgY29udEV4cGxhaW4gPSBhdXRvQ29udGludWVBY3RpdmUgPyAndW50aWwgZG9uZScgOiAnZWFjaCByZXNwb25zZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2NvbnRJY29ufSAke2NvbnRTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVHXScpfSAke3RoZW1lLnVpLm11dGVkKGNvbnRFeHBsYWluKX1gKTtcblxuICAgIC8vIDMuIFZlcmlmeSAoWUVMTE9XKSAtIGF1dG8tdGVzdHMgYWZ0ZXIgZWRpdHNcbiAgICBjb25zdCB2ZXJpZnlJY29uID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ+KckycgOiAn4peLJztcbiAgICBjb25zdCB2ZXJpZnlTdGF0dXMgPSB2ZXJpZmljYXRpb25BY3RpdmUgPyB0aGVtZS53YXJuaW5nKCd0ZXN0JykgOiB0aGVtZS51aS5tdXRlZCgnc2tpcCcpO1xuICAgIGNvbnN0IHZlcmlmeUV4cGxhaW4gPSB2ZXJpZmljYXRpb25BY3RpdmUgPyAnYXV0by10ZXN0JyA6ICdubyB0ZXN0cyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3ZlcmlmeUljb259ICR7dmVyaWZ5U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylVl0nKX0gJHt0aGVtZS51aS5tdXRlZCh2ZXJpZnlFeHBsYWluKX1gKTtcblxuICAgIC8vIDQuIEFwcHJvdmFscyAoR1JFRU4vT1JBTkdFKSAtIGF1dG8gb3IgYXNrIGZvciBwZXJtaXNzaW9uXG4gICAgY29uc3QgYXBwckljb24gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAn8J+boScgOiAn4pyUJztcbiAgICBjb25zdCBhcHByU3RhdHVzID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gdGhlbWUud2FybmluZygnYXNrJykgOiB0aGVtZS5zdWNjZXNzKCdhdXRvJyk7XG4gICAgY29uc3QgYXBwckV4cGxhaW4gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAnY29uZmlybSBhbGwnIDogJ2F1dG8tYXBwcm92ZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2FwcHJJY29ufSAke2FwcHJTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVBXScpfSAke3RoZW1lLnVpLm11dGVkKGFwcHJFeHBsYWluKX1gKTtcblxuICAgIC8vIDUuIFRoaW5raW5nIChCTFVFKSAtIGJhbGFuY2VkIG9yIGRlZXAgcmVhc29uaW5nXG4gICAgY29uc3QgdGhpbmtpbmdJc0RlZXAgPSB0aGlua2luZ0xhYmVsID09PSAnZXh0ZW5kZWQnIHx8IHRoaW5raW5nTGFiZWwgPT09ICdkZWVwJztcbiAgICBjb25zdCB0aGlua0ljb24gPSB0aGlua2luZ0lzRGVlcCA/ICfwn6egJyA6ICfwn5KtJztcbiAgICBjb25zdCB0aGlua1N0YXR1cyA9IHRoaW5raW5nSXNEZWVwID8gdGhlbWUuaW5mbygnZGVlcCcpIDogdGhlbWUudWkubXV0ZWQoJ3F1aWNrJyk7XG4gICAgY29uc3QgdGhpbmtFeHBsYWluID0gdGhpbmtpbmdJc0RlZXAgPyAndGhvcm91Z2gnIDogJ2NvbmNpc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt0aGlua0ljb259ICR7dGhpbmtTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1tUQUJdJyl9ICR7dGhlbWUudWkubXV0ZWQodGhpbmtFeHBsYWluKX1gKTtcblxuICAgIC8vIDYuIERlYnVnIGxvZ2dpbmcgaW5kaWNhdG9yIChSRUQpIC0gdG9nZ2xlIHNob3dzIHdoZXRoZXIgY29uc29sZSBsb2dnaW5nIGlzIGVuYWJsZWRcbiAgICBjb25zdCBkZWJ1Z0FjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuZGVidWdFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IGRlYnVnSWNvbiA9IGRlYnVnQWN0aXZlID8gJ/CfkJ4nIDogJ/CflI0nO1xuICAgIGNvbnN0IGRlYnVnU3RhdHVzID0gZGVidWdBY3RpdmUgPyB0aGVtZS53YXJuaW5nKCdkZWJ1ZyBvbicpIDogdGhlbWUudWkubXV0ZWQoJ2RlYnVnIG9mZicpO1xuICAgIGNvbnN0IGRlYnVnRXhwbGFpbiA9IGRlYnVnQWN0aXZlID8gJ3ZlcmJvc2UgbG9ncycgOiAnc2lsZW50JztcbiAgICB0b2dnbGVzLnB1c2goYCR7ZGVidWdJY29ufSAke2RlYnVnU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbL2RlYnVnXScpfSAke3RoZW1lLnVpLm11dGVkKGRlYnVnRXhwbGFpbil9YCk7XG5cbiAgICAvLyA3LiBTaG9ydGN1dCBoaW50XG4gICAgdG9nZ2xlcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCc/IGhlbHAnKX1gKTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAyKTtcbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHModG9nZ2xlcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIExlZ2VuZCBpcyBub3cgaW50ZWdyYXRlZCBpbnRvIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSBmb3IgdW5pZmllZCBkaXNwbGF5XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGVnZW5kKCk6IHN0cmluZ1tdIHtcbiAgICAvLyBMZWdlbmQgZXhwbGFuYXRpb25zIG5vdyBpbnRlZ3JhdGVkIGRpcmVjdGx5IGludG8gdG9nZ2xlIGxpbmVcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ2hyb21lTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBzdGF0dXNMaW5lcyA9IHRoaXMuYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aCk7XG4gICAgY29uc3QgbWV0YUxpbmVzID0gdGhpcy5idWlsZE1ldGFCbG9jayhtYXhXaWR0aCk7XG4gICAgcmV0dXJuIFsuLi5zdGF0dXNMaW5lcywgLi4ubWV0YUxpbmVzXTtcbiAgfVxuXG4gIHByaXZhdGUgYWJicmV2aWF0ZVBhdGgocGF0aFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvbWUgPSBob21lZGlyKCk7XG4gICAgaWYgKGhvbWUgJiYgcGF0aFZhbHVlLnN0YXJ0c1dpdGgoaG9tZSkpIHtcbiAgICAgIHJldHVybiBwYXRoVmFsdWUucmVwbGFjZShob21lLCAnficpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFN0YXR1c0Jsb2NrKG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3RhdHVzTGFiZWwgPSB0aGlzLmNvbXBvc2VTdGF0dXNMYWJlbCgpO1xuICAgIGlmICghc3RhdHVzTGFiZWwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEFkZCBhbmltYXRlZCBzcGlubmVyIHdoZW4gc3RyZWFtaW5nIGZvciBkeW5hbWljIHZpc3VhbCBmZWVkYmFja1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0gJHt0aGlzLmFwcGx5VG9uZShzdGF0dXNMYWJlbC50ZXh0LCBzdGF0dXNMYWJlbC50b25lKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnc3RhdHVzJyl9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSkge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgncnVudGltZScpfSAke3RoZW1lLnVpLm11dGVkKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW5pbWF0ZWQgY29udGV4dCBtZXRlciBmb3Igc21vb3RoIGNvbG9yIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLmNvbnRleHRNZXRlci51cGRhdGUodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5jb250ZXh0TWV0ZXIucmVuZGVyKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1ldGFCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Byb2ZpbGUnLCB0aGlzLnN0YXR1c01ldGEucHJvZmlsZSwgJ2luZm8nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXIgJiYgdGhpcy5zdGF0dXNNZXRhLm1vZGVsXG4gICAgICA/IGAke3RoaXMuc3RhdHVzTWV0YS5wcm92aWRlcn0gLyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ21vZGVsJywgbW9kZWwsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2RpcicsIHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEud3JpdGVzKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3dyaXRlcycsIHRoaXMuc3RhdHVzTWV0YS53cml0ZXMsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5KSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Rvb2xzJywgdGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5LCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnc2Vzc2lvbicsIHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnZlcnNpb24pIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnYnVpbGQnLCBgdiR7dGhpcy5zdGF0dXNNZXRhLnZlcnNpb259YCwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgY29tcG9zZVN0YXR1c0xhYmVsKCk6IHsgdGV4dDogc3RyaW5nOyB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InIH0gfCBudWxsIHtcbiAgICBjb25zdCBzdGF0dXNlcyA9IFt0aGlzLnN0YXR1c1N0cmVhbWluZywgdGhpcy5zdGF0dXNPdmVycmlkZSwgdGhpcy5zdGF0dXNNZXNzYWdlXS5maWx0ZXIoXG4gICAgICAodmFsdWUsIGluZGV4LCBhcnIpOiB2YWx1ZSBpcyBzdHJpbmcgPT4gQm9vbGVhbih2YWx1ZSkgJiYgYXJyLmluZGV4T2YodmFsdWUpID09PSBpbmRleFxuICAgICk7XG4gICAgY29uc3QgdGV4dCA9IHN0YXR1c2VzLmxlbmd0aCA+IDAgPyBzdGF0dXNlcy5qb2luKCcgLyAnKSA6ICdSZWFkeSBmb3IgcHJvbXB0cyc7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyA9IG5vcm1hbGl6ZWQuaW5jbHVkZXMoJ3JlYWR5JykgPyAnc3VjY2VzcycgOiAnaW5mbyc7XG4gICAgcmV0dXJuIHsgdGV4dCwgdG9uZSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRNZXRhU2VnbWVudChcbiAgICBsYWJlbDogc3RyaW5nLFxuICAgIHZhbHVlOiBzdHJpbmcsXG4gICAgdG9uZTogJ2luZm8nIHwgJ3N1Y2Nlc3MnIHwgJ3dhcm4nIHwgJ2Vycm9yJyB8ICdtdXRlZCdcbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBjb2xvcml6ZXIgPVxuICAgICAgdG9uZSA9PT0gJ3N1Y2Nlc3MnXG4gICAgICAgID8gdGhlbWUuc3VjY2Vzc1xuICAgICAgICA6IHRvbmUgPT09ICd3YXJuJ1xuICAgICAgICAgID8gdGhlbWUud2FybmluZ1xuICAgICAgICAgIDogdG9uZSA9PT0gJ2Vycm9yJ1xuICAgICAgICAgICAgPyB0aGVtZS5lcnJvclxuICAgICAgICAgICAgOiB0b25lID09PSAnbXV0ZWQnXG4gICAgICAgICAgICAgID8gdGhlbWUudWkubXV0ZWRcbiAgICAgICAgICAgICAgOiB0aGVtZS5pbmZvO1xuICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9ICR7Y29sb3JpemVyKHZhbHVlKX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVRvbmUodGV4dDogc3RyaW5nLCB0b25lOiAnc3VjY2VzcycgfCAnaW5mbycgfCAnd2FybicgfCAnZXJyb3InKTogc3RyaW5nIHtcbiAgICBzd2l0Y2ggKHRvbmUpIHtcbiAgICAgIGNhc2UgJ3N1Y2Nlc3MnOlxuICAgICAgICByZXR1cm4gdGhlbWUuc3VjY2Vzcyh0ZXh0KTtcbiAgICAgIGNhc2UgJ3dhcm4nOlxuICAgICAgICByZXR1cm4gdGhlbWUud2FybmluZyh0ZXh0KTtcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmVycm9yKHRleHQpO1xuICAgICAgY2FzZSAnaW5mbyc6XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gdGhlbWUuaW5mbyh0ZXh0KTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIHdyYXBTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10sIG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJyAgfCAgJyk7XG5cbiAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHNlZ21lbnQudHJpbSgpO1xuICAgICAgaWYgKCFub3JtYWxpemVkKSBjb250aW51ZTtcbiAgICAgIGlmICghY3VycmVudCkge1xuICAgICAgICBjdXJyZW50ID0gdGhpcy50cnVuY2F0ZUxpbmUobm9ybWFsaXplZCwgbWF4V2lkdGgpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGAke2N1cnJlbnR9JHtzZXBhcmF0b3J9JHtub3JtYWxpemVkfWA7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPD0gbWF4V2lkdGgpIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShjdXJyZW50LCBtYXhXaWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRDb250cm9sTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHRvZ2dsZUxpbmUgPSB0aGlzLmJ1aWxkVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdtb2RlcycpfSAke3RoZW1lLnVpLm11dGVkKCfigLonKX0gJHt0b2dnbGVMaW5lfWApO1xuICAgIH1cblxuICAgIGNvbnN0IHNob3J0Y3V0TGluZSA9IHRoaXMuYnVpbGRTaG9ydGN1dExpbmUoKTtcbiAgICBpZiAoc2hvcnRjdXRMaW5lKSB7XG4gICAgICBsaW5lcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCdrZXlzJyl9ICAke3Nob3J0Y3V0TGluZX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgYSBjb21wYWN0IHRvZ2dsZSBsaW5lIGxpa2UgQ2xhdWRlIENvZGU6XG4gICAqIFwi4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVwiXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkQ29tcGFjdFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgLy8gU2hvdyB0aGUgbW9zdCByZWxldmFudCBtb2RlIGJhc2VkIG9uIGN1cnJlbnQgc3RhdGVcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkO1xuXG4gICAgLy8gRWRpdCBtb2RlIGluZGljYXRvclxuICAgIGNvbnN0IGVkaXRJY29uID0gJ+KPteKPtSc7XG4gICAgY29uc3QgZWRpdFN0YXRlID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2FwcHJvdmFsIHJlcXVpcmVkJyA6ICdhY2NlcHQgZWRpdHMnO1xuICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoZWRpdEljb24pfSAke2VkaXRTdGF0ZX0gJHt0aGVtZS5zdWNjZXNzKCdvbicpfWApO1xuXG4gICAgLy8gVGhpbmtpbmcgbW9kZSAoaWYgYWN0aXZlKVxuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPSAodGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ01vZGVMYWJlbCB8fCAnJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKHRoaW5raW5nTGFiZWwgJiYgdGhpbmtpbmdMYWJlbCAhPT0gJ29mZicpIHtcbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3RoaW5raW5nJyl9ICR7dGhlbWUuaW5mbyh0aGlua2luZ0xhYmVsKX1gKTtcbiAgICB9XG5cbiAgICAvLyBDeWNsZSBoaW50XG4gICAgY29uc3QgY3ljbGVIaW50ID0gdGhlbWUudWkubXV0ZWQoJyhzaGlmdCt0YWIgdG8gY3ljbGUpJyk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSAke2N5Y2xlSGludH1gO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9nZ2xlczogQXJyYXk8e1xuICAgICAgbGFiZWw6IHN0cmluZztcbiAgICAgIG9uOiBib29sZWFuO1xuICAgICAgdmFsdWU/OiBzdHJpbmc7XG4gICAgICBob3RrZXk/OiBzdHJpbmcgfCBudWxsO1xuICAgIH0+ID0gW107XG5cbiAgICBjb25zdCBhZGRUb2dnbGUgPSAobGFiZWw6IHN0cmluZywgb246IGJvb2xlYW4sIGhvdGtleT86IHN0cmluZywgdmFsdWU/OiBzdHJpbmcpID0+IHtcbiAgICAgIHRvZ2dsZXMucHVzaCh7IGxhYmVsLCBvbiwgaG90a2V5OiB0aGlzLmZvcm1hdEhvdGtleShob3RrZXkpLCB2YWx1ZSB9KTtcbiAgICB9O1xuXG4gICAgY29uc3QgYXV0b1ZlcmlmeUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgfHwgYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBjb25zdCB2ZXJpZnlWYWx1ZSA9IGF1dG9WZXJpZnlBY3RpdmVcbiAgICAgID8gJ2F1dG8nXG4gICAgICA6IHZlcmlmaWNhdGlvbkFjdGl2ZVxuICAgICAgICA/ICdvbidcbiAgICAgICAgOiAnb2ZmJztcblxuICAgIGFkZFRvZ2dsZSgnVmVyaWZ5JywgdmVyaWZpY2F0aW9uQWN0aXZlLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSwgdmVyaWZ5VmFsdWUpO1xuICAgIGNvbnN0IGFwcHJvdmFsTW9kZSA9IHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbE1vZGUgfHwgJ2F1dG8nO1xuICAgIGNvbnN0IGFwcHJvdmFsQWN0aXZlID0gYXBwcm92YWxNb2RlICE9PSAnYXV0byc7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0FwcHJvdmFscycsXG4gICAgICBhcHByb3ZhbEFjdGl2ZSxcbiAgICAgIHRoaXMudG9nZ2xlU3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSxcbiAgICAgIGFwcHJvdmFsTW9kZSA9PT0gJ2F1dG8nID8gJ2F1dG8nIDogJ2FzaydcbiAgICApO1xuXG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gYXV0b1ZlcmlmeUFjdGl2ZTtcbiAgICBhZGRUb2dnbGUoXG4gICAgICAnQXV0by1jb250aW51ZScsXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSxcbiAgICAgIGF1dG9Db250aW51ZUFjdGl2ZSA/ICdhdXRvLXZlcmlmeScgOiAnb2ZmJ1xuICAgICk7XG5cbiAgICBjb25zdCB0aGlua2luZ0xhYmVsUmF3ID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpO1xuICAgIGNvbnN0IHRoaW5raW5nTGFiZWwgPVxuICAgICAgdGhpbmtpbmdMYWJlbFJhdy50b0xvd2VyQ2FzZSgpID09PSAnZXh0ZW5kZWQnID8gJ2RlZXAnIDogdGhpbmtpbmdMYWJlbFJhdyB8fCAnYmFsYW5jZWQnO1xuICAgIGNvbnN0IHRoaW5raW5nQWN0aXZlID0gdGhpbmtpbmdMYWJlbC5sZW5ndGggPiAwO1xuICAgIGFkZFRvZ2dsZSgnVGhpbmtpbmcnLCB0aGlua2luZ0FjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS50aGlua2luZ0hvdGtleSwgdGhpbmtpbmdMYWJlbCk7XG5cbiAgICBjb25zdCBkdWFsUmxBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgbW9kZVZhbHVlID0gZHVhbFJsQWN0aXZlID8gJ2R1YWwtcmwtY29udCcgOiAnc2luZ2xlLWNvbnQnO1xuICAgIGFkZFRvZ2dsZSgnTW9kZScsIGR1YWxSbEFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxIb3RrZXksIG1vZGVWYWx1ZSk7XG5cbiAgICBjb25zdCBidWlsZExpbmUgPSAoaW5jbHVkZUhvdGtleXM6IGJvb2xlYW4pOiBzdHJpbmcgPT4ge1xuICAgICAgcmV0dXJuIHRvZ2dsZXNcbiAgICAgICAgLm1hcCh0b2dnbGUgPT4ge1xuICAgICAgICAgIGNvbnN0IHN0YXRlVGV4dCA9IHRvZ2dsZS5vbiA/IHRoZW1lLnN1Y2Nlc3ModG9nZ2xlLnZhbHVlIHx8ICdvbicpIDogdGhlbWUudWkubXV0ZWQodG9nZ2xlLnZhbHVlIHx8ICdvZmYnKTtcbiAgICAgICAgICBjb25zdCBob3RrZXlUZXh0ID1cbiAgICAgICAgICAgIGluY2x1ZGVIb3RrZXlzICYmIHRvZ2dsZS5ob3RrZXkgPyB0aGVtZS51aS5tdXRlZChgIFske3RvZ2dsZS5ob3RrZXl9XWApIDogJyc7XG4gICAgICAgICAgcmV0dXJuIGAke3RoZW1lLnVpLm11dGVkKGAke3RvZ2dsZS5sYWJlbH06YCl9ICR7c3RhdGVUZXh0fSR7aG90a2V5VGV4dH1gO1xuICAgICAgICB9KVxuICAgICAgICAuam9pbih0aGVtZS51aS5tdXRlZCgnICAnKSk7XG4gICAgfTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBsZXQgbGluZSA9IGJ1aWxkTGluZSh0cnVlKTtcblxuICAgIC8vIFJlY29yZCB3aGljaCBob3RrZXlzIGFyZSBhY3R1YWxseSBzaG93biBzbyB0aGUgc2hvcnRjdXQgbGluZSBjYW4gYXZvaWQgZHVwbGljYXRlc1xuICAgIHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZSA9IG5ldyBTZXQoXG4gICAgICB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+ICh0b2dnbGUuaG90a2V5ID8gdG9nZ2xlLmhvdGtleSA6IG51bGwpKVxuICAgICAgICAuZmlsdGVyKChrZXkpOiBrZXkgaXMgc3RyaW5nID0+IEJvb2xlYW4oa2V5KSlcbiAgICApO1xuXG4gICAgLy8gSWYgdGhlIGxpbmUgaXMgdG9vIHdpZGUsIGRyb3AgaG90a2V5IGhpbnRzIHRvIHByZXNlcnZlIGFsbCB0b2dnbGUgbGFiZWxzXG4gICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChsaW5lKSA+IG1heFdpZHRoKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICAgIGxpbmUgPSBidWlsZExpbmUoZmFsc2UpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lLnRyaW0oKSA/IGxpbmUgOiBudWxsO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFNob3J0Y3V0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIGNvbnN0IGFkZEhvdGtleSA9IChsYWJlbDogc3RyaW5nLCBjb21ibz86IHN0cmluZykgPT4ge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuZm9ybWF0SG90a2V5KGNvbWJvKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuICAgICAgaWYgKHRoaXMuaG90a2V5c0luVG9nZ2xlTGluZS5oYXMobm9ybWFsaXplZCkpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgcGFydHMucHVzaChgJHt0aGVtZS5pbmZvKG5vcm1hbGl6ZWQpfSAke3RoZW1lLnVpLm11dGVkKGxhYmVsKX1gKTtcbiAgICB9O1xuXG4gICAgLy8gQ29yZSBjb250cm9sc1xuICAgIGFkZEhvdGtleSgnaW50ZXJydXB0JywgJ0N0cmwrQycpO1xuICAgIGFkZEhvdGtleSgnY2xlYXIgaW5wdXQnLCAnQ3RybCtVJyk7XG5cbiAgICAvLyBGZWF0dXJlIHRvZ2dsZXMgKG9ubHkgaWYgaG90a2V5cyBhcmUgZGVmaW5lZClcbiAgICBhZGRIb3RrZXkoJ3ZlcmlmeScsIHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ2F1dG8tY29udGludWUnLCB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUhvdGtleSk7XG4gICAgYWRkSG90a2V5KCd0aGlua2luZycsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgnbW9kZScsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5KTtcblxuICAgIGlmIChwYXJ0cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICByZXR1cm4gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICAgJykpO1xuICB9XG5cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRMaW5lKCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIGNvbnN0IHN1bW1hcnkgPSBgW3Bhc3RlZCAke3RoaXMuY29sbGFwc2VkUGFzdGUubGluZXN9IGxpbmVzLCAke3RoaXMuY29sbGFwc2VkUGFzdGUuY2hhcnN9IGNoYXJzXSAoQ3RybCtMIGluc2VydCwgQmFja3NwYWNlIGRpc2NhcmQpYDtcbiAgICAgIHJldHVybiB0aGlzLnRydW5jYXRlTGluZShgJHt0aGVtZS5wcmltYXJ5KCc+ICcpfSR7dGhlbWUudWkubXV0ZWQoc3VtbWFyeSl9YCwgdGhpcy5zYWZlV2lkdGgoKSk7XG4gICAgfVxuXG4gICAgLy8gQ2xhdWRlIENvZGUgdXNlcyBzaW1wbGUgJz4nIHByb21wdFxuICAgIGNvbnN0IHByb21wdCA9IHRoZW1lLnByaW1hcnkoJz4gJyk7XG4gICAgY29uc3QgcHJvbXB0V2lkdGggPSB0aGlzLnZpc2libGVMZW5ndGgocHJvbXB0KTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3QgY29udGludWF0aW9uSW5kZW50ID0gJyAgJzsgLy8gMiBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbldpZHRoID0gY29udGludWF0aW9uSW5kZW50Lmxlbmd0aDtcblxuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IC0gc3BsaXQgYnVmZmVyIG9uIG5ld2xpbmVzIGZpcnN0XG4gICAgLy8gSW4gc2VjcmV0IG1vZGUsIG1hc2sgYWxsIGNoYXJhY3RlcnMgd2l0aCBidWxsZXRzXG4gICAgY29uc3QgcmF3QnVmZmVyID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5zZWNyZXRNb2RlID8gJ+KAoicucmVwZWF0KHJhd0J1ZmZlci5sZW5ndGgpIDogcmF3QnVmZmVyO1xuICAgIGNvbnN0IGJ1ZmZlckxpbmVzID0gbm9ybWFsaXplZC5zcGxpdCgnXFxuJyk7XG5cbiAgICAvLyBXcmFwIGVhY2ggbG9naWNhbCBsaW5lIHRvIGZpdCB0ZXJtaW5hbCB3aWR0aCwgZXhwYW5kaW5nIHZlcnRpY2FsbHlcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IHRvdGFsQ2hhcnMgPSAwO1xuICAgIGxldCBjdXJzb3JMaW5lID0gMDtcbiAgICBsZXQgY3Vyc29yQ29sID0gMDtcbiAgICBsZXQgZm91bmRDdXJzb3IgPSBmYWxzZTtcblxuICAgIGZvciAobGV0IGxpbmVJbmRleCA9IDA7IGxpbmVJbmRleCA8IGJ1ZmZlckxpbmVzLmxlbmd0aDsgbGluZUluZGV4KyspIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBidWZmZXJMaW5lc1tsaW5lSW5kZXhdID8/ICcnO1xuICAgICAgY29uc3QgaXNGaXJzdExvZ2ljYWxMaW5lID0gbGluZUluZGV4ID09PSAwO1xuICAgICAgY29uc3QgbGluZVN0YXJ0Q2hhciA9IHRvdGFsQ2hhcnM7XG5cbiAgICAgIC8vIERldGVybWluZSBhdmFpbGFibGUgd2lkdGggZm9yIHRoaXMgbGluZVxuICAgICAgY29uc3QgZmlyc3RMaW5lV2lkdGggPSBtYXhXaWR0aCAtIHByb21wdFdpZHRoO1xuICAgICAgY29uc3QgY29udExpbmVXaWR0aCA9IG1heFdpZHRoIC0gY29udGludWF0aW9uV2lkdGg7XG5cbiAgICAgIC8vIFdyYXAgdGhpcyBsb2dpY2FsIGxpbmUgaW50byBkaXNwbGF5IGxpbmVzXG4gICAgICBsZXQgcmVtYWluaW5nID0gbGluZTtcbiAgICAgIGxldCBpc0ZpcnN0RGlzcGxheUxpbmUgPSB0cnVlO1xuXG4gICAgICB3aGlsZSAocmVtYWluaW5nLmxlbmd0aCA+IDAgfHwgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpID8gZmlyc3RMaW5lV2lkdGggOiBjb250TGluZVdpZHRoO1xuICAgICAgICBjb25zdCBjaHVuayA9IHJlbWFpbmluZy5zbGljZSgwLCBhdmFpbGFibGVXaWR0aCk7XG4gICAgICAgIHJlbWFpbmluZyA9IHJlbWFpbmluZy5zbGljZShhdmFpbGFibGVXaWR0aCk7XG5cbiAgICAgICAgLy8gQnVpbGQgdGhlIGRpc3BsYXkgbGluZVxuICAgICAgICBsZXQgZGlzcGxheUxpbmU6IHN0cmluZztcbiAgICAgICAgaWYgKGlzRmlyc3RMb2dpY2FsTGluZSAmJiBpc0ZpcnN0RGlzcGxheUxpbmUpIHtcbiAgICAgICAgICBkaXNwbGF5TGluZSA9IGAke3Byb21wdH0ke2NodW5rfWA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtjb250aW51YXRpb25JbmRlbnR9JHtjaHVua31gO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVHJhY2sgY3Vyc29yIHBvc2l0aW9uXG4gICAgICAgIGlmICghZm91bmRDdXJzb3IpIHtcbiAgICAgICAgICBjb25zdCBjaHVua1N0YXJ0ID0gbGluZVN0YXJ0Q2hhciArIChsaW5lLmxlbmd0aCAtIHJlbWFpbmluZy5sZW5ndGggLSBjaHVuay5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IGNodW5rRW5kID0gY2h1bmtTdGFydCArIGNodW5rLmxlbmd0aDtcbiAgICAgICAgICBpZiAodGhpcy5jdXJzb3IgPj0gY2h1bmtTdGFydCAmJiB0aGlzLmN1cnNvciA8PSBjaHVua0VuZCkge1xuICAgICAgICAgICAgY3Vyc29yTGluZSA9IHJlc3VsdC5sZW5ndGg7XG4gICAgICAgICAgICBjb25zdCBvZmZzZXRJbkNodW5rID0gdGhpcy5jdXJzb3IgLSBjaHVua1N0YXJ0O1xuICAgICAgICAgICAgY3Vyc29yQ29sID0gKChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IHByb21wdFdpZHRoIDogY29udGludWF0aW9uV2lkdGgpICsgb2Zmc2V0SW5DaHVuaztcbiAgICAgICAgICAgIGZvdW5kQ3Vyc29yID0gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByZXN1bHQucHVzaChkaXNwbGF5TGluZSk7XG4gICAgICAgIGlzRmlyc3REaXNwbGF5TGluZSA9IGZhbHNlO1xuXG4gICAgICAgIC8vIElmIG5vdGhpbmcgbGVmdCBhbmQgdGhpcyB3YXMgYW4gZW1wdHkgbGluZSwgd2UgYWxyZWFkeSBhZGRlZCBpdFxuICAgICAgICBpZiAocmVtYWluaW5nLmxlbmd0aCA9PT0gMCAmJiBjaHVuay5sZW5ndGggPT09IDApIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICB0b3RhbENoYXJzICs9IGxpbmUubGVuZ3RoICsgMTsgLy8gKzEgZm9yIHRoZSBuZXdsaW5lIHNlcGFyYXRvclxuICAgIH1cblxuICAgIC8vIEhhbmRsZSBjdXJzb3IgYXQgdmVyeSBlbmRcbiAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICBjdXJzb3JMaW5lID0gTWF0aC5tYXgoMCwgcmVzdWx0Lmxlbmd0aCAtIDEpO1xuICAgICAgY29uc3QgbGFzdExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjdXJzb3JDb2wgPSB0aGlzLnZpc2libGVMZW5ndGgobGFzdExpbmUpO1xuICAgIH1cblxuICAgIC8vIEFkZCBjdXJzb3IgaGlnaGxpZ2h0IHRvIHRoZSBhcHByb3ByaWF0ZSBwb3NpdGlvblxuICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgY29uc3QgdGFyZ2V0TGluZSA9IHJlc3VsdFtjdXJzb3JMaW5lXSA/PyAnJztcbiAgICAgIGNvbnN0IHZpc2libGVQYXJ0ID0gdGhpcy5zdHJpcEFuc2kodGFyZ2V0TGluZSk7XG4gICAgICBjb25zdCBjdXJzb3JQb3MgPSBNYXRoLm1pbihjdXJzb3JDb2wsIHZpc2libGVQYXJ0Lmxlbmd0aCk7XG5cbiAgICAgIC8vIFJlYnVpbGQgdGhlIGxpbmUgd2l0aCBjdXJzb3IgaGlnaGxpZ2h0XG4gICAgICBjb25zdCBiZWZvcmUgPSB2aXNpYmxlUGFydC5zbGljZSgwLCBjdXJzb3JQb3MpO1xuICAgICAgY29uc3QgYXQgPSB2aXNpYmxlUGFydC5jaGFyQXQoY3Vyc29yUG9zKSB8fCAnICc7XG4gICAgICBjb25zdCBhZnRlciA9IHZpc2libGVQYXJ0LnNsaWNlKGN1cnNvclBvcyArIDEpO1xuXG4gICAgICAvLyBQcmVzZXJ2ZSB0aGUgcHJvbXB0L2luZGVudCBzdHlsaW5nXG4gICAgICBjb25zdCBwcmVmaXggPSBjdXJzb3JMaW5lID09PSAwID8gcHJvbXB0IDogY29udGludWF0aW9uSW5kZW50O1xuICAgICAgY29uc3QgdGV4dFBhcnQgPSBjdXJzb3JMaW5lID09PSAwID8gYmVmb3JlLnNsaWNlKHByb21wdFdpZHRoKSA6IGJlZm9yZS5zbGljZShjb250aW51YXRpb25XaWR0aCk7XG4gICAgICByZXN1bHRbY3Vyc29yTGluZV0gPSBgJHtwcmVmaXh9JHt0ZXh0UGFydH0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gO1xuICAgIH1cblxuICAgIC8vIFN0b3JlIGN1cnNvciBjb2x1bW4gZm9yIHRlcm1pbmFsIHBvc2l0aW9uaW5nXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gY3Vyc29yQ29sICsgMTtcblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSW5wdXRXaW5kb3coYXZhaWxhYmxlOiBudW1iZXIpOiB7IHRleHQ6IHN0cmluZzsgY3Vyc29yOiBudW1iZXIgfSB7XG4gICAgaWYgKGF2YWlsYWJsZSA8PSAwKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHJldHVybiB7IHRleHQ6ICcnLCBjdXJzb3I6IDAgfTtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5idWZmZXIucmVwbGFjZSgvXFxyL2csICdcXG4nKTtcbiAgICBjb25zdCBjdXJzb3JJbmRleCA9IE1hdGgubWluKHRoaXMuY3Vyc29yLCBub3JtYWxpemVkLmxlbmd0aCk7XG5cbiAgICBsZXQgb2Zmc2V0ID0gdGhpcy5pbnB1dFJlbmRlck9mZnNldDtcbiAgICBpZiAoY3Vyc29ySW5kZXggPCBvZmZzZXQpIHtcbiAgICAgIG9mZnNldCA9IGN1cnNvckluZGV4O1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGN1cnNvckluZGV4IC0gb2Zmc2V0IC0gYXZhaWxhYmxlICsgMTtcbiAgICBpZiAob3ZlcmZsb3cgPiAwKSB7XG4gICAgICBvZmZzZXQgKz0gb3ZlcmZsb3c7XG4gICAgfVxuICAgIGNvbnN0IG1heE9mZnNldCA9IE1hdGgubWF4KDAsIG5vcm1hbGl6ZWQubGVuZ3RoIC0gYXZhaWxhYmxlKTtcbiAgICBpZiAob2Zmc2V0ID4gbWF4T2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBtYXhPZmZzZXQ7XG4gICAgfVxuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSBvZmZzZXQ7XG5cbiAgICBjb25zdCB3aW5kb3cgPSBub3JtYWxpemVkLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgYXZhaWxhYmxlKTtcbiAgICBjb25zdCBkaXNwbGF5ID0gd2luZG93LnNwbGl0KCcnKS5tYXAoY2hhciA9PiAoY2hhciA9PT0gJ1xcbicgPyBORVdMSU5FX1BMQUNFSE9MREVSIDogY2hhcikpLmpvaW4oJycpO1xuICAgIGNvbnN0IGN1cnNvckluV2luZG93ID0gTWF0aC5taW4oZGlzcGxheS5sZW5ndGgsIE1hdGgubWF4KDAsIGN1cnNvckluZGV4IC0gb2Zmc2V0KSk7XG5cbiAgICBjb25zdCBiZWZvcmUgPSBkaXNwbGF5LnNsaWNlKDAsIGN1cnNvckluV2luZG93KTtcbiAgICBjb25zdCBhdCA9IGRpc3BsYXkuY2hhckF0KGN1cnNvckluV2luZG93KSB8fCAnICc7XG4gICAgY29uc3QgYWZ0ZXIgPSBkaXNwbGF5LnNsaWNlKGN1cnNvckluV2luZG93ICsgMSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdGV4dDogYCR7YmVmb3JlfSR7RVNDLlJFVkVSU0V9JHthdH0ke0VTQy5SRVNFVH0ke2FmdGVyfWAsXG4gICAgICBjdXJzb3I6IGN1cnNvckluV2luZG93LFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5jb2xsYXBzZWRQYXN0ZSkgcmV0dXJuO1xuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBjYXB0dXJlSW5wdXQob3B0aW9uczogeyBhbGxvd0VtcHR5PzogYm9vbGVhbjsgdHJpbT86IGJvb2xlYW47IHJlc2V0QnVmZmVyPzogYm9vbGVhbiB9ID0ge30pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBhbHJlYWR5IGluIHByb2dyZXNzJykpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnJlc2V0QnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0ge1xuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB0cmltOiBvcHRpb25zLnRyaW0gIT09IGZhbHNlLFxuICAgICAgICAgIGFsbG93RW1wdHk6IG9wdGlvbnMuYWxsb3dFbXB0eSA/PyBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbElucHV0Q2FwdHVyZShyZWFzb24/OiB1bmtub3duKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYXB0dXJlID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgdGhpcy5pbnB1dENhcHR1cmUgPSBudWxsO1xuICAgIGNhcHR1cmUucmVqZWN0Py4ocmVhc29uID8/IG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gIH1cblxuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgc2FmZVdpZHRoKCk6IG51bWJlciB7XG4gICAgY29uc3QgY29scyA9IHRoaXMub3V0cHV0LmlzVFRZID8gdGhpcy5jb2xzIHx8IDgwIDogODA7XG4gICAgcmV0dXJuIE1hdGgubWF4KDEsIGNvbHMgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgdmlzaWJsZUxlbmd0aCh2YWx1ZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gMDtcbiAgICByZXR1cm4gdGhpcy5zdHJpcEFuc2kodmFsdWUpLmxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgc3RyaXBBbnNpKHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIHJldHVybiB2YWx1ZS5yZXBsYWNlKC9cXHUwMDFCXFxbWzAtP10qWyAtL10qW0Atfl0vZywgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSB0cnVuY2F0ZUxpbmUodmFsdWU6IHN0cmluZywgd2lkdGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGxpbWl0ID0gTWF0aC5tYXgoMSwgd2lkdGgpO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgY29uc3QgdG9rZW5zID0gdmFsdWUuc3BsaXQoLyhcXHgxYlxcW1swLTk7XSptKS91KTtcbiAgICBsZXQgdmlzaWJsZSA9IDA7XG4gICAgbGV0IHRydW5jYXRlZCA9IGZhbHNlO1xuICAgIGxldCByZXN1bHQgPSAnJztcblxuICAgIGZvciAoY29uc3QgdG9rZW4gb2YgdG9rZW5zKSB7XG4gICAgICBpZiAoIXRva2VuKSBjb250aW51ZTtcbiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgICBpZiAoL15cXHgxYlxcW1swLTk7XSptJC91LnRlc3QodG9rZW4pKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAodmlzaWJsZSA+PSBsaW1pdCkge1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlbWFpbmluZyA9IGxpbWl0IC0gdmlzaWJsZTtcbiAgICAgIGlmICh0b2tlbi5sZW5ndGggPD0gcmVtYWluaW5nKSB7XG4gICAgICAgIHJlc3VsdCArPSB0b2tlbjtcbiAgICAgICAgdmlzaWJsZSArPSB0b2tlbi5sZW5ndGg7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjb25zdCBzbGljZUxlbmd0aCA9IE1hdGgubWF4KDAsIHJlbWFpbmluZyAtIDEpO1xuICAgICAgICBpZiAoc2xpY2VMZW5ndGggPiAwKSB7XG4gICAgICAgICAgcmVzdWx0ICs9IHRva2VuLnNsaWNlKDAsIHNsaWNlTGVuZ3RoKTtcbiAgICAgICAgICB2aXNpYmxlICs9IHNsaWNlTGVuZ3RoO1xuICAgICAgICB9XG4gICAgICAgIHJlc3VsdCArPSAn4oCmJztcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHRydW5jYXRlZCAmJiAhcmVzdWx0LmVuZHNXaXRoKEVTQy5SRVNFVCkpIHtcbiAgICAgIHJlc3VsdCArPSBFU0MuUkVTRVQ7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIGdldEJ1ZmZlcigpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLmJ1ZmZlcjtcbiAgfVxuXG4gIGdldEN1cnNvcigpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmN1cnNvcjtcbiAgfVxuXG4gIHNldEJ1ZmZlcih0ZXh0OiBzdHJpbmcsIGN1cnNvclBvcz86IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICAvLyBWYWxpZGF0ZSBjdXJzb3IgcG9zaXRpb24gdG8gcHJldmVudCBvdXQtb2YtYm91bmRzIGlzc3Vlc1xuICAgIGNvbnN0IHJlcXVlc3RlZEN1cnNvciA9IGN1cnNvclBvcyA/PyB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIE1hdGgubWluKHJlcXVlc3RlZEN1cnNvciwgdGV4dC5sZW5ndGgpKTtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0U2VjcmV0TW9kZShlbmFibGVkOiBib29sZWFuKTogdm9pZCB7XG4gICAgdGhpcy5zZWNyZXRNb2RlID0gZW5hYmxlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYXJCdWZmZXIoKTogdm9pZCB7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldE1vZGVTdGF0dXMoc3RhdHVzOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXMoc3RhdHVzKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTaG93IGEgY29tcGFjdGluZyBzdGF0dXMgd2l0aCBhbmltYXRlZCBzcGlubmVyIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogVXNlcyDinLsgY2hhcmFjdGVyIHdpdGggYW5pbWF0aW9uIHRvIGluZGljYXRlIGNvbnRleHQgY29tcGFjdGlvbiBpbiBwcm9ncmVzc1xuICAgKi9cbiAgc2hvd0NvbXBhY3RpbmdTdGF0dXMobWVzc2FnZTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcbiAgICAgICAgdGhpcy5zcGlubmVyRnJhbWUrKztcbiAgICAgICAgLy8gQ3ljbGUgYWN0aXZpdHkgcGhyYXNlIGV2ZXJ5IH40IHNlY29uZHMgKDUwIGZyYW1lcyBhdCA4MG1zKVxuICAgICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSA1MCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuYWN0aXZpdHlQaHJhc2VJbmRleCsrO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9LCA4MCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogSGlkZSB0aGUgY29tcGFjdGluZyBzdGF0dXMgYW5kIHN0b3Agc3Bpbm5lciBhbmltYXRpb25cbiAgICovXG4gIGhpZGVDb21wYWN0aW5nU3RhdHVzKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGVtaXRQcm9tcHQoY29udGVudDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wdXNoUHJvbXB0RXZlbnQoY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogRGlzcGxheSB1c2VyIHByb21wdCBpbW1lZGlhdGVseSBpbiBzY3JvbGxiYWNrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogV3JpdGVzIHN5bmNocm9ub3VzbHkgdG8gZW5zdXJlIGl0IGFwcGVhcnMgT05DRSBpbiBzY3JvbGxiYWNrIGJlZm9yZSBzdGF0dXMgdXBkYXRlcy5cbiAgICogVGhlIHByb21wdCBpbnB1dCBhcmVhIHdpbGwgdGhlbiBmbG9hdCBiZWxvdyB0aGlzIGFuZCBhbGwgc3Vic2VxdWVudCBldmVudHMuXG4gICAqL1xuICBwcml2YXRlIGRpc3BsYXlVc2VyUHJvbXB0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMubGFzdFByb21wdEV2ZW50ID0geyB0ZXh0OiBub3JtYWxpemVkLCBhdDogbm93IH07XG5cbiAgICAvLyBBZGQgdG8gZXZlbnQgcXVldWUgaW5zdGVhZCBvZiB3cml0aW5nIGRpcmVjdGx5IHRvIGVuc3VyZSBwcm9wZXIgcmVuZGVyaW5nXG4gICAgdGhpcy5hZGRFdmVudCgncHJvbXB0Jywgbm9ybWFsaXplZCk7XG4gIH1cblxuICByZW5kZXIoKTogdm9pZCB7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgZGVsYXkobXM6IG51bWJlcik6IFByb21pc2U8dm9pZD4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBMb3ctbGV2ZWwgaGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyaXRlKGRhdGE6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMub3V0cHV0LndyaXRlKGRhdGEpO1xuICB9XG5cbiAgcHJpdmF0ZSBwdXNoUHJvbXB0RXZlbnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0UHJvbXB0RXZlbnQgJiYgdGhpcy5sYXN0UHJvbXB0RXZlbnQudGV4dCA9PT0gbm9ybWFsaXplZCAmJiBub3cgLSB0aGlzLmxhc3RQcm9tcHRFdmVudC5hdCA8IDE1MDApIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHByaXZhdGUgY2xlYXJQcm9tcHRBcmVhKCk6IHZvaWQge1xuICAgIGNvbnN0IGhlaWdodCA9IHRoaXMubGFzdE92ZXJsYXk/LmxpbmVzLmxlbmd0aCA/PyB0aGlzLnByb21wdEhlaWdodCA/PyAwO1xuICAgIGlmIChoZWlnaHQgPT09IDApIHJldHVybjtcblxuICAgIC8vIEN1cnNvciBpcyBhdCBwcm9tcHQgcm93LiBNb3ZlIHVwIHRvIHRvcCBvZiBvdmVybGF5IGZpcnN0LlxuICAgIGlmICh0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheS5wcm9tcHRJbmRleDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICB0aGlzLndyaXRlKGBcXHgxYlske2xpbmVzVG9Ub3B9QWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE5vdyBhdCB0b3AsIGNsZWFyIGVhY2ggbGluZSBkb3dud2FyZFxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVpZ2h0OyBpKyspIHtcbiAgICAgIHRoaXMud3JpdGUoJ1xccicpO1xuICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICBpZiAoaSA8IGhlaWdodCAtIDEpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFx4MWJbQicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vdmUgYmFjayB0byB0b3AgKHdoZXJlIGNvbnRlbnQgc2hvdWxkIGNvbnRpbnVlIGZyb20pXG4gICAgaWYgKGhlaWdodCA+IDEpIHtcbiAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7aGVpZ2h0IC0gMX1BYCk7XG4gICAgfVxuICAgIHRoaXMud3JpdGUoJ1xccicpO1xuXG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IG51bGw7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSAwO1xuICAgIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgdXBkYXRlVGVybWluYWxTaXplKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5yb3dzID0gdGhpcy5vdXRwdXQucm93cyB8fCAyNDtcbiAgICAgIHRoaXMuY29scyA9IHRoaXMub3V0cHV0LmNvbHVtbnMgfHwgODA7XG4gICAgfVxuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQVdBLElBQUFBLFFBQUEsR0FBQUMsdUJBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQUFDLFdBQUEsR0FB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