{"version":3,"names":["cov_14l3yxqwhp","actualCoverage","createRequire","require","s","import","meta","url","manifest","normalizeManifest","getToolManifest","f","raw","b","Error","options","Array","isArray","map","normalizeOption","length","contractVersion","requireString","profile","version","label","optionalString","description","metadata","normalizeRecord","presets","normalizePresets","id","pluginIds","dedupeStrings","option","defaultEnabled","Boolean","category","requiresSecret","scopes","undefined","entries","preset","normalized","enabled","disabled","locked","appliesTo","normalizeTargets","notes","targets","seen","Set","result","target","has","add","push","values","entry","trimmed","trim","value","field"],"sources":["toolManifest.ts"],"sourcesContent":["import { createRequire } from 'node:module';\nimport type {\n  ToolAvailabilityOption,\n  ToolSelectionManifest,\n  ToolSelectionPreset,\n  ToolSelectionTarget,\n} from '../contracts/v1/toolAccess.js';\n\ntype RawToolManifest = ToolSelectionManifest & { $schema?: string };\n\nconst require = createRequire(import.meta.url);\nconst manifest = normalizeManifest(\n  require('../contracts/tools.schema.json') as Partial<RawToolManifest>\n);\n\nexport function getToolManifest(): ToolSelectionManifest {\n  return manifest;\n}\n\nfunction normalizeManifest(raw: Partial<RawToolManifest>): ToolSelectionManifest {\n  if (!raw || typeof raw !== 'object') {\n    throw new Error('Tool manifest is malformed: expected an object.');\n  }\n\n  const options = Array.isArray(raw.options) ? raw.options.map(normalizeOption) : null;\n  if (!options?.length) {\n    throw new Error('Tool manifest must include at least one tool option.');\n  }\n\n  const manifest: ToolSelectionManifest = {\n    contractVersion: requireString(raw.contractVersion, 'contractVersion'),\n    profile: requireString(raw.profile, 'profile'),\n    version: requireString(raw.version, 'version'),\n    options,\n  };\n\n  const label = optionalString(raw.label);\n  if (label) {\n    manifest.label = label;\n  }\n  const description = optionalString(raw.description);\n  if (description) {\n    manifest.description = description;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    manifest.metadata = metadata;\n  }\n  const presets = normalizePresets(raw.presets);\n  if (presets) {\n    manifest.presets = presets;\n  }\n\n  return manifest;\n}\n\nfunction normalizeOption(raw: ToolAvailabilityOption): ToolAvailabilityOption {\n  const id = requireString(raw.id, 'option.id');\n  const label = requireString(raw.label, `option(\"${id}\").label`);\n  const description = requireString(raw.description, `option(\"${id}\").description`);\n\n  const pluginIds = dedupeStrings(raw.pluginIds);\n  if (!pluginIds.length) {\n    throw new Error(`Tool option \"${id}\" must declare at least one plugin id.`);\n  }\n\n  const option: ToolAvailabilityOption = {\n    id,\n    label,\n    description,\n    defaultEnabled: Boolean(raw.defaultEnabled),\n    pluginIds,\n  };\n\n  const category = optionalString(raw.category);\n  if (category) {\n    option.category = category;\n  }\n  const requiresSecret = optionalString(raw.requiresSecret);\n  if (requiresSecret) {\n    option.requiresSecret = requiresSecret;\n  }\n  const scopes = raw.scopes?.length ? dedupeStrings(raw.scopes) : undefined;\n  if (scopes?.length) {\n    option.scopes = scopes;\n  }\n  const metadata = normalizeRecord(raw.metadata);\n  if (metadata) {\n    option.metadata = metadata;\n  }\n\n  return option;\n}\n\nfunction normalizePresets(entries: ToolSelectionPreset[] | undefined): ToolSelectionPreset[] | undefined {\n  if (!entries?.length) {\n    return undefined;\n  }\n  return entries.map((preset) => {\n    const id = requireString(preset.id, 'preset.id');\n    const normalized: ToolSelectionPreset = {\n      id,\n      label: requireString(preset.label, `preset(\"${id}\").label`),\n      enabled: dedupeStrings(preset.enabled),\n      disabled: dedupeStrings(preset.disabled),\n      locked: dedupeStrings(preset.locked),\n    };\n\n    const description = optionalString(preset.description);\n    if (description) {\n      normalized.description = description;\n    }\n    const appliesTo = normalizeTargets(preset.appliesTo);\n    if (appliesTo) {\n      normalized.appliesTo = appliesTo;\n    }\n    const metadata = normalizeRecord(preset.metadata);\n    if (metadata) {\n      normalized.metadata = metadata;\n    }\n    const notes = optionalString(preset.notes);\n    if (notes) {\n      normalized.notes = notes;\n    }\n\n    return normalized;\n  });\n}\n\nfunction normalizeTargets(targets: ToolSelectionTarget[] | undefined): ToolSelectionTarget[] | undefined {\n  if (!targets?.length) {\n    return undefined;\n  }\n  const seen = new Set<ToolSelectionTarget>();\n  const result: ToolSelectionTarget[] = [];\n  for (const target of targets) {\n    if (target && !seen.has(target)) {\n      seen.add(target);\n      result.push(target);\n    }\n  }\n  return result.length ? result : undefined;\n}\n\nfunction dedupeStrings<T extends string>(values: T[] | undefined): T[] {\n  if (!values?.length) {\n    return [];\n  }\n  const seen = new Set<string>();\n  const result: T[] = [];\n  for (const entry of values) {\n    if (typeof entry !== 'string') {\n      continue;\n    }\n    const trimmed = entry.trim();\n    if (!trimmed || seen.has(trimmed)) {\n      continue;\n    }\n    seen.add(trimmed);\n    result.push(trimmed as T);\n  }\n  return result;\n}\n\nfunction normalizeRecord(value: unknown): Record<string, unknown> | undefined {\n  if (!value || typeof value !== 'object' || Array.isArray(value)) {\n    return undefined;\n  }\n  return { ...(value as Record<string, unknown>) };\n}\n\nfunction requireString(value: unknown, field: string): string {\n  if (typeof value !== 'string') {\n    throw new Error(`Tool manifest is missing required field \"${field}\".`);\n  }\n  const trimmed = value.trim();\n  if (!trimmed) {\n    throw new Error(`Tool manifest field \"${field}\" cannot be blank.`);\n  }\n  return trimmed;\n}\n\nfunction optionalString(value: unknown): string | undefined {\n  if (typeof value !== 'string') {\n    return undefined;\n  }\n  const trimmed = value.trim();\n  return trimmed.length ? trimmed : undefined;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}