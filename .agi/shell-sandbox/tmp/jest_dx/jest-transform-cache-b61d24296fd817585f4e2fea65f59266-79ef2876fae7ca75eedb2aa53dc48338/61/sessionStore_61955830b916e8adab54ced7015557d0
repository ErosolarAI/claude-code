13833912420b0dd288bce5757f7a9c3a
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.clearAutosaveSnapshot = clearAutosaveSnapshot;
exports.deleteSession = deleteSession;
exports.listSessions = listSessions;
exports.loadAutosaveSnapshot = loadAutosaveSnapshot;
exports.loadSessionById = loadSessionById;
exports.saveAutosaveSnapshot = saveAutosaveSnapshot;
exports.saveSessionSnapshot = saveSessionSnapshot;
var _nodeCrypto = require("node:crypto");
var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
const dataRoot = process.env['EROSOLAR_DATA_DIR']?.trim() || (0, _nodePath.join)((0, _nodeOs.homedir)(), '.agi');
const sessionsDir = (0, _nodePath.join)(dataRoot, 'sessions');
const indexPath = (0, _nodePath.join)(sessionsDir, 'index.json');
function listSessions(profile) {
  const index = readIndex();
  const entries = Object.values(index.entries);
  const filtered = profile ? entries.filter(entry => entry.profile === profile) : entries;
  return filtered.sort((a, b) => {
    const aTime = Date.parse(a.updatedAt ?? '') || 0;
    const bTime = Date.parse(b.updatedAt ?? '') || 0;
    return bTime - aTime;
  });
}
function saveSessionSnapshot(options) {
  ensureDirectory();
  if (!Array.isArray(options.messages)) {
    throw new Error('Session snapshots must include the entire message history array.');
  }
  const index = readIndex();
  const now = new Date().toISOString();
  const existingId = options.id ?? null;
  const summaryId = existingId && index.entries[existingId] ? existingId : (0, _nodeCrypto.randomUUID)();
  const previous = index.entries[summaryId];
  const summary = {
    id: summaryId,
    title: sanitizeTitle(options.title) ?? previous?.title ?? buildDefaultTitle(options.messages),
    profile: options.profile,
    provider: options.provider,
    model: options.model,
    workspaceRoot: options.workspaceRoot ?? previous?.workspaceRoot ?? undefined,
    createdAt: previous?.createdAt ?? now,
    updatedAt: now,
    messageCount: options.messages.length
  };
  const payload = {
    ...summary,
    messages: options.messages,
    ...(options.scrollbackBuffer && {
      scrollbackBuffer: options.scrollbackBuffer
    })
  };
  (0, _nodeFs.writeFileSync)(getSessionPath(summaryId), JSON.stringify(payload, null, 2), 'utf8');
  index.entries[summaryId] = summary;
  writeIndex(index);
  return summary;
}
function loadSessionById(id) {
  if (!id) {
    return null;
  }
  try {
    const raw = (0, _nodeFs.readFileSync)(getSessionPath(id), 'utf8');
    const parsed = JSON.parse(raw);
    return parsed;
  } catch {
    return null;
  }
}
function deleteSession(id) {
  if (!id) {
    return false;
  }
  const index = readIndex();
  if (!index.entries[id]) {
    return false;
  }
  try {
    (0, _nodeFs.rmSync)(getSessionPath(id), {
      force: true
    });
  } catch {
    // ignore
  }
  delete index.entries[id];
  writeIndex(index);
  return true;
}
function saveAutosaveSnapshot(profile, options) {
  ensureDirectory();
  const payload = {
    id: `autosave-${profile}`,
    profile,
    provider: options.provider,
    model: options.model,
    workspaceRoot: options.workspaceRoot ?? undefined,
    createdAt: new Date().toISOString(),
    updatedAt: new Date().toISOString(),
    title: sanitizeTitle(options.title) ?? buildDefaultTitle(options.messages),
    messageCount: options.messages.length,
    messages: options.messages
  };
  (0, _nodeFs.writeFileSync)(getAutosavePath(profile), JSON.stringify(payload, null, 2), 'utf8');
}
function loadAutosaveSnapshot(profile) {
  try {
    const raw = (0, _nodeFs.readFileSync)(getAutosavePath(profile), 'utf8');
    return JSON.parse(raw);
  } catch {
    return null;
  }
}
function clearAutosaveSnapshot(profile) {
  try {
    (0, _nodeFs.rmSync)(getAutosavePath(profile), {
      force: true
    });
  } catch {
    // ignore
  }
}
function readIndex() {
  ensureDirectory();
  try {
    const raw = (0, _nodeFs.readFileSync)(indexPath, 'utf8');
    const parsed = JSON.parse(raw);
    if (!parsed || typeof parsed !== 'object' || typeof parsed.entries !== 'object') {
      return {
        entries: {}
      };
    }
    return {
      entries: {
        ...parsed.entries
      }
    };
  } catch {
    return {
      entries: {}
    };
  }
}
function writeIndex(index) {
  ensureDirectory();
  (0, _nodeFs.writeFileSync)(indexPath, JSON.stringify(index, null, 2), 'utf8');
}
function ensureDirectory() {
  (0, _nodeFs.mkdirSync)(sessionsDir, {
    recursive: true
  });
}
function getSessionPath(id) {
  return (0, _nodePath.join)(sessionsDir, `${id}.json`);
}
function getAutosavePath(profile) {
  return (0, _nodePath.join)(sessionsDir, `${profile}-autosave.json`);
}
function sanitizeTitle(value) {
  if (typeof value !== 'string') {
    return null;
  }
  const trimmed = value.trim();
  if (!trimmed) {
    return null;
  }
  return trimmed.slice(0, 160);
}
function buildDefaultTitle(messages) {
  for (const message of messages) {
    if (message.role !== 'user') {
      continue;
    }
    const condensed = message.content.trim().replace(/\s+/g, ' ');
    if (condensed) {
      return condensed.slice(0, 160);
    }
  }
  return `Session ${new Date().toLocaleString()}`;
}
function pruneOrphans() {
  try {
    ensureDirectory();
    const index = readIndex();
    const known = new Set(Object.keys(index.entries));
    for (const file of (0, _nodeFs.readdirSync)(sessionsDir)) {
      if (!file.endsWith('.json')) {
        continue;
      }
      if (file === 'index.json' || file.includes('-autosave')) {
        continue;
      }
      const id = file.slice(0, -5);
      if (!known.has(id)) {
        const candidate = (0, _nodePath.join)(sessionsDir, file);
        const stats = (0, _nodeFs.statSync)(candidate);
        if (stats.isFile()) {
          (0, _nodeFs.rmSync)(candidate, {
            force: true
          });
        }
      }
    }
  } catch {
    // best-effort cleanup
  }
}
pruneOrphans();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUNyeXB0byIsInJlcXVpcmUiLCJfbm9kZUZzIiwiX25vZGVQYXRoIiwiX25vZGVPcyIsImRhdGFSb290IiwicHJvY2VzcyIsImVudiIsInRyaW0iLCJqb2luIiwiaG9tZWRpciIsInNlc3Npb25zRGlyIiwiaW5kZXhQYXRoIiwibGlzdFNlc3Npb25zIiwicHJvZmlsZSIsImluZGV4IiwicmVhZEluZGV4IiwiZW50cmllcyIsIk9iamVjdCIsInZhbHVlcyIsImZpbHRlcmVkIiwiZmlsdGVyIiwiZW50cnkiLCJzb3J0IiwiYSIsImIiLCJhVGltZSIsIkRhdGUiLCJwYXJzZSIsInVwZGF0ZWRBdCIsImJUaW1lIiwic2F2ZVNlc3Npb25TbmFwc2hvdCIsIm9wdGlvbnMiLCJlbnN1cmVEaXJlY3RvcnkiLCJBcnJheSIsImlzQXJyYXkiLCJtZXNzYWdlcyIsIkVycm9yIiwibm93IiwidG9JU09TdHJpbmciLCJleGlzdGluZ0lkIiwiaWQiLCJzdW1tYXJ5SWQiLCJyYW5kb21VVUlEIiwicHJldmlvdXMiLCJzdW1tYXJ5IiwidGl0bGUiLCJzYW5pdGl6ZVRpdGxlIiwiYnVpbGREZWZhdWx0VGl0bGUiLCJwcm92aWRlciIsIm1vZGVsIiwid29ya3NwYWNlUm9vdCIsInVuZGVmaW5lZCIsImNyZWF0ZWRBdCIsIm1lc3NhZ2VDb3VudCIsImxlbmd0aCIsInBheWxvYWQiLCJzY3JvbGxiYWNrQnVmZmVyIiwid3JpdGVGaWxlU3luYyIsImdldFNlc3Npb25QYXRoIiwiSlNPTiIsInN0cmluZ2lmeSIsIndyaXRlSW5kZXgiLCJsb2FkU2Vzc2lvbkJ5SWQiLCJyYXciLCJyZWFkRmlsZVN5bmMiLCJwYXJzZWQiLCJkZWxldGVTZXNzaW9uIiwicm1TeW5jIiwiZm9yY2UiLCJzYXZlQXV0b3NhdmVTbmFwc2hvdCIsImdldEF1dG9zYXZlUGF0aCIsImxvYWRBdXRvc2F2ZVNuYXBzaG90IiwiY2xlYXJBdXRvc2F2ZVNuYXBzaG90IiwibWtkaXJTeW5jIiwicmVjdXJzaXZlIiwidmFsdWUiLCJ0cmltbWVkIiwic2xpY2UiLCJtZXNzYWdlIiwicm9sZSIsImNvbmRlbnNlZCIsImNvbnRlbnQiLCJyZXBsYWNlIiwidG9Mb2NhbGVTdHJpbmciLCJwcnVuZU9ycGhhbnMiLCJrbm93biIsIlNldCIsImtleXMiLCJmaWxlIiwicmVhZGRpclN5bmMiLCJlbmRzV2l0aCIsImluY2x1ZGVzIiwiaGFzIiwiY2FuZGlkYXRlIiwic3RhdHMiLCJzdGF0U3luYyIsImlzRmlsZSJdLCJzb3VyY2VzIjpbInNlc3Npb25TdG9yZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByYW5kb21VVUlEIH0gZnJvbSAnbm9kZTpjcnlwdG8nO1xuaW1wb3J0IHsgbWtkaXJTeW5jLCByZWFkZGlyU3luYywgcmVhZEZpbGVTeW5jLCBybVN5bmMsIHN0YXRTeW5jLCB3cml0ZUZpbGVTeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdub2RlOm9zJztcbmltcG9ydCB0eXBlIHsgQ29udmVyc2F0aW9uTWVzc2FnZSwgUHJvdmlkZXJJZCB9IGZyb20gJy4vdHlwZXMuanMnO1xuaW1wb3J0IHR5cGUgeyBQcm9maWxlTmFtZSB9IGZyb20gJy4uL2NvbmZpZy5qcyc7XG5cbmNvbnN0IGRhdGFSb290ID0gcHJvY2Vzcy5lbnZbJ0VST1NPTEFSX0RBVEFfRElSJ10/LnRyaW0oKSB8fCBqb2luKGhvbWVkaXIoKSwgJy5hZ2knKTtcbmNvbnN0IHNlc3Npb25zRGlyID0gam9pbihkYXRhUm9vdCwgJ3Nlc3Npb25zJyk7XG5jb25zdCBpbmRleFBhdGggPSBqb2luKHNlc3Npb25zRGlyLCAnaW5kZXguanNvbicpO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNlc3Npb25TdW1tYXJ5IHtcbiAgaWQ6IHN0cmluZztcbiAgdGl0bGU6IHN0cmluZztcbiAgcHJvZmlsZTogUHJvZmlsZU5hbWU7XG4gIHByb3ZpZGVyOiBQcm92aWRlcklkO1xuICBtb2RlbDogc3RyaW5nO1xuICBjcmVhdGVkQXQ6IHN0cmluZztcbiAgdXBkYXRlZEF0OiBzdHJpbmc7XG4gIG1lc3NhZ2VDb3VudDogbnVtYmVyO1xuICB3b3Jrc3BhY2VSb290Pzogc3RyaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFN0b3JlZFNlc3Npb24gZXh0ZW5kcyBTZXNzaW9uU3VtbWFyeSB7XG4gIG1lc3NhZ2VzOiBDb252ZXJzYXRpb25NZXNzYWdlW107XG4gIHNjcm9sbGJhY2tCdWZmZXI/OiBzdHJpbmdbXTsgLy8gT3B0aW9uYWwgc2Nyb2xsYmFjayBoaXN0b3J5XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2F2ZVNlc3Npb25PcHRpb25zIHtcbiAgaWQ/OiBzdHJpbmcgfCBudWxsO1xuICB0aXRsZT86IHN0cmluZyB8IG51bGw7XG4gIHByb2ZpbGU6IFByb2ZpbGVOYW1lO1xuICBwcm92aWRlcjogUHJvdmlkZXJJZDtcbiAgbW9kZWw6IHN0cmluZztcbiAgd29ya3NwYWNlUm9vdD86IHN0cmluZyB8IG51bGw7XG4gIG1lc3NhZ2VzOiBDb252ZXJzYXRpb25NZXNzYWdlW107XG4gIHNjcm9sbGJhY2tCdWZmZXI/OiBzdHJpbmdbXTsgLy8gT3B0aW9uYWwgc2Nyb2xsYmFjayBoaXN0b3J5XG59XG5cbmludGVyZmFjZSBTZXNzaW9uSW5kZXgge1xuICBlbnRyaWVzOiBSZWNvcmQ8c3RyaW5nLCBTZXNzaW9uU3VtbWFyeT47XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0U2Vzc2lvbnMocHJvZmlsZT86IFByb2ZpbGVOYW1lKTogU2Vzc2lvblN1bW1hcnlbXSB7XG4gIGNvbnN0IGluZGV4ID0gcmVhZEluZGV4KCk7XG4gIGNvbnN0IGVudHJpZXMgPSBPYmplY3QudmFsdWVzKGluZGV4LmVudHJpZXMpO1xuICBjb25zdCBmaWx0ZXJlZCA9IHByb2ZpbGUgPyBlbnRyaWVzLmZpbHRlcigoZW50cnkpID0+IGVudHJ5LnByb2ZpbGUgPT09IHByb2ZpbGUpIDogZW50cmllcztcbiAgcmV0dXJuIGZpbHRlcmVkLnNvcnQoKGEsIGIpID0+IHtcbiAgICBjb25zdCBhVGltZSA9IERhdGUucGFyc2UoYS51cGRhdGVkQXQgPz8gJycpIHx8IDA7XG4gICAgY29uc3QgYlRpbWUgPSBEYXRlLnBhcnNlKGIudXBkYXRlZEF0ID8/ICcnKSB8fCAwO1xuICAgIHJldHVybiBiVGltZSAtIGFUaW1lO1xuICB9KTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhdmVTZXNzaW9uU25hcHNob3Qob3B0aW9uczogU2F2ZVNlc3Npb25PcHRpb25zKTogU2Vzc2lvblN1bW1hcnkge1xuICBlbnN1cmVEaXJlY3RvcnkoKTtcbiAgaWYgKCFBcnJheS5pc0FycmF5KG9wdGlvbnMubWVzc2FnZXMpKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdTZXNzaW9uIHNuYXBzaG90cyBtdXN0IGluY2x1ZGUgdGhlIGVudGlyZSBtZXNzYWdlIGhpc3RvcnkgYXJyYXkuJyk7XG4gIH1cblxuICBjb25zdCBpbmRleCA9IHJlYWRJbmRleCgpO1xuICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7XG4gIGNvbnN0IGV4aXN0aW5nSWQgPSBvcHRpb25zLmlkID8/IG51bGw7XG4gIGNvbnN0IHN1bW1hcnlJZCA9XG4gICAgZXhpc3RpbmdJZCAmJiBpbmRleC5lbnRyaWVzW2V4aXN0aW5nSWRdID8gZXhpc3RpbmdJZCA6IHJhbmRvbVVVSUQoKTtcbiAgY29uc3QgcHJldmlvdXMgPSBpbmRleC5lbnRyaWVzW3N1bW1hcnlJZF07XG5cbiAgY29uc3Qgc3VtbWFyeTogU2Vzc2lvblN1bW1hcnkgPSB7XG4gICAgaWQ6IHN1bW1hcnlJZCxcbiAgICB0aXRsZTogc2FuaXRpemVUaXRsZShvcHRpb25zLnRpdGxlKSA/PyBwcmV2aW91cz8udGl0bGUgPz8gYnVpbGREZWZhdWx0VGl0bGUob3B0aW9ucy5tZXNzYWdlcyksXG4gICAgcHJvZmlsZTogb3B0aW9ucy5wcm9maWxlLFxuICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVyLFxuICAgIG1vZGVsOiBvcHRpb25zLm1vZGVsLFxuICAgIHdvcmtzcGFjZVJvb3Q6IG9wdGlvbnMud29ya3NwYWNlUm9vdCA/PyBwcmV2aW91cz8ud29ya3NwYWNlUm9vdCA/PyB1bmRlZmluZWQsXG4gICAgY3JlYXRlZEF0OiBwcmV2aW91cz8uY3JlYXRlZEF0ID8/IG5vdyxcbiAgICB1cGRhdGVkQXQ6IG5vdyxcbiAgICBtZXNzYWdlQ291bnQ6IG9wdGlvbnMubWVzc2FnZXMubGVuZ3RoLFxuICB9O1xuXG4gIGNvbnN0IHBheWxvYWQ6IFN0b3JlZFNlc3Npb24gPSB7XG4gICAgLi4uc3VtbWFyeSxcbiAgICBtZXNzYWdlczogb3B0aW9ucy5tZXNzYWdlcyxcbiAgICAuLi4ob3B0aW9ucy5zY3JvbGxiYWNrQnVmZmVyICYmIHsgc2Nyb2xsYmFja0J1ZmZlcjogb3B0aW9ucy5zY3JvbGxiYWNrQnVmZmVyIH0pLFxuICB9O1xuXG4gIHdyaXRlRmlsZVN5bmMoZ2V0U2Vzc2lvblBhdGgoc3VtbWFyeUlkKSwgSlNPTi5zdHJpbmdpZnkocGF5bG9hZCwgbnVsbCwgMiksICd1dGY4Jyk7XG4gIGluZGV4LmVudHJpZXNbc3VtbWFyeUlkXSA9IHN1bW1hcnk7XG4gIHdyaXRlSW5kZXgoaW5kZXgpO1xuICByZXR1cm4gc3VtbWFyeTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxvYWRTZXNzaW9uQnlJZChpZDogc3RyaW5nKTogU3RvcmVkU2Vzc2lvbiB8IG51bGwge1xuICBpZiAoIWlkKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbiAgdHJ5IHtcbiAgICBjb25zdCByYXcgPSByZWFkRmlsZVN5bmMoZ2V0U2Vzc2lvblBhdGgoaWQpLCAndXRmOCcpO1xuICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UocmF3KSBhcyBTdG9yZWRTZXNzaW9uO1xuICAgIHJldHVybiBwYXJzZWQ7XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWxldGVTZXNzaW9uKGlkOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgaWYgKCFpZCkge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuICBjb25zdCBpbmRleCA9IHJlYWRJbmRleCgpO1xuICBpZiAoIWluZGV4LmVudHJpZXNbaWRdKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG4gIHRyeSB7XG4gICAgcm1TeW5jKGdldFNlc3Npb25QYXRoKGlkKSwgeyBmb3JjZTogdHJ1ZSB9KTtcbiAgfSBjYXRjaCB7XG4gICAgLy8gaWdub3JlXG4gIH1cbiAgZGVsZXRlIGluZGV4LmVudHJpZXNbaWRdO1xuICB3cml0ZUluZGV4KGluZGV4KTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBzYXZlQXV0b3NhdmVTbmFwc2hvdChcbiAgcHJvZmlsZTogUHJvZmlsZU5hbWUsXG4gIG9wdGlvbnM6IE9taXQ8U2F2ZVNlc3Npb25PcHRpb25zLCAncHJvZmlsZSc+XG4pOiB2b2lkIHtcbiAgZW5zdXJlRGlyZWN0b3J5KCk7XG4gIGNvbnN0IHBheWxvYWQ6IFN0b3JlZFNlc3Npb24gPSB7XG4gICAgaWQ6IGBhdXRvc2F2ZS0ke3Byb2ZpbGV9YCxcbiAgICBwcm9maWxlLFxuICAgIHByb3ZpZGVyOiBvcHRpb25zLnByb3ZpZGVyLFxuICAgIG1vZGVsOiBvcHRpb25zLm1vZGVsLFxuICAgIHdvcmtzcGFjZVJvb3Q6IG9wdGlvbnMud29ya3NwYWNlUm9vdCA/PyB1bmRlZmluZWQsXG4gICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXG4gICAgdGl0bGU6IHNhbml0aXplVGl0bGUob3B0aW9ucy50aXRsZSkgPz8gYnVpbGREZWZhdWx0VGl0bGUob3B0aW9ucy5tZXNzYWdlcyksXG4gICAgbWVzc2FnZUNvdW50OiBvcHRpb25zLm1lc3NhZ2VzLmxlbmd0aCxcbiAgICBtZXNzYWdlczogb3B0aW9ucy5tZXNzYWdlcyxcbiAgfTtcbiAgd3JpdGVGaWxlU3luYyhnZXRBdXRvc2F2ZVBhdGgocHJvZmlsZSksIEpTT04uc3RyaW5naWZ5KHBheWxvYWQsIG51bGwsIDIpLCAndXRmOCcpO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gbG9hZEF1dG9zYXZlU25hcHNob3QocHJvZmlsZTogUHJvZmlsZU5hbWUpOiBTdG9yZWRTZXNzaW9uIHwgbnVsbCB7XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jKGdldEF1dG9zYXZlUGF0aChwcm9maWxlKSwgJ3V0ZjgnKTtcbiAgICByZXR1cm4gSlNPTi5wYXJzZShyYXcpIGFzIFN0b3JlZFNlc3Npb247XG4gIH0gY2F0Y2gge1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjbGVhckF1dG9zYXZlU25hcHNob3QocHJvZmlsZTogUHJvZmlsZU5hbWUpOiB2b2lkIHtcbiAgdHJ5IHtcbiAgICBybVN5bmMoZ2V0QXV0b3NhdmVQYXRoKHByb2ZpbGUpLCB7IGZvcmNlOiB0cnVlIH0pO1xuICB9IGNhdGNoIHtcbiAgICAvLyBpZ25vcmVcbiAgfVxufVxuXG5mdW5jdGlvbiByZWFkSW5kZXgoKTogU2Vzc2lvbkluZGV4IHtcbiAgZW5zdXJlRGlyZWN0b3J5KCk7XG4gIHRyeSB7XG4gICAgY29uc3QgcmF3ID0gcmVhZEZpbGVTeW5jKGluZGV4UGF0aCwgJ3V0ZjgnKTtcbiAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKHJhdykgYXMgU2Vzc2lvbkluZGV4O1xuICAgIGlmICghcGFyc2VkIHx8IHR5cGVvZiBwYXJzZWQgIT09ICdvYmplY3QnIHx8IHR5cGVvZiBwYXJzZWQuZW50cmllcyAhPT0gJ29iamVjdCcpIHtcbiAgICAgIHJldHVybiB7IGVudHJpZXM6IHt9IH07XG4gICAgfVxuICAgIHJldHVybiB7IGVudHJpZXM6IHsgLi4ucGFyc2VkLmVudHJpZXMgfSB9O1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4geyBlbnRyaWVzOiB7fSB9O1xuICB9XG59XG5cbmZ1bmN0aW9uIHdyaXRlSW5kZXgoaW5kZXg6IFNlc3Npb25JbmRleCk6IHZvaWQge1xuICBlbnN1cmVEaXJlY3RvcnkoKTtcbiAgd3JpdGVGaWxlU3luYyhpbmRleFBhdGgsIEpTT04uc3RyaW5naWZ5KGluZGV4LCBudWxsLCAyKSwgJ3V0ZjgnKTtcbn1cblxuZnVuY3Rpb24gZW5zdXJlRGlyZWN0b3J5KCk6IHZvaWQge1xuICBta2RpclN5bmMoc2Vzc2lvbnNEaXIsIHsgcmVjdXJzaXZlOiB0cnVlIH0pO1xufVxuXG5mdW5jdGlvbiBnZXRTZXNzaW9uUGF0aChpZDogc3RyaW5nKTogc3RyaW5nIHtcbiAgcmV0dXJuIGpvaW4oc2Vzc2lvbnNEaXIsIGAke2lkfS5qc29uYCk7XG59XG5cbmZ1bmN0aW9uIGdldEF1dG9zYXZlUGF0aChwcm9maWxlOiBQcm9maWxlTmFtZSk6IHN0cmluZyB7XG4gIHJldHVybiBqb2luKHNlc3Npb25zRGlyLCBgJHtwcm9maWxlfS1hdXRvc2F2ZS5qc29uYCk7XG59XG5cbmZ1bmN0aW9uIHNhbml0aXplVGl0bGUodmFsdWU6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgfCBudWxsIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSAhPT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICBjb25zdCB0cmltbWVkID0gdmFsdWUudHJpbSgpO1xuICBpZiAoIXRyaW1tZWQpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuICByZXR1cm4gdHJpbW1lZC5zbGljZSgwLCAxNjApO1xufVxuXG5mdW5jdGlvbiBidWlsZERlZmF1bHRUaXRsZShtZXNzYWdlczogQ29udmVyc2F0aW9uTWVzc2FnZVtdKTogc3RyaW5nIHtcbiAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG1lc3NhZ2VzKSB7XG4gICAgaWYgKG1lc3NhZ2Uucm9sZSAhPT0gJ3VzZXInKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgY29uc3QgY29uZGVuc2VkID0gbWVzc2FnZS5jb250ZW50LnRyaW0oKS5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgaWYgKGNvbmRlbnNlZCkge1xuICAgICAgcmV0dXJuIGNvbmRlbnNlZC5zbGljZSgwLCAxNjApO1xuICAgIH1cbiAgfVxuICByZXR1cm4gYFNlc3Npb24gJHtuZXcgRGF0ZSgpLnRvTG9jYWxlU3RyaW5nKCl9YDtcbn1cblxuZnVuY3Rpb24gcHJ1bmVPcnBoYW5zKCk6IHZvaWQge1xuICB0cnkge1xuICAgIGVuc3VyZURpcmVjdG9yeSgpO1xuICAgIGNvbnN0IGluZGV4ID0gcmVhZEluZGV4KCk7XG4gICAgY29uc3Qga25vd24gPSBuZXcgU2V0KE9iamVjdC5rZXlzKGluZGV4LmVudHJpZXMpKTtcbiAgICBmb3IgKGNvbnN0IGZpbGUgb2YgcmVhZGRpclN5bmMoc2Vzc2lvbnNEaXIpKSB7XG4gICAgICBpZiAoIWZpbGUuZW5kc1dpdGgoJy5qc29uJykpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBpZiAoZmlsZSA9PT0gJ2luZGV4Lmpzb24nIHx8IGZpbGUuaW5jbHVkZXMoJy1hdXRvc2F2ZScpKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgaWQgPSBmaWxlLnNsaWNlKDAsIC01KTtcbiAgICAgIGlmICgha25vd24uaGFzKGlkKSkge1xuICAgICAgICBjb25zdCBjYW5kaWRhdGUgPSBqb2luKHNlc3Npb25zRGlyLCBmaWxlKTtcbiAgICAgICAgY29uc3Qgc3RhdHMgPSBzdGF0U3luYyhjYW5kaWRhdGUpO1xuICAgICAgICBpZiAoc3RhdHMuaXNGaWxlKCkpIHtcbiAgICAgICAgICBybVN5bmMoY2FuZGlkYXRlLCB7IGZvcmNlOiB0cnVlIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9IGNhdGNoIHtcbiAgICAvLyBiZXN0LWVmZm9ydCBjbGVhbnVwXG4gIH1cbn1cblxucHJ1bmVPcnBoYW5zKCk7XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7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