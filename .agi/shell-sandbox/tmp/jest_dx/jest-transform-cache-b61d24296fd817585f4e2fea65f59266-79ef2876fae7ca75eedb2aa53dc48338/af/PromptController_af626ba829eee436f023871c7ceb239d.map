{"version":3,"names":["cov_kgxgqwtmz","actualCoverage","UnifiedUIRenderer","PromptController","editMode","s","statusMain","statusOverride","statusStreaming","modeToggleState","verificationEnabled","autoContinueEnabled","criticalApprovalMode","dualRlEnabled","started","disposed","boundHandlers","Map","constructor","inStream","outStream","callbacks","existingRenderer","f","renderer","b","addBoundHandler","text","onSubmit","onQueue","onInterrupt","info","onCtrlC","onExit","payload","onChange","onResume","expanded","expandLastToolResult","setStatusMessage","setTimeout","onExpandToolResult","syncModeToggles","onToggleAutoContinue","onToggleDualRl","onToggleVerify","onToggleCriticalApproval","event","handler","set","on","removeAllBoundHandlers","removeListener","clear","getRenderer","start","initialize","stop","cleanup","setStreaming","streaming","setMode","getMode","setContextUsage","percentage","updateStatusMeta","contextPercent","setModeToggles","_options","options","Boolean","verificationHotkey","autoContinueHotkey","thinkingModeLabel","thinkingHotkey","criticalApprovalHotkey","dualRlHotkey","setDebugMode","enabled","debugEnabled","toggleDualMode","toggleAutoContinue","toggleVerify","toggleApprovals","updateModeToggles","getModeToggleState","message","setStatusBundle","main","setOverrideStatus","override","setStreamingLabel","label","setStatusLine","status","setMetaStatus","meta","statusMeta","elapsedSeconds","Number","isFinite","sessionTime","formatElapsed","tokensUsed","tokenLimit","percent","Math","round","clearAllStatus","setModelContext","model","undefined","provider","render","setChromeMeta","setAvailableCommands","commands","setInlinePanel","lines","clearInlinePanel","supportsInlinePanel","setEditMode","mode","onEditModeChange","applyEditMode","getEditMode","getBuffer","getCursor","setBuffer","cursorPos","setSecretMode","clearBuffer","forceRender","handleResize","dispose","trim","refreshStatus","updateStatusBundle","totalSeconds","minutes","floor","seconds","paddedSeconds"],"sources":["PromptController.ts"],"sourcesContent":["/**\n * PromptController - minimal wrapper around UnifiedUIRenderer for coding agent UX.\n * Handles input wiring and status/meta updates without any of the legacy scroll-region plumbing.\n */\n\nimport { UnifiedUIRenderer, type CommandSuggestion } from './UnifiedUIRenderer.js';\n\nexport type EditGuardMode = 'display-edits' | 'require-approval' | 'block-writes' | 'ask-permission' | 'plan';\n\nexport interface PromptCallbacks {\n  onSubmit: (text: string) => void;\n  onQueue: (text: string) => void;\n  onInterrupt: () => void;\n  onExit?: () => void;\n  onCtrlC?: (info: { hadBuffer: boolean }) => void;\n  onResume?: () => void;\n  onChange?: (event: { text: string; cursor: number }) => void;\n  onEditModeChange?: (mode: EditGuardMode) => void;\n  onToggleVerify?: () => void;\n  onToggleAutoContinue?: () => void;\n  onToggleThinking?: () => void;\n  onClearContext?: () => void;\n  onToggleCriticalApproval?: () => void;\n  onExpandToolResult?: () => void;\n  onToggleDualRl?: () => void;\n}\n\nexport class PromptController {\n  private readonly renderer: UnifiedUIRenderer;\n  private readonly callbacks: PromptCallbacks;\n  private editMode: EditGuardMode = 'display-edits';\n  private statusMain: string | null = null;\n  private statusOverride: string | null = null;\n  private statusStreaming: string | null = null;\n  private modeToggleState: {\n    verificationEnabled: boolean;\n    verificationHotkey?: string;\n    autoContinueEnabled: boolean;\n    autoContinueHotkey?: string;\n    thinkingModeLabel?: string | null;\n    thinkingHotkey?: string;\n    criticalApprovalMode: 'auto' | 'approval';\n    criticalApprovalHotkey?: string;\n    dualRlEnabled: boolean;\n    dualRlHotkey?: string;\n    debugEnabled?: boolean;\n  } = {\n    verificationEnabled: false,\n    autoContinueEnabled: false,\n    criticalApprovalMode: 'auto',\n    dualRlEnabled: false,\n  };\n  private started = false;\n  private disposed = false;\n  // Store bound handlers for cleanup\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private boundHandlers: Map<string, (...args: any[]) => void> = new Map();\n\n  constructor(\n    inStream: NodeJS.ReadStream,\n    outStream: NodeJS.WriteStream,\n    callbacks: PromptCallbacks,\n    existingRenderer?: UnifiedUIRenderer\n  ) {\n    this.callbacks = callbacks;\n    this.renderer = existingRenderer ?? new UnifiedUIRenderer(outStream, inStream);\n\n    // Create bound handlers that can be removed later\n    this.addBoundHandler('submit', (text: string) => this.callbacks.onSubmit(text));\n    this.addBoundHandler('queue', (text: string) => this.callbacks.onQueue(text));\n    this.addBoundHandler('interrupt', () => this.callbacks.onInterrupt());\n    this.addBoundHandler('ctrlc', (info: { hadBuffer: boolean }) => this.callbacks.onCtrlC?.(info));\n    this.addBoundHandler('exit', () => this.callbacks.onExit?.());\n    this.addBoundHandler('change', (payload: { text: string; cursor: number }) => {\n      this.callbacks.onChange?.(payload);\n    });\n    this.addBoundHandler('resume', () => this.callbacks.onResume?.());\n    this.addBoundHandler('expand-tool-result', () => {\n      const expanded = this.renderer.expandLastToolResult();\n      if (!expanded) {\n        this.setStatusMessage('No tool result to expand');\n        setTimeout(() => this.setStatusMessage(null), 2000);\n      }\n      this.callbacks.onExpandToolResult?.();\n    });\n    this.addBoundHandler('toggle-auto-continue', () => {\n      this.modeToggleState.autoContinueEnabled = !this.modeToggleState.autoContinueEnabled;\n      this.syncModeToggles();\n      this.callbacks.onToggleAutoContinue?.();\n    });\n    this.addBoundHandler('toggle-dual-rl', () => {\n      this.modeToggleState.dualRlEnabled = !this.modeToggleState.dualRlEnabled;\n      this.syncModeToggles();\n      this.callbacks.onToggleDualRl?.();\n    });\n    this.addBoundHandler('toggle-verify', () => {\n      this.modeToggleState.verificationEnabled = !this.modeToggleState.verificationEnabled;\n      this.syncModeToggles();\n      this.callbacks.onToggleVerify?.();\n    });\n    this.addBoundHandler('toggle-critical-approval', () => {\n      this.modeToggleState.criticalApprovalMode =\n        this.modeToggleState.criticalApprovalMode === 'auto' ? 'approval' : 'auto';\n      this.syncModeToggles();\n      this.callbacks.onToggleCriticalApproval?.();\n    });\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  private addBoundHandler(event: string, handler: (...args: any[]) => void): void {\n    this.boundHandlers.set(event, handler);\n    this.renderer.on(event, handler);\n  }\n\n  private removeAllBoundHandlers(): void {\n    for (const [event, handler] of this.boundHandlers) {\n      this.renderer.removeListener(event, handler);\n    }\n    this.boundHandlers.clear();\n  }\n\n  getRenderer(): UnifiedUIRenderer {\n    return this.renderer;\n  }\n\n  start(): void {\n    if (this.started) {\n      return;\n    }\n    this.started = true;\n    this.renderer.initialize();\n    this.syncModeToggles();\n  }\n\n  stop(): void {\n    if (this.disposed) return;\n    this.disposed = true;\n    // Remove all event listeners before cleanup to prevent memory leaks\n    this.removeAllBoundHandlers();\n    this.renderer.cleanup();\n    this.started = false;\n  }\n\n  setStreaming(streaming: boolean): void {\n    this.renderer.setMode(streaming ? 'streaming' : 'idle');\n  }\n\n  getMode(): 'idle' | 'streaming' {\n    return this.renderer.getMode();\n  }\n\n  setContextUsage(percentage: number | null): void {\n    if (percentage !== null) {\n      this.renderer.updateStatusMeta({ contextPercent: percentage });\n    }\n  }\n\n  setModeToggles(_options: {\n    verificationEnabled: boolean;\n    verificationHotkey?: string;\n    autoContinueEnabled?: boolean;\n    autoContinueHotkey?: string;\n    thinkingModeLabel?: string | null;\n    thinkingHotkey?: string;\n    criticalApprovalMode?: 'auto' | 'approval';\n    criticalApprovalHotkey?: string;\n    dualRlEnabled?: boolean;\n    dualRlHotkey?: string;\n  }): void {\n    const options = _options || {\n      verificationEnabled: false,\n      autoContinueEnabled: false,\n    };\n    this.modeToggleState = {\n      ...this.modeToggleState,\n      verificationEnabled: Boolean(options.verificationEnabled),\n      verificationHotkey: options.verificationHotkey,\n      autoContinueEnabled: Boolean(options.autoContinueEnabled),\n      autoContinueHotkey: options.autoContinueHotkey,\n      thinkingModeLabel: options.thinkingModeLabel,\n      thinkingHotkey: options.thinkingHotkey,\n      criticalApprovalMode: options.criticalApprovalMode ?? this.modeToggleState.criticalApprovalMode,\n      criticalApprovalHotkey: options.criticalApprovalHotkey,\n      dualRlEnabled: Boolean(options.dualRlEnabled),\n      dualRlHotkey: options.dualRlHotkey,\n    };\n    this.syncModeToggles();\n  }\n\n  setDebugMode(enabled: boolean): void {\n    this.modeToggleState.debugEnabled = enabled;\n    this.syncModeToggles();\n  }\n\n  toggleDualMode(): void {\n    this.modeToggleState.dualRlEnabled = !this.modeToggleState.dualRlEnabled;\n    this.syncModeToggles();\n    this.callbacks.onToggleDualRl?.();\n  }\n\n  toggleAutoContinue(): void {\n    this.modeToggleState.autoContinueEnabled = !this.modeToggleState.autoContinueEnabled;\n    this.syncModeToggles();\n    this.callbacks.onToggleAutoContinue?.();\n  }\n\n  toggleVerify(): void {\n    this.modeToggleState.verificationEnabled = !this.modeToggleState.verificationEnabled;\n    this.syncModeToggles();\n    this.callbacks.onToggleVerify?.();\n  }\n\n  toggleApprovals(): void {\n    this.modeToggleState.criticalApprovalMode =\n      this.modeToggleState.criticalApprovalMode === 'auto' ? 'approval' : 'auto';\n    this.syncModeToggles();\n    this.callbacks.onToggleCriticalApproval?.();\n  }\n\n  /**\n   * Sync the stored toggle state to the renderer so UI reflects the latest flags.\n   */\n  private syncModeToggles(): void {\n    this.renderer.updateModeToggles(this.modeToggleState);\n  }\n\n  getModeToggleState(): Readonly<typeof this.modeToggleState> {\n    return this.modeToggleState;\n  }\n\n  setStatusMessage(message: string | null): void {\n    this.setStatusBundle({ main: message });\n  }\n\n  setOverrideStatus(message: string | null): void {\n    this.setStatusBundle({ override: message });\n  }\n\n  setStreamingLabel(label: string | null): void {\n    this.setStatusBundle({ streaming: label });\n  }\n\n  /**\n   * Atomically set the streaming/override/main status text and render once.\n   */\n  setStatusLine(status: { main?: string | null; override?: string | null; streaming?: string | null }): void {\n    this.setStatusBundle(status);\n  }\n\n  setMetaStatus(meta: {\n    elapsedSeconds?: number | null;\n    tokensUsed?: number | null;\n    tokenLimit?: number | null;\n    thinkingMs?: number | null;\n    thinkingHasContent?: boolean;\n  }): void {\n    const statusMeta: { contextPercent?: number; sessionTime?: string } = {};\n\n    if (typeof meta.elapsedSeconds === 'number' && Number.isFinite(meta.elapsedSeconds) && meta.elapsedSeconds >= 0) {\n      statusMeta.sessionTime = this.formatElapsed(meta.elapsedSeconds);\n    }\n\n    if (meta.tokensUsed != null && meta.tokenLimit != null) {\n      const percent = meta.tokenLimit > 0 ? Math.round((meta.tokensUsed / meta.tokenLimit) * 100) : 0;\n      statusMeta.contextPercent = percent;\n    }\n    this.renderer.updateStatusMeta(statusMeta);\n  }\n\n  clearAllStatus(): void {\n    this.setStatusBundle({\n      main: null,\n      override: null,\n      streaming: null,\n    });\n  }\n\n  setModelContext(options: { model?: string | null; provider?: string | null }): void {\n    this.renderer.updateStatusMeta(\n      {\n        model: options.model || undefined,\n        provider: options.provider || undefined,\n      },\n      { render: true }\n    );\n  }\n\n  setChromeMeta(meta: {\n    profile?: string;\n    workspace?: string;\n    directory?: string;\n    writes?: string;\n    sessionLabel?: string;\n    thinkingLabel?: string;\n    autosave?: boolean;\n    version?: string;\n  }): void {\n    this.renderer.updateStatusMeta(meta, { render: true });\n  }\n\n  setAvailableCommands(commands: CommandSuggestion[]): void {\n    this.renderer.setAvailableCommands(commands);\n  }\n\n  /**\n   * Display content in the inline panel (below prompt, above toggles).\n   * Content is transient - not persisted to chat history.\n   * Use for help menus, status displays, etc.\n   */\n  setInlinePanel(lines: string[]): void {\n    this.renderer.setInlinePanel(lines);\n  }\n\n  /**\n   * Clear the inline panel.\n   */\n  clearInlinePanel(): void {\n    this.renderer.clearInlinePanel();\n  }\n\n  /**\n   * Check if inline panel is supported (TTY mode only).\n   */\n  supportsInlinePanel(): boolean {\n    return this.renderer.supportsInlinePanel();\n  }\n\n  setEditMode(mode: EditGuardMode): void {\n    this.editMode = mode;\n    this.callbacks.onEditModeChange?.(mode);\n  }\n\n  applyEditMode(mode: EditGuardMode): void {\n    this.setEditMode(mode);\n  }\n\n  getEditMode(): EditGuardMode {\n    return this.editMode;\n  }\n\n  getBuffer(): string {\n    return this.renderer.getBuffer();\n  }\n\n  getCursor(): number {\n    return this.renderer.getCursor();\n  }\n\n  setBuffer(text: string, cursorPos?: number): void {\n    this.renderer.setBuffer(text, cursorPos);\n  }\n\n  setSecretMode(enabled: boolean): void {\n    this.renderer.setSecretMode(enabled);\n  }\n\n  clear(): void {\n    this.renderer.clearBuffer();\n  }\n\n  render(): void {\n    this.renderer.render();\n  }\n\n  forceRender(): void {\n    this.renderer.render();\n  }\n\n  handleResize(): void {\n    this.renderer.render();\n  }\n\n  dispose(): void {\n    this.renderer.cleanup();\n  }\n\n  /**\n   * Update the status line with a single composed message so the UI looks identical\n   * before and during streaming. The renderer only owns one status field, so we\n   * join the different status sources here.\n   */\n  private setStatusBundle(status: { main?: string | null; override?: string | null; streaming?: string | null }): void {\n    if ('main' in status) {\n      this.statusMain = status.main?.trim() || null;\n    }\n    if ('override' in status) {\n      this.statusOverride = status.override?.trim() || null;\n    }\n    if ('streaming' in status) {\n      this.statusStreaming = status.streaming?.trim() || null;\n    }\n    this.refreshStatus();\n  }\n\n  private refreshStatus(): void {\n    this.renderer.updateStatusBundle({\n      main: this.statusMain,\n      override: this.statusOverride,\n      streaming: this.statusStreaming,\n    });\n  }\n\n  private formatElapsed(totalSeconds: number): string {\n    const minutes = Math.floor(totalSeconds / 60);\n    const seconds = totalSeconds % 60;\n    const paddedSeconds = seconds < 10 ? `0${seconds}` : `${seconds}`;\n    return `${minutes}:${paddedSeconds}`;\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}