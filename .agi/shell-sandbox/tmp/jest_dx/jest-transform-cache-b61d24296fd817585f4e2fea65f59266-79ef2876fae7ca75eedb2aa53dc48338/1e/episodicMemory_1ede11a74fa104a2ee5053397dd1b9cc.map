{"version":3,"names":["_nodeFs","require","_nodePath","_nodeOs","DEFAULT_REWARD_WEIGHTS","bug_fix","executionSuccess","testsPassed","staticAnalysis","codeQuality","blastRadius","selfAssessment","speedBonus","feature_add","refactor","test_write","documentation","analysis","configuration","debugging","optimization","migration","unknown","SimpleEmbeddingProvider","dimension","name","vocabulary","Map","idf","embed","text","tokens","tokenize","vector","Array","fill","token","hash","hashToken","idx","Math","abs","magnitude","sqrt","reduce","sum","v","i","length","toLowerCase","replace","split","filter","t","char","charCodeAt","EpisodicMemory","episodes","approaches","optimizationProfiles","dirty","currentEpisode","episodeToolsUsed","Set","episodeFilesModified","constructor","config","dataRoot","process","env","trim","join","homedir","maxEpisodes","maxApproaches","decayFactor","minSimilarity","useEmbeddings","storageDir","embeddingProvider","load","startEpisode","intent","sessionId","category","id","generateId","startTime","Date","now","inferCategory","toolsUsed","filesModified","success","summary","tags","extractTags","retrievalCount","lastRetrieved","clear","recordToolUse","toolName","add","recordFileModification","filePath","endEpisode","episode","endTime","from","textForEmbedding","embedding","set","learnFromEpisode","pruneEpisodes","save","abortEpisode","search","query","results","limit","queryEmbedding","values","successOnly","since","some","includes","similarity","matchReason","cosineSimilarity","keywordSimilarity","ageInDays","decayedSimilarity","pow","popularityBoost","finalSimilarity","push","sort","a","b","topResults","slice","result","getApproach","keywords","extractKeywords","approach","overlapCount","k","min","bestMatch","bestSimilarity","getRecentEpisodes","filtered","e","approachKey","existing","get","useCount","successRate","sourceEpisodes","tools","updatedAt","triggerPattern","pruneApproaches","recordApproachFailure","approachId","timestamp","toString","random","lower","test","techPatterns","typescript","javascript","python","react","node","api","database","git","tag","pattern","Object","entries","w","dotProduct","magnitudeA","magnitudeB","queryWords","textWords","size","matches","word","has","getOptimizationProfile","policyName","profile","preferredMode","inferPreferredMode","useGitWorktrees","rewardWeights","preferredTools","inferPreferredTools","autoApprovalThreshold","successCount","failureCount","updateOptimizationProfile","options","tool","mode","usedGitWorktrees","max","getRewardWeights","adjustRewardWeights","winningSignals","learningRate","key","value","total","keys","getAllOptimizationProfiles","scored","map","ep","ageScore","successScore","retrievalScore","score","toKeep","s","delete","ap","recencyScore","useScore","existsSync","mkdirSync","recursive","episodesPath","approachesPath","profilesPath","data","JSON","parse","readFileSync","profiles","error","console","writeFileSync","stringify","version","fromEntries","getStats","categoryCounts","tagCounts","topTags","profileSummary","p","totalEpisodes","successfulEpisodes","totalApproaches","totalProfiles","exports","defaultInstance","getEpisodicMemory","createEpisodicMemory"],"sources":["episodicMemory.ts"],"sourcesContent":["/**\n * Episodic Memory System - Cross-session pattern learning with semantic indexing\n *\n * Features:\n * 1. Episode detection and boundary marking\n * 2. Semantic indexing via vector embeddings (pluggable providers)\n * 3. Cross-session pattern learning and retrieval\n * 4. Task-specific memory with temporal decay\n * 5. Memory consolidation and pruning\n *\n * Storage: ~/.agi/episodic-memory/\n *   - episodes.json     (episode metadata index)\n *   - embeddings.bin    (vector embeddings cache)\n *   - patterns.json     (learned patterns)\n */\n\nimport { mkdirSync, readFileSync, writeFileSync, existsSync } from 'node:fs';\nimport { join } from 'node:path';\nimport { homedir } from 'node:os';\nimport { createHash } from 'node:crypto';\n\n// ============================================================================\n// TYPES\n// ============================================================================\n\nexport interface Episode {\n  id: string;\n  sessionId: string;\n  startTime: number;\n  endTime: number;\n  /** User's original intent/prompt that started this episode */\n  intent: string;\n  /** Category of work performed */\n  category: EpisodeCategory;\n  /** Tools used during this episode */\n  toolsUsed: string[];\n  /** Key files touched */\n  filesModified: string[];\n  /** Whether the episode was successful */\n  success: boolean;\n  /** Summary of what was accomplished */\n  summary: string;\n  /** Tags for semantic grouping */\n  tags: string[];\n  /** Embedding vector for semantic search (optional) */\n  embedding?: number[];\n  /** Parent episode if this is a sub-task */\n  parentId?: string;\n  /** Retrieval count for popularity weighting */\n  retrievalCount: number;\n  /** Last time this episode was retrieved */\n  lastRetrieved: number;\n}\n\nexport type EpisodeCategory =\n  | 'bug_fix'\n  | 'feature_add'\n  | 'refactor'\n  | 'test_write'\n  | 'documentation'\n  | 'analysis'\n  | 'configuration'\n  | 'debugging'\n  | 'optimization'\n  | 'migration'\n  | 'unknown';\n\nexport interface LearnedApproach {\n  id: string;\n  /** Pattern that triggers this approach (normalized) */\n  triggerPattern: string;\n  /** Keywords for fast matching */\n  keywords: string[];\n  /** Step-by-step approach that worked */\n  approach: string[];\n  /** Tools typically used */\n  tools: string[];\n  /** Success rate (0-1) */\n  successRate: number;\n  /** Number of times this approach was used */\n  useCount: number;\n  /** Episode IDs that contributed to this pattern */\n  sourceEpisodes: string[];\n  /** Embedding for semantic matching */\n  embedding?: number[];\n  /** Last update timestamp */\n  updatedAt: number;\n}\n\nexport interface MemoryQuery {\n  /** Natural language query */\n  query: string;\n  /** Filter by category */\n  category?: EpisodeCategory;\n  /** Filter by tags */\n  tags?: string[];\n  /** Filter by time range (ms since epoch) */\n  since?: number;\n  /** Filter by success status */\n  successOnly?: boolean;\n  /** Maximum results */\n  limit?: number;\n  /** Minimum similarity threshold (0-1) */\n  minSimilarity?: number;\n}\n\nexport interface MemorySearchResult {\n  episode: Episode;\n  similarity: number;\n  matchReason: string;\n}\n\nexport interface EmbeddingProvider {\n  /** Generate embedding vector for text */\n  embed(text: string): Promise<number[]>;\n  /** Dimension of embedding vectors */\n  dimension: number;\n  /** Provider name for tracking */\n  name: string;\n}\n\nexport interface EpisodicMemoryConfig {\n  /** Maximum episodes to keep */\n  maxEpisodes: number;\n  /** Maximum learned approaches to keep */\n  maxApproaches: number;\n  /** Temporal decay factor (0-1, lower = faster decay) */\n  decayFactor: number;\n  /** Minimum similarity for semantic search (0-1) */\n  minSimilarity: number;\n  /** Enable embedding-based search */\n  useEmbeddings: boolean;\n  /** Embedding provider (optional) */\n  embeddingProvider?: EmbeddingProvider;\n  /** Storage directory */\n  storageDir: string;\n}\n\n// ============================================================================\n// TASK-SPECIFIC OPTIMIZATION PROFILES\n// ============================================================================\n\n/**\n * Optimization profile for task-specific settings.\n * Used to configure RL tournament behavior, validation, and execution strategies\n * based on learned patterns from successful episodes.\n */\nexport interface OptimizationProfile {\n  id: string;\n  /** Category this profile applies to */\n  category: EpisodeCategory;\n  /** Policy name for human reference */\n  policyName: string;\n  /** Preferred upgrade mode for this category */\n  preferredMode: 'single-continuous' | 'dual-rl-continuous' | 'dual-rl-tournament';\n  /** Whether to use git worktrees for isolation */\n  useGitWorktrees: boolean;\n  /** Custom reward weights for RL tournament */\n  rewardWeights: {\n    executionSuccess: number;\n    testsPassed: number;\n    staticAnalysis: number;\n    codeQuality: number;\n    blastRadius: number;\n    selfAssessment: number;\n    speedBonus: number;\n  };\n  /** Tools that perform well for this category */\n  preferredTools: string[];\n  /** Success rate threshold for auto-approval */\n  autoApprovalThreshold: number;\n  /** Number of successful executions */\n  successCount: number;\n  /** Number of failed executions */\n  failureCount: number;\n  /** Last update timestamp */\n  updatedAt: number;\n}\n\n/**\n * Default reward weights for each category\n */\nconst DEFAULT_REWARD_WEIGHTS: Record<EpisodeCategory, OptimizationProfile['rewardWeights']> = {\n  bug_fix: {\n    executionSuccess: 0.30,\n    testsPassed: 0.35,\n    staticAnalysis: 0.10,\n    codeQuality: 0.05,\n    blastRadius: 0.15,\n    selfAssessment: 0.03,\n    speedBonus: 0.02,\n  },\n  feature_add: {\n    executionSuccess: 0.25,\n    testsPassed: 0.25,\n    staticAnalysis: 0.15,\n    codeQuality: 0.15,\n    blastRadius: 0.10,\n    selfAssessment: 0.05,\n    speedBonus: 0.05,\n  },\n  refactor: {\n    executionSuccess: 0.25,\n    testsPassed: 0.30,\n    staticAnalysis: 0.20,\n    codeQuality: 0.15,\n    blastRadius: 0.05,\n    selfAssessment: 0.03,\n    speedBonus: 0.02,\n  },\n  test_write: {\n    executionSuccess: 0.30,\n    testsPassed: 0.40,\n    staticAnalysis: 0.10,\n    codeQuality: 0.05,\n    blastRadius: 0.05,\n    selfAssessment: 0.05,\n    speedBonus: 0.05,\n  },\n  documentation: {\n    executionSuccess: 0.35,\n    testsPassed: 0.05,\n    staticAnalysis: 0.10,\n    codeQuality: 0.20,\n    blastRadius: 0.10,\n    selfAssessment: 0.10,\n    speedBonus: 0.10,\n  },\n  analysis: {\n    executionSuccess: 0.40,\n    testsPassed: 0.05,\n    staticAnalysis: 0.05,\n    codeQuality: 0.10,\n    blastRadius: 0.05,\n    selfAssessment: 0.20,\n    speedBonus: 0.15,\n  },\n  configuration: {\n    executionSuccess: 0.35,\n    testsPassed: 0.20,\n    staticAnalysis: 0.15,\n    codeQuality: 0.05,\n    blastRadius: 0.15,\n    selfAssessment: 0.05,\n    speedBonus: 0.05,\n  },\n  debugging: {\n    executionSuccess: 0.35,\n    testsPassed: 0.25,\n    staticAnalysis: 0.05,\n    codeQuality: 0.05,\n    blastRadius: 0.05,\n    selfAssessment: 0.15,\n    speedBonus: 0.10,\n  },\n  optimization: {\n    executionSuccess: 0.25,\n    testsPassed: 0.25,\n    staticAnalysis: 0.10,\n    codeQuality: 0.15,\n    blastRadius: 0.05,\n    selfAssessment: 0.05,\n    speedBonus: 0.15,\n  },\n  migration: {\n    executionSuccess: 0.30,\n    testsPassed: 0.30,\n    staticAnalysis: 0.15,\n    codeQuality: 0.05,\n    blastRadius: 0.10,\n    selfAssessment: 0.05,\n    speedBonus: 0.05,\n  },\n  unknown: {\n    executionSuccess: 0.25,\n    testsPassed: 0.30,\n    staticAnalysis: 0.15,\n    codeQuality: 0.10,\n    blastRadius: 0.10,\n    selfAssessment: 0.05,\n    speedBonus: 0.05,\n  },\n};\n\n// ============================================================================\n// DEFAULT EMBEDDING PROVIDER (Simple TF-IDF style, no external deps)\n// ============================================================================\n\nclass SimpleEmbeddingProvider implements EmbeddingProvider {\n  readonly dimension = 256;\n  readonly name = 'simple-tfidf';\n\n  private vocabulary: Map<string, number> = new Map();\n  private idf: Map<string, number> = new Map();\n\n  async embed(text: string): Promise<number[]> {\n    const tokens = this.tokenize(text);\n    const vector = new Array(this.dimension).fill(0);\n\n    // Simple hash-based embedding (deterministic, no training needed)\n    for (const token of tokens) {\n      const hash = this.hashToken(token);\n      const idx = Math.abs(hash) % this.dimension;\n      vector[idx] += 1;\n    }\n\n    // Normalize to unit vector\n    const magnitude = Math.sqrt(vector.reduce((sum, v) => sum + v * v, 0));\n    if (magnitude > 0) {\n      for (let i = 0; i < vector.length; i++) {\n        vector[i] /= magnitude;\n      }\n    }\n\n    return vector;\n  }\n\n  private tokenize(text: string): string[] {\n    return text\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s]/g, ' ')\n      .split(/\\s+/)\n      .filter(t => t.length > 2);\n  }\n\n  private hashToken(token: string): number {\n    let hash = 0;\n    for (let i = 0; i < token.length; i++) {\n      const char = token.charCodeAt(i);\n      hash = ((hash << 5) - hash) + char;\n      hash = hash & hash; // Convert to 32-bit integer\n    }\n    return hash;\n  }\n}\n\n// ============================================================================\n// EPISODIC MEMORY SYSTEM\n// ============================================================================\n\nexport class EpisodicMemory {\n  private config: EpisodicMemoryConfig;\n  private episodes: Map<string, Episode> = new Map();\n  private approaches: Map<string, LearnedApproach> = new Map();\n  private optimizationProfiles: Map<EpisodeCategory, OptimizationProfile> = new Map();\n  private embeddingProvider: EmbeddingProvider;\n  private dirty = false;\n\n  // In-memory episode being recorded\n  private currentEpisode: Partial<Episode> | null = null;\n  private episodeToolsUsed: Set<string> = new Set();\n  private episodeFilesModified: Set<string> = new Set();\n\n  constructor(config: Partial<EpisodicMemoryConfig> = {}) {\n    const dataRoot = process.env['EROSOLAR_DATA_DIR']?.trim() || join(homedir(), '.agi');\n\n    this.config = {\n      maxEpisodes: 1000,\n      maxApproaches: 200,\n      decayFactor: 0.95,\n      minSimilarity: 0.3,\n      useEmbeddings: true,\n      storageDir: join(dataRoot, 'episodic-memory'),\n      ...config,\n    };\n\n    this.embeddingProvider = config.embeddingProvider || new SimpleEmbeddingProvider();\n    this.load();\n  }\n\n  // ==========================================================================\n  // EPISODE LIFECYCLE\n  // ==========================================================================\n\n  /**\n   * Start recording a new episode\n   */\n  startEpisode(intent: string, sessionId: string, category?: EpisodeCategory): string {\n    const id = this.generateId();\n\n    this.currentEpisode = {\n      id,\n      sessionId,\n      startTime: Date.now(),\n      intent,\n      category: category || this.inferCategory(intent),\n      toolsUsed: [],\n      filesModified: [],\n      success: false,\n      summary: '',\n      tags: this.extractTags(intent),\n      retrievalCount: 0,\n      lastRetrieved: 0,\n    };\n\n    this.episodeToolsUsed.clear();\n    this.episodeFilesModified.clear();\n\n    return id;\n  }\n\n  /**\n   * Record tool usage within current episode\n   */\n  recordToolUse(toolName: string): void {\n    this.episodeToolsUsed.add(toolName);\n  }\n\n  /**\n   * Record file modification within current episode\n   */\n  recordFileModification(filePath: string): void {\n    this.episodeFilesModified.add(filePath);\n  }\n\n  /**\n   * End current episode and save to memory\n   */\n  async endEpisode(success: boolean, summary: string): Promise<Episode | null> {\n    if (!this.currentEpisode) return null;\n\n    const episode: Episode = {\n      ...this.currentEpisode as Episode,\n      endTime: Date.now(),\n      success,\n      summary,\n      toolsUsed: Array.from(this.episodeToolsUsed),\n      filesModified: Array.from(this.episodeFilesModified),\n    };\n\n    // Generate embedding for semantic search\n    if (this.config.useEmbeddings) {\n      const textForEmbedding = `${episode.intent} ${episode.summary} ${episode.tags.join(' ')}`;\n      episode.embedding = await this.embeddingProvider.embed(textForEmbedding);\n    }\n\n    this.episodes.set(episode.id, episode);\n    this.dirty = true;\n\n    // Learn from successful episodes\n    if (success) {\n      await this.learnFromEpisode(episode);\n    }\n\n    // Prune if needed\n    this.pruneEpisodes();\n\n    // Clear current episode\n    this.currentEpisode = null;\n    this.episodeToolsUsed.clear();\n    this.episodeFilesModified.clear();\n\n    // Auto-save\n    this.save();\n\n    return episode;\n  }\n\n  /**\n   * Abort current episode without saving\n   */\n  abortEpisode(): void {\n    this.currentEpisode = null;\n    this.episodeToolsUsed.clear();\n    this.episodeFilesModified.clear();\n  }\n\n  // ==========================================================================\n  // RETRIEVAL & SEARCH\n  // ==========================================================================\n\n  /**\n   * Search for similar past episodes\n   */\n  async search(query: MemoryQuery): Promise<MemorySearchResult[]> {\n    const results: MemorySearchResult[] = [];\n    const limit = query.limit || 10;\n\n    // Generate query embedding if using embeddings\n    let queryEmbedding: number[] | null = null;\n    if (this.config.useEmbeddings) {\n      queryEmbedding = await this.embeddingProvider.embed(query.query);\n    }\n\n    for (const episode of this.episodes.values()) {\n      // Apply filters\n      if (query.category && episode.category !== query.category) continue;\n      if (query.successOnly && !episode.success) continue;\n      if (query.since && episode.startTime < query.since) continue;\n      if (query.tags && !query.tags.some(t => episode.tags.includes(t))) continue;\n\n      // Calculate similarity\n      let similarity = 0;\n      let matchReason = '';\n\n      if (queryEmbedding && episode.embedding) {\n        // Cosine similarity for embeddings\n        similarity = this.cosineSimilarity(queryEmbedding, episode.embedding);\n        matchReason = 'semantic similarity';\n      } else {\n        // Fallback to keyword matching\n        similarity = this.keywordSimilarity(query.query, episode.intent + ' ' + episode.summary);\n        matchReason = 'keyword match';\n      }\n\n      // Apply temporal decay\n      const ageInDays = (Date.now() - episode.endTime) / (1000 * 60 * 60 * 24);\n      const decayedSimilarity = similarity * Math.pow(this.config.decayFactor, ageInDays / 30);\n\n      // Boost for popularity\n      const popularityBoost = 1 + (episode.retrievalCount * 0.01);\n      const finalSimilarity = decayedSimilarity * popularityBoost;\n\n      if (finalSimilarity >= (query.minSimilarity || this.config.minSimilarity)) {\n        results.push({\n          episode,\n          similarity: finalSimilarity,\n          matchReason,\n        });\n      }\n    }\n\n    // Sort by similarity and limit\n    results.sort((a, b) => b.similarity - a.similarity);\n    const topResults = results.slice(0, limit);\n\n    // Update retrieval counts\n    for (const result of topResults) {\n      result.episode.retrievalCount++;\n      result.episode.lastRetrieved = Date.now();\n      this.dirty = true;\n    }\n\n    return topResults;\n  }\n\n  /**\n   * Get learned approach for a task\n   */\n  async getApproach(intent: string): Promise<LearnedApproach | null> {\n    const keywords = this.extractKeywords(intent);\n\n    // First try exact keyword match\n    for (const approach of this.approaches.values()) {\n      const overlapCount = keywords.filter(k => approach.keywords.includes(k)).length;\n      if (overlapCount >= Math.min(3, keywords.length * 0.5)) {\n        return approach;\n      }\n    }\n\n    // Try semantic search if embeddings enabled\n    if (this.config.useEmbeddings) {\n      const queryEmbedding = await this.embeddingProvider.embed(intent);\n      let bestMatch: LearnedApproach | null = null;\n      let bestSimilarity = 0;\n\n      for (const approach of this.approaches.values()) {\n        if (approach.embedding) {\n          const similarity = this.cosineSimilarity(queryEmbedding, approach.embedding);\n          if (similarity > bestSimilarity && similarity >= this.config.minSimilarity) {\n            bestSimilarity = similarity;\n            bestMatch = approach;\n          }\n        }\n      }\n\n      return bestMatch;\n    }\n\n    return null;\n  }\n\n  /**\n   * Get recent episodes for context\n   */\n  getRecentEpisodes(limit = 5, sessionId?: string): Episode[] {\n    const episodes = Array.from(this.episodes.values());\n\n    const filtered = sessionId\n      ? episodes.filter(e => e.sessionId === sessionId)\n      : episodes;\n\n    return filtered\n      .sort((a, b) => b.endTime - a.endTime)\n      .slice(0, limit);\n  }\n\n  // ==========================================================================\n  // LEARNING\n  // ==========================================================================\n\n  /**\n   * Learn patterns from a successful episode\n   */\n  private async learnFromEpisode(episode: Episode): Promise<void> {\n    const keywords = this.extractKeywords(episode.intent);\n    const approachKey = keywords.sort().join('_');\n\n    const existing = this.approaches.get(approachKey);\n\n    if (existing) {\n      // Update existing approach\n      existing.useCount++;\n      existing.successRate = (existing.successRate * (existing.useCount - 1) + 1) / existing.useCount;\n      existing.sourceEpisodes.push(episode.id);\n      existing.tools = [...new Set([...existing.tools, ...episode.toolsUsed])];\n      existing.updatedAt = Date.now();\n\n      // Re-compute embedding\n      if (this.config.useEmbeddings) {\n        existing.embedding = await this.embeddingProvider.embed(existing.triggerPattern);\n      }\n    } else {\n      // Create new approach\n      const approach: LearnedApproach = {\n        id: this.generateId(),\n        triggerPattern: episode.intent,\n        keywords,\n        approach: [episode.summary],\n        tools: episode.toolsUsed,\n        successRate: 1,\n        useCount: 1,\n        sourceEpisodes: [episode.id],\n        updatedAt: Date.now(),\n      };\n\n      if (this.config.useEmbeddings) {\n        approach.embedding = await this.embeddingProvider.embed(approach.triggerPattern);\n      }\n\n      this.approaches.set(approachKey, approach);\n    }\n\n    this.pruneApproaches();\n    this.dirty = true;\n  }\n\n  /**\n   * Record approach failure to update success rate\n   */\n  recordApproachFailure(approachId: string): void {\n    for (const approach of this.approaches.values()) {\n      if (approach.id === approachId) {\n        approach.useCount++;\n        approach.successRate = (approach.successRate * (approach.useCount - 1)) / approach.useCount;\n        approach.updatedAt = Date.now();\n        this.dirty = true;\n        break;\n      }\n    }\n  }\n\n  // ==========================================================================\n  // HELPERS\n  // ==========================================================================\n\n  private generateId(): string {\n    const timestamp = Date.now().toString(36);\n    const random = Math.random().toString(36).slice(2, 8);\n    return `ep_${timestamp}_${random}`;\n  }\n\n  private inferCategory(intent: string): EpisodeCategory {\n    const lower = intent.toLowerCase();\n\n    if (/\\b(fix|bug|error|issue|crash|broken)\\b/.test(lower)) return 'bug_fix';\n    if (/\\b(add|feature|implement|create|new)\\b/.test(lower)) return 'feature_add';\n    if (/\\b(refactor|clean|reorganize|restructure)\\b/.test(lower)) return 'refactor';\n    if (/\\b(test|spec|coverage)\\b/.test(lower)) return 'test_write';\n    if (/\\b(doc|readme|comment|explain)\\b/.test(lower)) return 'documentation';\n    if (/\\b(analyz|understand|explore|investigate)\\b/.test(lower)) return 'analysis';\n    if (/\\b(config|setup|install|env)\\b/.test(lower)) return 'configuration';\n    if (/\\b(debug|trace|log|inspect)\\b/.test(lower)) return 'debugging';\n    if (/\\b(optim|perf|speed|fast)\\b/.test(lower)) return 'optimization';\n    if (/\\b(migrat|upgrad|update|convert)\\b/.test(lower)) return 'migration';\n\n    return 'unknown';\n  }\n\n  private extractTags(text: string): string[] {\n    const tags: string[] = [];\n    const lower = text.toLowerCase();\n\n    // Extract technology tags\n    const techPatterns: Record<string, RegExp> = {\n      typescript: /\\btypescript\\b|\\\\.tsx?\\b/,\n      javascript: /\\bjavascript\\b|\\\\.jsx?\\b/,\n      python: /\\bpython\\b|\\\\.py\\b/,\n      react: /\\breact\\b/,\n      node: /\\bnode\\.?js?\\b/,\n      api: /\\bapi\\b|\\brest\\b|\\bgraphql\\b/,\n      database: /\\bdb\\b|\\bdatabase\\b|\\bsql\\b|\\bmongo\\b/,\n      test: /\\btest\\b|\\bspec\\b|\\bjest\\b|\\bvitest\\b/,\n      git: /\\bgit\\b|\\bcommit\\b|\\bbranch\\b/,\n    };\n\n    for (const [tag, pattern] of Object.entries(techPatterns)) {\n      if (pattern.test(lower)) {\n        tags.push(tag);\n      }\n    }\n\n    return tags;\n  }\n\n  private extractKeywords(text: string): string[] {\n    return text\n      .toLowerCase()\n      .replace(/[^a-z0-9\\s]/g, ' ')\n      .split(/\\s+/)\n      .filter(w => w.length > 3)\n      .filter(w => !['this', 'that', 'with', 'from', 'have', 'will', 'would', 'could', 'should'].includes(w));\n  }\n\n  private cosineSimilarity(a: number[], b: number[]): number {\n    if (a.length !== b.length) return 0;\n\n    let dotProduct = 0;\n    let magnitudeA = 0;\n    let magnitudeB = 0;\n\n    for (let i = 0; i < a.length; i++) {\n      dotProduct += a[i] * b[i];\n      magnitudeA += a[i] * a[i];\n      magnitudeB += b[i] * b[i];\n    }\n\n    const magnitude = Math.sqrt(magnitudeA) * Math.sqrt(magnitudeB);\n    return magnitude === 0 ? 0 : dotProduct / magnitude;\n  }\n\n  private keywordSimilarity(query: string, text: string): number {\n    const queryWords = new Set(this.extractKeywords(query));\n    const textWords = new Set(this.extractKeywords(text));\n\n    if (queryWords.size === 0 || textWords.size === 0) return 0;\n\n    let matches = 0;\n    for (const word of queryWords) {\n      if (textWords.has(word)) matches++;\n    }\n\n    return matches / queryWords.size;\n  }\n\n  // ==========================================================================\n  // OPTIMIZATION PROFILES\n  // ==========================================================================\n\n  /**\n   * Get or create an optimization profile for a category.\n   * Used by the RL tournament system to get task-specific settings.\n   */\n  getOptimizationProfile(category: EpisodeCategory, policyName?: string): OptimizationProfile {\n    const existing = this.optimizationProfiles.get(category);\n    if (existing) {\n      return existing;\n    }\n\n    // Create default profile for this category\n    const profile: OptimizationProfile = {\n      id: `profile_${category}_${Date.now().toString(36)}`,\n      category,\n      policyName: policyName || `${category}_default`,\n      preferredMode: this.inferPreferredMode(category),\n      useGitWorktrees: category === 'migration' || category === 'refactor',\n      rewardWeights: { ...DEFAULT_REWARD_WEIGHTS[category] },\n      preferredTools: this.inferPreferredTools(category),\n      autoApprovalThreshold: 0.85,\n      successCount: 0,\n      failureCount: 0,\n      updatedAt: Date.now(),\n    };\n\n    this.optimizationProfiles.set(category, profile);\n    this.dirty = true;\n    return profile;\n  }\n\n  /**\n   * Update optimization profile based on episode outcome.\n   * Called after an episode completes to adjust learned settings.\n   */\n  updateOptimizationProfile(\n    category: EpisodeCategory,\n    success: boolean,\n    options?: {\n      toolsUsed?: string[];\n      mode?: 'single-continuous' | 'dual-rl-continuous' | 'dual-rl-tournament';\n      usedGitWorktrees?: boolean;\n    }\n  ): void {\n    const profile = this.getOptimizationProfile(category);\n\n    if (success) {\n      profile.successCount++;\n\n      // Update preferred tools based on successful episodes\n      if (options?.toolsUsed) {\n        for (const tool of options.toolsUsed) {\n          if (!profile.preferredTools.includes(tool)) {\n            profile.preferredTools.push(tool);\n          }\n        }\n        // Keep only top 10 preferred tools\n        profile.preferredTools = profile.preferredTools.slice(0, 10);\n      }\n\n      // Update mode preference if dual mode was successful\n      if (options?.mode && options.mode !== 'single-continuous') {\n        const successRate = profile.successCount / (profile.successCount + profile.failureCount);\n        if (successRate > 0.7 && profile.preferredMode === 'single-continuous') {\n          profile.preferredMode = 'dual-rl-continuous';\n        }\n      }\n\n      // Track git worktree success\n      if (options?.usedGitWorktrees && !profile.useGitWorktrees) {\n        profile.useGitWorktrees = true;\n      }\n    } else {\n      profile.failureCount++;\n\n      // If success rate drops, adjust auto-approval threshold\n      const successRate = profile.successCount / (profile.successCount + profile.failureCount);\n      if (successRate < profile.autoApprovalThreshold) {\n        profile.autoApprovalThreshold = Math.max(0.5, successRate - 0.05);\n      }\n    }\n\n    profile.updatedAt = Date.now();\n    this.dirty = true;\n    this.save();\n  }\n\n  /**\n   * Get reward weights for a category, adjusted based on learned patterns.\n   */\n  getRewardWeights(category: EpisodeCategory): OptimizationProfile['rewardWeights'] {\n    const profile = this.getOptimizationProfile(category);\n    return profile.rewardWeights;\n  }\n\n  /**\n   * Update reward weights based on tournament outcomes.\n   * Adjusts weights to favor signals that correlated with successful outcomes.\n   */\n  adjustRewardWeights(\n    category: EpisodeCategory,\n    winningSignals: Partial<OptimizationProfile['rewardWeights']>,\n    success: boolean\n  ): void {\n    const profile = this.getOptimizationProfile(category);\n    const learningRate = 0.1;\n\n    for (const [key, value] of Object.entries(winningSignals)) {\n      const k = key as keyof OptimizationProfile['rewardWeights'];\n      if (success) {\n        // Slightly increase weight for signals that contributed to success\n        profile.rewardWeights[k] = Math.min(0.5, profile.rewardWeights[k] + learningRate * (value as number));\n      } else {\n        // Slightly decrease weight for signals that didn't prevent failure\n        profile.rewardWeights[k] = Math.max(0.01, profile.rewardWeights[k] - learningRate * 0.5 * (value as number));\n      }\n    }\n\n    // Normalize weights to sum to 1\n    const total = Object.values(profile.rewardWeights).reduce((sum, v) => sum + v, 0);\n    for (const key of Object.keys(profile.rewardWeights)) {\n      const k = key as keyof OptimizationProfile['rewardWeights'];\n      profile.rewardWeights[k] /= total;\n    }\n\n    profile.updatedAt = Date.now();\n    this.dirty = true;\n  }\n\n  /**\n   * Get all optimization profiles for inspection.\n   */\n  getAllOptimizationProfiles(): OptimizationProfile[] {\n    return Array.from(this.optimizationProfiles.values());\n  }\n\n  private inferPreferredMode(\n    category: EpisodeCategory\n  ): 'single-continuous' | 'dual-rl-continuous' | 'dual-rl-tournament' {\n    // Categories that benefit from dual-agent comparison\n    switch (category) {\n      case 'refactor':\n      case 'optimization':\n      case 'migration':\n        return 'dual-rl-tournament';\n      case 'feature_add':\n      case 'bug_fix':\n        return 'dual-rl-continuous';\n      default:\n        return 'single-continuous';\n    }\n  }\n\n  private inferPreferredTools(category: EpisodeCategory): string[] {\n    switch (category) {\n      case 'bug_fix':\n        return ['Read', 'Grep', 'Edit', 'Bash'];\n      case 'feature_add':\n        return ['Read', 'Write', 'Edit', 'Bash'];\n      case 'refactor':\n        return ['Read', 'Edit', 'Grep', 'Bash'];\n      case 'test_write':\n        return ['Read', 'Write', 'Bash'];\n      case 'documentation':\n        return ['Read', 'Write', 'Edit'];\n      case 'analysis':\n        return ['Read', 'Grep', 'Glob'];\n      case 'debugging':\n        return ['Read', 'Grep', 'Bash', 'Edit'];\n      default:\n        return ['Read', 'Edit', 'Bash'];\n    }\n  }\n\n  // ==========================================================================\n  // PRUNING\n  // ==========================================================================\n\n  private pruneEpisodes(): void {\n    if (this.episodes.size <= this.config.maxEpisodes) return;\n\n    // Score episodes by value (recency + success + retrieval count)\n    const scored = Array.from(this.episodes.values()).map(ep => {\n      const ageScore = 1 - (Date.now() - ep.endTime) / (1000 * 60 * 60 * 24 * 365); // 1 year decay\n      const successScore = ep.success ? 0.3 : 0;\n      const retrievalScore = Math.min(ep.retrievalCount * 0.05, 0.2);\n      return { id: ep.id, score: ageScore + successScore + retrievalScore };\n    });\n\n    scored.sort((a, b) => b.score - a.score);\n\n    // Keep top episodes\n    const toKeep = new Set(scored.slice(0, this.config.maxEpisodes).map(s => s.id));\n\n    for (const id of this.episodes.keys()) {\n      if (!toKeep.has(id)) {\n        this.episodes.delete(id);\n      }\n    }\n  }\n\n  private pruneApproaches(): void {\n    if (this.approaches.size <= this.config.maxApproaches) return;\n\n    // Score approaches by usefulness\n    const scored = Array.from(this.approaches.entries()).map(([key, ap]) => {\n      const recencyScore = 1 - (Date.now() - ap.updatedAt) / (1000 * 60 * 60 * 24 * 180); // 6 month decay\n      const useScore = Math.min(ap.useCount * 0.1, 0.3);\n      const successScore = ap.successRate * 0.4;\n      return { key, score: recencyScore + useScore + successScore };\n    });\n\n    scored.sort((a, b) => b.score - a.score);\n\n    // Keep top approaches\n    const toKeep = new Set(scored.slice(0, this.config.maxApproaches).map(s => s.key));\n\n    for (const key of this.approaches.keys()) {\n      if (!toKeep.has(key)) {\n        this.approaches.delete(key);\n      }\n    }\n  }\n\n  // ==========================================================================\n  // PERSISTENCE\n  // ==========================================================================\n\n  private load(): void {\n    try {\n      if (!existsSync(this.config.storageDir)) {\n        mkdirSync(this.config.storageDir, { recursive: true });\n        return;\n      }\n\n      const episodesPath = join(this.config.storageDir, 'episodes.json');\n      const approachesPath = join(this.config.storageDir, 'approaches.json');\n      const profilesPath = join(this.config.storageDir, 'optimization-profiles.json');\n\n      if (existsSync(episodesPath)) {\n        const data = JSON.parse(readFileSync(episodesPath, 'utf-8'));\n        for (const ep of data.episodes || []) {\n          this.episodes.set(ep.id, ep);\n        }\n      }\n\n      if (existsSync(approachesPath)) {\n        const data = JSON.parse(readFileSync(approachesPath, 'utf-8'));\n        for (const [key, ap] of Object.entries(data.approaches || {})) {\n          this.approaches.set(key, ap as LearnedApproach);\n        }\n      }\n\n      if (existsSync(profilesPath)) {\n        const data = JSON.parse(readFileSync(profilesPath, 'utf-8'));\n        for (const profile of data.profiles || []) {\n          this.optimizationProfiles.set(profile.category as EpisodeCategory, profile as OptimizationProfile);\n        }\n      }\n    } catch (error) {\n      console.error('Failed to load episodic memory:', error);\n    }\n  }\n\n  save(): void {\n    if (!this.dirty) return;\n\n    try {\n      mkdirSync(this.config.storageDir, { recursive: true });\n\n      const episodesPath = join(this.config.storageDir, 'episodes.json');\n      const approachesPath = join(this.config.storageDir, 'approaches.json');\n      const profilesPath = join(this.config.storageDir, 'optimization-profiles.json');\n\n      writeFileSync(episodesPath, JSON.stringify({\n        version: 1,\n        updatedAt: Date.now(),\n        episodes: Array.from(this.episodes.values()),\n      }, null, 2));\n\n      writeFileSync(approachesPath, JSON.stringify({\n        version: 1,\n        updatedAt: Date.now(),\n        approaches: Object.fromEntries(this.approaches),\n      }, null, 2));\n\n      writeFileSync(profilesPath, JSON.stringify({\n        version: 1,\n        updatedAt: Date.now(),\n        profiles: Array.from(this.optimizationProfiles.values()),\n      }, null, 2));\n\n      this.dirty = false;\n    } catch (error) {\n      console.error('Failed to save episodic memory:', error);\n    }\n  }\n\n  // ==========================================================================\n  // STATS\n  // ==========================================================================\n\n  getStats(): {\n    totalEpisodes: number;\n    successfulEpisodes: number;\n    totalApproaches: number;\n    totalProfiles: number;\n    categoryCounts: Record<string, number>;\n    topTags: string[];\n    profileSummary: { category: string; successRate: number; preferredMode: string }[];\n  } {\n    const categoryCounts: Record<string, number> = {};\n    const tagCounts: Record<string, number> = {};\n    let successCount = 0;\n\n    for (const episode of this.episodes.values()) {\n      categoryCounts[episode.category] = (categoryCounts[episode.category] || 0) + 1;\n      if (episode.success) successCount++;\n      for (const tag of episode.tags) {\n        tagCounts[tag] = (tagCounts[tag] || 0) + 1;\n      }\n    }\n\n    const topTags = Object.entries(tagCounts)\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 10)\n      .map(([tag]) => tag);\n\n    const profileSummary = Array.from(this.optimizationProfiles.values())\n      .map(p => ({\n        category: p.category,\n        successRate: p.successCount + p.failureCount > 0\n          ? p.successCount / (p.successCount + p.failureCount)\n          : 0,\n        preferredMode: p.preferredMode,\n      }))\n      .sort((a, b) => b.successRate - a.successRate);\n\n    return {\n      totalEpisodes: this.episodes.size,\n      successfulEpisodes: successCount,\n      totalApproaches: this.approaches.size,\n      totalProfiles: this.optimizationProfiles.size,\n      categoryCounts,\n      topTags,\n      profileSummary,\n    };\n  }\n}\n\n// ============================================================================\n// SINGLETON & FACTORY\n// ============================================================================\n\nlet defaultInstance: EpisodicMemory | null = null;\n\n/**\n * Get or create the default episodic memory instance\n */\nexport function getEpisodicMemory(config?: Partial<EpisodicMemoryConfig>): EpisodicMemory {\n  if (!defaultInstance) {\n    defaultInstance = new EpisodicMemory(config);\n  }\n  return defaultInstance;\n}\n\n/**\n * Create a new episodic memory instance with custom config\n */\nexport function createEpisodicMemory(config: Partial<EpisodicMemoryConfig> = {}): EpisodicMemory {\n  return new EpisodicMemory(config);\n}\n"],"mappings":"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","ignoreList":[]}