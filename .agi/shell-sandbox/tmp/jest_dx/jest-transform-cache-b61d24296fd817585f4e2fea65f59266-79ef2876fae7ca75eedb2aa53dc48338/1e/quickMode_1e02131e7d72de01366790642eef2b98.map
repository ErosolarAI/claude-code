{"version":3,"names":["cov_2nvn2td6in","actualCoverage","stdout","stdin","exit","readline","hasAgentProfile","listAgentProfiles","createAgentController","resolveWorkspaceCaptureOptions","buildWorkspaceContext","loadAllSecrets","formatClickableLinks","runQuickMode","options","f","startTime","s","Date","now","parsed","parseQuickArgs","argv","profile","resolveProfile","workingDir","process","cwd","workspaceOptions","env","workspaceContext","b","console","error","controller","skipProviderDiscovery","initTime","processing","stdinClosed","watchStdIn","handlePrompt","prompt","trimmed","trim","accumulatedContent","event","send","type","content","formatted","write","toolName","args","parameters","result","length","lines","split","slice","join","fromProvider","fromModel","reason","toProvider","toModel","processQueue","prompts","catch","Error","message","String","rl","createInterface","input","terminal","pendingPrompts","on","line","push","batch","splice","resume","isTTY","promptTokens","skipAgi","index","token","startsWith","override","available","map","p","name"],"sources":["quickMode.ts"],"sourcesContent":["/**\n * Quick Mode - Ultra-fast single-command execution with minimal overhead.\n *\n * Usage:\n *   agi --quick \"create a hello world script\"\n *   agi -q \"fix the build error\"\n *   echo \"run npm test\" | agi -q\n *\n * Optimizations:\n * - Skips provider discovery (uses cached or default)\n * - Minimal tool loading (core tools only)\n * - No status bar, no fancy UI\n * - Direct stdout streaming\n * - Lazy AGI core loading\n *\n * This mode maintains AGI core requirements while minimizing startup time.\n */\n\nimport { stdout, stdin, exit } from 'node:process';\nimport readline from 'node:readline';\nimport type { ProfileName } from '../config.js';\nimport { hasAgentProfile, listAgentProfiles } from '../core/agentProfiles.js';\nimport { createAgentController } from '../runtime/agentController.js';\nimport { resolveWorkspaceCaptureOptions, buildWorkspaceContext } from '../workspace.js';\nimport { loadAllSecrets } from '../core/secretStore.js';\nimport { formatClickableLinks } from '../ui/richText.js';\n\nexport interface QuickLaunchOptions {\n  argv: string[];\n}\n\ninterface ParsedQuickArgs {\n  profile?: string;\n  prompt?: string | null;\n  watchStdIn: boolean;\n  skipAgi?: boolean;\n}\n\n/**\n * Run in quick mode - optimized for fast single-command execution.\n * Maintains AGI core requirements while minimizing startup overhead.\n */\nexport async function runQuickMode(options: QuickLaunchOptions): Promise<void> {\n  const startTime = Date.now();\n\n  // Load secrets early but skip other heavy initialization\n  loadAllSecrets();\n\n  const parsed = parseQuickArgs(options.argv);\n  const profile = resolveProfile(parsed.profile);\n  const workingDir = process.cwd();\n\n  // Minimal workspace context - skip heavy analysis\n  const workspaceOptions = resolveWorkspaceCaptureOptions(process.env);\n  const workspaceContext = buildWorkspaceContext(workingDir, workspaceOptions);\n\n  // Log pre-controller time\n  if (process.env['EROSOLAR_DEBUG']) {\n    console.error(`[quick] pre-controller: ${Date.now() - startTime}ms`);\n  }\n\n  // Create controller with minimal options - skip provider discovery\n  const controller = await createAgentController({\n    profile,\n    workingDir,\n    workspaceContext,\n    env: process.env,\n    skipProviderDiscovery: true, // Key optimization\n  });\n\n  const initTime = Date.now() - startTime;\n\n  // Log init time in debug mode\n  if (process.env['EROSOLAR_DEBUG']) {\n    console.error(`[quick] initialized in ${initTime}ms`);\n  }\n\n  let processing = false;\n  let stdinClosed = !parsed.watchStdIn;\n\n  const handlePrompt = async (prompt: string): Promise<void> => {\n    const trimmed = prompt.trim();\n    if (!trimmed) {\n      return;\n    }\n\n    let accumulatedContent = '';\n\n    // Stream the response with minimal UI overhead\n    for await (const event of controller.send(trimmed)) {\n      if (event.type === 'message.delta') {\n        accumulatedContent += event.content;\n      } else if (event.type === 'message.complete') {\n        const formatted = formatClickableLinks(accumulatedContent);\n        stdout.write(formatted);\n        stdout.write('\\n');\n        accumulatedContent = '';\n      } else if (event.type === 'tool.start') {\n        // Compact tool output for quick mode\n        const toolName = event.toolName;\n        const args = event.parameters;\n        if (toolName === 'Bash' && args?.['command']) {\n          stdout.write(`$ ${args['command']}\\n`);\n        } else if (toolName === 'Read' && args?.['file_path']) {\n          stdout.write(`[read] ${args['file_path']}\\n`);\n        } else if (toolName === 'Write' && args?.['file_path']) {\n          stdout.write(`[write] ${args['file_path']}\\n`);\n        } else if (toolName === 'Edit' && args?.['file_path']) {\n          stdout.write(`[edit] ${args['file_path']}\\n`);\n        } else if (toolName === 'Glob') {\n          stdout.write(`[glob] ${args?.['pattern'] || ''}\\n`);\n        } else if (toolName === 'Grep') {\n          stdout.write(`[grep] ${args?.['pattern'] || ''}\\n`);\n        }\n        // Skip verbose tool announcements for other tools\n      } else if (event.type === 'tool.complete') {\n        // Show truncated results for quick feedback\n        if (event.result && typeof event.result === 'string' && event.result.length > 0) {\n          const lines = event.result.split('\\n');\n          if (lines.length > 10) {\n            stdout.write(lines.slice(0, 10).join('\\n') + '\\n... (' + (lines.length - 10) + ' more lines)\\n');\n          } else if (event.result.length > 300) {\n            stdout.write(event.result.slice(0, 300) + '...\\n');\n          } else {\n            stdout.write(event.result + '\\n');\n          }\n        }\n      } else if (event.type === 'provider.fallback') {\n        // Show fallback notification in quick mode\n        stdout.write(`⚠ ${event.fromProvider}/${event.fromModel} failed (${event.reason}) → switching to ${event.toProvider}/${event.toModel}\\n`);\n      }\n    }\n  };\n\n  const processQueue = async (prompts: string[]): Promise<void> => {\n    processing = true;\n    for (const prompt of prompts) {\n      await handlePrompt(prompt).catch((error: unknown) => {\n        console.error('Error:', error instanceof Error ? error.message : String(error));\n      });\n    }\n    processing = false;\n    if (stdinClosed) {\n      exit(0);\n    }\n  };\n\n  // Process initial prompt if provided\n  if (parsed.prompt) {\n    await processQueue([parsed.prompt]);\n    if (!parsed.watchStdIn) {\n      exit(0);\n    }\n  }\n\n  // Watch stdin for additional prompts\n  if (parsed.watchStdIn) {\n    const rl = readline.createInterface({ input: stdin, terminal: false });\n    const pendingPrompts: string[] = [];\n\n    rl.on('line', (line) => {\n      const trimmed = line.trim();\n      if (trimmed) {\n        pendingPrompts.push(trimmed);\n        if (!processing) {\n          const batch = pendingPrompts.splice(0);\n          void processQueue(batch);\n        }\n      }\n    });\n\n    rl.on('close', () => {\n      stdinClosed = true;\n      if (!processing) {\n        exit(0);\n      }\n    });\n\n    stdin.resume();\n  } else if (!parsed.prompt) {\n    console.error('Quick mode requires a prompt. Usage: agi -q \"your prompt\"');\n    exit(1);\n  }\n}\n\nfunction parseQuickArgs(argv: string[]): ParsedQuickArgs {\n  let profile: string | undefined;\n  let watchStdIn = !stdin.isTTY;\n  const promptTokens: string[] = [];\n  let skipAgi = false;\n\n  for (let index = 0; index < argv.length; index += 1) {\n    const token = argv[index];\n    if (!token) {\n      continue;\n    }\n    // Skip the quick flag itself\n    if (token === '--quick' || token === '-q') {\n      continue;\n    }\n    if (token === '--profile' || token === '-p') {\n      profile = argv[index + 1];\n      index += 1;\n      continue;\n    }\n    if (token.startsWith('--profile=')) {\n      profile = token.slice('--profile='.length);\n      continue;\n    }\n    if (token === '--no-stdin') {\n      watchStdIn = false;\n      continue;\n    }\n    if (token === '--no-agi') {\n      skipAgi = true;\n      continue;\n    }\n    // Skip other known flags\n    if (token.startsWith('--') || token.startsWith('-')) {\n      continue;\n    }\n    promptTokens.push(token);\n  }\n\n  return {\n    profile,\n    watchStdIn,\n    prompt: promptTokens.length ? promptTokens.join(' ').trim() : null,\n    skipAgi,\n  };\n}\n\nfunction resolveProfile(override?: string): ProfileName {\n  if (override) {\n    if (!hasAgentProfile(override as ProfileName)) {\n      const available = listAgentProfiles().map((p) => p.name).join(', ');\n      throw new Error(`Unknown profile \"${override}\". Available: ${available}`);\n    }\n    return override as ProfileName;\n  }\n  return 'agi-code';\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}