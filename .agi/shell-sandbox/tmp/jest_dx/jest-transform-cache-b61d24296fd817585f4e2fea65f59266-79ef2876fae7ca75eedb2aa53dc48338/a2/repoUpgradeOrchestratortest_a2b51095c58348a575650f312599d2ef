6d0c7f99da46799d619b1cc6f7d29d4a
"use strict";

var _nodeFs = require("node:fs");
var _nodePath = require("node:path");
var _nodeOs = require("node:os");
var _globals = require("@jest/globals");
var _repoUpgradeOrchestrator = require("../src/core/repoUpgradeOrchestrator.js");
const simpleModule = id => ({
  id,
  label: id,
  description: `Module ${id}`,
  scope: [`${id}/**/*`],
  steps: [{
    id: `${id}-analyze`,
    intent: 'analyze',
    description: 'analyze'
  }, {
    id: `${id}-upgrade`,
    intent: 'upgrade',
    description: 'upgrade'
  }, {
    id: `${id}-verify`,
    intent: 'verify',
    description: 'verify'
  }]
});
const makePlan = (...modules) => ({
  modules
});
(0, _globals.describe)('RepoUpgradeOrchestrator - modes', () => {
  (0, _globals.it)('runs primary only in single-continuous mode and records winning executions', async () => {
    const calls = [];
    const executor = _globals.jest.fn(async input => {
      calls.push(input);
      return {
        success: true,
        summary: `${input.step.id}-${input.variant}`,
        score: input.variant === 'primary' ? 0.4 : 0.9,
        execution: {
          success: true,
          output: 'ok',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('source'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      objective: 'upgrade'
    });
    (0, _globals.expect)(report.modules[0]?.steps.map(s => s.winnerVariant)).toEqual(['primary', 'primary', 'primary']);
    (0, _globals.expect)(calls.every(call => call.variant === 'primary')).toBe(true);
    (0, _globals.expect)(report.results).toHaveLength(plan.modules[0]?.steps.length ?? 0);
    (0, _globals.expect)(report.results.every(result => result.command?.endsWith('/primary'))).toBe(true);
  });
  (0, _globals.it)('prefers the refiner path in dual-rl-continuous mode when it scores higher', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.variant === 'primary') {
        return {
          success: true,
          summary: 'primary version',
          score: 0.2,
          execution: {
            success: true,
            output: 'primary',
            duration: 1,
            command: `${input.module.id}/${input.step.id}/primary`
          }
        };
      }
      return {
        success: true,
        summary: 'refiner wins',
        score: 0.9,
        execution: {
          success: true,
          output: 'refiner',
          duration: 1,
          command: `${input.module.id}/${input.step.id}/refiner`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('src-only'));
    const report = await orchestrator.run(plan, {
      mode: 'dual-rl-continuous'
    });
    const step = report.modules[0]?.steps[0];
    (0, _globals.expect)(step?.winnerVariant).toBe('refiner');
    (0, _globals.expect)(report.results[0]?.command).toContain('/refiner');
    const expectedCalls = (plan.modules[0]?.steps.length ?? 0) * 2;
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(expectedCalls);
  });
  (0, _globals.it)('halts when continueOnFailure is false and marks remaining modules as skipped', async () => {
    const executor = _globals.jest.fn(async input => {
      if (input.module.id === 'first') {
        return {
          success: false,
          summary: 'failed primary',
          execution: {
            success: false,
            output: 'failed',
            duration: 0,
            command: `${input.module.id}/${input.step.id}/${input.variant}`,
            error: 'failed'
          }
        };
      }
      return {
        success: true,
        summary: 'should not run',
        execution: {
          success: true,
          output: 'ok',
          duration: 0,
          command: `${input.module.id}/${input.step.id}/${input.variant}`
        }
      };
    });
    const orchestrator = new _repoUpgradeOrchestrator.RepoUpgradeOrchestrator(executor);
    const plan = makePlan(simpleModule('first'), simpleModule('second'));
    const report = await orchestrator.run(plan, {
      mode: 'single-continuous',
      continueOnFailure: false
    });
    (0, _globals.expect)(report.modules[0]?.status).toBe('failed');
    (0, _globals.expect)(report.modules[1]?.status).toBe('skipped');
    (0, _globals.expect)(executor).toHaveBeenCalledTimes(1);
    (0, _globals.expect)(report.results[0]?.success).toBe(false);
  });
});
(0, _globals.describe)('buildRepoWidePlan', () => {
  (0, _globals.it)('returns a fallback module when no known scopes exist', () => {
    const dir = (0, _nodeFs.mkdtempSync)((0, _nodePath.join)((0, _nodeOs.tmpdir)(), 'upgrade-fw-'));
    try {
      const plan = (0, _repoUpgradeOrchestrator.buildRepoWidePlan)(dir);
      (0, _globals.expect)(plan.modules).toHaveLength(1);
      (0, _globals.expect)(plan.modules[0]?.id).toBe('repo-wide');
    } finally {
      (0, _nodeFs.rmSync)(dir, {
        recursive: true,
        force: true
      });
    }
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfbm9kZUZzIiwicmVxdWlyZSIsIl9ub2RlUGF0aCIsIl9ub2RlT3MiLCJfZ2xvYmFscyIsIl9yZXBvVXBncmFkZU9yY2hlc3RyYXRvciIsInNpbXBsZU1vZHVsZSIsImlkIiwibGFiZWwiLCJkZXNjcmlwdGlvbiIsInNjb3BlIiwic3RlcHMiLCJpbnRlbnQiLCJtYWtlUGxhbiIsIm1vZHVsZXMiLCJkZXNjcmliZSIsIml0IiwiY2FsbHMiLCJleGVjdXRvciIsImplc3QiLCJmbiIsImlucHV0IiwicHVzaCIsInN1Y2Nlc3MiLCJzdW1tYXJ5Iiwic3RlcCIsInZhcmlhbnQiLCJzY29yZSIsImV4ZWN1dGlvbiIsIm91dHB1dCIsImR1cmF0aW9uIiwiY29tbWFuZCIsIm1vZHVsZSIsIm9yY2hlc3RyYXRvciIsIlJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yIiwicGxhbiIsInJlcG9ydCIsInJ1biIsIm1vZGUiLCJvYmplY3RpdmUiLCJleHBlY3QiLCJtYXAiLCJzIiwid2lubmVyVmFyaWFudCIsInRvRXF1YWwiLCJldmVyeSIsImNhbGwiLCJ0b0JlIiwicmVzdWx0cyIsInRvSGF2ZUxlbmd0aCIsImxlbmd0aCIsInJlc3VsdCIsImVuZHNXaXRoIiwidG9Db250YWluIiwiZXhwZWN0ZWRDYWxscyIsInRvSGF2ZUJlZW5DYWxsZWRUaW1lcyIsImVycm9yIiwiY29udGludWVPbkZhaWx1cmUiLCJzdGF0dXMiLCJkaXIiLCJta2R0ZW1wU3luYyIsImpvaW4iLCJ0bXBkaXIiLCJidWlsZFJlcG9XaWRlUGxhbiIsInJtU3luYyIsInJlY3Vyc2l2ZSIsImZvcmNlIl0sInNvdXJjZXMiOlsicmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IudGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBta2R0ZW1wU3luYywgcm1TeW5jIH0gZnJvbSAnbm9kZTpmcyc7XG5pbXBvcnQgeyBqb2luIH0gZnJvbSAnbm9kZTpwYXRoJztcbmltcG9ydCB7IHRtcGRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IHsgZGVzY3JpYmUsIGV4cGVjdCwgaXQsIGplc3QgfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7XG4gIFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yLFxuICBidWlsZFJlcG9XaWRlUGxhbixcbiAgdHlwZSBSZXBvVXBncmFkZU1vZHVsZSxcbiAgdHlwZSBSZXBvVXBncmFkZVBsYW4sXG4gIHR5cGUgVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCxcbn0gZnJvbSAnLi4vc3JjL2NvcmUvcmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IuanMnO1xuXG5jb25zdCBzaW1wbGVNb2R1bGUgPSAoaWQ6IHN0cmluZyk6IFJlcG9VcGdyYWRlTW9kdWxlID0+ICh7XG4gIGlkLFxuICBsYWJlbDogaWQsXG4gIGRlc2NyaXB0aW9uOiBgTW9kdWxlICR7aWR9YCxcbiAgc2NvcGU6IFtgJHtpZH0vKiovKmBdLFxuICBzdGVwczogW1xuICAgIHsgaWQ6IGAke2lkfS1hbmFseXplYCwgaW50ZW50OiAnYW5hbHl6ZScsIGRlc2NyaXB0aW9uOiAnYW5hbHl6ZScgfSxcbiAgICB7IGlkOiBgJHtpZH0tdXBncmFkZWAsIGludGVudDogJ3VwZ3JhZGUnLCBkZXNjcmlwdGlvbjogJ3VwZ3JhZGUnIH0sXG4gICAgeyBpZDogYCR7aWR9LXZlcmlmeWAsIGludGVudDogJ3ZlcmlmeScsIGRlc2NyaXB0aW9uOiAndmVyaWZ5JyB9LFxuICBdLFxufSk7XG5cbmNvbnN0IG1ha2VQbGFuID0gKC4uLm1vZHVsZXM6IFJlcG9VcGdyYWRlTW9kdWxlW10pOiBSZXBvVXBncmFkZVBsYW4gPT4gKHsgbW9kdWxlcyB9KTtcblxuZGVzY3JpYmUoJ1JlcG9VcGdyYWRlT3JjaGVzdHJhdG9yIC0gbW9kZXMnLCAoKSA9PiB7XG4gIGl0KCdydW5zIHByaW1hcnkgb25seSBpbiBzaW5nbGUtY29udGludW91cyBtb2RlIGFuZCByZWNvcmRzIHdpbm5pbmcgZXhlY3V0aW9ucycsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBjYWxsczogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dFtdID0gW107XG4gICAgY29uc3QgZXhlY3V0b3IgPSBqZXN0LmZuKGFzeW5jIChpbnB1dDogVXBncmFkZVN0ZXBFeGVjdXRpb25JbnB1dCkgPT4ge1xuICAgICAgY2FsbHMucHVzaChpbnB1dCk7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzdW1tYXJ5OiBgJHtpbnB1dC5zdGVwLmlkfS0ke2lucHV0LnZhcmlhbnR9YCxcbiAgICAgICAgc2NvcmU6IGlucHV0LnZhcmlhbnQgPT09ICdwcmltYXJ5JyA/IDAuNCA6IDAuOSxcbiAgICAgICAgZXhlY3V0aW9uOiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBvdXRwdXQ6ICdvaycsXG4gICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9LyR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgICB9LFxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIGNvbnN0IG9yY2hlc3RyYXRvciA9IG5ldyBSZXBvVXBncmFkZU9yY2hlc3RyYXRvcihleGVjdXRvcik7XG4gICAgY29uc3QgcGxhbiA9IG1ha2VQbGFuKHNpbXBsZU1vZHVsZSgnc291cmNlJykpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnJ1bihwbGFuLCB7XG4gICAgICBtb2RlOiAnc2luZ2xlLWNvbnRpbnVvdXMnLFxuICAgICAgb2JqZWN0aXZlOiAndXBncmFkZScsXG4gICAgfSk7XG5cbiAgICBleHBlY3QocmVwb3J0Lm1vZHVsZXNbMF0/LnN0ZXBzLm1hcCgocykgPT4gcy53aW5uZXJWYXJpYW50KSkudG9FcXVhbChbJ3ByaW1hcnknLCAncHJpbWFyeScsICdwcmltYXJ5J10pO1xuICAgIGV4cGVjdChjYWxscy5ldmVyeSgoY2FsbCkgPT4gY2FsbC52YXJpYW50ID09PSAncHJpbWFyeScpKS50b0JlKHRydWUpO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0cykudG9IYXZlTGVuZ3RoKHBsYW4ubW9kdWxlc1swXT8uc3RlcHMubGVuZ3RoID8/IDApO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0cy5ldmVyeSgocmVzdWx0KSA9PiByZXN1bHQuY29tbWFuZD8uZW5kc1dpdGgoJy9wcmltYXJ5JykpKS50b0JlKHRydWUpO1xuICB9KTtcblxuICBpdCgncHJlZmVycyB0aGUgcmVmaW5lciBwYXRoIGluIGR1YWwtcmwtY29udGludW91cyBtb2RlIHdoZW4gaXQgc2NvcmVzIGhpZ2hlcicsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBleGVjdXRvciA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0KSA9PiB7XG4gICAgICBpZiAoaW5wdXQudmFyaWFudCA9PT0gJ3ByaW1hcnknKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICBzdW1tYXJ5OiAncHJpbWFyeSB2ZXJzaW9uJyxcbiAgICAgICAgICBzY29yZTogMC4yLFxuICAgICAgICAgIGV4ZWN1dGlvbjoge1xuICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcbiAgICAgICAgICAgIG91dHB1dDogJ3ByaW1hcnknLFxuICAgICAgICAgICAgZHVyYXRpb246IDEsXG4gICAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vcHJpbWFyeWAsXG4gICAgICAgICAgfSxcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICAgIHN1bW1hcnk6ICdyZWZpbmVyIHdpbnMnLFxuICAgICAgICBzY29yZTogMC45LFxuICAgICAgICBleGVjdXRpb246IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG91dHB1dDogJ3JlZmluZXInLFxuICAgICAgICAgIGR1cmF0aW9uOiAxLFxuICAgICAgICAgIGNvbW1hbmQ6IGAke2lucHV0Lm1vZHVsZS5pZH0vJHtpbnB1dC5zdGVwLmlkfS9yZWZpbmVyYCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG5cbiAgICBjb25zdCBvcmNoZXN0cmF0b3IgPSBuZXcgUmVwb1VwZ3JhZGVPcmNoZXN0cmF0b3IoZXhlY3V0b3IpO1xuICAgIGNvbnN0IHBsYW4gPSBtYWtlUGxhbihzaW1wbGVNb2R1bGUoJ3NyYy1vbmx5JykpO1xuXG4gICAgY29uc3QgcmVwb3J0ID0gYXdhaXQgb3JjaGVzdHJhdG9yLnJ1bihwbGFuLCB7IG1vZGU6ICdkdWFsLXJsLWNvbnRpbnVvdXMnIH0pO1xuICAgIGNvbnN0IHN0ZXAgPSByZXBvcnQubW9kdWxlc1swXT8uc3RlcHNbMF07XG5cbiAgICBleHBlY3Qoc3RlcD8ud2lubmVyVmFyaWFudCkudG9CZSgncmVmaW5lcicpO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0c1swXT8uY29tbWFuZCkudG9Db250YWluKCcvcmVmaW5lcicpO1xuICAgIGNvbnN0IGV4cGVjdGVkQ2FsbHMgPSAocGxhbi5tb2R1bGVzWzBdPy5zdGVwcy5sZW5ndGggPz8gMCkgKiAyO1xuICAgIGV4cGVjdChleGVjdXRvcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKGV4cGVjdGVkQ2FsbHMpO1xuICB9KTtcblxuICBpdCgnaGFsdHMgd2hlbiBjb250aW51ZU9uRmFpbHVyZSBpcyBmYWxzZSBhbmQgbWFya3MgcmVtYWluaW5nIG1vZHVsZXMgYXMgc2tpcHBlZCcsIGFzeW5jICgpID0+IHtcbiAgICBjb25zdCBleGVjdXRvciA9IGplc3QuZm4oYXN5bmMgKGlucHV0OiBVcGdyYWRlU3RlcEV4ZWN1dGlvbklucHV0KSA9PiB7XG4gICAgICBpZiAoaW5wdXQubW9kdWxlLmlkID09PSAnZmlyc3QnKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgICAgc3VtbWFyeTogJ2ZhaWxlZCBwcmltYXJ5JyxcbiAgICAgICAgICBleGVjdXRpb246IHtcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICAgICAgb3V0cHV0OiAnZmFpbGVkJyxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgY29tbWFuZDogYCR7aW5wdXQubW9kdWxlLmlkfS8ke2lucHV0LnN0ZXAuaWR9LyR7aW5wdXQudmFyaWFudH1gLFxuICAgICAgICAgICAgZXJyb3I6ICdmYWlsZWQnLFxuICAgICAgICAgIH0sXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgICByZXR1cm4ge1xuICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICBzdW1tYXJ5OiAnc2hvdWxkIG5vdCBydW4nLFxuICAgICAgICBleGVjdXRpb246IHtcbiAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxuICAgICAgICAgIG91dHB1dDogJ29rJyxcbiAgICAgICAgICBkdXJhdGlvbjogMCxcbiAgICAgICAgICBjb21tYW5kOiBgJHtpbnB1dC5tb2R1bGUuaWR9LyR7aW5wdXQuc3RlcC5pZH0vJHtpbnB1dC52YXJpYW50fWAsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgY29uc3Qgb3JjaGVzdHJhdG9yID0gbmV3IFJlcG9VcGdyYWRlT3JjaGVzdHJhdG9yKGV4ZWN1dG9yKTtcbiAgICBjb25zdCBwbGFuID0gbWFrZVBsYW4oc2ltcGxlTW9kdWxlKCdmaXJzdCcpLCBzaW1wbGVNb2R1bGUoJ3NlY29uZCcpKTtcblxuICAgIGNvbnN0IHJlcG9ydCA9IGF3YWl0IG9yY2hlc3RyYXRvci5ydW4ocGxhbiwge1xuICAgICAgbW9kZTogJ3NpbmdsZS1jb250aW51b3VzJyxcbiAgICAgIGNvbnRpbnVlT25GYWlsdXJlOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIGV4cGVjdChyZXBvcnQubW9kdWxlc1swXT8uc3RhdHVzKS50b0JlKCdmYWlsZWQnKTtcbiAgICBleHBlY3QocmVwb3J0Lm1vZHVsZXNbMV0/LnN0YXR1cykudG9CZSgnc2tpcHBlZCcpO1xuICAgIGV4cGVjdChleGVjdXRvcikudG9IYXZlQmVlbkNhbGxlZFRpbWVzKDEpO1xuICAgIGV4cGVjdChyZXBvcnQucmVzdWx0c1swXT8uc3VjY2VzcykudG9CZShmYWxzZSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdidWlsZFJlcG9XaWRlUGxhbicsICgpID0+IHtcbiAgaXQoJ3JldHVybnMgYSBmYWxsYmFjayBtb2R1bGUgd2hlbiBubyBrbm93biBzY29wZXMgZXhpc3QnLCAoKSA9PiB7XG4gICAgY29uc3QgZGlyID0gbWtkdGVtcFN5bmMoam9pbih0bXBkaXIoKSwgJ3VwZ3JhZGUtZnctJykpO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwbGFuID0gYnVpbGRSZXBvV2lkZVBsYW4oZGlyKTtcbiAgICAgIGV4cGVjdChwbGFuLm1vZHVsZXMpLnRvSGF2ZUxlbmd0aCgxKTtcbiAgICAgIGV4cGVjdChwbGFuLm1vZHVsZXNbMF0/LmlkKS50b0JlKCdyZXBvLXdpZGUnKTtcbiAgICB9IGZpbmFsbHkge1xuICAgICAgcm1TeW5jKGRpciwgeyByZWN1cnNpdmU6IHRydWUsIGZvcmNlOiB0cnVlIH0pO1xuICAgIH1cbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxTQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSx3QkFBQSxHQUFBSixPQUFBO0FBUUEsTUFBTUssWUFBWSxHQUFJQyxFQUFVLEtBQXlCO0VBQ3ZEQSxFQUFFO0VBQ0ZDLEtBQUssRUFBRUQsRUFBRTtFQUNURSxXQUFXLEVBQUUsVUFBVUYsRUFBRSxFQUFFO0VBQzNCRyxLQUFLLEVBQUUsQ0FBQyxHQUFHSCxFQUFFLE9BQU8sQ0FBQztFQUNyQkksS0FB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