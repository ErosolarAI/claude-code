{"version":3,"names":["cov_2qw70jurrp","actualCoverage","validateBashCommand","_command","f","s","valid","warnings","validateToolArgs","toolName","args","constraints","key","constraint","Object","entries","value","undefined","b","matchesType","type","error","Error","num","max","min","SmartFixer","fixDangerousCommand","command","fixed","changes","test","replace","push","fixResourceLimits","newValue","Math","floor","fixValidationErrors","trim","parsed","Number","isNaN","toLowerCase","exports","AutoFixValidator","constructor","autoFix","enabled","setAutoFix","validate","validator","result"],"sources":["safetyValidator.ts"],"sourcesContent":["/**\n * Safety Validator - Lean validation for tool arguments.\n * No command blocking - all bash commands allowed.\n */\n\nexport interface ValidationResult {\n  valid: boolean;\n  error?: Error;\n  warnings: string[];\n  autoFix?: {\n    available: boolean;\n    apply: () => unknown;\n    description: string;\n  };\n}\n\ninterface ToolConstraint {\n  type: 'number' | 'string' | 'boolean';\n  max?: number;\n  min?: number;\n}\n\n/**\n * Validate bash command - all commands allowed\n */\nexport function validateBashCommand(_command: string): ValidationResult {\n  return { valid: true, warnings: [] };\n}\n\n/**\n * Validate tool arguments against type constraints\n */\nexport function validateToolArgs(\n  toolName: string,\n  args: Record<string, unknown>,\n  constraints: Record<string, ToolConstraint>\n): ValidationResult {\n  for (const [key, constraint] of Object.entries(constraints)) {\n    const value = args[key];\n    if (value === undefined) continue;\n\n    if (!matchesType(value, constraint.type)) {\n      return {\n        valid: false,\n        error: new Error(`Invalid type for ${toolName}.${key}: expected ${constraint.type}.`),\n        warnings: [],\n      };\n    }\n\n    if (constraint.type === 'number') {\n      const num = value as number;\n      if (constraint.max !== undefined && num > constraint.max) {\n        return {\n          valid: false,\n          error: new Error(`${toolName}.${key} exceeds maximum (${num} > ${constraint.max}).`),\n          warnings: [],\n        };\n      }\n      if (constraint.min !== undefined && num < constraint.min) {\n        return {\n          valid: false,\n          error: new Error(`${toolName}.${key} below minimum (${num} < ${constraint.min}).`),\n          warnings: [],\n        };\n      }\n    }\n  }\n\n  return { valid: true, warnings: [] };\n}\n\n/**\n * Utility fixer for common patterns\n */\nexport class SmartFixer {\n  static fixDangerousCommand(command: string): { fixed: string; changes: string[] } {\n    let fixed = command;\n    const changes: string[] = [];\n\n    if (/\\brm\\s+-rf\\s+\\/(\\s|$)/i.test(fixed)) {\n      fixed = fixed.replace(/\\brm\\s+-rf\\s+\\/(\\s|$)/i, 'rm -rf ./');\n      changes.push('Rewrote \"rm -rf /\" to \"rm -rf ./\".');\n    }\n    if (/chmod\\s+-R\\s+777\\b/i.test(fixed)) {\n      fixed = fixed.replace(/chmod\\s+-R\\s+777\\b/i, 'chmod -R 755');\n      changes.push('Reduced chmod 777 to chmod 755.');\n    }\n    if (/git\\s+push\\s+--force\\b/i.test(fixed)) {\n      fixed = fixed.replace(/git\\s+push\\s+--force\\b/i, 'git push --force-with-lease');\n      changes.push('Replaced --force with --force-with-lease.');\n    }\n\n    return { fixed, changes };\n  }\n\n  static fixResourceLimits(\n    args: Record<string, unknown>,\n    constraints: Record<string, { max?: number; min?: number }>\n  ): { fixed: Record<string, unknown>; changes: string[] } {\n    const fixed = { ...args };\n    const changes: string[] = [];\n\n    for (const [key, constraint] of Object.entries(constraints)) {\n      const value = fixed[key];\n      if (typeof value !== 'number') continue;\n\n      if (constraint.max !== undefined && value > constraint.max) {\n        const newValue = Math.floor(constraint.max * 0.8);\n        fixed[key] = newValue;\n        changes.push(`Lowered ${key} to ${newValue} (80% of max ${constraint.max}).`);\n      } else if (constraint.min !== undefined && value < constraint.min) {\n        fixed[key] = constraint.min;\n        changes.push(`Raised ${key} to minimum ${constraint.min}.`);\n      }\n    }\n\n    return { fixed, changes };\n  }\n\n  static fixValidationErrors(\n    args: Record<string, unknown>,\n    constraints: Record<string, ToolConstraint>\n  ): { fixed: Record<string, unknown>; changes: string[] } {\n    const fixed = { ...args };\n    const changes: string[] = [];\n\n    for (const [key, constraint] of Object.entries(constraints)) {\n      const value = fixed[key];\n\n      if (constraint.type === 'number' && typeof value === 'string' && value.trim() !== '') {\n        const parsed = Number(value);\n        if (!Number.isNaN(parsed)) {\n          fixed[key] = parsed;\n          changes.push(`Coerced ${key} to number.`);\n        }\n      }\n\n      if (constraint.type === 'boolean' && typeof value === 'string') {\n        if (value.toLowerCase() === 'true') {\n          fixed[key] = true;\n          changes.push(`Coerced ${key} to boolean true.`);\n        } else if (value.toLowerCase() === 'false') {\n          fixed[key] = false;\n          changes.push(`Coerced ${key} to boolean false.`);\n        }\n      }\n    }\n\n    return { fixed, changes };\n  }\n}\n\n/**\n * Validator wrapper with optional auto-fix\n */\nexport class AutoFixValidator<T = string> {\n  private enabled: boolean;\n\n  constructor(autoFix: boolean) {\n    this.enabled = autoFix;\n  }\n\n  setAutoFix(enabled: boolean): void {\n    this.enabled = enabled;\n  }\n\n  async validate(\n    value: T,\n    validator: (value: T) => ValidationResult\n  ): Promise<{ value: T; result: ValidationResult }> {\n    const result = validator(value);\n    return { value, result };\n  }\n}\n\nfunction matchesType(value: unknown, type: ToolConstraint['type']): boolean {\n  if (type === 'number') return typeof value === 'number';\n  if (type === 'string') return typeof value === 'string';\n  if (type === 'boolean') return typeof value === 'boolean';\n  return false;\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}