233f107900ad3639d5ce963cfd408b96
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Horizontal scroll animation for long activity lines
  activityScrollOffset = 0;
  activityScrollDirection = 1; // 1 = right, -1 = left
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences from text to prevent injection */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // eslint-disable-next-line no-control-regex
    return text.replace(/\x1b\[[0-9;]*[A-Za-z]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }
    if (sequence === '\x1b[200~') {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume any pending insert buffer to prevent leak
      const pending = this.consumePendingInsertForPaste();
      this.pasteBuffer = pending; // Include any chars that arrived before bracketed paste started
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }
    if (sequence === '\x1b[201~') {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    if (this.inPlainPaste) {
      return;
    }
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
    }
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets to history or display them in scrollback
    if (!this.secretMode) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // For prompt events, ensure the overlay is rendered immediately
        // This guarantees prompts are visible before async processing continues
        if (event.type === 'prompt') {
          if (this.output.isTTY) {
            this.allowPromptRender = true;
            this.renderPrompt();
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        return event.content;
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.5) {
      return true; // Less than 50% letters = likely garbage
    }
    return false;
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ Search(pattern: "foo", path: "src",
   *           output_mode: "content", head_limit: 30)
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.tool(nameMatch[1])}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ ToolName(args...)
    const prefix = `${bullet} ${_theme.theme.tool(toolName)}(`;
    const prefixLen = toolName.length + 3; // "⏺ ToolName(" visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix})\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : ')';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ Read → file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${_theme.theme.tool(toolName)}\n`;
    }

    // Format full params in Claude Code style with line wrapping
    // For long args, wrap them nicely with continuation indent
    const prefix = `${bullet} ${_theme.theme.tool(toolName)}(`;
    const suffix = ')';
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${prefix}${argsStr}${suffix}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParams(toolName, params, maxWidth);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping
   */
  formatToolParams(toolName, params, maxWidth) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${_theme.theme.tool(toolName)}(`;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    currentLine += ')';
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.tool(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Parse common result patterns for summary
    const lineMatch = content.match(/(\d+)\s*lines?/i);
    const fileMatch = content.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = content.match(/read.*?(\d+)\s*lines?/i);
    let summary;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (content.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else {
      // Use content directly, truncated if needed
      summary = content.length > 40 ? content.slice(0, 37) + '…' : content;
    }
    const coloredSummary = this.colorResultSummary(summary);
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.info ?? (value => value)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   */
  expandLastToolResult() {
    if (!this.lastToolResult) {
      return false;
    }
    const rendered = this.wrapBulletText(this.lastToolResult, {
      label: 'tool',
      labelColor: _theme.theme.info
    });
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityScrollOffset = 0;
    this.activityScrollDirection = 1;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Update horizontal scroll for long activity lines (slower scroll)
      if (this.spinnerFrame % 4 === 0) {
        this.activityScrollOffset += this.activityScrollDirection;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 80); // ~12 FPS for smooth spinner animation
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.activityScrollOffset = 0;
    this.activityScrollDirection = 1;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }

      // Clear all previous lines
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        this.write('\r');
        this.write(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          this.write('\x1b[B');
        }
      }

      // If new height is greater, we need to add blank lines
      const extraLines = height - this.lastOverlayHeight;
      if (extraLines > 0) {
        for (let i = 0; i < extraLines; i++) {
          this.write('\n');
        }
      }

      // Move back to top of where overlay should start
      const moveBackUp = Math.max(0, height - 1);
      if (moveBackUp > 0) {
        this.write(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      this.write(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        this.write('\n');
      }
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      this.write(`\x1b[${linesToMoveUp}A`);
    }
    this.write(`\x1b[${promptCol}G`);
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line content (without prefix for scrolling calculation)
      const fullContent = activityText + suffix;
      const prefixLen = this.visibleLength(prefix);
      const availableWidth = maxWidth - prefixLen;

      // Apply horizontal scrolling if content is too long
      let displayContent = fullContent;
      const contentLen = this.visibleLength(fullContent);
      if (contentLen > availableWidth) {
        // Calculate scroll bounds
        const maxScroll = contentLen - availableWidth + 3; // +3 for padding

        // Bounce the scroll direction at boundaries
        if (this.activityScrollOffset >= maxScroll) {
          this.activityScrollDirection = -1;
        } else if (this.activityScrollOffset <= 0) {
          this.activityScrollDirection = 1;
        }

        // Create scrolled view with visual indicators
        const offset = Math.max(0, Math.min(this.activityScrollOffset, maxScroll));
        const startIndicator = offset > 0 ? '‹' : '';
        const endIndicator = offset < maxScroll ? '›' : '';

        // Extract visible portion (handle ANSI codes properly)
        const plainContent = this.stripAnsi(fullContent);
        const visiblePlain = plainContent.slice(offset, offset + availableWidth - 2);

        // Re-apply styling to the visible portion
        displayContent = startIndicator + visiblePlain + endIndicator;
      }
      const activityLine = `${prefix}${displayContent}`;
      lines.push(activityLine);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    const inputLines = inputLine.split('\n');
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = Math.min(100, Math.max(0, this.statusMeta.contextPercent));
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = barWidth - filled;
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = used < 50 ? _theme.theme.success : used < 80 ? _theme.theme.warning : _theme.theme.error;
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    this.buffer = this.collapsedPaste.text;
    this.cursor = this.buffer.length;
    this.collapsedPaste = null;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        lines.push(this.truncateLine(current.trimEnd(), width));
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(this.truncateLine(current.trimEnd(), width));
    }
    return lines.length ? lines : [this.truncateLine(text, width)];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;
    const now = Date.now();
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl9kZWJ1Z0xvZ2dlciIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0Iiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJhY3Rpdml0eVNjcm9sbE9mZnNldCIsImFjdGl2aXR5U2Nyb2xsRGlyZWN0aW9uIiwiZWxhcHNlZENvbG9yRnJhbWUiLCJlbGFwc2VkQ29sb3JGcmFtZXMiLCJmdW5BY3Rpdml0eVBocmFzZXMiLCJtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMiLCJtYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMiLCJ0aG91Z2h0RGVkdXBXaW5kb3dNcyIsImxhc3RDdXJhdGVkVGhvdWdodCIsInN0YXR1c01ldGEiLCJ0b2dnbGVTdGF0ZSIsInZlcmlmaWNhdGlvbkVuYWJsZWQiLCJhdXRvQ29udGludWVFbmFibGVkIiwiY3JpdGljYWxBcHByb3ZhbE1vZGUiLCJkdWFsUmxFbmFibGVkIiwiZGVidWdFbmFibGVkIiwiY2xhbXBDdXJzb3IiLCJNYXRoIiwibWF4IiwibWluIiwibGVuZ3RoIiwiYXBwZW5kVG9QYXN0ZUJ1ZmZlciIsInRleHQiLCJwYXN0ZUJ1ZmZlck92ZXJmbG93IiwiY3VycmVudCIsInBhc3RlQnVmZmVyIiwicGxhaW5QYXN0ZUJ1ZmZlciIsInJlbWFpbmluZyIsIm1heFBhc3RlQnVmZmVyU2l6ZSIsInRvQWRkIiwic2xpY2UiLCJzYW5pdGl6ZVBhc3RlQ29udGVudCIsInJlcGxhY2UiLCJmb3JtYXRIb3RrZXkiLCJjb21ibyIsInRyaW0iLCJ0b1VwcGVyQ2FzZSIsImxhc3RQcm9tcHRFdmVudCIsInByb21wdEhlaWdodCIsImxhc3RPdmVybGF5SGVpZ2h0IiwiaW5saW5lUGFuZWwiLCJoYXNDb252ZXJzYXRpb25Db250ZW50IiwiaXNQcm9tcHRBY3RpdmUiLCJpbnB1dFJlbmRlck9mZnNldCIsInBsYWluUGFzdGVJZGxlTXMiLCJwbGFpblBhc3RlV2luZG93TXMiLCJwbGFpblBhc3RlVHJpZ2dlckNoYXJzIiwicGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzIiwiY3Vyc29yVmlzaWJsZUNvbHVtbiIsImluQnJhY2tldGVkUGFzdGUiLCJpblBsYWluUGFzdGUiLCJwbGFpblBhc3RlVGltZXIiLCJwYXN0ZUJ1cnN0V2luZG93U3RhcnQiLCJwYXN0ZUJ1cnN0Q2hhckNvdW50IiwicGxhaW5SZWNlbnRDaHVua3MiLCJwZW5kaW5nSW5zZXJ0QnVmZmVyIiwicGVuZGluZ0luc2VydFRpbWVyIiwicGVuZGluZ0luc2VydERlbGF5TXMiLCJsYXN0UmVuZGVyZWRFdmVudEtleSIsImxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lIiwiaGFzUmVuZGVyZWRQcm9tcHQiLCJoYXNFdmVyUmVuZGVyZWRPdmVybGF5IiwibGFzdE92ZXJsYXkiLCJhbGxvd1Byb21wdFJlbmRlciIsInByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCIsInNlY3JldE1vZGUiLCJwZW5kaW5nUmVuZGVyIiwibGFzdFJlbmRlclRpbWUiLCJyZW5kZXJUaHJvdHRsZU1zIiwicmVuZGVyVGhyb3R0bGVUaW1lciIsImRpc3Bvc2VkIiwiYm91bmRSZXNpemVIYW5kbGVyIiwiYm91bmRLZXlwcmVzc0hhbmRsZXIiLCJpbnB1dENhcHR1cmUiLCJjb25zdHJ1Y3RvciIsIm91dHB1dCIsInByb2Nlc3MiLCJzdGRvdXQiLCJpbnB1dCIsInN0ZGluIiwiX29wdGlvbnMiLCJpbnRlcmFjdGl2ZSIsIkJvb2xlYW4iLCJpc1RUWSIsImVudiIsInBsYWluTW9kZSIsImlzUGxhaW5PdXRwdXRNb2RlIiwiY29udGV4dE1ldGVyIiwiQ29udGV4dE1ldGVyIiwicmwiLCJjcmVhdGVJbnRlcmZhY2UiLCJ0ZXJtaW5hbCIsInByb21wdCIsInRhYlNpemUiLCJzZXRQcm9tcHQiLCJ1cGRhdGVUZXJtaW5hbFNpemUiLCJyZW5kZXJQcm9tcHQiLCJvbiIsInNldHVwSW5wdXRIYW5kbGVycyIsImluaXRpYWxpemUiLCJjbGVhclByb21wdEFyZWEiLCJ3cml0ZSIsImNsZWFudXAiLCJjYW5jZWxJbnB1dENhcHR1cmUiLCJFcnJvciIsImNhbmNlbFBsYWluUGFzdGVDYXB0dXJlIiwiY2xlYXJUaW1lb3V0IiwiY2xlYXJJbnRlcnZhbCIsInN0b3AiLCJkaXNwb3NlIiwiZGlzcG9zZUFuaW1hdGlvbnMiLCJyZW1vdmVMaXN0ZW5lciIsInJlbW92ZUFsbExpc3RlbmVycyIsImNsb3NlIiwic2V0UmF3TW9kZSIsInN1c3BlbmRQcm9tcHRSZW5kZXJpbmciLCJyZXN1bWVQcm9tcHRSZW5kZXJpbmciLCJyZW5kZXIiLCJlbWl0S2V5cHJlc3NFdmVudHMiLCJzdHIiLCJrZXkiLCJoYW5kbGVLZXlwcmVzcyIsImVtaXRJbnB1dENoYW5nZSIsInBheWxvYWQiLCJlbWl0Iiwibm9ybWFsaXplZEtleSIsInBhcnNlRXNjYXBlU2VxdWVuY2UiLCJrZXlGb3JQYXN0ZSIsInNlcXVlbmNlIiwiaGFuZGxlQnJhY2tldGVkUGFzdGUiLCJoYW5kbGVQbGFpblBhc3RlIiwibWFjT3B0aW9uQ2hhcnMiLCJsZXR0ZXIiLCJjdHJsIiwibmFtZSIsImNsZWFyQnVmZmVyIiwiaXNDdHJsU2hpZnQiLCJsb3dlckxldHRlciIsInRvTG93ZXJDYXNlIiwidXBwZXJMZXR0ZXIiLCJzaGlmdCIsIm1ldGEiLCJzZXEiLCJ0ZXN0IiwiaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlIiwiaGFkQnVmZmVyIiwiZXhwYW5kQ29sbGFwc2VkUGFzdGUiLCJhcHBseVN1Z2dlc3Rpb24iLCJzdGFydHNXaXRoIiwic2FmZUluZGV4IiwiY29tbWFuZCIsInN1Ym1pdFRleHQiLCJ1cGRhdGVTdWdnZXN0aW9ucyIsImVuc3VyZUN1cnNvclZpc2libGUiLCJuYXZpZ2F0ZVN1Z2dlc3Rpb25zIiwicXVldWVQZW5kaW5nSW5zZXJ0IiwibWF4V2lkdGgiLCJzYWZlV2lkdGgiLCJtYXAiLCJzZXRUaW1lb3V0IiwiY29tbWl0UGVuZGluZ0luc2VydCIsImluc2VydFRleHQiLCJjb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlIiwiY29uc3VtZWQiLCJwZW5kaW5nIiwiY29tbWl0UGFzdGVCdWZmZXIiLCJzYW5pdGl6ZWQiLCJjb250ZW50IiwibGluZXMiLCJzcGxpdCIsIndhc1RydW5jYXRlZCIsImNoYXJzIiwicmVzZXRQbGFpblBhc3RlQnVyc3QiLCJwcnVuZVJlY2VudFBsYWluQ2h1bmtzIiwiY2h1bmsiLCJub3ciLCJEYXRlIiwidHJhY2tQbGFpblBhc3RlQnVyc3QiLCJyZWNvcmRSZWNlbnRQbGFpbkNodW5rIiwiY2h1bmtNdWx0aXBsZSIsImhhc05ld2xpbmUiLCJidXJzdEFjdGl2ZSIsImJ1cnN0VHJpZ2dlciIsImhhc1JlY2VudE5vbk5ld2xpbmUiLCJzb21lIiwiZW50cnkiLCJlYXJseU5ld2xpbmVUcmlnZ2VyIiwibmV3bGluZVRyaWdnZXIiLCJsb29rc0xpa2VQYXN0ZSIsImNodW5rQWxyZWFkeUNhcHR1cmVkIiwicmVjbGFpbWVkIiwicmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzIiwiY29tYmluZWQiLCJyZW1vdmVDb3VudCIsInN1ZmZpeCIsImVuZHNXaXRoIiwic2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0IiwiYXQiLCJ3aW5kb3dTdGFydCIsInB1c2giLCJmaWx0ZXIiLCJqb2luIiwiZmluYWxpemVQbGFpblBhc3RlIiwic2hvdWxkVHJpbSIsIm9wdGlvbnMiLCJub3JtYWxpemVkQ2FwdHVyZSIsImFsbG93RW1wdHkiLCJyZXNvbHZlciIsInJlc2V0U3VnZ2VzdGlvbnMiLCJyZXNvbHZlIiwibm9ybWFsaXplZCIsImRpc3BsYXlVc2VyUHJvbXB0IiwiZmlyc3RTcGFjZSIsImluZGV4T2YiLCJoYXNBcmdUZXh0IiwiY3Vyc29yU2xpY2UiLCJjb21tYW5kU2xpY2UiLCJmYWxsYmFja1NsaWNlIiwicGFydGlhbCIsInRyaW1FbmQiLCJwcmV2aW91cyIsImNtZCIsImlkeCIsImZpbmRJbmRleCIsInMiLCJzZXRBdmFpbGFibGVDb21tYW5kcyIsImNvbW1hbmRzIiwic3VibWl0Iiwic2VsZWN0ZWQiLCJkaXJlY3Rpb24iLCJjdXJyZW50SW5kZXgiLCJuZXh0IiwiY2xhbXBlZCIsImFkZEV2ZW50IiwidHlwZSIsImxvZ0RlYnVnIiwibm9ybWFsaXplRXZlbnRUeXBlIiwiZm9ybWF0dGVkIiwiZm9ybWF0Q29udGVudCIsInJhd1R5cGUiLCJ0aW1lc3RhbXAiLCJldmVudCIsImluc2VydEluZGV4Iiwic3BsaWNlIiwicXVldWVNaWNyb3Rhc2siLCJwcm9jZXNzUXVldWUiLCJyZW5kZXJQcm9tcHRPdmVybGF5IiwiaW1tZWRpYXRlIiwicmVuZGVyUHJvbXB0SW1tZWRpYXRlIiwiY29hbGVzY2VkIiwiY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMiLCJyZW5kZXJFdmVudCIsImVycm9yIiwibWVzc2FnZSIsImRlbGF5IiwiaXNNZXJnZWFibGUiLCJ0YXJnZXQiLCJpc0NvbXBhY3RlZCIsIm5lZWRzU2VwYXJhdG9yIiwiZmx1c2hFdmVudHMiLCJ0aW1lb3V0TXMiLCJzdGFydCIsImZvcm1hdHRlZFBsYWluIiwic2lnbmF0dXJlIiwibGluZSIsInRoZW1lIiwicHJpbWFyeSIsImlzR2FyYmFnZU91dHB1dCIsImN1cmF0ZWQiLCJjdXJhdGVSZWFzb25pbmdDb250ZW50Iiwic2hvdWxkUmVuZGVyVGhvdWdodCIsImZvcm1hdFRoaW5raW5nQmxvY2siLCJmb3JtYXRDb21wYWN0VG9vbENhbGwiLCJmb3JtYXRDb21wYWN0VG9vbFJlc3VsdCIsIndyYXBCdWxsZXRUZXh0IiwibGFiZWwiLCJsYWJlbENvbG9yIiwid2FybmluZyIsImluZm8iLCJpc0Vycm9yIiwidW5kZWZpbmVkIiwiaW5jbHVkZXMiLCJhbHBoYUNvdW50IiwibWF0Y2giLCJ0b3RhbENvdW50IiwibGltaXRlZCIsIm1heFNlZ21lbnRzIiwic2VnbWVudHMiLCJmbGF0TWFwIiwic2VlbiIsImRlZHVwZWQiLCJzZWdtZW50Iiwibm9ybWFsaXplZFNlZ21lbnQiLCJhZGQiLCJwcmlvcml0aXplZCIsInByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyIsImxpbWl0ZWRTZWxlY3Rpb24iLCJidWxsZXRlZCIsImVuc3VyZVJlYXNvbmluZ0J1bGxldCIsImxvb2tzU3RydWN0dXJlZFRob3VnaHQiLCJzY29yZWQiLCJpbmRleCIsInNjb3JlIiwicmVhc29uaW5nU2lnbmFsU2NvcmUiLCJoYXNTaWduYWwiLCJpdGVtIiwic29ydCIsImEiLCJiIiwibG93ZXIiLCJhY3Rpb25LZXl3b3JkcyIsImtleXdvcmQiLCJmb3JtYXRDbGF1ZGVDb2RlQmxvY2siLCJidWxsZXQiLCJyZXN1bHQiLCJsaW5lSWR4Iiwid29yZHMiLCJjdXJyZW50TGluZSIsIndvcmQiLCJwcmVmaXgiLCJ0cmltU3RhcnQiLCJmb3JtYXRUb29sQ2FsbCIsIm5hbWVNYXRjaCIsInRvb2wiLCJ0b29sTmFtZSIsImFyZ3NTdHIiLCJwcmVmaXhMZW4iLCJpbmRlbnQiLCJyZXBlYXQiLCJhcmdzIiwicGFyc2VUb29sQXJncyIsImFyZyIsImFyZ1RleHQiLCJ1aSIsIm11dGVkIiwiZm9ybWF0QXJnVmFsdWUiLCJ2YWx1ZSIsInNlcGFyYXRvciIsInRlc3RMaW5lIiwic3RyaXBBbnNpIiwicmVnZXgiLCJleGVjIiwiaXNRdW90ZWQiLCJpbm5lciIsImxvd2VyS2V5Iiwic2hvdWxkUHJlc2VydmUiLCJtYXhMZW4iLCJ0cnVuY2F0ZWQiLCJmb3JtYXRUb29sUmVzdWx0Iiwic3VtbWFyeU1hdGNoIiwicHJldmlldyIsInBhcmFtcyIsInBhcnNlVG9vbFBhcmFtcyIsImZvcm1hdFRvb2xQYXJhbXMiLCJmaXJzdFBhcmFtIiwicGFyYW0iLCJjb2xvcmVkVmFsdWUiLCJjb2xvclBhcmFtVmFsdWUiLCJwYXJhbVRleHQiLCJwYXJhbVN0ciIsInBsYWluTGVuZ3RoIiwidmlzaWJsZUxlbmd0aCIsImV4dHJhY3RUb29sU3VtbWFyeSIsInBhdGhNYXRjaCIsInBhdGgiLCJmaWxlIiwiY21kTWF0Y2giLCJsaW5lTWF0Y2giLCJmaWxlTWF0Y2giLCJyZWFkTWF0Y2giLCJzdW1tYXJ5IiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJzdWNjZXNzIiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwiZmlyc3ROb25FbXB0eSIsInJhd0xpbmUiLCJjYW5kaWRhdGUiLCJwcmVmaXhMZW5ndGgiLCJ3cmFwVGV4dFRvV2lkdGgiLCJ3aWR0aCIsImZvcm1hdFN0cmVhbWluZ0VsYXBzZWQiLCJlbGFwc2VkIiwiZmxvb3IiLCJtaW5zIiwic2VjcyIsImZvcm1hdENvbXBhY3RCbG9jayIsInBhZGRpbmciLCJsZWZ0UGFkIiwicmlnaHRQYWQiLCJjZWlsIiwiYWRkQ29tcGFjdEJsb2NrIiwiZm9ybWF0dGVkQ29udGVudCIsImV4cGFuZExhc3RUb29sUmVzdWx0IiwicmVuZGVyZWQiLCJzZXRNb2RlIiwid2FzU3RyZWFtaW5nIiwic3RhcnRTcGlubmVyQW5pbWF0aW9uIiwic3RvcFNwaW5uZXJBbmltYXRpb24iLCJzZXRJbnRlcnZhbCIsInNwaW5uZXJGcmFtZXMiLCJicmFpbGxlIiwic2V0QWN0aXZpdHkiLCJ1cGRhdGVTdHJlYW1pbmdUb2tlbnMiLCJ0b2tlbnMiLCJmb3JtYXRUb2tlbkNvdW50IiwiU3RyaW5nIiwidG9GaXhlZCIsInJvdW5kIiwiZ2V0TW9kZSIsInVwZGF0ZVN0YXR1cyIsInVwZGF0ZVN0YXR1c0J1bmRsZSIsIm1haW4iLCJvdmVycmlkZSIsInN0cmVhbWluZyIsInN0YXR1cyIsInByZXZTdHJlYW1pbmciLCJjaGFuZ2VkIiwibWFpbkNoYW5nZWQiLCJvdmVycmlkZUNoYW5nZWQiLCJzdHJlYW1pbmdDaGFuZ2VkIiwic3RyZWFtaW5nSW50cm9kdWNlIiwic3RyZWFtaW5nQ2xlYXJlZCIsIm9ubHlTdHJlYW1pbmdDaGFuZ2VkIiwic2tpcFN0cmVhbWluZ1JlbmRlciIsInNob3VsZFJlbmRlciIsInVwZGF0ZVN0YXR1c01ldGEiLCJKU09OIiwic3RyaW5naWZ5IiwidXBkYXRlTW9kZVRvZ2dsZXMiLCJzdGF0ZSIsInZlcmlmaWNhdGlvbkhvdGtleSIsInRoaW5raW5nSG90a2V5IiwiY3JpdGljYWxBcHByb3ZhbEhvdGtleSIsImF1dG9Db250aW51ZUhvdGtleSIsImR1YWxSbEhvdGtleSIsImRlYnVnSG90a2V5IiwiY2xlYXIiLCJzZXRJbmxpbmVQYW5lbCIsImhhc0NvbnRlbnQiLCJsaW1pdElubGluZVBhbmVsIiwic3VwcG9ydHNJbmxpbmVQYW5lbCIsImNsZWFySW5saW5lUGFuZWwiLCJtYXhMaW5lcyIsIm92ZXJmbG93IiwiaW5kaWNhdG9yIiwidGFpbENvdW50IiwidGFpbCIsIm92ZXJsYXkiLCJidWlsZE92ZXJsYXlMaW5lcyIsInJlbmRlcmVkTGluZXMiLCJ0cnVuY2F0ZUxpbmUiLCJwcm9tcHRJbmRleCIsImhlaWdodCIsImxpbmVzVG9Ub3AiLCJleHRyYUxpbmVzIiwibW92ZUJhY2tVcCIsInByb21wdENvbCIsImxpbmVzVG9Nb3ZlVXAiLCJkaXZpZGVyIiwiZmFsbGJhY2tBY3Rpdml0eSIsInJhdyIsInNwaW5uZXJDaGFycyIsInNwaW5uZXJDaGFyIiwic3RhckNoYXIiLCJzcGlubmVyRGVjb3JhdGVkIiwiYWNjZW50IiwiZ2VuZXJpY0FjdGl2aXRpZXMiLCJkaXNwbGF5QWN0aXZpdHkiLCJuZWVkc0VsbGlwc2lzIiwiZWxhcHNlZENvbG9yIiwiY2hhbGsiLCJoZXgiLCJwYXJ0cyIsImFjdGl2aXR5VGV4dCIsImZ1bGxDb250ZW50IiwiZGlzcGxheUNvbnRlbnQiLCJjb250ZW50TGVuIiwibWF4U2Nyb2xsIiwib2Zmc2V0Iiwic3RhcnRJbmRpY2F0b3IiLCJlbmRJbmRpY2F0b3IiLCJwbGFpbkNvbnRlbnQiLCJ2aXNpYmxlUGxhaW4iLCJhY3Rpdml0eUxpbmUiLCJpbnB1dExpbmUiLCJidWlsZElucHV0TGluZSIsImlucHV0TGluZXMiLCJwYW5lbExpbmUiLCJzdWdnZXN0aW9uIiwiaXNBY3RpdmUiLCJtYXJrZXIiLCJjbWRUZXh0IiwiZGVzY1RleHQiLCJkZXNjcmlwdGlvbiIsIm1vZGVsQ29udGV4dExpbmUiLCJidWlsZE1vZGVsQ29udGV4dExpbmUiLCJjaHJvbWVMaW5lcyIsImJ1aWxkQ2hyb21lTGluZXMiLCJjaHJvbWVMaW5lIiwidG9nZ2xlTGluZXMiLCJidWlsZElubGluZVRvZ2dsZUxpbmUiLCJ0b2dnbGVMaW5lIiwibGVnZW5kTGluZXMiLCJidWlsZFRvZ2dsZUxlZ2VuZCIsImxlZ2VuZCIsIm1vZGVsIiwicHJvdmlkZXIiLCJjb250ZXh0UGVyY2VudCIsInVzZWQiLCJiYXJXaWR0aCIsImZpbGxlZCIsImVtcHR5IiwiYmFyQ29sb3IiLCJiYXIiLCJhdXRvQ29udGludWVBY3RpdmUiLCJ2ZXJpZmljYXRpb25BY3RpdmUiLCJhcHByb3ZhbE1vZGUiLCJ0aGlua2luZ0xhYmVsIiwidGhpbmtpbmdNb2RlTGFiZWwiLCJ0b2dnbGVzIiwicmxPbiIsInJsSWNvbiIsInJsU3RhdHVzIiwicmxFeHBsYWluIiwiY29udEljb24iLCJjb250U3RhdHVzIiwiY29udEV4cGxhaW4iLCJ2ZXJpZnlJY29uIiwidmVyaWZ5U3RhdHVzIiwidmVyaWZ5RXhwbGFpbiIsImFwcHJJY29uIiwiYXBwclN0YXR1cyIsImFwcHJFeHBsYWluIiwidGhpbmtpbmdJc0RlZXAiLCJ0aGlua0ljb24iLCJ0aGlua1N0YXR1cyIsInRoaW5rRXhwbGFpbiIsImRlYnVnQWN0aXZlIiwiZGVidWdJY29uIiwiZGVidWdTdGF0dXMiLCJkZWJ1Z0V4cGxhaW4iLCJ3cmFwU2VnbWVudHMiLCJzdGF0dXNMaW5lcyIsImJ1aWxkU3RhdHVzQmxvY2siLCJtZXRhTGluZXMiLCJidWlsZE1ldGFCbG9jayIsImFiYnJldmlhdGVQYXRoIiwicGF0aFZhbHVlIiwiaG9tZSIsImhvbWVkaXIiLCJzdGF0dXNMYWJlbCIsImNvbXBvc2VTdGF0dXNMYWJlbCIsImFwcGx5VG9uZSIsInRvbmUiLCJzZXNzaW9uVGltZSIsInVwZGF0ZSIsInByb2ZpbGUiLCJmb3JtYXRNZXRhU2VnbWVudCIsIndvcmtzcGFjZSIsImRpcmVjdG9yeSIsIndyaXRlcyIsInRvb2xTdW1tYXJ5Iiwic2Vzc2lvbkxhYmVsIiwidmVyc2lvbiIsInN0YXR1c2VzIiwiYXJyIiwiY29sb3JpemVyIiwiYnVpbGRDb250cm9sTGluZXMiLCJidWlsZFRvZ2dsZUxpbmUiLCJzaG9ydGN1dExpbmUiLCJidWlsZFNob3J0Y3V0TGluZSIsImJ1aWxkQ29tcGFjdFRvZ2dsZUxpbmUiLCJlZGl0SWNvbiIsImVkaXRTdGF0ZSIsImN5Y2xlSGludCIsImFkZFRvZ2dsZSIsImhvdGtleSIsImF1dG9WZXJpZnlBY3RpdmUiLCJ2ZXJpZnlWYWx1ZSIsImFwcHJvdmFsQWN0aXZlIiwidGhpbmtpbmdMYWJlbFJhdyIsInRoaW5raW5nQWN0aXZlIiwiZHVhbFJsQWN0aXZlIiwibW9kZVZhbHVlIiwiYnVpbGRMaW5lIiwiaW5jbHVkZUhvdGtleXMiLCJ0b2dnbGUiLCJzdGF0ZVRleHQiLCJob3RrZXlUZXh0IiwiYWRkSG90a2V5IiwicHJvbXB0V2lkdGgiLCJjb250aW51YXRpb25JbmRlbnQiLCJjb250aW51YXRpb25XaWR0aCIsInJhd0J1ZmZlciIsImJ1ZmZlckxpbmVzIiwidG90YWxDaGFycyIsImN1cnNvckxpbmUiLCJjdXJzb3JDb2wiLCJmb3VuZEN1cnNvciIsImxpbmVJbmRleCIsImlzRmlyc3RMb2dpY2FsTGluZSIsImxpbmVTdGFydENoYXIiLCJmaXJzdExpbmVXaWR0aCIsImNvbnRMaW5lV2lkdGgiLCJpc0ZpcnN0RGlzcGxheUxpbmUiLCJkaXNwbGF5TGluZSIsImNodW5rU3RhcnQiLCJjaHVua0VuZCIsIm9mZnNldEluQ2h1bmsiLCJsYXN0TGluZSIsInRhcmdldExpbmUiLCJ2aXNpYmxlUGFydCIsImN1cnNvclBvcyIsImJlZm9yZSIsImNoYXJBdCIsImFmdGVyIiwidGV4dFBhcnQiLCJidWlsZElucHV0V2luZG93IiwiYXZhaWxhYmxlIiwiY3Vyc29ySW5kZXgiLCJtYXhPZmZzZXQiLCJ3aW5kb3ciLCJkaXNwbGF5IiwiY2hhciIsImN1cnNvckluV2luZG93IiwiY2FwdHVyZUlucHV0IiwiUHJvbWlzZSIsInJlamVjdCIsInJlc2V0QnVmZmVyIiwicmVhc29uIiwiY2FwdHVyZSIsIndyYXBPdmVybGF5TGluZSIsImxpbWl0IiwidmlzaWJsZSIsInRva2VuIiwic2xpY2VMZW5ndGgiLCJnZXRCdWZmZXIiLCJnZXRDdXJzb3IiLCJzZXRCdWZmZXIiLCJyZXF1ZXN0ZWRDdXJzb3IiLCJzZXRTZWNyZXRNb2RlIiwiZW5hYmxlZCIsInNldE1vZGVTdGF0dXMiLCJzaG93Q29tcGFjdGluZ1N0YXR1cyIsImhpZGVDb21wYWN0aW5nU3RhdHVzIiwiZW1pdFByb21wdCIsInB1c2hQcm9tcHRFdmVudCIsIm1zIiwiZGF0YSIsImNvbHVtbnMiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVW5pZmllZFVJUmVuZGVyZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmlmaWVkVUlSZW5kZXJlciAtIENsYXVkZSBDb2RlIHN0eWxlIG1pbmltYWxpc3QgdGVybWluYWwgVUkuXG4gKlxuICogR29hbHM6XG4gKiAtIFNpbmdsZSBldmVudCBwaXBlbGluZSBmb3IgZXZlcnl0aGluZyAocHJvbXB0IOKGkiB0aG91Z2h0IOKGkiB0b29sL2J1aWxkL3Rlc3Qg4oaSIHJlc3BvbnNlKS5cbiAqIC0gUGlubmVkIHN0YXR1cy9tZXRhIG9ubHkgKG5ldmVyIGluIHNjcm9sbGJhY2spLlxuICogLSBTY3JvbGxiYWNrIG9ubHkgc2hvd3MgZXZlbnRzOyBubyBkdXBsaWNhdGUgc3RhdHVzIGxpa2UgXCJXb3JraW5nIG9uIHlvdXIgcmVxdWVzdFwiIG9yIFwiUmVhZHkgZm9yIHByb21wdHNcIi5cbiAqIC0gU3RyZWFtaW5nOiBmaXJzdCBjaHVuayBzZXRzIGEgb25lLWxpbmUgYmFubmVyOyByZW1haW5kZXIgc3RyZWFtcyBuYXR1cmFsbHkgKG9wdGlvbmFsKS5cbiAqIC0gQ29sbGFwc2libGUtbGlrZSBzdW1tYXJpZXM6IHdlIGZvcm1hdCBhIGNvbXBhY3QgaGVhZGluZyB3aXRoIGFuIGVsbGlwc2lzIGluZGljYXRvciwgYnV0IGF2b2lkIGN0cmwrbyBoaW50cy5cbiAqL1xuXG5pbXBvcnQgKiBhcyByZWFkbGluZSBmcm9tICdub2RlOnJlYWRsaW5lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdub2RlOm9zJztcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgeyB0aGVtZSwgc3Bpbm5lckZyYW1lcyB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHsgbG9nRGVidWcgfSBmcm9tICcuLi91dGlscy9kZWJ1Z0xvZ2dlci5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZFN1Z2dlc3Rpb24ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xufVxuXG50eXBlIENhbm9uaWNhbEV2ZW50VHlwZSA9ICdwcm9tcHQnIHwgJ3Rob3VnaHQnIHwgJ3N0cmVhbScgfCAndG9vbCcgfCAndG9vbC1yZXN1bHQnIHwgJ2J1aWxkJyB8ICd0ZXN0JyB8ICdyZXNwb25zZSc7XG5cbmV4cG9ydCB0eXBlIFJlbmRlcmVyRXZlbnRUeXBlID1cbiAgfCBDYW5vbmljYWxFdmVudFR5cGVcbiAgfCAncmF3J1xuICB8ICdiYW5uZXInXG4gIHwgJ2Vycm9yJ1xuICB8ICdzdHJlYW1pbmcnXG4gIHwgJ3Rvb2wtY2FsbCdcbiAgfCAndG9vbC1yZXN1bHQnO1xuXG50eXBlIFVJRXZlbnQgPSB7XG4gIHR5cGU6IENhbm9uaWNhbEV2ZW50VHlwZTtcbiAgcmF3VHlwZTogUmVuZGVyZXJFdmVudFR5cGU7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ29tcGFjdGVkPzogYm9vbGVhbjsgLy8gQ2xhdWRlIENvZGUgc3R5bGUgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2tcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zIHtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG50eXBlIElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgY3Vyc29yOiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgTW9kZVRvZ2dsZVN0YXRlIHtcbiAgdmVyaWZpY2F0aW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgdmVyaWZpY2F0aW9uSG90a2V5Pzogc3RyaW5nO1xuICBhdXRvQ29udGludWVFbmFibGVkPzogYm9vbGVhbjtcbiAgYXV0b0NvbnRpbnVlSG90a2V5Pzogc3RyaW5nO1xuICB0aGlua2luZ01vZGVMYWJlbD86IHN0cmluZyB8IG51bGw7XG4gIHRoaW5raW5nSG90a2V5Pzogc3RyaW5nO1xuICBjcml0aWNhbEFwcHJvdmFsTW9kZT86ICdhdXRvJyB8ICdhcHByb3ZhbCc7XG4gIGNyaXRpY2FsQXBwcm92YWxIb3RrZXk/OiBzdHJpbmc7XG4gIGR1YWxSbEVuYWJsZWQ/OiBib29sZWFuO1xuICBkdWFsUmxIb3RrZXk/OiBzdHJpbmc7XG4gIGRlYnVnRW5hYmxlZD86IGJvb2xlYW47XG4gIGRlYnVnSG90a2V5Pzogc3RyaW5nO1xufVxuXG5jb25zdCBFU0MgPSB7XG4gIEhJREVfQ1VSU09SOiAnXFx4MWJbPzI1bCcsXG4gIFNIT1dfQ1VSU09SOiAnXFx4MWJbPzI1aCcsXG4gIENMRUFSX1NDUkVFTjogJ1xceDFiWzJKJyxcbiAgQ0xFQVJfTElORTogJ1xceDFiWzJLJyxcbiAgSE9NRTogJ1xceDFiW0gnLFxuICBFTkFCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRoJyxcbiAgRElTQUJMRV9CUkFDS0VURURfUEFTVEU6ICdcXHgxYls/MjAwNGwnLFxuICBUTzogKHJvdzogbnVtYmVyLCBjb2w6IG51bWJlcikgPT4gYFxceDFiWyR7cm93fTske2NvbH1IYCxcbiAgVE9fQ09MOiAoY29sOiBudW1iZXIpID0+IGBcXHgxYlske2NvbH1HYCxcbiAgRVJBU0VfRE9XTjogJ1xceDFiW0onLFxuICBSRVZFUlNFOiAnXFx4MWJbN20nLFxuICBSRVNFVDogJ1xceDFiWzBtJyxcbiAgLy8gU2Nyb2xsIHJlZ2lvbiBjb250cm9sIC0gQ1JJVElDQUwgZm9yIGZpeGVkIGJvdHRvbSBvdmVybGF5XG4gIFNFVF9TQ1JPTExfUkVHSU9OOiAodG9wOiBudW1iZXIsIGJvdHRvbTogbnVtYmVyKSA9PiBgXFx4MWJbJHt0b3B9OyR7Ym90dG9tfXJgLFxuICBSRVNFVF9TQ1JPTExfUkVHSU9OOiAnXFx4MWJbcicsXG4gIFNBVkVfQ1VSU09SOiAnXFx4MWJbcycsXG4gIFJFU1RPUkVfQ1VSU09SOiAnXFx4MWJbdScsXG59IGFzIGNvbnN0O1xuXG5jb25zdCBORVdMSU5FX1BMQUNFSE9MREVSID0gJ+KGtSc7XG5cbmV4cG9ydCBjbGFzcyBVbmlmaWVkVUlSZW5kZXJlciBleHRlbmRzIEV2ZW50RW1pdHRlciB7XG4gIHByaXZhdGUgcmVhZG9ubHkgb3V0cHV0OiBOb2RlSlMuV3JpdGVTdHJlYW07XG4gIHByaXZhdGUgcmVhZG9ubHkgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IHJsOiByZWFkbGluZS5JbnRlcmZhY2U7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5Nb2RlOiBib29sZWFuO1xuICBwcml2YXRlIHJlYWRvbmx5IGludGVyYWN0aXZlOiBib29sZWFuO1xuXG4gIHByaXZhdGUgcm93cyA9IDI0O1xuICBwcml2YXRlIGNvbHMgPSA4MDtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyV2lkdGg6IG51bWJlciB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgZXZlbnRRdWV1ZTogVUlFdmVudFtdID0gW107XG4gIHByaXZhdGUgaXNQcm9jZXNzaW5nUXVldWUgPSBmYWxzZTtcblxuICBwcml2YXRlIGJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIGN1cnNvciA9IDA7XG4gIHByaXZhdGUgaGlzdG9yeTogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoaXN0b3J5SW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uczogeyBjb21tYW5kOiBzdHJpbmc7IGRlc2NyaXB0aW9uOiBzdHJpbmc7IGNhdGVnb3J5Pzogc3RyaW5nIH1bXSA9IFtdO1xuICBwcml2YXRlIHN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICBwcml2YXRlIGF2YWlsYWJsZUNvbW1hbmRzOiB0eXBlb2YgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICBwcml2YXRlIGhvdGtleXNJblRvZ2dsZUxpbmU6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpO1xuICBwcml2YXRlIGNvbGxhcHNlZFBhc3RlOiB7IHRleHQ6IHN0cmluZzsgbGluZXM6IG51bWJlcjsgY2hhcnM6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyA9ICdpZGxlJztcbiAgcHJpdmF0ZSBsYXN0VG9vbFJlc3VsdDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RyZWFtaW5nU3RhcnRUaW1lOiBudW1iZXIgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBzdGF0dXNPdmVycmlkZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzU3RyZWFtaW5nOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcblxuICAvLyBBbmltYXRlZCBVSSBjb21wb25lbnRzXG4gIHByaXZhdGUgc3RyZWFtaW5nU3Bpbm5lcjogQW5pbWF0ZWRTcGlubmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgdGhpbmtpbmdJbmRpY2F0b3I6IFRoaW5raW5nSW5kaWNhdG9yIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgY29udGV4dE1ldGVyOiBDb250ZXh0TWV0ZXI7XG4gIHByaXZhdGUgc3Bpbm5lckZyYW1lID0gMDtcbiAgcHJpdmF0ZSBzcGlubmVySW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4SW5saW5lUGFuZWxMaW5lcyA9IDEyO1xuXG4gIC8vIENvbXBhY3Rpbmcgc3RhdHVzIGFuaW1hdGlvblxuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlID0gJyc7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ZyYW1lID0gMDtcbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWw6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMgPSBbJ+KcuycsICfinLwnLCAn4py7JywgJ+KcuiddO1xuXG4gIC8vIEFuaW1hdGVkIGFjdGl2aXR5IGxpbmUgKGUuZy4sIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCIpXG4gIHByaXZhdGUgYWN0aXZpdHlNZXNzYWdlOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVBocmFzZUluZGV4ID0gMDtcbiAgcHJpdmF0ZSBhY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgYWN0aXZpdHlTdGFyRnJhbWVzID0gWyfinLMnLCAn4py0JywgJ+KctScsICfinLYnLCAn4py3JywgJ+KcuCddO1xuICAvLyBUb2tlbiBjb3VudCBkdXJpbmcgc3RyZWFtaW5nXG4gIHByaXZhdGUgc3RyZWFtaW5nVG9rZW5zID0gMDtcbiAgLy8gSG9yaXpvbnRhbCBzY3JvbGwgYW5pbWF0aW9uIGZvciBsb25nIGFjdGl2aXR5IGxpbmVzXG4gIHByaXZhdGUgYWN0aXZpdHlTY3JvbGxPZmZzZXQgPSAwO1xuICBwcml2YXRlIGFjdGl2aXR5U2Nyb2xsRGlyZWN0aW9uID0gMTsgLy8gMSA9IHJpZ2h0LCAtMSA9IGxlZnRcbiAgLy8gRWxhcHNlZCB0aW1lIGNvbG9yIGFuaW1hdGlvblxuICBwcml2YXRlIGVsYXBzZWRDb2xvckZyYW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBlbGFwc2VkQ29sb3JGcmFtZXMgPSBbJyNGNTlFMEInLCAnI0ZCQkYyNCcsICcjRkNEMzREJywgJyNGREU2OEEnLCAnI0ZDRDM0RCcsICcjRkJCRjI0J107XG4gIC8vIFVzZXItZnJpZW5kbHkgYWN0aXZpdHkgcGhyYXNlcyAoY2xlYW4sIHByb2Zlc3Npb25hbClcbiAgcHJpdmF0ZSByZWFkb25seSBmdW5BY3Rpdml0eVBocmFzZXMgPSBbXG4gICAgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnLCAnQW5hbHl6aW5nJywgJ1dvcmtpbmcnLCAnUHJlcGFyaW5nJyxcbiAgXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgPSA4O1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyA9IDE4MDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGhvdWdodERlZHVwV2luZG93TXMgPSAxNTAwMDtcbiAgcHJpdmF0ZSBsYXN0Q3VyYXRlZFRob3VnaHQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHN0YXR1c01ldGE6IHtcbiAgICBtb2RlbD86IHN0cmluZztcbiAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgd3JpdGVzPzogc3RyaW5nO1xuICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICB9ID0ge307XG4gIHByaXZhdGUgdG9nZ2xlU3RhdGU6IE1vZGVUb2dnbGVTdGF0ZSA9IHtcbiAgICB2ZXJpZmljYXRpb25FbmFibGVkOiBmYWxzZSxcbiAgICBhdXRvQ29udGludWVFbmFibGVkOiBmYWxzZSxcbiAgICBjcml0aWNhbEFwcHJvdmFsTW9kZTogJ2F1dG8nLFxuICAgIGR1YWxSbEVuYWJsZWQ6IGZhbHNlLFxuICAgIGRlYnVnRW5hYmxlZDogZmFsc2UsXG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tIEhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgLyoqIEVuc3VyZSBjdXJzb3IgaXMgYWx3YXlzIHdpdGhpbiB2YWxpZCBib3VuZHMgZm9yIHRoZSBjdXJyZW50IGJ1ZmZlciAqL1xuICBwcml2YXRlIGNsYW1wQ3Vyc29yKCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5jdXJzb3IsIHRoaXMuYnVmZmVyLmxlbmd0aCkpO1xuICB9XG5cbiAgLyoqIFNhZmVseSBhcHBlbmQgdG8gcGFzdGUgYnVmZmVyIHdpdGggc2l6ZSBsaW1pdCBlbmZvcmNlbWVudCAqL1xuICBwcml2YXRlIGFwcGVuZFRvUGFzdGVCdWZmZXIoYnVmZmVyOiAncGFzdGUnIHwgJ3BsYWluUGFzdGUnLCB0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93KSByZXR1cm47IC8vIEFscmVhZHkgYXQgbGltaXRcbiAgICBjb25zdCBjdXJyZW50ID0gYnVmZmVyID09PSAncGFzdGUnID8gdGhpcy5wYXN0ZUJ1ZmZlciA6IHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcjtcbiAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSAtIGN1cnJlbnQubGVuZ3RoO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9BZGQgPSB0ZXh0Lmxlbmd0aCA8PSByZW1haW5pbmcgPyB0ZXh0IDogdGV4dC5zbGljZSgwLCByZW1haW5pbmcpO1xuICAgIGlmIChidWZmZXIgPT09ICdwYXN0ZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9XG4gICAgaWYgKHRvQWRkLmxlbmd0aCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBTdHJpcCBBTlNJIGVzY2FwZSBzZXF1ZW5jZXMgZnJvbSB0ZXh0IHRvIHByZXZlbnQgaW5qZWN0aW9uICovXG4gIHByaXZhdGUgc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgYWxsIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyAoQ1NJLCBPU0MsIGV0Yy4pXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHgxYlxcW1swLTk7XSpbQS1aYS16XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gMjQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gNjA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDI7IC8vIEd1YXJkIGZvciBzaG9ydCBmaXJzdCBsaW5lcyBpbiBwbGFpbiBwYXN0ZSBtb2RlXG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDgwOyAvLyBXYWl0IGJlZm9yZSBjb21taXR0aW5nIGNoYXJzIGFzIG5vcm1hbCBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgcHJpdmF0ZSBwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWNyZXRNb2RlID0gZmFsc2U7XG4gIC8vIFJlbmRlciB0aHJvdHRsaW5nIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gIHByaXZhdGUgcGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJUaHJvdHRsZU1zID0gMTY7IC8vIH42MGZwcyBtYXhcbiAgcHJpdmF0ZSByZW5kZXJUaHJvdHRsZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyBEaXNwb3NhbCBzdGF0ZSB0byBwcmV2ZW50IG9wZXJhdGlvbnMgYWZ0ZXIgY2xlYW51cFxuICBwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG4gIC8vIEJvdW5kIGV2ZW50IGhhbmRsZXJzIGZvciBwcm9wZXIgY2xlYW51cFxuICBwcml2YXRlIGJvdW5kUmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRLZXlwcmVzc0hhbmRsZXI6ICgoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0Q2FwdHVyZTpcbiAgICB8IHtcbiAgICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIHJlamVjdD86IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgICAgICBvcHRpb25zOiB7IHRyaW06IGJvb2xlYW47IGFsbG93RW1wdHk6IGJvb2xlYW4gfTtcbiAgICAgIH1cbiAgICB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtID0gcHJvY2Vzcy5zdGRvdXQsXG4gICAgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtID0gcHJvY2Vzcy5zdGRpbixcbiAgICBfb3B0aW9ucz86IFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmludGVyYWN0aXZlID0gQm9vbGVhbih0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmlucHV0LmlzVFRZICYmICFwcm9jZXNzLmVudlsnQ0knXSk7XG4gICAgdGhpcy5wbGFpbk1vZGUgPSBpc1BsYWluT3V0cHV0TW9kZSgpIHx8ICF0aGlzLmludGVyYWN0aXZlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmltYXRlZCBjb21wb25lbnRzXG4gICAgdGhpcy5jb250ZXh0TWV0ZXIgPSBuZXcgQ29udGV4dE1ldGVyKCk7XG5cbiAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgIGlucHV0OiB0aGlzLmlucHV0LFxuICAgICAgb3V0cHV0OiB0aGlzLm91dHB1dCxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJvbXB0OiAnJyxcbiAgICAgIHRhYlNpemU6IDIsXG4gICAgfSk7XG4gICAgdGhpcy5ybC5zZXRQcm9tcHQoJycpO1xuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlcnMgc28gd2UgY2FuIHJlbW92ZSB0aGVtIG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub3V0cHV0Lm9uKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG5cbiAgICB0aGlzLnNldHVwSW5wdXRIYW5kbGVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBJZiBhbiBvdmVybGF5IHdhcyBhbHJlYWR5IHJlbmRlcmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgYmFubmVyIGVtaXR0ZWQgZWFybHkpLFxuICAgICAgLy8gY2xlYXIgaXQgc28gaW5pdGlhbGl6ZSgpIGRvZXNuJ3Qgc3RhY2sgYSBzZWNvbmQgY29udHJvbCBiYXIgaW4gc2Nyb2xsYmFjay5cbiAgICAgIGlmICh0aGlzLmhhc1JlbmRlcmVkUHJvbXB0IHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYWluIG1vZGU6IG1pbmltYWwgc2V0dXAsIHN0aWxsIHJlbmRlciBhIHNpbXBsZSBwcm9tcHQgbGluZVxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIE1hcmsgYXMgZGlzcG9zZWQgZmlyc3QgdG8gcHJldmVudCBhbnkgcGVuZGluZyBvcGVyYXRpb25zXG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG5cbiAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ1JlbmRlcmVyIGRpc3Bvc2VkJykpO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIC8vIENsZWFyIHJlbmRlciB0aHJvdHRsZSB0aW1lclxuICAgIGlmICh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpO1xuICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdG9wIGFueSBydW5uaW5nIGFuaW1hdGlvbnNcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHJlYW1pbmdTcGlubmVyKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1NwaW5uZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudGhpbmtpbmdJbmRpY2F0b3IpIHtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dE1ldGVyLmRpc3Bvc2UoKTtcbiAgICBkaXNwb3NlQW5pbWF0aW9ucygpO1xuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgIGlmICh0aGlzLmJvdW5kUmVzaXplSGFuZGxlcikge1xuICAgICAgdGhpcy5vdXRwdXQucmVtb3ZlTGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpIHtcbiAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIEV2ZW50RW1pdHRlciBsaXN0ZW5lcnMgZnJvbSB0aGlzIGluc3RhbmNlXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5ybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBzbyBpdCBkb2Vzbid0IHJlbWFpbiBpbiBzY3JvbGxiYWNrIGhpc3RvcnlcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZShmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcblxuICAgIC8vIENsZWFyIGV2ZW50IHF1ZXVlXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XG4gIH1cblxuICBzdXNwZW5kUHJvbXB0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZVByb21wdFJlbmRlcmluZyhyZW5kZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gSW5wdXQgaGFuZGxpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmwucmVtb3ZlQWxsTGlzdGVuZXJzKCdsaW5lJyk7XG4gICAgcmVhZGxpbmUuZW1pdEtleXByZXNzRXZlbnRzKHRoaXMuaW5wdXQsIHRoaXMucmwpO1xuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuICAgIC8vIFVzZSBib3VuZCBoYW5kbGVyIHNvIHdlIGNhbiByZW1vdmUgaXQgb24gY2xlYW51cFxuICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSAoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlwcmVzcyhzdHIsIGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmlucHV0Lm9uKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbWl0SW5wdXRDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcGF5bG9hZDogSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgICAgIHRleHQ6IHRoaXMuYnVmZmVyLFxuICAgICAgY3Vyc29yOiB0aGlzLmN1cnNvcixcbiAgICB9O1xuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleXByZXNzKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IHZvaWQge1xuICAgIC8vIE5vcm1hbGl6ZSBtaXNzaW5nIGtleSBtZXRhZGF0YSAoY29tbW9uIGZvciBzb21lIHRlcm1pbmFscyBlbWl0dGluZyByYXcgZXNjYXBlIGNvZGVzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkgPz8gdGhpcy5wYXJzZUVzY2FwZVNlcXVlbmNlKHN0cik7XG4gICAgY29uc3Qga2V5Rm9yUGFzdGUgPSBub3JtYWxpemVkS2V5ID8/IChzdHIgPyB7IHNlcXVlbmNlOiBzdHIgfSBhcyByZWFkbGluZS5LZXkgOiBrZXkpO1xuXG4gICAgaWYgKHRoaXMuaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVQbGFpblBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gbWFjT1MgT3B0aW9uK2tleSBwcm9kdWNlcyBVbmljb2RlIGNoYXJhY3RlcnM7IGhhbmRsZSB0aGVtIGJlZm9yZSBrZXkgbWV0YWRhdGEgY2hlY2tzLlxuICAgIGNvbnN0IG1hY09wdGlvbkNoYXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge1xuICAgICAgJ8KpJzogJ2cnLCAgLy8gT3B0aW9uK0dcbiAgICAgICfihKInOiAnZycsICAvLyBPcHRpb24rU2hpZnQrR1xuICAgICAgJ8OlJzogJ2EnLCAgLy8gT3B0aW9uK0FcbiAgICAgICfDhSc6ICdhJywgIC8vIE9wdGlvbitTaGlmdCtBXG4gICAgICAn4oiaJzogJ3YnLCAgLy8gT3B0aW9uK1YgLyBPcHRpb24rU2hpZnQrVlxuICAgICAgJ+KIgic6ICdkJywgIC8vIE9wdGlvbitEXG4gICAgICAnw44nOiAnZCcsICAvLyBPcHRpb24rU2hpZnQrRCAoY29tbW9uIG1hY09TIGVtaXNzaW9uKVxuICAgICAgJ+KIhic6ICdkJywgIC8vIENvbW1vbiBhbHRlcm5hdGUgZGVsdGEgc3ltYm9sXG4gICAgfTtcblxuICAgIGlmIChzdHIgJiYgbWFjT3B0aW9uQ2hhcnNbc3RyXSkge1xuICAgICAgY29uc3QgbGV0dGVyID0gbWFjT3B0aW9uQ2hhcnNbc3RyXTtcbiAgICAgIC8vIENsZWFyIGFueSBwZW5kaW5nIGluc2VydCBidWZmZXIgc28gdGhlIHN5bWJvbCBuZXZlciBsYW5kcyBpbiB0aGUgcHJvbXB0XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICAgIHN3aXRjaCAobGV0dGVyKSB7XG4gICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ2cnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAnZCc6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICd2JzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIW5vcm1hbGl6ZWRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUgJiYgbm9ybWFsaXplZEtleS5jdHJsICYmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJyB8fCBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkJykpIHtcbiAgICAgIHRoaXMuY2FuY2VsSW5wdXRDYXB0dXJlKG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRGV0ZWN0IEN0cmwrU2hpZnQgY29tYmluYXRpb25zIChmYWxsYmFjayBmb3Igbm9uLW1hY09TIG9yIGNvbmZpZ3VyZWQgdGVybWluYWxzKVxuICAgIGNvbnN0IGlzQ3RybFNoaWZ0ID0gKGxldHRlcjogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gICAgICBjb25zdCBsb3dlckxldHRlciA9IGxldHRlci50b0xvd2VyQ2FzZSgpO1xuICAgICAgY29uc3QgdXBwZXJMZXR0ZXIgPSBsZXR0ZXIudG9VcHBlckNhc2UoKTtcblxuICAgICAgLy8gUGF0dGVybiAxOiBTdGFuZGFyZCByZWFkbGluZSBzaGlmdCBmbGFnICsgY3RybFxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5LnNoaWZ0ICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMjogU29tZSB0ZXJtaW5hbHMgc2VuZCB1cHBlcmNhc2UgbmFtZSB3aXRoIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSB1cHBlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiAzOiBNZXRhL0FsdCArIGxldHRlciAoaVRlcm0yIHdpdGggXCJPcHRpb24gc2VuZHMgTWV0YVwiKVxuICAgICAgaWYgKG5vcm1hbGl6ZWRLZXkubWV0YSAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDQ6IFJhdyBlc2NhcGUgc2VxdWVuY2UgY2hlY2sgZm9yIHh0ZXJtLXN0eWxlIG1vZGlmaWVyc1xuICAgICAgY29uc3Qgc2VxID0gc3RyIHx8IG5vcm1hbGl6ZWRLZXkuc2VxdWVuY2U7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKHNlcSAmJiAvXlxceDFiXFxbWzAtOV0rOzZbfkEtWl0/JC8udGVzdChzZXEpKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDU6IEVTQyArIGxldHRlciAoT3B0aW9uIHNlbmRzIEVTQyBwcmVmaXggaW4gc29tZSBjb25maWdzKVxuICAgICAgaWYgKHNlcSAmJiBzZXEgPT09IGBcXHgxYiR7bG93ZXJMZXR0ZXJ9YCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH07XG5cbiAgICBjb25zdCBoYW5kbGVDdHJsU2hpZnRUb2dnbGUgPSAobGV0dGVyOiAnYScgfCAnZycgfCAnZCcgfCAndicpOiB2b2lkID0+IHtcbiAgICAgIC8vIEVuc3VyZSBubyBidWZmZXJlZCBjaGFycyBsZWFrIGludG8gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBpZiAobGV0dGVyID09PSAnYScpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtY3JpdGljYWwtYXBwcm92YWwnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZycpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtYXV0by1jb250aW51ZScpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICdkJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1kdWFsLXJsJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ3YnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLXZlcmlmeScpO1xuICAgICAgfVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9O1xuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdhJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnYScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgnZycpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2cnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2QnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdkJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCd2JykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgndicpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSAncicpIHtcbiAgICAgIHRoaXMuZW1pdCgncmVzdW1lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkuY3RybCAmJiBub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdjJykge1xuICAgICAgLy8gQ3RybCtDIGJlaGF2aW9yOlxuICAgICAgLy8gMS4gSWYgYnVmZmVyIGhhcyB0ZXh0OiBjbGVhciBpdCBmaXJzdCwgdGhlbiBub3RpZnkgc2hlbGxcbiAgICAgIC8vIDIuIElmIGJ1ZmZlciBpcyBlbXB0eTogbGV0IHNoZWxsIGRlY2lkZSB0byBwYXVzZSBBSSBvciBxdWl0XG4gICAgICAvL1xuICAgICAgLy8gVGhlIEludGVyYWN0aXZlU2hlbGwgbWFpbnRhaW5zIGEgY291bnRlciB0byB0cmFjayBDdHJsK0MgcHJlc3NlcyBhbmQgZGVjaWRlc1xuICAgICAgLy8gd2hldGhlciB0byBwYXVzZSBBSSBvciBleGl0IGJhc2VkIG9uIHByb2Nlc3Npbmcgc3RhdGUuXG5cbiAgICAgIGNvbnN0IGhhZEJ1ZmZlciA9IHRoaXMuYnVmZmVyLmxlbmd0aCA+IDA7XG4gICAgICBpZiAoaGFkQnVmZmVyKSB7XG4gICAgICAgIC8vIENsZWFyIHRoZSBpbnB1dCBidWZmZXIgZmlyc3RcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgLy8gRW1pdCBjdHJsYyBldmVudCB3aXRoIGJ1ZmZlciBzdGF0ZSBzbyBzaGVsbCBjYW4gaGFuZGxlIGFwcHJvcHJpYXRlbHlcbiAgICAgIHRoaXMuZW1pdCgnY3RybGMnLCB7IGhhZEJ1ZmZlciB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdkJykge1xuICAgICAgaWYgKHRoaXMuYnVmZmVyLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICB0aGlzLmVtaXQoJ2ludGVycnVwdCcpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ3UnKSB7XG4gICAgICB0aGlzLmNsZWFyQnVmZmVyKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbCcpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEN0cmwrTzogRXhwYW5kIGxhc3QgdG9vbCByZXN1bHRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdvJykge1xuICAgICAgdGhpcy5lbWl0KCdleHBhbmQtdG9vbC1yZXN1bHQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleS5uYW1lID09PSAnZW50ZXInKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgYW5kIHN1Ym1pdCBpbiBvbmUgYWN0aW9uXG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIElmIGEgc2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uIGlzIGhpZ2hsaWdodGVkLCBwcmVzc2luZyBFbnRlciBzdWJtaXRzIGl0IGltbWVkaWF0ZWx5XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24odHJ1ZSkpIHJldHVybjtcbiAgICAgIC8vIEZhbGxiYWNrOiBpZiBidWZmZXIgc3RhcnRzIHdpdGggJy8nIGFuZCBzdWdnZXN0aW9ucyBleGlzdCwgdXNlIHRoZSBzZWxlY3RlZC9maXJzdCBvbmVcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdPy5jb21tYW5kID8/IHRoaXMuYnVmZmVyO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJtaXRUZXh0KHRoaXMuYnVmZmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvciAtIDEpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd1cCcpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoLTEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+IDApIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIGluZGV4IGlzIHdpdGhpbiBib3VuZHMgYmVmb3JlIGFjY2Vzc2luZ1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCAmJiB0aGlzLmhpc3RvcnlJbmRleCA8IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2Rvd24nKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTYWZldHk6IGludmFsaWQgc3RhdGUsIHJlc2V0XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3RhYicpIHtcbiAgICAgIGlmICh0aGlzLmFwcGx5U3VnZ2VzdGlvbihmYWxzZSkpIHJldHVybjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3RyICYmICFub3JtYWxpemVkS2V5LmN0cmwgJiYgIW5vcm1hbGl6ZWRLZXkubWV0YSkge1xuICAgICAgLy8gRGVmZXIgaW5zZXJ0aW9uIHRvIGFsbG93IHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gY2F0Y2ggcmFwaWQgaW5wdXRcbiAgICAgIHRoaXMucXVldWVQZW5kaW5nSW5zZXJ0KHN0cik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBob3Jpem9udGFsIGN1cnNvciBwb3NpdGlvbiBzdGF5cyB3aXRoaW4gdGhlIHZpc2libGUgaW5wdXQgd2luZG93LlxuICAgKiBQcmV2ZW50cyBqdW1wcyB3aGVuIHVzaW5nIGxlZnQvcmlnaHQgYXJyb3dzIG9uIGxvbmcgbGluZXMuXG4gICAqL1xuICBwcml2YXRlIGVuc3VyZUN1cnNvclZpc2libGUoKTogdm9pZCB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgxMCwgdGhpcy5zYWZlV2lkdGgoKSAtIDEyKTsgLy8gbWFyZ2luIGZvciBwcm9tcHQvdG9nZ2xlcyBhbmQgcGFkZGluZ1xuICAgIC8vIElmIGN1cnNvciBpcyBsZWZ0IG9mIGN1cnJlbnQgd2luZG93LCBzaGlmdCB3aW5kb3cgbGVmdFxuICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvcjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgY3Vyc29yIGlzIGJleW9uZCB2aXNpYmxlIHdpbmRvdywgc2hpZnQgd2luZG93IHJpZ2h0XG4gICAgaWYgKHRoaXMuY3Vyc29yIC0gdGhpcy5pbnB1dFJlbmRlck9mZnNldCA+PSBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yIC0gbWF4V2lkdGggKyAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSByYXcgZXNjYXBlIHNlcXVlbmNlcyB3aGVuIHJlYWRsaW5lIGRvZXNuJ3QgcG9wdWxhdGUga2V5IG1ldGFkYXRhLlxuICAgKiBQcmV2ZW50cyBjb250cm9sIGNvZGVzIChlLmcuLCBeW1syMDB+KSBmcm9tIGxlYWtpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVzY2FwZVNlcXVlbmNlKHNlcXVlbmNlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogcmVhZGxpbmUuS2V5IHwgbnVsbCB7XG4gICAgaWYgKCFzZXF1ZW5jZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCByZWFkbGluZS5LZXk+ID0ge1xuICAgICAgJ1xceDFiW0EnOiB7IG5hbWU6ICd1cCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0InOiB7IG5hbWU6ICdkb3duJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQyc6IHsgbmFtZTogJ3JpZ2h0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRCc6IHsgbmFtZTogJ2xlZnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltIJzogeyBuYW1lOiAnaG9tZScsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0YnOiB7IG5hbWU6ICdlbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDB+JzogeyBuYW1lOiAncGFzdGUtc3RhcnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDF+JzogeyBuYW1lOiAncGFzdGUtZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgfTtcbiAgICByZXR1cm4gbWFwW3NlcXVlbmNlXSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlIGNoYXJhY3RlcnMgZm9yIGRlZmVycmVkIGluc2VydGlvbi4gVGhpcyBwcmV2ZW50cyB2aXN1YWwgXCJsZWFrXCIgb2ZcbiAgICogcGFzdGVkIGNvbnRlbnQgYnkgaG9sZGluZyBjaGFyYWN0ZXJzIHVudGlsIHdlJ3JlIGNvbmZpZGVudCBpdCdzIG5vdCBhIHBhc3RlLlxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVBlbmRpbmdJbnNlcnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICs9IHRleHQ7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2NoZWR1bGUgY29tbWl0IGFmdGVyIGRlbGF5IC0gaWYgcGFzdGUgZGV0ZWN0aW9uIHRyaWdnZXJzIGZpcnN0LCBpdCB3aWxsIGNvbnN1bWUgdGhlIGJ1ZmZlclxuICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbW1pdFBlbmRpbmdJbnNlcnQoKTtcbiAgICB9LCB0aGlzLnBlbmRpbmdJbnNlcnREZWxheU1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgcGVuZGluZyBjaGFyYWN0ZXJzIGFzIG5vcm1hbCBpbnB1dCAobm90IGEgcGFzdGUpLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRQZW5kaW5nSW5zZXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICYmICF0aGlzLmluUGxhaW5QYXN0ZSAmJiAhdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICB0aGlzLmluc2VydFRleHQodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgaW50byBwYXN0ZSBkZXRlY3Rpb24gKHByZXZlbnRzIHZpc3VhbCBsZWFrKS5cbiAgICovXG4gIHByaXZhdGUgY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZWQgPSB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXI7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgcmV0dXJuIGNvbnN1bWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgfHwgc3RyO1xuICAgIGlmIChzZXF1ZW5jZSA9PT0gRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUgfHwgc2VxdWVuY2UgPT09IEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChzZXF1ZW5jZSA9PT0gJ1xceDFiWzIwMH4nKSB7XG4gICAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHRvIHByZXZlbnQgbGVha1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHBlbmRpbmc7IC8vIEluY2x1ZGUgYW55IGNoYXJzIHRoYXQgYXJyaXZlZCBiZWZvcmUgYnJhY2tldGVkIHBhc3RlIHN0YXJ0ZWRcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc2VxdWVuY2UgPT09ICdcXHgxYlsyMDF+Jykge1xuICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleT8ubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsICdcXG4nKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlciA9IHRoaXMucGFzdGVCdWZmZXIuc2xpY2UoMCwgLTEpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHN0cik7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzZXF1ZW5jZSA9PT0gJ3N0cmluZycgJiYgc2VxdWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwYXN0ZScsIHNlcXVlbmNlKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgY29tbWl0UGFzdGVCdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHJldHVybjtcbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wYXN0ZUJ1ZmZlcik7XG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBpZiAoY29udGVudCkge1xuICAgICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSwgLy8gSW5kaWNhdGUgdHJ1bmNhdGlvblxuICAgICAgICB9O1xuICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgICAgIH1cbiAgICB9XG4gICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlUGxhaW5QYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICAvLyBGYWxsYmFjayBwYXN0ZSBjYXB0dXJlIHdoZW4gYnJhY2tldGVkIHBhc3RlIGlzbid0IHN1cHBvcnRlZFxuICAgIGlmICh0aGlzLmluQnJhY2tldGVkUGFzdGUgfHwga2V5Py5jdHJsIHx8IGtleT8ubWV0YSkge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlID8/ICcnO1xuICAgIGNvbnN0IGNodW5rID0gdHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDAgPyBzdHIgOiBzZXF1ZW5jZTtcbiAgICBpZiAoIWNodW5rKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIHRoaXMudHJhY2tQbGFpblBhc3RlQnVyc3QoY2h1bmsubGVuZ3RoLCBub3cpO1xuXG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5yZWNvcmRSZWNlbnRQbGFpbkNodW5rKGNodW5rLCBub3cpO1xuICAgIH1cblxuICAgIGNvbnN0IGNodW5rTXVsdGlwbGUgPSBjaHVuay5sZW5ndGggPiAxO1xuICAgIGNvbnN0IGhhc05ld2xpbmUgPSAvW1xcclxcbl0vLnRlc3QoY2h1bmspO1xuICAgIGNvbnN0IGJ1cnN0QWN0aXZlID0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiAwICYmIG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IDw9IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIGNvbnN0IGJ1cnN0VHJpZ2dlciA9IGJ1cnN0QWN0aXZlICYmIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVUcmlnZ2VyQ2hhcnM7XG4gICAgY29uc3QgaGFzUmVjZW50Tm9uTmV3bGluZSA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3Muc29tZShlbnRyeSA9PiAhL15bXFxyXFxuXSskLy50ZXN0KGVudHJ5LnRleHQpKTtcbiAgICBjb25zdCBlYXJseU5ld2xpbmVUcmlnZ2VyID1cbiAgICAgIGhhc05ld2xpbmUgJiZcbiAgICAgIGJ1cnN0QWN0aXZlICYmXG4gICAgICBoYXNSZWNlbnROb25OZXdsaW5lICYmXG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnM7XG4gICAgY29uc3QgbmV3bGluZVRyaWdnZXIgPSBoYXNOZXdsaW5lICYmICh0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBlYXJseU5ld2xpbmVUcmlnZ2VyKTtcbiAgICBjb25zdCBsb29rc0xpa2VQYXN0ZSA9IHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IG5ld2xpbmVUcmlnZ2VyO1xuXG4gICAgaWYgKCFsb29rc0xpa2VQYXN0ZSkge1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgbGV0IGNodW5rQWxyZWFkeUNhcHR1cmVkID0gZmFsc2U7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkge1xuICAgICAgdGhpcy5pblBsYWluUGFzdGUgPSB0cnVlO1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFJlc2V0IG92ZXJmbG93IGZsYWcgZm9yIG5ldyBwYXN0ZVxuICAgICAgLy8gQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgZmlyc3QgLSB0aGlzIGlzIHRoZSBwcmltYXJ5IHNvdXJjZSBub3dcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIGNvbnN0IHJlY2xhaW1lZCA9IHRoaXMucmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICAvLyBDb21iaW5lIHBlbmRpbmcgYnVmZmVyIHdpdGggYW55IHJlY2xhaW1lZCBjaHVua3NcbiAgICAgIGNvbnN0IGNvbWJpbmVkID0gcGVuZGluZyArIHJlY2xhaW1lZDtcbiAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgIC8vIFJlbW92ZSBhbnkgY2hhcnMgdGhhdCBsZWFrZWQgaW50byBidWZmZXIgKGxlZ2FjeSByZWNsYWltIHBhdGgpXG4gICAgICAgIGlmIChyZWNsYWltZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAgIGNvbnN0IHJlbW92ZUNvdW50ID0gTWF0aC5taW4odGhpcy5idWZmZXIubGVuZ3RoLCByZWNsYWltZWQubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBzdWZmaXggPSB0aGlzLmJ1ZmZlci5zbGljZSgtcmVtb3ZlQ291bnQpO1xuICAgICAgICAgIGlmIChyZW1vdmVDb3VudCA+IDAgJiYgc3VmZml4ID09PSByZWNsYWltZWQuc2xpY2UoLXJlbW92ZUNvdW50KSkge1xuICAgICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmJ1ZmZlci5sZW5ndGggLSByZW1vdmVDb3VudCk7XG4gICAgICAgICAgICB0aGlzLmN1cnNvciA9IE1hdGgubWF4KDAsIHRoaXMuYnVmZmVyLmxlbmd0aCk7XG4gICAgICAgICAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgaXMgdmFsaWRcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gY29tYmluZWQuc2xpY2UoMCwgdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpO1xuICAgICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gdGhpcy5tYXhQYXN0ZUJ1ZmZlclNpemUpIHtcbiAgICAgICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICAgIGNodW5rQWxyZWFkeUNhcHR1cmVkID0gY29tYmluZWQuZW5kc1dpdGgoY2h1bmspO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFjaHVua0FscmVhZHlDYXB0dXJlZCkge1xuICAgICAgdGhpcy5hcHBlbmRUb1Bhc3RlQnVmZmVyKCdwbGFpblBhc3RlJywgY2h1bmspO1xuICAgIH1cbiAgICB0aGlzLnNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSB0cmFja1BsYWluUGFzdGVCdXJzdChsZW5ndGg6IG51bWJlciwgbm93OiBudW1iZXIpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0IHx8IG5vdyAtIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gdGhpcy5wbGFpblBhc3RlV2luZG93TXMpIHtcbiAgICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gbm93O1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgICB9XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ICs9IGxlbmd0aDtcbiAgfVxuXG4gIHByaXZhdGUgcmVzZXRQbGFpblBhc3RlQnVyc3QoKTogdm9pZCB7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgLy8gQWxzbyBjYW5jZWwgcGVuZGluZyBpbnNlcnQgYnVmZmVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gIH1cblxuICBwcml2YXRlIHJlY29yZFJlY2VudFBsYWluQ2h1bmsodGV4dDogc3RyaW5nLCBhdDogbnVtYmVyKTogdm9pZCB7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBhdCAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MucHVzaCh7IHRleHQsIGF0IH0pO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHBydW5lUmVjZW50UGxhaW5DaHVua3MoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgY29uc3Qgd2luZG93U3RhcnQgPSBub3cgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTogc3RyaW5nIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm4gJyc7XG4gICAgY29uc3QgY29tYmluZWQgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLm1hcChlbnRyeSA9PiBlbnRyeS50ZXh0KS5qb2luKCcnKTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgcmV0dXJuIGNvbWJpbmVkO1xuICB9XG5cbiAgcHJpdmF0ZSBzY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgIH1cbiAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5maW5hbGl6ZVBsYWluUGFzdGUoKTtcbiAgICB9LCB0aGlzLnBsYWluUGFzdGVJZGxlTXMpO1xuICB9XG5cbiAgcHJpdmF0ZSBmaW5hbGl6ZVBsYWluUGFzdGUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmluUGxhaW5QYXN0ZSkgcmV0dXJuO1xuXG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcik7XG4gICAgY29uc3QgY29udGVudCA9IHNhbml0aXplZC5yZXBsYWNlKC9cXHJcXG4/L2csICdcXG4nKTtcbiAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlO1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPiAxIHx8IGNvbnRlbnQubGVuZ3RoID4gMjAwKSB7XG4gICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICBsaW5lczogbGluZXMubGVuZ3RoLFxuICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksXG4gICAgICB9O1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuaW5zZXJ0VGV4dChjb250ZW50KTtcbiAgfVxuXG4gIHByaXZhdGUgaW5zZXJ0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAoIXRleHQpIHJldHVybjtcbiAgICBpZiAodGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZCBiZWZvcmUgc2xpY2luZ1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRleHQgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgdGhpcy5jdXJzb3IgKz0gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIHJlbWFpbnMgdmFsaWQgYWZ0ZXIgbW9kaWZpY2F0aW9uXG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgc3VibWl0VGV4dCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBzdWJtaXQgdGhhdCBpbnN0ZWFkIG9mIHRoZSBidWZmZXIgdGV4dFxuICAgIC8vIFRoaXMgaGFuZGxlcyBlZGdlIGNhc2VzIHdoZXJlIHN1Ym1pdFRleHQgaXMgY2FsbGVkIHByb2dyYW1tYXRpY2FsbHlcbiAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgY29uc3Qgc2hvdWxkVHJpbSA9IHRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMudHJpbTtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRDYXB0dXJlID0gc2hvdWxkVHJpbSA/IHRleHQudHJpbSgpIDogdGV4dDtcbiAgICAgIGlmICghdGhpcy5pbnB1dENhcHR1cmUub3B0aW9ucy5hbGxvd0VtcHR5ICYmICFub3JtYWxpemVkQ2FwdHVyZSkge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCByZXNvbHZlciA9IHRoaXMuaW5wdXRDYXB0dXJlO1xuICAgICAgdGhpcy5pbnB1dENhcHR1cmUgPSBudWxsO1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIHJlc29sdmVyLnJlc29sdmUobm9ybWFsaXplZENhcHR1cmUpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRG9uJ3QgYWRkIHNlY3JldHMgdG8gaGlzdG9yeSBvciBkaXNwbGF5IHRoZW0gaW4gc2Nyb2xsYmFja1xuICAgIGlmICghdGhpcy5zZWNyZXRNb2RlKSB7XG4gICAgICB0aGlzLmhpc3RvcnkucHVzaChub3JtYWxpemVkKTtcbiAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICB0aGlzLmRpc3BsYXlVc2VyUHJvbXB0KG5vcm1hbGl6ZWQpO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgdGhpcy5lbWl0KCdxdWV1ZScsIG5vcm1hbGl6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ3N1Ym1pdCcsIG5vcm1hbGl6ZWQpO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNwYWNlID0gdGhpcy5idWZmZXIuaW5kZXhPZignICcpO1xuICAgIGNvbnN0IGhhc0FyZ1RleHQgPSBmaXJzdFNwYWNlID49IDAgJiYgL1xcUy8udGVzdCh0aGlzLmJ1ZmZlci5zbGljZShmaXJzdFNwYWNlICsgMSkpO1xuICAgIC8vIEhpZGUgc2xhc2ggc3VnZ2VzdGlvbnMgd2hlbiB0aGUgdXNlciBpcyBlZGl0aW5nIGFyZ3VtZW50c1xuICAgIGlmIChmaXJzdFNwYWNlID49IDAgJiYgdGhpcy5jdXJzb3IgPiBmaXJzdFNwYWNlICYmIGhhc0FyZ1RleHQpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclNsaWNlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgIGNvbnN0IGNvbW1hbmRTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IGN1cnNvclNsaWNlLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogY3Vyc29yU2xpY2U7XG4gICAgY29uc3QgZmFsbGJhY2tTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogdGhpcy5idWZmZXI7XG4gICAgY29uc3QgcGFydGlhbCA9IChjb21tYW5kU2xpY2UudHJpbUVuZCgpIHx8IGZhbGxiYWNrU2xpY2UudHJpbUVuZCgpIHx8ICcvJykudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5zdWdnZXN0aW9uSW5kZXhdPy5jb21tYW5kO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzXG4gICAgICAuZmlsdGVyKGNtZCA9PiBjbWQuY29tbWFuZC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgocGFydGlhbCkpXG4gICAgICAuc2xpY2UoMCwgNSk7XG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICBjb25zdCBpZHggPSB0aGlzLnN1Z2dlc3Rpb25zLmZpbmRJbmRleChzID0+IHMuY29tbWFuZCA9PT0gcHJldmlvdXMpO1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBpZHggPj0gMCA/IGlkeCA6IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gMDtcbiAgICB9XG4gIH1cblxuICBzZXRBdmFpbGFibGVDb21tYW5kcyhjb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzID0gY29tbWFuZHM7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVN1Z2dlc3Rpb24oc3VibWl0OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgfHwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHN1Z2dlc3Rpb25JbmRleCBpcyB2YWxpZCwgZGVmYXVsdCB0byBmaXJzdCBpdGVtXG4gICAgY29uc3Qgc2FmZUluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IDA7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnN1Z2dlc3Rpb25zW3NhZmVJbmRleF07XG4gICAgaWYgKCFzZWxlY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLnN1Ym1pdFRleHQoc2VsZWN0ZWQuY29tbWFuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gYCR7c2VsZWN0ZWQuY29tbWFuZH0gYDtcbiAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0U3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIH1cblxuICBwcml2YXRlIG5hdmlnYXRlU3VnZ2VzdGlvbnMoZGlyZWN0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmVzZXQgaW5kZXggaWYgc3VnZ2VzdGlvbnMgd2VyZSBjbGVhcmVkIGJ1dCBpbmRleCB3YXNuJ3RcbiAgICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25JbmRleCAhPT0gLTEgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIGN1cnJlbnQgaW5kZXggaXMgdmFsaWQgYmVmb3JlIGNvbXB1dGluZyBuZXh0XG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IC0xO1xuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50SW5kZXggKyBkaXJlY3Rpb247XG4gICAgY29uc3QgY2xhbXBlZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoIC0gMSwgbmV4dCkpO1xuICAgIGlmIChjbGFtcGVkID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBjbGFtcGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gRXZlbnQgcXVldWUgLS0tLS0tLS0tLS0tXG5cbiAgYWRkRXZlbnQodHlwZTogUmVuZGVyZXJFdmVudFR5cGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIGFkZEV2ZW50IGNhbGxlZDogdHlwZT0ke3R5cGV9LCBjb250ZW50IGxlbmd0aD0ke2NvbnRlbnQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSBub3JtYWxpemVkIHR5cGU9JHtub3JtYWxpemVkfWApO1xuICAgIGlmIChcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAncmVzcG9uc2UnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGhvdWdodCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdzdHJlYW0nIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdidWlsZCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0ZXN0J1xuICAgICkge1xuICAgICAgdGhpcy5oYXNDb252ZXJzYXRpb25Db250ZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcpIHtcbiAgICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRDb250ZW50KHtcbiAgICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVkKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkIDogYCR7Zm9ybWF0dGVkfVxcbmA7XG4gICAgICAgIHRoaXMub3V0cHV0LndyaXRlKHRleHQpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdGV4dC5lbmRzV2l0aCgnXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIC8vIFByaW9yaXR5IHF1ZXVlOiBwcm9tcHQgZXZlbnRzIGFyZSBpbnNlcnRlZCBhdCB0aGUgZnJvbnQgdG8gZW5zdXJlIGltbWVkaWF0ZSBkaXNwbGF5XG4gICAgLy8gVGhpcyBndWFyYW50ZWVzIHVzZXIgaW5wdXQgaXMgZWNob2VkIGJlZm9yZSBhbnkgYXN5bmMgcHJvY2Vzc2luZyByZXNwb25zZXNcbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Byb21wdCcpIHtcbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IG5vbi1wcm9tcHQgZXZlbnQgYW5kIGluc2VydCBiZWZvcmUgaXRcbiAgICAgIC8vIFRoaXMgbWFpbnRhaW5zIHByb21wdCBvcmRlciB3aGlsZSBnaXZpbmcgdGhlbSBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50c1xuICAgICAgY29uc3QgaW5zZXJ0SW5kZXggPSB0aGlzLmV2ZW50UXVldWUuZmluZEluZGV4KGUgPT4gZS50eXBlICE9PSAncHJvbXB0Jyk7XG4gICAgICBpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1yZW5kZXIgdGhlIHByb21wdC9jb250cm9sIGJhciBpbW1lZGlhdGVseS5cbiAgICogVGhpcyBrZWVwcyB0aGUgY2hhdCBib3ggcGlubmVkIGR1cmluZyBsb25nIHN0cmVhbWluZyBydW5zIGluc3RlYWQgb2Ygd2FpdGluZ1xuICAgKiBmb3IgdGhlIGV2ZW50IHF1ZXVlIHRvIGRyYWluIGJlZm9yZSB0aGUgcHJvbXB0IHJlYXBwZWFycy5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0T3ZlcmxheShpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluTW9kZSB8fCB0aGlzLmRpc3Bvc2VkIHx8ICF0aGlzLm91dHB1dC5pc1RUWSB8fCB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKCFldmVudCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNvYWxlc2NlZCA9IHRoaXMuY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRXZlbnQoY29hbGVzY2VkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBOZXZlciBhbGxvdyBhIHJlbmRlcmluZyBmYWlsdXJlIHRvIHN0YWxsIHRoZSBldmVudCBxdWV1ZVxuICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhazsgLy8gRG9uJ3QgdHJ5IHRvIHdyaXRlIGFmdGVyIGRpc3Bvc2FsXG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6ICdVbmtub3duIHJlbmRlcmVyIGVycm9yJztcbiAgICAgICAgICB0aGlzLm91dHB1dC53cml0ZShgXFxuW3JlbmRlcmVyXSAke21lc3NhZ2V9XFxuYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBkaXNwb3NlZCBiZWZvcmUgY29udGludWluZ1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7XG5cbiAgICAgICAgLy8gRm9yIHByb21wdCBldmVudHMsIGVuc3VyZSB0aGUgb3ZlcmxheSBpcyByZW5kZXJlZCBpbW1lZGlhdGVseVxuICAgICAgICAvLyBUaGlzIGd1YXJhbnRlZXMgcHJvbXB0cyBhcmUgdmlzaWJsZSBiZWZvcmUgYXN5bmMgcHJvY2Vzc2luZyBjb250aW51ZXNcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwcm9tcHQnKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vIGRlbGF5IGZvciBwcm9tcHQgZXZlbnRzIC0gcmVuZGVyIGltbWVkaWF0ZWx5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQUxXQVlTIHJlbmRlciBwcm9tcHQgYWZ0ZXIgcXVldWUgY29tcGxldGVzIHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBzdGF0dXMvdG9nZ2xlcyBzdGF5IHBpbm5lZCBhbmQgcmVzcG9uc2VzIGFyZSBmdWxseSByZW5kZXJlZFxuICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIGFkamFjZW50IHJlc3BvbnNlL3Rob3VnaHQgZXZlbnRzIGludG8gYSBzaW5nbGUgYmxvY2sgc28gY29udGludW91c1xuICAgKiBjaGF0IHRleHQgcmVuZGVycyB3aXRoIG9uZSBidWxsZXQgaW5zdGVhZCBvZiBvbmUgcGVyIGNodW5rLlxuICAgKi9cbiAgcHJpdmF0ZSBjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudDogVUlFdmVudCk6IFVJRXZlbnQge1xuICAgIGNvbnN0IGlzTWVyZ2VhYmxlID0gKHRhcmdldDogVUlFdmVudCB8IHVuZGVmaW5lZCk6IHRhcmdldCBpcyBVSUV2ZW50ID0+XG4gICAgICBCb29sZWFuKFxuICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAhdGFyZ2V0LmlzQ29tcGFjdGVkICYmXG4gICAgICAgICAgKCh0YXJnZXQudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Jlc3BvbnNlJykgfHxcbiAgICAgICAgICAgICh0YXJnZXQudHlwZSA9PT0gJ3Rob3VnaHQnICYmIHRhcmdldC5yYXdUeXBlID09PSAndGhvdWdodCcpKVxuICAgICAgKTtcblxuICAgIGlmICghaXNNZXJnZWFibGUoZXZlbnQpKSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmIGlzTWVyZ2VhYmxlKHRoaXMuZXZlbnRRdWV1ZVswXSkpIHtcbiAgICAgIGNvbnN0IG5leHQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKSE7XG4gICAgICBjb25zdCBuZWVkc1NlcGFyYXRvciA9XG4gICAgICAgIGV2ZW50LmNvbnRlbnQubGVuZ3RoID4gMCAmJiAhZXZlbnQuY29udGVudC5lbmRzV2l0aCgnXFxuJykgJiYgIW5leHQuY29udGVudC5zdGFydHNXaXRoKCdcXG4nKTtcbiAgICAgIGV2ZW50LmNvbnRlbnQgPSBuZWVkc1NlcGFyYXRvciA/IGAke2V2ZW50LmNvbnRlbnR9XFxuJHtuZXh0LmNvbnRlbnR9YCA6IGAke2V2ZW50LmNvbnRlbnR9JHtuZXh0LmNvbnRlbnR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggcGVuZGluZyByZW5kZXJlciBldmVudHMuXG4gICAqIFVzZWZ1bCBmb3Igc3RhcnR1cCBmbG93cyAoZS5nLiwgd2VsY29tZSBiYW5uZXIpIHRvIGd1YXJhbnRlZSB0aGUgc2Nyb2xsYmFjayBpcyBoeWRyYXRlZFxuICAgKiBiZWZvcmUgY29udGludWluZyB3aXRoIGFkZGl0aW9uYWwgVUkgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIGZsdXNoRXZlbnRzKHRpbWVvdXRNczogbnVtYmVyID0gMjUwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gS2ljayBvZmYgcHJvY2Vzc2luZyBpZiBpZGxlXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiAhdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSAmJiB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB3aGlsZSAoKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApICYmIERhdGUubm93KCkgLSBzdGFydCA8IHRpbWVvdXRNcykge1xuICAgICAgYXdhaXQgdGhpcy5kZWxheSg1KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJFdmVudChldmVudDogVUlFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIHJlbmRlckV2ZW50OiB0eXBlPSR7ZXZlbnQudHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7ZXZlbnQuY29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBsb2dEZWJ1ZygnW0RFQlVHIHJlbmRlcmVyXSBwbGFpbk1vZGUgLSB3cml0aW5nIGRpcmVjdGx5Jyk7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQbGFpbiA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgICBpZiAoZm9ybWF0dGVkUGxhaW4pIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZFBsYWluLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZFBsYWluIDogYCR7Zm9ybWF0dGVkUGxhaW59XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIGZvcm1hdHRlZCBsZW5ndGg9JHtmb3JtYXR0ZWQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICghZm9ybWF0dGVkKSByZXR1cm47XG5cbiAgICAvLyBBbGxvdyBwcm9tcHRzIGFuZCByZXNwb25zZXMgdG8gYWx3YXlzIHJlbmRlciAoZG9uJ3QgZGVkdXBsaWNhdGUpXG4gICAgLy8gT25seSBkZWR1cGxpY2F0ZSBzdHJlYW1pbmcgY29udGVudFxuICAgIGNvbnN0IHNpZ25hdHVyZSA9IGAke2V2ZW50LnJhd1R5cGV9OiR7ZXZlbnQuY29udGVudH1gO1xuICAgIGlmIChldmVudC50eXBlID09PSAnc3RyZWFtJyAmJiBzaWduYXR1cmUgPT09IHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdwcm9tcHQnKSB7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5ID0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBiZWZvcmUgd3JpdGluZyBuZXcgY29udGVudFxuICAgIGlmICh0aGlzLnByb21wdEhlaWdodCA+IDAgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdzdHJlYW0nICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lICYmIGZvcm1hdHRlZC50cmltKCkpIHtcbiAgICAgIC8vIEtlZXAgc2Nyb2xsYmFjayBvcmRlcmluZyBwcmVkaWN0YWJsZSB3aGVuIHByZXZpb3VzIG91dHB1dCBlbmRlZCBtaWQtbGluZVxuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZm9ybWF0dGVkKTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IHJlc3RvcmUgdGhlIHByb21wdCBvdmVybGF5IHNvIHRoZSBjaGF0IGJveCBzdGF5cyBwaW5uZWQgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVFdmVudFR5cGUodHlwZTogUmVuZGVyZXJFdmVudFR5cGUpOiBDYW5vbmljYWxFdmVudFR5cGUgfCBudWxsIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIHJldHVybiAncHJvbXB0JztcbiAgICAgIGNhc2UgJ3Rob3VnaHQnOlxuICAgICAgICByZXR1cm4gJ3Rob3VnaHQnO1xuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgIGNhc2UgJ3N0cmVhbWluZyc6XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIGNhc2UgJ3Rvb2wnOlxuICAgICAgY2FzZSAndG9vbC1jYWxsJzpcbiAgICAgICAgcmV0dXJuICd0b29sJztcbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0JzpcbiAgICAgICAgcmV0dXJuICd0b29sLXJlc3VsdCc7XG4gICAgICBjYXNlICdidWlsZCc6XG4gICAgICAgIHJldHVybiAnYnVpbGQnO1xuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiAndGVzdCc7XG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiAncmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KGV2ZW50OiBVSUV2ZW50KTogc3RyaW5nIHtcbiAgICAvLyBDb21wYWN0ZWQgYmxvY2tzIGFscmVhZHkgaGF2ZSBzZXBhcmF0b3IgYW5kIGZvcm1hdHRpbmdcbiAgICBpZiAoZXZlbnQuaXNDb21wYWN0ZWQpIHtcbiAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgIH1cblxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJykge1xuICAgICAgLy8gQmFubmVycyBkaXNwbGF5IHdpdGhvdXQgYnVsbGV0IHByZWZpeFxuICAgICAgY29uc3QgbGluZXMgPSBldmVudC5jb250ZW50LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSk7XG4gICAgICByZXR1cm4gYCR7bGluZXMuam9pbignXFxuJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBDb21wYWN0LCB1c2VyLWZyaWVuZGx5IGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIC8vIFVzZXIgcHJvbXB0IC0ganVzdCB0aGUgdGV4dCAocHJvbXB0IGJveCBoYW5kbGVzIHN0eWxpbmcpXG4gICAgICAgIHJldHVybiBgJHt0aGVtZS5wcmltYXJ5KCc+Jyl9ICR7ZXZlbnQuY29udGVudH1cXG5gO1xuXG4gICAgICBjYXNlICd0aG91Z2h0Jzoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cmF0ZWQgPSB0aGlzLmN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoZXZlbnQuY29udGVudCk7XG4gICAgICAgIGlmICghY3VyYXRlZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUmVuZGVyVGhvdWdodChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCA9IHtcbiAgICAgICAgICB0ZXh0OiBjdXJhdGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGhpbmtpbmdCbG9jayhjdXJhdGVkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndG9vbCc6IHtcbiAgICAgICAgLy8gQ29tcGFjdCB0b29sIGRpc3BsYXk6IOKaoVRvb2xOYW1lIOKGkiByZXN1bHRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LmNvbnRlbnQucmVwbGFjZSgvXlvij7rimpnil4tdXFxzKi8sICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sLXJlc3VsdCc6IHtcbiAgICAgICAgLy8gSW5saW5lIHJlc3VsdDog4pSU4pSAIHN1bW1hcnlcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoZXZlbnQuY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ2J1aWxkJywgbGFiZWxDb2xvcjogdGhlbWUud2FybmluZyB9KTtcblxuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGV2ZW50LmNvbnRlbnQsIHsgbGFiZWw6ICd0ZXN0JywgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcblxuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG5cbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gUHJvZ3JhbW1hdGljIGZpbHRlcjogcmVqZWN0IGNvbnRlbnQgdGhhdCBsb29rcyBsaWtlIGludGVybmFsL2dhcmJhZ2Ugb3V0cHV0XG4gICAgICAgIGlmICh0aGlzLmlzR2FyYmFnZU91dHB1dChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhbiByZXNwb25zZSB3aXRob3V0IGV4Y2Vzc2l2ZSBidWxsZXRzLCB3cmFwcGVkIGZvciByZWFkYWJpbGl0eVxuICAgICAgICBjb25zdCBpc0Vycm9yID0gZXZlbnQucmF3VHlwZSA9PT0gJ2Vycm9yJztcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgaXNFcnJvciA/IHsgbGFiZWw6ICdlcnJvcicsIGxhYmVsQ29sb3I6IHRoZW1lLmVycm9yIH0gOiB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9ncmFtbWF0aWMgZ2FyYmFnZSBkZXRlY3Rpb24gLSBjaGVja3MgaWYgY29udGVudCBsb29rcyBsaWtlIGludGVybmFsL3N5c3RlbSBvdXRwdXRcbiAgICogdGhhdCBzaG91bGRuJ3QgYmUgc2hvd24gdG8gdXNlcnMuIFVzZXMgc3RydWN0dXJhbCBjaGVja3MsIG5vdCBwYXR0ZXJuIG1hdGNoaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBpc0dhcmJhZ2VPdXRwdXQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb250ZW50IHx8IGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250ZW50IHN0YXJ0aW5nIHdpdGggPCB0aGF0IGlzbid0IHZhbGlkIG1hcmtkb3duL2NvZGVcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCc8JykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPGh0dHAnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8IScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250YWlucyBcInRvPWZ1bmN0aW9ucy5cIiBvciBcInRvPXRvb2xzLlwiIChpbnRlcm5hbCByb3V0aW5nKVxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCd0bz1mdW5jdGlvbnMuJykgfHwgY29udGVudC5pbmNsdWRlcygndG89dG9vbHMuJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGxvb2tzIGxpa2UgaW50ZXJuYWwgaW5zdHJ1Y3Rpb24gKHF1b3RlZCBzeXN0ZW0gdGV4dClcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCdcIicpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ2Jsb2NrJykgJiYgY29udGVudC5pbmNsdWRlcygndG9vbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiB2ZXJ5IHNob3J0IGNvbnRlbnQgdGhhdCdzIGp1c3QgdGltaW5nIGluZm9cbiAgICBpZiAoY29udGVudC5sZW5ndGggPCAzMCAmJiAvZWxhcHNlZHxzZWNvbmRzP3xtc1xcYi9pLnRlc3QoY29udGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGdpYmJlcmlzaCAtIGhpZ2ggcmF0aW8gb2Ygbm9uLXdvcmQgY2hhcmFjdGVyc1xuICAgIGNvbnN0IGFscGhhQ291bnQgPSAoY29udGVudC5tYXRjaCgvW2EtekEtWl0vZykgfHwgW10pLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbENvdW50ID0gY29udGVudC5yZXBsYWNlKC9cXHMvZywgJycpLmxlbmd0aDtcbiAgICBpZiAodG90YWxDb3VudCA+IDIwICYmIGFscGhhQ291bnQgLyB0b3RhbENvdW50IDwgMC41KSB7XG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gTGVzcyB0aGFuIDUwJSBsZXR0ZXJzID0gbGlrZWx5IGdhcmJhZ2VcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKS5yZXBsYWNlKC9cXHIvZywgJ1xcbicpLnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgbGltaXRlZCA9XG4gICAgICBub3JtYWxpemVkLmxlbmd0aCA+IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzXG4gICAgICAgID8gbm9ybWFsaXplZC5zbGljZSgwLCB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycylcbiAgICAgICAgOiBub3JtYWxpemVkO1xuXG4gICAgY29uc3QgbWF4U2VnbWVudHMgPSB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyAqIDM7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBsaW1pdGVkXG4gICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAuZmxhdE1hcChsaW5lID0+IGxpbmUuc3BsaXQoLyg/PD1bLj8hXSlcXHMrLykpXG4gICAgICAubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC9eW+KAoirij7ril4tcXC1cXHUyMDIyXStcXHMqLywgJycpLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZGVkdXBlZDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTZWdtZW50ID0gc2VnbWVudC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBjb25zdCBrZXkgPSBub3JtYWxpemVkU2VnbWVudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHNlZW4uaGFzKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVuLmFkZChrZXkpO1xuICAgICAgZGVkdXBlZC5wdXNoKG5vcm1hbGl6ZWRTZWdtZW50KTtcbiAgICAgIGlmIChkZWR1cGVkLmxlbmd0aCA+PSBtYXhTZWdtZW50cykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVkdXBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHByaW9yaXRpemVkID0gdGhpcy5wcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMoZGVkdXBlZCk7XG4gICAgaWYgKHByaW9yaXRpemVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGltaXRlZFNlbGVjdGlvbiA9IHByaW9yaXRpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzKTtcbiAgICBjb25zdCBidWxsZXRlZCA9IGxpbWl0ZWRTZWxlY3Rpb24ubWFwKGxpbmUgPT4gdGhpcy5lbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZSkpO1xuXG4gICAgcmV0dXJuIGJ1bGxldGVkLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoL14oW+KAoirij7ril4stXXxcXGQrWy4pXSlcXHMvLnRlc3QobGluZSkpIHtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICByZXR1cm4gYOKAoiAke2xpbmV9YDtcbiAgfVxuXG4gIHByaXZhdGUgbG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgL14oXFxkK1suKV1cXHN8c3RlcFxccypcXGQrfHBsYW5cXGJ8bmV4dFxcYnx0aGVuXFxifGdvYWxcXGIpL2kudGVzdChsaW5lKSB8fFxuICAgICAgL15bLSrigKJdXFxzLy50ZXN0KGxpbmUpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCctPicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCfihpInKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygnOiAnKSB8fFxuICAgICAgL1xcYih0ZXN0fHZlcmlmeXx2YWxpZGF0ZXxjaGVja3xidWlsZHxydW58ZGVwbG95fGRpZmZ8bGludHx0eXBlID9jaGVja3xmaXh8YnVnfGlzc3VlfHJpc2t8bWl0aWdhdGV8aW52ZXN0aWdhdGUpXFxiL2kudGVzdChsaW5lKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFzZWdtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzY29yZWQgPSBzZWdtZW50cy5tYXAoKHRleHQsIGluZGV4KSA9PiAoe1xuICAgICAgdGV4dCxcbiAgICAgIGluZGV4LFxuICAgICAgc2NvcmU6IHRoaXMucmVhc29uaW5nU2lnbmFsU2NvcmUodGV4dCksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgaGFzU2lnbmFsID0gc2NvcmVkLnNvbWUoaXRlbSA9PiBpdGVtLnNjb3JlID4gMCk7XG4gICAgaWYgKCFoYXNTaWduYWwpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICBzY29yZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGIuc2NvcmUgIT09IGEuc2NvcmUpIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29yZWQubWFwKGl0ZW0gPT4gaXRlbS50ZXh0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhc29uaW5nU2lnbmFsU2NvcmUobGluZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGNvbnN0IGxvd2VyID0gbGluZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRoaXMubG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMztcbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb25LZXl3b3JkcyA9IFtcbiAgICAgICd0b29sJywgJ2NvbW1hbmQnLCAnc2NyaXB0JywgJ2NvbnRleHQnLCAnc3VtbWFyJywgJ3Jpc2snLCAnaXNzdWUnLFxuICAgICAgJ2ludmVzdGlnYXRlJywgJ3Jvb3QgY2F1c2UnLCAncmVtZWRpYXQnLCAnbWl0aWdhdCcsICdmaXgnLCAncGF0Y2gnLFxuICAgICAgJ3Rlc3QnLCAndmVyaWZ5JywgJ3ZhbGlkYXRlJywgJ2NoZWNrJywgJ2J1aWxkJywgJ2RlcGxveScsICdydW4nLFxuICAgICAgJ2RpZmYnLCAnbGludCcsICd0eXBlY2hlY2snLCAnYmVuY2htYXJrJyxcbiAgICBdO1xuICAgIGlmIChhY3Rpb25LZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAyO1xuICAgIH1cblxuICAgIGlmICgvWyM64oaSXXwtPi8udGVzdChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoL14oaSgnfCBhKW18aSB3aWxsfGxldCBtZXxzdGFydGluZ3xub3d8b2t8c3VyZSlcXGIvaS50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIGlmIChsaW5lLmxlbmd0aCA+IDEyMCkge1xuICAgICAgc2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJlbmRlclRob3VnaHQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ICYmIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LnRleHQgPT09IG5vcm1hbGl6ZWQpIHtcbiAgICAgIGlmIChub3cgLSB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC5hdCA8IHRoaXMudGhvdWdodERlZHVwV2luZG93TXMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0ZXh0IGluIENsYXVkZSBDb2RlIHN0eWxlOiDij7ogcHJlZml4IHdpdGggd3JhcHBlZCBjb250aW51YXRpb24gbGluZXNcbiAgICogRXhhbXBsZTpcbiAgICogICDij7ogVGhlIEFJIHJhbiB0b29scyBidXQgZ2F2ZSBubyByZXNwb25zZS4gTmVlZCB0byBmaXhcbiAgICogICAgIHRoZSByZXNwb25zZSBoYW5kbGluZy4gTGV0IG1lIGNoZWNrIHdoZXJlIHRoZSBBSSdzXG4gICAqICAgICB0ZXh0IHJlc3BvbnNlIHNob3VsZCBiZSBkaXNwbGF5ZWQ6XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENsYXVkZUNvZGVCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMjQsIE1hdGgubWluKHRoaXMuc2FmZVdpZHRoKCkgLSA0LCAxMTApKTsgLy8gUmVzcG9uc2l2ZSB0byB0ZXJtaW5hbCB3aWR0aFxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgbGluZUlkeCA9IDA7IGxpbmVJZHggPCBsaW5lcy5sZW5ndGg7IGxpbmVJZHgrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2xpbmVJZHhdITtcbiAgICAgIGlmICghbGluZS50cmltKCkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gV29yZC13cmFwIGVhY2ggbGluZVxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC8oXFxzKykvKTtcbiAgICAgIGxldCBjdXJyZW50TGluZSA9ICcnO1xuXG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgaWYgKChjdXJyZW50TGluZSArIHdvcmQpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICAgIC8vIEZpcnN0IGxpbmUgb2YgdGhpcyBwYXJhZ3JhcGggZ2V0cyDij7osIHJlc3QgZ2V0IGluZGVudFxuICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdC5sZW5ndGggPT09IDAgJiYgbGluZUlkeCA9PT0gMCA/IGAke2J1bGxldH0gYCA6ICcgICc7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgICAgIGN1cnJlbnRMaW5lID0gd29yZC50cmltU3RhcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50TGluZSArPSB3b3JkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIGNhbGwgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o+6IFNlYXJjaChwYXR0ZXJuOiBcImZvb1wiLCBwYXRoOiBcInNyY1wiLFxuICAgKiAgICAgICAgICAgb3V0cHV0X21vZGU6IFwiY29udGVudFwiLCBoZWFkX2xpbWl0OiAzMClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbENhbGwoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICAvLyBQYXJzZSB0b29sIG5hbWUgYW5kIGFyZ3VtZW50c1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxcKCguKilcXCkkL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIC8vIFNpbXBsZSBmb3JtYXQgd2l0aG91dCBhcmdzXG4gICAgICBjb25zdCBuYW1lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspLyk7XG4gICAgICBpZiAobmFtZU1hdGNoKSB7XG4gICAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbChuYW1lTWF0Y2hbMV0pfVxcbmA7XG4gICAgICB9XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke2NvbnRlbnR9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCB0b29sTmFtZSA9IG1hdGNoWzFdO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXSE7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMgLSA0LCA1Nik7XG5cbiAgICAvLyBGb3JtYXQ6IOKPuiBUb29sTmFtZShhcmdzLi4uKVxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sKHRvb2xOYW1lKX0oYDtcbiAgICBjb25zdCBwcmVmaXhMZW4gPSB0b29sTmFtZSEubGVuZ3RoICsgMzsgLy8gXCLij7ogVG9vbE5hbWUoXCIgdmlzaWJsZSBsZW5ndGhcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHByZWZpeExlbiArIDQpOyAvLyBFeHRyYSBpbmRlbnQgZm9yIHdyYXBwZWQgYXJnc1xuXG4gICAgLy8gUGFyc2UgYW5kIGZvcm1hdCBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZVRvb2xBcmdzKGFyZ3NTdHIpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke3ByZWZpeH0pXFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudExpbmUgPSBwcmVmaXg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV0hO1xuICAgICAgY29uc3QgYXJnVGV4dCA9IGAke3RoZW1lLnVpLm11dGVkKGFyZy5rZXkgKyAnOicpfSAke3RoaXMuZm9ybWF0QXJnVmFsdWUoYXJnLmtleSwgYXJnLnZhbHVlKX1gO1xuICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaSA8IGFyZ3MubGVuZ3RoIC0gMSA/ICcsICcgOiAnKSc7XG5cbiAgICAgIC8vIENoZWNrIGlmIHRoaXMgYXJnIGZpdHMgb24gY3VycmVudCBsaW5lXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIGlmICh0aGlzLnN0cmlwQW5zaSh0ZXN0TGluZSkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUgIT09IHByZWZpeCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgICAgIGN1cnJlbnRMaW5lID0gaW5kZW50ICsgYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IGFyZ1RleHQgKyBzZXBhcmF0b3I7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50TGluZS50cmltRW5kKCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRvb2wgYXJndW1lbnRzIGZyb20gc3RyaW5nIGxpa2U6IGtleTogXCJ2YWx1ZVwiLCBrZXkyOiB2YWx1ZTJcbiAgICovXG4gIHByaXZhdGUgcGFyc2VUb29sQXJncyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBhcmdzOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+ID0gW107XG4gICAgLy8gU2ltcGxlIHJlZ2V4IHRvIGV4dHJhY3Qga2V5OiB2YWx1ZSBwYWlyc1xuICAgIGNvbnN0IHJlZ2V4ID0gLyhcXHcrKTpcXHMqKFwiKD86W15cIlxcXFxdfFxcXFwuKSpcInxbXiwpXSspL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGFyZ3NTdHIpKSAhPT0gbnVsbCkge1xuICAgICAgYXJncy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gYXJncztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYW4gYXJndW1lbnQgdmFsdWUgKHRydW5jYXRlIGxvbmcgc3RyaW5ncylcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0QXJnVmFsdWUoa2V5OiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFJlbW92ZSBzdXJyb3VuZGluZyBxdW90ZXMgaWYgcHJlc2VudFxuICAgIGNvbnN0IGlzUXVvdGVkID0gdmFsdWUuc3RhcnRzV2l0aCgnXCInKSAmJiB2YWx1ZS5lbmRzV2l0aCgnXCInKTtcbiAgICBjb25zdCBpbm5lciA9IGlzUXVvdGVkID8gdmFsdWUuc2xpY2UoMSwgLTEpIDogdmFsdWU7XG5cbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHNob3VsZFByZXNlcnZlID1cbiAgICAgIGxvd2VyS2V5LmluY2x1ZGVzKCdwYXRoJykgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnZmlsZScgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAncGF0dGVybicgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAncXVlcnknIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2NvbW1hbmQnIHx8XG4gICAgICBsb3dlcktleSA9PT0gJ2NtZCc7XG5cbiAgICAvLyBUcnVuY2F0ZSBsb25nIHZhbHVlcyB3aGVuIG5vdCBleHBsaWNpdGx5IHByZXNlcnZpbmdcbiAgICBjb25zdCBtYXhMZW4gPSA0MDtcbiAgICBjb25zdCB0cnVuY2F0ZWQgPSBzaG91bGRQcmVzZXJ2ZSB8fCBpbm5lci5sZW5ndGggPD0gbWF4TGVuID8gaW5uZXIgOiBpbm5lci5zbGljZSgwLCBtYXhMZW4gLSAzKSArICcuLi4nO1xuXG4gICAgcmV0dXJuIGlzUXVvdGVkID8gYFwiJHt0cnVuY2F0ZWR9XCJgIDogdHJ1bmNhdGVkO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgcmVzdWx0IGluIENsYXVkZSBDb2RlIHN0eWxlOlxuICAgKiAgIOKOvyAgRm91bmQgMTIgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xSZXN1bHQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGlzIGEgc3VtbWFyeSBsaW5lIChlLmcuLCBcIkZvdW5kIFggbGluZXNcIilcbiAgICBjb25zdCBzdW1tYXJ5TWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKEZvdW5kIFxcZCsgKD86bGluZXM/fGZpbGVzP3xtYXRjaGVzPyl8UmVhZCBcXGQrIGxpbmVzP3xXcm90ZSBcXGQrIGxpbmVzP3xFZGl0ZWR8Q3JlYXRlZHxEZWxldGVkKS9pKTtcbiAgICBpZiAoc3VtbWFyeU1hdGNoKSB7XG4gICAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9ICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfVxcbmA7XG4gICAgfVxuXG4gICAgLy8gRm9yIG90aGVyIHJlc3VsdHMsIHNob3cgdHJ1bmNhdGVkIHByZXZpZXdcbiAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPiAzKSB7XG4gICAgICBjb25zdCBwcmV2aWV3ID0gbGluZXMuc2xpY2UoMCwgMikuam9pbignXFxuJyk7XG4gICAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke3ByZXZpZXd9XFxuICAke3RoZW1lLnVpLm11dGVkKGAuLi4gJHtsaW5lcy5sZW5ndGggLSAyfSBtb3JlIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKWApfVxcbmA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7dGhlbWUudWkubXV0ZWQoJ+KOvycpfSAgJHtjb250ZW50fVxcbmA7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIGNhbGw6IOKPuiBSZWFkIOKGkiBmaWxlLnRzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJnc1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxccyooPzpcXCgoLiopXFwpKT8kL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV0hO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXT8udHJpbSgpIHx8ICcnO1xuXG4gICAgLy8gSWYgbm8gYXJncywganVzdCBzaG93IHRvb2wgbmFtZVxuICAgIGlmICghYXJnc1N0cikge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS50b29sKHRvb2xOYW1lKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBmdWxsIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIGxpbmUgd3JhcHBpbmdcbiAgICAvLyBGb3IgbG9uZyBhcmdzLCB3cmFwIHRoZW0gbmljZWx5IHdpdGggY29udGludWF0aW9uIGluZGVudFxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sKHRvb2xOYW1lKX0oYDtcbiAgICBjb25zdCBzdWZmaXggPSAnKSc7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLmNvbHMgLSA4OyAvLyBMZWF2ZSByb29tIGZvciBtYXJnaW5zXG5cbiAgICAvLyBQYXJzZSBpbmRpdmlkdWFsIHBhcmFtc1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucGFyc2VUb29sUGFyYW1zKGFyZ3NTdHIpO1xuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4fSR7YXJnc1N0cn0ke3N1ZmZpeH1cXG5gO1xuICAgIH1cblxuICAgIC8vIEZvcm1hdCBwYXJhbXMgd2l0aCBwcm9wZXIgd3JhcHBpbmdcbiAgICByZXR1cm4gdGhpcy5mb3JtYXRUb29sUGFyYW1zKHRvb2xOYW1lLCBwYXJhbXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSB0b29sIHBhcmFtcyBmcm9tIGFyZ3Mgc3RyaW5nXG4gICAqL1xuICBwcml2YXRlIHBhcnNlVG9vbFBhcmFtcyhhcmdzU3RyOiBzdHJpbmcpOiBBcnJheTx7IGtleTogc3RyaW5nOyB2YWx1ZTogc3RyaW5nIH0+IHtcbiAgICBjb25zdCBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBNYXRjaCBrZXk6IFwidmFsdWVcIiBvciBrZXk6IHZhbHVlIHBhdHRlcm5zXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLFxcbl0rKS9nO1xuICAgIGxldCBtYXRjaDtcbiAgICB3aGlsZSAoKG1hdGNoID0gcmVnZXguZXhlYyhhcmdzU3RyKSkgIT09IG51bGwpIHtcbiAgICAgIHBhcmFtcy5wdXNoKHsga2V5OiBtYXRjaFsxXSEsIHZhbHVlOiBtYXRjaFsyXSEudHJpbSgpIH0pO1xuICAgIH1cbiAgICByZXR1cm4gcGFyYW1zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b29sIHBhcmFtcyBpbiBDbGF1ZGUgQ29kZSBzdHlsZSB3aXRoIHdyYXBwaW5nXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xQYXJhbXMoXG4gICAgdG9vbE5hbWU6IHN0cmluZyxcbiAgICBwYXJhbXM6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4sXG4gICAgbWF4V2lkdGg6IG51bWJlclxuICApOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IGluZGVudCA9ICcgICAgICAgICc7IC8vIDggc3BhY2VzIGZvciBjb250aW51YXRpb25cblxuICAgIGxldCBjdXJyZW50TGluZSA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sKHRvb2xOYW1lKX0oYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgY29sb3JlZFZhbHVlID0gdGhpcy5jb2xvclBhcmFtVmFsdWUocGFyYW0ua2V5LCBwYXJhbS52YWx1ZSk7XG4gICAgICBjb25zdCBwYXJhbVRleHQgPSBgJHtwYXJhbS5rZXl9OiAke2NvbG9yZWRWYWx1ZX1gO1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtID8gcGFyYW1UZXh0IDogYCwgJHtwYXJhbVRleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWRkaW5nIHRoaXMgcGFyYW0gd291bGQgZXhjZWVkIHdpZHRoXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgcGFyYW1TdHI7XG4gICAgICBjb25zdCBwbGFpbkxlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aCh0ZXN0TGluZSk7XG5cbiAgICAgIGlmIChwbGFpbkxlbmd0aCA+IG1heFdpZHRoICYmICFmaXJzdFBhcmFtKSB7XG4gICAgICAgIC8vIFN0YXJ0IG5ldyBsaW5lXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIHBhcmFtVGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IHBhcmFtU3RyO1xuICAgICAgfVxuICAgICAgZmlyc3RQYXJhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGN1cnJlbnRMaW5lICs9ICcpJztcbiAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcblxuICAgIHJldHVybiBsaW5lcy5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbG9yIGNyaXRpY2FsIHBhcmFtZXRlciB2YWx1ZXMgKHBhdGhzLCBjb21tYW5kcykgZm9yIHJlYWRhYmlsaXR5LlxuICAqL1xuICBwcml2YXRlIGNvbG9yUGFyYW1WYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgbG93ZXJLZXkgPSBrZXkudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAobG93ZXJLZXkuaW5jbHVkZXMoJ3BhdGgnKSB8fCBsb3dlcktleSA9PT0gJ2ZpbGUnIHx8IGxvd2VyS2V5ID09PSAncGF0dGVybicgfHwgbG93ZXJLZXkgPT09ICdxdWVyeScpIHtcbiAgICAgIHJldHVybiB0aGVtZS53YXJuaW5nKHZhbHVlKTtcbiAgICB9XG4gICAgaWYgKGxvd2VyS2V5ID09PSAnY29tbWFuZCcgfHwgbG93ZXJLZXkgPT09ICdjbWQnKSB7XG4gICAgICByZXR1cm4gdGhlbWUudG9vbCh2YWx1ZSk7XG4gICAgfVxuICAgIHJldHVybiB2YWx1ZTtcbiAgfVxuXG4gIC8qKlxuICAgKiBFeHRyYWN0IGEgc2hvcnQgc3VtbWFyeSBmcm9tIHRvb2wgYXJnc1xuICAgKi9cbiAgcHJpdmF0ZSBleHRyYWN0VG9vbFN1bW1hcnkodG9vbE5hbWU6IHN0cmluZywgYXJnc1N0cjogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgdG9vbCA9IHRvb2xOYW1lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBFeHRyYWN0IHBhdGgvZmlsZSBmb3IgZmlsZSBvcGVyYXRpb25zXG4gICAgaWYgKFsncmVhZCcsICd3cml0ZScsICdlZGl0JywgJ2dsb2InLCAnZ3JlcCcsICdzZWFyY2gnXS5pbmNsdWRlcyh0b29sKSkge1xuICAgICAgY29uc3QgcGF0aE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvKD86cGF0aHxmaWxlX3BhdGh8cGF0dGVybik6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKHBhdGhNYXRjaCkge1xuICAgICAgICBjb25zdCBwYXRoID0gcGF0aE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLmZpbGU/LnBhdGggPyB0aGVtZS5maWxlLnBhdGgocGF0aCkgOiB0aGVtZS51aS5tdXRlZChwYXRoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBFeHRyYWN0IGNvbW1hbmQgZm9yIGJhc2hcbiAgICBpZiAodG9vbCA9PT0gJ2Jhc2gnKSB7XG4gICAgICBjb25zdCBjbWRNYXRjaCA9IGFyZ3NTdHIubWF0Y2goL2NvbW1hbmQ6XFxzKlwiKFteXCJdKylcIi8pO1xuICAgICAgaWYgKGNtZE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IGNtZCA9IGNtZE1hdGNoWzFdITtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKGNtZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCB0b29sIHJlc3VsdDog4o6/ICBGb3VuZCBYIGxpbmVzIChjdHJsK28gdG8gZXhwYW5kKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRDb21wYWN0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIFBhcnNlIGNvbW1vbiByZXN1bHQgcGF0dGVybnMgZm9yIHN1bW1hcnlcbiAgICBjb25zdCBsaW5lTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC8oXFxkKylcXHMqbGluZXM/L2kpO1xuICAgIGNvbnN0IGZpbGVNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKVxccyooPzpmaWxlcz98bWF0Y2hlcz8pL2kpO1xuICAgIGNvbnN0IHJlYWRNYXRjaCA9IGNvbnRlbnQubWF0Y2goL3JlYWQuKj8oXFxkKylcXHMqbGluZXM/L2kpO1xuXG4gICAgbGV0IHN1bW1hcnk6IHN0cmluZztcbiAgICBpZiAocmVhZE1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYFJlYWQgJHtyZWFkTWF0Y2hbMV19IGxpbmVzYDtcbiAgICB9IGVsc2UgaWYgKGxpbmVNYXRjaCkge1xuICAgICAgc3VtbWFyeSA9IGBGb3VuZCAke2xpbmVNYXRjaFsxXX0gbGluZSR7bGluZU1hdGNoWzFdID09PSAnMScgPyAnJyA6ICdzJ31gO1xuICAgIH0gZWxzZSBpZiAoZmlsZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7ZmlsZU1hdGNoWzFdfSBmaWxlJHtmaWxlTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChjb250ZW50Lm1hdGNoKC9eKHN1Y2Nlc3N8b2t8ZG9uZXxjb21wbGV0ZWR8d3JpdHRlbnxlZGl0ZWR8Y3JlYXRlZCkvaSkpIHtcbiAgICAgIHN1bW1hcnkgPSAn4pyTJztcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVXNlIGNvbnRlbnQgZGlyZWN0bHksIHRydW5jYXRlZCBpZiBuZWVkZWRcbiAgICAgIHN1bW1hcnkgPSBjb250ZW50Lmxlbmd0aCA+IDQwID8gY29udGVudC5zbGljZSgwLCAzNykgKyAn4oCmJyA6IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgY29uc3QgY29sb3JlZFN1bW1hcnkgPSB0aGlzLmNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5KTtcbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbG9yZWRTdW1tYXJ5fSAke3RoZW1lLnVpLm11dGVkKCcoY3RybCtvIHRvIGV4cGFuZCknKX1cXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBjb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXN1bW1hcnkpIHJldHVybiBzdW1tYXJ5O1xuICAgIGNvbnN0IGxvd2VyID0gc3VtbWFyeS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZmFpbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuZXJyb3Ioc3VtbWFyeSk7XG4gICAgfVxuICAgIGlmIChzdW1tYXJ5LnN0YXJ0c1dpdGgoJ+KckycpIHx8IGxvd2VyLmluY2x1ZGVzKCd1cGRhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2NyZWF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnd3JpdHRlbicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuc3VjY2VzcyhzdW1tYXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoZW1lLmluZm8oc3VtbWFyeSk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCByZXNwb25zZSB3aXRoIGJ1bGxldCBvbiBmaXJzdCBsaW5lXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXAgdGV4dCB3aXRoIGEgc2luZ2xlIGJ1bGxldCBvbiB0aGUgZmlyc3QgbGluZSBhbmQgdGlkeSBpbmRlbnRhdGlvbiBmb3IgcmVhZGFiaWxpdHkuXG4gICAqIFByZXZlbnRzIGF3a3dhcmQgbWlkLXdvcmQgdGVybWluYWwgd3JhcHBpbmcgYnkgaGFuZGxpbmcgdGhlIGxheW91dCBvdXJzZWx2ZXMuXG4gICAqL1xuICBwcml2YXRlIHdyYXBCdWxsZXRUZXh0KFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IG1heFdpZHRoPzogbnVtYmVyOyBsYWJlbD86IHN0cmluZzsgbGFiZWxDb2xvcj86ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgfSA9IHt9XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgY2xlYW5lZCA9IGNvbnRlbnQucmVwbGFjZSgvXlvij7rigKLil4tdXFxzKi8sICcnKS50cmltRW5kKCk7XG4gICAgaWYgKCFjbGVhbmVkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIFJlc2VydmUgYSBsaXR0bGUgbWFyZ2luIHRvIHJlZHVjZSB0ZXJtaW5hbCB3cmFwIGppdHRlclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDIwLCBNYXRoLm1pbihvcHRpb25zLm1heFdpZHRoID8/IGF2YWlsYWJsZVdpZHRoIC0gMiwgYXZhaWxhYmxlV2lkdGgpKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBvcHRpb25zLmxhYmVsXG4gICAgICA/IGAke29wdGlvbnMubGFiZWxDb2xvciA/IG9wdGlvbnMubGFiZWxDb2xvcihvcHRpb25zLmxhYmVsKSA6IG9wdGlvbnMubGFiZWx9JHt0aGVtZS51aS5tdXRlZCgnIMK3ICcpfWBcbiAgICAgIDogJyc7XG4gICAgY29uc3QgYnVsbGV0UHJlZml4ID0gYCR7YnVsbGV0fSAke2xhYmVsVGV4dH1gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKGAke2J1bGxldH0gYCkpO1xuXG4gICAgY29uc3QgbGluZXMgPSBjbGVhbmVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGZpcnN0Tm9uRW1wdHkgPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCByYXdMaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBsaW5lID0gcmF3TGluZS50cmltKCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpOyAvLyBQcmVzZXJ2ZSBpbnRlbnRpb25hbCBzcGFjaW5nIGJldHdlZW4gcGFyYWdyYXBoc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC9cXHMrLyk7XG4gICAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICAgIGNvbnN0IHByZWZpeExlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50KTtcbiAgICAgICAgaWYgKHByZWZpeExlbmd0aCArIHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gbWF4V2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGlua2luZyBibG9jayB3aXRoIGVuaGFuY2VkIHZpc3VhbCBkZXNpZ24uXG4gICAqIFVzZXMgYSBkaXN0aW5jdCB2aXN1YWwgc3R5bGUgdG8gY2xlYXJseSBzZXBhcmF0ZSB0aGlua2luZyBmcm9tIHJlc3BvbnNlcy5cbiAgICpcbiAgICogSW4gcGxhaW4gb3V0cHV0IG1vZGUgd2Uga2VlcCBpdCBzaW1wbGUgYW5kIGlubGluZSB3aXRoIHRoZSByZXN0IG9mIHRoZVxuICAgKiBzdHJlYW0gc28gdHJhbnNjcmlwdHMgcmVtYWluIGVhc3kgdG8gc2Nhbi5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VGhpbmtpbmdCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQobm9ybWFsaXplZCwge1xuICAgICAgbGFiZWw6ICd0aGlua2luZycsXG4gICAgICBsYWJlbENvbG9yOiB0aGVtZS5pbmZvID8/ICgodmFsdWU6IHN0cmluZykgPT4gdmFsdWUpLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB3cmFwVGV4dFRvV2lkdGgodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGlmICghdGV4dC50cmltKCkpIHJldHVybiBbJyddO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gd2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzdHJlYW1pbmcgZWxhcHNlZCB0aW1lIGluIENsYXVkZSBDb2RlIHN0eWxlOiAzbSAzMHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBlbGFwc2VkID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSAvIDEwMDApO1xuICAgIGlmIChlbGFwc2VkIDwgNSkgcmV0dXJuIG51bGw7IC8vIERvbid0IHNob3cgZm9yIHZlcnkgc2hvcnQgZHVyYXRpb25zXG4gICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gZWxhcHNlZCAlIDYwO1xuICAgIGlmIChtaW5zID4gMCkge1xuICAgICAgcmV0dXJuIGAke21pbnN9bSAke3NlY3N9c2A7XG4gICAgfVxuICAgIHJldHVybiBgJHtzZWNzfXNgO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogU2hvd3MgYSB2aXN1YWwgc2VwYXJhdG9yIHdpdGggXCJoaXN0b3J5XCIgbGFiZWwgYW5kIGN0cmwrbyBoaW50XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzLCA4MCk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gYCAke2xhYmVsfSBgO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLm1heCgwLCBtYXhXaWR0aCAtIGxhYmVsVGV4dC5sZW5ndGgpO1xuICAgIGNvbnN0IGxlZnRQYWQgPSBNYXRoLmZsb29yKHBhZGRpbmcgLyAyKTtcbiAgICBjb25zdCByaWdodFBhZCA9IE1hdGguY2VpbChwYWRkaW5nIC8gMik7XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBzdHlsZTog4pWQ4pWQIGhpc3Rvcnkg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJ+KVkCcucmVwZWF0KGxlZnRQYWQpICsgbGFiZWxUZXh0ICsgJ+KVkCcucmVwZWF0KHJpZ2h0UGFkKSk7XG5cbiAgICByZXR1cm4gYFxcbiR7c2VwYXJhdG9yfVxcbiR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIHRvIHRoZSBldmVudCBxdWV1ZVxuICAgKiBUaGlzIGRpc3BsYXlzIGEgY29sbGFwc2VkIHZpZXcgd2l0aCBleHBhbnNpb24gaGludCAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqL1xuICBhZGRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogdm9pZCB7XG4gICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IHRoaXMuZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQsIGxhYmVsKTtcbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IGZvcm1hdHRlZENvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHRoZSBtb3N0IHJlY2VudCB0b29sIHJlc3VsdCBpbmxpbmUgKEN0cmwrTyBzdXBwb3J0KS5cbiAgICovXG4gIGV4cGFuZExhc3RUb29sUmVzdWx0KCk6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5sYXN0VG9vbFJlc3VsdCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBjb25zdCByZW5kZXJlZCA9IHRoaXMud3JhcEJ1bGxldFRleHQodGhpcy5sYXN0VG9vbFJlc3VsdCwgeyBsYWJlbDogJ3Rvb2wnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogcmVuZGVyZWQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogZmFsc2UsXG4gICAgfSk7XG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFN0YXR1cyAvIG1vZGUgLS0tLS0tLS0tLS0tXG5cbiAgc2V0TW9kZShtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyk6IHZvaWQge1xuICAgIGNvbnN0IHdhc1N0cmVhbWluZyA9IHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgIC8vIFRyYWNrIHN0cmVhbWluZyBzdGFydCB0aW1lIGZvciBlbGFwc2VkIGRpc3BsYXlcbiAgICBpZiAobW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSAwOyAvLyBSZXNldCB0b2tlbiBjb3VudFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBBbHdheXMgcmVuZGVyIHByb21wdCB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50IChyaWNoIG1vZGUgb25seSlcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHRoZSBhbmltYXRlZCBzcGlubmVyIGZvciBzdHJlYW1pbmcgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHJldHVybjsgLy8gQWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTY3JvbGxPZmZzZXQgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTY3JvbGxEaXJlY3Rpb24gPSAxO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5zcGlubmVyRnJhbWUgPSAodGhpcy5zcGlubmVyRnJhbWUgKyAxKSAlIHNwaW5uZXJGcmFtZXMuYnJhaWxsZS5sZW5ndGg7XG4gICAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gKHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgKyAxKSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aDtcbiAgICAgIC8vIFVwZGF0ZSBlbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uIChzbG93ZXIgY3ljbGUpXG4gICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSAzID09PSAwKSB7XG4gICAgICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAodGhpcy5lbGFwc2VkQ29sb3JGcmFtZSArIDEpICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgLy8gVXBkYXRlIGhvcml6b250YWwgc2Nyb2xsIGZvciBsb25nIGFjdGl2aXR5IGxpbmVzIChzbG93ZXIgc2Nyb2xsKVxuICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgNCA9PT0gMCkge1xuICAgICAgICB0aGlzLmFjdGl2aXR5U2Nyb2xsT2Zmc2V0ICs9IHRoaXMuYWN0aXZpdHlTY3JvbGxEaXJlY3Rpb247XG4gICAgICB9XG4gICAgICAvLyBSZS1yZW5kZXIgdG8gc2hvdyB1cGRhdGVkIHNwaW5uZXIvc3RhciBmcmFtZVxuICAgICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfSwgODApOyAvLyB+MTIgRlBTIGZvciBzbW9vdGggc3Bpbm5lciBhbmltYXRpb25cbiAgfVxuXG4gIC8qKlxuICAgKiBTdG9wIHRoZSBhbmltYXRlZCBzcGlubmVyXG4gICAqL1xuICBwcml2YXRlIHN0b3BTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnNwaW5uZXJJbnRlcnZhbCk7XG4gICAgICB0aGlzLnNwaW5uZXJJbnRlcnZhbCA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuc3Bpbm5lckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gMDtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG51bGw7XG4gICAgdGhpcy5hY3Rpdml0eVNjcm9sbE9mZnNldCA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gIH1cblxuICAvKipcbiAgICogU2V0IHRoZSBhY3Rpdml0eSBtZXNzYWdlIGRpc3BsYXllZCB3aXRoIGFuaW1hdGVkIHN0YXJcbiAgICogRXhhbXBsZTogXCJSdW1pbmF0aW5n4oCmXCIgc2hvd3MgYXMgXCLinLMgUnVtaW5hdGluZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMgwrcg4oaRMS4yaylcIlxuICAgKi9cbiAgc2V0QWN0aXZpdHkobWVzc2FnZTogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMuYWN0aXZpdHlNZXNzYWdlID0gbWVzc2FnZTtcbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBVcGRhdGUgdGhlIHRva2VuIGNvdW50IGRpc3BsYXllZCBpbiB0aGUgYWN0aXZpdHkgbGluZVxuICAgKi9cbiAgdXBkYXRlU3RyZWFtaW5nVG9rZW5zKHRva2VuczogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSB0b2tlbnM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRva2VuIGNvdW50IGFzIGNvbXBhY3Qgc3RyaW5nIChlLmcuLCAxLjJrLCAyNGssIDEyOGspXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRva2VuQ291bnQodG9rZW5zOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICh0b2tlbnMgPCAxMDAwKSByZXR1cm4gU3RyaW5nKHRva2Vucyk7XG4gICAgaWYgKHRva2VucyA8IDEwMDAwKSByZXR1cm4gYCR7KHRva2VucyAvIDEwMDApLnRvRml4ZWQoMSl9a2A7XG4gICAgcmV0dXJuIGAke01hdGgucm91bmQodG9rZW5zIC8gMTAwMCl9a2A7XG4gIH1cblxuICBnZXRNb2RlKCk6ICdpZGxlJyB8ICdzdHJlYW1pbmcnIHtcbiAgICByZXR1cm4gdGhpcy5tb2RlO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1c0J1bmRsZSh7IG1haW46IG1lc3NhZ2UsIG92ZXJyaWRlOiBudWxsLCBzdHJlYW1pbmc6IG51bGwgfSk7XG4gIH1cblxuICB1cGRhdGVTdGF0dXNCdW5kbGUoXG4gICAgc3RhdHVzOiB7IG1haW4/OiBzdHJpbmcgfCBudWxsOyBvdmVycmlkZT86IHN0cmluZyB8IG51bGw7IHN0cmVhbWluZz86IHN0cmluZyB8IG51bGwgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHByZXZTdHJlYW1pbmcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZztcbiAgICBsZXQgY2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBtYWluQ2hhbmdlZCA9IGZhbHNlO1xuICAgIGxldCBvdmVycmlkZUNoYW5nZWQgPSBmYWxzZTtcblxuICAgIGlmIChzdGF0dXMubWFpbiAhPT0gdW5kZWZpbmVkICYmIHN0YXR1cy5tYWluICE9PSB0aGlzLnN0YXR1c01lc3NhZ2UpIHtcbiAgICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IHN0YXR1cy5tYWluO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBtYWluQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChzdGF0dXMub3ZlcnJpZGUgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMub3ZlcnJpZGUgIT09IHRoaXMuc3RhdHVzT3ZlcnJpZGUpIHtcbiAgICAgIHRoaXMuc3RhdHVzT3ZlcnJpZGUgPSBzdGF0dXMub3ZlcnJpZGU7XG4gICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIG92ZXJyaWRlQ2hhbmdlZCA9IHRydWU7XG4gICAgfVxuXG4gICAgY29uc3Qgc3RyZWFtaW5nQ2hhbmdlZCA9IHN0YXR1cy5zdHJlYW1pbmcgIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMuc3RyZWFtaW5nICE9PSBwcmV2U3RyZWFtaW5nO1xuICAgIGlmIChzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGlmIChzdHJlYW1pbmdDaGFuZ2VkKSB7XG4gICAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy5zdGF0dXNTdHJlYW1pbmcgPSBzdGF0dXMuc3RyZWFtaW5nO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0ludHJvZHVjZSA9XG4gICAgICBzdHJlYW1pbmdDaGFuZ2VkICYmIHByZXZTdHJlYW1pbmcgPT09IG51bGwgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IHN0cmVhbWluZ0NsZWFyZWQgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBzdGF0dXMuc3RyZWFtaW5nID09PSBudWxsICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgY29uc3Qgb25seVN0cmVhbWluZ0NoYW5nZWQgPSBzdHJlYW1pbmdDaGFuZ2VkICYmICFtYWluQ2hhbmdlZCAmJiAhb3ZlcnJpZGVDaGFuZ2VkO1xuICAgIGNvbnN0IHNraXBTdHJlYW1pbmdSZW5kZXIgPVxuICAgICAgb25seVN0cmVhbWluZ0NoYW5nZWQgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhc3RyZWFtaW5nSW50cm9kdWNlICYmICFzdHJlYW1pbmdDbGVhcmVkO1xuXG4gICAgY29uc3Qgc2hvdWxkUmVuZGVyID0gb3B0aW9ucy5yZW5kZXIgIT09IGZhbHNlICYmIGNoYW5nZWQgJiYgIXNraXBTdHJlYW1pbmdSZW5kZXI7XG4gICAgaWYgKHNob3VsZFJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICB1cGRhdGVTdGF0dXNNZXRhKFxuICAgIG1ldGE6IHtcbiAgICAgIG1vZGVsPzogc3RyaW5nO1xuICAgICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICAgIGNvbnRleHRQZXJjZW50PzogbnVtYmVyO1xuICAgICAgcHJvZmlsZT86IHN0cmluZztcbiAgICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICAgIGRpcmVjdG9yeT86IHN0cmluZztcbiAgICAgIHdyaXRlcz86IHN0cmluZztcbiAgICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICAgIHRoaW5raW5nTGFiZWw/OiBzdHJpbmc7XG4gICAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgICAgdG9vbFN1bW1hcnk/OiBzdHJpbmc7XG4gICAgfSxcbiAgICBvcHRpb25zOiB7IHJlbmRlcj86IGJvb2xlYW4gfSA9IHt9XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMuc3RhdHVzTWV0YSwgLi4ubWV0YSB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5zdGF0dXNNZXRhKTtcbiAgICB0aGlzLnN0YXR1c01ldGEgPSBuZXh0O1xuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlTW9kZVRvZ2dsZXMoc3RhdGU6IFBhcnRpYWw8TW9kZVRvZ2dsZVN0YXRlPik6IHZvaWQge1xuICAgIHRoaXMudG9nZ2xlU3RhdGUgPSB7IC4uLnRoaXMudG9nZ2xlU3RhdGUsIC4uLnN0YXRlIH07XG4gICAgaWYgKFxuICAgICAgIXN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSAmJlxuICAgICAgIXN0YXRlLnRoaW5raW5nSG90a2V5ICYmXG4gICAgICAhc3RhdGUuY3JpdGljYWxBcHByb3ZhbEhvdGtleSAmJlxuICAgICAgIXN0YXRlLmF1dG9Db250aW51ZUhvdGtleSAmJlxuICAgICAgIXN0YXRlLmR1YWxSbEhvdGtleSAmJlxuICAgICAgIXN0YXRlLmRlYnVnSG90a2V5XG4gICAgKSB7XG4gICAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuY2xlYXIoKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHNldElubGluZVBhbmVsKGxpbmVzOiBzdHJpbmdbXSk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSAobGluZXMgPz8gW10pLm1hcChsaW5lID0+IGxpbmUucmVwbGFjZSgvXFxzKyQvZywgJycpKTtcbiAgICBjb25zdCBoYXNDb250ZW50ID0gbm9ybWFsaXplZC5zb21lKChsaW5lKSA9PiBsaW5lLnRyaW0oKS5sZW5ndGggPiAwKTtcbiAgICBpZiAoIWhhc0NvbnRlbnQpIHtcbiAgICAgIGlmICh0aGlzLmlubGluZVBhbmVsLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IGxpbWl0ZWQgPSB0aGlzLmxpbWl0SW5saW5lUGFuZWwobm9ybWFsaXplZCk7XG4gICAgaWYgKEpTT04uc3RyaW5naWZ5KGxpbWl0ZWQpID09PSBKU09OLnN0cmluZ2lmeSh0aGlzLmlubGluZVBhbmVsKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmlubGluZVBhbmVsID0gbGltaXRlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgc3VwcG9ydHNJbmxpbmVQYW5lbCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5pbnRlcmFjdGl2ZSAmJiAhdGhpcy5wbGFpbk1vZGU7XG4gIH1cblxuICBjbGVhcklubGluZVBhbmVsKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHJldHVybjtcbiAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgbGltaXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgbWF4TGluZXMgPSBNYXRoLm1heCg0LCBNYXRoLm1pbih0aGlzLm1heElubGluZVBhbmVsTGluZXMsIE1hdGgubWF4KDIsIHRoaXMucm93cyAtIDgpKSk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA8PSBtYXhMaW5lcykge1xuICAgICAgcmV0dXJuIGxpbmVzO1xuICAgIH1cbiAgICBjb25zdCBvdmVyZmxvdyA9IGxpbmVzLmxlbmd0aCAtIG1heExpbmVzO1xuICAgIGNvbnN0IGluZGljYXRvciA9IHRoZW1lLnVpLm11dGVkKGDigKYgJHtvdmVyZmxvd30gbW9yZSBsaW5lc2ApO1xuICAgIGNvbnN0IHRhaWxDb3VudCA9IE1hdGgubWF4KDEsIG1heExpbmVzIC0gMSk7XG4gICAgY29uc3QgdGFpbCA9IGxpbmVzLnNsaWNlKC10YWlsQ291bnQpO1xuICAgIHJldHVybiBbaW5kaWNhdG9yLCAuLi50YWlsXTtcbiAgfVxuXG4gIC8vIC0tLS0tLS0tLS0tLSBQcm9tcHQgcmVuZGVyaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0KCk6IHZvaWQge1xuICAgIC8vIERvbid0IHJlbmRlciBpZiBkaXNwb3NlZFxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG5cbiAgICAvLyBUaHJvdHRsZSByZW5kZXJzIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAobm93IC0gdGhpcy5sYXN0UmVuZGVyVGltZSA8IHRoaXMucmVuZGVyVGhyb3R0bGVNcykge1xuICAgICAgaWYgKCF0aGlzLnBlbmRpbmdSZW5kZXIpIHtcbiAgICAgICAgdGhpcy5wZW5kaW5nUmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgLy8gVHJhY2sgdGhlIHRpbWVyIGZvciBjbGVhbnVwXG4gICAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgICAgICAgdGhpcy5wZW5kaW5nUmVuZGVyID0gZmFsc2U7XG4gICAgICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSwgdGhpcy5yZW5kZXJUaHJvdHRsZU1zKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk6IHZvaWQge1xuICAgIC8vIERvbid0IHJlbmRlciBpZiBkaXNwb3NlZFxuICAgIGlmICh0aGlzLmRpc3Bvc2VkKSByZXR1cm47XG5cbiAgICB0aGlzLmxhc3RSZW5kZXJUaW1lID0gRGF0ZS5ub3coKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgbGluZSA9IGA+ICR7dGhpcy5idWZmZXJ9YDtcbiAgICAgIGlmICghdGhpcy5pc1Byb21wdEFjdGl2ZSAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKGBcXHIke0VTQy5DTEVBUl9MSU5FfSR7bGluZX1gKTtcbiAgICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGxpbmUubGVuZ3RoICsgMTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7IC8vIHByb21wdCBlbmRzIG1pZC1saW5lIGJ5IGRlc2lnblxuICAgICAgdGhpcy5wcm9tcHRIZWlnaHQgPSAxO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5hbGxvd1Byb21wdFJlbmRlcikge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFJpY2ggaW5saW5lIG1vZGU6IHByb21wdCBmbG93cyBuYXR1cmFsbHkgd2l0aCBjb250ZW50XG4gICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgdGhpcy5sYXN0UmVuZGVyV2lkdGggPSBtYXhXaWR0aDtcblxuICAgIGNvbnN0IG92ZXJsYXkgPSB0aGlzLmJ1aWxkT3ZlcmxheUxpbmVzKCk7XG4gICAgaWYgKCFvdmVybGF5LmxpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHJlbmRlcmVkTGluZXMgPSBvdmVybGF5LmxpbmVzLm1hcChsaW5lID0+IHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgaWYgKCFyZW5kZXJlZExpbmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHByb21wdEluZGV4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ob3ZlcmxheS5wcm9tcHRJbmRleCwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSk7XG4gICAgY29uc3QgaGVpZ2h0ID0gcmVuZGVyZWRMaW5lcy5sZW5ndGg7XG5cbiAgICAvLyBDbGVhciBwcmV2aW91cyBwcm9tcHQgYW5kIGhhbmRsZSBoZWlnaHQgY2hhbmdlc1xuICAgIC8vIE5vdGU6IFdlIGNoZWNrIGxhc3RPdmVybGF5SGVpZ2h0ID4gMCB0byBrbm93IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIHRvIGNsZWFyLFxuICAgIC8vIGJ1dCB3ZSB1c2UgbGFzdE92ZXJsYXk/LnByb21wdEluZGV4IGZvciBjdXJzb3IgcG9zaXRpb25pbmcgKGRlZmF1bHRpbmcgdG8gMCBpZiBjbGVhcmVkKVxuICAgIGlmICh0aGlzLmhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkgJiYgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA+IDApIHtcbiAgICAgIC8vIE1vdmUgdXAgZnJvbSBwcm9tcHQgcm93IHRvIHRvcCBvZiBvdmVybGF5XG4gICAgICBjb25zdCBsaW5lc1RvVG9wID0gdGhpcy5sYXN0T3ZlcmxheT8ucHJvbXB0SW5kZXggPz8gMDtcbiAgICAgIGlmIChsaW5lc1RvVG9wID4gMCkge1xuICAgICAgICB0aGlzLndyaXRlKGBcXHgxYlske2xpbmVzVG9Ub3B9QWApO1xuICAgICAgfVxuXG4gICAgICAvLyBDbGVhciBhbGwgcHJldmlvdXMgbGluZXNcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodDsgaSsrKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xccicpO1xuICAgICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgICAgaWYgKGkgPCB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0IC0gMSkge1xuICAgICAgICAgIHRoaXMud3JpdGUoJ1xceDFiW0InKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJZiBuZXcgaGVpZ2h0IGlzIGdyZWF0ZXIsIHdlIG5lZWQgdG8gYWRkIGJsYW5rIGxpbmVzXG4gICAgICBjb25zdCBleHRyYUxpbmVzID0gaGVpZ2h0IC0gdGhpcy5sYXN0T3ZlcmxheUhlaWdodDtcbiAgICAgIGlmIChleHRyYUxpbmVzID4gMCkge1xuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGV4dHJhTGluZXM7IGkrKykge1xuICAgICAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIE1vdmUgYmFjayB0byB0b3Agb2Ygd2hlcmUgb3ZlcmxheSBzaG91bGQgc3RhcnRcbiAgICAgIGNvbnN0IG1vdmVCYWNrVXAgPSBNYXRoLm1heCgwLCBoZWlnaHQgLSAxKTtcbiAgICAgIGlmIChtb3ZlQmFja1VwID4gMCkge1xuICAgICAgICB0aGlzLndyaXRlKGBcXHgxYlske21vdmVCYWNrVXB9QWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFdyaXRlIHByb21wdCBsaW5lcyAobm8gdHJhaWxpbmcgbmV3bGluZSBvbiBsYXN0IGxpbmUpXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCByZW5kZXJlZExpbmVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgdGhpcy53cml0ZShyZW5kZXJlZExpbmVzW2ldIHx8ICcnKTtcbiAgICAgIGlmIChpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFBvc2l0aW9uIGN1cnNvciBhdCBwcm9tcHQgaW5wdXQgbGluZVxuICAgIGNvbnN0IHByb21wdENvbCA9IE1hdGgubWluKE1hdGgubWF4KDEsIDMgKyB0aGlzLmN1cnNvciksIHRoaXMuY29scyB8fCA4MCk7XG4gICAgLy8gQ3Vyc29yIGlzIG5vdyBhdCB0aGUgbGFzdCBsaW5lLiBNb3ZlIHVwIHRvIHRoZSBwcm9tcHQgcm93LlxuICAgIGNvbnN0IGxpbmVzVG9Nb3ZlVXAgPSBoZWlnaHQgLSAxIC0gcHJvbXB0SW5kZXg7XG4gICAgaWYgKGxpbmVzVG9Nb3ZlVXAgPiAwKSB7XG4gICAgICB0aGlzLndyaXRlKGBcXHgxYlske2xpbmVzVG9Nb3ZlVXB9QWApO1xuICAgIH1cbiAgICB0aGlzLndyaXRlKGBcXHgxYlske3Byb21wdENvbH1HYCk7XG5cbiAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBwcm9tcHRDb2w7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IHRydWU7XG4gICAgdGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gdHJ1ZTtcbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gdHJ1ZTtcbiAgICB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID0gaGVpZ2h0O1xuICAgIHRoaXMubGFzdE92ZXJsYXkgPSB7IGxpbmVzOiByZW5kZXJlZExpbmVzLCBwcm9tcHRJbmRleCB9O1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSBmYWxzZTtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IGhlaWdodDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRPdmVybGF5TGluZXMoKTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIC8vIFNpbXBsZSBob3Jpem9udGFsIGRpdmlkZXIgLSBjbGVhbiBhbmQgcmVsaWFibGVcbiAgICBjb25zdCBkaXZpZGVyID0gdGhlbWUudWkubXV0ZWQoJ+KUgCcucmVwZWF0KG1heFdpZHRoKSk7XG5cbiAgICBjb25zdCBmYWxsYmFja0FjdGl2aXR5ID0gKCgpID0+IHtcbiAgICAgIGNvbnN0IHJhdyA9IHRoaXMuc3RhdHVzU3RyZWFtaW5nIHx8IHRoaXMuc3RhdHVzT3ZlcnJpZGUgfHwgdGhpcy5zdGF0dXNNZXNzYWdlO1xuICAgICAgaWYgKCFyYXcpIHJldHVybiBudWxsO1xuICAgICAgY29uc3QgY2xlYW5lZCA9IHRoaXMuc3RyaXBBbnNpKHJhdykucmVwbGFjZSgvXlvij7rigKJdXFxzKi8sICcnKS50cmltKCk7XG4gICAgICByZXR1cm4gY2xlYW5lZCB8fCBudWxsO1xuICAgIH0pKCk7XG5cbiAgICAvLyBBY3Rpdml0eSBsaW5lIChvbmx5IHdoZW4gc3RyZWFtaW5nKSAtIHNob3dzOiDil5AgV29ya2luZ+KApiAoZXNjIHRvIGludGVycnVwdCDCtyAzNHMpXG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgKHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkpKSB7XG4gICAgICAvLyBDbGVhbiBzcGlubmVyIGFuaW1hdGlvbiB1c2luZyBicmFpbGxlIGRvdHMgKyBzaGltbWVyIGFjY2VudCBmb3IgYSByaWNoZXIgZmVlbFxuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIGNvbnN0IHN0YXJDaGFyID0gdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXNbdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aF0gPz8gJ+Kctic7XG4gICAgICBjb25zdCBzcGlubmVyRGVjb3JhdGVkID0gYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9JHt0aGVtZS5hY2NlbnQgPyB0aGVtZS5hY2NlbnQoc3RhckNoYXIpIDogc3RhckNoYXJ9YDtcbiAgICAgIGNvbnN0IGVsYXBzZWQgPSB0aGlzLmZvcm1hdFN0cmVhbWluZ0VsYXBzZWQoKTtcbiAgICAgIGNvbnN0IGdlbmVyaWNBY3Rpdml0aWVzID0gWydTdHJlYW1pbmcnLCAnVGhpbmtpbmcnLCAnUHJvY2Vzc2luZyddO1xuICAgICAgbGV0IGRpc3BsYXlBY3Rpdml0eSA9IHRoaXMuYWN0aXZpdHlNZXNzYWdlIHx8IGZhbGxiYWNrQWN0aXZpdHkgfHwgJyc7XG4gICAgICBpZiAoZ2VuZXJpY0FjdGl2aXRpZXMuaW5jbHVkZXMoZGlzcGxheUFjdGl2aXR5KSAmJiBmYWxsYmFja0FjdGl2aXR5KSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHk7XG4gICAgICB9XG4gICAgICBpZiAoIWRpc3BsYXlBY3Rpdml0eS50cmltKCkpIHtcbiAgICAgICAgZGlzcGxheUFjdGl2aXR5ID0gZmFsbGJhY2tBY3Rpdml0eSB8fCAnV29ya2luZyc7XG4gICAgICB9XG4gICAgICBjb25zdCBuZWVkc0VsbGlwc2lzID0gIWRpc3BsYXlBY3Rpdml0eS50cmltRW5kKCkuZW5kc1dpdGgoJ+KApicpICYmICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCcuLi4nKTtcbiAgICAgIC8vIEZvcm1hdDog4qCLIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMW0gMTlzIMK3IOKGkTEuMmsgdG9rZW5zKVxuICAgICAgLy8gQnVpbGQgcGFydHMgd2l0aCBhbmltYXRlZCBlbGFwc2VkIHRpbWUgY29sb3JcbiAgICAgIGNvbnN0IGVsYXBzZWRDb2xvciA9IGNoYWxrLmhleCh0aGlzLmVsYXBzZWRDb2xvckZyYW1lc1t0aGlzLmVsYXBzZWRDb2xvckZyYW1lICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoXSA/PyAnI0Y1OUUwQicpO1xuICAgICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gWydlc2MgdG8gaW50ZXJydXB0J107XG4gICAgICBpZiAoZWxhcHNlZCkgcGFydHMucHVzaChlbGFwc2VkQ29sb3IoZWxhcHNlZCkpO1xuICAgICAgaWYgKHRoaXMuc3RyZWFtaW5nVG9rZW5zID4gMCkge1xuICAgICAgICBwYXJ0cy5wdXNoKGDihpEke3RoaXMuZm9ybWF0VG9rZW5Db3VudCh0aGlzLnN0cmVhbWluZ1Rva2Vucyl9IHRva2Vuc2ApO1xuICAgICAgfVxuICAgICAgY29uc3QgcHJlZml4ID0gYCR7c3Bpbm5lckRlY29yYXRlZH0gYDtcbiAgICAgIGNvbnN0IGFjdGl2aXR5VGV4dCA9IGAke2Rpc3BsYXlBY3Rpdml0eS50cmltKCl9JHtuZWVkc0VsbGlwc2lzID8gJ+KApicgOiAnJ31gO1xuICAgICAgY29uc3Qgc3VmZml4ID0gYCAke3RoZW1lLnVpLm11dGVkKCcoJyl9JHtwYXJ0cy5qb2luKHRoZW1lLnVpLm11dGVkKCcgwrcgJykpfSR7dGhlbWUudWkubXV0ZWQoJyknKX1gO1xuXG4gICAgICAvLyBCdWlsZCB0aGUgZnVsbCBhY3Rpdml0eSBsaW5lIGNvbnRlbnQgKHdpdGhvdXQgcHJlZml4IGZvciBzY3JvbGxpbmcgY2FsY3VsYXRpb24pXG4gICAgICBjb25zdCBmdWxsQ29udGVudCA9IGFjdGl2aXR5VGV4dCArIHN1ZmZpeDtcbiAgICAgIGNvbnN0IHByZWZpeExlbiA9IHRoaXMudmlzaWJsZUxlbmd0aChwcmVmaXgpO1xuICAgICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSBtYXhXaWR0aCAtIHByZWZpeExlbjtcblxuICAgICAgLy8gQXBwbHkgaG9yaXpvbnRhbCBzY3JvbGxpbmcgaWYgY29udGVudCBpcyB0b28gbG9uZ1xuICAgICAgbGV0IGRpc3BsYXlDb250ZW50ID0gZnVsbENvbnRlbnQ7XG4gICAgICBjb25zdCBjb250ZW50TGVuID0gdGhpcy52aXNpYmxlTGVuZ3RoKGZ1bGxDb250ZW50KTtcbiAgICAgIGlmIChjb250ZW50TGVuID4gYXZhaWxhYmxlV2lkdGgpIHtcbiAgICAgICAgLy8gQ2FsY3VsYXRlIHNjcm9sbCBib3VuZHNcbiAgICAgICAgY29uc3QgbWF4U2Nyb2xsID0gY29udGVudExlbiAtIGF2YWlsYWJsZVdpZHRoICsgMzsgLy8gKzMgZm9yIHBhZGRpbmdcblxuICAgICAgICAvLyBCb3VuY2UgdGhlIHNjcm9sbCBkaXJlY3Rpb24gYXQgYm91bmRhcmllc1xuICAgICAgICBpZiAodGhpcy5hY3Rpdml0eVNjcm9sbE9mZnNldCA+PSBtYXhTY3JvbGwpIHtcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5U2Nyb2xsRGlyZWN0aW9uID0gLTE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5hY3Rpdml0eVNjcm9sbE9mZnNldCA8PSAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVNjcm9sbERpcmVjdGlvbiA9IDE7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgc2Nyb2xsZWQgdmlldyB3aXRoIHZpc3VhbCBpbmRpY2F0b3JzXG4gICAgICAgIGNvbnN0IG9mZnNldCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuYWN0aXZpdHlTY3JvbGxPZmZzZXQsIG1heFNjcm9sbCkpO1xuICAgICAgICBjb25zdCBzdGFydEluZGljYXRvciA9IG9mZnNldCA+IDAgPyAn4oC5JyA6ICcnO1xuICAgICAgICBjb25zdCBlbmRJbmRpY2F0b3IgPSBvZmZzZXQgPCBtYXhTY3JvbGwgPyAn4oC6JyA6ICcnO1xuXG4gICAgICAgIC8vIEV4dHJhY3QgdmlzaWJsZSBwb3J0aW9uIChoYW5kbGUgQU5TSSBjb2RlcyBwcm9wZXJseSlcbiAgICAgICAgY29uc3QgcGxhaW5Db250ZW50ID0gdGhpcy5zdHJpcEFuc2koZnVsbENvbnRlbnQpO1xuICAgICAgICBjb25zdCB2aXNpYmxlUGxhaW4gPSBwbGFpbkNvbnRlbnQuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBhdmFpbGFibGVXaWR0aCAtIDIpO1xuXG4gICAgICAgIC8vIFJlLWFwcGx5IHN0eWxpbmcgdG8gdGhlIHZpc2libGUgcG9ydGlvblxuICAgICAgICBkaXNwbGF5Q29udGVudCA9IHN0YXJ0SW5kaWNhdG9yICsgdmlzaWJsZVBsYWluICsgZW5kSW5kaWNhdG9yO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBhY3Rpdml0eUxpbmUgPSBgJHtwcmVmaXh9JHtkaXNwbGF5Q29udGVudH1gO1xuICAgICAgbGluZXMucHVzaChhY3Rpdml0eUxpbmUpO1xuICAgIH1cblxuICAgIC8vIFRvcCBkaXZpZGVyXG4gICAgbGluZXMucHVzaChkaXZpZGVyKTtcblxuICAgIC8vIElucHV0IHByb21wdCBsaW5lXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBsaW5lcy5sZW5ndGg7XG4gICAgY29uc3QgaW5wdXRMaW5lID0gdGhpcy5idWlsZElucHV0TGluZSgpO1xuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IGJ5IHNwbGl0dGluZyBvbiBuZXdsaW5lc1xuICAgIGNvbnN0IGlucHV0TGluZXMgPSBpbnB1dExpbmUuc3BsaXQoJ1xcbicpO1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnB1dExpbmVzKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gQm90dG9tIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5saW5lIHBhbmVsIChwaW5uZWQgc2Nyb2xsIGJveCBmb3IgbGl2ZSBvdXRwdXQvbWVudXMpXG4gICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBwYW5lbExpbmUgb2YgdGhpcy5pbmxpbmVQYW5lbCkge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7cGFuZWxMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0ZSBpbmxpbmUgY29udGVudCBmcm9tIHN1Z2dlc3Rpb25zL3RvZ2dsZXNcbiAgICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG4gICAgfVxuXG4gICAgLy8gU2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uc1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tpbmRleF0hO1xuICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleDtcbiAgICAgICAgY29uc3QgbWFya2VyID0gaXNBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCfilrgnKSA6IHRoZW1lLnVpLm11dGVkKCcgJyk7XG4gICAgICAgIGNvbnN0IGNtZFRleHQgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoc3VnZ2VzdGlvbi5jb21tYW5kKSA6IHRoZW1lLnVpLm11dGVkKHN1Z2dlc3Rpb24uY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gaXNBY3RpdmUgPyBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbik7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttYXJrZXJ9ICR7Y21kVGV4dH0g4oCUICR7ZGVzY1RleHR9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlbCBhbmQgY29udGV4dCBpbmZvXG4gICAgY29uc3QgbW9kZWxDb250ZXh0TGluZSA9IHRoaXMuYnVpbGRNb2RlbENvbnRleHRMaW5lKCk7XG4gICAgaWYgKG1vZGVsQ29udGV4dExpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttb2RlbENvbnRleHRMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gU3RhdHVzICsgbWV0YSBibG9jayAoaW5jbHVkZXMgZGlyL3ZlcnNpb24vdG9vbCBzdW1tYXJ5KVxuICAgIGNvbnN0IGNocm9tZUxpbmVzID0gdGhpcy5idWlsZENocm9tZUxpbmVzKCk7XG4gICAgaWYgKGNocm9tZUxpbmVzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBjaHJvbWVMaW5lIG9mIGNocm9tZUxpbmVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtjaHJvbWVMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kZSB0b2dnbGVzXG4gICAgY29uc3QgdG9nZ2xlTGluZXMgPSB0aGlzLmJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHRvZ2dsZUxpbmUgb2YgdG9nZ2xlTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RvZ2dsZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlZ2VuZExpbmVzID0gdGhpcy5idWlsZFRvZ2dsZUxlZ2VuZCgpO1xuICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgbGVnZW5kTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2xlZ2VuZH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHAgaGludFxuICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHt0aGVtZS51aS5tdXRlZCgnPyBmb3Igc2hvcnRjdXRzJyl9YCwgbWF4V2lkdGgpKTtcblxuICAgIHJldHVybiB7IGxpbmVzLCBwcm9tcHRJbmRleCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIG1vZGVsIG5hbWUgYW5kIGNvbnRleHQgdXNhZ2UgbGluZSB3aXRoIG1pbmkgcHJvZ3Jlc3MgYmFyXG4gICAqIEZvcm1hdDogZ3B0LTQgwrcg4paI4paI4paI4paI4paR4paRIDg1JSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkTW9kZWxDb250ZXh0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIE1vZGVsIG5hbWUgKHByb3ZpZGVyIC8gbW9kZWwgb3IganVzdCBtb2RlbClcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlciAmJiB0aGlzLnN0YXR1c01ldGEubW9kZWxcbiAgICAgID8gYCR7dGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyfSDCtyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLmluZm8obW9kZWwpKTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0IG1ldGVyIHdpdGggbWluaSBwcm9ncmVzcyBiYXIgKHNob3dzIHVzZWQgcGVyY2VudGFnZSwgbm90IHJlbWFpbmluZylcbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHVzZWQgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCkpO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSA2O1xuICAgICAgY29uc3QgZmlsbGVkID0gTWF0aC5yb3VuZCgodXNlZCAvIDEwMCkgKiBiYXJXaWR0aCk7XG4gICAgICBjb25zdCBlbXB0eSA9IGJhcldpZHRoIC0gZmlsbGVkO1xuICAgICAgLy8gQ29sb3IgYmFzZWQgb24gaG93IGZ1bGwgdGhlIGNvbnRleHQgaXMgKGdyZWVuPWxvdyB1c2FnZSwgeWVsbG93PW1lZGl1bSwgcmVkPWhpZ2gpXG4gICAgICBjb25zdCBiYXJDb2xvciA9IHVzZWQgPCA1MCA/IHRoZW1lLnN1Y2Nlc3MgOiB1c2VkIDwgODAgPyB0aGVtZS53YXJuaW5nIDogdGhlbWUuZXJyb3I7XG4gICAgICBjb25zdCBiYXIgPSBiYXJDb2xvcign4paIJy5yZXBlYXQoZmlsbGVkKSkgKyB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQoZW1wdHkpKTtcbiAgICAgIHBhcnRzLnB1c2goYCR7YmFyfSAke2JhckNvbG9yKGAke3VzZWR9JWApfSAke3RoZW1lLnVpLm11dGVkKCdjdHgnKX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgwrcgICcpKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgaW5saW5lIHRvZ2dsZSBjb250cm9scyAtIENsYXVkZSBDb2RlIHN0eWxlXG4gICAqIEZvcm1hdDog4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVxuICAgKiBSZXR1cm5zIHdyYXBwZWQgbGluZXMgdG8gZW5zdXJlIGFsbCB0b2dnbGVzIChpbmNsdWRpbmcgUkwpIGFyZSB2aXNpYmxlIGJlbG93IHRoZSBjaGF0IGJveC5cbiAgICovXG4gIC8qKlxuICAgKiBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzdGF0dXMgbGluZSB3aXRoIGNvbG9yLWNvZGVkIHN0YXRlcyBhbmQgaW50ZWdyYXRlZCBleHBsYW5hdGlvbnMuXG4gICAqIEVhY2ggdG9nZ2xlIGhhcyBhIGRpc3RpbmN0IGNvbG9yIGZvciBlYXN5IGlkZW50aWZpY2F0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZElubGluZVRvZ2dsZUxpbmUoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgYXBwcm92YWxNb2RlID0gdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsTW9kZSB8fCAnYXV0byc7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQnVpbGQgdW5pZmllZCB0b2dnbGUgc2VnbWVudHMgd2l0aCBESVNUSU5DVCBjb2xvcnMgZm9yIGVhY2ggdG9nZ2xlXG4gICAgY29uc3QgdG9nZ2xlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIDEuIFJMIG1vZGUgKENZQU4pIC0gbXVsdGktYWdlbnQgdnMgc2luZ2xlLXBhc3NcbiAgICBjb25zdCBybE9uID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkO1xuICAgIGNvbnN0IHJsSWNvbiA9IHJsT24gPyAn8J+klicgOiAn4pqhJztcbiAgICBjb25zdCBybFN0YXR1cyA9IHJsT24gPyB0aGVtZS5pbmZvKCdkdWFsJykgOiB0aGVtZS51aS5tdXRlZCgnc2luZ2xlJyk7XG4gICAgY29uc3QgcmxFeHBsYWluID0gcmxPbiA/ICdtdWx0aS1hZ2VudCcgOiAnb25lLXBhc3MnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtybEljb259ICR7cmxTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVEXScpfSAke3RoZW1lLnVpLm11dGVkKHJsRXhwbGFpbil9YCk7XG5cbiAgICAvLyAyLiBBdXRvLWNvbnRpbnVlIChNQUdFTlRBL1BVUlBMRSkgLSBrZWVwIGdvaW5nIHVudGlsIGRvbmVcbiAgICBjb25zdCBjb250SWNvbiA9IGF1dG9Db250aW51ZUFjdGl2ZSA/ICfwn5SEJyA6ICfij7gnO1xuICAgIGNvbnN0IGNvbnRTdGF0dXMgPSBhdXRvQ29udGludWVBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCdsb29wJykgOiB0aGVtZS51aS5tdXRlZCgnc3RvcCcpO1xuICAgIGNvbnN0IGNvbnRFeHBsYWluID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ3VudGlsIGRvbmUnIDogJ2VhY2ggcmVzcG9uc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtjb250SWNvbn0gJHtjb250U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylR10nKX0gJHt0aGVtZS51aS5tdXRlZChjb250RXhwbGFpbil9YCk7XG5cbiAgICAvLyAzLiBWZXJpZnkgKFlFTExPVykgLSBhdXRvLXRlc3RzIGFmdGVyIGVkaXRzXG4gICAgY29uc3QgdmVyaWZ5SWNvbiA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICfinJMnIDogJ+KXiyc7XG4gICAgY29uc3QgdmVyaWZ5U3RhdHVzID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gdGhlbWUud2FybmluZygndGVzdCcpIDogdGhlbWUudWkubXV0ZWQoJ3NraXAnKTtcbiAgICBjb25zdCB2ZXJpZnlFeHBsYWluID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2F1dG8tdGVzdCcgOiAnbm8gdGVzdHMnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt2ZXJpZnlJY29ufSAke3ZlcmlmeVN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpVZdJyl9ICR7dGhlbWUudWkubXV0ZWQodmVyaWZ5RXhwbGFpbil9YCk7XG5cbiAgICAvLyA0LiBBcHByb3ZhbHMgKEdSRUVOL09SQU5HRSkgLSBhdXRvIG9yIGFzayBmb3IgcGVybWlzc2lvblxuICAgIGNvbnN0IGFwcHJJY29uID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ/Cfm6EnIDogJ+KclCc7XG4gICAgY29uc3QgYXBwclN0YXR1cyA9IGFwcHJvdmFsTW9kZSA9PT0gJ2FwcHJvdmFsJyA/IHRoZW1lLndhcm5pbmcoJ2FzaycpIDogdGhlbWUuc3VjY2VzcygnYXV0bycpO1xuICAgIGNvbnN0IGFwcHJFeHBsYWluID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ2NvbmZpcm0gYWxsJyA6ICdhdXRvLWFwcHJvdmUnO1xuICAgIHRvZ2dsZXMucHVzaChgJHthcHBySWNvbn0gJHthcHByU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylQV0nKX0gJHt0aGVtZS51aS5tdXRlZChhcHByRXhwbGFpbil9YCk7XG5cbiAgICAvLyA1LiBUaGlua2luZyAoQkxVRSkgLSBiYWxhbmNlZCBvciBkZWVwIHJlYXNvbmluZ1xuICAgIGNvbnN0IHRoaW5raW5nSXNEZWVwID0gdGhpbmtpbmdMYWJlbCA9PT0gJ2V4dGVuZGVkJyB8fCB0aGlua2luZ0xhYmVsID09PSAnZGVlcCc7XG4gICAgY29uc3QgdGhpbmtJY29uID0gdGhpbmtpbmdJc0RlZXAgPyAn8J+noCcgOiAn8J+SrSc7XG4gICAgY29uc3QgdGhpbmtTdGF0dXMgPSB0aGlua2luZ0lzRGVlcCA/IHRoZW1lLmluZm8oJ2RlZXAnKSA6IHRoZW1lLnVpLm11dGVkKCdxdWljaycpO1xuICAgIGNvbnN0IHRoaW5rRXhwbGFpbiA9IHRoaW5raW5nSXNEZWVwID8gJ3Rob3JvdWdoJyA6ICdjb25jaXNlJztcbiAgICB0b2dnbGVzLnB1c2goYCR7dGhpbmtJY29ufSAke3RoaW5rU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbVEFCXScpfSAke3RoZW1lLnVpLm11dGVkKHRoaW5rRXhwbGFpbil9YCk7XG5cbiAgICAvLyA2LiBEZWJ1ZyBsb2dnaW5nIGluZGljYXRvciAoUkVEKSAtIHRvZ2dsZSBzaG93cyB3aGV0aGVyIGNvbnNvbGUgbG9nZ2luZyBpcyBlbmFibGVkXG4gICAgY29uc3QgZGVidWdBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmRlYnVnRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBkZWJ1Z0ljb24gPSBkZWJ1Z0FjdGl2ZSA/ICfwn5CeJyA6ICfwn5SNJztcbiAgICBjb25zdCBkZWJ1Z1N0YXR1cyA9IGRlYnVnQWN0aXZlID8gdGhlbWUud2FybmluZygnZGVidWcgb24nKSA6IHRoZW1lLnVpLm11dGVkKCdkZWJ1ZyBvZmYnKTtcbiAgICBjb25zdCBkZWJ1Z0V4cGxhaW4gPSBkZWJ1Z0FjdGl2ZSA/ICd2ZXJib3NlIGxvZ3MnIDogJ3NpbGVudCc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2RlYnVnSWNvbn0gJHtkZWJ1Z1N0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnWy9kZWJ1Z10nKX0gJHt0aGVtZS51aS5tdXRlZChkZWJ1Z0V4cGxhaW4pfWApO1xuXG4gICAgLy8gNy4gU2hvcnRjdXQgaGludFxuICAgIHRvZ2dsZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnPyBoZWxwJyl9YCk7XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMik7XG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHRvZ2dsZXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBMZWdlbmQgaXMgbm93IGludGVncmF0ZWQgaW50byBidWlsZElubGluZVRvZ2dsZUxpbmUgZm9yIHVuaWZpZWQgZGlzcGxheVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxlZ2VuZCgpOiBzdHJpbmdbXSB7XG4gICAgLy8gTGVnZW5kIGV4cGxhbmF0aW9ucyBub3cgaW50ZWdyYXRlZCBkaXJlY3RseSBpbnRvIHRvZ2dsZSBsaW5lXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENocm9tZUxpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3Qgc3RhdHVzTGluZXMgPSB0aGlzLmJ1aWxkU3RhdHVzQmxvY2sobWF4V2lkdGgpO1xuICAgIGNvbnN0IG1ldGFMaW5lcyA9IHRoaXMuYnVpbGRNZXRhQmxvY2sobWF4V2lkdGgpO1xuICAgIHJldHVybiBbLi4uc3RhdHVzTGluZXMsIC4uLm1ldGFMaW5lc107XG4gIH1cblxuICBwcml2YXRlIGFiYnJldmlhdGVQYXRoKHBhdGhWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBob21lID0gaG9tZWRpcigpO1xuICAgIGlmIChob21lICYmIHBhdGhWYWx1ZS5zdGFydHNXaXRoKGhvbWUpKSB7XG4gICAgICByZXR1cm4gcGF0aFZhbHVlLnJlcGxhY2UoaG9tZSwgJ34nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhWYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gdGhpcy5jb21wb3NlU3RhdHVzTGFiZWwoKTtcbiAgICBpZiAoIXN0YXR1c0xhYmVsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgYW5pbWF0ZWQgc3Bpbm5lciB3aGVuIHN0cmVhbWluZyBmb3IgZHluYW1pYyB2aXN1YWwgZmVlZGJhY2tcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3N0YXR1cycpfSAke3RoaXMuYXBwbHlUb25lKHN0YXR1c0xhYmVsLnRleHQsIHN0YXR1c0xhYmVsLnRvbmUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3J1bnRpbWUnKX0gJHt0aGVtZS51aS5tdXRlZCh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVXNlIGFuaW1hdGVkIGNvbnRleHQgbWV0ZXIgZm9yIHNtb290aCBjb2xvciB0cmFuc2l0aW9uc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIudXBkYXRlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuY29udGV4dE1ldGVyLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNZXRhQmxvY2sobWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdwcm9maWxlJywgdGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IC8gJHt0aGlzLnN0YXR1c01ldGEubW9kZWx9YFxuICAgICAgOiB0aGlzLnN0YXR1c01ldGEubW9kZWwgfHwgdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyO1xuICAgIGlmIChtb2RlbCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdtb2RlbCcsIG1vZGVsLCAnaW5mbycpKTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdkaXInLCB0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSksICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLndyaXRlcykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd3cml0ZXMnLCB0aGlzLnN0YXR1c01ldGEud3JpdGVzLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd0b29scycsIHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Nlc3Npb24nLCB0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS52ZXJzaW9uKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2J1aWxkJywgYHYke3RoaXMuc3RhdHVzTWV0YS52ZXJzaW9ufWAsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCk7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udHJvbExpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b2dnbGVMaW5lID0gdGhpcy5idWlsZFRvZ2dsZUxpbmUoKTtcbiAgICBpZiAodG9nZ2xlTGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnbW9kZXMnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oC6Jyl9ICR7dG9nZ2xlTGluZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydGN1dExpbmUgPSB0aGlzLmJ1aWxkU2hvcnRjdXRMaW5lKCk7XG4gICAgaWYgKHNob3J0Y3V0TGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgna2V5cycpfSAgJHtzaG9ydGN1dExpbmV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgY29tcGFjdCB0b2dnbGUgbGluZSBsaWtlIENsYXVkZSBDb2RlOlxuICAgKiBcIuKPteKPtSBhY2NlcHQgZWRpdHMgb24gKHNoaWZ0K3RhYiB0byBjeWNsZSlcIlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENvbXBhY3RUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIC8vIFNob3cgdGhlIG1vc3QgcmVsZXZhbnQgbW9kZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZDtcblxuICAgIC8vIEVkaXQgbW9kZSBpbmRpY2F0b3JcbiAgICBjb25zdCBlZGl0SWNvbiA9ICfij7Xij7UnO1xuICAgIGNvbnN0IGVkaXRTdGF0ZSA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICdhcHByb3ZhbCByZXF1aXJlZCcgOiAnYWNjZXB0IGVkaXRzJztcbiAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKGVkaXRJY29uKX0gJHtlZGl0U3RhdGV9ICR7dGhlbWUuc3VjY2Vzcygnb24nKX1gKTtcblxuICAgIC8vIFRoaW5raW5nIG1vZGUgKGlmIGFjdGl2ZSlcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJycpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0aGlua2luZ0xhYmVsICYmIHRoaW5raW5nTGFiZWwgIT09ICdvZmYnKSB7XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCd0aGlua2luZycpfSAke3RoZW1lLmluZm8odGhpbmtpbmdMYWJlbCl9YCk7XG4gICAgfVxuXG4gICAgLy8gQ3ljbGUgaGludFxuICAgIGNvbnN0IGN5Y2xlSGludCA9IHRoZW1lLnVpLm11dGVkKCcoc2hpZnQrdGFiIHRvIGN5Y2xlKScpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0gJHtjeWNsZUhpbnR9YDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvZ2dsZXM6IEFycmF5PHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBvbjogYm9vbGVhbjtcbiAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgaG90a2V5Pzogc3RyaW5nIHwgbnVsbDtcbiAgICB9PiA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9nZ2xlID0gKGxhYmVsOiBzdHJpbmcsIG9uOiBib29sZWFuLCBob3RrZXk/OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSA9PiB7XG4gICAgICB0b2dnbGVzLnB1c2goeyBsYWJlbCwgb24sIGhvdGtleTogdGhpcy5mb3JtYXRIb3RrZXkoaG90a2V5KSwgdmFsdWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGF1dG9WZXJpZnlBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgY29uc3QgdmVyaWZ5VmFsdWUgPSBhdXRvVmVyaWZ5QWN0aXZlXG4gICAgICA/ICdhdXRvJ1xuICAgICAgOiB2ZXJpZmljYXRpb25BY3RpdmVcbiAgICAgICAgPyAnb24nXG4gICAgICAgIDogJ29mZic7XG5cbiAgICBhZGRUb2dnbGUoJ1ZlcmlmeScsIHZlcmlmaWNhdGlvbkFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXksIHZlcmlmeVZhbHVlKTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCBhcHByb3ZhbEFjdGl2ZSA9IGFwcHJvdmFsTW9kZSAhPT0gJ2F1dG8nO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBcHByb3ZhbHMnLFxuICAgICAgYXBwcm92YWxBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXksXG4gICAgICBhcHByb3ZhbE1vZGUgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdhc2snXG4gICAgKTtcblxuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0F1dG8tY29udGludWUnLFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlLFxuICAgICAgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXksXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUgPyAnYXV0by12ZXJpZnknIDogJ29mZidcbiAgICApO1xuXG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbFJhdyA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKTtcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID1cbiAgICAgIHRoaW5raW5nTGFiZWxSYXcudG9Mb3dlckNhc2UoKSA9PT0gJ2V4dGVuZGVkJyA/ICdkZWVwJyA6IHRoaW5raW5nTGFiZWxSYXcgfHwgJ2JhbGFuY2VkJztcbiAgICBjb25zdCB0aGlua2luZ0FjdGl2ZSA9IHRoaW5raW5nTGFiZWwubGVuZ3RoID4gMDtcbiAgICBhZGRUb2dnbGUoJ1RoaW5raW5nJywgdGhpbmtpbmdBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXksIHRoaW5raW5nTGFiZWwpO1xuXG4gICAgY29uc3QgZHVhbFJsQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IG1vZGVWYWx1ZSA9IGR1YWxSbEFjdGl2ZSA/ICdkdWFsLXJsLWNvbnQnIDogJ3NpbmdsZS1jb250JztcbiAgICBhZGRUb2dnbGUoJ01vZGUnLCBkdWFsUmxBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5LCBtb2RlVmFsdWUpO1xuXG4gICAgY29uc3QgYnVpbGRMaW5lID0gKGluY2x1ZGVIb3RrZXlzOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZVRleHQgPSB0b2dnbGUub24gPyB0aGVtZS5zdWNjZXNzKHRvZ2dsZS52YWx1ZSB8fCAnb24nKSA6IHRoZW1lLnVpLm11dGVkKHRvZ2dsZS52YWx1ZSB8fCAnb2ZmJyk7XG4gICAgICAgICAgY29uc3QgaG90a2V5VGV4dCA9XG4gICAgICAgICAgICBpbmNsdWRlSG90a2V5cyAmJiB0b2dnbGUuaG90a2V5ID8gdGhlbWUudWkubXV0ZWQoYCBbJHt0b2dnbGUuaG90a2V5fV1gKSA6ICcnO1xuICAgICAgICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChgJHt0b2dnbGUubGFiZWx9OmApfSAke3N0YXRlVGV4dH0ke2hvdGtleVRleHR9YDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgJykpO1xuICAgIH07XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgbGV0IGxpbmUgPSBidWlsZExpbmUodHJ1ZSk7XG5cbiAgICAvLyBSZWNvcmQgd2hpY2ggaG90a2V5cyBhcmUgYWN0dWFsbHkgc2hvd24gc28gdGhlIHNob3J0Y3V0IGxpbmUgY2FuIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUgPSBuZXcgU2V0KFxuICAgICAgdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiAodG9nZ2xlLmhvdGtleSA/IHRvZ2dsZS5ob3RrZXkgOiBudWxsKSlcbiAgICAgICAgLmZpbHRlcigoa2V5KToga2V5IGlzIHN0cmluZyA9PiBCb29sZWFuKGtleSkpXG4gICAgKTtcblxuICAgIC8vIElmIHRoZSBsaW5lIGlzIHRvbyB3aWRlLCBkcm9wIGhvdGtleSBoaW50cyB0byBwcmVzZXJ2ZSBhbGwgdG9nZ2xlIGxhYmVsc1xuICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobGluZSkgPiBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgICBsaW5lID0gYnVpbGRMaW5lKGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZS50cmltKCkgPyBsaW5lIDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTaG9ydGN1dExpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBhZGRIb3RrZXkgPSAobGFiZWw6IHN0cmluZywgY29tYm8/OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmZvcm1hdEhvdGtleShjb21ibyk7XG4gICAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuaGFzKG5vcm1hbGl6ZWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUuaW5mbyhub3JtYWxpemVkKX0gJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9YCk7XG4gICAgfTtcblxuICAgIC8vIENvcmUgY29udHJvbHNcbiAgICBhZGRIb3RrZXkoJ2ludGVycnVwdCcsICdDdHJsK0MnKTtcbiAgICBhZGRIb3RrZXkoJ2NsZWFyIGlucHV0JywgJ0N0cmwrVScpO1xuXG4gICAgLy8gRmVhdHVyZSB0b2dnbGVzIChvbmx5IGlmIGhvdGtleXMgYXJlIGRlZmluZWQpXG4gICAgYWRkSG90a2V5KCd2ZXJpZnknLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSk7XG4gICAgYWRkSG90a2V5KCdhdXRvLWNvbnRpbnVlJywgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgndGhpbmtpbmcnLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ21vZGUnLCB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEhvdGtleSk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgICcpKTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBidWlsZElucHV0TGluZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYFtwYXN0ZWQgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzfSBsaW5lcywgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfSBjaGFyc10gKEVudGVyL0N0cmwrTCBpbnNlcnQsIEJhY2tzcGFjZSBkaXNjYXJkKWA7XG4gICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX0ke3RoZW1lLnVpLm11dGVkKHN1bW1hcnkpfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIHVzZXMgc2ltcGxlICc+JyBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSB0aGVtZS5wcmltYXJ5KCc+ICcpO1xuICAgIGNvbnN0IHByb21wdFdpZHRoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHByb21wdCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbkluZGVudCA9ICcgICc7IC8vIDIgc3BhY2VzIGZvciBjb250aW51YXRpb24gbGluZXNcbiAgICBjb25zdCBjb250aW51YXRpb25XaWR0aCA9IGNvbnRpbnVhdGlvbkluZGVudC5sZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCAtIHNwbGl0IGJ1ZmZlciBvbiBuZXdsaW5lcyBmaXJzdFxuICAgIC8vIEluIHNlY3JldCBtb2RlLCBtYXNrIGFsbCBjaGFyYWN0ZXJzIHdpdGggYnVsbGV0c1xuICAgIGNvbnN0IHJhd0J1ZmZlciA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuc2VjcmV0TW9kZSA/ICfigKInLnJlcGVhdChyYXdCdWZmZXIubGVuZ3RoKSA6IHJhd0J1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lcyA9IG5vcm1hbGl6ZWQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gV3JhcCBlYWNoIGxvZ2ljYWwgbGluZSB0byBmaXQgdGVybWluYWwgd2lkdGgsIGV4cGFuZGluZyB2ZXJ0aWNhbGx5XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0b3RhbENoYXJzID0gMDtcbiAgICBsZXQgY3Vyc29yTGluZSA9IDA7XG4gICAgbGV0IGN1cnNvckNvbCA9IDA7XG4gICAgbGV0IGZvdW5kQ3Vyc29yID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBidWZmZXJMaW5lcy5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyTGluZXNbbGluZUluZGV4XSA/PyAnJztcbiAgICAgIGNvbnN0IGlzRmlyc3RMb2dpY2FsTGluZSA9IGxpbmVJbmRleCA9PT0gMDtcbiAgICAgIGNvbnN0IGxpbmVTdGFydENoYXIgPSB0b3RhbENoYXJzO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgYXZhaWxhYmxlIHdpZHRoIGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZVdpZHRoID0gbWF4V2lkdGggLSBwcm9tcHRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRMaW5lV2lkdGggPSBtYXhXaWR0aCAtIGNvbnRpbnVhdGlvbldpZHRoO1xuXG4gICAgICAvLyBXcmFwIHRoaXMgbG9naWNhbCBsaW5lIGludG8gZGlzcGxheSBsaW5lc1xuICAgICAgbGV0IHJlbWFpbmluZyA9IGxpbmU7XG4gICAgICBsZXQgaXNGaXJzdERpc3BsYXlMaW5lID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwIHx8IGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IGZpcnN0TGluZVdpZHRoIDogY29udExpbmVXaWR0aDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSByZW1haW5pbmcuc2xpY2UoMCwgYXZhaWxhYmxlV2lkdGgpO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc2xpY2UoYXZhaWxhYmxlV2lkdGgpO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBkaXNwbGF5IGxpbmVcbiAgICAgICAgbGV0IGRpc3BsYXlMaW5lOiBzdHJpbmc7XG4gICAgICAgIGlmIChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtwcm9tcHR9JHtjaHVua31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7Y29udGludWF0aW9uSW5kZW50fSR7Y2h1bmt9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtTdGFydCA9IGxpbmVTdGFydENoYXIgKyAobGluZS5sZW5ndGggLSByZW1haW5pbmcubGVuZ3RoIC0gY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBjaHVua0VuZCA9IGNodW5rU3RhcnQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IGNodW5rU3RhcnQgJiYgdGhpcy5jdXJzb3IgPD0gY2h1bmtFbmQpIHtcbiAgICAgICAgICAgIGN1cnNvckxpbmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5DaHVuayA9IHRoaXMuY3Vyc29yIC0gY2h1bmtTdGFydDtcbiAgICAgICAgICAgIGN1cnNvckNvbCA9ICgoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBwcm9tcHRXaWR0aCA6IGNvbnRpbnVhdGlvbldpZHRoKSArIG9mZnNldEluQ2h1bms7XG4gICAgICAgICAgICBmb3VuZEN1cnNvciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnB1c2goZGlzcGxheUxpbmUpO1xuICAgICAgICBpc0ZpcnN0RGlzcGxheUxpbmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiBub3RoaW5nIGxlZnQgYW5kIHRoaXMgd2FzIGFuIGVtcHR5IGxpbmUsIHdlIGFscmVhZHkgYWRkZWQgaXRcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPT09IDAgJiYgY2h1bmsubGVuZ3RoID09PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxDaGFycyArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgbmV3bGluZSBzZXBhcmF0b3JcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY3Vyc29yIGF0IHZlcnkgZW5kXG4gICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgY3Vyc29yTGluZSA9IE1hdGgubWF4KDAsIHJlc3VsdC5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY3Vyc29yQ29sID0gdGhpcy52aXNpYmxlTGVuZ3RoKGxhc3RMaW5lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY3Vyc29yIGhpZ2hsaWdodCB0byB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRhcmdldExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjb25zdCB2aXNpYmxlUGFydCA9IHRoaXMuc3RyaXBBbnNpKHRhcmdldExpbmUpO1xuICAgICAgY29uc3QgY3Vyc29yUG9zID0gTWF0aC5taW4oY3Vyc29yQ29sLCB2aXNpYmxlUGFydC5sZW5ndGgpO1xuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaW5lIHdpdGggY3Vyc29yIGhpZ2hsaWdodFxuICAgICAgY29uc3QgYmVmb3JlID0gdmlzaWJsZVBhcnQuc2xpY2UoMCwgY3Vyc29yUG9zKTtcbiAgICAgIGNvbnN0IGF0ID0gdmlzaWJsZVBhcnQuY2hhckF0KGN1cnNvclBvcykgfHwgJyAnO1xuICAgICAgY29uc3QgYWZ0ZXIgPSB2aXNpYmxlUGFydC5zbGljZShjdXJzb3JQb3MgKyAxKTtcblxuICAgICAgLy8gUHJlc2VydmUgdGhlIHByb21wdC9pbmRlbnQgc3R5bGluZ1xuICAgICAgY29uc3QgcHJlZml4ID0gY3Vyc29yTGluZSA9PT0gMCA/IHByb21wdCA6IGNvbnRpbnVhdGlvbkluZGVudDtcbiAgICAgIGNvbnN0IHRleHRQYXJ0ID0gY3Vyc29yTGluZSA9PT0gMCA/IGJlZm9yZS5zbGljZShwcm9tcHRXaWR0aCkgOiBiZWZvcmUuc2xpY2UoY29udGludWF0aW9uV2lkdGgpO1xuICAgICAgcmVzdWx0W2N1cnNvckxpbmVdID0gYCR7cHJlZml4fSR7dGV4dFBhcnR9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YDtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJzb3IgY29sdW1uIGZvciB0ZXJtaW5hbCBwb3NpdGlvbmluZ1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGN1cnNvckNvbCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZElucHV0V2luZG93KGF2YWlsYWJsZTogbnVtYmVyKTogeyB0ZXh0OiBzdHJpbmc7IGN1cnNvcjogbnVtYmVyIH0ge1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3QgY3Vyc29ySW5kZXggPSBNYXRoLm1pbih0aGlzLmN1cnNvciwgbm9ybWFsaXplZC5sZW5ndGgpO1xuXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQ7XG4gICAgaWYgKGN1cnNvckluZGV4IDwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBjdXJzb3JJbmRleDtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBjdXJzb3JJbmRleCAtIG9mZnNldCAtIGF2YWlsYWJsZSArIDE7XG4gICAgaWYgKG92ZXJmbG93ID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IG92ZXJmbG93O1xuICAgIH1cbiAgICBjb25zdCBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBub3JtYWxpemVkLmxlbmd0aCAtIGF2YWlsYWJsZSk7XG4gICAgaWYgKG9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgIH1cbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgY29uc3Qgd2luZG93ID0gbm9ybWFsaXplZC5zbGljZShvZmZzZXQsIG9mZnNldCArIGF2YWlsYWJsZSk7XG4gICAgY29uc3QgZGlzcGxheSA9IHdpbmRvdy5zcGxpdCgnJykubWFwKGNoYXIgPT4gKGNoYXIgPT09ICdcXG4nID8gTkVXTElORV9QTEFDRUhPTERFUiA6IGNoYXIpKS5qb2luKCcnKTtcbiAgICBjb25zdCBjdXJzb3JJbldpbmRvdyA9IE1hdGgubWluKGRpc3BsYXkubGVuZ3RoLCBNYXRoLm1heCgwLCBjdXJzb3JJbmRleCAtIG9mZnNldCkpO1xuXG4gICAgY29uc3QgYmVmb3JlID0gZGlzcGxheS5zbGljZSgwLCBjdXJzb3JJbldpbmRvdyk7XG4gICAgY29uc3QgYXQgPSBkaXNwbGF5LmNoYXJBdChjdXJzb3JJbldpbmRvdykgfHwgJyAnO1xuICAgIGNvbnN0IGFmdGVyID0gZGlzcGxheS5zbGljZShjdXJzb3JJbldpbmRvdyArIDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGAke2JlZm9yZX0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gLFxuICAgICAgY3Vyc29yOiBjdXJzb3JJbldpbmRvdyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgY2FwdHVyZUlucHV0KG9wdGlvbnM6IHsgYWxsb3dFbXB0eT86IGJvb2xlYW47IHRyaW0/OiBib29sZWFuOyByZXNldEJ1ZmZlcj86IGJvb2xlYW4gfSA9IHt9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgYWxyZWFkeSBpbiBwcm9ncmVzcycpKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5yZXNldEJ1ZmZlcikge1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IHtcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgdHJpbTogb3B0aW9ucy50cmltICE9PSBmYWxzZSxcbiAgICAgICAgICBhbGxvd0VtcHR5OiBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxJbnB1dENhcHR1cmUocmVhc29uPzogdW5rbm93bik6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2FwdHVyZSA9IHRoaXMuaW5wdXRDYXB0dXJlO1xuICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICBjYXB0dXJlLnJlamVjdD8uKHJlYXNvbiA/PyBuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICB9XG5cblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyYXBPdmVybGF5TGluZSh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGluZGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5zcGxpdCgvKFxccyspLyk7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgbmV4dCA9IGN1cnJlbnQgKyB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChuZXh0KSA+IHdpZHRoICYmIGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudC50cmltRW5kKCksIHdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSBpbmRlbnQgKyB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQudHJpbUVuZCgpLCB3aWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5sZW5ndGggPyBsaW5lcyA6IFt0aGlzLnRydW5jYXRlTGluZSh0ZXh0LCB3aWR0aCldO1xuICB9XG5cbiAgcHJpdmF0ZSBzYWZlV2lkdGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5vdXRwdXQuaXNUVFkgPyB0aGlzLmNvbHMgfHwgODAgOiA4MDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgY29scyAtIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSB2aXNpYmxlTGVuZ3RoKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAwO1xuICAgIHJldHVybiB0aGlzLnN0cmlwQW5zaSh2YWx1ZSkubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBzdHJpcEFuc2kodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xcdTAwMUJcXFtbMC0/XSpbIC0vXSpbQC1+XS9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIHRydW5jYXRlTGluZSh2YWx1ZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgY29uc3QgbGltaXQgPSBNYXRoLm1heCgxLCB3aWR0aCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBjb25zdCB0b2tlbnMgPSB2YWx1ZS5zcGxpdCgvKFxceDFiXFxbWzAtOTtdKm0pL3UpO1xuICAgIGxldCB2aXNpYmxlID0gMDtcbiAgICBsZXQgdHJ1bmNhdGVkID0gZmFsc2U7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICAgIGlmICghdG9rZW4pIGNvbnRpbnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmICgvXlxceDFiXFxbWzAtOTtdKm0kL3UudGVzdCh0b2tlbikpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2aXNpYmxlID49IGxpbWl0KSB7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVtYWluaW5nID0gbGltaXQgLSB2aXNpYmxlO1xuICAgICAgaWYgKHRva2VuLmxlbmd0aCA8PSByZW1haW5pbmcpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICB2aXNpYmxlICs9IHRva2VuLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNsaWNlTGVuZ3RoID0gTWF0aC5tYXgoMCwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHQgKz0gdG9rZW4uc2xpY2UoMCwgc2xpY2VMZW5ndGgpO1xuICAgICAgICAgIHZpc2libGUgKz0gc2xpY2VMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9ICfigKYnO1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHJ1bmNhdGVkICYmICFyZXN1bHQuZW5kc1dpdGgoRVNDLlJFU0VUKSkge1xuICAgICAgcmVzdWx0ICs9IEVTQy5SRVNFVDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0QnVmZmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICB9XG5cbiAgZ2V0Q3Vyc29yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3Vyc29yO1xuICB9XG5cbiAgc2V0QnVmZmVyKHRleHQ6IHN0cmluZywgY3Vyc29yUG9zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXIgPSB0ZXh0O1xuICAgIC8vIFZhbGlkYXRlIGN1cnNvciBwb3NpdGlvbiB0byBwcmV2ZW50IG91dC1vZi1ib3VuZHMgaXNzdWVzXG4gICAgY29uc3QgcmVxdWVzdGVkQ3Vyc29yID0gY3Vyc29yUG9zID8/IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmVxdWVzdGVkQ3Vyc29yLCB0ZXh0Lmxlbmd0aCkpO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRTZWNyZXRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnNlY3JldE1vZGUgPSBlbmFibGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhckJ1ZmZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0TW9kZVN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBjb21wYWN0aW5nIHN0YXR1cyB3aXRoIGFuaW1hdGVkIHNwaW5uZXIgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBVc2VzIOKcuyBjaGFyYWN0ZXIgd2l0aCBhbmltYXRpb24gdG8gaW5kaWNhdGUgY29udGV4dCBjb21wYWN0aW9uIGluIHByb2dyZXNzXG4gICAqL1xuICBzaG93Q29tcGFjdGluZ1N0YXR1cyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnNwaW5uZXJGcmFtZSsrO1xuICAgICAgICAvLyBDeWNsZSBhY3Rpdml0eSBwaHJhc2UgZXZlcnkgfjQgc2Vjb25kcyAoNTAgZnJhbWVzIGF0IDgwbXMpXG4gICAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDUwID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVBocmFzZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH0sIDgwKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBjb21wYWN0aW5nIHN0YXR1cyBhbmQgc3RvcCBzcGlubmVyIGFuaW1hdGlvblxuICAgKi9cbiAgaGlkZUNvbXBhY3RpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgZW1pdFByb21wdChjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnB1c2hQcm9tcHRFdmVudChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHVzZXIgcHJvbXB0IGltbWVkaWF0ZWx5IGluIHNjcm9sbGJhY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBXcml0ZXMgc3luY2hyb25vdXNseSB0byBlbnN1cmUgaXQgYXBwZWFycyBPTkNFIGluIHNjcm9sbGJhY2sgYmVmb3JlIHN0YXR1cyB1cGRhdGVzLlxuICAgKiBUaGUgcHJvbXB0IGlucHV0IGFyZWEgd2lsbCB0aGVuIGZsb2F0IGJlbG93IHRoaXMgYW5kIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgZGlzcGxheVVzZXJQcm9tcHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcblxuICAgIC8vIEFkZCB0byBldmVudCBxdWV1ZSBpbnN0ZWFkIG9mIHdyaXRpbmcgZGlyZWN0bHkgdG8gZW5zdXJlIHByb3BlciByZW5kZXJpbmdcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIExvdy1sZXZlbCBoZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHB1c2hQcm9tcHRFdmVudCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclByb21wdEFyZWEoKTogdm9pZCB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5sYXN0T3ZlcmxheT8ubGluZXMubGVuZ3RoID8/IHRoaXMucHJvbXB0SGVpZ2h0ID8/IDA7XG4gICAgaWYgKGhlaWdodCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ3Vyc29yIGlzIGF0IHByb21wdCByb3cuIE1vdmUgdXAgdG8gdG9wIG9mIG92ZXJsYXkgZmlyc3QuXG4gICAgaWYgKHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5LnByb21wdEluZGV4O1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGF0IHRvcCwgY2xlYXIgZWFjaCBsaW5lIGRvd253YXJkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGlmIChpIDwgaGVpZ2h0IC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBiYWNrIHRvIHRvcCAod2hlcmUgY29udGVudCBzaG91bGQgY29udGludWUgZnJvbSlcbiAgICBpZiAoaGVpZ2h0ID4gMSkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtoZWlnaHQgLSAxfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZSgnXFxyJyk7XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IDA7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm91dHB1dC5yb3dzIHx8IDI0O1xuICAgICAgdGhpcy5jb2xzID0gdGhpcy5vdXRwdXQuY29sdW1ucyB8fCA4MDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0EsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBQyxz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