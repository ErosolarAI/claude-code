{"version":3,"names":["_nodeFs","require","_nodePath","_nodeOs","_editTools","describe","workingDir","editHandler","beforeEach","mkdtempSync","join","tmpdir","editTool","createEditTools","find","tool","name","Error","handler","afterEach","rmSync","recursive","force","it","filePath","output","file_path","old_string","new_string","expect","toContain","toMatch","writeFileSync","replace_all","readFileSync","toBe","edit1","edit2","final","edit3","edit4","edit5","not","afterEdit1","result"],"sources":["editTools.test.ts"],"sourcesContent":["import { mkdtempSync, rmSync, writeFileSync, readFileSync } from 'node:fs';\nimport { join } from 'node:path';\nimport { tmpdir } from 'node:os';\nimport { createEditTools } from '../src/tools/editTools.js';\n\ndescribe('Edit tool', () => {\n  let workingDir: string;\n  let editHandler: (args: Record<string, unknown>) => Promise<string>;\n\n  beforeEach(() => {\n    workingDir = mkdtempSync(join(tmpdir(), 'erosolar-edit-'));\n    const editTool = createEditTools(workingDir).find((tool) => tool.name === 'Edit');\n    if (!editTool) {\n      throw new Error('Edit tool not found');\n    }\n    editHandler = editTool.handler as (args: Record<string, unknown>) => Promise<string>;\n  });\n\n  afterEach(() => {\n    rmSync(workingDir, { recursive: true, force: true });\n  });\n\n  it('creates a new file and shows green diff lines', async () => {\n    const filePath = join(workingDir, 'new-file.txt');\n\n    const output = await editHandler({\n      file_path: filePath,\n      old_string: '',\n      new_string: 'hello world',\n    });\n\n    // Claude Code style: ⏺ Create(filepath)\n    expect(output).toContain('⏺ Create(new-file.txt)');\n    expect(output).toContain('with 1 additions');\n    expect(output).toMatch(/\\x1b\\[32m\\+ L1 \\| hello world\\x1b\\[0m/);\n  });\n\n  it('deletes text when new_string is omitted and shows red diff lines', async () => {\n    const filePath = join(workingDir, 'remove-file.txt');\n    writeFileSync(filePath, 'remove me', 'utf-8');\n\n    const output = await editHandler({\n      file_path: filePath,\n      old_string: 'remove me',\n    });\n\n    // Claude Code style: ⏺ Update(filepath) with removals\n    expect(output).toContain('⏺ Update(remove-file.txt)');\n    expect(output).toContain('with 1 removal');\n    // Check for the removal marker (red line with -)\n    expect(output).toMatch(/\\x1b\\[31m.*remove me/);\n  });\n\n  it('normalizes escaped newline sequences in old_string to avoid false mismatches', async () => {\n    const filePath = join(workingDir, 'escape.txt');\n    writeFileSync(filePath, 'first\\nsecond\\n', 'utf-8');\n\n    const output = await editHandler({\n      file_path: filePath,\n      old_string: 'first\\\\nsecond',\n      new_string: 'first\\nupdated',\n      replace_all: true,\n    });\n\n    expect(output).toContain('normalized escaped old_string');\n    expect(readFileSync(filePath, 'utf-8')).toBe('first\\nupdated\\n');\n  });\n\n  it('tolerates indentation differences via flexible whitespace matching', async () => {\n    const filePath = join(workingDir, 'whitespace.txt');\n    writeFileSync(filePath, '    alpha\\n        beta\\n', 'utf-8');\n\n    const output = await editHandler({\n      file_path: filePath,\n      old_string: 'alpha\\n  beta',\n      new_string: 'alpha\\n  gamma',\n      replace_all: true,\n    });\n\n    expect(output).toContain('normalized whitespace in old_string');\n    expect(readFileSync(filePath, 'utf-8')).toBe('    alpha\\n        gamma\\n');\n  });\n\n  describe('sequential edits (surgical precision)', () => {\n    it('handles multiple sequential edits to the same file correctly', async () => {\n      const filePath = join(workingDir, 'sequential.ts');\n      writeFileSync(\n        filePath,\n        `function add(a: number, b: number): number {\n  return a + b;\n}\n\nfunction subtract(a: number, b: number): number {\n  return a - b;\n}\n`,\n        'utf-8'\n      );\n\n      // Edit 1: Change add function\n      const edit1 = await editHandler({\n        file_path: filePath,\n        old_string: 'function add(a: number, b: number): number {\\n  return a + b;\\n}',\n        new_string: 'function add(a: number, b: number): number {\\n  // Sum two numbers\\n  return a + b;\\n}',\n      });\n      // Claude Code style\n      expect(edit1).toContain('⏺ Update(sequential.ts)');\n\n      // Edit 2: Change subtract function (line numbers have shifted!)\n      const edit2 = await editHandler({\n        file_path: filePath,\n        old_string: 'function subtract(a: number, b: number): number {\\n  return a - b;\\n}',\n        new_string: 'function subtract(a: number, b: number): number {\\n  // Subtract b from a\\n  return a - b;\\n}',\n      });\n      expect(edit2).toContain('⏺ Update(sequential.ts)');\n\n      // Verify final content\n      const final = readFileSync(filePath, 'utf-8');\n      expect(final).toContain('// Sum two numbers');\n      expect(final).toContain('// Subtract b from a');\n    });\n\n    it('handles edits that add multiple lines then target new content', async () => {\n      const filePath = join(workingDir, 'grow.ts');\n      writeFileSync(filePath, 'const x = 1;\\n', 'utf-8');\n\n      // Edit 1: Add more lines\n      await editHandler({\n        file_path: filePath,\n        old_string: 'const x = 1;',\n        new_string: 'const x = 1;\\nconst y = 2;\\nconst z = 3;',\n      });\n\n      // Edit 2: Modify the newly added line\n      const edit2 = await editHandler({\n        file_path: filePath,\n        old_string: 'const y = 2;',\n        new_string: 'const y = 20; // modified',\n      });\n      expect(edit2).toContain('⏺ Update(grow.ts)');\n\n      expect(readFileSync(filePath, 'utf-8')).toBe('const x = 1;\\nconst y = 20; // modified\\nconst z = 3;\\n');\n    });\n\n    it('handles edits that remove lines then target remaining content', async () => {\n      const filePath = join(workingDir, 'shrink.ts');\n      writeFileSync(\n        filePath,\n        `line1\nline2\nline3\nline4\nline5\n`,\n        'utf-8'\n      );\n\n      // Edit 1: Remove lines 2-3\n      await editHandler({\n        file_path: filePath,\n        old_string: 'line2\\nline3\\n',\n        new_string: '',\n      });\n\n      // Edit 2: Modify line4 (which is now at a different position)\n      const edit2 = await editHandler({\n        file_path: filePath,\n        old_string: 'line4',\n        new_string: 'line4_modified',\n      });\n      expect(edit2).toContain('⏺ Update(shrink.ts)');\n\n      expect(readFileSync(filePath, 'utf-8')).toBe('line1\\nline4_modified\\nline5\\n');\n    });\n\n    it('handles complex real-world edit sequence like Claude Code', async () => {\n      // Simulate the example from user: multiple edits to editTools.ts-like content\n      const filePath = join(workingDir, 'complex.ts');\n      writeFileSync(\n        filePath,\n        `export async function performEdit(args: EditArgs): Promise<string> {\n  const oldString = args.old_string;\n  const newStringRaw = args.new_string;\n  const newString = typeof newStringRaw === 'string' ? newStringRaw : '';\n\n  // Normalize escaped literals to reduce mismatch errors (e.g., \"\\\\n\" vs actual newline)\n  let targetString = oldString;\n  let normalizedFromEscapes = false;\n  if (!content.includes(targetString)) {\n    const unescaped = unescapeLiteral(oldString);\n    if (unescaped !== oldString && content.includes(unescaped)) {\n      targetString = unescaped;\n      normalizedFromEscapes = true;\n    }\n  }\n\n  // Perform replacement\n  const result = content.replace(targetString, newString);\n  return \\`✓ Edited \\${displayPath}\\${normalizedFromEscapes ? ' [normalized escaped old_string]' : ''}\\`;\n}\n`,\n        'utf-8'\n      );\n\n      // Edit 1: Change comment and variable name\n      const edit1 = await editHandler({\n        file_path: filePath,\n        old_string: `  // Normalize escaped literals to reduce mismatch errors (e.g., \"\\\\n\" vs actual newline)\n  let targetString = oldString;\n  let normalizedFromEscapes = false;`,\n        new_string: `  // Normalize escaped literals and whitespace differences to reduce mismatch errors\n  let targetString = oldString;\n  let matchNote: string | null = null;`,\n      });\n      expect(edit1).toContain('⏺ Update(complex.ts)');\n\n      // Edit 2: Change the inner logic\n      const edit2 = await editHandler({\n        file_path: filePath,\n        old_string: `      targetString = unescaped;\n      normalizedFromEscapes = true;`,\n        new_string: `      targetString = unescaped;\n      matchNote = 'normalized escaped old_string';`,\n      });\n      expect(edit2).toContain('⏺ Update(complex.ts)');\n\n      // Edit 3: Update the return statement\n      const edit3 = await editHandler({\n        file_path: filePath,\n        old_string: \"return `✓ Edited ${displayPath}${normalizedFromEscapes ? ' [normalized escaped old_string]' : ''}`;\",\n        new_string: \"return `✓ Edited ${displayPath}${matchNote ? ` [${matchNote}]` : ''}`;\",\n      });\n      expect(edit3).toContain('⏺ Update(complex.ts)');\n\n      // Edit 4: Rename newString to replacementString\n      const edit4 = await editHandler({\n        file_path: filePath,\n        old_string: \"const newString = typeof newStringRaw === 'string' ? newStringRaw : '';\",\n        new_string: \"let replacementString = typeof newStringRaw === 'string' ? newStringRaw : '';\",\n      });\n      expect(edit4).toContain('⏺ Update(complex.ts)');\n\n      const edit5 = await editHandler({\n        file_path: filePath,\n        old_string: 'const result = content.replace(targetString, newString);',\n        new_string: 'const result = content.replace(targetString, replacementString);',\n      });\n      expect(edit5).toContain('⏺ Update(complex.ts)');\n\n      // Verify final content has all changes\n      const final = readFileSync(filePath, 'utf-8');\n      expect(final).toContain('let matchNote: string | null = null;');\n      expect(final).toContain(\"matchNote = 'normalized escaped old_string';\");\n      expect(final).toContain('let replacementString =');\n      expect(final).toContain('replace(targetString, replacementString)');\n      expect(final).toContain('${matchNote ?');\n      expect(final).not.toContain('normalizedFromEscapes');\n      expect(final).not.toContain('const newString =');\n    });\n\n    it('handles edits with varying indentation levels in sequence', async () => {\n      const filePath = join(workingDir, 'indent.ts');\n      writeFileSync(\n        filePath,\n        `class Example {\n  constructor() {\n    this.value = 0;\n  }\n\n  method() {\n    if (true) {\n      // TODO: Replace with logger\n// TODO: Replace with logger\n// TODO: Replace with logger\n// TODO: Replace with logger\n// TODO: Replace with logger\n// TODO: Replace with logger\n      console.log('nested');\n      }\n  }\n}\n`,\n        'utf-8'\n      );\n\n      // Edit 1: Change constructor\n      await editHandler({\n        file_path: filePath,\n        old_string: '  constructor() {\\n    this.value = 0;\\n  }',\n        new_string: '  constructor(initial: number) {\\n    this.value = initial;\\n  }',\n      });\n\n      // Edit 2: Change deeply nested content\n      await editHandler({\n        file_path: filePath,\n        old_string: \"      console.log('nested');\",\n        new_string: \"      console.log('deeply nested');\\n      console.log('extra line');\",\n      });\n\n      const final = readFileSync(filePath, 'utf-8');\n      expect(final).toContain('constructor(initial: number)');\n      expect(final).toContain('this.value = initial');\n      expect(final).toContain(\"console.log('deeply nested')\");\n      expect(final).toContain(\"console.log('extra line')\");\n    });\n\n    it('handles flexible whitespace matching across sequential edits', async () => {\n      const filePath = join(workingDir, 'flex-sequence.ts');\n      // File with 4-space indentation\n      writeFileSync(\n        filePath,\n        `function test() {\n    const a = 1;\n    const b = 2;\n    return a + b;\n}\n`,\n        'utf-8'\n      );\n\n      // Edit 1: Use 2-space indentation in old_string (should still match via flexible whitespace)\n      const edit1 = await editHandler({\n        file_path: filePath,\n        old_string: 'const a = 1;\\n  const b = 2;',\n        new_string: 'const a = 10;\\n  const b = 20;',\n        replace_all: true,\n      });\n      expect(edit1).toContain('normalized whitespace');\n\n      // Verify indentation was preserved\n      const afterEdit1 = readFileSync(filePath, 'utf-8');\n      expect(afterEdit1).toContain('    const a = 10;'); // 4-space indent preserved\n      expect(afterEdit1).toContain('    const b = 20;'); // 4-space indent preserved\n\n      // Edit 2: Another edit on the modified content\n      const edit2 = await editHandler({\n        file_path: filePath,\n        old_string: '    return a + b;',\n        new_string: '    return a * b; // multiplied',\n      });\n      expect(edit2).toContain('⏺ Update(flex-sequence.ts)');\n\n      const final = readFileSync(filePath, 'utf-8');\n      expect(final).toContain('    const a = 10;');\n      expect(final).toContain('    const b = 20;');\n      expect(final).toContain('    return a * b; // multiplied');\n    });\n\n    it('rejects flexible whitespace matching that crosses line boundaries incorrectly', async () => {\n      const filePath = join(workingDir, 'cross-line.ts');\n      // File has specific structure\n      writeFileSync(\n        filePath,\n        `/**\n * Format any error as a structured error\n */\nexport function toStructuredError(error: unknown): StructuredError {\n  return error;\n}\n`,\n        'utf-8'\n      );\n\n      // AI tries to match with wrong line structure (fabricated content)\n      const result = await editHandler({\n        file_path: filePath,\n        old_string: `* Format any error\n*/\nexport class ValidationError`,  // Wrong - tries to match across different lines\n        new_string: 'replaced',\n      });\n\n      // Should fail - not find a match\n      expect(result).toContain('Error: old_string not found');\n      // File should be unchanged\n      expect(readFileSync(filePath, 'utf-8')).toContain('export function toStructuredError');\n    });\n  });\n});\n"],"mappings":"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","ignoreList":[]}