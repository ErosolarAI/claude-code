455901bb483016449677baadeeb5e4b1
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _chalk = _interopRequireDefault(require("chalk"));
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
var _uiConstants = require("./uiConstants.js");
function _interopRequireDefault(e) { return e && e.__esModule ? e : { default: e }; }
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

/**
 * RL agent execution status for real-time display during dual-RL mode.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  /** Stack of collapsed tool results for Ctrl+O expansion */
  collapsedToolResults = [];
  maxCollapsedResults = 50;
  /** Track the last tool name for pairing with results */
  lastToolName = '';
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // Elapsed time color animation
  elapsedColorFrame = 0;
  elapsedColorFrames = ['#F59E0B', '#FBBF24', '#FCD34D', '#FDE68A', '#FCD34D', '#FBBF24'];
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  /** RL agent execution status for dual-RL mode display */
  rlStatus = {};

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences from text to prevent injection */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // Including bracketed paste markers (\x1b[200~ and \x1b[201~) which end with ~
    // eslint-disable-next-line no-control-regex
    return text.replace(/\x1b\[[0-9;]*[A-Za-z~]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }

    // macOS Option+key produces Unicode characters; handle them before key metadata checks.
    const macOptionChars = {
      '©': 'g',
      // Option+G
      '™': 'g',
      // Option+Shift+G
      'å': 'a',
      // Option+A
      'Å': 'a',
      // Option+Shift+A
      '√': 'v',
      // Option+V / Option+Shift+V
      '∂': 'd',
      // Option+D
      'Î': 'd',
      // Option+Shift+D (common macOS emission)
      '∆': 'd' // Common alternate delta symbol
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      // Clear any pending insert buffer so the symbol never lands in the prompt
      this.pendingInsertBuffer = '';
      switch (letter) {
        case 'a':
          this.emit('toggle-critical-approval');
          this.renderPrompt();
          return;
        case 'g':
          this.emit('toggle-auto-continue');
          this.renderPrompt();
          return;
        case 'd':
          this.emit('toggle-dual-rl');
          this.renderPrompt();
          return;
        case 'v':
          this.emit('toggle-verify');
          this.renderPrompt();
          return;
        default:
          break;
      }
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    const handleCtrlShiftToggle = letter => {
      // Ensure no buffered chars leak into the prompt
      this.pendingInsertBuffer = '';
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
      } else if (letter === 'g') {
        this.emit('toggle-auto-continue');
      } else if (letter === 'd') {
        this.emit('toggle-dual-rl');
      } else if (letter === 'v') {
        this.emit('toggle-verify');
      }
      this.renderPrompt();
    };
    if (isCtrlShift('a')) {
      handleCtrlShiftToggle('a');
      return;
    }
    if (isCtrlShift('g')) {
      handleCtrlShiftToggle('g');
      return;
    }
    if (isCtrlShift('d')) {
      handleCtrlShiftToggle('d');
      return;
    }
    if (isCtrlShift('v')) {
      handleCtrlShiftToggle('v');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }

    // Ctrl+L: Clear screen while preserving input
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPasteToBuffer();
        return;
      }
      // Clear screen and redraw
      this.output.write('\x1b[2J\x1b[H'); // Clear screen, move to top
      this.hasConversationContent = false;
      this.clearCollapsedResults();
      this.renderPrompt();
      return;
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }

    // Ctrl+A: Move cursor to start of line
    if (key.ctrl && key.name === 'a') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+E: Move cursor to end of line
    if (key.ctrl && key.name === 'e') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+W: Delete word backward
    if (key.ctrl && key.name === 'w') {
      if (this.cursor > 0) {
        // Find start of previous word
        let pos = this.cursor;
        // Skip trailing spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Ctrl+K: Delete from cursor to end of line
    if (key.ctrl && key.name === 'k') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Home: Move cursor to start
    if (key.name === 'home') {
      if (this.cursor !== 0) {
        this.cursor = 0;
        this.inputRenderOffset = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // End: Move cursor to end
    if (key.name === 'end') {
      if (this.cursor !== this.buffer.length) {
        this.cursor = this.buffer.length;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Left: Move cursor back one word
    if (key.meta && key.name === 'left') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        // Skip spaces
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        // Skip word characters
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Right: Move cursor forward one word
    if (key.meta && key.name === 'right') {
      if (this.cursor < this.buffer.length) {
        let pos = this.cursor;
        // Skip current word
        while (pos < this.buffer.length && this.buffer[pos] !== ' ') pos++;
        // Skip spaces
        while (pos < this.buffer.length && this.buffer[pos] === ' ') pos++;
        this.cursor = pos;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }

    // Alt+Backspace: Delete word backward (alternative to Ctrl+W)
    if (key.meta && key.name === 'backspace') {
      if (this.cursor > 0) {
        let pos = this.cursor;
        while (pos > 0 && this.buffer[pos - 1] === ' ') pos--;
        while (pos > 0 && this.buffer[pos - 1] !== ' ') pos--;
        this.buffer = this.buffer.slice(0, pos) + this.buffer.slice(this.cursor);
        this.cursor = pos;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }

    // Handle case where paste markers might be embedded in the string
    const pasteStartMarker = '\x1b[200~';
    const pasteEndMarker = '\x1b[201~';

    // Check if str contains paste start marker (handles chunked arrival)
    if (typeof str === 'string' && str.includes(pasteStartMarker)) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false;
      const pending = this.consumePendingInsertForPaste();
      // Extract content after the start marker
      const startIdx = str.indexOf(pasteStartMarker);
      let content = str.slice(startIdx + pasteStartMarker.length);
      // Check if end marker is also in this chunk
      if (content.includes(pasteEndMarker)) {
        const endIdx = content.indexOf(pasteEndMarker);
        content = content.slice(0, endIdx);
        this.pasteBuffer = pending + content;
        this.commitPasteBuffer();
        return true;
      }
      this.pasteBuffer = pending + content;
      this.cancelPlainPasteCapture();
      return true;
    }
    if (sequence === pasteStartMarker) {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume any pending insert buffer to prevent leak
      const pending = this.consumePendingInsertForPaste();
      this.pasteBuffer = pending; // Include any chars that arrived before bracketed paste started
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }

    // Check if str contains paste end marker
    if (typeof str === 'string' && str.includes(pasteEndMarker)) {
      const endIdx = str.indexOf(pasteEndMarker);
      const contentBefore = str.slice(0, endIdx);
      if (contentBefore) {
        this.appendToPasteBuffer('paste', contentBefore);
      }
      this.commitPasteBuffer();
      return true;
    }
    if (sequence === pasteEndMarker) {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    // Don't insert during paste operations - content goes to paste buffer
    if (this.inBracketedPaste || this.inPlainPaste) {
      return;
    }
    // If there's a collapsed paste and user types, expand to buffer first then insert at cursor
    if (this.collapsedPaste) {
      this.expandCollapsedPasteToBuffer();
    }
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets or slash commands to history/scrollback
    if (!this.secretMode && !normalized.startsWith('/')) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    } else if (!this.secretMode) {
      // Still track slash commands in history for convenience
      this.history.push(normalized);
      this.historyIndex = -1;
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // For prompt events, ensure the overlay is rendered immediately
        // This guarantees prompts are visible before async processing continues
        if (event.type === 'prompt') {
          if (this.output.isTTY) {
            this.allowPromptRender = true;
            this.renderPrompt();
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');

    // Immediately restore the prompt overlay so the chat box stays pinned during streaming
    if (this.output.isTTY && this.interactive && !this.disposed) {
      this.renderPromptOverlay(true);
    }
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        return event.content;
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.5) {
      return true; // Less than 50% letters = likely garbage
    }
    return false;
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ [Search] pattern: "foo", path: "src",
   *              output_mode: "content", head_limit: 30
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.tool(`[${nameMatch[1]}]`)}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ [ToolName] args...
    const prefix = `${bullet} ${_theme.theme.tool(`[${toolName}]`)} `;
    const prefixLen = toolName.length + 5; // "⏺ [ToolName] " visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix.trimEnd()}\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.key, arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : '';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(key, value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;
    const lowerKey = key.toLowerCase();
    const shouldPreserve = lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query' || lowerKey === 'command' || lowerKey === 'cmd';

    // Truncate long values when not explicitly preserving
    const maxLen = 40;
    const truncated = shouldPreserve || inner.length <= maxLen ? inner : inner.slice(0, maxLen - 3) + '...';
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ [Read] file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // Track tool name for pairing with result
    this.lastToolName = toolName;

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${_theme.theme.tool(`[${toolName}]`)}\n`;
    }
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${bullet} ${_theme.theme.tool(`[${toolName}]`)} ${argsStr}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParams(toolName, params, maxWidth);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping
   */
  formatToolParams(toolName, params, maxWidth) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${_theme.theme.tool(`[${toolName}]`)} `;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramText = `${param.key}: ${coloredValue}`;
      const paramStr = firstParam ? paramText : `, ${paramText}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      const plainLength = this.visibleLength(testLine);
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + paramText;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
  */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern' || lowerKey === 'query') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.tool(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        return _theme.theme.file?.path ? _theme.theme.file.path(path) : _theme.theme.ui.muted(path);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        return _theme.theme.ui.muted(cmd);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Parse common result patterns for summary
    const lineMatch = content.match(/(\d+)\s*lines?/i);
    const fileMatch = content.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = content.match(/read.*?(\d+)\s*lines?/i);

    // Check if content contains a file path or command that should be preserved
    const hasPath = /(?:^|\s)(?:\/[\w./-]+|[\w./-]+\/[\w./-]+)/.test(content);
    const hasCommand = /^\s*\$\s+.+|command:/i.test(content);
    const isPathOrDir = /^(?:File|Directory|Path):\s*/i.test(content);
    let summary;
    let preserveFull = false;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (content.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else if (isPathOrDir || hasPath || hasCommand) {
      // Preserve full content for paths, directories, and commands
      // Only show first line if multi-line
      const firstLine = content.split('\n')[0] || content;
      summary = firstLine;
      preserveFull = true;
    } else {
      // Use content directly, truncated if needed
      summary = content.length > 40 ? content.slice(0, 37) + '…' : content;
    }

    // Store collapsed result for Ctrl+O expansion
    this.collapsedToolResults.push({
      toolName: this.lastToolName || 'tool',
      content,
      summary,
      timestamp: Date.now()
    });

    // Trim to max size
    if (this.collapsedToolResults.length > this.maxCollapsedResults) {
      this.collapsedToolResults.shift();
    }
    const coloredSummary = this.colorResultSummary(summary);
    // Only show expand hint if content is actually collapsed (multi-line or was truncated)
    const hasMoreContent = content.includes('\n') || !preserveFull && content.length > 40;
    const expandHint = hasMoreContent ? ` ${_theme.theme.ui.muted('(ctrl+o to expand)')}` : '';
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary}${expandHint}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.info ?? (value => value)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   * Pops from the collapsed results stack and displays full content.
   */
  expandLastToolResult() {
    // First try the new stack, fallback to old lastToolResult
    const collapsed = this.collapsedToolResults.pop();
    if (!collapsed && !this.lastToolResult) {
      return false;
    }
    const content = collapsed?.content || this.lastToolResult || '';
    const toolName = collapsed?.toolName || 'result';

    // Format with tool name label
    const label = `${toolName}`;
    const rendered = this.wrapBulletText(content, {
      label,
      labelColor: _theme.theme.info
    });
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });

    // Clear lastToolResult if we used the stack
    if (collapsed) {
      this.lastToolResult = null;
    }
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  /**
   * Get count of expandable collapsed results
   */
  getCollapsedResultCount() {
    return this.collapsedToolResults.length;
  }

  /**
   * Clear all collapsed results (e.g., on new conversation)
   */
  clearCollapsedResults() {
    this.collapsedToolResults = [];
    this.lastToolResult = null;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.elapsedColorFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Update elapsed time color animation (slower cycle)
      if (this.spinnerFrame % 3 === 0) {
        this.elapsedColorFrame = (this.elapsedColorFrame + 1) % this.elapsedColorFrames.length;
      }
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 80); // ~12 FPS for smooth spinner animation
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
    this.elapsedColorFrame = 0;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }

  /**
   * Update RL agent execution status for display in the UI.
   * Called during dual-RL mode to show active agent, module/step progress, and win statistics.
   */
  updateRLStatus(status) {
    const next = {
      ...this.rlStatus,
      ...status
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.rlStatus);
    this.rlStatus = next;
    if (changed) {
      this.renderPrompt();
    }
  }

  /**
   * Clear RL agent status (e.g., when RL run completes).
   */
  clearRLStatus() {
    this.rlStatus = {};
    this.renderPrompt();
  }

  /**
   * Get current RL status for external access.
   */
  getRLStatus() {
    return this.rlStatus;
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }

      // Clear all previous lines
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        this.write('\r');
        this.write(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          this.write('\x1b[B');
        }
      }

      // If new height is greater, we need to add blank lines
      const extraLines = height - this.lastOverlayHeight;
      if (extraLines > 0) {
        for (let i = 0; i < extraLines; i++) {
          this.write('\n');
        }
      }

      // Move back to top of where overlay should start
      const moveBackUp = Math.max(0, height - 1);
      if (moveBackUp > 0) {
        this.write(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      this.write(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        this.write('\n');
      }
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      this.write(`\x1b[${linesToMoveUp}A`);
    }
    this.write(`\x1b[${promptCol}G`);
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      // Build parts with animated elapsed time color
      const elapsedColor = _chalk.default.hex(this.elapsedColorFrames[this.elapsedColorFrame % this.elapsedColorFrames.length] ?? '#F59E0B');
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsedColor(elapsed));
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityText = `${displayActivity.trim()}${needsEllipsis ? '…' : ''}`;
      const suffix = ` ${_theme.theme.ui.muted('(')}${parts.join(_theme.theme.ui.muted(' · '))}${_theme.theme.ui.muted(')')}`;

      // Build the full activity line with animated color for elapsed time
      const activityLine = `${prefix}${activityText}${suffix}`;

      // Always show full text - wrap to multiple lines if needed
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    const inputLines = inputLine.split('\n');
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = (0, _uiConstants.clampPercentage)(this.statusMeta.contextPercent);
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = Math.max(0, barWidth - filled);
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = (0, _uiConstants.getContextColor)(used, {
        error: _theme.theme.error,
        warning: _theme.theme.warning,
        info: _theme.theme.info,
        success: _theme.theme.success
      });
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }

    // Add RL agent status when dual-RL mode is active
    const rlSegments = this.buildRLStatusSegments();
    if (rlSegments.length > 0) {
      segments.push(...rlSegments);
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }

  /**
   * Build RL agent status segments for display during dual-RL execution.
   * Shows: tournament scoreboard, active agent, module/step progress, and scores.
   */
  buildRLStatusSegments() {
    const segments = [];
    const rl = this.rlStatus;

    // Only show RL status when there's meaningful data
    if (!rl.activeVariant && !rl.wins && !rl.currentModule) {
      return segments;
    }

    // Tournament scoreboard (always show when wins exist)
    if (rl.wins && (rl.wins.primary > 0 || rl.wins.refiner > 0 || rl.wins.ties > 0)) {
      const totalGames = rl.wins.primary + rl.wins.refiner + rl.wins.ties;
      const leader = rl.wins.primary > rl.wins.refiner ? 'primary' : rl.wins.refiner > rl.wins.primary ? 'refiner' : 'tie';

      // Scoreboard with colors based on leader
      const pColor = leader === 'primary' ? _theme.theme.success : _theme.theme.info;
      const rColor = leader === 'refiner' ? _theme.theme.success : _theme.theme.warning;
      const pScore = pColor(`${rl.wins.primary}`);
      const rScore = rColor(`${rl.wins.refiner}`);

      // Trophy for leader
      const trophy = leader === 'primary' ? _theme.theme.info('🏆') : leader === 'refiner' ? _theme.theme.warning('🏆') : '⚖️';

      // Win streak indicator
      const streakText = rl.streak && rl.streak > 1 ? _theme.theme.ui.muted(` 🔥${rl.streak}`) : '';
      segments.push(`${trophy}${pScore}${_theme.theme.ui.muted(':')}${rScore}${streakText}`);

      // Progress bar showing relative wins
      if (totalGames > 0) {
        const barWidth = 8;
        const pBars = Math.round(rl.wins.primary / totalGames * barWidth);
        const rBars = Math.round(rl.wins.refiner / totalGames * barWidth);
        const tBars = Math.max(0, barWidth - pBars - rBars);
        const bar = _theme.theme.info('█'.repeat(pBars)) + _theme.theme.ui.muted('░'.repeat(tBars)) + _theme.theme.warning('█'.repeat(rBars));
        segments.push(`[${bar}]`);
      }
    }

    // Active variant indicator
    if (rl.activeVariant) {
      const isParallel = rl.parallelExecution;
      if (isParallel) {
        // Both running in parallel
        segments.push(`${_theme.theme.info('⚡P')} ${_theme.theme.ui.muted('∥')} ${_theme.theme.warning('⚡R')}`);
      } else {
        const variantIcon = rl.activeVariant === 'primary' ? '▶' : '▷';
        const variantLabel = rl.activeVariant === 'primary' ? 'P' : 'R';
        const variantColor = rl.activeVariant === 'primary' ? _theme.theme.info : _theme.theme.warning;
        segments.push(`${variantIcon}${variantColor(variantLabel)}`);
      }
    }

    // Last winner indicator
    if (rl.lastWinner && rl.lastWinner !== 'tie') {
      const winnerIcon = rl.lastWinner === 'primary' ? _theme.theme.info('✓P') : _theme.theme.warning('✓R');
      segments.push(winnerIcon);
    } else if (rl.lastWinner === 'tie') {
      segments.push(_theme.theme.ui.muted('≈'));
    }

    // Current module/step (compact)
    if (rl.currentModule || rl.currentStep) {
      const stepText = rl.currentStep || rl.currentModule || '';
      if (stepText) {
        segments.push(_theme.theme.ui.muted(this.truncateMiddle(stepText, 15)));
      }
    }

    // Progress indicator (steps completed / total)
    if (typeof rl.stepsCompleted === 'number' && typeof rl.totalSteps === 'number' && rl.totalSteps > 0) {
      const pct = Math.round(rl.stepsCompleted / rl.totalSteps * 100);
      segments.push(_theme.theme.ui.muted(`${pct}%`));
    }

    // Current reward scores (compact, only during active comparison)
    if (rl.scores && (typeof rl.scores.primary === 'number' || typeof rl.scores.refiner === 'number')) {
      const pScore = typeof rl.scores.primary === 'number' ? rl.scores.primary.toFixed(2) : '-';
      const rScore = typeof rl.scores.refiner === 'number' ? rl.scores.refiner.toFixed(2) : '-';
      const pVal = rl.scores.primary ?? 0;
      const rVal = rl.scores.refiner ?? 0;
      const pDisplay = pVal > rVal ? _theme.theme.success(pScore) : _theme.theme.info(pScore);
      const rDisplay = rVal > pVal ? _theme.theme.success(rScore) : _theme.theme.warning(rScore);
      segments.push(`${pDisplay}${_theme.theme.ui.muted('/')}${rDisplay}`);
    }
    return segments;
  }

  /**
   * Truncate a string in the middle, showing start and end with ellipsis.
   */
  truncateMiddle(text, maxLen) {
    if (text.length <= maxLen) return text;
    const keepLen = Math.floor((maxLen - 3) / 2);
    return `${text.slice(0, keepLen)}...${text.slice(-keepLen)}`;
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }

  /**
   * Expand collapsed paste into the buffer without submitting (Ctrl+L).
   * Allows user to edit the pasted content before submission.
   */
  expandCollapsedPasteToBuffer() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Put the pasted content into the buffer for editing
    this.buffer = text;
    this.cursor = text.length;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }

  /**
   * Expand collapsed paste and submit immediately (Enter).
   * Used when user wants to send the pasted content as-is.
   */
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    const text = this.collapsedPaste.text;
    this.collapsedPaste = null;
    // Clear the buffer first to avoid any visual duplication
    this.buffer = '';
    this.cursor = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
    // Submit the paste content (displayUserPrompt is called within submitText for non-slash commands)
    this.submitText(text);
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        // Don't truncate - just push the line as-is (it fits within width)
        lines.push(current.trimEnd());
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(current.trimEnd());
    }

    // If no lines were produced, return the original text without truncation
    return lines.length ? lines : [text];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;
    const now = Date.now();
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl9jaGFsayIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfdGhlbWUiLCJfb3V0cHV0TW9kZSIsIl9hbmltYXRlZFN0YXR1cyIsIl9kZWJ1Z0xvZ2dlciIsIl91aUNvbnN0YW50cyIsImUiLCJfX2VzTW9kdWxlIiwiZGVmYXVsdCIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJvIiwiaSIsImYiLCJfX3Byb3RvX18iLCJoYXMiLCJnZXQiLCJzZXQiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImdldE93blByb3BlcnR5RGVzY3JpcHRvciIsIkVTQyIsIkhJREVfQ1VSU09SIiwiU0hPV19DVVJTT1IiLCJDTEVBUl9TQ1JFRU4iLCJDTEVBUl9MSU5FIiwiSE9NRSIsIkVOQUJMRV9CUkFDS0VURURfUEFTVEUiLCJESVNBQkxFX0JSQUNLRVRFRF9QQVNURSIsIlRPIiwicm93IiwiY29sIiwiVE9fQ09MIiwiRVJBU0VfRE9XTiIsIlJFVkVSU0UiLCJSRVNFVCIsIlNFVF9TQ1JPTExfUkVHSU9OIiwidG9wIiwiYm90dG9tIiwiUkVTRVRfU0NST0xMX1JFR0lPTiIsIlNBVkVfQ1VSU09SIiwiUkVTVE9SRV9DVVJTT1IiLCJORVdMSU5FX1BMQUNFSE9MREVSIiwiVW5pZmllZFVJUmVuZGVyZXIiLCJFdmVudEVtaXR0ZXIiLCJyb3dzIiwiY29scyIsImxhc3RSZW5kZXJXaWR0aCIsImV2ZW50UXVldWUiLCJpc1Byb2Nlc3NpbmdRdWV1ZSIsImJ1ZmZlciIsImN1cnNvciIsImhpc3RvcnkiLCJoaXN0b3J5SW5kZXgiLCJzdWdnZXN0aW9ucyIsInN1Z2dlc3Rpb25JbmRleCIsImF2YWlsYWJsZUNvbW1hbmRzIiwiaG90a2V5c0luVG9nZ2xlTGluZSIsIlNldCIsImNvbGxhcHNlZFBhc3RlIiwibW9kZSIsImxhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkVG9vbFJlc3VsdHMiLCJtYXhDb2xsYXBzZWRSZXN1bHRzIiwibGFzdFRvb2xOYW1lIiwic3RyZWFtaW5nU3RhcnRUaW1lIiwic3RhdHVzTWVzc2FnZSIsInN0YXR1c092ZXJyaWRlIiwic3RhdHVzU3RyZWFtaW5nIiwic3RyZWFtaW5nU3Bpbm5lciIsInRoaW5raW5nSW5kaWNhdG9yIiwic3Bpbm5lckZyYW1lIiwic3Bpbm5lckludGVydmFsIiwibWF4SW5saW5lUGFuZWxMaW5lcyIsImNvbXBhY3RpbmdTdGF0dXNNZXNzYWdlIiwiY29tcGFjdGluZ1N0YXR1c0ZyYW1lIiwiY29tcGFjdGluZ1N0YXR1c0ludGVydmFsIiwiY29tcGFjdGluZ1NwaW5uZXJGcmFtZXMiLCJhY3Rpdml0eU1lc3NhZ2UiLCJhY3Rpdml0eVBocmFzZUluZGV4IiwiYWN0aXZpdHlTdGFyRnJhbWUiLCJhY3Rpdml0eVN0YXJGcmFtZXMiLCJzdHJlYW1pbmdUb2tlbnMiLCJlbGFwc2VkQ29sb3JGcmFtZSIsImVsYXBzZWRDb2xvckZyYW1lcyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJybFN0YXR1cyIsImNsYW1wQ3Vyc29yIiwiTWF0aCIsIm1heCIsIm1pbiIsImxlbmd0aCIsImFwcGVuZFRvUGFzdGVCdWZmZXIiLCJ0ZXh0IiwicGFzdGVCdWZmZXJPdmVyZmxvdyIsImN1cnJlbnQiLCJwYXN0ZUJ1ZmZlciIsInBsYWluUGFzdGVCdWZmZXIiLCJyZW1haW5pbmciLCJtYXhQYXN0ZUJ1ZmZlclNpemUiLCJ0b0FkZCIsInNsaWNlIiwic2FuaXRpemVQYXN0ZUNvbnRlbnQiLCJyZXBsYWNlIiwiZm9ybWF0SG90a2V5IiwiY29tYm8iLCJ0cmltIiwidG9VcHBlckNhc2UiLCJsYXN0UHJvbXB0RXZlbnQiLCJwcm9tcHRIZWlnaHQiLCJsYXN0T3ZlcmxheUhlaWdodCIsImlubGluZVBhbmVsIiwiaGFzQ29udmVyc2F0aW9uQ29udGVudCIsImlzUHJvbXB0QWN0aXZlIiwiaW5wdXRSZW5kZXJPZmZzZXQiLCJwbGFpblBhc3RlSWRsZU1zIiwicGxhaW5QYXN0ZVdpbmRvd01zIiwicGxhaW5QYXN0ZVRyaWdnZXJDaGFycyIsInBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyIsImN1cnNvclZpc2libGVDb2x1bW4iLCJpbkJyYWNrZXRlZFBhc3RlIiwiaW5QbGFpblBhc3RlIiwicGxhaW5QYXN0ZVRpbWVyIiwicGFzdGVCdXJzdFdpbmRvd1N0YXJ0IiwicGFzdGVCdXJzdENoYXJDb3VudCIsInBsYWluUmVjZW50Q2h1bmtzIiwicGVuZGluZ0luc2VydEJ1ZmZlciIsInBlbmRpbmdJbnNlcnRUaW1lciIsInBlbmRpbmdJbnNlcnREZWxheU1zIiwibGFzdFJlbmRlcmVkRXZlbnRLZXkiLCJsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSIsImhhc1JlbmRlcmVkUHJvbXB0IiwiaGFzRXZlclJlbmRlcmVkT3ZlcmxheSIsImxhc3RPdmVybGF5IiwiYWxsb3dQcm9tcHRSZW5kZXIiLCJwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQiLCJzZWNyZXRNb2RlIiwicGVuZGluZ1JlbmRlciIsImxhc3RSZW5kZXJUaW1lIiwicmVuZGVyVGhyb3R0bGVNcyIsInJlbmRlclRocm90dGxlVGltZXIiLCJkaXNwb3NlZCIsImJvdW5kUmVzaXplSGFuZGxlciIsImJvdW5kS2V5cHJlc3NIYW5kbGVyIiwiaW5wdXRDYXB0dXJlIiwiY29uc3RydWN0b3IiLCJvdXRwdXQiLCJwcm9jZXNzIiwic3Rkb3V0IiwiaW5wdXQiLCJzdGRpbiIsIl9vcHRpb25zIiwiaW50ZXJhY3RpdmUiLCJCb29sZWFuIiwiaXNUVFkiLCJlbnYiLCJwbGFpbk1vZGUiLCJpc1BsYWluT3V0cHV0TW9kZSIsImNvbnRleHRNZXRlciIsIkNvbnRleHRNZXRlciIsInJsIiwiY3JlYXRlSW50ZXJmYWNlIiwidGVybWluYWwiLCJwcm9tcHQiLCJ0YWJTaXplIiwic2V0UHJvbXB0IiwidXBkYXRlVGVybWluYWxTaXplIiwicmVuZGVyUHJvbXB0Iiwib24iLCJzZXR1cElucHV0SGFuZGxlcnMiLCJpbml0aWFsaXplIiwiY2xlYXJQcm9tcHRBcmVhIiwid3JpdGUiLCJjbGVhbnVwIiwiY2FuY2VsSW5wdXRDYXB0dXJlIiwiRXJyb3IiLCJjYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSIsImNsZWFyVGltZW91dCIsImNsZWFySW50ZXJ2YWwiLCJzdG9wIiwiZGlzcG9zZSIsImRpc3Bvc2VBbmltYXRpb25zIiwicmVtb3ZlTGlzdGVuZXIiLCJyZW1vdmVBbGxMaXN0ZW5lcnMiLCJjbG9zZSIsInNldFJhd01vZGUiLCJzdXNwZW5kUHJvbXB0UmVuZGVyaW5nIiwicmVzdW1lUHJvbXB0UmVuZGVyaW5nIiwicmVuZGVyIiwiZW1pdEtleXByZXNzRXZlbnRzIiwic3RyIiwia2V5IiwiaGFuZGxlS2V5cHJlc3MiLCJlbWl0SW5wdXRDaGFuZ2UiLCJwYXlsb2FkIiwiZW1pdCIsIm5vcm1hbGl6ZWRLZXkiLCJwYXJzZUVzY2FwZVNlcXVlbmNlIiwia2V5Rm9yUGFzdGUiLCJzZXF1ZW5jZSIsImhhbmRsZUJyYWNrZXRlZFBhc3RlIiwiaGFuZGxlUGxhaW5QYXN0ZSIsIm1hY09wdGlvbkNoYXJzIiwibGV0dGVyIiwiY3RybCIsIm5hbWUiLCJjbGVhckJ1ZmZlciIsImlzQ3RybFNoaWZ0IiwibG93ZXJMZXR0ZXIiLCJ0b0xvd2VyQ2FzZSIsInVwcGVyTGV0dGVyIiwic2hpZnQiLCJtZXRhIiwic2VxIiwidGVzdCIsImhhbmRsZUN0cmxTaGlmdFRvZ2dsZSIsImhhZEJ1ZmZlciIsImV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIiLCJjbGVhckNvbGxhcHNlZFJlc3VsdHMiLCJlbnN1cmVDdXJzb3JWaXNpYmxlIiwicG9zIiwidXBkYXRlU3VnZ2VzdGlvbnMiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZSIsImFwcGx5U3VnZ2VzdGlvbiIsInN0YXJ0c1dpdGgiLCJzYWZlSW5kZXgiLCJjb21tYW5kIiwic3VibWl0VGV4dCIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBhc3RlU3RhcnRNYXJrZXIiLCJwYXN0ZUVuZE1hcmtlciIsImluY2x1ZGVzIiwicGVuZGluZyIsInN0YXJ0SWR4IiwiaW5kZXhPZiIsImNvbnRlbnQiLCJlbmRJZHgiLCJjb21taXRQYXN0ZUJ1ZmZlciIsImNvbnRlbnRCZWZvcmUiLCJzYW5pdGl6ZWQiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJzaG91bGRUcmltIiwib3B0aW9ucyIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsInJlc29sdmUiLCJub3JtYWxpemVkIiwiZGlzcGxheVVzZXJQcm9tcHQiLCJmaXJzdFNwYWNlIiwiaGFzQXJnVGV4dCIsImN1cnNvclNsaWNlIiwiY29tbWFuZFNsaWNlIiwiZmFsbGJhY2tTbGljZSIsInBhcnRpYWwiLCJ0cmltRW5kIiwicHJldmlvdXMiLCJjbWQiLCJpZHgiLCJmaW5kSW5kZXgiLCJzIiwic2V0QXZhaWxhYmxlQ29tbWFuZHMiLCJjb21tYW5kcyIsInN1Ym1pdCIsInNlbGVjdGVkIiwiZGlyZWN0aW9uIiwiY3VycmVudEluZGV4IiwibmV4dCIsImNsYW1wZWQiLCJhZGRFdmVudCIsInR5cGUiLCJsb2dEZWJ1ZyIsIm5vcm1hbGl6ZUV2ZW50VHlwZSIsImZvcm1hdHRlZCIsImZvcm1hdENvbnRlbnQiLCJyYXdUeXBlIiwidGltZXN0YW1wIiwiZXZlbnQiLCJpbnNlcnRJbmRleCIsInNwbGljZSIsInF1ZXVlTWljcm90YXNrIiwicHJvY2Vzc1F1ZXVlIiwicmVuZGVyUHJvbXB0T3ZlcmxheSIsImltbWVkaWF0ZSIsInJlbmRlclByb21wdEltbWVkaWF0ZSIsImNvYWxlc2NlZCIsImNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzIiwicmVuZGVyRXZlbnQiLCJlcnJvciIsIm1lc3NhZ2UiLCJkZWxheSIsImlzTWVyZ2VhYmxlIiwidGFyZ2V0IiwiaXNDb21wYWN0ZWQiLCJuZWVkc1NlcGFyYXRvciIsImZsdXNoRXZlbnRzIiwidGltZW91dE1zIiwic3RhcnQiLCJmb3JtYXR0ZWRQbGFpbiIsInNpZ25hdHVyZSIsImxpbmUiLCJ0aGVtZSIsInByaW1hcnkiLCJpc0dhcmJhZ2VPdXRwdXQiLCJjdXJhdGVkIiwiY3VyYXRlUmVhc29uaW5nQ29udGVudCIsInNob3VsZFJlbmRlclRob3VnaHQiLCJmb3JtYXRUaGlua2luZ0Jsb2NrIiwiZm9ybWF0Q29tcGFjdFRvb2xDYWxsIiwiZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQiLCJ3cmFwQnVsbGV0VGV4dCIsImxhYmVsIiwibGFiZWxDb2xvciIsIndhcm5pbmciLCJpbmZvIiwiaXNFcnJvciIsInVuZGVmaW5lZCIsImFscGhhQ291bnQiLCJtYXRjaCIsInRvdGFsQ291bnQiLCJsaW1pdGVkIiwibWF4U2VnbWVudHMiLCJzZWdtZW50cyIsImZsYXRNYXAiLCJzZWVuIiwiZGVkdXBlZCIsInNlZ21lbnQiLCJub3JtYWxpemVkU2VnbWVudCIsImFkZCIsInByaW9yaXRpemVkIiwicHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzIiwibGltaXRlZFNlbGVjdGlvbiIsImJ1bGxldGVkIiwiZW5zdXJlUmVhc29uaW5nQnVsbGV0IiwibG9va3NTdHJ1Y3R1cmVkVGhvdWdodCIsInNjb3JlZCIsImluZGV4Iiwic2NvcmUiLCJyZWFzb25pbmdTaWduYWxTY29yZSIsImhhc1NpZ25hbCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJsb3dlciIsImFjdGlvbktleXdvcmRzIiwia2V5d29yZCIsImZvcm1hdENsYXVkZUNvZGVCbG9jayIsImJ1bGxldCIsInJlc3VsdCIsImxpbmVJZHgiLCJ3b3JkcyIsImN1cnJlbnRMaW5lIiwid29yZCIsInByZWZpeCIsInRyaW1TdGFydCIsImZvcm1hdFRvb2xDYWxsIiwibmFtZU1hdGNoIiwidG9vbCIsInRvb2xOYW1lIiwiYXJnc1N0ciIsInByZWZpeExlbiIsImluZGVudCIsInJlcGVhdCIsImFyZ3MiLCJwYXJzZVRvb2xBcmdzIiwiYXJnIiwiYXJnVGV4dCIsInVpIiwibXV0ZWQiLCJmb3JtYXRBcmdWYWx1ZSIsInZhbHVlIiwic2VwYXJhdG9yIiwidGVzdExpbmUiLCJzdHJpcEFuc2kiLCJyZWdleCIsImV4ZWMiLCJpc1F1b3RlZCIsImlubmVyIiwibG93ZXJLZXkiLCJzaG91bGRQcmVzZXJ2ZSIsIm1heExlbiIsInRydW5jYXRlZCIsImZvcm1hdFRvb2xSZXN1bHQiLCJzdW1tYXJ5TWF0Y2giLCJwcmV2aWV3IiwicGFyYW1zIiwicGFyc2VUb29sUGFyYW1zIiwiZm9ybWF0VG9vbFBhcmFtcyIsImZpcnN0UGFyYW0iLCJwYXJhbSIsImNvbG9yZWRWYWx1ZSIsImNvbG9yUGFyYW1WYWx1ZSIsInBhcmFtVGV4dCIsInBhcmFtU3RyIiwicGxhaW5MZW5ndGgiLCJ2aXNpYmxlTGVuZ3RoIiwiZXh0cmFjdFRvb2xTdW1tYXJ5IiwicGF0aE1hdGNoIiwicGF0aCIsImZpbGUiLCJjbWRNYXRjaCIsImxpbmVNYXRjaCIsImZpbGVNYXRjaCIsInJlYWRNYXRjaCIsImhhc1BhdGgiLCJoYXNDb21tYW5kIiwiaXNQYXRoT3JEaXIiLCJzdW1tYXJ5IiwicHJlc2VydmVGdWxsIiwiZmlyc3RMaW5lIiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJoYXNNb3JlQ29udGVudCIsImV4cGFuZEhpbnQiLCJzdWNjZXNzIiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwiZmlyc3ROb25FbXB0eSIsInJhd0xpbmUiLCJjYW5kaWRhdGUiLCJwcmVmaXhMZW5ndGgiLCJ3cmFwVGV4dFRvV2lkdGgiLCJ3aWR0aCIsImZvcm1hdFN0cmVhbWluZ0VsYXBzZWQiLCJlbGFwc2VkIiwiZmxvb3IiLCJtaW5zIiwic2VjcyIsImZvcm1hdENvbXBhY3RCbG9jayIsInBhZGRpbmciLCJsZWZ0UGFkIiwicmlnaHRQYWQiLCJjZWlsIiwiYWRkQ29tcGFjdEJsb2NrIiwiZm9ybWF0dGVkQ29udGVudCIsImV4cGFuZExhc3RUb29sUmVzdWx0IiwiY29sbGFwc2VkIiwicG9wIiwicmVuZGVyZWQiLCJnZXRDb2xsYXBzZWRSZXN1bHRDb3VudCIsInNldE1vZGUiLCJ3YXNTdHJlYW1pbmciLCJzdGFydFNwaW5uZXJBbmltYXRpb24iLCJzdG9wU3Bpbm5lckFuaW1hdGlvbiIsInNldEludGVydmFsIiwic3Bpbm5lckZyYW1lcyIsImJyYWlsbGUiLCJzZXRBY3Rpdml0eSIsInVwZGF0ZVN0cmVhbWluZ1Rva2VucyIsInRva2VucyIsImZvcm1hdFRva2VuQ291bnQiLCJTdHJpbmciLCJ0b0ZpeGVkIiwicm91bmQiLCJnZXRNb2RlIiwidXBkYXRlU3RhdHVzIiwidXBkYXRlU3RhdHVzQnVuZGxlIiwibWFpbiIsIm92ZXJyaWRlIiwic3RyZWFtaW5nIiwic3RhdHVzIiwicHJldlN0cmVhbWluZyIsImNoYW5nZWQiLCJtYWluQ2hhbmdlZCIsIm92ZXJyaWRlQ2hhbmdlZCIsInN0cmVhbWluZ0NoYW5nZWQiLCJzdHJlYW1pbmdJbnRyb2R1Y2UiLCJzdHJlYW1pbmdDbGVhcmVkIiwib25seVN0cmVhbWluZ0NoYW5nZWQiLCJza2lwU3RyZWFtaW5nUmVuZGVyIiwic2hvdWxkUmVuZGVyIiwidXBkYXRlU3RhdHVzTWV0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJ1cGRhdGVNb2RlVG9nZ2xlcyIsInN0YXRlIiwidmVyaWZpY2F0aW9uSG90a2V5IiwidGhpbmtpbmdIb3RrZXkiLCJjcml0aWNhbEFwcHJvdmFsSG90a2V5IiwiYXV0b0NvbnRpbnVlSG90a2V5IiwiZHVhbFJsSG90a2V5IiwiZGVidWdIb3RrZXkiLCJjbGVhciIsInVwZGF0ZVJMU3RhdHVzIiwiY2xlYXJSTFN0YXR1cyIsImdldFJMU3RhdHVzIiwic2V0SW5saW5lUGFuZWwiLCJoYXNDb250ZW50IiwibGltaXRJbmxpbmVQYW5lbCIsInN1cHBvcnRzSW5saW5lUGFuZWwiLCJjbGVhcklubGluZVBhbmVsIiwibWF4TGluZXMiLCJvdmVyZmxvdyIsImluZGljYXRvciIsInRhaWxDb3VudCIsInRhaWwiLCJvdmVybGF5IiwiYnVpbGRPdmVybGF5TGluZXMiLCJyZW5kZXJlZExpbmVzIiwidHJ1bmNhdGVMaW5lIiwicHJvbXB0SW5kZXgiLCJoZWlnaHQiLCJsaW5lc1RvVG9wIiwiZXh0cmFMaW5lcyIsIm1vdmVCYWNrVXAiLCJwcm9tcHRDb2wiLCJsaW5lc1RvTW92ZVVwIiwiZGl2aWRlciIsImZhbGxiYWNrQWN0aXZpdHkiLCJyYXciLCJzcGlubmVyQ2hhcnMiLCJzcGlubmVyQ2hhciIsInN0YXJDaGFyIiwic3Bpbm5lckRlY29yYXRlZCIsImFjY2VudCIsImdlbmVyaWNBY3Rpdml0aWVzIiwiZGlzcGxheUFjdGl2aXR5IiwibmVlZHNFbGxpcHNpcyIsImVsYXBzZWRDb2xvciIsImNoYWxrIiwiaGV4IiwicGFydHMiLCJhY3Rpdml0eVRleHQiLCJhY3Rpdml0eUxpbmUiLCJ3cmFwcGVkIiwid3JhcE92ZXJsYXlMaW5lIiwiaW5wdXRMaW5lIiwiYnVpbGRJbnB1dExpbmUiLCJpbnB1dExpbmVzIiwicGFuZWxMaW5lIiwic3VnZ2VzdGlvbiIsImlzQWN0aXZlIiwibWFya2VyIiwiY21kVGV4dCIsImRlc2NUZXh0IiwiZGVzY3JpcHRpb24iLCJtb2RlbENvbnRleHRMaW5lIiwiYnVpbGRNb2RlbENvbnRleHRMaW5lIiwiY2hyb21lTGluZXMiLCJidWlsZENocm9tZUxpbmVzIiwiY2hyb21lTGluZSIsInRvZ2dsZUxpbmVzIiwiYnVpbGRJbmxpbmVUb2dnbGVMaW5lIiwidG9nZ2xlTGluZSIsImxlZ2VuZExpbmVzIiwiYnVpbGRUb2dnbGVMZWdlbmQiLCJsZWdlbmQiLCJtb2RlbCIsInByb3ZpZGVyIiwiY29udGV4dFBlcmNlbnQiLCJ1c2VkIiwiY2xhbXBQZXJjZW50YWdlIiwiYmFyV2lkdGgiLCJmaWxsZWQiLCJlbXB0eSIsImJhckNvbG9yIiwiZ2V0Q29udGV4dENvbG9yIiwiYmFyIiwiYXV0b0NvbnRpbnVlQWN0aXZlIiwidmVyaWZpY2F0aW9uQWN0aXZlIiwiYXBwcm92YWxNb2RlIiwidGhpbmtpbmdMYWJlbCIsInRoaW5raW5nTW9kZUxhYmVsIiwidG9nZ2xlcyIsInJsT24iLCJybEljb24iLCJybEV4cGxhaW4iLCJjb250SWNvbiIsImNvbnRTdGF0dXMiLCJjb250RXhwbGFpbiIsInZlcmlmeUljb24iLCJ2ZXJpZnlTdGF0dXMiLCJ2ZXJpZnlFeHBsYWluIiwiYXBwckljb24iLCJhcHByU3RhdHVzIiwiYXBwckV4cGxhaW4iLCJ0aGlua2luZ0lzRGVlcCIsInRoaW5rSWNvbiIsInRoaW5rU3RhdHVzIiwidGhpbmtFeHBsYWluIiwiZGVidWdBY3RpdmUiLCJkZWJ1Z0ljb24iLCJkZWJ1Z1N0YXR1cyIsImRlYnVnRXhwbGFpbiIsIndyYXBTZWdtZW50cyIsInN0YXR1c0xpbmVzIiwiYnVpbGRTdGF0dXNCbG9jayIsIm1ldGFMaW5lcyIsImJ1aWxkTWV0YUJsb2NrIiwiYWJicmV2aWF0ZVBhdGgiLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwicHJvZmlsZSIsImZvcm1hdE1ldGFTZWdtZW50Iiwid29ya3NwYWNlIiwiZGlyZWN0b3J5Iiwid3JpdGVzIiwidG9vbFN1bW1hcnkiLCJzZXNzaW9uTGFiZWwiLCJ2ZXJzaW9uIiwicmxTZWdtZW50cyIsImJ1aWxkUkxTdGF0dXNTZWdtZW50cyIsImFjdGl2ZVZhcmlhbnQiLCJ3aW5zIiwiY3VycmVudE1vZHVsZSIsInJlZmluZXIiLCJ0aWVzIiwidG90YWxHYW1lcyIsImxlYWRlciIsInBDb2xvciIsInJDb2xvciIsInBTY29yZSIsInJTY29yZSIsInRyb3BoeSIsInN0cmVha1RleHQiLCJzdHJlYWsiLCJwQmFycyIsInJCYXJzIiwidEJhcnMiLCJpc1BhcmFsbGVsIiwicGFyYWxsZWxFeGVjdXRpb24iLCJ2YXJpYW50SWNvbiIsInZhcmlhbnRMYWJlbCIsInZhcmlhbnRDb2xvciIsImxhc3RXaW5uZXIiLCJ3aW5uZXJJY29uIiwiY3VycmVudFN0ZXAiLCJzdGVwVGV4dCIsInRydW5jYXRlTWlkZGxlIiwic3RlcHNDb21wbGV0ZWQiLCJ0b3RhbFN0ZXBzIiwicGN0Iiwic2NvcmVzIiwicFZhbCIsInJWYWwiLCJwRGlzcGxheSIsInJEaXNwbGF5Iiwia2VlcExlbiIsInN0YXR1c2VzIiwiYXJyIiwiY29sb3JpemVyIiwiYnVpbGRDb250cm9sTGluZXMiLCJidWlsZFRvZ2dsZUxpbmUiLCJzaG9ydGN1dExpbmUiLCJidWlsZFNob3J0Y3V0TGluZSIsImJ1aWxkQ29tcGFjdFRvZ2dsZUxpbmUiLCJlZGl0SWNvbiIsImVkaXRTdGF0ZSIsImN5Y2xlSGludCIsImFkZFRvZ2dsZSIsImhvdGtleSIsImF1dG9WZXJpZnlBY3RpdmUiLCJ2ZXJpZnlWYWx1ZSIsImFwcHJvdmFsQWN0aXZlIiwidGhpbmtpbmdMYWJlbFJhdyIsInRoaW5raW5nQWN0aXZlIiwiZHVhbFJsQWN0aXZlIiwibW9kZVZhbHVlIiwiYnVpbGRMaW5lIiwiaW5jbHVkZUhvdGtleXMiLCJ0b2dnbGUiLCJzdGF0ZVRleHQiLCJob3RrZXlUZXh0IiwiYWRkSG90a2V5IiwicHJvbXB0V2lkdGgiLCJjb250aW51YXRpb25JbmRlbnQiLCJjb250aW51YXRpb25XaWR0aCIsInJhd0J1ZmZlciIsImJ1ZmZlckxpbmVzIiwidG90YWxDaGFycyIsImN1cnNvckxpbmUiLCJjdXJzb3JDb2wiLCJmb3VuZEN1cnNvciIsImxpbmVJbmRleCIsImlzRmlyc3RMb2dpY2FsTGluZSIsImxpbmVTdGFydENoYXIiLCJmaXJzdExpbmVXaWR0aCIsImNvbnRMaW5lV2lkdGgiLCJpc0ZpcnN0RGlzcGxheUxpbmUiLCJkaXNwbGF5TGluZSIsImNodW5rU3RhcnQiLCJjaHVua0VuZCIsIm9mZnNldEluQ2h1bmsiLCJsYXN0TGluZSIsInRhcmdldExpbmUiLCJ2aXNpYmxlUGFydCIsImN1cnNvclBvcyIsImJlZm9yZSIsImNoYXJBdCIsImFmdGVyIiwidGV4dFBhcnQiLCJidWlsZElucHV0V2luZG93IiwiYXZhaWxhYmxlIiwiY3Vyc29ySW5kZXgiLCJvZmZzZXQiLCJtYXhPZmZzZXQiLCJ3aW5kb3ciLCJkaXNwbGF5IiwiY2hhciIsImN1cnNvckluV2luZG93IiwiY2FwdHVyZUlucHV0IiwiUHJvbWlzZSIsInJlamVjdCIsInJlc2V0QnVmZmVyIiwicmVhc29uIiwiY2FwdHVyZSIsImxpbWl0IiwidmlzaWJsZSIsInRva2VuIiwic2xpY2VMZW5ndGgiLCJnZXRCdWZmZXIiLCJnZXRDdXJzb3IiLCJzZXRCdWZmZXIiLCJyZXF1ZXN0ZWRDdXJzb3IiLCJzZXRTZWNyZXRNb2RlIiwiZW5hYmxlZCIsInNldE1vZGVTdGF0dXMiLCJzaG93Q29tcGFjdGluZ1N0YXR1cyIsImhpZGVDb21wYWN0aW5nU3RhdHVzIiwiZW1pdFByb21wdCIsInB1c2hQcm9tcHRFdmVudCIsIm1zIiwiZGF0YSIsImNvbHVtbnMiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiVW5pZmllZFVJUmVuZGVyZXIudHMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBVbmlmaWVkVUlSZW5kZXJlciAtIENsYXVkZSBDb2RlIHN0eWxlIG1pbmltYWxpc3QgdGVybWluYWwgVUkuXG4gKlxuICogR29hbHM6XG4gKiAtIFNpbmdsZSBldmVudCBwaXBlbGluZSBmb3IgZXZlcnl0aGluZyAocHJvbXB0IOKGkiB0aG91Z2h0IOKGkiB0b29sL2J1aWxkL3Rlc3Qg4oaSIHJlc3BvbnNlKS5cbiAqIC0gUGlubmVkIHN0YXR1cy9tZXRhIG9ubHkgKG5ldmVyIGluIHNjcm9sbGJhY2spLlxuICogLSBTY3JvbGxiYWNrIG9ubHkgc2hvd3MgZXZlbnRzOyBubyBkdXBsaWNhdGUgc3RhdHVzIGxpa2UgXCJXb3JraW5nIG9uIHlvdXIgcmVxdWVzdFwiIG9yIFwiUmVhZHkgZm9yIHByb21wdHNcIi5cbiAqIC0gU3RyZWFtaW5nOiBmaXJzdCBjaHVuayBzZXRzIGEgb25lLWxpbmUgYmFubmVyOyByZW1haW5kZXIgc3RyZWFtcyBuYXR1cmFsbHkgKG9wdGlvbmFsKS5cbiAqIC0gQ29sbGFwc2libGUtbGlrZSBzdW1tYXJpZXM6IHdlIGZvcm1hdCBhIGNvbXBhY3QgaGVhZGluZyB3aXRoIGFuIGVsbGlwc2lzIGluZGljYXRvciwgYnV0IGF2b2lkIGN0cmwrbyBoaW50cy5cbiAqL1xuXG5pbXBvcnQgKiBhcyByZWFkbGluZSBmcm9tICdub2RlOnJlYWRsaW5lJztcbmltcG9ydCB7IEV2ZW50RW1pdHRlciB9IGZyb20gJ25vZGU6ZXZlbnRzJztcbmltcG9ydCB7IGhvbWVkaXIgfSBmcm9tICdub2RlOm9zJztcbmltcG9ydCBjaGFsayBmcm9tICdjaGFsayc7XG5pbXBvcnQgeyB0aGVtZSwgc3Bpbm5lckZyYW1lcyB9IGZyb20gJy4vdGhlbWUuanMnO1xuaW1wb3J0IHsgaXNQbGFpbk91dHB1dE1vZGUgfSBmcm9tICcuL291dHB1dE1vZGUuanMnO1xuaW1wb3J0IHsgQW5pbWF0ZWRTcGlubmVyLCBUaGlua2luZ0luZGljYXRvciwgQ29udGV4dE1ldGVyLCBkaXNwb3NlQW5pbWF0aW9ucyB9IGZyb20gJy4vYW5pbWF0ZWRTdGF0dXMuanMnO1xuaW1wb3J0IHsgbG9nRGVidWcgfSBmcm9tICcuLi91dGlscy9kZWJ1Z0xvZ2dlci5qcyc7XG5pbXBvcnQge1xuICBFTExJUFNJUyxcbiAgVUlfU1RSSU5HUyxcbiAgRElTUExBWV9MSU1JVFMsXG4gIHRydW5jYXRlU3RyaW5nLFxuICBjbGFtcFBlcmNlbnRhZ2UsXG4gIGdldENvbnRleHRDb2xvcixcbiAgZm9ybWF0RHVyYXRpb25Ncyxcbn0gZnJvbSAnLi91aUNvbnN0YW50cy5qcyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tbWFuZFN1Z2dlc3Rpb24ge1xuICBjb21tYW5kOiBzdHJpbmc7XG4gIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIGNhdGVnb3J5Pzogc3RyaW5nO1xufVxuXG50eXBlIENhbm9uaWNhbEV2ZW50VHlwZSA9ICdwcm9tcHQnIHwgJ3Rob3VnaHQnIHwgJ3N0cmVhbScgfCAndG9vbCcgfCAndG9vbC1yZXN1bHQnIHwgJ2J1aWxkJyB8ICd0ZXN0JyB8ICdyZXNwb25zZSc7XG5cbmV4cG9ydCB0eXBlIFJlbmRlcmVyRXZlbnRUeXBlID1cbiAgfCBDYW5vbmljYWxFdmVudFR5cGVcbiAgfCAncmF3J1xuICB8ICdiYW5uZXInXG4gIHwgJ2Vycm9yJ1xuICB8ICdzdHJlYW1pbmcnXG4gIHwgJ3Rvb2wtY2FsbCdcbiAgfCAndG9vbC1yZXN1bHQnO1xuXG50eXBlIFVJRXZlbnQgPSB7XG4gIHR5cGU6IENhbm9uaWNhbEV2ZW50VHlwZTtcbiAgcmF3VHlwZTogUmVuZGVyZXJFdmVudFR5cGU7XG4gIGNvbnRlbnQ6IHN0cmluZztcbiAgdGltZXN0YW1wOiBudW1iZXI7XG4gIGlzQ29tcGFjdGVkPzogYm9vbGVhbjsgLy8gQ2xhdWRlIENvZGUgc3R5bGUgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2tcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZFVJUmVuZGVyZXJPcHRpb25zIHtcbiAgZGVidWc/OiBib29sZWFuO1xufVxuXG50eXBlIElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gIHRleHQ6IHN0cmluZztcbiAgY3Vyc29yOiBudW1iZXI7XG59O1xuXG5pbnRlcmZhY2UgTW9kZVRvZ2dsZVN0YXRlIHtcbiAgdmVyaWZpY2F0aW9uRW5hYmxlZDogYm9vbGVhbjtcbiAgdmVyaWZpY2F0aW9uSG90a2V5Pzogc3RyaW5nO1xuICBhdXRvQ29udGludWVFbmFibGVkPzogYm9vbGVhbjtcbiAgYXV0b0NvbnRpbnVlSG90a2V5Pzogc3RyaW5nO1xuICB0aGlua2luZ01vZGVMYWJlbD86IHN0cmluZyB8IG51bGw7XG4gIHRoaW5raW5nSG90a2V5Pzogc3RyaW5nO1xuICBjcml0aWNhbEFwcHJvdmFsTW9kZT86ICdhdXRvJyB8ICdhcHByb3ZhbCc7XG4gIGNyaXRpY2FsQXBwcm92YWxIb3RrZXk/OiBzdHJpbmc7XG4gIGR1YWxSbEVuYWJsZWQ/OiBib29sZWFuO1xuICBkdWFsUmxIb3RrZXk/OiBzdHJpbmc7XG4gIGRlYnVnRW5hYmxlZD86IGJvb2xlYW47XG4gIGRlYnVnSG90a2V5Pzogc3RyaW5nO1xufVxuXG4vKipcbiAqIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIHJlYWwtdGltZSBkaXNwbGF5IGR1cmluZyBkdWFsLVJMIG1vZGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgUkxBZ2VudFN0YXR1cyB7XG4gIC8qKiBDdXJyZW50IGFjdGl2ZSB2YXJpYW50IGJlaW5nIGV4ZWN1dGVkICovXG4gIGFjdGl2ZVZhcmlhbnQ/OiAncHJpbWFyeScgfCAncmVmaW5lcicgfCBudWxsO1xuICAvKiogQ3VycmVudCBtb2R1bGUgYmVpbmcgcHJvY2Vzc2VkICovXG4gIGN1cnJlbnRNb2R1bGU/OiBzdHJpbmc7XG4gIC8qKiBDdXJyZW50IHN0ZXAgd2l0aGluIHRoZSBtb2R1bGUgKi9cbiAgY3VycmVudFN0ZXA/OiBzdHJpbmc7XG4gIC8qKiBXaW4gc3RhdGlzdGljcyBmb3IgcHJpbWFyeSB2cyByZWZpbmVyICovXG4gIHdpbnM/OiB7IHByaW1hcnk6IG51bWJlcjsgcmVmaW5lcjogbnVtYmVyOyB0aWVzOiBudW1iZXIgfTtcbiAgLyoqIEN1cnJlbnQgcmV3YXJkIHNjb3JlcyBpZiBhdmFpbGFibGUgKi9cbiAgc2NvcmVzPzogeyBwcmltYXJ5PzogbnVtYmVyOyByZWZpbmVyPzogbnVtYmVyIH07XG4gIC8qKiBXaGV0aGVyIHZhcmlhbnRzIGFyZSBydW5uaW5nIGluIHBhcmFsbGVsICovXG4gIHBhcmFsbGVsRXhlY3V0aW9uPzogYm9vbGVhbjtcbiAgLyoqIFRvdGFsIHN0ZXBzIGNvbXBsZXRlZCAqL1xuICBzdGVwc0NvbXBsZXRlZD86IG51bWJlcjtcbiAgLyoqIFRvdGFsIHN0ZXBzIHRvIHByb2Nlc3MgKi9cbiAgdG90YWxTdGVwcz86IG51bWJlcjtcbiAgLyoqIExhc3Qgc3RlcCB3aW5uZXIgZm9yIGNlbGVicmF0aW9uICovXG4gIGxhc3RXaW5uZXI/OiAncHJpbWFyeScgfCAncmVmaW5lcicgfCAndGllJyB8IG51bGw7XG4gIC8qKiBTdHJlYWsgY291bnQgZm9yIGN1cnJlbnQgbGVhZGVyICovXG4gIHN0cmVhaz86IG51bWJlcjtcbn1cblxuY29uc3QgRVNDID0ge1xuICBISURFX0NVUlNPUjogJ1xceDFiWz8yNWwnLFxuICBTSE9XX0NVUlNPUjogJ1xceDFiWz8yNWgnLFxuICBDTEVBUl9TQ1JFRU46ICdcXHgxYlsySicsXG4gIENMRUFSX0xJTkU6ICdcXHgxYlsySycsXG4gIEhPTUU6ICdcXHgxYltIJyxcbiAgRU5BQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0aCcsXG4gIERJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRsJyxcbiAgVE86IChyb3c6IG51bWJlciwgY29sOiBudW1iZXIpID0+IGBcXHgxYlske3Jvd307JHtjb2x9SGAsXG4gIFRPX0NPTDogKGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtjb2x9R2AsXG4gIEVSQVNFX0RPV046ICdcXHgxYltKJyxcbiAgUkVWRVJTRTogJ1xceDFiWzdtJyxcbiAgUkVTRVQ6ICdcXHgxYlswbScsXG4gIC8vIFNjcm9sbCByZWdpb24gY29udHJvbCAtIENSSVRJQ0FMIGZvciBmaXhlZCBib3R0b20gb3ZlcmxheVxuICBTRVRfU0NST0xMX1JFR0lPTjogKHRvcDogbnVtYmVyLCBib3R0b206IG51bWJlcikgPT4gYFxceDFiWyR7dG9wfTske2JvdHRvbX1yYCxcbiAgUkVTRVRfU0NST0xMX1JFR0lPTjogJ1xceDFiW3InLFxuICBTQVZFX0NVUlNPUjogJ1xceDFiW3MnLFxuICBSRVNUT1JFX0NVUlNPUjogJ1xceDFiW3UnLFxufSBhcyBjb25zdDtcblxuY29uc3QgTkVXTElORV9QTEFDRUhPTERFUiA9ICfihrUnO1xuXG5leHBvcnQgY2xhc3MgVW5pZmllZFVJUmVuZGVyZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBybDogcmVhZGxpbmUuSW50ZXJmYWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluTW9kZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnRlcmFjdGl2ZTogYm9vbGVhbjtcblxuICBwcml2YXRlIHJvd3MgPSAyNDtcbiAgcHJpdmF0ZSBjb2xzID0gODA7XG4gIHByaXZhdGUgbGFzdFJlbmRlcldpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGV2ZW50UXVldWU6IFVJRXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIGlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBidWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBjdXJzb3IgPSAwO1xuICBwcml2YXRlIGhpc3Rvcnk6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaGlzdG9yeUluZGV4ID0gLTE7XG4gIHByaXZhdGUgc3VnZ2VzdGlvbnM6IHsgY29tbWFuZDogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBjYXRlZ29yeT86IHN0cmluZyB9W10gPSBbXTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBhdmFpbGFibGVDb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgcHJpdmF0ZSBob3RrZXlzSW5Ub2dnbGVMaW5lOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBjb2xsYXBzZWRQYXN0ZTogeyB0ZXh0OiBzdHJpbmc7IGxpbmVzOiBudW1iZXI7IGNoYXJzOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgbW9kZTogJ2lkbGUnIHwgJ3N0cmVhbWluZycgPSAnaWRsZSc7XG4gIHByaXZhdGUgbGFzdFRvb2xSZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICAvKiogU3RhY2sgb2YgY29sbGFwc2VkIHRvb2wgcmVzdWx0cyBmb3IgQ3RybCtPIGV4cGFuc2lvbiAqL1xuICBwcml2YXRlIGNvbGxhcHNlZFRvb2xSZXN1bHRzOiBBcnJheTx7XG4gICAgdG9vbE5hbWU6IHN0cmluZztcbiAgICBjb250ZW50OiBzdHJpbmc7XG4gICAgc3VtbWFyeTogc3RyaW5nO1xuICAgIHRpbWVzdGFtcDogbnVtYmVyO1xuICB9PiA9IFtdO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heENvbGxhcHNlZFJlc3VsdHMgPSA1MDtcbiAgLyoqIFRyYWNrIHRoZSBsYXN0IHRvb2wgbmFtZSBmb3IgcGFpcmluZyB3aXRoIHJlc3VsdHMgKi9cbiAgcHJpdmF0ZSBsYXN0VG9vbE5hbWU6IHN0cmluZyA9ICcnO1xuICBwcml2YXRlIHN0cmVhbWluZ1N0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzT3ZlcnJpZGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c1N0cmVhbWluZzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gQW5pbWF0ZWQgVUkgY29tcG9uZW50c1xuICBwcml2YXRlIHN0cmVhbWluZ1NwaW5uZXI6IEFuaW1hdGVkU3Bpbm5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHRoaW5raW5nSW5kaWNhdG9yOiBUaGlua2luZ0luZGljYXRvciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbnRleHRNZXRlcjogQ29udGV4dE1ldGVyO1xuICBwcml2YXRlIHNwaW5uZXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgc3Bpbm5lckludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heElubGluZVBhbmVsTGluZXMgPSAxMjtcblxuICAvLyBDb21wYWN0aW5nIHN0YXR1cyBhbmltYXRpb25cbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzTWVzc2FnZSA9ICcnO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNGcmFtZSA9IDA7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbXBhY3RpbmdTcGlubmVyRnJhbWVzID0gWyfinLsnLCAn4py8JywgJ+KcuycsICfinLonXTtcblxuICAvLyBBbmltYXRlZCBhY3Rpdml0eSBsaW5lIChlLmcuLCBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiKVxuICBwcml2YXRlIGFjdGl2aXR5TWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWN0aXZpdHlQaHJhc2VJbmRleCA9IDA7XG4gIHByaXZhdGUgYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGFjdGl2aXR5U3RhckZyYW1lcyA9IFsn4pyzJywgJ+KctCcsICfinLUnLCAn4py2JywgJ+KctycsICfinLgnXTtcbiAgLy8gVG9rZW4gY291bnQgZHVyaW5nIHN0cmVhbWluZ1xuICBwcml2YXRlIHN0cmVhbWluZ1Rva2VucyA9IDA7XG4gIC8vIEVsYXBzZWQgdGltZSBjb2xvciBhbmltYXRpb25cbiAgcHJpdmF0ZSBlbGFwc2VkQ29sb3JGcmFtZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgZWxhcHNlZENvbG9yRnJhbWVzID0gWycjRjU5RTBCJywgJyNGQkJGMjQnLCAnI0ZDRDM0RCcsICcjRkRFNjhBJywgJyNGQ0QzNEQnLCAnI0ZCQkYyNCddO1xuICAvLyBVc2VyLWZyaWVuZGx5IGFjdGl2aXR5IHBocmFzZXMgKGNsZWFuLCBwcm9mZXNzaW9uYWwpXG4gIHByaXZhdGUgcmVhZG9ubHkgZnVuQWN0aXZpdHlQaHJhc2VzID0gW1xuICAgICdUaGlua2luZycsICdQcm9jZXNzaW5nJywgJ0FuYWx5emluZycsICdXb3JraW5nJywgJ1ByZXBhcmluZycsXG4gIF07XG4gIHByaXZhdGUgcmVhZG9ubHkgbWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzID0gODtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnMgPSAxODAwO1xuICBwcml2YXRlIHJlYWRvbmx5IHRob3VnaHREZWR1cFdpbmRvd01zID0gMTUwMDA7XG4gIHByaXZhdGUgbGFzdEN1cmF0ZWRUaG91Z2h0OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBzdGF0dXNNZXRhOiB7XG4gICAgbW9kZWw/OiBzdHJpbmc7XG4gICAgcHJvdmlkZXI/OiBzdHJpbmc7XG4gICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgY29udGV4dFBlcmNlbnQ/OiBudW1iZXI7XG4gICAgcHJvZmlsZT86IHN0cmluZztcbiAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgZGlyZWN0b3J5Pzogc3RyaW5nO1xuICAgIHdyaXRlcz86IHN0cmluZztcbiAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgdGhpbmtpbmdMYWJlbD86IHN0cmluZztcbiAgICBhdXRvc2F2ZT86IGJvb2xlYW47XG4gICAgdmVyc2lvbj86IHN0cmluZztcbiAgICB0b29sU3VtbWFyeT86IHN0cmluZztcbiAgfSA9IHt9O1xuICBwcml2YXRlIHRvZ2dsZVN0YXRlOiBNb2RlVG9nZ2xlU3RhdGUgPSB7XG4gICAgdmVyaWZpY2F0aW9uRW5hYmxlZDogZmFsc2UsXG4gICAgYXV0b0NvbnRpbnVlRW5hYmxlZDogZmFsc2UsXG4gICAgY3JpdGljYWxBcHByb3ZhbE1vZGU6ICdhdXRvJyxcbiAgICBkdWFsUmxFbmFibGVkOiBmYWxzZSxcbiAgICBkZWJ1Z0VuYWJsZWQ6IGZhbHNlLFxuICB9O1xuXG4gIC8qKiBSTCBhZ2VudCBleGVjdXRpb24gc3RhdHVzIGZvciBkdWFsLVJMIG1vZGUgZGlzcGxheSAqL1xuICBwcml2YXRlIHJsU3RhdHVzOiBSTEFnZW50U3RhdHVzID0ge307XG5cbiAgLy8gLS0tLS0tLS0tLS0tIEhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgLyoqIEVuc3VyZSBjdXJzb3IgaXMgYWx3YXlzIHdpdGhpbiB2YWxpZCBib3VuZHMgZm9yIHRoZSBjdXJyZW50IGJ1ZmZlciAqL1xuICBwcml2YXRlIGNsYW1wQ3Vyc29yKCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5jdXJzb3IsIHRoaXMuYnVmZmVyLmxlbmd0aCkpO1xuICB9XG5cbiAgLyoqIFNhZmVseSBhcHBlbmQgdG8gcGFzdGUgYnVmZmVyIHdpdGggc2l6ZSBsaW1pdCBlbmZvcmNlbWVudCAqL1xuICBwcml2YXRlIGFwcGVuZFRvUGFzdGVCdWZmZXIoYnVmZmVyOiAncGFzdGUnIHwgJ3BsYWluUGFzdGUnLCB0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93KSByZXR1cm47IC8vIEFscmVhZHkgYXQgbGltaXRcbiAgICBjb25zdCBjdXJyZW50ID0gYnVmZmVyID09PSAncGFzdGUnID8gdGhpcy5wYXN0ZUJ1ZmZlciA6IHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcjtcbiAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSAtIGN1cnJlbnQubGVuZ3RoO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9BZGQgPSB0ZXh0Lmxlbmd0aCA8PSByZW1haW5pbmcgPyB0ZXh0IDogdGV4dC5zbGljZSgwLCByZW1haW5pbmcpO1xuICAgIGlmIChidWZmZXIgPT09ICdwYXN0ZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9XG4gICAgaWYgKHRvQWRkLmxlbmd0aCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBTdHJpcCBBTlNJIGVzY2FwZSBzZXF1ZW5jZXMgZnJvbSB0ZXh0IHRvIHByZXZlbnQgaW5qZWN0aW9uICovXG4gIHByaXZhdGUgc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgYWxsIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyAoQ1NJLCBPU0MsIGV0Yy4pXG4gICAgLy8gSW5jbHVkaW5nIGJyYWNrZXRlZCBwYXN0ZSBtYXJrZXJzIChcXHgxYlsyMDB+IGFuZCBcXHgxYlsyMDF+KSB3aGljaCBlbmQgd2l0aCB+XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHgxYlxcW1swLTk7XSpbQS1aYS16fl18XFx4MWJcXF1bXlxceDA3XSpcXHgwN3xcXHgxYltQWF5fXVteXFx4MWJdKlxceDFiXFxcXHxcXHgxYi4vZywgJycpO1xuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRIb3RrZXkoY29tYm8/OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIWNvbWJvPy50cmltKCkpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBjb21iby50cmltKCkudG9VcHBlckNhc2UoKTtcbiAgfVxuXG4gIHByaXZhdGUgbGFzdFByb21wdEV2ZW50OiB7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9IHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBwcm9tcHRIZWlnaHQgPSAwO1xuICBwcml2YXRlIGxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgcHJpdmF0ZSBpbmxpbmVQYW5lbDogc3RyaW5nW10gPSBbXTtcbiAgcHJpdmF0ZSBoYXNDb252ZXJzYXRpb25Db250ZW50ID0gZmFsc2U7XG4gIHByaXZhdGUgaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZUlkbGVNcyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVXaW5kb3dNcyA9IDYwO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVUcmlnZ2VyQ2hhcnMgPSAyNDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnMgPSAyOyAvLyBHdWFyZCBmb3Igc2hvcnQgZmlyc3QgbGluZXMgaW4gcGxhaW4gcGFzdGUgbW9kZVxuICAvLyBQYXN0ZSBidWZmZXIgbGltaXRzIHRvIHByZXZlbnQgbWVtb3J5IGV4aGF1c3Rpb25cbiAgcHJpdmF0ZSByZWFkb25seSBtYXhQYXN0ZUJ1ZmZlclNpemUgPSAxMCAqIDEwMjQgKiAxMDI0OyAvLyAxME1CIG1heCBwYXN0ZSBzaXplXG4gIHByaXZhdGUgcGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBUcmFjayBpZiBwYXN0ZSB3YXMgdHJ1bmNhdGVkXG4gIHByaXZhdGUgY3Vyc29yVmlzaWJsZUNvbHVtbiA9IDE7XG4gIHByaXZhdGUgaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICBwcml2YXRlIHBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBsYWluUGFzdGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBwYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSAwO1xuICBwcml2YXRlIHBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICBwcml2YXRlIHBsYWluUmVjZW50Q2h1bmtzOiBBcnJheTx7IHRleHQ6IHN0cmluZzsgYXQ6IG51bWJlciB9PiA9IFtdO1xuICAvLyBQZW5kaW5nIGluc2VydCBidWZmZXI6IGhvbGRzIGNoYXJhY3RlcnMgZHVyaW5nIHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gcHJldmVudCB2aXN1YWwgbGVha1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBwZW5kaW5nSW5zZXJ0VGltZXI6IE5vZGVKUy5UaW1lb3V0IHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGVuZGluZ0luc2VydERlbGF5TXMgPSA4MDsgLy8gV2FpdCBiZWZvcmUgY29tbWl0dGluZyBjaGFycyBhcyBub3JtYWwgaW5wdXRcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyZWRFdmVudEtleTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgbGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICBwcml2YXRlIGhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gIHByaXZhdGUgaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IGZhbHNlOyAgLy8gVHJhY2sgaWYgd2UndmUgZXZlciByZW5kZXJlZCBmb3IgaW5saW5lIGNsZWFyaW5nXG4gIHByaXZhdGUgbGFzdE92ZXJsYXk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBhbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gIHByaXZhdGUgcHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gIHByaXZhdGUgc2VjcmV0TW9kZSA9IGZhbHNlO1xuICAvLyBSZW5kZXIgdGhyb3R0bGluZyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICBwcml2YXRlIHBlbmRpbmdSZW5kZXIgPSBmYWxzZTtcbiAgcHJpdmF0ZSBsYXN0UmVuZGVyVGltZSA9IDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcmVuZGVyVGhyb3R0bGVNcyA9IDE2OyAvLyB+NjBmcHMgbWF4XG4gIHByaXZhdGUgcmVuZGVyVGhyb3R0bGVUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgLy8gRGlzcG9zYWwgc3RhdGUgdG8gcHJldmVudCBvcGVyYXRpb25zIGFmdGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBkaXNwb3NlZCA9IGZhbHNlO1xuICAvLyBCb3VuZCBldmVudCBoYW5kbGVycyBmb3IgcHJvcGVyIGNsZWFudXBcbiAgcHJpdmF0ZSBib3VuZFJlc2l6ZUhhbmRsZXI6ICgoKSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGJvdW5kS2V5cHJlc3NIYW5kbGVyOiAoKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBpbnB1dENhcHR1cmU6XG4gICAgfCB7XG4gICAgICAgIHJlc29sdmU6ICh2YWx1ZTogc3RyaW5nKSA9PiB2b2lkO1xuICAgICAgICByZWplY3Q/OiAocmVhc29uPzogdW5rbm93bikgPT4gdm9pZDtcbiAgICAgICAgb3B0aW9uczogeyB0cmltOiBib29sZWFuOyBhbGxvd0VtcHR5OiBib29sZWFuIH07XG4gICAgICB9XG4gICAgfCBudWxsID0gbnVsbDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBvdXRwdXQ6IE5vZGVKUy5Xcml0ZVN0cmVhbSA9IHByb2Nlc3Muc3Rkb3V0LFxuICAgIGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbSA9IHByb2Nlc3Muc3RkaW4sXG4gICAgX29wdGlvbnM/OiBVbmlmaWVkVUlSZW5kZXJlck9wdGlvbnNcbiAgKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm91dHB1dCA9IG91dHB1dDtcbiAgICB0aGlzLmlucHV0ID0gaW5wdXQ7XG4gICAgdGhpcy5pbnRlcmFjdGl2ZSA9IEJvb2xlYW4odGhpcy5vdXRwdXQuaXNUVFkgJiYgdGhpcy5pbnB1dC5pc1RUWSAmJiAhcHJvY2Vzcy5lbnZbJ0NJJ10pO1xuICAgIHRoaXMucGxhaW5Nb2RlID0gaXNQbGFpbk91dHB1dE1vZGUoKSB8fCAhdGhpcy5pbnRlcmFjdGl2ZTtcblxuICAgIC8vIEluaXRpYWxpemUgYW5pbWF0ZWQgY29tcG9uZW50c1xuICAgIHRoaXMuY29udGV4dE1ldGVyID0gbmV3IENvbnRleHRNZXRlcigpO1xuXG4gICAgdGhpcy5ybCA9IHJlYWRsaW5lLmNyZWF0ZUludGVyZmFjZSh7XG4gICAgICBpbnB1dDogdGhpcy5pbnB1dCxcbiAgICAgIG91dHB1dDogdGhpcy5vdXRwdXQsXG4gICAgICB0ZXJtaW5hbDogdHJ1ZSxcbiAgICAgIHByb21wdDogJycsXG4gICAgICB0YWJTaXplOiAyLFxuICAgIH0pO1xuICAgIHRoaXMucmwuc2V0UHJvbXB0KCcnKTtcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuXG4gICAgLy8gVXNlIGJvdW5kIGhhbmRsZXJzIHNvIHdlIGNhbiByZW1vdmUgdGhlbSBvbiBjbGVhbnVwXG4gICAgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIgPSAoKSA9PiB7XG4gICAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLm91dHB1dC5vbigncmVzaXplJywgdGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpO1xuXG4gICAgdGhpcy5zZXR1cElucHV0SGFuZGxlcnMoKTtcbiAgfVxuXG4gIGluaXRpYWxpemUoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgLy8gSWYgYW4gb3ZlcmxheSB3YXMgYWxyZWFkeSByZW5kZXJlZCBiZWZvcmUgaW5pdGlhbGl6YXRpb24gKGUuZy4sIGJhbm5lciBlbWl0dGVkIGVhcmx5KSxcbiAgICAgIC8vIGNsZWFyIGl0IHNvIGluaXRpYWxpemUoKSBkb2Vzbid0IHN0YWNrIGEgc2Vjb25kIGNvbnRyb2wgYmFyIGluIHNjcm9sbGJhY2suXG4gICAgICBpZiAodGhpcy5oYXNSZW5kZXJlZFByb21wdCB8fCB0aGlzLmxhc3RPdmVybGF5KSB7XG4gICAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB9XG4gICAgICB0aGlzLndyaXRlKEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFKTtcbiAgICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gZmFsc2U7XG4gICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLlNIT1dfQ1VSU09SKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBQbGFpbiBtb2RlOiBtaW5pbWFsIHNldHVwLCBzdGlsbCByZW5kZXIgYSBzaW1wbGUgcHJvbXB0IGxpbmVcbiAgICB0aGlzLnVwZGF0ZVRlcm1pbmFsU2l6ZSgpO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdHJ1ZTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgY2xlYW51cCgpOiB2b2lkIHtcbiAgICAvLyBNYXJrIGFzIGRpc3Bvc2VkIGZpcnN0IHRvIHByZXZlbnQgYW55IHBlbmRpbmcgb3BlcmF0aW9uc1xuICAgIHRoaXMuZGlzcG9zZWQgPSB0cnVlO1xuXG4gICAgdGhpcy5jYW5jZWxJbnB1dENhcHR1cmUobmV3IEVycm9yKCdSZW5kZXJlciBkaXNwb3NlZCcpKTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG5cbiAgICAvLyBDbGVhciByZW5kZXIgdGhyb3R0bGUgdGltZXJcbiAgICBpZiAodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyKTtcbiAgICAgIHRoaXMucmVuZGVyVGhyb3R0bGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU3RvcCBhbnkgcnVubmluZyBhbmltYXRpb25zXG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuc3RyZWFtaW5nU3Bpbm5lcikge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyLnN0b3AoKTtcbiAgICAgIHRoaXMuc3RyZWFtaW5nU3Bpbm5lciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLnRoaW5raW5nSW5kaWNhdG9yKSB7XG4gICAgICB0aGlzLnRoaW5raW5nSW5kaWNhdG9yLnN0b3AoKTtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3IgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLmNvbnRleHRNZXRlci5kaXNwb3NlKCk7XG4gICAgZGlzcG9zZUFuaW1hdGlvbnMoKTtcblxuICAgIC8vIFJlbW92ZSBldmVudCBsaXN0ZW5lcnMgdG8gcHJldmVudCBtZW1vcnkgbGVha3NcbiAgICBpZiAodGhpcy5ib3VuZFJlc2l6ZUhhbmRsZXIpIHtcbiAgICAgIHRoaXMub3V0cHV0LnJlbW92ZUxpc3RlbmVyKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9IG51bGw7XG4gICAgfVxuICAgIGlmICh0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKSB7XG4gICAgICB0aGlzLmlucHV0LnJlbW92ZUxpc3RlbmVyKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICAgICAgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gUmVtb3ZlIGFsbCBFdmVudEVtaXR0ZXIgbGlzdGVuZXJzIGZyb20gdGhpcyBpbnN0YW5jZVxuICAgIHRoaXMucmVtb3ZlQWxsTGlzdGVuZXJzKCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgc28gaXQgZG9lc24ndCByZW1haW4gaW4gc2Nyb2xsYmFjayBoaXN0b3J5XG4gICAgICB0aGlzLmNsZWFyUHJvbXB0QXJlYSgpO1xuICAgICAgdGhpcy53cml0ZShFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgfVxuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUoZmFsc2UpO1xuICAgIH1cbiAgICB0aGlzLnJsLmNsb3NlKCk7XG4gICAgdGhpcy5sYXN0T3ZlcmxheSA9IG51bGw7XG5cbiAgICAvLyBDbGVhciBldmVudCBxdWV1ZVxuICAgIHRoaXMuZXZlbnRRdWV1ZSA9IFtdO1xuICB9XG5cbiAgc3VzcGVuZFByb21wdFJlbmRlcmluZygpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IHRydWU7XG4gIH1cblxuICByZXN1bWVQcm9tcHRSZW5kZXJpbmcocmVuZGVyOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCA9IGZhbHNlO1xuICAgIGlmIChyZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIElucHV0IGhhbmRsaW5nIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgc2V0dXBJbnB1dEhhbmRsZXJzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJsLnJlbW92ZUFsbExpc3RlbmVycygnbGluZScpO1xuICAgIHJlYWRsaW5lLmVtaXRLZXlwcmVzc0V2ZW50cyh0aGlzLmlucHV0LCB0aGlzLnJsKTtcbiAgICBpZiAodGhpcy5pbnB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5pbnB1dC5zZXRSYXdNb2RlKHRydWUpO1xuICAgIH1cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlciBzbyB3ZSBjYW4gcmVtb3ZlIGl0IG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSkgPT4ge1xuICAgICAgaWYgKCF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuaGFuZGxlS2V5cHJlc3Moc3RyLCBrZXkpO1xuICAgICAgfVxuICAgIH07XG4gICAgdGhpcy5pbnB1dC5vbigna2V5cHJlc3MnLCB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyKTtcbiAgfVxuXG4gIHByaXZhdGUgZW1pdElucHV0Q2hhbmdlKCk6IHZvaWQge1xuICAgIGNvbnN0IHBheWxvYWQ6IElucHV0Q2hhbmdlRXZlbnQgPSB7XG4gICAgICB0ZXh0OiB0aGlzLmJ1ZmZlcixcbiAgICAgIGN1cnNvcjogdGhpcy5jdXJzb3IsXG4gICAgfTtcbiAgICB0aGlzLmVtaXQoJ2NoYW5nZScsIHBheWxvYWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVLZXlwcmVzcyhzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiB2b2lkIHtcbiAgICAvLyBOb3JtYWxpemUgbWlzc2luZyBrZXkgbWV0YWRhdGEgKGNvbW1vbiBmb3Igc29tZSB0ZXJtaW5hbHMgZW1pdHRpbmcgcmF3IGVzY2FwZSBjb2RlcylcbiAgICBjb25zdCBub3JtYWxpemVkS2V5ID0ga2V5ID8/IHRoaXMucGFyc2VFc2NhcGVTZXF1ZW5jZShzdHIpO1xuICAgIGNvbnN0IGtleUZvclBhc3RlID0gbm9ybWFsaXplZEtleSA/PyAoc3RyID8geyBzZXF1ZW5jZTogc3RyIH0gYXMgcmVhZGxpbmUuS2V5IDoga2V5KTtcblxuICAgIGlmICh0aGlzLmhhbmRsZUJyYWNrZXRlZFBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaGFuZGxlUGxhaW5QYXN0ZShzdHIsIGtleUZvclBhc3RlKSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG1hY09TIE9wdGlvbitrZXkgcHJvZHVjZXMgVW5pY29kZSBjaGFyYWN0ZXJzOyBoYW5kbGUgdGhlbSBiZWZvcmUga2V5IG1ldGFkYXRhIGNoZWNrcy5cbiAgICBjb25zdCBtYWNPcHRpb25DaGFyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICfCqSc6ICdnJywgIC8vIE9wdGlvbitHXG4gICAgICAn4oSiJzogJ2cnLCAgLy8gT3B0aW9uK1NoaWZ0K0dcbiAgICAgICfDpSc6ICdhJywgIC8vIE9wdGlvbitBXG4gICAgICAnw4UnOiAnYScsICAvLyBPcHRpb24rU2hpZnQrQVxuICAgICAgJ+KImic6ICd2JywgIC8vIE9wdGlvbitWIC8gT3B0aW9uK1NoaWZ0K1ZcbiAgICAgICfiiIInOiAnZCcsICAvLyBPcHRpb24rRFxuICAgICAgJ8OOJzogJ2QnLCAgLy8gT3B0aW9uK1NoaWZ0K0QgKGNvbW1vbiBtYWNPUyBlbWlzc2lvbilcbiAgICAgICfiiIYnOiAnZCcsICAvLyBDb21tb24gYWx0ZXJuYXRlIGRlbHRhIHN5bWJvbFxuICAgIH07XG5cbiAgICBpZiAoc3RyICYmIG1hY09wdGlvbkNoYXJzW3N0cl0pIHtcbiAgICAgIGNvbnN0IGxldHRlciA9IG1hY09wdGlvbkNoYXJzW3N0cl07XG4gICAgICAvLyBDbGVhciBhbnkgcGVuZGluZyBpbnNlcnQgYnVmZmVyIHNvIHRoZSBzeW1ib2wgbmV2ZXIgbGFuZHMgaW4gdGhlIHByb21wdFxuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgICBzd2l0Y2ggKGxldHRlcikge1xuICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1jcml0aWNhbC1hcHByb3ZhbCcpO1xuICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjYXNlICdnJzpcbiAgICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGNhc2UgJ2QnOlxuICAgICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWR1YWwtcmwnKTtcbiAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtdmVyaWZ5Jyk7XG4gICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFub3JtYWxpemVkS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlICYmIG5vcm1hbGl6ZWRLZXkuY3RybCAmJiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYycgfHwgbm9ybWFsaXplZEtleS5uYW1lID09PSAnZCcpKSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERldGVjdCBDdHJsK1NoaWZ0IGNvbWJpbmF0aW9ucyAoZmFsbGJhY2sgZm9yIG5vbi1tYWNPUyBvciBjb25maWd1cmVkIHRlcm1pbmFscylcbiAgICBjb25zdCBpc0N0cmxTaGlmdCA9IChsZXR0ZXI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgY29uc3QgbG93ZXJMZXR0ZXIgPSBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHVwcGVyTGV0dGVyID0gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgIC8vIFBhdHRlcm4gMTogU3RhbmRhcmQgcmVhZGxpbmUgc2hpZnQgZmxhZyArIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5zaGlmdCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDI6IFNvbWUgdGVybWluYWxzIHNlbmQgdXBwZXJjYXNlIG5hbWUgd2l0aCBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gdXBwZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMzogTWV0YS9BbHQgKyBsZXR0ZXIgKGlUZXJtMiB3aXRoIFwiT3B0aW9uIHNlbmRzIE1ldGFcIilcbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm1ldGEgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA0OiBSYXcgZXNjYXBlIHNlcXVlbmNlIGNoZWNrIGZvciB4dGVybS1zdHlsZSBtb2RpZmllcnNcbiAgICAgIGNvbnN0IHNlcSA9IHN0ciB8fCBub3JtYWxpemVkS2V5LnNlcXVlbmNlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmIChzZXEgJiYgL15cXHgxYlxcW1swLTldKzs2W35BLVpdPyQvLnRlc3Qoc2VxKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA1OiBFU0MgKyBsZXR0ZXIgKE9wdGlvbiBzZW5kcyBFU0MgcHJlZml4IGluIHNvbWUgY29uZmlncylcbiAgICAgIGlmIChzZXEgJiYgc2VxID09PSBgXFx4MWIke2xvd2VyTGV0dGVyfWApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlID0gKGxldHRlcjogJ2EnIHwgJ2cnIHwgJ2QnIHwgJ3YnKTogdm9pZCA9PiB7XG4gICAgICAvLyBFbnN1cmUgbm8gYnVmZmVyZWQgY2hhcnMgbGVhayBpbnRvIHRoZSBwcm9tcHRcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgICAgaWYgKGxldHRlciA9PT0gJ2EnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICB9IGVsc2UgaWYgKGxldHRlciA9PT0gJ2cnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgIH0gZWxzZSBpZiAobGV0dGVyID09PSAnZCcpIHtcbiAgICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgfSBlbHNlIGlmIChsZXR0ZXIgPT09ICd2Jykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgIH1cbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfTtcblxuICAgIGlmIChpc0N0cmxTaGlmdCgnYScpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ2EnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2cnKSkge1xuICAgICAgaGFuZGxlQ3RybFNoaWZ0VG9nZ2xlKCdnJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdkJykpIHtcbiAgICAgIGhhbmRsZUN0cmxTaGlmdFRvZ2dsZSgnZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgndicpKSB7XG4gICAgICBoYW5kbGVDdHJsU2hpZnRUb2dnbGUoJ3YnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmVtaXQoJ3Jlc3VtZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSAnYycpIHtcbiAgICAgIC8vIEN0cmwrQyBiZWhhdmlvcjpcbiAgICAgIC8vIDEuIElmIGJ1ZmZlciBoYXMgdGV4dDogY2xlYXIgaXQgZmlyc3QsIHRoZW4gbm90aWZ5IHNoZWxsXG4gICAgICAvLyAyLiBJZiBidWZmZXIgaXMgZW1wdHk6IGxldCBzaGVsbCBkZWNpZGUgdG8gcGF1c2UgQUkgb3IgcXVpdFxuICAgICAgLy9cbiAgICAgIC8vIFRoZSBJbnRlcmFjdGl2ZVNoZWxsIG1haW50YWlucyBhIGNvdW50ZXIgdG8gdHJhY2sgQ3RybCtDIHByZXNzZXMgYW5kIGRlY2lkZXNcbiAgICAgIC8vIHdoZXRoZXIgdG8gcGF1c2UgQUkgb3IgZXhpdCBiYXNlZCBvbiBwcm9jZXNzaW5nIHN0YXRlLlxuXG4gICAgICBjb25zdCBoYWRCdWZmZXIgPSB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgICAgaWYgKGhhZEJ1ZmZlcikge1xuICAgICAgICAvLyBDbGVhciB0aGUgaW5wdXQgYnVmZmVyIGZpcnN0XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIC8vIEVtaXQgY3RybGMgZXZlbnQgd2l0aCBidWZmZXIgc3RhdGUgc28gc2hlbGwgY2FuIGhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICB0aGlzLmVtaXQoJ2N0cmxjJywgeyBoYWRCdWZmZXIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZCcpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdpbnRlcnJ1cHQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICd1Jykge1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrTDogQ2xlYXIgc2NyZWVuIHdoaWxlIHByZXNlcnZpbmcgaW5wdXRcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdsJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZVRvQnVmZmVyKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIENsZWFyIHNjcmVlbiBhbmQgcmVkcmF3XG4gICAgICB0aGlzLm91dHB1dC53cml0ZSgnXFx4MWJbMkpcXHgxYltIJyk7IC8vIENsZWFyIHNjcmVlbiwgbW92ZSB0byB0b3BcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IGZhbHNlO1xuICAgICAgdGhpcy5jbGVhckNvbGxhcHNlZFJlc3VsdHMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtPOiBFeHBhbmQgbGFzdCB0b29sIHJlc3VsdFxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ28nKSB7XG4gICAgICB0aGlzLmVtaXQoJ2V4cGFuZC10b29sLXJlc3VsdCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEN0cmwrQTogTW92ZSBjdXJzb3IgdG8gc3RhcnQgb2YgbGluZVxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2EnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK0U6IE1vdmUgY3Vyc29yIHRvIGVuZCBvZiBsaW5lXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciAhPT0gdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBDdHJsK1c6IERlbGV0ZSB3b3JkIGJhY2t3YXJkXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAndycpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgLy8gRmluZCBzdGFydCBvZiBwcmV2aW91cyB3b3JkXG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCB0cmFpbGluZyBzcGFjZXNcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gPT09ICcgJykgcG9zLS07XG4gICAgICAgIC8vIFNraXAgd29yZCBjaGFyYWN0ZXJzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdICE9PSAnICcpIHBvcy0tO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHBvcykgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvcik7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQ3RybCtLOiBEZWxldGUgZnJvbSBjdXJzb3IgdG8gZW5kIG9mIGxpbmVcbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICdrJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gSG9tZTogTW92ZSBjdXJzb3IgdG8gc3RhcnRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdob21lJykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yICE9PSAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gRW5kOiBNb3ZlIGN1cnNvciB0byBlbmRcbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdlbmQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgIT09IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gQWx0K0xlZnQ6IE1vdmUgY3Vyc29yIGJhY2sgb25lIHdvcmRcbiAgICBpZiAoa2V5Lm1ldGEgJiYga2V5Lm5hbWUgPT09ICdsZWZ0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yID4gMCkge1xuICAgICAgICBsZXQgcG9zID0gdGhpcy5jdXJzb3I7XG4gICAgICAgIC8vIFNraXAgc3BhY2VzXG4gICAgICAgIHdoaWxlIChwb3MgPiAwICYmIHRoaXMuYnVmZmVyW3BvcyAtIDFdID09PSAnICcpIHBvcy0tO1xuICAgICAgICAvLyBTa2lwIHdvcmQgY2hhcmFjdGVyc1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSAhPT0gJyAnKSBwb3MtLTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIEFsdCtSaWdodDogTW92ZSBjdXJzb3IgZm9yd2FyZCBvbmUgd29yZFxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIGxldCBwb3MgPSB0aGlzLmN1cnNvcjtcbiAgICAgICAgLy8gU2tpcCBjdXJyZW50IHdvcmRcbiAgICAgICAgd2hpbGUgKHBvcyA8IHRoaXMuYnVmZmVyLmxlbmd0aCAmJiB0aGlzLmJ1ZmZlcltwb3NdICE9PSAnICcpIHBvcysrO1xuICAgICAgICAvLyBTa2lwIHNwYWNlc1xuICAgICAgICB3aGlsZSAocG9zIDwgdGhpcy5idWZmZXIubGVuZ3RoICYmIHRoaXMuYnVmZmVyW3Bvc10gPT09ICcgJykgcG9zKys7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gcG9zO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBBbHQrQmFja3NwYWNlOiBEZWxldGUgd29yZCBiYWNrd2FyZCAoYWx0ZXJuYXRpdmUgdG8gQ3RybCtXKVxuICAgIGlmIChrZXkubWV0YSAmJiBrZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgbGV0IHBvcyA9IHRoaXMuY3Vyc29yO1xuICAgICAgICB3aGlsZSAocG9zID4gMCAmJiB0aGlzLmJ1ZmZlcltwb3MgLSAxXSA9PT0gJyAnKSBwb3MtLTtcbiAgICAgICAgd2hpbGUgKHBvcyA+IDAgJiYgdGhpcy5idWZmZXJbcG9zIC0gMV0gIT09ICcgJykgcG9zLS07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgcG9zKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy5jdXJzb3IgPSBwb3M7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5Lm5hbWUgPT09ICdyZXR1cm4nIHx8IGtleS5uYW1lID09PSAnZW50ZXInKSB7XG4gICAgICAvLyBJZiB0aGVyZSdzIGEgY29sbGFwc2VkIHBhc3RlLCBleHBhbmQgYW5kIHN1Ym1pdCBpbiBvbmUgYWN0aW9uXG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIC8vIElmIGEgc2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uIGlzIGhpZ2hsaWdodGVkLCBwcmVzc2luZyBFbnRlciBzdWJtaXRzIGl0IGltbWVkaWF0ZWx5XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24odHJ1ZSkpIHJldHVybjtcbiAgICAgIC8vIEZhbGxiYWNrOiBpZiBidWZmZXIgc3RhcnRzIHdpdGggJy8nIGFuZCBzdWdnZXN0aW9ucyBleGlzdCwgdXNlIHRoZSBzZWxlY3RlZC9maXJzdCBvbmVcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgICAgID8gdGhpcy5zdWdnZXN0aW9uSW5kZXhcbiAgICAgICAgICA6IDA7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdPy5jb21tYW5kID8/IHRoaXMuYnVmZmVyO1xuICAgICAgfVxuICAgICAgdGhpcy5zdWJtaXRUZXh0KHRoaXMuYnVmZmVyKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYmFja3NwYWNlJykge1xuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvciAtIDEpICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgICAgICB0aGlzLmN1cnNvci0tO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2RlbGV0ZScpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yICsgMSk7XG4gICAgICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnbGVmdCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA+IDApIHtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy5lbnN1cmVDdXJzb3JWaXNpYmxlKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgaWYgKHRoaXMuY3Vyc29yIDwgdGhpcy5idWZmZXIubGVuZ3RoKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yKys7XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd1cCcpIHtcbiAgICAgIGlmICh0aGlzLm5hdmlnYXRlU3VnZ2VzdGlvbnMoLTEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkge1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSB0aGlzLmhpc3RvcnkubGVuZ3RoIC0gMTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+IDApIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleC0tO1xuICAgICAgICB9XG4gICAgICAgIC8vIFZhbGlkYXRlIGluZGV4IGlzIHdpdGhpbiBib3VuZHMgYmVmb3JlIGFjY2Vzc2luZ1xuICAgICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCAmJiB0aGlzLmhpc3RvcnlJbmRleCA8IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2Rvd24nKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKDEpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgrKztcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IHRoaXMuaGlzdG9yeS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPj0gMCkge1xuICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5oaXN0b3J5W3RoaXMuaGlzdG9yeUluZGV4XSA/PyAnJztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBTYWZldHk6IGludmFsaWQgc3RhdGUsIHJlc2V0XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDsgLy8gUmVzZXQgcmVuZGVyIG9mZnNldCBmb3IgbmV3IGJ1ZmZlclxuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ3RhYicpIHtcbiAgICAgIGlmICh0aGlzLmFwcGx5U3VnZ2VzdGlvbihmYWxzZSkpIHJldHVybjtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoc3RyICYmICFub3JtYWxpemVkS2V5LmN0cmwgJiYgIW5vcm1hbGl6ZWRLZXkubWV0YSkge1xuICAgICAgLy8gRGVmZXIgaW5zZXJ0aW9uIHRvIGFsbG93IHBhc3RlIGRldGVjdGlvbiB3aW5kb3cgdG8gY2F0Y2ggcmFwaWQgaW5wdXRcbiAgICAgIHRoaXMucXVldWVQZW5kaW5nSW5zZXJ0KHN0cik7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEVuc3VyZSBob3Jpem9udGFsIGN1cnNvciBwb3NpdGlvbiBzdGF5cyB3aXRoaW4gdGhlIHZpc2libGUgaW5wdXQgd2luZG93LlxuICAgKiBQcmV2ZW50cyBqdW1wcyB3aGVuIHVzaW5nIGxlZnQvcmlnaHQgYXJyb3dzIG9uIGxvbmcgbGluZXMuXG4gICAqL1xuICBwcml2YXRlIGVuc3VyZUN1cnNvclZpc2libGUoKTogdm9pZCB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgxMCwgdGhpcy5zYWZlV2lkdGgoKSAtIDEyKTsgLy8gbWFyZ2luIGZvciBwcm9tcHQvdG9nZ2xlcyBhbmQgcGFkZGluZ1xuICAgIC8vIElmIGN1cnNvciBpcyBsZWZ0IG9mIGN1cnJlbnQgd2luZG93LCBzaGlmdCB3aW5kb3cgbGVmdFxuICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvcjtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgLy8gSWYgY3Vyc29yIGlzIGJleW9uZCB2aXNpYmxlIHdpbmRvdywgc2hpZnQgd2luZG93IHJpZ2h0XG4gICAgaWYgKHRoaXMuY3Vyc29yIC0gdGhpcy5pbnB1dFJlbmRlck9mZnNldCA+PSBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IHRoaXMuY3Vyc29yIC0gbWF4V2lkdGggKyAxO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQYXJzZSByYXcgZXNjYXBlIHNlcXVlbmNlcyB3aGVuIHJlYWRsaW5lIGRvZXNuJ3QgcG9wdWxhdGUga2V5IG1ldGFkYXRhLlxuICAgKiBQcmV2ZW50cyBjb250cm9sIGNvZGVzIChlLmcuLCBeW1syMDB+KSBmcm9tIGxlYWtpbmcgaW50byB0aGUgYnVmZmVyLlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZUVzY2FwZVNlcXVlbmNlKHNlcXVlbmNlOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogcmVhZGxpbmUuS2V5IHwgbnVsbCB7XG4gICAgaWYgKCFzZXF1ZW5jZSkgcmV0dXJuIG51bGw7XG4gICAgY29uc3QgbWFwOiBSZWNvcmQ8c3RyaW5nLCByZWFkbGluZS5LZXk+ID0ge1xuICAgICAgJ1xceDFiW0EnOiB7IG5hbWU6ICd1cCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0InOiB7IG5hbWU6ICdkb3duJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbQyc6IHsgbmFtZTogJ3JpZ2h0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbRCc6IHsgbmFtZTogJ2xlZnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltIJzogeyBuYW1lOiAnaG9tZScsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0YnOiB7IG5hbWU6ICdlbmQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDB+JzogeyBuYW1lOiAncGFzdGUtc3RhcnQnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYlsyMDF+JzogeyBuYW1lOiAncGFzdGUtZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgfTtcbiAgICByZXR1cm4gbWFwW3NlcXVlbmNlXSA/PyBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFF1ZXVlIGNoYXJhY3RlcnMgZm9yIGRlZmVycmVkIGluc2VydGlvbi4gVGhpcyBwcmV2ZW50cyB2aXN1YWwgXCJsZWFrXCIgb2ZcbiAgICogcGFzdGVkIGNvbnRlbnQgYnkgaG9sZGluZyBjaGFyYWN0ZXJzIHVudGlsIHdlJ3JlIGNvbmZpZGVudCBpdCdzIG5vdCBhIHBhc3RlLlxuICAgKi9cbiAgcHJpdmF0ZSBxdWV1ZVBlbmRpbmdJbnNlcnQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICs9IHRleHQ7XG5cbiAgICAvLyBDbGVhciBhbnkgZXhpc3RpbmcgdGltZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgLy8gU2NoZWR1bGUgY29tbWl0IGFmdGVyIGRlbGF5IC0gaWYgcGFzdGUgZGV0ZWN0aW9uIHRyaWdnZXJzIGZpcnN0LCBpdCB3aWxsIGNvbnN1bWUgdGhlIGJ1ZmZlclxuICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmNvbW1pdFBlbmRpbmdJbnNlcnQoKTtcbiAgICB9LCB0aGlzLnBlbmRpbmdJbnNlcnREZWxheU1zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb21taXQgcGVuZGluZyBjaGFyYWN0ZXJzIGFzIG5vcm1hbCBpbnB1dCAobm90IGEgcGFzdGUpLlxuICAgKi9cbiAgcHJpdmF0ZSBjb21taXRQZW5kaW5nSW5zZXJ0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyICYmICF0aGlzLmluUGxhaW5QYXN0ZSAmJiAhdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSB7XG4gICAgICB0aGlzLmluc2VydFRleHQodGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyKTtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gIH1cblxuICAvKipcbiAgICogQ29uc3VtZSBwZW5kaW5nIGluc2VydCBidWZmZXIgaW50byBwYXN0ZSBkZXRlY3Rpb24gKHByZXZlbnRzIHZpc3VhbCBsZWFrKS5cbiAgICovXG4gIHByaXZhdGUgY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgY29uc3VtZWQgPSB0aGlzLnBlbmRpbmdJbnNlcnRCdWZmZXI7XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgcmV0dXJuIGNvbnN1bWVkO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVCcmFja2V0ZWRQYXN0ZShzdHI6IHN0cmluZywga2V5OiByZWFkbGluZS5LZXkpOiBib29sZWFuIHtcbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgfHwgc3RyO1xuICAgIGlmIChzZXF1ZW5jZSA9PT0gRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUgfHwgc2VxdWVuY2UgPT09IEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gSGFuZGxlIGNhc2Ugd2hlcmUgcGFzdGUgbWFya2VycyBtaWdodCBiZSBlbWJlZGRlZCBpbiB0aGUgc3RyaW5nXG4gICAgY29uc3QgcGFzdGVTdGFydE1hcmtlciA9ICdcXHgxYlsyMDB+JztcbiAgICBjb25zdCBwYXN0ZUVuZE1hcmtlciA9ICdcXHgxYlsyMDF+JztcblxuICAgIC8vIENoZWNrIGlmIHN0ciBjb250YWlucyBwYXN0ZSBzdGFydCBtYXJrZXIgKGhhbmRsZXMgY2h1bmtlZCBhcnJpdmFsKVxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuaW5jbHVkZXMocGFzdGVTdGFydE1hcmtlcikpIHtcbiAgICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIC8vIEV4dHJhY3QgY29udGVudCBhZnRlciB0aGUgc3RhcnQgbWFya2VyXG4gICAgICBjb25zdCBzdGFydElkeCA9IHN0ci5pbmRleE9mKHBhc3RlU3RhcnRNYXJrZXIpO1xuICAgICAgbGV0IGNvbnRlbnQgPSBzdHIuc2xpY2Uoc3RhcnRJZHggKyBwYXN0ZVN0YXJ0TWFya2VyLmxlbmd0aCk7XG4gICAgICAvLyBDaGVjayBpZiBlbmQgbWFya2VyIGlzIGFsc28gaW4gdGhpcyBjaHVua1xuICAgICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMocGFzdGVFbmRNYXJrZXIpKSB7XG4gICAgICAgIGNvbnN0IGVuZElkeCA9IGNvbnRlbnQuaW5kZXhPZihwYXN0ZUVuZE1hcmtlcik7XG4gICAgICAgIGNvbnRlbnQgPSBjb250ZW50LnNsaWNlKDAsIGVuZElkeCk7XG4gICAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nICsgY29udGVudDtcbiAgICAgICAgdGhpcy5jb21taXRQYXN0ZUJ1ZmZlcigpO1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nICsgY29udGVudDtcbiAgICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGlmIChzZXF1ZW5jZSA9PT0gcGFzdGVTdGFydE1hcmtlcikge1xuICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciB0byBwcmV2ZW50IGxlYWtcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nOyAvLyBJbmNsdWRlIGFueSBjaGFycyB0aGF0IGFycml2ZWQgYmVmb3JlIGJyYWNrZXRlZCBwYXN0ZSBzdGFydGVkXG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiBzdHIgY29udGFpbnMgcGFzdGUgZW5kIG1hcmtlclxuICAgIGlmICh0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIuaW5jbHVkZXMocGFzdGVFbmRNYXJrZXIpKSB7XG4gICAgICBjb25zdCBlbmRJZHggPSBzdHIuaW5kZXhPZihwYXN0ZUVuZE1hcmtlcik7XG4gICAgICBjb25zdCBjb250ZW50QmVmb3JlID0gc3RyLnNsaWNlKDAsIGVuZElkeCk7XG4gICAgICBpZiAoY29udGVudEJlZm9yZSkge1xuICAgICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgY29udGVudEJlZm9yZSk7XG4gICAgICB9XG4gICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICBpZiAoc2VxdWVuY2UgPT09IHBhc3RlRW5kTWFya2VyKSB7XG4gICAgICB0aGlzLmNvbW1pdFBhc3RlQnVmZmVyKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleT8ubmFtZSA9PT0gJ3JldHVybicgfHwga2V5Py5uYW1lID09PSAnZW50ZXInKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgJ1xcbicpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmIChrZXk/Lm5hbWUgPT09ICdiYWNrc3BhY2UnKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyID0gdGhpcy5wYXN0ZUJ1ZmZlci5zbGljZSgwLCAtMSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgc3RyKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHNlcXVlbmNlID09PSAnc3RyaW5nJyAmJiBzZXF1ZW5jZS5sZW5ndGggPiAwKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3Bhc3RlJywgc2VxdWVuY2UpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSBjb21taXRQYXN0ZUJ1ZmZlcigpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkgcmV0dXJuO1xuICAgIC8vIFNhbml0aXplIHRvIHJlbW92ZSBhbnkgaW5qZWN0ZWQgZXNjYXBlIHNlcXVlbmNlcywgdGhlbiBub3JtYWxpemUgbGluZSBlbmRpbmdzXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBhc3RlQnVmZmVyKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGlmIChjb250ZW50KSB7XG4gICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xuICAgICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgICB0ZXh0OiBjb250ZW50LFxuICAgICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgICAgY2hhcnM6IGNvbnRlbnQubGVuZ3RoICsgKHdhc1RydW5jYXRlZCA/ICcrJyBhcyB1bmtub3duIGFzIG51bWJlciA6IDApLCAvLyBJbmRpY2F0ZSB0cnVuY2F0aW9uXG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmluQnJhY2tldGVkUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgdGhpcy5jYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBoYW5kbGVQbGFpblBhc3RlKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IGJvb2xlYW4ge1xuICAgIC8vIEZhbGxiYWNrIHBhc3RlIGNhcHR1cmUgd2hlbiBicmFja2V0ZWQgcGFzdGUgaXNuJ3Qgc3VwcG9ydGVkXG4gICAgaWYgKHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSB8fCBrZXk/LmN0cmwgfHwga2V5Py5tZXRhKSB7XG4gICAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBzZXF1ZW5jZSA9IGtleT8uc2VxdWVuY2UgPz8gJyc7XG4gICAgY29uc3QgY2h1bmsgPSB0eXBlb2Ygc3RyID09PSAnc3RyaW5nJyAmJiBzdHIubGVuZ3RoID4gMCA/IHN0ciA6IHNlcXVlbmNlO1xuICAgIGlmICghY2h1bmspIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy50cmFja1BsYWluUGFzdGVCdXJzdChjaHVuay5sZW5ndGgsIG5vdyk7XG5cbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLnJlY29yZFJlY2VudFBsYWluQ2h1bmsoY2h1bmssIG5vdyk7XG4gICAgfVxuXG4gICAgY29uc3QgY2h1bmtNdWx0aXBsZSA9IGNodW5rLmxlbmd0aCA+IDE7XG4gICAgY29uc3QgaGFzTmV3bGluZSA9IC9bXFxyXFxuXS8udGVzdChjaHVuayk7XG4gICAgY29uc3QgYnVyc3RBY3RpdmUgPSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IDAgJiYgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPD0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgY29uc3QgYnVyc3RUcmlnZ2VyID0gYnVyc3RBY3RpdmUgJiYgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZVRyaWdnZXJDaGFycztcbiAgICBjb25zdCBoYXNSZWNlbnROb25OZXdsaW5lID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5zb21lKGVudHJ5ID0+ICEvXltcXHJcXG5dKyQvLnRlc3QoZW50cnkudGV4dCkpO1xuICAgIGNvbnN0IGVhcmx5TmV3bGluZVRyaWdnZXIgPVxuICAgICAgaGFzTmV3bGluZSAmJlxuICAgICAgYnVyc3RBY3RpdmUgJiZcbiAgICAgIGhhc1JlY2VudE5vbk5ld2xpbmUgJiZcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA+PSB0aGlzLnBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycztcbiAgICBjb25zdCBuZXdsaW5lVHJpZ2dlciA9IGhhc05ld2xpbmUgJiYgKHRoaXMuaW5QbGFpblBhc3RlIHx8IGNodW5rTXVsdGlwbGUgfHwgYnVyc3RUcmlnZ2VyIHx8IGVhcmx5TmV3bGluZVRyaWdnZXIpO1xuICAgIGNvbnN0IGxvb2tzTGlrZVBhc3RlID0gdGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgbmV3bGluZVRyaWdnZXI7XG5cbiAgICBpZiAoIWxvb2tzTGlrZVBhc3RlKSB7XG4gICAgICB0aGlzLnBydW5lUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBsZXQgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBmYWxzZTtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IHRydWU7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTsgLy8gUmVzZXQgb3ZlcmZsb3cgZmxhZyBmb3IgbmV3IHBhc3RlXG4gICAgICAvLyBDb25zdW1lIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciBmaXJzdCAtIHRoaXMgaXMgdGhlIHByaW1hcnkgc291cmNlIG5vd1xuICAgICAgY29uc3QgcGVuZGluZyA9IHRoaXMuY29uc3VtZVBlbmRpbmdJbnNlcnRGb3JQYXN0ZSgpO1xuICAgICAgY29uc3QgcmVjbGFpbWVkID0gdGhpcy5yZWNsYWltUmVjZW50UGxhaW5DaHVua3MoKTtcbiAgICAgIC8vIENvbWJpbmUgcGVuZGluZyBidWZmZXIgd2l0aCBhbnkgcmVjbGFpbWVkIGNodW5rc1xuICAgICAgY29uc3QgY29tYmluZWQgPSBwZW5kaW5nICsgcmVjbGFpbWVkO1xuICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gUmVtb3ZlIGFueSBjaGFycyB0aGF0IGxlYWtlZCBpbnRvIGJ1ZmZlciAobGVnYWN5IHJlY2xhaW0gcGF0aClcbiAgICAgICAgaWYgKHJlY2xhaW1lZC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgY29uc3QgcmVtb3ZlQ291bnQgPSBNYXRoLm1pbih0aGlzLmJ1ZmZlci5sZW5ndGgsIHJlY2xhaW1lZC5sZW5ndGgpO1xuICAgICAgICAgIGNvbnN0IHN1ZmZpeCA9IHRoaXMuYnVmZmVyLnNsaWNlKC1yZW1vdmVDb3VudCk7XG4gICAgICAgICAgaWYgKHJlbW92ZUNvdW50ID4gMCAmJiBzdWZmaXggPT09IHJlY2xhaW1lZC5zbGljZSgtcmVtb3ZlQ291bnQpKSB7XG4gICAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuYnVmZmVyLmxlbmd0aCAtIHJlbW92ZUNvdW50KTtcbiAgICAgICAgICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgdGhpcy5idWZmZXIubGVuZ3RoKTtcbiAgICAgICAgICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciBpcyB2YWxpZFxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSBjb21iaW5lZC5zbGljZSgwLCB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSk7XG4gICAgICAgIGlmIChjb21iaW5lZC5sZW5ndGggPiB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSkge1xuICAgICAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgICAgY2h1bmtBbHJlYWR5Q2FwdHVyZWQgPSBjb21iaW5lZC5lbmRzV2l0aChjaHVuayk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoIWNodW5rQWxyZWFkeUNhcHR1cmVkKSB7XG4gICAgICB0aGlzLmFwcGVuZFRvUGFzdGVCdWZmZXIoJ3BsYWluUGFzdGUnLCBjaHVuayk7XG4gICAgfVxuICAgIHRoaXMuc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGxlbmd0aDogbnVtYmVyLCBub3c6IG51bWJlcik6IHZvaWQge1xuICAgIGlmICghdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgfHwgbm93IC0gdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPiB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcykge1xuICAgICAgdGhpcy5wYXN0ZUJ1cnN0V2luZG93U3RhcnQgPSBub3c7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICAgIH1cbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgKz0gbGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFBsYWluUGFzdGVCdXJzdCgpOiB2b2lkIHtcbiAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID0gMDtcbiAgfVxuXG4gIHByaXZhdGUgY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cbiAgICAvLyBBbHNvIGNhbmNlbCBwZW5kaW5nIGluc2VydCBidWZmZXJcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjb3JkUmVjZW50UGxhaW5DaHVuayh0ZXh0OiBzdHJpbmcsIGF0OiBudW1iZXIpOiB2b2lkIHtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IGF0IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcy5wdXNoKHsgdGV4dCwgYXQgfSk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMucGxhaW5SZWNlbnRDaHVua3MubGVuZ3RoKSByZXR1cm47XG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBjb25zdCB3aW5kb3dTdGFydCA9IG5vdyAtIHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmZpbHRlcihlbnRyeSA9PiBlbnRyeS5hdCA+PSB3aW5kb3dTdGFydCk7XG4gIH1cblxuICBwcml2YXRlIHJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpOiBzdHJpbmcge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybiAnJztcbiAgICBjb25zdCBjb21iaW5lZCA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MubWFwKGVudHJ5ID0+IGVudHJ5LnRleHQpLmpvaW4oJycpO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICByZXR1cm4gY29tYmluZWQ7XG4gIH1cblxuICBwcml2YXRlIHNjaGVkdWxlUGxhaW5QYXN0ZUNvbW1pdCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgfVxuICAgIHRoaXMucGxhaW5QYXN0ZVRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICB0aGlzLmZpbmFsaXplUGxhaW5QYXN0ZSgpO1xuICAgIH0sIHRoaXMucGxhaW5QYXN0ZUlkbGVNcyk7XG4gIH1cblxuICBwcml2YXRlIGZpbmFsaXplUGxhaW5QYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5QbGFpblBhc3RlKSByZXR1cm47XG5cbiAgICAvLyBTYW5pdGl6ZSB0byByZW1vdmUgYW55IGluamVjdGVkIGVzY2FwZSBzZXF1ZW5jZXMsIHRoZW4gbm9ybWFsaXplIGxpbmUgZW5kaW5nc1xuICAgIGNvbnN0IHNhbml0aXplZCA9IHRoaXMuc2FuaXRpemVQYXN0ZUNvbnRlbnQodGhpcy5wbGFpblBhc3RlQnVmZmVyKTtcbiAgICBjb25zdCBjb250ZW50ID0gc2FuaXRpemVkLnJlcGxhY2UoL1xcclxcbj8vZywgJ1xcbicpO1xuICAgIGNvbnN0IHdhc1RydW5jYXRlZCA9IHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdztcbiAgICB0aGlzLmluUGxhaW5QYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgIHRoaXMucGxhaW5SZWNlbnRDaHVua3MgPSBbXTtcbiAgICB0aGlzLnJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk7XG4gICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7XG4gICAgaWYgKHRoaXMucGxhaW5QYXN0ZVRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wbGFpblBhc3RlVGltZXIpO1xuICAgICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDEgfHwgY29udGVudC5sZW5ndGggPiAyMDApIHtcbiAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSB7XG4gICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgIGxpbmVzOiBsaW5lcy5sZW5ndGgsXG4gICAgICAgIGNoYXJzOiBjb250ZW50Lmxlbmd0aCArICh3YXNUcnVuY2F0ZWQgPyAnKycgYXMgdW5rbm93biBhcyBudW1iZXIgOiAwKSxcbiAgICAgIH07XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5pbnNlcnRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBpbnNlcnRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGlmICghdGV4dCkgcmV0dXJuO1xuICAgIC8vIERvbid0IGluc2VydCBkdXJpbmcgcGFzdGUgb3BlcmF0aW9ucyAtIGNvbnRlbnQgZ29lcyB0byBwYXN0ZSBidWZmZXJcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IHRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUgYW5kIHVzZXIgdHlwZXMsIGV4cGFuZCB0byBidWZmZXIgZmlyc3QgdGhlbiBpbnNlcnQgYXQgY3Vyc29yXG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGVUb0J1ZmZlcigpO1xuICAgIH1cbiAgICAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkIGJlZm9yZSBzbGljaW5nXG4gICAgdGhpcy5jbGFtcEN1cnNvcigpO1xuICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpICsgdGV4dCArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICB0aGlzLmN1cnNvciArPSB0ZXh0Lmxlbmd0aDtcbiAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7IC8vIEVuc3VyZSBjdXJzb3IgcmVtYWlucyB2YWxpZCBhZnRlciBtb2RpZmljYXRpb25cbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBzdWJtaXRUZXh0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIC8vIElmIHRoZXJlJ3MgYSBjb2xsYXBzZWQgcGFzdGUsIHN1Ym1pdCB0aGF0IGluc3RlYWQgb2YgdGhlIGJ1ZmZlciB0ZXh0XG4gICAgLy8gVGhpcyBoYW5kbGVzIGVkZ2UgY2FzZXMgd2hlcmUgc3VibWl0VGV4dCBpcyBjYWxsZWQgcHJvZ3JhbW1hdGljYWxseVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlKSB7XG4gICAgICBjb25zdCBzaG91bGRUcmltID0gdGhpcy5pbnB1dENhcHR1cmUub3B0aW9ucy50cmltO1xuICAgICAgY29uc3Qgbm9ybWFsaXplZENhcHR1cmUgPSBzaG91bGRUcmltID8gdGV4dC50cmltKCkgOiB0ZXh0O1xuICAgICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLmFsbG93RW1wdHkgJiYgIW5vcm1hbGl6ZWRDYXB0dXJlKSB7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHJlc29sdmVyID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IG51bGw7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgcmVzb2x2ZXIucmVzb2x2ZShub3JtYWxpemVkQ2FwdHVyZSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBhZGQgc2VjcmV0cyBvciBzbGFzaCBjb21tYW5kcyB0byBoaXN0b3J5L3Njcm9sbGJhY2tcbiAgICBpZiAoIXRoaXMuc2VjcmV0TW9kZSAmJiAhbm9ybWFsaXplZC5zdGFydHNXaXRoKCcvJykpIHtcbiAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKG5vcm1hbGl6ZWQpO1xuICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgIHRoaXMuZGlzcGxheVVzZXJQcm9tcHQobm9ybWFsaXplZCk7XG4gICAgfSBlbHNlIGlmICghdGhpcy5zZWNyZXRNb2RlKSB7XG4gICAgICAvLyBTdGlsbCB0cmFjayBzbGFzaCBjb21tYW5kcyBpbiBoaXN0b3J5IGZvciBjb252ZW5pZW5jZVxuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgIH1cbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgdGhpcy5lbWl0KCdxdWV1ZScsIG5vcm1hbGl6ZWQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmVtaXQoJ3N1Ym1pdCcsIG5vcm1hbGl6ZWQpO1xuICAgIH1cbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmaXJzdFNwYWNlID0gdGhpcy5idWZmZXIuaW5kZXhPZignICcpO1xuICAgIGNvbnN0IGhhc0FyZ1RleHQgPSBmaXJzdFNwYWNlID49IDAgJiYgL1xcUy8udGVzdCh0aGlzLmJ1ZmZlci5zbGljZShmaXJzdFNwYWNlICsgMSkpO1xuICAgIC8vIEhpZGUgc2xhc2ggc3VnZ2VzdGlvbnMgd2hlbiB0aGUgdXNlciBpcyBlZGl0aW5nIGFyZ3VtZW50c1xuICAgIGlmIChmaXJzdFNwYWNlID49IDAgJiYgdGhpcy5jdXJzb3IgPiBmaXJzdFNwYWNlICYmIGhhc0FyZ1RleHQpIHtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvclNsaWNlID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IpO1xuICAgIGNvbnN0IGNvbW1hbmRTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IGN1cnNvclNsaWNlLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogY3Vyc29yU2xpY2U7XG4gICAgY29uc3QgZmFsbGJhY2tTbGljZSA9IGZpcnN0U3BhY2UgPj0gMCA/IHRoaXMuYnVmZmVyLnNsaWNlKDAsIGZpcnN0U3BhY2UpIDogdGhpcy5idWZmZXI7XG4gICAgY29uc3QgcGFydGlhbCA9IChjb21tYW5kU2xpY2UudHJpbUVuZCgpIHx8IGZhbGxiYWNrU2xpY2UudHJpbUVuZCgpIHx8ICcvJykudG9Mb3dlckNhc2UoKTtcbiAgICBjb25zdCBwcmV2aW91cyA9IHRoaXMuc3VnZ2VzdGlvbnNbdGhpcy5zdWdnZXN0aW9uSW5kZXhdPy5jb21tYW5kO1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzXG4gICAgICAuZmlsdGVyKGNtZCA9PiBjbWQuY29tbWFuZC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgocGFydGlhbCkpXG4gICAgICAuc2xpY2UoMCwgNSk7XG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHByZXZpb3VzKSB7XG4gICAgICBjb25zdCBpZHggPSB0aGlzLnN1Z2dlc3Rpb25zLmZpbmRJbmRleChzID0+IHMuY29tbWFuZCA9PT0gcHJldmlvdXMpO1xuICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBpZHggPj0gMCA/IGlkeCA6IDA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gMDtcbiAgICB9XG4gIH1cblxuICBzZXRBdmFpbGFibGVDb21tYW5kcyhjb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMpOiB2b2lkIHtcbiAgICB0aGlzLmF2YWlsYWJsZUNvbW1hbmRzID0gY29tbWFuZHM7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICB9XG5cbiAgcHJpdmF0ZSBhcHBseVN1Z2dlc3Rpb24oc3VibWl0OiBib29sZWFuKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgfHwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIHN1Z2dlc3Rpb25JbmRleCBpcyB2YWxpZCwgZGVmYXVsdCB0byBmaXJzdCBpdGVtXG4gICAgY29uc3Qgc2FmZUluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IDA7XG4gICAgY29uc3Qgc2VsZWN0ZWQgPSB0aGlzLnN1Z2dlc3Rpb25zW3NhZmVJbmRleF07XG4gICAgaWYgKCFzZWxlY3RlZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBpZiAoc3VibWl0KSB7XG4gICAgICB0aGlzLnN1Ym1pdFRleHQoc2VsZWN0ZWQuY29tbWFuZCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuYnVmZmVyID0gYCR7c2VsZWN0ZWQuY29tbWFuZH0gYDtcbiAgICAgIHRoaXMuY3Vyc29yID0gdGhpcy5idWZmZXIubGVuZ3RoO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0U3VnZ2VzdGlvbnMoKTogdm9pZCB7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gIH1cblxuICBwcml2YXRlIG5hdmlnYXRlU3VnZ2VzdGlvbnMoZGlyZWN0aW9uOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSB8fCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgLy8gUmVzZXQgaW5kZXggaWYgc3VnZ2VzdGlvbnMgd2VyZSBjbGVhcmVkIGJ1dCBpbmRleCB3YXNuJ3RcbiAgICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25JbmRleCAhPT0gLTEgJiYgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgLy8gRW5zdXJlIGN1cnJlbnQgaW5kZXggaXMgdmFsaWQgYmVmb3JlIGNvbXB1dGluZyBuZXh0XG4gICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoXG4gICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICA6IC0xO1xuICAgIGNvbnN0IG5leHQgPSBjdXJyZW50SW5kZXggKyBkaXJlY3Rpb247XG4gICAgY29uc3QgY2xhbXBlZCA9IE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoIC0gMSwgbmV4dCkpO1xuICAgIGlmIChjbGFtcGVkID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleCAmJiB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSBjbGFtcGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gRXZlbnQgcXVldWUgLS0tLS0tLS0tLS0tXG5cbiAgYWRkRXZlbnQodHlwZTogUmVuZGVyZXJFdmVudFR5cGUsIGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIGFkZEV2ZW50IGNhbGxlZDogdHlwZT0ke3R5cGV9LCBjb250ZW50IGxlbmd0aD0ke2NvbnRlbnQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICghY29udGVudCkgcmV0dXJuO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLm5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSBub3JtYWxpemVkIHR5cGU9JHtub3JtYWxpemVkfWApO1xuICAgIGlmIChcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAncmVzcG9uc2UnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGhvdWdodCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdzdHJlYW0nIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICdidWlsZCcgfHxcbiAgICAgIG5vcm1hbGl6ZWQgPT09ICd0ZXN0J1xuICAgICkge1xuICAgICAgdGhpcy5oYXNDb252ZXJzYXRpb25Db250ZW50ID0gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICd0b29sLXJlc3VsdCcpIHtcbiAgICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBjb250ZW50O1xuICAgIH1cblxuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRDb250ZW50KHtcbiAgICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgICAgY29udGVudCxcbiAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgICAgfSk7XG4gICAgICBpZiAoZm9ybWF0dGVkKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZWQuZW5kc1dpdGgoJ1xcbicpID8gZm9ybWF0dGVkIDogYCR7Zm9ybWF0dGVkfVxcbmA7XG4gICAgICAgIHRoaXMub3V0cHV0LndyaXRlKHRleHQpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdGV4dC5lbmRzV2l0aCgnXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZXZlbnQgPSB7XG4gICAgICB0eXBlOiBub3JtYWxpemVkLFxuICAgICAgcmF3VHlwZTogdHlwZSxcbiAgICAgIGNvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgfTtcblxuICAgIC8vIFByaW9yaXR5IHF1ZXVlOiBwcm9tcHQgZXZlbnRzIGFyZSBpbnNlcnRlZCBhdCB0aGUgZnJvbnQgdG8gZW5zdXJlIGltbWVkaWF0ZSBkaXNwbGF5XG4gICAgLy8gVGhpcyBndWFyYW50ZWVzIHVzZXIgaW5wdXQgaXMgZWNob2VkIGJlZm9yZSBhbnkgYXN5bmMgcHJvY2Vzc2luZyByZXNwb25zZXNcbiAgICBpZiAobm9ybWFsaXplZCA9PT0gJ3Byb21wdCcpIHtcbiAgICAgIC8vIEZpbmQgdGhlIGZpcnN0IG5vbi1wcm9tcHQgZXZlbnQgYW5kIGluc2VydCBiZWZvcmUgaXRcbiAgICAgIC8vIFRoaXMgbWFpbnRhaW5zIHByb21wdCBvcmRlciB3aGlsZSBnaXZpbmcgdGhlbSBwcmlvcml0eSBvdmVyIG90aGVyIGV2ZW50c1xuICAgICAgY29uc3QgaW5zZXJ0SW5kZXggPSB0aGlzLmV2ZW50UXVldWUuZmluZEluZGV4KGUgPT4gZS50eXBlICE9PSAncHJvbXB0Jyk7XG4gICAgICBpZiAoaW5zZXJ0SW5kZXggPT09IC0xKSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuZXZlbnRRdWV1ZS5zcGxpY2UoaW5zZXJ0SW5kZXgsIDAsIGV2ZW50KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgcXVldWVNaWNyb3Rhc2soKCkgPT4ge1xuICAgICAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBSZS1yZW5kZXIgdGhlIHByb21wdC9jb250cm9sIGJhciBpbW1lZGlhdGVseS5cbiAgICogVGhpcyBrZWVwcyB0aGUgY2hhdCBib3ggcGlubmVkIGR1cmluZyBsb25nIHN0cmVhbWluZyBydW5zIGluc3RlYWQgb2Ygd2FpdGluZ1xuICAgKiBmb3IgdGhlIGV2ZW50IHF1ZXVlIHRvIGRyYWluIGJlZm9yZSB0aGUgcHJvbXB0IHJlYXBwZWFycy5cbiAgICovXG4gIHByaXZhdGUgcmVuZGVyUHJvbXB0T3ZlcmxheShpbW1lZGlhdGU6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluTW9kZSB8fCB0aGlzLmRpc3Bvc2VkIHx8ICF0aGlzLm91dHB1dC5pc1RUWSB8fCB0aGlzLnByb21wdFJlbmRlcmluZ1N1c3BlbmRlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICBpZiAoaW1tZWRpYXRlKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdEltbWVkaWF0ZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzUXVldWUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgaWYgKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuICAgIHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgPSB0cnVlO1xuICAgIHRyeSB7XG4gICAgICB3aGlsZSAodGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDAgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgY29uc3QgZXZlbnQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKTtcbiAgICAgICAgaWYgKCFldmVudCkgY29udGludWU7XG4gICAgICAgIGNvbnN0IGNvYWxlc2NlZCA9IHRoaXMuY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQpO1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGF3YWl0IHRoaXMucmVuZGVyRXZlbnQoY29hbGVzY2VkKTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICAvLyBOZXZlciBhbGxvdyBhIHJlbmRlcmluZyBmYWlsdXJlIHRvIHN0YWxsIHRoZSBldmVudCBxdWV1ZVxuICAgICAgICAgIGlmICh0aGlzLmRpc3Bvc2VkKSBicmVhazsgLy8gRG9uJ3QgdHJ5IHRvIHdyaXRlIGFmdGVyIGRpc3Bvc2FsXG4gICAgICAgICAgY29uc3QgbWVzc2FnZSA9XG4gICAgICAgICAgICBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IHR5cGVvZiBlcnJvciA9PT0gJ3N0cmluZycgPyBlcnJvciA6ICdVbmtub3duIHJlbmRlcmVyIGVycm9yJztcbiAgICAgICAgICB0aGlzLm91dHB1dC53cml0ZShgXFxuW3JlbmRlcmVyXSAke21lc3NhZ2V9XFxuYCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBkaXNwb3NlZCBiZWZvcmUgY29udGludWluZ1xuICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7XG5cbiAgICAgICAgLy8gRm9yIHByb21wdCBldmVudHMsIGVuc3VyZSB0aGUgb3ZlcmxheSBpcyByZW5kZXJlZCBpbW1lZGlhdGVseVxuICAgICAgICAvLyBUaGlzIGd1YXJhbnRlZXMgcHJvbXB0cyBhcmUgdmlzaWJsZSBiZWZvcmUgYXN5bmMgcHJvY2Vzc2luZyBjb250aW51ZXNcbiAgICAgICAgaWYgKGV2ZW50LnR5cGUgPT09ICdwcm9tcHQnKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIE5vIGRlbGF5IGZvciBwcm9tcHQgZXZlbnRzIC0gcmVuZGVyIGltbWVkaWF0ZWx5XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYXdhaXQgdGhpcy5kZWxheSgxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgLy8gQUxXQVlTIHJlbmRlciBwcm9tcHQgYWZ0ZXIgcXVldWUgY29tcGxldGVzIHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnRcbiAgICAgIC8vIFRoaXMgZW5zdXJlcyBzdGF0dXMvdG9nZ2xlcyBzdGF5IHBpbm5lZCBhbmQgcmVzcG9uc2VzIGFyZSBmdWxseSByZW5kZXJlZFxuICAgICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIHRoaXMuYWxsb3dQcm9tcHRSZW5kZXIgPSB0cnVlO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0gZmluYWxseSB7XG4gICAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE1lcmdlIGFkamFjZW50IHJlc3BvbnNlL3Rob3VnaHQgZXZlbnRzIGludG8gYSBzaW5nbGUgYmxvY2sgc28gY29udGludW91c1xuICAgKiBjaGF0IHRleHQgcmVuZGVycyB3aXRoIG9uZSBidWxsZXQgaW5zdGVhZCBvZiBvbmUgcGVyIGNodW5rLlxuICAgKi9cbiAgcHJpdmF0ZSBjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyhldmVudDogVUlFdmVudCk6IFVJRXZlbnQge1xuICAgIGNvbnN0IGlzTWVyZ2VhYmxlID0gKHRhcmdldDogVUlFdmVudCB8IHVuZGVmaW5lZCk6IHRhcmdldCBpcyBVSUV2ZW50ID0+XG4gICAgICBCb29sZWFuKFxuICAgICAgICB0YXJnZXQgJiZcbiAgICAgICAgICAhdGFyZ2V0LmlzQ29tcGFjdGVkICYmXG4gICAgICAgICAgKCh0YXJnZXQudHlwZSA9PT0gJ3Jlc3BvbnNlJyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Jlc3BvbnNlJykgfHxcbiAgICAgICAgICAgICh0YXJnZXQudHlwZSA9PT0gJ3Rob3VnaHQnICYmIHRhcmdldC5yYXdUeXBlID09PSAndGhvdWdodCcpKVxuICAgICAgKTtcblxuICAgIGlmICghaXNNZXJnZWFibGUoZXZlbnQpKSB7XG4gICAgICByZXR1cm4gZXZlbnQ7XG4gICAgfVxuXG4gICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmIGlzTWVyZ2VhYmxlKHRoaXMuZXZlbnRRdWV1ZVswXSkpIHtcbiAgICAgIGNvbnN0IG5leHQgPSB0aGlzLmV2ZW50UXVldWUuc2hpZnQoKSE7XG4gICAgICBjb25zdCBuZWVkc1NlcGFyYXRvciA9XG4gICAgICAgIGV2ZW50LmNvbnRlbnQubGVuZ3RoID4gMCAmJiAhZXZlbnQuY29udGVudC5lbmRzV2l0aCgnXFxuJykgJiYgIW5leHQuY29udGVudC5zdGFydHNXaXRoKCdcXG4nKTtcbiAgICAgIGV2ZW50LmNvbnRlbnQgPSBuZWVkc1NlcGFyYXRvciA/IGAke2V2ZW50LmNvbnRlbnR9XFxuJHtuZXh0LmNvbnRlbnR9YCA6IGAke2V2ZW50LmNvbnRlbnR9JHtuZXh0LmNvbnRlbnR9YDtcbiAgICB9XG5cbiAgICByZXR1cm4gZXZlbnQ7XG4gIH1cblxuICAvKipcbiAgICogRmx1c2ggcGVuZGluZyByZW5kZXJlciBldmVudHMuXG4gICAqIFVzZWZ1bCBmb3Igc3RhcnR1cCBmbG93cyAoZS5nLiwgd2VsY29tZSBiYW5uZXIpIHRvIGd1YXJhbnRlZSB0aGUgc2Nyb2xsYmFjayBpcyBoeWRyYXRlZFxuICAgKiBiZWZvcmUgY29udGludWluZyB3aXRoIGFkZGl0aW9uYWwgVUkgdXBkYXRlcy5cbiAgICovXG4gIGFzeW5jIGZsdXNoRXZlbnRzKHRpbWVvdXRNczogbnVtYmVyID0gMjUwKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgLy8gS2ljayBvZmYgcHJvY2Vzc2luZyBpZiBpZGxlXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiAhdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSAmJiB0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IHN0YXJ0ID0gRGF0ZS5ub3coKTtcbiAgICB3aGlsZSAoKHRoaXMuaXNQcm9jZXNzaW5nUXVldWUgfHwgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApICYmIERhdGUubm93KCkgLSBzdGFydCA8IHRpbWVvdXRNcykge1xuICAgICAgYXdhaXQgdGhpcy5kZWxheSg1KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlICYmIHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZW5kZXJFdmVudChldmVudDogVUlFdmVudCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIHJlbmRlckV2ZW50OiB0eXBlPSR7ZXZlbnQudHlwZX0sIGNvbnRlbnQgbGVuZ3RoPSR7ZXZlbnQuY29udGVudD8ubGVuZ3RoIHx8IDB9YCk7XG4gICAgaWYgKHRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICBsb2dEZWJ1ZygnW0RFQlVHIHJlbmRlcmVyXSBwbGFpbk1vZGUgLSB3cml0aW5nIGRpcmVjdGx5Jyk7XG4gICAgICBjb25zdCBmb3JtYXR0ZWRQbGFpbiA9IHRoaXMuZm9ybWF0Q29udGVudChldmVudCk7XG4gICAgICBpZiAoZm9ybWF0dGVkUGxhaW4pIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IGZvcm1hdHRlZFBsYWluLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZFBsYWluIDogYCR7Zm9ybWF0dGVkUGxhaW59XFxuYDtcbiAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUodGV4dCk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0ZXh0LmVuZHNXaXRoKCdcXG4nKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBmb3JtYXR0ZWQgPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgIGxvZ0RlYnVnKGBbREVCVUcgcmVuZGVyZXJdIGZvcm1hdHRlZCBsZW5ndGg9JHtmb3JtYXR0ZWQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICghZm9ybWF0dGVkKSByZXR1cm47XG5cbiAgICAvLyBBbGxvdyBwcm9tcHRzIGFuZCByZXNwb25zZXMgdG8gYWx3YXlzIHJlbmRlciAoZG9uJ3QgZGVkdXBsaWNhdGUpXG4gICAgLy8gT25seSBkZWR1cGxpY2F0ZSBzdHJlYW1pbmcgY29udGVudFxuICAgIGNvbnN0IHNpZ25hdHVyZSA9IGAke2V2ZW50LnJhd1R5cGV9OiR7ZXZlbnQuY29udGVudH1gO1xuICAgIGlmIChldmVudC50eXBlID09PSAnc3RyZWFtJyAmJiBzaWduYXR1cmUgPT09IHRoaXMubGFzdFJlbmRlcmVkRXZlbnRLZXkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdwcm9tcHQnKSB7XG4gICAgICB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5ID0gc2lnbmF0dXJlO1xuICAgIH1cblxuICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBiZWZvcmUgd3JpdGluZyBuZXcgY29udGVudFxuICAgIGlmICh0aGlzLnByb21wdEhlaWdodCA+IDAgfHwgdGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICB9XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgIT09ICdzdHJlYW0nICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lICYmIGZvcm1hdHRlZC50cmltKCkpIHtcbiAgICAgIC8vIEtlZXAgc2Nyb2xsYmFjayBvcmRlcmluZyBwcmVkaWN0YWJsZSB3aGVuIHByZXZpb3VzIG91dHB1dCBlbmRlZCBtaWQtbGluZVxuICAgICAgdGhpcy5vdXRwdXQud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuXG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZm9ybWF0dGVkKTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKTtcblxuICAgIC8vIEltbWVkaWF0ZWx5IHJlc3RvcmUgdGhlIHByb21wdCBvdmVybGF5IHNvIHRoZSBjaGF0IGJveCBzdGF5cyBwaW5uZWQgZHVyaW5nIHN0cmVhbWluZ1xuICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmludGVyYWN0aXZlICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdE92ZXJsYXkodHJ1ZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBub3JtYWxpemVFdmVudFR5cGUodHlwZTogUmVuZGVyZXJFdmVudFR5cGUpOiBDYW5vbmljYWxFdmVudFR5cGUgfCBudWxsIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIHJldHVybiAncHJvbXB0JztcbiAgICAgIGNhc2UgJ3Rob3VnaHQnOlxuICAgICAgICByZXR1cm4gJ3Rob3VnaHQnO1xuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgIGNhc2UgJ3N0cmVhbWluZyc6XG4gICAgICAgIHJldHVybiAnc3RyZWFtJztcbiAgICAgIGNhc2UgJ3Rvb2wnOlxuICAgICAgY2FzZSAndG9vbC1jYWxsJzpcbiAgICAgICAgcmV0dXJuICd0b29sJztcbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0JzpcbiAgICAgICAgcmV0dXJuICd0b29sLXJlc3VsdCc7XG4gICAgICBjYXNlICdidWlsZCc6XG4gICAgICAgIHJldHVybiAnYnVpbGQnO1xuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiAndGVzdCc7XG4gICAgICBjYXNlICdyZXNwb25zZSc6XG4gICAgICBjYXNlICdiYW5uZXInOlxuICAgICAgY2FzZSAncmF3JzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiAncmVzcG9uc2UnO1xuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBmb3JtYXRDb250ZW50KGV2ZW50OiBVSUV2ZW50KTogc3RyaW5nIHtcbiAgICAvLyBDb21wYWN0ZWQgYmxvY2tzIGFscmVhZHkgaGF2ZSBzZXBhcmF0b3IgYW5kIGZvcm1hdHRpbmdcbiAgICBpZiAoZXZlbnQuaXNDb21wYWN0ZWQpIHtcbiAgICAgIHJldHVybiBldmVudC5jb250ZW50O1xuICAgIH1cblxuICAgIGlmIChldmVudC5yYXdUeXBlID09PSAnYmFubmVyJykge1xuICAgICAgLy8gQmFubmVycyBkaXNwbGF5IHdpdGhvdXQgYnVsbGV0IHByZWZpeFxuICAgICAgY29uc3QgbGluZXMgPSBldmVudC5jb250ZW50LnNwbGl0KCdcXG4nKS5tYXAobGluZSA9PiBsaW5lLnRyaW1FbmQoKSk7XG4gICAgICByZXR1cm4gYCR7bGluZXMuam9pbignXFxuJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBDb21wYWN0LCB1c2VyLWZyaWVuZGx5IGZvcm1hdHRpbmdcbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ3Byb21wdCc6XG4gICAgICAgIC8vIFVzZXIgcHJvbXB0IC0ganVzdCB0aGUgdGV4dCAocHJvbXB0IGJveCBoYW5kbGVzIHN0eWxpbmcpXG4gICAgICAgIHJldHVybiBgJHt0aGVtZS5wcmltYXJ5KCc+Jyl9ICR7ZXZlbnQuY29udGVudH1cXG5gO1xuXG4gICAgICBjYXNlICd0aG91Z2h0Jzoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGN1cmF0ZWQgPSB0aGlzLmN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoZXZlbnQuY29udGVudCk7XG4gICAgICAgIGlmICghY3VyYXRlZCB8fCB0aGlzLmlzR2FyYmFnZU91dHB1dChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXRoaXMuc2hvdWxkUmVuZGVyVGhvdWdodChjdXJhdGVkKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodCA9IHtcbiAgICAgICAgICB0ZXh0OiBjdXJhdGVkLnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCkudG9Mb3dlckNhc2UoKSxcbiAgICAgICAgICBhdDogRGF0ZS5ub3coKSxcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0VGhpbmtpbmdCbG9jayhjdXJhdGVkKTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAndG9vbCc6IHtcbiAgICAgICAgLy8gQ29tcGFjdCB0b29sIGRpc3BsYXk6IOKaoVRvb2xOYW1lIOKGkiByZXN1bHRcbiAgICAgICAgY29uc3QgY29udGVudCA9IGV2ZW50LmNvbnRlbnQucmVwbGFjZSgvXlvij7rimpnil4tdXFxzKi8sICcnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sLXJlc3VsdCc6IHtcbiAgICAgICAgLy8gSW5saW5lIHJlc3VsdDog4pSU4pSAIHN1bW1hcnlcbiAgICAgICAgcmV0dXJuIHRoaXMuZm9ybWF0Q29tcGFjdFRvb2xSZXN1bHQoZXZlbnQuY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ2J1aWxkJywgbGFiZWxDb2xvcjogdGhlbWUud2FybmluZyB9KTtcblxuICAgICAgY2FzZSAndGVzdCc6XG4gICAgICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGV2ZW50LmNvbnRlbnQsIHsgbGFiZWw6ICd0ZXN0JywgbGFiZWxDb2xvcjogdGhlbWUuaW5mbyB9KTtcblxuICAgICAgY2FzZSAnc3RyZWFtJzpcbiAgICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG5cbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGRlZmF1bHQ6IHtcbiAgICAgICAgLy8gUHJvZ3JhbW1hdGljIGZpbHRlcjogcmVqZWN0IGNvbnRlbnQgdGhhdCBsb29rcyBsaWtlIGludGVybmFsL2dhcmJhZ2Ugb3V0cHV0XG4gICAgICAgIGlmICh0aGlzLmlzR2FyYmFnZU91dHB1dChldmVudC5jb250ZW50KSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuICAgICAgICAvLyBDbGVhbiByZXNwb25zZSB3aXRob3V0IGV4Y2Vzc2l2ZSBidWxsZXRzLCB3cmFwcGVkIGZvciByZWFkYWJpbGl0eVxuICAgICAgICBjb25zdCBpc0Vycm9yID0gZXZlbnQucmF3VHlwZSA9PT0gJ2Vycm9yJztcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgaXNFcnJvciA/IHsgbGFiZWw6ICdlcnJvcicsIGxhYmVsQ29sb3I6IHRoZW1lLmVycm9yIH0gOiB1bmRlZmluZWQpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBQcm9ncmFtbWF0aWMgZ2FyYmFnZSBkZXRlY3Rpb24gLSBjaGVja3MgaWYgY29udGVudCBsb29rcyBsaWtlIGludGVybmFsL3N5c3RlbSBvdXRwdXRcbiAgICogdGhhdCBzaG91bGRuJ3QgYmUgc2hvd24gdG8gdXNlcnMuIFVzZXMgc3RydWN0dXJhbCBjaGVja3MsIG5vdCBwYXR0ZXJuIG1hdGNoaW5nLlxuICAgKi9cbiAgcHJpdmF0ZSBpc0dhcmJhZ2VPdXRwdXQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgaWYgKCFjb250ZW50IHx8IGNvbnRlbnQudHJpbSgpLmxlbmd0aCA9PT0gMCkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250ZW50IHN0YXJ0aW5nIHdpdGggPCB0aGF0IGlzbid0IHZhbGlkIG1hcmtkb3duL2NvZGVcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCc8JykgJiYgIWNvbnRlbnQuc3RhcnRzV2l0aCgnPGh0dHAnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8IScpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiBjb250YWlucyBcInRvPWZ1bmN0aW9ucy5cIiBvciBcInRvPXRvb2xzLlwiIChpbnRlcm5hbCByb3V0aW5nKVxuICAgIGlmIChjb250ZW50LmluY2x1ZGVzKCd0bz1mdW5jdGlvbnMuJykgfHwgY29udGVudC5pbmNsdWRlcygndG89dG9vbHMuJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGxvb2tzIGxpa2UgaW50ZXJuYWwgaW5zdHJ1Y3Rpb24gKHF1b3RlZCBzeXN0ZW0gdGV4dClcbiAgICBpZiAoY29udGVudC5zdGFydHNXaXRoKCdcIicpICYmIGNvbnRlbnQuaW5jbHVkZXMoJ2Jsb2NrJykgJiYgY29udGVudC5pbmNsdWRlcygndG9vbCcpKSB7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvLyBTdHJ1Y3R1cmFsIGNoZWNrOiB2ZXJ5IHNob3J0IGNvbnRlbnQgdGhhdCdzIGp1c3QgdGltaW5nIGluZm9cbiAgICBpZiAoY29udGVudC5sZW5ndGggPCAzMCAmJiAvZWxhcHNlZHxzZWNvbmRzP3xtc1xcYi9pLnRlc3QoY29udGVudCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGdpYmJlcmlzaCAtIGhpZ2ggcmF0aW8gb2Ygbm9uLXdvcmQgY2hhcmFjdGVyc1xuICAgIGNvbnN0IGFscGhhQ291bnQgPSAoY29udGVudC5tYXRjaCgvW2EtekEtWl0vZykgfHwgW10pLmxlbmd0aDtcbiAgICBjb25zdCB0b3RhbENvdW50ID0gY29udGVudC5yZXBsYWNlKC9cXHMvZywgJycpLmxlbmd0aDtcbiAgICBpZiAodG90YWxDb3VudCA+IDIwICYmIGFscGhhQ291bnQgLyB0b3RhbENvdW50IDwgMC41KSB7XG4gICAgICByZXR1cm4gdHJ1ZTsgLy8gTGVzcyB0aGFuIDUwJSBsZXR0ZXJzID0gbGlrZWx5IGdhcmJhZ2VcbiAgICB9XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQoY29udGVudDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxyXFxuL2csICdcXG4nKS5yZXBsYWNlKC9cXHIvZywgJ1xcbicpLnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgbGltaXRlZCA9XG4gICAgICBub3JtYWxpemVkLmxlbmd0aCA+IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzXG4gICAgICAgID8gbm9ybWFsaXplZC5zbGljZSgwLCB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycylcbiAgICAgICAgOiBub3JtYWxpemVkO1xuXG4gICAgY29uc3QgbWF4U2VnbWVudHMgPSB0aGlzLm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyAqIDM7XG4gICAgY29uc3Qgc2VnbWVudHMgPSBsaW1pdGVkXG4gICAgICAuc3BsaXQoJ1xcbicpXG4gICAgICAuZmxhdE1hcChsaW5lID0+IGxpbmUuc3BsaXQoLyg/PD1bLj8hXSlcXHMrLykpXG4gICAgICAubWFwKGxpbmUgPT4gbGluZS5yZXBsYWNlKC9eW+KAoirij7ril4tcXC1cXHUyMDIyXStcXHMqLywgJycpLnRyaW0oKSlcbiAgICAgIC5maWx0ZXIoQm9vbGVhbik7XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBzZWVuID0gbmV3IFNldDxzdHJpbmc+KCk7XG4gICAgY29uc3QgZGVkdXBlZDogc3RyaW5nW10gPSBbXTtcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWRTZWdtZW50ID0gc2VnbWVudC5yZXBsYWNlKC9cXHMrL2csICcgJyk7XG4gICAgICBjb25zdCBrZXkgPSBub3JtYWxpemVkU2VnbWVudC50b0xvd2VyQ2FzZSgpO1xuICAgICAgaWYgKHNlZW4uaGFzKGtleSkpIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBzZWVuLmFkZChrZXkpO1xuICAgICAgZGVkdXBlZC5wdXNoKG5vcm1hbGl6ZWRTZWdtZW50KTtcbiAgICAgIGlmIChkZWR1cGVkLmxlbmd0aCA+PSBtYXhTZWdtZW50cykge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZGVkdXBlZC5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHByaW9yaXRpemVkID0gdGhpcy5wcmlvcml0aXplUmVhc29uaW5nU2VnbWVudHMoZGVkdXBlZCk7XG4gICAgaWYgKHByaW9yaXRpemVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgbGltaXRlZFNlbGVjdGlvbiA9IHByaW9yaXRpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzKTtcbiAgICBjb25zdCBidWxsZXRlZCA9IGxpbWl0ZWRTZWxlY3Rpb24ubWFwKGxpbmUgPT4gdGhpcy5lbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZSkpO1xuXG4gICAgcmV0dXJuIGJ1bGxldGVkLmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbnN1cmVSZWFzb25pbmdCdWxsZXQobGluZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoL14oW+KAoirij7ril4stXXxcXGQrWy4pXSlcXHMvLnRlc3QobGluZSkpIHtcbiAgICAgIHJldHVybiBsaW5lO1xuICAgIH1cbiAgICByZXR1cm4gYOKAoiAke2xpbmV9YDtcbiAgfVxuXG4gIHByaXZhdGUgbG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lOiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICByZXR1cm4gKFxuICAgICAgL14oXFxkK1suKV1cXHN8c3RlcFxccypcXGQrfHBsYW5cXGJ8bmV4dFxcYnx0aGVuXFxifGdvYWxcXGIpL2kudGVzdChsaW5lKSB8fFxuICAgICAgL15bLSrigKJdXFxzLy50ZXN0KGxpbmUpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCctPicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCfihpInKSB8fFxuICAgICAgbGluZS5pbmNsdWRlcygnOiAnKSB8fFxuICAgICAgL1xcYih0ZXN0fHZlcmlmeXx2YWxpZGF0ZXxjaGVja3xidWlsZHxydW58ZGVwbG95fGRpZmZ8bGludHx0eXBlID9jaGVja3xmaXh8YnVnfGlzc3VlfHJpc2t8bWl0aWdhdGV8aW52ZXN0aWdhdGUpXFxiL2kudGVzdChsaW5lKVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhzZWdtZW50czogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gICAgaWYgKCFzZWdtZW50cy5sZW5ndGgpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzY29yZWQgPSBzZWdtZW50cy5tYXAoKHRleHQsIGluZGV4KSA9PiAoe1xuICAgICAgdGV4dCxcbiAgICAgIGluZGV4LFxuICAgICAgc2NvcmU6IHRoaXMucmVhc29uaW5nU2lnbmFsU2NvcmUodGV4dCksXG4gICAgfSkpO1xuXG4gICAgY29uc3QgaGFzU2lnbmFsID0gc2NvcmVkLnNvbWUoaXRlbSA9PiBpdGVtLnNjb3JlID4gMCk7XG4gICAgaWYgKCFoYXNTaWduYWwpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICBzY29yZWQuc29ydCgoYSwgYikgPT4ge1xuICAgICAgaWYgKGIuc2NvcmUgIT09IGEuc2NvcmUpIHJldHVybiBiLnNjb3JlIC0gYS5zY29yZTtcbiAgICAgIHJldHVybiBhLmluZGV4IC0gYi5pbmRleDtcbiAgICB9KTtcblxuICAgIHJldHVybiBzY29yZWQubWFwKGl0ZW0gPT4gaXRlbS50ZXh0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVhc29uaW5nU2lnbmFsU2NvcmUobGluZTogc3RyaW5nKTogbnVtYmVyIHtcbiAgICBsZXQgc2NvcmUgPSAwO1xuICAgIGNvbnN0IGxvd2VyID0gbGluZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgaWYgKHRoaXMubG9va3NTdHJ1Y3R1cmVkVGhvdWdodChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMztcbiAgICB9XG5cbiAgICBjb25zdCBhY3Rpb25LZXl3b3JkcyA9IFtcbiAgICAgICd0b29sJywgJ2NvbW1hbmQnLCAnc2NyaXB0JywgJ2NvbnRleHQnLCAnc3VtbWFyJywgJ3Jpc2snLCAnaXNzdWUnLFxuICAgICAgJ2ludmVzdGlnYXRlJywgJ3Jvb3QgY2F1c2UnLCAncmVtZWRpYXQnLCAnbWl0aWdhdCcsICdmaXgnLCAncGF0Y2gnLFxuICAgICAgJ3Rlc3QnLCAndmVyaWZ5JywgJ3ZhbGlkYXRlJywgJ2NoZWNrJywgJ2J1aWxkJywgJ2RlcGxveScsICdydW4nLFxuICAgICAgJ2RpZmYnLCAnbGludCcsICd0eXBlY2hlY2snLCAnYmVuY2htYXJrJyxcbiAgICBdO1xuICAgIGlmIChhY3Rpb25LZXl3b3Jkcy5zb21lKGtleXdvcmQgPT4gbG93ZXIuaW5jbHVkZXMoa2V5d29yZCkpKSB7XG4gICAgICBzY29yZSArPSAyO1xuICAgIH1cblxuICAgIGlmICgvWyM64oaSXXwtPi8udGVzdChsaW5lKSkge1xuICAgICAgc2NvcmUgKz0gMTtcbiAgICB9XG5cbiAgICBpZiAoL14oaSgnfCBhKW18aSB3aWxsfGxldCBtZXxzdGFydGluZ3xub3d8b2t8c3VyZSlcXGIvaS50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIGlmIChsaW5lLmxlbmd0aCA+IDEyMCkge1xuICAgICAgc2NvcmUgLT0gMTtcbiAgICB9XG5cbiAgICByZXR1cm4gc2NvcmU7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJlbmRlclRob3VnaHQoY29udGVudDogc3RyaW5nKTogYm9vbGVhbiB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ICYmIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LnRleHQgPT09IG5vcm1hbGl6ZWQpIHtcbiAgICAgIGlmIChub3cgLSB0aGlzLmxhc3RDdXJhdGVkVGhvdWdodC5hdCA8IHRoaXMudGhvdWdodERlZHVwV2luZG93TXMpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0ZXh0IGluIENsYXVkZSBDb2RlIHN0eWxlOiDij7ogcHJlZml4IHdpdGggd3JhcHBlZCBjb250aW51YXRpb24gbGluZXNcbiAgICogRXhhbXBsZTpcbiAgICogICDij7ogVGhlIEFJIHJhbiB0b29scyBidXQgZ2F2ZSBubyByZXNwb25zZS4gTmVlZCB0byBmaXhcbiAgICogICAgIHRoZSByZXNwb25zZSBoYW5kbGluZy4gTGV0IG1lIGNoZWNrIHdoZXJlIHRoZSBBSSdzXG4gICAqICAgICB0ZXh0IHJlc3BvbnNlIHNob3VsZCBiZSBkaXNwbGF5ZWQ6XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENsYXVkZUNvZGVCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMjQsIE1hdGgubWluKHRoaXMuc2FmZVdpZHRoKCkgLSA0LCAxMTApKTsgLy8gUmVzcG9uc2l2ZSB0byB0ZXJtaW5hbCB3aWR0aFxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgZm9yIChsZXQgbGluZUlkeCA9IDA7IGxpbmVJZHggPCBsaW5lcy5sZW5ndGg7IGxpbmVJZHgrKykge1xuICAgICAgY29uc3QgbGluZSA9IGxpbmVzW2xpbmVJZHhdITtcbiAgICAgIGlmICghbGluZS50cmltKCkpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgLy8gV29yZC13cmFwIGVhY2ggbGluZVxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC8oXFxzKykvKTtcbiAgICAgIGxldCBjdXJyZW50TGluZSA9ICcnO1xuXG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgaWYgKChjdXJyZW50TGluZSArIHdvcmQpLmxlbmd0aCA+IG1heFdpZHRoICYmIGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICAgIC8vIEZpcnN0IGxpbmUgb2YgdGhpcyBwYXJhZ3JhcGggZ2V0cyDij7osIHJlc3QgZ2V0IGluZGVudFxuICAgICAgICAgIGNvbnN0IHByZWZpeCA9IHJlc3VsdC5sZW5ndGggPT09IDAgJiYgbGluZUlkeCA9PT0gMCA/IGAke2J1bGxldH0gYCA6ICcgICc7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgICAgIGN1cnJlbnRMaW5lID0gd29yZC50cmltU3RhcnQoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50TGluZSArPSB3b3JkO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50TGluZS50cmltKCkpIHtcbiAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7cHJlZml4fSR7Y3VycmVudExpbmUudHJpbUVuZCgpfWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSB0b29sIGNhbGwgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o+6IFtTZWFyY2hdIHBhdHRlcm46IFwiZm9vXCIsIHBhdGg6IFwic3JjXCIsXG4gICAqICAgICAgICAgICAgICBvdXRwdXRfbW9kZTogXCJjb250ZW50XCIsIGhlYWRfbGltaXQ6IDMwXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmd1bWVudHNcbiAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oXFx3KylcXCgoLiopXFwpJC9zKTtcbiAgICBpZiAoIW1hdGNoKSB7XG4gICAgICAvLyBTaW1wbGUgZm9ybWF0IHdpdGhvdXQgYXJnc1xuICAgICAgY29uc3QgbmFtZU1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKS8pO1xuICAgICAgaWYgKG5hbWVNYXRjaCkge1xuICAgICAgICByZXR1cm4gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske25hbWVNYXRjaFsxXX1dYCl9XFxuYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV07XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdITtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scyAtIDQsIDU2KTtcblxuICAgIC8vIEZvcm1hdDog4o+6IFtUb29sTmFtZV0gYXJncy4uLlxuICAgIGNvbnN0IHByZWZpeCA9IGAke2J1bGxldH0gJHt0aGVtZS50b29sKGBbJHt0b29sTmFtZX1dYCl9IGA7XG4gICAgY29uc3QgcHJlZml4TGVuID0gdG9vbE5hbWUhLmxlbmd0aCArIDU7IC8vIFwi4o+6IFtUb29sTmFtZV0gXCIgdmlzaWJsZSBsZW5ndGhcbiAgICBjb25zdCBpbmRlbnQgPSAnICcucmVwZWF0KHByZWZpeExlbiArIDQpOyAvLyBFeHRyYSBpbmRlbnQgZm9yIHdyYXBwZWQgYXJnc1xuXG4gICAgLy8gUGFyc2UgYW5kIGZvcm1hdCBhcmd1bWVudHNcbiAgICBjb25zdCBhcmdzID0gdGhpcy5wYXJzZVRvb2xBcmdzKGFyZ3NTdHIpO1xuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIGAke3ByZWZpeC50cmltRW5kKCl9XFxuYDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudExpbmUgPSBwcmVmaXg7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGFyZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNvbnN0IGFyZyA9IGFyZ3NbaV0hO1xuICAgICAgY29uc3QgYXJnVGV4dCA9IGAke3RoZW1lLnVpLm11dGVkKGFyZy5rZXkgKyAnOicpfSAke3RoaXMuZm9ybWF0QXJnVmFsdWUoYXJnLmtleSwgYXJnLnZhbHVlKX1gO1xuICAgICAgY29uc3Qgc2VwYXJhdG9yID0gaSA8IGFyZ3MubGVuZ3RoIC0gMSA/ICcsICcgOiAnJztcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhcmcgZml0cyBvbiBjdXJyZW50IGxpbmVcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgaWYgKHRoaXMuc3RyaXBBbnNpKHRlc3RMaW5lKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZSAhPT0gcHJlZml4KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBhcmd1bWVudHMgZnJvbSBzdHJpbmcgbGlrZToga2V5OiBcInZhbHVlXCIsIGtleTI6IHZhbHVlMlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xBcmdzKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IGFyZ3M6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBTaW1wbGUgcmVnZXggdG8gZXh0cmFjdCBrZXk6IHZhbHVlIHBhaXJzXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLCldKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBhcmdzLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhbiBhcmd1bWVudCB2YWx1ZSAodHJ1bmNhdGUgbG9uZyBzdHJpbmdzKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRBcmdWYWx1ZShrZXk6IHN0cmluZywgdmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUmVtb3ZlIHN1cnJvdW5kaW5nIHF1b3RlcyBpZiBwcmVzZW50XG4gICAgY29uc3QgaXNRdW90ZWQgPSB2YWx1ZS5zdGFydHNXaXRoKCdcIicpICYmIHZhbHVlLmVuZHNXaXRoKCdcIicpO1xuICAgIGNvbnN0IGlubmVyID0gaXNRdW90ZWQgPyB2YWx1ZS5zbGljZSgxLCAtMSkgOiB2YWx1ZTtcblxuICAgIGNvbnN0IGxvd2VyS2V5ID0ga2V5LnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3Qgc2hvdWxkUHJlc2VydmUgPVxuICAgICAgbG93ZXJLZXkuaW5jbHVkZXMoJ3BhdGgnKSB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdmaWxlJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fFxuICAgICAgbG93ZXJLZXkgPT09ICdxdWVyeScgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY29tbWFuZCcgfHxcbiAgICAgIGxvd2VyS2V5ID09PSAnY21kJztcblxuICAgIC8vIFRydW5jYXRlIGxvbmcgdmFsdWVzIHdoZW4gbm90IGV4cGxpY2l0bHkgcHJlc2VydmluZ1xuICAgIGNvbnN0IG1heExlbiA9IDQwO1xuICAgIGNvbnN0IHRydW5jYXRlZCA9IHNob3VsZFByZXNlcnZlIHx8IGlubmVyLmxlbmd0aCA8PSBtYXhMZW4gPyBpbm5lciA6IGlubmVyLnNsaWNlKDAsIG1heExlbiAtIDMpICsgJy4uLic7XG5cbiAgICByZXR1cm4gaXNRdW90ZWQgPyBgXCIke3RydW5jYXRlZH1cImAgOiB0cnVuY2F0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCByZXN1bHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o6/ICBGb3VuZCAxMiBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBzdW1tYXJ5IGxpbmUgKGUuZy4sIFwiRm91bmQgWCBsaW5lc1wiKVxuICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oRm91bmQgXFxkKyAoPzpsaW5lcz98ZmlsZXM/fG1hdGNoZXM/KXxSZWFkIFxcZCsgbGluZXM/fFdyb3RlIFxcZCsgbGluZXM/fEVkaXRlZHxDcmVhdGVkfERlbGV0ZWQpL2kpO1xuICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH0gJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgcmVzdWx0cywgc2hvdyB0cnVuY2F0ZWQgcHJldmlld1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMpIHtcbiAgICAgIGNvbnN0IHByZXZpZXcgPSBsaW5lcy5zbGljZSgwLCAyKS5qb2luKCdcXG4nKTtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7cHJldmlld31cXG4gICR7dGhlbWUudWkubXV0ZWQoYC4uLiAke2xpbmVzLmxlbmd0aCAtIDJ9IG1vcmUgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpYCl9XFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgY2FsbDog4o+6IFtSZWFkXSBmaWxlLnRzXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJnc1xuICAgIGNvbnN0IG1hdGNoID0gY29udGVudC5tYXRjaCgvXihcXHcrKVxccyooPzpcXCgoLiopXFwpKT8kL3MpO1xuICAgIGlmICghbWF0Y2gpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV0hO1xuICAgIGNvbnN0IGFyZ3NTdHIgPSBtYXRjaFsyXT8udHJpbSgpIHx8ICcnO1xuXG4gICAgLy8gVHJhY2sgdG9vbCBuYW1lIGZvciBwYWlyaW5nIHdpdGggcmVzdWx0XG4gICAgdGhpcy5sYXN0VG9vbE5hbWUgPSB0b29sTmFtZTtcblxuICAgIC8vIElmIG5vIGFyZ3MsIGp1c3Qgc2hvdyB0b29sIG5hbWVcbiAgICBpZiAoIWFyZ3NTdHIpIHtcbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7dGhlbWUudG9vbChgWyR7dG9vbE5hbWV9XWApfVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLmNvbHMgLSA4OyAvLyBMZWF2ZSByb29tIGZvciBtYXJnaW5zXG5cbiAgICAvLyBQYXJzZSBpbmRpdmlkdWFsIHBhcmFtc1xuICAgIGNvbnN0IHBhcmFtcyA9IHRoaXMucGFyc2VUb29sUGFyYW1zKGFyZ3NTdHIpO1xuICAgIGlmIChwYXJhbXMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske3Rvb2xOYW1lfV1gKX0gJHthcmdzU3RyfVxcbmA7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHBhcmFtcyB3aXRoIHByb3BlciB3cmFwcGluZ1xuICAgIHJldHVybiB0aGlzLmZvcm1hdFRvb2xQYXJhbXModG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRvb2wgcGFyYW1zIGZyb20gYXJncyBzdHJpbmdcbiAgICovXG4gIHByaXZhdGUgcGFyc2VUb29sUGFyYW1zKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIE1hdGNoIGtleTogXCJ2YWx1ZVwiIG9yIGtleTogdmFsdWUgcGF0dGVybnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sXFxuXSspL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGFyZ3NTdHIpKSAhPT0gbnVsbCkge1xuICAgICAgcGFyYW1zLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRvb2wgcGFyYW1zIGluIENsYXVkZSBDb2RlIHN0eWxlIHdpdGggd3JhcHBpbmdcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtcyhcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgaW5kZW50ID0gJyAgICAgICAgJzsgLy8gOCBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvblxuXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gYCR7YnVsbGV0fSAke3RoZW1lLnRvb2woYFske3Rvb2xOYW1lfV1gKX0gYDtcbiAgICBsZXQgZmlyc3RQYXJhbSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHBhcmFtIG9mIHBhcmFtcykge1xuICAgICAgY29uc3QgY29sb3JlZFZhbHVlID0gdGhpcy5jb2xvclBhcmFtVmFsdWUocGFyYW0ua2V5LCBwYXJhbS52YWx1ZSk7XG4gICAgICBjb25zdCBwYXJhbVRleHQgPSBgJHtwYXJhbS5rZXl9OiAke2NvbG9yZWRWYWx1ZX1gO1xuICAgICAgY29uc3QgcGFyYW1TdHIgPSBmaXJzdFBhcmFtID8gcGFyYW1UZXh0IDogYCwgJHtwYXJhbVRleHR9YDtcblxuICAgICAgLy8gQ2hlY2sgaWYgYWRkaW5nIHRoaXMgcGFyYW0gd291bGQgZXhjZWVkIHdpZHRoXG4gICAgICBjb25zdCB0ZXN0TGluZSA9IGN1cnJlbnRMaW5lICsgcGFyYW1TdHI7XG4gICAgICBjb25zdCBwbGFpbkxlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aCh0ZXN0TGluZSk7XG5cbiAgICAgIGlmIChwbGFpbkxlbmd0aCA+IG1heFdpZHRoICYmICFmaXJzdFBhcmFtKSB7XG4gICAgICAgIC8vIFN0YXJ0IG5ldyBsaW5lXG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuICAgICAgICBjdXJyZW50TGluZSA9IGluZGVudCArIHBhcmFtVGV4dDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnRMaW5lICs9IHBhcmFtU3RyO1xuICAgICAgfVxuICAgICAgZmlyc3RQYXJhbSA9IGZhbHNlO1xuICAgIH1cblxuICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUpO1xuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogQ29sb3IgY3JpdGljYWwgcGFyYW1ldGVyIHZhbHVlcyAocGF0aHMsIGNvbW1hbmRzKSBmb3IgcmVhZGFiaWxpdHkuXG4gICovXG4gIHByaXZhdGUgY29sb3JQYXJhbVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8IGxvd2VyS2V5ID09PSAnZmlsZScgfHwgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJyB8fCBsb3dlcktleSA9PT0gJ3F1ZXJ5Jykge1xuICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAobG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fCBsb3dlcktleSA9PT0gJ2NtZCcpIHtcbiAgICAgIHJldHVybiB0aGVtZS50b29sKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgYSBzaG9ydCBzdW1tYXJ5IGZyb20gdG9vbCBhcmdzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUb29sU3VtbWFyeSh0b29sTmFtZTogc3RyaW5nLCBhcmdzU3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB0b29sID0gdG9vbE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIEV4dHJhY3QgcGF0aC9maWxlIGZvciBmaWxlIG9wZXJhdGlvbnNcbiAgICBpZiAoWydyZWFkJywgJ3dyaXRlJywgJ2VkaXQnLCAnZ2xvYicsICdncmVwJywgJ3NlYXJjaCddLmluY2x1ZGVzKHRvb2wpKSB7XG4gICAgICBjb25zdCBwYXRoTWF0Y2ggPSBhcmdzU3RyLm1hdGNoKC8oPzpwYXRofGZpbGVfcGF0aHxwYXR0ZXJuKTpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAocGF0aE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoTWF0Y2hbMV0hO1xuICAgICAgICByZXR1cm4gdGhlbWUuZmlsZT8ucGF0aCA/IHRoZW1lLmZpbGUucGF0aChwYXRoKSA6IHRoZW1lLnVpLm11dGVkKHBhdGgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgY29tbWFuZCBmb3IgYmFzaFxuICAgIGlmICh0b29sID09PSAnYmFzaCcpIHtcbiAgICAgIGNvbnN0IGNtZE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvY29tbWFuZDpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAoY21kTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgY21kID0gY21kTWF0Y2hbMV0hO1xuICAgICAgICByZXR1cm4gdGhlbWUudWkubXV0ZWQoY21kKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgcmVzdWx0OiDijr8gIEZvdW5kIFggbGluZXMgKGN0cmwrbyB0byBleHBhbmQpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUGFyc2UgY29tbW9uIHJlc3VsdCBwYXR0ZXJucyBmb3Igc3VtbWFyeVxuICAgIGNvbnN0IGxpbmVNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKVxccypsaW5lcz8vaSk7XG4gICAgY29uc3QgZmlsZU1hdGNoID0gY29udGVudC5tYXRjaCgvKFxcZCspXFxzKig/OmZpbGVzP3xtYXRjaGVzPykvaSk7XG4gICAgY29uc3QgcmVhZE1hdGNoID0gY29udGVudC5tYXRjaCgvcmVhZC4qPyhcXGQrKVxccypsaW5lcz8vaSk7XG5cbiAgICAvLyBDaGVjayBpZiBjb250ZW50IGNvbnRhaW5zIGEgZmlsZSBwYXRoIG9yIGNvbW1hbmQgdGhhdCBzaG91bGQgYmUgcHJlc2VydmVkXG4gICAgY29uc3QgaGFzUGF0aCA9IC8oPzpefFxccykoPzpcXC9bXFx3Li8tXSt8W1xcdy4vLV0rXFwvW1xcdy4vLV0rKS8udGVzdChjb250ZW50KTtcbiAgICBjb25zdCBoYXNDb21tYW5kID0gL15cXHMqXFwkXFxzKy4rfGNvbW1hbmQ6L2kudGVzdChjb250ZW50KTtcbiAgICBjb25zdCBpc1BhdGhPckRpciA9IC9eKD86RmlsZXxEaXJlY3Rvcnl8UGF0aCk6XFxzKi9pLnRlc3QoY29udGVudCk7XG5cbiAgICBsZXQgc3VtbWFyeTogc3RyaW5nO1xuICAgIGxldCBwcmVzZXJ2ZUZ1bGwgPSBmYWxzZTtcblxuICAgIGlmIChyZWFkTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgUmVhZCAke3JlYWRNYXRjaFsxXX0gbGluZXNgO1xuICAgIH0gZWxzZSBpZiAobGluZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7bGluZU1hdGNoWzFdfSBsaW5lJHtsaW5lTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChmaWxlTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgRm91bmQgJHtmaWxlTWF0Y2hbMV19IGZpbGUke2ZpbGVNYXRjaFsxXSA9PT0gJzEnID8gJycgOiAncyd9YDtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQubWF0Y2goL14oc3VjY2Vzc3xva3xkb25lfGNvbXBsZXRlZHx3cml0dGVufGVkaXRlZHxjcmVhdGVkKS9pKSkge1xuICAgICAgc3VtbWFyeSA9ICfinJMnO1xuICAgIH0gZWxzZSBpZiAoaXNQYXRoT3JEaXIgfHwgaGFzUGF0aCB8fCBoYXNDb21tYW5kKSB7XG4gICAgICAvLyBQcmVzZXJ2ZSBmdWxsIGNvbnRlbnQgZm9yIHBhdGhzLCBkaXJlY3RvcmllcywgYW5kIGNvbW1hbmRzXG4gICAgICAvLyBPbmx5IHNob3cgZmlyc3QgbGluZSBpZiBtdWx0aS1saW5lXG4gICAgICBjb25zdCBmaXJzdExpbmUgPSBjb250ZW50LnNwbGl0KCdcXG4nKVswXSB8fCBjb250ZW50O1xuICAgICAgc3VtbWFyeSA9IGZpcnN0TGluZTtcbiAgICAgIHByZXNlcnZlRnVsbCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFVzZSBjb250ZW50IGRpcmVjdGx5LCB0cnVuY2F0ZWQgaWYgbmVlZGVkXG4gICAgICBzdW1tYXJ5ID0gY29udGVudC5sZW5ndGggPiA0MCA/IGNvbnRlbnQuc2xpY2UoMCwgMzcpICsgJ+KApicgOiBjb250ZW50O1xuICAgIH1cblxuICAgIC8vIFN0b3JlIGNvbGxhcHNlZCByZXN1bHQgZm9yIEN0cmwrTyBleHBhbnNpb25cbiAgICB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLnB1c2goe1xuICAgICAgdG9vbE5hbWU6IHRoaXMubGFzdFRvb2xOYW1lIHx8ICd0b29sJyxcbiAgICAgIGNvbnRlbnQsXG4gICAgICBzdW1tYXJ5LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH0pO1xuXG4gICAgLy8gVHJpbSB0byBtYXggc2l6ZVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aCA+IHRoaXMubWF4Q29sbGFwc2VkUmVzdWx0cykge1xuICAgICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cy5zaGlmdCgpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbG9yZWRTdW1tYXJ5ID0gdGhpcy5jb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeSk7XG4gICAgLy8gT25seSBzaG93IGV4cGFuZCBoaW50IGlmIGNvbnRlbnQgaXMgYWN0dWFsbHkgY29sbGFwc2VkIChtdWx0aS1saW5lIG9yIHdhcyB0cnVuY2F0ZWQpXG4gICAgY29uc3QgaGFzTW9yZUNvbnRlbnQgPSBjb250ZW50LmluY2x1ZGVzKCdcXG4nKSB8fCAoIXByZXNlcnZlRnVsbCAmJiBjb250ZW50Lmxlbmd0aCA+IDQwKTtcbiAgICBjb25zdCBleHBhbmRIaW50ID0gaGFzTW9yZUNvbnRlbnQgPyBgICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfWAgOiAnJztcbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbG9yZWRTdW1tYXJ5fSR7ZXhwYW5kSGludH1cXG5gO1xuICB9XG5cbiAgcHJpdmF0ZSBjb2xvclJlc3VsdFN1bW1hcnkoc3VtbWFyeTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXN1bW1hcnkpIHJldHVybiBzdW1tYXJ5O1xuICAgIGNvbnN0IGxvd2VyID0gc3VtbWFyeS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlci5pbmNsdWRlcygnZmFpbCcpIHx8IGxvd2VyLmluY2x1ZGVzKCdlcnJvcicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuZXJyb3Ioc3VtbWFyeSk7XG4gICAgfVxuICAgIGlmIChzdW1tYXJ5LnN0YXJ0c1dpdGgoJ+KckycpIHx8IGxvd2VyLmluY2x1ZGVzKCd1cGRhdGVkJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2NyZWF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnd3JpdHRlbicpKSB7XG4gICAgICByZXR1cm4gdGhlbWUuc3VjY2VzcyhzdW1tYXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoZW1lLmluZm8oc3VtbWFyeSk7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCByZXNwb25zZSB3aXRoIGJ1bGxldCBvbiBmaXJzdCBsaW5lXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLndyYXBCdWxsZXRUZXh0KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIFdyYXAgdGV4dCB3aXRoIGEgc2luZ2xlIGJ1bGxldCBvbiB0aGUgZmlyc3QgbGluZSBhbmQgdGlkeSBpbmRlbnRhdGlvbiBmb3IgcmVhZGFiaWxpdHkuXG4gICAqIFByZXZlbnRzIGF3a3dhcmQgbWlkLXdvcmQgdGVybWluYWwgd3JhcHBpbmcgYnkgaGFuZGxpbmcgdGhlIGxheW91dCBvdXJzZWx2ZXMuXG4gICAqL1xuICBwcml2YXRlIHdyYXBCdWxsZXRUZXh0KFxuICAgIGNvbnRlbnQ6IHN0cmluZyxcbiAgICBvcHRpb25zOiB7IG1heFdpZHRoPzogbnVtYmVyOyBsYWJlbD86IHN0cmluZzsgbGFiZWxDb2xvcj86ICh2YWx1ZTogc3RyaW5nKSA9PiBzdHJpbmcgfSA9IHt9XG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgY2xlYW5lZCA9IGNvbnRlbnQucmVwbGFjZSgvXlvij7rigKLil4tdXFxzKi8sICcnKS50cmltRW5kKCk7XG4gICAgaWYgKCFjbGVhbmVkLnRyaW0oKSkge1xuICAgICAgcmV0dXJuICcnO1xuICAgIH1cblxuICAgIC8vIFJlc2VydmUgYSBsaXR0bGUgbWFyZ2luIHRvIHJlZHVjZSB0ZXJtaW5hbCB3cmFwIGppdHRlclxuICAgIGNvbnN0IGF2YWlsYWJsZVdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDIwLCBNYXRoLm1pbihvcHRpb25zLm1heFdpZHRoID8/IGF2YWlsYWJsZVdpZHRoIC0gMiwgYXZhaWxhYmxlV2lkdGgpKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBvcHRpb25zLmxhYmVsXG4gICAgICA/IGAke29wdGlvbnMubGFiZWxDb2xvciA/IG9wdGlvbnMubGFiZWxDb2xvcihvcHRpb25zLmxhYmVsKSA6IG9wdGlvbnMubGFiZWx9JHt0aGVtZS51aS5tdXRlZCgnIMK3ICcpfWBcbiAgICAgIDogJyc7XG4gICAgY29uc3QgYnVsbGV0UHJlZml4ID0gYCR7YnVsbGV0fSAke2xhYmVsVGV4dH1gO1xuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKGAke2J1bGxldH0gYCkpO1xuXG4gICAgY29uc3QgbGluZXMgPSBjbGVhbmVkLnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGZpcnN0Tm9uRW1wdHkgPSB0cnVlO1xuXG4gICAgZm9yIChjb25zdCByYXdMaW5lIG9mIGxpbmVzKSB7XG4gICAgICBjb25zdCBsaW5lID0gcmF3TGluZS50cmltKCk7XG4gICAgICBpZiAoIWxpbmUpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goJycpOyAvLyBQcmVzZXJ2ZSBpbnRlbnRpb25hbCBzcGFjaW5nIGJldHdlZW4gcGFyYWdyYXBoc1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3Qgd29yZHMgPSBsaW5lLnNwbGl0KC9cXHMrLyk7XG4gICAgICBsZXQgY3VycmVudCA9ICcnO1xuICAgICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICAgIGNvbnN0IHByZWZpeExlbmd0aCA9IHRoaXMudmlzaWJsZUxlbmd0aChmaXJzdE5vbkVtcHR5ID8gYnVsbGV0UHJlZml4IDogaW5kZW50KTtcbiAgICAgICAgaWYgKHByZWZpeExlbmd0aCArIHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gbWF4V2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjdXJyZW50ID0gY2FuZGlkYXRlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmIChjdXJyZW50KSB7XG4gICAgICAgIHJlc3VsdC5wdXNoKGAke2ZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnR9JHtjdXJyZW50fWApO1xuICAgICAgICBmaXJzdE5vbkVtcHR5ID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0aGlua2luZyBibG9jayB3aXRoIGVuaGFuY2VkIHZpc3VhbCBkZXNpZ24uXG4gICAqIFVzZXMgYSBkaXN0aW5jdCB2aXN1YWwgc3R5bGUgdG8gY2xlYXJseSBzZXBhcmF0ZSB0aGlua2luZyBmcm9tIHJlc3BvbnNlcy5cbiAgICpcbiAgICogSW4gcGxhaW4gb3V0cHV0IG1vZGUgd2Uga2VlcCBpdCBzaW1wbGUgYW5kIGlubGluZSB3aXRoIHRoZSByZXN0IG9mIHRoZVxuICAgKiBzdHJlYW0gc28gdHJhbnNjcmlwdHMgcmVtYWluIGVhc3kgdG8gc2Nhbi5cbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VGhpbmtpbmdCbG9jayhjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghY29udGVudC50cmltKCkpIHJldHVybiAnJztcblxuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBjb250ZW50LnJlcGxhY2UoL1xccysvZywgJyAnKS50cmltKCk7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQobm9ybWFsaXplZCwge1xuICAgICAgbGFiZWw6ICd0aGlua2luZycsXG4gICAgICBsYWJlbENvbG9yOiB0aGVtZS5pbmZvID8/ICgodmFsdWU6IHN0cmluZykgPT4gdmFsdWUpLFxuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSB3cmFwVGV4dFRvV2lkdGgodGV4dDogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGlmICghdGV4dC50cmltKCkpIHJldHVybiBbJyddO1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC50cmltKCkuc3BsaXQoL1xccysvKTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBjdXJyZW50ID8gYCR7Y3VycmVudH0gJHt3b3JkfWAgOiB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpID4gd2lkdGggJiYgY3VycmVudCkge1xuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQpO1xuICAgICAgICBjdXJyZW50ID0gd29yZDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBzdHJlYW1pbmcgZWxhcHNlZCB0aW1lIGluIENsYXVkZSBDb2RlIHN0eWxlOiAzbSAzMHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0U3RyZWFtaW5nRWxhcHNlZCgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAoIXRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSByZXR1cm4gbnVsbDtcbiAgICBjb25zdCBlbGFwc2VkID0gTWF0aC5mbG9vcigoRGF0ZS5ub3coKSAtIHRoaXMuc3RyZWFtaW5nU3RhcnRUaW1lKSAvIDEwMDApO1xuICAgIGlmIChlbGFwc2VkIDwgNSkgcmV0dXJuIG51bGw7IC8vIERvbid0IHNob3cgZm9yIHZlcnkgc2hvcnQgZHVyYXRpb25zXG4gICAgY29uc3QgbWlucyA9IE1hdGguZmxvb3IoZWxhcHNlZCAvIDYwKTtcbiAgICBjb25zdCBzZWNzID0gZWxhcHNlZCAlIDYwO1xuICAgIGlmIChtaW5zID4gMCkge1xuICAgICAgcmV0dXJuIGAke21pbnN9bSAke3NlY3N9c2A7XG4gICAgfVxuICAgIHJldHVybiBgJHtzZWNzfXNgO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICogU2hvd3MgYSB2aXN1YWwgc2VwYXJhdG9yIHdpdGggXCJoaXN0b3J5XCIgbGFiZWwgYW5kIGN0cmwrbyBoaW50XG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiBzdHJpbmcge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5taW4odGhpcy5jb2xzLCA4MCk7XG4gICAgY29uc3QgbGFiZWxUZXh0ID0gYCAke2xhYmVsfSBgO1xuICAgIGNvbnN0IHBhZGRpbmcgPSBNYXRoLm1heCgwLCBtYXhXaWR0aCAtIGxhYmVsVGV4dC5sZW5ndGgpO1xuICAgIGNvbnN0IGxlZnRQYWQgPSBNYXRoLmZsb29yKHBhZGRpbmcgLyAyKTtcbiAgICBjb25zdCByaWdodFBhZCA9IE1hdGguY2VpbChwYWRkaW5nIC8gMik7XG5cbiAgICAvLyBDbGF1ZGUgQ29kZSBzdHlsZTog4pWQ4pWQIGhpc3Rvcnkg4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQ4pWQXG4gICAgY29uc3Qgc2VwYXJhdG9yID0gdGhlbWUudWkubXV0ZWQoJ+KVkCcucmVwZWF0KGxlZnRQYWQpICsgbGFiZWxUZXh0ICsgJ+KVkCcucmVwZWF0KHJpZ2h0UGFkKSk7XG5cbiAgICByZXR1cm4gYFxcbiR7c2VwYXJhdG9yfVxcbiR7Y29udGVudH1cXG5gO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZCBhIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrIHRvIHRoZSBldmVudCBxdWV1ZVxuICAgKiBUaGlzIGRpc3BsYXlzIGEgY29sbGFwc2VkIHZpZXcgd2l0aCBleHBhbnNpb24gaGludCAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqL1xuICBhZGRDb21wYWN0QmxvY2soY29udGVudDogc3RyaW5nLCBsYWJlbDogc3RyaW5nID0gJ2hpc3RvcnknKTogdm9pZCB7XG4gICAgY29uc3QgZm9ybWF0dGVkQ29udGVudCA9IHRoaXMuZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQsIGxhYmVsKTtcbiAgICB0aGlzLmV2ZW50UXVldWUucHVzaCh7XG4gICAgICB0eXBlOiAncmVzcG9uc2UnLFxuICAgICAgcmF3VHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIGNvbnRlbnQ6IGZvcm1hdHRlZENvbnRlbnQsXG4gICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXG4gICAgICBpc0NvbXBhY3RlZDogdHJ1ZSxcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIHRoZSBtb3N0IHJlY2VudCB0b29sIHJlc3VsdCBpbmxpbmUgKEN0cmwrTyBzdXBwb3J0KS5cbiAgICogUG9wcyBmcm9tIHRoZSBjb2xsYXBzZWQgcmVzdWx0cyBzdGFjayBhbmQgZGlzcGxheXMgZnVsbCBjb250ZW50LlxuICAgKi9cbiAgZXhwYW5kTGFzdFRvb2xSZXN1bHQoKTogYm9vbGVhbiB7XG4gICAgLy8gRmlyc3QgdHJ5IHRoZSBuZXcgc3RhY2ssIGZhbGxiYWNrIHRvIG9sZCBsYXN0VG9vbFJlc3VsdFxuICAgIGNvbnN0IGNvbGxhcHNlZCA9IHRoaXMuY29sbGFwc2VkVG9vbFJlc3VsdHMucG9wKCk7XG4gICAgaWYgKCFjb2xsYXBzZWQgJiYgIXRoaXMubGFzdFRvb2xSZXN1bHQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250ZW50ID0gY29sbGFwc2VkPy5jb250ZW50IHx8IHRoaXMubGFzdFRvb2xSZXN1bHQgfHwgJyc7XG4gICAgY29uc3QgdG9vbE5hbWUgPSBjb2xsYXBzZWQ/LnRvb2xOYW1lIHx8ICdyZXN1bHQnO1xuXG4gICAgLy8gRm9ybWF0IHdpdGggdG9vbCBuYW1lIGxhYmVsXG4gICAgY29uc3QgbGFiZWwgPSBgJHt0b29sTmFtZX1gO1xuICAgIGNvbnN0IHJlbmRlcmVkID0gdGhpcy53cmFwQnVsbGV0VGV4dChjb250ZW50LCB7IGxhYmVsLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiByZW5kZXJlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiBmYWxzZSxcbiAgICB9KTtcblxuICAgIC8vIENsZWFyIGxhc3RUb29sUmVzdWx0IGlmIHdlIHVzZWQgdGhlIHN0YWNrXG4gICAgaWYgKGNvbGxhcHNlZCkge1xuICAgICAgdGhpcy5sYXN0VG9vbFJlc3VsdCA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICB2b2lkIHRoaXMucHJvY2Vzc1F1ZXVlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdldCBjb3VudCBvZiBleHBhbmRhYmxlIGNvbGxhcHNlZCByZXN1bHRzXG4gICAqL1xuICBnZXRDb2xsYXBzZWRSZXN1bHRDb3VudCgpOiBudW1iZXIge1xuICAgIHJldHVybiB0aGlzLmNvbGxhcHNlZFRvb2xSZXN1bHRzLmxlbmd0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBDbGVhciBhbGwgY29sbGFwc2VkIHJlc3VsdHMgKGUuZy4sIG9uIG5ldyBjb252ZXJzYXRpb24pXG4gICAqL1xuICBjbGVhckNvbGxhcHNlZFJlc3VsdHMoKTogdm9pZCB7XG4gICAgdGhpcy5jb2xsYXBzZWRUb29sUmVzdWx0cyA9IFtdO1xuICAgIHRoaXMubGFzdFRvb2xSZXN1bHQgPSBudWxsO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIFN0YXR1cyAvIG1vZGUgLS0tLS0tLS0tLS0tXG5cbiAgc2V0TW9kZShtb2RlOiAnaWRsZScgfCAnc3RyZWFtaW5nJyk6IHZvaWQge1xuICAgIGNvbnN0IHdhc1N0cmVhbWluZyA9IHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZyc7XG4gICAgdGhpcy5tb2RlID0gbW9kZTtcblxuICAgIC8vIFRyYWNrIHN0cmVhbWluZyBzdGFydCB0aW1lIGZvciBlbGFwc2VkIGRpc3BsYXlcbiAgICBpZiAobW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdUb2tlbnMgPSAwOyAvLyBSZXNldCB0b2tlbiBjb3VudFxuICAgICAgLy8gQ2xlYXIgaW5saW5lIHBhbmVsIHdoZW4gZW50ZXJpbmcgc3RyZWFtaW5nIG1vZGUgdG8gcHJldmVudCBzdGFsZSBtZW51c1xuICAgICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgICB0aGlzLmlubGluZVBhbmVsID0gW107XG4gICAgICB9XG4gICAgICB0aGlzLnN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gJ2lkbGUnICYmIHdhc1N0cmVhbWluZykge1xuICAgICAgdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUgPSBudWxsO1xuICAgICAgdGhpcy5zdG9wU3Bpbm5lckFuaW1hdGlvbigpO1xuICAgIH1cblxuICAgIGlmICh3YXNTdHJlYW1pbmcgJiYgbW9kZSA9PT0gJ2lkbGUnICYmICF0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lKSB7XG4gICAgICAvLyBGaW5pc2ggc3RyZWFtaW5nIG9uIGEgZnJlc2ggbGluZSBzbyB0aGUgbmV4dCBwcm9tcHQvZXZlbnQgZG9lc24ndCBjb2xsaWRlXG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBBbHdheXMgcmVuZGVyIHByb21wdCB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50IChyaWNoIG1vZGUgb25seSlcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFN0YXJ0IHRoZSBhbmltYXRlZCBzcGlubmVyIGZvciBzdHJlYW1pbmcgc3RhdHVzXG4gICAqL1xuICBwcml2YXRlIHN0YXJ0U3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHJldHVybjsgLy8gQWxyZWFkeSBydW5uaW5nXG4gICAgdGhpcy5zcGlubmVyRnJhbWUgPSAwO1xuICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgdGhpcy5zcGlubmVyRnJhbWUgPSAodGhpcy5zcGlubmVyRnJhbWUgKyAxKSAlIHNwaW5uZXJGcmFtZXMuYnJhaWxsZS5sZW5ndGg7XG4gICAgICB0aGlzLmFjdGl2aXR5U3RhckZyYW1lID0gKHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgKyAxKSAlIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzLmxlbmd0aDtcbiAgICAgIC8vIFVwZGF0ZSBlbGFwc2VkIHRpbWUgY29sb3IgYW5pbWF0aW9uIChzbG93ZXIgY3ljbGUpXG4gICAgICBpZiAodGhpcy5zcGlubmVyRnJhbWUgJSAzID09PSAwKSB7XG4gICAgICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAodGhpcy5lbGFwc2VkQ29sb3JGcmFtZSArIDEpICUgdGhpcy5lbGFwc2VkQ29sb3JGcmFtZXMubGVuZ3RoO1xuICAgICAgfVxuICAgICAgLy8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBzcGlubmVyL3N0YXIgZnJhbWVcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0sIDgwKTsgLy8gfjEyIEZQUyBmb3Igc21vb3RoIHNwaW5uZXIgYW5pbWF0aW9uXG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0aGUgYW5pbWF0ZWQgc3Bpbm5lclxuICAgKi9cbiAgcHJpdmF0ZSBzdG9wU3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMuZWxhcHNlZENvbG9yRnJhbWUgPSAwO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0aXZpdHkgbWVzc2FnZSBkaXNwbGF5ZWQgd2l0aCBhbmltYXRlZCBzdGFyXG4gICAqIEV4YW1wbGU6IFwiUnVtaW5hdGluZ+KAplwiIHNob3dzIGFzIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCJcbiAgICovXG4gIHNldEFjdGl2aXR5KG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b2tlbiBjb3VudCBkaXNwbGF5ZWQgaW4gdGhlIGFjdGl2aXR5IGxpbmVcbiAgICovXG4gIHVwZGF0ZVN0cmVhbWluZ1Rva2Vucyh0b2tlbnM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b2tlbiBjb3VudCBhcyBjb21wYWN0IHN0cmluZyAoZS5nLiwgMS4yaywgMjRrLCAxMjhrKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb2tlbkNvdW50KHRva2VuczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodG9rZW5zIDwgMTAwMCkgcmV0dXJuIFN0cmluZyh0b2tlbnMpO1xuICAgIGlmICh0b2tlbnMgPCAxMDAwMCkgcmV0dXJuIGAkeyh0b2tlbnMgLyAxMDAwKS50b0ZpeGVkKDEpfWtgO1xuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHRva2VucyAvIDEwMDApfWtgO1xuICB9XG5cbiAgZ2V0TW9kZSgpOiAnaWRsZScgfCAnc3RyZWFtaW5nJyB7XG4gICAgcmV0dXJuIHRoaXMubW9kZTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCdW5kbGUoeyBtYWluOiBtZXNzYWdlLCBvdmVycmlkZTogbnVsbCwgc3RyZWFtaW5nOiBudWxsIH0pO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzQnVuZGxlKFxuICAgIHN0YXR1czogeyBtYWluPzogc3RyaW5nIHwgbnVsbDsgb3ZlcnJpZGU/OiBzdHJpbmcgfCBudWxsOyBzdHJlYW1pbmc/OiBzdHJpbmcgfCBudWxsIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2U3RyZWFtaW5nID0gdGhpcy5zdGF0dXNTdHJlYW1pbmc7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgbWFpbkNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgb3ZlcnJpZGVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICBpZiAoc3RhdHVzLm1haW4gIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMubWFpbiAhPT0gdGhpcy5zdGF0dXNNZXNzYWdlKSB7XG4gICAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBzdGF0dXMubWFpbjtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgbWFpbkNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzLm92ZXJyaWRlICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm92ZXJyaWRlICE9PSB0aGlzLnN0YXR1c092ZXJyaWRlKSB7XG4gICAgICB0aGlzLnN0YXR1c092ZXJyaWRlID0gc3RhdHVzLm92ZXJyaWRlO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBvdmVycmlkZUNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0NoYW5nZWQgPSBzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gcHJldlN0cmVhbWluZztcbiAgICBpZiAoc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoc3RyZWFtaW5nQ2hhbmdlZCkge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdHVzU3RyZWFtaW5nID0gc3RhdHVzLnN0cmVhbWluZztcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdJbnRyb2R1Y2UgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBwcmV2U3RyZWFtaW5nID09PSBudWxsICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBzdHJlYW1pbmdDbGVhcmVkID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgc3RhdHVzLnN0cmVhbWluZyA9PT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IG9ubHlTdHJlYW1pbmdDaGFuZ2VkID0gc3RyZWFtaW5nQ2hhbmdlZCAmJiAhbWFpbkNoYW5nZWQgJiYgIW92ZXJyaWRlQ2hhbmdlZDtcbiAgICBjb25zdCBza2lwU3RyZWFtaW5nUmVuZGVyID1cbiAgICAgIG9ubHlTdHJlYW1pbmdDaGFuZ2VkICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXN0cmVhbWluZ0ludHJvZHVjZSAmJiAhc3RyZWFtaW5nQ2xlYXJlZDtcblxuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkICYmICFza2lwU3RyZWFtaW5nUmVuZGVyO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU3RhdHVzTWV0YShcbiAgICBtZXRhOiB7XG4gICAgICBtb2RlbD86IHN0cmluZztcbiAgICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgICAgdmVyc2lvbj86IHN0cmluZztcbiAgICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICAgIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnN0YXR1c01ldGEsIC4uLm1ldGEgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdHVzTWV0YSk7XG4gICAgdGhpcy5zdGF0dXNNZXRhID0gbmV4dDtcbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZDtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGVUb2dnbGVzKHN0YXRlOiBQYXJ0aWFsPE1vZGVUb2dnbGVTdGF0ZT4pOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZVN0YXRlID0geyAuLi50aGlzLnRvZ2dsZVN0YXRlLCAuLi5zdGF0ZSB9O1xuICAgIGlmIChcbiAgICAgICFzdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXkgJiZcbiAgICAgICFzdGF0ZS50aGlua2luZ0hvdGtleSAmJlxuICAgICAgIXN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5hdXRvQ29udGludWVIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kdWFsUmxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kZWJ1Z0hvdGtleVxuICAgICkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIFJMIGFnZW50IGV4ZWN1dGlvbiBzdGF0dXMgZm9yIGRpc3BsYXkgaW4gdGhlIFVJLlxuICAgKiBDYWxsZWQgZHVyaW5nIGR1YWwtUkwgbW9kZSB0byBzaG93IGFjdGl2ZSBhZ2VudCwgbW9kdWxlL3N0ZXAgcHJvZ3Jlc3MsIGFuZCB3aW4gc3RhdGlzdGljcy5cbiAgICovXG4gIHVwZGF0ZVJMU3RhdHVzKHN0YXR1czogUGFydGlhbDxSTEFnZW50U3RhdHVzPik6IHZvaWQge1xuICAgIGNvbnN0IG5leHQgPSB7IC4uLnRoaXMucmxTdGF0dXMsIC4uLnN0YXR1cyB9O1xuICAgIGNvbnN0IGNoYW5nZWQgPSBKU09OLnN0cmluZ2lmeShuZXh0KSAhPT0gSlNPTi5zdHJpbmdpZnkodGhpcy5ybFN0YXR1cyk7XG4gICAgdGhpcy5ybFN0YXR1cyA9IG5leHQ7XG4gICAgaWYgKGNoYW5nZWQpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIENsZWFyIFJMIGFnZW50IHN0YXR1cyAoZS5nLiwgd2hlbiBSTCBydW4gY29tcGxldGVzKS5cbiAgICovXG4gIGNsZWFyUkxTdGF0dXMoKTogdm9pZCB7XG4gICAgdGhpcy5ybFN0YXR1cyA9IHt9O1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IGN1cnJlbnQgUkwgc3RhdHVzIGZvciBleHRlcm5hbCBhY2Nlc3MuXG4gICAqL1xuICBnZXRSTFN0YXR1cygpOiBSZWFkb25seTxSTEFnZW50U3RhdHVzPiB7XG4gICAgcmV0dXJuIHRoaXMucmxTdGF0dXM7XG4gIH1cblxuICBzZXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gKGxpbmVzID8/IFtdKS5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL1xccyskL2csICcnKSk7XG4gICAgY29uc3QgaGFzQ29udGVudCA9IG5vcm1hbGl6ZWQuc29tZSgobGluZSkgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkID0gdGhpcy5saW1pdElubGluZVBhbmVsKG5vcm1hbGl6ZWQpO1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShsaW1pdGVkKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmxpbmVQYW5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IGxpbWl0ZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHN1cHBvcnRzSW5saW5lUGFuZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMucGxhaW5Nb2RlO1xuICB9XG5cbiAgY2xlYXJJbmxpbmVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSByZXR1cm47XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGxpbWl0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heExpbmVzID0gTWF0aC5tYXgoNCwgTWF0aC5taW4odGhpcy5tYXhJbmxpbmVQYW5lbExpbmVzLCBNYXRoLm1heCgyLCB0aGlzLnJvd3MgLSA4KSkpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPD0gbWF4TGluZXMpIHtcbiAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBsaW5lcy5sZW5ndGggLSBtYXhMaW5lcztcbiAgICBjb25zdCBpbmRpY2F0b3IgPSB0aGVtZS51aS5tdXRlZChg4oCmICR7b3ZlcmZsb3d9IG1vcmUgbGluZXNgKTtcbiAgICBjb25zdCB0YWlsQ291bnQgPSBNYXRoLm1heCgxLCBtYXhMaW5lcyAtIDEpO1xuICAgIGNvbnN0IHRhaWwgPSBsaW5lcy5zbGljZSgtdGFpbENvdW50KTtcbiAgICByZXR1cm4gW2luZGljYXRvciwgLi4udGFpbF07XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gUHJvbXB0IHJlbmRlcmluZyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHJlbmRlclByb21wdCgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgLy8gVGhyb3R0bGUgcmVuZGVycyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdFJlbmRlclRpbWUgPCB0aGlzLnJlbmRlclRocm90dGxlTXMpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVuZGVyKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IHRydWU7XG4gICAgICAgIC8vIFRyYWNrIHRoZSB0aW1lciBmb3IgY2xlYW51cFxuICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMucmVuZGVyVGhyb3R0bGVNcyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb21wdEltbWVkaWF0ZSgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBgPiAke3RoaXMuYnVmZmVyfWA7XG4gICAgICBpZiAoIXRoaXMuaXNQcm9tcHRBY3RpdmUgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShgXFxyJHtFU0MuQ0xFQVJfTElORX0ke2xpbmV9YCk7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlOyAvLyBwcm9tcHQgZW5kcyBtaWQtbGluZSBieSBkZXNpZ25cbiAgICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxsb3dQcm9tcHRSZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSaWNoIGlubGluZSBtb2RlOiBwcm9tcHQgZmxvd3MgbmF0dXJhbGx5IHdpdGggY29udGVudFxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIHRoaXMubGFzdFJlbmRlcldpZHRoID0gbWF4V2lkdGg7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5idWlsZE92ZXJsYXlMaW5lcygpO1xuICAgIGlmICghb3ZlcmxheS5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJlZExpbmVzID0gb3ZlcmxheS5saW5lcy5tYXAobGluZSA9PiB0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIGlmICghcmVuZGVyZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG92ZXJsYXkucHJvbXB0SW5kZXgsIHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVkTGluZXMubGVuZ3RoO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcHJvbXB0IGFuZCBoYW5kbGUgaGVpZ2h0IGNoYW5nZXNcbiAgICAvLyBOb3RlOiBXZSBjaGVjayBsYXN0T3ZlcmxheUhlaWdodCA+IDAgdG8ga25vdyBpZiB0aGVyZSdzIHNvbWV0aGluZyB0byBjbGVhcixcbiAgICAvLyBidXQgd2UgdXNlIGxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCBmb3IgY3Vyc29yIHBvc2l0aW9uaW5nIChkZWZhdWx0aW5nIHRvIDAgaWYgY2xlYXJlZClcbiAgICBpZiAodGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ICYmIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiAwKSB7XG4gICAgICAvLyBNb3ZlIHVwIGZyb20gcHJvbXB0IHJvdyB0byB0b3Agb2Ygb3ZlcmxheVxuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXk/LnByb21wdEluZGV4ID8/IDA7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYWxsIHByZXZpb3VzIGxpbmVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7IGkrKykge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICAgIGlmIChpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCAtIDEpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbmV3IGhlaWdodCBpcyBncmVhdGVyLCB3ZSBuZWVkIHRvIGFkZCBibGFuayBsaW5lc1xuICAgICAgY29uc3QgZXh0cmFMaW5lcyA9IGhlaWdodCAtIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7XG4gICAgICBpZiAoZXh0cmFMaW5lcyA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHRyYUxpbmVzOyBpKyspIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wIG9mIHdoZXJlIG92ZXJsYXkgc2hvdWxkIHN0YXJ0XG4gICAgICBjb25zdCBtb3ZlQmFja1VwID0gTWF0aC5tYXgoMCwgaGVpZ2h0IC0gMSk7XG4gICAgICBpZiAobW92ZUJhY2tVcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHttb3ZlQmFja1VwfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcml0ZSBwcm9tcHQgbGluZXMgKG5vIHRyYWlsaW5nIG5ld2xpbmUgb24gbGFzdCBsaW5lKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIHRoaXMud3JpdGUocmVuZGVyZWRMaW5lc1tpXSB8fCAnJyk7XG4gICAgICBpZiAoaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQb3NpdGlvbiBjdXJzb3IgYXQgcHJvbXB0IGlucHV0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRDb2wgPSBNYXRoLm1pbihNYXRoLm1heCgxLCAzICsgdGhpcy5jdXJzb3IpLCB0aGlzLmNvbHMgfHwgODApO1xuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvTW92ZVVwfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZShgXFx4MWJbJHtwcm9tcHRDb2x9R2ApO1xuXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gcHJvbXB0Q29sO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgIHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IHRydWU7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0geyBsaW5lczogcmVuZGVyZWRMaW5lcywgcHJvbXB0SW5kZXggfTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkT3ZlcmxheUxpbmVzKCk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICAvLyBTaW1wbGUgaG9yaXpvbnRhbCBkaXZpZGVyIC0gY2xlYW4gYW5kIHJlbGlhYmxlXG4gICAgY29uc3QgZGl2aWRlciA9IHRoZW1lLnVpLm11dGVkKCfilIAnLnJlcGVhdChtYXhXaWR0aCkpO1xuXG4gICAgY29uc3QgZmFsbGJhY2tBY3Rpdml0eSA9ICgoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZyB8fCB0aGlzLnN0YXR1c092ZXJyaWRlIHx8IHRoaXMuc3RhdHVzTWVzc2FnZTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSB0aGlzLnN0cmlwQW5zaShyYXcpLnJlcGxhY2UoL15b4o+64oCiXVxccyovLCAnJykudHJpbSgpO1xuICAgICAgcmV0dXJuIGNsZWFuZWQgfHwgbnVsbDtcbiAgICB9KSgpO1xuXG4gICAgLy8gQWN0aXZpdHkgbGluZSAob25seSB3aGVuIHN0cmVhbWluZykgLSBzaG93czog4peQIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzKVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICh0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5KSkge1xuICAgICAgLy8gQ2xlYW4gc3Bpbm5lciBhbmltYXRpb24gdXNpbmcgYnJhaWxsZSBkb3RzICsgc2hpbW1lciBhY2NlbnQgZm9yIGEgcmljaGVyIGZlZWxcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFycyA9IHNwaW5uZXJGcmFtZXMuYnJhaWxsZTtcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFyID0gc3Bpbm5lckNoYXJzW3RoaXMuc3Bpbm5lckZyYW1lICUgc3Bpbm5lckNoYXJzLmxlbmd0aF0gPz8gJ+Kgiyc7XG4gICAgICBjb25zdCBzdGFyQ2hhciA9IHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzW3RoaXMuYWN0aXZpdHlTdGFyRnJhbWUgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGhdID8/ICfinLYnO1xuICAgICAgY29uc3Qgc3Bpbm5lckRlY29yYXRlZCA9IGAke3RoZW1lLmluZm8oc3Bpbm5lckNoYXIpfSR7dGhlbWUuYWNjZW50ID8gdGhlbWUuYWNjZW50KHN0YXJDaGFyKSA6IHN0YXJDaGFyfWA7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy5mb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk7XG4gICAgICBjb25zdCBnZW5lcmljQWN0aXZpdGllcyA9IFsnU3RyZWFtaW5nJywgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnXTtcbiAgICAgIGxldCBkaXNwbGF5QWN0aXZpdHkgPSB0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5IHx8ICcnO1xuICAgICAgaWYgKGdlbmVyaWNBY3Rpdml0aWVzLmluY2x1ZGVzKGRpc3BsYXlBY3Rpdml0eSkgJiYgZmFsbGJhY2tBY3Rpdml0eSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5O1xuICAgICAgfVxuICAgICAgaWYgKCFkaXNwbGF5QWN0aXZpdHkudHJpbSgpKSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHkgfHwgJ1dvcmtpbmcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVlZHNFbGxpcHNpcyA9ICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCfigKYnKSAmJiAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgnLi4uJyk7XG4gICAgICAvLyBGb3JtYXQ6IOKgiyBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDFtIDE5cyDCtyDihpExLjJrIHRva2VucylcbiAgICAgIC8vIEJ1aWxkIHBhcnRzIHdpdGggYW5pbWF0ZWQgZWxhcHNlZCB0aW1lIGNvbG9yXG4gICAgICBjb25zdCBlbGFwc2VkQ29sb3IgPSBjaGFsay5oZXgodGhpcy5lbGFwc2VkQ29sb3JGcmFtZXNbdGhpcy5lbGFwc2VkQ29sb3JGcmFtZSAlIHRoaXMuZWxhcHNlZENvbG9yRnJhbWVzLmxlbmd0aF0gPz8gJyNGNTlFMEInKTtcbiAgICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFsnZXNjIHRvIGludGVycnVwdCddO1xuICAgICAgaWYgKGVsYXBzZWQpIHBhcnRzLnB1c2goZWxhcHNlZENvbG9yKGVsYXBzZWQpKTtcbiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1Rva2VucyA+IDApIHtcbiAgICAgICAgcGFydHMucHVzaChg4oaRJHt0aGlzLmZvcm1hdFRva2VuQ291bnQodGhpcy5zdHJlYW1pbmdUb2tlbnMpfSB0b2tlbnNgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZWZpeCA9IGAke3NwaW5uZXJEZWNvcmF0ZWR9IGA7XG4gICAgICBjb25zdCBhY3Rpdml0eVRleHQgPSBgJHtkaXNwbGF5QWN0aXZpdHkudHJpbSgpfSR7bmVlZHNFbGxpcHNpcyA/ICfigKYnIDogJyd9YDtcbiAgICAgIGNvbnN0IHN1ZmZpeCA9IGAgJHt0aGVtZS51aS5tdXRlZCgnKCcpfSR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0ke3RoZW1lLnVpLm11dGVkKCcpJyl9YDtcblxuICAgICAgLy8gQnVpbGQgdGhlIGZ1bGwgYWN0aXZpdHkgbGluZSB3aXRoIGFuaW1hdGVkIGNvbG9yIGZvciBlbGFwc2VkIHRpbWVcbiAgICAgIGNvbnN0IGFjdGl2aXR5TGluZSA9IGAke3ByZWZpeH0ke2FjdGl2aXR5VGV4dH0ke3N1ZmZpeH1gO1xuXG4gICAgICAvLyBBbHdheXMgc2hvdyBmdWxsIHRleHQgLSB3cmFwIHRvIG11bHRpcGxlIGxpbmVzIGlmIG5lZWRlZFxuICAgICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgocHJlZml4KSk7XG4gICAgICBjb25zdCB3cmFwcGVkID0gdGhpcy53cmFwT3ZlcmxheUxpbmUoYWN0aXZpdHlMaW5lLCBtYXhXaWR0aCwgaW5kZW50KTtcbiAgICAgIGxpbmVzLnB1c2goLi4ud3JhcHBlZCk7XG4gICAgfVxuXG4gICAgLy8gVG9wIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5wdXQgcHJvbXB0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IGxpbmVzLmxlbmd0aDtcbiAgICBjb25zdCBpbnB1dExpbmUgPSB0aGlzLmJ1aWxkSW5wdXRMaW5lKCk7XG4gICAgLy8gSGFuZGxlIG11bHRpLWxpbmUgaW5wdXQgYnkgc3BsaXR0aW5nIG9uIG5ld2xpbmVzXG4gICAgY29uc3QgaW5wdXRMaW5lcyA9IGlucHV0TGluZS5zcGxpdCgnXFxuJyk7XG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGlucHV0TGluZXMpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUobGluZSwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBCb3R0b20gZGl2aWRlclxuICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG5cbiAgICAvLyBJbmxpbmUgcGFuZWwgKHBpbm5lZCBzY3JvbGwgYm94IGZvciBsaXZlIG91dHB1dC9tZW51cylcbiAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHBhbmVsTGluZSBvZiB0aGlzLmlubGluZVBhbmVsKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtwYW5lbExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIC8vIFNlcGFyYXRlIGlubGluZSBjb250ZW50IGZyb20gc3VnZ2VzdGlvbnMvdG9nZ2xlc1xuICAgICAgbGluZXMucHVzaChkaXZpZGVyKTtcbiAgICB9XG5cbiAgICAvLyBTbGFzaCBjb21tYW5kIHN1Z2dlc3Rpb25zXG4gICAgaWYgKHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgIGNvbnN0IHN1Z2dlc3Rpb24gPSB0aGlzLnN1Z2dlc3Rpb25zW2luZGV4XSE7XG4gICAgICAgIGNvbnN0IGlzQWN0aXZlID0gaW5kZXggPT09IHRoaXMuc3VnZ2VzdGlvbkluZGV4O1xuICAgICAgICBjb25zdCBtYXJrZXIgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ+KWuCcpIDogdGhlbWUudWkubXV0ZWQoJyAnKTtcbiAgICAgICAgY29uc3QgY21kVGV4dCA9IGlzQWN0aXZlID8gdGhlbWUucHJpbWFyeShzdWdnZXN0aW9uLmNvbW1hbmQpIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5jb21tYW5kKTtcbiAgICAgICAgY29uc3QgZGVzY1RleHQgPSBpc0FjdGl2ZSA/IHN1Z2dlc3Rpb24uZGVzY3JpcHRpb24gOiB0aGVtZS51aS5tdXRlZChzdWdnZXN0aW9uLmRlc2NyaXB0aW9uKTtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21hcmtlcn0gJHtjbWRUZXh0fSDigJQgJHtkZXNjVGV4dH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIE1vZGVsIGFuZCBjb250ZXh0IGluZm9cbiAgICBjb25zdCBtb2RlbENvbnRleHRMaW5lID0gdGhpcy5idWlsZE1vZGVsQ29udGV4dExpbmUoKTtcbiAgICBpZiAobW9kZWxDb250ZXh0TGluZSkge1xuICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke21vZGVsQ29udGV4dExpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICAvLyBTdGF0dXMgKyBtZXRhIGJsb2NrIChpbmNsdWRlcyBkaXIvdmVyc2lvbi90b29sIHN1bW1hcnkpXG4gICAgY29uc3QgY2hyb21lTGluZXMgPSB0aGlzLmJ1aWxkQ2hyb21lTGluZXMoKTtcbiAgICBpZiAoY2hyb21lTGluZXMubGVuZ3RoKSB7XG4gICAgICBmb3IgKGNvbnN0IGNocm9tZUxpbmUgb2YgY2hyb21lTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2Nocm9tZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlIHRvZ2dsZXNcbiAgICBjb25zdCB0b2dnbGVMaW5lcyA9IHRoaXMuYnVpbGRJbmxpbmVUb2dnbGVMaW5lKCk7XG4gICAgaWYgKHRvZ2dsZUxpbmVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAoY29uc3QgdG9nZ2xlTGluZSBvZiB0b2dnbGVMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7dG9nZ2xlTGluZX1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgICAgY29uc3QgbGVnZW5kTGluZXMgPSB0aGlzLmJ1aWxkVG9nZ2xlTGVnZW5kKCk7XG4gICAgICBmb3IgKGNvbnN0IGxlZ2VuZCBvZiBsZWdlbmRMaW5lcykge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7bGVnZW5kfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gSGVscCBoaW50XG4gICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RoZW1lLnVpLm11dGVkKCc/IGZvciBzaG9ydGN1dHMnKX1gLCBtYXhXaWR0aCkpO1xuXG4gICAgcmV0dXJuIHsgbGluZXMsIHByb21wdEluZGV4IH07XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgbW9kZWwgbmFtZSBhbmQgY29udGV4dCB1c2FnZSBsaW5lIHdpdGggbWluaSBwcm9ncmVzcyBiYXJcbiAgICogRm9ybWF0OiBncHQtNCDCtyDilojilojilojilojilpHilpEgODUlIGNvbnRleHRcbiAgICovXG4gIHByaXZhdGUgYnVpbGRNb2RlbENvbnRleHRMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHBhcnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gTW9kZWwgbmFtZSAocHJvdmlkZXIgLyBtb2RlbCBvciBqdXN0IG1vZGVsKVxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IMK3ICR7dGhpcy5zdGF0dXNNZXRhLm1vZGVsfWBcbiAgICAgIDogdGhpcy5zdGF0dXNNZXRhLm1vZGVsIHx8IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlcjtcbiAgICBpZiAobW9kZWwpIHtcbiAgICAgIHBhcnRzLnB1c2godGhlbWUuaW5mbyhtb2RlbCkpO1xuICAgIH1cblxuICAgIC8vIENvbnRleHQgbWV0ZXIgd2l0aCBtaW5pIHByb2dyZXNzIGJhciAoc2hvd3MgdXNlZCBwZXJjZW50YWdlLCBub3QgcmVtYWluaW5nKVxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgY29uc3QgdXNlZCA9IGNsYW1wUGVyY2VudGFnZSh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQpO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSA2O1xuICAgICAgY29uc3QgZmlsbGVkID0gTWF0aC5yb3VuZCgodXNlZCAvIDEwMCkgKiBiYXJXaWR0aCk7XG4gICAgICBjb25zdCBlbXB0eSA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gZmlsbGVkKTtcbiAgICAgIC8vIENvbG9yIGJhc2VkIG9uIGhvdyBmdWxsIHRoZSBjb250ZXh0IGlzIChncmVlbj1sb3cgdXNhZ2UsIHllbGxvdz1tZWRpdW0sIHJlZD1oaWdoKVxuICAgICAgY29uc3QgYmFyQ29sb3IgPSBnZXRDb250ZXh0Q29sb3IodXNlZCwge1xuICAgICAgICBlcnJvcjogdGhlbWUuZXJyb3IsXG4gICAgICAgIHdhcm5pbmc6IHRoZW1lLndhcm5pbmcsXG4gICAgICAgIGluZm86IHRoZW1lLmluZm8sXG4gICAgICAgIHN1Y2Nlc3M6IHRoZW1lLnN1Y2Nlc3MsXG4gICAgICB9KTtcbiAgICAgIGNvbnN0IGJhciA9IGJhckNvbG9yKCfilognLnJlcGVhdChmaWxsZWQpKSArIHRoZW1lLnVpLm11dGVkKCfilpEnLnJlcGVhdChlbXB0eSkpO1xuICAgICAgcGFydHMucHVzaChgJHtiYXJ9ICR7YmFyQ29sb3IoYCR7dXNlZH0lYCl9ICR7dGhlbWUudWkubXV0ZWQoJ2N0eCcpfWApO1xuICAgIH1cblxuICAgIHJldHVybiBwYXJ0cy5sZW5ndGggPiAwID8gcGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnICDCtyAgJykpIDogbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWlsZCBpbmxpbmUgdG9nZ2xlIGNvbnRyb2xzIC0gQ2xhdWRlIENvZGUgc3R5bGVcbiAgICogRm9ybWF0OiDij7Xij7UgYWNjZXB0IGVkaXRzIG9uIChzaGlmdCt0YWIgdG8gY3ljbGUpXG4gICAqIFJldHVybnMgd3JhcHBlZCBsaW5lcyB0byBlbnN1cmUgYWxsIHRvZ2dsZXMgKGluY2x1ZGluZyBSTCkgYXJlIHZpc2libGUgYmVsb3cgdGhlIGNoYXQgYm94LlxuICAgKi9cbiAgLyoqXG4gICAqIEJ1aWxkIHVuaWZpZWQgdG9nZ2xlIHN0YXR1cyBsaW5lIHdpdGggY29sb3ItY29kZWQgc3RhdGVzIGFuZCBpbnRlZ3JhdGVkIGV4cGxhbmF0aW9ucy5cbiAgICogRWFjaCB0b2dnbGUgaGFzIGEgZGlzdGluY3QgY29sb3IgZm9yIGVhc3kgaWRlbnRpZmljYXRpb24uXG4gICAqL1xuICBwcml2YXRlIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpOiBzdHJpbmdbXSB7XG4gICAgY29uc3QgYXV0b0NvbnRpbnVlQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IHZlcmlmaWNhdGlvbkFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUudmVyaWZpY2F0aW9uRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJ2JhbGFuY2VkJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAvLyBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzZWdtZW50cyB3aXRoIERJU1RJTkNUIGNvbG9ycyBmb3IgZWFjaCB0b2dnbGVcbiAgICBjb25zdCB0b2dnbGVzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgLy8gMS4gUkwgbW9kZSAoQ1lBTikgLSBtdWx0aS1hZ2VudCB2cyBzaW5nbGUtcGFzc1xuICAgIGNvbnN0IHJsT24gPSB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEVuYWJsZWQ7XG4gICAgY29uc3QgcmxJY29uID0gcmxPbiA/ICfwn6SWJyA6ICfimqEnO1xuICAgIGNvbnN0IHJsU3RhdHVzID0gcmxPbiA/IHRoZW1lLmluZm8oJ2R1YWwnKSA6IHRoZW1lLnVpLm11dGVkKCdzaW5nbGUnKTtcbiAgICBjb25zdCBybEV4cGxhaW4gPSBybE9uID8gJ211bHRpLWFnZW50JyA6ICdvbmUtcGFzcyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3JsSWNvbn0gJHtybFN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpURdJyl9ICR7dGhlbWUudWkubXV0ZWQocmxFeHBsYWluKX1gKTtcblxuICAgIC8vIDIuIEF1dG8tY29udGludWUgKE1BR0VOVEEvUFVSUExFKSAtIGtlZXAgZ29pbmcgdW50aWwgZG9uZVxuICAgIGNvbnN0IGNvbnRJY29uID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ/CflIQnIDogJ+KPuCc7XG4gICAgY29uc3QgY29udFN0YXR1cyA9IGF1dG9Db250aW51ZUFjdGl2ZSA/IHRoZW1lLnByaW1hcnkoJ2xvb3AnKSA6IHRoZW1lLnVpLm11dGVkKCdzdG9wJyk7XG4gICAgY29uc3QgY29udEV4cGxhaW4gPSBhdXRvQ29udGludWVBY3RpdmUgPyAndW50aWwgZG9uZScgOiAnZWFjaCByZXNwb25zZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2NvbnRJY29ufSAke2NvbnRTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVHXScpfSAke3RoZW1lLnVpLm11dGVkKGNvbnRFeHBsYWluKX1gKTtcblxuICAgIC8vIDMuIFZlcmlmeSAoWUVMTE9XKSAtIGF1dG8tdGVzdHMgYWZ0ZXIgZWRpdHNcbiAgICBjb25zdCB2ZXJpZnlJY29uID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ+KckycgOiAn4peLJztcbiAgICBjb25zdCB2ZXJpZnlTdGF0dXMgPSB2ZXJpZmljYXRpb25BY3RpdmUgPyB0aGVtZS53YXJuaW5nKCd0ZXN0JykgOiB0aGVtZS51aS5tdXRlZCgnc2tpcCcpO1xuICAgIGNvbnN0IHZlcmlmeUV4cGxhaW4gPSB2ZXJpZmljYXRpb25BY3RpdmUgPyAnYXV0by10ZXN0JyA6ICdubyB0ZXN0cyc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke3ZlcmlmeUljb259ICR7dmVyaWZ5U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylVl0nKX0gJHt0aGVtZS51aS5tdXRlZCh2ZXJpZnlFeHBsYWluKX1gKTtcblxuICAgIC8vIDQuIEFwcHJvdmFscyAoR1JFRU4vT1JBTkdFKSAtIGF1dG8gb3IgYXNrIGZvciBwZXJtaXNzaW9uXG4gICAgY29uc3QgYXBwckljb24gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAn8J+boScgOiAn4pyUJztcbiAgICBjb25zdCBhcHByU3RhdHVzID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gdGhlbWUud2FybmluZygnYXNrJykgOiB0aGVtZS5zdWNjZXNzKCdhdXRvJyk7XG4gICAgY29uc3QgYXBwckV4cGxhaW4gPSBhcHByb3ZhbE1vZGUgPT09ICdhcHByb3ZhbCcgPyAnY29uZmlybSBhbGwnIDogJ2F1dG8tYXBwcm92ZSc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2FwcHJJY29ufSAke2FwcHJTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVBXScpfSAke3RoZW1lLnVpLm11dGVkKGFwcHJFeHBsYWluKX1gKTtcblxuICAgIC8vIDUuIFRoaW5raW5nIChCTFVFKSAtIGJhbGFuY2VkIG9yIGRlZXAgcmVhc29uaW5nXG4gICAgY29uc3QgdGhpbmtpbmdJc0RlZXAgPSB0aGlua2luZ0xhYmVsID09PSAnZXh0ZW5kZWQnIHx8IHRoaW5raW5nTGFiZWwgPT09ICdkZWVwJztcbiAgICBjb25zdCB0aGlua0ljb24gPSB0aGlua2luZ0lzRGVlcCA/ICfwn6egJyA6ICfwn5KtJztcbiAgICBjb25zdCB0aGlua1N0YXR1cyA9IHRoaW5raW5nSXNEZWVwID8gdGhlbWUuaW5mbygnZGVlcCcpIDogdGhlbWUudWkubXV0ZWQoJ3F1aWNrJyk7XG4gICAgY29uc3QgdGhpbmtFeHBsYWluID0gdGhpbmtpbmdJc0RlZXAgPyAndGhvcm91Z2gnIDogJ2NvbmNpc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt0aGlua0ljb259ICR7dGhpbmtTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1tUQUJdJyl9ICR7dGhlbWUudWkubXV0ZWQodGhpbmtFeHBsYWluKX1gKTtcblxuICAgIC8vIDYuIERlYnVnIGxvZ2dpbmcgaW5kaWNhdG9yIChSRUQpIC0gdG9nZ2xlIHNob3dzIHdoZXRoZXIgY29uc29sZSBsb2dnaW5nIGlzIGVuYWJsZWRcbiAgICBjb25zdCBkZWJ1Z0FjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuZGVidWdFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IGRlYnVnSWNvbiA9IGRlYnVnQWN0aXZlID8gJ/CfkJ4nIDogJ/CflI0nO1xuICAgIGNvbnN0IGRlYnVnU3RhdHVzID0gZGVidWdBY3RpdmUgPyB0aGVtZS53YXJuaW5nKCdkZWJ1ZyBvbicpIDogdGhlbWUudWkubXV0ZWQoJ2RlYnVnIG9mZicpO1xuICAgIGNvbnN0IGRlYnVnRXhwbGFpbiA9IGRlYnVnQWN0aXZlID8gJ3ZlcmJvc2UgbG9ncycgOiAnc2lsZW50JztcbiAgICB0b2dnbGVzLnB1c2goYCR7ZGVidWdJY29ufSAke2RlYnVnU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbL2RlYnVnXScpfSAke3RoZW1lLnVpLm11dGVkKGRlYnVnRXhwbGFpbil9YCk7XG5cbiAgICAvLyA3LiBTaG9ydGN1dCBoaW50XG4gICAgdG9nZ2xlcy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCc/IGhlbHAnKX1gKTtcblxuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAyKTtcbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHModG9nZ2xlcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIExlZ2VuZCBpcyBub3cgaW50ZWdyYXRlZCBpbnRvIGJ1aWxkSW5saW5lVG9nZ2xlTGluZSBmb3IgdW5pZmllZCBkaXNwbGF5XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkVG9nZ2xlTGVnZW5kKCk6IHN0cmluZ1tdIHtcbiAgICAvLyBMZWdlbmQgZXhwbGFuYXRpb25zIG5vdyBpbnRlZ3JhdGVkIGRpcmVjdGx5IGludG8gdG9nZ2xlIGxpbmVcbiAgICByZXR1cm4gW107XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ2hyb21lTGluZXMoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICBjb25zdCBzdGF0dXNMaW5lcyA9IHRoaXMuYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aCk7XG4gICAgY29uc3QgbWV0YUxpbmVzID0gdGhpcy5idWlsZE1ldGFCbG9jayhtYXhXaWR0aCk7XG4gICAgcmV0dXJuIFsuLi5zdGF0dXNMaW5lcywgLi4ubWV0YUxpbmVzXTtcbiAgfVxuXG4gIHByaXZhdGUgYWJicmV2aWF0ZVBhdGgocGF0aFZhbHVlOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGhvbWUgPSBob21lZGlyKCk7XG4gICAgaWYgKGhvbWUgJiYgcGF0aFZhbHVlLnN0YXJ0c1dpdGgoaG9tZSkpIHtcbiAgICAgIHJldHVybiBwYXRoVmFsdWUucmVwbGFjZShob21lLCAnficpO1xuICAgIH1cbiAgICByZXR1cm4gcGF0aFZhbHVlO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZFN0YXR1c0Jsb2NrKG1heFdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgc3RhdHVzTGFiZWwgPSB0aGlzLmNvbXBvc2VTdGF0dXNMYWJlbCgpO1xuICAgIGlmICghc3RhdHVzTGFiZWwpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIEFkZCBhbmltYXRlZCBzcGlubmVyIHdoZW4gc3RyZWFtaW5nIGZvciBkeW5hbWljIHZpc3VhbCBmZWVkYmFja1xuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnKSB7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhcnMgPSBzcGlubmVyRnJhbWVzLmJyYWlsbGU7XG4gICAgICBjb25zdCBzcGlubmVyQ2hhciA9IHNwaW5uZXJDaGFyc1t0aGlzLnNwaW5uZXJGcmFtZSAlIHNwaW5uZXJDaGFycy5sZW5ndGhdID8/ICfioIsnO1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS5pbmZvKHNwaW5uZXJDaGFyKX0gJHt0aGlzLmFwcGx5VG9uZShzdGF0dXNMYWJlbC50ZXh0LCBzdGF0dXNMYWJlbC50b25lKX1gKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnc3RhdHVzJyl9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSkge1xuICAgICAgc2VnbWVudHMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgncnVudGltZScpfSAke3RoZW1lLnVpLm11dGVkKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uVGltZSl9YCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAvLyBVc2UgYW5pbWF0ZWQgY29udGV4dCBtZXRlciBmb3Igc21vb3RoIGNvbG9yIHRyYW5zaXRpb25zXG4gICAgICB0aGlzLmNvbnRleHRNZXRlci51cGRhdGUodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50KTtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5jb250ZXh0TWV0ZXIucmVuZGVyKCkpO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLndyYXBTZWdtZW50cyhzZWdtZW50cywgbWF4V2lkdGgpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZE1ldGFCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHNlZ21lbnRzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5wcm9maWxlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Byb2ZpbGUnLCB0aGlzLnN0YXR1c01ldGEucHJvZmlsZSwgJ2luZm8nKSk7XG4gICAgfVxuXG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXIgJiYgdGhpcy5zdGF0dXNNZXRhLm1vZGVsXG4gICAgICA/IGAke3RoaXMuc3RhdHVzTWV0YS5wcm92aWRlcn0gLyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ21vZGVsJywgbW9kZWwsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtzcGFjZSA9IHRoaXMuc3RhdHVzTWV0YS53b3Jrc3BhY2UgfHwgdGhpcy5zdGF0dXNNZXRhLmRpcmVjdG9yeTtcbiAgICBpZiAod29ya3NwYWNlKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2RpcicsIHRoaXMuYWJicmV2aWF0ZVBhdGgod29ya3NwYWNlKSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEud3JpdGVzKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3dyaXRlcycsIHRoaXMuc3RhdHVzTWV0YS53cml0ZXMsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5KSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Rvb2xzJywgdGhpcy5zdGF0dXNNZXRhLnRvb2xTdW1tYXJ5LCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnc2Vzc2lvbicsIHRoaXMuc3RhdHVzTWV0YS5zZXNzaW9uTGFiZWwsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLnZlcnNpb24pIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhpcy5mb3JtYXRNZXRhU2VnbWVudCgnYnVpbGQnLCBgdiR7dGhpcy5zdGF0dXNNZXRhLnZlcnNpb259YCwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIC8vIEFkZCBSTCBhZ2VudCBzdGF0dXMgd2hlbiBkdWFsLVJMIG1vZGUgaXMgYWN0aXZlXG4gICAgY29uc3QgcmxTZWdtZW50cyA9IHRoaXMuYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk7XG4gICAgaWYgKHJsU2VnbWVudHMubGVuZ3RoID4gMCkge1xuICAgICAgc2VnbWVudHMucHVzaCguLi5ybFNlZ21lbnRzKTtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCk7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgUkwgYWdlbnQgc3RhdHVzIHNlZ21lbnRzIGZvciBkaXNwbGF5IGR1cmluZyBkdWFsLVJMIGV4ZWN1dGlvbi5cbiAgICogU2hvd3M6IHRvdXJuYW1lbnQgc2NvcmVib2FyZCwgYWN0aXZlIGFnZW50LCBtb2R1bGUvc3RlcCBwcm9ncmVzcywgYW5kIHNjb3Jlcy5cbiAgICovXG4gIHByaXZhdGUgYnVpbGRSTFN0YXR1c1NlZ21lbnRzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCBybCA9IHRoaXMucmxTdGF0dXM7XG5cbiAgICAvLyBPbmx5IHNob3cgUkwgc3RhdHVzIHdoZW4gdGhlcmUncyBtZWFuaW5nZnVsIGRhdGFcbiAgICBpZiAoIXJsLmFjdGl2ZVZhcmlhbnQgJiYgIXJsLndpbnMgJiYgIXJsLmN1cnJlbnRNb2R1bGUpIHtcbiAgICAgIHJldHVybiBzZWdtZW50cztcbiAgICB9XG5cbiAgICAvLyBUb3VybmFtZW50IHNjb3JlYm9hcmQgKGFsd2F5cyBzaG93IHdoZW4gd2lucyBleGlzdClcbiAgICBpZiAocmwud2lucyAmJiAocmwud2lucy5wcmltYXJ5ID4gMCB8fCBybC53aW5zLnJlZmluZXIgPiAwIHx8IHJsLndpbnMudGllcyA+IDApKSB7XG4gICAgICBjb25zdCB0b3RhbEdhbWVzID0gcmwud2lucy5wcmltYXJ5ICsgcmwud2lucy5yZWZpbmVyICsgcmwud2lucy50aWVzO1xuICAgICAgY29uc3QgbGVhZGVyID0gcmwud2lucy5wcmltYXJ5ID4gcmwud2lucy5yZWZpbmVyID8gJ3ByaW1hcnknIDpcbiAgICAgICAgICAgICAgICAgICAgIHJsLndpbnMucmVmaW5lciA+IHJsLndpbnMucHJpbWFyeSA/ICdyZWZpbmVyJyA6ICd0aWUnO1xuXG4gICAgICAvLyBTY29yZWJvYXJkIHdpdGggY29sb3JzIGJhc2VkIG9uIGxlYWRlclxuICAgICAgY29uc3QgcENvbG9yID0gbGVhZGVyID09PSAncHJpbWFyeScgPyB0aGVtZS5zdWNjZXNzIDogdGhlbWUuaW5mbztcbiAgICAgIGNvbnN0IHJDb2xvciA9IGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUuc3VjY2VzcyA6IHRoZW1lLndhcm5pbmc7XG4gICAgICBjb25zdCBwU2NvcmUgPSBwQ29sb3IoYCR7cmwud2lucy5wcmltYXJ5fWApO1xuICAgICAgY29uc3QgclNjb3JlID0gckNvbG9yKGAke3JsLndpbnMucmVmaW5lcn1gKTtcblxuICAgICAgLy8gVHJvcGh5IGZvciBsZWFkZXJcbiAgICAgIGNvbnN0IHRyb3BoeSA9IGxlYWRlciA9PT0gJ3ByaW1hcnknID8gdGhlbWUuaW5mbygn8J+PhicpIDpcbiAgICAgICAgICAgICAgICAgICAgIGxlYWRlciA9PT0gJ3JlZmluZXInID8gdGhlbWUud2FybmluZygn8J+PhicpIDogJ+Kalu+4jyc7XG5cbiAgICAgIC8vIFdpbiBzdHJlYWsgaW5kaWNhdG9yXG4gICAgICBjb25zdCBzdHJlYWtUZXh0ID0gcmwuc3RyZWFrICYmIHJsLnN0cmVhayA+IDEgPyB0aGVtZS51aS5tdXRlZChgIPCflKUke3JsLnN0cmVha31gKSA6ICcnO1xuXG4gICAgICBzZWdtZW50cy5wdXNoKGAke3Ryb3BoeX0ke3BTY29yZX0ke3RoZW1lLnVpLm11dGVkKCc6Jyl9JHtyU2NvcmV9JHtzdHJlYWtUZXh0fWApO1xuXG4gICAgICAvLyBQcm9ncmVzcyBiYXIgc2hvd2luZyByZWxhdGl2ZSB3aW5zXG4gICAgICBpZiAodG90YWxHYW1lcyA+IDApIHtcbiAgICAgICAgY29uc3QgYmFyV2lkdGggPSA4O1xuICAgICAgICBjb25zdCBwQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucHJpbWFyeSAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCByQmFycyA9IE1hdGgucm91bmQoKHJsLndpbnMucmVmaW5lciAvIHRvdGFsR2FtZXMpICogYmFyV2lkdGgpO1xuICAgICAgICBjb25zdCB0QmFycyA9IE1hdGgubWF4KDAsIGJhcldpZHRoIC0gcEJhcnMgLSByQmFycyk7XG4gICAgICAgIGNvbnN0IGJhciA9IHRoZW1lLmluZm8oJ+KWiCcucmVwZWF0KHBCYXJzKSkgK1xuICAgICAgICAgICAgICAgICAgICB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQodEJhcnMpKSArXG4gICAgICAgICAgICAgICAgICAgIHRoZW1lLndhcm5pbmcoJ+KWiCcucmVwZWF0KHJCYXJzKSk7XG4gICAgICAgIHNlZ21lbnRzLnB1c2goYFske2Jhcn1dYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWN0aXZlIHZhcmlhbnQgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmFjdGl2ZVZhcmlhbnQpIHtcbiAgICAgIGNvbnN0IGlzUGFyYWxsZWwgPSBybC5wYXJhbGxlbEV4ZWN1dGlvbjtcbiAgICAgIGlmIChpc1BhcmFsbGVsKSB7XG4gICAgICAgIC8vIEJvdGggcnVubmluZyBpbiBwYXJhbGxlbFxuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3RoZW1lLmluZm8oJ+KaoVAnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oilJyl9ICR7dGhlbWUud2FybmluZygn4pqhUicpfWApO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgdmFyaWFudEljb24gPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAn4pa2JyA6ICfilrcnO1xuICAgICAgICBjb25zdCB2YXJpYW50TGFiZWwgPSBybC5hY3RpdmVWYXJpYW50ID09PSAncHJpbWFyeScgPyAnUCcgOiAnUic7XG4gICAgICAgIGNvbnN0IHZhcmlhbnRDb2xvciA9IHJsLmFjdGl2ZVZhcmlhbnQgPT09ICdwcmltYXJ5JyA/IHRoZW1lLmluZm8gOiB0aGVtZS53YXJuaW5nO1xuICAgICAgICBzZWdtZW50cy5wdXNoKGAke3ZhcmlhbnRJY29ufSR7dmFyaWFudENvbG9yKHZhcmlhbnRMYWJlbCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTGFzdCB3aW5uZXIgaW5kaWNhdG9yXG4gICAgaWYgKHJsLmxhc3RXaW5uZXIgJiYgcmwubGFzdFdpbm5lciAhPT0gJ3RpZScpIHtcbiAgICAgIGNvbnN0IHdpbm5lckljb24gPSBybC5sYXN0V2lubmVyID09PSAncHJpbWFyeScgPyB0aGVtZS5pbmZvKCfinJNQJykgOiB0aGVtZS53YXJuaW5nKCfinJNSJyk7XG4gICAgICBzZWdtZW50cy5wdXNoKHdpbm5lckljb24pO1xuICAgIH0gZWxzZSBpZiAocmwubGFzdFdpbm5lciA9PT0gJ3RpZScpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2godGhlbWUudWkubXV0ZWQoJ+KJiCcpKTtcbiAgICB9XG5cbiAgICAvLyBDdXJyZW50IG1vZHVsZS9zdGVwIChjb21wYWN0KVxuICAgIGlmIChybC5jdXJyZW50TW9kdWxlIHx8IHJsLmN1cnJlbnRTdGVwKSB7XG4gICAgICBjb25zdCBzdGVwVGV4dCA9IHJsLmN1cnJlbnRTdGVwIHx8IHJsLmN1cnJlbnRNb2R1bGUgfHwgJyc7XG4gICAgICBpZiAoc3RlcFRleHQpIHtcbiAgICAgICAgc2VnbWVudHMucHVzaCh0aGVtZS51aS5tdXRlZCh0aGlzLnRydW5jYXRlTWlkZGxlKHN0ZXBUZXh0LCAxNSkpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQcm9ncmVzcyBpbmRpY2F0b3IgKHN0ZXBzIGNvbXBsZXRlZCAvIHRvdGFsKVxuICAgIGlmICh0eXBlb2Ygcmwuc3RlcHNDb21wbGV0ZWQgPT09ICdudW1iZXInICYmIHR5cGVvZiBybC50b3RhbFN0ZXBzID09PSAnbnVtYmVyJyAmJiBybC50b3RhbFN0ZXBzID4gMCkge1xuICAgICAgY29uc3QgcGN0ID0gTWF0aC5yb3VuZCgocmwuc3RlcHNDb21wbGV0ZWQgLyBybC50b3RhbFN0ZXBzKSAqIDEwMCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoZW1lLnVpLm11dGVkKGAke3BjdH0lYCkpO1xuICAgIH1cblxuICAgIC8vIEN1cnJlbnQgcmV3YXJkIHNjb3JlcyAoY29tcGFjdCwgb25seSBkdXJpbmcgYWN0aXZlIGNvbXBhcmlzb24pXG4gICAgaWYgKHJsLnNjb3JlcyAmJiAodHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyB8fCB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInKSkge1xuICAgICAgY29uc3QgcFNjb3JlID0gdHlwZW9mIHJsLnNjb3Jlcy5wcmltYXJ5ID09PSAnbnVtYmVyJyA/IHJsLnNjb3Jlcy5wcmltYXJ5LnRvRml4ZWQoMikgOiAnLSc7XG4gICAgICBjb25zdCByU2NvcmUgPSB0eXBlb2Ygcmwuc2NvcmVzLnJlZmluZXIgPT09ICdudW1iZXInID8gcmwuc2NvcmVzLnJlZmluZXIudG9GaXhlZCgyKSA6ICctJztcbiAgICAgIGNvbnN0IHBWYWwgPSBybC5zY29yZXMucHJpbWFyeSA/PyAwO1xuICAgICAgY29uc3QgclZhbCA9IHJsLnNjb3Jlcy5yZWZpbmVyID8/IDA7XG4gICAgICBjb25zdCBwRGlzcGxheSA9IHBWYWwgPiByVmFsID8gdGhlbWUuc3VjY2VzcyhwU2NvcmUpIDogdGhlbWUuaW5mbyhwU2NvcmUpO1xuICAgICAgY29uc3QgckRpc3BsYXkgPSByVmFsID4gcFZhbCA/IHRoZW1lLnN1Y2Nlc3MoclNjb3JlKSA6IHRoZW1lLndhcm5pbmcoclNjb3JlKTtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7cERpc3BsYXl9JHt0aGVtZS51aS5tdXRlZCgnLycpfSR7ckRpc3BsYXl9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHNlZ21lbnRzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRydW5jYXRlIGEgc3RyaW5nIGluIHRoZSBtaWRkbGUsIHNob3dpbmcgc3RhcnQgYW5kIGVuZCB3aXRoIGVsbGlwc2lzLlxuICAgKi9cbiAgcHJpdmF0ZSB0cnVuY2F0ZU1pZGRsZSh0ZXh0OiBzdHJpbmcsIG1heExlbjogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodGV4dC5sZW5ndGggPD0gbWF4TGVuKSByZXR1cm4gdGV4dDtcbiAgICBjb25zdCBrZWVwTGVuID0gTWF0aC5mbG9vcigobWF4TGVuIC0gMykgLyAyKTtcbiAgICByZXR1cm4gYCR7dGV4dC5zbGljZSgwLCBrZWVwTGVuKX0uLi4ke3RleHQuc2xpY2UoLWtlZXBMZW4pfWA7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udHJvbExpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b2dnbGVMaW5lID0gdGhpcy5idWlsZFRvZ2dsZUxpbmUoKTtcbiAgICBpZiAodG9nZ2xlTGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnbW9kZXMnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oC6Jyl9ICR7dG9nZ2xlTGluZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydGN1dExpbmUgPSB0aGlzLmJ1aWxkU2hvcnRjdXRMaW5lKCk7XG4gICAgaWYgKHNob3J0Y3V0TGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgna2V5cycpfSAgJHtzaG9ydGN1dExpbmV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgY29tcGFjdCB0b2dnbGUgbGluZSBsaWtlIENsYXVkZSBDb2RlOlxuICAgKiBcIuKPteKPtSBhY2NlcHQgZWRpdHMgb24gKHNoaWZ0K3RhYiB0byBjeWNsZSlcIlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENvbXBhY3RUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIC8vIFNob3cgdGhlIG1vc3QgcmVsZXZhbnQgbW9kZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZDtcblxuICAgIC8vIEVkaXQgbW9kZSBpbmRpY2F0b3JcbiAgICBjb25zdCBlZGl0SWNvbiA9ICfij7Xij7UnO1xuICAgIGNvbnN0IGVkaXRTdGF0ZSA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICdhcHByb3ZhbCByZXF1aXJlZCcgOiAnYWNjZXB0IGVkaXRzJztcbiAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKGVkaXRJY29uKX0gJHtlZGl0U3RhdGV9ICR7dGhlbWUuc3VjY2Vzcygnb24nKX1gKTtcblxuICAgIC8vIFRoaW5raW5nIG1vZGUgKGlmIGFjdGl2ZSlcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJycpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0aGlua2luZ0xhYmVsICYmIHRoaW5raW5nTGFiZWwgIT09ICdvZmYnKSB7XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCd0aGlua2luZycpfSAke3RoZW1lLmluZm8odGhpbmtpbmdMYWJlbCl9YCk7XG4gICAgfVxuXG4gICAgLy8gQ3ljbGUgaGludFxuICAgIGNvbnN0IGN5Y2xlSGludCA9IHRoZW1lLnVpLm11dGVkKCcoc2hpZnQrdGFiIHRvIGN5Y2xlKScpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0gJHtjeWNsZUhpbnR9YDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvZ2dsZXM6IEFycmF5PHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBvbjogYm9vbGVhbjtcbiAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgaG90a2V5Pzogc3RyaW5nIHwgbnVsbDtcbiAgICB9PiA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9nZ2xlID0gKGxhYmVsOiBzdHJpbmcsIG9uOiBib29sZWFuLCBob3RrZXk/OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSA9PiB7XG4gICAgICB0b2dnbGVzLnB1c2goeyBsYWJlbCwgb24sIGhvdGtleTogdGhpcy5mb3JtYXRIb3RrZXkoaG90a2V5KSwgdmFsdWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGF1dG9WZXJpZnlBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgY29uc3QgdmVyaWZ5VmFsdWUgPSBhdXRvVmVyaWZ5QWN0aXZlXG4gICAgICA/ICdhdXRvJ1xuICAgICAgOiB2ZXJpZmljYXRpb25BY3RpdmVcbiAgICAgICAgPyAnb24nXG4gICAgICAgIDogJ29mZic7XG5cbiAgICBhZGRUb2dnbGUoJ1ZlcmlmeScsIHZlcmlmaWNhdGlvbkFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXksIHZlcmlmeVZhbHVlKTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCBhcHByb3ZhbEFjdGl2ZSA9IGFwcHJvdmFsTW9kZSAhPT0gJ2F1dG8nO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBcHByb3ZhbHMnLFxuICAgICAgYXBwcm92YWxBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXksXG4gICAgICBhcHByb3ZhbE1vZGUgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdhc2snXG4gICAgKTtcblxuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0F1dG8tY29udGludWUnLFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlLFxuICAgICAgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXksXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUgPyAnYXV0by12ZXJpZnknIDogJ29mZidcbiAgICApO1xuXG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbFJhdyA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKTtcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID1cbiAgICAgIHRoaW5raW5nTGFiZWxSYXcudG9Mb3dlckNhc2UoKSA9PT0gJ2V4dGVuZGVkJyA/ICdkZWVwJyA6IHRoaW5raW5nTGFiZWxSYXcgfHwgJ2JhbGFuY2VkJztcbiAgICBjb25zdCB0aGlua2luZ0FjdGl2ZSA9IHRoaW5raW5nTGFiZWwubGVuZ3RoID4gMDtcbiAgICBhZGRUb2dnbGUoJ1RoaW5raW5nJywgdGhpbmtpbmdBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXksIHRoaW5raW5nTGFiZWwpO1xuXG4gICAgY29uc3QgZHVhbFJsQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IG1vZGVWYWx1ZSA9IGR1YWxSbEFjdGl2ZSA/ICdkdWFsLXJsLWNvbnQnIDogJ3NpbmdsZS1jb250JztcbiAgICBhZGRUb2dnbGUoJ01vZGUnLCBkdWFsUmxBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5LCBtb2RlVmFsdWUpO1xuXG4gICAgY29uc3QgYnVpbGRMaW5lID0gKGluY2x1ZGVIb3RrZXlzOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZVRleHQgPSB0b2dnbGUub24gPyB0aGVtZS5zdWNjZXNzKHRvZ2dsZS52YWx1ZSB8fCAnb24nKSA6IHRoZW1lLnVpLm11dGVkKHRvZ2dsZS52YWx1ZSB8fCAnb2ZmJyk7XG4gICAgICAgICAgY29uc3QgaG90a2V5VGV4dCA9XG4gICAgICAgICAgICBpbmNsdWRlSG90a2V5cyAmJiB0b2dnbGUuaG90a2V5ID8gdGhlbWUudWkubXV0ZWQoYCBbJHt0b2dnbGUuaG90a2V5fV1gKSA6ICcnO1xuICAgICAgICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChgJHt0b2dnbGUubGFiZWx9OmApfSAke3N0YXRlVGV4dH0ke2hvdGtleVRleHR9YDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgJykpO1xuICAgIH07XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgbGV0IGxpbmUgPSBidWlsZExpbmUodHJ1ZSk7XG5cbiAgICAvLyBSZWNvcmQgd2hpY2ggaG90a2V5cyBhcmUgYWN0dWFsbHkgc2hvd24gc28gdGhlIHNob3J0Y3V0IGxpbmUgY2FuIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUgPSBuZXcgU2V0KFxuICAgICAgdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiAodG9nZ2xlLmhvdGtleSA/IHRvZ2dsZS5ob3RrZXkgOiBudWxsKSlcbiAgICAgICAgLmZpbHRlcigoa2V5KToga2V5IGlzIHN0cmluZyA9PiBCb29sZWFuKGtleSkpXG4gICAgKTtcblxuICAgIC8vIElmIHRoZSBsaW5lIGlzIHRvbyB3aWRlLCBkcm9wIGhvdGtleSBoaW50cyB0byBwcmVzZXJ2ZSBhbGwgdG9nZ2xlIGxhYmVsc1xuICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobGluZSkgPiBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgICBsaW5lID0gYnVpbGRMaW5lKGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZS50cmltKCkgPyBsaW5lIDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTaG9ydGN1dExpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBhZGRIb3RrZXkgPSAobGFiZWw6IHN0cmluZywgY29tYm8/OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmZvcm1hdEhvdGtleShjb21ibyk7XG4gICAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuaGFzKG5vcm1hbGl6ZWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUuaW5mbyhub3JtYWxpemVkKX0gJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9YCk7XG4gICAgfTtcblxuICAgIC8vIENvcmUgY29udHJvbHNcbiAgICBhZGRIb3RrZXkoJ2ludGVycnVwdCcsICdDdHJsK0MnKTtcbiAgICBhZGRIb3RrZXkoJ2NsZWFyIGlucHV0JywgJ0N0cmwrVScpO1xuXG4gICAgLy8gRmVhdHVyZSB0b2dnbGVzIChvbmx5IGlmIGhvdGtleXMgYXJlIGRlZmluZWQpXG4gICAgYWRkSG90a2V5KCd2ZXJpZnknLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSk7XG4gICAgYWRkSG90a2V5KCdhdXRvLWNvbnRpbnVlJywgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgndGhpbmtpbmcnLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ21vZGUnLCB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEhvdGtleSk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgICcpKTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBidWlsZElucHV0TGluZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYFtwYXN0ZWQgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzfSBsaW5lcywgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfSBjaGFyc10gKEVudGVyL0N0cmwrTCBpbnNlcnQsIEJhY2tzcGFjZSBkaXNjYXJkKWA7XG4gICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX0ke3RoZW1lLnVpLm11dGVkKHN1bW1hcnkpfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIHVzZXMgc2ltcGxlICc+JyBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSB0aGVtZS5wcmltYXJ5KCc+ICcpO1xuICAgIGNvbnN0IHByb21wdFdpZHRoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHByb21wdCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbkluZGVudCA9ICcgICc7IC8vIDIgc3BhY2VzIGZvciBjb250aW51YXRpb24gbGluZXNcbiAgICBjb25zdCBjb250aW51YXRpb25XaWR0aCA9IGNvbnRpbnVhdGlvbkluZGVudC5sZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCAtIHNwbGl0IGJ1ZmZlciBvbiBuZXdsaW5lcyBmaXJzdFxuICAgIC8vIEluIHNlY3JldCBtb2RlLCBtYXNrIGFsbCBjaGFyYWN0ZXJzIHdpdGggYnVsbGV0c1xuICAgIGNvbnN0IHJhd0J1ZmZlciA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuc2VjcmV0TW9kZSA/ICfigKInLnJlcGVhdChyYXdCdWZmZXIubGVuZ3RoKSA6IHJhd0J1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lcyA9IG5vcm1hbGl6ZWQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gV3JhcCBlYWNoIGxvZ2ljYWwgbGluZSB0byBmaXQgdGVybWluYWwgd2lkdGgsIGV4cGFuZGluZyB2ZXJ0aWNhbGx5XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0b3RhbENoYXJzID0gMDtcbiAgICBsZXQgY3Vyc29yTGluZSA9IDA7XG4gICAgbGV0IGN1cnNvckNvbCA9IDA7XG4gICAgbGV0IGZvdW5kQ3Vyc29yID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBidWZmZXJMaW5lcy5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyTGluZXNbbGluZUluZGV4XSA/PyAnJztcbiAgICAgIGNvbnN0IGlzRmlyc3RMb2dpY2FsTGluZSA9IGxpbmVJbmRleCA9PT0gMDtcbiAgICAgIGNvbnN0IGxpbmVTdGFydENoYXIgPSB0b3RhbENoYXJzO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgYXZhaWxhYmxlIHdpZHRoIGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZVdpZHRoID0gbWF4V2lkdGggLSBwcm9tcHRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRMaW5lV2lkdGggPSBtYXhXaWR0aCAtIGNvbnRpbnVhdGlvbldpZHRoO1xuXG4gICAgICAvLyBXcmFwIHRoaXMgbG9naWNhbCBsaW5lIGludG8gZGlzcGxheSBsaW5lc1xuICAgICAgbGV0IHJlbWFpbmluZyA9IGxpbmU7XG4gICAgICBsZXQgaXNGaXJzdERpc3BsYXlMaW5lID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwIHx8IGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IGZpcnN0TGluZVdpZHRoIDogY29udExpbmVXaWR0aDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSByZW1haW5pbmcuc2xpY2UoMCwgYXZhaWxhYmxlV2lkdGgpO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc2xpY2UoYXZhaWxhYmxlV2lkdGgpO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBkaXNwbGF5IGxpbmVcbiAgICAgICAgbGV0IGRpc3BsYXlMaW5lOiBzdHJpbmc7XG4gICAgICAgIGlmIChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtwcm9tcHR9JHtjaHVua31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7Y29udGludWF0aW9uSW5kZW50fSR7Y2h1bmt9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtTdGFydCA9IGxpbmVTdGFydENoYXIgKyAobGluZS5sZW5ndGggLSByZW1haW5pbmcubGVuZ3RoIC0gY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBjaHVua0VuZCA9IGNodW5rU3RhcnQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IGNodW5rU3RhcnQgJiYgdGhpcy5jdXJzb3IgPD0gY2h1bmtFbmQpIHtcbiAgICAgICAgICAgIGN1cnNvckxpbmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5DaHVuayA9IHRoaXMuY3Vyc29yIC0gY2h1bmtTdGFydDtcbiAgICAgICAgICAgIGN1cnNvckNvbCA9ICgoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBwcm9tcHRXaWR0aCA6IGNvbnRpbnVhdGlvbldpZHRoKSArIG9mZnNldEluQ2h1bms7XG4gICAgICAgICAgICBmb3VuZEN1cnNvciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnB1c2goZGlzcGxheUxpbmUpO1xuICAgICAgICBpc0ZpcnN0RGlzcGxheUxpbmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiBub3RoaW5nIGxlZnQgYW5kIHRoaXMgd2FzIGFuIGVtcHR5IGxpbmUsIHdlIGFscmVhZHkgYWRkZWQgaXRcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPT09IDAgJiYgY2h1bmsubGVuZ3RoID09PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxDaGFycyArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgbmV3bGluZSBzZXBhcmF0b3JcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY3Vyc29yIGF0IHZlcnkgZW5kXG4gICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgY3Vyc29yTGluZSA9IE1hdGgubWF4KDAsIHJlc3VsdC5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY3Vyc29yQ29sID0gdGhpcy52aXNpYmxlTGVuZ3RoKGxhc3RMaW5lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY3Vyc29yIGhpZ2hsaWdodCB0byB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRhcmdldExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjb25zdCB2aXNpYmxlUGFydCA9IHRoaXMuc3RyaXBBbnNpKHRhcmdldExpbmUpO1xuICAgICAgY29uc3QgY3Vyc29yUG9zID0gTWF0aC5taW4oY3Vyc29yQ29sLCB2aXNpYmxlUGFydC5sZW5ndGgpO1xuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaW5lIHdpdGggY3Vyc29yIGhpZ2hsaWdodFxuICAgICAgY29uc3QgYmVmb3JlID0gdmlzaWJsZVBhcnQuc2xpY2UoMCwgY3Vyc29yUG9zKTtcbiAgICAgIGNvbnN0IGF0ID0gdmlzaWJsZVBhcnQuY2hhckF0KGN1cnNvclBvcykgfHwgJyAnO1xuICAgICAgY29uc3QgYWZ0ZXIgPSB2aXNpYmxlUGFydC5zbGljZShjdXJzb3JQb3MgKyAxKTtcblxuICAgICAgLy8gUHJlc2VydmUgdGhlIHByb21wdC9pbmRlbnQgc3R5bGluZ1xuICAgICAgY29uc3QgcHJlZml4ID0gY3Vyc29yTGluZSA9PT0gMCA/IHByb21wdCA6IGNvbnRpbnVhdGlvbkluZGVudDtcbiAgICAgIGNvbnN0IHRleHRQYXJ0ID0gY3Vyc29yTGluZSA9PT0gMCA/IGJlZm9yZS5zbGljZShwcm9tcHRXaWR0aCkgOiBiZWZvcmUuc2xpY2UoY29udGludWF0aW9uV2lkdGgpO1xuICAgICAgcmVzdWx0W2N1cnNvckxpbmVdID0gYCR7cHJlZml4fSR7dGV4dFBhcnR9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YDtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJzb3IgY29sdW1uIGZvciB0ZXJtaW5hbCBwb3NpdGlvbmluZ1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGN1cnNvckNvbCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZElucHV0V2luZG93KGF2YWlsYWJsZTogbnVtYmVyKTogeyB0ZXh0OiBzdHJpbmc7IGN1cnNvcjogbnVtYmVyIH0ge1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3QgY3Vyc29ySW5kZXggPSBNYXRoLm1pbih0aGlzLmN1cnNvciwgbm9ybWFsaXplZC5sZW5ndGgpO1xuXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQ7XG4gICAgaWYgKGN1cnNvckluZGV4IDwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBjdXJzb3JJbmRleDtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBjdXJzb3JJbmRleCAtIG9mZnNldCAtIGF2YWlsYWJsZSArIDE7XG4gICAgaWYgKG92ZXJmbG93ID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IG92ZXJmbG93O1xuICAgIH1cbiAgICBjb25zdCBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBub3JtYWxpemVkLmxlbmd0aCAtIGF2YWlsYWJsZSk7XG4gICAgaWYgKG9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgIH1cbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgY29uc3Qgd2luZG93ID0gbm9ybWFsaXplZC5zbGljZShvZmZzZXQsIG9mZnNldCArIGF2YWlsYWJsZSk7XG4gICAgY29uc3QgZGlzcGxheSA9IHdpbmRvdy5zcGxpdCgnJykubWFwKGNoYXIgPT4gKGNoYXIgPT09ICdcXG4nID8gTkVXTElORV9QTEFDRUhPTERFUiA6IGNoYXIpKS5qb2luKCcnKTtcbiAgICBjb25zdCBjdXJzb3JJbldpbmRvdyA9IE1hdGgubWluKGRpc3BsYXkubGVuZ3RoLCBNYXRoLm1heCgwLCBjdXJzb3JJbmRleCAtIG9mZnNldCkpO1xuXG4gICAgY29uc3QgYmVmb3JlID0gZGlzcGxheS5zbGljZSgwLCBjdXJzb3JJbldpbmRvdyk7XG4gICAgY29uc3QgYXQgPSBkaXNwbGF5LmNoYXJBdChjdXJzb3JJbldpbmRvdykgfHwgJyAnO1xuICAgIGNvbnN0IGFmdGVyID0gZGlzcGxheS5zbGljZShjdXJzb3JJbldpbmRvdyArIDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGAke2JlZm9yZX0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gLFxuICAgICAgY3Vyc29yOiBjdXJzb3JJbldpbmRvdyxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEV4cGFuZCBjb2xsYXBzZWQgcGFzdGUgaW50byB0aGUgYnVmZmVyIHdpdGhvdXQgc3VibWl0dGluZyAoQ3RybCtMKS5cbiAgICogQWxsb3dzIHVzZXIgdG8gZWRpdCB0aGUgcGFzdGVkIGNvbnRlbnQgYmVmb3JlIHN1Ym1pc3Npb24uXG4gICAqL1xuICBwcml2YXRlIGV4cGFuZENvbGxhcHNlZFBhc3RlVG9CdWZmZXIoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmNvbGxhcHNlZFBhc3RlKSByZXR1cm47XG4gICAgY29uc3QgdGV4dCA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICAvLyBQdXQgdGhlIHBhc3RlZCBjb250ZW50IGludG8gdGhlIGJ1ZmZlciBmb3IgZWRpdGluZ1xuICAgIHRoaXMuYnVmZmVyID0gdGV4dDtcbiAgICB0aGlzLmN1cnNvciA9IHRleHQubGVuZ3RoO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICAvKipcbiAgICogRXhwYW5kIGNvbGxhcHNlZCBwYXN0ZSBhbmQgc3VibWl0IGltbWVkaWF0ZWx5IChFbnRlcikuXG4gICAqIFVzZWQgd2hlbiB1c2VyIHdhbnRzIHRvIHNlbmQgdGhlIHBhc3RlZCBjb250ZW50IGFzLWlzLlxuICAgKi9cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICBjb25zdCB0ZXh0ID0gdGhpcy5jb2xsYXBzZWRQYXN0ZS50ZXh0O1xuICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgIC8vIENsZWFyIHRoZSBidWZmZXIgZmlyc3QgdG8gYXZvaWQgYW55IHZpc3VhbCBkdXBsaWNhdGlvblxuICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgLy8gU3VibWl0IHRoZSBwYXN0ZSBjb250ZW50IChkaXNwbGF5VXNlclByb21wdCBpcyBjYWxsZWQgd2l0aGluIHN1Ym1pdFRleHQgZm9yIG5vbi1zbGFzaCBjb21tYW5kcylcbiAgICB0aGlzLnN1Ym1pdFRleHQodGV4dCk7XG4gIH1cblxuICBjYXB0dXJlSW5wdXQob3B0aW9uczogeyBhbGxvd0VtcHR5PzogYm9vbGVhbjsgdHJpbT86IGJvb2xlYW47IHJlc2V0QnVmZmVyPzogYm9vbGVhbiB9ID0ge30pOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGlmICh0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBhbHJlYWR5IGluIHByb2dyZXNzJykpO1xuICAgIH1cblxuICAgIGlmIChvcHRpb25zLnJlc2V0QnVmZmVyKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgUHJvbWlzZTxzdHJpbmc+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0ge1xuICAgICAgICByZXNvbHZlLFxuICAgICAgICByZWplY3QsXG4gICAgICAgIG9wdGlvbnM6IHtcbiAgICAgICAgICB0cmltOiBvcHRpb25zLnRyaW0gIT09IGZhbHNlLFxuICAgICAgICAgIGFsbG93RW1wdHk6IG9wdGlvbnMuYWxsb3dFbXB0eSA/PyBmYWxzZSxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbmNlbElucHV0Q2FwdHVyZShyZWFzb24/OiB1bmtub3duKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmlucHV0Q2FwdHVyZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBjYXB0dXJlID0gdGhpcy5pbnB1dENhcHR1cmU7XG4gICAgdGhpcy5pbnB1dENhcHR1cmUgPSBudWxsO1xuICAgIGNhcHR1cmUucmVqZWN0Py4ocmVhc29uID8/IG5ldyBFcnJvcignSW5wdXQgY2FwdHVyZSBjYW5jZWxsZWQnKSk7XG4gIH1cblxuXG4gIC8vIC0tLS0tLS0tLS0tLSBIZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JhcE92ZXJsYXlMaW5lKHRleHQ6IHN0cmluZywgd2lkdGg6IG51bWJlciwgaW5kZW50OiBzdHJpbmcpOiBzdHJpbmdbXSB7XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnNwbGl0KC8oXFxzKykvKTtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgY3VycmVudCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB3b3JkIG9mIHdvcmRzKSB7XG4gICAgICBjb25zdCBuZXh0ID0gY3VycmVudCArIHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKG5leHQpID4gd2lkdGggJiYgY3VycmVudC50cmltKCkpIHtcbiAgICAgICAgLy8gRG9uJ3QgdHJ1bmNhdGUgLSBqdXN0IHB1c2ggdGhlIGxpbmUgYXMtaXMgKGl0IGZpdHMgd2l0aGluIHdpZHRoKVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnQudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudCA9IGluZGVudCArIHdvcmQudHJpbVN0YXJ0KCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50ID0gbmV4dDtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudC50cmltKCkpIHtcbiAgICAgIGxpbmVzLnB1c2goY3VycmVudC50cmltRW5kKCkpO1xuICAgIH1cblxuICAgIC8vIElmIG5vIGxpbmVzIHdlcmUgcHJvZHVjZWQsIHJldHVybiB0aGUgb3JpZ2luYWwgdGV4dCB3aXRob3V0IHRydW5jYXRpb25cbiAgICByZXR1cm4gbGluZXMubGVuZ3RoID8gbGluZXMgOiBbdGV4dF07XG4gIH1cblxuICBwcml2YXRlIHNhZmVXaWR0aCgpOiBudW1iZXIge1xuICAgIGNvbnN0IGNvbHMgPSB0aGlzLm91dHB1dC5pc1RUWSA/IHRoaXMuY29scyB8fCA4MCA6IDgwO1xuICAgIHJldHVybiBNYXRoLm1heCgxLCBjb2xzIC0gMSk7XG4gIH1cblxuICBwcml2YXRlIHZpc2libGVMZW5ndGgodmFsdWU6IHN0cmluZyk6IG51bWJlciB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuIDA7XG4gICAgcmV0dXJuIHRoaXMuc3RyaXBBbnNpKHZhbHVlKS5sZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHN0cmlwQW5zaSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdmFsdWUucmVwbGFjZSgvXFx1MDAxQlxcW1swLT9dKlsgLS9dKltALX5dL2csICcnKTtcbiAgfVxuXG4gIHByaXZhdGUgdHJ1bmNhdGVMaW5lKHZhbHVlOiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAnJztcbiAgICBjb25zdCBsaW1pdCA9IE1hdGgubWF4KDEsIHdpZHRoKTtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgIGNvbnN0IHRva2VucyA9IHZhbHVlLnNwbGl0KC8oXFx4MWJcXFtbMC05O10qbSkvdSk7XG4gICAgbGV0IHZpc2libGUgPSAwO1xuICAgIGxldCB0cnVuY2F0ZWQgPSBmYWxzZTtcbiAgICBsZXQgcmVzdWx0ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHRva2VuIG9mIHRva2Vucykge1xuICAgICAgaWYgKCF0b2tlbikgY29udGludWU7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29udHJvbC1yZWdleFxuICAgICAgaWYgKC9eXFx4MWJcXFtbMC05O10qbSQvdS50ZXN0KHRva2VuKSkge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgaWYgKHZpc2libGUgPj0gbGltaXQpIHtcbiAgICAgICAgdHJ1bmNhdGVkID0gdHJ1ZTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCByZW1haW5pbmcgPSBsaW1pdCAtIHZpc2libGU7XG4gICAgICBpZiAodG9rZW4ubGVuZ3RoIDw9IHJlbWFpbmluZykge1xuICAgICAgICByZXN1bHQgKz0gdG9rZW47XG4gICAgICAgIHZpc2libGUgKz0gdG9rZW4ubGVuZ3RoO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3Qgc2xpY2VMZW5ndGggPSBNYXRoLm1heCgwLCByZW1haW5pbmcgLSAxKTtcbiAgICAgICAgaWYgKHNsaWNlTGVuZ3RoID4gMCkge1xuICAgICAgICAgIHJlc3VsdCArPSB0b2tlbi5zbGljZSgwLCBzbGljZUxlbmd0aCk7XG4gICAgICAgICAgdmlzaWJsZSArPSBzbGljZUxlbmd0aDtcbiAgICAgICAgfVxuICAgICAgICByZXN1bHQgKz0gJ+KApic7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICh0cnVuY2F0ZWQgJiYgIXJlc3VsdC5lbmRzV2l0aChFU0MuUkVTRVQpKSB7XG4gICAgICByZXN1bHQgKz0gRVNDLlJFU0VUO1xuICAgIH1cblxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICBnZXRCdWZmZXIoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5idWZmZXI7XG4gIH1cblxuICBnZXRDdXJzb3IoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gdGhpcy5jdXJzb3I7XG4gIH1cblxuICBzZXRCdWZmZXIodGV4dDogc3RyaW5nLCBjdXJzb3JQb3M/OiBudW1iZXIpOiB2b2lkIHtcbiAgICB0aGlzLmJ1ZmZlciA9IHRleHQ7XG4gICAgLy8gVmFsaWRhdGUgY3Vyc29yIHBvc2l0aW9uIHRvIHByZXZlbnQgb3V0LW9mLWJvdW5kcyBpc3N1ZXNcbiAgICBjb25zdCByZXF1ZXN0ZWRDdXJzb3IgPSBjdXJzb3JQb3MgPz8gdGV4dC5sZW5ndGg7XG4gICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCBNYXRoLm1pbihyZXF1ZXN0ZWRDdXJzb3IsIHRleHQubGVuZ3RoKSk7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgfVxuXG4gIHNldFNlY3JldE1vZGUoZW5hYmxlZDogYm9vbGVhbik6IHZvaWQge1xuICAgIHRoaXMuc2VjcmV0TW9kZSA9IGVuYWJsZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIGNsZWFyQnVmZmVyKCk6IHZvaWQge1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcbiAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gW107XG4gICAgdGhpcy5zdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRNb2RlU3RhdHVzKHN0YXR1czogc3RyaW5nIHwgbnVsbCk6IHZvaWQge1xuICAgIHRoaXMudXBkYXRlU3RhdHVzKHN0YXR1cyk7XG4gIH1cblxuICAvKipcbiAgICogU2hvdyBhIGNvbXBhY3Rpbmcgc3RhdHVzIHdpdGggYW5pbWF0ZWQgc3Bpbm5lciAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFVzZXMg4py7IGNoYXJhY3RlciB3aXRoIGFuaW1hdGlvbiB0byBpbmRpY2F0ZSBjb250ZXh0IGNvbXBhY3Rpb24gaW4gcHJvZ3Jlc3NcbiAgICovXG4gIHNob3dDb21wYWN0aW5nU3RhdHVzKG1lc3NhZ2U6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMuc3RhdHVzTWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnNwaW5uZXJJbnRlcnZhbCkge1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICAgIHRoaXMuc3Bpbm5lckZyYW1lKys7XG4gICAgICAgIC8vIEN5Y2xlIGFjdGl2aXR5IHBocmFzZSBldmVyeSB+NCBzZWNvbmRzICg1MCBmcmFtZXMgYXQgODBtcylcbiAgICAgICAgaWYgKHRoaXMuc3Bpbm5lckZyYW1lICUgNTAgPT09IDApIHtcbiAgICAgICAgICB0aGlzLmFjdGl2aXR5UGhyYXNlSW5kZXgrKztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfSwgODApO1xuICAgIH1cbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEhpZGUgdGhlIGNvbXBhY3Rpbmcgc3RhdHVzIGFuZCBzdG9wIHNwaW5uZXIgYW5pbWF0aW9uXG4gICAqL1xuICBoaWRlQ29tcGFjdGluZ1N0YXR1cygpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBudWxsO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBlbWl0UHJvbXB0KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucHVzaFByb21wdEV2ZW50KGNvbnRlbnQpO1xuICB9XG5cbiAgLyoqXG4gICAqIERpc3BsYXkgdXNlciBwcm9tcHQgaW1tZWRpYXRlbHkgaW4gc2Nyb2xsYmFjayAoQ2xhdWRlIENvZGUgc3R5bGUpXG4gICAqIFdyaXRlcyBzeW5jaHJvbm91c2x5IHRvIGVuc3VyZSBpdCBhcHBlYXJzIE9OQ0UgaW4gc2Nyb2xsYmFjayBiZWZvcmUgc3RhdHVzIHVwZGF0ZXMuXG4gICAqIFRoZSBwcm9tcHQgaW5wdXQgYXJlYSB3aWxsIHRoZW4gZmxvYXQgYmVsb3cgdGhpcyBhbmQgYWxsIHN1YnNlcXVlbnQgZXZlbnRzLlxuICAgKi9cbiAgcHJpdmF0ZSBkaXNwbGF5VXNlclByb21wdCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuXG4gICAgLy8gQWRkIHRvIGV2ZW50IHF1ZXVlIGluc3RlYWQgb2Ygd3JpdGluZyBkaXJlY3RseSB0byBlbnN1cmUgcHJvcGVyIHJlbmRlcmluZ1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcmVuZGVyKCk6IHZvaWQge1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGRlbGF5KG1zOiBudW1iZXIpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIG1zKSk7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gTG93LWxldmVsIGhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSB3cml0ZShkYXRhOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm91dHB1dC53cml0ZShkYXRhKTtcbiAgfVxuXG4gIHByaXZhdGUgcHVzaFByb21wdEV2ZW50KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0ZXh0Py50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKHRoaXMubGFzdFByb21wdEV2ZW50ICYmIHRoaXMubGFzdFByb21wdEV2ZW50LnRleHQgPT09IG5vcm1hbGl6ZWQgJiYgbm93IC0gdGhpcy5sYXN0UHJvbXB0RXZlbnQuYXQgPCAxNTAwKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMubGFzdFByb21wdEV2ZW50ID0geyB0ZXh0OiBub3JtYWxpemVkLCBhdDogbm93IH07XG4gICAgdGhpcy5hZGRFdmVudCgncHJvbXB0Jywgbm9ybWFsaXplZCk7XG4gIH1cblxuICBwcml2YXRlIGNsZWFyUHJvbXB0QXJlYSgpOiB2b2lkIHtcbiAgICBjb25zdCBoZWlnaHQgPSB0aGlzLmxhc3RPdmVybGF5Py5saW5lcy5sZW5ndGggPz8gdGhpcy5wcm9tcHRIZWlnaHQgPz8gMDtcbiAgICBpZiAoaGVpZ2h0ID09PSAwKSByZXR1cm47XG5cbiAgICAvLyBDdXJzb3IgaXMgYXQgcHJvbXB0IHJvdy4gTW92ZSB1cCB0byB0b3Agb2Ygb3ZlcmxheSBmaXJzdC5cbiAgICBpZiAodGhpcy5sYXN0T3ZlcmxheSkge1xuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXkucHJvbXB0SW5kZXg7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBOb3cgYXQgdG9wLCBjbGVhciBlYWNoIGxpbmUgZG93bndhcmRcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlaWdodDsgaSsrKSB7XG4gICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgIHRoaXMud3JpdGUoRVNDLkNMRUFSX0xJTkUpO1xuICAgICAgaWYgKGkgPCBoZWlnaHQgLSAxKSB7XG4gICAgICAgIHRoaXMud3JpdGUoJ1xceDFiW0InKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wICh3aGVyZSBjb250ZW50IHNob3VsZCBjb250aW51ZSBmcm9tKVxuICAgIGlmIChoZWlnaHQgPiAxKSB7XG4gICAgICB0aGlzLndyaXRlKGBcXHgxYlske2hlaWdodCAtIDF9QWApO1xuICAgIH1cbiAgICB0aGlzLndyaXRlKCdcXHInKTtcblxuICAgIHRoaXMubGFzdE92ZXJsYXkgPSBudWxsO1xuICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmxhc3RPdmVybGF5SGVpZ2h0ID0gMDtcbiAgICB0aGlzLmlzUHJvbXB0QWN0aXZlID0gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIHVwZGF0ZVRlcm1pbmFsU2l6ZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5vdXRwdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMucm93cyA9IHRoaXMub3V0cHV0LnJvd3MgfHwgMjQ7XG4gICAgICB0aGlzLmNvbHMgPSB0aGlzLm91dHB1dC5jb2x1bW5zIHx8IDgwO1xuICAgIH1cbiAgfVxufVxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFXQSxJQUFBQSxRQUFBLEdBQUFDLHVCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxXQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxPQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxNQUFBLEdBQUFDLHNCQUFBLENBQUFKLE9BQUE7QUFDQSxJQUFBSyxNQUFBLEdBQUFMLE9BQUE7QUFDQSxJQUFBTSxXQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxlQUFBLEdBQUFQLE9BQUE7QUFDQSxJQUFBUSxZQUFBLEdBQUFSLE9BQUE7QUFDQSxJQUFBUyxZQUFBLEdBQUFULE9BQUE7QUFRMEIsU0FBQUksdUJBQUFNLENBQUEsV0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQSxLQUFBRSxPQUFBLEVBQUFGLENBQUE7QUFBQSxTQUFBWCx3QkFB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