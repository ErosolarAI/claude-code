a874b29c17255534939c4f4096dfe240
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.UnifiedUIRenderer = void 0;
var readline = _interopRequireWildcard(require("node:readline"));
var _nodeEvents = require("node:events");
var _nodeOs = require("node:os");
var _theme = require("./theme.js");
var _outputMode = require("./outputMode.js");
var _animatedStatus = require("./animatedStatus.js");
var _debugLogger = require("../utils/debugLogger.js");
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function (e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (const t in e) "default" !== t && {}.hasOwnProperty.call(e, t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, t)) && (i.get || i.set) ? o(f, t, i) : f[t] = e[t]); return f; })(e, t); }
/**
 * UnifiedUIRenderer - Claude Code style minimalist terminal UI.
 *
 * Goals:
 * - Single event pipeline for everything (prompt → thought → tool/build/test → response).
 * - Pinned status/meta only (never in scrollback).
 * - Scrollback only shows events; no duplicate status like "Working on your request" or "Ready for prompts".
 * - Streaming: first chunk sets a one-line banner; remainder streams naturally (optional).
 * - Collapsible-like summaries: we format a compact heading with an ellipsis indicator, but avoid ctrl+o hints.
 */

const ESC = {
  HIDE_CURSOR: '\x1b[?25l',
  SHOW_CURSOR: '\x1b[?25h',
  CLEAR_SCREEN: '\x1b[2J',
  CLEAR_LINE: '\x1b[2K',
  HOME: '\x1b[H',
  ENABLE_BRACKETED_PASTE: '\x1b[?2004h',
  DISABLE_BRACKETED_PASTE: '\x1b[?2004l',
  TO: (row, col) => `\x1b[${row};${col}H`,
  TO_COL: col => `\x1b[${col}G`,
  ERASE_DOWN: '\x1b[J',
  REVERSE: '\x1b[7m',
  RESET: '\x1b[0m',
  // Scroll region control - CRITICAL for fixed bottom overlay
  SET_SCROLL_REGION: (top, bottom) => `\x1b[${top};${bottom}r`,
  RESET_SCROLL_REGION: '\x1b[r',
  SAVE_CURSOR: '\x1b[s',
  RESTORE_CURSOR: '\x1b[u'
};
const NEWLINE_PLACEHOLDER = '↵';
class UnifiedUIRenderer extends _nodeEvents.EventEmitter {
  rows = 24;
  cols = 80;
  lastRenderWidth = null;
  eventQueue = [];
  isProcessingQueue = false;
  buffer = '';
  cursor = 0;
  history = [];
  historyIndex = -1;
  suggestions = [];
  suggestionIndex = -1;
  availableCommands = [];
  hotkeysInToggleLine = new Set();
  collapsedPaste = null;
  mode = 'idle';
  lastToolResult = null;
  streamingStartTime = null;
  statusMessage = null;
  statusOverride = null;
  statusStreaming = null;

  // Animated UI components
  streamingSpinner = null;
  thinkingIndicator = null;
  spinnerFrame = 0;
  spinnerInterval = null;
  maxInlinePanelLines = 12;

  // Compacting status animation
  compactingStatusMessage = '';
  compactingStatusFrame = 0;
  compactingStatusInterval = null;
  compactingSpinnerFrames = ['✻', '✼', '✻', '✺'];

  // Animated activity line (e.g., "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)")
  activityMessage = null;
  activityPhraseIndex = 0;
  activityStarFrame = 0;
  activityStarFrames = ['✳', '✴', '✵', '✶', '✷', '✸'];
  // Token count during streaming
  streamingTokens = 0;
  // User-friendly activity phrases (clean, professional)
  funActivityPhrases = ['Thinking', 'Processing', 'Analyzing', 'Working', 'Preparing'];
  maxCuratedReasoningLines = 8;
  maxCuratedReasoningChars = 1800;
  thoughtDedupWindowMs = 15000;
  lastCuratedThought = null;
  statusMeta = {};
  toggleState = {
    verificationEnabled: false,
    autoContinueEnabled: false,
    criticalApprovalMode: 'auto',
    dualRlEnabled: false,
    debugEnabled: false
  };

  // ------------ Helpers ------------

  /** Ensure cursor is always within valid bounds for the current buffer */
  clampCursor() {
    this.cursor = Math.max(0, Math.min(this.cursor, this.buffer.length));
  }

  /** Safely append to paste buffer with size limit enforcement */
  appendToPasteBuffer(buffer, text) {
    if (this.pasteBufferOverflow) return; // Already at limit
    const current = buffer === 'paste' ? this.pasteBuffer : this.plainPasteBuffer;
    const remaining = this.maxPasteBufferSize - current.length;
    if (remaining <= 0) {
      this.pasteBufferOverflow = true;
      return;
    }
    const toAdd = text.length <= remaining ? text : text.slice(0, remaining);
    if (buffer === 'paste') {
      this.pasteBuffer += toAdd;
    } else {
      this.plainPasteBuffer += toAdd;
    }
    if (toAdd.length < text.length) {
      this.pasteBufferOverflow = true;
    }
  }

  /** Strip ANSI escape sequences from text to prevent injection */
  sanitizePasteContent(text) {
    // Remove all ANSI escape sequences (CSI, OSC, etc.)
    // eslint-disable-next-line no-control-regex
    return text.replace(/\x1b\[[0-9;]*[A-Za-z]|\x1b\][^\x07]*\x07|\x1b[PX^_][^\x1b]*\x1b\\|\x1b./g, '');
  }
  formatHotkey(combo) {
    if (!combo?.trim()) return null;
    return combo.trim().toUpperCase();
  }
  lastPromptEvent = null;
  promptHeight = 0;
  lastOverlayHeight = 0;
  inlinePanel = [];
  hasConversationContent = false;
  isPromptActive = false;
  inputRenderOffset = 0;
  plainPasteIdleMs = 24;
  plainPasteWindowMs = 60;
  plainPasteTriggerChars = 24;
  plainPasteEarlyNewlineChars = 2; // Guard for short first lines in plain paste mode
  // Paste buffer limits to prevent memory exhaustion
  maxPasteBufferSize = 10 * 1024 * 1024; // 10MB max paste size
  pasteBufferOverflow = false; // Track if paste was truncated
  cursorVisibleColumn = 1;
  inBracketedPaste = false;
  pasteBuffer = '';
  inPlainPaste = false;
  plainPasteBuffer = '';
  plainPasteTimer = null;
  pasteBurstWindowStart = 0;
  pasteBurstCharCount = 0;
  plainRecentChunks = [];
  // Pending insert buffer: holds characters during paste detection window to prevent visual leak
  pendingInsertBuffer = '';
  pendingInsertTimer = null;
  pendingInsertDelayMs = 80; // Wait before committing chars as normal input
  lastRenderedEventKey = null;
  lastOutputEndedWithNewline = true;
  hasRenderedPrompt = false;
  hasEverRenderedOverlay = false; // Track if we've ever rendered for inline clearing
  lastOverlay = null;
  allowPromptRender = true;
  promptRenderingSuspended = false;
  secretMode = false;
  // Render throttling to prevent excessive redraws during rapid input
  pendingRender = false;
  lastRenderTime = 0;
  renderThrottleMs = 16; // ~60fps max
  renderThrottleTimer = null;
  // Disposal state to prevent operations after cleanup
  disposed = false;
  // Bound event handlers for proper cleanup
  boundResizeHandler = null;
  boundKeypressHandler = null;
  inputCapture = null;
  constructor(output = process.stdout, input = process.stdin, _options) {
    super();
    this.output = output;
    this.input = input;
    this.interactive = Boolean(this.output.isTTY && this.input.isTTY && !process.env['CI']);
    this.plainMode = (0, _outputMode.isPlainOutputMode)() || !this.interactive;

    // Initialize animated components
    this.contextMeter = new _animatedStatus.ContextMeter();
    this.rl = readline.createInterface({
      input: this.input,
      output: this.output,
      terminal: true,
      prompt: '',
      tabSize: 2
    });
    this.rl.setPrompt('');
    this.updateTerminalSize();

    // Use bound handlers so we can remove them on cleanup
    this.boundResizeHandler = () => {
      if (!this.plainMode && !this.disposed) {
        this.updateTerminalSize();
        this.renderPrompt();
      }
    };
    this.output.on('resize', this.boundResizeHandler);
    this.setupInputHandlers();
  }
  initialize() {
    if (!this.interactive) {
      return;
    }
    if (!this.plainMode) {
      // If an overlay was already rendered before initialization (e.g., banner emitted early),
      // clear it so initialize() doesn't stack a second control bar in scrollback.
      if (this.hasRenderedPrompt || this.lastOverlay) {
        this.clearPromptArea();
      }
      this.write(ESC.ENABLE_BRACKETED_PASTE);
      this.updateTerminalSize();
      this.hasRenderedPrompt = false;
      this.lastOutputEndedWithNewline = true;
      this.write(ESC.SHOW_CURSOR);
      return;
    }

    // Plain mode: minimal setup, still render a simple prompt line
    this.updateTerminalSize();
    this.hasRenderedPrompt = false;
    this.lastOutputEndedWithNewline = true;
    this.renderPrompt();
  }
  cleanup() {
    // Mark as disposed first to prevent any pending operations
    this.disposed = true;
    this.cancelInputCapture(new Error('Renderer disposed'));
    this.cancelPlainPasteCapture();

    // Clear render throttle timer
    if (this.renderThrottleTimer) {
      clearTimeout(this.renderThrottleTimer);
      this.renderThrottleTimer = null;
    }

    // Stop any running animations
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    if (this.streamingSpinner) {
      this.streamingSpinner.stop();
      this.streamingSpinner = null;
    }
    if (this.thinkingIndicator) {
      this.thinkingIndicator.stop();
      this.thinkingIndicator = null;
    }
    this.contextMeter.dispose();
    (0, _animatedStatus.disposeAnimations)();

    // Remove event listeners to prevent memory leaks
    if (this.boundResizeHandler) {
      this.output.removeListener('resize', this.boundResizeHandler);
      this.boundResizeHandler = null;
    }
    if (this.boundKeypressHandler) {
      this.input.removeListener('keypress', this.boundKeypressHandler);
      this.boundKeypressHandler = null;
    }

    // Remove all EventEmitter listeners from this instance
    this.removeAllListeners();
    if (!this.interactive) {
      this.rl.close();
      return;
    }
    if (!this.plainMode) {
      // Clear the prompt area so it doesn't remain in scrollback history
      this.clearPromptArea();
      this.write(ESC.DISABLE_BRACKETED_PASTE);
      this.write(ESC.SHOW_CURSOR);
      this.write('\n');
    }
    if (this.input.isTTY) {
      this.input.setRawMode(false);
    }
    this.rl.close();
    this.lastOverlay = null;

    // Clear event queue
    this.eventQueue = [];
  }
  suspendPromptRendering() {
    this.promptRenderingSuspended = true;
  }
  resumePromptRendering(render = false) {
    this.promptRenderingSuspended = false;
    if (render) {
      this.renderPrompt();
    }
  }

  // ------------ Input handling ------------

  setupInputHandlers() {
    if (!this.interactive) {
      return;
    }
    this.rl.removeAllListeners('line');
    readline.emitKeypressEvents(this.input, this.rl);
    if (this.input.isTTY) {
      this.input.setRawMode(true);
    }
    // Use bound handler so we can remove it on cleanup
    this.boundKeypressHandler = (str, key) => {
      if (!this.disposed) {
        this.handleKeypress(str, key);
      }
    };
    this.input.on('keypress', this.boundKeypressHandler);
  }
  emitInputChange() {
    const payload = {
      text: this.buffer,
      cursor: this.cursor
    };
    this.emit('change', payload);
  }
  handleKeypress(str, key) {
    // Normalize missing key metadata (common for some terminals emitting raw escape codes)
    const normalizedKey = key ?? this.parseEscapeSequence(str);
    const keyForPaste = normalizedKey ?? (str ? {
      sequence: str
    } : key);
    if (this.handleBracketedPaste(str, keyForPaste)) {
      return;
    }
    if (this.handlePlainPaste(str, keyForPaste)) {
      return;
    }
    if (!normalizedKey) {
      return;
    }
    if (this.inputCapture && normalizedKey.ctrl && (normalizedKey.name === 'c' || normalizedKey.name === 'd')) {
      this.cancelInputCapture(new Error('Input capture cancelled'));
      this.clearBuffer();
      return;
    }

    // macOS Option+key produces Unicode characters, detect them directly:
    // Option+G = © (copyright), Option+A = å, Option+V = √, Option+D = ∂
    const macOptionChars = {
      '©': 'g',
      // Option+G
      'å': 'a',
      // Option+A
      '√': 'v',
      // Option+V
      '∂': 'd' // Option+D
    };
    if (str && macOptionChars[str]) {
      const letter = macOptionChars[str];
      if (letter === 'a') {
        this.emit('toggle-critical-approval');
        return;
      }
      if (letter === 'g') {
        this.emit('toggle-auto-continue');
        return;
      }
      if (letter === 'd') {
        this.emit('toggle-dual-rl');
        return;
      }
      if (letter === 'v') {
        this.emit('toggle-verify');
        return;
      }
    }

    // Detect Ctrl+Shift combinations (fallback for non-macOS or configured terminals)
    const isCtrlShift = letter => {
      const lowerLetter = letter.toLowerCase();
      const upperLetter = letter.toUpperCase();

      // Pattern 1: Standard readline shift flag + ctrl
      if (normalizedKey.ctrl && normalizedKey.shift && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 2: Some terminals send uppercase name with ctrl
      if (normalizedKey.ctrl && normalizedKey.name === upperLetter) {
        return true;
      }

      // Pattern 3: Meta/Alt + letter (iTerm2 with "Option sends Meta")
      if (normalizedKey.meta && normalizedKey.name?.toLowerCase() === lowerLetter) {
        return true;
      }

      // Pattern 4: Raw escape sequence check for xterm-style modifiers
      const seq = str || normalizedKey.sequence;
      // eslint-disable-next-line no-control-regex
      if (seq && /^\x1b\[[0-9]+;6[~A-Z]?$/.test(seq)) {
        return true;
      }

      // Pattern 5: ESC + letter (Option sends ESC prefix in some configs)
      if (seq && seq === `\x1b${lowerLetter}`) {
        return true;
      }
      return false;
    };
    if (isCtrlShift('a')) {
      this.emit('toggle-critical-approval');
      return;
    }
    if (isCtrlShift('g')) {
      this.emit('toggle-auto-continue');
      return;
    }
    if (isCtrlShift('d')) {
      this.emit('toggle-dual-rl');
      return;
    }
    if (isCtrlShift('v')) {
      this.emit('toggle-verify');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name?.toLowerCase() === 'r') {
      this.emit('resume');
      return;
    }
    if (normalizedKey.ctrl && normalizedKey.name === 'c') {
      // Ctrl+C behavior:
      // 1. If buffer has text: clear it first, then notify shell
      // 2. If buffer is empty: let shell decide to pause AI or quit
      //
      // The InteractiveShell maintains a counter to track Ctrl+C presses and decides
      // whether to pause AI or exit based on processing state.

      const hadBuffer = this.buffer.length > 0;
      if (hadBuffer) {
        // Clear the input buffer first
        this.buffer = '';
        this.cursor = 0;
        this.renderPrompt();
        this.emitInputChange();
      }
      // Emit ctrlc event with buffer state so shell can handle appropriately
      this.emit('ctrlc', {
        hadBuffer
      });
      return;
    }
    if (key.ctrl && key.name === 'd') {
      if (this.buffer.length === 0) {
        this.emit('interrupt');
      }
      return;
    }
    if (key.ctrl && key.name === 'u') {
      this.clearBuffer();
      return;
    }
    if (key.ctrl && key.name === 'l') {
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
    }

    // Ctrl+O: Expand last tool result
    if (key.ctrl && key.name === 'o') {
      this.emit('expand-tool-result');
      return;
    }
    if (key.name === 'return' || key.name === 'enter') {
      // If there's a collapsed paste, expand and submit in one action
      if (this.collapsedPaste) {
        this.expandCollapsedPaste();
        return;
      }
      // If a slash command suggestion is highlighted, pressing Enter submits it immediately
      if (this.applySuggestion(true)) return;
      // Fallback: if buffer starts with '/' and suggestions exist, use the selected/first one
      if (this.buffer.startsWith('/') && this.suggestions.length > 0) {
        const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
        this.buffer = this.suggestions[safeIndex]?.command ?? this.buffer;
      }
      this.submitText(this.buffer);
      return;
    }
    if (normalizedKey.name === 'backspace') {
      if (this.collapsedPaste) {
        this.collapsedPaste = null;
        this.renderPrompt();
        this.emitInputChange();
        return;
      }
      if (this.cursor > 0) {
        this.buffer = this.buffer.slice(0, this.cursor - 1) + this.buffer.slice(this.cursor);
        this.cursor--;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'delete') {
      if (this.cursor < this.buffer.length) {
        this.buffer = this.buffer.slice(0, this.cursor) + this.buffer.slice(this.cursor + 1);
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'left') {
      if (this.cursor > 0) {
        this.cursor--;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'right') {
      if (this.cursor < this.buffer.length) {
        this.cursor++;
        this.ensureCursorVisible();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'up') {
      if (this.navigateSuggestions(-1)) {
        return;
      }
      if (this.history.length > 0) {
        if (this.historyIndex === -1) {
          this.historyIndex = this.history.length - 1;
        } else if (this.historyIndex > 0) {
          this.historyIndex--;
        }
        // Validate index is within bounds before accessing
        if (this.historyIndex >= 0 && this.historyIndex < this.history.length) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'down') {
      if (this.navigateSuggestions(1)) {
        return;
      }
      if (this.historyIndex !== -1) {
        this.historyIndex++;
        if (this.historyIndex >= this.history.length) {
          this.historyIndex = -1;
          this.buffer = '';
        } else if (this.historyIndex >= 0) {
          this.buffer = this.history[this.historyIndex] ?? '';
        } else {
          // Safety: invalid state, reset
          this.historyIndex = -1;
          this.buffer = '';
        }
        this.cursor = this.buffer.length;
        this.inputRenderOffset = 0; // Reset render offset for new buffer
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      }
      return;
    }
    if (normalizedKey.name === 'tab') {
      if (this.applySuggestion(false)) return;
      return;
    }
    if (str && !normalizedKey.ctrl && !normalizedKey.meta) {
      // Defer insertion to allow paste detection window to catch rapid input
      this.queuePendingInsert(str);
    }
  }

  /**
   * Ensure horizontal cursor position stays within the visible input window.
   * Prevents jumps when using left/right arrows on long lines.
   */
  ensureCursorVisible() {
    const maxWidth = Math.max(10, this.safeWidth() - 12); // margin for prompt/toggles and padding
    // If cursor is left of current window, shift window left
    if (this.cursor < this.inputRenderOffset) {
      this.inputRenderOffset = this.cursor;
      return;
    }
    // If cursor is beyond visible window, shift window right
    if (this.cursor - this.inputRenderOffset >= maxWidth) {
      this.inputRenderOffset = this.cursor - maxWidth + 1;
    }
  }

  /**
   * Parse raw escape sequences when readline doesn't populate key metadata.
   * Prevents control codes (e.g., ^[[200~) from leaking into the buffer.
   */
  parseEscapeSequence(sequence) {
    if (!sequence) return null;
    const map = {
      '\x1b[A': {
        name: 'up',
        sequence
      },
      '\x1b[B': {
        name: 'down',
        sequence
      },
      '\x1b[C': {
        name: 'right',
        sequence
      },
      '\x1b[D': {
        name: 'left',
        sequence
      },
      '\x1b[H': {
        name: 'home',
        sequence
      },
      '\x1b[F': {
        name: 'end',
        sequence
      },
      '\x1b[200~': {
        name: 'paste-start',
        sequence
      },
      '\x1b[201~': {
        name: 'paste-end',
        sequence
      }
    };
    return map[sequence] ?? null;
  }

  /**
   * Queue characters for deferred insertion. This prevents visual "leak" of
   * pasted content by holding characters until we're confident it's not a paste.
   */
  queuePendingInsert(text) {
    this.pendingInsertBuffer += text;

    // Clear any existing timer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }

    // Schedule commit after delay - if paste detection triggers first, it will consume the buffer
    this.pendingInsertTimer = setTimeout(() => {
      this.commitPendingInsert();
    }, this.pendingInsertDelayMs);
  }

  /**
   * Commit pending characters as normal input (not a paste).
   */
  commitPendingInsert() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    if (this.pendingInsertBuffer && !this.inPlainPaste && !this.inBracketedPaste) {
      this.insertText(this.pendingInsertBuffer);
    }
    this.pendingInsertBuffer = '';
  }

  /**
   * Consume pending insert buffer into paste detection (prevents visual leak).
   */
  consumePendingInsertForPaste() {
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    const consumed = this.pendingInsertBuffer;
    this.pendingInsertBuffer = '';
    return consumed;
  }
  handleBracketedPaste(str, key) {
    const sequence = key?.sequence || str;
    if (sequence === ESC.ENABLE_BRACKETED_PASTE || sequence === ESC.DISABLE_BRACKETED_PASTE) {
      return true;
    }
    if (sequence === '\x1b[200~') {
      this.inBracketedPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume any pending insert buffer to prevent leak
      const pending = this.consumePendingInsertForPaste();
      this.pasteBuffer = pending; // Include any chars that arrived before bracketed paste started
      this.cancelPlainPasteCapture();
      return true;
    }
    if (!this.inBracketedPaste) {
      return false;
    }
    if (sequence === '\x1b[201~') {
      this.commitPasteBuffer();
      return true;
    }
    if (key?.name === 'return' || key?.name === 'enter') {
      this.appendToPasteBuffer('paste', '\n');
      return true;
    }
    if (key?.name === 'backspace') {
      this.pasteBuffer = this.pasteBuffer.slice(0, -1);
      return true;
    }
    if (typeof str === 'string' && str.length > 0) {
      this.appendToPasteBuffer('paste', str);
      return true;
    }
    if (typeof sequence === 'string' && sequence.length > 0) {
      this.appendToPasteBuffer('paste', sequence);
      return true;
    }
    return true;
  }
  commitPasteBuffer() {
    if (!this.inBracketedPaste) return;
    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.pasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    if (content) {
      const lines = content.split('\n');
      const wasTruncated = this.pasteBufferOverflow;
      if (lines.length > 1 || content.length > 200) {
        this.collapsedPaste = {
          text: content,
          lines: lines.length,
          chars: content.length + (wasTruncated ? '+' : 0) // Indicate truncation
        };
        this.buffer = '';
        this.cursor = 0;
        this.updateSuggestions();
        this.renderPrompt();
        this.emitInputChange();
      } else {
        this.insertText(content);
      }
    }
    this.inBracketedPaste = false;
    this.pasteBuffer = '';
    this.pasteBufferOverflow = false;
    this.cancelPlainPasteCapture();
  }
  handlePlainPaste(str, key) {
    // Fallback paste capture when bracketed paste isn't supported
    if (this.inBracketedPaste || key?.ctrl || key?.meta) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const sequence = key?.sequence ?? '';
    const chunk = typeof str === 'string' && str.length > 0 ? str : sequence;
    if (!chunk) {
      this.resetPlainPasteBurst();
      this.pruneRecentPlainChunks();
      return false;
    }
    const now = Date.now();
    this.trackPlainPasteBurst(chunk.length, now);
    if (!this.inPlainPaste) {
      this.recordRecentPlainChunk(chunk, now);
    }
    const chunkMultiple = chunk.length > 1;
    const hasNewline = /[\r\n]/.test(chunk);
    const burstActive = this.pasteBurstWindowStart > 0 && now - this.pasteBurstWindowStart <= this.plainPasteWindowMs;
    const burstTrigger = burstActive && this.pasteBurstCharCount >= this.plainPasteTriggerChars;
    const hasRecentNonNewline = this.plainRecentChunks.some(entry => !/^[\r\n]+$/.test(entry.text));
    const earlyNewlineTrigger = hasNewline && burstActive && hasRecentNonNewline && this.pasteBurstCharCount >= this.plainPasteEarlyNewlineChars;
    const newlineTrigger = hasNewline && (this.inPlainPaste || chunkMultiple || burstTrigger || earlyNewlineTrigger);
    const looksLikePaste = this.inPlainPaste || chunkMultiple || burstTrigger || newlineTrigger;
    if (!looksLikePaste) {
      this.pruneRecentPlainChunks();
      return false;
    }
    let chunkAlreadyCaptured = false;
    if (!this.inPlainPaste) {
      this.inPlainPaste = true;
      this.pasteBufferOverflow = false; // Reset overflow flag for new paste
      // Consume pending insert buffer first - this is the primary source now
      const pending = this.consumePendingInsertForPaste();
      const reclaimed = this.reclaimRecentPlainChunks();
      // Combine pending buffer with any reclaimed chunks
      const combined = pending + reclaimed;
      if (combined.length > 0) {
        // Remove any chars that leaked into buffer (legacy reclaim path)
        if (reclaimed.length > 0) {
          const removeCount = Math.min(this.buffer.length, reclaimed.length);
          const suffix = this.buffer.slice(-removeCount);
          if (removeCount > 0 && suffix === reclaimed.slice(-removeCount)) {
            this.buffer = this.buffer.slice(0, this.buffer.length - removeCount);
            this.cursor = Math.max(0, this.buffer.length);
            this.clampCursor(); // Ensure cursor is valid
          }
        }
        this.plainPasteBuffer = combined.slice(0, this.maxPasteBufferSize);
        if (combined.length > this.maxPasteBufferSize) {
          this.pasteBufferOverflow = true;
        }
        chunkAlreadyCaptured = combined.endsWith(chunk);
      } else {
        this.plainPasteBuffer = '';
      }
    }
    if (!chunkAlreadyCaptured) {
      this.appendToPasteBuffer('plainPaste', chunk);
    }
    this.schedulePlainPasteCommit();
    return true;
  }
  trackPlainPasteBurst(length, now) {
    if (!this.pasteBurstWindowStart || now - this.pasteBurstWindowStart > this.plainPasteWindowMs) {
      this.pasteBurstWindowStart = now;
      this.pasteBurstCharCount = 0;
    }
    this.pasteBurstCharCount += length;
  }
  resetPlainPasteBurst() {
    this.pasteBurstWindowStart = 0;
    this.pasteBurstCharCount = 0;
  }
  cancelPlainPasteCapture() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    // Also cancel pending insert buffer
    if (this.pendingInsertTimer) {
      clearTimeout(this.pendingInsertTimer);
      this.pendingInsertTimer = null;
    }
    this.pendingInsertBuffer = '';
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
  }
  recordRecentPlainChunk(text, at) {
    const windowStart = at - this.plainPasteWindowMs;
    this.plainRecentChunks.push({
      text,
      at
    });
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  pruneRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return;
    const now = Date.now();
    const windowStart = now - this.plainPasteWindowMs;
    this.plainRecentChunks = this.plainRecentChunks.filter(entry => entry.at >= windowStart);
  }
  reclaimRecentPlainChunks() {
    if (!this.plainRecentChunks.length) return '';
    const combined = this.plainRecentChunks.map(entry => entry.text).join('');
    this.plainRecentChunks = [];
    return combined;
  }
  schedulePlainPasteCommit() {
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
    }
    this.plainPasteTimer = setTimeout(() => {
      this.finalizePlainPaste();
    }, this.plainPasteIdleMs);
  }
  finalizePlainPaste() {
    if (!this.inPlainPaste) return;

    // Sanitize to remove any injected escape sequences, then normalize line endings
    const sanitized = this.sanitizePasteContent(this.plainPasteBuffer);
    const content = sanitized.replace(/\r\n?/g, '\n');
    const wasTruncated = this.pasteBufferOverflow;
    this.inPlainPaste = false;
    this.plainPasteBuffer = '';
    this.plainRecentChunks = [];
    this.resetPlainPasteBurst();
    this.pasteBufferOverflow = false;
    if (this.plainPasteTimer) {
      clearTimeout(this.plainPasteTimer);
      this.plainPasteTimer = null;
    }
    if (!content) return;
    const lines = content.split('\n');
    if (lines.length > 1 || content.length > 200) {
      this.collapsedPaste = {
        text: content,
        lines: lines.length,
        chars: content.length + (wasTruncated ? '+' : 0)
      };
      this.buffer = '';
      this.cursor = 0;
      this.updateSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      return;
    }
    this.insertText(content);
  }
  insertText(text) {
    if (!text) return;
    if (this.inPlainPaste) {
      return;
    }
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
    }
    // Ensure cursor is valid before slicing
    this.clampCursor();
    this.buffer = this.buffer.slice(0, this.cursor) + text + this.buffer.slice(this.cursor);
    this.cursor += text.length;
    this.clampCursor(); // Ensure cursor remains valid after modification
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  submitText(text) {
    // If there's a collapsed paste, submit that instead of the buffer text
    // This handles edge cases where submitText is called programmatically
    if (this.collapsedPaste) {
      this.expandCollapsedPaste();
      return;
    }
    if (this.inputCapture) {
      const shouldTrim = this.inputCapture.options.trim;
      const normalizedCapture = shouldTrim ? text.trim() : text;
      if (!this.inputCapture.options.allowEmpty && !normalizedCapture) {
        this.renderPrompt();
        return;
      }
      const resolver = this.inputCapture;
      this.inputCapture = null;
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
      resolver.resolve(normalizedCapture);
      return;
    }
    const normalized = text.trim();
    if (!normalized) {
      this.renderPrompt();
      return;
    }

    // Don't add secrets to history or display them in scrollback
    if (!this.secretMode) {
      this.history.push(normalized);
      this.historyIndex = -1;
      this.displayUserPrompt(normalized);
    }
    if (this.mode === 'streaming') {
      this.emit('queue', normalized);
    } else {
      this.emit('submit', normalized);
    }
    this.buffer = '';
    this.cursor = 0;
    this.resetSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  updateSuggestions() {
    if (!this.buffer.startsWith('/')) {
      this.resetSuggestions();
      return;
    }
    const firstSpace = this.buffer.indexOf(' ');
    const hasArgText = firstSpace >= 0 && /\S/.test(this.buffer.slice(firstSpace + 1));
    // Hide slash suggestions when the user is editing arguments
    if (firstSpace >= 0 && this.cursor > firstSpace && hasArgText) {
      this.resetSuggestions();
      return;
    }
    const cursorSlice = this.buffer.slice(0, this.cursor);
    const commandSlice = firstSpace >= 0 ? cursorSlice.slice(0, firstSpace) : cursorSlice;
    const fallbackSlice = firstSpace >= 0 ? this.buffer.slice(0, firstSpace) : this.buffer;
    const partial = (commandSlice.trimEnd() || fallbackSlice.trimEnd() || '/').toLowerCase();
    const previous = this.suggestions[this.suggestionIndex]?.command;
    this.suggestions = this.availableCommands.filter(cmd => cmd.command.toLowerCase().startsWith(partial)).slice(0, 5);
    if (this.suggestions.length === 0) {
      this.resetSuggestions();
      return;
    }
    if (previous) {
      const idx = this.suggestions.findIndex(s => s.command === previous);
      this.suggestionIndex = idx >= 0 ? idx : 0;
    } else {
      this.suggestionIndex = 0;
    }
  }
  setAvailableCommands(commands) {
    this.availableCommands = commands;
    this.updateSuggestions();
  }
  applySuggestion(submit) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      return false;
    }
    // Ensure suggestionIndex is valid, default to first item
    const safeIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : 0;
    const selected = this.suggestions[safeIndex];
    if (!selected) {
      return false;
    }
    if (submit) {
      this.submitText(selected.command);
    } else {
      this.buffer = `${selected.command} `;
      this.cursor = this.buffer.length;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return true;
  }
  resetSuggestions() {
    this.suggestions = [];
    this.suggestionIndex = -1;
  }
  navigateSuggestions(direction) {
    if (!this.buffer.startsWith('/') || this.suggestions.length === 0) {
      // Reset index if suggestions were cleared but index wasn't
      if (this.suggestionIndex !== -1 && this.suggestions.length === 0) {
        this.suggestionIndex = -1;
      }
      return false;
    }
    // Ensure current index is valid before computing next
    const currentIndex = this.suggestionIndex >= 0 && this.suggestionIndex < this.suggestions.length ? this.suggestionIndex : -1;
    const next = currentIndex + direction;
    const clamped = Math.max(0, Math.min(this.suggestions.length - 1, next));
    if (clamped === this.suggestionIndex && this.suggestionIndex >= 0) {
      return true;
    }
    this.suggestionIndex = clamped;
    this.renderPrompt();
    return true;
  }

  // ------------ Event queue ------------

  addEvent(type, content) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] addEvent called: type=${type}, content length=${content?.length || 0}`);
    if (!content) return;
    const normalized = this.normalizeEventType(type);
    if (!normalized) return;
    (0, _debugLogger.logDebug)(`[DEBUG renderer] normalized type=${normalized}`);
    if (normalized === 'prompt' || normalized === 'response' || normalized === 'thought' || normalized === 'stream' || normalized === 'tool' || normalized === 'tool-result' || normalized === 'build' || normalized === 'test') {
      this.hasConversationContent = true;
    }
    if (normalized === 'tool-result') {
      this.lastToolResult = content;
    }
    if (this.plainMode) {
      const formatted = this.formatContent({
        type: normalized,
        rawType: type,
        content,
        timestamp: Date.now()
      });
      if (formatted) {
        const text = formatted.endsWith('\n') ? formatted : `${formatted}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const event = {
      type: normalized,
      rawType: type,
      content,
      timestamp: Date.now()
    };

    // Priority queue: prompt events are inserted at the front to ensure immediate display
    // This guarantees user input is echoed before any async processing responses
    if (normalized === 'prompt') {
      // Find the first non-prompt event and insert before it
      // This maintains prompt order while giving them priority over other events
      const insertIndex = this.eventQueue.findIndex(e => e.type !== 'prompt');
      if (insertIndex === -1) {
        this.eventQueue.push(event);
      } else {
        this.eventQueue.splice(insertIndex, 0, event);
      }
    } else {
      this.eventQueue.push(event);
    }
    if (!this.isProcessingQueue) {
      queueMicrotask(() => {
        if (!this.isProcessingQueue) {
          void this.processQueue();
        }
      });
    }
  }

  /**
   * Re-render the prompt/control bar immediately.
   * This keeps the chat box pinned during long streaming runs instead of waiting
   * for the event queue to drain before the prompt reappears.
   */
  renderPromptOverlay(immediate = false) {
    if (this.plainMode || this.disposed || !this.output.isTTY || this.promptRenderingSuspended) {
      return;
    }
    this.allowPromptRender = true;
    if (immediate) {
      this.renderPromptImmediate();
      return;
    }
    this.renderPrompt();
  }
  async processQueue() {
    if (this.isProcessingQueue || this.disposed) return;
    this.isProcessingQueue = true;
    try {
      while (this.eventQueue.length > 0 && !this.disposed) {
        const event = this.eventQueue.shift();
        if (!event) continue;
        const coalesced = this.coalesceAdjacentTextEvents(event);
        try {
          await this.renderEvent(coalesced);
        } catch (error) {
          // Never allow a rendering failure to stall the event queue
          if (this.disposed) break; // Don't try to write after disposal
          const message = error instanceof Error ? error.message : typeof error === 'string' ? error : 'Unknown renderer error';
          this.output.write(`\n[renderer] ${message}\n`);
        }

        // Check disposed before continuing
        if (this.disposed) break;

        // For prompt events, ensure the overlay is rendered immediately
        // This guarantees prompts are visible before async processing continues
        if (event.type === 'prompt') {
          if (this.output.isTTY) {
            this.allowPromptRender = true;
            this.renderPrompt();
          }
          // No delay for prompt events - render immediately
        } else {
          await this.delay(1);
        }
      }
      // ALWAYS render prompt after queue completes to keep bottom UI persistent
      // This ensures status/toggles stay pinned and responses are fully rendered
      if (this.output.isTTY && !this.disposed) {
        this.allowPromptRender = true;
        this.renderPrompt();
      }
    } finally {
      this.isProcessingQueue = false;
    }
  }

  /**
   * Merge adjacent response/thought events into a single block so continuous
   * chat text renders with one bullet instead of one per chunk.
   */
  coalesceAdjacentTextEvents(event) {
    const isMergeable = target => Boolean(target && !target.isCompacted && (target.type === 'response' && target.rawType === 'response' || target.type === 'thought' && target.rawType === 'thought'));
    if (!isMergeable(event)) {
      return event;
    }
    while (this.eventQueue.length > 0 && isMergeable(this.eventQueue[0])) {
      const next = this.eventQueue.shift();
      const needsSeparator = event.content.length > 0 && !event.content.endsWith('\n') && !next.content.startsWith('\n');
      event.content = needsSeparator ? `${event.content}\n${next.content}` : `${event.content}${next.content}`;
    }
    return event;
  }

  /**
   * Flush pending renderer events.
   * Useful for startup flows (e.g., welcome banner) to guarantee the scrollback is hydrated
   * before continuing with additional UI updates.
   */
  async flushEvents(timeoutMs = 250) {
    // Kick off processing if idle
    if (!this.plainMode && !this.isProcessingQueue && this.eventQueue.length > 0) {
      void this.processQueue();
    }
    const start = Date.now();
    while ((this.isProcessingQueue || this.eventQueue.length > 0) && Date.now() - start < timeoutMs) {
      await this.delay(5);
    }
    if (!this.plainMode && this.output.isTTY) {
      this.allowPromptRender = true;
      this.renderPrompt();
    }
  }
  async renderEvent(event) {
    (0, _debugLogger.logDebug)(`[DEBUG renderer] renderEvent: type=${event.type}, content length=${event.content?.length || 0}`);
    if (this.plainMode) {
      (0, _debugLogger.logDebug)('[DEBUG renderer] plainMode - writing directly');
      const formattedPlain = this.formatContent(event);
      if (formattedPlain) {
        const text = formattedPlain.endsWith('\n') ? formattedPlain : `${formattedPlain}\n`;
        this.output.write(text);
        this.lastOutputEndedWithNewline = text.endsWith('\n');
      }
      return;
    }
    const formatted = this.formatContent(event);
    (0, _debugLogger.logDebug)(`[DEBUG renderer] formatted length=${formatted?.length || 0}`);
    if (!formatted) return;

    // Allow prompts and responses to always render (don't deduplicate)
    // Only deduplicate streaming content
    const signature = `${event.rawType}:${event.content}`;
    if (event.type === 'stream' && signature === this.lastRenderedEventKey) {
      return;
    }
    if (event.type !== 'prompt') {
      this.lastRenderedEventKey = signature;
    }

    // Clear the prompt area before writing new content
    if (this.promptHeight > 0 || this.lastOverlay) {
      this.clearPromptArea();
    }
    this.isPromptActive = false;
    if (event.type !== 'stream' && !this.lastOutputEndedWithNewline && formatted.trim()) {
      // Keep scrollback ordering predictable when previous output ended mid-line
      this.output.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    this.output.write(formatted);
    this.lastOutputEndedWithNewline = formatted.endsWith('\n');
  }
  normalizeEventType(type) {
    switch (type) {
      case 'prompt':
        return 'prompt';
      case 'thought':
        return 'thought';
      case 'stream':
      case 'streaming':
        return 'stream';
      case 'tool':
      case 'tool-call':
        return 'tool';
      case 'tool-result':
        return 'tool-result';
      case 'build':
        return 'build';
      case 'test':
        return 'test';
      case 'response':
      case 'banner':
      case 'raw':
        return 'response';
      case 'error':
        return 'response';
      default:
        return null;
    }
  }
  formatContent(event) {
    // Compacted blocks already have separator and formatting
    if (event.isCompacted) {
      return event.content;
    }
    if (event.rawType === 'banner') {
      // Banners display without bullet prefix
      const lines = event.content.split('\n').map(line => line.trimEnd());
      return `${lines.join('\n')}\n`;
    }

    // Compact, user-friendly formatting
    switch (event.type) {
      case 'prompt':
        // User prompt - just the text (prompt box handles styling)
        return `${_theme.theme.primary('>')} ${event.content}\n`;
      case 'thought':
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          const curated = this.curateReasoningContent(event.content);
          if (!curated || this.isGarbageOutput(curated)) {
            return '';
          }
          if (!this.shouldRenderThought(curated)) {
            return '';
          }
          this.lastCuratedThought = {
            text: curated.replace(/\s+/g, ' ').trim().toLowerCase(),
            at: Date.now()
          };
          return this.formatThinkingBlock(curated);
        }
      case 'tool':
        {
          // Compact tool display: ⚡ToolName → result
          const content = event.content.replace(/^[⏺⚙○]\s*/, '');
          return this.formatCompactToolCall(content);
        }
      case 'tool-result':
        {
          // Inline result: └─ summary
          return this.formatCompactToolResult(event.content);
        }
      case 'build':
        return this.wrapBulletText(event.content, {
          label: 'build',
          labelColor: _theme.theme.warning
        });
      case 'test':
        return this.wrapBulletText(event.content, {
          label: 'test',
          labelColor: _theme.theme.info
        });
      case 'stream':
        return event.content;
      case 'response':
      default:
        {
          // Programmatic filter: reject content that looks like internal/garbage output
          if (this.isGarbageOutput(event.content)) {
            return '';
          }
          // Clean response without excessive bullets, wrapped for readability
          const isError = event.rawType === 'error';
          return this.wrapBulletText(event.content, isError ? {
            label: 'error',
            labelColor: _theme.theme.error
          } : undefined);
        }
    }
  }

  /**
   * Programmatic garbage detection - checks if content looks like internal/system output
   * that shouldn't be shown to users. Uses structural checks, not pattern matching.
   */
  isGarbageOutput(content) {
    if (!content || content.trim().length === 0) return true;

    // Structural check: content starting with < that isn't valid markdown/code
    if (content.startsWith('<') && !content.startsWith('<http') && !content.startsWith('<!')) {
      return true;
    }

    // Structural check: contains "to=functions." or "to=tools." (internal routing)
    if (content.includes('to=functions.') || content.includes('to=tools.')) {
      return true;
    }

    // Structural check: looks like internal instruction (quoted system text)
    if (content.startsWith('"') && content.includes('block') && content.includes('tool')) {
      return true;
    }

    // Structural check: very short content that's just timing info
    if (content.length < 30 && /elapsed|seconds?|ms\b/i.test(content)) {
      return true;
    }

    // Structural check: gibberish - high ratio of non-word characters
    const alphaCount = (content.match(/[a-zA-Z]/g) || []).length;
    const totalCount = content.replace(/\s/g, '').length;
    if (totalCount > 20 && alphaCount / totalCount < 0.5) {
      return true; // Less than 50% letters = likely garbage
    }
    return false;
  }
  curateReasoningContent(content) {
    const normalized = content.replace(/\r\n/g, '\n').replace(/\r/g, '\n').trim();
    if (!normalized) return null;
    const limited = normalized.length > this.maxCuratedReasoningChars ? normalized.slice(0, this.maxCuratedReasoningChars) : normalized;
    const maxSegments = this.maxCuratedReasoningLines * 3;
    const segments = limited.split('\n').flatMap(line => line.split(/(?<=[.?!])\s+/)).map(line => line.replace(/^[•*⏺○\-\u2022]+\s*/, '').trim()).filter(Boolean);
    if (segments.length === 0) {
      return null;
    }
    const seen = new Set();
    const deduped = [];
    for (const segment of segments) {
      const normalizedSegment = segment.replace(/\s+/g, ' ');
      const key = normalizedSegment.toLowerCase();
      if (seen.has(key)) {
        continue;
      }
      seen.add(key);
      deduped.push(normalizedSegment);
      if (deduped.length >= maxSegments) {
        break;
      }
    }
    if (deduped.length === 0) {
      return null;
    }
    const prioritized = this.prioritizeReasoningSegments(deduped);
    if (prioritized.length === 0) {
      return null;
    }
    const limitedSelection = prioritized.slice(0, this.maxCuratedReasoningLines);
    const bulleted = limitedSelection.map(line => this.ensureReasoningBullet(line));
    return bulleted.join('\n');
  }
  ensureReasoningBullet(line) {
    if (/^([•*⏺○-]|\d+[.)])\s/.test(line)) {
      return line;
    }
    return `• ${line}`;
  }
  looksStructuredThought(line) {
    return /^(\d+[.)]\s|step\s*\d+|plan\b|next\b|then\b|goal\b)/i.test(line) || /^[-*•]\s/.test(line) || line.includes('->') || line.includes('→') || line.includes(': ') || /\b(test|verify|validate|check|build|run|deploy|diff|lint|type ?check|fix|bug|issue|risk|mitigate|investigate)\b/i.test(line);
  }
  prioritizeReasoningSegments(segments) {
    if (!segments.length) {
      return [];
    }
    const scored = segments.map((text, index) => ({
      text,
      index,
      score: this.reasoningSignalScore(text)
    }));
    const hasSignal = scored.some(item => item.score > 0);
    if (!hasSignal) {
      return segments;
    }
    scored.sort((a, b) => {
      if (b.score !== a.score) return b.score - a.score;
      return a.index - b.index;
    });
    return scored.map(item => item.text);
  }
  reasoningSignalScore(line) {
    let score = 0;
    const lower = line.toLowerCase();
    if (this.looksStructuredThought(line)) {
      score += 3;
    }
    const actionKeywords = ['tool', 'command', 'script', 'context', 'summar', 'risk', 'issue', 'investigate', 'root cause', 'remediat', 'mitigat', 'fix', 'patch', 'test', 'verify', 'validate', 'check', 'build', 'deploy', 'run', 'diff', 'lint', 'typecheck', 'benchmark'];
    if (actionKeywords.some(keyword => lower.includes(keyword))) {
      score += 2;
    }
    if (/[#:→]|->/.test(line)) {
      score += 1;
    }
    if (/^(i('| a)m|i will|let me|starting|now|ok|sure)\b/i.test(line)) {
      score -= 1;
    }
    if (line.length > 120) {
      score -= 1;
    }
    return score;
  }
  shouldRenderThought(content) {
    const normalized = content.replace(/\s+/g, ' ').trim().toLowerCase();
    if (!normalized) {
      return false;
    }
    const now = Date.now();
    if (this.lastCuratedThought && this.lastCuratedThought.text === normalized) {
      if (now - this.lastCuratedThought.at < this.thoughtDedupWindowMs) {
        return false;
      }
    }
    return true;
  }

  /**
   * Format text in Claude Code style: ⏺ prefix with wrapped continuation lines
   * Example:
   *   ⏺ The AI ran tools but gave no response. Need to fix
   *     the response handling. Let me check where the AI's
   *     text response should be displayed:
   */
  formatClaudeCodeBlock(content) {
    const bullet = '⏺';
    const maxWidth = Math.max(24, Math.min(this.safeWidth() - 4, 110)); // Responsive to terminal width
    const lines = content.split('\n');
    const result = [];
    for (let lineIdx = 0; lineIdx < lines.length; lineIdx++) {
      const line = lines[lineIdx];
      if (!line.trim()) {
        result.push('');
        continue;
      }

      // Word-wrap each line
      const words = line.split(/(\s+)/);
      let currentLine = '';
      for (const word of words) {
        if ((currentLine + word).length > maxWidth && currentLine.trim()) {
          // First line of this paragraph gets ⏺, rest get indent
          const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
          result.push(`${prefix}${currentLine.trimEnd()}`);
          currentLine = word.trimStart();
        } else {
          currentLine += word;
        }
      }
      if (currentLine.trim()) {
        const prefix = result.length === 0 && lineIdx === 0 ? `${bullet} ` : '  ';
        result.push(`${prefix}${currentLine.trimEnd()}`);
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format a tool call in Claude Code style:
   *   ⏺ Search(pattern: "foo", path: "src",
   *           output_mode: "content", head_limit: 30)
   */
  formatToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and arguments
    const match = content.match(/^(\w+)\((.*)\)$/s);
    if (!match) {
      // Simple format without args
      const nameMatch = content.match(/^(\w+)/);
      if (nameMatch) {
        return `${bullet} ${_theme.theme.info(nameMatch[1])}\n`;
      }
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2];
    const maxWidth = Math.min(this.cols - 4, 56);

    // Format: ⏺ ToolName(args...)
    const prefix = `${bullet} ${_theme.theme.info(toolName)}(`;
    const prefixLen = toolName.length + 3; // "⏺ ToolName(" visible length
    const indent = ' '.repeat(prefixLen + 4); // Extra indent for wrapped args

    // Parse and format arguments
    const args = this.parseToolArgs(argsStr);
    if (args.length === 0) {
      return `${prefix})\n`;
    }
    const lines = [];
    let currentLine = prefix;
    for (let i = 0; i < args.length; i++) {
      const arg = args[i];
      const argText = `${_theme.theme.ui.muted(arg.key + ':')} ${this.formatArgValue(arg.value)}`;
      const separator = i < args.length - 1 ? ', ' : ')';

      // Check if this arg fits on current line
      const testLine = currentLine + argText + separator;
      if (this.stripAnsi(testLine).length > maxWidth && currentLine !== prefix) {
        lines.push(currentLine.trimEnd());
        currentLine = indent + argText + separator;
      } else {
        currentLine += argText + separator;
      }
    }
    if (currentLine.trim()) {
      lines.push(currentLine.trimEnd());
    }
    return lines.join('\n') + '\n';
  }

  /**
   * Parse tool arguments from string like: key: "value", key2: value2
   */
  parseToolArgs(argsStr) {
    const args = [];
    // Simple regex to extract key: value pairs
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,)]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      args.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return args;
  }

  /**
   * Format an argument value (truncate long strings)
   */
  formatArgValue(value) {
    // Remove surrounding quotes if present
    const isQuoted = value.startsWith('"') && value.endsWith('"');
    const inner = isQuoted ? value.slice(1, -1) : value;

    // Truncate long values
    const maxLen = 40;
    const truncated = inner.length > maxLen ? inner.slice(0, maxLen - 3) + '...' : inner;
    return isQuoted ? `"${truncated}"` : truncated;
  }

  /**
   * Format a tool result in Claude Code style:
   *   ⎿  Found 12 lines (ctrl+o to expand)
   */
  formatToolResult(content) {
    // Check if this is a summary line (e.g., "Found X lines")
    const summaryMatch = content.match(/^(Found \d+ (?:lines?|files?|matches?)|Read \d+ lines?|Wrote \d+ lines?|Edited|Created|Deleted)/i);
    if (summaryMatch) {
      return `  ${_theme.theme.ui.muted('⎿')}  ${content} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
    }

    // For other results, show truncated preview
    const lines = content.split('\n');
    if (lines.length > 3) {
      const preview = lines.slice(0, 2).join('\n');
      return `  ${_theme.theme.ui.muted('⎿')}  ${preview}\n  ${_theme.theme.ui.muted(`... ${lines.length - 2} more lines (ctrl+o to expand)`)}\n`;
    }
    return `  ${_theme.theme.ui.muted('⎿')}  ${content}\n`;
  }

  /**
   * Format a compact tool call: ⏺ Read → file.ts
   */
  formatCompactToolCall(content) {
    const bullet = '⏺';
    // Parse tool name and args
    const match = content.match(/^(\w+)\s*(?:\((.*)\))?$/s);
    if (!match) {
      return `${bullet} ${content}\n`;
    }
    const toolName = match[1];
    const argsStr = match[2]?.trim() || '';

    // If no args, just show tool name
    if (!argsStr) {
      return `${bullet} ${_theme.theme.info(toolName)}\n`;
    }

    // Format full params in Claude Code style with line wrapping
    // For long args, wrap them nicely with continuation indent
    const prefix = `${bullet} ${_theme.theme.info(toolName)}(`;
    const suffix = ')';
    const maxWidth = this.cols - 8; // Leave room for margins

    // Parse individual params
    const params = this.parseToolParams(argsStr);
    if (params.length === 0) {
      return `${prefix}${argsStr}${suffix}\n`;
    }

    // Format params with proper wrapping
    return this.formatToolParams(toolName, params, maxWidth);
  }

  /**
   * Parse tool params from args string
   */
  parseToolParams(argsStr) {
    const params = [];
    // Match key: "value" or key: value patterns
    const regex = /(\w+):\s*("(?:[^"\\]|\\.)*"|[^,\n]+)/g;
    let match;
    while ((match = regex.exec(argsStr)) !== null) {
      params.push({
        key: match[1],
        value: match[2].trim()
      });
    }
    return params;
  }

  /**
   * Format tool params in Claude Code style with wrapping
   */
  formatToolParams(toolName, params, maxWidth) {
    const bullet = '⏺';
    const lines = [];
    const indent = '        '; // 8 spaces for continuation

    let currentLine = `${bullet} ${_theme.theme.info(toolName)}(`;
    let firstParam = true;
    for (const param of params) {
      const coloredValue = this.colorParamValue(param.key, param.value);
      const paramStr = firstParam ? `${param.key}: ${coloredValue}` : `, ${param.key}: ${coloredValue}`;

      // Check if adding this param would exceed width
      const testLine = currentLine + paramStr;
      // eslint-disable-next-line no-control-regex
      const plainLength = testLine.replace(/\x1b\[[0-9;]*m/g, '').length;
      if (plainLength > maxWidth && !firstParam) {
        // Start new line
        lines.push(currentLine);
        currentLine = indent + `${param.key}: ${param.value}`;
      } else {
        currentLine += paramStr;
      }
      firstParam = false;
    }
    currentLine += ')';
    lines.push(currentLine);
    return lines.join('\n') + '\n';
  }

  /**
   * Color critical parameter values (paths, commands) for readability.
   */
  colorParamValue(key, value) {
    const lowerKey = key.toLowerCase();
    if (lowerKey.includes('path') || lowerKey === 'file' || lowerKey === 'pattern') {
      return _theme.theme.warning(value);
    }
    if (lowerKey === 'command' || lowerKey === 'cmd') {
      return _theme.theme.info(value);
    }
    return value;
  }

  /**
   * Extract a short summary from tool args
   */
  extractToolSummary(toolName, argsStr) {
    const tool = toolName.toLowerCase();

    // Extract path/file for file operations
    if (['read', 'write', 'edit', 'glob', 'grep', 'search'].includes(tool)) {
      const pathMatch = argsStr.match(/(?:path|file_path|pattern):\s*"([^"]+)"/);
      if (pathMatch) {
        const path = pathMatch[1];
        // Shorten long paths
        const short = path.length > 30 ? '…' + path.slice(-28) : path;
        return _theme.theme.ui.muted(short);
      }
    }

    // Extract command for bash
    if (tool === 'bash') {
      const cmdMatch = argsStr.match(/command:\s*"([^"]+)"/);
      if (cmdMatch) {
        const cmd = cmdMatch[1];
        const short = cmd.length > 40 ? cmd.slice(0, 37) + '…' : cmd;
        return _theme.theme.ui.muted(short);
      }
    }
    return null;
  }

  /**
   * Format a compact tool result: ⎿  Found X lines (ctrl+o to expand)
   */
  formatCompactToolResult(content) {
    // Parse common result patterns for summary
    const lineMatch = content.match(/(\d+)\s*lines?/i);
    const fileMatch = content.match(/(\d+)\s*(?:files?|matches?)/i);
    const readMatch = content.match(/read.*?(\d+)\s*lines?/i);
    let summary;
    if (readMatch) {
      summary = `Read ${readMatch[1]} lines`;
    } else if (lineMatch) {
      summary = `Found ${lineMatch[1]} line${lineMatch[1] === '1' ? '' : 's'}`;
    } else if (fileMatch) {
      summary = `Found ${fileMatch[1]} file${fileMatch[1] === '1' ? '' : 's'}`;
    } else if (content.match(/^(success|ok|done|completed|written|edited|created)/i)) {
      summary = '✓';
    } else {
      // Use content directly, truncated if needed
      summary = content.length > 40 ? content.slice(0, 37) + '…' : content;
    }
    const coloredSummary = this.colorResultSummary(summary);
    return `  ${_theme.theme.ui.muted('⎿')}  ${coloredSummary} ${_theme.theme.ui.muted('(ctrl+o to expand)')}\n`;
  }
  colorResultSummary(summary) {
    if (!summary) return summary;
    const lower = summary.toLowerCase();
    if (lower.includes('fail') || lower.includes('error')) {
      return _theme.theme.error(summary);
    }
    if (summary.startsWith('✓') || lower.includes('updated') || lower.includes('created') || lower.includes('written')) {
      return _theme.theme.success(summary);
    }
    return _theme.theme.info(summary);
  }

  /**
   * Format a compact response with bullet on first line
   */
  formatCompactResponse(content) {
    return this.wrapBulletText(content);
  }

  /**
   * Wrap text with a single bullet on the first line and tidy indentation for readability.
   * Prevents awkward mid-word terminal wrapping by handling the layout ourselves.
   */
  wrapBulletText(content, options = {}) {
    const bullet = '⏺';
    const cleaned = content.replace(/^[⏺•○]\s*/, '').trimEnd();
    if (!cleaned.trim()) {
      return '';
    }

    // Reserve a little margin to reduce terminal wrap jitter
    const availableWidth = this.safeWidth();
    const maxWidth = Math.max(20, Math.min(options.maxWidth ?? availableWidth - 2, availableWidth));
    const labelText = options.label ? `${options.labelColor ? options.labelColor(options.label) : options.label}${_theme.theme.ui.muted(' · ')}` : '';
    const bulletPrefix = `${bullet} ${labelText}`;
    const indent = ' '.repeat(this.visibleLength(`${bullet} `));
    const lines = cleaned.split('\n');
    const result = [];
    let firstNonEmpty = true;
    for (const rawLine of lines) {
      const line = rawLine.trim();
      if (!line) {
        result.push(''); // Preserve intentional spacing between paragraphs
        continue;
      }
      const words = line.split(/\s+/);
      let current = '';
      for (const word of words) {
        const candidate = current ? `${current} ${word}` : word;
        const prefixLength = this.visibleLength(firstNonEmpty ? bulletPrefix : indent);
        if (prefixLength + this.visibleLength(candidate) > maxWidth && current) {
          result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
          current = word;
          firstNonEmpty = false;
        } else {
          current = candidate;
        }
      }
      if (current) {
        result.push(`${firstNonEmpty ? bulletPrefix : indent}${current}`);
        firstNonEmpty = false;
      }
    }
    return result.join('\n') + '\n';
  }

  /**
   * Format thinking block with enhanced visual design.
   * Uses a distinct visual style to clearly separate thinking from responses.
   *
   * In plain output mode we keep it simple and inline with the rest of the
   * stream so transcripts remain easy to scan.
   */
  formatThinkingBlock(content) {
    if (!content.trim()) return '';
    const normalized = content.replace(/\s+/g, ' ').trim();
    return this.wrapBulletText(normalized, {
      label: 'thinking',
      labelColor: _theme.theme.info ?? (value => value)
    });
  }
  wrapTextToWidth(text, width) {
    if (!text.trim()) return [''];
    const lines = [];
    const words = text.trim().split(/\s+/);
    let current = '';
    for (const word of words) {
      const candidate = current ? `${current} ${word}` : word;
      if (this.visibleLength(candidate) > width && current) {
        lines.push(current);
        current = word;
      } else {
        current = candidate;
      }
    }
    if (current) {
      lines.push(current);
    }
    return lines;
  }

  /**
   * Format streaming elapsed time in Claude Code style: 3m 30s
   */
  formatStreamingElapsed() {
    if (!this.streamingStartTime) return null;
    const elapsed = Math.floor((Date.now() - this.streamingStartTime) / 1000);
    if (elapsed < 5) return null; // Don't show for very short durations
    const mins = Math.floor(elapsed / 60);
    const secs = elapsed % 60;
    if (mins > 0) {
      return `${mins}m ${secs}s`;
    }
    return `${secs}s`;
  }

  /**
   * Format a compact conversation block (Claude Code style)
   * Shows a visual separator with "history" label and ctrl+o hint
   */
  formatCompactBlock(content, label = 'history') {
    const maxWidth = Math.min(this.cols, 80);
    const labelText = ` ${label} `;
    const padding = Math.max(0, maxWidth - labelText.length);
    const leftPad = Math.floor(padding / 2);
    const rightPad = Math.ceil(padding / 2);

    // Claude Code style: ══ history ═════════════
    const separator = _theme.theme.ui.muted('═'.repeat(leftPad) + labelText + '═'.repeat(rightPad));
    return `\n${separator}\n${content}\n`;
  }

  /**
   * Add a compact conversation block to the event queue
   * This displays a collapsed view with expansion hint (Claude Code style)
   */
  addCompactBlock(content, label = 'history') {
    const formattedContent = this.formatCompactBlock(content, label);
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: formattedContent,
      timestamp: Date.now(),
      isCompacted: true
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
  }

  /**
   * Expand the most recent tool result inline (Ctrl+O support).
   */
  expandLastToolResult() {
    if (!this.lastToolResult) {
      return false;
    }
    const rendered = this.wrapBulletText(this.lastToolResult, {
      label: 'tool',
      labelColor: _theme.theme.info
    });
    this.eventQueue.push({
      type: 'response',
      rawType: 'response',
      content: rendered,
      timestamp: Date.now(),
      isCompacted: false
    });
    if (!this.isProcessingQueue) {
      void this.processQueue();
    }
    return true;
  }

  // ------------ Status / mode ------------

  setMode(mode) {
    const wasStreaming = this.mode === 'streaming';
    this.mode = mode;

    // Track streaming start time for elapsed display
    if (mode === 'streaming' && !wasStreaming) {
      this.streamingStartTime = Date.now();
      this.streamingTokens = 0; // Reset token count
      // Clear inline panel when entering streaming mode to prevent stale menus
      if (this.inlinePanel.length > 0) {
        this.inlinePanel = [];
      }
      this.startSpinnerAnimation();
    } else if (mode === 'idle' && wasStreaming) {
      this.streamingStartTime = null;
      this.stopSpinnerAnimation();
    }
    if (wasStreaming && mode === 'idle' && !this.lastOutputEndedWithNewline) {
      // Finish streaming on a fresh line so the next prompt/event doesn't collide
      this.write('\n');
      this.lastOutputEndedWithNewline = true;
    }
    if (!this.plainMode) {
      // Always render prompt to keep bottom UI persistent (rich mode only)
      this.renderPrompt();
    }
  }

  /**
   * Start the animated spinner for streaming status
   */
  startSpinnerAnimation() {
    if (this.spinnerInterval) return; // Already running
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.spinnerInterval = setInterval(() => {
      this.spinnerFrame = (this.spinnerFrame + 1) % _theme.spinnerFrames.braille.length;
      this.activityStarFrame = (this.activityStarFrame + 1) % this.activityStarFrames.length;
      // Re-render to show updated spinner/star frame
      if (!this.plainMode && this.mode === 'streaming') {
        this.renderPrompt();
      }
    }, 80); // ~12 FPS for smooth spinner animation
  }

  /**
   * Stop the animated spinner
   */
  stopSpinnerAnimation() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.spinnerFrame = 0;
    this.activityStarFrame = 0;
    this.activityMessage = null;
  }

  /**
   * Set the activity message displayed with animated star
   * Example: "Ruminating…" shows as "✳ Ruminating… (esc to interrupt · 34s · ↑1.2k)"
   */
  setActivity(message) {
    this.activityMessage = message;
    if (!this.plainMode) {
      this.renderPrompt();
    }
  }

  /**
   * Update the token count displayed in the activity line
   */
  updateStreamingTokens(tokens) {
    this.streamingTokens = tokens;
  }

  /**
   * Format token count as compact string (e.g., 1.2k, 24k, 128k)
   */
  formatTokenCount(tokens) {
    if (tokens < 1000) return String(tokens);
    if (tokens < 10000) return `${(tokens / 1000).toFixed(1)}k`;
    return `${Math.round(tokens / 1000)}k`;
  }
  getMode() {
    return this.mode;
  }
  updateStatus(message) {
    this.updateStatusBundle({
      main: message,
      override: null,
      streaming: null
    });
  }
  updateStatusBundle(status, options = {}) {
    const prevStreaming = this.statusStreaming;
    let changed = false;
    let mainChanged = false;
    let overrideChanged = false;
    if (status.main !== undefined && status.main !== this.statusMessage) {
      this.statusMessage = status.main;
      changed = true;
      mainChanged = true;
    }
    if (status.override !== undefined && status.override !== this.statusOverride) {
      this.statusOverride = status.override;
      changed = true;
      overrideChanged = true;
    }
    const streamingChanged = status.streaming !== undefined && status.streaming !== prevStreaming;
    if (status.streaming !== undefined) {
      if (streamingChanged) {
        changed = true;
      }
      this.statusStreaming = status.streaming;
    }
    const streamingIntroduce = streamingChanged && prevStreaming === null && status.streaming !== null && this.mode === 'streaming';
    const streamingCleared = streamingChanged && status.streaming === null && this.mode === 'streaming';
    const onlyStreamingChanged = streamingChanged && !mainChanged && !overrideChanged;
    const skipStreamingRender = onlyStreamingChanged && this.mode === 'streaming' && !streamingIntroduce && !streamingCleared;
    const shouldRender = options.render !== false && changed && !skipStreamingRender;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateStatusMeta(meta, options = {}) {
    const next = {
      ...this.statusMeta,
      ...meta
    };
    const changed = JSON.stringify(next) !== JSON.stringify(this.statusMeta);
    this.statusMeta = next;
    const shouldRender = options.render !== false && changed;
    if (shouldRender) {
      this.renderPrompt();
    }
  }
  updateModeToggles(state) {
    this.toggleState = {
      ...this.toggleState,
      ...state
    };
    if (!state.verificationHotkey && !state.thinkingHotkey && !state.criticalApprovalHotkey && !state.autoContinueHotkey && !state.dualRlHotkey && !state.debugHotkey) {
      this.hotkeysInToggleLine.clear();
    }
    this.renderPrompt();
  }
  setInlinePanel(lines) {
    const normalized = (lines ?? []).map(line => line.replace(/\s+$/g, ''));
    const hasContent = normalized.some(line => line.trim().length > 0);
    if (!hasContent) {
      if (this.inlinePanel.length) {
        this.inlinePanel = [];
        this.renderPrompt();
      }
      return;
    }
    const limited = this.limitInlinePanel(normalized);
    if (JSON.stringify(limited) === JSON.stringify(this.inlinePanel)) {
      return;
    }
    this.inlinePanel = limited;
    this.renderPrompt();
  }
  supportsInlinePanel() {
    return this.interactive && !this.plainMode;
  }
  clearInlinePanel() {
    if (!this.inlinePanel.length) return;
    this.inlinePanel = [];
    this.renderPrompt();
  }
  limitInlinePanel(lines) {
    const maxLines = Math.max(4, Math.min(this.maxInlinePanelLines, Math.max(2, this.rows - 8)));
    if (lines.length <= maxLines) {
      return lines;
    }
    const overflow = lines.length - maxLines;
    const indicator = _theme.theme.ui.muted(`… ${overflow} more lines`);
    const tailCount = Math.max(1, maxLines - 1);
    const tail = lines.slice(-tailCount);
    return [indicator, ...tail];
  }

  // ------------ Prompt rendering ------------

  renderPrompt() {
    // Don't render if disposed
    if (this.disposed) return;

    // Throttle renders to prevent excessive redraws during rapid input
    const now = Date.now();
    if (now - this.lastRenderTime < this.renderThrottleMs) {
      if (!this.pendingRender) {
        this.pendingRender = true;
        // Track the timer for cleanup
        this.renderThrottleTimer = setTimeout(() => {
          this.renderThrottleTimer = null;
          this.pendingRender = false;
          if (!this.disposed) {
            this.renderPromptImmediate();
          }
        }, this.renderThrottleMs);
      }
      return;
    }
    this.renderPromptImmediate();
  }
  renderPromptImmediate() {
    // Don't render if disposed
    if (this.disposed) return;
    this.lastRenderTime = Date.now();
    if (!this.interactive) {
      this.isPromptActive = false;
      return;
    }
    if (this.promptRenderingSuspended) {
      this.isPromptActive = false;
      return;
    }
    if (this.plainMode) {
      const line = `> ${this.buffer}`;
      if (!this.isPromptActive && !this.lastOutputEndedWithNewline) {
        this.write('\n');
        this.lastOutputEndedWithNewline = true;
      }
      this.write(`\r${ESC.CLEAR_LINE}${line}`);
      this.cursorVisibleColumn = line.length + 1;
      this.hasRenderedPrompt = true;
      this.isPromptActive = true;
      this.lastOutputEndedWithNewline = false; // prompt ends mid-line by design
      this.promptHeight = 1;
      return;
    }
    if (!this.allowPromptRender) {
      return;
    }

    // Rich inline mode: prompt flows naturally with content
    this.updateTerminalSize();
    const maxWidth = this.safeWidth();
    this.lastRenderWidth = maxWidth;
    const overlay = this.buildOverlayLines();
    if (!overlay.lines.length) {
      return;
    }
    const renderedLines = overlay.lines.map(line => this.truncateLine(line, maxWidth));
    if (!renderedLines.length) {
      return;
    }
    const promptIndex = Math.max(0, Math.min(overlay.promptIndex, renderedLines.length - 1));
    const height = renderedLines.length;

    // Clear previous prompt and handle height changes
    // Note: We check lastOverlayHeight > 0 to know if there's something to clear,
    // but we use lastOverlay?.promptIndex for cursor positioning (defaulting to 0 if cleared)
    if (this.hasEverRenderedOverlay && this.lastOverlayHeight > 0) {
      // Move up from prompt row to top of overlay
      const linesToTop = this.lastOverlay?.promptIndex ?? 0;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }

      // Clear all previous lines
      for (let i = 0; i < this.lastOverlayHeight; i++) {
        this.write('\r');
        this.write(ESC.CLEAR_LINE);
        if (i < this.lastOverlayHeight - 1) {
          this.write('\x1b[B');
        }
      }

      // If new height is greater, we need to add blank lines
      const extraLines = height - this.lastOverlayHeight;
      if (extraLines > 0) {
        for (let i = 0; i < extraLines; i++) {
          this.write('\n');
        }
      }

      // Move back to top of where overlay should start
      const moveBackUp = Math.max(0, height - 1);
      if (moveBackUp > 0) {
        this.write(`\x1b[${moveBackUp}A`);
      }
    }

    // Write prompt lines (no trailing newline on last line)
    for (let i = 0; i < renderedLines.length; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      this.write(renderedLines[i] || '');
      if (i < renderedLines.length - 1) {
        this.write('\n');
      }
    }

    // Position cursor at prompt input line
    const promptCol = Math.min(Math.max(1, 3 + this.cursor), this.cols || 80);
    // Cursor is now at the last line. Move up to the prompt row.
    const linesToMoveUp = height - 1 - promptIndex;
    if (linesToMoveUp > 0) {
      this.write(`\x1b[${linesToMoveUp}A`);
    }
    this.write(`\x1b[${promptCol}G`);
    this.cursorVisibleColumn = promptCol;
    this.hasRenderedPrompt = true;
    this.hasEverRenderedOverlay = true;
    this.isPromptActive = true;
    this.lastOverlayHeight = height;
    this.lastOverlay = {
      lines: renderedLines,
      promptIndex
    };
    this.lastOutputEndedWithNewline = false;
    this.promptHeight = height;
  }
  buildOverlayLines() {
    const lines = [];
    const maxWidth = this.safeWidth();
    // Simple horizontal divider - clean and reliable
    const divider = _theme.theme.ui.muted('─'.repeat(maxWidth));
    const fallbackActivity = (() => {
      const raw = this.statusStreaming || this.statusOverride || this.statusMessage;
      if (!raw) return null;
      const cleaned = this.stripAnsi(raw).replace(/^[⏺•]\s*/, '').trim();
      return cleaned || null;
    })();

    // Activity line (only when streaming) - shows: ◐ Working… (esc to interrupt · 34s)
    if (this.mode === 'streaming' && (this.activityMessage || fallbackActivity)) {
      // Clean spinner animation using braille dots + shimmer accent for a richer feel
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      const starChar = this.activityStarFrames[this.activityStarFrame % this.activityStarFrames.length] ?? '✶';
      const spinnerDecorated = `${_theme.theme.info(spinnerChar)}${_theme.theme.accent ? _theme.theme.accent(starChar) : starChar}`;
      const elapsed = this.formatStreamingElapsed();
      const genericActivities = ['Streaming', 'Thinking', 'Processing'];
      let displayActivity = this.activityMessage || fallbackActivity || '';
      if (genericActivities.includes(displayActivity) && fallbackActivity) {
        displayActivity = fallbackActivity;
      }
      if (!displayActivity.trim()) {
        displayActivity = fallbackActivity || 'Working';
      }
      const needsEllipsis = !displayActivity.trimEnd().endsWith('…') && !displayActivity.trimEnd().endsWith('...');
      // Format: ⠋ Working… (esc to interrupt · 1m 19s · ↑1.2k tokens)
      const parts = ['esc to interrupt'];
      if (elapsed) parts.push(elapsed);
      if (this.streamingTokens > 0) {
        parts.push(`↑${this.formatTokenCount(this.streamingTokens)} tokens`);
      }
      const prefix = `${spinnerDecorated} `;
      const activityLine = `${prefix}${displayActivity.trim()}${needsEllipsis ? '…' : ''} ${_theme.theme.ui.muted(`(${parts.join(' · ')})`)}`;
      const indent = ' '.repeat(this.visibleLength(prefix));
      const wrapped = this.wrapOverlayLine(activityLine, maxWidth, indent);
      lines.push(...wrapped);
    }

    // Top divider
    lines.push(divider);

    // Input prompt line
    const promptIndex = lines.length;
    const inputLine = this.buildInputLine();
    // Handle multi-line input by splitting on newlines
    const inputLines = inputLine.split('\n');
    for (const line of inputLines) {
      lines.push(this.truncateLine(line, maxWidth));
    }

    // Bottom divider
    lines.push(divider);

    // Inline panel (pinned scroll box for live output/menus)
    if (this.inlinePanel.length > 0) {
      for (const panelLine of this.inlinePanel) {
        lines.push(this.truncateLine(`  ${panelLine}`, maxWidth));
      }
      // Separate inline content from suggestions/toggles
      lines.push(divider);
    }

    // Slash command suggestions
    if (this.suggestions.length > 0) {
      for (let index = 0; index < this.suggestions.length; index++) {
        const suggestion = this.suggestions[index];
        const isActive = index === this.suggestionIndex;
        const marker = isActive ? _theme.theme.primary('▸') : _theme.theme.ui.muted(' ');
        const cmdText = isActive ? _theme.theme.primary(suggestion.command) : _theme.theme.ui.muted(suggestion.command);
        const descText = isActive ? suggestion.description : _theme.theme.ui.muted(suggestion.description);
        lines.push(this.truncateLine(`  ${marker} ${cmdText} — ${descText}`, maxWidth));
      }
    }

    // Model and context info
    const modelContextLine = this.buildModelContextLine();
    if (modelContextLine) {
      lines.push(this.truncateLine(`  ${modelContextLine}`, maxWidth));
    }

    // Status + meta block (includes dir/version/tool summary)
    const chromeLines = this.buildChromeLines();
    if (chromeLines.length) {
      for (const chromeLine of chromeLines) {
        lines.push(this.truncateLine(`  ${chromeLine}`, maxWidth));
      }
    }

    // Mode toggles
    const toggleLines = this.buildInlineToggleLine();
    if (toggleLines.length > 0) {
      for (const toggleLine of toggleLines) {
        lines.push(this.truncateLine(`  ${toggleLine}`, maxWidth));
      }
      const legendLines = this.buildToggleLegend();
      for (const legend of legendLines) {
        lines.push(this.truncateLine(`  ${legend}`, maxWidth));
      }
    }

    // Help hint
    lines.push(this.truncateLine(`  ${_theme.theme.ui.muted('? for shortcuts')}`, maxWidth));
    return {
      lines,
      promptIndex
    };
  }

  /**
   * Build model name and context usage line with mini progress bar
   * Format: gpt-4 · ████░░ 85% context
   */
  buildModelContextLine() {
    const parts = [];

    // Model name (provider / model or just model)
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} · ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      parts.push(_theme.theme.info(model));
    }

    // Context meter with mini progress bar (shows used percentage, not remaining)
    if (this.statusMeta.contextPercent !== undefined) {
      const used = Math.min(100, Math.max(0, this.statusMeta.contextPercent));
      const barWidth = 6;
      const filled = Math.round(used / 100 * barWidth);
      const empty = barWidth - filled;
      // Color based on how full the context is (green=low usage, yellow=medium, red=high)
      const barColor = used < 50 ? _theme.theme.success : used < 80 ? _theme.theme.warning : _theme.theme.error;
      const bar = barColor('█'.repeat(filled)) + _theme.theme.ui.muted('░'.repeat(empty));
      parts.push(`${bar} ${barColor(`${used}%`)} ${_theme.theme.ui.muted('ctx')}`);
    }
    return parts.length > 0 ? parts.join(_theme.theme.ui.muted('  ·  ')) : null;
  }

  /**
   * Build inline toggle controls - Claude Code style
   * Format: ⏵⏵ accept edits on (shift+tab to cycle)
   * Returns wrapped lines to ensure all toggles (including RL) are visible below the chat box.
   */
  /**
   * Build unified toggle status line with color-coded states and integrated explanations.
   * Each toggle has a distinct color for easy identification.
   */
  buildInlineToggleLine() {
    const autoContinueActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled ?? false;
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const thinkingLabel = (this.toggleState.thinkingModeLabel || 'balanced').trim().toLowerCase();

    // Build unified toggle segments with DISTINCT colors for each toggle
    const toggles = [];

    // 1. RL mode (CYAN) - multi-agent vs single-pass
    const rlOn = this.toggleState.dualRlEnabled;
    const rlIcon = rlOn ? '🤖' : '⚡';
    const rlStatus = rlOn ? _theme.theme.info('dual') : _theme.theme.ui.muted('single');
    const rlExplain = rlOn ? 'multi-agent' : 'one-pass';
    toggles.push(`${rlIcon} ${rlStatus} ${_theme.theme.ui.muted('[⌥D]')} ${_theme.theme.ui.muted(rlExplain)}`);

    // 2. Auto-continue (MAGENTA/PURPLE) - keep going until done
    const contIcon = autoContinueActive ? '🔄' : '⏸';
    const contStatus = autoContinueActive ? _theme.theme.primary('loop') : _theme.theme.ui.muted('stop');
    const contExplain = autoContinueActive ? 'until done' : 'each response';
    toggles.push(`${contIcon} ${contStatus} ${_theme.theme.ui.muted('[⌥G]')} ${_theme.theme.ui.muted(contExplain)}`);

    // 3. Verify (YELLOW) - auto-tests after edits
    const verifyIcon = verificationActive ? '✓' : '○';
    const verifyStatus = verificationActive ? _theme.theme.warning('test') : _theme.theme.ui.muted('skip');
    const verifyExplain = verificationActive ? 'auto-test' : 'no tests';
    toggles.push(`${verifyIcon} ${verifyStatus} ${_theme.theme.ui.muted('[⌥V]')} ${_theme.theme.ui.muted(verifyExplain)}`);

    // 4. Approvals (GREEN/ORANGE) - auto or ask for permission
    const apprIcon = approvalMode === 'approval' ? '🛡' : '✔';
    const apprStatus = approvalMode === 'approval' ? _theme.theme.warning('ask') : _theme.theme.success('auto');
    const apprExplain = approvalMode === 'approval' ? 'confirm all' : 'auto-approve';
    toggles.push(`${apprIcon} ${apprStatus} ${_theme.theme.ui.muted('[⌥A]')} ${_theme.theme.ui.muted(apprExplain)}`);

    // 5. Thinking (BLUE) - balanced or deep reasoning
    const thinkingIsDeep = thinkingLabel === 'extended' || thinkingLabel === 'deep';
    const thinkIcon = thinkingIsDeep ? '🧠' : '💭';
    const thinkStatus = thinkingIsDeep ? _theme.theme.info('deep') : _theme.theme.ui.muted('quick');
    const thinkExplain = thinkingIsDeep ? 'thorough' : 'concise';
    toggles.push(`${thinkIcon} ${thinkStatus} ${_theme.theme.ui.muted('[TAB]')} ${_theme.theme.ui.muted(thinkExplain)}`);

    // 6. Debug logging indicator (RED) - toggle shows whether console logging is enabled
    const debugActive = this.toggleState.debugEnabled ?? false;
    const debugIcon = debugActive ? '🐞' : '🔍';
    const debugStatus = debugActive ? _theme.theme.warning('debug on') : _theme.theme.ui.muted('debug off');
    const debugExplain = debugActive ? 'verbose logs' : 'silent';
    toggles.push(`${debugIcon} ${debugStatus} ${_theme.theme.ui.muted('[/debug]')} ${_theme.theme.ui.muted(debugExplain)}`);

    // 7. Shortcut hint
    toggles.push(`${_theme.theme.ui.muted('? help')}`);
    const maxWidth = Math.max(10, this.safeWidth() - 2);
    return this.wrapSegments(toggles, maxWidth);
  }

  /**
   * @deprecated Legend is now integrated into buildInlineToggleLine for unified display
   */
  buildToggleLegend() {
    // Legend explanations now integrated directly into toggle line
    return [];
  }
  buildChromeLines() {
    const maxWidth = this.safeWidth();
    const statusLines = this.buildStatusBlock(maxWidth);
    const metaLines = this.buildMetaBlock(maxWidth);
    return [...statusLines, ...metaLines];
  }
  abbreviatePath(pathValue) {
    const home = (0, _nodeOs.homedir)();
    if (home && pathValue.startsWith(home)) {
      return pathValue.replace(home, '~');
    }
    return pathValue;
  }
  buildStatusBlock(maxWidth) {
    const statusLabel = this.composeStatusLabel();
    if (!statusLabel) {
      return [];
    }
    const segments = [];

    // Add animated spinner when streaming for dynamic visual feedback
    if (this.mode === 'streaming') {
      const spinnerChars = _theme.spinnerFrames.braille;
      const spinnerChar = spinnerChars[this.spinnerFrame % spinnerChars.length] ?? '⠋';
      segments.push(`${_theme.theme.info(spinnerChar)} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    } else {
      segments.push(`${_theme.theme.ui.muted('status')} ${this.applyTone(statusLabel.text, statusLabel.tone)}`);
    }
    if (this.statusMeta.sessionTime) {
      segments.push(`${_theme.theme.ui.muted('runtime')} ${_theme.theme.ui.muted(this.statusMeta.sessionTime)}`);
    }
    if (this.statusMeta.contextPercent !== undefined) {
      // Use animated context meter for smooth color transitions
      this.contextMeter.update(this.statusMeta.contextPercent);
      segments.push(this.contextMeter.render());
    }
    return this.wrapSegments(segments, maxWidth);
  }
  buildMetaBlock(maxWidth) {
    const segments = [];
    if (this.statusMeta.profile) {
      segments.push(this.formatMetaSegment('profile', this.statusMeta.profile, 'info'));
    }
    const model = this.statusMeta.provider && this.statusMeta.model ? `${this.statusMeta.provider} / ${this.statusMeta.model}` : this.statusMeta.model || this.statusMeta.provider;
    if (model) {
      segments.push(this.formatMetaSegment('model', model, 'info'));
    }
    const workspace = this.statusMeta.workspace || this.statusMeta.directory;
    if (workspace) {
      segments.push(this.formatMetaSegment('dir', this.abbreviatePath(workspace), 'muted'));
    }
    if (this.statusMeta.writes) {
      segments.push(this.formatMetaSegment('writes', this.statusMeta.writes, 'muted'));
    }
    if (this.statusMeta.toolSummary) {
      segments.push(this.formatMetaSegment('tools', this.statusMeta.toolSummary, 'muted'));
    }
    if (this.statusMeta.sessionLabel) {
      segments.push(this.formatMetaSegment('session', this.statusMeta.sessionLabel, 'muted'));
    }
    if (this.statusMeta.version) {
      segments.push(this.formatMetaSegment('build', `v${this.statusMeta.version}`, 'muted'));
    }
    if (segments.length === 0) {
      return [];
    }
    return this.wrapSegments(segments, maxWidth);
  }
  composeStatusLabel() {
    const statuses = [this.statusStreaming, this.statusOverride, this.statusMessage].filter((value, index, arr) => Boolean(value) && arr.indexOf(value) === index);
    const text = statuses.length > 0 ? statuses.join(' / ') : 'Ready for prompts';
    if (!text.trim()) {
      return null;
    }
    const normalized = text.toLowerCase();
    const tone = normalized.includes('ready') ? 'success' : 'info';
    return {
      text,
      tone
    };
  }
  formatMetaSegment(label, value, tone) {
    const colorizer = tone === 'success' ? _theme.theme.success : tone === 'warn' ? _theme.theme.warning : tone === 'error' ? _theme.theme.error : tone === 'muted' ? _theme.theme.ui.muted : _theme.theme.info;
    return `${_theme.theme.ui.muted(label)} ${colorizer(value)}`;
  }
  applyTone(text, tone) {
    switch (tone) {
      case 'success':
        return _theme.theme.success(text);
      case 'warn':
        return _theme.theme.warning(text);
      case 'error':
        return _theme.theme.error(text);
      case 'info':
      default:
        return _theme.theme.info(text);
    }
  }
  wrapSegments(segments, maxWidth) {
    const lines = [];
    const separator = _theme.theme.ui.muted('  |  ');
    let current = '';
    for (const segment of segments) {
      const normalized = segment.trim();
      if (!normalized) continue;
      if (!current) {
        current = this.truncateLine(normalized, maxWidth);
        continue;
      }
      const candidate = `${current}${separator}${normalized}`;
      if (this.visibleLength(candidate) <= maxWidth) {
        current = candidate;
      } else {
        lines.push(this.truncateLine(current, maxWidth));
        current = this.truncateLine(normalized, maxWidth);
      }
    }
    if (current) {
      lines.push(this.truncateLine(current, maxWidth));
    }
    return lines;
  }
  buildControlLines() {
    const lines = [];
    const toggleLine = this.buildToggleLine();
    if (toggleLine) {
      lines.push(`${_theme.theme.ui.muted('modes')} ${_theme.theme.ui.muted('›')} ${toggleLine}`);
    }
    const shortcutLine = this.buildShortcutLine();
    if (shortcutLine) {
      lines.push(`${_theme.theme.ui.muted('keys')}  ${shortcutLine}`);
    }
    return lines;
  }

  /**
   * Build a compact toggle line like Claude Code:
   * "⏵⏵ accept edits on (shift+tab to cycle)"
   */
  buildCompactToggleLine() {
    // Show the most relevant mode based on current state
    const parts = [];
    const verificationActive = this.toggleState.verificationEnabled || this.toggleState.autoContinueEnabled;

    // Edit mode indicator
    const editIcon = '⏵⏵';
    const editState = verificationActive ? 'approval required' : 'accept edits';
    parts.push(`${_theme.theme.ui.muted(editIcon)} ${editState} ${_theme.theme.success('on')}`);

    // Thinking mode (if active)
    const thinkingLabel = (this.toggleState.thinkingModeLabel || '').trim().toLowerCase();
    if (thinkingLabel && thinkingLabel !== 'off') {
      parts.push(`${_theme.theme.ui.muted('thinking')} ${_theme.theme.info(thinkingLabel)}`);
    }

    // Cycle hint
    const cycleHint = _theme.theme.ui.muted('(shift+tab to cycle)');
    if (parts.length === 0) {
      return null;
    }
    return `  ${parts.join(_theme.theme.ui.muted(' · '))} ${cycleHint}`;
  }
  buildToggleLine() {
    const toggles = [];
    const addToggle = (label, on, hotkey, value) => {
      toggles.push({
        label,
        on,
        hotkey: this.formatHotkey(hotkey),
        value
      });
    };
    const autoVerifyActive = this.toggleState.autoContinueEnabled ?? false;
    const verificationActive = this.toggleState.verificationEnabled || autoVerifyActive;
    const verifyValue = autoVerifyActive ? 'auto' : verificationActive ? 'on' : 'off';
    addToggle('Verify', verificationActive, this.toggleState.verificationHotkey, verifyValue);
    const approvalMode = this.toggleState.criticalApprovalMode || 'auto';
    const approvalActive = approvalMode !== 'auto';
    addToggle('Approvals', approvalActive, this.toggleState.criticalApprovalHotkey, approvalMode === 'auto' ? 'auto' : 'ask');
    const autoContinueActive = autoVerifyActive;
    addToggle('Auto-continue', autoContinueActive, this.toggleState.autoContinueHotkey, autoContinueActive ? 'auto-verify' : 'off');
    const thinkingLabelRaw = (this.toggleState.thinkingModeLabel || 'balanced').trim();
    const thinkingLabel = thinkingLabelRaw.toLowerCase() === 'extended' ? 'deep' : thinkingLabelRaw || 'balanced';
    const thinkingActive = thinkingLabel.length > 0;
    addToggle('Thinking', thinkingActive, this.toggleState.thinkingHotkey, thinkingLabel);
    const dualRlActive = this.toggleState.dualRlEnabled ?? false;
    const modeValue = dualRlActive ? 'dual-rl-cont' : 'single-cont';
    addToggle('Mode', dualRlActive, this.toggleState.dualRlHotkey, modeValue);
    const buildLine = includeHotkeys => {
      return toggles.map(toggle => {
        const stateText = toggle.on ? _theme.theme.success(toggle.value || 'on') : _theme.theme.ui.muted(toggle.value || 'off');
        const hotkeyText = includeHotkeys && toggle.hotkey ? _theme.theme.ui.muted(` [${toggle.hotkey}]`) : '';
        return `${_theme.theme.ui.muted(`${toggle.label}:`)} ${stateText}${hotkeyText}`;
      }).join(_theme.theme.ui.muted('  '));
    };
    const maxWidth = this.safeWidth();
    let line = buildLine(true);

    // Record which hotkeys are actually shown so the shortcut line can avoid duplicates
    this.hotkeysInToggleLine = new Set(toggles.map(toggle => toggle.hotkey ? toggle.hotkey : null).filter(key => Boolean(key)));

    // If the line is too wide, drop hotkey hints to preserve all toggle labels
    if (this.visibleLength(line) > maxWidth) {
      this.hotkeysInToggleLine.clear();
      line = buildLine(false);
    }
    return line.trim() ? line : null;
  }
  buildShortcutLine() {
    const parts = [];
    const addHotkey = (label, combo) => {
      const normalized = this.formatHotkey(combo);
      if (!normalized) return;
      if (this.hotkeysInToggleLine.has(normalized)) {
        return;
      }
      parts.push(`${_theme.theme.info(normalized)} ${_theme.theme.ui.muted(label)}`);
    };

    // Core controls
    addHotkey('interrupt', 'Ctrl+C');
    addHotkey('clear input', 'Ctrl+U');

    // Feature toggles (only if hotkeys are defined)
    addHotkey('verify', this.toggleState.verificationHotkey);
    addHotkey('auto-continue', this.toggleState.autoContinueHotkey);
    addHotkey('thinking', this.toggleState.thinkingHotkey);
    addHotkey('mode', this.toggleState.dualRlHotkey);
    if (parts.length === 0) {
      return null;
    }
    return parts.join(_theme.theme.ui.muted('   '));
  }
  buildInputLine() {
    if (this.collapsedPaste) {
      const summary = `[pasted ${this.collapsedPaste.lines} lines, ${this.collapsedPaste.chars} chars] (Enter/Ctrl+L insert, Backspace discard)`;
      return this.truncateLine(`${_theme.theme.primary('> ')}${_theme.theme.ui.muted(summary)}`, this.safeWidth());
    }

    // Claude Code uses simple '>' prompt
    const prompt = _theme.theme.primary('> ');
    const promptWidth = this.visibleLength(prompt);
    const maxWidth = this.safeWidth();
    const continuationIndent = '  '; // 2 spaces for continuation lines
    const continuationWidth = continuationIndent.length;

    // Handle multi-line input - split buffer on newlines first
    // In secret mode, mask all characters with bullets
    const rawBuffer = this.buffer.replace(/\r/g, '\n');
    const normalized = this.secretMode ? '•'.repeat(rawBuffer.length) : rawBuffer;
    const bufferLines = normalized.split('\n');

    // Wrap each logical line to fit terminal width, expanding vertically
    const result = [];
    let totalChars = 0;
    let cursorLine = 0;
    let cursorCol = 0;
    let foundCursor = false;
    for (let lineIndex = 0; lineIndex < bufferLines.length; lineIndex++) {
      const line = bufferLines[lineIndex] ?? '';
      const isFirstLogicalLine = lineIndex === 0;
      const lineStartChar = totalChars;

      // Determine available width for this line
      const firstLineWidth = maxWidth - promptWidth;
      const contLineWidth = maxWidth - continuationWidth;

      // Wrap this logical line into display lines
      let remaining = line;
      let isFirstDisplayLine = true;
      while (remaining.length > 0 || isFirstDisplayLine) {
        const availableWidth = isFirstLogicalLine && isFirstDisplayLine ? firstLineWidth : contLineWidth;
        const chunk = remaining.slice(0, availableWidth);
        remaining = remaining.slice(availableWidth);

        // Build the display line
        let displayLine;
        if (isFirstLogicalLine && isFirstDisplayLine) {
          displayLine = `${prompt}${chunk}`;
        } else {
          displayLine = `${continuationIndent}${chunk}`;
        }

        // Track cursor position
        if (!foundCursor) {
          const chunkStart = lineStartChar + (line.length - remaining.length - chunk.length);
          const chunkEnd = chunkStart + chunk.length;
          if (this.cursor >= chunkStart && this.cursor <= chunkEnd) {
            cursorLine = result.length;
            const offsetInChunk = this.cursor - chunkStart;
            cursorCol = (isFirstLogicalLine && isFirstDisplayLine ? promptWidth : continuationWidth) + offsetInChunk;
            foundCursor = true;
          }
        }
        result.push(displayLine);
        isFirstDisplayLine = false;

        // If nothing left and this was an empty line, we already added it
        if (remaining.length === 0 && chunk.length === 0) break;
      }
      totalChars += line.length + 1; // +1 for the newline separator
    }

    // Handle cursor at very end
    if (!foundCursor) {
      cursorLine = Math.max(0, result.length - 1);
      const lastLine = result[cursorLine] ?? '';
      cursorCol = this.visibleLength(lastLine);
    }

    // Add cursor highlight to the appropriate position
    if (result.length > 0) {
      const targetLine = result[cursorLine] ?? '';
      const visiblePart = this.stripAnsi(targetLine);
      const cursorPos = Math.min(cursorCol, visiblePart.length);

      // Rebuild the line with cursor highlight
      const before = visiblePart.slice(0, cursorPos);
      const at = visiblePart.charAt(cursorPos) || ' ';
      const after = visiblePart.slice(cursorPos + 1);

      // Preserve the prompt/indent styling
      const prefix = cursorLine === 0 ? prompt : continuationIndent;
      const textPart = cursorLine === 0 ? before.slice(promptWidth) : before.slice(continuationWidth);
      result[cursorLine] = `${prefix}${textPart}${ESC.REVERSE}${at}${ESC.RESET}${after}`;
    }

    // Store cursor column for terminal positioning
    this.cursorVisibleColumn = cursorCol + 1;
    return result.join('\n');
  }
  buildInputWindow(available) {
    if (available <= 0) {
      return {
        text: '',
        cursor: 0
      };
    }
    if (this.collapsedPaste) {
      return {
        text: '',
        cursor: 0
      };
    }
    const normalized = this.buffer.replace(/\r/g, '\n');
    const cursorIndex = Math.min(this.cursor, normalized.length);
    let offset = this.inputRenderOffset;
    if (cursorIndex < offset) {
      offset = cursorIndex;
    }
    const overflow = cursorIndex - offset - available + 1;
    if (overflow > 0) {
      offset += overflow;
    }
    const maxOffset = Math.max(0, normalized.length - available);
    if (offset > maxOffset) {
      offset = maxOffset;
    }
    this.inputRenderOffset = offset;
    const window = normalized.slice(offset, offset + available);
    const display = window.split('').map(char => char === '\n' ? NEWLINE_PLACEHOLDER : char).join('');
    const cursorInWindow = Math.min(display.length, Math.max(0, cursorIndex - offset));
    const before = display.slice(0, cursorInWindow);
    const at = display.charAt(cursorInWindow) || ' ';
    const after = display.slice(cursorInWindow + 1);
    return {
      text: `${before}${ESC.REVERSE}${at}${ESC.RESET}${after}`,
      cursor: cursorInWindow
    };
  }
  expandCollapsedPaste() {
    if (!this.collapsedPaste) return;
    this.buffer = this.collapsedPaste.text;
    this.cursor = this.buffer.length;
    this.collapsedPaste = null;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  captureInput(options = {}) {
    if (this.inputCapture) {
      return Promise.reject(new Error('Input capture already in progress'));
    }
    if (options.resetBuffer) {
      this.buffer = '';
      this.cursor = 0;
      this.inputRenderOffset = 0;
      this.resetSuggestions();
      this.renderPrompt();
      this.emitInputChange();
    }
    return new Promise((resolve, reject) => {
      this.inputCapture = {
        resolve,
        reject,
        options: {
          trim: options.trim !== false,
          allowEmpty: options.allowEmpty ?? false
        }
      };
    });
  }
  cancelInputCapture(reason) {
    if (!this.inputCapture) {
      return;
    }
    const capture = this.inputCapture;
    this.inputCapture = null;
    capture.reject?.(reason ?? new Error('Input capture cancelled'));
  }

  // ------------ Helpers ------------

  wrapOverlayLine(text, width, indent) {
    const words = text.split(/(\s+)/);
    const lines = [];
    let current = '';
    for (const word of words) {
      const next = current + word;
      if (this.visibleLength(next) > width && current.trim()) {
        lines.push(this.truncateLine(current.trimEnd(), width));
        current = indent + word.trimStart();
      } else {
        current = next;
      }
    }
    if (current.trim()) {
      lines.push(this.truncateLine(current.trimEnd(), width));
    }
    return lines.length ? lines : [this.truncateLine(text, width)];
  }
  safeWidth() {
    const cols = this.output.isTTY ? this.cols || 80 : 80;
    return Math.max(1, cols - 1);
  }
  visibleLength(value) {
    if (!value) return 0;
    return this.stripAnsi(value).length;
  }
  stripAnsi(value) {
    if (!value) return '';
    // eslint-disable-next-line no-control-regex
    return value.replace(/\u001B\[[0-?]*[ -/]*[@-~]/g, '');
  }
  truncateLine(value, width) {
    if (!value) return '';
    const limit = Math.max(1, width);
    // eslint-disable-next-line no-control-regex
    const tokens = value.split(/(\x1b\[[0-9;]*m)/u);
    let visible = 0;
    let truncated = false;
    let result = '';
    for (const token of tokens) {
      if (!token) continue;
      // eslint-disable-next-line no-control-regex
      if (/^\x1b\[[0-9;]*m$/u.test(token)) {
        result += token;
        continue;
      }
      if (visible >= limit) {
        truncated = true;
        continue;
      }
      const remaining = limit - visible;
      if (token.length <= remaining) {
        result += token;
        visible += token.length;
      } else {
        const sliceLength = Math.max(0, remaining - 1);
        if (sliceLength > 0) {
          result += token.slice(0, sliceLength);
          visible += sliceLength;
        }
        result += '…';
        truncated = true;
        break;
      }
    }
    if (truncated && !result.endsWith(ESC.RESET)) {
      result += ESC.RESET;
    }
    return result;
  }
  getBuffer() {
    return this.buffer;
  }
  getCursor() {
    return this.cursor;
  }
  setBuffer(text, cursorPos) {
    this.buffer = text;
    // Validate cursor position to prevent out-of-bounds issues
    const requestedCursor = cursorPos ?? text.length;
    this.cursor = Math.max(0, Math.min(requestedCursor, text.length));
    this.inputRenderOffset = 0;
    this.updateSuggestions();
    this.renderPrompt();
    this.emitInputChange();
  }
  setSecretMode(enabled) {
    this.secretMode = enabled;
    this.renderPrompt();
  }
  clearBuffer() {
    this.cancelPlainPasteCapture();
    this.buffer = '';
    this.cursor = 0;
    this.inputRenderOffset = 0;
    this.suggestions = [];
    this.suggestionIndex = -1;
    this.renderPrompt();
    this.emitInputChange();
  }
  setModeStatus(status) {
    this.updateStatus(status);
  }

  /**
   * Show a compacting status with animated spinner (Claude Code style)
   * Uses ✻ character with animation to indicate context compaction in progress
   */
  showCompactingStatus(message) {
    this.statusMessage = message;
    if (!this.spinnerInterval) {
      this.spinnerInterval = setInterval(() => {
        this.spinnerFrame++;
        // Cycle activity phrase every ~4 seconds (50 frames at 80ms)
        if (this.spinnerFrame % 50 === 0) {
          this.activityPhraseIndex++;
        }
        this.renderPrompt();
      }, 80);
    }
    this.renderPrompt();
  }

  /**
   * Hide the compacting status and stop spinner animation
   */
  hideCompactingStatus() {
    if (this.spinnerInterval) {
      clearInterval(this.spinnerInterval);
      this.spinnerInterval = null;
    }
    this.statusMessage = null;
    this.renderPrompt();
  }
  emitPrompt(content) {
    this.pushPromptEvent(content);
  }

  /**
   * Display user prompt immediately in scrollback (Claude Code style)
   * Writes synchronously to ensure it appears ONCE in scrollback before status updates.
   * The prompt input area will then float below this and all subsequent events.
   */
  displayUserPrompt(text) {
    const normalized = text?.trim();
    if (!normalized) return;
    const now = Date.now();
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };

    // Add to event queue instead of writing directly to ensure proper rendering
    this.addEvent('prompt', normalized);
  }
  render() {
    this.renderPrompt();
  }
  delay(ms) {
    return new Promise(resolve => setTimeout(resolve, ms));
  }

  // ------------ Low-level helpers ------------

  write(data) {
    this.output.write(data);
  }
  pushPromptEvent(text) {
    const normalized = text?.trim();
    if (!normalized) {
      return;
    }
    const now = Date.now();
    if (this.lastPromptEvent && this.lastPromptEvent.text === normalized && now - this.lastPromptEvent.at < 1500) {
      return;
    }
    this.lastPromptEvent = {
      text: normalized,
      at: now
    };
    this.addEvent('prompt', normalized);
  }
  clearPromptArea() {
    const height = this.lastOverlay?.lines.length ?? this.promptHeight ?? 0;
    if (height === 0) return;

    // Cursor is at prompt row. Move up to top of overlay first.
    if (this.lastOverlay) {
      const linesToTop = this.lastOverlay.promptIndex;
      if (linesToTop > 0) {
        this.write(`\x1b[${linesToTop}A`);
      }
    }

    // Now at top, clear each line downward
    for (let i = 0; i < height; i++) {
      this.write('\r');
      this.write(ESC.CLEAR_LINE);
      if (i < height - 1) {
        this.write('\x1b[B');
      }
    }

    // Move back to top (where content should continue from)
    if (height > 1) {
      this.write(`\x1b[${height - 1}A`);
    }
    this.write('\r');
    this.lastOverlay = null;
    this.promptHeight = 0;
    this.lastOverlayHeight = 0;
    this.isPromptActive = false;
  }
  updateTerminalSize() {
    if (this.output.isTTY) {
      this.rows = this.output.rows || 24;
      this.cols = this.output.columns || 80;
    }
  }
}
exports.UnifiedUIRenderer = UnifiedUIRenderer;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJyZWFkbGluZSIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9ub2RlRXZlbnRzIiwiX25vZGVPcyIsIl90aGVtZSIsIl9vdXRwdXRNb2RlIiwiX2FuaW1hdGVkU3RhdHVzIiwiX2RlYnVnTG9nZ2VyIiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiRVNDIiwiSElERV9DVVJTT1IiLCJTSE9XX0NVUlNPUiIsIkNMRUFSX1NDUkVFTiIsIkNMRUFSX0xJTkUiLCJIT01FIiwiRU5BQkxFX0JSQUNLRVRFRF9QQVNURSIsIkRJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFIiwiVE8iLCJyb3ciLCJjb2wiLCJUT19DT0wiLCJFUkFTRV9ET1dOIiwiUkVWRVJTRSIsIlJFU0VUIiwiU0VUX1NDUk9MTF9SRUdJT04iLCJ0b3AiLCJib3R0b20iLCJSRVNFVF9TQ1JPTExfUkVHSU9OIiwiU0FWRV9DVVJTT1IiLCJSRVNUT1JFX0NVUlNPUiIsIk5FV0xJTkVfUExBQ0VIT0xERVIiLCJVbmlmaWVkVUlSZW5kZXJlciIsIkV2ZW50RW1pdHRlciIsInJvd3MiLCJjb2xzIiwibGFzdFJlbmRlcldpZHRoIiwiZXZlbnRRdWV1ZSIsImlzUHJvY2Vzc2luZ1F1ZXVlIiwiYnVmZmVyIiwiY3Vyc29yIiwiaGlzdG9yeSIsImhpc3RvcnlJbmRleCIsInN1Z2dlc3Rpb25zIiwic3VnZ2VzdGlvbkluZGV4IiwiYXZhaWxhYmxlQ29tbWFuZHMiLCJob3RrZXlzSW5Ub2dnbGVMaW5lIiwiU2V0IiwiY29sbGFwc2VkUGFzdGUiLCJtb2RlIiwibGFzdFRvb2xSZXN1bHQiLCJzdHJlYW1pbmdTdGFydFRpbWUiLCJzdGF0dXNNZXNzYWdlIiwic3RhdHVzT3ZlcnJpZGUiLCJzdGF0dXNTdHJlYW1pbmciLCJzdHJlYW1pbmdTcGlubmVyIiwidGhpbmtpbmdJbmRpY2F0b3IiLCJzcGlubmVyRnJhbWUiLCJzcGlubmVySW50ZXJ2YWwiLCJtYXhJbmxpbmVQYW5lbExpbmVzIiwiY29tcGFjdGluZ1N0YXR1c01lc3NhZ2UiLCJjb21wYWN0aW5nU3RhdHVzRnJhbWUiLCJjb21wYWN0aW5nU3RhdHVzSW50ZXJ2YWwiLCJjb21wYWN0aW5nU3Bpbm5lckZyYW1lcyIsImFjdGl2aXR5TWVzc2FnZSIsImFjdGl2aXR5UGhyYXNlSW5kZXgiLCJhY3Rpdml0eVN0YXJGcmFtZSIsImFjdGl2aXR5U3RhckZyYW1lcyIsInN0cmVhbWluZ1Rva2VucyIsImZ1bkFjdGl2aXR5UGhyYXNlcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdMaW5lcyIsIm1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyIsInRob3VnaHREZWR1cFdpbmRvd01zIiwibGFzdEN1cmF0ZWRUaG91Z2h0Iiwic3RhdHVzTWV0YSIsInRvZ2dsZVN0YXRlIiwidmVyaWZpY2F0aW9uRW5hYmxlZCIsImF1dG9Db250aW51ZUVuYWJsZWQiLCJjcml0aWNhbEFwcHJvdmFsTW9kZSIsImR1YWxSbEVuYWJsZWQiLCJkZWJ1Z0VuYWJsZWQiLCJjbGFtcEN1cnNvciIsIk1hdGgiLCJtYXgiLCJtaW4iLCJsZW5ndGgiLCJhcHBlbmRUb1Bhc3RlQnVmZmVyIiwidGV4dCIsInBhc3RlQnVmZmVyT3ZlcmZsb3ciLCJjdXJyZW50IiwicGFzdGVCdWZmZXIiLCJwbGFpblBhc3RlQnVmZmVyIiwicmVtYWluaW5nIiwibWF4UGFzdGVCdWZmZXJTaXplIiwidG9BZGQiLCJzbGljZSIsInNhbml0aXplUGFzdGVDb250ZW50IiwicmVwbGFjZSIsImZvcm1hdEhvdGtleSIsImNvbWJvIiwidHJpbSIsInRvVXBwZXJDYXNlIiwibGFzdFByb21wdEV2ZW50IiwicHJvbXB0SGVpZ2h0IiwibGFzdE92ZXJsYXlIZWlnaHQiLCJpbmxpbmVQYW5lbCIsImhhc0NvbnZlcnNhdGlvbkNvbnRlbnQiLCJpc1Byb21wdEFjdGl2ZSIsImlucHV0UmVuZGVyT2Zmc2V0IiwicGxhaW5QYXN0ZUlkbGVNcyIsInBsYWluUGFzdGVXaW5kb3dNcyIsInBsYWluUGFzdGVUcmlnZ2VyQ2hhcnMiLCJwbGFpblBhc3RlRWFybHlOZXdsaW5lQ2hhcnMiLCJjdXJzb3JWaXNpYmxlQ29sdW1uIiwiaW5CcmFja2V0ZWRQYXN0ZSIsImluUGxhaW5QYXN0ZSIsInBsYWluUGFzdGVUaW1lciIsInBhc3RlQnVyc3RXaW5kb3dTdGFydCIsInBhc3RlQnVyc3RDaGFyQ291bnQiLCJwbGFpblJlY2VudENodW5rcyIsInBlbmRpbmdJbnNlcnRCdWZmZXIiLCJwZW5kaW5nSW5zZXJ0VGltZXIiLCJwZW5kaW5nSW5zZXJ0RGVsYXlNcyIsImxhc3RSZW5kZXJlZEV2ZW50S2V5IiwibGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUiLCJoYXNSZW5kZXJlZFByb21wdCIsImhhc0V2ZXJSZW5kZXJlZE92ZXJsYXkiLCJsYXN0T3ZlcmxheSIsImFsbG93UHJvbXB0UmVuZGVyIiwicHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkIiwic2VjcmV0TW9kZSIsInBlbmRpbmdSZW5kZXIiLCJsYXN0UmVuZGVyVGltZSIsInJlbmRlclRocm90dGxlTXMiLCJyZW5kZXJUaHJvdHRsZVRpbWVyIiwiZGlzcG9zZWQiLCJib3VuZFJlc2l6ZUhhbmRsZXIiLCJib3VuZEtleXByZXNzSGFuZGxlciIsImlucHV0Q2FwdHVyZSIsImNvbnN0cnVjdG9yIiwib3V0cHV0IiwicHJvY2VzcyIsInN0ZG91dCIsImlucHV0Iiwic3RkaW4iLCJfb3B0aW9ucyIsImludGVyYWN0aXZlIiwiQm9vbGVhbiIsImlzVFRZIiwiZW52IiwicGxhaW5Nb2RlIiwiaXNQbGFpbk91dHB1dE1vZGUiLCJjb250ZXh0TWV0ZXIiLCJDb250ZXh0TWV0ZXIiLCJybCIsImNyZWF0ZUludGVyZmFjZSIsInRlcm1pbmFsIiwicHJvbXB0IiwidGFiU2l6ZSIsInNldFByb21wdCIsInVwZGF0ZVRlcm1pbmFsU2l6ZSIsInJlbmRlclByb21wdCIsIm9uIiwic2V0dXBJbnB1dEhhbmRsZXJzIiwiaW5pdGlhbGl6ZSIsImNsZWFyUHJvbXB0QXJlYSIsIndyaXRlIiwiY2xlYW51cCIsImNhbmNlbElucHV0Q2FwdHVyZSIsIkVycm9yIiwiY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUiLCJjbGVhclRpbWVvdXQiLCJjbGVhckludGVydmFsIiwic3RvcCIsImRpc3Bvc2UiLCJkaXNwb3NlQW5pbWF0aW9ucyIsInJlbW92ZUxpc3RlbmVyIiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwiY2xvc2UiLCJzZXRSYXdNb2RlIiwic3VzcGVuZFByb21wdFJlbmRlcmluZyIsInJlc3VtZVByb21wdFJlbmRlcmluZyIsInJlbmRlciIsImVtaXRLZXlwcmVzc0V2ZW50cyIsInN0ciIsImtleSIsImhhbmRsZUtleXByZXNzIiwiZW1pdElucHV0Q2hhbmdlIiwicGF5bG9hZCIsImVtaXQiLCJub3JtYWxpemVkS2V5IiwicGFyc2VFc2NhcGVTZXF1ZW5jZSIsImtleUZvclBhc3RlIiwic2VxdWVuY2UiLCJoYW5kbGVCcmFja2V0ZWRQYXN0ZSIsImhhbmRsZVBsYWluUGFzdGUiLCJjdHJsIiwibmFtZSIsImNsZWFyQnVmZmVyIiwibWFjT3B0aW9uQ2hhcnMiLCJsZXR0ZXIiLCJpc0N0cmxTaGlmdCIsImxvd2VyTGV0dGVyIiwidG9Mb3dlckNhc2UiLCJ1cHBlckxldHRlciIsInNoaWZ0IiwibWV0YSIsInNlcSIsInRlc3QiLCJoYWRCdWZmZXIiLCJleHBhbmRDb2xsYXBzZWRQYXN0ZSIsImFwcGx5U3VnZ2VzdGlvbiIsInN0YXJ0c1dpdGgiLCJzYWZlSW5kZXgiLCJjb21tYW5kIiwic3VibWl0VGV4dCIsInVwZGF0ZVN1Z2dlc3Rpb25zIiwiZW5zdXJlQ3Vyc29yVmlzaWJsZSIsIm5hdmlnYXRlU3VnZ2VzdGlvbnMiLCJxdWV1ZVBlbmRpbmdJbnNlcnQiLCJtYXhXaWR0aCIsInNhZmVXaWR0aCIsIm1hcCIsInNldFRpbWVvdXQiLCJjb21taXRQZW5kaW5nSW5zZXJ0IiwiaW5zZXJ0VGV4dCIsImNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUiLCJjb25zdW1lZCIsInBlbmRpbmciLCJjb21taXRQYXN0ZUJ1ZmZlciIsInNhbml0aXplZCIsImNvbnRlbnQiLCJsaW5lcyIsInNwbGl0Iiwid2FzVHJ1bmNhdGVkIiwiY2hhcnMiLCJyZXNldFBsYWluUGFzdGVCdXJzdCIsInBydW5lUmVjZW50UGxhaW5DaHVua3MiLCJjaHVuayIsIm5vdyIsIkRhdGUiLCJ0cmFja1BsYWluUGFzdGVCdXJzdCIsInJlY29yZFJlY2VudFBsYWluQ2h1bmsiLCJjaHVua011bHRpcGxlIiwiaGFzTmV3bGluZSIsImJ1cnN0QWN0aXZlIiwiYnVyc3RUcmlnZ2VyIiwiaGFzUmVjZW50Tm9uTmV3bGluZSIsInNvbWUiLCJlbnRyeSIsImVhcmx5TmV3bGluZVRyaWdnZXIiLCJuZXdsaW5lVHJpZ2dlciIsImxvb2tzTGlrZVBhc3RlIiwiY2h1bmtBbHJlYWR5Q2FwdHVyZWQiLCJyZWNsYWltZWQiLCJyZWNsYWltUmVjZW50UGxhaW5DaHVua3MiLCJjb21iaW5lZCIsInJlbW92ZUNvdW50Iiwic3VmZml4IiwiZW5kc1dpdGgiLCJzY2hlZHVsZVBsYWluUGFzdGVDb21taXQiLCJhdCIsIndpbmRvd1N0YXJ0IiwicHVzaCIsImZpbHRlciIsImpvaW4iLCJmaW5hbGl6ZVBsYWluUGFzdGUiLCJzaG91bGRUcmltIiwib3B0aW9ucyIsIm5vcm1hbGl6ZWRDYXB0dXJlIiwiYWxsb3dFbXB0eSIsInJlc29sdmVyIiwicmVzZXRTdWdnZXN0aW9ucyIsInJlc29sdmUiLCJub3JtYWxpemVkIiwiZGlzcGxheVVzZXJQcm9tcHQiLCJmaXJzdFNwYWNlIiwiaW5kZXhPZiIsImhhc0FyZ1RleHQiLCJjdXJzb3JTbGljZSIsImNvbW1hbmRTbGljZSIsImZhbGxiYWNrU2xpY2UiLCJwYXJ0aWFsIiwidHJpbUVuZCIsInByZXZpb3VzIiwiY21kIiwiaWR4IiwiZmluZEluZGV4IiwicyIsInNldEF2YWlsYWJsZUNvbW1hbmRzIiwiY29tbWFuZHMiLCJzdWJtaXQiLCJzZWxlY3RlZCIsImRpcmVjdGlvbiIsImN1cnJlbnRJbmRleCIsIm5leHQiLCJjbGFtcGVkIiwiYWRkRXZlbnQiLCJ0eXBlIiwibG9nRGVidWciLCJub3JtYWxpemVFdmVudFR5cGUiLCJmb3JtYXR0ZWQiLCJmb3JtYXRDb250ZW50IiwicmF3VHlwZSIsInRpbWVzdGFtcCIsImV2ZW50IiwiaW5zZXJ0SW5kZXgiLCJzcGxpY2UiLCJxdWV1ZU1pY3JvdGFzayIsInByb2Nlc3NRdWV1ZSIsInJlbmRlclByb21wdE92ZXJsYXkiLCJpbW1lZGlhdGUiLCJyZW5kZXJQcm9tcHRJbW1lZGlhdGUiLCJjb2FsZXNjZWQiLCJjb2FsZXNjZUFkamFjZW50VGV4dEV2ZW50cyIsInJlbmRlckV2ZW50IiwiZXJyb3IiLCJtZXNzYWdlIiwiZGVsYXkiLCJpc01lcmdlYWJsZSIsInRhcmdldCIsImlzQ29tcGFjdGVkIiwibmVlZHNTZXBhcmF0b3IiLCJmbHVzaEV2ZW50cyIsInRpbWVvdXRNcyIsInN0YXJ0IiwiZm9ybWF0dGVkUGxhaW4iLCJzaWduYXR1cmUiLCJsaW5lIiwidGhlbWUiLCJwcmltYXJ5IiwiaXNHYXJiYWdlT3V0cHV0IiwiY3VyYXRlZCIsImN1cmF0ZVJlYXNvbmluZ0NvbnRlbnQiLCJzaG91bGRSZW5kZXJUaG91Z2h0IiwiZm9ybWF0VGhpbmtpbmdCbG9jayIsImZvcm1hdENvbXBhY3RUb29sQ2FsbCIsImZvcm1hdENvbXBhY3RUb29sUmVzdWx0Iiwid3JhcEJ1bGxldFRleHQiLCJsYWJlbCIsImxhYmVsQ29sb3IiLCJ3YXJuaW5nIiwiaW5mbyIsImlzRXJyb3IiLCJ1bmRlZmluZWQiLCJpbmNsdWRlcyIsImFscGhhQ291bnQiLCJtYXRjaCIsInRvdGFsQ291bnQiLCJsaW1pdGVkIiwibWF4U2VnbWVudHMiLCJzZWdtZW50cyIsImZsYXRNYXAiLCJzZWVuIiwiZGVkdXBlZCIsInNlZ21lbnQiLCJub3JtYWxpemVkU2VnbWVudCIsImFkZCIsInByaW9yaXRpemVkIiwicHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzIiwibGltaXRlZFNlbGVjdGlvbiIsImJ1bGxldGVkIiwiZW5zdXJlUmVhc29uaW5nQnVsbGV0IiwibG9va3NTdHJ1Y3R1cmVkVGhvdWdodCIsInNjb3JlZCIsImluZGV4Iiwic2NvcmUiLCJyZWFzb25pbmdTaWduYWxTY29yZSIsImhhc1NpZ25hbCIsIml0ZW0iLCJzb3J0IiwiYSIsImIiLCJsb3dlciIsImFjdGlvbktleXdvcmRzIiwia2V5d29yZCIsImZvcm1hdENsYXVkZUNvZGVCbG9jayIsImJ1bGxldCIsInJlc3VsdCIsImxpbmVJZHgiLCJ3b3JkcyIsImN1cnJlbnRMaW5lIiwid29yZCIsInByZWZpeCIsInRyaW1TdGFydCIsImZvcm1hdFRvb2xDYWxsIiwibmFtZU1hdGNoIiwidG9vbE5hbWUiLCJhcmdzU3RyIiwicHJlZml4TGVuIiwiaW5kZW50IiwicmVwZWF0IiwiYXJncyIsInBhcnNlVG9vbEFyZ3MiLCJhcmciLCJhcmdUZXh0IiwidWkiLCJtdXRlZCIsImZvcm1hdEFyZ1ZhbHVlIiwidmFsdWUiLCJzZXBhcmF0b3IiLCJ0ZXN0TGluZSIsInN0cmlwQW5zaSIsInJlZ2V4IiwiZXhlYyIsImlzUXVvdGVkIiwiaW5uZXIiLCJtYXhMZW4iLCJ0cnVuY2F0ZWQiLCJmb3JtYXRUb29sUmVzdWx0Iiwic3VtbWFyeU1hdGNoIiwicHJldmlldyIsInBhcmFtcyIsInBhcnNlVG9vbFBhcmFtcyIsImZvcm1hdFRvb2xQYXJhbXMiLCJmaXJzdFBhcmFtIiwicGFyYW0iLCJjb2xvcmVkVmFsdWUiLCJjb2xvclBhcmFtVmFsdWUiLCJwYXJhbVN0ciIsInBsYWluTGVuZ3RoIiwibG93ZXJLZXkiLCJleHRyYWN0VG9vbFN1bW1hcnkiLCJ0b29sIiwicGF0aE1hdGNoIiwicGF0aCIsInNob3J0IiwiY21kTWF0Y2giLCJsaW5lTWF0Y2giLCJmaWxlTWF0Y2giLCJyZWFkTWF0Y2giLCJzdW1tYXJ5IiwiY29sb3JlZFN1bW1hcnkiLCJjb2xvclJlc3VsdFN1bW1hcnkiLCJzdWNjZXNzIiwiZm9ybWF0Q29tcGFjdFJlc3BvbnNlIiwiY2xlYW5lZCIsImF2YWlsYWJsZVdpZHRoIiwibGFiZWxUZXh0IiwiYnVsbGV0UHJlZml4IiwidmlzaWJsZUxlbmd0aCIsImZpcnN0Tm9uRW1wdHkiLCJyYXdMaW5lIiwiY2FuZGlkYXRlIiwicHJlZml4TGVuZ3RoIiwid3JhcFRleHRUb1dpZHRoIiwid2lkdGgiLCJmb3JtYXRTdHJlYW1pbmdFbGFwc2VkIiwiZWxhcHNlZCIsImZsb29yIiwibWlucyIsInNlY3MiLCJmb3JtYXRDb21wYWN0QmxvY2siLCJwYWRkaW5nIiwibGVmdFBhZCIsInJpZ2h0UGFkIiwiY2VpbCIsImFkZENvbXBhY3RCbG9jayIsImZvcm1hdHRlZENvbnRlbnQiLCJleHBhbmRMYXN0VG9vbFJlc3VsdCIsInJlbmRlcmVkIiwic2V0TW9kZSIsIndhc1N0cmVhbWluZyIsInN0YXJ0U3Bpbm5lckFuaW1hdGlvbiIsInN0b3BTcGlubmVyQW5pbWF0aW9uIiwic2V0SW50ZXJ2YWwiLCJzcGlubmVyRnJhbWVzIiwiYnJhaWxsZSIsInNldEFjdGl2aXR5IiwidXBkYXRlU3RyZWFtaW5nVG9rZW5zIiwidG9rZW5zIiwiZm9ybWF0VG9rZW5Db3VudCIsIlN0cmluZyIsInRvRml4ZWQiLCJyb3VuZCIsImdldE1vZGUiLCJ1cGRhdGVTdGF0dXMiLCJ1cGRhdGVTdGF0dXNCdW5kbGUiLCJtYWluIiwib3ZlcnJpZGUiLCJzdHJlYW1pbmciLCJzdGF0dXMiLCJwcmV2U3RyZWFtaW5nIiwiY2hhbmdlZCIsIm1haW5DaGFuZ2VkIiwib3ZlcnJpZGVDaGFuZ2VkIiwic3RyZWFtaW5nQ2hhbmdlZCIsInN0cmVhbWluZ0ludHJvZHVjZSIsInN0cmVhbWluZ0NsZWFyZWQiLCJvbmx5U3RyZWFtaW5nQ2hhbmdlZCIsInNraXBTdHJlYW1pbmdSZW5kZXIiLCJzaG91bGRSZW5kZXIiLCJ1cGRhdGVTdGF0dXNNZXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsInVwZGF0ZU1vZGVUb2dnbGVzIiwic3RhdGUiLCJ2ZXJpZmljYXRpb25Ib3RrZXkiLCJ0aGlua2luZ0hvdGtleSIsImNyaXRpY2FsQXBwcm92YWxIb3RrZXkiLCJhdXRvQ29udGludWVIb3RrZXkiLCJkdWFsUmxIb3RrZXkiLCJkZWJ1Z0hvdGtleSIsImNsZWFyIiwic2V0SW5saW5lUGFuZWwiLCJoYXNDb250ZW50IiwibGltaXRJbmxpbmVQYW5lbCIsInN1cHBvcnRzSW5saW5lUGFuZWwiLCJjbGVhcklubGluZVBhbmVsIiwibWF4TGluZXMiLCJvdmVyZmxvdyIsImluZGljYXRvciIsInRhaWxDb3VudCIsInRhaWwiLCJvdmVybGF5IiwiYnVpbGRPdmVybGF5TGluZXMiLCJyZW5kZXJlZExpbmVzIiwidHJ1bmNhdGVMaW5lIiwicHJvbXB0SW5kZXgiLCJoZWlnaHQiLCJsaW5lc1RvVG9wIiwiZXh0cmFMaW5lcyIsIm1vdmVCYWNrVXAiLCJwcm9tcHRDb2wiLCJsaW5lc1RvTW92ZVVwIiwiZGl2aWRlciIsImZhbGxiYWNrQWN0aXZpdHkiLCJyYXciLCJzcGlubmVyQ2hhcnMiLCJzcGlubmVyQ2hhciIsInN0YXJDaGFyIiwic3Bpbm5lckRlY29yYXRlZCIsImFjY2VudCIsImdlbmVyaWNBY3Rpdml0aWVzIiwiZGlzcGxheUFjdGl2aXR5IiwibmVlZHNFbGxpcHNpcyIsInBhcnRzIiwiYWN0aXZpdHlMaW5lIiwid3JhcHBlZCIsIndyYXBPdmVybGF5TGluZSIsImlucHV0TGluZSIsImJ1aWxkSW5wdXRMaW5lIiwiaW5wdXRMaW5lcyIsInBhbmVsTGluZSIsInN1Z2dlc3Rpb24iLCJpc0FjdGl2ZSIsIm1hcmtlciIsImNtZFRleHQiLCJkZXNjVGV4dCIsImRlc2NyaXB0aW9uIiwibW9kZWxDb250ZXh0TGluZSIsImJ1aWxkTW9kZWxDb250ZXh0TGluZSIsImNocm9tZUxpbmVzIiwiYnVpbGRDaHJvbWVMaW5lcyIsImNocm9tZUxpbmUiLCJ0b2dnbGVMaW5lcyIsImJ1aWxkSW5saW5lVG9nZ2xlTGluZSIsInRvZ2dsZUxpbmUiLCJsZWdlbmRMaW5lcyIsImJ1aWxkVG9nZ2xlTGVnZW5kIiwibGVnZW5kIiwibW9kZWwiLCJwcm92aWRlciIsImNvbnRleHRQZXJjZW50IiwidXNlZCIsImJhcldpZHRoIiwiZmlsbGVkIiwiZW1wdHkiLCJiYXJDb2xvciIsImJhciIsImF1dG9Db250aW51ZUFjdGl2ZSIsInZlcmlmaWNhdGlvbkFjdGl2ZSIsImFwcHJvdmFsTW9kZSIsInRoaW5raW5nTGFiZWwiLCJ0aGlua2luZ01vZGVMYWJlbCIsInRvZ2dsZXMiLCJybE9uIiwicmxJY29uIiwicmxTdGF0dXMiLCJybEV4cGxhaW4iLCJjb250SWNvbiIsImNvbnRTdGF0dXMiLCJjb250RXhwbGFpbiIsInZlcmlmeUljb24iLCJ2ZXJpZnlTdGF0dXMiLCJ2ZXJpZnlFeHBsYWluIiwiYXBwckljb24iLCJhcHByU3RhdHVzIiwiYXBwckV4cGxhaW4iLCJ0aGlua2luZ0lzRGVlcCIsInRoaW5rSWNvbiIsInRoaW5rU3RhdHVzIiwidGhpbmtFeHBsYWluIiwiZGVidWdBY3RpdmUiLCJkZWJ1Z0ljb24iLCJkZWJ1Z1N0YXR1cyIsImRlYnVnRXhwbGFpbiIsIndyYXBTZWdtZW50cyIsInN0YXR1c0xpbmVzIiwiYnVpbGRTdGF0dXNCbG9jayIsIm1ldGFMaW5lcyIsImJ1aWxkTWV0YUJsb2NrIiwiYWJicmV2aWF0ZVBhdGgiLCJwYXRoVmFsdWUiLCJob21lIiwiaG9tZWRpciIsInN0YXR1c0xhYmVsIiwiY29tcG9zZVN0YXR1c0xhYmVsIiwiYXBwbHlUb25lIiwidG9uZSIsInNlc3Npb25UaW1lIiwidXBkYXRlIiwicHJvZmlsZSIsImZvcm1hdE1ldGFTZWdtZW50Iiwid29ya3NwYWNlIiwiZGlyZWN0b3J5Iiwid3JpdGVzIiwidG9vbFN1bW1hcnkiLCJzZXNzaW9uTGFiZWwiLCJ2ZXJzaW9uIiwic3RhdHVzZXMiLCJhcnIiLCJjb2xvcml6ZXIiLCJidWlsZENvbnRyb2xMaW5lcyIsImJ1aWxkVG9nZ2xlTGluZSIsInNob3J0Y3V0TGluZSIsImJ1aWxkU2hvcnRjdXRMaW5lIiwiYnVpbGRDb21wYWN0VG9nZ2xlTGluZSIsImVkaXRJY29uIiwiZWRpdFN0YXRlIiwiY3ljbGVIaW50IiwiYWRkVG9nZ2xlIiwiaG90a2V5IiwiYXV0b1ZlcmlmeUFjdGl2ZSIsInZlcmlmeVZhbHVlIiwiYXBwcm92YWxBY3RpdmUiLCJ0aGlua2luZ0xhYmVsUmF3IiwidGhpbmtpbmdBY3RpdmUiLCJkdWFsUmxBY3RpdmUiLCJtb2RlVmFsdWUiLCJidWlsZExpbmUiLCJpbmNsdWRlSG90a2V5cyIsInRvZ2dsZSIsInN0YXRlVGV4dCIsImhvdGtleVRleHQiLCJhZGRIb3RrZXkiLCJwcm9tcHRXaWR0aCIsImNvbnRpbnVhdGlvbkluZGVudCIsImNvbnRpbnVhdGlvbldpZHRoIiwicmF3QnVmZmVyIiwiYnVmZmVyTGluZXMiLCJ0b3RhbENoYXJzIiwiY3Vyc29yTGluZSIsImN1cnNvckNvbCIsImZvdW5kQ3Vyc29yIiwibGluZUluZGV4IiwiaXNGaXJzdExvZ2ljYWxMaW5lIiwibGluZVN0YXJ0Q2hhciIsImZpcnN0TGluZVdpZHRoIiwiY29udExpbmVXaWR0aCIsImlzRmlyc3REaXNwbGF5TGluZSIsImRpc3BsYXlMaW5lIiwiY2h1bmtTdGFydCIsImNodW5rRW5kIiwib2Zmc2V0SW5DaHVuayIsImxhc3RMaW5lIiwidGFyZ2V0TGluZSIsInZpc2libGVQYXJ0IiwiY3Vyc29yUG9zIiwiYmVmb3JlIiwiY2hhckF0IiwiYWZ0ZXIiLCJ0ZXh0UGFydCIsImJ1aWxkSW5wdXRXaW5kb3ciLCJhdmFpbGFibGUiLCJjdXJzb3JJbmRleCIsIm9mZnNldCIsIm1heE9mZnNldCIsIndpbmRvdyIsImRpc3BsYXkiLCJjaGFyIiwiY3Vyc29ySW5XaW5kb3ciLCJjYXB0dXJlSW5wdXQiLCJQcm9taXNlIiwicmVqZWN0IiwicmVzZXRCdWZmZXIiLCJyZWFzb24iLCJjYXB0dXJlIiwibGltaXQiLCJ2aXNpYmxlIiwidG9rZW4iLCJzbGljZUxlbmd0aCIsImdldEJ1ZmZlciIsImdldEN1cnNvciIsInNldEJ1ZmZlciIsInJlcXVlc3RlZEN1cnNvciIsInNldFNlY3JldE1vZGUiLCJlbmFibGVkIiwic2V0TW9kZVN0YXR1cyIsInNob3dDb21wYWN0aW5nU3RhdHVzIiwiaGlkZUNvbXBhY3RpbmdTdGF0dXMiLCJlbWl0UHJvbXB0IiwicHVzaFByb21wdEV2ZW50IiwibXMiLCJkYXRhIiwiY29sdW1ucyIsImV4cG9ydHMiXSwic291cmNlcyI6WyJVbmlmaWVkVUlSZW5kZXJlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFVuaWZpZWRVSVJlbmRlcmVyIC0gQ2xhdWRlIENvZGUgc3R5bGUgbWluaW1hbGlzdCB0ZXJtaW5hbCBVSS5cbiAqXG4gKiBHb2FsczpcbiAqIC0gU2luZ2xlIGV2ZW50IHBpcGVsaW5lIGZvciBldmVyeXRoaW5nIChwcm9tcHQg4oaSIHRob3VnaHQg4oaSIHRvb2wvYnVpbGQvdGVzdCDihpIgcmVzcG9uc2UpLlxuICogLSBQaW5uZWQgc3RhdHVzL21ldGEgb25seSAobmV2ZXIgaW4gc2Nyb2xsYmFjaykuXG4gKiAtIFNjcm9sbGJhY2sgb25seSBzaG93cyBldmVudHM7IG5vIGR1cGxpY2F0ZSBzdGF0dXMgbGlrZSBcIldvcmtpbmcgb24geW91ciByZXF1ZXN0XCIgb3IgXCJSZWFkeSBmb3IgcHJvbXB0c1wiLlxuICogLSBTdHJlYW1pbmc6IGZpcnN0IGNodW5rIHNldHMgYSBvbmUtbGluZSBiYW5uZXI7IHJlbWFpbmRlciBzdHJlYW1zIG5hdHVyYWxseSAob3B0aW9uYWwpLlxuICogLSBDb2xsYXBzaWJsZS1saWtlIHN1bW1hcmllczogd2UgZm9ybWF0IGEgY29tcGFjdCBoZWFkaW5nIHdpdGggYW4gZWxsaXBzaXMgaW5kaWNhdG9yLCBidXQgYXZvaWQgY3RybCtvIGhpbnRzLlxuICovXG5cbmltcG9ydCAqIGFzIHJlYWRsaW5lIGZyb20gJ25vZGU6cmVhZGxpbmUnO1xuaW1wb3J0IHsgRXZlbnRFbWl0dGVyIH0gZnJvbSAnbm9kZTpldmVudHMnO1xuaW1wb3J0IHsgaG9tZWRpciB9IGZyb20gJ25vZGU6b3MnO1xuaW1wb3J0IHsgdGhlbWUsIHNwaW5uZXJGcmFtZXMgfSBmcm9tICcuL3RoZW1lLmpzJztcbmltcG9ydCB7IGlzUGxhaW5PdXRwdXRNb2RlIH0gZnJvbSAnLi9vdXRwdXRNb2RlLmpzJztcbmltcG9ydCB7IEFuaW1hdGVkU3Bpbm5lciwgVGhpbmtpbmdJbmRpY2F0b3IsIENvbnRleHRNZXRlciwgZGlzcG9zZUFuaW1hdGlvbnMgfSBmcm9tICcuL2FuaW1hdGVkU3RhdHVzLmpzJztcbmltcG9ydCB7IGxvZ0RlYnVnIH0gZnJvbSAnLi4vdXRpbHMvZGVidWdMb2dnZXIuanMnO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbW1hbmRTdWdnZXN0aW9uIHtcbiAgY29tbWFuZDogc3RyaW5nO1xuICBkZXNjcmlwdGlvbjogc3RyaW5nO1xuICBjYXRlZ29yeT86IHN0cmluZztcbn1cblxudHlwZSBDYW5vbmljYWxFdmVudFR5cGUgPSAncHJvbXB0JyB8ICd0aG91Z2h0JyB8ICdzdHJlYW0nIHwgJ3Rvb2wnIHwgJ3Rvb2wtcmVzdWx0JyB8ICdidWlsZCcgfCAndGVzdCcgfCAncmVzcG9uc2UnO1xuXG5leHBvcnQgdHlwZSBSZW5kZXJlckV2ZW50VHlwZSA9XG4gIHwgQ2Fub25pY2FsRXZlbnRUeXBlXG4gIHwgJ3JhdydcbiAgfCAnYmFubmVyJ1xuICB8ICdlcnJvcidcbiAgfCAnc3RyZWFtaW5nJ1xuICB8ICd0b29sLWNhbGwnXG4gIHwgJ3Rvb2wtcmVzdWx0JztcblxudHlwZSBVSUV2ZW50ID0ge1xuICB0eXBlOiBDYW5vbmljYWxFdmVudFR5cGU7XG4gIHJhd1R5cGU6IFJlbmRlcmVyRXZlbnRUeXBlO1xuICBjb250ZW50OiBzdHJpbmc7XG4gIHRpbWVzdGFtcDogbnVtYmVyO1xuICBpc0NvbXBhY3RlZD86IGJvb2xlYW47IC8vIENsYXVkZSBDb2RlIHN0eWxlIGNvbXBhY3QgY29udmVyc2F0aW9uIGJsb2NrXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9ucyB7XG4gIGRlYnVnPzogYm9vbGVhbjtcbn1cblxudHlwZSBJbnB1dENoYW5nZUV2ZW50ID0ge1xuICB0ZXh0OiBzdHJpbmc7XG4gIGN1cnNvcjogbnVtYmVyO1xufTtcblxuaW50ZXJmYWNlIE1vZGVUb2dnbGVTdGF0ZSB7XG4gIHZlcmlmaWNhdGlvbkVuYWJsZWQ6IGJvb2xlYW47XG4gIHZlcmlmaWNhdGlvbkhvdGtleT86IHN0cmluZztcbiAgYXV0b0NvbnRpbnVlRW5hYmxlZD86IGJvb2xlYW47XG4gIGF1dG9Db250aW51ZUhvdGtleT86IHN0cmluZztcbiAgdGhpbmtpbmdNb2RlTGFiZWw/OiBzdHJpbmcgfCBudWxsO1xuICB0aGlua2luZ0hvdGtleT86IHN0cmluZztcbiAgY3JpdGljYWxBcHByb3ZhbE1vZGU/OiAnYXV0bycgfCAnYXBwcm92YWwnO1xuICBjcml0aWNhbEFwcHJvdmFsSG90a2V5Pzogc3RyaW5nO1xuICBkdWFsUmxFbmFibGVkPzogYm9vbGVhbjtcbiAgZHVhbFJsSG90a2V5Pzogc3RyaW5nO1xuICBkZWJ1Z0VuYWJsZWQ/OiBib29sZWFuO1xuICBkZWJ1Z0hvdGtleT86IHN0cmluZztcbn1cblxuY29uc3QgRVNDID0ge1xuICBISURFX0NVUlNPUjogJ1xceDFiWz8yNWwnLFxuICBTSE9XX0NVUlNPUjogJ1xceDFiWz8yNWgnLFxuICBDTEVBUl9TQ1JFRU46ICdcXHgxYlsySicsXG4gIENMRUFSX0xJTkU6ICdcXHgxYlsySycsXG4gIEhPTUU6ICdcXHgxYltIJyxcbiAgRU5BQkxFX0JSQUNLRVRFRF9QQVNURTogJ1xceDFiWz8yMDA0aCcsXG4gIERJU0FCTEVfQlJBQ0tFVEVEX1BBU1RFOiAnXFx4MWJbPzIwMDRsJyxcbiAgVE86IChyb3c6IG51bWJlciwgY29sOiBudW1iZXIpID0+IGBcXHgxYlske3Jvd307JHtjb2x9SGAsXG4gIFRPX0NPTDogKGNvbDogbnVtYmVyKSA9PiBgXFx4MWJbJHtjb2x9R2AsXG4gIEVSQVNFX0RPV046ICdcXHgxYltKJyxcbiAgUkVWRVJTRTogJ1xceDFiWzdtJyxcbiAgUkVTRVQ6ICdcXHgxYlswbScsXG4gIC8vIFNjcm9sbCByZWdpb24gY29udHJvbCAtIENSSVRJQ0FMIGZvciBmaXhlZCBib3R0b20gb3ZlcmxheVxuICBTRVRfU0NST0xMX1JFR0lPTjogKHRvcDogbnVtYmVyLCBib3R0b206IG51bWJlcikgPT4gYFxceDFiWyR7dG9wfTske2JvdHRvbX1yYCxcbiAgUkVTRVRfU0NST0xMX1JFR0lPTjogJ1xceDFiW3InLFxuICBTQVZFX0NVUlNPUjogJ1xceDFiW3MnLFxuICBSRVNUT1JFX0NVUlNPUjogJ1xceDFiW3UnLFxufSBhcyBjb25zdDtcblxuY29uc3QgTkVXTElORV9QTEFDRUhPTERFUiA9ICfihrUnO1xuXG5leHBvcnQgY2xhc3MgVW5pZmllZFVJUmVuZGVyZXIgZXh0ZW5kcyBFdmVudEVtaXR0ZXIge1xuICBwcml2YXRlIHJlYWRvbmx5IG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtO1xuICBwcml2YXRlIHJlYWRvbmx5IGlucHV0OiBOb2RlSlMuUmVhZFN0cmVhbTtcbiAgcHJpdmF0ZSByZWFkb25seSBybDogcmVhZGxpbmUuSW50ZXJmYWNlO1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluTW9kZTogYm9vbGVhbjtcbiAgcHJpdmF0ZSByZWFkb25seSBpbnRlcmFjdGl2ZTogYm9vbGVhbjtcblxuICBwcml2YXRlIHJvd3MgPSAyNDtcbiAgcHJpdmF0ZSBjb2xzID0gODA7XG4gIHByaXZhdGUgbGFzdFJlbmRlcldpZHRoOiBudW1iZXIgfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIGV2ZW50UXVldWU6IFVJRXZlbnRbXSA9IFtdO1xuICBwcml2YXRlIGlzUHJvY2Vzc2luZ1F1ZXVlID0gZmFsc2U7XG5cbiAgcHJpdmF0ZSBidWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBjdXJzb3IgPSAwO1xuICBwcml2YXRlIGhpc3Rvcnk6IHN0cmluZ1tdID0gW107XG4gIHByaXZhdGUgaGlzdG9yeUluZGV4ID0gLTE7XG4gIHByaXZhdGUgc3VnZ2VzdGlvbnM6IHsgY29tbWFuZDogc3RyaW5nOyBkZXNjcmlwdGlvbjogc3RyaW5nOyBjYXRlZ29yeT86IHN0cmluZyB9W10gPSBbXTtcbiAgcHJpdmF0ZSBzdWdnZXN0aW9uSW5kZXggPSAtMTtcbiAgcHJpdmF0ZSBhdmFpbGFibGVDb21tYW5kczogdHlwZW9mIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgcHJpdmF0ZSBob3RrZXlzSW5Ub2dnbGVMaW5lOiBTZXQ8c3RyaW5nPiA9IG5ldyBTZXQoKTtcbiAgcHJpdmF0ZSBjb2xsYXBzZWRQYXN0ZTogeyB0ZXh0OiBzdHJpbmc7IGxpbmVzOiBudW1iZXI7IGNoYXJzOiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuXG4gIHByaXZhdGUgbW9kZTogJ2lkbGUnIHwgJ3N0cmVhbWluZycgPSAnaWRsZSc7XG4gIHByaXZhdGUgbGFzdFRvb2xSZXN1bHQ6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0cmVhbWluZ1N0YXJ0VGltZTogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzTWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgc3RhdHVzT3ZlcnJpZGU6IHN0cmluZyB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHN0YXR1c1N0cmVhbWluZzogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG5cbiAgLy8gQW5pbWF0ZWQgVUkgY29tcG9uZW50c1xuICBwcml2YXRlIHN0cmVhbWluZ1NwaW5uZXI6IEFuaW1hdGVkU3Bpbm5lciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHRoaW5raW5nSW5kaWNhdG9yOiBUaGlua2luZ0luZGljYXRvciB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGNvbnRleHRNZXRlcjogQ29udGV4dE1ldGVyO1xuICBwcml2YXRlIHNwaW5uZXJGcmFtZSA9IDA7XG4gIHByaXZhdGUgc3Bpbm5lckludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IG1heElubGluZVBhbmVsTGluZXMgPSAxMjtcblxuICAvLyBDb21wYWN0aW5nIHN0YXR1cyBhbmltYXRpb25cbiAgcHJpdmF0ZSBjb21wYWN0aW5nU3RhdHVzTWVzc2FnZSA9ICcnO1xuICBwcml2YXRlIGNvbXBhY3RpbmdTdGF0dXNGcmFtZSA9IDA7XG4gIHByaXZhdGUgY29tcGFjdGluZ1N0YXR1c0ludGVydmFsOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHJlYWRvbmx5IGNvbXBhY3RpbmdTcGlubmVyRnJhbWVzID0gWyfinLsnLCAn4py8JywgJ+KcuycsICfinLonXTtcblxuICAvLyBBbmltYXRlZCBhY3Rpdml0eSBsaW5lIChlLmcuLCBcIuKcsyBSdW1pbmF0aW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDM0cyDCtyDihpExLjJrKVwiKVxuICBwcml2YXRlIGFjdGl2aXR5TWVzc2FnZTogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYWN0aXZpdHlQaHJhc2VJbmRleCA9IDA7XG4gIHByaXZhdGUgYWN0aXZpdHlTdGFyRnJhbWUgPSAwO1xuICBwcml2YXRlIHJlYWRvbmx5IGFjdGl2aXR5U3RhckZyYW1lcyA9IFsn4pyzJywgJ+KctCcsICfinLUnLCAn4py2JywgJ+KctycsICfinLgnXTtcbiAgLy8gVG9rZW4gY291bnQgZHVyaW5nIHN0cmVhbWluZ1xuICBwcml2YXRlIHN0cmVhbWluZ1Rva2VucyA9IDA7XG4gIC8vIFVzZXItZnJpZW5kbHkgYWN0aXZpdHkgcGhyYXNlcyAoY2xlYW4sIHByb2Zlc3Npb25hbClcbiAgcHJpdmF0ZSByZWFkb25seSBmdW5BY3Rpdml0eVBocmFzZXMgPSBbXG4gICAgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnLCAnQW5hbHl6aW5nJywgJ1dvcmtpbmcnLCAnUHJlcGFyaW5nJyxcbiAgXTtcbiAgcHJpdmF0ZSByZWFkb25seSBtYXhDdXJhdGVkUmVhc29uaW5nTGluZXMgPSA4O1xuICBwcml2YXRlIHJlYWRvbmx5IG1heEN1cmF0ZWRSZWFzb25pbmdDaGFycyA9IDE4MDA7XG4gIHByaXZhdGUgcmVhZG9ubHkgdGhvdWdodERlZHVwV2luZG93TXMgPSAxNTAwMDtcbiAgcHJpdmF0ZSBsYXN0Q3VyYXRlZFRob3VnaHQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHN0YXR1c01ldGE6IHtcbiAgICBtb2RlbD86IHN0cmluZztcbiAgICBwcm92aWRlcj86IHN0cmluZztcbiAgICBzZXNzaW9uVGltZT86IHN0cmluZztcbiAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICBwcm9maWxlPzogc3RyaW5nO1xuICAgIHdvcmtzcGFjZT86IHN0cmluZztcbiAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgd3JpdGVzPzogc3RyaW5nO1xuICAgIHNlc3Npb25MYWJlbD86IHN0cmluZztcbiAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgIGF1dG9zYXZlPzogYm9vbGVhbjtcbiAgICB2ZXJzaW9uPzogc3RyaW5nO1xuICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICB9ID0ge307XG4gIHByaXZhdGUgdG9nZ2xlU3RhdGU6IE1vZGVUb2dnbGVTdGF0ZSA9IHtcbiAgICB2ZXJpZmljYXRpb25FbmFibGVkOiBmYWxzZSxcbiAgICBhdXRvQ29udGludWVFbmFibGVkOiBmYWxzZSxcbiAgICBjcml0aWNhbEFwcHJvdmFsTW9kZTogJ2F1dG8nLFxuICAgIGR1YWxSbEVuYWJsZWQ6IGZhbHNlLFxuICAgIGRlYnVnRW5hYmxlZDogZmFsc2UsXG4gIH07XG5cbiAgLy8gLS0tLS0tLS0tLS0tIEhlbHBlcnMgLS0tLS0tLS0tLS0tXG5cbiAgLyoqIEVuc3VyZSBjdXJzb3IgaXMgYWx3YXlzIHdpdGhpbiB2YWxpZCBib3VuZHMgZm9yIHRoZSBjdXJyZW50IGJ1ZmZlciAqL1xuICBwcml2YXRlIGNsYW1wQ3Vyc29yKCk6IHZvaWQge1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4odGhpcy5jdXJzb3IsIHRoaXMuYnVmZmVyLmxlbmd0aCkpO1xuICB9XG5cbiAgLyoqIFNhZmVseSBhcHBlbmQgdG8gcGFzdGUgYnVmZmVyIHdpdGggc2l6ZSBsaW1pdCBlbmZvcmNlbWVudCAqL1xuICBwcml2YXRlIGFwcGVuZFRvUGFzdGVCdWZmZXIoYnVmZmVyOiAncGFzdGUnIHwgJ3BsYWluUGFzdGUnLCB0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93KSByZXR1cm47IC8vIEFscmVhZHkgYXQgbGltaXRcbiAgICBjb25zdCBjdXJyZW50ID0gYnVmZmVyID09PSAncGFzdGUnID8gdGhpcy5wYXN0ZUJ1ZmZlciA6IHRoaXMucGxhaW5QYXN0ZUJ1ZmZlcjtcbiAgICBjb25zdCByZW1haW5pbmcgPSB0aGlzLm1heFBhc3RlQnVmZmVyU2l6ZSAtIGN1cnJlbnQubGVuZ3RoO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG9BZGQgPSB0ZXh0Lmxlbmd0aCA8PSByZW1haW5pbmcgPyB0ZXh0IDogdGV4dC5zbGljZSgwLCByZW1haW5pbmcpO1xuICAgIGlmIChidWZmZXIgPT09ICdwYXN0ZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgKz0gdG9BZGQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciArPSB0b0FkZDtcbiAgICB9XG4gICAgaWYgKHRvQWRkLmxlbmd0aCA8IHRleHQubGVuZ3RoKSB7XG4gICAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8qKiBTdHJpcCBBTlNJIGVzY2FwZSBzZXF1ZW5jZXMgZnJvbSB0ZXh0IHRvIHByZXZlbnQgaW5qZWN0aW9uICovXG4gIHByaXZhdGUgc2FuaXRpemVQYXN0ZUNvbnRlbnQodGV4dDogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgYWxsIEFOU0kgZXNjYXBlIHNlcXVlbmNlcyAoQ1NJLCBPU0MsIGV0Yy4pXG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICByZXR1cm4gdGV4dC5yZXBsYWNlKC9cXHgxYlxcW1swLTk7XSpbQS1aYS16XXxcXHgxYlxcXVteXFx4MDddKlxceDA3fFxceDFiW1BYXl9dW15cXHgxYl0qXFx4MWJcXFxcfFxceDFiLi9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdEhvdGtleShjb21ibz86IHN0cmluZyk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghY29tYm8/LnRyaW0oKSkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIGNvbWJvLnRyaW0oKS50b1VwcGVyQ2FzZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSBsYXN0UHJvbXB0RXZlbnQ6IHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0gfCBudWxsID0gbnVsbDtcblxuICBwcml2YXRlIHByb21wdEhlaWdodCA9IDA7XG4gIHByaXZhdGUgbGFzdE92ZXJsYXlIZWlnaHQgPSAwO1xuICBwcml2YXRlIGlubGluZVBhbmVsOiBzdHJpbmdbXSA9IFtdO1xuICBwcml2YXRlIGhhc0NvbnZlcnNhdGlvbkNvbnRlbnQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBpc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICBwcml2YXRlIGlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSBwbGFpblBhc3RlSWRsZU1zID0gMjQ7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVdpbmRvd01zID0gNjA7XG4gIHByaXZhdGUgcmVhZG9ubHkgcGxhaW5QYXN0ZVRyaWdnZXJDaGFycyA9IDI0O1xuICBwcml2YXRlIHJlYWRvbmx5IHBsYWluUGFzdGVFYXJseU5ld2xpbmVDaGFycyA9IDI7IC8vIEd1YXJkIGZvciBzaG9ydCBmaXJzdCBsaW5lcyBpbiBwbGFpbiBwYXN0ZSBtb2RlXG4gIC8vIFBhc3RlIGJ1ZmZlciBsaW1pdHMgdG8gcHJldmVudCBtZW1vcnkgZXhoYXVzdGlvblxuICBwcml2YXRlIHJlYWRvbmx5IG1heFBhc3RlQnVmZmVyU2l6ZSA9IDEwICogMTAyNCAqIDEwMjQ7IC8vIDEwTUIgbWF4IHBhc3RlIHNpemVcbiAgcHJpdmF0ZSBwYXN0ZUJ1ZmZlck92ZXJmbG93ID0gZmFsc2U7IC8vIFRyYWNrIGlmIHBhc3RlIHdhcyB0cnVuY2F0ZWRcbiAgcHJpdmF0ZSBjdXJzb3JWaXNpYmxlQ29sdW1uID0gMTtcbiAgcHJpdmF0ZSBpbkJyYWNrZXRlZFBhc3RlID0gZmFsc2U7XG4gIHByaXZhdGUgcGFzdGVCdWZmZXIgPSAnJztcbiAgcHJpdmF0ZSBpblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgcHJpdmF0ZSBwbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gIHByaXZhdGUgcGxhaW5QYXN0ZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIHBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IDA7XG4gIHByaXZhdGUgcGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gIHByaXZhdGUgcGxhaW5SZWNlbnRDaHVua3M6IEFycmF5PHsgdGV4dDogc3RyaW5nOyBhdDogbnVtYmVyIH0+ID0gW107XG4gIC8vIFBlbmRpbmcgaW5zZXJ0IGJ1ZmZlcjogaG9sZHMgY2hhcmFjdGVycyBkdXJpbmcgcGFzdGUgZGV0ZWN0aW9uIHdpbmRvdyB0byBwcmV2ZW50IHZpc3VhbCBsZWFrXG4gIHByaXZhdGUgcGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICBwcml2YXRlIHBlbmRpbmdJbnNlcnRUaW1lcjogTm9kZUpTLlRpbWVvdXQgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSByZWFkb25seSBwZW5kaW5nSW5zZXJ0RGVsYXlNcyA9IDgwOyAvLyBXYWl0IGJlZm9yZSBjb21taXR0aW5nIGNoYXJzIGFzIG5vcm1hbCBpbnB1dFxuICBwcml2YXRlIGxhc3RSZW5kZXJlZEV2ZW50S2V5OiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgcHJpdmF0ZSBsYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gIHByaXZhdGUgaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBoYXNFdmVyUmVuZGVyZWRPdmVybGF5ID0gZmFsc2U7ICAvLyBUcmFjayBpZiB3ZSd2ZSBldmVyIHJlbmRlcmVkIGZvciBpbmxpbmUgY2xlYXJpbmdcbiAgcHJpdmF0ZSBsYXN0T3ZlcmxheTogeyBsaW5lczogc3RyaW5nW107IHByb21wdEluZGV4OiBudW1iZXIgfSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgcHJpdmF0ZSBwcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQgPSBmYWxzZTtcbiAgcHJpdmF0ZSBzZWNyZXRNb2RlID0gZmFsc2U7XG4gIC8vIFJlbmRlciB0aHJvdHRsaW5nIHRvIHByZXZlbnQgZXhjZXNzaXZlIHJlZHJhd3MgZHVyaW5nIHJhcGlkIGlucHV0XG4gIHByaXZhdGUgcGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICBwcml2YXRlIGxhc3RSZW5kZXJUaW1lID0gMDtcbiAgcHJpdmF0ZSByZWFkb25seSByZW5kZXJUaHJvdHRsZU1zID0gMTY7IC8vIH42MGZwcyBtYXhcbiAgcHJpdmF0ZSByZW5kZXJUaHJvdHRsZVRpbWVyOiBOb2RlSlMuVGltZW91dCB8IG51bGwgPSBudWxsO1xuICAvLyBEaXNwb3NhbCBzdGF0ZSB0byBwcmV2ZW50IG9wZXJhdGlvbnMgYWZ0ZXIgY2xlYW51cFxuICBwcml2YXRlIGRpc3Bvc2VkID0gZmFsc2U7XG4gIC8vIEJvdW5kIGV2ZW50IGhhbmRsZXJzIGZvciBwcm9wZXIgY2xlYW51cFxuICBwcml2YXRlIGJvdW5kUmVzaXplSGFuZGxlcjogKCgpID0+IHZvaWQpIHwgbnVsbCA9IG51bGw7XG4gIHByaXZhdGUgYm91bmRLZXlwcmVzc0hhbmRsZXI6ICgoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB2b2lkKSB8IG51bGwgPSBudWxsO1xuICBwcml2YXRlIGlucHV0Q2FwdHVyZTpcbiAgICB8IHtcbiAgICAgICAgcmVzb2x2ZTogKHZhbHVlOiBzdHJpbmcpID0+IHZvaWQ7XG4gICAgICAgIHJlamVjdD86IChyZWFzb24/OiB1bmtub3duKSA9PiB2b2lkO1xuICAgICAgICBvcHRpb25zOiB7IHRyaW06IGJvb2xlYW47IGFsbG93RW1wdHk6IGJvb2xlYW4gfTtcbiAgICAgIH1cbiAgICB8IG51bGwgPSBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG91dHB1dDogTm9kZUpTLldyaXRlU3RyZWFtID0gcHJvY2Vzcy5zdGRvdXQsXG4gICAgaW5wdXQ6IE5vZGVKUy5SZWFkU3RyZWFtID0gcHJvY2Vzcy5zdGRpbixcbiAgICBfb3B0aW9ucz86IFVuaWZpZWRVSVJlbmRlcmVyT3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMub3V0cHV0ID0gb3V0cHV0O1xuICAgIHRoaXMuaW5wdXQgPSBpbnB1dDtcbiAgICB0aGlzLmludGVyYWN0aXZlID0gQm9vbGVhbih0aGlzLm91dHB1dC5pc1RUWSAmJiB0aGlzLmlucHV0LmlzVFRZICYmICFwcm9jZXNzLmVudlsnQ0knXSk7XG4gICAgdGhpcy5wbGFpbk1vZGUgPSBpc1BsYWluT3V0cHV0TW9kZSgpIHx8ICF0aGlzLmludGVyYWN0aXZlO1xuXG4gICAgLy8gSW5pdGlhbGl6ZSBhbmltYXRlZCBjb21wb25lbnRzXG4gICAgdGhpcy5jb250ZXh0TWV0ZXIgPSBuZXcgQ29udGV4dE1ldGVyKCk7XG5cbiAgICB0aGlzLnJsID0gcmVhZGxpbmUuY3JlYXRlSW50ZXJmYWNlKHtcbiAgICAgIGlucHV0OiB0aGlzLmlucHV0LFxuICAgICAgb3V0cHV0OiB0aGlzLm91dHB1dCxcbiAgICAgIHRlcm1pbmFsOiB0cnVlLFxuICAgICAgcHJvbXB0OiAnJyxcbiAgICAgIHRhYlNpemU6IDIsXG4gICAgfSk7XG4gICAgdGhpcy5ybC5zZXRQcm9tcHQoJycpO1xuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG5cbiAgICAvLyBVc2UgYm91bmQgaGFuZGxlcnMgc28gd2UgY2FuIHJlbW92ZSB0aGVtIG9uIGNsZWFudXBcbiAgICB0aGlzLmJvdW5kUmVzaXplSGFuZGxlciA9ICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9O1xuICAgIHRoaXMub3V0cHV0Lm9uKCdyZXNpemUnLCB0aGlzLmJvdW5kUmVzaXplSGFuZGxlcik7XG5cbiAgICB0aGlzLnNldHVwSW5wdXRIYW5kbGVycygpO1xuICB9XG5cbiAgaW5pdGlhbGl6ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMucGxhaW5Nb2RlKSB7XG4gICAgICAvLyBJZiBhbiBvdmVybGF5IHdhcyBhbHJlYWR5IHJlbmRlcmVkIGJlZm9yZSBpbml0aWFsaXphdGlvbiAoZS5nLiwgYmFubmVyIGVtaXR0ZWQgZWFybHkpLFxuICAgICAgLy8gY2xlYXIgaXQgc28gaW5pdGlhbGl6ZSgpIGRvZXNuJ3Qgc3RhY2sgYSBzZWNvbmQgY29udHJvbCBiYXIgaW4gc2Nyb2xsYmFjay5cbiAgICAgIGlmICh0aGlzLmhhc1JlbmRlcmVkUHJvbXB0IHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgICAgdGhpcy5jbGVhclByb21wdEFyZWEoKTtcbiAgICAgIH1cbiAgICAgIHRoaXMud3JpdGUoRVNDLkVOQUJMRV9CUkFDS0VURURfUEFTVEUpO1xuICAgICAgdGhpcy51cGRhdGVUZXJtaW5hbFNpemUoKTtcbiAgICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSBmYWxzZTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgdGhpcy53cml0ZShFU0MuU0hPV19DVVJTT1IpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFBsYWluIG1vZGU6IG1pbmltYWwgc2V0dXAsIHN0aWxsIHJlbmRlciBhIHNpbXBsZSBwcm9tcHQgbGluZVxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgdGhpcy5oYXNSZW5kZXJlZFByb21wdCA9IGZhbHNlO1xuICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhbnVwKCk6IHZvaWQge1xuICAgIC8vIE1hcmsgYXMgZGlzcG9zZWQgZmlyc3QgdG8gcHJldmVudCBhbnkgcGVuZGluZyBvcGVyYXRpb25zXG4gICAgdGhpcy5kaXNwb3NlZCA9IHRydWU7XG5cbiAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ1JlbmRlcmVyIGRpc3Bvc2VkJykpO1xuICAgIHRoaXMuY2FuY2VsUGxhaW5QYXN0ZUNhcHR1cmUoKTtcblxuICAgIC8vIENsZWFyIHJlbmRlciB0aHJvdHRsZSB0aW1lclxuICAgIGlmICh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnJlbmRlclRocm90dGxlVGltZXIpO1xuICAgICAgdGhpcy5yZW5kZXJUaHJvdHRsZVRpbWVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBTdG9wIGFueSBydW5uaW5nIGFuaW1hdGlvbnNcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICBpZiAodGhpcy5zdHJlYW1pbmdTcGlubmVyKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1NwaW5uZXIuc3RvcCgpO1xuICAgICAgdGhpcy5zdHJlYW1pbmdTcGlubmVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMudGhpbmtpbmdJbmRpY2F0b3IpIHtcbiAgICAgIHRoaXMudGhpbmtpbmdJbmRpY2F0b3Iuc3RvcCgpO1xuICAgICAgdGhpcy50aGlua2luZ0luZGljYXRvciA9IG51bGw7XG4gICAgfVxuICAgIHRoaXMuY29udGV4dE1ldGVyLmRpc3Bvc2UoKTtcbiAgICBkaXNwb3NlQW5pbWF0aW9ucygpO1xuXG4gICAgLy8gUmVtb3ZlIGV2ZW50IGxpc3RlbmVycyB0byBwcmV2ZW50IG1lbW9yeSBsZWFrc1xuICAgIGlmICh0aGlzLmJvdW5kUmVzaXplSGFuZGxlcikge1xuICAgICAgdGhpcy5vdXRwdXQucmVtb3ZlTGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyKTtcbiAgICAgIHRoaXMuYm91bmRSZXNpemVIYW5kbGVyID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpIHtcbiAgICAgIHRoaXMuaW5wdXQucmVtb3ZlTGlzdGVuZXIoJ2tleXByZXNzJywgdGhpcy5ib3VuZEtleXByZXNzSGFuZGxlcik7XG4gICAgICB0aGlzLmJvdW5kS2V5cHJlc3NIYW5kbGVyID0gbnVsbDtcbiAgICB9XG5cbiAgICAvLyBSZW1vdmUgYWxsIEV2ZW50RW1pdHRlciBsaXN0ZW5lcnMgZnJvbSB0aGlzIGluc3RhbmNlXG4gICAgdGhpcy5yZW1vdmVBbGxMaXN0ZW5lcnMoKTtcblxuICAgIGlmICghdGhpcy5pbnRlcmFjdGl2ZSkge1xuICAgICAgdGhpcy5ybC5jbG9zZSgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIENsZWFyIHRoZSBwcm9tcHQgYXJlYSBzbyBpdCBkb2Vzbid0IHJlbWFpbiBpbiBzY3JvbGxiYWNrIGhpc3RvcnlcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5ESVNBQkxFX0JSQUNLRVRFRF9QQVNURSk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5TSE9XX0NVUlNPUik7XG4gICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICB9XG4gICAgaWYgKHRoaXMuaW5wdXQuaXNUVFkpIHtcbiAgICAgIHRoaXMuaW5wdXQuc2V0UmF3TW9kZShmYWxzZSk7XG4gICAgfVxuICAgIHRoaXMucmwuY2xvc2UoKTtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcblxuICAgIC8vIENsZWFyIGV2ZW50IHF1ZXVlXG4gICAgdGhpcy5ldmVudFF1ZXVlID0gW107XG4gIH1cblxuICBzdXNwZW5kUHJvbXB0UmVuZGVyaW5nKCk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHJlc3VtZVByb21wdFJlbmRlcmluZyhyZW5kZXI6IGJvb2xlYW4gPSBmYWxzZSk6IHZvaWQge1xuICAgIHRoaXMucHJvbXB0UmVuZGVyaW5nU3VzcGVuZGVkID0gZmFsc2U7XG4gICAgaWYgKHJlbmRlcikge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gSW5wdXQgaGFuZGxpbmcgLS0tLS0tLS0tLS0tXG5cbiAgcHJpdmF0ZSBzZXR1cElucHV0SGFuZGxlcnMoKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLmludGVyYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmwucmVtb3ZlQWxsTGlzdGVuZXJzKCdsaW5lJyk7XG4gICAgcmVhZGxpbmUuZW1pdEtleXByZXNzRXZlbnRzKHRoaXMuaW5wdXQsIHRoaXMucmwpO1xuICAgIGlmICh0aGlzLmlucHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLmlucHV0LnNldFJhd01vZGUodHJ1ZSk7XG4gICAgfVxuICAgIC8vIFVzZSBib3VuZCBoYW5kbGVyIHNvIHdlIGNhbiByZW1vdmUgaXQgb24gY2xlYW51cFxuICAgIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIgPSAoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KSA9PiB7XG4gICAgICBpZiAoIXRoaXMuZGlzcG9zZWQpIHtcbiAgICAgICAgdGhpcy5oYW5kbGVLZXlwcmVzcyhzdHIsIGtleSk7XG4gICAgICB9XG4gICAgfTtcbiAgICB0aGlzLmlucHV0Lm9uKCdrZXlwcmVzcycsIHRoaXMuYm91bmRLZXlwcmVzc0hhbmRsZXIpO1xuICB9XG5cbiAgcHJpdmF0ZSBlbWl0SW5wdXRDaGFuZ2UoKTogdm9pZCB7XG4gICAgY29uc3QgcGF5bG9hZDogSW5wdXRDaGFuZ2VFdmVudCA9IHtcbiAgICAgIHRleHQ6IHRoaXMuYnVmZmVyLFxuICAgICAgY3Vyc29yOiB0aGlzLmN1cnNvcixcbiAgICB9O1xuICAgIHRoaXMuZW1pdCgnY2hhbmdlJywgcGF5bG9hZCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZUtleXByZXNzKHN0cjogc3RyaW5nLCBrZXk6IHJlYWRsaW5lLktleSk6IHZvaWQge1xuICAgIC8vIE5vcm1hbGl6ZSBtaXNzaW5nIGtleSBtZXRhZGF0YSAoY29tbW9uIGZvciBzb21lIHRlcm1pbmFscyBlbWl0dGluZyByYXcgZXNjYXBlIGNvZGVzKVxuICAgIGNvbnN0IG5vcm1hbGl6ZWRLZXkgPSBrZXkgPz8gdGhpcy5wYXJzZUVzY2FwZVNlcXVlbmNlKHN0cik7XG4gICAgY29uc3Qga2V5Rm9yUGFzdGUgPSBub3JtYWxpemVkS2V5ID8/IChzdHIgPyB7IHNlcXVlbmNlOiBzdHIgfSBhcyByZWFkbGluZS5LZXkgOiBrZXkpO1xuXG4gICAgaWYgKHRoaXMuaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyLCBrZXlGb3JQYXN0ZSkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5oYW5kbGVQbGFpblBhc3RlKHN0ciwga2V5Rm9yUGFzdGUpKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKCFub3JtYWxpemVkS2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaW5wdXRDYXB0dXJlICYmIG5vcm1hbGl6ZWRLZXkuY3RybCAmJiAobm9ybWFsaXplZEtleS5uYW1lID09PSAnYycgfHwgbm9ybWFsaXplZEtleS5uYW1lID09PSAnZCcpKSB7XG4gICAgICB0aGlzLmNhbmNlbElucHV0Q2FwdHVyZShuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIG1hY09TIE9wdGlvbitrZXkgcHJvZHVjZXMgVW5pY29kZSBjaGFyYWN0ZXJzLCBkZXRlY3QgdGhlbSBkaXJlY3RseTpcbiAgICAvLyBPcHRpb24rRyA9IMKpIChjb3B5cmlnaHQpLCBPcHRpb24rQSA9IMOlLCBPcHRpb24rViA9IOKImiwgT3B0aW9uK0QgPSDiiIJcbiAgICBjb25zdCBtYWNPcHRpb25DaGFyczogUmVjb3JkPHN0cmluZywgc3RyaW5nPiA9IHtcbiAgICAgICfCqSc6ICdnJywgIC8vIE9wdGlvbitHXG4gICAgICAnw6UnOiAnYScsICAvLyBPcHRpb24rQVxuICAgICAgJ+KImic6ICd2JywgIC8vIE9wdGlvbitWXG4gICAgICAn4oiCJzogJ2QnLCAgLy8gT3B0aW9uK0RcbiAgICB9O1xuXG4gICAgaWYgKHN0ciAmJiBtYWNPcHRpb25DaGFyc1tzdHJdKSB7XG4gICAgICBjb25zdCBsZXR0ZXIgPSBtYWNPcHRpb25DaGFyc1tzdHJdO1xuICAgICAgaWYgKGxldHRlciA9PT0gJ2EnKSB7XG4gICAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChsZXR0ZXIgPT09ICdnJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1hdXRvLWNvbnRpbnVlJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChsZXR0ZXIgPT09ICdkJykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS1kdWFsLXJsJyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIGlmIChsZXR0ZXIgPT09ICd2Jykge1xuICAgICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIERldGVjdCBDdHJsK1NoaWZ0IGNvbWJpbmF0aW9ucyAoZmFsbGJhY2sgZm9yIG5vbi1tYWNPUyBvciBjb25maWd1cmVkIHRlcm1pbmFscylcbiAgICBjb25zdCBpc0N0cmxTaGlmdCA9IChsZXR0ZXI6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICAgICAgY29uc3QgbG93ZXJMZXR0ZXIgPSBsZXR0ZXIudG9Mb3dlckNhc2UoKTtcbiAgICAgIGNvbnN0IHVwcGVyTGV0dGVyID0gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG5cbiAgICAgIC8vIFBhdHRlcm4gMTogU3RhbmRhcmQgcmVhZGxpbmUgc2hpZnQgZmxhZyArIGN0cmxcbiAgICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5zaGlmdCAmJiBub3JtYWxpemVkS2V5Lm5hbWU/LnRvTG93ZXJDYXNlKCkgPT09IGxvd2VyTGV0dGVyKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBQYXR0ZXJuIDI6IFNvbWUgdGVybWluYWxzIHNlbmQgdXBwZXJjYXNlIG5hbWUgd2l0aCBjdHJsXG4gICAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gdXBwZXJMZXR0ZXIpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIC8vIFBhdHRlcm4gMzogTWV0YS9BbHQgKyBsZXR0ZXIgKGlUZXJtMiB3aXRoIFwiT3B0aW9uIHNlbmRzIE1ldGFcIilcbiAgICAgIGlmIChub3JtYWxpemVkS2V5Lm1ldGEgJiYgbm9ybWFsaXplZEtleS5uYW1lPy50b0xvd2VyQ2FzZSgpID09PSBsb3dlckxldHRlcikge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA0OiBSYXcgZXNjYXBlIHNlcXVlbmNlIGNoZWNrIGZvciB4dGVybS1zdHlsZSBtb2RpZmllcnNcbiAgICAgIGNvbnN0IHNlcSA9IHN0ciB8fCBub3JtYWxpemVkS2V5LnNlcXVlbmNlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmIChzZXEgJiYgL15cXHgxYlxcW1swLTldKzs2W35BLVpdPyQvLnRlc3Qoc2VxKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLy8gUGF0dGVybiA1OiBFU0MgKyBsZXR0ZXIgKE9wdGlvbiBzZW5kcyBFU0MgcHJlZml4IGluIHNvbWUgY29uZmlncylcbiAgICAgIGlmIChzZXEgJiYgc2VxID09PSBgXFx4MWIke2xvd2VyTGV0dGVyfWApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9O1xuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdhJykpIHtcbiAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWNyaXRpY2FsLWFwcHJvdmFsJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGlzQ3RybFNoaWZ0KCdnJykpIHtcbiAgICAgIHRoaXMuZW1pdCgndG9nZ2xlLWF1dG8tY29udGludWUnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoaXNDdHJsU2hpZnQoJ2QnKSkge1xuICAgICAgdGhpcy5lbWl0KCd0b2dnbGUtZHVhbC1ybCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChpc0N0cmxTaGlmdCgndicpKSB7XG4gICAgICB0aGlzLmVtaXQoJ3RvZ2dsZS12ZXJpZnknKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5jdHJsICYmIG5vcm1hbGl6ZWRLZXkubmFtZT8udG9Mb3dlckNhc2UoKSA9PT0gJ3InKSB7XG4gICAgICB0aGlzLmVtaXQoJ3Jlc3VtZScpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5LmN0cmwgJiYgbm9ybWFsaXplZEtleS5uYW1lID09PSAnYycpIHtcbiAgICAgIC8vIEN0cmwrQyBiZWhhdmlvcjpcbiAgICAgIC8vIDEuIElmIGJ1ZmZlciBoYXMgdGV4dDogY2xlYXIgaXQgZmlyc3QsIHRoZW4gbm90aWZ5IHNoZWxsXG4gICAgICAvLyAyLiBJZiBidWZmZXIgaXMgZW1wdHk6IGxldCBzaGVsbCBkZWNpZGUgdG8gcGF1c2UgQUkgb3IgcXVpdFxuICAgICAgLy9cbiAgICAgIC8vIFRoZSBJbnRlcmFjdGl2ZVNoZWxsIG1haW50YWlucyBhIGNvdW50ZXIgdG8gdHJhY2sgQ3RybCtDIHByZXNzZXMgYW5kIGRlY2lkZXNcbiAgICAgIC8vIHdoZXRoZXIgdG8gcGF1c2UgQUkgb3IgZXhpdCBiYXNlZCBvbiBwcm9jZXNzaW5nIHN0YXRlLlxuXG4gICAgICBjb25zdCBoYWRCdWZmZXIgPSB0aGlzLmJ1ZmZlci5sZW5ndGggPiAwO1xuICAgICAgaWYgKGhhZEJ1ZmZlcikge1xuICAgICAgICAvLyBDbGVhciB0aGUgaW5wdXQgYnVmZmVyIGZpcnN0XG4gICAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIC8vIEVtaXQgY3RybGMgZXZlbnQgd2l0aCBidWZmZXIgc3RhdGUgc28gc2hlbGwgY2FuIGhhbmRsZSBhcHByb3ByaWF0ZWx5XG4gICAgICB0aGlzLmVtaXQoJ2N0cmxjJywgeyBoYWRCdWZmZXIgfSk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnZCcpIHtcbiAgICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPT09IDApIHtcbiAgICAgICAgdGhpcy5lbWl0KCdpbnRlcnJ1cHQnKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoa2V5LmN0cmwgJiYga2V5Lm5hbWUgPT09ICd1Jykge1xuICAgICAgdGhpcy5jbGVhckJ1ZmZlcigpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChrZXkuY3RybCAmJiBrZXkubmFtZSA9PT0gJ2wnKSB7XG4gICAgICBpZiAodGhpcy5jb2xsYXBzZWRQYXN0ZSkge1xuICAgICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBDdHJsK086IEV4cGFuZCBsYXN0IHRvb2wgcmVzdWx0XG4gICAgaWYgKGtleS5jdHJsICYmIGtleS5uYW1lID09PSAnbycpIHtcbiAgICAgIHRoaXMuZW1pdCgnZXhwYW5kLXRvb2wtcmVzdWx0Jyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGtleS5uYW1lID09PSAncmV0dXJuJyB8fCBrZXkubmFtZSA9PT0gJ2VudGVyJykge1xuICAgICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgZXhwYW5kIGFuZCBzdWJtaXQgaW4gb25lIGFjdGlvblxuICAgICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgICAgdGhpcy5leHBhbmRDb2xsYXBzZWRQYXN0ZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAvLyBJZiBhIHNsYXNoIGNvbW1hbmQgc3VnZ2VzdGlvbiBpcyBoaWdobGlnaHRlZCwgcHJlc3NpbmcgRW50ZXIgc3VibWl0cyBpdCBpbW1lZGlhdGVseVxuICAgICAgaWYgKHRoaXMuYXBwbHlTdWdnZXN0aW9uKHRydWUpKSByZXR1cm47XG4gICAgICAvLyBGYWxsYmFjazogaWYgYnVmZmVyIHN0YXJ0cyB3aXRoICcvJyBhbmQgc3VnZ2VzdGlvbnMgZXhpc3QsIHVzZSB0aGUgc2VsZWN0ZWQvZmlyc3Qgb25lXG4gICAgICBpZiAodGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBzYWZlSW5kZXggPSB0aGlzLnN1Z2dlc3Rpb25JbmRleCA+PSAwICYmIHRoaXMuc3VnZ2VzdGlvbkluZGV4IDwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGhcbiAgICAgICAgICA/IHRoaXMuc3VnZ2VzdGlvbkluZGV4XG4gICAgICAgICAgOiAwO1xuICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuc3VnZ2VzdGlvbnNbc2FmZUluZGV4XT8uY29tbWFuZCA/PyB0aGlzLmJ1ZmZlcjtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3VibWl0VGV4dCh0aGlzLmJ1ZmZlcik7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICAgIHRoaXMuY29sbGFwc2VkUGFzdGUgPSBudWxsO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5jdXJzb3IgLSAxKSArIHRoaXMuYnVmZmVyLnNsaWNlKHRoaXMuY3Vyc29yKTtcbiAgICAgICAgdGhpcy5jdXJzb3ItLTtcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkZWxldGUnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmJ1ZmZlci5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcikgKyB0aGlzLmJ1ZmZlci5zbGljZSh0aGlzLmN1cnNvciArIDEpO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5vcm1hbGl6ZWRLZXkubmFtZSA9PT0gJ2xlZnQnKSB7XG4gICAgICBpZiAodGhpcy5jdXJzb3IgPiAwKSB7XG4gICAgICAgIHRoaXMuY3Vyc29yLS07XG4gICAgICAgIHRoaXMuZW5zdXJlQ3Vyc29yVmlzaWJsZSgpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdyaWdodCcpIHtcbiAgICAgIGlmICh0aGlzLmN1cnNvciA8IHRoaXMuYnVmZmVyLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmN1cnNvcisrO1xuICAgICAgICB0aGlzLmVuc3VyZUN1cnNvclZpc2libGUoKTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIH1cbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAobm9ybWFsaXplZEtleS5uYW1lID09PSAndXAnKSB7XG4gICAgICBpZiAodGhpcy5uYXZpZ2F0ZVN1Z2dlc3Rpb25zKC0xKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5Lmxlbmd0aCA+IDApIHtcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gdGhpcy5oaXN0b3J5Lmxlbmd0aCAtIDE7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5oaXN0b3J5SW5kZXggPiAwKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXgtLTtcbiAgICAgICAgfVxuICAgICAgICAvLyBWYWxpZGF0ZSBpbmRleCBpcyB3aXRoaW4gYm91bmRzIGJlZm9yZSBhY2Nlc3NpbmdcbiAgICAgICAgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDAgJiYgdGhpcy5oaXN0b3J5SW5kZXggPCB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSB0aGlzLmhpc3RvcnlbdGhpcy5oaXN0b3J5SW5kZXhdID8/ICcnO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICdkb3duJykge1xuICAgICAgaWYgKHRoaXMubmF2aWdhdGVTdWdnZXN0aW9ucygxKSkge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5oaXN0b3J5SW5kZXggIT09IC0xKSB7XG4gICAgICAgIHRoaXMuaGlzdG9yeUluZGV4Kys7XG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnlJbmRleCA+PSB0aGlzLmhpc3RvcnkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5oaXN0b3J5SW5kZXggPSAtMTtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9ICcnO1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuaGlzdG9yeUluZGV4ID49IDApIHtcbiAgICAgICAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuaGlzdG9yeVt0aGlzLmhpc3RvcnlJbmRleF0gPz8gJyc7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gU2FmZXR5OiBpbnZhbGlkIHN0YXRlLCByZXNldFxuICAgICAgICAgIHRoaXMuaGlzdG9yeUluZGV4ID0gLTE7XG4gICAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7IC8vIFJlc2V0IHJlbmRlciBvZmZzZXQgZm9yIG5ldyBidWZmZXJcbiAgICAgICAgdGhpcy51cGRhdGVTdWdnZXN0aW9ucygpO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChub3JtYWxpemVkS2V5Lm5hbWUgPT09ICd0YWInKSB7XG4gICAgICBpZiAodGhpcy5hcHBseVN1Z2dlc3Rpb24oZmFsc2UpKSByZXR1cm47XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHN0ciAmJiAhbm9ybWFsaXplZEtleS5jdHJsICYmICFub3JtYWxpemVkS2V5Lm1ldGEpIHtcbiAgICAgIC8vIERlZmVyIGluc2VydGlvbiB0byBhbGxvdyBwYXN0ZSBkZXRlY3Rpb24gd2luZG93IHRvIGNhdGNoIHJhcGlkIGlucHV0XG4gICAgICB0aGlzLnF1ZXVlUGVuZGluZ0luc2VydChzdHIpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFbnN1cmUgaG9yaXpvbnRhbCBjdXJzb3IgcG9zaXRpb24gc3RheXMgd2l0aGluIHRoZSB2aXNpYmxlIGlucHV0IHdpbmRvdy5cbiAgICogUHJldmVudHMganVtcHMgd2hlbiB1c2luZyBsZWZ0L3JpZ2h0IGFycm93cyBvbiBsb25nIGxpbmVzLlxuICAgKi9cbiAgcHJpdmF0ZSBlbnN1cmVDdXJzb3JWaXNpYmxlKCk6IHZvaWQge1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMTAsIHRoaXMuc2FmZVdpZHRoKCkgLSAxMik7IC8vIG1hcmdpbiBmb3IgcHJvbXB0L3RvZ2dsZXMgYW5kIHBhZGRpbmdcbiAgICAvLyBJZiBjdXJzb3IgaXMgbGVmdCBvZiBjdXJyZW50IHdpbmRvdywgc2hpZnQgd2luZG93IGxlZnRcbiAgICBpZiAodGhpcy5jdXJzb3IgPCB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0KSB7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gdGhpcy5jdXJzb3I7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIElmIGN1cnNvciBpcyBiZXlvbmQgdmlzaWJsZSB3aW5kb3csIHNoaWZ0IHdpbmRvdyByaWdodFxuICAgIGlmICh0aGlzLmN1cnNvciAtIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPj0gbWF4V2lkdGgpIHtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSB0aGlzLmN1cnNvciAtIG1heFdpZHRoICsgMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgcmF3IGVzY2FwZSBzZXF1ZW5jZXMgd2hlbiByZWFkbGluZSBkb2Vzbid0IHBvcHVsYXRlIGtleSBtZXRhZGF0YS5cbiAgICogUHJldmVudHMgY29udHJvbCBjb2RlcyAoZS5nLiwgXltbMjAwfikgZnJvbSBsZWFraW5nIGludG8gdGhlIGJ1ZmZlci5cbiAgICovXG4gIHByaXZhdGUgcGFyc2VFc2NhcGVTZXF1ZW5jZShzZXF1ZW5jZTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCk6IHJlYWRsaW5lLktleSB8IG51bGwge1xuICAgIGlmICghc2VxdWVuY2UpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IG1hcDogUmVjb3JkPHN0cmluZywgcmVhZGxpbmUuS2V5PiA9IHtcbiAgICAgICdcXHgxYltBJzogeyBuYW1lOiAndXAnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltCJzogeyBuYW1lOiAnZG93bicsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0MnOiB7IG5hbWU6ICdyaWdodCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgICAgJ1xceDFiW0QnOiB7IG5hbWU6ICdsZWZ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbSCc6IHsgbmFtZTogJ2hvbWUnLCBzZXF1ZW5jZSB9IGFzIHJlYWRsaW5lLktleSxcbiAgICAgICdcXHgxYltGJzogeyBuYW1lOiAnZW5kJywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAwfic6IHsgbmFtZTogJ3Bhc3RlLXN0YXJ0Jywgc2VxdWVuY2UgfSBhcyByZWFkbGluZS5LZXksXG4gICAgICAnXFx4MWJbMjAxfic6IHsgbmFtZTogJ3Bhc3RlLWVuZCcsIHNlcXVlbmNlIH0gYXMgcmVhZGxpbmUuS2V5LFxuICAgIH07XG4gICAgcmV0dXJuIG1hcFtzZXF1ZW5jZV0gPz8gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBRdWV1ZSBjaGFyYWN0ZXJzIGZvciBkZWZlcnJlZCBpbnNlcnRpb24uIFRoaXMgcHJldmVudHMgdmlzdWFsIFwibGVha1wiIG9mXG4gICAqIHBhc3RlZCBjb250ZW50IGJ5IGhvbGRpbmcgY2hhcmFjdGVycyB1bnRpbCB3ZSdyZSBjb25maWRlbnQgaXQncyBub3QgYSBwYXN0ZS5cbiAgICovXG4gIHByaXZhdGUgcXVldWVQZW5kaW5nSW5zZXJ0KHRleHQ6IHN0cmluZyk6IHZvaWQge1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciArPSB0ZXh0O1xuXG4gICAgLy8gQ2xlYXIgYW55IGV4aXN0aW5nIHRpbWVyXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydFRpbWVyKSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpO1xuICAgICAgdGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIgPSBudWxsO1xuICAgIH1cblxuICAgIC8vIFNjaGVkdWxlIGNvbW1pdCBhZnRlciBkZWxheSAtIGlmIHBhc3RlIGRldGVjdGlvbiB0cmlnZ2VycyBmaXJzdCwgaXQgd2lsbCBjb25zdW1lIHRoZSBidWZmZXJcbiAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgdGhpcy5jb21taXRQZW5kaW5nSW5zZXJ0KCk7XG4gICAgfSwgdGhpcy5wZW5kaW5nSW5zZXJ0RGVsYXlNcyk7XG4gIH1cblxuICAvKipcbiAgICogQ29tbWl0IHBlbmRpbmcgY2hhcmFjdGVycyBhcyBub3JtYWwgaW5wdXQgKG5vdCBhIHBhc3RlKS5cbiAgICovXG4gIHByaXZhdGUgY29tbWl0UGVuZGluZ0luc2VydCgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciAmJiAhdGhpcy5pblBsYWluUGFzdGUgJiYgIXRoaXMuaW5CcmFja2V0ZWRQYXN0ZSkge1xuICAgICAgdGhpcy5pbnNlcnRUZXh0KHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlcik7XG4gICAgfVxuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICB9XG5cbiAgLyoqXG4gICAqIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGludG8gcGFzdGUgZGV0ZWN0aW9uIChwcmV2ZW50cyB2aXN1YWwgbGVhaykuXG4gICAqL1xuICBwcml2YXRlIGNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5wZW5kaW5nSW5zZXJ0VGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcik7XG4gICAgICB0aGlzLnBlbmRpbmdJbnNlcnRUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIGNvbnN0IGNvbnN1bWVkID0gdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyO1xuICAgIHRoaXMucGVuZGluZ0luc2VydEJ1ZmZlciA9ICcnO1xuICAgIHJldHVybiBjb25zdW1lZDtcbiAgfVxuXG4gIHByaXZhdGUgaGFuZGxlQnJhY2tldGVkUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgY29uc3Qgc2VxdWVuY2UgPSBrZXk/LnNlcXVlbmNlIHx8IHN0cjtcbiAgICBpZiAoc2VxdWVuY2UgPT09IEVTQy5FTkFCTEVfQlJBQ0tFVEVEX1BBU1RFIHx8IHNlcXVlbmNlID09PSBFU0MuRElTQUJMRV9CUkFDS0VURURfUEFTVEUpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoc2VxdWVuY2UgPT09ICdcXHgxYlsyMDB+Jykge1xuICAgICAgdGhpcy5pbkJyYWNrZXRlZFBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgYW55IHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlciB0byBwcmV2ZW50IGxlYWtcbiAgICAgIGNvbnN0IHBlbmRpbmcgPSB0aGlzLmNvbnN1bWVQZW5kaW5nSW5zZXJ0Rm9yUGFzdGUoKTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSBwZW5kaW5nOyAvLyBJbmNsdWRlIGFueSBjaGFycyB0aGF0IGFycml2ZWQgYmVmb3JlIGJyYWNrZXRlZCBwYXN0ZSBzdGFydGVkXG4gICAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKCF0aGlzLmluQnJhY2tldGVkUGFzdGUpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHNlcXVlbmNlID09PSAnXFx4MWJbMjAxficpIHtcbiAgICAgIHRoaXMuY29tbWl0UGFzdGVCdWZmZXIoKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAoa2V5Py5uYW1lID09PSAncmV0dXJuJyB8fCBrZXk/Lm5hbWUgPT09ICdlbnRlcicpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCAnXFxuJyk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgaWYgKGtleT8ubmFtZSA9PT0gJ2JhY2tzcGFjZScpIHtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXIgPSB0aGlzLnBhc3RlQnVmZmVyLnNsaWNlKDAsIC0xKTtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZW9mIHN0ciA9PT0gJ3N0cmluZycgJiYgc3RyLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzdHIpO1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlb2Ygc2VxdWVuY2UgPT09ICdzdHJpbmcnICYmIHNlcXVlbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGFzdGUnLCBzZXF1ZW5jZSk7XG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBwcml2YXRlIGNvbW1pdFBhc3RlQnVmZmVyKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbkJyYWNrZXRlZFBhc3RlKSByZXR1cm47XG4gICAgLy8gU2FuaXRpemUgdG8gcmVtb3ZlIGFueSBpbmplY3RlZCBlc2NhcGUgc2VxdWVuY2VzLCB0aGVuIG5vcm1hbGl6ZSBsaW5lIGVuZGluZ3NcbiAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aGlzLnNhbml0aXplUGFzdGVDb250ZW50KHRoaXMucGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgaWYgKGNvbnRlbnQpIHtcbiAgICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgICBjb25zdCB3YXNUcnVuY2F0ZWQgPSB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3c7XG4gICAgICBpZiAobGluZXMubGVuZ3RoID4gMSB8fCBjb250ZW50Lmxlbmd0aCA+IDIwMCkge1xuICAgICAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0ge1xuICAgICAgICAgIHRleHQ6IGNvbnRlbnQsXG4gICAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgICBjaGFyczogY29udGVudC5sZW5ndGggKyAod2FzVHJ1bmNhdGVkID8gJysnIGFzIHVua25vd24gYXMgbnVtYmVyIDogMCksIC8vIEluZGljYXRlIHRydW5jYXRpb25cbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgICAgdGhpcy5jdXJzb3IgPSAwO1xuICAgICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmluc2VydFRleHQoY29udGVudCk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMuaW5CcmFja2V0ZWRQYXN0ZSA9IGZhbHNlO1xuICAgIHRoaXMucGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gIH1cblxuICBwcml2YXRlIGhhbmRsZVBsYWluUGFzdGUoc3RyOiBzdHJpbmcsIGtleTogcmVhZGxpbmUuS2V5KTogYm9vbGVhbiB7XG4gICAgLy8gRmFsbGJhY2sgcGFzdGUgY2FwdHVyZSB3aGVuIGJyYWNrZXRlZCBwYXN0ZSBpc24ndCBzdXBwb3J0ZWRcbiAgICBpZiAodGhpcy5pbkJyYWNrZXRlZFBhc3RlIHx8IGtleT8uY3RybCB8fCBrZXk/Lm1ldGEpIHtcbiAgICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGNvbnN0IHNlcXVlbmNlID0ga2V5Py5zZXF1ZW5jZSA/PyAnJztcbiAgICBjb25zdCBjaHVuayA9IHR5cGVvZiBzdHIgPT09ICdzdHJpbmcnICYmIHN0ci5sZW5ndGggPiAwID8gc3RyIDogc2VxdWVuY2U7XG4gICAgaWYgKCFjaHVuaykge1xuICAgICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICAgICAgdGhpcy5wcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICB0aGlzLnRyYWNrUGxhaW5QYXN0ZUJ1cnN0KGNodW5rLmxlbmd0aCwgbm93KTtcblxuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMucmVjb3JkUmVjZW50UGxhaW5DaHVuayhjaHVuaywgbm93KTtcbiAgICB9XG5cbiAgICBjb25zdCBjaHVua011bHRpcGxlID0gY2h1bmsubGVuZ3RoID4gMTtcbiAgICBjb25zdCBoYXNOZXdsaW5lID0gL1tcXHJcXG5dLy50ZXN0KGNodW5rKTtcbiAgICBjb25zdCBidXJzdEFjdGl2ZSA9IHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID4gMCAmJiBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA8PSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICBjb25zdCBidXJzdFRyaWdnZXIgPSBidXJzdEFjdGl2ZSAmJiB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPj0gdGhpcy5wbGFpblBhc3RlVHJpZ2dlckNoYXJzO1xuICAgIGNvbnN0IGhhc1JlY2VudE5vbk5ld2xpbmUgPSB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnNvbWUoZW50cnkgPT4gIS9eW1xcclxcbl0rJC8udGVzdChlbnRyeS50ZXh0KSk7XG4gICAgY29uc3QgZWFybHlOZXdsaW5lVHJpZ2dlciA9XG4gICAgICBoYXNOZXdsaW5lICYmXG4gICAgICBidXJzdEFjdGl2ZSAmJlxuICAgICAgaGFzUmVjZW50Tm9uTmV3bGluZSAmJlxuICAgICAgdGhpcy5wYXN0ZUJ1cnN0Q2hhckNvdW50ID49IHRoaXMucGxhaW5QYXN0ZUVhcmx5TmV3bGluZUNoYXJzO1xuICAgIGNvbnN0IG5ld2xpbmVUcmlnZ2VyID0gaGFzTmV3bGluZSAmJiAodGhpcy5pblBsYWluUGFzdGUgfHwgY2h1bmtNdWx0aXBsZSB8fCBidXJzdFRyaWdnZXIgfHwgZWFybHlOZXdsaW5lVHJpZ2dlcik7XG4gICAgY29uc3QgbG9va3NMaWtlUGFzdGUgPSB0aGlzLmluUGxhaW5QYXN0ZSB8fCBjaHVua011bHRpcGxlIHx8IGJ1cnN0VHJpZ2dlciB8fCBuZXdsaW5lVHJpZ2dlcjtcblxuICAgIGlmICghbG9va3NMaWtlUGFzdGUpIHtcbiAgICAgIHRoaXMucHJ1bmVSZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cblxuICAgIGxldCBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGZhbHNlO1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHtcbiAgICAgIHRoaXMuaW5QbGFpblBhc3RlID0gdHJ1ZTtcbiAgICAgIHRoaXMucGFzdGVCdWZmZXJPdmVyZmxvdyA9IGZhbHNlOyAvLyBSZXNldCBvdmVyZmxvdyBmbGFnIGZvciBuZXcgcGFzdGVcbiAgICAgIC8vIENvbnN1bWUgcGVuZGluZyBpbnNlcnQgYnVmZmVyIGZpcnN0IC0gdGhpcyBpcyB0aGUgcHJpbWFyeSBzb3VyY2Ugbm93XG4gICAgICBjb25zdCBwZW5kaW5nID0gdGhpcy5jb25zdW1lUGVuZGluZ0luc2VydEZvclBhc3RlKCk7XG4gICAgICBjb25zdCByZWNsYWltZWQgPSB0aGlzLnJlY2xhaW1SZWNlbnRQbGFpbkNodW5rcygpO1xuICAgICAgLy8gQ29tYmluZSBwZW5kaW5nIGJ1ZmZlciB3aXRoIGFueSByZWNsYWltZWQgY2h1bmtzXG4gICAgICBjb25zdCBjb21iaW5lZCA9IHBlbmRpbmcgKyByZWNsYWltZWQ7XG4gICAgICBpZiAoY29tYmluZWQubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBSZW1vdmUgYW55IGNoYXJzIHRoYXQgbGVha2VkIGludG8gYnVmZmVyIChsZWdhY3kgcmVjbGFpbSBwYXRoKVxuICAgICAgICBpZiAocmVjbGFpbWVkLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICBjb25zdCByZW1vdmVDb3VudCA9IE1hdGgubWluKHRoaXMuYnVmZmVyLmxlbmd0aCwgcmVjbGFpbWVkLmxlbmd0aCk7XG4gICAgICAgICAgY29uc3Qgc3VmZml4ID0gdGhpcy5idWZmZXIuc2xpY2UoLXJlbW92ZUNvdW50KTtcbiAgICAgICAgICBpZiAocmVtb3ZlQ291bnQgPiAwICYmIHN1ZmZpeCA9PT0gcmVjbGFpbWVkLnNsaWNlKC1yZW1vdmVDb3VudCkpIHtcbiAgICAgICAgICAgIHRoaXMuYnVmZmVyID0gdGhpcy5idWZmZXIuc2xpY2UoMCwgdGhpcy5idWZmZXIubGVuZ3RoIC0gcmVtb3ZlQ291bnQpO1xuICAgICAgICAgICAgdGhpcy5jdXJzb3IgPSBNYXRoLm1heCgwLCB0aGlzLmJ1ZmZlci5sZW5ndGgpO1xuICAgICAgICAgICAgdGhpcy5jbGFtcEN1cnNvcigpOyAvLyBFbnN1cmUgY3Vyc29yIGlzIHZhbGlkXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9IGNvbWJpbmVkLnNsaWNlKDAsIHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKTtcbiAgICAgICAgaWYgKGNvbWJpbmVkLmxlbmd0aCA+IHRoaXMubWF4UGFzdGVCdWZmZXJTaXplKSB7XG4gICAgICAgICAgdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93ID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjaHVua0FscmVhZHlDYXB0dXJlZCA9IGNvbWJpbmVkLmVuZHNXaXRoKGNodW5rKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMucGxhaW5QYXN0ZUJ1ZmZlciA9ICcnO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghY2h1bmtBbHJlYWR5Q2FwdHVyZWQpIHtcbiAgICAgIHRoaXMuYXBwZW5kVG9QYXN0ZUJ1ZmZlcigncGxhaW5QYXN0ZScsIGNodW5rKTtcbiAgICB9XG4gICAgdGhpcy5zY2hlZHVsZVBsYWluUGFzdGVDb21taXQoKTtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHByaXZhdGUgdHJhY2tQbGFpblBhc3RlQnVyc3QobGVuZ3RoOiBudW1iZXIsIG5vdzogbnVtYmVyKTogdm9pZCB7XG4gICAgaWYgKCF0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCB8fCBub3cgLSB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA+IHRoaXMucGxhaW5QYXN0ZVdpbmRvd01zKSB7XG4gICAgICB0aGlzLnBhc3RlQnVyc3RXaW5kb3dTdGFydCA9IG5vdztcbiAgICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCA9IDA7XG4gICAgfVxuICAgIHRoaXMucGFzdGVCdXJzdENoYXJDb3VudCArPSBsZW5ndGg7XG4gIH1cblxuICBwcml2YXRlIHJlc2V0UGxhaW5QYXN0ZUJ1cnN0KCk6IHZvaWQge1xuICAgIHRoaXMucGFzdGVCdXJzdFdpbmRvd1N0YXJ0ID0gMDtcbiAgICB0aGlzLnBhc3RlQnVyc3RDaGFyQ291bnQgPSAwO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxQbGFpblBhc3RlQ2FwdHVyZSgpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuICAgIC8vIEFsc28gY2FuY2VsIHBlbmRpbmcgaW5zZXJ0IGJ1ZmZlclxuICAgIGlmICh0aGlzLnBlbmRpbmdJbnNlcnRUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGVuZGluZ0luc2VydFRpbWVyKTtcbiAgICAgIHRoaXMucGVuZGluZ0luc2VydFRpbWVyID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5wZW5kaW5nSW5zZXJ0QnVmZmVyID0gJyc7XG4gICAgdGhpcy5pblBsYWluUGFzdGUgPSBmYWxzZTtcbiAgICB0aGlzLnBsYWluUGFzdGVCdWZmZXIgPSAnJztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gW107XG4gICAgdGhpcy5yZXNldFBsYWluUGFzdGVCdXJzdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWNvcmRSZWNlbnRQbGFpbkNodW5rKHRleHQ6IHN0cmluZywgYXQ6IG51bWJlcik6IHZvaWQge1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gYXQgLSB0aGlzLnBsYWluUGFzdGVXaW5kb3dNcztcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzLnB1c2goeyB0ZXh0LCBhdCB9KTtcbiAgICB0aGlzLnBsYWluUmVjZW50Q2h1bmtzID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5maWx0ZXIoZW50cnkgPT4gZW50cnkuYXQgPj0gd2luZG93U3RhcnQpO1xuICB9XG5cbiAgcHJpdmF0ZSBwcnVuZVJlY2VudFBsYWluQ2h1bmtzKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5wbGFpblJlY2VudENodW5rcy5sZW5ndGgpIHJldHVybjtcbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGNvbnN0IHdpbmRvd1N0YXJ0ID0gbm93IC0gdGhpcy5wbGFpblBhc3RlV2luZG93TXM7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IHRoaXMucGxhaW5SZWNlbnRDaHVua3MuZmlsdGVyKGVudHJ5ID0+IGVudHJ5LmF0ID49IHdpbmRvd1N0YXJ0KTtcbiAgfVxuXG4gIHByaXZhdGUgcmVjbGFpbVJlY2VudFBsYWluQ2h1bmtzKCk6IHN0cmluZyB7XG4gICAgaWYgKCF0aGlzLnBsYWluUmVjZW50Q2h1bmtzLmxlbmd0aCkgcmV0dXJuICcnO1xuICAgIGNvbnN0IGNvbWJpbmVkID0gdGhpcy5wbGFpblJlY2VudENodW5rcy5tYXAoZW50cnkgPT4gZW50cnkudGV4dCkuam9pbignJyk7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHJldHVybiBjb21iaW5lZDtcbiAgfVxuXG4gIHByaXZhdGUgc2NoZWR1bGVQbGFpblBhc3RlQ29tbWl0KCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnBsYWluUGFzdGVUaW1lcikge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucGxhaW5QYXN0ZVRpbWVyKTtcbiAgICB9XG4gICAgdGhpcy5wbGFpblBhc3RlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgIHRoaXMuZmluYWxpemVQbGFpblBhc3RlKCk7XG4gICAgfSwgdGhpcy5wbGFpblBhc3RlSWRsZU1zKTtcbiAgfVxuXG4gIHByaXZhdGUgZmluYWxpemVQbGFpblBhc3RlKCk6IHZvaWQge1xuICAgIGlmICghdGhpcy5pblBsYWluUGFzdGUpIHJldHVybjtcblxuICAgIC8vIFNhbml0aXplIHRvIHJlbW92ZSBhbnkgaW5qZWN0ZWQgZXNjYXBlIHNlcXVlbmNlcywgdGhlbiBub3JtYWxpemUgbGluZSBlbmRpbmdzXG4gICAgY29uc3Qgc2FuaXRpemVkID0gdGhpcy5zYW5pdGl6ZVBhc3RlQ29udGVudCh0aGlzLnBsYWluUGFzdGVCdWZmZXIpO1xuICAgIGNvbnN0IGNvbnRlbnQgPSBzYW5pdGl6ZWQucmVwbGFjZSgvXFxyXFxuPy9nLCAnXFxuJyk7XG4gICAgY29uc3Qgd2FzVHJ1bmNhdGVkID0gdGhpcy5wYXN0ZUJ1ZmZlck92ZXJmbG93O1xuICAgIHRoaXMuaW5QbGFpblBhc3RlID0gZmFsc2U7XG4gICAgdGhpcy5wbGFpblBhc3RlQnVmZmVyID0gJyc7XG4gICAgdGhpcy5wbGFpblJlY2VudENodW5rcyA9IFtdO1xuICAgIHRoaXMucmVzZXRQbGFpblBhc3RlQnVyc3QoKTtcbiAgICB0aGlzLnBhc3RlQnVmZmVyT3ZlcmZsb3cgPSBmYWxzZTtcbiAgICBpZiAodGhpcy5wbGFpblBhc3RlVGltZXIpIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnBsYWluUGFzdGVUaW1lcik7XG4gICAgICB0aGlzLnBsYWluUGFzdGVUaW1lciA9IG51bGw7XG4gICAgfVxuXG4gICAgaWYgKCFjb250ZW50KSByZXR1cm47XG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBpZiAobGluZXMubGVuZ3RoID4gMSB8fCBjb250ZW50Lmxlbmd0aCA+IDIwMCkge1xuICAgICAgdGhpcy5jb2xsYXBzZWRQYXN0ZSA9IHtcbiAgICAgICAgdGV4dDogY29udGVudCxcbiAgICAgICAgbGluZXM6IGxpbmVzLmxlbmd0aCxcbiAgICAgICAgY2hhcnM6IGNvbnRlbnQubGVuZ3RoICsgKHdhc1RydW5jYXRlZCA/ICcrJyBhcyB1bmtub3duIGFzIG51bWJlciA6IDApLFxuICAgICAgfTtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aGlzLmluc2VydFRleHQoY29udGVudCk7XG4gIH1cblxuICBwcml2YXRlIGluc2VydFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgaWYgKCF0ZXh0KSByZXR1cm47XG4gICAgaWYgKHRoaXMuaW5QbGFpblBhc3RlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICB0aGlzLmV4cGFuZENvbGxhcHNlZFBhc3RlKCk7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBjdXJzb3IgaXMgdmFsaWQgYmVmb3JlIHNsaWNpbmdcbiAgICB0aGlzLmNsYW1wQ3Vyc29yKCk7XG4gICAgdGhpcy5idWZmZXIgPSB0aGlzLmJ1ZmZlci5zbGljZSgwLCB0aGlzLmN1cnNvcikgKyB0ZXh0ICsgdGhpcy5idWZmZXIuc2xpY2UodGhpcy5jdXJzb3IpO1xuICAgIHRoaXMuY3Vyc29yICs9IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY2xhbXBDdXJzb3IoKTsgLy8gRW5zdXJlIGN1cnNvciByZW1haW5zIHZhbGlkIGFmdGVyIG1vZGlmaWNhdGlvblxuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBwcml2YXRlIHN1Ym1pdFRleHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgLy8gSWYgdGhlcmUncyBhIGNvbGxhcHNlZCBwYXN0ZSwgc3VibWl0IHRoYXQgaW5zdGVhZCBvZiB0aGUgYnVmZmVyIHRleHRcbiAgICAvLyBUaGlzIGhhbmRsZXMgZWRnZSBjYXNlcyB3aGVyZSBzdWJtaXRUZXh0IGlzIGNhbGxlZCBwcm9ncmFtbWF0aWNhbGx5XG4gICAgaWYgKHRoaXMuY29sbGFwc2VkUGFzdGUpIHtcbiAgICAgIHRoaXMuZXhwYW5kQ29sbGFwc2VkUGFzdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIGNvbnN0IHNob3VsZFRyaW0gPSB0aGlzLmlucHV0Q2FwdHVyZS5vcHRpb25zLnRyaW07XG4gICAgICBjb25zdCBub3JtYWxpemVkQ2FwdHVyZSA9IHNob3VsZFRyaW0gPyB0ZXh0LnRyaW0oKSA6IHRleHQ7XG4gICAgICBpZiAoIXRoaXMuaW5wdXRDYXB0dXJlLm9wdGlvbnMuYWxsb3dFbXB0eSAmJiAhbm9ybWFsaXplZENhcHR1cmUpIHtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVzb2x2ZXIgPSB0aGlzLmlucHV0Q2FwdHVyZTtcbiAgICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICAgIHRoaXMuYnVmZmVyID0gJyc7XG4gICAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gMDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgICByZXNvbHZlci5yZXNvbHZlKG5vcm1hbGl6ZWRDYXB0dXJlKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50cmltKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIERvbid0IGFkZCBzZWNyZXRzIHRvIGhpc3Rvcnkgb3IgZGlzcGxheSB0aGVtIGluIHNjcm9sbGJhY2tcbiAgICBpZiAoIXRoaXMuc2VjcmV0TW9kZSkge1xuICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobm9ybWFsaXplZCk7XG4gICAgICB0aGlzLmhpc3RvcnlJbmRleCA9IC0xO1xuICAgICAgdGhpcy5kaXNwbGF5VXNlclByb21wdChub3JtYWxpemVkKTtcbiAgICB9XG4gICAgaWYgKHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycpIHtcbiAgICAgIHRoaXMuZW1pdCgncXVldWUnLCBub3JtYWxpemVkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5lbWl0KCdzdWJtaXQnLCBub3JtYWxpemVkKTtcbiAgICB9XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVTdWdnZXN0aW9ucygpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuYnVmZmVyLnN0YXJ0c1dpdGgoJy8nKSkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZmlyc3RTcGFjZSA9IHRoaXMuYnVmZmVyLmluZGV4T2YoJyAnKTtcbiAgICBjb25zdCBoYXNBcmdUZXh0ID0gZmlyc3RTcGFjZSA+PSAwICYmIC9cXFMvLnRlc3QodGhpcy5idWZmZXIuc2xpY2UoZmlyc3RTcGFjZSArIDEpKTtcbiAgICAvLyBIaWRlIHNsYXNoIHN1Z2dlc3Rpb25zIHdoZW4gdGhlIHVzZXIgaXMgZWRpdGluZyBhcmd1bWVudHNcbiAgICBpZiAoZmlyc3RTcGFjZSA+PSAwICYmIHRoaXMuY3Vyc29yID4gZmlyc3RTcGFjZSAmJiBoYXNBcmdUZXh0KSB7XG4gICAgICB0aGlzLnJlc2V0U3VnZ2VzdGlvbnMoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBjdXJzb3JTbGljZSA9IHRoaXMuYnVmZmVyLnNsaWNlKDAsIHRoaXMuY3Vyc29yKTtcbiAgICBjb25zdCBjb21tYW5kU2xpY2UgPSBmaXJzdFNwYWNlID49IDAgPyBjdXJzb3JTbGljZS5zbGljZSgwLCBmaXJzdFNwYWNlKSA6IGN1cnNvclNsaWNlO1xuICAgIGNvbnN0IGZhbGxiYWNrU2xpY2UgPSBmaXJzdFNwYWNlID49IDAgPyB0aGlzLmJ1ZmZlci5zbGljZSgwLCBmaXJzdFNwYWNlKSA6IHRoaXMuYnVmZmVyO1xuICAgIGNvbnN0IHBhcnRpYWwgPSAoY29tbWFuZFNsaWNlLnRyaW1FbmQoKSB8fCBmYWxsYmFja1NsaWNlLnRyaW1FbmQoKSB8fCAnLycpLnRvTG93ZXJDYXNlKCk7XG4gICAgY29uc3QgcHJldmlvdXMgPSB0aGlzLnN1Z2dlc3Rpb25zW3RoaXMuc3VnZ2VzdGlvbkluZGV4XT8uY29tbWFuZDtcbiAgICB0aGlzLnN1Z2dlc3Rpb25zID0gdGhpcy5hdmFpbGFibGVDb21tYW5kc1xuICAgICAgLmZpbHRlcihjbWQgPT4gY21kLmNvbW1hbmQudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKHBhcnRpYWwpKVxuICAgICAgLnNsaWNlKDAsIDUpO1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChwcmV2aW91cykge1xuICAgICAgY29uc3QgaWR4ID0gdGhpcy5zdWdnZXN0aW9ucy5maW5kSW5kZXgocyA9PiBzLmNvbW1hbmQgPT09IHByZXZpb3VzKTtcbiAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gaWR4ID49IDAgPyBpZHggOiAwO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IDA7XG4gICAgfVxuICB9XG5cbiAgc2V0QXZhaWxhYmxlQ29tbWFuZHMoY29tbWFuZHM6IHR5cGVvZiB0aGlzLnN1Z2dlc3Rpb25zKTogdm9pZCB7XG4gICAgdGhpcy5hdmFpbGFibGVDb21tYW5kcyA9IGNvbW1hbmRzO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlTdWdnZXN0aW9uKHN1Ym1pdDogYm9vbGVhbik6IGJvb2xlYW4ge1xuICAgIGlmICghdGhpcy5idWZmZXIuc3RhcnRzV2l0aCgnLycpIHx8IHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBzdWdnZXN0aW9uSW5kZXggaXMgdmFsaWQsIGRlZmF1bHQgdG8gZmlyc3QgaXRlbVxuICAgIGNvbnN0IHNhZmVJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgOiAwO1xuICAgIGNvbnN0IHNlbGVjdGVkID0gdGhpcy5zdWdnZXN0aW9uc1tzYWZlSW5kZXhdO1xuICAgIGlmICghc2VsZWN0ZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaWYgKHN1Ym1pdCkge1xuICAgICAgdGhpcy5zdWJtaXRUZXh0KHNlbGVjdGVkLmNvbW1hbmQpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9IGAke3NlbGVjdGVkLmNvbW1hbmR9IGA7XG4gICAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICAgIHRoaXMucmVzZXRTdWdnZXN0aW9ucygpO1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgcHJpdmF0ZSByZXNldFN1Z2dlc3Rpb25zKCk6IHZvaWQge1xuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBbXTtcbiAgICB0aGlzLnN1Z2dlc3Rpb25JbmRleCA9IC0xO1xuICB9XG5cbiAgcHJpdmF0ZSBuYXZpZ2F0ZVN1Z2dlc3Rpb25zKGRpcmVjdGlvbjogbnVtYmVyKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5zdGFydHNXaXRoKCcvJykgfHwgdGhpcy5zdWdnZXN0aW9ucy5sZW5ndGggPT09IDApIHtcbiAgICAgIC8vIFJlc2V0IGluZGV4IGlmIHN1Z2dlc3Rpb25zIHdlcmUgY2xlYXJlZCBidXQgaW5kZXggd2Fzbid0XG4gICAgICBpZiAodGhpcy5zdWdnZXN0aW9uSW5kZXggIT09IC0xICYmIHRoaXMuc3VnZ2VzdGlvbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIC8vIEVuc3VyZSBjdXJyZW50IGluZGV4IGlzIHZhbGlkIGJlZm9yZSBjb21wdXRpbmcgbmV4dFxuICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuc3VnZ2VzdGlvbkluZGV4ID49IDAgJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aFxuICAgICAgPyB0aGlzLnN1Z2dlc3Rpb25JbmRleFxuICAgICAgOiAtMTtcbiAgICBjb25zdCBuZXh0ID0gY3VycmVudEluZGV4ICsgZGlyZWN0aW9uO1xuICAgIGNvbnN0IGNsYW1wZWQgPSBNYXRoLm1heCgwLCBNYXRoLm1pbih0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCAtIDEsIG5leHQpKTtcbiAgICBpZiAoY2xhbXBlZCA9PT0gdGhpcy5zdWdnZXN0aW9uSW5kZXggJiYgdGhpcy5zdWdnZXN0aW9uSW5kZXggPj0gMCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gY2xhbXBlZDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIEV2ZW50IHF1ZXVlIC0tLS0tLS0tLS0tLVxuXG4gIGFkZEV2ZW50KHR5cGU6IFJlbmRlcmVyRXZlbnRUeXBlLCBjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSBhZGRFdmVudCBjYWxsZWQ6IHR5cGU9JHt0eXBlfSwgY29udGVudCBsZW5ndGg9JHtjb250ZW50Py5sZW5ndGggfHwgMH1gKTtcbiAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGhpcy5ub3JtYWxpemVFdmVudFR5cGUodHlwZSk7XG4gICAgaWYgKCFub3JtYWxpemVkKSByZXR1cm47XG4gICAgbG9nRGVidWcoYFtERUJVRyByZW5kZXJlcl0gbm9ybWFsaXplZCB0eXBlPSR7bm9ybWFsaXplZH1gKTtcbiAgICBpZiAoXG4gICAgICBub3JtYWxpemVkID09PSAncHJvbXB0JyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Jlc3BvbnNlJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rob3VnaHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnc3RyZWFtJyB8fFxuICAgICAgbm9ybWFsaXplZCA9PT0gJ3Rvb2wnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAnYnVpbGQnIHx8XG4gICAgICBub3JtYWxpemVkID09PSAndGVzdCdcbiAgICApIHtcbiAgICAgIHRoaXMuaGFzQ29udmVyc2F0aW9uQ29udGVudCA9IHRydWU7XG4gICAgfVxuICAgIGlmIChub3JtYWxpemVkID09PSAndG9vbC1yZXN1bHQnKSB7XG4gICAgICB0aGlzLmxhc3RUb29sUmVzdWx0ID0gY29udGVudDtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGZvcm1hdHRlZCA9IHRoaXMuZm9ybWF0Q29udGVudCh7XG4gICAgICAgIHR5cGU6IG5vcm1hbGl6ZWQsXG4gICAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICAgIGNvbnRlbnQsXG4gICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIH0pO1xuICAgICAgaWYgKGZvcm1hdHRlZCkge1xuICAgICAgICBjb25zdCB0ZXh0ID0gZm9ybWF0dGVkLmVuZHNXaXRoKCdcXG4nKSA/IGZvcm1hdHRlZCA6IGAke2Zvcm1hdHRlZH1cXG5gO1xuICAgICAgICB0aGlzLm91dHB1dC53cml0ZSh0ZXh0KTtcbiAgICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRleHQuZW5kc1dpdGgoJ1xcbicpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IGV2ZW50ID0ge1xuICAgICAgdHlwZTogbm9ybWFsaXplZCxcbiAgICAgIHJhd1R5cGU6IHR5cGUsXG4gICAgICBjb250ZW50LFxuICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxuICAgIH07XG5cbiAgICAvLyBQcmlvcml0eSBxdWV1ZTogcHJvbXB0IGV2ZW50cyBhcmUgaW5zZXJ0ZWQgYXQgdGhlIGZyb250IHRvIGVuc3VyZSBpbW1lZGlhdGUgZGlzcGxheVxuICAgIC8vIFRoaXMgZ3VhcmFudGVlcyB1c2VyIGlucHV0IGlzIGVjaG9lZCBiZWZvcmUgYW55IGFzeW5jIHByb2Nlc3NpbmcgcmVzcG9uc2VzXG4gICAgaWYgKG5vcm1hbGl6ZWQgPT09ICdwcm9tcHQnKSB7XG4gICAgICAvLyBGaW5kIHRoZSBmaXJzdCBub24tcHJvbXB0IGV2ZW50IGFuZCBpbnNlcnQgYmVmb3JlIGl0XG4gICAgICAvLyBUaGlzIG1haW50YWlucyBwcm9tcHQgb3JkZXIgd2hpbGUgZ2l2aW5nIHRoZW0gcHJpb3JpdHkgb3ZlciBvdGhlciBldmVudHNcbiAgICAgIGNvbnN0IGluc2VydEluZGV4ID0gdGhpcy5ldmVudFF1ZXVlLmZpbmRJbmRleChlID0+IGUudHlwZSAhPT0gJ3Byb21wdCcpO1xuICAgICAgaWYgKGluc2VydEluZGV4ID09PSAtMSkge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUucHVzaChldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmV2ZW50UXVldWUuc3BsaWNlKGluc2VydEluZGV4LCAwLCBldmVudCk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHF1ZXVlTWljcm90YXNrKCgpID0+IHtcbiAgICAgICAgaWYgKCF0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlKSB7XG4gICAgICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmUtcmVuZGVyIHRoZSBwcm9tcHQvY29udHJvbCBiYXIgaW1tZWRpYXRlbHkuXG4gICAqIFRoaXMga2VlcHMgdGhlIGNoYXQgYm94IHBpbm5lZCBkdXJpbmcgbG9uZyBzdHJlYW1pbmcgcnVucyBpbnN0ZWFkIG9mIHdhaXRpbmdcbiAgICogZm9yIHRoZSBldmVudCBxdWV1ZSB0byBkcmFpbiBiZWZvcmUgdGhlIHByb21wdCByZWFwcGVhcnMuXG4gICAqL1xuICBwcml2YXRlIHJlbmRlclByb21wdE92ZXJsYXkoaW1tZWRpYXRlOiBib29sZWFuID0gZmFsc2UpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5wbGFpbk1vZGUgfHwgdGhpcy5kaXNwb3NlZCB8fCAhdGhpcy5vdXRwdXQuaXNUVFkgfHwgdGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgaWYgKGltbWVkaWF0ZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcHJvY2Vzc1F1ZXVlKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIGlmICh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZGlzcG9zZWQpIHJldHVybjtcbiAgICB0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlID0gdHJ1ZTtcbiAgICB0cnkge1xuICAgICAgd2hpbGUgKHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwICYmICF0aGlzLmRpc3Bvc2VkKSB7XG4gICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCk7XG4gICAgICAgIGlmICghZXZlbnQpIGNvbnRpbnVlO1xuICAgICAgICBjb25zdCBjb2FsZXNjZWQgPSB0aGlzLmNvYWxlc2NlQWRqYWNlbnRUZXh0RXZlbnRzKGV2ZW50KTtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckV2ZW50KGNvYWxlc2NlZCk7XG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgLy8gTmV2ZXIgYWxsb3cgYSByZW5kZXJpbmcgZmFpbHVyZSB0byBzdGFsbCB0aGUgZXZlbnQgcXVldWVcbiAgICAgICAgICBpZiAodGhpcy5kaXNwb3NlZCkgYnJlYWs7IC8vIERvbid0IHRyeSB0byB3cml0ZSBhZnRlciBkaXNwb3NhbFxuICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPVxuICAgICAgICAgICAgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiB0eXBlb2YgZXJyb3IgPT09ICdzdHJpbmcnID8gZXJyb3IgOiAnVW5rbm93biByZW5kZXJlciBlcnJvcic7XG4gICAgICAgICAgdGhpcy5vdXRwdXQud3JpdGUoYFxcbltyZW5kZXJlcl0gJHttZXNzYWdlfVxcbmApO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZGlzcG9zZWQgYmVmb3JlIGNvbnRpbnVpbmdcbiAgICAgICAgaWYgKHRoaXMuZGlzcG9zZWQpIGJyZWFrO1xuXG4gICAgICAgIC8vIEZvciBwcm9tcHQgZXZlbnRzLCBlbnN1cmUgdGhlIG92ZXJsYXkgaXMgcmVuZGVyZWQgaW1tZWRpYXRlbHlcbiAgICAgICAgLy8gVGhpcyBndWFyYW50ZWVzIHByb21wdHMgYXJlIHZpc2libGUgYmVmb3JlIGFzeW5jIHByb2Nlc3NpbmcgY29udGludWVzXG4gICAgICAgIGlmIChldmVudC50eXBlID09PSAncHJvbXB0Jykge1xuICAgICAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBObyBkZWxheSBmb3IgcHJvbXB0IGV2ZW50cyAtIHJlbmRlciBpbW1lZGlhdGVseVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGF3YWl0IHRoaXMuZGVsYXkoMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIC8vIEFMV0FZUyByZW5kZXIgcHJvbXB0IGFmdGVyIHF1ZXVlIGNvbXBsZXRlcyB0byBrZWVwIGJvdHRvbSBVSSBwZXJzaXN0ZW50XG4gICAgICAvLyBUaGlzIGVuc3VyZXMgc3RhdHVzL3RvZ2dsZXMgc3RheSBwaW5uZWQgYW5kIHJlc3BvbnNlcyBhcmUgZnVsbHkgcmVuZGVyZWRcbiAgICAgIGlmICh0aGlzLm91dHB1dC5pc1RUWSAmJiAhdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICB0aGlzLmFsbG93UHJvbXB0UmVuZGVyID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH1cbiAgICB9IGZpbmFsbHkge1xuICAgICAgdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBNZXJnZSBhZGphY2VudCByZXNwb25zZS90aG91Z2h0IGV2ZW50cyBpbnRvIGEgc2luZ2xlIGJsb2NrIHNvIGNvbnRpbnVvdXNcbiAgICogY2hhdCB0ZXh0IHJlbmRlcnMgd2l0aCBvbmUgYnVsbGV0IGluc3RlYWQgb2Ygb25lIHBlciBjaHVuay5cbiAgICovXG4gIHByaXZhdGUgY29hbGVzY2VBZGphY2VudFRleHRFdmVudHMoZXZlbnQ6IFVJRXZlbnQpOiBVSUV2ZW50IHtcbiAgICBjb25zdCBpc01lcmdlYWJsZSA9ICh0YXJnZXQ6IFVJRXZlbnQgfCB1bmRlZmluZWQpOiB0YXJnZXQgaXMgVUlFdmVudCA9PlxuICAgICAgQm9vbGVhbihcbiAgICAgICAgdGFyZ2V0ICYmXG4gICAgICAgICAgIXRhcmdldC5pc0NvbXBhY3RlZCAmJlxuICAgICAgICAgICgodGFyZ2V0LnR5cGUgPT09ICdyZXNwb25zZScgJiYgdGFyZ2V0LnJhd1R5cGUgPT09ICdyZXNwb25zZScpIHx8XG4gICAgICAgICAgICAodGFyZ2V0LnR5cGUgPT09ICd0aG91Z2h0JyAmJiB0YXJnZXQucmF3VHlwZSA9PT0gJ3Rob3VnaHQnKSlcbiAgICAgICk7XG5cbiAgICBpZiAoIWlzTWVyZ2VhYmxlKGV2ZW50KSkge1xuICAgICAgcmV0dXJuIGV2ZW50O1xuICAgIH1cblxuICAgIHdoaWxlICh0aGlzLmV2ZW50UXVldWUubGVuZ3RoID4gMCAmJiBpc01lcmdlYWJsZSh0aGlzLmV2ZW50UXVldWVbMF0pKSB7XG4gICAgICBjb25zdCBuZXh0ID0gdGhpcy5ldmVudFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgY29uc3QgbmVlZHNTZXBhcmF0b3IgPVxuICAgICAgICBldmVudC5jb250ZW50Lmxlbmd0aCA+IDAgJiYgIWV2ZW50LmNvbnRlbnQuZW5kc1dpdGgoJ1xcbicpICYmICFuZXh0LmNvbnRlbnQuc3RhcnRzV2l0aCgnXFxuJyk7XG4gICAgICBldmVudC5jb250ZW50ID0gbmVlZHNTZXBhcmF0b3IgPyBgJHtldmVudC5jb250ZW50fVxcbiR7bmV4dC5jb250ZW50fWAgOiBgJHtldmVudC5jb250ZW50fSR7bmV4dC5jb250ZW50fWA7XG4gICAgfVxuXG4gICAgcmV0dXJuIGV2ZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEZsdXNoIHBlbmRpbmcgcmVuZGVyZXIgZXZlbnRzLlxuICAgKiBVc2VmdWwgZm9yIHN0YXJ0dXAgZmxvd3MgKGUuZy4sIHdlbGNvbWUgYmFubmVyKSB0byBndWFyYW50ZWUgdGhlIHNjcm9sbGJhY2sgaXMgaHlkcmF0ZWRcbiAgICogYmVmb3JlIGNvbnRpbnVpbmcgd2l0aCBhZGRpdGlvbmFsIFVJIHVwZGF0ZXMuXG4gICAqL1xuICBhc3luYyBmbHVzaEV2ZW50cyh0aW1lb3V0TXM6IG51bWJlciA9IDI1MCk6IFByb21pc2U8dm9pZD4ge1xuICAgIC8vIEtpY2sgb2ZmIHByb2Nlc3NpbmcgaWYgaWRsZVxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUgJiYgdGhpcy5ldmVudFF1ZXVlLmxlbmd0aCA+IDApIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG5cbiAgICBjb25zdCBzdGFydCA9IERhdGUubm93KCk7XG4gICAgd2hpbGUgKCh0aGlzLmlzUHJvY2Vzc2luZ1F1ZXVlIHx8IHRoaXMuZXZlbnRRdWV1ZS5sZW5ndGggPiAwKSAmJiBEYXRlLm5vdygpIC0gc3RhcnQgPCB0aW1lb3V0TXMpIHtcbiAgICAgIGF3YWl0IHRoaXMuZGVsYXkoNSk7XG4gICAgfVxuXG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSAmJiB0aGlzLm91dHB1dC5pc1RUWSkge1xuICAgICAgdGhpcy5hbGxvd1Byb21wdFJlbmRlciA9IHRydWU7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgcmVuZGVyRXZlbnQoZXZlbnQ6IFVJRXZlbnQpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSByZW5kZXJFdmVudDogdHlwZT0ke2V2ZW50LnR5cGV9LCBjb250ZW50IGxlbmd0aD0ke2V2ZW50LmNvbnRlbnQ/Lmxlbmd0aCB8fCAwfWApO1xuICAgIGlmICh0aGlzLnBsYWluTW9kZSkge1xuICAgICAgbG9nRGVidWcoJ1tERUJVRyByZW5kZXJlcl0gcGxhaW5Nb2RlIC0gd3JpdGluZyBkaXJlY3RseScpO1xuICAgICAgY29uc3QgZm9ybWF0dGVkUGxhaW4gPSB0aGlzLmZvcm1hdENvbnRlbnQoZXZlbnQpO1xuICAgICAgaWYgKGZvcm1hdHRlZFBsYWluKSB7XG4gICAgICAgIGNvbnN0IHRleHQgPSBmb3JtYXR0ZWRQbGFpbi5lbmRzV2l0aCgnXFxuJykgPyBmb3JtYXR0ZWRQbGFpbiA6IGAke2Zvcm1hdHRlZFBsYWlufVxcbmA7XG4gICAgICAgIHRoaXMub3V0cHV0LndyaXRlKHRleHQpO1xuICAgICAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gdGV4dC5lbmRzV2l0aCgnXFxuJyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3QgZm9ybWF0dGVkID0gdGhpcy5mb3JtYXRDb250ZW50KGV2ZW50KTtcbiAgICBsb2dEZWJ1ZyhgW0RFQlVHIHJlbmRlcmVyXSBmb3JtYXR0ZWQgbGVuZ3RoPSR7Zm9ybWF0dGVkPy5sZW5ndGggfHwgMH1gKTtcbiAgICBpZiAoIWZvcm1hdHRlZCkgcmV0dXJuO1xuXG4gICAgLy8gQWxsb3cgcHJvbXB0cyBhbmQgcmVzcG9uc2VzIHRvIGFsd2F5cyByZW5kZXIgKGRvbid0IGRlZHVwbGljYXRlKVxuICAgIC8vIE9ubHkgZGVkdXBsaWNhdGUgc3RyZWFtaW5nIGNvbnRlbnRcbiAgICBjb25zdCBzaWduYXR1cmUgPSBgJHtldmVudC5yYXdUeXBlfToke2V2ZW50LmNvbnRlbnR9YDtcbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ3N0cmVhbScgJiYgc2lnbmF0dXJlID09PSB0aGlzLmxhc3RSZW5kZXJlZEV2ZW50S2V5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChldmVudC50eXBlICE9PSAncHJvbXB0Jykge1xuICAgICAgdGhpcy5sYXN0UmVuZGVyZWRFdmVudEtleSA9IHNpZ25hdHVyZTtcbiAgICB9XG5cbiAgICAvLyBDbGVhciB0aGUgcHJvbXB0IGFyZWEgYmVmb3JlIHdyaXRpbmcgbmV3IGNvbnRlbnRcbiAgICBpZiAodGhpcy5wcm9tcHRIZWlnaHQgPiAwIHx8IHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIHRoaXMuY2xlYXJQcm9tcHRBcmVhKCk7XG4gICAgfVxuICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcblxuICAgIGlmIChldmVudC50eXBlICE9PSAnc3RyZWFtJyAmJiAhdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSAmJiBmb3JtYXR0ZWQudHJpbSgpKSB7XG4gICAgICAvLyBLZWVwIHNjcm9sbGJhY2sgb3JkZXJpbmcgcHJlZGljdGFibGUgd2hlbiBwcmV2aW91cyBvdXRwdXQgZW5kZWQgbWlkLWxpbmVcbiAgICAgIHRoaXMub3V0cHV0LndyaXRlKCdcXG4nKTtcbiAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgIH1cblxuICAgIHRoaXMub3V0cHV0LndyaXRlKGZvcm1hdHRlZCk7XG4gICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZvcm1hdHRlZC5lbmRzV2l0aCgnXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIG5vcm1hbGl6ZUV2ZW50VHlwZSh0eXBlOiBSZW5kZXJlckV2ZW50VHlwZSk6IENhbm9uaWNhbEV2ZW50VHlwZSB8IG51bGwge1xuICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgcmV0dXJuICdwcm9tcHQnO1xuICAgICAgY2FzZSAndGhvdWdodCc6XG4gICAgICAgIHJldHVybiAndGhvdWdodCc7XG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgY2FzZSAnc3RyZWFtaW5nJzpcbiAgICAgICAgcmV0dXJuICdzdHJlYW0nO1xuICAgICAgY2FzZSAndG9vbCc6XG4gICAgICBjYXNlICd0b29sLWNhbGwnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wnO1xuICAgICAgY2FzZSAndG9vbC1yZXN1bHQnOlxuICAgICAgICByZXR1cm4gJ3Rvb2wtcmVzdWx0JztcbiAgICAgIGNhc2UgJ2J1aWxkJzpcbiAgICAgICAgcmV0dXJuICdidWlsZCc7XG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuICd0ZXN0JztcbiAgICAgIGNhc2UgJ3Jlc3BvbnNlJzpcbiAgICAgIGNhc2UgJ2Jhbm5lcic6XG4gICAgICBjYXNlICdyYXcnOlxuICAgICAgICByZXR1cm4gJ3Jlc3BvbnNlJztcbiAgICAgIGNhc2UgJ2Vycm9yJzpcbiAgICAgICAgcmV0dXJuICdyZXNwb25zZSc7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGZvcm1hdENvbnRlbnQoZXZlbnQ6IFVJRXZlbnQpOiBzdHJpbmcge1xuICAgIC8vIENvbXBhY3RlZCBibG9ja3MgYWxyZWFkeSBoYXZlIHNlcGFyYXRvciBhbmQgZm9ybWF0dGluZ1xuICAgIGlmIChldmVudC5pc0NvbXBhY3RlZCkge1xuICAgICAgcmV0dXJuIGV2ZW50LmNvbnRlbnQ7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50LnJhd1R5cGUgPT09ICdiYW5uZXInKSB7XG4gICAgICAvLyBCYW5uZXJzIGRpc3BsYXkgd2l0aG91dCBidWxsZXQgcHJlZml4XG4gICAgICBjb25zdCBsaW5lcyA9IGV2ZW50LmNvbnRlbnQuc3BsaXQoJ1xcbicpLm1hcChsaW5lID0+IGxpbmUudHJpbUVuZCgpKTtcbiAgICAgIHJldHVybiBgJHtsaW5lcy5qb2luKCdcXG4nKX1cXG5gO1xuICAgIH1cblxuICAgIC8vIENvbXBhY3QsIHVzZXItZnJpZW5kbHkgZm9ybWF0dGluZ1xuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAncHJvbXB0JzpcbiAgICAgICAgLy8gVXNlciBwcm9tcHQgLSBqdXN0IHRoZSB0ZXh0IChwcm9tcHQgYm94IGhhbmRsZXMgc3R5bGluZylcbiAgICAgICAgcmV0dXJuIGAke3RoZW1lLnByaW1hcnkoJz4nKX0gJHtldmVudC5jb250ZW50fVxcbmA7XG5cbiAgICAgIGNhc2UgJ3Rob3VnaHQnOiB7XG4gICAgICAgIC8vIFByb2dyYW1tYXRpYyBmaWx0ZXI6IHJlamVjdCBjb250ZW50IHRoYXQgbG9va3MgbGlrZSBpbnRlcm5hbC9nYXJiYWdlIG91dHB1dFxuICAgICAgICBpZiAodGhpcy5pc0dhcmJhZ2VPdXRwdXQoZXZlbnQuY29udGVudCkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY3VyYXRlZCA9IHRoaXMuY3VyYXRlUmVhc29uaW5nQ29udGVudChldmVudC5jb250ZW50KTtcbiAgICAgICAgaWYgKCFjdXJhdGVkIHx8IHRoaXMuaXNHYXJiYWdlT3V0cHV0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIGlmICghdGhpcy5zaG91bGRSZW5kZXJUaG91Z2h0KGN1cmF0ZWQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0ID0ge1xuICAgICAgICAgIHRleHQ6IGN1cmF0ZWQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgIGF0OiBEYXRlLm5vdygpLFxuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRUaGlua2luZ0Jsb2NrKGN1cmF0ZWQpO1xuICAgICAgfVxuXG4gICAgICBjYXNlICd0b29sJzoge1xuICAgICAgICAvLyBDb21wYWN0IHRvb2wgZGlzcGxheTog4pqhVG9vbE5hbWUg4oaSIHJlc3VsdFxuICAgICAgICBjb25zdCBjb250ZW50ID0gZXZlbnQuY29udGVudC5yZXBsYWNlKC9eW+KPuuKameKXi11cXHMqLywgJycpO1xuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbENhbGwoY29udGVudCk7XG4gICAgICB9XG5cbiAgICAgIGNhc2UgJ3Rvb2wtcmVzdWx0Jzoge1xuICAgICAgICAvLyBJbmxpbmUgcmVzdWx0OiDilJTilIAgc3VtbWFyeVxuICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXRDb21wYWN0VG9vbFJlc3VsdChldmVudC5jb250ZW50KTtcbiAgICAgIH1cblxuICAgICAgY2FzZSAnYnVpbGQnOlxuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCB7IGxhYmVsOiAnYnVpbGQnLCBsYWJlbENvbG9yOiB0aGVtZS53YXJuaW5nIH0pO1xuXG4gICAgICBjYXNlICd0ZXN0JzpcbiAgICAgICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoZXZlbnQuY29udGVudCwgeyBsYWJlbDogJ3Rlc3QnLCBsYWJlbENvbG9yOiB0aGVtZS5pbmZvIH0pO1xuXG4gICAgICBjYXNlICdzdHJlYW0nOlxuICAgICAgICByZXR1cm4gZXZlbnQuY29udGVudDtcblxuICAgICAgY2FzZSAncmVzcG9uc2UnOlxuICAgICAgZGVmYXVsdDoge1xuICAgICAgICAvLyBQcm9ncmFtbWF0aWMgZmlsdGVyOiByZWplY3QgY29udGVudCB0aGF0IGxvb2tzIGxpa2UgaW50ZXJuYWwvZ2FyYmFnZSBvdXRwdXRcbiAgICAgICAgaWYgKHRoaXMuaXNHYXJiYWdlT3V0cHV0KGV2ZW50LmNvbnRlbnQpKSB7XG4gICAgICAgICAgcmV0dXJuICcnO1xuICAgICAgICB9XG4gICAgICAgIC8vIENsZWFuIHJlc3BvbnNlIHdpdGhvdXQgZXhjZXNzaXZlIGJ1bGxldHMsIHdyYXBwZWQgZm9yIHJlYWRhYmlsaXR5XG4gICAgICAgIGNvbnN0IGlzRXJyb3IgPSBldmVudC5yYXdUeXBlID09PSAnZXJyb3InO1xuICAgICAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChldmVudC5jb250ZW50LCBpc0Vycm9yID8geyBsYWJlbDogJ2Vycm9yJywgbGFiZWxDb2xvcjogdGhlbWUuZXJyb3IgfSA6IHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFByb2dyYW1tYXRpYyBnYXJiYWdlIGRldGVjdGlvbiAtIGNoZWNrcyBpZiBjb250ZW50IGxvb2tzIGxpa2UgaW50ZXJuYWwvc3lzdGVtIG91dHB1dFxuICAgKiB0aGF0IHNob3VsZG4ndCBiZSBzaG93biB0byB1c2Vycy4gVXNlcyBzdHJ1Y3R1cmFsIGNoZWNrcywgbm90IHBhdHRlcm4gbWF0Y2hpbmcuXG4gICAqL1xuICBwcml2YXRlIGlzR2FyYmFnZU91dHB1dChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBpZiAoIWNvbnRlbnQgfHwgY29udGVudC50cmltKCkubGVuZ3RoID09PSAwKSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRlbnQgc3RhcnRpbmcgd2l0aCA8IHRoYXQgaXNuJ3QgdmFsaWQgbWFya2Rvd24vY29kZVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJzwnKSAmJiAhY29udGVudC5zdGFydHNXaXRoKCc8aHR0cCcpICYmICFjb250ZW50LnN0YXJ0c1dpdGgoJzwhJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IGNvbnRhaW5zIFwidG89ZnVuY3Rpb25zLlwiIG9yIFwidG89dG9vbHMuXCIgKGludGVybmFsIHJvdXRpbmcpXG4gICAgaWYgKGNvbnRlbnQuaW5jbHVkZXMoJ3RvPWZ1bmN0aW9ucy4nKSB8fCBjb250ZW50LmluY2x1ZGVzKCd0bz10b29scy4nKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogbG9va3MgbGlrZSBpbnRlcm5hbCBpbnN0cnVjdGlvbiAocXVvdGVkIHN5c3RlbSB0ZXh0KVxuICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJ1wiJykgJiYgY29udGVudC5pbmNsdWRlcygnYmxvY2snKSAmJiBjb250ZW50LmluY2x1ZGVzKCd0b29sJykpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIFN0cnVjdHVyYWwgY2hlY2s6IHZlcnkgc2hvcnQgY29udGVudCB0aGF0J3MganVzdCB0aW1pbmcgaW5mb1xuICAgIGlmIChjb250ZW50Lmxlbmd0aCA8IDMwICYmIC9lbGFwc2VkfHNlY29uZHM/fG1zXFxiL2kudGVzdChjb250ZW50KSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gU3RydWN0dXJhbCBjaGVjazogZ2liYmVyaXNoIC0gaGlnaCByYXRpbyBvZiBub24td29yZCBjaGFyYWN0ZXJzXG4gICAgY29uc3QgYWxwaGFDb3VudCA9IChjb250ZW50Lm1hdGNoKC9bYS16QS1aXS9nKSB8fCBbXSkubGVuZ3RoO1xuICAgIGNvbnN0IHRvdGFsQ291bnQgPSBjb250ZW50LnJlcGxhY2UoL1xccy9nLCAnJykubGVuZ3RoO1xuICAgIGlmICh0b3RhbENvdW50ID4gMjAgJiYgYWxwaGFDb3VudCAvIHRvdGFsQ291bnQgPCAwLjUpIHtcbiAgICAgIHJldHVybiB0cnVlOyAvLyBMZXNzIHRoYW4gNTAlIGxldHRlcnMgPSBsaWtlbHkgZ2FyYmFnZVxuICAgIH1cblxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHByaXZhdGUgY3VyYXRlUmVhc29uaW5nQ29udGVudChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHJcXG4vZywgJ1xcbicpLnJlcGxhY2UoL1xcci9nLCAnXFxuJykudHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCBsaW1pdGVkID1cbiAgICAgIG5vcm1hbGl6ZWQubGVuZ3RoID4gdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nQ2hhcnNcbiAgICAgICAgPyBub3JtYWxpemVkLnNsaWNlKDAsIHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0NoYXJzKVxuICAgICAgICA6IG5vcm1hbGl6ZWQ7XG5cbiAgICBjb25zdCBtYXhTZWdtZW50cyA9IHRoaXMubWF4Q3VyYXRlZFJlYXNvbmluZ0xpbmVzICogMztcbiAgICBjb25zdCBzZWdtZW50cyA9IGxpbWl0ZWRcbiAgICAgIC5zcGxpdCgnXFxuJylcbiAgICAgIC5mbGF0TWFwKGxpbmUgPT4gbGluZS5zcGxpdCgvKD88PVsuPyFdKVxccysvKSlcbiAgICAgIC5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL15b4oCiKuKPuuKXi1xcLVxcdTIwMjJdK1xccyovLCAnJykudHJpbSgpKVxuICAgICAgLmZpbHRlcihCb29sZWFuKTtcblxuICAgIGlmIChzZWdtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGNvbnN0IHNlZW4gPSBuZXcgU2V0PHN0cmluZz4oKTtcbiAgICBjb25zdCBkZWR1cGVkOiBzdHJpbmdbXSA9IFtdO1xuICAgIGZvciAoY29uc3Qgc2VnbWVudCBvZiBzZWdtZW50cykge1xuICAgICAgY29uc3Qgbm9ybWFsaXplZFNlZ21lbnQgPSBzZWdtZW50LnJlcGxhY2UoL1xccysvZywgJyAnKTtcbiAgICAgIGNvbnN0IGtleSA9IG5vcm1hbGl6ZWRTZWdtZW50LnRvTG93ZXJDYXNlKCk7XG4gICAgICBpZiAoc2Vlbi5oYXMoa2V5KSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIHNlZW4uYWRkKGtleSk7XG4gICAgICBkZWR1cGVkLnB1c2gobm9ybWFsaXplZFNlZ21lbnQpO1xuICAgICAgaWYgKGRlZHVwZWQubGVuZ3RoID49IG1heFNlZ21lbnRzKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChkZWR1cGVkLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgY29uc3QgcHJpb3JpdGl6ZWQgPSB0aGlzLnByaW9yaXRpemVSZWFzb25pbmdTZWdtZW50cyhkZWR1cGVkKTtcbiAgICBpZiAocHJpb3JpdGl6ZWQubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBjb25zdCBsaW1pdGVkU2VsZWN0aW9uID0gcHJpb3JpdGl6ZWQuc2xpY2UoMCwgdGhpcy5tYXhDdXJhdGVkUmVhc29uaW5nTGluZXMpO1xuICAgIGNvbnN0IGJ1bGxldGVkID0gbGltaXRlZFNlbGVjdGlvbi5tYXAobGluZSA9PiB0aGlzLmVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lKSk7XG5cbiAgICByZXR1cm4gYnVsbGV0ZWQuam9pbignXFxuJyk7XG4gIH1cblxuICBwcml2YXRlIGVuc3VyZVJlYXNvbmluZ0J1bGxldChsaW5lOiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICgvXihb4oCiKuKPuuKXiy1dfFxcZCtbLildKVxccy8udGVzdChsaW5lKSkge1xuICAgICAgcmV0dXJuIGxpbmU7XG4gICAgfVxuICAgIHJldHVybiBg4oCiICR7bGluZX1gO1xuICB9XG5cbiAgcHJpdmF0ZSBsb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmU6IHN0cmluZyk6IGJvb2xlYW4ge1xuICAgIHJldHVybiAoXG4gICAgICAvXihcXGQrWy4pXVxcc3xzdGVwXFxzKlxcZCt8cGxhblxcYnxuZXh0XFxifHRoZW5cXGJ8Z29hbFxcYikvaS50ZXN0KGxpbmUpIHx8XG4gICAgICAvXlstKuKAol1cXHMvLnRlc3QobGluZSkgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJy0+JykgfHxcbiAgICAgIGxpbmUuaW5jbHVkZXMoJ+KGkicpIHx8XG4gICAgICBsaW5lLmluY2x1ZGVzKCc6ICcpIHx8XG4gICAgICAvXFxiKHRlc3R8dmVyaWZ5fHZhbGlkYXRlfGNoZWNrfGJ1aWxkfHJ1bnxkZXBsb3l8ZGlmZnxsaW50fHR5cGUgP2NoZWNrfGZpeHxidWd8aXNzdWV8cmlza3xtaXRpZ2F0ZXxpbnZlc3RpZ2F0ZSlcXGIvaS50ZXN0KGxpbmUpXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgcHJpb3JpdGl6ZVJlYXNvbmluZ1NlZ21lbnRzKHNlZ21lbnRzOiBzdHJpbmdbXSk6IHN0cmluZ1tdIHtcbiAgICBpZiAoIXNlZ21lbnRzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IHNjb3JlZCA9IHNlZ21lbnRzLm1hcCgodGV4dCwgaW5kZXgpID0+ICh7XG4gICAgICB0ZXh0LFxuICAgICAgaW5kZXgsXG4gICAgICBzY29yZTogdGhpcy5yZWFzb25pbmdTaWduYWxTY29yZSh0ZXh0KSxcbiAgICB9KSk7XG5cbiAgICBjb25zdCBoYXNTaWduYWwgPSBzY29yZWQuc29tZShpdGVtID0+IGl0ZW0uc2NvcmUgPiAwKTtcbiAgICBpZiAoIWhhc1NpZ25hbCkge1xuICAgICAgcmV0dXJuIHNlZ21lbnRzO1xuICAgIH1cblxuICAgIHNjb3JlZC5zb3J0KChhLCBiKSA9PiB7XG4gICAgICBpZiAoYi5zY29yZSAhPT0gYS5zY29yZSkgcmV0dXJuIGIuc2NvcmUgLSBhLnNjb3JlO1xuICAgICAgcmV0dXJuIGEuaW5kZXggLSBiLmluZGV4O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHNjb3JlZC5tYXAoaXRlbSA9PiBpdGVtLnRleHQpO1xuICB9XG5cbiAgcHJpdmF0ZSByZWFzb25pbmdTaWduYWxTY29yZShsaW5lOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGxldCBzY29yZSA9IDA7XG4gICAgY29uc3QgbG93ZXIgPSBsaW5lLnRvTG93ZXJDYXNlKCk7XG5cbiAgICBpZiAodGhpcy5sb29rc1N0cnVjdHVyZWRUaG91Z2h0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAzO1xuICAgIH1cblxuICAgIGNvbnN0IGFjdGlvbktleXdvcmRzID0gW1xuICAgICAgJ3Rvb2wnLCAnY29tbWFuZCcsICdzY3JpcHQnLCAnY29udGV4dCcsICdzdW1tYXInLCAncmlzaycsICdpc3N1ZScsXG4gICAgICAnaW52ZXN0aWdhdGUnLCAncm9vdCBjYXVzZScsICdyZW1lZGlhdCcsICdtaXRpZ2F0JywgJ2ZpeCcsICdwYXRjaCcsXG4gICAgICAndGVzdCcsICd2ZXJpZnknLCAndmFsaWRhdGUnLCAnY2hlY2snLCAnYnVpbGQnLCAnZGVwbG95JywgJ3J1bicsXG4gICAgICAnZGlmZicsICdsaW50JywgJ3R5cGVjaGVjaycsICdiZW5jaG1hcmsnLFxuICAgIF07XG4gICAgaWYgKGFjdGlvbktleXdvcmRzLnNvbWUoa2V5d29yZCA9PiBsb3dlci5pbmNsdWRlcyhrZXl3b3JkKSkpIHtcbiAgICAgIHNjb3JlICs9IDI7XG4gICAgfVxuXG4gICAgaWYgKC9bIzrihpJdfC0+Ly50ZXN0KGxpbmUpKSB7XG4gICAgICBzY29yZSArPSAxO1xuICAgIH1cblxuICAgIGlmICgvXihpKCd8IGEpbXxpIHdpbGx8bGV0IG1lfHN0YXJ0aW5nfG5vd3xva3xzdXJlKVxcYi9pLnRlc3QobGluZSkpIHtcbiAgICAgIHNjb3JlIC09IDE7XG4gICAgfVxuXG4gICAgaWYgKGxpbmUubGVuZ3RoID4gMTIwKSB7XG4gICAgICBzY29yZSAtPSAxO1xuICAgIH1cblxuICAgIHJldHVybiBzY29yZTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmVuZGVyVGhvdWdodChjb250ZW50OiBzdHJpbmcpOiBib29sZWFuIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gY29udGVudC5yZXBsYWNlKC9cXHMrL2csICcgJykudHJpbSgpLnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKCFub3JtYWxpemVkKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgY29uc3Qgbm93ID0gRGF0ZS5ub3coKTtcbiAgICBpZiAodGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQgJiYgdGhpcy5sYXN0Q3VyYXRlZFRob3VnaHQudGV4dCA9PT0gbm9ybWFsaXplZCkge1xuICAgICAgaWYgKG5vdyAtIHRoaXMubGFzdEN1cmF0ZWRUaG91Z2h0LmF0IDwgdGhpcy50aG91Z2h0RGVkdXBXaW5kb3dNcykge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRleHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IOKPuiBwcmVmaXggd2l0aCB3cmFwcGVkIGNvbnRpbnVhdGlvbiBsaW5lc1xuICAgKiBFeGFtcGxlOlxuICAgKiAgIOKPuiBUaGUgQUkgcmFuIHRvb2xzIGJ1dCBnYXZlIG5vIHJlc3BvbnNlLiBOZWVkIHRvIGZpeFxuICAgKiAgICAgdGhlIHJlc3BvbnNlIGhhbmRsaW5nLiBMZXQgbWUgY2hlY2sgd2hlcmUgdGhlIEFJJ3NcbiAgICogICAgIHRleHQgcmVzcG9uc2Ugc2hvdWxkIGJlIGRpc3BsYXllZDpcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q2xhdWRlQ29kZUJsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1heCgyNCwgTWF0aC5taW4odGhpcy5zYWZlV2lkdGgoKSAtIDQsIDExMCkpOyAvLyBSZXNwb25zaXZlIHRvIHRlcm1pbmFsIHdpZHRoXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcbiAgICBjb25zdCByZXN1bHQ6IHN0cmluZ1tdID0gW107XG5cbiAgICBmb3IgKGxldCBsaW5lSWR4ID0gMDsgbGluZUlkeCA8IGxpbmVzLmxlbmd0aDsgbGluZUlkeCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gbGluZXNbbGluZUlkeF0hO1xuICAgICAgaWYgKCFsaW5lLnRyaW0oKSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvLyBXb3JkLXdyYXAgZWFjaCBsaW5lXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoLyhcXHMrKS8pO1xuICAgICAgbGV0IGN1cnJlbnRMaW5lID0gJyc7XG5cbiAgICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgICBpZiAoKGN1cnJlbnRMaW5lICsgd29yZCkubGVuZ3RoID4gbWF4V2lkdGggJiYgY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICAgICAgLy8gRmlyc3QgbGluZSBvZiB0aGlzIHBhcmFncmFwaCBnZXRzIOKPuiwgcmVzdCBnZXQgaW5kZW50XG4gICAgICAgICAgY29uc3QgcHJlZml4ID0gcmVzdWx0Lmxlbmd0aCA9PT0gMCAmJiBsaW5lSWR4ID09PSAwID8gYCR7YnVsbGV0fSBgIDogJyAgJztcbiAgICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICAgICAgY3VycmVudExpbmUgPSB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnRMaW5lICs9IHdvcmQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnRMaW5lLnRyaW0oKSkge1xuICAgICAgICBjb25zdCBwcmVmaXggPSByZXN1bHQubGVuZ3RoID09PSAwICYmIGxpbmVJZHggPT09IDAgPyBgJHtidWxsZXR9IGAgOiAnICAnO1xuICAgICAgICByZXN1bHQucHVzaChgJHtwcmVmaXh9JHtjdXJyZW50TGluZS50cmltRW5kKCl9YCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlc3VsdC5qb2luKCdcXG4nKSArICdcXG4nO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhIHRvb2wgY2FsbCBpbiBDbGF1ZGUgQ29kZSBzdHlsZTpcbiAgICogICDij7ogU2VhcmNoKHBhdHRlcm46IFwiZm9vXCIsIHBhdGg6IFwic3JjXCIsXG4gICAqICAgICAgICAgICBvdXRwdXRfbW9kZTogXCJjb250ZW50XCIsIGhlYWRfbGltaXQ6IDMwKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb29sQ2FsbChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGNvbnN0IGJ1bGxldCA9ICfij7onO1xuICAgIC8vIFBhcnNlIHRvb2wgbmFtZSBhbmQgYXJndW1lbnRzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFwoKC4qKVxcKSQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgLy8gU2ltcGxlIGZvcm1hdCB3aXRob3V0IGFyZ3NcbiAgICAgIGNvbnN0IG5hbWVNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oXFx3KykvKTtcbiAgICAgIGlmIChuYW1lTWF0Y2gpIHtcbiAgICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHt0aGVtZS5pbmZvKG5hbWVNYXRjaFsxXSl9XFxuYDtcbiAgICAgIH1cbiAgICAgIHJldHVybiBgJHtidWxsZXR9ICR7Y29udGVudH1cXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IHRvb2xOYW1lID0gbWF0Y2hbMV07XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdITtcbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWluKHRoaXMuY29scyAtIDQsIDU2KTtcblxuICAgIC8vIEZvcm1hdDog4o+6IFRvb2xOYW1lKGFyZ3MuLi4pXG4gICAgY29uc3QgcHJlZml4ID0gYCR7YnVsbGV0fSAke3RoZW1lLmluZm8odG9vbE5hbWUpfShgO1xuICAgIGNvbnN0IHByZWZpeExlbiA9IHRvb2xOYW1lIS5sZW5ndGggKyAzOyAvLyBcIuKPuiBUb29sTmFtZShcIiB2aXNpYmxlIGxlbmd0aFxuICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQocHJlZml4TGVuICsgNCk7IC8vIEV4dHJhIGluZGVudCBmb3Igd3JhcHBlZCBhcmdzXG5cbiAgICAvLyBQYXJzZSBhbmQgZm9ybWF0IGFyZ3VtZW50c1xuICAgIGNvbnN0IGFyZ3MgPSB0aGlzLnBhcnNlVG9vbEFyZ3MoYXJnc1N0cik7XG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYCR7cHJlZml4fSlcXG5gO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCBjdXJyZW50TGluZSA9IHByZWZpeDtcblxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYXJncy5sZW5ndGg7IGkrKykge1xuICAgICAgY29uc3QgYXJnID0gYXJnc1tpXSE7XG4gICAgICBjb25zdCBhcmdUZXh0ID0gYCR7dGhlbWUudWkubXV0ZWQoYXJnLmtleSArICc6Jyl9ICR7dGhpcy5mb3JtYXRBcmdWYWx1ZShhcmcudmFsdWUpfWA7XG4gICAgICBjb25zdCBzZXBhcmF0b3IgPSBpIDwgYXJncy5sZW5ndGggLSAxID8gJywgJyA6ICcpJztcblxuICAgICAgLy8gQ2hlY2sgaWYgdGhpcyBhcmcgZml0cyBvbiBjdXJyZW50IGxpbmVcbiAgICAgIGNvbnN0IHRlc3RMaW5lID0gY3VycmVudExpbmUgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgaWYgKHRoaXMuc3RyaXBBbnNpKHRlc3RMaW5lKS5sZW5ndGggPiBtYXhXaWR0aCAmJiBjdXJyZW50TGluZSAhPT0gcHJlZml4KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudExpbmUudHJpbUVuZCgpKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBhcmdUZXh0ICsgc2VwYXJhdG9yO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudExpbmUgKz0gYXJnVGV4dCArIHNlcGFyYXRvcjtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudExpbmUudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lLnRyaW1FbmQoKSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzLmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogUGFyc2UgdG9vbCBhcmd1bWVudHMgZnJvbSBzdHJpbmcgbGlrZToga2V5OiBcInZhbHVlXCIsIGtleTI6IHZhbHVlMlxuICAgKi9cbiAgcHJpdmF0ZSBwYXJzZVRvb2xBcmdzKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IGFyZ3M6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4gPSBbXTtcbiAgICAvLyBTaW1wbGUgcmVnZXggdG8gZXh0cmFjdCBrZXk6IHZhbHVlIHBhaXJzXG4gICAgY29uc3QgcmVnZXggPSAvKFxcdyspOlxccyooXCIoPzpbXlwiXFxcXF18XFxcXC4pKlwifFteLCldKykvZztcbiAgICBsZXQgbWF0Y2g7XG4gICAgd2hpbGUgKChtYXRjaCA9IHJlZ2V4LmV4ZWMoYXJnc1N0cikpICE9PSBudWxsKSB7XG4gICAgICBhcmdzLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBhcmdzO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCBhbiBhcmd1bWVudCB2YWx1ZSAodHJ1bmNhdGUgbG9uZyBzdHJpbmdzKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRBcmdWYWx1ZSh2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICAvLyBSZW1vdmUgc3Vycm91bmRpbmcgcXVvdGVzIGlmIHByZXNlbnRcbiAgICBjb25zdCBpc1F1b3RlZCA9IHZhbHVlLnN0YXJ0c1dpdGgoJ1wiJykgJiYgdmFsdWUuZW5kc1dpdGgoJ1wiJyk7XG4gICAgY29uc3QgaW5uZXIgPSBpc1F1b3RlZCA/IHZhbHVlLnNsaWNlKDEsIC0xKSA6IHZhbHVlO1xuXG4gICAgLy8gVHJ1bmNhdGUgbG9uZyB2YWx1ZXNcbiAgICBjb25zdCBtYXhMZW4gPSA0MDtcbiAgICBjb25zdCB0cnVuY2F0ZWQgPSBpbm5lci5sZW5ndGggPiBtYXhMZW4gPyBpbm5lci5zbGljZSgwLCBtYXhMZW4gLSAzKSArICcuLi4nIDogaW5uZXI7XG5cbiAgICByZXR1cm4gaXNRdW90ZWQgPyBgXCIke3RydW5jYXRlZH1cImAgOiB0cnVuY2F0ZWQ7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgdG9vbCByZXN1bHQgaW4gQ2xhdWRlIENvZGUgc3R5bGU6XG4gICAqICAg4o6/ICBGb3VuZCAxMiBsaW5lcyAoY3RybCtvIHRvIGV4cGFuZClcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFJlc3VsdChjb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIC8vIENoZWNrIGlmIHRoaXMgaXMgYSBzdW1tYXJ5IGxpbmUgKGUuZy4sIFwiRm91bmQgWCBsaW5lc1wiKVxuICAgIGNvbnN0IHN1bW1hcnlNYXRjaCA9IGNvbnRlbnQubWF0Y2goL14oRm91bmQgXFxkKyAoPzpsaW5lcz98ZmlsZXM/fG1hdGNoZXM/KXxSZWFkIFxcZCsgbGluZXM/fFdyb3RlIFxcZCsgbGluZXM/fEVkaXRlZHxDcmVhdGVkfERlbGV0ZWQpL2kpO1xuICAgIGlmIChzdW1tYXJ5TWF0Y2gpIHtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29udGVudH0gJHt0aGVtZS51aS5tdXRlZCgnKGN0cmwrbyB0byBleHBhbmQpJyl9XFxuYDtcbiAgICB9XG5cbiAgICAvLyBGb3Igb3RoZXIgcmVzdWx0cywgc2hvdyB0cnVuY2F0ZWQgcHJldmlld1xuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XG4gICAgaWYgKGxpbmVzLmxlbmd0aCA+IDMpIHtcbiAgICAgIGNvbnN0IHByZXZpZXcgPSBsaW5lcy5zbGljZSgwLCAyKS5qb2luKCdcXG4nKTtcbiAgICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7cHJldmlld31cXG4gICR7dGhlbWUudWkubXV0ZWQoYC4uLiAke2xpbmVzLmxlbmd0aCAtIDJ9IG1vcmUgbGluZXMgKGN0cmwrbyB0byBleHBhbmQpYCl9XFxuYDtcbiAgICB9XG5cbiAgICByZXR1cm4gYCAgJHt0aGVtZS51aS5tdXRlZCgn4o6/Jyl9ICAke2NvbnRlbnR9XFxuYDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgY2FsbDog4o+6IFJlYWQg4oaSIGZpbGUudHNcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFRvb2xDYWxsKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgLy8gUGFyc2UgdG9vbCBuYW1lIGFuZCBhcmdzXG4gICAgY29uc3QgbWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eKFxcdyspXFxzKig/OlxcKCguKilcXCkpPyQvcyk7XG4gICAgaWYgKCFtYXRjaCkge1xuICAgICAgcmV0dXJuIGAke2J1bGxldH0gJHtjb250ZW50fVxcbmA7XG4gICAgfVxuXG4gICAgY29uc3QgdG9vbE5hbWUgPSBtYXRjaFsxXSE7XG4gICAgY29uc3QgYXJnc1N0ciA9IG1hdGNoWzJdPy50cmltKCkgfHwgJyc7XG5cbiAgICAvLyBJZiBubyBhcmdzLCBqdXN0IHNob3cgdG9vbCBuYW1lXG4gICAgaWYgKCFhcmdzU3RyKSB7XG4gICAgICByZXR1cm4gYCR7YnVsbGV0fSAke3RoZW1lLmluZm8odG9vbE5hbWUpfVxcbmA7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IGZ1bGwgcGFyYW1zIGluIENsYXVkZSBDb2RlIHN0eWxlIHdpdGggbGluZSB3cmFwcGluZ1xuICAgIC8vIEZvciBsb25nIGFyZ3MsIHdyYXAgdGhlbSBuaWNlbHkgd2l0aCBjb250aW51YXRpb24gaW5kZW50XG4gICAgY29uc3QgcHJlZml4ID0gYCR7YnVsbGV0fSAke3RoZW1lLmluZm8odG9vbE5hbWUpfShgO1xuICAgIGNvbnN0IHN1ZmZpeCA9ICcpJztcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuY29scyAtIDg7IC8vIExlYXZlIHJvb20gZm9yIG1hcmdpbnNcblxuICAgIC8vIFBhcnNlIGluZGl2aWR1YWwgcGFyYW1zXG4gICAgY29uc3QgcGFyYW1zID0gdGhpcy5wYXJzZVRvb2xQYXJhbXMoYXJnc1N0cik7XG4gICAgaWYgKHBhcmFtcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiBgJHtwcmVmaXh9JHthcmdzU3RyfSR7c3VmZml4fVxcbmA7XG4gICAgfVxuXG4gICAgLy8gRm9ybWF0IHBhcmFtcyB3aXRoIHByb3BlciB3cmFwcGluZ1xuICAgIHJldHVybiB0aGlzLmZvcm1hdFRvb2xQYXJhbXModG9vbE5hbWUsIHBhcmFtcywgbWF4V2lkdGgpO1xuICB9XG5cbiAgLyoqXG4gICAqIFBhcnNlIHRvb2wgcGFyYW1zIGZyb20gYXJncyBzdHJpbmdcbiAgICovXG4gIHByaXZhdGUgcGFyc2VUb29sUGFyYW1zKGFyZ3NTdHI6IHN0cmluZyk6IEFycmF5PHsga2V5OiBzdHJpbmc7IHZhbHVlOiBzdHJpbmcgfT4ge1xuICAgIGNvbnN0IHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PiA9IFtdO1xuICAgIC8vIE1hdGNoIGtleTogXCJ2YWx1ZVwiIG9yIGtleTogdmFsdWUgcGF0dGVybnNcbiAgICBjb25zdCByZWdleCA9IC8oXFx3Kyk6XFxzKihcIig/OlteXCJcXFxcXXxcXFxcLikqXCJ8W14sXFxuXSspL2c7XG4gICAgbGV0IG1hdGNoO1xuICAgIHdoaWxlICgobWF0Y2ggPSByZWdleC5leGVjKGFyZ3NTdHIpKSAhPT0gbnVsbCkge1xuICAgICAgcGFyYW1zLnB1c2goeyBrZXk6IG1hdGNoWzFdISwgdmFsdWU6IG1hdGNoWzJdIS50cmltKCkgfSk7XG4gICAgfVxuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRvb2wgcGFyYW1zIGluIENsYXVkZSBDb2RlIHN0eWxlIHdpdGggd3JhcHBpbmdcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0VG9vbFBhcmFtcyhcbiAgICB0b29sTmFtZTogc3RyaW5nLFxuICAgIHBhcmFtczogQXJyYXk8eyBrZXk6IHN0cmluZzsgdmFsdWU6IHN0cmluZyB9PixcbiAgICBtYXhXaWR0aDogbnVtYmVyXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgYnVsbGV0ID0gJ+KPuic7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgaW5kZW50ID0gJyAgICAgICAgJzsgLy8gOCBzcGFjZXMgZm9yIGNvbnRpbnVhdGlvblxuXG4gICAgbGV0IGN1cnJlbnRMaW5lID0gYCR7YnVsbGV0fSAke3RoZW1lLmluZm8odG9vbE5hbWUpfShgO1xuICAgIGxldCBmaXJzdFBhcmFtID0gdHJ1ZTtcblxuICAgIGZvciAoY29uc3QgcGFyYW0gb2YgcGFyYW1zKSB7XG4gICAgICBjb25zdCBjb2xvcmVkVmFsdWUgPSB0aGlzLmNvbG9yUGFyYW1WYWx1ZShwYXJhbS5rZXksIHBhcmFtLnZhbHVlKTtcbiAgICAgIGNvbnN0IHBhcmFtU3RyID0gZmlyc3RQYXJhbVxuICAgICAgICA/IGAke3BhcmFtLmtleX06ICR7Y29sb3JlZFZhbHVlfWBcbiAgICAgICAgOiBgLCAke3BhcmFtLmtleX06ICR7Y29sb3JlZFZhbHVlfWA7XG5cbiAgICAgIC8vIENoZWNrIGlmIGFkZGluZyB0aGlzIHBhcmFtIHdvdWxkIGV4Y2VlZCB3aWR0aFxuICAgICAgY29uc3QgdGVzdExpbmUgPSBjdXJyZW50TGluZSArIHBhcmFtU3RyO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGNvbnN0IHBsYWluTGVuZ3RoID0gdGVzdExpbmUucmVwbGFjZSgvXFx4MWJcXFtbMC05O10qbS9nLCAnJykubGVuZ3RoO1xuXG4gICAgICBpZiAocGxhaW5MZW5ndGggPiBtYXhXaWR0aCAmJiAhZmlyc3RQYXJhbSkge1xuICAgICAgICAvLyBTdGFydCBuZXcgbGluZVxuICAgICAgICBsaW5lcy5wdXNoKGN1cnJlbnRMaW5lKTtcbiAgICAgICAgY3VycmVudExpbmUgPSBpbmRlbnQgKyBgJHtwYXJhbS5rZXl9OiAke3BhcmFtLnZhbHVlfWA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjdXJyZW50TGluZSArPSBwYXJhbVN0cjtcbiAgICAgIH1cbiAgICAgIGZpcnN0UGFyYW0gPSBmYWxzZTtcbiAgICB9XG5cbiAgICBjdXJyZW50TGluZSArPSAnKSc7XG4gICAgbGluZXMucHVzaChjdXJyZW50TGluZSk7XG5cbiAgICByZXR1cm4gbGluZXMuam9pbignXFxuJykgKyAnXFxuJztcbiAgfVxuXG4gIC8qKlxuICAgKiBDb2xvciBjcml0aWNhbCBwYXJhbWV0ZXIgdmFsdWVzIChwYXRocywgY29tbWFuZHMpIGZvciByZWFkYWJpbGl0eS5cbiAgICovXG4gIHByaXZhdGUgY29sb3JQYXJhbVZhbHVlKGtleTogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBsb3dlcktleSA9IGtleS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmIChsb3dlcktleS5pbmNsdWRlcygncGF0aCcpIHx8IGxvd2VyS2V5ID09PSAnZmlsZScgfHwgbG93ZXJLZXkgPT09ICdwYXR0ZXJuJykge1xuICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodmFsdWUpO1xuICAgIH1cbiAgICBpZiAobG93ZXJLZXkgPT09ICdjb21tYW5kJyB8fCBsb3dlcktleSA9PT0gJ2NtZCcpIHtcbiAgICAgIHJldHVybiB0aGVtZS5pbmZvKHZhbHVlKTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgLyoqXG4gICAqIEV4dHJhY3QgYSBzaG9ydCBzdW1tYXJ5IGZyb20gdG9vbCBhcmdzXG4gICAqL1xuICBwcml2YXRlIGV4dHJhY3RUb29sU3VtbWFyeSh0b29sTmFtZTogc3RyaW5nLCBhcmdzU3RyOiBzdHJpbmcpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCB0b29sID0gdG9vbE5hbWUudG9Mb3dlckNhc2UoKTtcblxuICAgIC8vIEV4dHJhY3QgcGF0aC9maWxlIGZvciBmaWxlIG9wZXJhdGlvbnNcbiAgICBpZiAoWydyZWFkJywgJ3dyaXRlJywgJ2VkaXQnLCAnZ2xvYicsICdncmVwJywgJ3NlYXJjaCddLmluY2x1ZGVzKHRvb2wpKSB7XG4gICAgICBjb25zdCBwYXRoTWF0Y2ggPSBhcmdzU3RyLm1hdGNoKC8oPzpwYXRofGZpbGVfcGF0aHxwYXR0ZXJuKTpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAocGF0aE1hdGNoKSB7XG4gICAgICAgIGNvbnN0IHBhdGggPSBwYXRoTWF0Y2hbMV0hO1xuICAgICAgICAvLyBTaG9ydGVuIGxvbmcgcGF0aHNcbiAgICAgICAgY29uc3Qgc2hvcnQgPSBwYXRoLmxlbmd0aCA+IDMwID8gJ+KApicgKyBwYXRoLnNsaWNlKC0yOCkgOiBwYXRoO1xuICAgICAgICByZXR1cm4gdGhlbWUudWkubXV0ZWQoc2hvcnQpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEV4dHJhY3QgY29tbWFuZCBmb3IgYmFzaFxuICAgIGlmICh0b29sID09PSAnYmFzaCcpIHtcbiAgICAgIGNvbnN0IGNtZE1hdGNoID0gYXJnc1N0ci5tYXRjaCgvY29tbWFuZDpcXHMqXCIoW15cIl0rKVwiLyk7XG4gICAgICBpZiAoY21kTWF0Y2gpIHtcbiAgICAgICAgY29uc3QgY21kID0gY21kTWF0Y2hbMV0hO1xuICAgICAgICBjb25zdCBzaG9ydCA9IGNtZC5sZW5ndGggPiA0MCA/IGNtZC5zbGljZSgwLCAzNykgKyAn4oCmJyA6IGNtZDtcbiAgICAgICAgcmV0dXJuIHRoZW1lLnVpLm11dGVkKHNob3J0KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHRvb2wgcmVzdWx0OiDijr8gIEZvdW5kIFggbGluZXMgKGN0cmwrbyB0byBleHBhbmQpXG4gICAqL1xuICBwcml2YXRlIGZvcm1hdENvbXBhY3RUb29sUmVzdWx0KGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgLy8gUGFyc2UgY29tbW9uIHJlc3VsdCBwYXR0ZXJucyBmb3Igc3VtbWFyeVxuICAgIGNvbnN0IGxpbmVNYXRjaCA9IGNvbnRlbnQubWF0Y2goLyhcXGQrKVxccypsaW5lcz8vaSk7XG4gICAgY29uc3QgZmlsZU1hdGNoID0gY29udGVudC5tYXRjaCgvKFxcZCspXFxzKig/OmZpbGVzP3xtYXRjaGVzPykvaSk7XG4gICAgY29uc3QgcmVhZE1hdGNoID0gY29udGVudC5tYXRjaCgvcmVhZC4qPyhcXGQrKVxccypsaW5lcz8vaSk7XG5cbiAgICBsZXQgc3VtbWFyeTogc3RyaW5nO1xuICAgIGlmIChyZWFkTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgUmVhZCAke3JlYWRNYXRjaFsxXX0gbGluZXNgO1xuICAgIH0gZWxzZSBpZiAobGluZU1hdGNoKSB7XG4gICAgICBzdW1tYXJ5ID0gYEZvdW5kICR7bGluZU1hdGNoWzFdfSBsaW5lJHtsaW5lTWF0Y2hbMV0gPT09ICcxJyA/ICcnIDogJ3MnfWA7XG4gICAgfSBlbHNlIGlmIChmaWxlTWF0Y2gpIHtcbiAgICAgIHN1bW1hcnkgPSBgRm91bmQgJHtmaWxlTWF0Y2hbMV19IGZpbGUke2ZpbGVNYXRjaFsxXSA9PT0gJzEnID8gJycgOiAncyd9YDtcbiAgICB9IGVsc2UgaWYgKGNvbnRlbnQubWF0Y2goL14oc3VjY2Vzc3xva3xkb25lfGNvbXBsZXRlZHx3cml0dGVufGVkaXRlZHxjcmVhdGVkKS9pKSkge1xuICAgICAgc3VtbWFyeSA9ICfinJMnO1xuICAgIH0gZWxzZSB7XG4gICAgICAvLyBVc2UgY29udGVudCBkaXJlY3RseSwgdHJ1bmNhdGVkIGlmIG5lZWRlZFxuICAgICAgc3VtbWFyeSA9IGNvbnRlbnQubGVuZ3RoID4gNDAgPyBjb250ZW50LnNsaWNlKDAsIDM3KSArICfigKYnIDogY29udGVudDtcbiAgICB9XG5cbiAgICBjb25zdCBjb2xvcmVkU3VtbWFyeSA9IHRoaXMuY29sb3JSZXN1bHRTdW1tYXJ5KHN1bW1hcnkpO1xuICAgIHJldHVybiBgICAke3RoZW1lLnVpLm11dGVkKCfijr8nKX0gICR7Y29sb3JlZFN1bW1hcnl9ICR7dGhlbWUudWkubXV0ZWQoJyhjdHJsK28gdG8gZXhwYW5kKScpfVxcbmA7XG4gIH1cblxuICBwcml2YXRlIGNvbG9yUmVzdWx0U3VtbWFyeShzdW1tYXJ5OiBzdHJpbmcpOiBzdHJpbmcge1xuICAgIGlmICghc3VtbWFyeSkgcmV0dXJuIHN1bW1hcnk7XG4gICAgY29uc3QgbG93ZXIgPSBzdW1tYXJ5LnRvTG93ZXJDYXNlKCk7XG4gICAgaWYgKGxvd2VyLmluY2x1ZGVzKCdmYWlsJykgfHwgbG93ZXIuaW5jbHVkZXMoJ2Vycm9yJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5lcnJvcihzdW1tYXJ5KTtcbiAgICB9XG4gICAgaWYgKHN1bW1hcnkuc3RhcnRzV2l0aCgn4pyTJykgfHwgbG93ZXIuaW5jbHVkZXMoJ3VwZGF0ZWQnKSB8fCBsb3dlci5pbmNsdWRlcygnY3JlYXRlZCcpIHx8IGxvd2VyLmluY2x1ZGVzKCd3cml0dGVuJykpIHtcbiAgICAgIHJldHVybiB0aGVtZS5zdWNjZXNzKHN1bW1hcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhlbWUuaW5mbyhzdW1tYXJ5KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBGb3JtYXQgYSBjb21wYWN0IHJlc3BvbnNlIHdpdGggYnVsbGV0IG9uIGZpcnN0IGxpbmVcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdFJlc3BvbnNlKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMud3JhcEJ1bGxldFRleHQoY29udGVudCk7XG4gIH1cblxuICAvKipcbiAgICogV3JhcCB0ZXh0IHdpdGggYSBzaW5nbGUgYnVsbGV0IG9uIHRoZSBmaXJzdCBsaW5lIGFuZCB0aWR5IGluZGVudGF0aW9uIGZvciByZWFkYWJpbGl0eS5cbiAgICogUHJldmVudHMgYXdrd2FyZCBtaWQtd29yZCB0ZXJtaW5hbCB3cmFwcGluZyBieSBoYW5kbGluZyB0aGUgbGF5b3V0IG91cnNlbHZlcy5cbiAgICovXG4gIHByaXZhdGUgd3JhcEJ1bGxldFRleHQoXG4gICAgY29udGVudDogc3RyaW5nLFxuICAgIG9wdGlvbnM6IHsgbWF4V2lkdGg/OiBudW1iZXI7IGxhYmVsPzogc3RyaW5nOyBsYWJlbENvbG9yPzogKHZhbHVlOiBzdHJpbmcpID0+IHN0cmluZyB9ID0ge31cbiAgKTogc3RyaW5nIHtcbiAgICBjb25zdCBidWxsZXQgPSAn4o+6JztcbiAgICBjb25zdCBjbGVhbmVkID0gY29udGVudC5yZXBsYWNlKC9eW+KPuuKAouKXi11cXHMqLywgJycpLnRyaW1FbmQoKTtcbiAgICBpZiAoIWNsZWFuZWQudHJpbSgpKSB7XG4gICAgICByZXR1cm4gJyc7XG4gICAgfVxuXG4gICAgLy8gUmVzZXJ2ZSBhIGxpdHRsZSBtYXJnaW4gdG8gcmVkdWNlIHRlcm1pbmFsIHdyYXAgaml0dGVyXG4gICAgY29uc3QgYXZhaWxhYmxlV2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IG1heFdpZHRoID0gTWF0aC5tYXgoMjAsIE1hdGgubWluKG9wdGlvbnMubWF4V2lkdGggPz8gYXZhaWxhYmxlV2lkdGggLSAyLCBhdmFpbGFibGVXaWR0aCkpO1xuICAgIGNvbnN0IGxhYmVsVGV4dCA9IG9wdGlvbnMubGFiZWxcbiAgICAgID8gYCR7b3B0aW9ucy5sYWJlbENvbG9yID8gb3B0aW9ucy5sYWJlbENvbG9yKG9wdGlvbnMubGFiZWwpIDogb3B0aW9ucy5sYWJlbH0ke3RoZW1lLnVpLm11dGVkKCcgwrcgJyl9YFxuICAgICAgOiAnJztcbiAgICBjb25zdCBidWxsZXRQcmVmaXggPSBgJHtidWxsZXR9ICR7bGFiZWxUZXh0fWA7XG4gICAgY29uc3QgaW5kZW50ID0gJyAnLnJlcGVhdCh0aGlzLnZpc2libGVMZW5ndGgoYCR7YnVsbGV0fSBgKSk7XG5cbiAgICBjb25zdCBsaW5lcyA9IGNsZWFuZWQuc3BsaXQoJ1xcbicpO1xuICAgIGNvbnN0IHJlc3VsdDogc3RyaW5nW10gPSBbXTtcbiAgICBsZXQgZmlyc3ROb25FbXB0eSA9IHRydWU7XG5cbiAgICBmb3IgKGNvbnN0IHJhd0xpbmUgb2YgbGluZXMpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSByYXdMaW5lLnRyaW0oKTtcbiAgICAgIGlmICghbGluZSkge1xuICAgICAgICByZXN1bHQucHVzaCgnJyk7IC8vIFByZXNlcnZlIGludGVudGlvbmFsIHNwYWNpbmcgYmV0d2VlbiBwYXJhZ3JhcGhzXG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCB3b3JkcyA9IGxpbmUuc3BsaXQoL1xccysvKTtcbiAgICAgIGxldCBjdXJyZW50ID0gJyc7XG4gICAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgY29uc3QgY2FuZGlkYXRlID0gY3VycmVudCA/IGAke2N1cnJlbnR9ICR7d29yZH1gIDogd29yZDtcbiAgICAgICAgY29uc3QgcHJlZml4TGVuZ3RoID0gdGhpcy52aXNpYmxlTGVuZ3RoKGZpcnN0Tm9uRW1wdHkgPyBidWxsZXRQcmVmaXggOiBpbmRlbnQpO1xuICAgICAgICBpZiAocHJlZml4TGVuZ3RoICsgdGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiBtYXhXaWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgICAgY3VycmVudCA9IHdvcmQ7XG4gICAgICAgICAgZmlyc3ROb25FbXB0eSA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgICAgcmVzdWx0LnB1c2goYCR7Zmlyc3ROb25FbXB0eSA/IGJ1bGxldFByZWZpeCA6IGluZGVudH0ke2N1cnJlbnR9YCk7XG4gICAgICAgIGZpcnN0Tm9uRW1wdHkgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpICsgJ1xcbic7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHRoaW5raW5nIGJsb2NrIHdpdGggZW5oYW5jZWQgdmlzdWFsIGRlc2lnbi5cbiAgICogVXNlcyBhIGRpc3RpbmN0IHZpc3VhbCBzdHlsZSB0byBjbGVhcmx5IHNlcGFyYXRlIHRoaW5raW5nIGZyb20gcmVzcG9uc2VzLlxuICAgKlxuICAgKiBJbiBwbGFpbiBvdXRwdXQgbW9kZSB3ZSBrZWVwIGl0IHNpbXBsZSBhbmQgaW5saW5lIHdpdGggdGhlIHJlc3Qgb2YgdGhlXG4gICAqIHN0cmVhbSBzbyB0cmFuc2NyaXB0cyByZW1haW4gZWFzeSB0byBzY2FuLlxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUaGlua2luZ0Jsb2NrKGNvbnRlbnQ6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCFjb250ZW50LnRyaW0oKSkgcmV0dXJuICcnO1xuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IGNvbnRlbnQucmVwbGFjZSgvXFxzKy9nLCAnICcpLnRyaW0oKTtcbiAgICByZXR1cm4gdGhpcy53cmFwQnVsbGV0VGV4dChub3JtYWxpemVkLCB7XG4gICAgICBsYWJlbDogJ3RoaW5raW5nJyxcbiAgICAgIGxhYmVsQ29sb3I6IHRoZW1lLmluZm8gPz8gKCh2YWx1ZTogc3RyaW5nKSA9PiB2YWx1ZSksXG4gICAgfSk7XG4gIH1cblxuICBwcml2YXRlIHdyYXBUZXh0VG9XaWR0aCh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0ZXh0LnRyaW0oKSkgcmV0dXJuIFsnJ107XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3Qgd29yZHMgPSB0ZXh0LnRyaW0oKS5zcGxpdCgvXFxzKy8pO1xuICAgIGxldCBjdXJyZW50ID0gJyc7XG5cbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IGN1cnJlbnQgPyBgJHtjdXJyZW50fSAke3dvcmR9YCA6IHdvcmQ7XG4gICAgICBpZiAodGhpcy52aXNpYmxlTGVuZ3RoKGNhbmRpZGF0ZSkgPiB3aWR0aCAmJiBjdXJyZW50KSB7XG4gICAgICAgIGxpbmVzLnB1c2goY3VycmVudCk7XG4gICAgICAgIGN1cnJlbnQgPSB3b3JkO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IGNhbmRpZGF0ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY3VycmVudCkge1xuICAgICAgbGluZXMucHVzaChjdXJyZW50KTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IHN0cmVhbWluZyBlbGFwc2VkIHRpbWUgaW4gQ2xhdWRlIENvZGUgc3R5bGU6IDNtIDMwc1xuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICghdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIHJldHVybiBudWxsO1xuICAgIGNvbnN0IGVsYXBzZWQgPSBNYXRoLmZsb29yKChEYXRlLm5vdygpIC0gdGhpcy5zdHJlYW1pbmdTdGFydFRpbWUpIC8gMTAwMCk7XG4gICAgaWYgKGVsYXBzZWQgPCA1KSByZXR1cm4gbnVsbDsgLy8gRG9uJ3Qgc2hvdyBmb3IgdmVyeSBzaG9ydCBkdXJhdGlvbnNcbiAgICBjb25zdCBtaW5zID0gTWF0aC5mbG9vcihlbGFwc2VkIC8gNjApO1xuICAgIGNvbnN0IHNlY3MgPSBlbGFwc2VkICUgNjA7XG4gICAgaWYgKG1pbnMgPiAwKSB7XG4gICAgICByZXR1cm4gYCR7bWluc31tICR7c2Vjc31zYDtcbiAgICB9XG4gICAgcmV0dXJuIGAke3NlY3N9c2A7XG4gIH1cblxuICAvKipcbiAgICogRm9ybWF0IGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBTaG93cyBhIHZpc3VhbCBzZXBhcmF0b3Igd2l0aCBcImhpc3RvcnlcIiBsYWJlbCBhbmQgY3RybCtvIGhpbnRcbiAgICovXG4gIHByaXZhdGUgZm9ybWF0Q29tcGFjdEJsb2NrKGNvbnRlbnQ6IHN0cmluZywgbGFiZWw6IHN0cmluZyA9ICdoaXN0b3J5Jyk6IHN0cmluZyB7XG4gICAgY29uc3QgbWF4V2lkdGggPSBNYXRoLm1pbih0aGlzLmNvbHMsIDgwKTtcbiAgICBjb25zdCBsYWJlbFRleHQgPSBgICR7bGFiZWx9IGA7XG4gICAgY29uc3QgcGFkZGluZyA9IE1hdGgubWF4KDAsIG1heFdpZHRoIC0gbGFiZWxUZXh0Lmxlbmd0aCk7XG4gICAgY29uc3QgbGVmdFBhZCA9IE1hdGguZmxvb3IocGFkZGluZyAvIDIpO1xuICAgIGNvbnN0IHJpZ2h0UGFkID0gTWF0aC5jZWlsKHBhZGRpbmcgLyAyKTtcblxuICAgIC8vIENsYXVkZSBDb2RlIHN0eWxlOiDilZDilZAgaGlzdG9yeSDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZDilZBcbiAgICBjb25zdCBzZXBhcmF0b3IgPSB0aGVtZS51aS5tdXRlZCgn4pWQJy5yZXBlYXQobGVmdFBhZCkgKyBsYWJlbFRleHQgKyAn4pWQJy5yZXBlYXQocmlnaHRQYWQpKTtcblxuICAgIHJldHVybiBgXFxuJHtzZXBhcmF0b3J9XFxuJHtjb250ZW50fVxcbmA7XG4gIH1cblxuICAvKipcbiAgICogQWRkIGEgY29tcGFjdCBjb252ZXJzYXRpb24gYmxvY2sgdG8gdGhlIGV2ZW50IHF1ZXVlXG4gICAqIFRoaXMgZGlzcGxheXMgYSBjb2xsYXBzZWQgdmlldyB3aXRoIGV4cGFuc2lvbiBoaW50IChDbGF1ZGUgQ29kZSBzdHlsZSlcbiAgICovXG4gIGFkZENvbXBhY3RCbG9jayhjb250ZW50OiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcgPSAnaGlzdG9yeScpOiB2b2lkIHtcbiAgICBjb25zdCBmb3JtYXR0ZWRDb250ZW50ID0gdGhpcy5mb3JtYXRDb21wYWN0QmxvY2soY29udGVudCwgbGFiZWwpO1xuICAgIHRoaXMuZXZlbnRRdWV1ZS5wdXNoKHtcbiAgICAgIHR5cGU6ICdyZXNwb25zZScsXG4gICAgICByYXdUeXBlOiAncmVzcG9uc2UnLFxuICAgICAgY29udGVudDogZm9ybWF0dGVkQ29udGVudCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiB0cnVlLFxuICAgIH0pO1xuICAgIGlmICghdGhpcy5pc1Byb2Nlc3NpbmdRdWV1ZSkge1xuICAgICAgdm9pZCB0aGlzLnByb2Nlc3NRdWV1ZSgpO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBFeHBhbmQgdGhlIG1vc3QgcmVjZW50IHRvb2wgcmVzdWx0IGlubGluZSAoQ3RybCtPIHN1cHBvcnQpLlxuICAgKi9cbiAgZXhwYW5kTGFzdFRvb2xSZXN1bHQoKTogYm9vbGVhbiB7XG4gICAgaWYgKCF0aGlzLmxhc3RUb29sUmVzdWx0KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIGNvbnN0IHJlbmRlcmVkID0gdGhpcy53cmFwQnVsbGV0VGV4dCh0aGlzLmxhc3RUb29sUmVzdWx0LCB7IGxhYmVsOiAndG9vbCcsIGxhYmVsQ29sb3I6IHRoZW1lLmluZm8gfSk7XG4gICAgdGhpcy5ldmVudFF1ZXVlLnB1c2goe1xuICAgICAgdHlwZTogJ3Jlc3BvbnNlJyxcbiAgICAgIHJhd1R5cGU6ICdyZXNwb25zZScsXG4gICAgICBjb250ZW50OiByZW5kZXJlZCxcbiAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcbiAgICAgIGlzQ29tcGFjdGVkOiBmYWxzZSxcbiAgICB9KTtcbiAgICBpZiAoIXRoaXMuaXNQcm9jZXNzaW5nUXVldWUpIHtcbiAgICAgIHZvaWQgdGhpcy5wcm9jZXNzUXVldWUoKTtcbiAgICB9XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gU3RhdHVzIC8gbW9kZSAtLS0tLS0tLS0tLS1cblxuICBzZXRNb2RlKG1vZGU6ICdpZGxlJyB8ICdzdHJlYW1pbmcnKTogdm9pZCB7XG4gICAgY29uc3Qgd2FzU3RyZWFtaW5nID0gdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICB0aGlzLm1vZGUgPSBtb2RlO1xuXG4gICAgLy8gVHJhY2sgc3RyZWFtaW5nIHN0YXJ0IHRpbWUgZm9yIGVsYXBzZWQgZGlzcGxheVxuICAgIGlmIChtb2RlID09PSAnc3RyZWFtaW5nJyAmJiAhd2FzU3RyZWFtaW5nKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSA9IERhdGUubm93KCk7XG4gICAgICB0aGlzLnN0cmVhbWluZ1Rva2VucyA9IDA7IC8vIFJlc2V0IHRva2VuIGNvdW50XG4gICAgICAvLyBDbGVhciBpbmxpbmUgcGFuZWwgd2hlbiBlbnRlcmluZyBzdHJlYW1pbmcgbW9kZSB0byBwcmV2ZW50IHN0YWxlIG1lbnVzXG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGggPiAwKSB7XG4gICAgICAgIHRoaXMuaW5saW5lUGFuZWwgPSBbXTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhcnRTcGlubmVyQW5pbWF0aW9uKCk7XG4gICAgfSBlbHNlIGlmIChtb2RlID09PSAnaWRsZScgJiYgd2FzU3RyZWFtaW5nKSB7XG4gICAgICB0aGlzLnN0cmVhbWluZ1N0YXJ0VGltZSA9IG51bGw7XG4gICAgICB0aGlzLnN0b3BTcGlubmVyQW5pbWF0aW9uKCk7XG4gICAgfVxuXG4gICAgaWYgKHdhc1N0cmVhbWluZyAmJiBtb2RlID09PSAnaWRsZScgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgIC8vIEZpbmlzaCBzdHJlYW1pbmcgb24gYSBmcmVzaCBsaW5lIHNvIHRoZSBuZXh0IHByb21wdC9ldmVudCBkb2Vzbid0IGNvbGxpZGVcbiAgICAgIHRoaXMud3JpdGUoJ1xcbicpO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IHRydWU7XG4gICAgfVxuICAgIGlmICghdGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIC8vIEFsd2F5cyByZW5kZXIgcHJvbXB0IHRvIGtlZXAgYm90dG9tIFVJIHBlcnNpc3RlbnQgKHJpY2ggbW9kZSBvbmx5KVxuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU3RhcnQgdGhlIGFuaW1hdGVkIHNwaW5uZXIgZm9yIHN0cmVhbWluZyBzdGF0dXNcbiAgICovXG4gIHByaXZhdGUgc3RhcnRTcGlubmVyQW5pbWF0aW9uKCk6IHZvaWQge1xuICAgIGlmICh0aGlzLnNwaW5uZXJJbnRlcnZhbCkgcmV0dXJuOyAvLyBBbHJlYWR5IHJ1bm5pbmdcbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XG4gICAgICB0aGlzLnNwaW5uZXJGcmFtZSA9ICh0aGlzLnNwaW5uZXJGcmFtZSArIDEpICUgc3Bpbm5lckZyYW1lcy5icmFpbGxlLmxlbmd0aDtcbiAgICAgIHRoaXMuYWN0aXZpdHlTdGFyRnJhbWUgPSAodGhpcy5hY3Rpdml0eVN0YXJGcmFtZSArIDEpICUgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZXMubGVuZ3RoO1xuICAgICAgLy8gUmUtcmVuZGVyIHRvIHNob3cgdXBkYXRlZCBzcGlubmVyL3N0YXIgZnJhbWVcbiAgICAgIGlmICghdGhpcy5wbGFpbk1vZGUgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgIH0sIDgwKTsgLy8gfjEyIEZQUyBmb3Igc21vb3RoIHNwaW5uZXIgYW5pbWF0aW9uXG4gIH1cblxuICAvKipcbiAgICogU3RvcCB0aGUgYW5pbWF0ZWQgc3Bpbm5lclxuICAgKi9cbiAgcHJpdmF0ZSBzdG9wU3Bpbm5lckFuaW1hdGlvbigpOiB2b2lkIHtcbiAgICBpZiAodGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5zcGlubmVySW50ZXJ2YWwpO1xuICAgICAgdGhpcy5zcGlubmVySW50ZXJ2YWwgPSBudWxsO1xuICAgIH1cbiAgICB0aGlzLnNwaW5uZXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eVN0YXJGcmFtZSA9IDA7XG4gICAgdGhpcy5hY3Rpdml0eU1lc3NhZ2UgPSBudWxsO1xuICB9XG5cbiAgLyoqXG4gICAqIFNldCB0aGUgYWN0aXZpdHkgbWVzc2FnZSBkaXNwbGF5ZWQgd2l0aCBhbmltYXRlZCBzdGFyXG4gICAqIEV4YW1wbGU6IFwiUnVtaW5hdGluZ+KAplwiIHNob3dzIGFzIFwi4pyzIFJ1bWluYXRpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzIMK3IOKGkTEuMmspXCJcbiAgICovXG4gIHNldEFjdGl2aXR5KG1lc3NhZ2U6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLmFjdGl2aXR5TWVzc2FnZSA9IG1lc3NhZ2U7XG4gICAgaWYgKCF0aGlzLnBsYWluTW9kZSkge1xuICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogVXBkYXRlIHRoZSB0b2tlbiBjb3VudCBkaXNwbGF5ZWQgaW4gdGhlIGFjdGl2aXR5IGxpbmVcbiAgICovXG4gIHVwZGF0ZVN0cmVhbWluZ1Rva2Vucyh0b2tlbnM6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuc3RyZWFtaW5nVG9rZW5zID0gdG9rZW5zO1xuICB9XG5cbiAgLyoqXG4gICAqIEZvcm1hdCB0b2tlbiBjb3VudCBhcyBjb21wYWN0IHN0cmluZyAoZS5nLiwgMS4yaywgMjRrLCAxMjhrKVxuICAgKi9cbiAgcHJpdmF0ZSBmb3JtYXRUb2tlbkNvdW50KHRva2VuczogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAodG9rZW5zIDwgMTAwMCkgcmV0dXJuIFN0cmluZyh0b2tlbnMpO1xuICAgIGlmICh0b2tlbnMgPCAxMDAwMCkgcmV0dXJuIGAkeyh0b2tlbnMgLyAxMDAwKS50b0ZpeGVkKDEpfWtgO1xuICAgIHJldHVybiBgJHtNYXRoLnJvdW5kKHRva2VucyAvIDEwMDApfWtgO1xuICB9XG5cbiAgZ2V0TW9kZSgpOiAnaWRsZScgfCAnc3RyZWFtaW5nJyB7XG4gICAgcmV0dXJuIHRoaXMubW9kZTtcbiAgfVxuXG4gIHVwZGF0ZVN0YXR1cyhtZXNzYWdlOiBzdHJpbmcgfCBudWxsKTogdm9pZCB7XG4gICAgdGhpcy51cGRhdGVTdGF0dXNCdW5kbGUoeyBtYWluOiBtZXNzYWdlLCBvdmVycmlkZTogbnVsbCwgc3RyZWFtaW5nOiBudWxsIH0pO1xuICB9XG5cbiAgdXBkYXRlU3RhdHVzQnVuZGxlKFxuICAgIHN0YXR1czogeyBtYWluPzogc3RyaW5nIHwgbnVsbDsgb3ZlcnJpZGU/OiBzdHJpbmcgfCBudWxsOyBzdHJlYW1pbmc/OiBzdHJpbmcgfCBudWxsIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBwcmV2U3RyZWFtaW5nID0gdGhpcy5zdGF0dXNTdHJlYW1pbmc7XG4gICAgbGV0IGNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgbWFpbkNoYW5nZWQgPSBmYWxzZTtcbiAgICBsZXQgb3ZlcnJpZGVDaGFuZ2VkID0gZmFsc2U7XG5cbiAgICBpZiAoc3RhdHVzLm1haW4gIT09IHVuZGVmaW5lZCAmJiBzdGF0dXMubWFpbiAhPT0gdGhpcy5zdGF0dXNNZXNzYWdlKSB7XG4gICAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBzdGF0dXMubWFpbjtcbiAgICAgIGNoYW5nZWQgPSB0cnVlO1xuICAgICAgbWFpbkNoYW5nZWQgPSB0cnVlO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzLm92ZXJyaWRlICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLm92ZXJyaWRlICE9PSB0aGlzLnN0YXR1c092ZXJyaWRlKSB7XG4gICAgICB0aGlzLnN0YXR1c092ZXJyaWRlID0gc3RhdHVzLm92ZXJyaWRlO1xuICAgICAgY2hhbmdlZCA9IHRydWU7XG4gICAgICBvdmVycmlkZUNoYW5nZWQgPSB0cnVlO1xuICAgIH1cblxuICAgIGNvbnN0IHN0cmVhbWluZ0NoYW5nZWQgPSBzdGF0dXMuc3RyZWFtaW5nICE9PSB1bmRlZmluZWQgJiYgc3RhdHVzLnN0cmVhbWluZyAhPT0gcHJldlN0cmVhbWluZztcbiAgICBpZiAoc3RhdHVzLnN0cmVhbWluZyAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICBpZiAoc3RyZWFtaW5nQ2hhbmdlZCkge1xuICAgICAgICBjaGFuZ2VkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHRoaXMuc3RhdHVzU3RyZWFtaW5nID0gc3RhdHVzLnN0cmVhbWluZztcbiAgICB9XG5cbiAgICBjb25zdCBzdHJlYW1pbmdJbnRyb2R1Y2UgPVxuICAgICAgc3RyZWFtaW5nQ2hhbmdlZCAmJiBwcmV2U3RyZWFtaW5nID09PSBudWxsICYmIHN0YXR1cy5zdHJlYW1pbmcgIT09IG51bGwgJiYgdGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJztcbiAgICBjb25zdCBzdHJlYW1pbmdDbGVhcmVkID1cbiAgICAgIHN0cmVhbWluZ0NoYW5nZWQgJiYgc3RhdHVzLnN0cmVhbWluZyA9PT0gbnVsbCAmJiB0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnO1xuICAgIGNvbnN0IG9ubHlTdHJlYW1pbmdDaGFuZ2VkID0gc3RyZWFtaW5nQ2hhbmdlZCAmJiAhbWFpbkNoYW5nZWQgJiYgIW92ZXJyaWRlQ2hhbmdlZDtcbiAgICBjb25zdCBza2lwU3RyZWFtaW5nUmVuZGVyID1cbiAgICAgIG9ubHlTdHJlYW1pbmdDaGFuZ2VkICYmIHRoaXMubW9kZSA9PT0gJ3N0cmVhbWluZycgJiYgIXN0cmVhbWluZ0ludHJvZHVjZSAmJiAhc3RyZWFtaW5nQ2xlYXJlZDtcblxuICAgIGNvbnN0IHNob3VsZFJlbmRlciA9IG9wdGlvbnMucmVuZGVyICE9PSBmYWxzZSAmJiBjaGFuZ2VkICYmICFza2lwU3RyZWFtaW5nUmVuZGVyO1xuICAgIGlmIChzaG91bGRSZW5kZXIpIHtcbiAgICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gICAgfVxuICB9XG5cbiAgdXBkYXRlU3RhdHVzTWV0YShcbiAgICBtZXRhOiB7XG4gICAgICBtb2RlbD86IHN0cmluZztcbiAgICAgIHByb3ZpZGVyPzogc3RyaW5nO1xuICAgICAgc2Vzc2lvblRpbWU/OiBzdHJpbmc7XG4gICAgICBjb250ZXh0UGVyY2VudD86IG51bWJlcjtcbiAgICAgIHByb2ZpbGU/OiBzdHJpbmc7XG4gICAgICB3b3Jrc3BhY2U/OiBzdHJpbmc7XG4gICAgICBkaXJlY3Rvcnk/OiBzdHJpbmc7XG4gICAgICB3cml0ZXM/OiBzdHJpbmc7XG4gICAgICBzZXNzaW9uTGFiZWw/OiBzdHJpbmc7XG4gICAgICB0aGlua2luZ0xhYmVsPzogc3RyaW5nO1xuICAgICAgYXV0b3NhdmU/OiBib29sZWFuO1xuICAgICAgdmVyc2lvbj86IHN0cmluZztcbiAgICAgIHRvb2xTdW1tYXJ5Pzogc3RyaW5nO1xuICAgIH0sXG4gICAgb3B0aW9uczogeyByZW5kZXI/OiBib29sZWFuIH0gPSB7fVxuICApOiB2b2lkIHtcbiAgICBjb25zdCBuZXh0ID0geyAuLi50aGlzLnN0YXR1c01ldGEsIC4uLm1ldGEgfTtcbiAgICBjb25zdCBjaGFuZ2VkID0gSlNPTi5zdHJpbmdpZnkobmV4dCkgIT09IEpTT04uc3RyaW5naWZ5KHRoaXMuc3RhdHVzTWV0YSk7XG4gICAgdGhpcy5zdGF0dXNNZXRhID0gbmV4dDtcbiAgICBjb25zdCBzaG91bGRSZW5kZXIgPSBvcHRpb25zLnJlbmRlciAhPT0gZmFsc2UgJiYgY2hhbmdlZDtcbiAgICBpZiAoc2hvdWxkUmVuZGVyKSB7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIH1cbiAgfVxuXG4gIHVwZGF0ZU1vZGVUb2dnbGVzKHN0YXRlOiBQYXJ0aWFsPE1vZGVUb2dnbGVTdGF0ZT4pOiB2b2lkIHtcbiAgICB0aGlzLnRvZ2dsZVN0YXRlID0geyAuLi50aGlzLnRvZ2dsZVN0YXRlLCAuLi5zdGF0ZSB9O1xuICAgIGlmIChcbiAgICAgICFzdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXkgJiZcbiAgICAgICFzdGF0ZS50aGlua2luZ0hvdGtleSAmJlxuICAgICAgIXN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5hdXRvQ29udGludWVIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kdWFsUmxIb3RrZXkgJiZcbiAgICAgICFzdGF0ZS5kZWJ1Z0hvdGtleVxuICAgICkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBzZXRJbmxpbmVQYW5lbChsaW5lczogc3RyaW5nW10pOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gKGxpbmVzID8/IFtdKS5tYXAobGluZSA9PiBsaW5lLnJlcGxhY2UoL1xccyskL2csICcnKSk7XG4gICAgY29uc3QgaGFzQ29udGVudCA9IG5vcm1hbGl6ZWQuc29tZSgobGluZSkgPT4gbGluZS50cmltKCkubGVuZ3RoID4gMCk7XG4gICAgaWYgKCFoYXNDb250ZW50KSB7XG4gICAgICBpZiAodGhpcy5pbmxpbmVQYW5lbC5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgfVxuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBsaW1pdGVkID0gdGhpcy5saW1pdElubGluZVBhbmVsKG5vcm1hbGl6ZWQpO1xuICAgIGlmIChKU09OLnN0cmluZ2lmeShsaW1pdGVkKSA9PT0gSlNPTi5zdHJpbmdpZnkodGhpcy5pbmxpbmVQYW5lbCkpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IGxpbWl0ZWQ7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIHN1cHBvcnRzSW5saW5lUGFuZWwoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuaW50ZXJhY3RpdmUgJiYgIXRoaXMucGxhaW5Nb2RlO1xuICB9XG5cbiAgY2xlYXJJbmxpbmVQYW5lbCgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuaW5saW5lUGFuZWwubGVuZ3RoKSByZXR1cm47XG4gICAgdGhpcy5pbmxpbmVQYW5lbCA9IFtdO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBwcml2YXRlIGxpbWl0SW5saW5lUGFuZWwobGluZXM6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IG1heExpbmVzID0gTWF0aC5tYXgoNCwgTWF0aC5taW4odGhpcy5tYXhJbmxpbmVQYW5lbExpbmVzLCBNYXRoLm1heCgyLCB0aGlzLnJvd3MgLSA4KSkpO1xuICAgIGlmIChsaW5lcy5sZW5ndGggPD0gbWF4TGluZXMpIHtcbiAgICAgIHJldHVybiBsaW5lcztcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBsaW5lcy5sZW5ndGggLSBtYXhMaW5lcztcbiAgICBjb25zdCBpbmRpY2F0b3IgPSB0aGVtZS51aS5tdXRlZChg4oCmICR7b3ZlcmZsb3d9IG1vcmUgbGluZXNgKTtcbiAgICBjb25zdCB0YWlsQ291bnQgPSBNYXRoLm1heCgxLCBtYXhMaW5lcyAtIDEpO1xuICAgIGNvbnN0IHRhaWwgPSBsaW5lcy5zbGljZSgtdGFpbENvdW50KTtcbiAgICByZXR1cm4gW2luZGljYXRvciwgLi4udGFpbF07XG4gIH1cblxuICAvLyAtLS0tLS0tLS0tLS0gUHJvbXB0IHJlbmRlcmluZyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHJlbmRlclByb21wdCgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgLy8gVGhyb3R0bGUgcmVuZGVycyB0byBwcmV2ZW50IGV4Y2Vzc2l2ZSByZWRyYXdzIGR1cmluZyByYXBpZCBpbnB1dFxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgaWYgKG5vdyAtIHRoaXMubGFzdFJlbmRlclRpbWUgPCB0aGlzLnJlbmRlclRocm90dGxlTXMpIHtcbiAgICAgIGlmICghdGhpcy5wZW5kaW5nUmVuZGVyKSB7XG4gICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IHRydWU7XG4gICAgICAgIC8vIFRyYWNrIHRoZSB0aW1lciBmb3IgY2xlYW51cFxuICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBzZXRUaW1lb3V0KCgpID0+IHtcbiAgICAgICAgICB0aGlzLnJlbmRlclRocm90dGxlVGltZXIgPSBudWxsO1xuICAgICAgICAgIHRoaXMucGVuZGluZ1JlbmRlciA9IGZhbHNlO1xuICAgICAgICAgIGlmICghdGhpcy5kaXNwb3NlZCkge1xuICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHRJbW1lZGlhdGUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIHRoaXMucmVuZGVyVGhyb3R0bGVNcyk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMucmVuZGVyUHJvbXB0SW1tZWRpYXRlKCk7XG4gIH1cblxuICBwcml2YXRlIHJlbmRlclByb21wdEltbWVkaWF0ZSgpOiB2b2lkIHtcbiAgICAvLyBEb24ndCByZW5kZXIgaWYgZGlzcG9zZWRcbiAgICBpZiAodGhpcy5kaXNwb3NlZCkgcmV0dXJuO1xuXG4gICAgdGhpcy5sYXN0UmVuZGVyVGltZSA9IERhdGUubm93KCk7XG5cbiAgICBpZiAoIXRoaXMuaW50ZXJhY3RpdmUpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wcm9tcHRSZW5kZXJpbmdTdXNwZW5kZWQpIHtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSBmYWxzZTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5wbGFpbk1vZGUpIHtcbiAgICAgIGNvbnN0IGxpbmUgPSBgPiAke3RoaXMuYnVmZmVyfWA7XG4gICAgICBpZiAoIXRoaXMuaXNQcm9tcHRBY3RpdmUgJiYgIXRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUpIHtcbiAgICAgICAgdGhpcy53cml0ZSgnXFxuJyk7XG4gICAgICAgIHRoaXMubGFzdE91dHB1dEVuZGVkV2l0aE5ld2xpbmUgPSB0cnVlO1xuICAgICAgfVxuICAgICAgdGhpcy53cml0ZShgXFxyJHtFU0MuQ0xFQVJfTElORX0ke2xpbmV9YCk7XG4gICAgICB0aGlzLmN1cnNvclZpc2libGVDb2x1bW4gPSBsaW5lLmxlbmd0aCArIDE7XG4gICAgICB0aGlzLmhhc1JlbmRlcmVkUHJvbXB0ID0gdHJ1ZTtcbiAgICAgIHRoaXMuaXNQcm9tcHRBY3RpdmUgPSB0cnVlO1xuICAgICAgdGhpcy5sYXN0T3V0cHV0RW5kZWRXaXRoTmV3bGluZSA9IGZhbHNlOyAvLyBwcm9tcHQgZW5kcyBtaWQtbGluZSBieSBkZXNpZ25cbiAgICAgIHRoaXMucHJvbXB0SGVpZ2h0ID0gMTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoIXRoaXMuYWxsb3dQcm9tcHRSZW5kZXIpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBSaWNoIGlubGluZSBtb2RlOiBwcm9tcHQgZmxvd3MgbmF0dXJhbGx5IHdpdGggY29udGVudFxuICAgIHRoaXMudXBkYXRlVGVybWluYWxTaXplKCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIHRoaXMubGFzdFJlbmRlcldpZHRoID0gbWF4V2lkdGg7XG5cbiAgICBjb25zdCBvdmVybGF5ID0gdGhpcy5idWlsZE92ZXJsYXlMaW5lcygpO1xuICAgIGlmICghb3ZlcmxheS5saW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCByZW5kZXJlZExpbmVzID0gb3ZlcmxheS5saW5lcy5tYXAobGluZSA9PiB0aGlzLnRydW5jYXRlTGluZShsaW5lLCBtYXhXaWR0aCkpO1xuICAgIGlmICghcmVuZGVyZWRMaW5lcy5sZW5ndGgpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwcm9tcHRJbmRleCA9IE1hdGgubWF4KDAsIE1hdGgubWluKG92ZXJsYXkucHJvbXB0SW5kZXgsIHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkpO1xuICAgIGNvbnN0IGhlaWdodCA9IHJlbmRlcmVkTGluZXMubGVuZ3RoO1xuXG4gICAgLy8gQ2xlYXIgcHJldmlvdXMgcHJvbXB0IGFuZCBoYW5kbGUgaGVpZ2h0IGNoYW5nZXNcbiAgICAvLyBOb3RlOiBXZSBjaGVjayBsYXN0T3ZlcmxheUhlaWdodCA+IDAgdG8ga25vdyBpZiB0aGVyZSdzIHNvbWV0aGluZyB0byBjbGVhcixcbiAgICAvLyBidXQgd2UgdXNlIGxhc3RPdmVybGF5Py5wcm9tcHRJbmRleCBmb3IgY3Vyc29yIHBvc2l0aW9uaW5nIChkZWZhdWx0aW5nIHRvIDAgaWYgY2xlYXJlZClcbiAgICBpZiAodGhpcy5oYXNFdmVyUmVuZGVyZWRPdmVybGF5ICYmIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQgPiAwKSB7XG4gICAgICAvLyBNb3ZlIHVwIGZyb20gcHJvbXB0IHJvdyB0byB0b3Agb2Ygb3ZlcmxheVxuICAgICAgY29uc3QgbGluZXNUb1RvcCA9IHRoaXMubGFzdE92ZXJsYXk/LnByb21wdEluZGV4ID8/IDA7XG4gICAgICBpZiAobGluZXNUb1RvcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvVG9wfUFgKTtcbiAgICAgIH1cblxuICAgICAgLy8gQ2xlYXIgYWxsIHByZXZpb3VzIGxpbmVzXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7IGkrKykge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHInKTtcbiAgICAgICAgdGhpcy53cml0ZShFU0MuQ0xFQVJfTElORSk7XG4gICAgICAgIGlmIChpIDwgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCAtIDEpIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gSWYgbmV3IGhlaWdodCBpcyBncmVhdGVyLCB3ZSBuZWVkIHRvIGFkZCBibGFuayBsaW5lc1xuICAgICAgY29uc3QgZXh0cmFMaW5lcyA9IGhlaWdodCAtIHRoaXMubGFzdE92ZXJsYXlIZWlnaHQ7XG4gICAgICBpZiAoZXh0cmFMaW5lcyA+IDApIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBleHRyYUxpbmVzOyBpKyspIHtcbiAgICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBNb3ZlIGJhY2sgdG8gdG9wIG9mIHdoZXJlIG92ZXJsYXkgc2hvdWxkIHN0YXJ0XG4gICAgICBjb25zdCBtb3ZlQmFja1VwID0gTWF0aC5tYXgoMCwgaGVpZ2h0IC0gMSk7XG4gICAgICBpZiAobW92ZUJhY2tVcCA+IDApIHtcbiAgICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHttb3ZlQmFja1VwfUFgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBXcml0ZSBwcm9tcHQgbGluZXMgKG5vIHRyYWlsaW5nIG5ld2xpbmUgb24gbGFzdCBsaW5lKVxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcmVuZGVyZWRMaW5lcy5sZW5ndGg7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIHRoaXMud3JpdGUocmVuZGVyZWRMaW5lc1tpXSB8fCAnJyk7XG4gICAgICBpZiAoaSA8IHJlbmRlcmVkTGluZXMubGVuZ3RoIC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXG4nKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBQb3NpdGlvbiBjdXJzb3IgYXQgcHJvbXB0IGlucHV0IGxpbmVcbiAgICBjb25zdCBwcm9tcHRDb2wgPSBNYXRoLm1pbihNYXRoLm1heCgxLCAzICsgdGhpcy5jdXJzb3IpLCB0aGlzLmNvbHMgfHwgODApO1xuICAgIC8vIEN1cnNvciBpcyBub3cgYXQgdGhlIGxhc3QgbGluZS4gTW92ZSB1cCB0byB0aGUgcHJvbXB0IHJvdy5cbiAgICBjb25zdCBsaW5lc1RvTW92ZVVwID0gaGVpZ2h0IC0gMSAtIHByb21wdEluZGV4O1xuICAgIGlmIChsaW5lc1RvTW92ZVVwID4gMCkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtsaW5lc1RvTW92ZVVwfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZShgXFx4MWJbJHtwcm9tcHRDb2x9R2ApO1xuXG4gICAgdGhpcy5jdXJzb3JWaXNpYmxlQ29sdW1uID0gcHJvbXB0Q29sO1xuICAgIHRoaXMuaGFzUmVuZGVyZWRQcm9tcHQgPSB0cnVlO1xuICAgIHRoaXMuaGFzRXZlclJlbmRlcmVkT3ZlcmxheSA9IHRydWU7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IHRydWU7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IGhlaWdodDtcbiAgICB0aGlzLmxhc3RPdmVybGF5ID0geyBsaW5lczogcmVuZGVyZWRMaW5lcywgcHJvbXB0SW5kZXggfTtcbiAgICB0aGlzLmxhc3RPdXRwdXRFbmRlZFdpdGhOZXdsaW5lID0gZmFsc2U7XG4gICAgdGhpcy5wcm9tcHRIZWlnaHQgPSBoZWlnaHQ7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkT3ZlcmxheUxpbmVzKCk6IHsgbGluZXM6IHN0cmluZ1tdOyBwcm9tcHRJbmRleDogbnVtYmVyIH0ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IG1heFdpZHRoID0gdGhpcy5zYWZlV2lkdGgoKTtcbiAgICAvLyBTaW1wbGUgaG9yaXpvbnRhbCBkaXZpZGVyIC0gY2xlYW4gYW5kIHJlbGlhYmxlXG4gICAgY29uc3QgZGl2aWRlciA9IHRoZW1lLnVpLm11dGVkKCfilIAnLnJlcGVhdChtYXhXaWR0aCkpO1xuXG4gICAgY29uc3QgZmFsbGJhY2tBY3Rpdml0eSA9ICgoKSA9PiB7XG4gICAgICBjb25zdCByYXcgPSB0aGlzLnN0YXR1c1N0cmVhbWluZyB8fCB0aGlzLnN0YXR1c092ZXJyaWRlIHx8IHRoaXMuc3RhdHVzTWVzc2FnZTtcbiAgICAgIGlmICghcmF3KSByZXR1cm4gbnVsbDtcbiAgICAgIGNvbnN0IGNsZWFuZWQgPSB0aGlzLnN0cmlwQW5zaShyYXcpLnJlcGxhY2UoL15b4o+64oCiXVxccyovLCAnJykudHJpbSgpO1xuICAgICAgcmV0dXJuIGNsZWFuZWQgfHwgbnVsbDtcbiAgICB9KSgpO1xuXG4gICAgLy8gQWN0aXZpdHkgbGluZSAob25seSB3aGVuIHN0cmVhbWluZykgLSBzaG93czog4peQIFdvcmtpbmfigKYgKGVzYyB0byBpbnRlcnJ1cHQgwrcgMzRzKVxuICAgIGlmICh0aGlzLm1vZGUgPT09ICdzdHJlYW1pbmcnICYmICh0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5KSkge1xuICAgICAgLy8gQ2xlYW4gc3Bpbm5lciBhbmltYXRpb24gdXNpbmcgYnJhaWxsZSBkb3RzICsgc2hpbW1lciBhY2NlbnQgZm9yIGEgcmljaGVyIGZlZWxcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFycyA9IHNwaW5uZXJGcmFtZXMuYnJhaWxsZTtcbiAgICAgIGNvbnN0IHNwaW5uZXJDaGFyID0gc3Bpbm5lckNoYXJzW3RoaXMuc3Bpbm5lckZyYW1lICUgc3Bpbm5lckNoYXJzLmxlbmd0aF0gPz8gJ+Kgiyc7XG4gICAgICBjb25zdCBzdGFyQ2hhciA9IHRoaXMuYWN0aXZpdHlTdGFyRnJhbWVzW3RoaXMuYWN0aXZpdHlTdGFyRnJhbWUgJSB0aGlzLmFjdGl2aXR5U3RhckZyYW1lcy5sZW5ndGhdID8/ICfinLYnO1xuICAgICAgY29uc3Qgc3Bpbm5lckRlY29yYXRlZCA9IGAke3RoZW1lLmluZm8oc3Bpbm5lckNoYXIpfSR7dGhlbWUuYWNjZW50ID8gdGhlbWUuYWNjZW50KHN0YXJDaGFyKSA6IHN0YXJDaGFyfWA7XG4gICAgICBjb25zdCBlbGFwc2VkID0gdGhpcy5mb3JtYXRTdHJlYW1pbmdFbGFwc2VkKCk7XG4gICAgICBjb25zdCBnZW5lcmljQWN0aXZpdGllcyA9IFsnU3RyZWFtaW5nJywgJ1RoaW5raW5nJywgJ1Byb2Nlc3NpbmcnXTtcbiAgICAgIGxldCBkaXNwbGF5QWN0aXZpdHkgPSB0aGlzLmFjdGl2aXR5TWVzc2FnZSB8fCBmYWxsYmFja0FjdGl2aXR5IHx8ICcnO1xuICAgICAgaWYgKGdlbmVyaWNBY3Rpdml0aWVzLmluY2x1ZGVzKGRpc3BsYXlBY3Rpdml0eSkgJiYgZmFsbGJhY2tBY3Rpdml0eSkge1xuICAgICAgICBkaXNwbGF5QWN0aXZpdHkgPSBmYWxsYmFja0FjdGl2aXR5O1xuICAgICAgfVxuICAgICAgaWYgKCFkaXNwbGF5QWN0aXZpdHkudHJpbSgpKSB7XG4gICAgICAgIGRpc3BsYXlBY3Rpdml0eSA9IGZhbGxiYWNrQWN0aXZpdHkgfHwgJ1dvcmtpbmcnO1xuICAgICAgfVxuICAgICAgY29uc3QgbmVlZHNFbGxpcHNpcyA9ICFkaXNwbGF5QWN0aXZpdHkudHJpbUVuZCgpLmVuZHNXaXRoKCfigKYnKSAmJiAhZGlzcGxheUFjdGl2aXR5LnRyaW1FbmQoKS5lbmRzV2l0aCgnLi4uJyk7XG4gICAgICAvLyBGb3JtYXQ6IOKgiyBXb3JraW5n4oCmIChlc2MgdG8gaW50ZXJydXB0IMK3IDFtIDE5cyDCtyDihpExLjJrIHRva2VucylcbiAgICAgIGNvbnN0IHBhcnRzID0gWydlc2MgdG8gaW50ZXJydXB0J107XG4gICAgICBpZiAoZWxhcHNlZCkgcGFydHMucHVzaChlbGFwc2VkKTtcbiAgICAgIGlmICh0aGlzLnN0cmVhbWluZ1Rva2VucyA+IDApIHtcbiAgICAgICAgcGFydHMucHVzaChg4oaRJHt0aGlzLmZvcm1hdFRva2VuQ291bnQodGhpcy5zdHJlYW1pbmdUb2tlbnMpfSB0b2tlbnNgKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IHByZWZpeCA9IGAke3NwaW5uZXJEZWNvcmF0ZWR9IGA7XG4gICAgICBjb25zdCBhY3Rpdml0eUxpbmUgPSBgJHtwcmVmaXh9JHtkaXNwbGF5QWN0aXZpdHkudHJpbSgpfSR7bmVlZHNFbGxpcHNpcyA/ICfigKYnIDogJyd9ICR7dGhlbWUudWkubXV0ZWQoYCgke3BhcnRzLmpvaW4oJyDCtyAnKX0pYCl9YDtcbiAgICAgIGNvbnN0IGluZGVudCA9ICcgJy5yZXBlYXQodGhpcy52aXNpYmxlTGVuZ3RoKHByZWZpeCkpO1xuICAgICAgY29uc3Qgd3JhcHBlZCA9IHRoaXMud3JhcE92ZXJsYXlMaW5lKGFjdGl2aXR5TGluZSwgbWF4V2lkdGgsIGluZGVudCk7XG4gICAgICBsaW5lcy5wdXNoKC4uLndyYXBwZWQpO1xuICAgIH1cblxuICAgIC8vIFRvcCBkaXZpZGVyXG4gICAgbGluZXMucHVzaChkaXZpZGVyKTtcblxuICAgIC8vIElucHV0IHByb21wdCBsaW5lXG4gICAgY29uc3QgcHJvbXB0SW5kZXggPSBsaW5lcy5sZW5ndGg7XG4gICAgY29uc3QgaW5wdXRMaW5lID0gdGhpcy5idWlsZElucHV0TGluZSgpO1xuICAgIC8vIEhhbmRsZSBtdWx0aS1saW5lIGlucHV0IGJ5IHNwbGl0dGluZyBvbiBuZXdsaW5lc1xuICAgIGNvbnN0IGlucHV0TGluZXMgPSBpbnB1dExpbmUuc3BsaXQoJ1xcbicpO1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBpbnB1dExpbmVzKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGxpbmUsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gQm90dG9tIGRpdmlkZXJcbiAgICBsaW5lcy5wdXNoKGRpdmlkZXIpO1xuXG4gICAgLy8gSW5saW5lIHBhbmVsIChwaW5uZWQgc2Nyb2xsIGJveCBmb3IgbGl2ZSBvdXRwdXQvbWVudXMpXG4gICAgaWYgKHRoaXMuaW5saW5lUGFuZWwubGVuZ3RoID4gMCkge1xuICAgICAgZm9yIChjb25zdCBwYW5lbExpbmUgb2YgdGhpcy5pbmxpbmVQYW5lbCkge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGAgICR7cGFuZWxMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgICAvLyBTZXBhcmF0ZSBpbmxpbmUgY29udGVudCBmcm9tIHN1Z2dlc3Rpb25zL3RvZ2dsZXNcbiAgICAgIGxpbmVzLnB1c2goZGl2aWRlcik7XG4gICAgfVxuXG4gICAgLy8gU2xhc2ggY29tbWFuZCBzdWdnZXN0aW9uc1xuICAgIGlmICh0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLnN1Z2dlc3Rpb25zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICBjb25zdCBzdWdnZXN0aW9uID0gdGhpcy5zdWdnZXN0aW9uc1tpbmRleF0hO1xuICAgICAgICBjb25zdCBpc0FjdGl2ZSA9IGluZGV4ID09PSB0aGlzLnN1Z2dlc3Rpb25JbmRleDtcbiAgICAgICAgY29uc3QgbWFya2VyID0gaXNBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCfilrgnKSA6IHRoZW1lLnVpLm11dGVkKCcgJyk7XG4gICAgICAgIGNvbnN0IGNtZFRleHQgPSBpc0FjdGl2ZSA/IHRoZW1lLnByaW1hcnkoc3VnZ2VzdGlvbi5jb21tYW5kKSA6IHRoZW1lLnVpLm11dGVkKHN1Z2dlc3Rpb24uY29tbWFuZCk7XG4gICAgICAgIGNvbnN0IGRlc2NUZXh0ID0gaXNBY3RpdmUgPyBzdWdnZXN0aW9uLmRlc2NyaXB0aW9uIDogdGhlbWUudWkubXV0ZWQoc3VnZ2VzdGlvbi5kZXNjcmlwdGlvbik7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttYXJrZXJ9ICR7Y21kVGV4dH0g4oCUICR7ZGVzY1RleHR9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBNb2RlbCBhbmQgY29udGV4dCBpbmZvXG4gICAgY29uc3QgbW9kZWxDb250ZXh0TGluZSA9IHRoaXMuYnVpbGRNb2RlbENvbnRleHRMaW5lKCk7XG4gICAgaWYgKG1vZGVsQ29udGV4dExpbmUpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHttb2RlbENvbnRleHRMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgfVxuXG4gICAgLy8gU3RhdHVzICsgbWV0YSBibG9jayAoaW5jbHVkZXMgZGlyL3ZlcnNpb24vdG9vbCBzdW1tYXJ5KVxuICAgIGNvbnN0IGNocm9tZUxpbmVzID0gdGhpcy5idWlsZENocm9tZUxpbmVzKCk7XG4gICAgaWYgKGNocm9tZUxpbmVzLmxlbmd0aCkge1xuICAgICAgZm9yIChjb25zdCBjaHJvbWVMaW5lIG9mIGNocm9tZUxpbmVzKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHtjaHJvbWVMaW5lfWAsIG1heFdpZHRoKSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW9kZSB0b2dnbGVzXG4gICAgY29uc3QgdG9nZ2xlTGluZXMgPSB0aGlzLmJ1aWxkSW5saW5lVG9nZ2xlTGluZSgpO1xuICAgIGlmICh0b2dnbGVMaW5lcy5sZW5ndGggPiAwKSB7XG4gICAgICBmb3IgKGNvbnN0IHRvZ2dsZUxpbmUgb2YgdG9nZ2xlTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke3RvZ2dsZUxpbmV9YCwgbWF4V2lkdGgpKTtcbiAgICAgIH1cbiAgICAgIGNvbnN0IGxlZ2VuZExpbmVzID0gdGhpcy5idWlsZFRvZ2dsZUxlZ2VuZCgpO1xuICAgICAgZm9yIChjb25zdCBsZWdlbmQgb2YgbGVnZW5kTGluZXMpIHtcbiAgICAgICAgbGluZXMucHVzaCh0aGlzLnRydW5jYXRlTGluZShgICAke2xlZ2VuZH1gLCBtYXhXaWR0aCkpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEhlbHAgaGludFxuICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoYCAgJHt0aGVtZS51aS5tdXRlZCgnPyBmb3Igc2hvcnRjdXRzJyl9YCwgbWF4V2lkdGgpKTtcblxuICAgIHJldHVybiB7IGxpbmVzLCBwcm9tcHRJbmRleCB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIG1vZGVsIG5hbWUgYW5kIGNvbnRleHQgdXNhZ2UgbGluZSB3aXRoIG1pbmkgcHJvZ3Jlc3MgYmFyXG4gICAqIEZvcm1hdDogZ3B0LTQgwrcg4paI4paI4paI4paI4paR4paRIDg1JSBjb250ZXh0XG4gICAqL1xuICBwcml2YXRlIGJ1aWxkTW9kZWxDb250ZXh0TGluZSgpOiBzdHJpbmcgfCBudWxsIHtcbiAgICBjb25zdCBwYXJ0czogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIE1vZGVsIG5hbWUgKHByb3ZpZGVyIC8gbW9kZWwgb3IganVzdCBtb2RlbClcbiAgICBjb25zdCBtb2RlbCA9IHRoaXMuc3RhdHVzTWV0YS5wcm92aWRlciAmJiB0aGlzLnN0YXR1c01ldGEubW9kZWxcbiAgICAgID8gYCR7dGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyfSDCtyAke3RoaXMuc3RhdHVzTWV0YS5tb2RlbH1gXG4gICAgICA6IHRoaXMuc3RhdHVzTWV0YS5tb2RlbCB8fCB0aGlzLnN0YXR1c01ldGEucHJvdmlkZXI7XG4gICAgaWYgKG1vZGVsKSB7XG4gICAgICBwYXJ0cy5wdXNoKHRoZW1lLmluZm8obW9kZWwpKTtcbiAgICB9XG5cbiAgICAvLyBDb250ZXh0IG1ldGVyIHdpdGggbWluaSBwcm9ncmVzcyBiYXIgKHNob3dzIHVzZWQgcGVyY2VudGFnZSwgbm90IHJlbWFpbmluZylcbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLmNvbnRleHRQZXJjZW50ICE9PSB1bmRlZmluZWQpIHtcbiAgICAgIGNvbnN0IHVzZWQgPSBNYXRoLm1pbigxMDAsIE1hdGgubWF4KDAsIHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCkpO1xuICAgICAgY29uc3QgYmFyV2lkdGggPSA2O1xuICAgICAgY29uc3QgZmlsbGVkID0gTWF0aC5yb3VuZCgodXNlZCAvIDEwMCkgKiBiYXJXaWR0aCk7XG4gICAgICBjb25zdCBlbXB0eSA9IGJhcldpZHRoIC0gZmlsbGVkO1xuICAgICAgLy8gQ29sb3IgYmFzZWQgb24gaG93IGZ1bGwgdGhlIGNvbnRleHQgaXMgKGdyZWVuPWxvdyB1c2FnZSwgeWVsbG93PW1lZGl1bSwgcmVkPWhpZ2gpXG4gICAgICBjb25zdCBiYXJDb2xvciA9IHVzZWQgPCA1MCA/IHRoZW1lLnN1Y2Nlc3MgOiB1c2VkIDwgODAgPyB0aGVtZS53YXJuaW5nIDogdGhlbWUuZXJyb3I7XG4gICAgICBjb25zdCBiYXIgPSBiYXJDb2xvcign4paIJy5yZXBlYXQoZmlsbGVkKSkgKyB0aGVtZS51aS5tdXRlZCgn4paRJy5yZXBlYXQoZW1wdHkpKTtcbiAgICAgIHBhcnRzLnB1c2goYCR7YmFyfSAke2JhckNvbG9yKGAke3VzZWR9JWApfSAke3RoZW1lLnVpLm11dGVkKCdjdHgnKX1gKTtcbiAgICB9XG5cbiAgICByZXR1cm4gcGFydHMubGVuZ3RoID4gMCA/IHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgwrcgICcpKSA6IG51bGw7XG4gIH1cblxuICAvKipcbiAgICogQnVpbGQgaW5saW5lIHRvZ2dsZSBjb250cm9scyAtIENsYXVkZSBDb2RlIHN0eWxlXG4gICAqIEZvcm1hdDog4o+14o+1IGFjY2VwdCBlZGl0cyBvbiAoc2hpZnQrdGFiIHRvIGN5Y2xlKVxuICAgKiBSZXR1cm5zIHdyYXBwZWQgbGluZXMgdG8gZW5zdXJlIGFsbCB0b2dnbGVzIChpbmNsdWRpbmcgUkwpIGFyZSB2aXNpYmxlIGJlbG93IHRoZSBjaGF0IGJveC5cbiAgICovXG4gIC8qKlxuICAgKiBCdWlsZCB1bmlmaWVkIHRvZ2dsZSBzdGF0dXMgbGluZSB3aXRoIGNvbG9yLWNvZGVkIHN0YXRlcyBhbmQgaW50ZWdyYXRlZCBleHBsYW5hdGlvbnMuXG4gICAqIEVhY2ggdG9nZ2xlIGhhcyBhIGRpc3RpbmN0IGNvbG9yIGZvciBlYXN5IGlkZW50aWZpY2F0aW9uLlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZElubGluZVRvZ2dsZUxpbmUoKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCB2ZXJpZmljYXRpb25BY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgYXBwcm92YWxNb2RlID0gdGhpcy50b2dnbGVTdGF0ZS5jcml0aWNhbEFwcHJvdmFsTW9kZSB8fCAnYXV0byc7XG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbCA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgLy8gQnVpbGQgdW5pZmllZCB0b2dnbGUgc2VnbWVudHMgd2l0aCBESVNUSU5DVCBjb2xvcnMgZm9yIGVhY2ggdG9nZ2xlXG4gICAgY29uc3QgdG9nZ2xlczogc3RyaW5nW10gPSBbXTtcblxuICAgIC8vIDEuIFJMIG1vZGUgKENZQU4pIC0gbXVsdGktYWdlbnQgdnMgc2luZ2xlLXBhc3NcbiAgICBjb25zdCBybE9uID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkO1xuICAgIGNvbnN0IHJsSWNvbiA9IHJsT24gPyAn8J+klicgOiAn4pqhJztcbiAgICBjb25zdCBybFN0YXR1cyA9IHJsT24gPyB0aGVtZS5pbmZvKCdkdWFsJykgOiB0aGVtZS51aS5tdXRlZCgnc2luZ2xlJyk7XG4gICAgY29uc3QgcmxFeHBsYWluID0gcmxPbiA/ICdtdWx0aS1hZ2VudCcgOiAnb25lLXBhc3MnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtybEljb259ICR7cmxTdGF0dXN9ICR7dGhlbWUudWkubXV0ZWQoJ1vijKVEXScpfSAke3RoZW1lLnVpLm11dGVkKHJsRXhwbGFpbil9YCk7XG5cbiAgICAvLyAyLiBBdXRvLWNvbnRpbnVlIChNQUdFTlRBL1BVUlBMRSkgLSBrZWVwIGdvaW5nIHVudGlsIGRvbmVcbiAgICBjb25zdCBjb250SWNvbiA9IGF1dG9Db250aW51ZUFjdGl2ZSA/ICfwn5SEJyA6ICfij7gnO1xuICAgIGNvbnN0IGNvbnRTdGF0dXMgPSBhdXRvQ29udGludWVBY3RpdmUgPyB0aGVtZS5wcmltYXJ5KCdsb29wJykgOiB0aGVtZS51aS5tdXRlZCgnc3RvcCcpO1xuICAgIGNvbnN0IGNvbnRFeHBsYWluID0gYXV0b0NvbnRpbnVlQWN0aXZlID8gJ3VudGlsIGRvbmUnIDogJ2VhY2ggcmVzcG9uc2UnO1xuICAgIHRvZ2dsZXMucHVzaChgJHtjb250SWNvbn0gJHtjb250U3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylR10nKX0gJHt0aGVtZS51aS5tdXRlZChjb250RXhwbGFpbil9YCk7XG5cbiAgICAvLyAzLiBWZXJpZnkgKFlFTExPVykgLSBhdXRvLXRlc3RzIGFmdGVyIGVkaXRzXG4gICAgY29uc3QgdmVyaWZ5SWNvbiA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICfinJMnIDogJ+KXiyc7XG4gICAgY29uc3QgdmVyaWZ5U3RhdHVzID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gdGhlbWUud2FybmluZygndGVzdCcpIDogdGhlbWUudWkubXV0ZWQoJ3NraXAnKTtcbiAgICBjb25zdCB2ZXJpZnlFeHBsYWluID0gdmVyaWZpY2F0aW9uQWN0aXZlID8gJ2F1dG8tdGVzdCcgOiAnbm8gdGVzdHMnO1xuICAgIHRvZ2dsZXMucHVzaChgJHt2ZXJpZnlJY29ufSAke3ZlcmlmeVN0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnW+KMpVZdJyl9ICR7dGhlbWUudWkubXV0ZWQodmVyaWZ5RXhwbGFpbil9YCk7XG5cbiAgICAvLyA0LiBBcHByb3ZhbHMgKEdSRUVOL09SQU5HRSkgLSBhdXRvIG9yIGFzayBmb3IgcGVybWlzc2lvblxuICAgIGNvbnN0IGFwcHJJY29uID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ/Cfm6EnIDogJ+KclCc7XG4gICAgY29uc3QgYXBwclN0YXR1cyA9IGFwcHJvdmFsTW9kZSA9PT0gJ2FwcHJvdmFsJyA/IHRoZW1lLndhcm5pbmcoJ2FzaycpIDogdGhlbWUuc3VjY2VzcygnYXV0bycpO1xuICAgIGNvbnN0IGFwcHJFeHBsYWluID0gYXBwcm92YWxNb2RlID09PSAnYXBwcm92YWwnID8gJ2NvbmZpcm0gYWxsJyA6ICdhdXRvLWFwcHJvdmUnO1xuICAgIHRvZ2dsZXMucHVzaChgJHthcHBySWNvbn0gJHthcHByU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdb4oylQV0nKX0gJHt0aGVtZS51aS5tdXRlZChhcHByRXhwbGFpbil9YCk7XG5cbiAgICAvLyA1LiBUaGlua2luZyAoQkxVRSkgLSBiYWxhbmNlZCBvciBkZWVwIHJlYXNvbmluZ1xuICAgIGNvbnN0IHRoaW5raW5nSXNEZWVwID0gdGhpbmtpbmdMYWJlbCA9PT0gJ2V4dGVuZGVkJyB8fCB0aGlua2luZ0xhYmVsID09PSAnZGVlcCc7XG4gICAgY29uc3QgdGhpbmtJY29uID0gdGhpbmtpbmdJc0RlZXAgPyAn8J+noCcgOiAn8J+SrSc7XG4gICAgY29uc3QgdGhpbmtTdGF0dXMgPSB0aGlua2luZ0lzRGVlcCA/IHRoZW1lLmluZm8oJ2RlZXAnKSA6IHRoZW1lLnVpLm11dGVkKCdxdWljaycpO1xuICAgIGNvbnN0IHRoaW5rRXhwbGFpbiA9IHRoaW5raW5nSXNEZWVwID8gJ3Rob3JvdWdoJyA6ICdjb25jaXNlJztcbiAgICB0b2dnbGVzLnB1c2goYCR7dGhpbmtJY29ufSAke3RoaW5rU3RhdHVzfSAke3RoZW1lLnVpLm11dGVkKCdbVEFCXScpfSAke3RoZW1lLnVpLm11dGVkKHRoaW5rRXhwbGFpbil9YCk7XG5cbiAgICAvLyA2LiBEZWJ1ZyBsb2dnaW5nIGluZGljYXRvciAoUkVEKSAtIHRvZ2dsZSBzaG93cyB3aGV0aGVyIGNvbnNvbGUgbG9nZ2luZyBpcyBlbmFibGVkXG4gICAgY29uc3QgZGVidWdBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmRlYnVnRW5hYmxlZCA/PyBmYWxzZTtcbiAgICBjb25zdCBkZWJ1Z0ljb24gPSBkZWJ1Z0FjdGl2ZSA/ICfwn5CeJyA6ICfwn5SNJztcbiAgICBjb25zdCBkZWJ1Z1N0YXR1cyA9IGRlYnVnQWN0aXZlID8gdGhlbWUud2FybmluZygnZGVidWcgb24nKSA6IHRoZW1lLnVpLm11dGVkKCdkZWJ1ZyBvZmYnKTtcbiAgICBjb25zdCBkZWJ1Z0V4cGxhaW4gPSBkZWJ1Z0FjdGl2ZSA/ICd2ZXJib3NlIGxvZ3MnIDogJ3NpbGVudCc7XG4gICAgdG9nZ2xlcy5wdXNoKGAke2RlYnVnSWNvbn0gJHtkZWJ1Z1N0YXR1c30gJHt0aGVtZS51aS5tdXRlZCgnWy9kZWJ1Z10nKX0gJHt0aGVtZS51aS5tdXRlZChkZWJ1Z0V4cGxhaW4pfWApO1xuXG4gICAgLy8gNy4gU2hvcnRjdXQgaGludFxuICAgIHRvZ2dsZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnPyBoZWxwJyl9YCk7XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IE1hdGgubWF4KDEwLCB0aGlzLnNhZmVXaWR0aCgpIC0gMik7XG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHRvZ2dsZXMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCBMZWdlbmQgaXMgbm93IGludGVncmF0ZWQgaW50byBidWlsZElubGluZVRvZ2dsZUxpbmUgZm9yIHVuaWZpZWQgZGlzcGxheVxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZFRvZ2dsZUxlZ2VuZCgpOiBzdHJpbmdbXSB7XG4gICAgLy8gTGVnZW5kIGV4cGxhbmF0aW9ucyBub3cgaW50ZWdyYXRlZCBkaXJlY3RseSBpbnRvIHRvZ2dsZSBsaW5lXG4gICAgcmV0dXJuIFtdO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZENocm9tZUxpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgY29uc3Qgc3RhdHVzTGluZXMgPSB0aGlzLmJ1aWxkU3RhdHVzQmxvY2sobWF4V2lkdGgpO1xuICAgIGNvbnN0IG1ldGFMaW5lcyA9IHRoaXMuYnVpbGRNZXRhQmxvY2sobWF4V2lkdGgpO1xuICAgIHJldHVybiBbLi4uc3RhdHVzTGluZXMsIC4uLm1ldGFMaW5lc107XG4gIH1cblxuICBwcml2YXRlIGFiYnJldmlhdGVQYXRoKHBhdGhWYWx1ZTogc3RyaW5nKTogc3RyaW5nIHtcbiAgICBjb25zdCBob21lID0gaG9tZWRpcigpO1xuICAgIGlmIChob21lICYmIHBhdGhWYWx1ZS5zdGFydHNXaXRoKGhvbWUpKSB7XG4gICAgICByZXR1cm4gcGF0aFZhbHVlLnJlcGxhY2UoaG9tZSwgJ34nKTtcbiAgICB9XG4gICAgcmV0dXJuIHBhdGhWYWx1ZTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTdGF0dXNCbG9jayhtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHN0YXR1c0xhYmVsID0gdGhpcy5jb21wb3NlU3RhdHVzTGFiZWwoKTtcbiAgICBpZiAoIXN0YXR1c0xhYmVsKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3Qgc2VnbWVudHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAvLyBBZGQgYW5pbWF0ZWQgc3Bpbm5lciB3aGVuIHN0cmVhbWluZyBmb3IgZHluYW1pYyB2aXN1YWwgZmVlZGJhY2tcbiAgICBpZiAodGhpcy5tb2RlID09PSAnc3RyZWFtaW5nJykge1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXJzID0gc3Bpbm5lckZyYW1lcy5icmFpbGxlO1xuICAgICAgY29uc3Qgc3Bpbm5lckNoYXIgPSBzcGlubmVyQ2hhcnNbdGhpcy5zcGlubmVyRnJhbWUgJSBzcGlubmVyQ2hhcnMubGVuZ3RoXSA/PyAn4qCLJztcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUuaW5mbyhzcGlubmVyQ2hhcil9ICR7dGhpcy5hcHBseVRvbmUoc3RhdHVzTGFiZWwudGV4dCwgc3RhdHVzTGFiZWwudG9uZSl9YCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3N0YXR1cycpfSAke3RoaXMuYXBwbHlUb25lKHN0YXR1c0xhYmVsLnRleHQsIHN0YXR1c0xhYmVsLnRvbmUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpIHtcbiAgICAgIHNlZ21lbnRzLnB1c2goYCR7dGhlbWUudWkubXV0ZWQoJ3J1bnRpbWUnKX0gJHt0aGVtZS51aS5tdXRlZCh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvblRpbWUpfWApO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuY29udGV4dFBlcmNlbnQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgLy8gVXNlIGFuaW1hdGVkIGNvbnRleHQgbWV0ZXIgZm9yIHNtb290aCBjb2xvciB0cmFuc2l0aW9uc1xuICAgICAgdGhpcy5jb250ZXh0TWV0ZXIudXBkYXRlKHRoaXMuc3RhdHVzTWV0YS5jb250ZXh0UGVyY2VudCk7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuY29udGV4dE1ldGVyLnJlbmRlcigpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy53cmFwU2VnbWVudHMoc2VnbWVudHMsIG1heFdpZHRoKTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRNZXRhQmxvY2sobWF4V2lkdGg6IG51bWJlcik6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBzZWdtZW50czogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEucHJvZmlsZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdwcm9maWxlJywgdGhpcy5zdGF0dXNNZXRhLnByb2ZpbGUsICdpbmZvJykpO1xuICAgIH1cblxuICAgIGNvbnN0IG1vZGVsID0gdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyICYmIHRoaXMuc3RhdHVzTWV0YS5tb2RlbFxuICAgICAgPyBgJHt0aGlzLnN0YXR1c01ldGEucHJvdmlkZXJ9IC8gJHt0aGlzLnN0YXR1c01ldGEubW9kZWx9YFxuICAgICAgOiB0aGlzLnN0YXR1c01ldGEubW9kZWwgfHwgdGhpcy5zdGF0dXNNZXRhLnByb3ZpZGVyO1xuICAgIGlmIChtb2RlbCkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdtb2RlbCcsIG1vZGVsLCAnaW5mbycpKTtcbiAgICB9XG5cbiAgICBjb25zdCB3b3Jrc3BhY2UgPSB0aGlzLnN0YXR1c01ldGEud29ya3NwYWNlIHx8IHRoaXMuc3RhdHVzTWV0YS5kaXJlY3Rvcnk7XG4gICAgaWYgKHdvcmtzcGFjZSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCdkaXInLCB0aGlzLmFiYnJldmlhdGVQYXRoKHdvcmtzcGFjZSksICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5zdGF0dXNNZXRhLndyaXRlcykge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd3cml0ZXMnLCB0aGlzLnN0YXR1c01ldGEud3JpdGVzLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSkge1xuICAgICAgc2VnbWVudHMucHVzaCh0aGlzLmZvcm1hdE1ldGFTZWdtZW50KCd0b29scycsIHRoaXMuc3RhdHVzTWV0YS50b29sU3VtbWFyeSwgJ211dGVkJykpO1xuICAgIH1cblxuICAgIGlmICh0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ3Nlc3Npb24nLCB0aGlzLnN0YXR1c01ldGEuc2Vzc2lvbkxhYmVsLCAnbXV0ZWQnKSk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuc3RhdHVzTWV0YS52ZXJzaW9uKSB7XG4gICAgICBzZWdtZW50cy5wdXNoKHRoaXMuZm9ybWF0TWV0YVNlZ21lbnQoJ2J1aWxkJywgYHYke3RoaXMuc3RhdHVzTWV0YS52ZXJzaW9ufWAsICdtdXRlZCcpKTtcbiAgICB9XG5cbiAgICBpZiAoc2VnbWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMud3JhcFNlZ21lbnRzKHNlZ21lbnRzLCBtYXhXaWR0aCk7XG4gIH1cblxuICBwcml2YXRlIGNvbXBvc2VTdGF0dXNMYWJlbCgpOiB7IHRleHQ6IHN0cmluZzsgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyB9IHwgbnVsbCB7XG4gICAgY29uc3Qgc3RhdHVzZXMgPSBbdGhpcy5zdGF0dXNTdHJlYW1pbmcsIHRoaXMuc3RhdHVzT3ZlcnJpZGUsIHRoaXMuc3RhdHVzTWVzc2FnZV0uZmlsdGVyKFxuICAgICAgKHZhbHVlLCBpbmRleCwgYXJyKTogdmFsdWUgaXMgc3RyaW5nID0+IEJvb2xlYW4odmFsdWUpICYmIGFyci5pbmRleE9mKHZhbHVlKSA9PT0gaW5kZXhcbiAgICApO1xuICAgIGNvbnN0IHRleHQgPSBzdGF0dXNlcy5sZW5ndGggPiAwID8gc3RhdHVzZXMuam9pbignIC8gJykgOiAnUmVhZHkgZm9yIHByb21wdHMnO1xuICAgIGlmICghdGV4dC50cmltKCkpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dC50b0xvd2VyQ2FzZSgpO1xuICAgIGNvbnN0IHRvbmU6ICdzdWNjZXNzJyB8ICdpbmZvJyB8ICd3YXJuJyB8ICdlcnJvcicgPSBub3JtYWxpemVkLmluY2x1ZGVzKCdyZWFkeScpID8gJ3N1Y2Nlc3MnIDogJ2luZm8nO1xuICAgIHJldHVybiB7IHRleHQsIHRvbmUgfTtcbiAgfVxuXG4gIHByaXZhdGUgZm9ybWF0TWV0YVNlZ21lbnQoXG4gICAgbGFiZWw6IHN0cmluZyxcbiAgICB2YWx1ZTogc3RyaW5nLFxuICAgIHRvbmU6ICdpbmZvJyB8ICdzdWNjZXNzJyB8ICd3YXJuJyB8ICdlcnJvcicgfCAnbXV0ZWQnXG4gICk6IHN0cmluZyB7XG4gICAgY29uc3QgY29sb3JpemVyID1cbiAgICAgIHRvbmUgPT09ICdzdWNjZXNzJ1xuICAgICAgICA/IHRoZW1lLnN1Y2Nlc3NcbiAgICAgICAgOiB0b25lID09PSAnd2FybidcbiAgICAgICAgICA/IHRoZW1lLndhcm5pbmdcbiAgICAgICAgICA6IHRvbmUgPT09ICdlcnJvcidcbiAgICAgICAgICAgID8gdGhlbWUuZXJyb3JcbiAgICAgICAgICAgIDogdG9uZSA9PT0gJ211dGVkJ1xuICAgICAgICAgICAgICA/IHRoZW1lLnVpLm11dGVkXG4gICAgICAgICAgICAgIDogdGhlbWUuaW5mbztcbiAgICByZXR1cm4gYCR7dGhlbWUudWkubXV0ZWQobGFiZWwpfSAke2NvbG9yaXplcih2YWx1ZSl9YDtcbiAgfVxuXG4gIHByaXZhdGUgYXBwbHlUb25lKHRleHQ6IHN0cmluZywgdG9uZTogJ3N1Y2Nlc3MnIHwgJ2luZm8nIHwgJ3dhcm4nIHwgJ2Vycm9yJyk6IHN0cmluZyB7XG4gICAgc3dpdGNoICh0b25lKSB7XG4gICAgICBjYXNlICdzdWNjZXNzJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLnN1Y2Nlc3ModGV4dCk7XG4gICAgICBjYXNlICd3YXJuJzpcbiAgICAgICAgcmV0dXJuIHRoZW1lLndhcm5pbmcodGV4dCk7XG4gICAgICBjYXNlICdlcnJvcic6XG4gICAgICAgIHJldHVybiB0aGVtZS5lcnJvcih0ZXh0KTtcbiAgICAgIGNhc2UgJ2luZm8nOlxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgcmV0dXJuIHRoZW1lLmluZm8odGV4dCk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSB3cmFwU2VnbWVudHMoc2VnbWVudHM6IHN0cmluZ1tdLCBtYXhXaWR0aDogbnVtYmVyKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICAgIGNvbnN0IHNlcGFyYXRvciA9IHRoZW1lLnVpLm11dGVkKCcgIHwgICcpO1xuXG4gICAgbGV0IGN1cnJlbnQgPSAnJztcbiAgICBmb3IgKGNvbnN0IHNlZ21lbnQgb2Ygc2VnbWVudHMpIHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSBzZWdtZW50LnRyaW0oKTtcbiAgICAgIGlmICghbm9ybWFsaXplZCkgY29udGludWU7XG4gICAgICBpZiAoIWN1cnJlbnQpIHtcbiAgICAgICAgY3VycmVudCA9IHRoaXMudHJ1bmNhdGVMaW5lKG5vcm1hbGl6ZWQsIG1heFdpZHRoKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgICBjb25zdCBjYW5kaWRhdGUgPSBgJHtjdXJyZW50fSR7c2VwYXJhdG9yfSR7bm9ybWFsaXplZH1gO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChjYW5kaWRhdGUpIDw9IG1heFdpZHRoKSB7XG4gICAgICAgIGN1cnJlbnQgPSBjYW5kaWRhdGU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQsIG1heFdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSB0aGlzLnRydW5jYXRlTGluZShub3JtYWxpemVkLCBtYXhXaWR0aCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQpIHtcbiAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudCwgbWF4V2lkdGgpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZXM7XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkQ29udHJvbExpbmVzKCk6IHN0cmluZ1tdIHtcbiAgICBjb25zdCBsaW5lczogc3RyaW5nW10gPSBbXTtcbiAgICBjb25zdCB0b2dnbGVMaW5lID0gdGhpcy5idWlsZFRvZ2dsZUxpbmUoKTtcbiAgICBpZiAodG9nZ2xlTGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgnbW9kZXMnKX0gJHt0aGVtZS51aS5tdXRlZCgn4oC6Jyl9ICR7dG9nZ2xlTGluZX1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBzaG9ydGN1dExpbmUgPSB0aGlzLmJ1aWxkU2hvcnRjdXRMaW5lKCk7XG4gICAgaWYgKHNob3J0Y3V0TGluZSkge1xuICAgICAgbGluZXMucHVzaChgJHt0aGVtZS51aS5tdXRlZCgna2V5cycpfSAgJHtzaG9ydGN1dExpbmV9YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1aWxkIGEgY29tcGFjdCB0b2dnbGUgbGluZSBsaWtlIENsYXVkZSBDb2RlOlxuICAgKiBcIuKPteKPtSBhY2NlcHQgZWRpdHMgb24gKHNoaWZ0K3RhYiB0byBjeWNsZSlcIlxuICAgKi9cbiAgcHJpdmF0ZSBidWlsZENvbXBhY3RUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIC8vIFNob3cgdGhlIG1vc3QgcmVsZXZhbnQgbW9kZSBiYXNlZCBvbiBjdXJyZW50IHN0YXRlXG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IHRoaXMudG9nZ2xlU3RhdGUuYXV0b0NvbnRpbnVlRW5hYmxlZDtcblxuICAgIC8vIEVkaXQgbW9kZSBpbmRpY2F0b3JcbiAgICBjb25zdCBlZGl0SWNvbiA9ICfij7Xij7UnO1xuICAgIGNvbnN0IGVkaXRTdGF0ZSA9IHZlcmlmaWNhdGlvbkFjdGl2ZSA/ICdhcHByb3ZhbCByZXF1aXJlZCcgOiAnYWNjZXB0IGVkaXRzJztcbiAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKGVkaXRJY29uKX0gJHtlZGl0U3RhdGV9ICR7dGhlbWUuc3VjY2Vzcygnb24nKX1gKTtcblxuICAgIC8vIFRoaW5raW5nIG1vZGUgKGlmIGFjdGl2ZSlcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID0gKHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdNb2RlTGFiZWwgfHwgJycpLnRyaW0oKS50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICh0aGlua2luZ0xhYmVsICYmIHRoaW5raW5nTGFiZWwgIT09ICdvZmYnKSB7XG4gICAgICBwYXJ0cy5wdXNoKGAke3RoZW1lLnVpLm11dGVkKCd0aGlua2luZycpfSAke3RoZW1lLmluZm8odGhpbmtpbmdMYWJlbCl9YCk7XG4gICAgfVxuXG4gICAgLy8gQ3ljbGUgaGludFxuICAgIGNvbnN0IGN5Y2xlSGludCA9IHRoZW1lLnVpLm11dGVkKCcoc2hpZnQrdGFiIHRvIGN5Y2xlKScpO1xuXG4gICAgaWYgKHBhcnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIGAgICR7cGFydHMuam9pbih0aGVtZS51aS5tdXRlZCgnIMK3ICcpKX0gJHtjeWNsZUhpbnR9YDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRUb2dnbGVMaW5lKCk6IHN0cmluZyB8IG51bGwge1xuICAgIGNvbnN0IHRvZ2dsZXM6IEFycmF5PHtcbiAgICAgIGxhYmVsOiBzdHJpbmc7XG4gICAgICBvbjogYm9vbGVhbjtcbiAgICAgIHZhbHVlPzogc3RyaW5nO1xuICAgICAgaG90a2V5Pzogc3RyaW5nIHwgbnVsbDtcbiAgICB9PiA9IFtdO1xuXG4gICAgY29uc3QgYWRkVG9nZ2xlID0gKGxhYmVsOiBzdHJpbmcsIG9uOiBib29sZWFuLCBob3RrZXk/OiBzdHJpbmcsIHZhbHVlPzogc3RyaW5nKSA9PiB7XG4gICAgICB0b2dnbGVzLnB1c2goeyBsYWJlbCwgb24sIGhvdGtleTogdGhpcy5mb3JtYXRIb3RrZXkoaG90a2V5KSwgdmFsdWUgfSk7XG4gICAgfTtcblxuICAgIGNvbnN0IGF1dG9WZXJpZnlBY3RpdmUgPSB0aGlzLnRvZ2dsZVN0YXRlLmF1dG9Db250aW51ZUVuYWJsZWQgPz8gZmFsc2U7XG4gICAgY29uc3QgdmVyaWZpY2F0aW9uQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25FbmFibGVkIHx8IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgY29uc3QgdmVyaWZ5VmFsdWUgPSBhdXRvVmVyaWZ5QWN0aXZlXG4gICAgICA/ICdhdXRvJ1xuICAgICAgOiB2ZXJpZmljYXRpb25BY3RpdmVcbiAgICAgICAgPyAnb24nXG4gICAgICAgIDogJ29mZic7XG5cbiAgICBhZGRUb2dnbGUoJ1ZlcmlmeScsIHZlcmlmaWNhdGlvbkFjdGl2ZSwgdGhpcy50b2dnbGVTdGF0ZS52ZXJpZmljYXRpb25Ib3RrZXksIHZlcmlmeVZhbHVlKTtcbiAgICBjb25zdCBhcHByb3ZhbE1vZGUgPSB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxNb2RlIHx8ICdhdXRvJztcbiAgICBjb25zdCBhcHByb3ZhbEFjdGl2ZSA9IGFwcHJvdmFsTW9kZSAhPT0gJ2F1dG8nO1xuICAgIGFkZFRvZ2dsZShcbiAgICAgICdBcHByb3ZhbHMnLFxuICAgICAgYXBwcm92YWxBY3RpdmUsXG4gICAgICB0aGlzLnRvZ2dsZVN0YXRlLmNyaXRpY2FsQXBwcm92YWxIb3RrZXksXG4gICAgICBhcHByb3ZhbE1vZGUgPT09ICdhdXRvJyA/ICdhdXRvJyA6ICdhc2snXG4gICAgKTtcblxuICAgIGNvbnN0IGF1dG9Db250aW51ZUFjdGl2ZSA9IGF1dG9WZXJpZnlBY3RpdmU7XG4gICAgYWRkVG9nZ2xlKFxuICAgICAgJ0F1dG8tY29udGludWUnLFxuICAgICAgYXV0b0NvbnRpbnVlQWN0aXZlLFxuICAgICAgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXksXG4gICAgICBhdXRvQ29udGludWVBY3RpdmUgPyAnYXV0by12ZXJpZnknIDogJ29mZidcbiAgICApO1xuXG4gICAgY29uc3QgdGhpbmtpbmdMYWJlbFJhdyA9ICh0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nTW9kZUxhYmVsIHx8ICdiYWxhbmNlZCcpLnRyaW0oKTtcbiAgICBjb25zdCB0aGlua2luZ0xhYmVsID1cbiAgICAgIHRoaW5raW5nTGFiZWxSYXcudG9Mb3dlckNhc2UoKSA9PT0gJ2V4dGVuZGVkJyA/ICdkZWVwJyA6IHRoaW5raW5nTGFiZWxSYXcgfHwgJ2JhbGFuY2VkJztcbiAgICBjb25zdCB0aGlua2luZ0FjdGl2ZSA9IHRoaW5raW5nTGFiZWwubGVuZ3RoID4gMDtcbiAgICBhZGRUb2dnbGUoJ1RoaW5raW5nJywgdGhpbmtpbmdBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUudGhpbmtpbmdIb3RrZXksIHRoaW5raW5nTGFiZWwpO1xuXG4gICAgY29uc3QgZHVhbFJsQWN0aXZlID0gdGhpcy50b2dnbGVTdGF0ZS5kdWFsUmxFbmFibGVkID8/IGZhbHNlO1xuICAgIGNvbnN0IG1vZGVWYWx1ZSA9IGR1YWxSbEFjdGl2ZSA/ICdkdWFsLXJsLWNvbnQnIDogJ3NpbmdsZS1jb250JztcbiAgICBhZGRUb2dnbGUoJ01vZGUnLCBkdWFsUmxBY3RpdmUsIHRoaXMudG9nZ2xlU3RhdGUuZHVhbFJsSG90a2V5LCBtb2RlVmFsdWUpO1xuXG4gICAgY29uc3QgYnVpbGRMaW5lID0gKGluY2x1ZGVIb3RrZXlzOiBib29sZWFuKTogc3RyaW5nID0+IHtcbiAgICAgIHJldHVybiB0b2dnbGVzXG4gICAgICAgIC5tYXAodG9nZ2xlID0+IHtcbiAgICAgICAgICBjb25zdCBzdGF0ZVRleHQgPSB0b2dnbGUub24gPyB0aGVtZS5zdWNjZXNzKHRvZ2dsZS52YWx1ZSB8fCAnb24nKSA6IHRoZW1lLnVpLm11dGVkKHRvZ2dsZS52YWx1ZSB8fCAnb2ZmJyk7XG4gICAgICAgICAgY29uc3QgaG90a2V5VGV4dCA9XG4gICAgICAgICAgICBpbmNsdWRlSG90a2V5cyAmJiB0b2dnbGUuaG90a2V5ID8gdGhlbWUudWkubXV0ZWQoYCBbJHt0b2dnbGUuaG90a2V5fV1gKSA6ICcnO1xuICAgICAgICAgIHJldHVybiBgJHt0aGVtZS51aS5tdXRlZChgJHt0b2dnbGUubGFiZWx9OmApfSAke3N0YXRlVGV4dH0ke2hvdGtleVRleHR9YDtcbiAgICAgICAgfSlcbiAgICAgICAgLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgJykpO1xuICAgIH07XG5cbiAgICBjb25zdCBtYXhXaWR0aCA9IHRoaXMuc2FmZVdpZHRoKCk7XG4gICAgbGV0IGxpbmUgPSBidWlsZExpbmUodHJ1ZSk7XG5cbiAgICAvLyBSZWNvcmQgd2hpY2ggaG90a2V5cyBhcmUgYWN0dWFsbHkgc2hvd24gc28gdGhlIHNob3J0Y3V0IGxpbmUgY2FuIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICB0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUgPSBuZXcgU2V0KFxuICAgICAgdG9nZ2xlc1xuICAgICAgICAubWFwKHRvZ2dsZSA9PiAodG9nZ2xlLmhvdGtleSA/IHRvZ2dsZS5ob3RrZXkgOiBudWxsKSlcbiAgICAgICAgLmZpbHRlcigoa2V5KToga2V5IGlzIHN0cmluZyA9PiBCb29sZWFuKGtleSkpXG4gICAgKTtcblxuICAgIC8vIElmIHRoZSBsaW5lIGlzIHRvbyB3aWRlLCBkcm9wIGhvdGtleSBoaW50cyB0byBwcmVzZXJ2ZSBhbGwgdG9nZ2xlIGxhYmVsc1xuICAgIGlmICh0aGlzLnZpc2libGVMZW5ndGgobGluZSkgPiBtYXhXaWR0aCkge1xuICAgICAgdGhpcy5ob3RrZXlzSW5Ub2dnbGVMaW5lLmNsZWFyKCk7XG4gICAgICBsaW5lID0gYnVpbGRMaW5lKGZhbHNlKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbGluZS50cmltKCkgPyBsaW5lIDogbnVsbDtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRTaG9ydGN1dExpbmUoKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgY29uc3QgcGFydHM6IHN0cmluZ1tdID0gW107XG5cbiAgICBjb25zdCBhZGRIb3RrZXkgPSAobGFiZWw6IHN0cmluZywgY29tYm8/OiBzdHJpbmcpID0+IHtcbiAgICAgIGNvbnN0IG5vcm1hbGl6ZWQgPSB0aGlzLmZvcm1hdEhvdGtleShjb21ibyk7XG4gICAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcbiAgICAgIGlmICh0aGlzLmhvdGtleXNJblRvZ2dsZUxpbmUuaGFzKG5vcm1hbGl6ZWQpKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICAgIHBhcnRzLnB1c2goYCR7dGhlbWUuaW5mbyhub3JtYWxpemVkKX0gJHt0aGVtZS51aS5tdXRlZChsYWJlbCl9YCk7XG4gICAgfTtcblxuICAgIC8vIENvcmUgY29udHJvbHNcbiAgICBhZGRIb3RrZXkoJ2ludGVycnVwdCcsICdDdHJsK0MnKTtcbiAgICBhZGRIb3RrZXkoJ2NsZWFyIGlucHV0JywgJ0N0cmwrVScpO1xuXG4gICAgLy8gRmVhdHVyZSB0b2dnbGVzIChvbmx5IGlmIGhvdGtleXMgYXJlIGRlZmluZWQpXG4gICAgYWRkSG90a2V5KCd2ZXJpZnknLCB0aGlzLnRvZ2dsZVN0YXRlLnZlcmlmaWNhdGlvbkhvdGtleSk7XG4gICAgYWRkSG90a2V5KCdhdXRvLWNvbnRpbnVlJywgdGhpcy50b2dnbGVTdGF0ZS5hdXRvQ29udGludWVIb3RrZXkpO1xuICAgIGFkZEhvdGtleSgndGhpbmtpbmcnLCB0aGlzLnRvZ2dsZVN0YXRlLnRoaW5raW5nSG90a2V5KTtcbiAgICBhZGRIb3RrZXkoJ21vZGUnLCB0aGlzLnRvZ2dsZVN0YXRlLmR1YWxSbEhvdGtleSk7XG5cbiAgICBpZiAocGFydHMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIHBhcnRzLmpvaW4odGhlbWUudWkubXV0ZWQoJyAgICcpKTtcbiAgfVxuXG5cbiAgcHJpdmF0ZSBidWlsZElucHV0TGluZSgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICBjb25zdCBzdW1tYXJ5ID0gYFtwYXN0ZWQgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmxpbmVzfSBsaW5lcywgJHt0aGlzLmNvbGxhcHNlZFBhc3RlLmNoYXJzfSBjaGFyc10gKEVudGVyL0N0cmwrTCBpbnNlcnQsIEJhY2tzcGFjZSBkaXNjYXJkKWA7XG4gICAgICByZXR1cm4gdGhpcy50cnVuY2F0ZUxpbmUoYCR7dGhlbWUucHJpbWFyeSgnPiAnKX0ke3RoZW1lLnVpLm11dGVkKHN1bW1hcnkpfWAsIHRoaXMuc2FmZVdpZHRoKCkpO1xuICAgIH1cblxuICAgIC8vIENsYXVkZSBDb2RlIHVzZXMgc2ltcGxlICc+JyBwcm9tcHRcbiAgICBjb25zdCBwcm9tcHQgPSB0aGVtZS5wcmltYXJ5KCc+ICcpO1xuICAgIGNvbnN0IHByb21wdFdpZHRoID0gdGhpcy52aXNpYmxlTGVuZ3RoKHByb21wdCk7XG4gICAgY29uc3QgbWF4V2lkdGggPSB0aGlzLnNhZmVXaWR0aCgpO1xuICAgIGNvbnN0IGNvbnRpbnVhdGlvbkluZGVudCA9ICcgICc7IC8vIDIgc3BhY2VzIGZvciBjb250aW51YXRpb24gbGluZXNcbiAgICBjb25zdCBjb250aW51YXRpb25XaWR0aCA9IGNvbnRpbnVhdGlvbkluZGVudC5sZW5ndGg7XG5cbiAgICAvLyBIYW5kbGUgbXVsdGktbGluZSBpbnB1dCAtIHNwbGl0IGJ1ZmZlciBvbiBuZXdsaW5lcyBmaXJzdFxuICAgIC8vIEluIHNlY3JldCBtb2RlLCBtYXNrIGFsbCBjaGFyYWN0ZXJzIHdpdGggYnVsbGV0c1xuICAgIGNvbnN0IHJhd0J1ZmZlciA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuc2VjcmV0TW9kZSA/ICfigKInLnJlcGVhdChyYXdCdWZmZXIubGVuZ3RoKSA6IHJhd0J1ZmZlcjtcbiAgICBjb25zdCBidWZmZXJMaW5lcyA9IG5vcm1hbGl6ZWQuc3BsaXQoJ1xcbicpO1xuXG4gICAgLy8gV3JhcCBlYWNoIGxvZ2ljYWwgbGluZSB0byBmaXQgdGVybWluYWwgd2lkdGgsIGV4cGFuZGluZyB2ZXJ0aWNhbGx5XG4gICAgY29uc3QgcmVzdWx0OiBzdHJpbmdbXSA9IFtdO1xuICAgIGxldCB0b3RhbENoYXJzID0gMDtcbiAgICBsZXQgY3Vyc29yTGluZSA9IDA7XG4gICAgbGV0IGN1cnNvckNvbCA9IDA7XG4gICAgbGV0IGZvdW5kQ3Vyc29yID0gZmFsc2U7XG5cbiAgICBmb3IgKGxldCBsaW5lSW5kZXggPSAwOyBsaW5lSW5kZXggPCBidWZmZXJMaW5lcy5sZW5ndGg7IGxpbmVJbmRleCsrKSB7XG4gICAgICBjb25zdCBsaW5lID0gYnVmZmVyTGluZXNbbGluZUluZGV4XSA/PyAnJztcbiAgICAgIGNvbnN0IGlzRmlyc3RMb2dpY2FsTGluZSA9IGxpbmVJbmRleCA9PT0gMDtcbiAgICAgIGNvbnN0IGxpbmVTdGFydENoYXIgPSB0b3RhbENoYXJzO1xuXG4gICAgICAvLyBEZXRlcm1pbmUgYXZhaWxhYmxlIHdpZHRoIGZvciB0aGlzIGxpbmVcbiAgICAgIGNvbnN0IGZpcnN0TGluZVdpZHRoID0gbWF4V2lkdGggLSBwcm9tcHRXaWR0aDtcbiAgICAgIGNvbnN0IGNvbnRMaW5lV2lkdGggPSBtYXhXaWR0aCAtIGNvbnRpbnVhdGlvbldpZHRoO1xuXG4gICAgICAvLyBXcmFwIHRoaXMgbG9naWNhbCBsaW5lIGludG8gZGlzcGxheSBsaW5lc1xuICAgICAgbGV0IHJlbWFpbmluZyA9IGxpbmU7XG4gICAgICBsZXQgaXNGaXJzdERpc3BsYXlMaW5lID0gdHJ1ZTtcblxuICAgICAgd2hpbGUgKHJlbWFpbmluZy5sZW5ndGggPiAwIHx8IGlzRmlyc3REaXNwbGF5TGluZSkge1xuICAgICAgICBjb25zdCBhdmFpbGFibGVXaWR0aCA9IChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSA/IGZpcnN0TGluZVdpZHRoIDogY29udExpbmVXaWR0aDtcbiAgICAgICAgY29uc3QgY2h1bmsgPSByZW1haW5pbmcuc2xpY2UoMCwgYXZhaWxhYmxlV2lkdGgpO1xuICAgICAgICByZW1haW5pbmcgPSByZW1haW5pbmcuc2xpY2UoYXZhaWxhYmxlV2lkdGgpO1xuXG4gICAgICAgIC8vIEJ1aWxkIHRoZSBkaXNwbGF5IGxpbmVcbiAgICAgICAgbGV0IGRpc3BsYXlMaW5lOiBzdHJpbmc7XG4gICAgICAgIGlmIChpc0ZpcnN0TG9naWNhbExpbmUgJiYgaXNGaXJzdERpc3BsYXlMaW5lKSB7XG4gICAgICAgICAgZGlzcGxheUxpbmUgPSBgJHtwcm9tcHR9JHtjaHVua31gO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRpc3BsYXlMaW5lID0gYCR7Y29udGludWF0aW9uSW5kZW50fSR7Y2h1bmt9YDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFRyYWNrIGN1cnNvciBwb3NpdGlvblxuICAgICAgICBpZiAoIWZvdW5kQ3Vyc29yKSB7XG4gICAgICAgICAgY29uc3QgY2h1bmtTdGFydCA9IGxpbmVTdGFydENoYXIgKyAobGluZS5sZW5ndGggLSByZW1haW5pbmcubGVuZ3RoIC0gY2h1bmsubGVuZ3RoKTtcbiAgICAgICAgICBjb25zdCBjaHVua0VuZCA9IGNodW5rU3RhcnQgKyBjaHVuay5sZW5ndGg7XG4gICAgICAgICAgaWYgKHRoaXMuY3Vyc29yID49IGNodW5rU3RhcnQgJiYgdGhpcy5jdXJzb3IgPD0gY2h1bmtFbmQpIHtcbiAgICAgICAgICAgIGN1cnNvckxpbmUgPSByZXN1bHQubGVuZ3RoO1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SW5DaHVuayA9IHRoaXMuY3Vyc29yIC0gY2h1bmtTdGFydDtcbiAgICAgICAgICAgIGN1cnNvckNvbCA9ICgoaXNGaXJzdExvZ2ljYWxMaW5lICYmIGlzRmlyc3REaXNwbGF5TGluZSkgPyBwcm9tcHRXaWR0aCA6IGNvbnRpbnVhdGlvbldpZHRoKSArIG9mZnNldEluQ2h1bms7XG4gICAgICAgICAgICBmb3VuZEN1cnNvciA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmVzdWx0LnB1c2goZGlzcGxheUxpbmUpO1xuICAgICAgICBpc0ZpcnN0RGlzcGxheUxpbmUgPSBmYWxzZTtcblxuICAgICAgICAvLyBJZiBub3RoaW5nIGxlZnQgYW5kIHRoaXMgd2FzIGFuIGVtcHR5IGxpbmUsIHdlIGFscmVhZHkgYWRkZWQgaXRcbiAgICAgICAgaWYgKHJlbWFpbmluZy5sZW5ndGggPT09IDAgJiYgY2h1bmsubGVuZ3RoID09PSAwKSBicmVhaztcbiAgICAgIH1cblxuICAgICAgdG90YWxDaGFycyArPSBsaW5lLmxlbmd0aCArIDE7IC8vICsxIGZvciB0aGUgbmV3bGluZSBzZXBhcmF0b3JcbiAgICB9XG5cbiAgICAvLyBIYW5kbGUgY3Vyc29yIGF0IHZlcnkgZW5kXG4gICAgaWYgKCFmb3VuZEN1cnNvcikge1xuICAgICAgY3Vyc29yTGluZSA9IE1hdGgubWF4KDAsIHJlc3VsdC5sZW5ndGggLSAxKTtcbiAgICAgIGNvbnN0IGxhc3RMaW5lID0gcmVzdWx0W2N1cnNvckxpbmVdID8/ICcnO1xuICAgICAgY3Vyc29yQ29sID0gdGhpcy52aXNpYmxlTGVuZ3RoKGxhc3RMaW5lKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY3Vyc29yIGhpZ2hsaWdodCB0byB0aGUgYXBwcm9wcmlhdGUgcG9zaXRpb25cbiAgICBpZiAocmVzdWx0Lmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IHRhcmdldExpbmUgPSByZXN1bHRbY3Vyc29yTGluZV0gPz8gJyc7XG4gICAgICBjb25zdCB2aXNpYmxlUGFydCA9IHRoaXMuc3RyaXBBbnNpKHRhcmdldExpbmUpO1xuICAgICAgY29uc3QgY3Vyc29yUG9zID0gTWF0aC5taW4oY3Vyc29yQ29sLCB2aXNpYmxlUGFydC5sZW5ndGgpO1xuXG4gICAgICAvLyBSZWJ1aWxkIHRoZSBsaW5lIHdpdGggY3Vyc29yIGhpZ2hsaWdodFxuICAgICAgY29uc3QgYmVmb3JlID0gdmlzaWJsZVBhcnQuc2xpY2UoMCwgY3Vyc29yUG9zKTtcbiAgICAgIGNvbnN0IGF0ID0gdmlzaWJsZVBhcnQuY2hhckF0KGN1cnNvclBvcykgfHwgJyAnO1xuICAgICAgY29uc3QgYWZ0ZXIgPSB2aXNpYmxlUGFydC5zbGljZShjdXJzb3JQb3MgKyAxKTtcblxuICAgICAgLy8gUHJlc2VydmUgdGhlIHByb21wdC9pbmRlbnQgc3R5bGluZ1xuICAgICAgY29uc3QgcHJlZml4ID0gY3Vyc29yTGluZSA9PT0gMCA/IHByb21wdCA6IGNvbnRpbnVhdGlvbkluZGVudDtcbiAgICAgIGNvbnN0IHRleHRQYXJ0ID0gY3Vyc29yTGluZSA9PT0gMCA/IGJlZm9yZS5zbGljZShwcm9tcHRXaWR0aCkgOiBiZWZvcmUuc2xpY2UoY29udGludWF0aW9uV2lkdGgpO1xuICAgICAgcmVzdWx0W2N1cnNvckxpbmVdID0gYCR7cHJlZml4fSR7dGV4dFBhcnR9JHtFU0MuUkVWRVJTRX0ke2F0fSR7RVNDLlJFU0VUfSR7YWZ0ZXJ9YDtcbiAgICB9XG5cbiAgICAvLyBTdG9yZSBjdXJzb3IgY29sdW1uIGZvciB0ZXJtaW5hbCBwb3NpdGlvbmluZ1xuICAgIHRoaXMuY3Vyc29yVmlzaWJsZUNvbHVtbiA9IGN1cnNvckNvbCArIDE7XG5cbiAgICByZXR1cm4gcmVzdWx0LmpvaW4oJ1xcbicpO1xuICB9XG5cbiAgcHJpdmF0ZSBidWlsZElucHV0V2luZG93KGF2YWlsYWJsZTogbnVtYmVyKTogeyB0ZXh0OiBzdHJpbmc7IGN1cnNvcjogbnVtYmVyIH0ge1xuICAgIGlmIChhdmFpbGFibGUgPD0gMCkge1xuICAgICAgcmV0dXJuIHsgdGV4dDogJycsIGN1cnNvcjogMCB9O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbGxhcHNlZFBhc3RlKSB7XG4gICAgICByZXR1cm4geyB0ZXh0OiAnJywgY3Vyc29yOiAwIH07XG4gICAgfVxuXG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRoaXMuYnVmZmVyLnJlcGxhY2UoL1xcci9nLCAnXFxuJyk7XG4gICAgY29uc3QgY3Vyc29ySW5kZXggPSBNYXRoLm1pbih0aGlzLmN1cnNvciwgbm9ybWFsaXplZC5sZW5ndGgpO1xuXG4gICAgbGV0IG9mZnNldCA9IHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQ7XG4gICAgaWYgKGN1cnNvckluZGV4IDwgb2Zmc2V0KSB7XG4gICAgICBvZmZzZXQgPSBjdXJzb3JJbmRleDtcbiAgICB9XG4gICAgY29uc3Qgb3ZlcmZsb3cgPSBjdXJzb3JJbmRleCAtIG9mZnNldCAtIGF2YWlsYWJsZSArIDE7XG4gICAgaWYgKG92ZXJmbG93ID4gMCkge1xuICAgICAgb2Zmc2V0ICs9IG92ZXJmbG93O1xuICAgIH1cbiAgICBjb25zdCBtYXhPZmZzZXQgPSBNYXRoLm1heCgwLCBub3JtYWxpemVkLmxlbmd0aCAtIGF2YWlsYWJsZSk7XG4gICAgaWYgKG9mZnNldCA+IG1heE9mZnNldCkge1xuICAgICAgb2Zmc2V0ID0gbWF4T2Zmc2V0O1xuICAgIH1cbiAgICB0aGlzLmlucHV0UmVuZGVyT2Zmc2V0ID0gb2Zmc2V0O1xuXG4gICAgY29uc3Qgd2luZG93ID0gbm9ybWFsaXplZC5zbGljZShvZmZzZXQsIG9mZnNldCArIGF2YWlsYWJsZSk7XG4gICAgY29uc3QgZGlzcGxheSA9IHdpbmRvdy5zcGxpdCgnJykubWFwKGNoYXIgPT4gKGNoYXIgPT09ICdcXG4nID8gTkVXTElORV9QTEFDRUhPTERFUiA6IGNoYXIpKS5qb2luKCcnKTtcbiAgICBjb25zdCBjdXJzb3JJbldpbmRvdyA9IE1hdGgubWluKGRpc3BsYXkubGVuZ3RoLCBNYXRoLm1heCgwLCBjdXJzb3JJbmRleCAtIG9mZnNldCkpO1xuXG4gICAgY29uc3QgYmVmb3JlID0gZGlzcGxheS5zbGljZSgwLCBjdXJzb3JJbldpbmRvdyk7XG4gICAgY29uc3QgYXQgPSBkaXNwbGF5LmNoYXJBdChjdXJzb3JJbldpbmRvdykgfHwgJyAnO1xuICAgIGNvbnN0IGFmdGVyID0gZGlzcGxheS5zbGljZShjdXJzb3JJbldpbmRvdyArIDEpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHRleHQ6IGAke2JlZm9yZX0ke0VTQy5SRVZFUlNFfSR7YXR9JHtFU0MuUkVTRVR9JHthZnRlcn1gLFxuICAgICAgY3Vyc29yOiBjdXJzb3JJbldpbmRvdyxcbiAgICB9O1xuICB9XG5cbiAgcHJpdmF0ZSBleHBhbmRDb2xsYXBzZWRQYXN0ZSgpOiB2b2lkIHtcbiAgICBpZiAoIXRoaXMuY29sbGFwc2VkUGFzdGUpIHJldHVybjtcbiAgICB0aGlzLmJ1ZmZlciA9IHRoaXMuY29sbGFwc2VkUGFzdGUudGV4dDtcbiAgICB0aGlzLmN1cnNvciA9IHRoaXMuYnVmZmVyLmxlbmd0aDtcbiAgICB0aGlzLmNvbGxhcHNlZFBhc3RlID0gbnVsbDtcbiAgICB0aGlzLnVwZGF0ZVN1Z2dlc3Rpb25zKCk7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgY2FwdHVyZUlucHV0KG9wdGlvbnM6IHsgYWxsb3dFbXB0eT86IGJvb2xlYW47IHRyaW0/OiBib29sZWFuOyByZXNldEJ1ZmZlcj86IGJvb2xlYW4gfSA9IHt9KTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBpZiAodGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgYWxyZWFkeSBpbiBwcm9ncmVzcycpKTtcbiAgICB9XG5cbiAgICBpZiAob3B0aW9ucy5yZXNldEJ1ZmZlcikge1xuICAgICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICAgIHRoaXMuY3Vyc29yID0gMDtcbiAgICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgICAgdGhpcy5yZXNldFN1Z2dlc3Rpb25zKCk7XG4gICAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgICAgdGhpcy5lbWl0SW5wdXRDaGFuZ2UoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2U8c3RyaW5nPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLmlucHV0Q2FwdHVyZSA9IHtcbiAgICAgICAgcmVzb2x2ZSxcbiAgICAgICAgcmVqZWN0LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgdHJpbTogb3B0aW9ucy50cmltICE9PSBmYWxzZSxcbiAgICAgICAgICBhbGxvd0VtcHR5OiBvcHRpb25zLmFsbG93RW1wdHkgPz8gZmFsc2UsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYW5jZWxJbnB1dENhcHR1cmUocmVhc29uPzogdW5rbm93bik6IHZvaWQge1xuICAgIGlmICghdGhpcy5pbnB1dENhcHR1cmUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgY2FwdHVyZSA9IHRoaXMuaW5wdXRDYXB0dXJlO1xuICAgIHRoaXMuaW5wdXRDYXB0dXJlID0gbnVsbDtcbiAgICBjYXB0dXJlLnJlamVjdD8uKHJlYXNvbiA/PyBuZXcgRXJyb3IoJ0lucHV0IGNhcHR1cmUgY2FuY2VsbGVkJykpO1xuICB9XG5cblxuICAvLyAtLS0tLS0tLS0tLS0gSGVscGVycyAtLS0tLS0tLS0tLS1cblxuICBwcml2YXRlIHdyYXBPdmVybGF5TGluZSh0ZXh0OiBzdHJpbmcsIHdpZHRoOiBudW1iZXIsIGluZGVudDogc3RyaW5nKTogc3RyaW5nW10ge1xuICAgIGNvbnN0IHdvcmRzID0gdGV4dC5zcGxpdCgvKFxccyspLyk7XG4gICAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gICAgbGV0IGN1cnJlbnQgPSAnJztcblxuICAgIGZvciAoY29uc3Qgd29yZCBvZiB3b3Jkcykge1xuICAgICAgY29uc3QgbmV4dCA9IGN1cnJlbnQgKyB3b3JkO1xuICAgICAgaWYgKHRoaXMudmlzaWJsZUxlbmd0aChuZXh0KSA+IHdpZHRoICYmIGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICAgIGxpbmVzLnB1c2godGhpcy50cnVuY2F0ZUxpbmUoY3VycmVudC50cmltRW5kKCksIHdpZHRoKSk7XG4gICAgICAgIGN1cnJlbnQgPSBpbmRlbnQgKyB3b3JkLnRyaW1TdGFydCgpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY3VycmVudCA9IG5leHQ7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGN1cnJlbnQudHJpbSgpKSB7XG4gICAgICBsaW5lcy5wdXNoKHRoaXMudHJ1bmNhdGVMaW5lKGN1cnJlbnQudHJpbUVuZCgpLCB3aWR0aCkpO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcy5sZW5ndGggPyBsaW5lcyA6IFt0aGlzLnRydW5jYXRlTGluZSh0ZXh0LCB3aWR0aCldO1xuICB9XG5cbiAgcHJpdmF0ZSBzYWZlV2lkdGgoKTogbnVtYmVyIHtcbiAgICBjb25zdCBjb2xzID0gdGhpcy5vdXRwdXQuaXNUVFkgPyB0aGlzLmNvbHMgfHwgODAgOiA4MDtcbiAgICByZXR1cm4gTWF0aC5tYXgoMSwgY29scyAtIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSB2aXNpYmxlTGVuZ3RoKHZhbHVlOiBzdHJpbmcpOiBudW1iZXIge1xuICAgIGlmICghdmFsdWUpIHJldHVybiAwO1xuICAgIHJldHVybiB0aGlzLnN0cmlwQW5zaSh2YWx1ZSkubGVuZ3RoO1xuICB9XG5cbiAgcHJpdmF0ZSBzdHJpcEFuc2kodmFsdWU6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgaWYgKCF2YWx1ZSkgcmV0dXJuICcnO1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb250cm9sLXJlZ2V4XG4gICAgcmV0dXJuIHZhbHVlLnJlcGxhY2UoL1xcdTAwMUJcXFtbMC0/XSpbIC0vXSpbQC1+XS9nLCAnJyk7XG4gIH1cblxuICBwcml2YXRlIHRydW5jYXRlTGluZSh2YWx1ZTogc3RyaW5nLCB3aWR0aDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAoIXZhbHVlKSByZXR1cm4gJyc7XG4gICAgY29uc3QgbGltaXQgPSBNYXRoLm1heCgxLCB3aWR0aCk7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICBjb25zdCB0b2tlbnMgPSB2YWx1ZS5zcGxpdCgvKFxceDFiXFxbWzAtOTtdKm0pL3UpO1xuICAgIGxldCB2aXNpYmxlID0gMDtcbiAgICBsZXQgdHJ1bmNhdGVkID0gZmFsc2U7XG4gICAgbGV0IHJlc3VsdCA9ICcnO1xuXG4gICAgZm9yIChjb25zdCB0b2tlbiBvZiB0b2tlbnMpIHtcbiAgICAgIGlmICghdG9rZW4pIGNvbnRpbnVlO1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnRyb2wtcmVnZXhcbiAgICAgIGlmICgvXlxceDFiXFxbWzAtOTtdKm0kL3UudGVzdCh0b2tlbikpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGlmICh2aXNpYmxlID49IGxpbWl0KSB7XG4gICAgICAgIHRydW5jYXRlZCA9IHRydWU7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgY29uc3QgcmVtYWluaW5nID0gbGltaXQgLSB2aXNpYmxlO1xuICAgICAgaWYgKHRva2VuLmxlbmd0aCA8PSByZW1haW5pbmcpIHtcbiAgICAgICAgcmVzdWx0ICs9IHRva2VuO1xuICAgICAgICB2aXNpYmxlICs9IHRva2VuLmxlbmd0aDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnN0IHNsaWNlTGVuZ3RoID0gTWF0aC5tYXgoMCwgcmVtYWluaW5nIC0gMSk7XG4gICAgICAgIGlmIChzbGljZUxlbmd0aCA+IDApIHtcbiAgICAgICAgICByZXN1bHQgKz0gdG9rZW4uc2xpY2UoMCwgc2xpY2VMZW5ndGgpO1xuICAgICAgICAgIHZpc2libGUgKz0gc2xpY2VMZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgcmVzdWx0ICs9ICfigKYnO1xuICAgICAgICB0cnVuY2F0ZWQgPSB0cnVlO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAodHJ1bmNhdGVkICYmICFyZXN1bHQuZW5kc1dpdGgoRVNDLlJFU0VUKSkge1xuICAgICAgcmVzdWx0ICs9IEVTQy5SRVNFVDtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9XG5cbiAgZ2V0QnVmZmVyKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMuYnVmZmVyO1xuICB9XG5cbiAgZ2V0Q3Vyc29yKCk6IG51bWJlciB7XG4gICAgcmV0dXJuIHRoaXMuY3Vyc29yO1xuICB9XG5cbiAgc2V0QnVmZmVyKHRleHQ6IHN0cmluZywgY3Vyc29yUG9zPzogbnVtYmVyKTogdm9pZCB7XG4gICAgdGhpcy5idWZmZXIgPSB0ZXh0O1xuICAgIC8vIFZhbGlkYXRlIGN1cnNvciBwb3NpdGlvbiB0byBwcmV2ZW50IG91dC1vZi1ib3VuZHMgaXNzdWVzXG4gICAgY29uc3QgcmVxdWVzdGVkQ3Vyc29yID0gY3Vyc29yUG9zID8/IHRleHQubGVuZ3RoO1xuICAgIHRoaXMuY3Vyc29yID0gTWF0aC5tYXgoMCwgTWF0aC5taW4ocmVxdWVzdGVkQ3Vyc29yLCB0ZXh0Lmxlbmd0aCkpO1xuICAgIHRoaXMuaW5wdXRSZW5kZXJPZmZzZXQgPSAwO1xuICAgIHRoaXMudXBkYXRlU3VnZ2VzdGlvbnMoKTtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICAgIHRoaXMuZW1pdElucHV0Q2hhbmdlKCk7XG4gIH1cblxuICBzZXRTZWNyZXRNb2RlKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICB0aGlzLnNlY3JldE1vZGUgPSBlbmFibGVkO1xuICAgIHRoaXMucmVuZGVyUHJvbXB0KCk7XG4gIH1cblxuICBjbGVhckJ1ZmZlcigpOiB2b2lkIHtcbiAgICB0aGlzLmNhbmNlbFBsYWluUGFzdGVDYXB0dXJlKCk7XG4gICAgdGhpcy5idWZmZXIgPSAnJztcbiAgICB0aGlzLmN1cnNvciA9IDA7XG4gICAgdGhpcy5pbnB1dFJlbmRlck9mZnNldCA9IDA7XG4gICAgdGhpcy5zdWdnZXN0aW9ucyA9IFtdO1xuICAgIHRoaXMuc3VnZ2VzdGlvbkluZGV4ID0gLTE7XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICB0aGlzLmVtaXRJbnB1dENoYW5nZSgpO1xuICB9XG5cbiAgc2V0TW9kZVN0YXR1cyhzdGF0dXM6IHN0cmluZyB8IG51bGwpOiB2b2lkIHtcbiAgICB0aGlzLnVwZGF0ZVN0YXR1cyhzdGF0dXMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNob3cgYSBjb21wYWN0aW5nIHN0YXR1cyB3aXRoIGFuaW1hdGVkIHNwaW5uZXIgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBVc2VzIOKcuyBjaGFyYWN0ZXIgd2l0aCBhbmltYXRpb24gdG8gaW5kaWNhdGUgY29udGV4dCBjb21wYWN0aW9uIGluIHByb2dyZXNzXG4gICAqL1xuICBzaG93Q29tcGFjdGluZ1N0YXR1cyhtZXNzYWdlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnN0YXR1c01lc3NhZ2UgPSBtZXNzYWdlO1xuICAgIGlmICghdGhpcy5zcGlubmVySW50ZXJ2YWwpIHtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICB0aGlzLnNwaW5uZXJGcmFtZSsrO1xuICAgICAgICAvLyBDeWNsZSBhY3Rpdml0eSBwaHJhc2UgZXZlcnkgfjQgc2Vjb25kcyAoNTAgZnJhbWVzIGF0IDgwbXMpXG4gICAgICAgIGlmICh0aGlzLnNwaW5uZXJGcmFtZSAlIDUwID09PSAwKSB7XG4gICAgICAgICAgdGhpcy5hY3Rpdml0eVBocmFzZUluZGV4Kys7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgICAgIH0sIDgwKTtcbiAgICB9XG4gICAgdGhpcy5yZW5kZXJQcm9tcHQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBIaWRlIHRoZSBjb21wYWN0aW5nIHN0YXR1cyBhbmQgc3RvcCBzcGlubmVyIGFuaW1hdGlvblxuICAgKi9cbiAgaGlkZUNvbXBhY3RpbmdTdGF0dXMoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMuc3Bpbm5lckludGVydmFsKSB7XG4gICAgICBjbGVhckludGVydmFsKHRoaXMuc3Bpbm5lckludGVydmFsKTtcbiAgICAgIHRoaXMuc3Bpbm5lckludGVydmFsID0gbnVsbDtcbiAgICB9XG4gICAgdGhpcy5zdGF0dXNNZXNzYWdlID0gbnVsbDtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgZW1pdFByb21wdChjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnB1c2hQcm9tcHRFdmVudChjb250ZW50KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEaXNwbGF5IHVzZXIgcHJvbXB0IGltbWVkaWF0ZWx5IGluIHNjcm9sbGJhY2sgKENsYXVkZSBDb2RlIHN0eWxlKVxuICAgKiBXcml0ZXMgc3luY2hyb25vdXNseSB0byBlbnN1cmUgaXQgYXBwZWFycyBPTkNFIGluIHNjcm9sbGJhY2sgYmVmb3JlIHN0YXR1cyB1cGRhdGVzLlxuICAgKiBUaGUgcHJvbXB0IGlucHV0IGFyZWEgd2lsbCB0aGVuIGZsb2F0IGJlbG93IHRoaXMgYW5kIGFsbCBzdWJzZXF1ZW50IGV2ZW50cy5cbiAgICovXG4gIHByaXZhdGUgZGlzcGxheVVzZXJQcm9tcHQodGV4dDogc3RyaW5nKTogdm9pZCB7XG4gICAgY29uc3Qgbm9ybWFsaXplZCA9IHRleHQ/LnRyaW0oKTtcbiAgICBpZiAoIW5vcm1hbGl6ZWQpIHJldHVybjtcblxuICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7XG4gICAgdGhpcy5sYXN0UHJvbXB0RXZlbnQgPSB7IHRleHQ6IG5vcm1hbGl6ZWQsIGF0OiBub3cgfTtcblxuICAgIC8vIEFkZCB0byBldmVudCBxdWV1ZSBpbnN0ZWFkIG9mIHdyaXRpbmcgZGlyZWN0bHkgdG8gZW5zdXJlIHByb3BlciByZW5kZXJpbmdcbiAgICB0aGlzLmFkZEV2ZW50KCdwcm9tcHQnLCBub3JtYWxpemVkKTtcbiAgfVxuXG4gIHJlbmRlcigpOiB2b2lkIHtcbiAgICB0aGlzLnJlbmRlclByb21wdCgpO1xuICB9XG5cbiAgcHJpdmF0ZSBkZWxheShtczogbnVtYmVyKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuICB9XG5cbiAgLy8gLS0tLS0tLS0tLS0tIExvdy1sZXZlbCBoZWxwZXJzIC0tLS0tLS0tLS0tLVxuXG4gIHByaXZhdGUgd3JpdGUoZGF0YTogc3RyaW5nKTogdm9pZCB7XG4gICAgdGhpcy5vdXRwdXQud3JpdGUoZGF0YSk7XG4gIH1cblxuICBwcml2YXRlIHB1c2hQcm9tcHRFdmVudCh0ZXh0OiBzdHJpbmcpOiB2b2lkIHtcbiAgICBjb25zdCBub3JtYWxpemVkID0gdGV4dD8udHJpbSgpO1xuICAgIGlmICghbm9ybWFsaXplZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBub3cgPSBEYXRlLm5vdygpO1xuICAgIGlmICh0aGlzLmxhc3RQcm9tcHRFdmVudCAmJiB0aGlzLmxhc3RQcm9tcHRFdmVudC50ZXh0ID09PSBub3JtYWxpemVkICYmIG5vdyAtIHRoaXMubGFzdFByb21wdEV2ZW50LmF0IDwgMTUwMCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB0aGlzLmxhc3RQcm9tcHRFdmVudCA9IHsgdGV4dDogbm9ybWFsaXplZCwgYXQ6IG5vdyB9O1xuICAgIHRoaXMuYWRkRXZlbnQoJ3Byb21wdCcsIG5vcm1hbGl6ZWQpO1xuICB9XG5cbiAgcHJpdmF0ZSBjbGVhclByb21wdEFyZWEoKTogdm9pZCB7XG4gICAgY29uc3QgaGVpZ2h0ID0gdGhpcy5sYXN0T3ZlcmxheT8ubGluZXMubGVuZ3RoID8/IHRoaXMucHJvbXB0SGVpZ2h0ID8/IDA7XG4gICAgaWYgKGhlaWdodCA9PT0gMCkgcmV0dXJuO1xuXG4gICAgLy8gQ3Vyc29yIGlzIGF0IHByb21wdCByb3cuIE1vdmUgdXAgdG8gdG9wIG9mIG92ZXJsYXkgZmlyc3QuXG4gICAgaWYgKHRoaXMubGFzdE92ZXJsYXkpIHtcbiAgICAgIGNvbnN0IGxpbmVzVG9Ub3AgPSB0aGlzLmxhc3RPdmVybGF5LnByb21wdEluZGV4O1xuICAgICAgaWYgKGxpbmVzVG9Ub3AgPiAwKSB7XG4gICAgICAgIHRoaXMud3JpdGUoYFxceDFiWyR7bGluZXNUb1RvcH1BYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTm93IGF0IHRvcCwgY2xlYXIgZWFjaCBsaW5lIGRvd253YXJkXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykge1xuICAgICAgdGhpcy53cml0ZSgnXFxyJyk7XG4gICAgICB0aGlzLndyaXRlKEVTQy5DTEVBUl9MSU5FKTtcbiAgICAgIGlmIChpIDwgaGVpZ2h0IC0gMSkge1xuICAgICAgICB0aGlzLndyaXRlKCdcXHgxYltCJyk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gTW92ZSBiYWNrIHRvIHRvcCAod2hlcmUgY29udGVudCBzaG91bGQgY29udGludWUgZnJvbSlcbiAgICBpZiAoaGVpZ2h0ID4gMSkge1xuICAgICAgdGhpcy53cml0ZShgXFx4MWJbJHtoZWlnaHQgLSAxfUFgKTtcbiAgICB9XG4gICAgdGhpcy53cml0ZSgnXFxyJyk7XG5cbiAgICB0aGlzLmxhc3RPdmVybGF5ID0gbnVsbDtcbiAgICB0aGlzLnByb21wdEhlaWdodCA9IDA7XG4gICAgdGhpcy5sYXN0T3ZlcmxheUhlaWdodCA9IDA7XG4gICAgdGhpcy5pc1Byb21wdEFjdGl2ZSA9IGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSB1cGRhdGVUZXJtaW5hbFNpemUoKTogdm9pZCB7XG4gICAgaWYgKHRoaXMub3V0cHV0LmlzVFRZKSB7XG4gICAgICB0aGlzLnJvd3MgPSB0aGlzLm91dHB1dC5yb3dzIHx8IDI0O1xuICAgICAgdGhpcy5jb2xzID0gdGhpcy5vdXRwdXQuY29sdW1ucyB8fCA4MDtcbiAgICB9XG4gIH1cbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBV0EsSUFBQUEsUUFBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsT0FBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsTUFBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksV0FBQSxHQUFBSixPQUFBO0FBQ0EsSUFBQUssZUFBQSxHQUFBTCxPQUFBO0FBQ0EsSUFBQU0sWUFBQSxHQUFBTixPQUFBO0FBQW1ELFNBQUFELHdCQUFBUSxDQUFBLEVBQUFDLENBQUEsNkJBQUFDLE9BQUEsTUFBQUMsQ0FBQSxPQUFBRCxPQUFBLElBQUFFLENBQUEsT0FBQUYsT0FBQSxZQUFBVix1QkFBQSxZQUFBQSxDQUFBUSxDQUFBLEVBQUFDLENBQUEsU0FBQUEsQ0FBQSxJQUFBRCxDQUFBLElBQUFBLENBQUEsQ0FBQUssVUFBQSxTQUFBTCxDQUFBLE1BQUFNLENBQUEsRUFBQUMsQ0FBQSxFQUFBQyxDQUFBLEtBQUFDLFNBQUEsUUFBQUMsT0FBQSxFQUFBVixDQUFBLGlCQUFBQSxDQUFBLHVCQUFBQSxDQUFBLHlCQUFBQSxDQUFBLFNBQUFRLENBQUEsTUFBQUYsQ0FBQSxHQUFBTCxDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQSxRQUFBRyxDQUFBLENBQUFLLEdBQUEsQ0FBQVgsQ0FBQSxVQUFBTSxDQUFBLENBQUFNLEdBQUEsQ0FBQVosQ0FBQSxHQUFBTSxDQUFBLENBQUFPLEdBQUEsQ0FBQWIsQ0FBQSxFQUFBUSxDQUFBLGdCQUFBUCxDQUFBLElBQUFELENBQUEsZ0JBQUFDLENBQUEsT0FBQWEsY0FBQSxD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TUFBTSxJQUFJLElBQUksQ0FBQ2tCLFlBQVksSUFBSSxDQUFDO0lBQ3ZFLElBQUlnYSxNQUFNLEtBQUssQ0FBQyxFQUFFOztJQUVsQjtJQUNBLElBQUksSUFBSSxDQUFDeFksV0FBVyxFQUFFO01BQ3BCLE1BQU15WSxVQUFVLEdBQUcsSUFBSSxDQUFDelksV0FBVyxDQUFDdVksV0FBVztNQUMvQyxJQUFJRSxVQUFVLEdBQUcsQ0FBQyxFQUFFO1FBQ2xCLElBQUksQ0FBQ2xXLEtBQUssQ0FBQyxRQUFRa1csVUFBVSxHQUFHLENBQUM7TUFDbkM7SUFDRjs7SUFFQTtJQUNBLEtBQUssSUFBSTFnQixDQUFDLEdBQUcsQ0FBQyxFQUFFQSxDQUFDLEdBQUd5Z0IsTUFBTSxFQUFFemdCLENBQUMsRUFBRSxFQUFFO01BQy9CLElBQUksQ0FBQ3dLLEtBQUssQ0FBQyxJQUFJLENBQUM7TUFDaEIsSUFBSSxDQUFDQSxLQUFLLENBQUM1SixHQUFHLENBQUNJLFVBQVUsQ0FBQztNQUMxQixJQUFJaEIsQ0FBQyxHQUFHeWdCLE1BQU0sR0FBRyxDQUFDLEVBQUU7UUFDbEIsSUFBSSxDQUFDalcsS0FBSyxDQUFDLFFBQVEsQ0FBQztNQUN0QjtJQUNGOztJQUVBO0lBQ0EsSUFBSWlXLE1BQU0sR0FBRyxDQUFDLEVBQUU7TUFDZCxJQUFJLENBQUNqVyxLQUFLLENBQUMsUUFBUWlXLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQztJQUNuQztJQUNBLElBQUksQ0FBQ2pXLEtBQUssQ0FBQyxJQUFJLENBQUM7SUFFaEIsSUFBSSxDQUFDdkMsV0FBVyxHQUFHLElBQUk7SUFDdkIsSUFBSSxDQUFDeEIsWUFBWSxHQUFHLENBQUM7SUFDckIsSUFBSSxDQUFDQyxpQkFBaUIsR0FBRyxDQUFDO0lBQzFCLElBQUksQ0FBQ0csY0FBYyxHQUFHLEtBQUs7RUFDN0I7RUFFUXFELGtCQUFrQkEsQ0FBQSxFQUFTO0lBQ2pDLElBQUksSUFBSSxDQUFDcEIsTUFBTSxDQUFDUSxLQUFLLEVBQUU7TUFDckIsSUFBSSxDQUFDbEgsSUFBSSxHQUFHLElBQUksQ0FBQzBHLE1BQU0sQ0FBQzFHLElBQUksSUFBSSxFQUFFO01BQ2xDLElBQUksQ0FBQ0MsSUFBSSxHQUFHLElBQUksQ0FBQ3lHLE1BQU0sQ0FBQ3FqQixPQUFPLElBQUksRUFBRTtJQUN2QztFQUNGO0FBQ0Y7QUFBQ0MsT0FBQSxDQUFBbHFCLGlCQUFBLEdBQUFBLGlCQUFBIiwiaWdub3JlTGlzdCI6W119