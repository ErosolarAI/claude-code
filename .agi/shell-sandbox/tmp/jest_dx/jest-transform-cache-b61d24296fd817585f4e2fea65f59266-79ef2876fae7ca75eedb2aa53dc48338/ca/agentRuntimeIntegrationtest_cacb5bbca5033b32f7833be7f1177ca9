69b7233fdf021b56a9c8c6fbeff64ae6
"use strict";

var _globals = require("@jest/globals");
var _agent = require("../../src/core/agent.js");
var _toolRuntime = require("../../src/core/toolRuntime.js");
var _contextManager = require("../../src/core/contextManager.js");
/**
 * Agent Runtime Integration Tests
 *
 * Tests the AgentRuntime class with:
 * - Context overflow recovery
 * - Streaming with interruption handling
 * - Cancellation support
 * - Tool execution pipeline
 */

// Mock LLM Provider for testing
class MockLLMProvider {
  responses = [];
  responseIndex = 0;
  callHistory = [];
  queueTextResponse(content) {
    this.responses.push({
      type: 'text',
      content
    });
  }
  queueToolCallResponse(content, toolCalls) {
    this.responses.push({
      type: 'tool_calls',
      content,
      toolCalls
    });
  }
  queueContextOverflowError() {
    this.responses.push({
      type: 'text',
      content: '__OVERFLOW__'
    });
  }
  async generate(messages) {
    this.callHistory.push([...messages]);
    if (this.responseIndex >= this.responses.length) {
      return {
        type: 'text',
        content: 'Default mock response'
      };
    }
    const response = this.responses[this.responseIndex++];

    // Simulate context overflow error
    if (response.content === '__OVERFLOW__') {
      const error = new Error('Context length exceeded: token limit reached');
      throw error;
    }
    return {
      ...response,
      usage: {
        inputTokens: 100,
        outputTokens: 50
      }
    };
  }
  reset() {
    this.responses = [];
    this.responseIndex = 0;
    this.callHistory = [];
  }
}

// Mock Tool Suite for testing
function createMockToolSuite() {
  const tools = [{
    name: 'echo',
    description: 'Echoes back the input',
    parameters: {
      type: 'object',
      properties: {
        message: {
          type: 'string',
          description: 'Message to echo'
        }
      },
      required: ['message']
    },
    handler: args => `Echo: ${args['message']}`
  }, {
    name: 'add',
    description: 'Adds two numbers',
    parameters: {
      type: 'object',
      properties: {
        a: {
          type: 'number',
          description: 'First number'
        },
        b: {
          type: 'number',
          description: 'Second number'
        }
      },
      required: ['a', 'b']
    },
    handler: args => {
      const a = Number(args['a']);
      const b = Number(args['b']);
      return `Result: ${a + b}`;
    }
  }, {
    name: 'read_file',
    description: 'Reads a file',
    parameters: {
      type: 'object',
      properties: {
        path: {
          type: 'string',
          description: 'File path'
        }
      },
      required: ['path']
    },
    handler: args => `Content of ${args['path']}: [mock content]`,
    cacheable: true
  }, {
    name: 'slow_operation',
    description: 'Simulates a slow operation',
    parameters: {
      type: 'object',
      properties: {
        duration: {
          type: 'number',
          description: 'Duration in ms'
        }
      }
    },
    handler: async args => {
      const duration = Number(args['duration']) || 100;
      await new Promise(resolve => setTimeout(resolve, Math.min(duration, /* TODO: Extract constant */ /* TODO: Extract constant */1000)));
      return 'Operation completed';
    }
  }];
  return {
    id: 'test.mock-tools',
    description: 'Mock tools for testing',
    tools
  };
}
function createMockDiffSuite() {
  return {
    id: 'test.mock-diff',
    description: 'Mock git diff tool for snapshot tracking',
    tools: [{
      name: 'git_diff_mock',
      description: 'Returns mock git diff output',
      parameters: {
        type: 'object',
        properties: {
          command: {
            type: 'string',
            description: 'Git diff command'
          }
        },
        required: ['command']
      },
      handler: args => `mock diff for ${args['command'] ?? ''}`
    }]
  };
}
(0, _globals.describe)('Agent Runtime Integration', () => {
  let provider;
  let toolRuntime;
  let contextManager;
  (0, _globals.beforeEach)(() => {
    provider = new MockLLMProvider();
    toolRuntime = new _toolRuntime.ToolRuntime();
    toolRuntime.registerSuite(createMockToolSuite());
    contextManager = (0, _contextManager.createDefaultContextManager)({
      maxTokens: 10000,
      targetTokens: 7000
    });
  });
  (0, _globals.afterEach)(() => {
    provider.reset();
  });
  (0, _globals.describe)('Basic Message Handling', () => {
    (0, _globals.test)('should send a simple message and receive response', async () => {
      provider.queueTextResponse('Hello! How can I help you?');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Hello');
      (0, _globals.expect)(response).toBe('Hello! How can I help you?');
      (0, _globals.expect)(provider.callHistory.length).toBe(1);
    });
    (0, _globals.test)('should maintain conversation history', async () => {
      provider.queueTextResponse('First response');
      provider.queueTextResponse('Second response');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('First message');
      await agent.send('Second message');
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(5); // system + user + assistant + user + assistant
      (0, _globals.expect)(history[0]?.role).toBe('system');
      (0, _globals.expect)(history[1]?.role).toBe('user');
      (0, _globals.expect)(history[2]?.role).toBe('assistant');
      (0, _globals.expect)(history[3]?.role).toBe('user');
      (0, _globals.expect)(history[4]?.role).toBe('assistant');
    });
    (0, _globals.test)('should clear history correctly', async () => {
      provider.queueTextResponse('Response');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('Hello');
      agent.clearHistory();
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(1); // Only system message
      (0, _globals.expect)(history[0]?.role).toBe('system');
    });
    (0, _globals.test)('should load history from previous session', async () => {
      const previousHistory = [{
        role: 'system',
        content: 'Previous system prompt'
      }, {
        role: 'user',
        content: 'Previous user message'
      }, {
        role: 'assistant',
        content: 'Previous assistant response'
      }];
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'New system prompt'
      });
      agent.loadHistory(previousHistory);
      const history = agent.getHistory();
      (0, _globals.expect)(history.length).toBe(3);
      (0, _globals.expect)(history[0]?.content).toBe('Previous system prompt');
    });
  });
  (0, _globals.describe)('Tool Execution', () => {
    (0, _globals.test)('should execute tool calls from provider response', async () => {
      provider.queueToolCallResponse('I will echo your message', [{
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'Hello, World!'
        }
      }]);
      provider.queueTextResponse('The echo result was: Echo: Hello, World!');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Echo "Hello, World!"');
      (0, _globals.expect)(response).toBe('The echo result was: Echo: Hello, World!');
      (0, _globals.expect)(provider.callHistory.length).toBe(2); // Initial + after tool result
    });
    (0, _globals.test)('should execute multiple tool calls in sequence', async () => {
      provider.queueToolCallResponse('I will add some numbers', [{
        id: 'call_1',
        name: 'add',
        arguments: {
          a: 5,
          b: 3
        }
      }, {
        id: 'call_2',
        name: 'add',
        arguments: {
          a: 10,
          b: 7
        }
      }]);
      provider.queueTextResponse('The results are 8 and 17');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      const response = await agent.send('Add 5+3 and 10+7');
      (0, _globals.expect)(response).toBe('The results are 8 and 17');

      // Check tool results are in history
      const history = agent.getHistory();
      const toolMessages = history.filter(m => m.role === 'tool');
      (0, _globals.expect)(toolMessages.length).toBe(2);
    });
    (0, _globals.test)('should track tool calls via observer', async () => {
      const toolStarts = [];
      const toolResults = [];
      const observer = {
        onToolStart: call => toolStarts.push(call.name),
        onToolResult: (call, output) => toolResults.push(`${call.name}: ${output}`)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        observer
      });
      toolRuntime.registerSuite(createMockToolSuite());
      provider.queueToolCallResponse('Executing echo', [{
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      }]);
      provider.queueTextResponse('Done');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      await agent.send('Echo test');
      (0, _globals.expect)(toolStarts).toContain('echo');
      (0, _globals.expect)(toolResults.some(r => r.includes('Echo: test'))).toBe(true);
    });
  });
  (0, _globals.describe)('Callbacks', () => {
    (0, _globals.test)('should call onAssistantMessage callback', async () => {
      const messages = [];
      const callbacks = {
        onAssistantMessage: content => messages.push(content)
      };
      provider.queueTextResponse('Hello there!');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks
      });
      await agent.send('Hi');
      (0, _globals.expect)(messages).toContain('Hello there!');
    });
    (0, _globals.test)('should call onContextPruned when context is pruned', async () => {
      let prunedCount = 0;
      const callbacks = {
        onContextPruned: count => {
          prunedCount = count;
        }
      };

      // Create a context manager that will trigger pruning
      const smallContextManager = (0, _contextManager.createDefaultContextManager)({
        maxTokens: 500,
        targetTokens: 200,
        preserveRecentMessages: 2
      });
      provider.queueTextResponse('Response 1');
      provider.queueTextResponse('Response 2');
      provider.queueTextResponse('Response 3');
      provider.queueTextResponse('Response 4');
      provider.queueTextResponse('Response 5');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks,
        contextManager: smallContextManager
      });

      // Fill up the context
      for (let i = 0; i < 5; i++) {
        await agent.send('A'.repeat(100));
      }

      // Context should have been pruned at some point
      // Note: exact behavior depends on token estimation
      (0, _globals.expect)(prunedCount).toBeGreaterThanOrEqual(0);
    });
  });
  (0, _globals.describe)('Cancellation', () => {
    (0, _globals.test)('should handle cancellation request during processing', async () => {
      let cancelledCalled = false;
      const callbacks = {
        onCancelled: () => {
          cancelledCalled = true;
        }
      };

      // Queue a slow operation
      provider.queueToolCallResponse('Running slow operation', [{
        id: 'call_1',
        name: 'slow_operation',
        arguments: {
          duration: 500
        }
      }]);
      provider.queueTextResponse('Done');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks
      });

      // Request cancellation before completing
      setTimeout(() => {
        agent.requestCancellation();
      }, 50);
      const response = await agent.send('Run slow operation');

      // Either cancelled or completed depending on timing
      if (cancelledCalled) {
        (0, _globals.expect)(response).toContain('cancelled');
      }
    });
    (0, _globals.test)('should reset cancellation flag on new request', async () => {
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });

      // Request cancellation
      agent.requestCancellation();
      (0, _globals.expect)(agent.isCancellationRequested()).toBe(true);

      // Start new request
      provider.queueTextResponse('Response');
      await agent.send('Hello');

      // Cancellation should be reset after request completes
      (0, _globals.expect)(agent.isCancellationRequested()).toBe(false);
    });
  });
  (0, _globals.describe)('Context Overflow Recovery', () => {
    (0, _globals.test)('should attempt recovery on context overflow error', async () => {
      let recoveryAttempts = 0;
      const callbacks = {
        onContextRecovery: attempt => {
          recoveryAttempts = attempt;
        }
      };

      // First call throws overflow, then succeeds
      provider.queueContextOverflowError();
      provider.queueTextResponse('Response after recovery');
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.',
        callbacks,
        contextManager
      });

      // Pre-fill some history
      agent.loadHistory([{
        role: 'system',
        content: 'System prompt'
      }, {
        role: 'user',
        content: 'Old message 1'
      }, {
        role: 'assistant',
        content: 'Old response 1'
      }, {
        role: 'user',
        content: 'Old message 2'
      }, {
        role: 'assistant',
        content: 'Old response 2'
      }]);
      const response = await agent.send('New message');
      (0, _globals.expect)(recoveryAttempts).toBeGreaterThan(0);
      (0, _globals.expect)(response).toBe('Response after recovery');
    });
  });
  (0, _globals.describe)('Running State', () => {
    (0, _globals.test)('should track running state correctly', async () => {
      const agent = new _agent.AgentRuntime({
        provider,
        toolRuntime,
        systemPrompt: 'You are a helpful assistant.'
      });
      (0, _globals.expect)(agent.isRunning()).toBe(false);
      provider.queueToolCallResponse('Processing', [{
        id: 'call_1',
        name: 'slow_operation',
        arguments: {
          duration: 100
        }
      }]);
      provider.queueTextResponse('Done');
      const promise = agent.send('Run something');

      // Should be running during execution
      // Note: This timing is tricky in tests
      await promise;
      (0, _globals.expect)(agent.isRunning()).toBe(false);
    });
  });
});
(0, _globals.describe)('Tool Runtime Integration', () => {
  let toolRuntime;
  let contextManager;
  (0, _globals.beforeEach)(() => {
    contextManager = (0, _contextManager.createDefaultContextManager)({
      maxTokens: 10000,
      maxToolOutputLength: 1000
    });
    toolRuntime = new _toolRuntime.ToolRuntime([], {
      contextManager
    });
    toolRuntime.registerSuite(createMockToolSuite());
  });
  (0, _globals.describe)('Tool Registration', () => {
    (0, _globals.test)('should register and list tools', () => {
      const tools = toolRuntime.listProviderTools();
      const toolNames = tools.map(t => t.name);
      (0, _globals.expect)(toolNames).toContain('echo');
      (0, _globals.expect)(toolNames).toContain('add');
      (0, _globals.expect)(toolNames).toContain('read_file');
      (0, _globals.expect)(toolNames).toContain('slow_operation');
    });
    (0, _globals.test)('should unregister suite', () => {
      toolRuntime.unregisterSuite('test.mock-tools');
      const tools = toolRuntime.listProviderTools();
      (0, _globals.expect)(tools.find(t => t.name === 'echo')).toBeUndefined();
    });
  });
  (0, _globals.describe)('Tool Execution', () => {
    (0, _globals.test)('should execute tool successfully', async () => {
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'Hello!'
        }
      });
      (0, _globals.expect)(result).toBe('Echo: Hello!');
    });
    (0, _globals.test)('should handle unknown tool gracefully', async () => {
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'unknown_tool',
        arguments: {}
      });
      (0, _globals.expect)(result).toContain('not available');
    });
    (0, _globals.test)('should handle tool execution errors', async () => {
      const errorSuite = {
        id: 'test.error-tools',
        tools: [{
          name: 'error_tool',
          description: 'Always throws an error',
          handler: () => {
            throw new Error('Intentional error');
          }
        }]
      };
      toolRuntime.registerSuite(errorSuite);
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'error_tool',
        arguments: {}
      });
      (0, _globals.expect)(result).toContain('Failed');
      (0, _globals.expect)(result).toContain('Intentional error');
    });
  });
  (0, _globals.describe)('Tool Caching', () => {
    (0, _globals.test)('should cache cacheable tool results', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());

      // First call
      await toolRuntime.execute({
        id: 'call_1',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });

      // Second call with same args should hit cache
      await toolRuntime.execute({
        id: 'call_2',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });
      (0, _globals.expect)(cacheHits).toContain('read_file');
    });
    (0, _globals.test)('should not cache non-cacheable tools', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());

      // First call
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });

      // Second call should not hit cache
      await toolRuntime.execute({
        id: 'call_2',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });
      (0, _globals.expect)(cacheHits).not.toContain('echo');
    });
    (0, _globals.test)('should clear cache', async () => {
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        enableCache: true
      });
      toolRuntime.registerSuite(createMockToolSuite());
      await toolRuntime.execute({
        id: 'call_1',
        name: 'read_file',
        arguments: {
          path: '/test/file.txt'
        }
      });
      const statsBeforeClear = toolRuntime.getCacheStats();
      (0, _globals.expect)(statsBeforeClear.entries).toBeGreaterThan(0);
      toolRuntime.clearCache();
      const statsAfterClear = toolRuntime.getCacheStats();
      (0, _globals.expect)(statsAfterClear.entries).toBe(0);
    });
    (0, _globals.test)('respects per-tool cache TTL overrides', async () => {
      const cacheHits = [];
      const observer = {
        onCacheHit: call => cacheHits.push(call.name)
      };
      toolRuntime = new _toolRuntime.ToolRuntime([], {
        contextManager,
        observer,
        enableCache: true
      });
      toolRuntime.registerSuite({
        id: 'ttl.override',
        tools: [{
          name: 'burst',
          description: 'Returns a timestamp string',
          handler: () => `ts:${Date.now()}`,
          cacheable: true,
          cacheTtlMs: 5
        }]
      });
      await toolRuntime.execute({
        id: 'call_1',
        name: 'burst',
        arguments: {}
      });
      await toolRuntime.execute({
        id: 'call_2',
        name: 'burst',
        arguments: {}
      });
      (0, _globals.expect)(cacheHits).toEqual(['burst']);
      await new Promise(resolve => setTimeout(resolve, 15));
      await toolRuntime.execute({
        id: 'call_3',
        name: 'burst',
        arguments: {}
      });
      (0, _globals.expect)(cacheHits).toEqual(['burst']);
    });
  });
  (0, _globals.describe)('Tool History', () => {
    (0, _globals.test)('should track tool history', async () => {
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'first'
        }
      });
      await toolRuntime.execute({
        id: 'call_2',
        name: 'add',
        arguments: {
          a: 1,
          b: 2
        }
      });
      const history = toolRuntime.getToolHistory();
      (0, _globals.expect)(history.length).toBe(2);
      (0, _globals.expect)(history[0]?.toolName).toBe('echo');
      (0, _globals.expect)(history[1]?.toolName).toBe('add');
    });
    (0, _globals.test)('should clear tool history', async () => {
      await toolRuntime.execute({
        id: 'call_1',
        name: 'echo',
        arguments: {
          message: 'test'
        }
      });
      toolRuntime.clearToolHistory();
      const history = toolRuntime.getToolHistory();
      (0, _globals.expect)(history.length).toBe(0);
    });
  });
  (0, _globals.describe)('Diff Snapshots', () => {
    (0, _globals.test)('should capture git diff outputs from tool commands', async () => {
      toolRuntime.registerSuite(createMockDiffSuite());
      await toolRuntime.execute({
        id: 'call_git_diff',
        name: 'git_diff_mock',
        arguments: {
          command: 'git diff --stat'
        }
      });
      const snapshots = toolRuntime.getDiffSnapshots();
      (0, _globals.expect)(snapshots.length).toBe(1);
      (0, _globals.expect)(snapshots[0]?.command).toBe('git diff --stat');
      (0, _globals.expect)(snapshots[0]?.output).toContain('mock diff for git diff --stat');
      (0, _globals.expect)(typeof snapshots[0]?.timestamp).toBe('number');
    });
    (0, _globals.test)('should bound diff snapshots and support clearing', async () => {
      toolRuntime.registerSuite(createMockDiffSuite());
      for (let i = 0; i < 6; i++) {
        await toolRuntime.execute({
          id: `call_${i}`,
          name: 'git_diff_mock',
          arguments: {
            command: `git diff --stat ${i}`
          }
        });
      }
      const snapshots = toolRuntime.getDiffSnapshots();
      (0, _globals.expect)(snapshots.length).toBe(5);
      (0, _globals.expect)(snapshots[0]?.command).toBe('git diff --stat 1');
      (0, _globals.expect)(snapshots[snapshots.length - 1]?.command).toBe('git diff --stat 5');
      toolRuntime.clearDiffSnapshots();
      (0, _globals.expect)(toolRuntime.getDiffSnapshots().length).toBe(0);
    });
  });
  (0, _globals.describe)('Tool Output Truncation', () => {
    (0, _globals.test)('should truncate large tool outputs', async () => {
      const largeSuite = {
        id: 'test.large-output',
        tools: [{
          name: 'large_output',
          description: 'Returns large output',
          handler: () => 'X'.repeat(5000) // Exceeds maxToolOutputLength
        }]
      };
      toolRuntime.registerSuite(largeSuite);
      const result = await toolRuntime.execute({
        id: 'call_1',
        name: 'large_output',
        arguments: {}
      });

      // Output should be truncated
      (0, _globals.expect)(result.length).toBeLessThan(5000);
      (0, _globals.expect)(result).toContain('truncated');
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2xvYmFscyIsInJlcXVpcmUiLCJfYWdlbnQiLCJfdG9vbFJ1bnRpbWUiLCJfY29udGV4dE1hbmFnZXIiLCJNb2NrTExNUHJvdmlkZXIiLCJyZXNwb25zZXMiLCJyZXNwb25zZUluZGV4IiwiY2FsbEhpc3RvcnkiLCJxdWV1ZVRleHRSZXNwb25zZSIsImNvbnRlbnQiLCJwdXNoIiwidHlwZSIsInF1ZXVlVG9vbENhbGxSZXNwb25zZSIsInRvb2xDYWxscyIsInF1ZXVlQ29udGV4dE92ZXJmbG93RXJyb3IiLCJnZW5lcmF0ZSIsIm1lc3NhZ2VzIiwibGVuZ3RoIiwicmVzcG9uc2UiLCJlcnJvciIsIkVycm9yIiwidXNhZ2UiLCJpbnB1dFRva2VucyIsIm91dHB1dFRva2VucyIsInJlc2V0IiwiY3JlYXRlTW9ja1Rvb2xTdWl0ZSIsInRvb2xzIiwibmFtZSIsImRlc2NyaXB0aW9uIiwicGFyYW1ldGVycyIsInByb3BlcnRpZXMiLCJtZXNzYWdlIiwicmVxdWlyZWQiLCJoYW5kbGVyIiwiYXJncyIsImEiLCJiIiwiTnVtYmVyIiwicGF0aCIsImNhY2hlYWJsZSIsImR1cmF0aW9uIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwiTWF0aCIsIm1pbiIsImlkIiwiY3JlYXRlTW9ja0RpZmZTdWl0ZSIsImNvbW1hbmQiLCJkZXNjcmliZSIsInByb3ZpZGVyIiwidG9vbFJ1bnRpbWUiLCJjb250ZXh0TWFuYWdlciIsImJlZm9yZUVhY2giLCJUb29sUnVudGltZSIsInJlZ2lzdGVyU3VpdGUiLCJjcmVhdGVEZWZhdWx0Q29udGV4dE1hbmFnZXIiLCJtYXhUb2tlbnMiLCJ0YXJnZXRUb2tlbnMiLCJhZnRlckVhY2giLCJ0ZXN0IiwiYWdlbnQiLCJBZ2VudFJ1bnRpbWUiLCJzeXN0ZW1Qcm9tcHQiLCJzZW5kIiwiZXhwZWN0IiwidG9CZSIsImhpc3RvcnkiLCJnZXRIaXN0b3J5Iiwicm9sZSIsImNsZWFySGlzdG9yeSIsInByZXZpb3VzSGlzdG9yeSIsImxvYWRIaXN0b3J5IiwiYXJndW1lbnRzIiwidG9vbE1lc3NhZ2VzIiwiZmlsdGVyIiwibSIsInRvb2xTdGFydHMiLCJ0b29sUmVzdWx0cyIsIm9ic2VydmVyIiwib25Ub29sU3RhcnQiLCJjYWxsIiwib25Ub29sUmVzdWx0Iiwib3V0cHV0IiwidG9Db250YWluIiwic29tZSIsInIiLCJpbmNsdWRlcyIsImNhbGxiYWNrcyIsIm9uQXNzaXN0YW50TWVzc2FnZSIsInBydW5lZENvdW50Iiwib25Db250ZXh0UHJ1bmVkIiwiY291bnQiLCJzbWFsbENvbnRleHRNYW5hZ2VyIiwicHJlc2VydmVSZWNlbnRNZXNzYWdlcyIsImkiLCJyZXBlYXQiLCJ0b0JlR3JlYXRlclRoYW5PckVxdWFsIiwiY2FuY2VsbGVkQ2FsbGVkIiwib25DYW5jZWxsZWQiLCJyZXF1ZXN0Q2FuY2VsbGF0aW9uIiwiaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQiLCJyZWNvdmVyeUF0dGVtcHRzIiwib25Db250ZXh0UmVjb3ZlcnkiLCJhdHRlbXB0IiwidG9CZUdyZWF0ZXJUaGFuIiwiaXNSdW5uaW5nIiwicHJvbWlzZSIsIm1heFRvb2xPdXRwdXRMZW5ndGgiLCJsaXN0UHJvdmlkZXJUb29scyIsInRvb2xOYW1lcyIsIm1hcCIsInQiLCJ1bnJlZ2lzdGVyU3VpdGUiLCJmaW5kIiwidG9CZVVuZGVmaW5lZCIsInJlc3VsdCIsImV4ZWN1dGUiLCJlcnJvclN1aXRlIiwiY2FjaGVIaXRzIiwib25DYWNoZUhpdCIsImVuYWJsZUNhY2hlIiwibm90Iiwic3RhdHNCZWZvcmVDbGVhciIsImdldENhY2hlU3RhdHMiLCJlbnRyaWVzIiwiY2xlYXJDYWNoZSIsInN0YXRzQWZ0ZXJDbGVhciIsIkRhdGUiLCJub3ciLCJjYWNoZVR0bE1zIiwidG9FcXVhbCIsImdldFRvb2xIaXN0b3J5IiwidG9vbE5hbWUiLCJjbGVhclRvb2xIaXN0b3J5Iiwic25hcHNob3RzIiwiZ2V0RGlmZlNuYXBzaG90cyIsInRpbWVzdGFtcCIsImNsZWFyRGlmZlNuYXBzaG90cyIsImxhcmdlU3VpdGUiLCJ0b0JlTGVzc1RoYW4iXSwic291cmNlcyI6WyJhZ2VudFJ1bnRpbWVJbnRlZ3JhdGlvbi50ZXN0LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQWdlbnQgUnVudGltZSBJbnRlZ3JhdGlvbiBUZXN0c1xuICpcbiAqIFRlc3RzIHRoZSBBZ2VudFJ1bnRpbWUgY2xhc3Mgd2l0aDpcbiAqIC0gQ29udGV4dCBvdmVyZmxvdyByZWNvdmVyeVxuICogLSBTdHJlYW1pbmcgd2l0aCBpbnRlcnJ1cHRpb24gaGFuZGxpbmdcbiAqIC0gQ2FuY2VsbGF0aW9uIHN1cHBvcnRcbiAqIC0gVG9vbCBleGVjdXRpb24gcGlwZWxpbmVcbiAqL1xuXG5pbXBvcnQgeyBkZXNjcmliZSwgdGVzdCwgZXhwZWN0LCBiZWZvcmVFYWNoLCBhZnRlckVhY2ggfSBmcm9tICdAamVzdC9nbG9iYWxzJztcbmltcG9ydCB7IEFnZW50UnVudGltZSwgdHlwZSBBZ2VudENhbGxiYWNrcyB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL2FnZW50LmpzJztcbmltcG9ydCB7IFRvb2xSdW50aW1lLCB0eXBlIFRvb2xTdWl0ZSwgdHlwZSBUb29sRGVmaW5pdGlvbiB9IGZyb20gJy4uLy4uL3NyYy9jb3JlL3Rvb2xSdW50aW1lLmpzJztcbmltcG9ydCB7IENvbnRleHRNYW5hZ2VyLCBjcmVhdGVEZWZhdWx0Q29udGV4dE1hbmFnZXIgfSBmcm9tICcuLi8uLi9zcmMvY29yZS9jb250ZXh0TWFuYWdlci5qcyc7XG5pbXBvcnQgdHlwZSB7IENvbnZlcnNhdGlvbk1lc3NhZ2UsIExMTVByb3ZpZGVyLCBUb29sQ2FsbFJlcXVlc3QgfSBmcm9tICcuLi8uLi9zcmMvY29yZS90eXBlcy5qcyc7XG5cbi8vIE1vY2sgTExNIFByb3ZpZGVyIGZvciB0ZXN0aW5nXG5jbGFzcyBNb2NrTExNUHJvdmlkZXIgaW1wbGVtZW50cyBMTE1Qcm92aWRlciB7XG4gIHByaXZhdGUgcmVzcG9uc2VzOiBBcnJheTx7XG4gICAgdHlwZTogJ3RleHQnIHwgJ3Rvb2xfY2FsbHMnO1xuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XG4gICAgdG9vbENhbGxzPzogVG9vbENhbGxSZXF1ZXN0W107XG4gIH0+ID0gW107XG4gIHByaXZhdGUgcmVzcG9uc2VJbmRleCA9IDA7XG4gIHB1YmxpYyBjYWxsSGlzdG9yeTogQ29udmVyc2F0aW9uTWVzc2FnZVtdW10gPSBbXTtcblxuICBxdWV1ZVRleHRSZXNwb25zZShjb250ZW50OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3BvbnNlcy5wdXNoKHsgdHlwZTogJ3RleHQnLCBjb250ZW50IH0pO1xuICB9XG5cbiAgcXVldWVUb29sQ2FsbFJlc3BvbnNlKGNvbnRlbnQ6IHN0cmluZywgdG9vbENhbGxzOiBUb29sQ2FsbFJlcXVlc3RbXSk6IHZvaWQge1xuICAgIHRoaXMucmVzcG9uc2VzLnB1c2goeyB0eXBlOiAndG9vbF9jYWxscycsIGNvbnRlbnQsIHRvb2xDYWxscyB9KTtcbiAgfVxuXG4gIHF1ZXVlQ29udGV4dE92ZXJmbG93RXJyb3IoKTogdm9pZCB7XG4gICAgdGhpcy5yZXNwb25zZXMucHVzaCh7IHR5cGU6ICd0ZXh0JywgY29udGVudDogJ19fT1ZFUkZMT1dfXycgfSk7XG4gIH1cblxuICBhc3luYyBnZW5lcmF0ZShtZXNzYWdlczogQ29udmVyc2F0aW9uTWVzc2FnZVtdKTogUHJvbWlzZTx7XG4gICAgdHlwZTogJ3RleHQnIHwgJ3Rvb2xfY2FsbHMnO1xuICAgIGNvbnRlbnQ/OiBzdHJpbmc7XG4gICAgdG9vbENhbGxzPzogVG9vbENhbGxSZXF1ZXN0W107XG4gICAgdXNhZ2U/OiB7IGlucHV0VG9rZW5zOiBudW1iZXI7IG91dHB1dFRva2VuczogbnVtYmVyIH07XG4gIH0+IHtcbiAgICB0aGlzLmNhbGxIaXN0b3J5LnB1c2goWy4uLm1lc3NhZ2VzXSk7XG5cbiAgICBpZiAodGhpcy5yZXNwb25zZUluZGV4ID49IHRoaXMucmVzcG9uc2VzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIHsgdHlwZTogJ3RleHQnLCBjb250ZW50OiAnRGVmYXVsdCBtb2NrIHJlc3BvbnNlJyB9O1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlID0gdGhpcy5yZXNwb25zZXNbdGhpcy5yZXNwb25zZUluZGV4KytdITtcblxuICAgIC8vIFNpbXVsYXRlIGNvbnRleHQgb3ZlcmZsb3cgZXJyb3JcbiAgICBpZiAocmVzcG9uc2UuY29udGVudCA9PT0gJ19fT1ZFUkZMT1dfXycpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdDb250ZXh0IGxlbmd0aCBleGNlZWRlZDogdG9rZW4gbGltaXQgcmVhY2hlZCcpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnJlc3BvbnNlLFxuICAgICAgdXNhZ2U6IHsgaW5wdXRUb2tlbnM6IDEwMCwgb3V0cHV0VG9rZW5zOiA1MCB9LFxuICAgIH07XG4gIH1cblxuICByZXNldCgpOiB2b2lkIHtcbiAgICB0aGlzLnJlc3BvbnNlcyA9IFtdO1xuICAgIHRoaXMucmVzcG9uc2VJbmRleCA9IDA7XG4gICAgdGhpcy5jYWxsSGlzdG9yeSA9IFtdO1xuICB9XG59XG5cbi8vIE1vY2sgVG9vbCBTdWl0ZSBmb3IgdGVzdGluZ1xuZnVuY3Rpb24gY3JlYXRlTW9ja1Rvb2xTdWl0ZSgpOiBUb29sU3VpdGUge1xuICBjb25zdCB0b29sczogVG9vbERlZmluaXRpb25bXSA9IFtcbiAgICB7XG4gICAgICBuYW1lOiAnZWNobycsXG4gICAgICBkZXNjcmlwdGlvbjogJ0VjaG9lcyBiYWNrIHRoZSBpbnB1dCcsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgbWVzc2FnZTogeyB0eXBlOiAnc3RyaW5nJywgZGVzY3JpcHRpb246ICdNZXNzYWdlIHRvIGVjaG8nIH0sXG4gICAgICAgIH0sXG4gICAgICAgIHJlcXVpcmVkOiBbJ21lc3NhZ2UnXSxcbiAgICAgIH0sXG4gICAgICBoYW5kbGVyOiAoYXJncykgPT4gYEVjaG86ICR7YXJnc1snbWVzc2FnZSddfWAsXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAnYWRkJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnQWRkcyB0d28gbnVtYmVycycsXG4gICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgIHR5cGU6ICdvYmplY3QnLFxuICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgYTogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdGaXJzdCBudW1iZXInIH0sXG4gICAgICAgICAgYjogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdTZWNvbmQgbnVtYmVyJyB9LFxuICAgICAgICB9LFxuICAgICAgICByZXF1aXJlZDogWydhJywgJ2InXSxcbiAgICAgIH0sXG4gICAgICBoYW5kbGVyOiAoYXJncykgPT4ge1xuICAgICAgICBjb25zdCBhID0gTnVtYmVyKGFyZ3NbJ2EnXSk7XG4gICAgICAgIGNvbnN0IGIgPSBOdW1iZXIoYXJnc1snYiddKTtcbiAgICAgICAgcmV0dXJuIGBSZXN1bHQ6ICR7YSArIGJ9YDtcbiAgICAgIH0sXG4gICAgfSxcbiAgICB7XG4gICAgICBuYW1lOiAncmVhZF9maWxlJyxcbiAgICAgIGRlc2NyaXB0aW9uOiAnUmVhZHMgYSBmaWxlJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBwYXRoOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0ZpbGUgcGF0aCcgfSxcbiAgICAgICAgfSxcbiAgICAgICAgcmVxdWlyZWQ6IFsncGF0aCddLFxuICAgICAgfSxcbiAgICAgIGhhbmRsZXI6IChhcmdzKSA9PiBgQ29udGVudCBvZiAke2FyZ3NbJ3BhdGgnXX06IFttb2NrIGNvbnRlbnRdYCxcbiAgICAgIGNhY2hlYWJsZTogdHJ1ZSxcbiAgICB9LFxuICAgIHtcbiAgICAgIG5hbWU6ICdzbG93X29wZXJhdGlvbicsXG4gICAgICBkZXNjcmlwdGlvbjogJ1NpbXVsYXRlcyBhIHNsb3cgb3BlcmF0aW9uJyxcbiAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgdHlwZTogJ29iamVjdCcsXG4gICAgICAgIHByb3BlcnRpZXM6IHtcbiAgICAgICAgICBkdXJhdGlvbjogeyB0eXBlOiAnbnVtYmVyJywgZGVzY3JpcHRpb246ICdEdXJhdGlvbiBpbiBtcycgfSxcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBoYW5kbGVyOiBhc3luYyAoYXJncykgPT4ge1xuICAgICAgICBjb25zdCBkdXJhdGlvbiA9IE51bWJlcihhcmdzWydkdXJhdGlvbiddKSB8fCAxMDA7XG4gICAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIE1hdGgubWluKGR1cmF0aW9uLCAvKiBUT0RPOiBFeHRyYWN0IGNvbnN0YW50ICovIC8qIFRPRE86IEV4dHJhY3QgY29uc3RhbnQgKi8gMTAwMCkpKTtcbiAgICAgICAgcmV0dXJuICdPcGVyYXRpb24gY29tcGxldGVkJztcbiAgICAgIH0sXG4gICAgfSxcbiAgXTtcblxuICByZXR1cm4ge1xuICAgIGlkOiAndGVzdC5tb2NrLXRvb2xzJyxcbiAgICBkZXNjcmlwdGlvbjogJ01vY2sgdG9vbHMgZm9yIHRlc3RpbmcnLFxuICAgIHRvb2xzLFxuICB9O1xufVxuXG5mdW5jdGlvbiBjcmVhdGVNb2NrRGlmZlN1aXRlKCk6IFRvb2xTdWl0ZSB7XG4gIHJldHVybiB7XG4gICAgaWQ6ICd0ZXN0Lm1vY2stZGlmZicsXG4gICAgZGVzY3JpcHRpb246ICdNb2NrIGdpdCBkaWZmIHRvb2wgZm9yIHNuYXBzaG90IHRyYWNraW5nJyxcbiAgICB0b29sczogW1xuICAgICAge1xuICAgICAgICBuYW1lOiAnZ2l0X2RpZmZfbW9jaycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnUmV0dXJucyBtb2NrIGdpdCBkaWZmIG91dHB1dCcsXG4gICAgICAgIHBhcmFtZXRlcnM6IHtcbiAgICAgICAgICB0eXBlOiAnb2JqZWN0JyxcbiAgICAgICAgICBwcm9wZXJ0aWVzOiB7XG4gICAgICAgICAgICBjb21tYW5kOiB7IHR5cGU6ICdzdHJpbmcnLCBkZXNjcmlwdGlvbjogJ0dpdCBkaWZmIGNvbW1hbmQnIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgICByZXF1aXJlZDogWydjb21tYW5kJ10sXG4gICAgICAgIH0sXG4gICAgICAgIGhhbmRsZXI6IChhcmdzKSA9PiBgbW9jayBkaWZmIGZvciAke2FyZ3NbJ2NvbW1hbmQnXSA/PyAnJ31gLFxuICAgICAgfSxcbiAgICBdLFxuICB9O1xufVxuXG5kZXNjcmliZSgnQWdlbnQgUnVudGltZSBJbnRlZ3JhdGlvbicsICgpID0+IHtcbiAgbGV0IHByb3ZpZGVyOiBNb2NrTExNUHJvdmlkZXI7XG4gIGxldCB0b29sUnVudGltZTogVG9vbFJ1bnRpbWU7XG4gIGxldCBjb250ZXh0TWFuYWdlcjogQ29udGV4dE1hbmFnZXI7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgcHJvdmlkZXIgPSBuZXcgTW9ja0xMTVByb3ZpZGVyKCk7XG4gICAgdG9vbFJ1bnRpbWUgPSBuZXcgVG9vbFJ1bnRpbWUoKTtcbiAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tUb29sU3VpdGUoKSk7XG4gICAgY29udGV4dE1hbmFnZXIgPSBjcmVhdGVEZWZhdWx0Q29udGV4dE1hbmFnZXIoe1xuICAgICAgbWF4VG9rZW5zOiAxMDAwMCxcbiAgICAgIHRhcmdldFRva2VuczogNzAwMCxcbiAgICB9KTtcbiAgfSk7XG5cbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICBwcm92aWRlci5yZXNldCgpO1xuICB9KTtcblxuICBkZXNjcmliZSgnQmFzaWMgTWVzc2FnZSBIYW5kbGluZycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgc2VuZCBhIHNpbXBsZSBtZXNzYWdlIGFuZCByZWNlaXZlIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0hlbGxvISBIb3cgY2FuIEkgaGVscCB5b3U/Jyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZ2VudC5zZW5kKCdIZWxsbycpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvQmUoJ0hlbGxvISBIb3cgY2FuIEkgaGVscCB5b3U/Jyk7XG4gICAgICBleHBlY3QocHJvdmlkZXIuY2FsbEhpc3RvcnkubGVuZ3RoKS50b0JlKDEpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIG1haW50YWluIGNvbnZlcnNhdGlvbiBoaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0ZpcnN0IHJlc3BvbnNlJyk7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnU2Vjb25kIHJlc3BvbnNlJyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnRmlyc3QgbWVzc2FnZScpO1xuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnU2Vjb25kIG1lc3NhZ2UnKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IGFnZW50LmdldEhpc3RvcnkoKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5Lmxlbmd0aCkudG9CZSg1KTsgLy8gc3lzdGVtICsgdXNlciArIGFzc2lzdGFudCArIHVzZXIgKyBhc3Npc3RhbnRcbiAgICAgIGV4cGVjdChoaXN0b3J5WzBdPy5yb2xlKS50b0JlKCdzeXN0ZW0nKTtcbiAgICAgIGV4cGVjdChoaXN0b3J5WzFdPy5yb2xlKS50b0JlKCd1c2VyJyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVsyXT8ucm9sZSkudG9CZSgnYXNzaXN0YW50Jyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVszXT8ucm9sZSkudG9CZSgndXNlcicpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbNF0/LnJvbGUpLnRvQmUoJ2Fzc2lzdGFudCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNsZWFyIGhpc3RvcnkgY29ycmVjdGx5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlJyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnSGVsbG8nKTtcbiAgICAgIGFnZW50LmNsZWFySGlzdG9yeSgpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gYWdlbnQuZ2V0SGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDEpOyAvLyBPbmx5IHN5c3RlbSBtZXNzYWdlXG4gICAgICBleHBlY3QoaGlzdG9yeVswXT8ucm9sZSkudG9CZSgnc3lzdGVtJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbG9hZCBoaXN0b3J5IGZyb20gcHJldmlvdXMgc2Vzc2lvbicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHByZXZpb3VzSGlzdG9yeTogQ29udmVyc2F0aW9uTWVzc2FnZVtdID0gW1xuICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiAnUHJldmlvdXMgc3lzdGVtIHByb21wdCcgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdQcmV2aW91cyB1c2VyIG1lc3NhZ2UnIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdQcmV2aW91cyBhc3Npc3RhbnQgcmVzcG9uc2UnIH0sXG4gICAgICBdO1xuXG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ05ldyBzeXN0ZW0gcHJvbXB0JyxcbiAgICAgIH0pO1xuXG4gICAgICBhZ2VudC5sb2FkSGlzdG9yeShwcmV2aW91c0hpc3RvcnkpO1xuXG4gICAgICBjb25zdCBoaXN0b3J5ID0gYWdlbnQuZ2V0SGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDMpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0/LmNvbnRlbnQpLnRvQmUoJ1ByZXZpb3VzIHN5c3RlbSBwcm9tcHQnKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rvb2wgRXhlY3V0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBleGVjdXRlIHRvb2wgY2FsbHMgZnJvbSBwcm92aWRlciByZXNwb25zZScsIGFzeW5jICgpID0+IHtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVG9vbENhbGxSZXNwb25zZSgnSSB3aWxsIGVjaG8geW91ciBtZXNzYWdlJywgW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICAgIG5hbWU6ICdlY2hvJyxcbiAgICAgICAgICBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ0hlbGxvLCBXb3JsZCEnIH0sXG4gICAgICAgIH0sXG4gICAgICBdKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdUaGUgZWNobyByZXN1bHQgd2FzOiBFY2hvOiBIZWxsbywgV29ybGQhJyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICB9KTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZ2VudC5zZW5kKCdFY2hvIFwiSGVsbG8sIFdvcmxkIVwiJyk7XG5cbiAgICAgIGV4cGVjdChyZXNwb25zZSkudG9CZSgnVGhlIGVjaG8gcmVzdWx0IHdhczogRWNobzogSGVsbG8sIFdvcmxkIScpO1xuICAgICAgZXhwZWN0KHByb3ZpZGVyLmNhbGxIaXN0b3J5Lmxlbmd0aCkudG9CZSgyKTsgLy8gSW5pdGlhbCArIGFmdGVyIHRvb2wgcmVzdWx0XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgZXhlY3V0ZSBtdWx0aXBsZSB0b29sIGNhbGxzIGluIHNlcXVlbmNlJywgYXN5bmMgKCkgPT4ge1xuICAgICAgcHJvdmlkZXIucXVldWVUb29sQ2FsbFJlc3BvbnNlKCdJIHdpbGwgYWRkIHNvbWUgbnVtYmVycycsIFtcbiAgICAgICAgeyBpZDogJ2NhbGxfMScsIG5hbWU6ICdhZGQnLCBhcmd1bWVudHM6IHsgYTogNSwgYjogMyB9IH0sXG4gICAgICAgIHsgaWQ6ICdjYWxsXzInLCBuYW1lOiAnYWRkJywgYXJndW1lbnRzOiB7IGE6IDEwLCBiOiA3IH0gfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1RoZSByZXN1bHRzIGFyZSA4IGFuZCAxNycpO1xuXG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgYWdlbnQuc2VuZCgnQWRkIDUrMyBhbmQgMTArNycpO1xuXG4gICAgICBleHBlY3QocmVzcG9uc2UpLnRvQmUoJ1RoZSByZXN1bHRzIGFyZSA4IGFuZCAxNycpO1xuXG4gICAgICAvLyBDaGVjayB0b29sIHJlc3VsdHMgYXJlIGluIGhpc3RvcnlcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhZ2VudC5nZXRIaXN0b3J5KCk7XG4gICAgICBjb25zdCB0b29sTWVzc2FnZXMgPSBoaXN0b3J5LmZpbHRlcigobSkgPT4gbS5yb2xlID09PSAndG9vbCcpO1xuICAgICAgZXhwZWN0KHRvb2xNZXNzYWdlcy5sZW5ndGgpLnRvQmUoMik7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgdHJhY2sgdG9vbCBjYWxscyB2aWEgb2JzZXJ2ZXInLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCB0b29sU3RhcnRzOiBzdHJpbmdbXSA9IFtdO1xuICAgICAgY29uc3QgdG9vbFJlc3VsdHM6IHN0cmluZ1tdID0gW107XG5cbiAgICAgIGNvbnN0IG9ic2VydmVyID0ge1xuICAgICAgICBvblRvb2xTdGFydDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCkgPT4gdG9vbFN0YXJ0cy5wdXNoKGNhbGwubmFtZSksXG4gICAgICAgIG9uVG9vbFJlc3VsdDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCwgb3V0cHV0OiBzdHJpbmcpID0+XG4gICAgICAgICAgdG9vbFJlc3VsdHMucHVzaChgJHtjYWxsLm5hbWV9OiAke291dHB1dH1gKSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IG9ic2VydmVyIH0pO1xuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShjcmVhdGVNb2NrVG9vbFN1aXRlKCkpO1xuXG4gICAgICBwcm92aWRlci5xdWV1ZVRvb2xDYWxsUmVzcG9uc2UoJ0V4ZWN1dGluZyBlY2hvJywgW1xuICAgICAgICB7IGlkOiAnY2FsbF8xJywgbmFtZTogJ2VjaG8nLCBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ3Rlc3QnIH0gfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0RvbmUnKTtcblxuICAgICAgY29uc3QgYWdlbnQgPSBuZXcgQWdlbnRSdW50aW1lKHtcbiAgICAgICAgcHJvdmlkZXIsXG4gICAgICAgIHRvb2xSdW50aW1lLFxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcbiAgICAgIH0pO1xuXG4gICAgICBhd2FpdCBhZ2VudC5zZW5kKCdFY2hvIHRlc3QnKTtcblxuICAgICAgZXhwZWN0KHRvb2xTdGFydHMpLnRvQ29udGFpbignZWNobycpO1xuICAgICAgZXhwZWN0KHRvb2xSZXN1bHRzLnNvbWUoKHIpID0+IHIuaW5jbHVkZXMoJ0VjaG86IHRlc3QnKSkpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdDYWxsYmFja3MnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNhbGwgb25Bc3Npc3RhbnRNZXNzYWdlIGNhbGxiYWNrJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbWVzc2FnZXM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBjYWxsYmFja3M6IEFnZW50Q2FsbGJhY2tzID0ge1xuICAgICAgICBvbkFzc2lzdGFudE1lc3NhZ2U6IChjb250ZW50KSA9PiBtZXNzYWdlcy5wdXNoKGNvbnRlbnQpLFxuICAgICAgfTtcblxuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0hlbGxvIHRoZXJlIScpO1xuXG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuICAgICAgICBjYWxsYmFja3MsXG4gICAgICB9KTtcblxuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnSGknKTtcblxuICAgICAgZXhwZWN0KG1lc3NhZ2VzKS50b0NvbnRhaW4oJ0hlbGxvIHRoZXJlIScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNhbGwgb25Db250ZXh0UHJ1bmVkIHdoZW4gY29udGV4dCBpcyBwcnVuZWQnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgcHJ1bmVkQ291bnQgPSAwO1xuICAgICAgY29uc3QgY2FsbGJhY2tzOiBBZ2VudENhbGxiYWNrcyA9IHtcbiAgICAgICAgb25Db250ZXh0UHJ1bmVkOiAoY291bnQpID0+IHtcbiAgICAgICAgICBwcnVuZWRDb3VudCA9IGNvdW50O1xuICAgICAgICB9LFxuICAgICAgfTtcblxuICAgICAgLy8gQ3JlYXRlIGEgY29udGV4dCBtYW5hZ2VyIHRoYXQgd2lsbCB0cmlnZ2VyIHBydW5pbmdcbiAgICAgIGNvbnN0IHNtYWxsQ29udGV4dE1hbmFnZXIgPSBjcmVhdGVEZWZhdWx0Q29udGV4dE1hbmFnZXIoe1xuICAgICAgICBtYXhUb2tlbnM6IDUwMCxcbiAgICAgICAgdGFyZ2V0VG9rZW5zOiAyMDAsXG4gICAgICAgIHByZXNlcnZlUmVjZW50TWVzc2FnZXM6IDIsXG4gICAgICB9KTtcblxuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlIDEnKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdSZXNwb25zZSAyJyk7XG4gICAgICBwcm92aWRlci5xdWV1ZVRleHRSZXNwb25zZSgnUmVzcG9uc2UgMycpO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlIDQnKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdSZXNwb25zZSA1Jyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICAgIGNhbGxiYWNrcyxcbiAgICAgICAgY29udGV4dE1hbmFnZXI6IHNtYWxsQ29udGV4dE1hbmFnZXIsXG4gICAgICB9KTtcblxuICAgICAgLy8gRmlsbCB1cCB0aGUgY29udGV4dFxuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCA1OyBpKyspIHtcbiAgICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnQScucmVwZWF0KDEwMCkpO1xuICAgICAgfVxuXG4gICAgICAvLyBDb250ZXh0IHNob3VsZCBoYXZlIGJlZW4gcHJ1bmVkIGF0IHNvbWUgcG9pbnRcbiAgICAgIC8vIE5vdGU6IGV4YWN0IGJlaGF2aW9yIGRlcGVuZHMgb24gdG9rZW4gZXN0aW1hdGlvblxuICAgICAgZXhwZWN0KHBydW5lZENvdW50KS50b0JlR3JlYXRlclRoYW5PckVxdWFsKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ2FuY2VsbGF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCBoYW5kbGUgY2FuY2VsbGF0aW9uIHJlcXVlc3QgZHVyaW5nIHByb2Nlc3NpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICBsZXQgY2FuY2VsbGVkQ2FsbGVkID0gZmFsc2U7XG4gICAgICBjb25zdCBjYWxsYmFja3M6IEFnZW50Q2FsbGJhY2tzID0ge1xuICAgICAgICBvbkNhbmNlbGxlZDogKCkgPT4ge1xuICAgICAgICAgIGNhbmNlbGxlZENhbGxlZCA9IHRydWU7XG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBRdWV1ZSBhIHNsb3cgb3BlcmF0aW9uXG4gICAgICBwcm92aWRlci5xdWV1ZVRvb2xDYWxsUmVzcG9uc2UoJ1J1bm5pbmcgc2xvdyBvcGVyYXRpb24nLCBbXG4gICAgICAgIHsgaWQ6ICdjYWxsXzEnLCBuYW1lOiAnc2xvd19vcGVyYXRpb24nLCBhcmd1bWVudHM6IHsgZHVyYXRpb246IDUwMCB9IH0sXG4gICAgICBdKTtcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdEb25lJyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICAgIGNhbGxiYWNrcyxcbiAgICAgIH0pO1xuXG4gICAgICAvLyBSZXF1ZXN0IGNhbmNlbGxhdGlvbiBiZWZvcmUgY29tcGxldGluZ1xuICAgICAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgICAgIGFnZW50LnJlcXVlc3RDYW5jZWxsYXRpb24oKTtcbiAgICAgIH0sIDUwKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZ2VudC5zZW5kKCdSdW4gc2xvdyBvcGVyYXRpb24nKTtcblxuICAgICAgLy8gRWl0aGVyIGNhbmNlbGxlZCBvciBjb21wbGV0ZWQgZGVwZW5kaW5nIG9uIHRpbWluZ1xuICAgICAgaWYgKGNhbmNlbGxlZENhbGxlZCkge1xuICAgICAgICBleHBlY3QocmVzcG9uc2UpLnRvQ29udGFpbignY2FuY2VsbGVkJyk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgcmVzZXQgY2FuY2VsbGF0aW9uIGZsYWcgb24gbmV3IHJlcXVlc3QnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFJlcXVlc3QgY2FuY2VsbGF0aW9uXG4gICAgICBhZ2VudC5yZXF1ZXN0Q2FuY2VsbGF0aW9uKCk7XG4gICAgICBleHBlY3QoYWdlbnQuaXNDYW5jZWxsYXRpb25SZXF1ZXN0ZWQoKSkudG9CZSh0cnVlKTtcblxuICAgICAgLy8gU3RhcnQgbmV3IHJlcXVlc3RcbiAgICAgIHByb3ZpZGVyLnF1ZXVlVGV4dFJlc3BvbnNlKCdSZXNwb25zZScpO1xuICAgICAgYXdhaXQgYWdlbnQuc2VuZCgnSGVsbG8nKTtcblxuICAgICAgLy8gQ2FuY2VsbGF0aW9uIHNob3VsZCBiZSByZXNldCBhZnRlciByZXF1ZXN0IGNvbXBsZXRlc1xuICAgICAgZXhwZWN0KGFnZW50LmlzQ2FuY2VsbGF0aW9uUmVxdWVzdGVkKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnQ29udGV4dCBPdmVyZmxvdyBSZWNvdmVyeScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgYXR0ZW1wdCByZWNvdmVyeSBvbiBjb250ZXh0IG92ZXJmbG93IGVycm9yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgbGV0IHJlY292ZXJ5QXR0ZW1wdHMgPSAwO1xuICAgICAgY29uc3QgY2FsbGJhY2tzOiBBZ2VudENhbGxiYWNrcyA9IHtcbiAgICAgICAgb25Db250ZXh0UmVjb3Zlcnk6IChhdHRlbXB0KSA9PiB7XG4gICAgICAgICAgcmVjb3ZlcnlBdHRlbXB0cyA9IGF0dGVtcHQ7XG4gICAgICAgIH0sXG4gICAgICB9O1xuXG4gICAgICAvLyBGaXJzdCBjYWxsIHRocm93cyBvdmVyZmxvdywgdGhlbiBzdWNjZWVkc1xuICAgICAgcHJvdmlkZXIucXVldWVDb250ZXh0T3ZlcmZsb3dFcnJvcigpO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ1Jlc3BvbnNlIGFmdGVyIHJlY292ZXJ5Jyk7XG5cbiAgICAgIGNvbnN0IGFnZW50ID0gbmV3IEFnZW50UnVudGltZSh7XG4gICAgICAgIHByb3ZpZGVyLFxuICAgICAgICB0b29sUnVudGltZSxcbiAgICAgICAgc3lzdGVtUHJvbXB0OiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXG4gICAgICAgIGNhbGxiYWNrcyxcbiAgICAgICAgY29udGV4dE1hbmFnZXIsXG4gICAgICB9KTtcblxuICAgICAgLy8gUHJlLWZpbGwgc29tZSBoaXN0b3J5XG4gICAgICBhZ2VudC5sb2FkSGlzdG9yeShbXG4gICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6ICdTeXN0ZW0gcHJvbXB0JyB9LFxuICAgICAgICB7IHJvbGU6ICd1c2VyJywgY29udGVudDogJ09sZCBtZXNzYWdlIDEnIH0sXG4gICAgICAgIHsgcm9sZTogJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6ICdPbGQgcmVzcG9uc2UgMScgfSxcbiAgICAgICAgeyByb2xlOiAndXNlcicsIGNvbnRlbnQ6ICdPbGQgbWVzc2FnZSAyJyB9LFxuICAgICAgICB7IHJvbGU6ICdhc3Npc3RhbnQnLCBjb250ZW50OiAnT2xkIHJlc3BvbnNlIDInIH0sXG4gICAgICBdKTtcblxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBhZ2VudC5zZW5kKCdOZXcgbWVzc2FnZScpO1xuXG4gICAgICBleHBlY3QocmVjb3ZlcnlBdHRlbXB0cykudG9CZUdyZWF0ZXJUaGFuKDApO1xuICAgICAgZXhwZWN0KHJlc3BvbnNlKS50b0JlKCdSZXNwb25zZSBhZnRlciByZWNvdmVyeScpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnUnVubmluZyBTdGF0ZScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdHJhY2sgcnVubmluZyBzdGF0ZSBjb3JyZWN0bHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBhZ2VudCA9IG5ldyBBZ2VudFJ1bnRpbWUoe1xuICAgICAgICBwcm92aWRlcixcbiAgICAgICAgdG9vbFJ1bnRpbWUsXG4gICAgICAgIHN5c3RlbVByb21wdDogJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nLFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChhZ2VudC5pc1J1bm5pbmcoKSkudG9CZShmYWxzZSk7XG5cbiAgICAgIHByb3ZpZGVyLnF1ZXVlVG9vbENhbGxSZXNwb25zZSgnUHJvY2Vzc2luZycsIFtcbiAgICAgICAgeyBpZDogJ2NhbGxfMScsIG5hbWU6ICdzbG93X29wZXJhdGlvbicsIGFyZ3VtZW50czogeyBkdXJhdGlvbjogMTAwIH0gfSxcbiAgICAgIF0pO1xuICAgICAgcHJvdmlkZXIucXVldWVUZXh0UmVzcG9uc2UoJ0RvbmUnKTtcblxuICAgICAgY29uc3QgcHJvbWlzZSA9IGFnZW50LnNlbmQoJ1J1biBzb21ldGhpbmcnKTtcblxuICAgICAgLy8gU2hvdWxkIGJlIHJ1bm5pbmcgZHVyaW5nIGV4ZWN1dGlvblxuICAgICAgLy8gTm90ZTogVGhpcyB0aW1pbmcgaXMgdHJpY2t5IGluIHRlc3RzXG4gICAgICBhd2FpdCBwcm9taXNlO1xuXG4gICAgICBleHBlY3QoYWdlbnQuaXNSdW5uaW5nKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnVG9vbCBSdW50aW1lIEludGVncmF0aW9uJywgKCkgPT4ge1xuICBsZXQgdG9vbFJ1bnRpbWU6IFRvb2xSdW50aW1lO1xuICBsZXQgY29udGV4dE1hbmFnZXI6IENvbnRleHRNYW5hZ2VyO1xuXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgIGNvbnRleHRNYW5hZ2VyID0gY3JlYXRlRGVmYXVsdENvbnRleHRNYW5hZ2VyKHtcbiAgICAgIG1heFRva2VuczogMTAwMDAsXG4gICAgICBtYXhUb29sT3V0cHV0TGVuZ3RoOiAxMDAwLFxuICAgIH0pO1xuICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IGNvbnRleHRNYW5hZ2VyIH0pO1xuICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUoY3JlYXRlTW9ja1Rvb2xTdWl0ZSgpKTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rvb2wgUmVnaXN0cmF0aW9uJywgKCkgPT4ge1xuICAgIHRlc3QoJ3Nob3VsZCByZWdpc3RlciBhbmQgbGlzdCB0b29scycsICgpID0+IHtcbiAgICAgIGNvbnN0IHRvb2xzID0gdG9vbFJ1bnRpbWUubGlzdFByb3ZpZGVyVG9vbHMoKTtcbiAgICAgIGNvbnN0IHRvb2xOYW1lcyA9IHRvb2xzLm1hcCgodCkgPT4gdC5uYW1lKTtcblxuICAgICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdlY2hvJyk7XG4gICAgICBleHBlY3QodG9vbE5hbWVzKS50b0NvbnRhaW4oJ2FkZCcpO1xuICAgICAgZXhwZWN0KHRvb2xOYW1lcykudG9Db250YWluKCdyZWFkX2ZpbGUnKTtcbiAgICAgIGV4cGVjdCh0b29sTmFtZXMpLnRvQ29udGFpbignc2xvd19vcGVyYXRpb24nKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ3Nob3VsZCB1bnJlZ2lzdGVyIHN1aXRlJywgKCkgPT4ge1xuICAgICAgdG9vbFJ1bnRpbWUudW5yZWdpc3RlclN1aXRlKCd0ZXN0Lm1vY2stdG9vbHMnKTtcbiAgICAgIGNvbnN0IHRvb2xzID0gdG9vbFJ1bnRpbWUubGlzdFByb3ZpZGVyVG9vbHMoKTtcblxuICAgICAgZXhwZWN0KHRvb2xzLmZpbmQoKHQpID0+IHQubmFtZSA9PT0gJ2VjaG8nKSkudG9CZVVuZGVmaW5lZCgpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9vbCBFeGVjdXRpb24nLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGV4ZWN1dGUgdG9vbCBzdWNjZXNzZnVsbHknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzEnLFxuICAgICAgICBuYW1lOiAnZWNobycsXG4gICAgICAgIGFyZ3VtZW50czogeyBtZXNzYWdlOiAnSGVsbG8hJyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmUoJ0VjaG86IEhlbGxvIScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB1bmtub3duIHRvb2wgZ3JhY2VmdWxseScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICd1bmtub3duX3Rvb2wnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignbm90IGF2YWlsYWJsZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGhhbmRsZSB0b29sIGV4ZWN1dGlvbiBlcnJvcnMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBlcnJvclN1aXRlOiBUb29sU3VpdGUgPSB7XG4gICAgICAgIGlkOiAndGVzdC5lcnJvci10b29scycsXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2Vycm9yX3Rvb2wnLFxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBbHdheXMgdGhyb3dzIGFuIGVycm9yJyxcbiAgICAgICAgICAgIGhhbmRsZXI6ICgpID0+IHtcbiAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnRlbnRpb25hbCBlcnJvcicpO1xuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfTtcblxuICAgICAgdG9vbFJ1bnRpbWUucmVnaXN0ZXJTdWl0ZShlcnJvclN1aXRlKTtcblxuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF8xJyxcbiAgICAgICAgbmFtZTogJ2Vycm9yX3Rvb2wnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQ29udGFpbignRmFpbGVkJyk7XG4gICAgICBleHBlY3QocmVzdWx0KS50b0NvbnRhaW4oJ0ludGVudGlvbmFsIGVycm9yJyk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUb29sIENhY2hpbmcnLCAoKSA9PiB7XG4gICAgdGVzdCgnc2hvdWxkIGNhY2hlIGNhY2hlYWJsZSB0b29sIHJlc3VsdHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZUhpdHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBvYnNlcnZlciA9IHtcbiAgICAgICAgb25DYWNoZUhpdDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCkgPT4gY2FjaGVIaXRzLnB1c2goY2FsbC5uYW1lKSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IGNvbnRleHRNYW5hZ2VyLCBvYnNlcnZlciwgZW5hYmxlQ2FjaGU6IHRydWUgfSk7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tUb29sU3VpdGUoKSk7XG5cbiAgICAgIC8vIEZpcnN0IGNhbGxcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdyZWFkX2ZpbGUnLFxuICAgICAgICBhcmd1bWVudHM6IHsgcGF0aDogJy90ZXN0L2ZpbGUudHh0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlY29uZCBjYWxsIHdpdGggc2FtZSBhcmdzIHNob3VsZCBoaXQgY2FjaGVcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMicsXG4gICAgICAgIG5hbWU6ICdyZWFkX2ZpbGUnLFxuICAgICAgICBhcmd1bWVudHM6IHsgcGF0aDogJy90ZXN0L2ZpbGUudHh0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjYWNoZUhpdHMpLnRvQ29udGFpbigncmVhZF9maWxlJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgbm90IGNhY2hlIG5vbi1jYWNoZWFibGUgdG9vbHMnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBjYWNoZUhpdHM6IHN0cmluZ1tdID0gW107XG4gICAgICBjb25zdCBvYnNlcnZlciA9IHtcbiAgICAgICAgb25DYWNoZUhpdDogKGNhbGw6IFRvb2xDYWxsUmVxdWVzdCkgPT4gY2FjaGVIaXRzLnB1c2goY2FsbC5uYW1lKSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lID0gbmV3IFRvb2xSdW50aW1lKFtdLCB7IGNvbnRleHRNYW5hZ2VyLCBvYnNlcnZlciwgZW5hYmxlQ2FjaGU6IHRydWUgfSk7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tUb29sU3VpdGUoKSk7XG5cbiAgICAgIC8vIEZpcnN0IGNhbGxcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdlY2hvJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IG1lc3NhZ2U6ICd0ZXN0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIFNlY29uZCBjYWxsIHNob3VsZCBub3QgaGl0IGNhY2hlXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzInLFxuICAgICAgICBuYW1lOiAnZWNobycsXG4gICAgICAgIGFyZ3VtZW50czogeyBtZXNzYWdlOiAndGVzdCcgfSxcbiAgICAgIH0pO1xuXG4gICAgICBleHBlY3QoY2FjaGVIaXRzKS5ub3QudG9Db250YWluKCdlY2hvJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgY2xlYXIgY2FjaGUnLCBhc3luYyAoKSA9PiB7XG4gICAgICB0b29sUnVudGltZSA9IG5ldyBUb29sUnVudGltZShbXSwgeyBjb250ZXh0TWFuYWdlciwgZW5hYmxlQ2FjaGU6IHRydWUgfSk7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tUb29sU3VpdGUoKSk7XG5cbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdyZWFkX2ZpbGUnLFxuICAgICAgICBhcmd1bWVudHM6IHsgcGF0aDogJy90ZXN0L2ZpbGUudHh0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IHN0YXRzQmVmb3JlQ2xlYXIgPSB0b29sUnVudGltZS5nZXRDYWNoZVN0YXRzKCk7XG4gICAgICBleHBlY3Qoc3RhdHNCZWZvcmVDbGVhci5lbnRyaWVzKS50b0JlR3JlYXRlclRoYW4oMCk7XG5cbiAgICAgIHRvb2xSdW50aW1lLmNsZWFyQ2FjaGUoKTtcblxuICAgICAgY29uc3Qgc3RhdHNBZnRlckNsZWFyID0gdG9vbFJ1bnRpbWUuZ2V0Q2FjaGVTdGF0cygpO1xuICAgICAgZXhwZWN0KHN0YXRzQWZ0ZXJDbGVhci5lbnRyaWVzKS50b0JlKDApO1xuICAgIH0pO1xuXG4gICAgdGVzdCgncmVzcGVjdHMgcGVyLXRvb2wgY2FjaGUgVFRMIG92ZXJyaWRlcycsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGNhY2hlSGl0czogc3RyaW5nW10gPSBbXTtcbiAgICAgIGNvbnN0IG9ic2VydmVyID0ge1xuICAgICAgICBvbkNhY2hlSGl0OiAoY2FsbDogVG9vbENhbGxSZXF1ZXN0KSA9PiBjYWNoZUhpdHMucHVzaChjYWxsLm5hbWUpLFxuICAgICAgfTtcblxuICAgICAgdG9vbFJ1bnRpbWUgPSBuZXcgVG9vbFJ1bnRpbWUoW10sIHsgY29udGV4dE1hbmFnZXIsIG9ic2VydmVyLCBlbmFibGVDYWNoZTogdHJ1ZSB9KTtcbiAgICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUoe1xuICAgICAgICBpZDogJ3R0bC5vdmVycmlkZScsXG4gICAgICAgIHRvb2xzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ2J1cnN0JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmV0dXJucyBhIHRpbWVzdGFtcCBzdHJpbmcnLFxuICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4gYHRzOiR7RGF0ZS5ub3coKX1gLFxuICAgICAgICAgICAgY2FjaGVhYmxlOiB0cnVlLFxuICAgICAgICAgICAgY2FjaGVUdGxNczogNSxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdidXJzdCcsXG4gICAgICAgIGFyZ3VtZW50czoge30sXG4gICAgICB9KTtcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMicsXG4gICAgICAgIG5hbWU6ICdidXJzdCcsXG4gICAgICAgIGFyZ3VtZW50czoge30sXG4gICAgICB9KTtcblxuICAgICAgZXhwZWN0KGNhY2hlSGl0cykudG9FcXVhbChbJ2J1cnN0J10pO1xuXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAxNSkpO1xuXG4gICAgICBhd2FpdCB0b29sUnVudGltZS5leGVjdXRlKHtcbiAgICAgICAgaWQ6ICdjYWxsXzMnLFxuICAgICAgICBuYW1lOiAnYnVyc3QnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG5cbiAgICAgIGV4cGVjdChjYWNoZUhpdHMpLnRvRXF1YWwoWydidXJzdCddKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ1Rvb2wgSGlzdG9yeScsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdHJhY2sgdG9vbCBoaXN0b3J5JywgYXN5bmMgKCkgPT4ge1xuICAgICAgYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF8xJyxcbiAgICAgICAgbmFtZTogJ2VjaG8nLFxuICAgICAgICBhcmd1bWVudHM6IHsgbWVzc2FnZTogJ2ZpcnN0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMicsXG4gICAgICAgIG5hbWU6ICdhZGQnLFxuICAgICAgICBhcmd1bWVudHM6IHsgYTogMSwgYjogMiB9LFxuICAgICAgfSk7XG5cbiAgICAgIGNvbnN0IGhpc3RvcnkgPSB0b29sUnVudGltZS5nZXRUb29sSGlzdG9yeSgpO1xuICAgICAgZXhwZWN0KGhpc3RvcnkubGVuZ3RoKS50b0JlKDIpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0/LnRvb2xOYW1lKS50b0JlKCdlY2hvJyk7XG4gICAgICBleHBlY3QoaGlzdG9yeVsxXT8udG9vbE5hbWUpLnRvQmUoJ2FkZCcpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgnc2hvdWxkIGNsZWFyIHRvb2wgaGlzdG9yeScsIGFzeW5jICgpID0+IHtcbiAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdlY2hvJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IG1lc3NhZ2U6ICd0ZXN0JyB9LFxuICAgICAgfSk7XG5cbiAgICAgIHRvb2xSdW50aW1lLmNsZWFyVG9vbEhpc3RvcnkoKTtcblxuICAgICAgY29uc3QgaGlzdG9yeSA9IHRvb2xSdW50aW1lLmdldFRvb2xIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmUoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdEaWZmIFNuYXBzaG90cycsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgY2FwdHVyZSBnaXQgZGlmZiBvdXRwdXRzIGZyb20gdG9vbCBjb21tYW5kcycsIGFzeW5jICgpID0+IHtcbiAgICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUoY3JlYXRlTW9ja0RpZmZTdWl0ZSgpKTtcblxuICAgICAgYXdhaXQgdG9vbFJ1bnRpbWUuZXhlY3V0ZSh7XG4gICAgICAgIGlkOiAnY2FsbF9naXRfZGlmZicsXG4gICAgICAgIG5hbWU6ICdnaXRfZGlmZl9tb2NrJyxcbiAgICAgICAgYXJndW1lbnRzOiB7IGNvbW1hbmQ6ICdnaXQgZGlmZiAtLXN0YXQnIH0sXG4gICAgICB9KTtcblxuICAgICAgY29uc3Qgc25hcHNob3RzID0gdG9vbFJ1bnRpbWUuZ2V0RGlmZlNuYXBzaG90cygpO1xuICAgICAgZXhwZWN0KHNuYXBzaG90cy5sZW5ndGgpLnRvQmUoMSk7XG4gICAgICBleHBlY3Qoc25hcHNob3RzWzBdPy5jb21tYW5kKS50b0JlKCdnaXQgZGlmZiAtLXN0YXQnKTtcbiAgICAgIGV4cGVjdChzbmFwc2hvdHNbMF0/Lm91dHB1dCkudG9Db250YWluKCdtb2NrIGRpZmYgZm9yIGdpdCBkaWZmIC0tc3RhdCcpO1xuICAgICAgZXhwZWN0KHR5cGVvZiBzbmFwc2hvdHNbMF0/LnRpbWVzdGFtcCkudG9CZSgnbnVtYmVyJyk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCdzaG91bGQgYm91bmQgZGlmZiBzbmFwc2hvdHMgYW5kIHN1cHBvcnQgY2xlYXJpbmcnLCBhc3luYyAoKSA9PiB7XG4gICAgICB0b29sUnVudGltZS5yZWdpc3RlclN1aXRlKGNyZWF0ZU1vY2tEaWZmU3VpdGUoKSk7XG5cbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgNjsgaSsrKSB7XG4gICAgICAgIGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICAgIGlkOiBgY2FsbF8ke2l9YCxcbiAgICAgICAgICBuYW1lOiAnZ2l0X2RpZmZfbW9jaycsXG4gICAgICAgICAgYXJndW1lbnRzOiB7IGNvbW1hbmQ6IGBnaXQgZGlmZiAtLXN0YXQgJHtpfWAgfSxcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGNvbnN0IHNuYXBzaG90cyA9IHRvb2xSdW50aW1lLmdldERpZmZTbmFwc2hvdHMoKTtcbiAgICAgIGV4cGVjdChzbmFwc2hvdHMubGVuZ3RoKS50b0JlKDUpO1xuICAgICAgZXhwZWN0KHNuYXBzaG90c1swXT8uY29tbWFuZCkudG9CZSgnZ2l0IGRpZmYgLS1zdGF0IDEnKTtcbiAgICAgIGV4cGVjdChzbmFwc2hvdHNbc25hcHNob3RzLmxlbmd0aCAtIDFdPy5jb21tYW5kKS50b0JlKCdnaXQgZGlmZiAtLXN0YXQgNScpO1xuXG4gICAgICB0b29sUnVudGltZS5jbGVhckRpZmZTbmFwc2hvdHMoKTtcbiAgICAgIGV4cGVjdCh0b29sUnVudGltZS5nZXREaWZmU25hcHNob3RzKCkubGVuZ3RoKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgnVG9vbCBPdXRwdXQgVHJ1bmNhdGlvbicsICgpID0+IHtcbiAgICB0ZXN0KCdzaG91bGQgdHJ1bmNhdGUgbGFyZ2UgdG9vbCBvdXRwdXRzJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgbGFyZ2VTdWl0ZTogVG9vbFN1aXRlID0ge1xuICAgICAgICBpZDogJ3Rlc3QubGFyZ2Utb3V0cHV0JyxcbiAgICAgICAgdG9vbHM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBuYW1lOiAnbGFyZ2Vfb3V0cHV0JyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUmV0dXJucyBsYXJnZSBvdXRwdXQnLFxuICAgICAgICAgICAgaGFuZGxlcjogKCkgPT4gJ1gnLnJlcGVhdCg1MDAwKSwgLy8gRXhjZWVkcyBtYXhUb29sT3V0cHV0TGVuZ3RoXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH07XG5cbiAgICAgIHRvb2xSdW50aW1lLnJlZ2lzdGVyU3VpdGUobGFyZ2VTdWl0ZSk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRvb2xSdW50aW1lLmV4ZWN1dGUoe1xuICAgICAgICBpZDogJ2NhbGxfMScsXG4gICAgICAgIG5hbWU6ICdsYXJnZV9vdXRwdXQnLFxuICAgICAgICBhcmd1bWVudHM6IHt9LFxuICAgICAgfSk7XG5cbiAgICAgIC8vIE91dHB1dCBzaG91bGQgYmUgdHJ1bmNhdGVkXG4gICAgICBleHBlY3QocmVzdWx0Lmxlbmd0aCkudG9CZUxlc3NUaGFuKDUwMDApO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9Db250YWluKCd0cnVuY2F0ZWQnKTtcbiAgICB9KTtcbiAgfSk7XG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7QUFVQSxJQUFBQSxRQUFBLEdBQUFDLE9BQUE7QUFDQSxJQUFBQyxNQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxZQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxlQUFBLEdBQUFILE9BQUE7QUFiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBUUE7QUFDQSxNQUFNSSxlQUFlLENBQXdCO0VBQ25DQyxTQUFTLEdBSVosRUFBRTtFQUNDQyxhQUFhLEdBQUcsQ0FBQztFQUNsQkMsV0FBVyxHQUE0QixFQUFFO0VBRWhEQyxpQkFBaUJBLENBQUNDLE9BQWUsRUFBUTtJQUN2QyxJQUFJLENBQUNKLFNBQVMsQ0FBQ0ssSUFBSSxDQUFDO01BQUVDLElBQUksRUFBRSxNQUFNO01BQUVGO0lBQVEsQ0FBQyxDQUFDO0VBQ2hEO0VBRUFHLHFCQUFxQkEsQ0FBQ0gsT0FBZSxFQUFFSSxTQUE0QixFQUFRO0lBQ3pFLElBQUksQ0FBQ1IsU0FBUyxDQUFDSyxJQUFJLENBQUM7TUFBRUMsSUFBSSxFQUFFLFlBQVk7TUFBRUYsT0FBTztNQUFFSTtJQUFVLENBQUMsQ0FBQztFQUNqRTtFQUVBQyx5QkFBeUJBLENBQUEsRUFBUztJQUNoQyxJQUFJLENBQUNULFNBQVMsQ0FBQ0ssSUFBSSxDQUFDO01BQUVDLElBQUksRUFBRSxNQUFNO01BQUVGLE9BQU8sRUFBRTtJQUFlLENBQUMsQ0FBQztFQUNoRTtFQUVBLE1BQU1NLFFBQVFBLENBQUNDLFFBQStCLEVBSzNDO0lBQ0QsSUFBSSxDQUFDVCxXQUFXLENBQUNHLElBQUks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