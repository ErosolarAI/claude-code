{"code":"var __defProp=Object.defineProperty;var __name=(target,value)=>__defProp(target,\"name\",{value,configurable:true});import{theme}from\"./theme.js\";import{isPlainOutputMode}from\"./outputMode.js\";const MIN_WIDTH=20;const MAX_WIDTH=120;const ULTRA_NARROW_WIDTH=30;const DEFAULT_WIDTH=80;const ANSI_REGEX=/\\u001B\\[[0-9;]*m/g;function getTerminalColumns(defaultWidth=DEFAULT_WIDTH){try{if(process.stdout&&typeof process.stdout.columns===\"number\"&&Number.isFinite(process.stdout.columns)&&process.stdout.columns>0){return process.stdout.columns}const envColumns=process.env[\"COLUMNS\"];if(envColumns){const parsed=parseInt(envColumns,10);if(Number.isFinite(parsed)&&parsed>0){return parsed}}}catch{}return defaultWidth}__name(getTerminalColumns,\"getTerminalColumns\");function isUltraNarrowMode(){return getTerminalColumns()<ULTRA_NARROW_WIDTH}__name(isUltraNarrowMode,\"isUltraNarrowMode\");function getContentWidth(){const columns=getTerminalColumns();const usable=typeof columns===\"number\"&&Number.isFinite(columns)?columns-6:MAX_WIDTH;return clampWidth(usable,columns)}__name(getContentWidth,\"getContentWidth\");function wrapParagraph(text,width){const words=text.split(/\\s+/).filter(Boolean);if(!words.length){return[\"\"]}const lines=[];let current=words.shift();for(const word of words){if(measure(`${current} ${word}`)>width){lines.push(current);current=word}else{current+=` ${word}`}}lines.push(current);return lines}__name(wrapParagraph,\"wrapParagraph\");function wrapPreformatted(text,width){if(!text){return[\"\"]}const result=[];let remaining=text;while(measure(remaining)>width){result.push(remaining.slice(0,width));remaining=remaining.slice(width)}if(remaining){result.push(remaining)}return result.length?result:[\"\"]}__name(wrapPreformatted,\"wrapPreformatted\");function normalizePanelWidth(width){if(typeof width===\"number\"&&Number.isFinite(width)){return clampWidth(width,getTerminalColumns())}return clampWidth(getContentWidth(),getTerminalColumns())}__name(normalizePanelWidth,\"normalizePanelWidth\");function renderPanel(lines,options={}){if(isPlainOutputMode()){return renderPlainPanel(lines,options)}const width=normalizePanelWidth(options.width);const accent=options.accentColor??theme.primary;const iconSegment=options.icon?`${options.icon} `:\"\";const titleText=options.title?`${iconSegment}${options.title}`:\"\";const output=[];output.push(\"\");if(titleText){const paddedTitle=padLine(accent(truncate(titleText,width)),width);output.push(paddedTitle);output.push(\"\")}if(!lines.length){lines=[\"\"]}for(const line of lines){const padded=padLine(line,width);output.push(padded)}output.push(\"\");return output.join(\"\\n\")}__name(renderPanel,\"renderPanel\");function renderPlainPanel(lines,options={}){const accent=options.accentColor??theme.primary;const iconSegment=options.icon?`${options.icon} `:\"\";const titleText=options.title?`${iconSegment}${options.title}`:\"\";const output=[];if(titleText){output.push(`[${accent(titleText)}]`);output.push(\"\")}if(!lines.length){lines=[\"\"]}for(const line of lines){output.push(line.trimEnd())}return output.join(\"\\n\")}__name(renderPlainPanel,\"renderPlainPanel\");function measure(text){return stripAnsi(text).length}__name(measure,\"measure\");function stripAnsi(text){return text.replace(ANSI_REGEX,\"\")}__name(stripAnsi,\"stripAnsi\");function clampWidth(value,columns){if(!Number.isFinite(value)||value<0){value=DEFAULT_WIDTH}const terminalMax=typeof columns===\"number\"&&Number.isFinite(columns)&&columns>0?Math.max(MIN_WIDTH,Math.floor(columns-4)):MAX_WIDTH;const effectiveMin=Math.min(MIN_WIDTH,terminalMax);const effectiveMax=Math.min(MAX_WIDTH,terminalMax);const normalized=Math.floor(value);return Math.max(effectiveMin,Math.min(normalized,effectiveMax))}__name(clampWidth,\"clampWidth\");function padLine(text,width){const visible=measure(text);if(visible===width){return text}if(visible>width){return truncate(text,width)}return`${text}${\" \".repeat(width-visible)}`}__name(padLine,\"padLine\");function truncate(text,width){const visible=stripAnsi(text);if(visible.length<=width){return text}const truncated=visible.slice(0,Math.max(1,width-1));return`${truncated}\\u2026`}__name(truncate,\"truncate\");export{getContentWidth,getTerminalColumns,isUltraNarrowMode,measure,normalizePanelWidth,padLine,renderPanel,stripAnsi,truncate,wrapParagraph,wrapPreformatted};\n","warnings":[],"map":{"version":3,"mappings":"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","names":[],"ignoreList":[],"sources":["/Volumes/4TB/GitHub/src/ui/layout.ts"],"sourcesContent":[null]}}